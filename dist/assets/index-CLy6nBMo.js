var S0e=Object.defineProperty;var B0e=(e,t,r)=>t in e?S0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var sB=(e,t,r)=>B0e(e,typeof t!="symbol"?t+"":t,r);function T0e(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const s=Object.getOwnPropertyDescriptor(a,n);s&&Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();var hgt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function I0e(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}),r}var iB={exports:{}},Cy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X9;function O0e(){if(X9)return Cy;X9=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,n,s){var o=null;if(s!==void 0&&(o=""+s),n.key!==void 0&&(o=""+n.key),"key"in n){s={};for(var l in n)l!=="key"&&(s[l]=n[l])}else s=n;return n=s.ref,{$$typeof:e,type:a,key:o,ref:n!==void 0?n:null,props:s}}return Cy.Fragment=t,Cy.jsx=r,Cy.jsxs=r,Cy}var Y9;function F0e(){return Y9||(Y9=1,iB.exports=O0e()),iB.exports}var i=F0e(),oB={exports:{}},aa={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J9;function D0e(){if(J9)return aa;J9=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(K){return K===null||typeof K!="object"?null:(K=f&&K[f]||K["@@iterator"],typeof K=="function"?K:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(K,J,R){this.props=K,this.context=J,this.refs=x,this.updater=R||m}v.prototype.isReactComponent={},v.prototype.setState=function(K,J){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,J,"setState")},v.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function y(){}y.prototype=v.prototype;function w(K,J,R){this.props=K,this.context=J,this.refs=x,this.updater=R||m}var j=w.prototype=new y;j.constructor=w,g(j,v.prototype),j.isPureReactComponent=!0;var O=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},T=Object.prototype.hasOwnProperty;function C(K,J,R,F,W,X){return R=X.ref,{$$typeof:e,type:K,key:J,ref:R!==void 0?R:null,props:X}}function _(K,J){return C(K.type,J,void 0,void 0,void 0,K.props)}function S(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function L(K){var J={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(R){return J[R]})}var P=/\/+/g;function k(K,J){return typeof K=="object"&&K!==null&&K.key!=null?L(""+K.key):J.toString(36)}function M(){}function U(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(M,M):(K.status="pending",K.then(function(J){K.status==="pending"&&(K.status="fulfilled",K.value=J)},function(J){K.status==="pending"&&(K.status="rejected",K.reason=J)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function z(K,J,R,F,W){var X=typeof K;(X==="undefined"||X==="boolean")&&(K=null);var ne=!1;if(K===null)ne=!0;else switch(X){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(K.$$typeof){case e:case t:ne=!0;break;case d:return ne=K._init,z(ne(K._payload),J,R,F,W)}}if(ne)return W=W(K),ne=F===""?"."+k(K,0):F,O(W)?(R="",ne!=null&&(R=ne.replace(P,"$&/")+"/"),z(W,J,R,"",function(ae){return ae})):W!=null&&(S(W)&&(W=_(W,R+(W.key==null||K&&K.key===W.key?"":(""+W.key).replace(P,"$&/")+"/")+ne)),J.push(W)),1;ne=0;var le=F===""?".":F+":";if(O(K))for(var ie=0;ie<K.length;ie++)F=K[ie],X=le+k(F,ie),ne+=z(F,J,R,X,W);else if(ie=h(K),typeof ie=="function")for(K=ie.call(K),ie=0;!(F=K.next()).done;)F=F.value,X=le+k(F,ie++),ne+=z(F,J,R,X,W);else if(X==="object"){if(typeof K.then=="function")return z(U(K),J,R,F,W);throw J=String(K),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ne}function Q(K,J,R){if(K==null)return K;var F=[],W=0;return z(K,F,"","",function(X){return J.call(R,X,W++)}),F}function q(K){if(K._status===-1){var J=K._result;J=J(),J.then(function(R){(K._status===0||K._status===-1)&&(K._status=1,K._result=R)},function(R){(K._status===0||K._status===-1)&&(K._status=2,K._result=R)}),K._status===-1&&(K._status=0,K._result=J)}if(K._status===1)return K._result.default;throw K._result}var V=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Y(){}return aa.Children={map:Q,forEach:function(K,J,R){Q(K,function(){J.apply(this,arguments)},R)},count:function(K){var J=0;return Q(K,function(){J++}),J},toArray:function(K){return Q(K,function(J){return J})||[]},only:function(K){if(!S(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},aa.Component=v,aa.Fragment=r,aa.Profiler=n,aa.PureComponent=w,aa.StrictMode=a,aa.Suspense=c,aa.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,aa.__COMPILER_RUNTIME={__proto__:null,c:function(K){return B.H.useMemoCache(K)}},aa.cache=function(K){return function(){return K.apply(null,arguments)}},aa.cloneElement=function(K,J,R){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var F=g({},K.props),W=K.key,X=void 0;if(J!=null)for(ne in J.ref!==void 0&&(X=void 0),J.key!==void 0&&(W=""+J.key),J)!T.call(J,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&J.ref===void 0||(F[ne]=J[ne]);var ne=arguments.length-2;if(ne===1)F.children=R;else if(1<ne){for(var le=Array(ne),ie=0;ie<ne;ie++)le[ie]=arguments[ie+2];F.children=le}return C(K.type,W,void 0,void 0,X,F)},aa.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:s,_context:K},K},aa.createElement=function(K,J,R){var F,W={},X=null;if(J!=null)for(F in J.key!==void 0&&(X=""+J.key),J)T.call(J,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(W[F]=J[F]);var ne=arguments.length-2;if(ne===1)W.children=R;else if(1<ne){for(var le=Array(ne),ie=0;ie<ne;ie++)le[ie]=arguments[ie+2];W.children=le}if(K&&K.defaultProps)for(F in ne=K.defaultProps,ne)W[F]===void 0&&(W[F]=ne[F]);return C(K,X,void 0,void 0,null,W)},aa.createRef=function(){return{current:null}},aa.forwardRef=function(K){return{$$typeof:l,render:K}},aa.isValidElement=S,aa.lazy=function(K){return{$$typeof:d,_payload:{_status:-1,_result:K},_init:q}},aa.memo=function(K,J){return{$$typeof:u,type:K,compare:J===void 0?null:J}},aa.startTransition=function(K){var J=B.T,R={};B.T=R;try{var F=K(),W=B.S;W!==null&&W(R,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(Y,V)}catch(X){V(X)}finally{B.T=J}},aa.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},aa.use=function(K){return B.H.use(K)},aa.useActionState=function(K,J,R){return B.H.useActionState(K,J,R)},aa.useCallback=function(K,J){return B.H.useCallback(K,J)},aa.useContext=function(K){return B.H.useContext(K)},aa.useDebugValue=function(){},aa.useDeferredValue=function(K,J){return B.H.useDeferredValue(K,J)},aa.useEffect=function(K,J,R){var F=B.H;if(typeof R=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return F.useEffect(K,J)},aa.useId=function(){return B.H.useId()},aa.useImperativeHandle=function(K,J,R){return B.H.useImperativeHandle(K,J,R)},aa.useInsertionEffect=function(K,J){return B.H.useInsertionEffect(K,J)},aa.useLayoutEffect=function(K,J){return B.H.useLayoutEffect(K,J)},aa.useMemo=function(K,J){return B.H.useMemo(K,J)},aa.useOptimistic=function(K,J){return B.H.useOptimistic(K,J)},aa.useReducer=function(K,J,R){return B.H.useReducer(K,J,R)},aa.useRef=function(K){return B.H.useRef(K)},aa.useState=function(K){return B.H.useState(K)},aa.useSyncExternalStore=function(K,J,R){return B.H.useSyncExternalStore(K,J,R)},aa.useTransition=function(){return B.H.useTransition()},aa.version="19.1.1",aa}var Z9;function e1(){return Z9||(Z9=1,oB.exports=D0e()),oB.exports}var N=e1();const ct=Dl(N),P0e=T0e({__proto__:null,default:ct},[N]);var lB={exports:{}},jy={},cB={exports:{}},uB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eQ;function R0e(){return eQ||(eQ=1,function(e){function t(Q,q){var V=Q.length;Q.push(q);e:for(;0<V;){var Y=V-1>>>1,K=Q[Y];if(0<n(K,q))Q[Y]=q,Q[V]=K,V=Y;else break e}}function r(Q){return Q.length===0?null:Q[0]}function a(Q){if(Q.length===0)return null;var q=Q[0],V=Q.pop();if(V!==q){Q[0]=V;e:for(var Y=0,K=Q.length,J=K>>>1;Y<J;){var R=2*(Y+1)-1,F=Q[R],W=R+1,X=Q[W];if(0>n(F,V))W<K&&0>n(X,F)?(Q[Y]=X,Q[W]=V,Y=W):(Q[Y]=F,Q[R]=V,Y=R);else if(W<K&&0>n(X,V))Q[Y]=X,Q[W]=V,Y=W;else break e}}return q}function n(Q,q){var V=Q.sortIndex-q.sortIndex;return V!==0?V:Q.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function O(Q){for(var q=r(u);q!==null;){if(q.callback===null)a(u);else if(q.startTime<=Q)a(u),q.sortIndex=q.expirationTime,t(c,q);else break;q=r(u)}}function B(Q){if(x=!1,O(Q),!g)if(r(c)!==null)g=!0,T||(T=!0,k());else{var q=r(u);q!==null&&z(B,q.startTime-Q)}}var T=!1,C=-1,_=5,S=-1;function L(){return v?!0:!(e.unstable_now()-S<_)}function P(){if(v=!1,T){var Q=e.unstable_now();S=Q;var q=!0;try{e:{g=!1,x&&(x=!1,w(C),C=-1),m=!0;var V=h;try{t:{for(O(Q),f=r(c);f!==null&&!(f.expirationTime>Q&&L());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,h=f.priorityLevel;var K=Y(f.expirationTime<=Q);if(Q=e.unstable_now(),typeof K=="function"){f.callback=K,O(Q),q=!0;break t}f===r(c)&&a(c),O(Q)}else a(c);f=r(c)}if(f!==null)q=!0;else{var J=r(u);J!==null&&z(B,J.startTime-Q),q=!1}}break e}finally{f=null,h=V,m=!1}q=void 0}}finally{q?k():T=!1}}}var k;if(typeof j=="function")k=function(){j(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,U=M.port2;M.port1.onmessage=P,k=function(){U.postMessage(null)}}else k=function(){y(P,0)};function z(Q,q){C=y(function(){Q(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(Q){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var V=h;h=q;try{return Q()}finally{h=V}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(Q,q){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var V=h;h=Q;try{return q()}finally{h=V}},e.unstable_scheduleCallback=function(Q,q,V){var Y=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Y+V:Y):V=Y,Q){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=V+K,Q={id:d++,callback:q,priorityLevel:Q,startTime:V,expirationTime:K,sortIndex:-1},V>Y?(Q.sortIndex=V,t(u,Q),r(c)===null&&Q===r(u)&&(x?(w(C),C=-1):x=!0,z(B,V-Y))):(Q.sortIndex=K,t(c,Q),g||m||(g=!0,T||(T=!0,k()))),Q},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(Q){var q=h;return function(){var V=h;h=q;try{return Q.apply(this,arguments)}finally{h=V}}}}(uB)),uB}var tQ;function L0e(){return tQ||(tQ=1,cB.exports=R0e()),cB.exports}var dB={exports:{}},Ho={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rQ;function M0e(){if(rQ)return Ho;rQ=1;var e=e1();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ho.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ho.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Ho.flushSync=function(c){var u=o.T,d=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=u,a.p=d,a.d.f()}},Ho.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,a.d.C(c,u))},Ho.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},Ho.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?a.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:m}):d==="script"&&a.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ho.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);a.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&a.d.M(c)},Ho.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin);a.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ho.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);a.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else a.d.m(c)},Ho.requestFormReset=function(c){a.d.r(c)},Ho.unstable_batchedUpdates=function(c,u){return c(u)},Ho.useFormState=function(c,u,d){return o.H.useFormState(c,u,d)},Ho.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ho.version="19.1.1",Ho}var aQ;function WJ(){if(aQ)return dB.exports;aQ=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dB.exports=M0e(),dB.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nQ;function U0e(){if(nQ)return jy;nQ=1;var e=L0e(),t=e1(),r=WJ();function a(A){var p="https://react.dev/errors/"+A;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+A+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var p=A,b=A;if(A.alternate)for(;p.return;)p=p.return;else{A=p;do p=A,(p.flags&4098)!==0&&(b=p.return),A=p.return;while(A)}return p.tag===3?b:null}function o(A){if(A.tag===13){var p=A.memoizedState;if(p===null&&(A=A.alternate,A!==null&&(p=A.memoizedState)),p!==null)return p.dehydrated}return null}function l(A){if(s(A)!==A)throw Error(a(188))}function c(A){var p=A.alternate;if(!p){if(p=s(A),p===null)throw Error(a(188));return p!==A?null:A}for(var b=A,E=p;;){var H=b.return;if(H===null)break;var Z=H.alternate;if(Z===null){if(E=H.return,E!==null){b=E;continue}break}if(H.child===Z.child){for(Z=H.child;Z;){if(Z===b)return l(H),A;if(Z===E)return l(H),p;Z=Z.sibling}throw Error(a(188))}if(b.return!==E.return)b=H,E=Z;else{for(var pe=!1,Se=H.child;Se;){if(Se===b){pe=!0,b=H,E=Z;break}if(Se===E){pe=!0,E=H,b=Z;break}Se=Se.sibling}if(!pe){for(Se=Z.child;Se;){if(Se===b){pe=!0,b=Z,E=H;break}if(Se===E){pe=!0,E=Z,b=H;break}Se=Se.sibling}if(!pe)throw Error(a(189))}}if(b.alternate!==E)throw Error(a(190))}if(b.tag!==3)throw Error(a(188));return b.stateNode.current===b?A:p}function u(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A;for(A=A.child;A!==null;){if(p=u(A),p!==null)return p;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),j=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function k(A){return A===null||typeof A!="object"?null:(A=P&&A[P]||A["@@iterator"],typeof A=="function"?A:null)}var M=Symbol.for("react.client.reference");function U(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===M?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case B:return"Suspense";case T:return"SuspenseList";case S:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case m:return"Portal";case j:return(A.displayName||"Context")+".Provider";case w:return(A._context.displayName||"Context")+".Consumer";case O:var p=A.render;return A=A.displayName,A||(A=p.displayName||p.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case C:return p=A.displayName||null,p!==null?p:U(A.type)||"Memo";case _:p=A._payload,A=A._init;try{return U(A(p))}catch{}}return null}var z=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},Y=[],K=-1;function J(A){return{current:A}}function R(A){0>K||(A.current=Y[K],Y[K]=null,K--)}function F(A,p){K++,Y[K]=A.current,A.current=p}var W=J(null),X=J(null),ne=J(null),le=J(null);function ie(A,p){switch(F(ne,p),F(X,A),F(W,null),p.nodeType){case 9:case 11:A=(A=p.documentElement)&&(A=A.namespaceURI)?E9(A):0;break;default:if(A=p.tagName,p=p.namespaceURI)p=E9(p),A=C9(p,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}R(W),F(W,A)}function ae(){R(W),R(X),R(ne)}function Ae(A){A.memoizedState!==null&&F(le,A);var p=W.current,b=C9(p,A.type);p!==b&&(F(X,A),F(W,b))}function ke(A){X.current===A&&(R(W),R(X)),le.current===A&&(R(le),by._currentValue=V)}var re=Object.prototype.hasOwnProperty,Re=e.unstable_scheduleCallback,Le=e.unstable_cancelCallback,Te=e.unstable_shouldYield,de=e.unstable_requestPaint,Ce=e.unstable_now,me=e.unstable_getCurrentPriorityLevel,ye=e.unstable_ImmediatePriority,oe=e.unstable_UserBlockingPriority,fe=e.unstable_NormalPriority,be=e.unstable_LowPriority,Pe=e.unstable_IdlePriority,$e=e.log,Ke=e.unstable_setDisableYieldValue,nt=null,He=null;function it(A){if(typeof $e=="function"&&Ke(A),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(nt,A)}catch{}}var xt=Math.clz32?Math.clz32:Ve,Et=Math.log,gt=Math.LN2;function Ve(A){return A>>>=0,A===0?32:31-(Et(A)/gt|0)|0}var Bt=256,dr=4194304;function er(A){var p=A&42;if(p!==0)return p;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Er(A,p,b){var E=A.pendingLanes;if(E===0)return 0;var H=0,Z=A.suspendedLanes,pe=A.pingedLanes;A=A.warmLanes;var Se=E&134217727;return Se!==0?(E=Se&~Z,E!==0?H=er(E):(pe&=Se,pe!==0?H=er(pe):b||(b=Se&~A,b!==0&&(H=er(b))))):(Se=E&~Z,Se!==0?H=er(Se):pe!==0?H=er(pe):b||(b=E&~A,b!==0&&(H=er(b)))),H===0?0:p!==0&&p!==H&&(p&Z)===0&&(Z=H&-H,b=p&-p,Z>=b||Z===32&&(b&4194048)!==0)?p:H}function $r(A,p){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&p)===0}function br(A,p){switch(A){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kn(){var A=Bt;return Bt<<=1,(Bt&4194048)===0&&(Bt=256),A}function Pr(){var A=dr;return dr<<=1,(dr&62914560)===0&&(dr=4194304),A}function Pa(A){for(var p=[],b=0;31>b;b++)p.push(A);return p}function Fn(A,p){A.pendingLanes|=p,p!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Rr(A,p,b,E,H,Z){var pe=A.pendingLanes;A.pendingLanes=b,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=b,A.entangledLanes&=b,A.errorRecoveryDisabledLanes&=b,A.shellSuspendCounter=0;var Se=A.entanglements,Ge=A.expirationTimes,At=A.hiddenUpdates;for(b=pe&~b;0<b;){var _t=31-xt(b),Pt=1<<_t;Se[_t]=0,Ge[_t]=-1;var pt=At[_t];if(pt!==null)for(At[_t]=null,_t=0;_t<pt.length;_t++){var vt=pt[_t];vt!==null&&(vt.lane&=-536870913)}b&=~Pt}E!==0&&mr(A,E,0),Z!==0&&H===0&&A.tag!==0&&(A.suspendedLanes|=Z&~(pe&~p))}function mr(A,p,b){A.pendingLanes|=p,A.suspendedLanes&=~p;var E=31-xt(p);A.entangledLanes|=p,A.entanglements[E]=A.entanglements[E]|1073741824|b&4194090}function Yr(A,p){var b=A.entangledLanes|=p;for(A=A.entanglements;b;){var E=31-xt(b),H=1<<E;H&p|A[E]&p&&(A[E]|=p),b&=~H}}function ps(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Ya(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Dn(){var A=q.p;return A!==0?A:(A=window.event,A===void 0?32:V9(A.type))}function Rs(A,p){var b=q.p;try{return q.p=A,p()}finally{q.p=b}}var Zt=Math.random().toString(36).slice(2),xa="__reactFiber$"+Zt,la="__reactProps$"+Zt,Ia="__reactContainer$"+Zt,Ka="__reactEvents$"+Zt,Ja="__reactListeners$"+Zt,we="__reactHandles$"+Zt,Ue="__reactResources$"+Zt,Oe="__reactMarker$"+Zt;function De(A){delete A[xa],delete A[la],delete A[Ka],delete A[Ja],delete A[we]}function ge(A){var p=A[xa];if(p)return p;for(var b=A.parentNode;b;){if(p=b[Ia]||b[xa]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(A=S9(A);A!==null;){if(b=A[xa])return b;A=S9(A)}return p}A=b,b=A.parentNode}return null}function he(A){if(A=A[xa]||A[Ia]){var p=A.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return A}return null}function Be(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A.stateNode;throw Error(a(33))}function Qe(A){var p=A[Ue];return p||(p=A[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Fe(A){A[Oe]=!0}var qe=new Set,Xe={};function yt(A,p){wt(A,p),wt(A+"Capture",p)}function wt(A,p){for(Xe[A]=p,A=0;A<p.length;A++)qe.add(p[A])}var Ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tt={},Vt={};function jr(A){return re.call(Vt,A)?!0:re.call(Tt,A)?!1:Ht.test(A)?Vt[A]=!0:(Tt[A]=!0,!1)}function ea(A,p,b){if(jr(p))if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":A.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){A.removeAttribute(p);return}}A.setAttribute(p,""+b)}}function ta(A,p,b){if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttribute(p,""+b)}}function ia(A,p,b,E){if(E===null)A.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(b);return}A.setAttributeNS(p,b,""+E)}}var gs,To;function xs(A){if(gs===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);gs=p&&p[1]||"",To=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gs+A+To}var ii=!1;function Ls(A,p){if(!A||ii)return"";ii=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var Pt=function(){throw Error()};if(Object.defineProperty(Pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pt,[])}catch(vt){var pt=vt}Reflect.construct(A,[],Pt)}else{try{Pt.call()}catch(vt){pt=vt}A.call(Pt.prototype)}}else{try{throw Error()}catch(vt){pt=vt}(Pt=A())&&typeof Pt.catch=="function"&&Pt.catch(function(){})}}catch(vt){if(vt&&pt&&typeof vt.stack=="string")return[vt.stack,pt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var H=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");H&&H.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Z=E.DetermineComponentFrameRoot(),pe=Z[0],Se=Z[1];if(pe&&Se){var Ge=pe.split(`
`),At=Se.split(`
`);for(H=E=0;E<Ge.length&&!Ge[E].includes("DetermineComponentFrameRoot");)E++;for(;H<At.length&&!At[H].includes("DetermineComponentFrameRoot");)H++;if(E===Ge.length||H===At.length)for(E=Ge.length-1,H=At.length-1;1<=E&&0<=H&&Ge[E]!==At[H];)H--;for(;1<=E&&0<=H;E--,H--)if(Ge[E]!==At[H]){if(E!==1||H!==1)do if(E--,H--,0>H||Ge[E]!==At[H]){var _t=`
`+Ge[E].replace(" at new "," at ");return A.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",A.displayName)),_t}while(1<=E&&0<=H);break}}}finally{ii=!1,Error.prepareStackTrace=b}return(b=A?A.displayName||A.name:"")?xs(b):""}function Ei(A){switch(A.tag){case 26:case 27:case 5:return xs(A.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 15:return Ls(A.type,!1);case 11:return Ls(A.type.render,!1);case 1:return Ls(A.type,!0);case 31:return xs("Activity");default:return""}}function vn(A){try{var p="";do p+=Ei(A),A=A.return;while(A);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function oi(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function ff(A){var p=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function f0(A){var p=ff(A)?"checked":"value",b=Object.getOwnPropertyDescriptor(A.constructor.prototype,p),E=""+A[p];if(!A.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var H=b.get,Z=b.set;return Object.defineProperty(A,p,{configurable:!0,get:function(){return H.call(this)},set:function(pe){E=""+pe,Z.call(this,pe)}}),Object.defineProperty(A,p,{enumerable:b.enumerable}),{getValue:function(){return E},setValue:function(pe){E=""+pe},stopTracking:function(){A._valueTracker=null,delete A[p]}}}}function fu(A){A._valueTracker||(A._valueTracker=f0(A))}function BA(A){if(!A)return!1;var p=A._valueTracker;if(!p)return!0;var b=p.getValue(),E="";return A&&(E=ff(A)?A.checked?"true":"false":A.value),A=E,A!==b?(p.setValue(A),!0):!1}function Ci(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Af=/[\n"\\]/g;function ja(A){return A.replace(Af,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function ji(A,p,b,E,H,Z,pe,Se){A.name="",pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?A.type=pe:A.removeAttribute("type"),p!=null?pe==="number"?(p===0&&A.value===""||A.value!=p)&&(A.value=""+oi(p)):A.value!==""+oi(p)&&(A.value=""+oi(p)):pe!=="submit"&&pe!=="reset"||A.removeAttribute("value"),p!=null?hu(A,pe,oi(p)):b!=null?hu(A,pe,oi(b)):E!=null&&A.removeAttribute("value"),H==null&&Z!=null&&(A.defaultChecked=!!Z),H!=null&&(A.checked=H&&typeof H!="function"&&typeof H!="symbol"),Se!=null&&typeof Se!="function"&&typeof Se!="symbol"&&typeof Se!="boolean"?A.name=""+oi(Se):A.removeAttribute("name")}function Au(A,p,b,E,H,Z,pe,Se){if(Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(A.type=Z),p!=null||b!=null){if(!(Z!=="submit"&&Z!=="reset"||p!=null))return;b=b!=null?""+oi(b):"",p=p!=null?""+oi(p):b,Se||p===A.value||(A.value=p),A.defaultValue=p}E=E??H,E=typeof E!="function"&&typeof E!="symbol"&&!!E,A.checked=Se?A.checked:!!E,A.defaultChecked=!!E,pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"&&(A.name=pe)}function hu(A,p,b){p==="number"&&Ci(A.ownerDocument)===A||A.defaultValue===""+b||(A.defaultValue=""+b)}function Rl(A,p,b,E){if(A=A.options,p){p={};for(var H=0;H<b.length;H++)p["$"+b[H]]=!0;for(b=0;b<A.length;b++)H=p.hasOwnProperty("$"+A[b].value),A[b].selected!==H&&(A[b].selected=H),H&&E&&(A[b].defaultSelected=!0)}else{for(b=""+oi(b),p=null,H=0;H<A.length;H++){if(A[H].value===b){A[H].selected=!0,E&&(A[H].defaultSelected=!0);return}p!==null||A[H].disabled||(p=A[H])}p!==null&&(p.selected=!0)}}function Ra(A,p,b){if(p!=null&&(p=""+oi(p),p!==A.value&&(A.value=p),b==null)){A.defaultValue!==p&&(A.defaultValue=p);return}A.defaultValue=b!=null?""+oi(b):""}function mu(A,p,b,E){if(p==null){if(E!=null){if(b!=null)throw Error(a(92));if(z(E)){if(1<E.length)throw Error(a(93));E=E[0]}b=E}b==null&&(b=""),p=b}b=oi(p),A.defaultValue=b,E=A.textContent,E===b&&E!==""&&E!==null&&(A.value=E)}function Io(A,p){if(p){var b=A.firstChild;if(b&&b===A.lastChild&&b.nodeType===3){b.nodeValue=p;return}}A.textContent=p}var bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function A0(A,p,b){var E=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?A.setProperty(p,""):p==="float"?A.cssFloat="":A[p]="":E?A.setProperty(p,b):typeof b!="number"||b===0||bc.has(p)?p==="float"?A.cssFloat=b:A[p]=(""+b).trim():A[p]=b+"px"}function TA(A,p,b){if(p!=null&&typeof p!="object")throw Error(a(62));if(A=A.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?A.setProperty(E,""):E==="float"?A.cssFloat="":A[E]="");for(var H in p)E=p[H],p.hasOwnProperty(H)&&b[H]!==E&&A0(A,H,E)}else for(var Z in p)p.hasOwnProperty(Z)&&A0(A,Z,p[Z])}function IA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wc(A){return hf.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Ll=null;function cn(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Nc=null,Ml=null;function Sr(A){var p=he(A);if(p&&(A=p.stateNode)){var b=A[la]||null;e:switch(A=p.stateNode,p.type){case"input":if(ji(A,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=A;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+ja(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var E=b[p];if(E!==A&&E.form===A.form){var H=E[la]||null;if(!H)throw Error(a(90));ji(E,H.value,H.defaultValue,H.defaultValue,H.checked,H.defaultChecked,H.type,H.name)}}for(p=0;p<b.length;p++)E=b[p],E.form===A.form&&BA(E)}break e;case"textarea":Ra(A,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Rl(A,!!b.multiple,p,!1)}}}var Ul=!1;function h0(A,p,b){if(Ul)return A(p,b);Ul=!0;try{var E=A(p);return E}finally{if(Ul=!1,(Nc!==null||Ml!==null)&&(PE(),Nc&&(p=Nc,A=Ml,Ml=Nc=null,Sr(p),A)))for(p=0;p<A.length;p++)Sr(A[p])}}function Ui(A,p){var b=A.stateNode;if(b===null)return null;var E=b[la]||null;if(E===null)return null;b=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(A=A.type,E=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!E;break e;default:A=!1}if(A)return null;if(b&&typeof b!="function")throw Error(a(231,p,typeof b));return b}var Oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),co=!1;if(Oo)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){co=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{co=!1}var Fo=null,pu=null,Ec=null;function OA(){if(Ec)return Ec;var A,p=pu,b=p.length,E,H="value"in Fo?Fo.value:Fo.textContent,Z=H.length;for(A=0;A<b&&p[A]===H[A];A++);var pe=b-A;for(E=1;E<=pe&&p[b-E]===H[Z-E];E++);return Ec=H.slice(A,1<E?1-E:void 0)}function Do(A){var p=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&p===13&&(A=13)):A=p,A===10&&(A=13),32<=A||A===13?A:0}function Qi(){return!0}function Hl(){return!1}function vs(A){function p(b,E,H,Z,pe){this._reactName=b,this._targetInst=H,this.type=E,this.nativeEvent=Z,this.target=pe,this.currentTarget=null;for(var Se in A)A.hasOwnProperty(Se)&&(b=A[Se],this[Se]=b?b(Z):Z[Se]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?Qi:Hl,this.isPropagationStopped=Hl,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),p}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gu=vs(Aa),zl=d({},Aa,{view:0,detail:0}),FA=vs(zl),cd,ud,gl,Hi=d({},zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==gl&&(gl&&A.type==="mousemove"?(cd=A.screenX-gl.screenX,ud=A.screenY-gl.screenY):ud=cd=0,gl=A),cd)},movementY:function(A){return"movementY"in A?A.movementY:ud}}),bs=vs(Hi),m0=d({},Hi,{dataTransfer:0}),xu=vs(m0),ki=d({},zl,{relatedTarget:0}),vu=vs(ki),Cc=d({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),mf=vs(Cc),dd=d({},Aa,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),pf=vs(dd),DA=d({},Aa,{data:0}),fd=vs(DA),bu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ad={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hd(A){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(A):(A=gf[A])?!!p[A]:!1}function yu(){return hd}var p0=d({},zl,{key:function(A){if(A.key){var p=bu[A.key]||A.key;if(p!=="Unidentified")return p}return A.type==="keypress"?(A=Do(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Ad[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(A){return A.type==="keypress"?Do(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Do(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),jc=vs(p0),wu=d({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),md=vs(wu),zi=d({},zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),xf=vs(zi),ee=d({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ve=vs(ee),ze=d({},Hi,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),We=vs(ze),rt=d({},Aa,{newState:0,oldState:0}),Nt=vs(rt),Ut=[9,13,27,32],Wt=Oo&&"CompositionEvent"in window,D=null;Oo&&"documentMode"in document&&(D=document.documentMode);var se=Oo&&"TextEvent"in window&&!D,ue=Oo&&(!Wt||D&&8<D&&11>=D),_e=" ",tt=!1;function ft(A,p){switch(A){case"keyup":return Ut.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qt(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Br=!1;function ha(A,p){switch(A){case"compositionend":return Qt(p);case"keypress":return p.which!==32?null:(tt=!0,_e);case"textInput":return A=p.data,A===_e&&tt?null:A;default:return null}}function Gr(A,p){if(Br)return A==="compositionend"||!Wt&&ft(A,p)?(A=OA(),Ec=pu=Fo=null,Br=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return ue&&p.locale!=="ko"?null:p.data;default:return null}}var La={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Za(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p==="input"?!!La[A.type]:p==="textarea"}function Vl(A,p,b,E){Nc?Ml?Ml.push(E):Ml=[E]:Nc=E,p=HE(p,"onChange"),0<p.length&&(b=new gu("onChange","change",null,b,E),A.push({event:b,listeners:p}))}var ns=null,Po=null;function Nu(A){v9(A,0)}function vf(A){var p=Be(A);if(BA(p))return A}function g0(A,p){if(A==="change")return p}var PA=!1;if(Oo){var Ms;if(Oo){var bf="oninput"in document;if(!bf){var RA=document.createElement("div");RA.setAttribute("oninput","return;"),bf=typeof RA.oninput=="function"}Ms=bf}else Ms=!1;PA=Ms&&(!document.documentMode||9<document.documentMode)}function LA(){ns&&(ns.detachEvent("onpropertychange",x0),Po=ns=null)}function x0(A){if(A.propertyName==="value"&&vf(Po)){var p=[];Vl(p,Po,A,cn(A)),h0(Nu,p)}}function Ro(A,p,b){A==="focusin"?(LA(),ns=p,Po=b,ns.attachEvent("onpropertychange",x0)):A==="focusout"&&LA()}function Q1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return vf(Po)}function gp(A,p){if(A==="click")return vf(p)}function px(A,p){if(A==="input"||A==="change")return vf(p)}function $l(A,p){return A===p&&(A!==0||1/A===1/p)||A!==A&&p!==p}var li=typeof Object.is=="function"?Object.is:$l;function yf(A,p){if(li(A,p))return!0;if(typeof A!="object"||A===null||typeof p!="object"||p===null)return!1;var b=Object.keys(A),E=Object.keys(p);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var H=b[E];if(!re.call(p,H)||!li(A[H],p[H]))return!1}return!0}function xp(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function pd(A,p){var b=xp(A);A=0;for(var E;b;){if(b.nodeType===3){if(E=A+b.textContent.length,A<=p&&E>=p)return{node:b,offset:p-A};A=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=xp(b)}}function wf(A,p){return A&&p?A===p?!0:A&&A.nodeType===3?!1:p&&p.nodeType===3?wf(A,p.parentNode):"contains"in A?A.contains(p):A.compareDocumentPosition?!!(A.compareDocumentPosition(p)&16):!1:!1}function uo(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var p=Ci(A.document);p instanceof A.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)A=p.contentWindow;else break;p=Ci(A.document)}return p}function _i(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p&&(p==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||p==="textarea"||A.contentEditable==="true")}var Nf=Oo&&"documentMode"in document&&11>=document.documentMode,Lo=null,kc=null,Eu=null,_c=!1;function Xn(A,p,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;_c||Lo==null||Lo!==Ci(E)||(E=Lo,"selectionStart"in E&&_i(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Eu&&yf(Eu,E)||(Eu=E,E=HE(kc,"onSelect"),0<E.length&&(p=new gu("onSelect","select",null,p,b),A.push({event:p,listeners:E}),p.target=Lo)))}function Sc(A,p){var b={};return b[A.toLowerCase()]=p.toLowerCase(),b["Webkit"+A]="webkit"+p,b["Moz"+A]="moz"+p,b}var ys={animationend:Sc("Animation","AnimationEnd"),animationiteration:Sc("Animation","AnimationIteration"),animationstart:Sc("Animation","AnimationStart"),transitionrun:Sc("Transition","TransitionRun"),transitionstart:Sc("Transition","TransitionStart"),transitioncancel:Sc("Transition","TransitionCancel"),transitionend:Sc("Transition","TransitionEnd")},Mo={},MA={};Oo&&(MA=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Cu(A){if(Mo[A])return Mo[A];if(!ys[A])return A;var p=ys[A],b;for(b in p)if(p.hasOwnProperty(b)&&b in MA)return Mo[A]=p[b];return A}var v0=Cu("animationend"),Ef=Cu("animationiteration"),Cf=Cu("animationstart"),jf=Cu("transitionrun"),UA=Cu("transitionstart"),b0=Cu("transitioncancel"),kf=Cu("transitionend"),gd=new Map,QA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");QA.push("scrollEnd");function Yn(A,p){gd.set(A,p),yt(p,[A])}var xl=new WeakMap;function ca(A,p){if(typeof A=="object"&&A!==null){var b=xl.get(A);return b!==void 0?b:(p={value:A,source:p,stack:vn(p)},xl.set(A,p),p)}return{value:A,source:p,stack:vn(p)}}var ua=[],bn=0,ss=0;function Gl(){for(var A=bn,p=ss=bn=0;p<A;){var b=ua[p];ua[p++]=null;var E=ua[p];ua[p++]=null;var H=ua[p];ua[p++]=null;var Z=ua[p];if(ua[p++]=null,E!==null&&H!==null){var pe=E.pending;pe===null?H.next=H:(H.next=pe.next,pe.next=H),E.pending=H}Z!==0&&gx(b,H,Z)}}function _f(A,p,b,E){ua[bn++]=A,ua[bn++]=p,ua[bn++]=b,ua[bn++]=E,ss|=E,A.lanes|=E,A=A.alternate,A!==null&&(A.lanes|=E)}function Sf(A,p,b,E){return _f(A,p,b,E),HA(A)}function xd(A,p){return _f(A,null,null,p),HA(A)}function gx(A,p,b){A.lanes|=b;var E=A.alternate;E!==null&&(E.lanes|=b);for(var H=!1,Z=A.return;Z!==null;)Z.childLanes|=b,E=Z.alternate,E!==null&&(E.childLanes|=b),Z.tag===22&&(A=Z.stateNode,A===null||A._visibility&1||(H=!0)),A=Z,Z=Z.return;return A.tag===3?(Z=A.stateNode,H&&p!==null&&(H=31-xt(b),A=Z.hiddenUpdates,E=A[H],E===null?A[H]=[p]:E.push(p),p.lane=b|536870912),Z):null}function HA(A){if(50<fy)throw fy=0,S3=null,Error(a(185));for(var p=A.return;p!==null;)A=p,p=A.return;return A.tag===3?A.stateNode:null}var ci={};function ql(A,p,b,E){this.tag=A,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(A,p,b,E){return new ql(A,p,b,E)}function y0(A){return A=A.prototype,!(!A||!A.isReactComponent)}function ju(A,p){var b=A.alternate;return b===null?(b=Vi(A.tag,p,A.key,A.mode),b.elementType=A.elementType,b.type=A.type,b.stateNode=A.stateNode,b.alternate=A,A.alternate=b):(b.pendingProps=p,b.type=A.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=A.flags&65011712,b.childLanes=A.childLanes,b.lanes=A.lanes,b.child=A.child,b.memoizedProps=A.memoizedProps,b.memoizedState=A.memoizedState,b.updateQueue=A.updateQueue,p=A.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=A.sibling,b.index=A.index,b.ref=A.ref,b.refCleanup=A.refCleanup,b}function vp(A,p){A.flags&=65011714;var b=A.alternate;return b===null?(A.childLanes=0,A.lanes=p,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=b.childLanes,A.lanes=b.lanes,A.child=b.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=b.memoizedProps,A.memoizedState=b.memoizedState,A.updateQueue=b.updateQueue,A.type=b.type,p=b.dependencies,A.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),A}function zA(A,p,b,E,H,Z){var pe=0;if(E=A,typeof A=="function")y0(A)&&(pe=1);else if(typeof A=="string")pe=p0e(A,b,W.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case S:return A=Vi(31,b,p,H),A.elementType=S,A.lanes=Z,A;case g:return vd(b.children,H,Z,p);case x:pe=8,H|=24;break;case v:return A=Vi(12,b,p,H|2),A.elementType=v,A.lanes=Z,A;case B:return A=Vi(13,b,p,H),A.elementType=B,A.lanes=Z,A;case T:return A=Vi(19,b,p,H),A.elementType=T,A.lanes=Z,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case j:pe=10;break e;case w:pe=9;break e;case O:pe=11;break e;case C:pe=14;break e;case _:pe=16,E=null;break e}pe=29,b=Error(a(130,A===null?"null":typeof A,"")),E=null}return p=Vi(pe,b,p,H),p.elementType=A,p.type=E,p.lanes=Z,p}function vd(A,p,b,E){return A=Vi(7,A,E,p),A.lanes=b,A}function xx(A,p,b){return A=Vi(6,A,null,p),A.lanes=b,A}function bp(A,p,b){return p=Vi(4,A.children!==null?A.children:[],A.key,p),p.lanes=b,p.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},p}var Bf=[],bd=0,w0=null,vx=0,Kl=[],vl=0,VA=null,yd=1,wd="";function $A(A,p){Bf[bd++]=vx,Bf[bd++]=w0,w0=A,vx=p}function iE(A,p,b){Kl[vl++]=yd,Kl[vl++]=wd,Kl[vl++]=VA,VA=A;var E=yd;A=wd;var H=32-xt(E)-1;E&=~(1<<H),b+=1;var Z=32-xt(p)+H;if(30<Z){var pe=H-H%5;Z=(E&(1<<pe)-1).toString(32),E>>=pe,H-=pe,yd=1<<32-xt(p)+H|b<<H|E,wd=Z+A}else yd=1<<Z|b<<H|E,wd=A}function yp(A){A.return!==null&&($A(A,1),iE(A,1,0))}function wp(A){for(;A===w0;)w0=Bf[--bd],Bf[bd]=null,vx=Bf[--bd],Bf[bd]=null;for(;A===VA;)VA=Kl[--vl],Kl[vl]=null,wd=Kl[--vl],Kl[vl]=null,yd=Kl[--vl],Kl[vl]=null}var Us=null,Jn=null,Oa=!1,Tf=null,ku=!1,H1=Error(a(519));function GA(A){var p=Error(a(418,""));throw N0(ca(p,A)),H1}function oE(A){var p=A.stateNode,b=A.type,E=A.memoizedProps;switch(p[xa]=A,p[la]=E,b){case"dialog":ba("cancel",p),ba("close",p);break;case"iframe":case"object":case"embed":ba("load",p);break;case"video":case"audio":for(b=0;b<hy.length;b++)ba(hy[b],p);break;case"source":ba("error",p);break;case"img":case"image":case"link":ba("error",p),ba("load",p);break;case"details":ba("toggle",p);break;case"input":ba("invalid",p),Au(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),fu(p);break;case"select":ba("invalid",p);break;case"textarea":ba("invalid",p),mu(p,E.value,E.defaultValue,E.children),fu(p)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||E.suppressHydrationWarning===!0||N9(p.textContent,b)?(E.popover!=null&&(ba("beforetoggle",p),ba("toggle",p)),E.onScroll!=null&&ba("scroll",p),E.onScrollEnd!=null&&ba("scrollend",p),E.onClick!=null&&(p.onclick=zE),p=!0):p=!1,p||GA(A)}function Nd(A){for(Us=A.return;Us;)switch(Us.tag){case 5:case 13:ku=!1;return;case 27:case 3:ku=!0;return;default:Us=Us.return}}function fo(A){if(A!==Us)return!1;if(!Oa)return Nd(A),Oa=!0,!1;var p=A.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=A.type,b=!(b!=="form"&&b!=="button")||$3(A.type,A.memoizedProps)),b=!b),b&&Jn&&GA(A),Nd(A),p===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));e:{for(A=A.nextSibling,p=0;A;){if(A.nodeType===8)if(b=A.data,b==="/$"){if(p===0){Jn=Td(A.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;A=A.nextSibling}Jn=null}}else p===27?(p=Jn,U0(A.type)?(A=W3,W3=null,Jn=A):Jn=p):Jn=Us?Td(A.stateNode.nextSibling):null;return!0}function bl(){Jn=Us=null,Oa=!1}function lE(){var A=Tf;return A!==null&&(Yl===null?Yl=A:Yl.push.apply(Yl,A),Tf=null),A}function N0(A){Tf===null?Tf=[A]:Tf.push(A)}var _u=J(null),ui=null,Ed=null;function If(A,p,b){F(_u,p._currentValue),p._currentValue=b}function Su(A){A._currentValue=_u.current,R(_u)}function bx(A,p,b){for(;A!==null;){var E=A.alternate;if((A.childLanes&p)!==p?(A.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),A===b)break;A=A.return}}function yx(A,p,b,E){var H=A.child;for(H!==null&&(H.return=A);H!==null;){var Z=H.dependencies;if(Z!==null){var pe=H.child;Z=Z.firstContext;e:for(;Z!==null;){var Se=Z;Z=H;for(var Ge=0;Ge<p.length;Ge++)if(Se.context===p[Ge]){Z.lanes|=b,Se=Z.alternate,Se!==null&&(Se.lanes|=b),bx(Z.return,b,A),E||(pe=null);break e}Z=Se.next}}else if(H.tag===18){if(pe=H.return,pe===null)throw Error(a(341));pe.lanes|=b,Z=pe.alternate,Z!==null&&(Z.lanes|=b),bx(pe,b,A),pe=null}else pe=H.child;if(pe!==null)pe.return=H;else for(pe=H;pe!==null;){if(pe===A){pe=null;break}if(H=pe.sibling,H!==null){H.return=pe.return,pe=H;break}pe=pe.return}H=pe}}function E0(A,p,b,E){A=null;for(var H=p,Z=!1;H!==null;){if(!Z){if((H.flags&524288)!==0)Z=!0;else if((H.flags&262144)!==0)break}if(H.tag===10){var pe=H.alternate;if(pe===null)throw Error(a(387));if(pe=pe.memoizedProps,pe!==null){var Se=H.type;li(H.pendingProps.value,pe.value)||(A!==null?A.push(Se):A=[Se])}}else if(H===le.current){if(pe=H.alternate,pe===null)throw Error(a(387));pe.memoizedState.memoizedState!==H.memoizedState.memoizedState&&(A!==null?A.push(by):A=[by])}H=H.return}A!==null&&yx(p,A,b,E),p.flags|=262144}function wx(A){for(A=A.firstContext;A!==null;){if(!li(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Bu(A){ui=A,Ed=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Qs(A){return Nx(ui,A)}function Of(A,p){return ui===null&&Bu(A),Nx(A,p)}function Nx(A,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},Ed===null){if(A===null)throw Error(a(308));Ed=p,A.dependencies={lanes:0,firstContext:p},A.flags|=524288}else Ed=Ed.next=p;return b}var e3=typeof AbortController<"u"?AbortController:function(){var A=[],p=this.signal={aborted:!1,addEventListener:function(b,E){A.push(E)}};this.abort=function(){p.aborted=!0,A.forEach(function(b){return b()})}},cE=e.unstable_scheduleCallback,t3=e.unstable_NormalPriority,Hs={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function z1(){return{controller:new e3,data:new Map,refCount:0}}function Np(A){A.refCount--,A.refCount===0&&cE(t3,function(){A.controller.abort()})}var Ep=null,V1=0,qA=0,Cd=null;function r3(A,p){if(Ep===null){var b=Ep=[];V1=0,qA=P3(),Cd={status:"pending",value:void 0,then:function(E){b.push(E)}}}return V1++,p.then(uE,uE),p}function uE(){if(--V1===0&&Ep!==null){Cd!==null&&(Cd.status="fulfilled");var A=Ep;Ep=null,qA=0,Cd=null;for(var p=0;p<A.length;p++)(0,A[p])()}}function dE(A,p){var b=[],E={status:"pending",value:null,reason:null,then:function(H){b.push(H)}};return A.then(function(){E.status="fulfilled",E.value=p;for(var H=0;H<b.length;H++)(0,b[H])(p)},function(H){for(E.status="rejected",E.reason=H,H=0;H<b.length;H++)(0,b[H])(void 0)}),E}var I=Q.S;Q.S=function(A,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&r3(A,p),I!==null&&I(A,p)};var G=J(null);function te(){var A=G.current;return A!==null?A:Rn.pooledCache}function ce(A,p){p===null?F(G,G.current):F(G,p.pool)}function xe(){var A=te();return A===null?null:{parent:Hs._currentValue,pool:A}}var Ne=Error(a(460)),Ee=Error(a(474)),je=Error(a(542)),Ie={then:function(){}};function Me(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ye(){}function dt(A,p,b){switch(b=A[b],b===void 0?A.push(p):b!==p&&(p.then(Ye,Ye),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Ot(A),A;default:if(typeof p.status=="string")p.then(Ye,Ye);else{if(A=Rn,A!==null&&100<A.shellSuspendCounter)throw Error(a(482));A=p,A.status="pending",A.then(function(E){if(p.status==="pending"){var H=p;H.status="fulfilled",H.value=E}},function(E){if(p.status==="pending"){var H=p;H.status="rejected",H.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Ot(A),A}throw lt=p,Ne}}var lt=null;function at(){if(lt===null)throw Error(a(459));var A=lt;return lt=null,A}function Ot(A){if(A===Ne||A===je)throw Error(a(483))}var bt=!1;function Je(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function et(A,p){A=A.updateQueue,p.updateQueue===A&&(p.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function kt(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Ft(A,p,b){var E=A.updateQueue;if(E===null)return null;if(E=E.shared,(dn&2)!==0){var H=E.pending;return H===null?p.next=p:(p.next=H.next,H.next=p),E.pending=p,p=HA(A),gx(A,null,b),p}return _f(A,E,p,b),HA(A)}function St(A,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var E=p.lanes;E&=A.pendingLanes,b|=E,p.lanes=b,Yr(A,b)}}function tr(A,p){var b=A.updateQueue,E=A.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var H=null,Z=null;if(b=b.firstBaseUpdate,b!==null){do{var pe={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};Z===null?H=Z=pe:Z=Z.next=pe,b=b.next}while(b!==null);Z===null?H=Z=p:Z=Z.next=p}else H=Z=p;b={baseState:E.baseState,firstBaseUpdate:H,lastBaseUpdate:Z,shared:E.shared,callbacks:E.callbacks},A.updateQueue=b;return}A=b.lastBaseUpdate,A===null?b.firstBaseUpdate=p:A.next=p,b.lastBaseUpdate=p}var Kt=!1;function gr(){if(Kt){var A=Cd;if(A!==null)throw A}}function Xt(A,p,b,E){Kt=!1;var H=A.updateQueue;bt=!1;var Z=H.firstBaseUpdate,pe=H.lastBaseUpdate,Se=H.shared.pending;if(Se!==null){H.shared.pending=null;var Ge=Se,At=Ge.next;Ge.next=null,pe===null?Z=At:pe.next=At,pe=Ge;var _t=A.alternate;_t!==null&&(_t=_t.updateQueue,Se=_t.lastBaseUpdate,Se!==pe&&(Se===null?_t.firstBaseUpdate=At:Se.next=At,_t.lastBaseUpdate=Ge))}if(Z!==null){var Pt=H.baseState;pe=0,_t=At=Ge=null,Se=Z;do{var pt=Se.lane&-536870913,vt=pt!==Se.lane;if(vt?(Ba&pt)===pt:(E&pt)===pt){pt!==0&&pt===qA&&(Kt=!0),_t!==null&&(_t=_t.next={lane:0,tag:Se.tag,payload:Se.payload,callback:null,next:null});e:{var zr=A,Tr=Se;pt=p;var wn=b;switch(Tr.tag){case 1:if(zr=Tr.payload,typeof zr=="function"){Pt=zr.call(wn,Pt,pt);break e}Pt=zr;break e;case 3:zr.flags=zr.flags&-65537|128;case 0:if(zr=Tr.payload,pt=typeof zr=="function"?zr.call(wn,Pt,pt):zr,pt==null)break e;Pt=d({},Pt,pt);break e;case 2:bt=!0}}pt=Se.callback,pt!==null&&(A.flags|=64,vt&&(A.flags|=8192),vt=H.callbacks,vt===null?H.callbacks=[pt]:vt.push(pt))}else vt={lane:pt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},_t===null?(At=_t=vt,Ge=Pt):_t=_t.next=vt,pe|=pt;if(Se=Se.next,Se===null){if(Se=H.shared.pending,Se===null)break;vt=Se,Se=vt.next,vt.next=null,H.lastBaseUpdate=vt,H.shared.pending=null}}while(!0);_t===null&&(Ge=Pt),H.baseState=Ge,H.firstBaseUpdate=At,H.lastBaseUpdate=_t,Z===null&&(H.shared.lanes=0),P0|=pe,A.lanes=pe,A.memoizedState=Pt}}function _a(A,p){if(typeof A!="function")throw Error(a(191,A));A.call(p)}function Ma(A,p){var b=A.callbacks;if(b!==null)for(A.callbacks=null,A=0;A<b.length;A++)_a(b[A],p)}var oa=J(null),ra=J(0);function en(A,p){A=ah,F(ra,A),F(oa,p),ah=A|p.baseLanes}function Ua(){F(ra,ah),F(oa,oa.current)}function qr(){ah=ra.current,R(oa),R(ra)}var un=0,kr=null,Lr=null,ka=null,Sa=!1,di=!1,zs=!1,is=0,os=0,ws=null,Wl=0;function Qa(){throw Error(a(321))}function Ns(A,p){if(p===null)return!1;for(var b=0;b<p.length&&b<A.length;b++)if(!li(A[b],p[b]))return!1;return!0}function Bc(A,p,b,E,H,Z){return un=Z,kr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Q.H=A===null||A.memoizedState===null?aU:nU,zs=!1,Z=b(E,H),zs=!1,di&&(Z=KA(p,b,E,H)),Ff(A),Z}function Ff(A){Q.H=NE;var p=Lr!==null&&Lr.next!==null;if(un=0,ka=Lr=kr=null,Sa=!1,os=0,ws=null,p)throw Error(a(300));A===null||$i||(A=A.dependencies,A!==null&&wx(A)&&($i=!0))}function KA(A,p,b,E){kr=A;var H=0;do{if(di&&(ws=null),os=0,di=!1,25<=H)throw Error(a(301));if(H+=1,ka=Lr=null,A.updateQueue!=null){var Z=A.updateQueue;Z.lastEffect=null,Z.events=null,Z.stores=null,Z.memoCache!=null&&(Z.memoCache.index=0)}Q.H=khe,Z=p(b,E)}while(di);return Z}function Df(){var A=Q.H,p=A.useState()[0];return p=typeof p.then=="function"?Pf(p):p,A=A.useState()[0],(Lr!==null?Lr.memoizedState:null)!==A&&(kr.flags|=1024),p}function Pn(){var A=is!==0;return is=0,A}function Cp(A,p,b){p.updateQueue=A.updateQueue,p.flags&=-2053,A.lanes&=~b}function Ex(A){if(Sa){for(A=A.memoizedState;A!==null;){var p=A.queue;p!==null&&(p.pending=null),A=A.next}Sa=!1}un=0,ka=Lr=kr=null,di=!1,os=is=0,ws=null}function Ao(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ka===null?kr.memoizedState=ka=A:ka=ka.next=A,ka}function Hn(){if(Lr===null){var A=kr.alternate;A=A!==null?A.memoizedState:null}else A=Lr.next;var p=ka===null?kr.memoizedState:ka.next;if(p!==null)ka=p,Lr=A;else{if(A===null)throw kr.alternate===null?Error(a(467)):Error(a(310));Lr=A,A={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},ka===null?kr.memoizedState=ka=A:ka=ka.next=A}return ka}function WA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pf(A){var p=os;return os+=1,ws===null&&(ws=[]),A=dt(ws,A,p),p=kr,(ka===null?p.memoizedState:ka.next)===null&&(p=p.alternate,Q.H=p===null||p.memoizedState===null?aU:nU),A}function Uo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Pf(A);if(A.$$typeof===j)return Qs(A)}throw Error(a(438,String(A)))}function Rf(A){var p=null,b=kr.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var E=kr.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(H){return H.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=WA(),kr.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(A),E=0;E<A;E++)b[E]=L;return p.index++,b}function Qo(A,p){return typeof p=="function"?p(A):p}function jp(A){var p=Hn();return C0(p,Lr,A)}function C0(A,p,b){var E=A.queue;if(E===null)throw Error(a(311));E.lastRenderedReducer=b;var H=A.baseQueue,Z=E.pending;if(Z!==null){if(H!==null){var pe=H.next;H.next=Z.next,Z.next=pe}p.baseQueue=H=Z,E.pending=null}if(Z=A.baseState,H===null)A.memoizedState=Z;else{p=H.next;var Se=pe=null,Ge=null,At=p,_t=!1;do{var Pt=At.lane&-536870913;if(Pt!==At.lane?(Ba&Pt)===Pt:(un&Pt)===Pt){var pt=At.revertLane;if(pt===0)Ge!==null&&(Ge=Ge.next={lane:0,revertLane:0,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null}),Pt===qA&&(_t=!0);else if((un&pt)===pt){At=At.next,pt===qA&&(_t=!0);continue}else Pt={lane:0,revertLane:At.revertLane,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null},Ge===null?(Se=Ge=Pt,pe=Z):Ge=Ge.next=Pt,kr.lanes|=pt,P0|=pt;Pt=At.action,zs&&b(Z,Pt),Z=At.hasEagerState?At.eagerState:b(Z,Pt)}else pt={lane:Pt,revertLane:At.revertLane,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null},Ge===null?(Se=Ge=pt,pe=Z):Ge=Ge.next=pt,kr.lanes|=Pt,P0|=Pt;At=At.next}while(At!==null&&At!==p);if(Ge===null?pe=Z:Ge.next=Se,!li(Z,A.memoizedState)&&($i=!0,_t&&(b=Cd,b!==null)))throw b;A.memoizedState=Z,A.baseState=pe,A.baseQueue=Ge,E.lastRenderedState=Z}return H===null&&(E.lanes=0),[A.memoizedState,E.dispatch]}function Cx(A){var p=Hn(),b=p.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=A;var E=b.dispatch,H=b.pending,Z=p.memoizedState;if(H!==null){b.pending=null;var pe=H=H.next;do Z=A(Z,pe.action),pe=pe.next;while(pe!==H);li(Z,p.memoizedState)||($i=!0),p.memoizedState=Z,p.baseQueue===null&&(p.baseState=Z),b.lastRenderedState=Z}return[Z,E]}function kp(A,p,b){var E=kr,H=Hn(),Z=Oa;if(Z){if(b===void 0)throw Error(a(407));b=b()}else b=p();var pe=!li((Lr||H).memoizedState,b);pe&&(H.memoizedState=b,$i=!0),H=H.queue;var Se=j0.bind(null,E,H,A);if(S0(2048,8,Se,[A]),H.getSnapshot!==p||pe||ka!==null&&ka.memoizedState.tag&1){if(E.flags|=2048,kd(9,Tp(),_p.bind(null,E,H,b,p),null),Rn===null)throw Error(a(349));Z||(un&124)!==0||jx(E,p,b)}return b}function jx(A,p,b){A.flags|=16384,A={getSnapshot:p,value:b},p=kr.updateQueue,p===null?(p=WA(),kr.updateQueue=p,p.stores=[A]):(b=p.stores,b===null?p.stores=[A]:b.push(A))}function _p(A,p,b,E){p.value=b,p.getSnapshot=E,fE(p)&&AE(A)}function j0(A,p,b){return b(function(){fE(p)&&AE(A)})}function fE(A){var p=A.getSnapshot;A=A.value;try{var b=p();return!li(A,b)}catch{return!0}}function AE(A){var p=xd(A,2);p!==null&&Pc(p,A,2)}function Sp(A){var p=Ao();if(typeof A=="function"){var b=A;if(A=b(),zs){it(!0);try{b()}finally{it(!1)}}}return p.memoizedState=p.baseState=A,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:A},p}function jd(A,p,b,E){return A.baseState=b,C0(A,Lr,typeof E=="function"?E:Qo)}function a3(A,p,b,E,H){if(wE(A))throw Error(a(485));if(A=p.action,A!==null){var Z={payload:H,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(pe){Z.listeners.push(pe)}};Q.T!==null?b(!0):Z.isTransition=!1,E(Z),b=p.pending,b===null?(Z.next=p.pending=Z,hE(p,Z)):(Z.next=b.next,p.pending=b.next=Z)}}function hE(A,p){var b=p.action,E=p.payload,H=A.state;if(p.isTransition){var Z=Q.T,pe={};Q.T=pe;try{var Se=b(H,E),Ge=Q.S;Ge!==null&&Ge(pe,Se),mE(A,p,Se)}catch(At){k0(A,p,At)}finally{Q.T=Z}}else try{Z=b(H,E),mE(A,p,Z)}catch(At){k0(A,p,At)}}function mE(A,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){$1(A,p,E)},function(E){return k0(A,p,E)}):$1(A,p,b)}function $1(A,p,b){p.status="fulfilled",p.value=b,G1(p),A.state=b,p=A.pending,p!==null&&(b=p.next,b===p?A.pending=null:(b=b.next,p.next=b,hE(A,b)))}function k0(A,p,b){var E=A.pending;if(A.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=b,G1(p),p=p.next;while(p!==E)}A.action=null}function G1(A){A=A.listeners;for(var p=0;p<A.length;p++)(0,A[p])()}function q1(A,p){return p}function Bp(A,p){if(Oa){var b=Rn.formState;if(b!==null){e:{var E=kr;if(Oa){if(Jn){t:{for(var H=Jn,Z=ku;H.nodeType!==8;){if(!Z){H=null;break t}if(H=Td(H.nextSibling),H===null){H=null;break t}}Z=H.data,H=Z==="F!"||Z==="F"?H:null}if(H){Jn=Td(H.nextSibling),E=H.data==="F!";break e}}GA(E)}E=!1}E&&(p=b[0])}}return b=Ao(),b.memoizedState=b.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:q1,lastRenderedState:p},b.queue=E,b=eU.bind(null,kr,E),E.dispatch=b,E=Sp(!1),Z=n3.bind(null,kr,!1,E.queue),E=Ao(),H={state:p,dispatch:null,action:A,pending:null},E.queue=H,b=a3.bind(null,kr,H,Z,b),H.dispatch=b,E.memoizedState=A,[p,b,!1]}function kx(A){var p=Hn();return _0(p,Lr,A)}function _0(A,p,b){if(p=C0(A,p,q1)[0],A=jp(Qo)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=Pf(p)}catch(pe){throw pe===Ne?je:pe}else E=p;p=Hn();var H=p.queue,Z=H.dispatch;return b!==p.memoizedState&&(kr.flags|=2048,kd(9,Tp(),pE.bind(null,H,b),null)),[E,Z,A]}function pE(A,p){A.action=p}function gE(A){var p=Hn(),b=Lr;if(b!==null)return _0(p,b,A);Hn(),p=p.memoizedState,b=Hn();var E=b.queue.dispatch;return b.memoizedState=A,[p,E,!1]}function kd(A,p,b,E){return A={tag:A,create:b,deps:E,inst:p,next:null},p=kr.updateQueue,p===null&&(p=WA(),kr.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=A.next=A:(E=b.next,b.next=A,A.next=E,p.lastEffect=A),A}function Tp(){return{destroy:void 0,resource:void 0}}function _x(){return Hn().memoizedState}function Tc(A,p,b,E){var H=Ao();E=E===void 0?null:E,kr.flags|=A,H.memoizedState=kd(1|p,Tp(),b,E)}function S0(A,p,b,E){var H=Hn();E=E===void 0?null:E;var Z=H.memoizedState.inst;Lr!==null&&E!==null&&Ns(E,Lr.memoizedState.deps)?H.memoizedState=kd(p,Z,b,E):(kr.flags|=A,H.memoizedState=kd(1|p,Z,b,E))}function K1(A,p){Tc(8390656,8,A,p)}function xE(A,p){S0(2048,8,A,p)}function W1(A,p){return S0(4,2,A,p)}function XA(A,p){return S0(4,4,A,p)}function vE(A,p){if(typeof p=="function"){A=A();var b=p(A);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return A=A(),p.current=A,function(){p.current=null}}function X1(A,p,b){b=b!=null?b.concat([A]):null,S0(4,4,vE.bind(null,p,A),b)}function Y1(){}function J1(A,p){var b=Hn();p=p===void 0?null:p;var E=b.memoizedState;return p!==null&&Ns(p,E[1])?E[0]:(b.memoizedState=[A,p],A)}function bE(A,p){var b=Hn();p=p===void 0?null:p;var E=b.memoizedState;if(p!==null&&Ns(p,E[1]))return E[0];if(E=A(),zs){it(!0);try{A()}finally{it(!1)}}return b.memoizedState=[E,p],E}function YA(A,p,b){return b===void 0||(un&1073741824)!==0?A.memoizedState=p:(A.memoizedState=b,A=XU(),kr.lanes|=A,P0|=A,b)}function Sx(A,p,b,E){return li(b,p)?b:oa.current!==null?(A=YA(A,b,E),li(A,p)||($i=!0),A):(un&42)===0?($i=!0,A.memoizedState=b):(A=XU(),kr.lanes|=A,P0|=A,p)}function Ip(A,p,b,E,H){var Z=q.p;q.p=Z!==0&&8>Z?Z:8;var pe=Q.T,Se={};Q.T=Se,n3(A,!1,p,b);try{var Ge=H(),At=Q.S;if(At!==null&&At(Se,Ge),Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"){var _t=dE(Ge,E);ry(A,p,_t,Dc(A))}else ry(A,p,E,Dc(A))}catch(Pt){ry(A,p,{then:function(){},status:"rejected",reason:Pt},Dc())}finally{q.p=Z,Q.T=pe}}function _d(){}function Tu(A,p,b,E){if(A.tag!==5)throw Error(a(476));var H=Sd(A).queue;Ip(A,H,p,V,b===null?_d:function(){return Op(A),b(E)})}function Sd(A){var p=A.memoizedState;if(p!==null)return p;p={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:V},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:b},next:null},A.memoizedState=p,A=A.alternate,A!==null&&(A.memoizedState=p),p}function Op(A){var p=Sd(A).next.queue;ry(A,p,{},Dc())}function Fp(){return Qs(by)}function Z1(){return Hn().memoizedState}function yE(){return Hn().memoizedState}function ey(A){for(var p=A.return;p!==null;){switch(p.tag){case 24:case 3:var b=Dc();A=kt(b);var E=Ft(p,A,b);E!==null&&(Pc(E,p,b),St(E,p,b)),p={cache:z1()},A.payload=p;return}p=p.return}}function ty(A,p,b){var E=Dc();b={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},wE(A)?tU(p,b):(b=Sf(A,p,b,E),b!==null&&(Pc(b,A,E),rU(b,p,E)))}function eU(A,p,b){var E=Dc();ry(A,p,b,E)}function ry(A,p,b,E){var H={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(wE(A))tU(p,H);else{var Z=A.alternate;if(A.lanes===0&&(Z===null||Z.lanes===0)&&(Z=p.lastRenderedReducer,Z!==null))try{var pe=p.lastRenderedState,Se=Z(pe,b);if(H.hasEagerState=!0,H.eagerState=Se,li(Se,pe))return _f(A,p,H,0),Rn===null&&Gl(),!1}catch{}finally{}if(b=Sf(A,p,H,E),b!==null)return Pc(b,A,E),rU(b,p,E),!0}return!1}function n3(A,p,b,E){if(E={lane:2,revertLane:P3(),action:E,hasEagerState:!1,eagerState:null,next:null},wE(A)){if(p)throw Error(a(479))}else p=Sf(A,b,E,2),p!==null&&Pc(p,A,2)}function wE(A){var p=A.alternate;return A===kr||p!==null&&p===kr}function tU(A,p){di=Sa=!0;var b=A.pending;b===null?p.next=p:(p.next=b.next,b.next=p),A.pending=p}function rU(A,p,b){if((b&4194048)!==0){var E=p.lanes;E&=A.pendingLanes,b|=E,p.lanes=b,Yr(A,b)}}var NE={readContext:Qs,use:Uo,useCallback:Qa,useContext:Qa,useEffect:Qa,useImperativeHandle:Qa,useLayoutEffect:Qa,useInsertionEffect:Qa,useMemo:Qa,useReducer:Qa,useRef:Qa,useState:Qa,useDebugValue:Qa,useDeferredValue:Qa,useTransition:Qa,useSyncExternalStore:Qa,useId:Qa,useHostTransitionStatus:Qa,useFormState:Qa,useActionState:Qa,useOptimistic:Qa,useMemoCache:Qa,useCacheRefresh:Qa},aU={readContext:Qs,use:Uo,useCallback:function(A,p){return Ao().memoizedState=[A,p===void 0?null:p],A},useContext:Qs,useEffect:K1,useImperativeHandle:function(A,p,b){b=b!=null?b.concat([A]):null,Tc(4194308,4,vE.bind(null,p,A),b)},useLayoutEffect:function(A,p){return Tc(4194308,4,A,p)},useInsertionEffect:function(A,p){Tc(4,2,A,p)},useMemo:function(A,p){var b=Ao();p=p===void 0?null:p;var E=A();if(zs){it(!0);try{A()}finally{it(!1)}}return b.memoizedState=[E,p],E},useReducer:function(A,p,b){var E=Ao();if(b!==void 0){var H=b(p);if(zs){it(!0);try{b(p)}finally{it(!1)}}}else H=p;return E.memoizedState=E.baseState=H,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:H},E.queue=A,A=A.dispatch=ty.bind(null,kr,A),[E.memoizedState,A]},useRef:function(A){var p=Ao();return A={current:A},p.memoizedState=A},useState:function(A){A=Sp(A);var p=A.queue,b=eU.bind(null,kr,p);return p.dispatch=b,[A.memoizedState,b]},useDebugValue:Y1,useDeferredValue:function(A,p){var b=Ao();return YA(b,A,p)},useTransition:function(){var A=Sp(!1);return A=Ip.bind(null,kr,A.queue,!0,!1),Ao().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,p,b){var E=kr,H=Ao();if(Oa){if(b===void 0)throw Error(a(407));b=b()}else{if(b=p(),Rn===null)throw Error(a(349));(Ba&124)!==0||jx(E,p,b)}H.memoizedState=b;var Z={value:b,getSnapshot:p};return H.queue=Z,K1(j0.bind(null,E,Z,A),[A]),E.flags|=2048,kd(9,Tp(),_p.bind(null,E,Z,b,p),null),b},useId:function(){var A=Ao(),p=Rn.identifierPrefix;if(Oa){var b=wd,E=yd;b=(E&~(1<<32-xt(E)-1)).toString(32)+b,p=""+p+"R"+b,b=is++,0<b&&(p+="H"+b.toString(32)),p+=""}else b=Wl++,p=""+p+"r"+b.toString(32)+"";return A.memoizedState=p},useHostTransitionStatus:Fp,useFormState:Bp,useActionState:Bp,useOptimistic:function(A){var p=Ao();p.memoizedState=p.baseState=A;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=n3.bind(null,kr,!0,b),b.dispatch=p,[A,p]},useMemoCache:Rf,useCacheRefresh:function(){return Ao().memoizedState=ey.bind(null,kr)}},nU={readContext:Qs,use:Uo,useCallback:J1,useContext:Qs,useEffect:xE,useImperativeHandle:X1,useInsertionEffect:W1,useLayoutEffect:XA,useMemo:bE,useReducer:jp,useRef:_x,useState:function(){return jp(Qo)},useDebugValue:Y1,useDeferredValue:function(A,p){var b=Hn();return Sx(b,Lr.memoizedState,A,p)},useTransition:function(){var A=jp(Qo)[0],p=Hn().memoizedState;return[typeof A=="boolean"?A:Pf(A),p]},useSyncExternalStore:kp,useId:Z1,useHostTransitionStatus:Fp,useFormState:kx,useActionState:kx,useOptimistic:function(A,p){var b=Hn();return jd(b,Lr,A,p)},useMemoCache:Rf,useCacheRefresh:yE},khe={readContext:Qs,use:Uo,useCallback:J1,useContext:Qs,useEffect:xE,useImperativeHandle:X1,useInsertionEffect:W1,useLayoutEffect:XA,useMemo:bE,useReducer:Cx,useRef:_x,useState:function(){return Cx(Qo)},useDebugValue:Y1,useDeferredValue:function(A,p){var b=Hn();return Lr===null?YA(b,A,p):Sx(b,Lr.memoizedState,A,p)},useTransition:function(){var A=Cx(Qo)[0],p=Hn().memoizedState;return[typeof A=="boolean"?A:Pf(A),p]},useSyncExternalStore:kp,useId:Z1,useHostTransitionStatus:Fp,useFormState:gE,useActionState:gE,useOptimistic:function(A,p){var b=Hn();return Lr!==null?jd(b,Lr,A,p):(b.baseState=A,[A,b.queue.dispatch])},useMemoCache:Rf,useCacheRefresh:yE},Bx=null,ay=0;function EE(A){var p=ay;return ay+=1,Bx===null&&(Bx=[]),dt(Bx,A,p)}function ny(A,p){p=p.props.ref,A.ref=p!==void 0?p:null}function CE(A,p){throw p.$$typeof===f?Error(a(525)):(A=Object.prototype.toString.call(p),Error(a(31,A==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":A)))}function sU(A){var p=A._init;return p(A._payload)}function iU(A){function p(ot,Ze){if(A){var ut=ot.deletions;ut===null?(ot.deletions=[Ze],ot.flags|=16):ut.push(Ze)}}function b(ot,Ze){if(!A)return null;for(;Ze!==null;)p(ot,Ze),Ze=Ze.sibling;return null}function E(ot){for(var Ze=new Map;ot!==null;)ot.key!==null?Ze.set(ot.key,ot):Ze.set(ot.index,ot),ot=ot.sibling;return Ze}function H(ot,Ze){return ot=ju(ot,Ze),ot.index=0,ot.sibling=null,ot}function Z(ot,Ze,ut){return ot.index=ut,A?(ut=ot.alternate,ut!==null?(ut=ut.index,ut<Ze?(ot.flags|=67108866,Ze):ut):(ot.flags|=67108866,Ze)):(ot.flags|=1048576,Ze)}function pe(ot){return A&&ot.alternate===null&&(ot.flags|=67108866),ot}function Se(ot,Ze,ut,It){return Ze===null||Ze.tag!==6?(Ze=xx(ut,ot.mode,It),Ze.return=ot,Ze):(Ze=H(Ze,ut),Ze.return=ot,Ze)}function Ge(ot,Ze,ut,It){var Ar=ut.type;return Ar===g?_t(ot,Ze,ut.props.children,It,ut.key):Ze!==null&&(Ze.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===_&&sU(Ar)===Ze.type)?(Ze=H(Ze,ut.props),ny(Ze,ut),Ze.return=ot,Ze):(Ze=zA(ut.type,ut.key,ut.props,null,ot.mode,It),ny(Ze,ut),Ze.return=ot,Ze)}function At(ot,Ze,ut,It){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==ut.containerInfo||Ze.stateNode.implementation!==ut.implementation?(Ze=bp(ut,ot.mode,It),Ze.return=ot,Ze):(Ze=H(Ze,ut.children||[]),Ze.return=ot,Ze)}function _t(ot,Ze,ut,It,Ar){return Ze===null||Ze.tag!==7?(Ze=vd(ut,ot.mode,It,Ar),Ze.return=ot,Ze):(Ze=H(Ze,ut),Ze.return=ot,Ze)}function Pt(ot,Ze,ut){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=xx(""+Ze,ot.mode,ut),Ze.return=ot,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case h:return ut=zA(Ze.type,Ze.key,Ze.props,null,ot.mode,ut),ny(ut,Ze),ut.return=ot,ut;case m:return Ze=bp(Ze,ot.mode,ut),Ze.return=ot,Ze;case _:var It=Ze._init;return Ze=It(Ze._payload),Pt(ot,Ze,ut)}if(z(Ze)||k(Ze))return Ze=vd(Ze,ot.mode,ut,null),Ze.return=ot,Ze;if(typeof Ze.then=="function")return Pt(ot,EE(Ze),ut);if(Ze.$$typeof===j)return Pt(ot,Of(ot,Ze),ut);CE(ot,Ze)}return null}function pt(ot,Ze,ut,It){var Ar=Ze!==null?Ze.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return Ar!==null?null:Se(ot,Ze,""+ut,It);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case h:return ut.key===Ar?Ge(ot,Ze,ut,It):null;case m:return ut.key===Ar?At(ot,Ze,ut,It):null;case _:return Ar=ut._init,ut=Ar(ut._payload),pt(ot,Ze,ut,It)}if(z(ut)||k(ut))return Ar!==null?null:_t(ot,Ze,ut,It,null);if(typeof ut.then=="function")return pt(ot,Ze,EE(ut),It);if(ut.$$typeof===j)return pt(ot,Ze,Of(ot,ut),It);CE(ot,ut)}return null}function vt(ot,Ze,ut,It,Ar){if(typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint")return ot=ot.get(ut)||null,Se(Ze,ot,""+It,Ar);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case h:return ot=ot.get(It.key===null?ut:It.key)||null,Ge(Ze,ot,It,Ar);case m:return ot=ot.get(It.key===null?ut:It.key)||null,At(Ze,ot,It,Ar);case _:var ma=It._init;return It=ma(It._payload),vt(ot,Ze,ut,It,Ar)}if(z(It)||k(It))return ot=ot.get(ut)||null,_t(Ze,ot,It,Ar,null);if(typeof It.then=="function")return vt(ot,Ze,ut,EE(It),Ar);if(It.$$typeof===j)return vt(ot,Ze,ut,Of(Ze,It),Ar);CE(Ze,It)}return null}function zr(ot,Ze,ut,It){for(var Ar=null,ma=null,yr=Ze,Or=Ze=0,qi=null;yr!==null&&Or<ut.length;Or++){yr.index>Or?(qi=yr,yr=null):qi=yr.sibling;var Ha=pt(ot,yr,ut[Or],It);if(Ha===null){yr===null&&(yr=qi);break}A&&yr&&Ha.alternate===null&&p(ot,yr),Ze=Z(Ha,Ze,Or),ma===null?Ar=Ha:ma.sibling=Ha,ma=Ha,yr=qi}if(Or===ut.length)return b(ot,yr),Oa&&$A(ot,Or),Ar;if(yr===null){for(;Or<ut.length;Or++)yr=Pt(ot,ut[Or],It),yr!==null&&(Ze=Z(yr,Ze,Or),ma===null?Ar=yr:ma.sibling=yr,ma=yr);return Oa&&$A(ot,Or),Ar}for(yr=E(yr);Or<ut.length;Or++)qi=vt(yr,ot,Or,ut[Or],It),qi!==null&&(A&&qi.alternate!==null&&yr.delete(qi.key===null?Or:qi.key),Ze=Z(qi,Ze,Or),ma===null?Ar=qi:ma.sibling=qi,ma=qi);return A&&yr.forEach(function($0){return p(ot,$0)}),Oa&&$A(ot,Or),Ar}function Tr(ot,Ze,ut,It){if(ut==null)throw Error(a(151));for(var Ar=null,ma=null,yr=Ze,Or=Ze=0,qi=null,Ha=ut.next();yr!==null&&!Ha.done;Or++,Ha=ut.next()){yr.index>Or?(qi=yr,yr=null):qi=yr.sibling;var $0=pt(ot,yr,Ha.value,It);if($0===null){yr===null&&(yr=qi);break}A&&yr&&$0.alternate===null&&p(ot,yr),Ze=Z($0,Ze,Or),ma===null?Ar=$0:ma.sibling=$0,ma=$0,yr=qi}if(Ha.done)return b(ot,yr),Oa&&$A(ot,Or),Ar;if(yr===null){for(;!Ha.done;Or++,Ha=ut.next())Ha=Pt(ot,Ha.value,It),Ha!==null&&(Ze=Z(Ha,Ze,Or),ma===null?Ar=Ha:ma.sibling=Ha,ma=Ha);return Oa&&$A(ot,Or),Ar}for(yr=E(yr);!Ha.done;Or++,Ha=ut.next())Ha=vt(yr,ot,Or,Ha.value,It),Ha!==null&&(A&&Ha.alternate!==null&&yr.delete(Ha.key===null?Or:Ha.key),Ze=Z(Ha,Ze,Or),ma===null?Ar=Ha:ma.sibling=Ha,ma=Ha);return A&&yr.forEach(function(_0e){return p(ot,_0e)}),Oa&&$A(ot,Or),Ar}function wn(ot,Ze,ut,It){if(typeof ut=="object"&&ut!==null&&ut.type===g&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case h:e:{for(var Ar=ut.key;Ze!==null;){if(Ze.key===Ar){if(Ar=ut.type,Ar===g){if(Ze.tag===7){b(ot,Ze.sibling),It=H(Ze,ut.props.children),It.return=ot,ot=It;break e}}else if(Ze.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===_&&sU(Ar)===Ze.type){b(ot,Ze.sibling),It=H(Ze,ut.props),ny(It,ut),It.return=ot,ot=It;break e}b(ot,Ze);break}else p(ot,Ze);Ze=Ze.sibling}ut.type===g?(It=vd(ut.props.children,ot.mode,It,ut.key),It.return=ot,ot=It):(It=zA(ut.type,ut.key,ut.props,null,ot.mode,It),ny(It,ut),It.return=ot,ot=It)}return pe(ot);case m:e:{for(Ar=ut.key;Ze!==null;){if(Ze.key===Ar)if(Ze.tag===4&&Ze.stateNode.containerInfo===ut.containerInfo&&Ze.stateNode.implementation===ut.implementation){b(ot,Ze.sibling),It=H(Ze,ut.children||[]),It.return=ot,ot=It;break e}else{b(ot,Ze);break}else p(ot,Ze);Ze=Ze.sibling}It=bp(ut,ot.mode,It),It.return=ot,ot=It}return pe(ot);case _:return Ar=ut._init,ut=Ar(ut._payload),wn(ot,Ze,ut,It)}if(z(ut))return zr(ot,Ze,ut,It);if(k(ut)){if(Ar=k(ut),typeof Ar!="function")throw Error(a(150));return ut=Ar.call(ut),Tr(ot,Ze,ut,It)}if(typeof ut.then=="function")return wn(ot,Ze,EE(ut),It);if(ut.$$typeof===j)return wn(ot,Ze,Of(ot,ut),It);CE(ot,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint"?(ut=""+ut,Ze!==null&&Ze.tag===6?(b(ot,Ze.sibling),It=H(Ze,ut),It.return=ot,ot=It):(b(ot,Ze),It=xx(ut,ot.mode,It),It.return=ot,ot=It),pe(ot)):b(ot,Ze)}return function(ot,Ze,ut,It){try{ay=0;var Ar=wn(ot,Ze,ut,It);return Bx=null,Ar}catch(yr){if(yr===Ne||yr===je)throw yr;var ma=Vi(29,yr,null,ot.mode);return ma.lanes=It,ma.return=ot,ma}finally{}}}var Tx=iU(!0),oU=iU(!1),Iu=J(null),Lf=null;function B0(A){var p=A.alternate;F(Si,Si.current&1),F(Iu,A),Lf===null&&(p===null||oa.current!==null||p.memoizedState!==null)&&(Lf=A)}function lU(A){if(A.tag===22){if(F(Si,Si.current),F(Iu,A),Lf===null){var p=A.alternate;p!==null&&p.memoizedState!==null&&(Lf=A)}}else T0()}function T0(){F(Si,Si.current),F(Iu,Iu.current)}function JA(A){R(Iu),Lf===A&&(Lf=null),R(Si)}var Si=J(0);function jE(A){for(var p=A;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||K3(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function s3(A,p,b,E){p=A.memoizedState,b=b(E,p),b=b==null?p:d({},p,b),A.memoizedState=b,A.lanes===0&&(A.updateQueue.baseState=b)}var i3={enqueueSetState:function(A,p,b){A=A._reactInternals;var E=Dc(),H=kt(E);H.payload=p,b!=null&&(H.callback=b),p=Ft(A,H,E),p!==null&&(Pc(p,A,E),St(p,A,E))},enqueueReplaceState:function(A,p,b){A=A._reactInternals;var E=Dc(),H=kt(E);H.tag=1,H.payload=p,b!=null&&(H.callback=b),p=Ft(A,H,E),p!==null&&(Pc(p,A,E),St(p,A,E))},enqueueForceUpdate:function(A,p){A=A._reactInternals;var b=Dc(),E=kt(b);E.tag=2,p!=null&&(E.callback=p),p=Ft(A,E,b),p!==null&&(Pc(p,A,b),St(p,A,b))}};function cU(A,p,b,E,H,Z,pe){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(E,Z,pe):p.prototype&&p.prototype.isPureReactComponent?!yf(b,E)||!yf(H,Z):!0}function uU(A,p,b,E){A=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,E),p.state!==A&&i3.enqueueReplaceState(p,p.state,null)}function Dp(A,p){var b=p;if("ref"in p){b={};for(var E in p)E!=="ref"&&(b[E]=p[E])}if(A=A.defaultProps){b===p&&(b=d({},b));for(var H in A)b[H]===void 0&&(b[H]=A[H])}return b}var kE=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function dU(A){kE(A)}function fU(A){console.error(A)}function AU(A){kE(A)}function _E(A,p){try{var b=A.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function hU(A,p,b){try{var E=A.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(H){setTimeout(function(){throw H})}}function o3(A,p,b){return b=kt(b),b.tag=3,b.payload={element:null},b.callback=function(){_E(A,p)},b}function mU(A){return A=kt(A),A.tag=3,A}function pU(A,p,b,E){var H=b.type.getDerivedStateFromError;if(typeof H=="function"){var Z=E.value;A.payload=function(){return H(Z)},A.callback=function(){hU(p,b,E)}}var pe=b.stateNode;pe!==null&&typeof pe.componentDidCatch=="function"&&(A.callback=function(){hU(p,b,E),typeof H!="function"&&(R0===null?R0=new Set([this]):R0.add(this));var Se=E.stack;this.componentDidCatch(E.value,{componentStack:Se!==null?Se:""})})}function _he(A,p,b,E,H){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=b.alternate,p!==null&&E0(p,b,H,!0),b=Iu.current,b!==null){switch(b.tag){case 13:return Lf===null?T3():b.alternate===null&&Es===0&&(Es=3),b.flags&=-257,b.flags|=65536,b.lanes=H,E===Ie?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([E]):p.add(E),O3(A,E,H)),!1;case 22:return b.flags|=65536,E===Ie?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([E]):b.add(E)),O3(A,E,H)),!1}throw Error(a(435,b.tag))}return O3(A,E,H),T3(),!1}if(Oa)return p=Iu.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=H,E!==H1&&(A=Error(a(422),{cause:E}),N0(ca(A,b)))):(E!==H1&&(p=Error(a(423),{cause:E}),N0(ca(p,b))),A=A.current.alternate,A.flags|=65536,H&=-H,A.lanes|=H,E=ca(E,b),H=o3(A.stateNode,E,H),tr(A,H),Es!==4&&(Es=2)),!1;var Z=Error(a(520),{cause:E});if(Z=ca(Z,b),dy===null?dy=[Z]:dy.push(Z),Es!==4&&(Es=2),p===null)return!0;E=ca(E,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,A=H&-H,b.lanes|=A,A=o3(b.stateNode,E,A),tr(b,A),!1;case 1:if(p=b.type,Z=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(R0===null||!R0.has(Z))))return b.flags|=65536,H&=-H,b.lanes|=H,H=mU(H),pU(H,A,b,E),tr(b,H),!1}b=b.return}while(b!==null);return!1}var gU=Error(a(461)),$i=!1;function ho(A,p,b,E){p.child=A===null?oU(p,null,b,E):Tx(p,A.child,b,E)}function xU(A,p,b,E,H){b=b.render;var Z=p.ref;if("ref"in E){var pe={};for(var Se in E)Se!=="ref"&&(pe[Se]=E[Se])}else pe=E;return Bu(p),E=Bc(A,p,b,pe,Z,H),Se=Pn(),A!==null&&!$i?(Cp(A,p,H),ZA(A,p,H)):(Oa&&Se&&yp(p),p.flags|=1,ho(A,p,E,H),p.child)}function vU(A,p,b,E,H){if(A===null){var Z=b.type;return typeof Z=="function"&&!y0(Z)&&Z.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=Z,bU(A,p,Z,E,H)):(A=zA(b.type,null,E,p,p.mode,H),A.ref=p.ref,A.return=p,p.child=A)}if(Z=A.child,!m3(A,H)){var pe=Z.memoizedProps;if(b=b.compare,b=b!==null?b:yf,b(pe,E)&&A.ref===p.ref)return ZA(A,p,H)}return p.flags|=1,A=ju(Z,E),A.ref=p.ref,A.return=p,p.child=A}function bU(A,p,b,E,H){if(A!==null){var Z=A.memoizedProps;if(yf(Z,E)&&A.ref===p.ref)if($i=!1,p.pendingProps=E=Z,m3(A,H))(A.flags&131072)!==0&&($i=!0);else return p.lanes=A.lanes,ZA(A,p,H)}return l3(A,p,b,E,H)}function yU(A,p,b){var E=p.pendingProps,H=E.children,Z=A!==null?A.memoizedState:null;if(E.mode==="hidden"){if((p.flags&128)!==0){if(E=Z!==null?Z.baseLanes|b:b,A!==null){for(H=p.child=A.child,Z=0;H!==null;)Z=Z|H.lanes|H.childLanes,H=H.sibling;p.childLanes=Z&~E}else p.childLanes=0,p.child=null;return wU(A,p,E,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},A!==null&&ce(p,Z!==null?Z.cachePool:null),Z!==null?en(p,Z):Ua(),lU(p);else return p.lanes=p.childLanes=536870912,wU(A,p,Z!==null?Z.baseLanes|b:b,b)}else Z!==null?(ce(p,Z.cachePool),en(p,Z),T0(),p.memoizedState=null):(A!==null&&ce(p,null),Ua(),T0());return ho(A,p,H,b),p.child}function wU(A,p,b,E){var H=te();return H=H===null?null:{parent:Hs._currentValue,pool:H},p.memoizedState={baseLanes:b,cachePool:H},A!==null&&ce(p,null),Ua(),lU(p),A!==null&&E0(A,p,E,!0),null}function SE(A,p){var b=p.ref;if(b===null)A!==null&&A.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(a(284));(A===null||A.ref!==b)&&(p.flags|=4194816)}}function l3(A,p,b,E,H){return Bu(p),b=Bc(A,p,b,E,void 0,H),E=Pn(),A!==null&&!$i?(Cp(A,p,H),ZA(A,p,H)):(Oa&&E&&yp(p),p.flags|=1,ho(A,p,b,H),p.child)}function NU(A,p,b,E,H,Z){return Bu(p),p.updateQueue=null,b=KA(p,E,b,H),Ff(A),E=Pn(),A!==null&&!$i?(Cp(A,p,Z),ZA(A,p,Z)):(Oa&&E&&yp(p),p.flags|=1,ho(A,p,b,Z),p.child)}function EU(A,p,b,E,H){if(Bu(p),p.stateNode===null){var Z=ci,pe=b.contextType;typeof pe=="object"&&pe!==null&&(Z=Qs(pe)),Z=new b(E,Z),p.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null,Z.updater=i3,p.stateNode=Z,Z._reactInternals=p,Z=p.stateNode,Z.props=E,Z.state=p.memoizedState,Z.refs={},Je(p),pe=b.contextType,Z.context=typeof pe=="object"&&pe!==null?Qs(pe):ci,Z.state=p.memoizedState,pe=b.getDerivedStateFromProps,typeof pe=="function"&&(s3(p,b,pe,E),Z.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(pe=Z.state,typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount(),pe!==Z.state&&i3.enqueueReplaceState(Z,Z.state,null),Xt(p,E,Z,H),gr(),Z.state=p.memoizedState),typeof Z.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(A===null){Z=p.stateNode;var Se=p.memoizedProps,Ge=Dp(b,Se);Z.props=Ge;var At=Z.context,_t=b.contextType;pe=ci,typeof _t=="object"&&_t!==null&&(pe=Qs(_t));var Pt=b.getDerivedStateFromProps;_t=typeof Pt=="function"||typeof Z.getSnapshotBeforeUpdate=="function",Se=p.pendingProps!==Se,_t||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(Se||At!==pe)&&uU(p,Z,E,pe),bt=!1;var pt=p.memoizedState;Z.state=pt,Xt(p,E,Z,H),gr(),At=p.memoizedState,Se||pt!==At||bt?(typeof Pt=="function"&&(s3(p,b,Pt,E),At=p.memoizedState),(Ge=bt||cU(p,b,Ge,E,pt,At,pe))?(_t||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(p.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=At),Z.props=E,Z.state=At,Z.context=pe,E=Ge):(typeof Z.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{Z=p.stateNode,et(A,p),pe=p.memoizedProps,_t=Dp(b,pe),Z.props=_t,Pt=p.pendingProps,pt=Z.context,At=b.contextType,Ge=ci,typeof At=="object"&&At!==null&&(Ge=Qs(At)),Se=b.getDerivedStateFromProps,(At=typeof Se=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(pe!==Pt||pt!==Ge)&&uU(p,Z,E,Ge),bt=!1,pt=p.memoizedState,Z.state=pt,Xt(p,E,Z,H),gr();var vt=p.memoizedState;pe!==Pt||pt!==vt||bt||A!==null&&A.dependencies!==null&&wx(A.dependencies)?(typeof Se=="function"&&(s3(p,b,Se,E),vt=p.memoizedState),(_t=bt||cU(p,b,_t,E,pt,vt,Ge)||A!==null&&A.dependencies!==null&&wx(A.dependencies))?(At||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(E,vt,Ge),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(E,vt,Ge)),typeof Z.componentDidUpdate=="function"&&(p.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof Z.componentDidUpdate!="function"||pe===A.memoizedProps&&pt===A.memoizedState||(p.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||pe===A.memoizedProps&&pt===A.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=vt),Z.props=E,Z.state=vt,Z.context=Ge,E=_t):(typeof Z.componentDidUpdate!="function"||pe===A.memoizedProps&&pt===A.memoizedState||(p.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||pe===A.memoizedProps&&pt===A.memoizedState||(p.flags|=1024),E=!1)}return Z=E,SE(A,p),E=(p.flags&128)!==0,Z||E?(Z=p.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:Z.render(),p.flags|=1,A!==null&&E?(p.child=Tx(p,A.child,null,H),p.child=Tx(p,null,b,H)):ho(A,p,b,H),p.memoizedState=Z.state,A=p.child):A=ZA(A,p,H),A}function CU(A,p,b,E){return bl(),p.flags|=256,ho(A,p,b,E),p.child}var c3={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function u3(A){return{baseLanes:A,cachePool:xe()}}function d3(A,p,b){return A=A!==null?A.childLanes&~b:0,p&&(A|=Ou),A}function jU(A,p,b){var E=p.pendingProps,H=!1,Z=(p.flags&128)!==0,pe;if((pe=Z)||(pe=A!==null&&A.memoizedState===null?!1:(Si.current&2)!==0),pe&&(H=!0,p.flags&=-129),pe=(p.flags&32)!==0,p.flags&=-33,A===null){if(Oa){if(H?B0(p):T0(),Oa){var Se=Jn,Ge;if(Ge=Se){e:{for(Ge=Se,Se=ku;Ge.nodeType!==8;){if(!Se){Se=null;break e}if(Ge=Td(Ge.nextSibling),Ge===null){Se=null;break e}}Se=Ge}Se!==null?(p.memoizedState={dehydrated:Se,treeContext:VA!==null?{id:yd,overflow:wd}:null,retryLane:536870912,hydrationErrors:null},Ge=Vi(18,null,null,0),Ge.stateNode=Se,Ge.return=p,p.child=Ge,Us=p,Jn=null,Ge=!0):Ge=!1}Ge||GA(p)}if(Se=p.memoizedState,Se!==null&&(Se=Se.dehydrated,Se!==null))return K3(Se)?p.lanes=32:p.lanes=536870912,null;JA(p)}return Se=E.children,E=E.fallback,H?(T0(),H=p.mode,Se=BE({mode:"hidden",children:Se},H),E=vd(E,H,b,null),Se.return=p,E.return=p,Se.sibling=E,p.child=Se,H=p.child,H.memoizedState=u3(b),H.childLanes=d3(A,pe,b),p.memoizedState=c3,E):(B0(p),f3(p,Se))}if(Ge=A.memoizedState,Ge!==null&&(Se=Ge.dehydrated,Se!==null)){if(Z)p.flags&256?(B0(p),p.flags&=-257,p=A3(A,p,b)):p.memoizedState!==null?(T0(),p.child=A.child,p.flags|=128,p=null):(T0(),H=E.fallback,Se=p.mode,E=BE({mode:"visible",children:E.children},Se),H=vd(H,Se,b,null),H.flags|=2,E.return=p,H.return=p,E.sibling=H,p.child=E,Tx(p,A.child,null,b),E=p.child,E.memoizedState=u3(b),E.childLanes=d3(A,pe,b),p.memoizedState=c3,p=H);else if(B0(p),K3(Se)){if(pe=Se.nextSibling&&Se.nextSibling.dataset,pe)var At=pe.dgst;pe=At,E=Error(a(419)),E.stack="",E.digest=pe,N0({value:E,source:null,stack:null}),p=A3(A,p,b)}else if($i||E0(A,p,b,!1),pe=(b&A.childLanes)!==0,$i||pe){if(pe=Rn,pe!==null&&(E=b&-b,E=(E&42)!==0?1:ps(E),E=(E&(pe.suspendedLanes|b))!==0?0:E,E!==0&&E!==Ge.retryLane))throw Ge.retryLane=E,xd(A,E),Pc(pe,A,E),gU;Se.data==="$?"||T3(),p=A3(A,p,b)}else Se.data==="$?"?(p.flags|=192,p.child=A.child,p=null):(A=Ge.treeContext,Jn=Td(Se.nextSibling),Us=p,Oa=!0,Tf=null,ku=!1,A!==null&&(Kl[vl++]=yd,Kl[vl++]=wd,Kl[vl++]=VA,yd=A.id,wd=A.overflow,VA=p),p=f3(p,E.children),p.flags|=4096);return p}return H?(T0(),H=E.fallback,Se=p.mode,Ge=A.child,At=Ge.sibling,E=ju(Ge,{mode:"hidden",children:E.children}),E.subtreeFlags=Ge.subtreeFlags&65011712,At!==null?H=ju(At,H):(H=vd(H,Se,b,null),H.flags|=2),H.return=p,E.return=p,E.sibling=H,p.child=E,E=H,H=p.child,Se=A.child.memoizedState,Se===null?Se=u3(b):(Ge=Se.cachePool,Ge!==null?(At=Hs._currentValue,Ge=Ge.parent!==At?{parent:At,pool:At}:Ge):Ge=xe(),Se={baseLanes:Se.baseLanes|b,cachePool:Ge}),H.memoizedState=Se,H.childLanes=d3(A,pe,b),p.memoizedState=c3,E):(B0(p),b=A.child,A=b.sibling,b=ju(b,{mode:"visible",children:E.children}),b.return=p,b.sibling=null,A!==null&&(pe=p.deletions,pe===null?(p.deletions=[A],p.flags|=16):pe.push(A)),p.child=b,p.memoizedState=null,b)}function f3(A,p){return p=BE({mode:"visible",children:p},A.mode),p.return=A,A.child=p}function BE(A,p){return A=Vi(22,A,null,p),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function A3(A,p,b){return Tx(p,A.child,null,b),A=f3(p,p.pendingProps.children),A.flags|=2,p.memoizedState=null,A}function kU(A,p,b){A.lanes|=p;var E=A.alternate;E!==null&&(E.lanes|=p),bx(A.return,p,b)}function h3(A,p,b,E,H){var Z=A.memoizedState;Z===null?A.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:H}:(Z.isBackwards=p,Z.rendering=null,Z.renderingStartTime=0,Z.last=E,Z.tail=b,Z.tailMode=H)}function _U(A,p,b){var E=p.pendingProps,H=E.revealOrder,Z=E.tail;if(ho(A,p,E.children,b),E=Si.current,(E&2)!==0)E=E&1|2,p.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=p.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&kU(A,b,p);else if(A.tag===19)kU(A,b,p);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break e;for(;A.sibling===null;){if(A.return===null||A.return===p)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}E&=1}switch(F(Si,E),H){case"forwards":for(b=p.child,H=null;b!==null;)A=b.alternate,A!==null&&jE(A)===null&&(H=b),b=b.sibling;b=H,b===null?(H=p.child,p.child=null):(H=b.sibling,b.sibling=null),h3(p,!1,H,b,Z);break;case"backwards":for(b=null,H=p.child,p.child=null;H!==null;){if(A=H.alternate,A!==null&&jE(A)===null){p.child=H;break}A=H.sibling,H.sibling=b,b=H,H=A}h3(p,!0,b,null,Z);break;case"together":h3(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function ZA(A,p,b){if(A!==null&&(p.dependencies=A.dependencies),P0|=p.lanes,(b&p.childLanes)===0)if(A!==null){if(E0(A,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(A!==null&&p.child!==A.child)throw Error(a(153));if(p.child!==null){for(A=p.child,b=ju(A,A.pendingProps),p.child=b,b.return=p;A.sibling!==null;)A=A.sibling,b=b.sibling=ju(A,A.pendingProps),b.return=p;b.sibling=null}return p.child}function m3(A,p){return(A.lanes&p)!==0?!0:(A=A.dependencies,!!(A!==null&&wx(A)))}function She(A,p,b){switch(p.tag){case 3:ie(p,p.stateNode.containerInfo),If(p,Hs,A.memoizedState.cache),bl();break;case 27:case 5:Ae(p);break;case 4:ie(p,p.stateNode.containerInfo);break;case 10:If(p,p.type,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(B0(p),p.flags|=128,null):(b&p.child.childLanes)!==0?jU(A,p,b):(B0(p),A=ZA(A,p,b),A!==null?A.sibling:null);B0(p);break;case 19:var H=(A.flags&128)!==0;if(E=(b&p.childLanes)!==0,E||(E0(A,p,b,!1),E=(b&p.childLanes)!==0),H){if(E)return _U(A,p,b);p.flags|=128}if(H=p.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),F(Si,Si.current),E)break;return null;case 22:case 23:return p.lanes=0,yU(A,p,b);case 24:If(p,Hs,A.memoizedState.cache)}return ZA(A,p,b)}function SU(A,p,b){if(A!==null)if(A.memoizedProps!==p.pendingProps)$i=!0;else{if(!m3(A,b)&&(p.flags&128)===0)return $i=!1,She(A,p,b);$i=(A.flags&131072)!==0}else $i=!1,Oa&&(p.flags&1048576)!==0&&iE(p,vx,p.index);switch(p.lanes=0,p.tag){case 16:e:{A=p.pendingProps;var E=p.elementType,H=E._init;if(E=H(E._payload),p.type=E,typeof E=="function")y0(E)?(A=Dp(E,A),p.tag=1,p=EU(null,p,E,A,b)):(p.tag=0,p=l3(null,p,E,A,b));else{if(E!=null){if(H=E.$$typeof,H===O){p.tag=11,p=xU(null,p,E,A,b);break e}else if(H===C){p.tag=14,p=vU(null,p,E,A,b);break e}}throw p=U(E)||E,Error(a(306,p,""))}}return p;case 0:return l3(A,p,p.type,p.pendingProps,b);case 1:return E=p.type,H=Dp(E,p.pendingProps),EU(A,p,E,H,b);case 3:e:{if(ie(p,p.stateNode.containerInfo),A===null)throw Error(a(387));E=p.pendingProps;var Z=p.memoizedState;H=Z.element,et(A,p),Xt(p,E,null,b);var pe=p.memoizedState;if(E=pe.cache,If(p,Hs,E),E!==Z.cache&&yx(p,[Hs],b,!0),gr(),E=pe.element,Z.isDehydrated)if(Z={element:E,isDehydrated:!1,cache:pe.cache},p.updateQueue.baseState=Z,p.memoizedState=Z,p.flags&256){p=CU(A,p,E,b);break e}else if(E!==H){H=ca(Error(a(424)),p),N0(H),p=CU(A,p,E,b);break e}else{switch(A=p.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Jn=Td(A.firstChild),Us=p,Oa=!0,Tf=null,ku=!0,b=oU(p,null,E,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(bl(),E===H){p=ZA(A,p,b);break e}ho(A,p,E,b)}p=p.child}return p;case 26:return SE(A,p),A===null?(b=O9(p.type,null,p.pendingProps,null))?p.memoizedState=b:Oa||(b=p.type,A=p.pendingProps,E=VE(ne.current).createElement(b),E[xa]=p,E[la]=A,po(E,b,A),Fe(E),p.stateNode=E):p.memoizedState=O9(p.type,A.memoizedProps,p.pendingProps,A.memoizedState),null;case 27:return Ae(p),A===null&&Oa&&(E=p.stateNode=B9(p.type,p.pendingProps,ne.current),Us=p,ku=!0,H=Jn,U0(p.type)?(W3=H,Jn=Td(E.firstChild)):Jn=H),ho(A,p,p.pendingProps.children,b),SE(A,p),A===null&&(p.flags|=4194304),p.child;case 5:return A===null&&Oa&&((H=E=Jn)&&(E=a0e(E,p.type,p.pendingProps,ku),E!==null?(p.stateNode=E,Us=p,Jn=Td(E.firstChild),ku=!1,H=!0):H=!1),H||GA(p)),Ae(p),H=p.type,Z=p.pendingProps,pe=A!==null?A.memoizedProps:null,E=Z.children,$3(H,Z)?E=null:pe!==null&&$3(H,pe)&&(p.flags|=32),p.memoizedState!==null&&(H=Bc(A,p,Df,null,null,b),by._currentValue=H),SE(A,p),ho(A,p,E,b),p.child;case 6:return A===null&&Oa&&((A=b=Jn)&&(b=n0e(b,p.pendingProps,ku),b!==null?(p.stateNode=b,Us=p,Jn=null,A=!0):A=!1),A||GA(p)),null;case 13:return jU(A,p,b);case 4:return ie(p,p.stateNode.containerInfo),E=p.pendingProps,A===null?p.child=Tx(p,null,E,b):ho(A,p,E,b),p.child;case 11:return xU(A,p,p.type,p.pendingProps,b);case 7:return ho(A,p,p.pendingProps,b),p.child;case 8:return ho(A,p,p.pendingProps.children,b),p.child;case 12:return ho(A,p,p.pendingProps.children,b),p.child;case 10:return E=p.pendingProps,If(p,p.type,E.value),ho(A,p,E.children,b),p.child;case 9:return H=p.type._context,E=p.pendingProps.children,Bu(p),H=Qs(H),E=E(H),p.flags|=1,ho(A,p,E,b),p.child;case 14:return vU(A,p,p.type,p.pendingProps,b);case 15:return bU(A,p,p.type,p.pendingProps,b);case 19:return _U(A,p,b);case 31:return E=p.pendingProps,b=p.mode,E={mode:E.mode,children:E.children},A===null?(b=BE(E,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=ju(A.child,E),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return yU(A,p,b);case 24:return Bu(p),E=Qs(Hs),A===null?(H=te(),H===null&&(H=Rn,Z=z1(),H.pooledCache=Z,Z.refCount++,Z!==null&&(H.pooledCacheLanes|=b),H=Z),p.memoizedState={parent:E,cache:H},Je(p),If(p,Hs,H)):((A.lanes&b)!==0&&(et(A,p),Xt(p,null,null,b),gr()),H=A.memoizedState,Z=p.memoizedState,H.parent!==E?(H={parent:E,cache:E},p.memoizedState=H,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=H),If(p,Hs,E)):(E=Z.cache,If(p,Hs,E),E!==H.cache&&yx(p,[Hs],b,!0))),ho(A,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(a(156,p.tag))}function eh(A){A.flags|=4}function BU(A,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!L9(p)){if(p=Iu.current,p!==null&&((Ba&4194048)===Ba?Lf!==null:(Ba&62914560)!==Ba&&(Ba&536870912)===0||p!==Lf))throw lt=Ie,Ee;A.flags|=8192}}function TE(A,p){p!==null&&(A.flags|=4),A.flags&16384&&(p=A.tag!==22?Pr():536870912,A.lanes|=p,Dx|=p)}function sy(A,p){if(!Oa)switch(A.tailMode){case"hidden":p=A.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?A.tail=null:b.sibling=null;break;case"collapsed":b=A.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?p||A.tail===null?A.tail=null:A.tail.sibling=null:E.sibling=null}}function ls(A){var p=A.alternate!==null&&A.alternate.child===A.child,b=0,E=0;if(p)for(var H=A.child;H!==null;)b|=H.lanes|H.childLanes,E|=H.subtreeFlags&65011712,E|=H.flags&65011712,H.return=A,H=H.sibling;else for(H=A.child;H!==null;)b|=H.lanes|H.childLanes,E|=H.subtreeFlags,E|=H.flags,H.return=A,H=H.sibling;return A.subtreeFlags|=E,A.childLanes=b,p}function Bhe(A,p,b){var E=p.pendingProps;switch(wp(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ls(p),null;case 1:return ls(p),null;case 3:return b=p.stateNode,E=null,A!==null&&(E=A.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),Su(Hs),ae(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(A===null||A.child===null)&&(fo(p)?eh(p):A===null||A.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,lE())),ls(p),null;case 26:return b=p.memoizedState,A===null?(eh(p),b!==null?(ls(p),BU(p,b)):(ls(p),p.flags&=-16777217)):b?b!==A.memoizedState?(eh(p),ls(p),BU(p,b)):(ls(p),p.flags&=-16777217):(A.memoizedProps!==E&&eh(p),ls(p),p.flags&=-16777217),null;case 27:ke(p),b=ne.current;var H=p.type;if(A!==null&&p.stateNode!=null)A.memoizedProps!==E&&eh(p);else{if(!E){if(p.stateNode===null)throw Error(a(166));return ls(p),null}A=W.current,fo(p)?oE(p):(A=B9(H,E,b),p.stateNode=A,eh(p))}return ls(p),null;case 5:if(ke(p),b=p.type,A!==null&&p.stateNode!=null)A.memoizedProps!==E&&eh(p);else{if(!E){if(p.stateNode===null)throw Error(a(166));return ls(p),null}if(A=W.current,fo(p))oE(p);else{switch(H=VE(ne.current),A){case 1:A=H.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:A=H.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":A=H.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":A=H.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":A=H.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof E.is=="string"?H.createElement("select",{is:E.is}):H.createElement("select"),E.multiple?A.multiple=!0:E.size&&(A.size=E.size);break;default:A=typeof E.is=="string"?H.createElement(b,{is:E.is}):H.createElement(b)}}A[xa]=p,A[la]=E;e:for(H=p.child;H!==null;){if(H.tag===5||H.tag===6)A.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===p)break e;for(;H.sibling===null;){if(H.return===null||H.return===p)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}p.stateNode=A;e:switch(po(A,b,E),b){case"button":case"input":case"select":case"textarea":A=!!E.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&eh(p)}}return ls(p),p.flags&=-16777217,null;case 6:if(A&&p.stateNode!=null)A.memoizedProps!==E&&eh(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(a(166));if(A=ne.current,fo(p)){if(A=p.stateNode,b=p.memoizedProps,E=null,H=Us,H!==null)switch(H.tag){case 27:case 5:E=H.memoizedProps}A[xa]=p,A=!!(A.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||N9(A.nodeValue,b)),A||GA(p)}else A=VE(A).createTextNode(E),A[xa]=p,p.stateNode=A}return ls(p),null;case 13:if(E=p.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(H=fo(p),E!==null&&E.dehydrated!==null){if(A===null){if(!H)throw Error(a(318));if(H=p.memoizedState,H=H!==null?H.dehydrated:null,!H)throw Error(a(317));H[xa]=p}else bl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ls(p),H=!1}else H=lE(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=H),H=!0;if(!H)return p.flags&256?(JA(p),p):(JA(p),null)}if(JA(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=E!==null,A=A!==null&&A.memoizedState!==null,b){E=p.child,H=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(H=E.alternate.memoizedState.cachePool.pool);var Z=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(Z=E.memoizedState.cachePool.pool),Z!==H&&(E.flags|=2048)}return b!==A&&b&&(p.child.flags|=8192),TE(p,p.updateQueue),ls(p),null;case 4:return ae(),A===null&&U3(p.stateNode.containerInfo),ls(p),null;case 10:return Su(p.type),ls(p),null;case 19:if(R(Si),H=p.memoizedState,H===null)return ls(p),null;if(E=(p.flags&128)!==0,Z=H.rendering,Z===null)if(E)sy(H,!1);else{if(Es!==0||A!==null&&(A.flags&128)!==0)for(A=p.child;A!==null;){if(Z=jE(A),Z!==null){for(p.flags|=128,sy(H,!1),A=Z.updateQueue,p.updateQueue=A,TE(p,A),p.subtreeFlags=0,A=b,b=p.child;b!==null;)vp(b,A),b=b.sibling;return F(Si,Si.current&1|2),p.child}A=A.sibling}H.tail!==null&&Ce()>FE&&(p.flags|=128,E=!0,sy(H,!1),p.lanes=4194304)}else{if(!E)if(A=jE(Z),A!==null){if(p.flags|=128,E=!0,A=A.updateQueue,p.updateQueue=A,TE(p,A),sy(H,!0),H.tail===null&&H.tailMode==="hidden"&&!Z.alternate&&!Oa)return ls(p),null}else 2*Ce()-H.renderingStartTime>FE&&b!==536870912&&(p.flags|=128,E=!0,sy(H,!1),p.lanes=4194304);H.isBackwards?(Z.sibling=p.child,p.child=Z):(A=H.last,A!==null?A.sibling=Z:p.child=Z,H.last=Z)}return H.tail!==null?(p=H.tail,H.rendering=p,H.tail=p.sibling,H.renderingStartTime=Ce(),p.sibling=null,A=Si.current,F(Si,E?A&1|2:A&1),p):(ls(p),null);case 22:case 23:return JA(p),qr(),E=p.memoizedState!==null,A!==null?A.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(b&536870912)!==0&&(p.flags&128)===0&&(ls(p),p.subtreeFlags&6&&(p.flags|=8192)):ls(p),b=p.updateQueue,b!==null&&TE(p,b.retryQueue),b=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048),A!==null&&R(G),null;case 24:return b=null,A!==null&&(b=A.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Su(Hs),ls(p),null;case 25:return null;case 30:return null}throw Error(a(156,p.tag))}function The(A,p){switch(wp(p),p.tag){case 1:return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 3:return Su(Hs),ae(),A=p.flags,(A&65536)!==0&&(A&128)===0?(p.flags=A&-65537|128,p):null;case 26:case 27:case 5:return ke(p),null;case 13:if(JA(p),A=p.memoizedState,A!==null&&A.dehydrated!==null){if(p.alternate===null)throw Error(a(340));bl()}return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 19:return R(Si),null;case 4:return ae(),null;case 10:return Su(p.type),null;case 22:case 23:return JA(p),qr(),A!==null&&R(G),A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 24:return Su(Hs),null;case 25:return null;default:return null}}function TU(A,p){switch(wp(p),p.tag){case 3:Su(Hs),ae();break;case 26:case 27:case 5:ke(p);break;case 4:ae();break;case 13:JA(p);break;case 19:R(Si);break;case 10:Su(p.type);break;case 22:case 23:JA(p),qr(),A!==null&&R(G);break;case 24:Su(Hs)}}function iy(A,p){try{var b=p.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var H=E.next;b=H;do{if((b.tag&A)===A){E=void 0;var Z=b.create,pe=b.inst;E=Z(),pe.destroy=E}b=b.next}while(b!==H)}}catch(Se){_n(p,p.return,Se)}}function I0(A,p,b){try{var E=p.updateQueue,H=E!==null?E.lastEffect:null;if(H!==null){var Z=H.next;E=Z;do{if((E.tag&A)===A){var pe=E.inst,Se=pe.destroy;if(Se!==void 0){pe.destroy=void 0,H=p;var Ge=b,At=Se;try{At()}catch(_t){_n(H,Ge,_t)}}}E=E.next}while(E!==Z)}}catch(_t){_n(p,p.return,_t)}}function IU(A){var p=A.updateQueue;if(p!==null){var b=A.stateNode;try{Ma(p,b)}catch(E){_n(A,A.return,E)}}}function OU(A,p,b){b.props=Dp(A.type,A.memoizedProps),b.state=A.memoizedState;try{b.componentWillUnmount()}catch(E){_n(A,p,E)}}function oy(A,p){try{var b=A.ref;if(b!==null){switch(A.tag){case 26:case 27:case 5:var E=A.stateNode;break;case 30:E=A.stateNode;break;default:E=A.stateNode}typeof b=="function"?A.refCleanup=b(E):b.current=E}}catch(H){_n(A,p,H)}}function Mf(A,p){var b=A.ref,E=A.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(H){_n(A,p,H)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(H){_n(A,p,H)}else b.current=null}function FU(A){var p=A.type,b=A.memoizedProps,E=A.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(H){_n(A,A.return,H)}}function p3(A,p,b){try{var E=A.stateNode;Jhe(E,A.type,b,p),E[la]=p}catch(H){_n(A,A.return,H)}}function DU(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&U0(A.type)||A.tag===4}function g3(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||DU(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&U0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function x3(A,p,b){var E=A.tag;if(E===5||E===6)A=A.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(A,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(A),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=zE));else if(E!==4&&(E===27&&U0(A.type)&&(b=A.stateNode,p=null),A=A.child,A!==null))for(x3(A,p,b),A=A.sibling;A!==null;)x3(A,p,b),A=A.sibling}function IE(A,p,b){var E=A.tag;if(E===5||E===6)A=A.stateNode,p?b.insertBefore(A,p):b.appendChild(A);else if(E!==4&&(E===27&&U0(A.type)&&(b=A.stateNode),A=A.child,A!==null))for(IE(A,p,b),A=A.sibling;A!==null;)IE(A,p,b),A=A.sibling}function PU(A){var p=A.stateNode,b=A.memoizedProps;try{for(var E=A.type,H=p.attributes;H.length;)p.removeAttributeNode(H[0]);po(p,E,b),p[xa]=A,p[la]=b}catch(Z){_n(A,A.return,Z)}}var th=!1,Vs=!1,v3=!1,RU=typeof WeakSet=="function"?WeakSet:Set,Gi=null;function Ihe(A,p){if(A=A.containerInfo,z3=XE,A=uo(A),_i(A)){if("selectionStart"in A)var b={start:A.selectionStart,end:A.selectionEnd};else e:{b=(b=A.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var H=E.anchorOffset,Z=E.focusNode;E=E.focusOffset;try{b.nodeType,Z.nodeType}catch{b=null;break e}var pe=0,Se=-1,Ge=-1,At=0,_t=0,Pt=A,pt=null;t:for(;;){for(var vt;Pt!==b||H!==0&&Pt.nodeType!==3||(Se=pe+H),Pt!==Z||E!==0&&Pt.nodeType!==3||(Ge=pe+E),Pt.nodeType===3&&(pe+=Pt.nodeValue.length),(vt=Pt.firstChild)!==null;)pt=Pt,Pt=vt;for(;;){if(Pt===A)break t;if(pt===b&&++At===H&&(Se=pe),pt===Z&&++_t===E&&(Ge=pe),(vt=Pt.nextSibling)!==null)break;Pt=pt,pt=Pt.parentNode}Pt=vt}b=Se===-1||Ge===-1?null:{start:Se,end:Ge}}else b=null}b=b||{start:0,end:0}}else b=null;for(V3={focusedElem:A,selectionRange:b},XE=!1,Gi=p;Gi!==null;)if(p=Gi,A=p.child,(p.subtreeFlags&1024)!==0&&A!==null)A.return=p,Gi=A;else for(;Gi!==null;){switch(p=Gi,Z=p.alternate,A=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&Z!==null){A=void 0,b=p,H=Z.memoizedProps,Z=Z.memoizedState,E=b.stateNode;try{var zr=Dp(b.type,H,b.elementType===b.type);A=E.getSnapshotBeforeUpdate(zr,Z),E.__reactInternalSnapshotBeforeUpdate=A}catch(Tr){_n(b,b.return,Tr)}}break;case 3:if((A&1024)!==0){if(A=p.stateNode.containerInfo,b=A.nodeType,b===9)q3(A);else if(b===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":q3(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(a(163))}if(A=p.sibling,A!==null){A.return=p.return,Gi=A;break}Gi=p.return}}function LU(A,p,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:O0(A,b),E&4&&iy(5,b);break;case 1:if(O0(A,b),E&4)if(A=b.stateNode,p===null)try{A.componentDidMount()}catch(pe){_n(b,b.return,pe)}else{var H=Dp(b.type,p.memoizedProps);p=p.memoizedState;try{A.componentDidUpdate(H,p,A.__reactInternalSnapshotBeforeUpdate)}catch(pe){_n(b,b.return,pe)}}E&64&&IU(b),E&512&&oy(b,b.return);break;case 3:if(O0(A,b),E&64&&(A=b.updateQueue,A!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{Ma(A,p)}catch(pe){_n(b,b.return,pe)}}break;case 27:p===null&&E&4&&PU(b);case 26:case 5:O0(A,b),p===null&&E&4&&FU(b),E&512&&oy(b,b.return);break;case 12:O0(A,b);break;case 13:O0(A,b),E&4&&QU(A,b),E&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=Qhe.bind(null,b),s0e(A,b))));break;case 22:if(E=b.memoizedState!==null||th,!E){p=p!==null&&p.memoizedState!==null||Vs,H=th;var Z=Vs;th=E,(Vs=p)&&!Z?F0(A,b,(b.subtreeFlags&8772)!==0):O0(A,b),th=H,Vs=Z}break;case 30:break;default:O0(A,b)}}function MU(A){var p=A.alternate;p!==null&&(A.alternate=null,MU(p)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(p=A.stateNode,p!==null&&De(p)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Zn=null,Xl=!1;function rh(A,p,b){for(b=b.child;b!==null;)UU(A,p,b),b=b.sibling}function UU(A,p,b){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(nt,b)}catch{}switch(b.tag){case 26:Vs||Mf(b,p),rh(A,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Vs||Mf(b,p);var E=Zn,H=Xl;U0(b.type)&&(Zn=b.stateNode,Xl=!1),rh(A,p,b),py(b.stateNode),Zn=E,Xl=H;break;case 5:Vs||Mf(b,p);case 6:if(E=Zn,H=Xl,Zn=null,rh(A,p,b),Zn=E,Xl=H,Zn!==null)if(Xl)try{(Zn.nodeType===9?Zn.body:Zn.nodeName==="HTML"?Zn.ownerDocument.body:Zn).removeChild(b.stateNode)}catch(Z){_n(b,p,Z)}else try{Zn.removeChild(b.stateNode)}catch(Z){_n(b,p,Z)}break;case 18:Zn!==null&&(Xl?(A=Zn,_9(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,b.stateNode),Ey(A)):_9(Zn,b.stateNode));break;case 4:E=Zn,H=Xl,Zn=b.stateNode.containerInfo,Xl=!0,rh(A,p,b),Zn=E,Xl=H;break;case 0:case 11:case 14:case 15:Vs||I0(2,b,p),Vs||I0(4,b,p),rh(A,p,b);break;case 1:Vs||(Mf(b,p),E=b.stateNode,typeof E.componentWillUnmount=="function"&&OU(b,p,E)),rh(A,p,b);break;case 21:rh(A,p,b);break;case 22:Vs=(E=Vs)||b.memoizedState!==null,rh(A,p,b),Vs=E;break;default:rh(A,p,b)}}function QU(A,p){if(p.memoizedState===null&&(A=p.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Ey(A)}catch(b){_n(p,p.return,b)}}function Ohe(A){switch(A.tag){case 13:case 19:var p=A.stateNode;return p===null&&(p=A.stateNode=new RU),p;case 22:return A=A.stateNode,p=A._retryCache,p===null&&(p=A._retryCache=new RU),p;default:throw Error(a(435,A.tag))}}function b3(A,p){var b=Ohe(A);p.forEach(function(E){var H=Hhe.bind(null,A,E);b.has(E)||(b.add(E),E.then(H,H))})}function Ic(A,p){var b=p.deletions;if(b!==null)for(var E=0;E<b.length;E++){var H=b[E],Z=A,pe=p,Se=pe;e:for(;Se!==null;){switch(Se.tag){case 27:if(U0(Se.type)){Zn=Se.stateNode,Xl=!1;break e}break;case 5:Zn=Se.stateNode,Xl=!1;break e;case 3:case 4:Zn=Se.stateNode.containerInfo,Xl=!0;break e}Se=Se.return}if(Zn===null)throw Error(a(160));UU(Z,pe,H),Zn=null,Xl=!1,Z=H.alternate,Z!==null&&(Z.return=null),H.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)HU(p,A),p=p.sibling}var Bd=null;function HU(A,p){var b=A.alternate,E=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Ic(p,A),Oc(A),E&4&&(I0(3,A,A.return),iy(3,A),I0(5,A,A.return));break;case 1:Ic(p,A),Oc(A),E&512&&(Vs||b===null||Mf(b,b.return)),E&64&&th&&(A=A.updateQueue,A!==null&&(E=A.callbacks,E!==null&&(b=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var H=Bd;if(Ic(p,A),Oc(A),E&512&&(Vs||b===null||Mf(b,b.return)),E&4){var Z=b!==null?b.memoizedState:null;if(E=A.memoizedState,b===null)if(E===null)if(A.stateNode===null){e:{E=A.type,b=A.memoizedProps,H=H.ownerDocument||H;t:switch(E){case"title":Z=H.getElementsByTagName("title")[0],(!Z||Z[Oe]||Z[xa]||Z.namespaceURI==="http://www.w3.org/2000/svg"||Z.hasAttribute("itemprop"))&&(Z=H.createElement(E),H.head.insertBefore(Z,H.querySelector("head > title"))),po(Z,E,b),Z[xa]=A,Fe(Z),E=Z;break e;case"link":var pe=P9("link","href",H).get(E+(b.href||""));if(pe){for(var Se=0;Se<pe.length;Se++)if(Z=pe[Se],Z.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&Z.getAttribute("rel")===(b.rel==null?null:b.rel)&&Z.getAttribute("title")===(b.title==null?null:b.title)&&Z.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){pe.splice(Se,1);break t}}Z=H.createElement(E),po(Z,E,b),H.head.appendChild(Z);break;case"meta":if(pe=P9("meta","content",H).get(E+(b.content||""))){for(Se=0;Se<pe.length;Se++)if(Z=pe[Se],Z.getAttribute("content")===(b.content==null?null:""+b.content)&&Z.getAttribute("name")===(b.name==null?null:b.name)&&Z.getAttribute("property")===(b.property==null?null:b.property)&&Z.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&Z.getAttribute("charset")===(b.charSet==null?null:b.charSet)){pe.splice(Se,1);break t}}Z=H.createElement(E),po(Z,E,b),H.head.appendChild(Z);break;default:throw Error(a(468,E))}Z[xa]=A,Fe(Z),E=Z}A.stateNode=E}else R9(H,A.type,A.stateNode);else A.stateNode=D9(H,E,A.memoizedProps);else Z!==E?(Z===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):Z.count--,E===null?R9(H,A.type,A.stateNode):D9(H,E,A.memoizedProps)):E===null&&A.stateNode!==null&&p3(A,A.memoizedProps,b.memoizedProps)}break;case 27:Ic(p,A),Oc(A),E&512&&(Vs||b===null||Mf(b,b.return)),b!==null&&E&4&&p3(A,A.memoizedProps,b.memoizedProps);break;case 5:if(Ic(p,A),Oc(A),E&512&&(Vs||b===null||Mf(b,b.return)),A.flags&32){H=A.stateNode;try{Io(H,"")}catch(vt){_n(A,A.return,vt)}}E&4&&A.stateNode!=null&&(H=A.memoizedProps,p3(A,H,b!==null?b.memoizedProps:H)),E&1024&&(v3=!0);break;case 6:if(Ic(p,A),Oc(A),E&4){if(A.stateNode===null)throw Error(a(162));E=A.memoizedProps,b=A.stateNode;try{b.nodeValue=E}catch(vt){_n(A,A.return,vt)}}break;case 3:if(qE=null,H=Bd,Bd=$E(p.containerInfo),Ic(p,A),Bd=H,Oc(A),E&4&&b!==null&&b.memoizedState.isDehydrated)try{Ey(p.containerInfo)}catch(vt){_n(A,A.return,vt)}v3&&(v3=!1,zU(A));break;case 4:E=Bd,Bd=$E(A.stateNode.containerInfo),Ic(p,A),Oc(A),Bd=E;break;case 12:Ic(p,A),Oc(A);break;case 13:Ic(p,A),Oc(A),A.child.flags&8192&&A.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(j3=Ce()),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,b3(A,E)));break;case 22:H=A.memoizedState!==null;var Ge=b!==null&&b.memoizedState!==null,At=th,_t=Vs;if(th=At||H,Vs=_t||Ge,Ic(p,A),Vs=_t,th=At,Oc(A),E&8192)e:for(p=A.stateNode,p._visibility=H?p._visibility&-2:p._visibility|1,H&&(b===null||Ge||th||Vs||Pp(A)),b=null,p=A;;){if(p.tag===5||p.tag===26){if(b===null){Ge=b=p;try{if(Z=Ge.stateNode,H)pe=Z.style,typeof pe.setProperty=="function"?pe.setProperty("display","none","important"):pe.display="none";else{Se=Ge.stateNode;var Pt=Ge.memoizedProps.style,pt=Pt!=null&&Pt.hasOwnProperty("display")?Pt.display:null;Se.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(vt){_n(Ge,Ge.return,vt)}}}else if(p.tag===6){if(b===null){Ge=p;try{Ge.stateNode.nodeValue=H?"":Ge.memoizedProps}catch(vt){_n(Ge,Ge.return,vt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===A)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break e;for(;p.sibling===null;){if(p.return===null||p.return===A)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=A.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,b3(A,b))));break;case 19:Ic(p,A),Oc(A),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,b3(A,E)));break;case 30:break;case 21:break;default:Ic(p,A),Oc(A)}}function Oc(A){var p=A.flags;if(p&2){try{for(var b,E=A.return;E!==null;){if(DU(E)){b=E;break}E=E.return}if(b==null)throw Error(a(160));switch(b.tag){case 27:var H=b.stateNode,Z=g3(A);IE(A,Z,H);break;case 5:var pe=b.stateNode;b.flags&32&&(Io(pe,""),b.flags&=-33);var Se=g3(A);IE(A,Se,pe);break;case 3:case 4:var Ge=b.stateNode.containerInfo,At=g3(A);x3(A,At,Ge);break;default:throw Error(a(161))}}catch(_t){_n(A,A.return,_t)}A.flags&=-3}p&4096&&(A.flags&=-4097)}function zU(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var p=A;zU(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),A=A.sibling}}function O0(A,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)LU(A,p.alternate,p),p=p.sibling}function Pp(A){for(A=A.child;A!==null;){var p=A;switch(p.tag){case 0:case 11:case 14:case 15:I0(4,p,p.return),Pp(p);break;case 1:Mf(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&OU(p,p.return,b),Pp(p);break;case 27:py(p.stateNode);case 26:case 5:Mf(p,p.return),Pp(p);break;case 22:p.memoizedState===null&&Pp(p);break;case 30:Pp(p);break;default:Pp(p)}A=A.sibling}}function F0(A,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,H=A,Z=p,pe=Z.flags;switch(Z.tag){case 0:case 11:case 15:F0(H,Z,b),iy(4,Z);break;case 1:if(F0(H,Z,b),E=Z,H=E.stateNode,typeof H.componentDidMount=="function")try{H.componentDidMount()}catch(At){_n(E,E.return,At)}if(E=Z,H=E.updateQueue,H!==null){var Se=E.stateNode;try{var Ge=H.shared.hiddenCallbacks;if(Ge!==null)for(H.shared.hiddenCallbacks=null,H=0;H<Ge.length;H++)_a(Ge[H],Se)}catch(At){_n(E,E.return,At)}}b&&pe&64&&IU(Z),oy(Z,Z.return);break;case 27:PU(Z);case 26:case 5:F0(H,Z,b),b&&E===null&&pe&4&&FU(Z),oy(Z,Z.return);break;case 12:F0(H,Z,b);break;case 13:F0(H,Z,b),b&&pe&4&&QU(H,Z);break;case 22:Z.memoizedState===null&&F0(H,Z,b),oy(Z,Z.return);break;case 30:break;default:F0(H,Z,b)}p=p.sibling}}function y3(A,p){var b=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),A=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==b&&(A!=null&&A.refCount++,b!=null&&Np(b))}function w3(A,p){A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&Np(A))}function Uf(A,p,b,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)VU(A,p,b,E),p=p.sibling}function VU(A,p,b,E){var H=p.flags;switch(p.tag){case 0:case 11:case 15:Uf(A,p,b,E),H&2048&&iy(9,p);break;case 1:Uf(A,p,b,E);break;case 3:Uf(A,p,b,E),H&2048&&(A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&Np(A)));break;case 12:if(H&2048){Uf(A,p,b,E),A=p.stateNode;try{var Z=p.memoizedProps,pe=Z.id,Se=Z.onPostCommit;typeof Se=="function"&&Se(pe,p.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Ge){_n(p,p.return,Ge)}}else Uf(A,p,b,E);break;case 13:Uf(A,p,b,E);break;case 23:break;case 22:Z=p.stateNode,pe=p.alternate,p.memoizedState!==null?Z._visibility&2?Uf(A,p,b,E):ly(A,p):Z._visibility&2?Uf(A,p,b,E):(Z._visibility|=2,Ix(A,p,b,E,(p.subtreeFlags&10256)!==0)),H&2048&&y3(pe,p);break;case 24:Uf(A,p,b,E),H&2048&&w3(p.alternate,p);break;default:Uf(A,p,b,E)}}function Ix(A,p,b,E,H){for(H=H&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var Z=A,pe=p,Se=b,Ge=E,At=pe.flags;switch(pe.tag){case 0:case 11:case 15:Ix(Z,pe,Se,Ge,H),iy(8,pe);break;case 23:break;case 22:var _t=pe.stateNode;pe.memoizedState!==null?_t._visibility&2?Ix(Z,pe,Se,Ge,H):ly(Z,pe):(_t._visibility|=2,Ix(Z,pe,Se,Ge,H)),H&&At&2048&&y3(pe.alternate,pe);break;case 24:Ix(Z,pe,Se,Ge,H),H&&At&2048&&w3(pe.alternate,pe);break;default:Ix(Z,pe,Se,Ge,H)}p=p.sibling}}function ly(A,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=A,E=p,H=E.flags;switch(E.tag){case 22:ly(b,E),H&2048&&y3(E.alternate,E);break;case 24:ly(b,E),H&2048&&w3(E.alternate,E);break;default:ly(b,E)}p=p.sibling}}var cy=8192;function Ox(A){if(A.subtreeFlags&cy)for(A=A.child;A!==null;)$U(A),A=A.sibling}function $U(A){switch(A.tag){case 26:Ox(A),A.flags&cy&&A.memoizedState!==null&&x0e(Bd,A.memoizedState,A.memoizedProps);break;case 5:Ox(A);break;case 3:case 4:var p=Bd;Bd=$E(A.stateNode.containerInfo),Ox(A),Bd=p;break;case 22:A.memoizedState===null&&(p=A.alternate,p!==null&&p.memoizedState!==null?(p=cy,cy=16777216,Ox(A),cy=p):Ox(A));break;default:Ox(A)}}function GU(A){var p=A.alternate;if(p!==null&&(A=p.child,A!==null)){p.child=null;do p=A.sibling,A.sibling=null,A=p;while(A!==null)}}function uy(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];Gi=E,KU(E,A)}GU(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)qU(A),A=A.sibling}function qU(A){switch(A.tag){case 0:case 11:case 15:uy(A),A.flags&2048&&I0(9,A,A.return);break;case 3:uy(A);break;case 12:uy(A);break;case 22:var p=A.stateNode;A.memoizedState!==null&&p._visibility&2&&(A.return===null||A.return.tag!==13)?(p._visibility&=-3,OE(A)):uy(A);break;default:uy(A)}}function OE(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];Gi=E,KU(E,A)}GU(A)}for(A=A.child;A!==null;){switch(p=A,p.tag){case 0:case 11:case 15:I0(8,p,p.return),OE(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,OE(p));break;default:OE(p)}A=A.sibling}}function KU(A,p){for(;Gi!==null;){var b=Gi;switch(b.tag){case 0:case 11:case 15:I0(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Np(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,Gi=E;else e:for(b=A;Gi!==null;){E=Gi;var H=E.sibling,Z=E.return;if(MU(E),E===b){Gi=null;break e}if(H!==null){H.return=Z,Gi=H;break e}Gi=Z}}}var Fhe={getCacheForType:function(A){var p=Qs(Hs),b=p.data.get(A);return b===void 0&&(b=A(),p.data.set(A,b)),b}},Dhe=typeof WeakMap=="function"?WeakMap:Map,dn=0,Rn=null,va=null,Ba=0,fn=0,Fc=null,D0=!1,Fx=!1,N3=!1,ah=0,Es=0,P0=0,Rp=0,E3=0,Ou=0,Dx=0,dy=null,Yl=null,C3=!1,j3=0,FE=1/0,DE=null,R0=null,mo=0,L0=null,Px=null,Rx=0,k3=0,_3=null,WU=null,fy=0,S3=null;function Dc(){if((dn&2)!==0&&Ba!==0)return Ba&-Ba;if(Q.T!==null){var A=qA;return A!==0?A:P3()}return Dn()}function XU(){Ou===0&&(Ou=(Ba&536870912)===0||Oa?kn():536870912);var A=Iu.current;return A!==null&&(A.flags|=32),Ou}function Pc(A,p,b){(A===Rn&&(fn===2||fn===9)||A.cancelPendingCommit!==null)&&(Lx(A,0),M0(A,Ba,Ou,!1)),Fn(A,b),((dn&2)===0||A!==Rn)&&(A===Rn&&((dn&2)===0&&(Rp|=b),Es===4&&M0(A,Ba,Ou,!1)),Qf(A))}function YU(A,p,b){if((dn&6)!==0)throw Error(a(327));var E=!b&&(p&124)===0&&(p&A.expiredLanes)===0||$r(A,p),H=E?Lhe(A,p):I3(A,p,!0),Z=E;do{if(H===0){Fx&&!E&&M0(A,p,0,!1);break}else{if(b=A.current.alternate,Z&&!Phe(b)){H=I3(A,p,!1),Z=!1;continue}if(H===2){if(Z=p,A.errorRecoveryDisabledLanes&Z)var pe=0;else pe=A.pendingLanes&-536870913,pe=pe!==0?pe:pe&536870912?536870912:0;if(pe!==0){p=pe;e:{var Se=A;H=dy;var Ge=Se.current.memoizedState.isDehydrated;if(Ge&&(Lx(Se,pe).flags|=256),pe=I3(Se,pe,!1),pe!==2){if(N3&&!Ge){Se.errorRecoveryDisabledLanes|=Z,Rp|=Z,H=4;break e}Z=Yl,Yl=H,Z!==null&&(Yl===null?Yl=Z:Yl.push.apply(Yl,Z))}H=pe}if(Z=!1,H!==2)continue}}if(H===1){Lx(A,0),M0(A,p,0,!0);break}e:{switch(E=A,Z=H,Z){case 0:case 1:throw Error(a(345));case 4:if((p&4194048)!==p)break;case 6:M0(E,p,Ou,!D0);break e;case 2:Yl=null;break;case 3:case 5:break;default:throw Error(a(329))}if((p&62914560)===p&&(H=j3+300-Ce(),10<H)){if(M0(E,p,Ou,!D0),Er(E,0,!0)!==0)break e;E.timeoutHandle=j9(JU.bind(null,E,b,Yl,DE,C3,p,Ou,Rp,Dx,D0,Z,2,-0,0),H);break e}JU(E,b,Yl,DE,C3,p,Ou,Rp,Dx,D0,Z,0,-0,0)}}break}while(!0);Qf(A)}function JU(A,p,b,E,H,Z,pe,Se,Ge,At,_t,Pt,pt,vt){if(A.timeoutHandle=-1,Pt=p.subtreeFlags,(Pt&8192||(Pt&16785408)===16785408)&&(vy={stylesheets:null,count:0,unsuspend:g0e},$U(p),Pt=v0e(),Pt!==null)){A.cancelPendingCommit=Pt(s9.bind(null,A,p,Z,b,E,H,pe,Se,Ge,_t,1,pt,vt)),M0(A,Z,pe,!At);return}s9(A,p,Z,b,E,H,pe,Se,Ge)}function Phe(A){for(var p=A;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var H=b[E],Z=H.getSnapshot;H=H.value;try{if(!li(Z(),H))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function M0(A,p,b,E){p&=~E3,p&=~Rp,A.suspendedLanes|=p,A.pingedLanes&=~p,E&&(A.warmLanes|=p),E=A.expirationTimes;for(var H=p;0<H;){var Z=31-xt(H),pe=1<<Z;E[Z]=-1,H&=~pe}b!==0&&mr(A,b,p)}function PE(){return(dn&6)===0?(Ay(0),!1):!0}function B3(){if(va!==null){if(fn===0)var A=va.return;else A=va,Ed=ui=null,Ex(A),Bx=null,ay=0,A=va;for(;A!==null;)TU(A.alternate,A),A=A.return;va=null}}function Lx(A,p){var b=A.timeoutHandle;b!==-1&&(A.timeoutHandle=-1,e0e(b)),b=A.cancelPendingCommit,b!==null&&(A.cancelPendingCommit=null,b()),B3(),Rn=A,va=b=ju(A.current,null),Ba=p,fn=0,Fc=null,D0=!1,Fx=$r(A,p),N3=!1,Dx=Ou=E3=Rp=P0=Es=0,Yl=dy=null,C3=!1,(p&8)!==0&&(p|=p&32);var E=A.entangledLanes;if(E!==0)for(A=A.entanglements,E&=p;0<E;){var H=31-xt(E),Z=1<<H;p|=A[H],E&=~Z}return ah=p,Gl(),b}function ZU(A,p){kr=null,Q.H=NE,p===Ne||p===je?(p=at(),fn=3):p===Ee?(p=at(),fn=4):fn=p===gU?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Fc=p,va===null&&(Es=1,_E(A,ca(p,A.current)))}function e9(){var A=Q.H;return Q.H=NE,A===null?NE:A}function t9(){var A=Q.A;return Q.A=Fhe,A}function T3(){Es=4,D0||(Ba&4194048)!==Ba&&Iu.current!==null||(Fx=!0),(P0&134217727)===0&&(Rp&134217727)===0||Rn===null||M0(Rn,Ba,Ou,!1)}function I3(A,p,b){var E=dn;dn|=2;var H=e9(),Z=t9();(Rn!==A||Ba!==p)&&(DE=null,Lx(A,p)),p=!1;var pe=Es;e:do try{if(fn!==0&&va!==null){var Se=va,Ge=Fc;switch(fn){case 8:B3(),pe=6;break e;case 3:case 2:case 9:case 6:Iu.current===null&&(p=!0);var At=fn;if(fn=0,Fc=null,Mx(A,Se,Ge,At),b&&Fx){pe=0;break e}break;default:At=fn,fn=0,Fc=null,Mx(A,Se,Ge,At)}}Rhe(),pe=Es;break}catch(_t){ZU(A,_t)}while(!0);return p&&A.shellSuspendCounter++,Ed=ui=null,dn=E,Q.H=H,Q.A=Z,va===null&&(Rn=null,Ba=0,Gl()),pe}function Rhe(){for(;va!==null;)r9(va)}function Lhe(A,p){var b=dn;dn|=2;var E=e9(),H=t9();Rn!==A||Ba!==p?(DE=null,FE=Ce()+500,Lx(A,p)):Fx=$r(A,p);e:do try{if(fn!==0&&va!==null){p=va;var Z=Fc;t:switch(fn){case 1:fn=0,Fc=null,Mx(A,p,Z,1);break;case 2:case 9:if(Me(Z)){fn=0,Fc=null,a9(p);break}p=function(){fn!==2&&fn!==9||Rn!==A||(fn=7),Qf(A)},Z.then(p,p);break e;case 3:fn=7;break e;case 4:fn=5;break e;case 7:Me(Z)?(fn=0,Fc=null,a9(p)):(fn=0,Fc=null,Mx(A,p,Z,7));break;case 5:var pe=null;switch(va.tag){case 26:pe=va.memoizedState;case 5:case 27:var Se=va;if(!pe||L9(pe)){fn=0,Fc=null;var Ge=Se.sibling;if(Ge!==null)va=Ge;else{var At=Se.return;At!==null?(va=At,RE(At)):va=null}break t}}fn=0,Fc=null,Mx(A,p,Z,5);break;case 6:fn=0,Fc=null,Mx(A,p,Z,6);break;case 8:B3(),Es=6;break e;default:throw Error(a(462))}}Mhe();break}catch(_t){ZU(A,_t)}while(!0);return Ed=ui=null,Q.H=E,Q.A=H,dn=b,va!==null?0:(Rn=null,Ba=0,Gl(),Es)}function Mhe(){for(;va!==null&&!Te();)r9(va)}function r9(A){var p=SU(A.alternate,A,ah);A.memoizedProps=A.pendingProps,p===null?RE(A):va=p}function a9(A){var p=A,b=p.alternate;switch(p.tag){case 15:case 0:p=NU(b,p,p.pendingProps,p.type,void 0,Ba);break;case 11:p=NU(b,p,p.pendingProps,p.type.render,p.ref,Ba);break;case 5:Ex(p);default:TU(b,p),p=va=vp(p,ah),p=SU(b,p,ah)}A.memoizedProps=A.pendingProps,p===null?RE(A):va=p}function Mx(A,p,b,E){Ed=ui=null,Ex(p),Bx=null,ay=0;var H=p.return;try{if(_he(A,H,p,b,Ba)){Es=1,_E(A,ca(b,A.current)),va=null;return}}catch(Z){if(H!==null)throw va=H,Z;Es=1,_E(A,ca(b,A.current)),va=null;return}p.flags&32768?(Oa||E===1?A=!0:Fx||(Ba&536870912)!==0?A=!1:(D0=A=!0,(E===2||E===9||E===3||E===6)&&(E=Iu.current,E!==null&&E.tag===13&&(E.flags|=16384))),n9(p,A)):RE(p)}function RE(A){var p=A;do{if((p.flags&32768)!==0){n9(p,D0);return}A=p.return;var b=Bhe(p.alternate,p,ah);if(b!==null){va=b;return}if(p=p.sibling,p!==null){va=p;return}va=p=A}while(p!==null);Es===0&&(Es=5)}function n9(A,p){do{var b=The(A.alternate,A);if(b!==null){b.flags&=32767,va=b;return}if(b=A.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(A=A.sibling,A!==null)){va=A;return}va=A=b}while(A!==null);Es=6,va=null}function s9(A,p,b,E,H,Z,pe,Se,Ge){A.cancelPendingCommit=null;do LE();while(mo!==0);if((dn&6)!==0)throw Error(a(327));if(p!==null){if(p===A.current)throw Error(a(177));if(Z=p.lanes|p.childLanes,Z|=ss,Rr(A,b,Z,pe,Se,Ge),A===Rn&&(va=Rn=null,Ba=0),Px=p,L0=A,Rx=b,k3=Z,_3=H,WU=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,zhe(fe,function(){return u9(),null})):(A.callbackNode=null,A.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=Q.T,Q.T=null,H=q.p,q.p=2,pe=dn,dn|=4;try{Ihe(A,p,b)}finally{dn=pe,q.p=H,Q.T=E}}mo=1,i9(),o9(),l9()}}function i9(){if(mo===1){mo=0;var A=L0,p=Px,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=Q.T,Q.T=null;var E=q.p;q.p=2;var H=dn;dn|=4;try{HU(p,A);var Z=V3,pe=uo(A.containerInfo),Se=Z.focusedElem,Ge=Z.selectionRange;if(pe!==Se&&Se&&Se.ownerDocument&&wf(Se.ownerDocument.documentElement,Se)){if(Ge!==null&&_i(Se)){var At=Ge.start,_t=Ge.end;if(_t===void 0&&(_t=At),"selectionStart"in Se)Se.selectionStart=At,Se.selectionEnd=Math.min(_t,Se.value.length);else{var Pt=Se.ownerDocument||document,pt=Pt&&Pt.defaultView||window;if(pt.getSelection){var vt=pt.getSelection(),zr=Se.textContent.length,Tr=Math.min(Ge.start,zr),wn=Ge.end===void 0?Tr:Math.min(Ge.end,zr);!vt.extend&&Tr>wn&&(pe=wn,wn=Tr,Tr=pe);var ot=pd(Se,Tr),Ze=pd(Se,wn);if(ot&&Ze&&(vt.rangeCount!==1||vt.anchorNode!==ot.node||vt.anchorOffset!==ot.offset||vt.focusNode!==Ze.node||vt.focusOffset!==Ze.offset)){var ut=Pt.createRange();ut.setStart(ot.node,ot.offset),vt.removeAllRanges(),Tr>wn?(vt.addRange(ut),vt.extend(Ze.node,Ze.offset)):(ut.setEnd(Ze.node,Ze.offset),vt.addRange(ut))}}}}for(Pt=[],vt=Se;vt=vt.parentNode;)vt.nodeType===1&&Pt.push({element:vt,left:vt.scrollLeft,top:vt.scrollTop});for(typeof Se.focus=="function"&&Se.focus(),Se=0;Se<Pt.length;Se++){var It=Pt[Se];It.element.scrollLeft=It.left,It.element.scrollTop=It.top}}XE=!!z3,V3=z3=null}finally{dn=H,q.p=E,Q.T=b}}A.current=p,mo=2}}function o9(){if(mo===2){mo=0;var A=L0,p=Px,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=Q.T,Q.T=null;var E=q.p;q.p=2;var H=dn;dn|=4;try{LU(A,p.alternate,p)}finally{dn=H,q.p=E,Q.T=b}}mo=3}}function l9(){if(mo===4||mo===3){mo=0,de();var A=L0,p=Px,b=Rx,E=WU;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?mo=5:(mo=0,Px=L0=null,c9(A,A.pendingLanes));var H=A.pendingLanes;if(H===0&&(R0=null),Ya(b),p=p.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(nt,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=Q.T,H=q.p,q.p=2,Q.T=null;try{for(var Z=A.onRecoverableError,pe=0;pe<E.length;pe++){var Se=E[pe];Z(Se.value,{componentStack:Se.stack})}}finally{Q.T=p,q.p=H}}(Rx&3)!==0&&LE(),Qf(A),H=A.pendingLanes,(b&4194090)!==0&&(H&42)!==0?A===S3?fy++:(fy=0,S3=A):fy=0,Ay(0)}}function c9(A,p){(A.pooledCacheLanes&=p)===0&&(p=A.pooledCache,p!=null&&(A.pooledCache=null,Np(p)))}function LE(A){return i9(),o9(),l9(),u9()}function u9(){if(mo!==5)return!1;var A=L0,p=k3;k3=0;var b=Ya(Rx),E=Q.T,H=q.p;try{q.p=32>b?32:b,Q.T=null,b=_3,_3=null;var Z=L0,pe=Rx;if(mo=0,Px=L0=null,Rx=0,(dn&6)!==0)throw Error(a(331));var Se=dn;if(dn|=4,qU(Z.current),VU(Z,Z.current,pe,b),dn=Se,Ay(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(nt,Z)}catch{}return!0}finally{q.p=H,Q.T=E,c9(A,p)}}function d9(A,p,b){p=ca(b,p),p=o3(A.stateNode,p,2),A=Ft(A,p,2),A!==null&&(Fn(A,2),Qf(A))}function _n(A,p,b){if(A.tag===3)d9(A,A,b);else for(;p!==null;){if(p.tag===3){d9(p,A,b);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(R0===null||!R0.has(E))){A=ca(b,A),b=mU(2),E=Ft(p,b,2),E!==null&&(pU(b,E,p,A),Fn(E,2),Qf(E));break}}p=p.return}}function O3(A,p,b){var E=A.pingCache;if(E===null){E=A.pingCache=new Dhe;var H=new Set;E.set(p,H)}else H=E.get(p),H===void 0&&(H=new Set,E.set(p,H));H.has(b)||(N3=!0,H.add(b),A=Uhe.bind(null,A,p,b),p.then(A,A))}function Uhe(A,p,b){var E=A.pingCache;E!==null&&E.delete(p),A.pingedLanes|=A.suspendedLanes&b,A.warmLanes&=~b,Rn===A&&(Ba&b)===b&&(Es===4||Es===3&&(Ba&62914560)===Ba&&300>Ce()-j3?(dn&2)===0&&Lx(A,0):E3|=b,Dx===Ba&&(Dx=0)),Qf(A)}function f9(A,p){p===0&&(p=Pr()),A=xd(A,p),A!==null&&(Fn(A,p),Qf(A))}function Qhe(A){var p=A.memoizedState,b=0;p!==null&&(b=p.retryLane),f9(A,b)}function Hhe(A,p){var b=0;switch(A.tag){case 13:var E=A.stateNode,H=A.memoizedState;H!==null&&(b=H.retryLane);break;case 19:E=A.stateNode;break;case 22:E=A.stateNode._retryCache;break;default:throw Error(a(314))}E!==null&&E.delete(p),f9(A,b)}function zhe(A,p){return Re(A,p)}var ME=null,Ux=null,F3=!1,UE=!1,D3=!1,Lp=0;function Qf(A){A!==Ux&&A.next===null&&(Ux===null?ME=Ux=A:Ux=Ux.next=A),UE=!0,F3||(F3=!0,$he())}function Ay(A,p){if(!D3&&UE){D3=!0;do for(var b=!1,E=ME;E!==null;){if(A!==0){var H=E.pendingLanes;if(H===0)var Z=0;else{var pe=E.suspendedLanes,Se=E.pingedLanes;Z=(1<<31-xt(42|A)+1)-1,Z&=H&~(pe&~Se),Z=Z&201326741?Z&201326741|1:Z?Z|2:0}Z!==0&&(b=!0,p9(E,Z))}else Z=Ba,Z=Er(E,E===Rn?Z:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(Z&3)===0||$r(E,Z)||(b=!0,p9(E,Z));E=E.next}while(b);D3=!1}}function Vhe(){A9()}function A9(){UE=F3=!1;var A=0;Lp!==0&&(Zhe()&&(A=Lp),Lp=0);for(var p=Ce(),b=null,E=ME;E!==null;){var H=E.next,Z=h9(E,p);Z===0?(E.next=null,b===null?ME=H:b.next=H,H===null&&(Ux=b)):(b=E,(A!==0||(Z&3)!==0)&&(UE=!0)),E=H}Ay(A)}function h9(A,p){for(var b=A.suspendedLanes,E=A.pingedLanes,H=A.expirationTimes,Z=A.pendingLanes&-62914561;0<Z;){var pe=31-xt(Z),Se=1<<pe,Ge=H[pe];Ge===-1?((Se&b)===0||(Se&E)!==0)&&(H[pe]=br(Se,p)):Ge<=p&&(A.expiredLanes|=Se),Z&=~Se}if(p=Rn,b=Ba,b=Er(A,A===p?b:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E=A.callbackNode,b===0||A===p&&(fn===2||fn===9)||A.cancelPendingCommit!==null)return E!==null&&E!==null&&Le(E),A.callbackNode=null,A.callbackPriority=0;if((b&3)===0||$r(A,b)){if(p=b&-b,p===A.callbackPriority)return p;switch(E!==null&&Le(E),Ya(b)){case 2:case 8:b=oe;break;case 32:b=fe;break;case 268435456:b=Pe;break;default:b=fe}return E=m9.bind(null,A),b=Re(b,E),A.callbackPriority=p,A.callbackNode=b,p}return E!==null&&E!==null&&Le(E),A.callbackPriority=2,A.callbackNode=null,2}function m9(A,p){if(mo!==0&&mo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var b=A.callbackNode;if(LE()&&A.callbackNode!==b)return null;var E=Ba;return E=Er(A,A===Rn?E:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E===0?null:(YU(A,E,p),h9(A,Ce()),A.callbackNode!=null&&A.callbackNode===b?m9.bind(null,A):null)}function p9(A,p){if(LE())return null;YU(A,p,!0)}function $he(){t0e(function(){(dn&6)!==0?Re(ye,Vhe):A9()})}function P3(){return Lp===0&&(Lp=kn()),Lp}function g9(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:wc(""+A)}function x9(A,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,A.id&&b.setAttribute("form",A.id),p.parentNode.insertBefore(b,p),A=new FormData(A),b.parentNode.removeChild(b),A}function Ghe(A,p,b,E,H){if(p==="submit"&&b&&b.stateNode===H){var Z=g9((H[la]||null).action),pe=E.submitter;pe&&(p=(p=pe[la]||null)?g9(p.formAction):pe.getAttribute("formAction"),p!==null&&(Z=p,pe=null));var Se=new gu("action","action",null,E,H);A.push({event:Se,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Lp!==0){var Ge=pe?x9(H,pe):new FormData(H);Tu(b,{pending:!0,data:Ge,method:H.method,action:Z},null,Ge)}}else typeof Z=="function"&&(Se.preventDefault(),Ge=pe?x9(H,pe):new FormData(H),Tu(b,{pending:!0,data:Ge,method:H.method,action:Z},Z,Ge))},currentTarget:H}]})}}for(var R3=0;R3<QA.length;R3++){var L3=QA[R3],qhe=L3.toLowerCase(),Khe=L3[0].toUpperCase()+L3.slice(1);Yn(qhe,"on"+Khe)}Yn(v0,"onAnimationEnd"),Yn(Ef,"onAnimationIteration"),Yn(Cf,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(jf,"onTransitionRun"),Yn(UA,"onTransitionStart"),Yn(b0,"onTransitionCancel"),Yn(kf,"onTransitionEnd"),wt("onMouseEnter",["mouseout","mouseover"]),wt("onMouseLeave",["mouseout","mouseover"]),wt("onPointerEnter",["pointerout","pointerover"]),wt("onPointerLeave",["pointerout","pointerover"]),yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Whe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hy));function v9(A,p){p=(p&4)!==0;for(var b=0;b<A.length;b++){var E=A[b],H=E.event;E=E.listeners;e:{var Z=void 0;if(p)for(var pe=E.length-1;0<=pe;pe--){var Se=E[pe],Ge=Se.instance,At=Se.currentTarget;if(Se=Se.listener,Ge!==Z&&H.isPropagationStopped())break e;Z=Se,H.currentTarget=At;try{Z(H)}catch(_t){kE(_t)}H.currentTarget=null,Z=Ge}else for(pe=0;pe<E.length;pe++){if(Se=E[pe],Ge=Se.instance,At=Se.currentTarget,Se=Se.listener,Ge!==Z&&H.isPropagationStopped())break e;Z=Se,H.currentTarget=At;try{Z(H)}catch(_t){kE(_t)}H.currentTarget=null,Z=Ge}}}}function ba(A,p){var b=p[Ka];b===void 0&&(b=p[Ka]=new Set);var E=A+"__bubble";b.has(E)||(b9(p,A,2,!1),b.add(E))}function M3(A,p,b){var E=0;p&&(E|=4),b9(b,A,E,p)}var QE="_reactListening"+Math.random().toString(36).slice(2);function U3(A){if(!A[QE]){A[QE]=!0,qe.forEach(function(b){b!=="selectionchange"&&(Whe.has(b)||M3(b,!1,A),M3(b,!0,A))});var p=A.nodeType===9?A:A.ownerDocument;p===null||p[QE]||(p[QE]=!0,M3("selectionchange",!1,p))}}function b9(A,p,b,E){switch(V9(p)){case 2:var H=w0e;break;case 8:H=N0e;break;default:H=eB}b=H.bind(null,p,b,A),H=void 0,!co||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(H=!0),E?H!==void 0?A.addEventListener(p,b,{capture:!0,passive:H}):A.addEventListener(p,b,!0):H!==void 0?A.addEventListener(p,b,{passive:H}):A.addEventListener(p,b,!1)}function Q3(A,p,b,E,H){var Z=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var pe=E.tag;if(pe===3||pe===4){var Se=E.stateNode.containerInfo;if(Se===H)break;if(pe===4)for(pe=E.return;pe!==null;){var Ge=pe.tag;if((Ge===3||Ge===4)&&pe.stateNode.containerInfo===H)return;pe=pe.return}for(;Se!==null;){if(pe=ge(Se),pe===null)return;if(Ge=pe.tag,Ge===5||Ge===6||Ge===26||Ge===27){E=Z=pe;continue e}Se=Se.parentNode}}E=E.return}h0(function(){var At=Z,_t=cn(b),Pt=[];e:{var pt=gd.get(A);if(pt!==void 0){var vt=gu,zr=A;switch(A){case"keypress":if(Do(b)===0)break e;case"keydown":case"keyup":vt=jc;break;case"focusin":zr="focus",vt=vu;break;case"focusout":zr="blur",vt=vu;break;case"beforeblur":case"afterblur":vt=vu;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vt=bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vt=xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vt=xf;break;case v0:case Ef:case Cf:vt=mf;break;case kf:vt=ve;break;case"scroll":case"scrollend":vt=FA;break;case"wheel":vt=We;break;case"copy":case"cut":case"paste":vt=pf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vt=md;break;case"toggle":case"beforetoggle":vt=Nt}var Tr=(p&4)!==0,wn=!Tr&&(A==="scroll"||A==="scrollend"),ot=Tr?pt!==null?pt+"Capture":null:pt;Tr=[];for(var Ze=At,ut;Ze!==null;){var It=Ze;if(ut=It.stateNode,It=It.tag,It!==5&&It!==26&&It!==27||ut===null||ot===null||(It=Ui(Ze,ot),It!=null&&Tr.push(my(Ze,It,ut))),wn)break;Ze=Ze.return}0<Tr.length&&(pt=new vt(pt,zr,null,b,_t),Pt.push({event:pt,listeners:Tr}))}}if((p&7)===0){e:{if(pt=A==="mouseover"||A==="pointerover",vt=A==="mouseout"||A==="pointerout",pt&&b!==Ll&&(zr=b.relatedTarget||b.fromElement)&&(ge(zr)||zr[Ia]))break e;if((vt||pt)&&(pt=_t.window===_t?_t:(pt=_t.ownerDocument)?pt.defaultView||pt.parentWindow:window,vt?(zr=b.relatedTarget||b.toElement,vt=At,zr=zr?ge(zr):null,zr!==null&&(wn=s(zr),Tr=zr.tag,zr!==wn||Tr!==5&&Tr!==27&&Tr!==6)&&(zr=null)):(vt=null,zr=At),vt!==zr)){if(Tr=bs,It="onMouseLeave",ot="onMouseEnter",Ze="mouse",(A==="pointerout"||A==="pointerover")&&(Tr=md,It="onPointerLeave",ot="onPointerEnter",Ze="pointer"),wn=vt==null?pt:Be(vt),ut=zr==null?pt:Be(zr),pt=new Tr(It,Ze+"leave",vt,b,_t),pt.target=wn,pt.relatedTarget=ut,It=null,ge(_t)===At&&(Tr=new Tr(ot,Ze+"enter",zr,b,_t),Tr.target=ut,Tr.relatedTarget=wn,It=Tr),wn=It,vt&&zr)t:{for(Tr=vt,ot=zr,Ze=0,ut=Tr;ut;ut=Qx(ut))Ze++;for(ut=0,It=ot;It;It=Qx(It))ut++;for(;0<Ze-ut;)Tr=Qx(Tr),Ze--;for(;0<ut-Ze;)ot=Qx(ot),ut--;for(;Ze--;){if(Tr===ot||ot!==null&&Tr===ot.alternate)break t;Tr=Qx(Tr),ot=Qx(ot)}Tr=null}else Tr=null;vt!==null&&y9(Pt,pt,vt,Tr,!1),zr!==null&&wn!==null&&y9(Pt,wn,zr,Tr,!0)}}e:{if(pt=At?Be(At):window,vt=pt.nodeName&&pt.nodeName.toLowerCase(),vt==="select"||vt==="input"&&pt.type==="file")var Ar=g0;else if(Za(pt))if(PA)Ar=px;else{Ar=Q1;var ma=Ro}else vt=pt.nodeName,!vt||vt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?At&&IA(At.elementType)&&(Ar=g0):Ar=gp;if(Ar&&(Ar=Ar(A,At))){Vl(Pt,Ar,b,_t);break e}ma&&ma(A,pt,At),A==="focusout"&&At&&pt.type==="number"&&At.memoizedProps.value!=null&&hu(pt,"number",pt.value)}switch(ma=At?Be(At):window,A){case"focusin":(Za(ma)||ma.contentEditable==="true")&&(Lo=ma,kc=At,Eu=null);break;case"focusout":Eu=kc=Lo=null;break;case"mousedown":_c=!0;break;case"contextmenu":case"mouseup":case"dragend":_c=!1,Xn(Pt,b,_t);break;case"selectionchange":if(Nf)break;case"keydown":case"keyup":Xn(Pt,b,_t)}var yr;if(Wt)e:{switch(A){case"compositionstart":var Or="onCompositionStart";break e;case"compositionend":Or="onCompositionEnd";break e;case"compositionupdate":Or="onCompositionUpdate";break e}Or=void 0}else Br?ft(A,b)&&(Or="onCompositionEnd"):A==="keydown"&&b.keyCode===229&&(Or="onCompositionStart");Or&&(ue&&b.locale!=="ko"&&(Br||Or!=="onCompositionStart"?Or==="onCompositionEnd"&&Br&&(yr=OA()):(Fo=_t,pu="value"in Fo?Fo.value:Fo.textContent,Br=!0)),ma=HE(At,Or),0<ma.length&&(Or=new fd(Or,A,null,b,_t),Pt.push({event:Or,listeners:ma}),yr?Or.data=yr:(yr=Qt(b),yr!==null&&(Or.data=yr)))),(yr=se?ha(A,b):Gr(A,b))&&(Or=HE(At,"onBeforeInput"),0<Or.length&&(ma=new fd("onBeforeInput","beforeinput",null,b,_t),Pt.push({event:ma,listeners:Or}),ma.data=yr)),Ghe(Pt,A,At,b,_t)}v9(Pt,p)})}function my(A,p,b){return{instance:A,listener:p,currentTarget:b}}function HE(A,p){for(var b=p+"Capture",E=[];A!==null;){var H=A,Z=H.stateNode;if(H=H.tag,H!==5&&H!==26&&H!==27||Z===null||(H=Ui(A,b),H!=null&&E.unshift(my(A,H,Z)),H=Ui(A,p),H!=null&&E.push(my(A,H,Z))),A.tag===3)return E;A=A.return}return[]}function Qx(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function y9(A,p,b,E,H){for(var Z=p._reactName,pe=[];b!==null&&b!==E;){var Se=b,Ge=Se.alternate,At=Se.stateNode;if(Se=Se.tag,Ge!==null&&Ge===E)break;Se!==5&&Se!==26&&Se!==27||At===null||(Ge=At,H?(At=Ui(b,Z),At!=null&&pe.unshift(my(b,At,Ge))):H||(At=Ui(b,Z),At!=null&&pe.push(my(b,At,Ge)))),b=b.return}pe.length!==0&&A.push({event:p,listeners:pe})}var Xhe=/\r\n?/g,Yhe=/\u0000|\uFFFD/g;function w9(A){return(typeof A=="string"?A:""+A).replace(Xhe,`
`).replace(Yhe,"")}function N9(A,p){return p=w9(p),w9(A)===p}function zE(){}function yn(A,p,b,E,H,Z){switch(b){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||Io(A,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&Io(A,""+E);break;case"className":ta(A,"class",E);break;case"tabIndex":ta(A,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ta(A,b,E);break;case"style":TA(A,E,Z);break;case"data":if(p!=="object"){ta(A,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||b!=="href")){A.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(b);break}E=wc(""+E),A.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){A.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Z=="function"&&(b==="formAction"?(p!=="input"&&yn(A,p,"name",H.name,H,null),yn(A,p,"formEncType",H.formEncType,H,null),yn(A,p,"formMethod",H.formMethod,H,null),yn(A,p,"formTarget",H.formTarget,H,null)):(yn(A,p,"encType",H.encType,H,null),yn(A,p,"method",H.method,H,null),yn(A,p,"target",H.target,H,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(b);break}E=wc(""+E),A.setAttribute(b,E);break;case"onClick":E!=null&&(A.onclick=zE);break;case"onScroll":E!=null&&ba("scroll",A);break;case"onScrollEnd":E!=null&&ba("scrollend",A);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(a(61));if(b=E.__html,b!=null){if(H.children!=null)throw Error(a(60));A.innerHTML=b}}break;case"multiple":A.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":A.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){A.removeAttribute("xlink:href");break}b=wc(""+E),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,""+E):A.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,""):A.removeAttribute(b);break;case"capture":case"download":E===!0?A.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,E):A.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?A.setAttribute(b,E):A.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?A.removeAttribute(b):A.setAttribute(b,E);break;case"popover":ba("beforetoggle",A),ba("toggle",A),ea(A,"popover",E);break;case"xlinkActuate":ia(A,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":ia(A,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":ia(A,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":ia(A,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":ia(A,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":ia(A,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":ia(A,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":ia(A,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":ia(A,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":ea(A,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=yc.get(b)||b,ea(A,b,E))}}function H3(A,p,b,E,H,Z){switch(b){case"style":TA(A,E,Z);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(a(61));if(b=E.__html,b!=null){if(H.children!=null)throw Error(a(60));A.innerHTML=b}}break;case"children":typeof E=="string"?Io(A,E):(typeof E=="number"||typeof E=="bigint")&&Io(A,""+E);break;case"onScroll":E!=null&&ba("scroll",A);break;case"onScrollEnd":E!=null&&ba("scrollend",A);break;case"onClick":E!=null&&(A.onclick=zE);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xe.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(H=b.endsWith("Capture"),p=b.slice(2,H?b.length-7:void 0),Z=A[la]||null,Z=Z!=null?Z[b]:null,typeof Z=="function"&&A.removeEventListener(p,Z,H),typeof E=="function")){typeof Z!="function"&&Z!==null&&(b in A?A[b]=null:A.hasAttribute(b)&&A.removeAttribute(b)),A.addEventListener(p,E,H);break e}b in A?A[b]=E:E===!0?A.setAttribute(b,""):ea(A,b,E)}}}function po(A,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ba("error",A),ba("load",A);var E=!1,H=!1,Z;for(Z in b)if(b.hasOwnProperty(Z)){var pe=b[Z];if(pe!=null)switch(Z){case"src":E=!0;break;case"srcSet":H=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,p));default:yn(A,p,Z,pe,b,null)}}H&&yn(A,p,"srcSet",b.srcSet,b,null),E&&yn(A,p,"src",b.src,b,null);return;case"input":ba("invalid",A);var Se=Z=pe=H=null,Ge=null,At=null;for(E in b)if(b.hasOwnProperty(E)){var _t=b[E];if(_t!=null)switch(E){case"name":H=_t;break;case"type":pe=_t;break;case"checked":Ge=_t;break;case"defaultChecked":At=_t;break;case"value":Z=_t;break;case"defaultValue":Se=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(a(137,p));break;default:yn(A,p,E,_t,b,null)}}Au(A,Z,Se,Ge,At,pe,H,!1),fu(A);return;case"select":ba("invalid",A),E=pe=Z=null;for(H in b)if(b.hasOwnProperty(H)&&(Se=b[H],Se!=null))switch(H){case"value":Z=Se;break;case"defaultValue":pe=Se;break;case"multiple":E=Se;default:yn(A,p,H,Se,b,null)}p=Z,b=pe,A.multiple=!!E,p!=null?Rl(A,!!E,p,!1):b!=null&&Rl(A,!!E,b,!0);return;case"textarea":ba("invalid",A),Z=H=E=null;for(pe in b)if(b.hasOwnProperty(pe)&&(Se=b[pe],Se!=null))switch(pe){case"value":E=Se;break;case"defaultValue":H=Se;break;case"children":Z=Se;break;case"dangerouslySetInnerHTML":if(Se!=null)throw Error(a(91));break;default:yn(A,p,pe,Se,b,null)}mu(A,E,H,Z),fu(A);return;case"option":for(Ge in b)if(b.hasOwnProperty(Ge)&&(E=b[Ge],E!=null))switch(Ge){case"selected":A.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:yn(A,p,Ge,E,b,null)}return;case"dialog":ba("beforetoggle",A),ba("toggle",A),ba("cancel",A),ba("close",A);break;case"iframe":case"object":ba("load",A);break;case"video":case"audio":for(E=0;E<hy.length;E++)ba(hy[E],A);break;case"image":ba("error",A),ba("load",A);break;case"details":ba("toggle",A);break;case"embed":case"source":case"link":ba("error",A),ba("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(At in b)if(b.hasOwnProperty(At)&&(E=b[At],E!=null))switch(At){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,p));default:yn(A,p,At,E,b,null)}return;default:if(IA(p)){for(_t in b)b.hasOwnProperty(_t)&&(E=b[_t],E!==void 0&&H3(A,p,_t,E,b,void 0));return}}for(Se in b)b.hasOwnProperty(Se)&&(E=b[Se],E!=null&&yn(A,p,Se,E,b,null))}function Jhe(A,p,b,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var H=null,Z=null,pe=null,Se=null,Ge=null,At=null,_t=null;for(vt in b){var Pt=b[vt];if(b.hasOwnProperty(vt)&&Pt!=null)switch(vt){case"checked":break;case"value":break;case"defaultValue":Ge=Pt;default:E.hasOwnProperty(vt)||yn(A,p,vt,null,E,Pt)}}for(var pt in E){var vt=E[pt];if(Pt=b[pt],E.hasOwnProperty(pt)&&(vt!=null||Pt!=null))switch(pt){case"type":Z=vt;break;case"name":H=vt;break;case"checked":At=vt;break;case"defaultChecked":_t=vt;break;case"value":pe=vt;break;case"defaultValue":Se=vt;break;case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(a(137,p));break;default:vt!==Pt&&yn(A,p,pt,vt,E,Pt)}}ji(A,pe,Se,Ge,At,_t,Z,H);return;case"select":vt=pe=Se=pt=null;for(Z in b)if(Ge=b[Z],b.hasOwnProperty(Z)&&Ge!=null)switch(Z){case"value":break;case"multiple":vt=Ge;default:E.hasOwnProperty(Z)||yn(A,p,Z,null,E,Ge)}for(H in E)if(Z=E[H],Ge=b[H],E.hasOwnProperty(H)&&(Z!=null||Ge!=null))switch(H){case"value":pt=Z;break;case"defaultValue":Se=Z;break;case"multiple":pe=Z;default:Z!==Ge&&yn(A,p,H,Z,E,Ge)}p=Se,b=pe,E=vt,pt!=null?Rl(A,!!b,pt,!1):!!E!=!!b&&(p!=null?Rl(A,!!b,p,!0):Rl(A,!!b,b?[]:"",!1));return;case"textarea":vt=pt=null;for(Se in b)if(H=b[Se],b.hasOwnProperty(Se)&&H!=null&&!E.hasOwnProperty(Se))switch(Se){case"value":break;case"children":break;default:yn(A,p,Se,null,E,H)}for(pe in E)if(H=E[pe],Z=b[pe],E.hasOwnProperty(pe)&&(H!=null||Z!=null))switch(pe){case"value":pt=H;break;case"defaultValue":vt=H;break;case"children":break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(91));break;default:H!==Z&&yn(A,p,pe,H,E,Z)}Ra(A,pt,vt);return;case"option":for(var zr in b)if(pt=b[zr],b.hasOwnProperty(zr)&&pt!=null&&!E.hasOwnProperty(zr))switch(zr){case"selected":A.selected=!1;break;default:yn(A,p,zr,null,E,pt)}for(Ge in E)if(pt=E[Ge],vt=b[Ge],E.hasOwnProperty(Ge)&&pt!==vt&&(pt!=null||vt!=null))switch(Ge){case"selected":A.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:yn(A,p,Ge,pt,E,vt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tr in b)pt=b[Tr],b.hasOwnProperty(Tr)&&pt!=null&&!E.hasOwnProperty(Tr)&&yn(A,p,Tr,null,E,pt);for(At in E)if(pt=E[At],vt=b[At],E.hasOwnProperty(At)&&pt!==vt&&(pt!=null||vt!=null))switch(At){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(a(137,p));break;default:yn(A,p,At,pt,E,vt)}return;default:if(IA(p)){for(var wn in b)pt=b[wn],b.hasOwnProperty(wn)&&pt!==void 0&&!E.hasOwnProperty(wn)&&H3(A,p,wn,void 0,E,pt);for(_t in E)pt=E[_t],vt=b[_t],!E.hasOwnProperty(_t)||pt===vt||pt===void 0&&vt===void 0||H3(A,p,_t,pt,E,vt);return}}for(var ot in b)pt=b[ot],b.hasOwnProperty(ot)&&pt!=null&&!E.hasOwnProperty(ot)&&yn(A,p,ot,null,E,pt);for(Pt in E)pt=E[Pt],vt=b[Pt],!E.hasOwnProperty(Pt)||pt===vt||pt==null&&vt==null||yn(A,p,Pt,pt,E,vt)}var z3=null,V3=null;function VE(A){return A.nodeType===9?A:A.ownerDocument}function E9(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function C9(A,p){if(A===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&p==="foreignObject"?0:A}function $3(A,p){return A==="textarea"||A==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var G3=null;function Zhe(){var A=window.event;return A&&A.type==="popstate"?A===G3?!1:(G3=A,!0):(G3=null,!1)}var j9=typeof setTimeout=="function"?setTimeout:void 0,e0e=typeof clearTimeout=="function"?clearTimeout:void 0,k9=typeof Promise=="function"?Promise:void 0,t0e=typeof queueMicrotask=="function"?queueMicrotask:typeof k9<"u"?function(A){return k9.resolve(null).then(A).catch(r0e)}:j9;function r0e(A){setTimeout(function(){throw A})}function U0(A){return A==="head"}function _9(A,p){var b=p,E=0,H=0;do{var Z=b.nextSibling;if(A.removeChild(b),Z&&Z.nodeType===8)if(b=Z.data,b==="/$"){if(0<E&&8>E){b=E;var pe=A.ownerDocument;if(b&1&&py(pe.documentElement),b&2&&py(pe.body),b&4)for(b=pe.head,py(b),pe=b.firstChild;pe;){var Se=pe.nextSibling,Ge=pe.nodeName;pe[Oe]||Ge==="SCRIPT"||Ge==="STYLE"||Ge==="LINK"&&pe.rel.toLowerCase()==="stylesheet"||b.removeChild(pe),pe=Se}}if(H===0){A.removeChild(Z),Ey(p);return}H--}else b==="$"||b==="$?"||b==="$!"?H++:E=b.charCodeAt(0)-48;else E=0;b=Z}while(b);Ey(p)}function q3(A){var p=A.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":q3(b),De(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}A.removeChild(b)}}function a0e(A,p,b,E){for(;A.nodeType===1;){var H=b;if(A.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(E){if(!A[Oe])switch(p){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(Z=A.getAttribute("rel"),Z==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(Z!==H.rel||A.getAttribute("href")!==(H.href==null||H.href===""?null:H.href)||A.getAttribute("crossorigin")!==(H.crossOrigin==null?null:H.crossOrigin)||A.getAttribute("title")!==(H.title==null?null:H.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(Z=A.getAttribute("src"),(Z!==(H.src==null?null:H.src)||A.getAttribute("type")!==(H.type==null?null:H.type)||A.getAttribute("crossorigin")!==(H.crossOrigin==null?null:H.crossOrigin))&&Z&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(p==="input"&&A.type==="hidden"){var Z=H.name==null?null:""+H.name;if(H.type==="hidden"&&A.getAttribute("name")===Z)return A}else return A;if(A=Td(A.nextSibling),A===null)break}return null}function n0e(A,p,b){if(p==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!b||(A=Td(A.nextSibling),A===null))return null;return A}function K3(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function s0e(A,p){var b=A.ownerDocument;if(A.data!=="$?"||b.readyState==="complete")p();else{var E=function(){p(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),A._reactRetry=E}}function Td(A){for(;A!=null;A=A.nextSibling){var p=A.nodeType;if(p===1||p===3)break;if(p===8){if(p=A.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return A}var W3=null;function S9(A){A=A.previousSibling;for(var p=0;A;){if(A.nodeType===8){var b=A.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return A;p--}else b==="/$"&&p++}A=A.previousSibling}return null}function B9(A,p,b){switch(p=VE(b),A){case"html":if(A=p.documentElement,!A)throw Error(a(452));return A;case"head":if(A=p.head,!A)throw Error(a(453));return A;case"body":if(A=p.body,!A)throw Error(a(454));return A;default:throw Error(a(451))}}function py(A){for(var p=A.attributes;p.length;)A.removeAttributeNode(p[0]);De(A)}var Fu=new Map,T9=new Set;function $E(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var nh=q.d;q.d={f:i0e,r:o0e,D:l0e,C:c0e,L:u0e,m:d0e,X:A0e,S:f0e,M:h0e};function i0e(){var A=nh.f(),p=PE();return A||p}function o0e(A){var p=he(A);p!==null&&p.tag===5&&p.type==="form"?Op(p):nh.r(A)}var Hx=typeof document>"u"?null:document;function I9(A,p,b){var E=Hx;if(E&&typeof p=="string"&&p){var H=ja(p);H='link[rel="'+A+'"][href="'+H+'"]',typeof b=="string"&&(H+='[crossorigin="'+b+'"]'),T9.has(H)||(T9.add(H),A={rel:A,crossOrigin:b,href:p},E.querySelector(H)===null&&(p=E.createElement("link"),po(p,"link",A),Fe(p),E.head.appendChild(p)))}}function l0e(A){nh.D(A),I9("dns-prefetch",A,null)}function c0e(A,p){nh.C(A,p),I9("preconnect",A,p)}function u0e(A,p,b){nh.L(A,p,b);var E=Hx;if(E&&A&&p){var H='link[rel="preload"][as="'+ja(p)+'"]';p==="image"&&b&&b.imageSrcSet?(H+='[imagesrcset="'+ja(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(H+='[imagesizes="'+ja(b.imageSizes)+'"]')):H+='[href="'+ja(A)+'"]';var Z=H;switch(p){case"style":Z=zx(A);break;case"script":Z=Vx(A)}Fu.has(Z)||(A=d({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:A,as:p},b),Fu.set(Z,A),E.querySelector(H)!==null||p==="style"&&E.querySelector(gy(Z))||p==="script"&&E.querySelector(xy(Z))||(p=E.createElement("link"),po(p,"link",A),Fe(p),E.head.appendChild(p)))}}function d0e(A,p){nh.m(A,p);var b=Hx;if(b&&A){var E=p&&typeof p.as=="string"?p.as:"script",H='link[rel="modulepreload"][as="'+ja(E)+'"][href="'+ja(A)+'"]',Z=H;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Z=Vx(A)}if(!Fu.has(Z)&&(A=d({rel:"modulepreload",href:A},p),Fu.set(Z,A),b.querySelector(H)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(xy(Z)))return}E=b.createElement("link"),po(E,"link",A),Fe(E),b.head.appendChild(E)}}}function f0e(A,p,b){nh.S(A,p,b);var E=Hx;if(E&&A){var H=Qe(E).hoistableStyles,Z=zx(A);p=p||"default";var pe=H.get(Z);if(!pe){var Se={loading:0,preload:null};if(pe=E.querySelector(gy(Z)))Se.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":p},b),(b=Fu.get(Z))&&X3(A,b);var Ge=pe=E.createElement("link");Fe(Ge),po(Ge,"link",A),Ge._p=new Promise(function(At,_t){Ge.onload=At,Ge.onerror=_t}),Ge.addEventListener("load",function(){Se.loading|=1}),Ge.addEventListener("error",function(){Se.loading|=2}),Se.loading|=4,GE(pe,p,E)}pe={type:"stylesheet",instance:pe,count:1,state:Se},H.set(Z,pe)}}}function A0e(A,p){nh.X(A,p);var b=Hx;if(b&&A){var E=Qe(b).hoistableScripts,H=Vx(A),Z=E.get(H);Z||(Z=b.querySelector(xy(H)),Z||(A=d({src:A,async:!0},p),(p=Fu.get(H))&&Y3(A,p),Z=b.createElement("script"),Fe(Z),po(Z,"link",A),b.head.appendChild(Z)),Z={type:"script",instance:Z,count:1,state:null},E.set(H,Z))}}function h0e(A,p){nh.M(A,p);var b=Hx;if(b&&A){var E=Qe(b).hoistableScripts,H=Vx(A),Z=E.get(H);Z||(Z=b.querySelector(xy(H)),Z||(A=d({src:A,async:!0,type:"module"},p),(p=Fu.get(H))&&Y3(A,p),Z=b.createElement("script"),Fe(Z),po(Z,"link",A),b.head.appendChild(Z)),Z={type:"script",instance:Z,count:1,state:null},E.set(H,Z))}}function O9(A,p,b,E){var H=(H=ne.current)?$E(H):null;if(!H)throw Error(a(446));switch(A){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=zx(b.href),b=Qe(H).hoistableStyles,E=b.get(p),E||(E={type:"style",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){A=zx(b.href);var Z=Qe(H).hoistableStyles,pe=Z.get(A);if(pe||(H=H.ownerDocument||H,pe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Z.set(A,pe),(Z=H.querySelector(gy(A)))&&!Z._p&&(pe.instance=Z,pe.state.loading=5),Fu.has(A)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Fu.set(A,b),Z||m0e(H,A,b,pe.state))),p&&E===null)throw Error(a(528,""));return pe}if(p&&E!==null)throw Error(a(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Vx(b),b=Qe(H).hoistableScripts,E=b.get(p),E||(E={type:"script",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,A))}}function zx(A){return'href="'+ja(A)+'"'}function gy(A){return'link[rel="stylesheet"]['+A+"]"}function F9(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function m0e(A,p,b,E){A.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=A.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),po(p,"link",b),Fe(p),A.head.appendChild(p))}function Vx(A){return'[src="'+ja(A)+'"]'}function xy(A){return"script[async]"+A}function D9(A,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var E=A.querySelector('style[data-href~="'+ja(b.href)+'"]');if(E)return p.instance=E,Fe(E),E;var H=d({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(A.ownerDocument||A).createElement("style"),Fe(E),po(E,"style",H),GE(E,b.precedence,A),p.instance=E;case"stylesheet":H=zx(b.href);var Z=A.querySelector(gy(H));if(Z)return p.state.loading|=4,p.instance=Z,Fe(Z),Z;E=F9(b),(H=Fu.get(H))&&X3(E,H),Z=(A.ownerDocument||A).createElement("link"),Fe(Z);var pe=Z;return pe._p=new Promise(function(Se,Ge){pe.onload=Se,pe.onerror=Ge}),po(Z,"link",E),p.state.loading|=4,GE(Z,b.precedence,A),p.instance=Z;case"script":return Z=Vx(b.src),(H=A.querySelector(xy(Z)))?(p.instance=H,Fe(H),H):(E=b,(H=Fu.get(Z))&&(E=d({},b),Y3(E,H)),A=A.ownerDocument||A,H=A.createElement("script"),Fe(H),po(H,"link",E),A.head.appendChild(H),p.instance=H);case"void":return null;default:throw Error(a(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,GE(E,b.precedence,A));return p.instance}function GE(A,p,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),H=E.length?E[E.length-1]:null,Z=H,pe=0;pe<E.length;pe++){var Se=E[pe];if(Se.dataset.precedence===p)Z=Se;else if(Z!==H)break}Z?Z.parentNode.insertBefore(A,Z.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(A,p.firstChild))}function X3(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.title==null&&(A.title=p.title)}function Y3(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.integrity==null&&(A.integrity=p.integrity)}var qE=null;function P9(A,p,b){if(qE===null){var E=new Map,H=qE=new Map;H.set(b,E)}else H=qE,E=H.get(b),E||(E=new Map,H.set(b,E));if(E.has(A))return E;for(E.set(A,null),b=b.getElementsByTagName(A),H=0;H<b.length;H++){var Z=b[H];if(!(Z[Oe]||Z[xa]||A==="link"&&Z.getAttribute("rel")==="stylesheet")&&Z.namespaceURI!=="http://www.w3.org/2000/svg"){var pe=Z.getAttribute(p)||"";pe=A+pe;var Se=E.get(pe);Se?Se.push(Z):E.set(pe,[Z])}}return E}function R9(A,p,b){A=A.ownerDocument||A,A.head.insertBefore(b,p==="title"?A.querySelector("head > title"):null)}function p0e(A,p,b){if(b===1||p.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return A=p.disabled,typeof p.precedence=="string"&&A==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function L9(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var vy=null;function g0e(){}function x0e(A,p,b){if(vy===null)throw Error(a(475));var E=vy;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var H=zx(b.href),Z=A.querySelector(gy(H));if(Z){A=Z._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(E.count++,E=KE.bind(E),A.then(E,E)),p.state.loading|=4,p.instance=Z,Fe(Z);return}Z=A.ownerDocument||A,b=F9(b),(H=Fu.get(H))&&X3(b,H),Z=Z.createElement("link"),Fe(Z);var pe=Z;pe._p=new Promise(function(Se,Ge){pe.onload=Se,pe.onerror=Ge}),po(Z,"link",b),p.instance=Z}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(p,A),(A=p.state.preload)&&(p.state.loading&3)===0&&(E.count++,p=KE.bind(E),A.addEventListener("load",p),A.addEventListener("error",p))}}function v0e(){if(vy===null)throw Error(a(475));var A=vy;return A.stylesheets&&A.count===0&&J3(A,A.stylesheets),0<A.count?function(p){var b=setTimeout(function(){if(A.stylesheets&&J3(A,A.stylesheets),A.unsuspend){var E=A.unsuspend;A.unsuspend=null,E()}},6e4);return A.unsuspend=p,function(){A.unsuspend=null,clearTimeout(b)}}:null}function KE(){if(this.count--,this.count===0){if(this.stylesheets)J3(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var WE=null;function J3(A,p){A.stylesheets=null,A.unsuspend!==null&&(A.count++,WE=new Map,p.forEach(b0e,A),WE=null,KE.call(A))}function b0e(A,p){if(!(p.state.loading&4)){var b=WE.get(A);if(b)var E=b.get(null);else{b=new Map,WE.set(A,b);for(var H=A.querySelectorAll("link[data-precedence],style[data-precedence]"),Z=0;Z<H.length;Z++){var pe=H[Z];(pe.nodeName==="LINK"||pe.getAttribute("media")!=="not all")&&(b.set(pe.dataset.precedence,pe),E=pe)}E&&b.set(null,E)}H=p.instance,pe=H.getAttribute("data-precedence"),Z=b.get(pe)||E,Z===E&&b.set(null,H),b.set(pe,H),this.count++,E=KE.bind(this),H.addEventListener("load",E),H.addEventListener("error",E),Z?Z.parentNode.insertBefore(H,Z.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(H,A.firstChild)),p.state.loading|=4}}var by={$$typeof:j,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function y0e(A,p,b,E,H,Z,pe,Se){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pa(0),this.hiddenUpdates=Pa(null),this.identifierPrefix=E,this.onUncaughtError=H,this.onCaughtError=Z,this.onRecoverableError=pe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function M9(A,p,b,E,H,Z,pe,Se,Ge,At,_t,Pt){return A=new y0e(A,p,b,pe,Se,Ge,At,Pt),p=1,Z===!0&&(p|=24),Z=Vi(3,null,null,p),A.current=Z,Z.stateNode=A,p=z1(),p.refCount++,A.pooledCache=p,p.refCount++,Z.memoizedState={element:E,isDehydrated:b,cache:p},Je(Z),A}function U9(A){return A?(A=ci,A):ci}function Q9(A,p,b,E,H,Z){H=U9(H),E.context===null?E.context=H:E.pendingContext=H,E=kt(p),E.payload={element:b},Z=Z===void 0?null:Z,Z!==null&&(E.callback=Z),b=Ft(A,E,p),b!==null&&(Pc(b,A,p),St(b,A,p))}function H9(A,p){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var b=A.retryLane;A.retryLane=b!==0&&b<p?b:p}}function Z3(A,p){H9(A,p),(A=A.alternate)&&H9(A,p)}function z9(A){if(A.tag===13){var p=xd(A,67108864);p!==null&&Pc(p,A,67108864),Z3(A,67108864)}}var XE=!0;function w0e(A,p,b,E){var H=Q.T;Q.T=null;var Z=q.p;try{q.p=2,eB(A,p,b,E)}finally{q.p=Z,Q.T=H}}function N0e(A,p,b,E){var H=Q.T;Q.T=null;var Z=q.p;try{q.p=8,eB(A,p,b,E)}finally{q.p=Z,Q.T=H}}function eB(A,p,b,E){if(XE){var H=tB(E);if(H===null)Q3(A,p,E,YE,b),$9(A,E);else if(C0e(H,A,p,b,E))E.stopPropagation();else if($9(A,E),p&4&&-1<E0e.indexOf(A)){for(;H!==null;){var Z=he(H);if(Z!==null)switch(Z.tag){case 3:if(Z=Z.stateNode,Z.current.memoizedState.isDehydrated){var pe=er(Z.pendingLanes);if(pe!==0){var Se=Z;for(Se.pendingLanes|=2,Se.entangledLanes|=2;pe;){var Ge=1<<31-xt(pe);Se.entanglements[1]|=Ge,pe&=~Ge}Qf(Z),(dn&6)===0&&(FE=Ce()+500,Ay(0))}}break;case 13:Se=xd(Z,2),Se!==null&&Pc(Se,Z,2),PE(),Z3(Z,2)}if(Z=tB(E),Z===null&&Q3(A,p,E,YE,b),Z===H)break;H=Z}H!==null&&E.stopPropagation()}else Q3(A,p,E,null,b)}}function tB(A){return A=cn(A),rB(A)}var YE=null;function rB(A){if(YE=null,A=ge(A),A!==null){var p=s(A);if(p===null)A=null;else{var b=p.tag;if(b===13){if(A=o(p),A!==null)return A;A=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;A=null}else p!==A&&(A=null)}}return YE=A,null}function V9(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case ye:return 2;case oe:return 8;case fe:case be:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var aB=!1,Q0=null,H0=null,z0=null,yy=new Map,wy=new Map,V0=[],E0e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $9(A,p){switch(A){case"focusin":case"focusout":Q0=null;break;case"dragenter":case"dragleave":H0=null;break;case"mouseover":case"mouseout":z0=null;break;case"pointerover":case"pointerout":yy.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":wy.delete(p.pointerId)}}function Ny(A,p,b,E,H,Z){return A===null||A.nativeEvent!==Z?(A={blockedOn:p,domEventName:b,eventSystemFlags:E,nativeEvent:Z,targetContainers:[H]},p!==null&&(p=he(p),p!==null&&z9(p)),A):(A.eventSystemFlags|=E,p=A.targetContainers,H!==null&&p.indexOf(H)===-1&&p.push(H),A)}function C0e(A,p,b,E,H){switch(p){case"focusin":return Q0=Ny(Q0,A,p,b,E,H),!0;case"dragenter":return H0=Ny(H0,A,p,b,E,H),!0;case"mouseover":return z0=Ny(z0,A,p,b,E,H),!0;case"pointerover":var Z=H.pointerId;return yy.set(Z,Ny(yy.get(Z)||null,A,p,b,E,H)),!0;case"gotpointercapture":return Z=H.pointerId,wy.set(Z,Ny(wy.get(Z)||null,A,p,b,E,H)),!0}return!1}function G9(A){var p=ge(A.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=o(b),p!==null){A.blockedOn=p,Rs(A.priority,function(){if(b.tag===13){var E=Dc();E=ps(E);var H=xd(b,E);H!==null&&Pc(H,b,E),Z3(b,E)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){A.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}A.blockedOn=null}function JE(A){if(A.blockedOn!==null)return!1;for(var p=A.targetContainers;0<p.length;){var b=tB(A.nativeEvent);if(b===null){b=A.nativeEvent;var E=new b.constructor(b.type,b);Ll=E,b.target.dispatchEvent(E),Ll=null}else return p=he(b),p!==null&&z9(p),A.blockedOn=b,!1;p.shift()}return!0}function q9(A,p,b){JE(A)&&b.delete(p)}function j0e(){aB=!1,Q0!==null&&JE(Q0)&&(Q0=null),H0!==null&&JE(H0)&&(H0=null),z0!==null&&JE(z0)&&(z0=null),yy.forEach(q9),wy.forEach(q9)}function ZE(A,p){A.blockedOn===p&&(A.blockedOn=null,aB||(aB=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,j0e)))}var eC=null;function K9(A){eC!==A&&(eC=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){eC===A&&(eC=null);for(var p=0;p<A.length;p+=3){var b=A[p],E=A[p+1],H=A[p+2];if(typeof E!="function"){if(rB(E||b)===null)continue;break}var Z=he(b);Z!==null&&(A.splice(p,3),p-=3,Tu(Z,{pending:!0,data:H,method:b.method,action:E},E,H))}}))}function Ey(A){function p(Ge){return ZE(Ge,A)}Q0!==null&&ZE(Q0,A),H0!==null&&ZE(H0,A),z0!==null&&ZE(z0,A),yy.forEach(p),wy.forEach(p);for(var b=0;b<V0.length;b++){var E=V0[b];E.blockedOn===A&&(E.blockedOn=null)}for(;0<V0.length&&(b=V0[0],b.blockedOn===null);)G9(b),b.blockedOn===null&&V0.shift();if(b=(A.ownerDocument||A).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var H=b[E],Z=b[E+1],pe=H[la]||null;if(typeof Z=="function")pe||K9(b);else if(pe){var Se=null;if(Z&&Z.hasAttribute("formAction")){if(H=Z,pe=Z[la]||null)Se=pe.formAction;else if(rB(H)!==null)continue}else Se=pe.action;typeof Se=="function"?b[E+1]=Se:(b.splice(E,3),E-=3),K9(b)}}}function nB(A){this._internalRoot=A}tC.prototype.render=nB.prototype.render=function(A){var p=this._internalRoot;if(p===null)throw Error(a(409));var b=p.current,E=Dc();Q9(b,E,A,p,null,null)},tC.prototype.unmount=nB.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var p=A.containerInfo;Q9(A.current,2,null,A,null,null),PE(),p[Ia]=null}};function tC(A){this._internalRoot=A}tC.prototype.unstable_scheduleHydration=function(A){if(A){var p=Dn();A={blockedOn:null,target:A,priority:p};for(var b=0;b<V0.length&&p!==0&&p<V0[b].priority;b++);V0.splice(b,0,A),b===0&&G9(A)}};var W9=t.version;if(W9!=="19.1.1")throw Error(a(527,W9,"19.1.1"));q.findDOMNode=function(A){var p=A._reactInternals;if(p===void 0)throw typeof A.render=="function"?Error(a(188)):(A=Object.keys(A).join(","),Error(a(268,A)));return A=c(p),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var k0e={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rC.isDisabled&&rC.supportsFiber)try{nt=rC.inject(k0e),He=rC}catch{}}return jy.createRoot=function(A,p){if(!n(A))throw Error(a(299));var b=!1,E="",H=dU,Z=fU,pe=AU,Se=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(H=p.onUncaughtError),p.onCaughtError!==void 0&&(Z=p.onCaughtError),p.onRecoverableError!==void 0&&(pe=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Se=p.unstable_transitionCallbacks)),p=M9(A,1,!1,null,null,b,E,H,Z,pe,Se,null),A[Ia]=p.current,U3(A),new nB(p)},jy.hydrateRoot=function(A,p,b){if(!n(A))throw Error(a(299));var E=!1,H="",Z=dU,pe=fU,Se=AU,Ge=null,At=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(H=b.identifierPrefix),b.onUncaughtError!==void 0&&(Z=b.onUncaughtError),b.onCaughtError!==void 0&&(pe=b.onCaughtError),b.onRecoverableError!==void 0&&(Se=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Ge=b.unstable_transitionCallbacks),b.formState!==void 0&&(At=b.formState)),p=M9(A,1,!0,p,b??null,E,H,Z,pe,Se,Ge,At),p.context=U9(null),b=p.current,E=Dc(),E=ps(E),H=kt(E),H.callback=null,Ft(b,H,E),b=E,p.current.lanes=b,Fn(p,b),Qf(p),A[Ia]=p.current,U3(A),new tC(p)},jy.version="19.1.1",jy}var sQ;function Q0e(){if(sQ)return lB.exports;sQ=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),lB.exports=U0e(),lB.exports}var H0e=Q0e();const z0e=Dl(H0e),V0e=()=>{};var iQ={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XJ=function(e){const t=[];let r=0;for(let a=0;a<e.length;a++){let n=e.charCodeAt(a);n<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=n&63|128):(n&64512)===55296&&a+1<e.length&&(e.charCodeAt(a+1)&64512)===56320?(n=65536+((n&1023)<<10)+(e.charCodeAt(++a)&1023),t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=n&63|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=n&63|128)}return t},$0e=function(e){const t=[];let r=0,a=0;for(;r<e.length;){const n=e[r++];if(n<128)t[a++]=String.fromCharCode(n);else if(n>191&&n<224){const s=e[r++];t[a++]=String.fromCharCode((n&31)<<6|s&63)}else if(n>239&&n<365){const s=e[r++],o=e[r++],l=e[r++],c=((n&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[a++]=String.fromCharCode(55296+(c>>10)),t[a++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],o=e[r++];t[a++]=String.fromCharCode((n&15)<<12|(s&63)<<6|o&63)}}return t.join("")},YJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let n=0;n<e.length;n+=3){const s=e[n],o=n+1<e.length,l=o?e[n+1]:0,c=n+2<e.length,u=c?e[n+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(h=64)),a.push(r[d],r[f],r[h],r[m])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(XJ(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):$0e(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let n=0;n<e.length;){const s=r[e.charAt(n++)],l=n<e.length?r[e.charAt(n)]:0;++n;const u=n<e.length?r[e.charAt(n)]:64;++n;const f=n<e.length?r[e.charAt(n)]:64;if(++n,s==null||l==null||u==null||f==null)throw new G0e;const h=s<<2|l>>4;if(a.push(h),u!==64){const m=l<<4&240|u>>2;if(a.push(m),f!==64){const g=u<<6&192|f;a.push(g)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class G0e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q0e=function(e){const t=XJ(e);return YJ.encodeByteArray(t,!0)},Ej=function(e){return q0e(e).replace(/\./g,"")},JJ=function(e){try{return YJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0e=()=>K0e().__FIREBASE_DEFAULTS__,X0e=()=>{if(typeof process>"u"||typeof iQ>"u")return;const e=iQ.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Y0e=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&JJ(e[1]);return t&&JSON.parse(t)},F_=()=>{try{return V0e()||W0e()||X0e()||Y0e()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ZJ=e=>{var t,r;return(r=(t=F_())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},_P=e=>{const t=ZJ(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),a]:[t.substring(0,r),a]},eZ=()=>{var e;return(e=F_())==null?void 0:e.config},tZ=e=>{var t;return(t=F_())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function D_(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rZ(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=t||"demo-project",n=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${a}`,aud:a,iat:n,exp:n+3600,auth_time:n,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Ej(JSON.stringify(r)),Ej(JSON.stringify(o)),""].join(".")}const T2={};function Z0e(){const e={prod:[],emulator:[]};for(const t of Object.keys(T2))T2[t]?e.emulator.push(t):e.prod.push(t);return e}function eme(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let oQ=!1;function P_(e,t){if(typeof window>"u"||typeof document>"u"||!r0(window.location.host)||T2[e]===t||T2[e]||oQ)return;T2[e]=t;function r(h){return`__firebase__banner__${h}`}const a="__firebase__banner",s=Z0e().prod.length>0;function o(){const h=document.getElementById(a);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{oQ=!0,o()},h}function d(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=eme(a),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const j=h.element;l(j),d(v,x);const O=u();c(w,y),j.append(w,g,v,O),document.body.appendChild(j)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tme(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fl())}function rme(){var t;const e=(t=F_())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ame(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nme(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function sme(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ime(){const e=fl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ome(){return!rme()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lme(){try{return typeof indexedDB=="object"}catch{return!1}}function cme(){return new Promise((e,t)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(a);n.onsuccess=()=>{n.result.close(),r||self.indexedDB.deleteDatabase(a),e(!0)},n.onupgradeneeded=()=>{r=!1},n.onerror=()=>{var s;t(((s=n.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ume="FirebaseError";class nf extends Error{constructor(t,r,a){super(r),this.code=t,this.customData=a,this.name=ume,Object.setPrototypeOf(this,nf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uN.prototype.create)}}class uN{constructor(t,r,a){this.service=t,this.serviceName=r,this.errors=a}create(t,...r){const a=r[0]||{},n=`${this.service}/${t}`,s=this.errors[t],o=s?dme(s,a):"Error",l=`${this.serviceName}: ${o} (${n}).`;return new nf(n,l,a)}}function dme(e,t){return e.replace(fme,(r,a)=>{const n=t[a];return n!=null?String(n):`<${a}?>`})}const fme=/\{\$([^}]+)}/g;function Ame(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Um(e,t){if(e===t)return!0;const r=Object.keys(e),a=Object.keys(t);for(const n of r){if(!a.includes(n))return!1;const s=e[n],o=t[n];if(lQ(s)&&lQ(o)){if(!Um(s,o))return!1}else if(s!==o)return!1}for(const n of a)if(!r.includes(n))return!1;return!0}function lQ(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(e){const t=[];for(const[r,a]of Object.entries(e))Array.isArray(a)?a.forEach(n=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function n2(e){const t={};return e.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[n,s]=a.split("=");t[decodeURIComponent(n)]=decodeURIComponent(s)}}),t}function s2(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function hme(e,t){const r=new mme(e,t);return r.subscribe.bind(r)}class mme{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,a){let n;if(t===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");pme(t,["next","error","complete"])?n=t:n={next:t,error:r,complete:a},n.next===void 0&&(n.next=fB),n.error===void 0&&(n.error=fB),n.complete===void 0&&(n.complete=fB);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pme(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function fB(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(e){return e&&e._delegate?e._delegate:e}class Dh{constructor(t,r,a){this.name=t,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gme=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const a=new J0e;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:r});n&&a.resolve(n)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(n){if(a)return null;throw n}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(vme(t))try{this.getOrInitializeService({instanceIdentifier:Vp})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:n});a.resolve(s)}catch{}}}}clearInstance(t=Vp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vp){return this.instances.has(t)}getOptions(t=Vp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);a===l&&o.resolve(n)}return n}onInit(t,r){const a=this.normalizeInstanceIdentifier(r),n=this.onInitCallbacks.get(a)??new Set;n.add(t),this.onInitCallbacks.set(a,n);const s=this.instances.get(a);return s&&t(s,a),()=>{n.delete(t)}}invokeOnInitCallbacks(t,r){const a=this.onInitCallbacks.get(r);if(a)for(const n of a)try{n(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:xme(t),options:r}),this.instances.set(t,a),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=Vp){return this.component?this.component.multipleInstances?t:Vp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function xme(e){return e===Vp?void 0:e}function vme(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bme{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new gme(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wa;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(wa||(wa={}));const yme={debug:wa.DEBUG,verbose:wa.VERBOSE,info:wa.INFO,warn:wa.WARN,error:wa.ERROR,silent:wa.SILENT},wme=wa.INFO,Nme={[wa.DEBUG]:"log",[wa.VERBOSE]:"log",[wa.INFO]:"info",[wa.WARN]:"warn",[wa.ERROR]:"error"},Eme=(e,t,...r)=>{if(t<e.logLevel)return;const a=new Date().toISOString(),n=Nme[t];if(n)console[n](`[${a}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let SP=class{constructor(t){this.name=t,this._logLevel=wme,this._logHandler=Eme,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in wa))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?yme[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,wa.DEBUG,...t),this._logHandler(this,wa.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,wa.VERBOSE,...t),this._logHandler(this,wa.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,wa.INFO,...t),this._logHandler(this,wa.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,wa.WARN,...t),this._logHandler(this,wa.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,wa.ERROR,...t),this._logHandler(this,wa.ERROR,...t)}};const Cme=(e,t)=>t.some(r=>e instanceof r);let cQ,uQ;function jme(){return cQ||(cQ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kme(){return uQ||(uQ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aZ=new WeakMap,dO=new WeakMap,nZ=new WeakMap,AB=new WeakMap,BP=new WeakMap;function _me(e){const t=new Promise((r,a)=>{const n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r(jm(e.result)),n()},o=()=>{a(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&aZ.set(r,e)}).catch(()=>{}),BP.set(t,e),t}function Sme(e){if(dO.has(e))return;const t=new Promise((r,a)=>{const n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),n()},o=()=>{a(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});dO.set(e,t)}let fO={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return dO.get(e);if(t==="objectStoreNames")return e.objectStoreNames||nZ.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return jm(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Bme(e){fO=e(fO)}function Tme(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=e.call(hB(this),t,...r);return nZ.set(a,t.sort?t.sort():[t]),jm(a)}:kme().includes(e)?function(...t){return e.apply(hB(this),t),jm(aZ.get(this))}:function(...t){return jm(e.apply(hB(this),t))}}function Ime(e){return typeof e=="function"?Tme(e):(e instanceof IDBTransaction&&Sme(e),Cme(e,jme())?new Proxy(e,fO):e)}function jm(e){if(e instanceof IDBRequest)return _me(e);if(AB.has(e))return AB.get(e);const t=Ime(e);return t!==e&&(AB.set(e,t),BP.set(t,e)),t}const hB=e=>BP.get(e);function Ome(e,t,{blocked:r,upgrade:a,blocking:n,terminated:s}={}){const o=indexedDB.open(e,t),l=jm(o);return a&&o.addEventListener("upgradeneeded",c=>{a(jm(o.result),c.oldVersion,c.newVersion,jm(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),n&&c.addEventListener("versionchange",u=>n(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Fme=["get","getKey","getAll","getAllKeys","count"],Dme=["put","add","delete","clear"],mB=new Map;function dQ(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(mB.get(t))return mB.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,n=Dme.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(n||Fme.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,n?"readwrite":"readonly");let u=c.store;return a&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),n&&c.done]))[0]};return mB.set(t,s),s}Bme(e=>({...e,get:(t,r,a)=>dQ(t,r)||e.get(t,r,a),has:(t,r)=>!!dQ(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pme{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Rme(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function Rme(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const AO="@firebase/app",fQ="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new SP("@firebase/app"),Lme="@firebase/app-compat",Mme="@firebase/analytics-compat",Ume="@firebase/analytics",Qme="@firebase/app-check-compat",Hme="@firebase/app-check",zme="@firebase/auth",Vme="@firebase/auth-compat",$me="@firebase/database",Gme="@firebase/data-connect",qme="@firebase/database-compat",Kme="@firebase/functions",Wme="@firebase/functions-compat",Xme="@firebase/installations",Yme="@firebase/installations-compat",Jme="@firebase/messaging",Zme="@firebase/messaging-compat",epe="@firebase/performance",tpe="@firebase/performance-compat",rpe="@firebase/remote-config",ape="@firebase/remote-config-compat",npe="@firebase/storage",spe="@firebase/storage-compat",ipe="@firebase/firestore",ope="@firebase/ai",lpe="@firebase/firestore-compat",cpe="firebase",upe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="[DEFAULT]",dpe={[AO]:"fire-core",[Lme]:"fire-core-compat",[Ume]:"fire-analytics",[Mme]:"fire-analytics-compat",[Hme]:"fire-app-check",[Qme]:"fire-app-check-compat",[zme]:"fire-auth",[Vme]:"fire-auth-compat",[$me]:"fire-rtdb",[Gme]:"fire-data-connect",[qme]:"fire-rtdb-compat",[Kme]:"fire-fn",[Wme]:"fire-fn-compat",[Xme]:"fire-iid",[Yme]:"fire-iid-compat",[Jme]:"fire-fcm",[Zme]:"fire-fcm-compat",[epe]:"fire-perf",[tpe]:"fire-perf-compat",[rpe]:"fire-rc",[ape]:"fire-rc-compat",[npe]:"fire-gcs",[spe]:"fire-gcs-compat",[ipe]:"fire-fst",[lpe]:"fire-fst-compat",[ope]:"fire-vertex","fire-js":"fire-js",[cpe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Map,fpe=new Map,mO=new Map;function AQ(e,t){try{e.container.addComponent(t)}catch(r){Ph.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Qm(e){const t=e.name;if(mO.has(t))return Ph.debug(`There were multiple attempts to register component ${t}.`),!1;mO.set(t,e);for(const r of uw.values())AQ(r,e);for(const r of fpe.values())AQ(r,e);return!0}function fN(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function qc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ape={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},km=new uN("app","Firebase",Ape);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hpe{constructor(t,r,a){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Dh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw km.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=upe;function TP(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const a={name:hO,automaticDataCollectionEnabled:!0,...t},n=a.name;if(typeof n!="string"||!n)throw km.create("bad-app-name",{appName:String(n)});if(r||(r=eZ()),!r)throw km.create("no-options");const s=uw.get(n);if(s){if(Um(r,s.options)&&Um(a,s.config))return s;throw km.create("duplicate-app",{appName:n})}const o=new bme(n);for(const c of mO.values())o.addComponent(c);const l=new hpe(r,a,o);return uw.set(n,l),l}function R_(e=hO){const t=uw.get(e);if(!t&&e===hO&&eZ())return TP();if(!t)throw km.create("no-app",{appName:e});return t}function hQ(){return Array.from(uw.values())}function td(e,t,r){let a=dpe[e]??e;r&&(a+=`-${r}`);const n=a.match(/\s|\//),s=t.match(/\s|\//);if(n||s){const o=[`Unable to register library "${a}" with version "${t}":`];n&&o.push(`library name "${a}" contains illegal characters (whitespace or "/")`),n&&s&&o.push("and"),s&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ph.warn(o.join(" "));return}Qm(new Dh(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mpe="firebase-heartbeat-database",ppe=1,dw="firebase-heartbeat-store";let pB=null;function sZ(){return pB||(pB=Ome(mpe,ppe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(dw)}catch(r){console.warn(r)}}}}).catch(e=>{throw km.create("idb-open",{originalErrorMessage:e.message})})),pB}async function gpe(e){try{const r=(await sZ()).transaction(dw),a=await r.objectStore(dw).get(iZ(e));return await r.done,a}catch(t){if(t instanceof nf)Ph.warn(t.message);else{const r=km.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ph.warn(r.message)}}}async function mQ(e,t){try{const a=(await sZ()).transaction(dw,"readwrite");await a.objectStore(dw).put(t,iZ(e)),await a.done}catch(r){if(r instanceof nf)Ph.warn(r.message);else{const a=km.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ph.warn(a.message)}}}function iZ(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xpe=1024,vpe=30;class bpe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new wpe(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,r;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pQ();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>vpe){const o=Npe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ph.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=pQ(),{heartbeatsToSend:a,unsentEntries:n}=ype(this._heartbeatsCache.heartbeats),s=Ej(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Ph.warn(r),""}}}function pQ(){return new Date().toISOString().substring(0,10)}function ype(e,t=xpe){const r=[];let a=e.slice();for(const n of e){const s=r.find(o=>o.agent===n.agent);if(s){if(s.dates.push(n.date),gQ(r)>t){s.dates.pop();break}}else if(r.push({agent:n.agent,dates:[n.date]}),gQ(r)>t){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class wpe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lme()?cme().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await gpe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return mQ(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return mQ(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function gQ(e){return Ej(JSON.stringify({version:2,heartbeats:e})).length}function Npe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let a=1;a<e.length;a++)e[a].date<r&&(r=e[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Epe(e){Qm(new Dh("platform-logger",t=>new Pme(t),"PRIVATE")),Qm(new Dh("heartbeat",t=>new bpe(t),"PRIVATE")),td(AO,fQ,e),td(AO,fQ,"esm2020"),td("fire-js","")}Epe("");function oZ(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Cpe=oZ,lZ=new uN("auth","Firebase",oZ());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=new SP("@firebase/auth");function jpe(e,...t){Cj.logLevel<=wa.WARN&&Cj.warn(`Auth (${Wg}): ${e}`,...t)}function P5(e,...t){Cj.logLevel<=wa.ERROR&&Cj.error(`Auth (${Wg}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(e,...t){throw IP(e,...t)}function dA(e,...t){return IP(e,...t)}function cZ(e,t,r){const a={...Cpe(),[t]:r};return new uN("auth","Firebase",a).create(t,{appName:e.name})}function _m(e){return cZ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IP(e,...t){if(typeof e!="string"){const r=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=e.name),e._errorFactory.create(r,...a)}return lZ.create(e,...t)}function Qr(e,t,...r){if(!e)throw IP(t,...r)}function mh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw P5(t),new Error(t)}function Rh(e,t){e||mh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function kpe(){return xQ()==="http:"||xQ()==="https:"}function xQ(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _pe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kpe()||nme()||"connection"in navigator)?navigator.onLine:!0}function Spe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(t,r){this.shortDelay=t,this.longDelay=r,Rh(r>t,"Short delay should be less than long delay!"),this.isMobile=tme()||sme()}get(){return _pe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(e,t){Rh(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uZ{static initialize(t,r,a){this.fetchImpl=t,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tpe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ipe=new AN(3e4,6e4);function ap(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function a0(e,t,r,a,n={}){return dZ(e,n,async()=>{let s={},o={};a&&(t==="GET"?o=a:s={body:JSON.stringify(a)});const l=dN({key:e.config.apiKey,...o}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return ame()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&r0(e.emulatorConfig.host)&&(u.credentials="include"),uZ.fetch()(await fZ(e,e.config.apiHost,r,l),u)})}async function dZ(e,t,r){e._canInitEmulator=!1;const a={...Bpe,...t};try{const n=new Fpe(e),s=await Promise.race([r(),n.promise]);n.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw aC(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw aC(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw aC(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw aC(e,"user-disabled",o);const d=a[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cZ(e,d,u);ef(e,d)}}catch(n){if(n instanceof nf)throw n;ef(e,"network-request-failed",{message:String(n)})}}async function L_(e,t,r,a,n={}){const s=await a0(e,t,r,a,n);return"mfaPendingCredential"in s&&ef(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function fZ(e,t,r,a){const n=`${t}${r}?${a}`,s=e,o=s.config.emulator?OP(e.config,n):`${e.config.apiScheme}://${n}`;return Tpe.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Ope(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fpe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(dA(this.auth,"network-request-failed")),Ipe.get())})}}function aC(e,t,r){const a={appName:e.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const n=dA(e,t,a);return n.customData._tokenResponse=r,n}function vQ(e){return e!==void 0&&e.enterprise!==void 0}class Dpe{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Ope(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ppe(e,t){return a0(e,"GET","/v2/recaptchaConfig",ap(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rpe(e,t){return a0(e,"POST","/v1/accounts:delete",t)}async function jj(e,t){return a0(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Lpe(e,t=!1){const r=$a(e),a=await r.getIdToken(t),n=FP(a);Qr(n&&n.exp&&n.auth_time&&n.iat,r.auth,"internal-error");const s=typeof n.firebase=="object"?n.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:n,token:a,authTime:I2(gB(n.auth_time)),issuedAtTime:I2(gB(n.iat)),expirationTime:I2(gB(n.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function gB(e){return Number(e)*1e3}function FP(e){const[t,r,a]=e.split(".");if(t===void 0||r===void 0||a===void 0)return P5("JWT malformed, contained fewer than 3 sections"),null;try{const n=JJ(r);return n?JSON.parse(n):(P5("Failed to decode base64 JWT payload"),null)}catch(n){return P5("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function bQ(e){const t=FP(e);return Qr(t,"internal-error"),Qr(typeof t.exp<"u","internal-error"),Qr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(e,t,r=!1){if(r)return t;try{return await t}catch(a){throw a instanceof nf&&Mpe(a)&&e.auth.currentUser===e&&await e.auth.signOut(),a}}function Mpe({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Upe{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=I2(this.lastLoginAt),this.creationTime=I2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(e){var f;const t=e.auth,r=await e.getIdToken(),a=await fw(e,jj(t,{idToken:r}));Qr(a==null?void 0:a.users.length,t,"internal-error");const n=a.users[0];e._notifyReloadListener(n);const s=(f=n.providerUserInfo)!=null&&f.length?AZ(n.providerUserInfo):[],o=Hpe(e.providerData,s),l=e.isAnonymous,c=!(e.email&&n.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:o,metadata:new gO(n.createdAt,n.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function Qpe(e){const t=$a(e);await kj(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Hpe(e,t){return[...e.filter(a=>!t.some(n=>n.providerId===a.providerId)),...t]}function AZ(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zpe(e,t){const r=await dZ(e,{},async()=>{const a=dN({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:s}=e.config,o=await fZ(e,n,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:a};return e.emulatorConfig&&r0(e.emulatorConfig.host)&&(c.credentials="include"),uZ.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Vpe(e,t){return a0(e,"POST","/v2/accounts:revokeToken",ap(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Qr(t.idToken,"internal-error"),Qr(typeof t.idToken<"u","internal-error"),Qr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):bQ(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Qr(t.length!==0,"internal-error");const r=bQ(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Qr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:a,refreshToken:n,expiresIn:s}=await zpe(t,r);this.updateTokensAndExpiration(a,n,Number(s))}updateTokensAndExpiration(t,r,a){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,r){const{refreshToken:a,accessToken:n,expirationTime:s}=r,o=new Vv;return a&&(Qr(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),n&&(Qr(typeof n=="string","internal-error",{appName:t}),o.accessToken=n),s&&(Qr(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Vv,this.toJSON())}_performRefresh(){return mh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(e,t){Qr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Qd{constructor({uid:t,auth:r,stsTokenManager:a,...n}){this.providerId="firebase",this.proactiveRefresh=new Upe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=n.displayName||null,this.email=n.email||null,this.emailVerified=n.emailVerified||!1,this.phoneNumber=n.phoneNumber||null,this.photoURL=n.photoURL||null,this.isAnonymous=n.isAnonymous||!1,this.tenantId=n.tenantId||null,this.providerData=n.providerData?[...n.providerData]:[],this.metadata=new gO(n.createdAt||void 0,n.lastLoginAt||void 0)}async getIdToken(t){const r=await fw(this,this.stsTokenManager.getToken(this.auth,t));return Qr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Lpe(this,t)}reload(){return Qpe(this)}_assign(t){this!==t&&(Qr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Qd({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),r&&await kj(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qc(this.auth.app))return Promise.reject(_m(this.auth));const t=await this.getIdToken();return await fw(this,Rpe(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const a=r.displayName??void 0,n=r.email??void 0,s=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:m,providerData:g,stsTokenManager:x}=r;Qr(f&&x,t,"internal-error");const v=Vv.fromJSON(this.name,x);Qr(typeof f=="string",t,"internal-error"),G0(a,t.name),G0(n,t.name),Qr(typeof h=="boolean",t,"internal-error"),Qr(typeof m=="boolean",t,"internal-error"),G0(s,t.name),G0(o,t.name),G0(l,t.name),G0(c,t.name),G0(u,t.name),G0(d,t.name);const y=new Qd({uid:f,auth:t,email:n,emailVerified:h,displayName:a,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:v,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,a=!1){const n=new Vv;n.updateFromServerResponse(r);const s=new Qd({uid:r.localId,auth:t,stsTokenManager:n,isAnonymous:a});return await kj(s),s}static async _fromGetAccountInfoResponse(t,r,a){const n=r.users[0];Qr(n.localId!==void 0,"internal-error");const s=n.providerUserInfo!==void 0?AZ(n.providerUserInfo):[],o=!(n.email&&n.passwordHash)&&!(s!=null&&s.length),l=new Vv;l.updateFromIdToken(a);const c=new Qd({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:o}),u={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:s,metadata:new gO(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yQ=new Map;function ph(e){Rh(e instanceof Function,"Expected a class definition");let t=yQ.get(e);return t?(Rh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yQ.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}hZ.type="NONE";const wQ=hZ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(e,t,r){return`firebase:${e}:${t}:${r}`}class $v{constructor(t,r,a){this.persistence=t,this.auth=r,this.userKey=a;const{config:n,name:s}=this.auth;this.fullUserKey=R5(this.userKey,n.apiKey,s),this.fullPersistenceKey=R5("persistence",n.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await jj(this.auth,{idToken:t}).catch(()=>{});return r?Qd._fromGetAccountInfoResponse(this.auth,r,t):null}return Qd._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,a="authUser"){if(!r.length)return new $v(ph(wQ),t,a);const n=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=n[0]||ph(wQ);const o=R5(a,t.config.apiKey,t.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const h=await jj(t,{idToken:d}).catch(()=>{});if(!h)break;f=await Qd._fromGetAccountInfoResponse(t,h,d)}else f=Qd._fromJSON(t,d);u!==s&&(l=f),s=u;break}}catch{}const c=n.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new $v(s,t,a):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new $v(s,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NQ(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xZ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mZ(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(bZ(t))return"Blackberry";if(yZ(t))return"Webos";if(pZ(t))return"Safari";if((t.includes("chrome/")||gZ(t))&&!t.includes("edge/"))return"Chrome";if(vZ(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=e.match(r);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function mZ(e=fl()){return/firefox\//i.test(e)}function pZ(e=fl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function gZ(e=fl()){return/crios\//i.test(e)}function xZ(e=fl()){return/iemobile/i.test(e)}function vZ(e=fl()){return/android/i.test(e)}function bZ(e=fl()){return/blackberry/i.test(e)}function yZ(e=fl()){return/webos/i.test(e)}function DP(e=fl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $pe(e=fl()){var t;return DP(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Gpe(){return ime()&&document.documentMode===10}function wZ(e=fl()){return DP(e)||vZ(e)||yZ(e)||bZ(e)||/windows phone/i.test(e)||xZ(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NZ(e,t=[]){let r;switch(e){case"Browser":r=NQ(fl());break;case"Worker":r=`${NQ(fl())}-${e}`;break;default:r=e}const a=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Wg}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qpe{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const a=s=>new Promise((o,l)=>{try{const c=t(s);o(c)}catch(c){l(c)}});a.onAbort=r,this.queue.push(a);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const a of this.queue)await a(t),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const n of r)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kpe(e,t={}){return a0(e,"GET","/v2/passwordPolicy",ap(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wpe=6;class Xpe{constructor(t){var a;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Wpe,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=t.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const a=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=t.length>=a),n&&(r.meetsMaxPasswordLength=t.length<=n)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let n=0;n<t.length;n++)a=t.charAt(n),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,r,a,n,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ype{constructor(t,r,a,n){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EQ(this),this.idTokenSubscription=new EQ(this),this.beforeStateQueue=new qpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lZ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=ph(r)),this._initializationPromise=this.queue(async()=>{var a,n,s;if(!this._deleted&&(this.persistenceManager=await $v.create(this,t),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((n=this._popupRedirectResolver)!=null&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await jj(this,{idToken:t}),a=await Qd._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(qc(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,n=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&(c!=null&&c.user)&&(a=c.user,n=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(n)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await kj(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Spe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(qc(this.app))return Promise.reject(_m(this));const r=t?$a(t):null;return r&&Qr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Qr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return qc(this.app)?Promise.reject(_m(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return qc(this.app)?Promise.reject(_m(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ph(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Kpe(this),r=new Xpe(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new uN("auth","Firebase",t())}onAuthStateChanged(t,r,a){return this.registerStateListener(this.authStateSubscription,t,r,a)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,a){return this.registerStateListener(this.idTokenSubscription,t,r,a)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await Vpe(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const a=await this.getOrInitRedirectPersistenceManager(r);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&ph(t)||this._popupRedirectResolver;Qr(r,this,"argument-error"),this.redirectPersistenceManager=await $v.create(this,[ph(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,a,n){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qr(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,a,n);return()=>{o=!0,c()}}else{const c=t.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=NZ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var n;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((n=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var r;if(qc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&jpe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Xg(e){return $a(e)}class EQ{constructor(t){this.auth=t,this.observer=null,this.addObserver=hme(r=>this.observer=r)}get next(){return Qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jpe(e){M_=e}function EZ(e){return M_.loadJS(e)}function Zpe(){return M_.recaptchaEnterpriseScript}function ege(){return M_.gapiScript}function tge(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class rge{constructor(){this.enterprise=new age}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class age{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const nge="recaptcha-enterprise",CZ="NO_RECAPTCHA";class sge{constructor(t){this.type=nge,this.auth=Xg(t)}async verify(t="verify",r=!1){async function a(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Ppe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Dpe(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function n(s,o,l){const c=window.grecaptcha;vQ(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{o(u)}).catch(()=>{o(CZ)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rge().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{a(this.auth).then(l=>{if(!r&&vQ(window.grecaptcha))n(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Zpe();c.length!==0&&(c+=l),EZ(c).then(()=>{n(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function CQ(e,t,r,a=!1,n=!1){const s=new sge(e);let o;if(n)o=CZ;else try{o=await s.verify(r)}catch{o=await s.verify(r,!0)}const l={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return a?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function xO(e,t,r,a,n){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await CQ(e,t,r,r==="getOobCode");return a(e,o)}else return a(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await CQ(e,t,r,r==="getOobCode");return a(e,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ige(e,t){const r=fN(e,"auth");if(r.isInitialized()){const n=r.getImmediate(),s=r.getOptions();if(Um(s,t??{}))return n;ef(n,"already-initialized")}return r.initialize({options:t})}function oge(e,t){const r=(t==null?void 0:t.persistence)||[],a=(Array.isArray(r)?r:[r]).map(ph);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function lge(e,t,r){const a=Xg(e);Qr(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const n=!1,s=jZ(t),{host:o,port:l}=cge(t),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!a._canInitEmulator){Qr(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Qr(Um(u,a.config.emulator)&&Um(d,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=u,a.emulatorConfig=d,a.settings.appVerificationDisabledForTesting=!0,r0(o)?(D_(`${s}//${o}${c}`),P_("Auth",!0)):uge()}function jZ(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function cge(e){const t=jZ(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(a);if(n){const s=n[1];return{host:s,port:jQ(a.substr(s.length+1))}}else{const[s,o]=a.split(":");return{host:s,port:jQ(o)}}}function jQ(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function uge(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return mh("not implemented")}_getIdTokenResponse(t){return mh("not implemented")}_linkToIdToken(t,r){return mh("not implemented")}_getReauthenticationResolver(t){return mh("not implemented")}}async function dge(e,t){return a0(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fge(e,t){return L_(e,"POST","/v1/accounts:signInWithPassword",ap(e,t))}async function Age(e,t){return a0(e,"POST","/v1/accounts:sendOobCode",ap(e,t))}async function hge(e,t){return Age(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mge(e,t){return L_(e,"POST","/v1/accounts:signInWithEmailLink",ap(e,t))}async function pge(e,t){return L_(e,"POST","/v1/accounts:signInWithEmailLink",ap(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw extends PP{constructor(t,r,a,n=null){super("password",a),this._email=t,this._password=r,this._tenantId=n}static _fromEmailAndPassword(t,r){return new Aw(t,r,"password")}static _fromEmailAndCode(t,r,a=null){return new Aw(t,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xO(t,r,"signInWithPassword",fge);case"emailLink":return mge(t,{email:this._email,oobCode:this._password});default:ef(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const a={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xO(t,a,"signUpPassword",dge);case"emailLink":return pge(t,{idToken:r,email:this._email,oobCode:this._password});default:ef(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gv(e,t){return L_(e,"POST","/v1/accounts:signInWithIdp",ap(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gge="http://localhost";class Sg extends PP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Sg(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):ef("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:n,...s}=r;if(!a||!n)return null;const o=new Sg(a,n);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return Gv(t,r)}_linkToIdToken(t,r){const a=this.buildRequest();return a.idToken=r,Gv(t,a)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Gv(t,r)}buildRequest(){const t={requestUri:gge,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=dN(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xge(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vge(e){const t=n2(s2(e)).link,r=t?n2(s2(t)).deep_link_id:null,a=n2(s2(e)).deep_link_id;return(a?n2(s2(a)).link:null)||a||r||t||e}class RP{constructor(t){const r=n2(s2(t)),a=r.apiKey??null,n=r.oobCode??null,s=xge(r.mode??null);Qr(a&&n&&s,"argument-error"),this.apiKey=a,this.operation=s,this.code=n,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=vge(t);try{return new RP(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(){this.providerId=t1.PROVIDER_ID}static credential(t,r){return Aw._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const a=RP.parseLink(r);return Qr(a,"argument-error"),Aw._fromEmailAndCode(t,a.code,a.tenantId)}}t1.PROVIDER_ID="password";t1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";t1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kZ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN extends kZ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm extends hN{constructor(){super("facebook.com")}static credential(t){return Sg._fromParams({providerId:cm.PROVIDER_ID,signInMethod:cm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return cm.credentialFromTaggedObject(t)}static credentialFromError(t){return cm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return cm.credential(t.oauthAccessToken)}catch{return null}}}cm.FACEBOOK_SIGN_IN_METHOD="facebook.com";cm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends hN{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Sg._fromParams({providerId:um.PROVIDER_ID,signInMethod:um.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return um.credentialFromTaggedObject(t)}static credentialFromError(t){return um.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:a}=t;if(!r&&!a)return null;try{return um.credential(r,a)}catch{return null}}}um.GOOGLE_SIGN_IN_METHOD="google.com";um.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends hN{constructor(){super("github.com")}static credential(t){return Sg._fromParams({providerId:dm.PROVIDER_ID,signInMethod:dm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return dm.credentialFromTaggedObject(t)}static credentialFromError(t){return dm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return dm.credential(t.oauthAccessToken)}catch{return null}}}dm.GITHUB_SIGN_IN_METHOD="github.com";dm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm extends hN{constructor(){super("twitter.com")}static credential(t,r){return Sg._fromParams({providerId:fm.PROVIDER_ID,signInMethod:fm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return fm.credentialFromTaggedObject(t)}static credentialFromError(t){return fm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=t;if(!r||!a)return null;try{return fm.credential(r,a)}catch{return null}}}fm.TWITTER_SIGN_IN_METHOD="twitter.com";fm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,a,n=!1){const s=await Qd._fromIdTokenResponse(t,a,n),o=kQ(a);return new hb({user:s,providerId:o,_tokenResponse:a,operationType:r})}static async _forOperation(t,r,a){await t._updateTokensIfNecessary(a,!0);const n=kQ(a);return new hb({user:t,providerId:n,_tokenResponse:a,operationType:r})}}function kQ(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j extends nf{constructor(t,r,a,n){super(r.code,r.message),this.operationType=a,this.user=n,Object.setPrototypeOf(this,_j.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,r,a,n){return new _j(t,r,a,n)}}function _Z(e,t,r,a){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_j._fromErrorAndOperation(e,s,t,a):s})}async function bge(e,t,r=!1){const a=await fw(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return hb._forOperation(e,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yge(e,t,r=!1){const{auth:a}=e;if(qc(a.app))return Promise.reject(_m(a));const n="reauthenticate";try{const s=await fw(e,_Z(a,n,t,e),r);Qr(s.idToken,a,"internal-error");const o=FP(s.idToken);Qr(o,a,"internal-error");const{sub:l}=o;return Qr(e.uid===l,a,"user-mismatch"),hb._forOperation(e,n,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ef(a,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SZ(e,t,r=!1){if(qc(e.app))return Promise.reject(_m(e));const a="signIn",n=await _Z(e,a,t),s=await hb._fromIdTokenResponse(e,a,n);return r||await e._updateCurrentUser(s.user),s}async function wge(e,t){return SZ(Xg(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nge(e){const t=Xg(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ege(e,t,r){const a=Xg(e);await xO(a,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",hge)}function Cge(e,t,r){return qc(e.app)?Promise.reject(_m(e)):wge($a(e),t1.credential(t,r)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Nge(e),a})}function jge(e,t,r,a){return $a(e).onIdTokenChanged(t,r,a)}function kge(e,t,r){return $a(e).beforeAuthStateChanged(t,r)}function BZ(e,t,r,a){return $a(e).onAuthStateChanged(t,r,a)}function _ge(e){return $a(e).signOut()}const Sj="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Sj,"1"),this.storage.removeItem(Sj),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sge=1e3,Bge=10;class IZ extends TZ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wZ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),n=this.localCache[r];a!==n&&t(r,n,a)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const a=t.key;r?this.detachListener():this.stopPolling();const n=()=>{const o=this.storage.getItem(a);!r&&this.localCache[a]===o||this.notifyListeners(a,o)},s=this.storage.getItem(a);Gpe()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(n,Bge):n()}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const n of Array.from(a))n(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:a}),!0)})},Sge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}IZ.type="LOCAL";const Tge=IZ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ extends TZ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}OZ.type="SESSION";const FZ=OZ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ige(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(n=>n.isListeningto(t));if(r)return r;const a=new U_(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:a,eventType:n,data:s}=r.data,o=this.handlersMap[n];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:n});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await Ige(l);r.ports[0].postMessage({status:"done",eventId:a,eventType:n,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}U_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(e="",t=10){let r="";for(let a=0;a<t;a++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oge{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,a=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=LP("",20);n.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},a);o={messageChannel:n,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),n.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[n.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(){return window}function Fge(e){fA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DZ(){return typeof fA().WorkerGlobalScope<"u"&&typeof fA().importScripts=="function"}async function Dge(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Pge(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Rge(){return DZ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PZ="firebaseLocalStorageDb",Lge=1,Bj="firebaseLocalStorage",RZ="fbase_key";class mN{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Q_(e,t){return e.transaction([Bj],t?"readwrite":"readonly").objectStore(Bj)}function Mge(){const e=indexedDB.deleteDatabase(PZ);return new mN(e).toPromise()}function vO(){const e=indexedDB.open(PZ,Lge);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const a=e.result;try{a.createObjectStore(Bj,{keyPath:RZ})}catch(n){r(n)}}),e.addEventListener("success",async()=>{const a=e.result;a.objectStoreNames.contains(Bj)?t(a):(a.close(),await Mge(),t(await vO()))})})}async function _Q(e,t,r){const a=Q_(e,!0).put({[RZ]:t,value:r});return new mN(a).toPromise()}async function Uge(e,t){const r=Q_(e,!1).get(t),a=await new mN(r).toPromise();return a===void 0?null:a.value}function SQ(e,t){const r=Q_(e,!0).delete(t);return new mN(r).toPromise()}const Qge=800,Hge=3;class LZ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vO(),this.db)}async _withRetries(t){let r=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(r++>Hge)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DZ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=U_._getInstance(Rge()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,a;if(this.activeServiceWorker=await Dge(),!this.activeServiceWorker)return;this.sender=new Oge(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(a=t[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Pge()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await vO();return await _Q(t,Sj,"1"),await SQ(t,Sj),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>_Q(a,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(a=>Uge(a,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>SQ(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(n=>{const s=Q_(n,!1).getAll();return new mN(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(t.length!==0)for(const{fbase_key:n,value:s}of t)a.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(s)&&(this.notifyListeners(n,s),r.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!a.has(n)&&(this.notifyListeners(n,null),r.push(n));return r}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const n of Array.from(a))n(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Qge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LZ.type="LOCAL";const zge=LZ;new AN(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vge(e,t){return t?ph(t):(Qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP extends PP{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Gv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Gv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Gv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function $ge(e){return SZ(e.auth,new MP(e),e.bypassAuthState)}function Gge(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),yge(r,new MP(e),e.bypassAuthState)}async function qge(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),bge(r,new MP(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MZ{constructor(t,r,a,n,s=!1){this.auth=t,this.resolver=a,this.user=n,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:a,postBody:n,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:a,tenantId:s||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return $ge;case"linkViaPopup":case"linkViaRedirect":return qge;case"reauthViaPopup":case"reauthViaRedirect":return Gge;default:ef(this.auth,"internal-error")}}resolve(t){Rh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Rh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kge=new AN(2e3,1e4);class Bv extends MZ{constructor(t,r,a,n,s){super(t,r,n,s),this.provider=a,this.authWindow=null,this.pollId=null,Bv.currentPopupAction&&Bv.currentPopupAction.cancel(),Bv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Qr(t,this.auth,"internal-error"),t}async onExecution(){Rh(this.filter.length===1,"Popup operations only handle one event");const t=LP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(dA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(dA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,a;if((a=(r=this.authWindow)==null?void 0:r.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Kge.get())};t()}}Bv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wge="pendingRedirect",L5=new Map;class Xge extends MZ{constructor(t,r,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let t=L5.get(this.auth._key());if(!t){try{const a=await Yge(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(r){t=()=>Promise.reject(r)}L5.set(this.auth._key(),t)}return this.bypassAuthState||L5.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Yge(e,t){const r=exe(t),a=Zge(e);if(!await a._isAvailable())return!1;const n=await a._get(r)==="true";return await a._remove(r),n}function Jge(e,t){L5.set(e._key(),t)}function Zge(e){return ph(e._redirectPersistence)}function exe(e){return R5(Wge,e.config.apiKey,e.name)}async function txe(e,t,r=!1){if(qc(e.app))return Promise.reject(_m(e));const a=Xg(e),n=Vge(a,t),o=await new Xge(a,n,r).execute();return o&&!r&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rxe=600*1e3;class axe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(r=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!nxe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var a;if(t.error&&!UZ(t)){const n=((a=t.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";r.onError(dA(this.auth,n))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const a=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=rxe&&this.cachedEventUids.clear(),this.cachedEventUids.has(BQ(t))}saveEventToCache(t){this.cachedEventUids.add(BQ(t)),this.lastProcessedEventTime=Date.now()}}function BQ(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function UZ({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function nxe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UZ(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sxe(e,t={}){return a0(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ixe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oxe=/^https?/;async function lxe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await sxe(e);for(const r of t)try{if(cxe(r))return}catch{}ef(e,"unauthorized-domain")}function cxe(e){const t=pO(),{protocol:r,hostname:a}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&a===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===a}if(!oxe.test(r))return!1;if(ixe.test(e))return a===e;const n=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uxe=new AN(3e4,6e4);function TQ(){const e=fA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function dxe(e){return new Promise((t,r)=>{var n,s,o;function a(){TQ(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{TQ(),r(dA(e,"network-request-failed"))},timeout:uxe.get()})}if((s=(n=fA().gapi)==null?void 0:n.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((o=fA().gapi)!=null&&o.load)a();else{const l=tge("iframefcb");return fA()[l]=()=>{gapi.load?a():r(dA(e,"network-request-failed"))},EZ(`${ege()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw M5=null,t})}let M5=null;function fxe(e){return M5=M5||dxe(e),M5}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Axe=new AN(5e3,15e3),hxe="__/auth/iframe",mxe="emulator/auth/iframe",pxe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gxe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xxe(e){const t=e.config;Qr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?OP(t,mxe):`https://${e.config.authDomain}/${hxe}`,a={apiKey:t.apiKey,appName:e.name,v:Wg},n=gxe.get(e.config.apiHost);n&&(a.eid=n);const s=e._getFrameworks();return s.length&&(a.fw=s.join(",")),`${r}?${dN(a).slice(1)}`}async function vxe(e){const t=await fxe(e),r=fA().gapi;return Qr(r,e,"internal-error"),t.open({where:document.body,url:xxe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pxe,dontclear:!0},a=>new Promise(async(n,s)=>{await a.restyle({setHideOnLeave:!1});const o=dA(e,"network-request-failed"),l=fA().setTimeout(()=>{s(o)},Axe.get());function c(){fA().clearTimeout(l),n(a)}a.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bxe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yxe=500,wxe=600,Nxe="_blank",Exe="http://localhost";class IQ{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Cxe(e,t,r,a=yxe,n=wxe){const s=Math.max((window.screen.availHeight-n)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let l="";const c={...bxe,width:a.toString(),height:n.toString(),top:s,left:o},u=fl().toLowerCase();r&&(l=gZ(u)?Nxe:r),mZ(u)&&(t=t||Exe,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if($pe(u)&&l!=="_self")return jxe(t||"",l),new IQ(null);const f=window.open(t||"",l,d);Qr(f,e,"popup-blocked");try{f.focus()}catch{}return new IQ(f)}function jxe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kxe="__/auth/handler",_xe="emulator/auth/handler",Sxe=encodeURIComponent("fac");async function OQ(e,t,r,a,n,s){Qr(e.config.authDomain,e,"auth-domain-config-required"),Qr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:a,v:Wg,eventId:n};if(t instanceof kZ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Ame(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(t instanceof hN){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),u=c?`#${Sxe}=${encodeURIComponent(c)}`:"";return`${Bxe(e)}?${dN(l).slice(1)}${u}`}function Bxe({config:e}){return e.emulator?OP(e,_xe):`https://${e.authDomain}/${kxe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB="webStorageSupport";class Txe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FZ,this._completeRedirectFn=txe,this._overrideRedirectResult=Jge}async _openPopup(t,r,a,n){var o;Rh((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await OQ(t,r,a,pO(),n);return Cxe(t,s,LP())}async _openRedirect(t,r,a,n){await this._originValidation(t);const s=await OQ(t,r,a,pO(),n);return Fge(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:n,promise:s}=this.eventManagers[r];return n?Promise.resolve(n):(Rh(s,"If manager is not set, promise should be"),s)}const a=this.initAndGetManager(t);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(t){const r=await vxe(t),a=new axe(t);return r.register("authEvent",n=>(Qr(n==null?void 0:n.authEvent,t,"invalid-auth-event"),{status:a.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=r,a}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(xB,{type:xB},n=>{var o;const s=(o=n==null?void 0:n[0])==null?void 0:o[xB];s!==void 0&&r(!!s),ef(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=lxe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return wZ()||pZ()||DP()}}const Ixe=Txe;var FQ="@firebase/auth",DQ="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oxe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fxe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dxe(e){Qm(new Dh("auth",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=a.options;Qr(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NZ(e)},u=new Ype(a,n,s,c);return oge(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,a)=>{t.getProvider("auth-internal").initialize()})),Qm(new Dh("auth-internal",t=>{const r=Xg(t.getProvider("auth").getImmediate());return(a=>new Oxe(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),td(FQ,DQ,Fxe(e)),td(FQ,DQ,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pxe=300,Rxe=tZ("authIdTokenMaxAge")||Pxe;let PQ=null;const Lxe=e=>async t=>{const r=t&&await t.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>Rxe)return;const n=r==null?void 0:r.token;PQ!==n&&(PQ=n,await fetch(e,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function QZ(e=R_()){const t=fN(e,"auth");if(t.isInitialized())return t.getImmediate();const r=ige(e,{popupRedirectResolver:Ixe,persistence:[zge,Tge,FZ]}),a=tZ("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(a,location.origin);if(location.origin===s.origin){const o=Lxe(s.toString());kge(r,o,()=>o(r.currentUser)),jge(r,l=>o(l))}}const n=ZJ("auth");return n&&lge(r,`http://${n}`),r}function Mxe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}Jpe({loadJS(e){return new Promise((t,r)=>{const a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=n=>{const s=dA("internal-error");s.customData=n,r(s)},a.type="text/javascript",a.charset="UTF-8",Mxe().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dxe("Browser");var Uxe="firebase",Qxe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */td(Uxe,Qxe,"app");var RQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sm,HZ;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,_){function S(){}S.prototype=_.prototype,C.D=_.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(L,P,k){for(var M=Array(arguments.length-2),U=2;U<arguments.length;U++)M[U-2]=arguments[U];return _.prototype[P].apply(L,M)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(C,_,S){S||(S=0);var L=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)L[P]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(P=0;16>P;++P)L[P]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=C.g[0],S=C.g[1],P=C.g[2];var k=C.g[3],M=_+(k^S&(P^k))+L[0]+3614090360&4294967295;_=S+(M<<7&4294967295|M>>>25),M=k+(P^_&(S^P))+L[1]+3905402710&4294967295,k=_+(M<<12&4294967295|M>>>20),M=P+(S^k&(_^S))+L[2]+606105819&4294967295,P=k+(M<<17&4294967295|M>>>15),M=S+(_^P&(k^_))+L[3]+3250441966&4294967295,S=P+(M<<22&4294967295|M>>>10),M=_+(k^S&(P^k))+L[4]+4118548399&4294967295,_=S+(M<<7&4294967295|M>>>25),M=k+(P^_&(S^P))+L[5]+1200080426&4294967295,k=_+(M<<12&4294967295|M>>>20),M=P+(S^k&(_^S))+L[6]+2821735955&4294967295,P=k+(M<<17&4294967295|M>>>15),M=S+(_^P&(k^_))+L[7]+4249261313&4294967295,S=P+(M<<22&4294967295|M>>>10),M=_+(k^S&(P^k))+L[8]+1770035416&4294967295,_=S+(M<<7&4294967295|M>>>25),M=k+(P^_&(S^P))+L[9]+2336552879&4294967295,k=_+(M<<12&4294967295|M>>>20),M=P+(S^k&(_^S))+L[10]+4294925233&4294967295,P=k+(M<<17&4294967295|M>>>15),M=S+(_^P&(k^_))+L[11]+2304563134&4294967295,S=P+(M<<22&4294967295|M>>>10),M=_+(k^S&(P^k))+L[12]+1804603682&4294967295,_=S+(M<<7&4294967295|M>>>25),M=k+(P^_&(S^P))+L[13]+4254626195&4294967295,k=_+(M<<12&4294967295|M>>>20),M=P+(S^k&(_^S))+L[14]+2792965006&4294967295,P=k+(M<<17&4294967295|M>>>15),M=S+(_^P&(k^_))+L[15]+1236535329&4294967295,S=P+(M<<22&4294967295|M>>>10),M=_+(P^k&(S^P))+L[1]+4129170786&4294967295,_=S+(M<<5&4294967295|M>>>27),M=k+(S^P&(_^S))+L[6]+3225465664&4294967295,k=_+(M<<9&4294967295|M>>>23),M=P+(_^S&(k^_))+L[11]+643717713&4294967295,P=k+(M<<14&4294967295|M>>>18),M=S+(k^_&(P^k))+L[0]+3921069994&4294967295,S=P+(M<<20&4294967295|M>>>12),M=_+(P^k&(S^P))+L[5]+3593408605&4294967295,_=S+(M<<5&4294967295|M>>>27),M=k+(S^P&(_^S))+L[10]+38016083&4294967295,k=_+(M<<9&4294967295|M>>>23),M=P+(_^S&(k^_))+L[15]+3634488961&4294967295,P=k+(M<<14&4294967295|M>>>18),M=S+(k^_&(P^k))+L[4]+3889429448&4294967295,S=P+(M<<20&4294967295|M>>>12),M=_+(P^k&(S^P))+L[9]+568446438&4294967295,_=S+(M<<5&4294967295|M>>>27),M=k+(S^P&(_^S))+L[14]+3275163606&4294967295,k=_+(M<<9&4294967295|M>>>23),M=P+(_^S&(k^_))+L[3]+4107603335&4294967295,P=k+(M<<14&4294967295|M>>>18),M=S+(k^_&(P^k))+L[8]+1163531501&4294967295,S=P+(M<<20&4294967295|M>>>12),M=_+(P^k&(S^P))+L[13]+2850285829&4294967295,_=S+(M<<5&4294967295|M>>>27),M=k+(S^P&(_^S))+L[2]+4243563512&4294967295,k=_+(M<<9&4294967295|M>>>23),M=P+(_^S&(k^_))+L[7]+1735328473&4294967295,P=k+(M<<14&4294967295|M>>>18),M=S+(k^_&(P^k))+L[12]+2368359562&4294967295,S=P+(M<<20&4294967295|M>>>12),M=_+(S^P^k)+L[5]+4294588738&4294967295,_=S+(M<<4&4294967295|M>>>28),M=k+(_^S^P)+L[8]+2272392833&4294967295,k=_+(M<<11&4294967295|M>>>21),M=P+(k^_^S)+L[11]+1839030562&4294967295,P=k+(M<<16&4294967295|M>>>16),M=S+(P^k^_)+L[14]+4259657740&4294967295,S=P+(M<<23&4294967295|M>>>9),M=_+(S^P^k)+L[1]+2763975236&4294967295,_=S+(M<<4&4294967295|M>>>28),M=k+(_^S^P)+L[4]+1272893353&4294967295,k=_+(M<<11&4294967295|M>>>21),M=P+(k^_^S)+L[7]+4139469664&4294967295,P=k+(M<<16&4294967295|M>>>16),M=S+(P^k^_)+L[10]+3200236656&4294967295,S=P+(M<<23&4294967295|M>>>9),M=_+(S^P^k)+L[13]+681279174&4294967295,_=S+(M<<4&4294967295|M>>>28),M=k+(_^S^P)+L[0]+3936430074&4294967295,k=_+(M<<11&4294967295|M>>>21),M=P+(k^_^S)+L[3]+3572445317&4294967295,P=k+(M<<16&4294967295|M>>>16),M=S+(P^k^_)+L[6]+76029189&4294967295,S=P+(M<<23&4294967295|M>>>9),M=_+(S^P^k)+L[9]+3654602809&4294967295,_=S+(M<<4&4294967295|M>>>28),M=k+(_^S^P)+L[12]+3873151461&4294967295,k=_+(M<<11&4294967295|M>>>21),M=P+(k^_^S)+L[15]+530742520&4294967295,P=k+(M<<16&4294967295|M>>>16),M=S+(P^k^_)+L[2]+3299628645&4294967295,S=P+(M<<23&4294967295|M>>>9),M=_+(P^(S|~k))+L[0]+4096336452&4294967295,_=S+(M<<6&4294967295|M>>>26),M=k+(S^(_|~P))+L[7]+1126891415&4294967295,k=_+(M<<10&4294967295|M>>>22),M=P+(_^(k|~S))+L[14]+2878612391&4294967295,P=k+(M<<15&4294967295|M>>>17),M=S+(k^(P|~_))+L[5]+4237533241&4294967295,S=P+(M<<21&4294967295|M>>>11),M=_+(P^(S|~k))+L[12]+1700485571&4294967295,_=S+(M<<6&4294967295|M>>>26),M=k+(S^(_|~P))+L[3]+2399980690&4294967295,k=_+(M<<10&4294967295|M>>>22),M=P+(_^(k|~S))+L[10]+4293915773&4294967295,P=k+(M<<15&4294967295|M>>>17),M=S+(k^(P|~_))+L[1]+2240044497&4294967295,S=P+(M<<21&4294967295|M>>>11),M=_+(P^(S|~k))+L[8]+1873313359&4294967295,_=S+(M<<6&4294967295|M>>>26),M=k+(S^(_|~P))+L[15]+4264355552&4294967295,k=_+(M<<10&4294967295|M>>>22),M=P+(_^(k|~S))+L[6]+2734768916&4294967295,P=k+(M<<15&4294967295|M>>>17),M=S+(k^(P|~_))+L[13]+1309151649&4294967295,S=P+(M<<21&4294967295|M>>>11),M=_+(P^(S|~k))+L[4]+4149444226&4294967295,_=S+(M<<6&4294967295|M>>>26),M=k+(S^(_|~P))+L[11]+3174756917&4294967295,k=_+(M<<10&4294967295|M>>>22),M=P+(_^(k|~S))+L[2]+718787259&4294967295,P=k+(M<<15&4294967295|M>>>17),M=S+(k^(P|~_))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(P+(M<<21&4294967295|M>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+k&4294967295}a.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var S=_-this.blockSize,L=this.B,P=this.h,k=0;k<_;){if(P==0)for(;k<=S;)n(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<_;)if(L[P++]=C.charCodeAt(k++),P==this.blockSize){n(this,L),P=0;break}}else for(;k<_;)if(L[P++]=C[k++],P==this.blockSize){n(this,L),P=0;break}}this.h=P,this.o+=_},a.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var S=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=S&255,S/=256;for(this.u(C),C=Array(16),_=S=0;4>_;++_)for(var L=0;32>L;L+=8)C[S++]=this.g[_]>>>L&255;return C};function s(C,_){var S=l;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=_(C)}function o(C,_){this.h=_;for(var S=[],L=!0,P=C.length-1;0<=P;P--){var k=C[P]|0;L&&k==_||(S[P]=k,L=!1)}this.g=S}var l={};function c(C){return-128<=C&&128>C?s(C,function(_){return new o([_|0],0>_?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return v(u(-C));for(var _=[],S=1,L=0;C>=S;L++)_[L]=C/S|0,S*=4294967296;return new o(_,0)}function d(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return v(d(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(_,8)),L=f,P=0;P<C.length;P+=8){var k=Math.min(8,C.length-P),M=parseInt(C.substring(P,P+k),_);8>k?(k=u(Math.pow(_,k)),L=L.j(k).add(u(M))):(L=L.j(S),L=L.add(u(M)))}return L}var f=c(0),h=c(1),m=c(16777216);e=o.prototype,e.m=function(){if(x(this))return-v(this).m();for(var C=0,_=1,S=0;S<this.g.length;S++){var L=this.i(S);C+=(0<=L?L:4294967296+L)*_,_*=4294967296}return C},e.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(g(this))return"0";if(x(this))return"-"+v(this).toString(C);for(var _=u(Math.pow(C,6)),S=this,L="";;){var P=O(S,_).g;S=y(S,P.j(_));var k=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=P,g(S))return k+L;for(;6>k.length;)k="0"+k;L=k+L}},e.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function g(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function x(C){return C.h==-1}e.l=function(C){return C=y(this,C),x(C)?-1:g(C)?0:1};function v(C){for(var _=C.g.length,S=[],L=0;L<_;L++)S[L]=~C.g[L];return new o(S,~C.h).add(h)}e.abs=function(){return x(this)?v(this):this},e.add=function(C){for(var _=Math.max(this.g.length,C.g.length),S=[],L=0,P=0;P<=_;P++){var k=L+(this.i(P)&65535)+(C.i(P)&65535),M=(k>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);L=M>>>16,k&=65535,M&=65535,S[P]=M<<16|k}return new o(S,S[S.length-1]&-2147483648?-1:0)};function y(C,_){return C.add(v(_))}e.j=function(C){if(g(this)||g(C))return f;if(x(this))return x(C)?v(this).j(v(C)):v(v(this).j(C));if(x(C))return v(this.j(v(C)));if(0>this.l(m)&&0>C.l(m))return u(this.m()*C.m());for(var _=this.g.length+C.g.length,S=[],L=0;L<2*_;L++)S[L]=0;for(L=0;L<this.g.length;L++)for(var P=0;P<C.g.length;P++){var k=this.i(L)>>>16,M=this.i(L)&65535,U=C.i(P)>>>16,z=C.i(P)&65535;S[2*L+2*P]+=M*z,w(S,2*L+2*P),S[2*L+2*P+1]+=k*z,w(S,2*L+2*P+1),S[2*L+2*P+1]+=M*U,w(S,2*L+2*P+1),S[2*L+2*P+2]+=k*U,w(S,2*L+2*P+2)}for(L=0;L<_;L++)S[L]=S[2*L+1]<<16|S[2*L];for(L=_;L<2*_;L++)S[L]=0;return new o(S,0)};function w(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function j(C,_){this.g=C,this.h=_}function O(C,_){if(g(_))throw Error("division by zero");if(g(C))return new j(f,f);if(x(C))return _=O(v(C),_),new j(v(_.g),v(_.h));if(x(_))return _=O(C,v(_)),new j(v(_.g),_.h);if(30<C.g.length){if(x(C)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var S=h,L=_;0>=L.l(C);)S=B(S),L=B(L);var P=T(S,1),k=T(L,1);for(L=T(L,2),S=T(S,2);!g(L);){var M=k.add(L);0>=M.l(C)&&(P=P.add(S),k=M),L=T(L,1),S=T(S,1)}return _=y(C,P.j(_)),new j(P,_)}for(P=f;0<=C.l(_);){for(S=Math.max(1,Math.floor(C.m()/_.m())),L=Math.ceil(Math.log(S)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),k=u(S),M=k.j(_);x(M)||0<M.l(C);)S-=L,k=u(S),M=k.j(_);g(k)&&(k=h),P=P.add(k),C=y(C,M)}return new j(P,C)}e.A=function(C){return O(this,C).h},e.and=function(C){for(var _=Math.max(this.g.length,C.g.length),S=[],L=0;L<_;L++)S[L]=this.i(L)&C.i(L);return new o(S,this.h&C.h)},e.or=function(C){for(var _=Math.max(this.g.length,C.g.length),S=[],L=0;L<_;L++)S[L]=this.i(L)|C.i(L);return new o(S,this.h|C.h)},e.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),S=[],L=0;L<_;L++)S[L]=this.i(L)^C.i(L);return new o(S,this.h^C.h)};function B(C){for(var _=C.g.length+1,S=[],L=0;L<_;L++)S[L]=C.i(L)<<1|C.i(L-1)>>>31;return new o(S,C.h)}function T(C,_){var S=_>>5;_%=32;for(var L=C.g.length-S,P=[],k=0;k<L;k++)P[k]=0<_?C.i(k+S)>>>_|C.i(k+S+1)<<32-_:C.i(k+S);return new o(P,C.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,HZ=a,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Sm=o}).apply(typeof RQ<"u"?RQ:typeof self<"u"?self:typeof window<"u"?window:{});var nC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zZ,i2,VZ,U5,bO,$Z,GZ,qZ;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(D,se,ue){return D==Array.prototype||D==Object.prototype||(D[se]=ue.value),D};function r(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof nC=="object"&&nC];for(var se=0;se<D.length;++se){var ue=D[se];if(ue&&ue.Math==Math)return ue}throw Error("Cannot find global object")}var a=r(this);function n(D,se){if(se)e:{var ue=a;D=D.split(".");for(var _e=0;_e<D.length-1;_e++){var tt=D[_e];if(!(tt in ue))break e;ue=ue[tt]}D=D[D.length-1],_e=ue[D],se=se(_e),se!=_e&&se!=null&&t(ue,D,{configurable:!0,writable:!0,value:se})}}function s(D,se){D instanceof String&&(D+="");var ue=0,_e=!1,tt={next:function(){if(!_e&&ue<D.length){var ft=ue++;return{value:se(ft,D[ft]),done:!1}}return _e=!0,{done:!0,value:void 0}}};return tt[Symbol.iterator]=function(){return tt},tt}n("Array.prototype.values",function(D){return D||function(){return s(this,function(se,ue){return ue})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(D){var se=typeof D;return se=se!="object"?se:D?Array.isArray(D)?"array":se:"null",se=="array"||se=="object"&&typeof D.length=="number"}function u(D){var se=typeof D;return se=="object"&&D!=null||se=="function"}function d(D,se,ue){return D.call.apply(D.bind,arguments)}function f(D,se,ue){if(!D)throw Error();if(2<arguments.length){var _e=Array.prototype.slice.call(arguments,2);return function(){var tt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(tt,_e),D.apply(se,tt)}}return function(){return D.apply(se,arguments)}}function h(D,se,ue){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function m(D,se){var ue=Array.prototype.slice.call(arguments,1);return function(){var _e=ue.slice();return _e.push.apply(_e,arguments),D.apply(this,_e)}}function g(D,se){function ue(){}ue.prototype=se.prototype,D.aa=se.prototype,D.prototype=new ue,D.prototype.constructor=D,D.Qb=function(_e,tt,ft){for(var Qt=Array(arguments.length-2),Br=2;Br<arguments.length;Br++)Qt[Br-2]=arguments[Br];return se.prototype[tt].apply(_e,Qt)}}function x(D){const se=D.length;if(0<se){const ue=Array(se);for(let _e=0;_e<se;_e++)ue[_e]=D[_e];return ue}return[]}function v(D,se){for(let ue=1;ue<arguments.length;ue++){const _e=arguments[ue];if(c(_e)){const tt=D.length||0,ft=_e.length||0;D.length=tt+ft;for(let Qt=0;Qt<ft;Qt++)D[tt+Qt]=_e[Qt]}else D.push(_e)}}class y{constructor(se,ue){this.i=se,this.j=ue,this.h=0,this.g=null}get(){let se;return 0<this.h?(this.h--,se=this.g,this.g=se.next,se.next=null):se=this.i(),se}}function w(D){return/^[\s\xa0]*$/.test(D)}function j(){var D=l.navigator;return D&&(D=D.userAgent)?D:""}function O(D){return O[" "](D),D}O[" "]=function(){};var B=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function T(D,se,ue){for(const _e in D)se.call(ue,D[_e],_e,D)}function C(D,se){for(const ue in D)se.call(void 0,D[ue],ue,D)}function _(D){const se={};for(const ue in D)se[ue]=D[ue];return se}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(D,se){let ue,_e;for(let tt=1;tt<arguments.length;tt++){_e=arguments[tt];for(ue in _e)D[ue]=_e[ue];for(let ft=0;ft<S.length;ft++)ue=S[ft],Object.prototype.hasOwnProperty.call(_e,ue)&&(D[ue]=_e[ue])}}function P(D){var se=1;D=D.split(":");const ue=[];for(;0<se&&D.length;)ue.push(D.shift()),se--;return D.length&&ue.push(D.join(":")),ue}function k(D){l.setTimeout(()=>{throw D},0)}function M(){var D=Y;let se=null;return D.g&&(se=D.g,D.g=D.g.next,D.g||(D.h=null),se.next=null),se}class U{constructor(){this.h=this.g=null}add(se,ue){const _e=z.get();_e.set(se,ue),this.h?this.h.next=_e:this.g=_e,this.h=_e}}var z=new y(()=>new Q,D=>D.reset());class Q{constructor(){this.next=this.g=this.h=null}set(se,ue){this.h=se,this.g=ue,this.next=null}reset(){this.next=this.g=this.h=null}}let q,V=!1,Y=new U,K=()=>{const D=l.Promise.resolve(void 0);q=()=>{D.then(J)}};var J=()=>{for(var D;D=M();){try{D.h.call(D.g)}catch(ue){k(ue)}var se=z;se.j(D),100>se.h&&(se.h++,D.next=se.g,se.g=D)}V=!1};function R(){this.s=this.s,this.C=this.C}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(D,se){this.type=D,this.g=this.target=se,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var D=!1,se=Object.defineProperty({},"passive",{get:function(){D=!0}});try{const ue=()=>{};l.addEventListener("test",ue,se),l.removeEventListener("test",ue,se)}catch{}return D}();function X(D,se){if(F.call(this,D?D.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,D){var ue=this.type=D.type,_e=D.changedTouches&&D.changedTouches.length?D.changedTouches[0]:null;if(this.target=D.target||D.srcElement,this.g=se,se=D.relatedTarget){if(B){e:{try{O(se.nodeName);var tt=!0;break e}catch{}tt=!1}tt||(se=null)}}else ue=="mouseover"?se=D.fromElement:ue=="mouseout"&&(se=D.toElement);this.relatedTarget=se,_e?(this.clientX=_e.clientX!==void 0?_e.clientX:_e.pageX,this.clientY=_e.clientY!==void 0?_e.clientY:_e.pageY,this.screenX=_e.screenX||0,this.screenY=_e.screenY||0):(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0),this.button=D.button,this.key=D.key||"",this.ctrlKey=D.ctrlKey,this.altKey=D.altKey,this.shiftKey=D.shiftKey,this.metaKey=D.metaKey,this.pointerId=D.pointerId||0,this.pointerType=typeof D.pointerType=="string"?D.pointerType:ne[D.pointerType]||"",this.state=D.state,this.i=D,D.defaultPrevented&&X.aa.h.call(this)}}g(X,F);var ne={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var D=this.i;D.preventDefault?D.preventDefault():D.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ae(D,se,ue,_e,tt){this.listener=D,this.proxy=null,this.src=se,this.type=ue,this.capture=!!_e,this.ha=tt,this.key=++ie,this.da=this.fa=!1}function Ae(D){D.da=!0,D.listener=null,D.proxy=null,D.src=null,D.ha=null}function ke(D){this.src=D,this.g={},this.h=0}ke.prototype.add=function(D,se,ue,_e,tt){var ft=D.toString();D=this.g[ft],D||(D=this.g[ft]=[],this.h++);var Qt=Re(D,se,_e,tt);return-1<Qt?(se=D[Qt],ue||(se.fa=!1)):(se=new ae(se,this.src,ft,!!_e,tt),se.fa=ue,D.push(se)),se};function re(D,se){var ue=se.type;if(ue in D.g){var _e=D.g[ue],tt=Array.prototype.indexOf.call(_e,se,void 0),ft;(ft=0<=tt)&&Array.prototype.splice.call(_e,tt,1),ft&&(Ae(se),D.g[ue].length==0&&(delete D.g[ue],D.h--))}}function Re(D,se,ue,_e){for(var tt=0;tt<D.length;++tt){var ft=D[tt];if(!ft.da&&ft.listener==se&&ft.capture==!!ue&&ft.ha==_e)return tt}return-1}var Le="closure_lm_"+(1e6*Math.random()|0),Te={};function de(D,se,ue,_e,tt){if(Array.isArray(se)){for(var ft=0;ft<se.length;ft++)de(D,se[ft],ue,_e,tt);return null}return ue=Ke(ue),D&&D[le]?D.K(se,ue,u(_e)?!!_e.capture:!1,tt):Ce(D,se,ue,!1,_e,tt)}function Ce(D,se,ue,_e,tt,ft){if(!se)throw Error("Invalid event type");var Qt=u(tt)?!!tt.capture:!!tt,Br=Pe(D);if(Br||(D[Le]=Br=new ke(D)),ue=Br.add(se,ue,_e,Qt,ft),ue.proxy)return ue;if(_e=me(),ue.proxy=_e,_e.src=D,_e.listener=ue,D.addEventListener)W||(tt=Qt),tt===void 0&&(tt=!1),D.addEventListener(se.toString(),_e,tt);else if(D.attachEvent)D.attachEvent(fe(se.toString()),_e);else if(D.addListener&&D.removeListener)D.addListener(_e);else throw Error("addEventListener and attachEvent are unavailable.");return ue}function me(){function D(ue){return se.call(D.src,D.listener,ue)}const se=be;return D}function ye(D,se,ue,_e,tt){if(Array.isArray(se))for(var ft=0;ft<se.length;ft++)ye(D,se[ft],ue,_e,tt);else _e=u(_e)?!!_e.capture:!!_e,ue=Ke(ue),D&&D[le]?(D=D.i,se=String(se).toString(),se in D.g&&(ft=D.g[se],ue=Re(ft,ue,_e,tt),-1<ue&&(Ae(ft[ue]),Array.prototype.splice.call(ft,ue,1),ft.length==0&&(delete D.g[se],D.h--)))):D&&(D=Pe(D))&&(se=D.g[se.toString()],D=-1,se&&(D=Re(se,ue,_e,tt)),(ue=-1<D?se[D]:null)&&oe(ue))}function oe(D){if(typeof D!="number"&&D&&!D.da){var se=D.src;if(se&&se[le])re(se.i,D);else{var ue=D.type,_e=D.proxy;se.removeEventListener?se.removeEventListener(ue,_e,D.capture):se.detachEvent?se.detachEvent(fe(ue),_e):se.addListener&&se.removeListener&&se.removeListener(_e),(ue=Pe(se))?(re(ue,D),ue.h==0&&(ue.src=null,se[Le]=null)):Ae(D)}}}function fe(D){return D in Te?Te[D]:Te[D]="on"+D}function be(D,se){if(D.da)D=!0;else{se=new X(se,this);var ue=D.listener,_e=D.ha||D.src;D.fa&&oe(D),D=ue.call(_e,se)}return D}function Pe(D){return D=D[Le],D instanceof ke?D:null}var $e="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ke(D){return typeof D=="function"?D:(D[$e]||(D[$e]=function(se){return D.handleEvent(se)}),D[$e])}function nt(){R.call(this),this.i=new ke(this),this.M=this,this.F=null}g(nt,R),nt.prototype[le]=!0,nt.prototype.removeEventListener=function(D,se,ue,_e){ye(this,D,se,ue,_e)};function He(D,se){var ue,_e=D.F;if(_e)for(ue=[];_e;_e=_e.F)ue.push(_e);if(D=D.M,_e=se.type||se,typeof se=="string")se=new F(se,D);else if(se instanceof F)se.target=se.target||D;else{var tt=se;se=new F(_e,D),L(se,tt)}if(tt=!0,ue)for(var ft=ue.length-1;0<=ft;ft--){var Qt=se.g=ue[ft];tt=it(Qt,_e,!0,se)&&tt}if(Qt=se.g=D,tt=it(Qt,_e,!0,se)&&tt,tt=it(Qt,_e,!1,se)&&tt,ue)for(ft=0;ft<ue.length;ft++)Qt=se.g=ue[ft],tt=it(Qt,_e,!1,se)&&tt}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var D=this.i,se;for(se in D.g){for(var ue=D.g[se],_e=0;_e<ue.length;_e++)Ae(ue[_e]);delete D.g[se],D.h--}}this.F=null},nt.prototype.K=function(D,se,ue,_e){return this.i.add(String(D),se,!1,ue,_e)},nt.prototype.L=function(D,se,ue,_e){return this.i.add(String(D),se,!0,ue,_e)};function it(D,se,ue,_e){if(se=D.i.g[String(se)],!se)return!0;se=se.concat();for(var tt=!0,ft=0;ft<se.length;++ft){var Qt=se[ft];if(Qt&&!Qt.da&&Qt.capture==ue){var Br=Qt.listener,ha=Qt.ha||Qt.src;Qt.fa&&re(D.i,Qt),tt=Br.call(ha,_e)!==!1&&tt}}return tt&&!_e.defaultPrevented}function xt(D,se,ue){if(typeof D=="function")ue&&(D=h(D,ue));else if(D&&typeof D.handleEvent=="function")D=h(D.handleEvent,D);else throw Error("Invalid listener argument");return 2147483647<Number(se)?-1:l.setTimeout(D,se||0)}function Et(D){D.g=xt(()=>{D.g=null,D.i&&(D.i=!1,Et(D))},D.l);const se=D.h;D.h=null,D.m.apply(null,se)}class gt extends R{constructor(se,ue){super(),this.m=se,this.l=ue,this.h=null,this.i=!1,this.g=null}j(se){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ve(D){R.call(this),this.h=D,this.g={}}g(Ve,R);var Bt=[];function dr(D){T(D.g,function(se,ue){this.g.hasOwnProperty(ue)&&oe(se)},D),D.g={}}Ve.prototype.N=function(){Ve.aa.N.call(this),dr(this)},Ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var er=l.JSON.stringify,Er=l.JSON.parse,$r=class{stringify(D){return l.JSON.stringify(D,void 0)}parse(D){return l.JSON.parse(D,void 0)}};function br(){}br.prototype.h=null;function kn(D){return D.h||(D.h=D.i())}function Pr(){}var Pa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fn(){F.call(this,"d")}g(Fn,F);function Rr(){F.call(this,"c")}g(Rr,F);var mr={},Yr=null;function ps(){return Yr=Yr||new nt}mr.La="serverreachability";function Ya(D){F.call(this,mr.La,D)}g(Ya,F);function Dn(D){const se=ps();He(se,new Ya(se))}mr.STAT_EVENT="statevent";function Rs(D,se){F.call(this,mr.STAT_EVENT,D),this.stat=se}g(Rs,F);function Zt(D){const se=ps();He(se,new Rs(se,D))}mr.Ma="timingevent";function xa(D,se){F.call(this,mr.Ma,D),this.size=se}g(xa,F);function la(D,se){if(typeof D!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){D()},se)}function Ia(){this.g=!0}Ia.prototype.xa=function(){this.g=!1};function Ka(D,se,ue,_e,tt,ft){D.info(function(){if(D.g)if(ft)for(var Qt="",Br=ft.split("&"),ha=0;ha<Br.length;ha++){var Gr=Br[ha].split("=");if(1<Gr.length){var La=Gr[0];Gr=Gr[1];var Za=La.split("_");Qt=2<=Za.length&&Za[1]=="type"?Qt+(La+"="+Gr+"&"):Qt+(La+"=redacted&")}}else Qt=null;else Qt=ft;return"XMLHTTP REQ ("+_e+") [attempt "+tt+"]: "+se+`
`+ue+`
`+Qt})}function Ja(D,se,ue,_e,tt,ft,Qt){D.info(function(){return"XMLHTTP RESP ("+_e+") [ attempt "+tt+"]: "+se+`
`+ue+`
`+ft+" "+Qt})}function we(D,se,ue,_e){D.info(function(){return"XMLHTTP TEXT ("+se+"): "+Oe(D,ue)+(_e?" "+_e:"")})}function Ue(D,se){D.info(function(){return"TIMEOUT: "+se})}Ia.prototype.info=function(){};function Oe(D,se){if(!D.g)return se;if(!se)return null;try{var ue=JSON.parse(se);if(ue){for(D=0;D<ue.length;D++)if(Array.isArray(ue[D])){var _e=ue[D];if(!(2>_e.length)){var tt=_e[1];if(Array.isArray(tt)&&!(1>tt.length)){var ft=tt[0];if(ft!="noop"&&ft!="stop"&&ft!="close")for(var Qt=1;Qt<tt.length;Qt++)tt[Qt]=""}}}}return er(ue)}catch{return se}}var De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ge={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},he;function Be(){}g(Be,br),Be.prototype.g=function(){return new XMLHttpRequest},Be.prototype.i=function(){return{}},he=new Be;function Qe(D,se,ue,_e){this.j=D,this.i=se,this.l=ue,this.R=_e||1,this.U=new Ve(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fe}function Fe(){this.i=null,this.g="",this.h=!1}var qe={},Xe={};function yt(D,se,ue){D.L=1,D.v=mu(ji(se)),D.m=ue,D.P=!0,wt(D,null)}function wt(D,se){D.F=Date.now(),Vt(D),D.A=ji(D.v);var ue=D.A,_e=D.R;Array.isArray(_e)||(_e=[String(_e)]),Sr(ue.i,"t",_e),D.C=0,ue=D.j.J,D.h=new Fe,D.g=ve(D.j,ue?se:null,!D.m),0<D.O&&(D.M=new gt(h(D.Y,D,D.g),D.O)),se=D.U,ue=D.g,_e=D.ca;var tt="readystatechange";Array.isArray(tt)||(tt&&(Bt[0]=tt.toString()),tt=Bt);for(var ft=0;ft<tt.length;ft++){var Qt=de(ue,tt[ft],_e||se.handleEvent,!1,se.h||se);if(!Qt)break;se.g[Qt.key]=Qt}se=D.H?_(D.H):{},D.m?(D.u||(D.u="POST"),se["Content-Type"]="application/x-www-form-urlencoded",D.g.ea(D.A,D.u,D.m,se)):(D.u="GET",D.g.ea(D.A,D.u,null,se)),Dn(),Ka(D.i,D.u,D.A,D.l,D.R,D.m)}Qe.prototype.ca=function(D){D=D.target;const se=this.M;se&&bs(D)==3?se.j():this.Y(D)},Qe.prototype.Y=function(D){try{if(D==this.g)e:{const Za=bs(this.g);var se=this.g.Ba();const Vl=this.g.Z();if(!(3>Za)&&(Za!=3||this.g&&(this.h.h||this.g.oa()||m0(this.g)))){this.J||Za!=4||se==7||(se==8||0>=Vl?Dn(3):Dn(2)),ea(this);var ue=this.g.Z();this.X=ue;t:if(Ht(this)){var _e=m0(this.g);D="";var tt=_e.length,ft=bs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ia(this),ta(this);var Qt="";break t}this.h.i=new l.TextDecoder}for(se=0;se<tt;se++)this.h.h=!0,D+=this.h.i.decode(_e[se],{stream:!(ft&&se==tt-1)});_e.length=0,this.h.g+=D,this.C=0,Qt=this.h.g}else Qt=this.g.oa();if(this.o=ue==200,Ja(this.i,this.u,this.A,this.l,this.R,Za,ue),this.o){if(this.T&&!this.K){t:{if(this.g){var Br,ha=this.g;if((Br=ha.g?ha.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Br)){var Gr=Br;break t}}Gr=null}if(ue=Gr)we(this.i,this.l,ue,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gs(this,ue);else{this.o=!1,this.s=3,Zt(12),ia(this),ta(this);break e}}if(this.P){ue=!0;let ns;for(;!this.J&&this.C<Qt.length;)if(ns=Tt(this,Qt),ns==Xe){Za==4&&(this.s=4,Zt(14),ue=!1),we(this.i,this.l,null,"[Incomplete Response]");break}else if(ns==qe){this.s=4,Zt(15),we(this.i,this.l,Qt,"[Invalid Chunk]"),ue=!1;break}else we(this.i,this.l,ns,null),gs(this,ns);if(Ht(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Za!=4||Qt.length!=0||this.h.h||(this.s=1,Zt(16),ue=!1),this.o=this.o&&ue,!ue)we(this.i,this.l,Qt,"[Invalid Chunked Response]"),ia(this),ta(this);else if(0<Qt.length&&!this.W){this.W=!0;var La=this.j;La.g==this&&La.ba&&!La.M&&(La.j.info("Great, no buffering proxy detected. Bytes received: "+Qt.length),yu(La),La.M=!0,Zt(11))}}else we(this.i,this.l,Qt,null),gs(this,Qt);Za==4&&ia(this),this.o&&!this.J&&(Za==4?wu(this.j,this):(this.o=!1,Vt(this)))}else xu(this.g),ue==400&&0<Qt.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),ia(this),ta(this)}}}catch{}finally{}};function Ht(D){return D.g?D.u=="GET"&&D.L!=2&&D.j.Ca:!1}function Tt(D,se){var ue=D.C,_e=se.indexOf(`
`,ue);return _e==-1?Xe:(ue=Number(se.substring(ue,_e)),isNaN(ue)?qe:(_e+=1,_e+ue>se.length?Xe:(se=se.slice(_e,_e+ue),D.C=_e+ue,se)))}Qe.prototype.cancel=function(){this.J=!0,ia(this)};function Vt(D){D.S=Date.now()+D.I,jr(D,D.I)}function jr(D,se){if(D.B!=null)throw Error("WatchDog timer not null");D.B=la(h(D.ba,D),se)}function ea(D){D.B&&(l.clearTimeout(D.B),D.B=null)}Qe.prototype.ba=function(){this.B=null;const D=Date.now();0<=D-this.S?(Ue(this.i,this.A),this.L!=2&&(Dn(),Zt(17)),ia(this),this.s=2,ta(this)):jr(this,this.S-D)};function ta(D){D.j.G==0||D.J||wu(D.j,D)}function ia(D){ea(D);var se=D.M;se&&typeof se.ma=="function"&&se.ma(),D.M=null,dr(D.U),D.g&&(se=D.g,D.g=null,se.abort(),se.ma())}function gs(D,se){try{var ue=D.j;if(ue.G!=0&&(ue.g==D||Ei(ue.h,D))){if(!D.K&&Ei(ue.h,D)&&ue.G==3){try{var _e=ue.Da.g.parse(se)}catch{_e=null}if(Array.isArray(_e)&&_e.length==3){var tt=_e;if(tt[0]==0){e:if(!ue.u){if(ue.g)if(ue.g.F+3e3<D.F)jc(ue),mf(ue);else break e;hd(ue),Zt(18)}}else ue.za=tt[1],0<ue.za-ue.T&&37500>tt[2]&&ue.F&&ue.v==0&&!ue.C&&(ue.C=la(h(ue.Za,ue),6e3));if(1>=Ls(ue.h)&&ue.ca){try{ue.ca()}catch{}ue.ca=void 0}}else zi(ue,11)}else if((D.K||ue.g==D)&&jc(ue),!w(se))for(tt=ue.Da.g.parse(se),se=0;se<tt.length;se++){let Gr=tt[se];if(ue.T=Gr[0],Gr=Gr[1],ue.G==2)if(Gr[0]=="c"){ue.K=Gr[1],ue.ia=Gr[2];const La=Gr[3];La!=null&&(ue.la=La,ue.j.info("VER="+ue.la));const Za=Gr[4];Za!=null&&(ue.Aa=Za,ue.j.info("SVER="+ue.Aa));const Vl=Gr[5];Vl!=null&&typeof Vl=="number"&&0<Vl&&(_e=1.5*Vl,ue.L=_e,ue.j.info("backChannelRequestTimeoutMs_="+_e)),_e=ue;const ns=D.g;if(ns){const Po=ns.g?ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var ft=_e.h;ft.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(ft.j=ft.l,ft.g=new Set,ft.h&&(vn(ft,ft.h),ft.h=null))}if(_e.D){const Nu=ns.g?ns.g.getResponseHeader("X-HTTP-Session-Id"):null;Nu&&(_e.ya=Nu,Ra(_e.I,_e.D,Nu))}}ue.G=3,ue.l&&ue.l.ua(),ue.ba&&(ue.R=Date.now()-D.F,ue.j.info("Handshake RTT: "+ue.R+"ms")),_e=ue;var Qt=D;if(_e.qa=ee(_e,_e.J?_e.ia:null,_e.W),Qt.K){oi(_e.h,Qt);var Br=Qt,ha=_e.L;ha&&(Br.I=ha),Br.B&&(ea(Br),Vt(Br)),_e.g=Qt}else gf(_e);0<ue.i.length&&pf(ue)}else Gr[0]!="stop"&&Gr[0]!="close"||zi(ue,7);else ue.G==3&&(Gr[0]=="stop"||Gr[0]=="close"?Gr[0]=="stop"?zi(ue,7):Cc(ue):Gr[0]!="noop"&&ue.l&&ue.l.ta(Gr),ue.v=0)}}Dn(4)}catch{}}var To=class{constructor(D,se){this.g=D,this.map=se}};function xs(D){this.l=D||10,l.PerformanceNavigationTiming?(D=l.performance.getEntriesByType("navigation"),D=0<D.length&&(D[0].nextHopProtocol=="hq"||D[0].nextHopProtocol=="h2")):D=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=D?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ii(D){return D.h?!0:D.g?D.g.size>=D.j:!1}function Ls(D){return D.h?1:D.g?D.g.size:0}function Ei(D,se){return D.h?D.h==se:D.g?D.g.has(se):!1}function vn(D,se){D.g?D.g.add(se):D.h=se}function oi(D,se){D.h&&D.h==se?D.h=null:D.g&&D.g.has(se)&&D.g.delete(se)}xs.prototype.cancel=function(){if(this.i=ff(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const D of this.g.values())D.cancel();this.g.clear()}};function ff(D){if(D.h!=null)return D.i.concat(D.h.D);if(D.g!=null&&D.g.size!==0){let se=D.i;for(const ue of D.g.values())se=se.concat(ue.D);return se}return x(D.i)}function f0(D){if(D.V&&typeof D.V=="function")return D.V();if(typeof Map<"u"&&D instanceof Map||typeof Set<"u"&&D instanceof Set)return Array.from(D.values());if(typeof D=="string")return D.split("");if(c(D)){for(var se=[],ue=D.length,_e=0;_e<ue;_e++)se.push(D[_e]);return se}se=[],ue=0;for(_e in D)se[ue++]=D[_e];return se}function fu(D){if(D.na&&typeof D.na=="function")return D.na();if(!D.V||typeof D.V!="function"){if(typeof Map<"u"&&D instanceof Map)return Array.from(D.keys());if(!(typeof Set<"u"&&D instanceof Set)){if(c(D)||typeof D=="string"){var se=[];D=D.length;for(var ue=0;ue<D;ue++)se.push(ue);return se}se=[],ue=0;for(const _e in D)se[ue++]=_e;return se}}}function BA(D,se){if(D.forEach&&typeof D.forEach=="function")D.forEach(se,void 0);else if(c(D)||typeof D=="string")Array.prototype.forEach.call(D,se,void 0);else for(var ue=fu(D),_e=f0(D),tt=_e.length,ft=0;ft<tt;ft++)se.call(void 0,_e[ft],ue&&ue[ft],D)}var Ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Af(D,se){if(D){D=D.split("&");for(var ue=0;ue<D.length;ue++){var _e=D[ue].indexOf("="),tt=null;if(0<=_e){var ft=D[ue].substring(0,_e);tt=D[ue].substring(_e+1)}else ft=D[ue];se(ft,tt?decodeURIComponent(tt.replace(/\+/g," ")):"")}}}function ja(D){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,D instanceof ja){this.h=D.h,Au(this,D.j),this.o=D.o,this.g=D.g,hu(this,D.s),this.l=D.l;var se=D.i,ue=new Ll;ue.i=se.i,se.g&&(ue.g=new Map(se.g),ue.h=se.h),Rl(this,ue),this.m=D.m}else D&&(se=String(D).match(Ci))?(this.h=!1,Au(this,se[1]||"",!0),this.o=Io(se[2]||""),this.g=Io(se[3]||"",!0),hu(this,se[4]),this.l=Io(se[5]||"",!0),Rl(this,se[6]||"",!0),this.m=Io(se[7]||"")):(this.h=!1,this.i=new Ll(null,this.h))}ja.prototype.toString=function(){var D=[],se=this.j;se&&D.push(bc(se,TA,!0),":");var ue=this.g;return(ue||se=="file")&&(D.push("//"),(se=this.o)&&D.push(bc(se,TA,!0),"@"),D.push(encodeURIComponent(String(ue)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ue=this.s,ue!=null&&D.push(":",String(ue))),(ue=this.l)&&(this.g&&ue.charAt(0)!="/"&&D.push("/"),D.push(bc(ue,ue.charAt(0)=="/"?yc:IA,!0))),(ue=this.i.toString())&&D.push("?",ue),(ue=this.m)&&D.push("#",bc(ue,wc)),D.join("")};function ji(D){return new ja(D)}function Au(D,se,ue){D.j=ue?Io(se,!0):se,D.j&&(D.j=D.j.replace(/:$/,""))}function hu(D,se){if(se){if(se=Number(se),isNaN(se)||0>se)throw Error("Bad port number "+se);D.s=se}else D.s=null}function Rl(D,se,ue){se instanceof Ll?(D.i=se,h0(D.i,D.h)):(ue||(se=bc(se,hf)),D.i=new Ll(se,D.h))}function Ra(D,se,ue){D.i.set(se,ue)}function mu(D){return Ra(D,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),D}function Io(D,se){return D?se?decodeURI(D.replace(/%25/g,"%2525")):decodeURIComponent(D):""}function bc(D,se,ue){return typeof D=="string"?(D=encodeURI(D).replace(se,A0),ue&&(D=D.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D):null}function A0(D){return D=D.charCodeAt(0),"%"+(D>>4&15).toString(16)+(D&15).toString(16)}var TA=/[#\/\?@]/g,IA=/[#\?:]/g,yc=/[#\?]/g,hf=/[#\?@]/g,wc=/#/g;function Ll(D,se){this.h=this.g=null,this.i=D||null,this.j=!!se}function cn(D){D.g||(D.g=new Map,D.h=0,D.i&&Af(D.i,function(se,ue){D.add(decodeURIComponent(se.replace(/\+/g," ")),ue)}))}e=Ll.prototype,e.add=function(D,se){cn(this),this.i=null,D=Ul(this,D);var ue=this.g.get(D);return ue||this.g.set(D,ue=[]),ue.push(se),this.h+=1,this};function Nc(D,se){cn(D),se=Ul(D,se),D.g.has(se)&&(D.i=null,D.h-=D.g.get(se).length,D.g.delete(se))}function Ml(D,se){return cn(D),se=Ul(D,se),D.g.has(se)}e.forEach=function(D,se){cn(this),this.g.forEach(function(ue,_e){ue.forEach(function(tt){D.call(se,tt,_e,this)},this)},this)},e.na=function(){cn(this);const D=Array.from(this.g.values()),se=Array.from(this.g.keys()),ue=[];for(let _e=0;_e<se.length;_e++){const tt=D[_e];for(let ft=0;ft<tt.length;ft++)ue.push(se[_e])}return ue},e.V=function(D){cn(this);let se=[];if(typeof D=="string")Ml(this,D)&&(se=se.concat(this.g.get(Ul(this,D))));else{D=Array.from(this.g.values());for(let ue=0;ue<D.length;ue++)se=se.concat(D[ue])}return se},e.set=function(D,se){return cn(this),this.i=null,D=Ul(this,D),Ml(this,D)&&(this.h-=this.g.get(D).length),this.g.set(D,[se]),this.h+=1,this},e.get=function(D,se){return D?(D=this.V(D),0<D.length?String(D[0]):se):se};function Sr(D,se,ue){Nc(D,se),0<ue.length&&(D.i=null,D.g.set(Ul(D,se),x(ue)),D.h+=ue.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const D=[],se=Array.from(this.g.keys());for(var ue=0;ue<se.length;ue++){var _e=se[ue];const ft=encodeURIComponent(String(_e)),Qt=this.V(_e);for(_e=0;_e<Qt.length;_e++){var tt=ft;Qt[_e]!==""&&(tt+="="+encodeURIComponent(String(Qt[_e]))),D.push(tt)}}return this.i=D.join("&")};function Ul(D,se){return se=String(se),D.j&&(se=se.toLowerCase()),se}function h0(D,se){se&&!D.j&&(cn(D),D.i=null,D.g.forEach(function(ue,_e){var tt=_e.toLowerCase();_e!=tt&&(Nc(this,_e),Sr(this,tt,ue))},D)),D.j=se}function Ui(D,se){const ue=new Ia;if(l.Image){const _e=new Image;_e.onload=m(co,ue,"TestLoadImage: loaded",!0,se,_e),_e.onerror=m(co,ue,"TestLoadImage: error",!1,se,_e),_e.onabort=m(co,ue,"TestLoadImage: abort",!1,se,_e),_e.ontimeout=m(co,ue,"TestLoadImage: timeout",!1,se,_e),l.setTimeout(function(){_e.ontimeout&&_e.ontimeout()},1e4),_e.src=D}else se(!1)}function Oo(D,se){const ue=new Ia,_e=new AbortController,tt=setTimeout(()=>{_e.abort(),co(ue,"TestPingServer: timeout",!1,se)},1e4);fetch(D,{signal:_e.signal}).then(ft=>{clearTimeout(tt),ft.ok?co(ue,"TestPingServer: ok",!0,se):co(ue,"TestPingServer: server error",!1,se)}).catch(()=>{clearTimeout(tt),co(ue,"TestPingServer: error",!1,se)})}function co(D,se,ue,_e,tt){try{tt&&(tt.onload=null,tt.onerror=null,tt.onabort=null,tt.ontimeout=null),_e(ue)}catch{}}function Ql(){this.g=new $r}function Fo(D,se,ue){const _e=ue||"";try{BA(D,function(tt,ft){let Qt=tt;u(tt)&&(Qt=er(tt)),se.push(_e+ft+"="+encodeURIComponent(Qt))})}catch(tt){throw se.push(_e+"type="+encodeURIComponent("_badmap")),tt}}function pu(D){this.l=D.Ub||null,this.j=D.eb||!1}g(pu,br),pu.prototype.g=function(){return new Ec(this.l,this.j)},pu.prototype.i=function(D){return function(){return D}}({});function Ec(D,se){nt.call(this),this.D=D,this.o=se,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Ec,nt),e=Ec.prototype,e.open=function(D,se){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=D,this.A=se,this.readyState=1,Qi(this)},e.send=function(D){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const se={headers:this.u,method:this.B,credentials:this.m,cache:void 0};D&&(se.body=D),(this.D||l).fetch(new Request(this.A,se)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},e.Sa=function(D){if(this.g&&(this.l=D,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=D.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")D.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in D){if(this.j=D.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;OA(this)}else D.text().then(this.Ra.bind(this),this.ga.bind(this))};function OA(D){D.j.read().then(D.Pa.bind(D)).catch(D.ga.bind(D))}e.Pa=function(D){if(this.g){if(this.o&&D.value)this.response.push(D.value);else if(!this.o){var se=D.value?D.value:new Uint8Array(0);(se=this.v.decode(se,{stream:!D.done}))&&(this.response=this.responseText+=se)}D.done?Do(this):Qi(this),this.readyState==3&&OA(this)}},e.Ra=function(D){this.g&&(this.response=this.responseText=D,Do(this))},e.Qa=function(D){this.g&&(this.response=D,Do(this))},e.ga=function(){this.g&&Do(this)};function Do(D){D.readyState=4,D.l=null,D.j=null,D.v=null,Qi(D)}e.setRequestHeader=function(D,se){this.u.append(D,se)},e.getResponseHeader=function(D){return this.h&&this.h.get(D.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const D=[],se=this.h.entries();for(var ue=se.next();!ue.done;)ue=ue.value,D.push(ue[0]+": "+ue[1]),ue=se.next();return D.join(`\r
`)};function Qi(D){D.onreadystatechange&&D.onreadystatechange.call(D)}Object.defineProperty(Ec.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(D){this.m=D?"include":"same-origin"}});function Hl(D){let se="";return T(D,function(ue,_e){se+=_e,se+=":",se+=ue,se+=`\r
`}),se}function vs(D,se,ue){e:{for(_e in ue){var _e=!1;break e}_e=!0}_e||(ue=Hl(ue),typeof D=="string"?ue!=null&&encodeURIComponent(String(ue)):Ra(D,se,ue))}function Aa(D){nt.call(this),this.headers=new Map,this.o=D||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Aa,nt);var gu=/^https?$/i,zl=["POST","PUT"];e=Aa.prototype,e.Ha=function(D){this.J=D},e.ea=function(D,se,ue,_e){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+D);se=se?se.toUpperCase():"GET",this.D=D,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():he.g(),this.v=this.o?kn(this.o):kn(he),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(se,String(D),!0),this.B=!1}catch(ft){FA(this,ft);return}if(D=ue||"",ue=new Map(this.headers),_e)if(Object.getPrototypeOf(_e)===Object.prototype)for(var tt in _e)ue.set(tt,_e[tt]);else if(typeof _e.keys=="function"&&typeof _e.get=="function")for(const ft of _e.keys())ue.set(ft,_e.get(ft));else throw Error("Unknown input type for opt_headers: "+String(_e));_e=Array.from(ue.keys()).find(ft=>ft.toLowerCase()=="content-type"),tt=l.FormData&&D instanceof l.FormData,!(0<=Array.prototype.indexOf.call(zl,se,void 0))||_e||tt||ue.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ft,Qt]of ue)this.g.setRequestHeader(ft,Qt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hi(this),this.u=!0,this.g.send(D),this.u=!1}catch(ft){FA(this,ft)}};function FA(D,se){D.h=!1,D.g&&(D.j=!0,D.g.abort(),D.j=!1),D.l=se,D.m=5,cd(D),gl(D)}function cd(D){D.A||(D.A=!0,He(D,"complete"),He(D,"error"))}e.abort=function(D){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=D||7,He(this,"complete"),He(this,"abort"),gl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gl(this,!0)),Aa.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ud(this):this.bb())},e.bb=function(){ud(this)};function ud(D){if(D.h&&typeof o<"u"&&(!D.v[1]||bs(D)!=4||D.Z()!=2)){if(D.u&&bs(D)==4)xt(D.Ea,0,D);else if(He(D,"readystatechange"),bs(D)==4){D.h=!1;try{const Qt=D.Z();e:switch(Qt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var se=!0;break e;default:se=!1}var ue;if(!(ue=se)){var _e;if(_e=Qt===0){var tt=String(D.D).match(Ci)[1]||null;!tt&&l.self&&l.self.location&&(tt=l.self.location.protocol.slice(0,-1)),_e=!gu.test(tt?tt.toLowerCase():"")}ue=_e}if(ue)He(D,"complete"),He(D,"success");else{D.m=6;try{var ft=2<bs(D)?D.g.statusText:""}catch{ft=""}D.l=ft+" ["+D.Z()+"]",cd(D)}}finally{gl(D)}}}}function gl(D,se){if(D.g){Hi(D);const ue=D.g,_e=D.v[0]?()=>{}:null;D.g=null,D.v=null,se||He(D,"ready");try{ue.onreadystatechange=_e}catch{}}}function Hi(D){D.I&&(l.clearTimeout(D.I),D.I=null)}e.isActive=function(){return!!this.g};function bs(D){return D.g?D.g.readyState:0}e.Z=function(){try{return 2<bs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(D){if(this.g){var se=this.g.responseText;return D&&se.indexOf(D)==0&&(se=se.substring(D.length)),Er(se)}};function m0(D){try{if(!D.g)return null;if("response"in D.g)return D.g.response;switch(D.H){case"":case"text":return D.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in D.g)return D.g.mozResponseArrayBuffer}return null}catch{return null}}function xu(D){const se={};D=(D.g&&2<=bs(D)&&D.g.getAllResponseHeaders()||"").split(`\r
`);for(let _e=0;_e<D.length;_e++){if(w(D[_e]))continue;var ue=P(D[_e]);const tt=ue[0];if(ue=ue[1],typeof ue!="string")continue;ue=ue.trim();const ft=se[tt]||[];se[tt]=ft,ft.push(ue)}C(se,function(_e){return _e.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(D,se,ue){return ue&&ue.internalChannelParams&&ue.internalChannelParams[D]||se}function vu(D){this.Aa=0,this.i=[],this.j=new Ia,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ki("failFast",!1,D),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ki("baseRetryDelayMs",5e3,D),this.cb=ki("retryDelaySeedMs",1e4,D),this.Wa=ki("forwardChannelMaxRetries",2,D),this.wa=ki("forwardChannelRequestTimeoutMs",2e4,D),this.pa=D&&D.xmlHttpFactory||void 0,this.Xa=D&&D.Tb||void 0,this.Ca=D&&D.useFetchStreams||!1,this.L=void 0,this.J=D&&D.supportsCrossDomainXhr||!1,this.K="",this.h=new xs(D&&D.concurrentRequestLimit),this.Da=new Ql,this.P=D&&D.fastHandshake||!1,this.O=D&&D.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=D&&D.Rb||!1,D&&D.xa&&this.j.xa(),D&&D.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&D&&D.detectBufferingProxy||!1,this.ja=void 0,D&&D.longPollingTimeout&&0<D.longPollingTimeout&&(this.ja=D.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=vu.prototype,e.la=8,e.G=1,e.connect=function(D,se,ue,_e){Zt(0),this.W=D,this.H=se||{},ue&&_e!==void 0&&(this.H.OSID=ue,this.H.OAID=_e),this.F=this.X,this.I=ee(this,null,this.W),pf(this)};function Cc(D){if(dd(D),D.G==3){var se=D.U++,ue=ji(D.I);if(Ra(ue,"SID",D.K),Ra(ue,"RID",se),Ra(ue,"TYPE","terminate"),bu(D,ue),se=new Qe(D,D.j,se),se.L=2,se.v=mu(ji(ue)),ue=!1,l.navigator&&l.navigator.sendBeacon)try{ue=l.navigator.sendBeacon(se.v.toString(),"")}catch{}!ue&&l.Image&&(new Image().src=se.v,ue=!0),ue||(se.g=ve(se.j,null),se.g.ea(se.v)),se.F=Date.now(),Vt(se)}xf(D)}function mf(D){D.g&&(yu(D),D.g.cancel(),D.g=null)}function dd(D){mf(D),D.u&&(l.clearTimeout(D.u),D.u=null),jc(D),D.h.cancel(),D.s&&(typeof D.s=="number"&&l.clearTimeout(D.s),D.s=null)}function pf(D){if(!ii(D.h)&&!D.s){D.s=!0;var se=D.Ga;q||K(),V||(q(),V=!0),Y.add(se,D),D.B=0}}function DA(D,se){return Ls(D.h)>=D.h.j-(D.s?1:0)?!1:D.s?(D.i=se.D.concat(D.i),!0):D.G==1||D.G==2||D.B>=(D.Va?0:D.Wa)?!1:(D.s=la(h(D.Ga,D,se),md(D,D.B)),D.B++,!0)}e.Ga=function(D){if(this.s)if(this.s=null,this.G==1){if(!D){this.U=Math.floor(1e5*Math.random()),D=this.U++;const tt=new Qe(this,this.j,D);let ft=this.o;if(this.S&&(ft?(ft=_(ft),L(ft,this.S)):ft=this.S),this.m!==null||this.O||(tt.H=ft,ft=null),this.P)e:{for(var se=0,ue=0;ue<this.i.length;ue++){t:{var _e=this.i[ue];if("__data__"in _e.map&&(_e=_e.map.__data__,typeof _e=="string")){_e=_e.length;break t}_e=void 0}if(_e===void 0)break;if(se+=_e,4096<se){se=ue;break e}if(se===4096||ue===this.i.length-1){se=ue+1;break e}}se=1e3}else se=1e3;se=Ad(this,tt,se),ue=ji(this.I),Ra(ue,"RID",D),Ra(ue,"CVER",22),this.D&&Ra(ue,"X-HTTP-Session-Id",this.D),bu(this,ue),ft&&(this.O?se="headers="+encodeURIComponent(String(Hl(ft)))+"&"+se:this.m&&vs(ue,this.m,ft)),vn(this.h,tt),this.Ua&&Ra(ue,"TYPE","init"),this.P?(Ra(ue,"$req",se),Ra(ue,"SID","null"),tt.T=!0,yt(tt,ue,null)):yt(tt,ue,se),this.G=2}}else this.G==3&&(D?fd(this,D):this.i.length==0||ii(this.h)||fd(this))};function fd(D,se){var ue;se?ue=se.l:ue=D.U++;const _e=ji(D.I);Ra(_e,"SID",D.K),Ra(_e,"RID",ue),Ra(_e,"AID",D.T),bu(D,_e),D.m&&D.o&&vs(_e,D.m,D.o),ue=new Qe(D,D.j,ue,D.B+1),D.m===null&&(ue.H=D.o),se&&(D.i=se.D.concat(D.i)),se=Ad(D,ue,1e3),ue.I=Math.round(.5*D.wa)+Math.round(.5*D.wa*Math.random()),vn(D.h,ue),yt(ue,_e,se)}function bu(D,se){D.H&&T(D.H,function(ue,_e){Ra(se,_e,ue)}),D.l&&BA({},function(ue,_e){Ra(se,_e,ue)})}function Ad(D,se,ue){ue=Math.min(D.i.length,ue);var _e=D.l?h(D.l.Na,D.l,D):null;e:{var tt=D.i;let ft=-1;for(;;){const Qt=["count="+ue];ft==-1?0<ue?(ft=tt[0].g,Qt.push("ofs="+ft)):ft=0:Qt.push("ofs="+ft);let Br=!0;for(let ha=0;ha<ue;ha++){let Gr=tt[ha].g;const La=tt[ha].map;if(Gr-=ft,0>Gr)ft=Math.max(0,tt[ha].g-100),Br=!1;else try{Fo(La,Qt,"req"+Gr+"_")}catch{_e&&_e(La)}}if(Br){_e=Qt.join("&");break e}}}return D=D.i.splice(0,ue),se.D=D,_e}function gf(D){if(!D.g&&!D.u){D.Y=1;var se=D.Fa;q||K(),V||(q(),V=!0),Y.add(se,D),D.v=0}}function hd(D){return D.g||D.u||3<=D.v?!1:(D.Y++,D.u=la(h(D.Fa,D),md(D,D.v)),D.v++,!0)}e.Fa=function(){if(this.u=null,p0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var D=2*this.R;this.j.info("BP detection timer enabled: "+D),this.A=la(h(this.ab,this),D)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),mf(this),p0(this))};function yu(D){D.A!=null&&(l.clearTimeout(D.A),D.A=null)}function p0(D){D.g=new Qe(D,D.j,"rpc",D.Y),D.m===null&&(D.g.H=D.o),D.g.O=0;var se=ji(D.qa);Ra(se,"RID","rpc"),Ra(se,"SID",D.K),Ra(se,"AID",D.T),Ra(se,"CI",D.F?"0":"1"),!D.F&&D.ja&&Ra(se,"TO",D.ja),Ra(se,"TYPE","xmlhttp"),bu(D,se),D.m&&D.o&&vs(se,D.m,D.o),D.L&&(D.g.I=D.L);var ue=D.g;D=D.ia,ue.L=1,ue.v=mu(ji(se)),ue.m=null,ue.P=!0,wt(ue,D)}e.Za=function(){this.C!=null&&(this.C=null,mf(this),hd(this),Zt(19))};function jc(D){D.C!=null&&(l.clearTimeout(D.C),D.C=null)}function wu(D,se){var ue=null;if(D.g==se){jc(D),yu(D),D.g=null;var _e=2}else if(Ei(D.h,se))ue=se.D,oi(D.h,se),_e=1;else return;if(D.G!=0){if(se.o)if(_e==1){ue=se.m?se.m.length:0,se=Date.now()-se.F;var tt=D.B;_e=ps(),He(_e,new xa(_e,ue)),pf(D)}else gf(D);else if(tt=se.s,tt==3||tt==0&&0<se.X||!(_e==1&&DA(D,se)||_e==2&&hd(D)))switch(ue&&0<ue.length&&(se=D.h,se.i=se.i.concat(ue)),tt){case 1:zi(D,5);break;case 4:zi(D,10);break;case 3:zi(D,6);break;default:zi(D,2)}}}function md(D,se){let ue=D.Ta+Math.floor(Math.random()*D.cb);return D.isActive()||(ue*=2),ue*se}function zi(D,se){if(D.j.info("Error code "+se),se==2){var ue=h(D.fb,D),_e=D.Xa;const tt=!_e;_e=new ja(_e||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Au(_e,"https"),mu(_e),tt?Ui(_e.toString(),ue):Oo(_e.toString(),ue)}else Zt(2);D.G=0,D.l&&D.l.sa(se),xf(D),dd(D)}e.fb=function(D){D?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function xf(D){if(D.G=0,D.ka=[],D.l){const se=ff(D.h);(se.length!=0||D.i.length!=0)&&(v(D.ka,se),v(D.ka,D.i),D.h.i.length=0,x(D.i),D.i.length=0),D.l.ra()}}function ee(D,se,ue){var _e=ue instanceof ja?ji(ue):new ja(ue);if(_e.g!="")se&&(_e.g=se+"."+_e.g),hu(_e,_e.s);else{var tt=l.location;_e=tt.protocol,se=se?se+"."+tt.hostname:tt.hostname,tt=+tt.port;var ft=new ja(null);_e&&Au(ft,_e),se&&(ft.g=se),tt&&hu(ft,tt),ue&&(ft.l=ue),_e=ft}return ue=D.D,se=D.ya,ue&&se&&Ra(_e,ue,se),Ra(_e,"VER",D.la),bu(D,_e),_e}function ve(D,se,ue){if(se&&!D.J)throw Error("Can't create secondary domain capable XhrIo object.");return se=D.Ca&&!D.pa?new Aa(new pu({eb:ue})):new Aa(D.pa),se.Ha(D.J),se}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function ze(){}e=ze.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function We(){}We.prototype.g=function(D,se){return new rt(D,se)};function rt(D,se){nt.call(this),this.g=new vu(se),this.l=D,this.h=se&&se.messageUrlParams||null,D=se&&se.messageHeaders||null,se&&se.clientProtocolHeaderRequired&&(D?D["X-Client-Protocol"]="webchannel":D={"X-Client-Protocol":"webchannel"}),this.g.o=D,D=se&&se.initMessageHeaders||null,se&&se.messageContentType&&(D?D["X-WebChannel-Content-Type"]=se.messageContentType:D={"X-WebChannel-Content-Type":se.messageContentType}),se&&se.va&&(D?D["X-WebChannel-Client-Profile"]=se.va:D={"X-WebChannel-Client-Profile":se.va}),this.g.S=D,(D=se&&se.Sb)&&!w(D)&&(this.g.m=D),this.v=se&&se.supportsCrossDomainXhr||!1,this.u=se&&se.sendRawJson||!1,(se=se&&se.httpSessionIdParam)&&!w(se)&&(this.g.D=se,D=this.h,D!==null&&se in D&&(D=this.h,se in D&&delete D[se])),this.j=new Wt(this)}g(rt,nt),rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rt.prototype.close=function(){Cc(this.g)},rt.prototype.o=function(D){var se=this.g;if(typeof D=="string"){var ue={};ue.__data__=D,D=ue}else this.u&&(ue={},ue.__data__=er(D),D=ue);se.i.push(new To(se.Ya++,D)),se.G==3&&pf(se)},rt.prototype.N=function(){this.g.l=null,delete this.j,Cc(this.g),delete this.g,rt.aa.N.call(this)};function Nt(D){Fn.call(this),D.__headers__&&(this.headers=D.__headers__,this.statusCode=D.__status__,delete D.__headers__,delete D.__status__);var se=D.__sm__;if(se){e:{for(const ue in se){D=ue;break e}D=void 0}(this.i=D)&&(D=this.i,se=se!==null&&D in se?se[D]:void 0),this.data=se}else this.data=D}g(Nt,Fn);function Ut(){Rr.call(this),this.status=1}g(Ut,Rr);function Wt(D){this.g=D}g(Wt,ze),Wt.prototype.ua=function(){He(this.g,"a")},Wt.prototype.ta=function(D){He(this.g,new Nt(D))},Wt.prototype.sa=function(D){He(this.g,new Ut)},Wt.prototype.ra=function(){He(this.g,"b")},We.prototype.createWebChannel=We.prototype.g,rt.prototype.send=rt.prototype.o,rt.prototype.open=rt.prototype.m,rt.prototype.close=rt.prototype.close,qZ=function(){return new We},GZ=function(){return ps()},$Z=mr,bO={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,U5=De,ge.COMPLETE="complete",VZ=ge,Pr.EventType=Pa,Pa.OPEN="a",Pa.CLOSE="b",Pa.ERROR="c",Pa.MESSAGE="d",nt.prototype.listen=nt.prototype.K,i2=Pr,Aa.prototype.listenOnce=Aa.prototype.L,Aa.prototype.getLastError=Aa.prototype.Ka,Aa.prototype.getLastErrorCode=Aa.prototype.Ba,Aa.prototype.getStatus=Aa.prototype.Z,Aa.prototype.getResponseJson=Aa.prototype.Oa,Aa.prototype.getResponseText=Aa.prototype.oa,Aa.prototype.send=Aa.prototype.ea,Aa.prototype.setWithCredentials=Aa.prototype.Ha,zZ=Aa}).apply(typeof nC<"u"?nC:typeof self<"u"?self:typeof window<"u"?window:{});const LQ="@firebase/firestore",MQ="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Jo.UNAUTHENTICATED=new Jo(null),Jo.GOOGLE_CREDENTIALS=new Jo("google-credentials-uid"),Jo.FIRST_PARTY=new Jo("first-party-uid"),Jo.MOCK_USER=new Jo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r1="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new SP("@firebase/firestore");function bv(){return Bg.logLevel}function lr(e,...t){if(Bg.logLevel<=wa.DEBUG){const r=t.map(UP);Bg.debug(`Firestore (${r1}): ${e}`,...r)}}function Lh(e,...t){if(Bg.logLevel<=wa.ERROR){const r=t.map(UP);Bg.error(`Firestore (${r1}): ${e}`,...r)}}function Tg(e,...t){if(Bg.logLevel<=wa.WARN){const r=t.map(UP);Bg.warn(`Firestore (${r1}): ${e}`,...r)}}function UP(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,KZ(e,a,r)}function KZ(e,t,r){let a=`FIRESTORE (${r1}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{a+=" CONTEXT: "+JSON.stringify(r)}catch{a+=" CONTEXT: "+r}throw Lh(a),new Error(a)}function on(e,t,r,a){let n="Unexpected state";typeof r=="string"?n=r:a=r,e||KZ(t,n,a)}function Xr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qt extends nf{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZ{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class XZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Jo.UNAUTHENTICATED))}shutdown(){}}class Hxe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class zxe{constructor(t){this.t=t,this.currentUser=Jo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){on(this.o===void 0,42304);let a=this.i;const n=c=>this.i!==a?(a=this.i,r(c)):Promise.resolve();let s=new jh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jh,t.enqueueRetryable(()=>n(this.currentUser))};const o=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await n(this.currentUser)})},l=c=>{lr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(lr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jh)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==t?(lr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(on(typeof a.accessToken=="string",31837,{l:a}),new WZ(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return on(t===null||typeof t=="string",2055,{h:t}),new Jo(t)}}class Vxe{constructor(t,r,a){this.P=t,this.T=r,this.I=a,this.type="FirstParty",this.user=Jo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $xe{constructor(t,r,a){this.P=t,this.T=r,this.I=a}getToken(){return Promise.resolve(new Vxe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Jo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UQ{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gxe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){on(this.o===void 0,3512);const a=s=>{s.error!=null&&lr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,lr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>a(s))};const n=s=>{lr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>n(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?n(s):lr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new UQ(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(on(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new UQ(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qxe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let a=0;a<e;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const n=qxe(40);for(let s=0;s<n.length;++s)a.length<20&&n[s]<r&&(a+=t.charAt(n[s]%62))}return a}}function Na(e,t){return e<t?-1:e>t?1:0}function yO(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const n=e.charAt(a),s=t.charAt(a);if(n!==s)return vB(n)===vB(s)?Na(n,s):vB(n)?1:-1}return Na(e.length,t.length)}const Kxe=55296,Wxe=57343;function vB(e){const t=e.charCodeAt(0);return t>=Kxe&&t<=Wxe}function mb(e,t,r){return e.length===t.length&&e.every((a,n)=>r(a,t[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ="__name__";class Wf{constructor(t,r,a){r===void 0?r=0:r>t.length&&Hr(637,{offset:r,range:t.length}),a===void 0?a=t.length-r:a>t.length-r&&Hr(1746,{length:a,range:t.length-r}),this.segments=t,this.offset=r,this.len=a}get length(){return this.len}isEqual(t){return Wf.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Wf?t.forEach(a=>{r.push(a)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const a=Math.min(t.length,r.length);for(let n=0;n<a;n++){const s=Wf.compareSegments(t.get(n),r.get(n));if(s!==0)return s}return Na(t.length,r.length)}static compareSegments(t,r){const a=Wf.isNumericId(t),n=Wf.isNumericId(r);return a&&!n?-1:!a&&n?1:a&&n?Wf.extractNumericId(t).compare(Wf.extractNumericId(r)):yO(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Sm.fromString(t.substring(4,t.length-2))}}class Tn extends Wf{construct(t,r,a){return new Tn(t,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const a of t){if(a.indexOf("//")>=0)throw new qt(jt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(n=>n.length>0))}return new Tn(r)}static emptyPath(){return new Tn([])}}const Xxe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class eo extends Wf{construct(t,r,a){return new eo(t,r,a)}static isValidIdentifier(t){return Xxe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),eo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===QQ}static keyField(){return new eo([QQ])}static fromServerFormat(t){const r=[];let a="",n=0;const s=()=>{if(a.length===0)throw new qt(jt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let o=!1;for(;n<t.length;){const l=t[n];if(l==="\\"){if(n+1===t.length)throw new qt(jt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[n+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new qt(jt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=c,n+=2}else l==="`"?(o=!o,n++):l!=="."||o?(a+=l,n++):(s(),n++)}if(s(),o)throw new qt(jt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new eo(r)}static emptyPath(){return new eo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t){this.path=t}static fromPath(t){return new xr(Tn.fromString(t))}static fromName(t){return new xr(Tn.fromString(t).popFirst(5))}static empty(){return new xr(Tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Tn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Tn.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xr(new Tn(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YZ(e,t,r){if(!r)throw new qt(jt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function JZ(e,t,r,a){if(t===!0&&a===!0)throw new qt(jt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function HQ(e){if(!xr.isDocumentKey(e))throw new qt(jt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function zQ(e){if(xr.isDocumentKey(e))throw new qt(jt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ZZ(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function z_(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Hr(12329,{type:typeof e})}function cl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new qt(jt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=z_(e);throw new qt(jt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function Yxe(e,t){if(t<=0)throw new qt(jt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(e,t){const r={typeString:e};return t&&(r.value=t),r}function pN(e,t){if(!ZZ(e))throw new qt(jt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const a in t)if(t[a]){const n=t[a].typeString,s="value"in t[a]?{value:t[a].value}:void 0;if(!(a in e)){r=`JSON missing required field: '${a}'`;break}const o=e[a];if(n&&typeof o!==n){r=`JSON field '${a}' must be a ${n}.`;break}if(s!==void 0&&o!==s.value){r=`Expected '${a}' field to equal '${s.value}'`;break}}if(r)throw new qt(jt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VQ=-62135596800,$Q=1e6;class ir{static now(){return ir.fromMillis(Date.now())}static fromDate(t){return ir.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),a=Math.floor((t-1e3*r)*$Q);return new ir(r,a)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new qt(jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new qt(jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<VQ)throw new qt(jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qt(jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$Q}_compareTo(t){return this.seconds===t.seconds?Na(this.nanoseconds,t.nanoseconds):Na(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(pN(t,ir._jsonSchema))return new ir(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-VQ;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ir._jsonSchemaVersion="firestore/timestamp/1.0",ir._jsonSchema={type:yi("string",ir._jsonSchemaVersion),seconds:yi("number"),nanoseconds:yi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{static fromTimestamp(t){return new Kr(t)}static min(){return new Kr(new ir(0,0))}static max(){return new Kr(new ir(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=-1;function Jxe(e,t){const r=e.toTimestamp().seconds,a=e.toTimestamp().nanoseconds+1,n=Kr.fromTimestamp(a===1e9?new ir(r+1,0):new ir(r,a));return new Hm(n,xr.empty(),t)}function Zxe(e){return new Hm(e.readTime,e.key,hw)}class Hm{constructor(t,r,a){this.readTime=t,this.documentKey=r,this.largestBatchId=a}static min(){return new Hm(Kr.min(),xr.empty(),hw)}static max(){return new Hm(Kr.max(),xr.empty(),hw)}}function eve(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=xr.comparator(e.documentKey,t.documentKey),r!==0?r:Na(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tve="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rve{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(e){if(e.code!==jt.FAILED_PRECONDITION||e.message!==tve)throw e;lr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Hr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Rt((a,n)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(a,n)},this.catchCallback=s=>{this.wrapFailure(r,s).next(a,n)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Rt?r:Rt.resolve(r)}catch(r){return Rt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Rt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Rt.reject(r)}static resolve(t){return new Rt((r,a)=>{r(t)})}static reject(t){return new Rt((r,a)=>{a(t)})}static waitFor(t){return new Rt((r,a)=>{let n=0,s=0,o=!1;t.forEach(l=>{++n,l.next(()=>{++s,o&&s===n&&r()},c=>a(c))}),o=!0,s===n&&r()})}static or(t){let r=Rt.resolve(!1);for(const a of t)r=r.next(n=>n?Rt.resolve(n):a());return r}static forEach(t,r){const a=[];return t.forEach((n,s)=>{a.push(r.call(this,n,s))}),this.waitFor(a)}static mapArray(t,r){return new Rt((a,n)=>{const s=t.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{o[u]=d,++l,l===s&&a(o)},d=>n(d))}})}static doWhile(t,r){return new Rt((a,n)=>{const s=()=>{t()===!0?r().next(()=>{s()},n):a()};s()})}}function ave(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function n1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>r.writeSequenceNumber(a))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}V_.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=-1;function $_(e){return e==null}function Tj(e){return e===0&&1/e==-1/0}function nve(e){return typeof e=="number"&&Number.isInteger(e)&&!Tj(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eee="";function sve(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=GQ(t)),t=ive(e.get(r),t);return GQ(t)}function ive(e,t){let r=t;const a=e.length;for(let n=0;n<a;n++){const s=e.charAt(n);switch(s){case"\0":r+="";break;case eee:r+="";break;default:r+=s}}return r}function GQ(e){return e+eee+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qQ(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function np(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function tee(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(t,r){this.comparator=t,this.root=r||wo.EMPTY}insert(t,r){return new fs(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,wo.BLACK,null,null))}remove(t){return new fs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(t){let r=0,a=this.root;for(;!a.isEmpty();){const n=this.comparator(t,a.key);if(n===0)return r+a.left.size;n<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,a)=>(t(r,a),!1))}toString(){const t=[];return this.inorderTraversal((r,a)=>(t.push(`${r}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new sC(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new sC(this.root,t,this.comparator,!1)}getReverseIterator(){return new sC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new sC(this.root,t,this.comparator,!0)}}class sC{constructor(t,r,a,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?a(t.key,r):1,r&&n&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wo{constructor(t,r,a,n,s){this.key=t,this.value=r,this.color=a??wo.RED,this.left=n??wo.EMPTY,this.right=s??wo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,a,n,s){return new wo(t??this.key,r??this.value,a??this.color,n??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,a){let n=this;const s=a(t,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(t,r,a),null):s===0?n.copy(null,r,null,null,null):n.copy(null,null,null,null,n.right.insert(t,r,a)),n.fixUp()}removeMin(){if(this.left.isEmpty())return wo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let a,n=this;if(r(t,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(t,r),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),r(t,n.key)===0){if(n.right.isEmpty())return wo.EMPTY;a=n.right.min(),n=n.copy(a.key,a.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(t,r))}return n.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Hr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Hr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Hr(27949);return t+(this.isRed()?0:1)}}wo.EMPTY=null,wo.RED=!0,wo.BLACK=!1;wo.EMPTY=new class{constructor(){this.size=0}get key(){throw Hr(57766)}get value(){throw Hr(16141)}get color(){throw Hr(16727)}get left(){throw Hr(29726)}get right(){throw Hr(36894)}copy(t,r,a,n,s){return this}insert(t,r,a){return new wo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t){this.comparator=t,this.data=new fs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,a)=>(t(r),!1))}forEachInRange(t,r){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const n=a.getNext();if(this.comparator(n.key,t[1])>=0)return;r(n.key)}}forEachWhile(t,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new KQ(this.data.getIterator())}getIteratorFrom(t){return new KQ(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(a=>{r=r.add(a)}),r}isEqual(t){if(!(t instanceof Oi)||this.size!==t.size)return!1;const r=this.data.getIterator(),a=t.data.getIterator();for(;r.hasNext();){const n=r.getNext().key,s=a.getNext().key;if(this.comparator(n,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Oi(this.comparator);return r.data=t,r}}class KQ{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t){this.fields=t,t.sort(eo.comparator)}static empty(){return new eu([])}unionWith(t){let r=new Oi(eo.comparator);for(const a of this.fields)r=r.add(a);for(const a of t)r=r.add(a);return new eu(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return mb(this.fields,t.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ree extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(n){try{return atob(n)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ree("Invalid base64 string: "+s):s}}(t);return new no(r)}static fromUint8Array(t){const r=function(n){let s="";for(let o=0;o<n.length;++o)s+=String.fromCharCode(n[o]);return s}(t);return new no(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let n=0;n<r.length;n++)a[n]=r.charCodeAt(n);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Na(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}no.EMPTY_BYTE_STRING=new no("");const ove=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zm(e){if(on(!!e,39018),typeof e=="string"){let t=0;const r=ove.exec(e);if(on(!!r,46558,{timestamp:e}),r[1]){let n=r[1];n=(n+"000000000").substr(0,9),t=Number(n)}const a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Xs(e.seconds),nanos:Xs(e.nanos)}}function Xs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Vm(e){return typeof e=="string"?no.fromBase64String(e):no.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aee="server_timestamp",nee="__type__",see="__previous_value__",iee="__local_write_time__";function G_(e){var r,a;return((a=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[nee])==null?void 0:a.stringValue)===aee}function q_(e){const t=e.mapValue.fields[see];return G_(t)?q_(t):t}function mw(e){const t=zm(e.mapValue.fields[iee].timestampValue);return new ir(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lve{constructor(t,r,a,n,s,o,l,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=a,this.host=n,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const Ij="(default)";class pb{constructor(t,r){this.projectId=t,this.database=r||Ij}static empty(){return new pb("","")}get isDefaultDatabase(){return this.database===Ij}isEqual(t){return t instanceof pb&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oee="__type__",cve="__max__",iC={mapValue:{}},lee="__vector__",Oj="value";function $m(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?G_(e)?4:dve(e)?9007199254740991:uve(e)?10:11:Hr(28295,{value:e})}function yA(e,t){if(e===t)return!0;const r=$m(e);if(r!==$m(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return mw(e).isEqual(mw(t));case 3:return function(n,s){if(typeof n.timestampValue=="string"&&typeof s.timestampValue=="string"&&n.timestampValue.length===s.timestampValue.length)return n.timestampValue===s.timestampValue;const o=zm(n.timestampValue),l=zm(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(n,s){return Vm(n.bytesValue).isEqual(Vm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(n,s){return Xs(n.geoPointValue.latitude)===Xs(s.geoPointValue.latitude)&&Xs(n.geoPointValue.longitude)===Xs(s.geoPointValue.longitude)}(e,t);case 2:return function(n,s){if("integerValue"in n&&"integerValue"in s)return Xs(n.integerValue)===Xs(s.integerValue);if("doubleValue"in n&&"doubleValue"in s){const o=Xs(n.doubleValue),l=Xs(s.doubleValue);return o===l?Tj(o)===Tj(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return mb(e.arrayValue.values||[],t.arrayValue.values||[],yA);case 10:case 11:return function(n,s){const o=n.mapValue.fields||{},l=s.mapValue.fields||{};if(qQ(o)!==qQ(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!yA(o[c],l[c])))return!1;return!0}(e,t);default:return Hr(52216,{left:e})}}function pw(e,t){return(e.values||[]).find(r=>yA(r,t))!==void 0}function gb(e,t){if(e===t)return 0;const r=$m(e),a=$m(t);if(r!==a)return Na(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return Na(e.booleanValue,t.booleanValue);case 2:return function(s,o){const l=Xs(s.integerValue||s.doubleValue),c=Xs(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return WQ(e.timestampValue,t.timestampValue);case 4:return WQ(mw(e),mw(t));case 5:return yO(e.stringValue,t.stringValue);case 6:return function(s,o){const l=Vm(s),c=Vm(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Na(l[u],c[u]);if(d!==0)return d}return Na(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const l=Na(Xs(s.latitude),Xs(o.latitude));return l!==0?l:Na(Xs(s.longitude),Xs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return XQ(e.arrayValue,t.arrayValue);case 10:return function(s,o){var h,m,g,x;const l=s.fields||{},c=o.fields||{},u=(h=l[Oj])==null?void 0:h.arrayValue,d=(m=c[Oj])==null?void 0:m.arrayValue,f=Na(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:XQ(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===iC.mapValue&&o===iC.mapValue)return 0;if(s===iC.mapValue)return 1;if(o===iC.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=yO(c[f],d[f]);if(h!==0)return h;const m=gb(l[c[f]],u[d[f]]);if(m!==0)return m}return Na(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Hr(23264,{he:r})}}function WQ(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Na(e,t);const r=zm(e),a=zm(t),n=Na(r.seconds,a.seconds);return n!==0?n:Na(r.nanos,a.nanos)}function XQ(e,t){const r=e.values||[],a=t.values||[];for(let n=0;n<r.length&&n<a.length;++n){const s=gb(r[n],a[n]);if(s)return s}return Na(r.length,a.length)}function xb(e){return wO(e)}function wO(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const a=zm(r);return`time(${a.seconds},${a.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return Vm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return xr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let a="[",n=!0;for(const s of r.values||[])n?n=!1:a+=",",a+=wO(s);return a+"]"}(e.arrayValue):"mapValue"in e?function(r){const a=Object.keys(r.fields||{}).sort();let n="{",s=!0;for(const o of a)s?s=!1:n+=",",n+=`${o}:${wO(r.fields[o])}`;return n+"}"}(e.mapValue):Hr(61005,{value:e})}function Q5(e){switch($m(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=q_(e);return t?16+Q5(t):16;case 5:return 2*e.stringValue.length;case 6:return Vm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((n,s)=>n+Q5(s),0)}(e.arrayValue);case 10:case 11:return function(a){let n=0;return np(a.fields,(s,o)=>{n+=s.length+Q5(o)}),n}(e.mapValue);default:throw Hr(13486,{value:e})}}function Fj(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function NO(e){return!!e&&"integerValue"in e}function HP(e){return!!e&&"arrayValue"in e}function YQ(e){return!!e&&"nullValue"in e}function JQ(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function H5(e){return!!e&&"mapValue"in e}function uve(e){var r,a;return((a=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[oee])==null?void 0:a.stringValue)===lee}function O2(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return np(e.mapValue.fields,(r,a)=>t.mapValue.fields[r]=O2(a)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=O2(e.arrayValue.values[r]);return t}return{...e}}function dve(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===cve}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(t){this.value=t}static empty(){return new oc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let a=0;a<t.length-1;++a)if(r=(r.mapValue.fields||{})[t.get(a)],!H5(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=O2(r)}setAll(t){let r=eo.emptyPath(),a={},n=[];t.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,a,n),a={},n=[],r=l.popLast()}o?a[l.lastSegment()]=O2(o):n.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,a,n)}delete(t){const r=this.field(t.popLast());H5(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return yA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<t.length;++a){let n=r.mapValue.fields[t.get(a)];H5(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},r.mapValue.fields[t.get(a)]=n),r=n}return r.mapValue.fields}applyChanges(t,r,a){np(r,(n,s)=>t[n]=s);for(const n of a)delete t[n]}clone(){return new oc(O2(this.value))}}function cee(e){const t=[];return np(e.fields,(r,a)=>{const n=new eo([r]);if(H5(a)){const s=cee(a.mapValue).fields;if(s.length===0)t.push(n);else for(const o of s)t.push(n.child(o))}else t.push(n)}),new eu(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(t,r,a,n,s,o,l){this.key=t,this.documentType=r,this.version=a,this.readTime=n,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new rl(t,0,Kr.min(),Kr.min(),Kr.min(),oc.empty(),0)}static newFoundDocument(t,r,a,n){return new rl(t,1,r,Kr.min(),a,n,0)}static newNoDocument(t,r){return new rl(t,2,r,Kr.min(),Kr.min(),oc.empty(),0)}static newUnknownDocument(t,r){return new rl(t,3,r,Kr.min(),Kr.min(),oc.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Kr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=oc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=oc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof rl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new rl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t,r){this.position=t,this.inclusive=r}}function ZQ(e,t,r){let a=0;for(let n=0;n<e.position.length;n++){const s=t[n],o=e.position[n];if(s.field.isKeyField()?a=xr.comparator(xr.fromName(o.referenceValue),r.key):a=gb(o,r.data.field(s.field)),s.dir==="desc"&&(a*=-1),a!==0)break}return a}function eH(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!yA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t,r="asc"){this.field=t,this.dir=r}}function fve(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uee{}class vi extends uee{constructor(t,r,a){super(),this.field=t,this.op=r,this.value=a}static create(t,r,a){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,a):new hve(t,r,a):r==="array-contains"?new gve(t,a):r==="in"?new xve(t,a):r==="not-in"?new vve(t,a):r==="array-contains-any"?new bve(t,a):new vi(t,r,a)}static createKeyFieldInFilter(t,r,a){return r==="in"?new mve(t,a):new pve(t,a)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(gb(r,this.value)):r!==null&&$m(this.value)===$m(r)&&this.matchesComparison(gb(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Hr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tf extends uee{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new tf(t,r)}matches(t){return dee(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dee(e){return e.op==="and"}function fee(e){return Ave(e)&&dee(e)}function Ave(e){for(const t of e.filters)if(t instanceof tf)return!1;return!0}function EO(e){if(e instanceof vi)return e.field.canonicalString()+e.op.toString()+xb(e.value);if(fee(e))return e.filters.map(t=>EO(t)).join(",");{const t=e.filters.map(r=>EO(r)).join(",");return`${e.op}(${t})`}}function Aee(e,t){return e instanceof vi?function(a,n){return n instanceof vi&&a.op===n.op&&a.field.isEqual(n.field)&&yA(a.value,n.value)}(e,t):e instanceof tf?function(a,n){return n instanceof tf&&a.op===n.op&&a.filters.length===n.filters.length?a.filters.reduce((s,o,l)=>s&&Aee(o,n.filters[l]),!0):!1}(e,t):void Hr(19439)}function hee(e){return e instanceof vi?function(r){return`${r.field.canonicalString()} ${r.op} ${xb(r.value)}`}(e):e instanceof tf?function(r){return r.op.toString()+" {"+r.getFilters().map(hee).join(" ,")+"}"}(e):"Filter"}class hve extends vi{constructor(t,r,a){super(t,r,a),this.key=xr.fromName(a.referenceValue)}matches(t){const r=xr.comparator(t.key,this.key);return this.matchesComparison(r)}}class mve extends vi{constructor(t,r){super(t,"in",r),this.keys=mee("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class pve extends vi{constructor(t,r){super(t,"not-in",r),this.keys=mee("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function mee(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(a=>xr.fromName(a.referenceValue))}class gve extends vi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return HP(r)&&pw(r.arrayValue,this.value)}}class xve extends vi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&pw(this.value.arrayValue,r)}}class vve extends vi{constructor(t,r){super(t,"not-in",r)}matches(t){if(pw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!pw(this.value.arrayValue,r)}}class bve extends vi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!HP(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>pw(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yve{constructor(t,r=null,a=[],n=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=a,this.filters=n,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function tH(e,t=null,r=[],a=[],n=null,s=null,o=null){return new yve(e,t,r,a,n,s,o)}function zP(e){const t=Xr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(a=>EO(a)).join(","),r+="|ob:",r+=t.orderBy.map(a=>function(s){return s.field.canonicalString()+s.dir}(a)).join(","),$_(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>xb(a)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>xb(a)).join(",")),t.Te=r}return t.Te}function VP(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!fve(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!Aee(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!eH(e.startAt,t.startAt)&&eH(e.endAt,t.endAt)}function CO(e){return xr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t,r=null,a=[],n=[],s=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=n,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wve(e,t,r,a,n,s,o,l){return new Yg(e,t,r,a,n,s,o,l)}function K_(e){return new Yg(e)}function rH(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function $P(e){return e.collectionGroup!==null}function qv(e){const t=Xr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Oi(eo.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new gw(s,a))}),r.has(eo.keyField().canonicalString())||t.Ie.push(new gw(eo.keyField(),a))}return t.Ie}function AA(e){const t=Xr(e);return t.Ee||(t.Ee=Nve(t,qv(e))),t.Ee}function Nve(e,t){if(e.limitType==="F")return tH(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(n=>{const s=n.dir==="desc"?"asc":"desc";return new gw(n.field,s)});const r=e.endAt?new vb(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new vb(e.startAt.position,e.startAt.inclusive):null;return tH(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}}function jO(e,t){const r=e.filters.concat([t]);return new Yg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function Dj(e,t,r){return new Yg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function W_(e,t){return VP(AA(e),AA(t))&&e.limitType===t.limitType}function pee(e){return`${zP(AA(e))}|lt:${e.limitType}`}function yv(e){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(n=>hee(n)).join(", ")}]`),$_(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(n=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(n)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(n=>xb(n)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(n=>xb(n)).join(",")),`Target(${a})`}(AA(e))}; limitType=${e.limitType})`}function X_(e,t){return t.isFoundDocument()&&function(a,n){const s=n.key.path;return a.collectionGroup!==null?n.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(s):xr.isDocumentKey(a.path)?a.path.isEqual(s):a.path.isImmediateParentOf(s)}(e,t)&&function(a,n){for(const s of qv(a))if(!s.field.isKeyField()&&n.data.field(s.field)===null)return!1;return!0}(e,t)&&function(a,n){for(const s of a.filters)if(!s.matches(n))return!1;return!0}(e,t)&&function(a,n){return!(a.startAt&&!function(o,l,c){const u=ZQ(o,l,c);return o.inclusive?u<=0:u<0}(a.startAt,qv(a),n)||a.endAt&&!function(o,l,c){const u=ZQ(o,l,c);return o.inclusive?u>=0:u>0}(a.endAt,qv(a),n))}(e,t)}function Eve(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gee(e){return(t,r)=>{let a=!1;for(const n of qv(e)){const s=Cve(n,t,r);if(s!==0)return s;a=a||n.field.isKeyField()}return 0}}function Cve(e,t,r){const a=e.field.isKeyField()?xr.comparator(t.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?gb(c,u):Hr(42886)}(e.field,t,r);switch(e.dir){case"asc":return a;case"desc":return-1*a;default:return Hr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a!==void 0){for(const[n,s]of a)if(this.equalsFn(n,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const a=this.mapKeyFn(t),n=this.inner[a];if(n===void 0)return this.inner[a]=[[t,r]],void this.innerSize++;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return void(n[s]=[t,r]);n.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return!1;for(let n=0;n<a.length;n++)if(this.equalsFn(a[n][0],t))return a.length===1?delete this.inner[r]:a.splice(n,1),this.innerSize--,!0;return!1}forEach(t){np(this.inner,(r,a)=>{for(const[n,s]of a)t(n,s)})}isEmpty(){return tee(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jve=new fs(xr.comparator);function Mh(){return jve}const xee=new fs(xr.comparator);function o2(...e){let t=xee;for(const r of e)t=t.insert(r.key,r);return t}function vee(e){let t=xee;return e.forEach((r,a)=>t=t.insert(r,a.overlayedDocument)),t}function rg(){return F2()}function bee(){return F2()}function F2(){return new Jg(e=>e.toString(),(e,t)=>e.isEqual(t))}const kve=new fs(xr.comparator),_ve=new Oi(xr.comparator);function Ea(...e){let t=_ve;for(const r of e)t=t.add(r);return t}const Sve=new Oi(Na);function Bve(){return Sve}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tj(t)?"-0":t}}function yee(e){return{integerValue:""+e}}function Tve(e,t){return nve(t)?yee(t):GP(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this._=void 0}}function Ive(e,t,r){return e instanceof xw?function(n,s){const o={fields:{[nee]:{stringValue:aee},[iee]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return s&&G_(s)&&(s=q_(s)),s&&(o.fields[see]=s),{mapValue:o}}(r,t):e instanceof bb?Nee(e,t):e instanceof vw?Eee(e,t):function(n,s){const o=wee(n,s),l=aH(o)+aH(n.Ae);return NO(o)&&NO(n.Ae)?yee(l):GP(n.serializer,l)}(e,t)}function Ove(e,t,r){return e instanceof bb?Nee(e,t):e instanceof vw?Eee(e,t):r}function wee(e,t){return e instanceof Pj?function(a){return NO(a)||function(s){return!!s&&"doubleValue"in s}(a)}(t)?t:{integerValue:0}:null}class xw extends Y_{}class bb extends Y_{constructor(t){super(),this.elements=t}}function Nee(e,t){const r=Cee(t);for(const a of e.elements)r.some(n=>yA(n,a))||r.push(a);return{arrayValue:{values:r}}}class vw extends Y_{constructor(t){super(),this.elements=t}}function Eee(e,t){let r=Cee(t);for(const a of e.elements)r=r.filter(n=>!yA(n,a));return{arrayValue:{values:r}}}class Pj extends Y_{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function aH(e){return Xs(e.integerValue||e.doubleValue)}function Cee(e){return HP(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jee{constructor(t,r){this.field=t,this.transform=r}}function Fve(e,t){return e.field.isEqual(t.field)&&function(a,n){return a instanceof bb&&n instanceof bb||a instanceof vw&&n instanceof vw?mb(a.elements,n.elements,yA):a instanceof Pj&&n instanceof Pj?yA(a.Ae,n.Ae):a instanceof xw&&n instanceof xw}(e.transform,t.transform)}class Dve{constructor(t,r){this.version=t,this.transformResults=r}}class Tl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Tl}static exists(t){return new Tl(void 0,t)}static updateTime(t){return new Tl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function z5(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class J_{}function kee(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Z_(e.key,Tl.none()):new gN(e.key,e.data,Tl.none());{const r=e.data,a=oc.empty();let n=new Oi(eo.comparator);for(let s of t.fields)if(!n.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?a.delete(s):a.set(s,o),n=n.add(s)}return new sp(e.key,a,new eu(n.toArray()),Tl.none())}}function Pve(e,t,r){e instanceof gN?function(n,s,o){const l=n.value.clone(),c=sH(n.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,r):e instanceof sp?function(n,s,o){if(!z5(n.precondition,s))return void s.convertToUnknownDocument(o.version);const l=sH(n.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(_ee(n)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,r):function(n,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function D2(e,t,r,a){return e instanceof gN?function(s,o,l,c){if(!z5(s.precondition,o))return l;const u=s.value.clone(),d=iH(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,r,a):e instanceof sp?function(s,o,l,c){if(!z5(s.precondition,o))return l;const u=iH(s.fieldTransforms,c,o),d=o.data;return d.setAll(_ee(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,a):function(s,o,l){return z5(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,r)}function Rve(e,t){let r=null;for(const a of e.fieldTransforms){const n=t.data.field(a.field),s=wee(a.transform,n||null);s!=null&&(r===null&&(r=oc.empty()),r.set(a.field,s))}return r||null}function nH(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(a,n){return a===void 0&&n===void 0||!(!a||!n)&&mb(a,n,(s,o)=>Fve(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class gN extends J_{constructor(t,r,a,n=[]){super(),this.key=t,this.value=r,this.precondition=a,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class sp extends J_{constructor(t,r,a,n,s=[]){super(),this.key=t,this.data=r,this.fieldMask=a,this.precondition=n,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _ee(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=e.data.field(r);t.set(r,a)}}),t}function sH(e,t,r){const a=new Map;on(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let n=0;n<r.length;n++){const s=e[n],o=s.transform,l=t.data.field(s.field);a.set(s.field,Ove(o,l,r[n]))}return a}function iH(e,t,r){const a=new Map;for(const n of e){const s=n.transform,o=r.data.field(n.field);a.set(n.field,Ive(s,o,t))}return a}class Z_ extends J_{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lve extends J_{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mve{constructor(t,r,a,n){this.batchId=t,this.localWriteTime=r,this.baseMutations=a,this.mutations=n}applyToRemoteDocument(t,r){const a=r.mutationResults;for(let n=0;n<this.mutations.length;n++){const s=this.mutations[n];s.key.isEqual(t.key)&&Pve(s,t,a[n])}}applyToLocalView(t,r){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(r=D2(a,t,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(r=D2(a,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const a=bee();return this.mutations.forEach(n=>{const s=t.get(n.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(n.key)?null:l;const c=kee(o,l);c!==null&&a.set(n.key,c),o.isValidDocument()||o.convertToNoDocument(Kr.min())}),a}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Ea())}isEqual(t){return this.batchId===t.batchId&&mb(this.mutations,t.mutations,(r,a)=>nH(r,a))&&mb(this.baseMutations,t.baseMutations,(r,a)=>nH(r,a))}}class qP{constructor(t,r,a,n){this.batch=t,this.commitVersion=r,this.mutationResults=a,this.docVersions=n}static from(t,r,a){on(t.mutations.length===a.length,58842,{me:t.mutations.length,fe:a.length});let n=function(){return kve}();const s=t.mutations;for(let o=0;o<s.length;o++)n=n.insert(s[o].key,a[o].version);return new qP(t,r,a,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qve{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai,Ta;function Hve(e){switch(e){case jt.OK:return Hr(64938);case jt.CANCELLED:case jt.UNKNOWN:case jt.DEADLINE_EXCEEDED:case jt.RESOURCE_EXHAUSTED:case jt.INTERNAL:case jt.UNAVAILABLE:case jt.UNAUTHENTICATED:return!1;case jt.INVALID_ARGUMENT:case jt.NOT_FOUND:case jt.ALREADY_EXISTS:case jt.PERMISSION_DENIED:case jt.FAILED_PRECONDITION:case jt.ABORTED:case jt.OUT_OF_RANGE:case jt.UNIMPLEMENTED:case jt.DATA_LOSS:return!0;default:return Hr(15467,{code:e})}}function See(e){if(e===void 0)return Lh("GRPC error has no .code"),jt.UNKNOWN;switch(e){case Ai.OK:return jt.OK;case Ai.CANCELLED:return jt.CANCELLED;case Ai.UNKNOWN:return jt.UNKNOWN;case Ai.DEADLINE_EXCEEDED:return jt.DEADLINE_EXCEEDED;case Ai.RESOURCE_EXHAUSTED:return jt.RESOURCE_EXHAUSTED;case Ai.INTERNAL:return jt.INTERNAL;case Ai.UNAVAILABLE:return jt.UNAVAILABLE;case Ai.UNAUTHENTICATED:return jt.UNAUTHENTICATED;case Ai.INVALID_ARGUMENT:return jt.INVALID_ARGUMENT;case Ai.NOT_FOUND:return jt.NOT_FOUND;case Ai.ALREADY_EXISTS:return jt.ALREADY_EXISTS;case Ai.PERMISSION_DENIED:return jt.PERMISSION_DENIED;case Ai.FAILED_PRECONDITION:return jt.FAILED_PRECONDITION;case Ai.ABORTED:return jt.ABORTED;case Ai.OUT_OF_RANGE:return jt.OUT_OF_RANGE;case Ai.UNIMPLEMENTED:return jt.UNIMPLEMENTED;case Ai.DATA_LOSS:return jt.DATA_LOSS;default:return Hr(39323,{code:e})}}(Ta=Ai||(Ai={}))[Ta.OK=0]="OK",Ta[Ta.CANCELLED=1]="CANCELLED",Ta[Ta.UNKNOWN=2]="UNKNOWN",Ta[Ta.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ta[Ta.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ta[Ta.NOT_FOUND=5]="NOT_FOUND",Ta[Ta.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ta[Ta.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ta[Ta.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ta[Ta.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ta[Ta.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ta[Ta.ABORTED=10]="ABORTED",Ta[Ta.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ta[Ta.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ta[Ta.INTERNAL=13]="INTERNAL",Ta[Ta.UNAVAILABLE=14]="UNAVAILABLE",Ta[Ta.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zve(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vve=new Sm([4294967295,4294967295],0);function oH(e){const t=zve().encode(e),r=new HZ;return r.update(t),new Uint8Array(r.digest())}function lH(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),a=t.getUint32(4,!0),n=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Sm([r,a],0),new Sm([n,s],0)]}class KP{constructor(t,r,a){if(this.bitmap=t,this.padding=r,this.hashCount=a,r<0||r>=8)throw new l2(`Invalid padding: ${r}`);if(a<0)throw new l2(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new l2(`Invalid hash count: ${a}`);if(t.length===0&&r!==0)throw new l2(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=Sm.fromNumber(this.ge)}ye(t,r,a){let n=t.add(r.multiply(Sm.fromNumber(a)));return n.compare(Vve)===1&&(n=new Sm([n.getBits(0),n.getBits(1)],0)),n.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=oH(t),[a,n]=lH(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(a,n,s);if(!this.we(o))return!1}return!0}static create(t,r,a){const n=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new KP(s,n,r);return a.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const r=oH(t),[a,n]=lH(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(a,n,s);this.Se(o)}}Se(t){const r=Math.floor(t/8),a=t%8;this.bitmap[r]|=1<<a}}class l2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(t,r,a,n,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=n,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,a){const n=new Map;return n.set(t,xN.createSynthesizedTargetChangeForCurrentChange(t,r,a)),new eS(Kr.min(),n,new fs(Na),Mh(),Ea())}}class xN{constructor(t,r,a,n,s){this.resumeToken=t,this.current=r,this.addedDocuments=a,this.modifiedDocuments=n,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,a){return new xN(a,r,Ea(),Ea(),Ea())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(t,r,a,n){this.be=t,this.removedTargetIds=r,this.key=a,this.De=n}}class Bee{constructor(t,r){this.targetId=t,this.Ce=r}}class Tee{constructor(t,r,a=no.EMPTY_BYTE_STRING,n=null){this.state=t,this.targetIds=r,this.resumeToken=a,this.cause=n}}class cH{constructor(){this.ve=0,this.Fe=uH(),this.Me=no.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ea(),r=Ea(),a=Ea();return this.Fe.forEach((n,s)=>{switch(s){case 0:t=t.add(n);break;case 2:r=r.add(n);break;case 1:a=a.add(n);break;default:Hr(38017,{changeType:s})}}),new xN(this.Me,this.xe,t,r,a)}qe(){this.Oe=!1,this.Fe=uH()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,on(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $ve{constructor(t){this.Ge=t,this.ze=new Map,this.je=Mh(),this.Je=oC(),this.He=oC(),this.Ye=new fs(Na)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const a=this.nt(r);switch(t.state){case 0:this.rt(r)&&a.Le(t.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(t.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(a.We(),a.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),a.Le(t.resumeToken));break;default:Hr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((a,n)=>{this.rt(n)&&r(n)})}st(t){const r=t.targetId,a=t.Ce.count,n=this.ot(r);if(n){const s=n.target;if(CO(s))if(a===0){const o=new xr(s.path);this.et(r,o,rl.newNoDocument(o,Kr.min()))}else on(a===1,20013,{expectedCount:a});else{const o=this._t(r);if(o!==a){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:n=0},hashCount:s=0}=r;let o,l;try{o=Vm(a).toUint8Array()}catch(c){if(c instanceof ree)return Tg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new KP(o,n,s)}catch(c){return Tg(c instanceof l2?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,r,a){return r.Ce.count===a-this.Pt(t,r.targetId)?0:2}Pt(t,r){const a=this.Ge.getRemoteKeysForTarget(r);let n=0;return a.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(r,s,null),n++)}),n}Tt(t){const r=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&CO(l.target)){const c=new xr(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,rl.newNoDocument(c,t))}s.Be&&(r.set(o,s.ke()),s.qe())}});let a=Ea();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(a=a.add(s))}),this.je.forEach((s,o)=>o.setReadTime(t));const n=new eS(t,r,this.Ye,this.je,a);return this.je=Mh(),this.Je=oC(),this.He=oC(),this.Ye=new fs(Na),n}Xe(t,r){if(!this.rt(t))return;const a=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,a),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,a){if(!this.rt(t))return;const n=this.nt(t);this.Et(t,r)?n.Qe(r,1):n.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),a&&(this.je=this.je.insert(r,a))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new cH,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Oi(Na),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Oi(Na),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||lr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new cH),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function oC(){return new fs(xr.comparator)}function uH(){return new fs(xr.comparator)}const Gve={asc:"ASCENDING",desc:"DESCENDING"},qve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kve={and:"AND",or:"OR"};class Wve{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function kO(e,t){return e.useProto3Json||$_(t)?t:{value:t}}function Rj(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Iee(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Xve(e,t){return Rj(e,t.toTimestamp())}function hA(e){return on(!!e,49232),Kr.fromTimestamp(function(r){const a=zm(r);return new ir(a.seconds,a.nanos)}(e))}function WP(e,t){return _O(e,t).canonicalString()}function _O(e,t){const r=function(n){return new Tn(["projects",n.projectId,"databases",n.database])}(e).child("documents");return t===void 0?r:r.child(t)}function Oee(e){const t=Tn.fromString(e);return on(Lee(t),10190,{key:t.toString()}),t}function SO(e,t){return WP(e.databaseId,t.path)}function bB(e,t){const r=Oee(t);if(r.get(1)!==e.databaseId.projectId)throw new qt(jt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new qt(jt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new xr(Dee(r))}function Fee(e,t){return WP(e.databaseId,t)}function Yve(e){const t=Oee(e);return t.length===4?Tn.emptyPath():Dee(t)}function BO(e){return new Tn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Dee(e){return on(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function dH(e,t,r){return{name:SO(e,t),fields:r.value.mapValue.fields}}function Jve(e,t){let r;if("targetChange"in t){t.targetChange;const a=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Hr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),n=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(on(d===void 0||typeof d=="string",58123),no.fromBase64String(d||"")):(on(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),no.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const d=u.code===void 0?jt.UNKNOWN:See(u.code);return new qt(d,u.message||"")}(o);r=new Tee(a,n,s,l||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const n=bB(e,a.document.name),s=hA(a.document.updateTime),o=a.document.createTime?hA(a.document.createTime):Kr.min(),l=new oc({mapValue:{fields:a.document.fields}}),c=rl.newFoundDocument(n,s,o,l),u=a.targetIds||[],d=a.removedTargetIds||[];r=new V5(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const n=bB(e,a.document),s=a.readTime?hA(a.readTime):Kr.min(),o=rl.newNoDocument(n,s),l=a.removedTargetIds||[];r=new V5([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const n=bB(e,a.document),s=a.removedTargetIds||[];r=new V5([],s,n,null)}else{if(!("filter"in t))return Hr(11601,{Rt:t});{t.filter;const a=t.filter;a.targetId;const{count:n=0,unchangedNames:s}=a,o=new Qve(n,s),l=a.targetId;r=new Bee(l,o)}}return r}function Zve(e,t){let r;if(t instanceof gN)r={update:dH(e,t.key,t.value)};else if(t instanceof Z_)r={delete:SO(e,t.key)};else if(t instanceof sp)r={update:dH(e,t.key,t.data),updateMask:lbe(t.fieldMask)};else{if(!(t instanceof Lve))return Hr(16599,{Vt:t.type});r={verify:SO(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(a=>function(s,o){const l=o.transform;if(l instanceof xw)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bb)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vw)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Pj)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Hr(20930,{transform:o.transform})}(0,a))),t.precondition.isNone||(r.currentDocument=function(n,s){return s.updateTime!==void 0?{updateTime:Xve(n,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Hr(27497)}(e,t.precondition)),r}function ebe(e,t){return e&&e.length>0?(on(t!==void 0,14353),e.map(r=>function(n,s){let o=n.updateTime?hA(n.updateTime):hA(s);return o.isEqual(Kr.min())&&(o=hA(s)),new Dve(o,n.transformResults||[])}(r,t))):[]}function tbe(e,t){return{documents:[Fee(e,t.path)]}}function rbe(e,t){const r={structuredQuery:{}},a=t.path;let n;t.collectionGroup!==null?(n=a,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=Fee(e,n);const s=function(u){if(u.length!==0)return Ree(tf.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:wv(h.field),direction:sbe(h.dir)}}(d))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const l=kO(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:n}}function abe(e){let t=Yve(e.parent);const r=e.structuredQuery,a=r.from?r.from.length:0;let n=null;if(a>0){on(a===1,65062);const d=r.from[0];d.allDescendants?n=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=Pee(f);return h instanceof tf&&fee(h)?h.getFilters():[h]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(h=>function(g){return new gw(Nv(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,$_(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,m=f.values||[];return new vb(m,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,m=f.values||[];return new vb(m,h)}(r.endAt)),wve(t,n,o,s,l,"F",c,u)}function nbe(e,t){const r=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hr(28987,{purpose:n})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function Pee(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=Nv(r.unaryFilter.field);return vi.create(a,"==",{doubleValue:NaN});case"IS_NULL":const n=Nv(r.unaryFilter.field);return vi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nv(r.unaryFilter.field);return vi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nv(r.unaryFilter.field);return vi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Hr(61313);default:return Hr(60726)}}(e):e.fieldFilter!==void 0?function(r){return vi.create(Nv(r.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Hr(58110);default:return Hr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return tf.create(r.compositeFilter.filters.map(a=>Pee(a)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Hr(1026)}}(r.compositeFilter.op))}(e):Hr(30097,{filter:e})}function sbe(e){return Gve[e]}function ibe(e){return qve[e]}function obe(e){return Kve[e]}function wv(e){return{fieldPath:e.canonicalString()}}function Nv(e){return eo.fromServerFormat(e.fieldPath)}function Ree(e){return e instanceof vi?function(r){if(r.op==="=="){if(JQ(r.value))return{unaryFilter:{field:wv(r.field),op:"IS_NAN"}};if(YQ(r.value))return{unaryFilter:{field:wv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(JQ(r.value))return{unaryFilter:{field:wv(r.field),op:"IS_NOT_NAN"}};if(YQ(r.value))return{unaryFilter:{field:wv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wv(r.field),op:ibe(r.op),value:r.value}}}(e):e instanceof tf?function(r){const a=r.getFilters().map(n=>Ree(n));return a.length===1?a[0]:{compositeFilter:{op:obe(r.op),filters:a}}}(e):Hr(54877,{filter:e})}function lbe(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function Lee(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(t,r,a,n,s=Kr.min(),o=Kr.min(),l=no.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=a,this.sequenceNumber=n,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new xm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new xm(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new xm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new xm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cbe{constructor(t){this.yt=t}}function ube(e){const t=abe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Dj(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dbe{constructor(){this.Cn=new fbe}addToCollectionParentIndex(t,r){return this.Cn.add(r),Rt.resolve()}getCollectionParents(t,r){return Rt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Rt.resolve()}deleteFieldIndex(t,r){return Rt.resolve()}deleteAllFieldIndexes(t){return Rt.resolve()}createTargetIndexes(t,r){return Rt.resolve()}getDocumentsMatchingTarget(t,r){return Rt.resolve(null)}getIndexType(t,r){return Rt.resolve(0)}getFieldIndexes(t,r){return Rt.resolve([])}getNextCollectionGroupToUpdate(t){return Rt.resolve(null)}getMinOffset(t,r){return Rt.resolve(Hm.min())}getMinOffsetFromCollectionGroup(t,r){return Rt.resolve(Hm.min())}updateCollectionGroup(t,r,a){return Rt.resolve()}updateIndexEntries(t,r){return Rt.resolve()}}class fbe{constructor(){this.index={}}add(t){const r=t.lastSegment(),a=t.popLast(),n=this.index[r]||new Oi(Tn.comparator),s=!n.has(a);return this.index[r]=n.add(a),s}has(t){const r=t.lastSegment(),a=t.popLast(),n=this.index[r];return n&&n.has(a)}getEntries(t){return(this.index[t]||new Oi(Tn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mee=41943040;class tc{static withCacheSize(t){return new tc(t,tc.DEFAULT_COLLECTION_PERCENTILE,tc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tc.DEFAULT_COLLECTION_PERCENTILE=10,tc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tc.DEFAULT=new tc(Mee,tc.DEFAULT_COLLECTION_PERCENTILE,tc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tc.DISABLED=new tc(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new yb(0)}static cr(){return new yb(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH="LruGarbageCollector",Abe=1048576;function hH([e,t],[r,a]){const n=Na(e,r);return n===0?Na(t,a):n}class hbe{constructor(t){this.Ir=t,this.buffer=new Oi(hH),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();hH(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class mbe{constructor(t,r,a){this.garbageCollector=t,this.asyncQueue=r,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){lr(AH,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){n1(r)?lr(AH,"Ignoring IndexedDB error during garbage collection: ",r):await a1(r)}await this.Vr(3e5)})}}class pbe{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(a=>Math.floor(r/100*a))}nthSequenceNumber(t,r){if(r===0)return Rt.resolve(V_.ce);const a=new hbe(r);return this.mr.forEachTarget(t,n=>a.Ar(n.sequenceNumber)).next(()=>this.mr.pr(t,n=>a.Ar(n))).next(()=>a.maxValue)}removeTargets(t,r,a){return this.mr.removeTargets(t,r,a)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(lr("LruGarbageCollector","Garbage collection skipped; disabled"),Rt.resolve(fH)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(lr("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fH):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let a,n,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(lr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),n=this.params.maximumSequenceNumbersToCollect):n=f,o=Date.now(),this.nthSequenceNumber(t,n))).next(f=>(a=f,l=Date.now(),this.removeTargets(t,a,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,a))).next(f=>(u=Date.now(),bv()<=wa.DEBUG&&lr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${n} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Rt.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:s,documentsRemoved:f})))}}function gbe(e,t){return new pbe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xbe{constructor(){this.changes=new Jg(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,rl.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?Rt.resolve(a):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vbe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bbe{constructor(t,r,a,n){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=n}getDocument(t,r){let a=null;return this.documentOverlayCache.getOverlay(t,r).next(n=>(a=n,this.remoteDocumentCache.getEntry(t,r))).next(n=>(a!==null&&D2(a.mutation,n,eu.empty(),ir.now()),n))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.getLocalViewOfDocuments(t,a,Ea()).next(()=>a))}getLocalViewOfDocuments(t,r,a=Ea()){const n=rg();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,a).next(s=>{let o=o2();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const a=rg();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,Ea()))}populateOverlays(t,r,a){const n=[];return a.forEach(s=>{r.has(s)||n.push(s)}),this.documentOverlayCache.getOverlays(t,n).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(t,r,a,n){let s=Mh();const o=F2(),l=function(){return F2()}();return r.forEach((c,u)=>{const d=a.get(u.key);n.has(u.key)&&(d===void 0||d.mutation instanceof sp)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),D2(d.mutation,u,d.mutation.getFieldMask(),ir.now())):o.set(u.key,eu.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new vbe(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(t,r){const a=F2();let n=new fs((o,l)=>o-l),s=Ea();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=a.get(c)||eu.empty();d=l.applyToLocalView(u,d),a.set(c,d);const f=(n.get(l.batchId)||Ea()).add(c);n=n.insert(l.batchId,f)})}).next(()=>{const o=[],l=n.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=bee();d.forEach(h=>{if(!s.has(h)){const m=kee(r.get(h),a.get(h));m!==null&&f.set(h,m),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Rt.waitFor(o)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,r,a,n){return function(o){return xr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):$P(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,a,n):this.getDocumentsMatchingCollectionQuery(t,r,a,n)}getNextDocuments(t,r,a,n){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,a,n).next(s=>{const o=n-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,a.largestBatchId,n-s.size):Rt.resolve(rg());let l=hw,c=s;return o.next(u=>Rt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Rt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Ea())).next(d=>({batchId:l,changes:vee(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new xr(r)).next(a=>{let n=o2();return a.isFoundDocument()&&(n=n.insert(a.key,a)),n})}getDocumentsMatchingCollectionGroupQuery(t,r,a,n){const s=r.collectionGroup;let o=o2();return this.indexManager.getCollectionParents(t,s).next(l=>Rt.forEach(l,c=>{const u=function(f,h){return new Yg(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,a,n).next(d=>{d.forEach((f,h)=>{o=o.insert(f,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,a,n){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,a.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,a,s,n))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,rl.newInvalidDocument(d)))});let l=o2();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&D2(d.mutation,u,eu.empty(),ir.now()),X_(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ybe{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Rt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(n){return{id:n.id,version:n.version,createTime:hA(n.createTime)}}(r)),Rt.resolve()}getNamedQuery(t,r){return Rt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(n){return{name:n.name,query:ube(n.bundledQuery),readTime:hA(n.readTime)}}(r)),Rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wbe{constructor(){this.overlays=new fs(xr.comparator),this.qr=new Map}getOverlay(t,r){return Rt.resolve(this.overlays.get(r))}getOverlays(t,r){const a=rg();return Rt.forEach(r,n=>this.getOverlay(t,n).next(s=>{s!==null&&a.set(n,s)})).next(()=>a)}saveOverlays(t,r,a){return a.forEach((n,s)=>{this.St(t,r,s)}),Rt.resolve()}removeOverlaysForBatchId(t,r,a){const n=this.qr.get(a);return n!==void 0&&(n.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(a)),Rt.resolve()}getOverlaysForCollection(t,r,a){const n=rg(),s=r.length+1,o=new xr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>a&&n.set(c.getKey(),c)}return Rt.resolve(n)}getOverlaysForCollectionGroup(t,r,a,n){let s=new fs((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>a){let d=s.get(u.largestBatchId);d===null&&(d=rg(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=rg(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=n)););return Rt.resolve(l)}St(t,r,a){const n=this.overlays.get(a.key);if(n!==null){const o=this.qr.get(n.largestBatchId).delete(a.key);this.qr.set(n.largestBatchId,o)}this.overlays=this.overlays.insert(a.key,new Uve(r,a));let s=this.qr.get(r);s===void 0&&(s=Ea(),this.qr.set(r,s)),this.qr.set(r,s.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nbe{constructor(){this.sessionToken=no.EMPTY_BYTE_STRING}getSessionToken(t){return Rt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(){this.Qr=new Oi(Xi.$r),this.Ur=new Oi(Xi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const a=new Xi(t,r);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(t,r){t.forEach(a=>this.addReference(a,r))}removeReference(t,r){this.Gr(new Xi(t,r))}zr(t,r){t.forEach(a=>this.removeReference(a,r))}jr(t){const r=new xr(new Tn([])),a=new Xi(r,t),n=new Xi(r,t+1),s=[];return this.Ur.forEachInRange([a,n],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new xr(new Tn([])),a=new Xi(r,t),n=new Xi(r,t+1);let s=Ea();return this.Ur.forEachInRange([a,n],o=>{s=s.add(o.key)}),s}containsKey(t){const r=new Xi(t,0),a=this.Qr.firstAfterOrEqual(r);return a!==null&&t.isEqual(a.key)}}class Xi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return xr.comparator(t.key,r.key)||Na(t.Yr,r.Yr)}static Kr(t,r){return Na(t.Yr,r.Yr)||xr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ebe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Oi(Xi.$r)}checkEmpty(t){return Rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,a,n){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Mve(s,r,a,n);this.mutationQueue.push(o);for(const l of n)this.Zr=this.Zr.add(new Xi(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Rt.resolve(o)}lookupMutationBatch(t,r){return Rt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const a=r+1,n=this.ei(a),s=n<0?0:n;return Rt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(this.mutationQueue.length===0?QP:this.tr-1)}getAllMutationBatches(t){return Rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const a=new Xi(r,0),n=new Xi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([a,n],o=>{const l=this.Xr(o.Yr);s.push(l)}),Rt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let a=new Oi(Na);return r.forEach(n=>{const s=new Xi(n,0),o=new Xi(n,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{a=a.add(l.Yr)})}),Rt.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(t,r){const a=r.path,n=a.length+1;let s=a;xr.isDocumentKey(s)||(s=s.child(""));const o=new Xi(new xr(s),0);let l=new Oi(Na);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!a.isPrefixOf(u)&&(u.length===n&&(l=l.add(c.Yr)),!0)},o),Rt.resolve(this.ti(l))}ti(t){const r=[];return t.forEach(a=>{const n=this.Xr(a);n!==null&&r.push(n)}),r}removeMutationBatch(t,r){on(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return Rt.forEach(r.mutations,n=>{const s=new Xi(n.key,r.batchId);return a=a.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,n.key)}).next(()=>{this.Zr=a})}ir(t){}containsKey(t,r){const a=new Xi(r,0),n=this.Zr.firstAfterOrEqual(a);return Rt.resolve(r.isEqual(n&&n.key))}performConsistencyCheck(t){return this.mutationQueue.length,Rt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cbe{constructor(t){this.ri=t,this.docs=function(){return new fs(xr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const a=r.key,n=this.docs.get(a),s=n?n.size:0,o=this.ri(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const a=this.docs.get(r);return Rt.resolve(a?a.document.mutableCopy():rl.newInvalidDocument(r))}getEntries(t,r){let a=Mh();return r.forEach(n=>{const s=this.docs.get(n);a=a.insert(n,s?s.document.mutableCopy():rl.newInvalidDocument(n))}),Rt.resolve(a)}getDocumentsMatchingQuery(t,r,a,n){let s=Mh();const o=r.path,l=new xr(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||eve(Zxe(d),a)<=0||(n.has(d.key)||X_(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Rt.resolve(s)}getAllFromCollectionGroup(t,r,a,n){Hr(9500)}ii(t,r){return Rt.forEach(this.docs,a=>r(a))}newChangeBuffer(t){return new jbe(this)}getSize(t){return Rt.resolve(this.size)}}class jbe extends xbe{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((a,n)=>{n.isValidDocument()?r.push(this.Nr.addEntry(t,n)):this.Nr.removeEntry(a)}),Rt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kbe{constructor(t){this.persistence=t,this.si=new Jg(r=>zP(r),VP),this.lastRemoteSnapshotVersion=Kr.min(),this.highestTargetId=0,this.oi=0,this._i=new XP,this.targetCount=0,this.ai=yb.ur()}forEachTarget(t,r){return this.si.forEach((a,n)=>r(n)),Rt.resolve()}getLastRemoteSnapshotVersion(t){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.oi&&(this.oi=r),Rt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new yb(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Rt.resolve()}updateTargetData(t,r){return this.Pr(r),Rt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(t,r,a){let n=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&a.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),n++)}),Rt.waitFor(s).next(()=>n)}getTargetCount(t){return Rt.resolve(this.targetCount)}getTargetData(t,r){const a=this.si.get(r)||null;return Rt.resolve(a)}addMatchingKeys(t,r,a){return this._i.Wr(r,a),Rt.resolve()}removeMatchingKeys(t,r,a){this._i.zr(r,a);const n=this.persistence.referenceDelegate,s=[];return n&&r.forEach(o=>{s.push(n.markPotentiallyOrphaned(t,o))}),Rt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Rt.resolve()}getMatchingKeysForTargetId(t,r){const a=this._i.Hr(r);return Rt.resolve(a)}containsKey(t,r){return Rt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uee{constructor(t,r){this.ui={},this.overlays={},this.ci=new V_(0),this.li=!1,this.li=!0,this.hi=new Nbe,this.referenceDelegate=t(this),this.Pi=new kbe(this),this.indexManager=new dbe,this.remoteDocumentCache=function(n){return new Cbe(n)}(a=>this.referenceDelegate.Ti(a)),this.serializer=new cbe(r),this.Ii=new ybe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new wbe,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let a=this.ui[t.toKey()];return a||(a=new Ebe(r,this.referenceDelegate),this.ui[t.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,a){lr("MemoryPersistence","Starting transaction:",t);const n=new _be(this.ci.next());return this.referenceDelegate.Ei(),a(n).next(s=>this.referenceDelegate.di(n).next(()=>s)).toPromise().then(s=>(n.raiseOnCommittedEvent(),s))}Ai(t,r){return Rt.or(Object.values(this.ui).map(a=>()=>a.containsKey(t,r)))}}class _be extends rve{constructor(t){super(),this.currentSequenceNumber=t}}class YP{constructor(t){this.persistence=t,this.Ri=new XP,this.Vi=null}static mi(t){return new YP(t)}get fi(){if(this.Vi)return this.Vi;throw Hr(60996)}addReference(t,r,a){return this.Ri.addReference(a,r),this.fi.delete(a.toString()),Rt.resolve()}removeReference(t,r,a){return this.Ri.removeReference(a,r),this.fi.add(a.toString()),Rt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Rt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(n=>this.fi.add(n.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,r.targetId).next(n=>{n.forEach(s=>this.fi.add(s.toString()))}).next(()=>a.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.fi,a=>{const n=xr.fromPath(a);return this.gi(t,n).next(s=>{s||r.removeEntry(n,Kr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(a=>{a?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Rt.or([()=>Rt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class Lj{constructor(t,r){this.persistence=t,this.pi=new Jg(a=>sve(a.path),(a,n)=>a.isEqual(n)),this.garbageCollector=gbe(this,r)}static mi(t,r){return new Lj(t,r)}Ei(){}di(t){return Rt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>r.next(n=>a+n))}wr(t){let r=0;return this.pr(t,a=>{r++}).next(()=>r)}pr(t,r){return Rt.forEach(this.pi,(a,n)=>this.br(t,a,n).next(s=>s?Rt.resolve():r(n)))}removeTargets(t,r,a){return this.persistence.getTargetCache().removeTargets(t,r,a)}removeOrphanedDocuments(t,r){let a=0;const n=this.persistence.getRemoteDocumentCache(),s=n.newChangeBuffer();return n.ii(t,o=>this.br(t,o,r).next(l=>{l||(a++,s.removeEntry(o,Kr.min()))})).next(()=>s.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Rt.resolve()}removeTarget(t,r){const a=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,r,a){return this.pi.set(a,t.currentSequenceNumber),Rt.resolve()}removeReference(t,r,a){return this.pi.set(a,t.currentSequenceNumber),Rt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Rt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=Q5(t.data.value)),r}br(t,r,a){return Rt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const n=this.pi.get(r);return Rt.resolve(n!==void 0&&n>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(t,r,a,n){this.targetId=t,this.fromCache=r,this.Es=a,this.ds=n}static As(t,r){let a=Ea(),n=Ea();for(const s of r.docChanges)switch(s.type){case 0:a=a.add(s.doc.key);break;case 1:n=n.add(s.doc.key)}return new JP(t,r.fromCache,a,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sbe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bbe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ome()?8:ave(fl())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,a,n){const s={result:null};return this.ys(t,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(t,r,n,a).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Sbe;return this.Ss(t,r,o).next(l=>{if(s.result=l,this.Vs)return this.bs(t,r,o,l.size)})}).next(()=>s.result)}bs(t,r,a,n){return a.documentReadCount<this.fs?(bv()<=wa.DEBUG&&lr("QueryEngine","SDK will not create cache indexes for query:",yv(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Rt.resolve()):(bv()<=wa.DEBUG&&lr("QueryEngine","Query:",yv(r),"scans",a.documentReadCount,"local documents and returns",n,"documents as results."),a.documentReadCount>this.gs*n?(bv()<=wa.DEBUG&&lr("QueryEngine","The SDK decides to create cache indexes for query:",yv(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,AA(r))):Rt.resolve())}ys(t,r){if(rH(r))return Rt.resolve(null);let a=AA(r);return this.indexManager.getIndexType(t,a).next(n=>n===0?null:(r.limit!==null&&n===1&&(r=Dj(r,null,"F"),a=AA(r)),this.indexManager.getDocumentsMatchingTarget(t,a).next(s=>{const o=Ea(...s);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,a).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,o,c.readTime)?this.ys(t,Dj(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,a,n){return rH(r)||n.isEqual(Kr.min())?Rt.resolve(null):this.ps.getDocuments(t,a).next(s=>{const o=this.Ds(r,s);return this.Cs(r,o,a,n)?Rt.resolve(null):(bv()<=wa.DEBUG&&lr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),yv(r)),this.vs(t,o,r,Jxe(n,hw)).next(l=>l))})}Ds(t,r){let a=new Oi(gee(t));return r.forEach((n,s)=>{X_(t,s)&&(a=a.add(s))}),a}Cs(t,r,a,n){if(t.limit===null)return!1;if(a.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(n)>0)}Ss(t,r,a){return bv()<=wa.DEBUG&&lr("QueryEngine","Using full collection scan to execute query:",yv(r)),this.ps.getDocumentsMatchingQuery(t,r,Hm.min(),a)}vs(t,r,a,n){return this.ps.getDocumentsMatchingQuery(t,a,n).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="LocalStore",Tbe=3e8;class Ibe{constructor(t,r,a,n){this.persistence=t,this.Fs=r,this.serializer=n,this.Ms=new fs(Na),this.xs=new Jg(s=>zP(s),VP),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(a)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new bbe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Obe(e,t,r,a){return new Ibe(e,t,r,a)}async function Qee(e,t){const r=Xr(e);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let n;return r.mutationQueue.getAllMutationBatches(a).next(s=>(n=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(a))).next(s=>{const o=[],l=[];let c=Ea();for(const u of n){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(a,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function Fbe(e,t){const r=Xr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const n=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let m=Rt.resolve();return h.forEach(g=>{m=m.next(()=>d.getEntry(c,g)).next(x=>{const v=u.docVersions.get(g);on(v!==null,48541),x.version.compareTo(v)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,a,t,s).next(()=>s.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(l){let c=Ea();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(a,n))})}function Hee(e){const t=Xr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Dbe(e,t){const r=Xr(e),a=t.snapshotVersion;let n=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});n=r.Ms;const l=[];t.targetChanges.forEach((d,f)=>{const h=n.get(f);if(!h)return;l.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let m=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(no.EMPTY_BYTE_STRING,Kr.min()).withLastLimboFreeSnapshotVersion(Kr.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,a)),n=n.insert(f,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Tbe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,m,d)&&l.push(r.Pi.updateTargetData(s,m))});let c=Mh(),u=Ea();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Pbe(s,o,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!a.isEqual(Kr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,a));l.push(d)}return Rt.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=n,s))}function Pbe(e,t,r){let a=Ea(),n=Ea();return r.forEach(s=>a=a.add(s)),t.getEntries(e,a).next(s=>{let o=Mh();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(n=n.add(l)),c.isNoDocument()&&c.version.isEqual(Kr.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):lr(ZP,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:n}})}function Rbe(e,t){const r=Xr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=QP),r.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function Lbe(e,t){const r=Xr(e);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let n;return r.Pi.getTargetData(a,t).next(s=>s?(n=s,Rt.resolve(n)):r.Pi.allocateTargetId(a).next(o=>(n=new xm(t,o,"TargetPurposeListen",a.currentSequenceNumber),r.Pi.addTargetData(a,n).next(()=>n))))}).then(a=>{const n=r.Ms.get(a.targetId);return(n===null||a.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(a.targetId,a),r.xs.set(t,a.targetId)),a})}async function TO(e,t,r){const a=Xr(e),n=a.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",s,o=>a.persistence.referenceDelegate.removeTarget(o,n))}catch(o){if(!n1(o))throw o;lr(ZP,`Failed to update sequence numbers for target ${t}: ${o}`)}a.Ms=a.Ms.remove(t),a.xs.delete(n.target)}function mH(e,t,r){const a=Xr(e);let n=Kr.min(),s=Ea();return a.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=Xr(c),h=f.xs.get(d);return h!==void 0?Rt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(a,o,AA(t)).next(l=>{if(l)return n=l.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>a.Fs.getDocumentsMatchingQuery(o,t,r?n:Kr.min(),r?s:Ea())).next(l=>(Mbe(a,Eve(t),l),{documents:l,Qs:s})))}function Mbe(e,t,r){let a=e.Os.get(t)||Kr.min();r.forEach((n,s)=>{s.readTime.compareTo(a)>0&&(a=s.readTime)}),e.Os.set(t,a)}class pH{constructor(){this.activeTargetIds=Bve()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ube{constructor(){this.Mo=new pH,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,a){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,a){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new pH,Promise.resolve()}handleUserChange(t,r,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qbe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH="ConnectivityMonitor";class xH{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lr(gH,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){lr(gH,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lC=null;function IO(){return lC===null?lC=function(){return 268435456+Math.round(2147483648*Math.random())}():lC++,"0x"+lC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB="RestConnection",Hbe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zbe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${a}/databases/${n}`,this.Wo=this.databaseId.database===Ij?`project_id=${a}`:`project_id=${a}&database_id=${n}`}Go(t,r,a,n,s){const o=IO(),l=this.zo(t,r.toUriEncodedString());lr(yB,`Sending RPC '${t}' ${o}:`,l,a);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,n,s);const{host:u}=new URL(l),d=r0(u);return this.Jo(t,l,c,a,d).then(f=>(lr(yB,`Received RPC '${t}' ${o}: `,f),f),f=>{throw Tg(yB,`RPC '${t}' ${o} failed with error: `,f,"url: ",l,"request:",a),f})}Ho(t,r,a,n,s,o){return this.Go(t,r,a,n,s)}jo(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+r1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((n,s)=>t[s]=n),a&&a.headers.forEach((n,s)=>t[s]=n)}zo(t,r){const a=Hbe[t];return`${this.Uo}/v1/${r}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vbe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="WebChannelConnection";class $be extends zbe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,a,n,s){const o=IO();return new Promise((l,c)=>{const u=new zZ;u.setWithCredentials(!0),u.listenOnce(VZ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case U5.NO_ERROR:const f=u.getResponseJson();lr(zo,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),l(f);break;case U5.TIMEOUT:lr(zo,`RPC '${t}' ${o} timed out`),c(new qt(jt.DEADLINE_EXCEEDED,"Request time out"));break;case U5.HTTP_ERROR:const h=u.getStatus();if(lr(zo,`RPC '${t}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(jt).indexOf(w)>=0?w:jt.UNKNOWN}(g.status);c(new qt(x,g.message))}else c(new qt(jt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new qt(jt.UNAVAILABLE,"Connection failed."));break;default:Hr(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{lr(zo,`RPC '${t}' ${o} completed.`)}});const d=JSON.stringify(n);lr(zo,`RPC '${t}' ${o} sending request:`,n),u.send(r,"POST",d,a,15)})}T_(t,r,a){const n=IO(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=qZ(),l=GZ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,a),c.encodeInitMessageHeaders=!0;const d=s.join("");lr(zo,`Creating RPC '${t}' stream ${n}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let h=!1,m=!1;const g=new Vbe({Yo:v=>{m?lr(zo,`Not sending because RPC '${t}' stream ${n} is closed:`,v):(h||(lr(zo,`Opening RPC '${t}' stream ${n} transport.`),f.open(),h=!0),lr(zo,`RPC '${t}' stream ${n} sending:`,v),f.send(v))},Zo:()=>f.close()}),x=(v,y,w)=>{v.listen(y,j=>{try{w(j)}catch(O){setTimeout(()=>{throw O},0)}})};return x(f,i2.EventType.OPEN,()=>{m||(lr(zo,`RPC '${t}' stream ${n} transport opened.`),g.o_())}),x(f,i2.EventType.CLOSE,()=>{m||(m=!0,lr(zo,`RPC '${t}' stream ${n} transport closed`),g.a_(),this.E_(f))}),x(f,i2.EventType.ERROR,v=>{m||(m=!0,Tg(zo,`RPC '${t}' stream ${n} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new qt(jt.UNAVAILABLE,"The operation could not be completed")))}),x(f,i2.EventType.MESSAGE,v=>{var y;if(!m){const w=v.data[0];on(!!w,16349);const j=w,O=(j==null?void 0:j.error)||((y=j[0])==null?void 0:y.error);if(O){lr(zo,`RPC '${t}' stream ${n} received error:`,O);const B=O.status;let T=function(S){const L=Ai[S];if(L!==void 0)return See(L)}(B),C=O.message;T===void 0&&(T=jt.INTERNAL,C="Unknown error status: "+B+" with message "+O.message),m=!0,g.a_(new qt(T,C)),f.close()}else lr(zo,`RPC '${t}' stream ${n} received:`,w),g.u_(w)}}),x(l,$Z.STAT_EVENT,v=>{v.stat===bO.PROXY?lr(zo,`RPC '${t}' stream ${n} detected buffering proxy`):v.stat===bO.NOPROXY&&lr(zo,`RPC '${t}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function wB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(e){return new Wve(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zee{constructor(t,r,a=1e3,n=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=a,this.A_=n,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),n=Math.max(0,r-a);n>0&&lr("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,n,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vH="PersistentStream";class Vee{constructor(t,r,a,n,s,o,l,c){this.Mi=t,this.S_=a,this.b_=n,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zee(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===jt.RESOURCE_EXHAUSTED?(Lh(r.toString()),Lh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===jt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,n])=>{this.D_===r&&this.G_(a,n)},a=>{t(()=>{const n=new qt(jt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(n)})})}G_(t,r){const a=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{a(()=>this.listener.Xo())}),this.stream.t_(()=>{a(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(n=>{a(()=>this.z_(n))}),this.stream.onMessage(n=>{a(()=>++this.F_==1?this.J_(n):this.onNext(n))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return lr(vH,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(lr(vH,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gbe extends Vee{constructor(t,r,a,n,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,n,o),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=Jve(this.serializer,t),a=function(s){if(!("targetChange"in s))return Kr.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Kr.min():o.readTime?hA(o.readTime):Kr.min()}(t);return this.listener.H_(r,a)}Y_(t){const r={};r.database=BO(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=CO(c)?{documents:tbe(s,c)}:{query:rbe(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Iee(s,o.resumeToken);const u=kO(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Kr.min())>0){l.readTime=Rj(s,o.snapshotVersion.toTimestamp());const u=kO(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const a=nbe(this.serializer,t);a&&(r.labels=a),this.q_(r)}Z_(t){const r={};r.database=BO(this.serializer),r.removeTarget=t,this.q_(r)}}class qbe extends Vee{constructor(t,r,a,n,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,n,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return on(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,on(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){on(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=ebe(t.writeResults,t.commitTime),a=hA(t.commitTime);return this.listener.na(a,r)}ra(){const t={};t.database=BO(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(a=>Zve(this.serializer,a))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kbe{}class Wbe extends Kbe{constructor(t,r,a,n){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=a,this.serializer=n,this.ia=!1}sa(){if(this.ia)throw new qt(jt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,a,n){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(t,_O(r,a),n,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qt(jt.UNKNOWN,s.toString())})}Ho(t,r,a,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,_O(r,a),n,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qt(jt.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Xbe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lh(r),this.aa=!1):lr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="RemoteStore";class Ybe{constructor(t,r,a,n,s){this.localStore=t,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{a.enqueueAndForget(async()=>{Zg(this)&&(lr(Ig,"Restarting streams for network reachability change."),await async function(c){const u=Xr(c);u.Ea.add(4),await vN(u),u.Ra.set("Unknown"),u.Ea.delete(4),await rS(u)}(this))})}),this.Ra=new Xbe(a,n)}}async function rS(e){if(Zg(e))for(const t of e.da)await t(!0)}async function vN(e){for(const t of e.da)await t(!1)}function $ee(e,t){const r=Xr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),aR(r)?rR(r):s1(r).O_()&&tR(r,t))}function eR(e,t){const r=Xr(e),a=s1(r);r.Ia.delete(t),a.O_()&&Gee(r,t),r.Ia.size===0&&(a.O_()?a.L_():Zg(r)&&r.Ra.set("Unknown"))}function tR(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Kr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}s1(e).Y_(t)}function Gee(e,t){e.Va.Ue(t),s1(e).Z_(t)}function rR(e){e.Va=new $ve({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),s1(e).start(),e.Ra.ua()}function aR(e){return Zg(e)&&!s1(e).x_()&&e.Ia.size>0}function Zg(e){return Xr(e).Ea.size===0}function qee(e){e.Va=void 0}async function Jbe(e){e.Ra.set("Online")}async function Zbe(e){e.Ia.forEach((t,r)=>{tR(e,t)})}async function e1e(e,t){qee(e),aR(e)?(e.Ra.ha(t),rR(e)):e.Ra.set("Unknown")}async function t1e(e,t,r){if(e.Ra.set("Online"),t instanceof Tee&&t.state===2&&t.cause)try{await async function(n,s){const o=s.cause;for(const l of s.targetIds)n.Ia.has(l)&&(await n.remoteSyncer.rejectListen(l,o),n.Ia.delete(l),n.Va.removeTarget(l))}(e,t)}catch(a){lr(Ig,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await Mj(e,a)}else if(t instanceof V5?e.Va.Ze(t):t instanceof Bee?e.Va.st(t):e.Va.tt(t),!r.isEqual(Kr.min()))try{const a=await Hee(e.localStore);r.compareTo(a)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(no.EMPTY_BYTE_STRING,d.snapshotVersion)),Gee(s,c);const f=new xm(d.target,c,u,d.sequenceNumber);tR(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(a){lr(Ig,"Failed to raise snapshot:",a),await Mj(e,a)}}async function Mj(e,t,r){if(!n1(t))throw t;e.Ea.add(1),await vN(e),e.Ra.set("Offline"),r||(r=()=>Hee(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{lr(Ig,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await rS(e)})}function Kee(e,t){return t().catch(r=>Mj(e,r,t))}async function aS(e){const t=Xr(e),r=Gm(t);let a=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:QP;for(;r1e(t);)try{const n=await Rbe(t.localStore,a);if(n===null){t.Ta.length===0&&r.L_();break}a=n.batchId,a1e(t,n)}catch(n){await Mj(t,n)}Wee(t)&&Xee(t)}function r1e(e){return Zg(e)&&e.Ta.length<10}function a1e(e,t){e.Ta.push(t);const r=Gm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function Wee(e){return Zg(e)&&!Gm(e).x_()&&e.Ta.length>0}function Xee(e){Gm(e).start()}async function n1e(e){Gm(e).ra()}async function s1e(e){const t=Gm(e);for(const r of e.Ta)t.ea(r.mutations)}async function i1e(e,t,r){const a=e.Ta.shift(),n=qP.from(a,t,r);await Kee(e,()=>e.remoteSyncer.applySuccessfulWrite(n)),await aS(e)}async function o1e(e,t){t&&Gm(e).X_&&await async function(a,n){if(function(o){return Hve(o)&&o!==jt.ABORTED}(n.code)){const s=a.Ta.shift();Gm(a).B_(),await Kee(a,()=>a.remoteSyncer.rejectFailedWrite(s.batchId,n)),await aS(a)}}(e,t),Wee(e)&&Xee(e)}async function bH(e,t){const r=Xr(e);r.asyncQueue.verifyOperationInProgress(),lr(Ig,"RemoteStore received new credentials");const a=Zg(r);r.Ea.add(3),await vN(r),a&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await rS(r)}async function l1e(e,t){const r=Xr(e);t?(r.Ea.delete(2),await rS(r)):t||(r.Ea.add(2),await vN(r),r.Ra.set("Unknown"))}function s1(e){return e.ma||(e.ma=function(r,a,n){const s=Xr(r);return s.sa(),new Gbe(a,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Jbe.bind(null,e),t_:Zbe.bind(null,e),r_:e1e.bind(null,e),H_:t1e.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),aR(e)?rR(e):e.Ra.set("Unknown")):(await e.ma.stop(),qee(e))})),e.ma}function Gm(e){return e.fa||(e.fa=function(r,a,n){const s=Xr(r);return s.sa(),new qbe(a,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:n1e.bind(null,e),r_:o1e.bind(null,e),ta:s1e.bind(null,e),na:i1e.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await aS(e)):(await e.fa.stop(),e.Ta.length>0&&(lr(Ig,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(t,r,a,n,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=a,this.op=n,this.removalCallback=s,this.deferred=new jh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,a,n,s){const o=Date.now()+a,l=new nR(t,r,o,n,s);return l.start(a),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qt(jt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sR(e,t){if(Lh("AsyncQueue",`${t}: ${e}`),n1(e))return new qt(jt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{static emptySet(t){return new Kv(t.comparator)}constructor(t){this.comparator=t?(r,a)=>t(r,a)||xr.comparator(r.key,a.key):(r,a)=>xr.comparator(r.key,a.key),this.keyedMap=o2(),this.sortedSet=new fs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,a)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Kv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;r.hasNext();){const n=r.getNext().key,s=a.getNext().key;if(!n.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const a=new Kv;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(){this.ga=new fs(xr.comparator)}track(t){const r=t.doc.key,a=this.ga.get(r);a?t.type!==0&&a.type===3?this.ga=this.ga.insert(r,t):t.type===3&&a.type!==1?this.ga=this.ga.insert(r,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.ga=this.ga.remove(r):t.type===1&&a.type===2?this.ga=this.ga.insert(r,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Hr(63341,{Rt:t,pa:a}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,a)=>{t.push(a)}),t}}class wb{constructor(t,r,a,n,s,o,l,c,u){this.query=t,this.docs=r,this.oldDocs=a,this.docChanges=n,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,a,n,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new wb(t,r,Kv.emptySet(r),o,a,n,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&W_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(let n=0;n<r.length;n++)if(r[n].type!==a[n].type||!r[n].doc.isEqual(a[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1e{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class u1e{constructor(){this.queries=wH(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,a){const n=Xr(r),s=n.queries;n.queries=wH(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(a)})})(this,new qt(jt.ABORTED,"Firestore shutting down"))}}function wH(){return new Jg(e=>pee(e),W_)}async function iR(e,t){const r=Xr(e);let a=3;const n=t.query;let s=r.queries.get(n);s?!s.ba()&&t.Da()&&(a=2):(s=new c1e,a=t.Da()?0:1);try{switch(a){case 0:s.wa=await r.onListen(n,!0);break;case 1:s.wa=await r.onListen(n,!1);break;case 2:await r.onFirstRemoteStoreListen(n)}}catch(o){const l=sR(o,`Initialization of query '${yv(t.query)}' failed`);return void t.onError(l)}r.queries.set(n,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&lR(r)}async function oR(e,t){const r=Xr(e),a=t.query;let n=3;const s=r.queries.get(a);if(s){const o=s.Sa.indexOf(t);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?n=t.Da()?0:1:!s.ba()&&t.Da()&&(n=2))}switch(n){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function d1e(e,t){const r=Xr(e);let a=!1;for(const n of t){const s=n.query,o=r.queries.get(s);if(o){for(const l of o.Sa)l.Fa(n)&&(a=!0);o.wa=n}}a&&lR(r)}function f1e(e,t,r){const a=Xr(e),n=a.queries.get(t);if(n)for(const s of n.Sa)s.onError(r);a.queries.delete(t)}function lR(e){e.Ca.forEach(t=>{t.next()})}var OO,NH;(NH=OO||(OO={})).Ma="default",NH.Cache="cache";class cR{constructor(t,r,a){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(t){if(!this.options.includeMetadataChanges){const a=[];for(const n of t.docChanges)n.type!==3&&a.push(n);t=new wb(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const a=r!=="Offline";return(!this.options.qa||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=wb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==OO.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yee{constructor(t){this.key=t}}class Jee{constructor(t){this.key=t}}class A1e{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ea(),this.mutatedKeys=Ea(),this.eu=gee(t),this.tu=new Kv(this.eu)}get nu(){return this.Ya}ru(t,r){const a=r?r.iu:new yH,n=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,o=n,l=!1;const c=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,u=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(t.inorderTraversal((d,f)=>{const h=n.get(d),m=X_(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;h&&m?h.data.isEqual(m.data)?g!==x&&(a.track({type:3,doc:m}),v=!0):this.su(h,m)||(a.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!h&&m?(a.track({type:0,doc:m}),v=!0):h&&!m&&(a.track({type:1,doc:h}),v=!0,(c||u)&&(l=!0)),v&&(m?(o=o.add(m),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),a.track({type:1,doc:d})}return{tu:o,iu:a,Cs:l,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,a,n){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((d,f)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hr(20277,{Rt:v})}};return x(m)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(a),n=n??!1;const l=r&&!n?this._u():[],c=this.Xa.size===0&&this.current&&!n?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new wb(this.query,t.tu,s,o,t.mutatedKeys,c===0,u,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yH,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ea(),this.tu.forEach(a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))});const r=[];return t.forEach(a=>{this.Xa.has(a)||r.push(new Jee(a))}),this.Xa.forEach(a=>{t.has(a)||r.push(new Yee(a))}),r}cu(t){this.Ya=t.Qs,this.Xa=Ea();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return wb.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const uR="SyncEngine";class h1e{constructor(t,r,a){this.query=t,this.targetId=r,this.view=a}}class m1e{constructor(t){this.key=t,this.hu=!1}}class p1e{constructor(t,r,a,n,s,o){this.localStore=t,this.remoteStore=r,this.eventManager=a,this.sharedClientState=n,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Jg(l=>pee(l),W_),this.Iu=new Map,this.Eu=new Set,this.du=new fs(xr.comparator),this.Au=new Map,this.Ru=new XP,this.Vu={},this.mu=new Map,this.fu=yb.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function g1e(e,t,r=!0){const a=nte(e);let n;const s=a.Tu.get(t);return s?(a.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.lu()):n=await Zee(a,t,r,!0),n}async function x1e(e,t){const r=nte(e);await Zee(r,t,!0,!1)}async function Zee(e,t,r,a){const n=await Lbe(e.localStore,AA(t)),s=n.targetId,o=e.sharedClientState.addLocalQueryTarget(s,r);let l;return a&&(l=await v1e(e,t,s,o==="current",n.resumeToken)),e.isPrimaryClient&&r&&$ee(e.remoteStore,n),l}async function v1e(e,t,r,a,n){e.pu=(f,h,m)=>async function(x,v,y,w){let j=v.view.ru(y);j.Cs&&(j=await mH(x.localStore,v.query,!1).then(({documents:C})=>v.view.ru(C,j)));const O=w&&w.targetChanges.get(v.targetId),B=w&&w.targetMismatches.get(v.targetId)!=null,T=v.view.applyChanges(j,x.isPrimaryClient,O,B);return CH(x,v.targetId,T.au),T.snapshot}(e,f,h,m);const s=await mH(e.localStore,t,!0),o=new A1e(t,s.Qs),l=o.ru(s.documents),c=xN.createSynthesizedTargetChangeForCurrentChange(r,a&&e.onlineState!=="Offline",n),u=o.applyChanges(l,e.isPrimaryClient,c);CH(e,r,u.au);const d=new h1e(t,r,o);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function b1e(e,t,r){const a=Xr(e),n=a.Tu.get(t),s=a.Iu.get(n.targetId);if(s.length>1)return a.Iu.set(n.targetId,s.filter(o=>!W_(o,t))),void a.Tu.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(n.targetId),a.sharedClientState.isActiveQueryTarget(n.targetId)||await TO(a.localStore,n.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(n.targetId),r&&eR(a.remoteStore,n.targetId),FO(a,n.targetId)}).catch(a1)):(FO(a,n.targetId),await TO(a.localStore,n.targetId,!0))}async function y1e(e,t){const r=Xr(e),a=r.Tu.get(t),n=r.Iu.get(a.targetId);r.isPrimaryClient&&n.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),eR(r.remoteStore,a.targetId))}async function w1e(e,t,r){const a=S1e(e);try{const n=await function(o,l){const c=Xr(o),u=ir.now(),d=l.reduce((m,g)=>m.add(g.key),Ea());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=Mh(),x=Ea();return c.Ns.getEntries(m,d).next(v=>{g=v,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{f=v;const y=[];for(const w of l){const j=Rve(w,f.get(w.key).overlayedDocument);j!=null&&y.push(new sp(w.key,j,cee(j.value.mapValue),Tl.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,l)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:vee(f)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(n.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new fs(Na)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(a,n.batchId,r),await bN(a,n.changes),await aS(a.remoteStore)}catch(n){const s=sR(n,"Failed to persist write");r.reject(s)}}async function ete(e,t){const r=Xr(e);try{const a=await Dbe(r.localStore,t);t.targetChanges.forEach((n,s)=>{const o=r.Au.get(s);o&&(on(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,22616),n.addedDocuments.size>0?o.hu=!0:n.modifiedDocuments.size>0?on(o.hu,14607):n.removedDocuments.size>0&&(on(o.hu,42227),o.hu=!1))}),await bN(r,a,t)}catch(a){await a1(a)}}function EH(e,t,r){const a=Xr(e);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const n=[];a.Tu.forEach((s,o)=>{const l=o.view.va(t);l.snapshot&&n.push(l.snapshot)}),function(o,l){const c=Xr(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(l)&&(u=!0)}),u&&lR(c)}(a.eventManager,t),n.length&&a.Pu.H_(n),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function N1e(e,t,r){const a=Xr(e);a.sharedClientState.updateQueryState(t,"rejected",r);const n=a.Au.get(t),s=n&&n.key;if(s){let o=new fs(xr.comparator);o=o.insert(s,rl.newNoDocument(s,Kr.min()));const l=Ea().add(s),c=new eS(Kr.min(),new Map,new fs(Na),o,l);await ete(a,c),a.du=a.du.remove(s),a.Au.delete(t),dR(a)}else await TO(a.localStore,t,!1).then(()=>FO(a,t,r)).catch(a1)}async function E1e(e,t){const r=Xr(e),a=t.batch.batchId;try{const n=await Fbe(r.localStore,t);rte(r,a,null),tte(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await bN(r,n)}catch(n){await a1(n)}}async function C1e(e,t,r){const a=Xr(e);try{const n=await function(o,l){const c=Xr(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(on(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(a.localStore,t);rte(a,t,r),tte(a,t),a.sharedClientState.updateMutationState(t,"rejected",r),await bN(a,n)}catch(n){await a1(n)}}function tte(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function rte(e,t,r){const a=Xr(e);let n=a.Vu[a.currentUser.toKey()];if(n){const s=n.get(t);s&&(r?s.reject(r):s.resolve(),n=n.remove(t)),a.Vu[a.currentUser.toKey()]=n}}function FO(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const a of e.Iu.get(t))e.Tu.delete(a),r&&e.Pu.yu(a,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(a=>{e.Ru.containsKey(a)||ate(e,a)})}function ate(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(eR(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),dR(e))}function CH(e,t,r){for(const a of r)a instanceof Yee?(e.Ru.addReference(a.key,t),j1e(e,a)):a instanceof Jee?(lr(uR,"Document no longer in limbo: "+a.key),e.Ru.removeReference(a.key,t),e.Ru.containsKey(a.key)||ate(e,a.key)):Hr(19791,{wu:a})}function j1e(e,t){const r=t.key,a=r.path.canonicalString();e.du.get(r)||e.Eu.has(a)||(lr(uR,"New document in limbo: "+r),e.Eu.add(a),dR(e))}function dR(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new xr(Tn.fromString(t)),a=e.fu.next();e.Au.set(a,new m1e(r)),e.du=e.du.insert(r,a),$ee(e.remoteStore,new xm(AA(K_(r.path)),a,"TargetPurposeLimboResolution",V_.ce))}}async function bN(e,t,r){const a=Xr(e),n=[],s=[],o=[];a.Tu.isEmpty()||(a.Tu.forEach((l,c)=>{o.push(a.pu(c,t,r).then(u=>{var d;if((u||r)&&a.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;a.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){n.push(u);const f=JP.As(c.targetId,u);s.push(f)}}))}),await Promise.all(o),a.Pu.H_(n),await async function(c,u){const d=Xr(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Rt.forEach(u,h=>Rt.forEach(h.Es,m=>d.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>Rt.forEach(h.ds,m=>d.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!n1(f))throw f;lr(ZP,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const m=d.Ms.get(h),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(a.localStore,s))}async function k1e(e,t){const r=Xr(e);if(!r.currentUser.isEqual(t)){lr(uR,"User change. New user:",t.toKey());const a=await Qee(r.localStore,t);r.currentUser=t,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new qt(jt.CANCELLED,o))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await bN(r,a.Ls)}}function _1e(e,t){const r=Xr(e),a=r.Au.get(t);if(a&&a.hu)return Ea().add(a.key);{let n=Ea();const s=r.Iu.get(t);if(!s)return n;for(const o of s){const l=r.Tu.get(o);n=n.unionWith(l.view.nu)}return n}}function nte(e){const t=Xr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ete.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_1e.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=N1e.bind(null,t),t.Pu.H_=d1e.bind(null,t.eventManager),t.Pu.yu=f1e.bind(null,t.eventManager),t}function S1e(e){const t=Xr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=E1e.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=C1e.bind(null,t),t}class Uj{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=tS(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Obe(this.persistence,new Bbe,t.initialUser,this.serializer)}Cu(t){return new Uee(YP.mi,this.serializer)}Du(t){return new Ube}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uj.provider={build:()=>new Uj};class B1e extends Uj{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){on(this.persistence.referenceDelegate instanceof Lj,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new mbe(a,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?tc.withCacheSize(this.cacheSizeBytes):tc.DEFAULT;return new Uee(a=>Lj.mi(a,r),this.serializer)}}class DO{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>EH(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=k1e.bind(null,this.syncEngine),await l1e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new u1e}()}createDatastore(t){const r=tS(t.databaseInfo.databaseId),a=function(s){return new $be(s)}(t.databaseInfo);return function(s,o,l,c){return new Wbe(s,o,l,c)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,n,s,o,l){return new Ybe(a,n,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,r=>EH(this.syncEngine,r,0),function(){return xH.v()?new xH:new Qbe}())}createSyncEngine(t,r){return function(n,s,o,l,c,u,d){const f=new p1e(n,s,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(n){const s=Xr(n);lr(Ig,"RemoteStore shutting down."),s.Ea.add(5),await vN(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}DO.provider={build:()=>new DO};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Lh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="FirestoreClient";class T1e{constructor(t,r,a,n,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=n,this.user=Jo.UNAUTHENTICATED,this.clientId=H_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(a,async o=>{lr(qm,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(a,o=>(lr(qm,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new jh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=sR(r,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function NB(e,t){e.asyncQueue.verifyOperationInProgress(),lr(qm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let a=r.initialUser;e.setCredentialChangeListener(async n=>{a.isEqual(n)||(await Qee(t.localStore,n),a=n)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function jH(e,t){e.asyncQueue.verifyOperationInProgress();const r=await I1e(e);lr(qm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(a=>bH(t.remoteStore,a)),e.setAppCheckTokenChangeListener((a,n)=>bH(t.remoteStore,n)),e._onlineComponents=t}async function I1e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){lr(qm,"Using user provided OfflineComponentProvider");try{await NB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(n){return n.name==="FirebaseError"?n.code===jt.FAILED_PRECONDITION||n.code===jt.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(r))throw r;Tg("Error using user provided cache. Falling back to memory cache: "+r),await NB(e,new Uj)}}else lr(qm,"Using default OfflineComponentProvider"),await NB(e,new B1e(void 0));return e._offlineComponents}async function ste(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(lr(qm,"Using user provided OnlineComponentProvider"),await jH(e,e._uninitializedComponentsProvider._online)):(lr(qm,"Using default OnlineComponentProvider"),await jH(e,new DO))),e._onlineComponents}function O1e(e){return ste(e).then(t=>t.syncEngine)}async function Qj(e){const t=await ste(e),r=t.eventManager;return r.onListen=g1e.bind(null,t.syncEngine),r.onUnlisten=b1e.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=x1e.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=y1e.bind(null,t.syncEngine),r}function F1e(e,t,r={}){const a=new jh;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new fR({next:h=>{d.Nu(),o.enqueueAndForget(()=>oR(s,f));const m=h.docs.has(l);!m&&h.fromCache?u.reject(new qt(jt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?u.reject(new qt(jt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new cR(K_(l.path),d,{includeMetadataChanges:!0,qa:!0});return iR(s,f)}(await Qj(e),e.asyncQueue,t,r,a)),a.promise}function D1e(e,t,r={}){const a=new jh;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new fR({next:h=>{d.Nu(),o.enqueueAndForget(()=>oR(s,f)),h.fromCache&&c.source==="server"?u.reject(new qt(jt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new cR(l,d,{includeMetadataChanges:!0,qa:!0});return iR(s,f)}(await Qj(e),e.asyncQueue,t,r,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ite(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ote="firestore.googleapis.com",_H=!0;class SH{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new qt(jt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ote,this.ssl=_H}else this.host=t.host,this.ssl=t.ssl??_H;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Mee;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Abe)throw new qt(jt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}JZ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ite(t.experimentalLongPollingOptions??{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new qt(jt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new qt(jt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new qt(jt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,n){return a.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class nS{constructor(t,r,a,n){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=a,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SH({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qt(jt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new qt(jt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SH(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new XZ;switch(a.type){case"firstParty":return new $xe(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new qt(jt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=kH.get(r);a&&(lr("ComponentProvider","Removing Datastore"),kH.delete(r),a.terminate())}(this),Promise.resolve()}}function lte(e,t,r,a={}){var u;e=cl(e,nS);const n=r0(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${r}`;n&&(D_(`https://${l}`),P_("Firestore",!0)),s.host!==ote&&s.host!==l&&Tg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:n,emulatorOptions:a};if(!Um(c,o)&&(e._setSettings(c),a.mockUserToken)){let d,f;if(typeof a.mockUserToken=="string")d=a.mockUserToken,f=Jo.MOCK_USER;else{d=rZ(a.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=a.mockUserToken.sub||a.mockUserToken.user_id;if(!h)throw new qt(jt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Jo(h)}e._authCredentials=new Hxe(new WZ(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(t,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new sf(this.firestore,t,this._query)}}class cs{constructor(t,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new cs(this.firestore,t,this._key)}toJSON(){return{type:cs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,a){if(pN(r,cs._jsonSchema))return new cs(t,a||null,new xr(Tn.fromString(r.referencePath)))}}cs._jsonSchemaVersion="firestore/documentReference/1.0",cs._jsonSchema={type:yi("string",cs._jsonSchemaVersion),referencePath:yi("string")};class kh extends sf{constructor(t,r,a){super(t,r,K_(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new cs(this.firestore,null,new xr(t))}withConverter(t){return new kh(this.firestore,t,this._path)}}function ht(e,t,...r){if(e=$a(e),YZ("collection","path",t),e instanceof nS){const a=Tn.fromString(t,...r);return zQ(a),new kh(e,null,a)}{if(!(e instanceof cs||e instanceof kh))throw new qt(jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(Tn.fromString(t,...r));return zQ(a),new kh(e.firestore,null,a)}}function Jt(e,t,...r){if(e=$a(e),arguments.length===1&&(t=H_.newId()),YZ("doc","path",t),e instanceof nS){const a=Tn.fromString(t,...r);return HQ(a),new cs(e,null,new xr(a))}{if(!(e instanceof cs||e instanceof kh))throw new qt(jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(Tn.fromString(t,...r));return HQ(a),new cs(e.firestore,e instanceof kh?e.converter:null,new xr(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH="AsyncQueue";class TH{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zee(this,"async_queue_retry"),this._c=()=>{const a=wB();a&&lr(BH,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=t;const r=wB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=wB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new jh;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!n1(t))throw t;lr(BH,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(a=>{throw this.nc=a,this.rc=!1,Lh("INTERNAL UNHANDLED ERROR: ",IH(a)),a}).then(a=>(this.rc=!1,a))));return this.ac=r,r}enqueueAfterDelay(t,r,a){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const n=nR.createAndSchedule(this,t,r,a,s=>this.hc(s));return this.tc.push(n),n}uc(){this.nc&&Hr(47125,{Pc:IH(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function IH(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(e){return function(r,a){if(typeof r!="object"||r===null)return!1;const n=r;for(const s of a)if(s in n&&typeof n[s]=="function")return!0;return!1}(e,["next","error","complete"])}class rf extends nS{constructor(t,r,a,n){super(t,r,a,n),this.type="firestore",this._queue=new TH,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new TH(t),this._firestoreClient=void 0,await t}}}function AR(e,t){const r=typeof e=="object"?e:R_(),a=typeof e=="string"?e:Ij,n=fN(r,"firestore").getImmediate({identifier:a});if(!n._initialized){const s=_P("firestore");s&&lte(n,...s)}return n}function i1(e){if(e._terminated)throw new qt(jt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||P1e(e),e._firestoreClient}function P1e(e){var a,n,s;const t=e._freezeSettings(),r=function(l,c,u,d){return new lve(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ite(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((a=e._app)==null?void 0:a.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(n=t.localCache)!=null&&n._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new T1e(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Kc(no.fromBase64String(t))}catch(r){throw new qt(jt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Kc(no.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Kc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(pN(t,Kc._jsonSchema))return Kc.fromBase64String(t.bytes)}}Kc._jsonSchemaVersion="firestore/bytes/1.0",Kc._jsonSchema={type:yi("string",Kc._jsonSchemaVersion),bytes:yi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new qt(jt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new eo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new qt(jt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new qt(jt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Na(this._lat,t._lat)||Na(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qd._jsonSchemaVersion}}static fromJSON(t){if(pN(t,qd._jsonSchema))return new qd(t.latitude,t.longitude)}}qd._jsonSchemaVersion="firestore/geoPoint/1.0",qd._jsonSchema={type:yi("string",qd._jsonSchemaVersion),latitude:yi("number"),longitude:yi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,n){if(a.length!==n.length)return!1;for(let s=0;s<a.length;++s)if(a[s]!==n[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Kd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(pN(t,Kd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Kd(t.vectorValues);throw new qt(jt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kd._jsonSchemaVersion="firestore/vectorValue/1.0",Kd._jsonSchema={type:yi("string",Kd._jsonSchemaVersion),vectorValues:yi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1e=/^__.*__$/;class L1e{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return this.fieldMask!==null?new sp(t,this.data,this.fieldMask,r,this.fieldTransforms):new gN(t,this.data,r,this.fieldTransforms)}}class cte{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return new sp(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function ute(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hr(40011,{Ac:e})}}class sS{constructor(t,r,a,n,s,o){this.settings=t,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=n,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new sS({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var n;const r=(n=this.path)==null?void 0:n.child(t),a=this.Vc({path:r,fc:!1});return a.gc(t),a}yc(t){var n;const r=(n=this.path)==null?void 0:n.child(t),a=this.Vc({path:r,fc:!1});return a.Rc(),a}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Hj(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(ute(this.Ac)&&R1e.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class M1e{constructor(t,r,a){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=a||tS(t)}Cc(t,r,a,n=!1){return new sS({Ac:t,methodName:r,Dc:a,path:eo.emptyPath(),fc:!1,bc:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function c1(e){const t=e._freezeSettings(),r=tS(e._databaseId);return new M1e(e._databaseId,!!t.ignoreUndefinedProperties,r)}function hR(e,t,r,a,n,s={}){const o=e.Cc(s.merge||s.mergeFields?2:0,t,r,n);gR("Data must be an object, but it was:",o,a);const l=hte(a,o);let c,u;if(s.merge)c=new eu(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=PO(t,f,r);if(!o.contains(h))throw new qt(jt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);pte(d,h)||d.push(h)}c=new eu(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new L1e(new oc(l),c,u)}class iS extends l1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof iS}}function U1e(e,t,r){return new sS({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class mR extends l1{_toFieldTransform(t){return new jee(t.path,new xw)}isEqual(t){return t instanceof mR}}class pR extends l1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=U1e(this,t,!0),a=this.vc.map(s=>u1(s,r)),n=new bb(a);return new jee(t.path,n)}isEqual(t){return t instanceof pR&&Um(this.vc,t.vc)}}function dte(e,t,r,a){const n=e.Cc(1,t,r);gR("Data must be an object, but it was:",n,a);const s=[],o=oc.empty();np(a,(c,u)=>{const d=xR(t,c,r);u=$a(u);const f=n.yc(d);if(u instanceof iS)s.push(d);else{const h=u1(u,f);h!=null&&(s.push(d),o.set(d,h))}});const l=new eu(s);return new cte(o,l,n.fieldTransforms)}function fte(e,t,r,a,n,s){const o=e.Cc(1,t,r),l=[PO(t,a,r)],c=[n];if(s.length%2!=0)throw new qt(jt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(PO(t,s[h])),c.push(s[h+1]);const u=[],d=oc.empty();for(let h=l.length-1;h>=0;--h)if(!pte(u,l[h])){const m=l[h];let g=c[h];g=$a(g);const x=o.yc(m);if(g instanceof iS)u.push(m);else{const v=u1(g,x);v!=null&&(u.push(m),d.set(m,v))}}const f=new eu(u);return new cte(d,f,o.fieldTransforms)}function Ate(e,t,r,a=!1){return u1(r,e.Cc(a?4:3,t))}function u1(e,t){if(mte(e=$a(e)))return gR("Unsupported field value:",t,e),hte(e,t);if(e instanceof l1)return function(a,n){if(!ute(n.Ac))throw n.Sc(`${a._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Sc(`${a._methodName}() is not currently supported inside arrays`);const s=a._toFieldTransform(n);s&&n.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(a,n){const s=[];let o=0;for(const l of a){let c=u1(l,n.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(a,n){if((a=$a(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Tve(n.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const s=ir.fromDate(a);return{timestampValue:Rj(n.serializer,s)}}if(a instanceof ir){const s=new ir(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Rj(n.serializer,s)}}if(a instanceof qd)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Kc)return{bytesValue:Iee(n.serializer,a._byteString)};if(a instanceof cs){const s=n.databaseId,o=a.firestore._databaseId;if(!o.isEqual(s))throw n.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:WP(a.firestore._databaseId||n.databaseId,a._key.path)}}if(a instanceof Kd)return function(o,l){return{mapValue:{fields:{[oee]:{stringValue:lee},[Oj]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return GP(l.serializer,u)})}}}}}}(a,n);throw n.Sc(`Unsupported field value: ${z_(a)}`)}(e,t)}function hte(e,t){const r={};return tee(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):np(e,(a,n)=>{const s=u1(n,t.mc(a));s!=null&&(r[a]=s)}),{mapValue:{fields:r}}}function mte(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ir||e instanceof qd||e instanceof Kc||e instanceof cs||e instanceof l1||e instanceof Kd)}function gR(e,t,r){if(!mte(r)||!ZZ(r)){const a=z_(r);throw a==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+a)}}function PO(e,t,r){if((t=$a(t))instanceof o1)return t._internalPath;if(typeof t=="string")return xR(e,t);throw Hj("Field path arguments must be of type string or ",e,!1,void 0,r)}const Q1e=new RegExp("[~\\*/\\[\\]]");function xR(e,t,r){if(t.search(Q1e)>=0)throw Hj(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new o1(...t.split("."))._internalPath}catch{throw Hj(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function Hj(e,t,r,a,n){const s=a&&!a.isEmpty(),o=n!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${a}`),o&&(c+=` in document ${n}`),c+=")"),new qt(jt.INVALID_ARGUMENT,l+e+c)}function pte(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(t,r,a,n,s){this._firestore=t,this._userDataWriter=r,this._key=a,this._document=n,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new cs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new H1e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(oS("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class H1e extends vR{data(){return super.data()}}function oS(e,t){return typeof t=="string"?xR(e,t):t instanceof o1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gte(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new qt(jt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bR{}class yN extends bR{}function Dt(e,t,...r){let a=[];t instanceof bR&&a.push(t),a=a.concat(r),function(s){const o=s.filter(c=>c instanceof lS).length,l=s.filter(c=>c instanceof wN).length;if(o>1||o>0&&l>0)throw new qt(jt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const n of a)e=n._apply(e);return e}class wN extends yN{constructor(t,r,a){super(),this._field=t,this._op=r,this._value=a,this.type="where"}static _create(t,r,a){return new wN(t,r,a)}_apply(t){const r=this._parse(t);return vte(t._query,r),new sf(t.firestore,t.converter,jO(t._query,r))}_parse(t){const r=c1(t.firestore);return function(s,o,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new qt(jt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){DH(f,d);const g=[];for(const x of f)g.push(FH(c,s,x));h={arrayValue:{values:g}}}else h=FH(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||DH(f,d),h=Ate(l,o,f,d==="in"||d==="not-in");return vi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function ur(e,t,r){const a=t,n=oS("where",e);return wN._create(n,a,r)}class lS extends bR{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new lS(t,r)}_parse(t){const r=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:tf.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(n,s){let o=n;const l=s.getFlattenedFilters();for(const c of l)vte(o,c),o=jO(o,c)}(t._query,r),new sf(t.firestore,t.converter,jO(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cS extends yN{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new cS(t,r)}_apply(t){const r=function(n,s,o){if(n.startAt!==null)throw new qt(jt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new qt(jt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gw(s,o)}(t._query,this._field,this._direction);return new sf(t.firestore,t.converter,function(n,s){const o=n.explicitOrderBy.concat([s]);return new Yg(n.path,n.collectionGroup,o,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(t._query,r))}}function Yt(e,t="asc"){const r=t,a=oS("orderBy",e);return cS._create(a,r)}class uS extends yN{constructor(t,r,a){super(),this.type=t,this._limit=r,this._limitType=a}static _create(t,r,a){return new uS(t,r,a)}_apply(t){return new sf(t.firestore,t.converter,Dj(t._query,this._limit,this._limitType))}}function Wd(e){return Yxe("limit",e),uS._create("limit",e,"F")}class dS extends yN{constructor(t,r,a){super(),this.type=t,this._docOrFields=r,this._inclusive=a}static _create(t,r,a){return new dS(t,r,a)}_apply(t){const r=z1e(t,this.type,this._docOrFields,this._inclusive);return new sf(t.firestore,t.converter,function(n,s){return new Yg(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,s,n.endAt)}(t._query,r))}}function xte(...e){return dS._create("startAfter",e,!1)}function z1e(e,t,r,a){if(r[0]=$a(r[0]),r[0]instanceof vR)return function(s,o,l,c,u){if(!c)throw new qt(jt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const f of qv(s))if(f.field.isKeyField())d.push(Fj(o,c.key));else{const h=c.data.field(f.field);if(G_(h))throw new qt(jt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const m=f.field.canonicalString();throw new qt(jt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(h)}return new vb(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,a);{const n=c1(e.firestore);return function(o,l,c,u,d,f){const h=o.explicitOrderBy;if(d.length>h.length)throw new qt(jt.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new qt(jt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!$P(o)&&x.indexOf("/")!==-1)throw new qt(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const v=o.path.child(Tn.fromString(x));if(!xr.isDocumentKey(v))throw new qt(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new xr(v);m.push(Fj(l,y))}else{const v=Ate(c,u,x);m.push(v)}}return new vb(m,f)}(e._query,e.firestore._databaseId,n,t,r,a)}}function FH(e,t,r){if(typeof(r=$a(r))=="string"){if(r==="")throw new qt(jt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$P(t)&&r.indexOf("/")!==-1)throw new qt(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=t.path.child(Tn.fromString(r));if(!xr.isDocumentKey(a))throw new qt(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Fj(e,new xr(a))}if(r instanceof cs)return Fj(e,r._key);throw new qt(jt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${z_(r)}.`)}function DH(e,t){if(!Array.isArray(e)||e.length===0)throw new qt(jt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function vte(e,t){const r=function(n,s){for(const o of n)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new qt(jt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new qt(jt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class bte{convertValue(t,r="none"){switch($m(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Vm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Hr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const a={};return np(t,(n,s)=>{a[n]=this.convertValue(s,r)}),a}convertVectorValue(t){var a,n,s;const r=(s=(n=(a=t.fields)==null?void 0:a[Oj].arrayValue)==null?void 0:n.values)==null?void 0:s.map(o=>Xs(o.doubleValue));return new Kd(r)}convertGeoPoint(t){return new qd(Xs(t.latitude),Xs(t.longitude))}convertArray(t,r){return(t.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(t,r){switch(r){case"previous":const a=q_(t);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(mw(t));default:return null}}convertTimestamp(t){const r=zm(t);return new ir(r.seconds,r.nanos)}convertDocumentKey(t,r){const a=Tn.fromString(t);on(Lee(a),9688,{name:t});const n=new pb(a.get(1),a.get(3)),s=new xr(a.popFirst(5));return n.isEqual(r)||Lh(`Document ${s} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(e,t,r){let a;return a=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,a}class Tv{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Bm extends vR{constructor(t,r,a,n,s,o){super(t,r,a,n,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new P2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const a=this._document.data.field(oS("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(jt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Bm._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Bm._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bm._jsonSchema={type:yi("string",Bm._jsonSchemaVersion),bundleSource:yi("string","DocumentSnapshot"),bundleName:yi("string"),bundle:yi("string")};class P2 extends Bm{data(t={}){return super.data(t)}}class Tm{constructor(t,r,a,n){this._firestore=t,this._userDataWriter=r,this._snapshot=n,this.metadata=new Tv(n.hasPendingWrites,n.fromCache),this.query=a}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(a=>{t.call(r,new P2(this._firestore,this._userDataWriter,a.key,a,new Tv(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new qt(jt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(n,s){if(n._snapshot.oldDocs.isEmpty()){let o=0;return n._snapshot.docChanges.map(l=>{const c=new P2(n._firestore,n._userDataWriter,l.doc.key,l.doc,new Tv(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new P2(n._firestore,n._userDataWriter,l.doc.key,l.doc,new Tv(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:V1e(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(jt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Tm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=H_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],a=[],n=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),a.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),n.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function V1e(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(e){e=cl(e,cs);const t=cl(e.firestore,rf);return F1e(i1(t),e._key).then(r=>yte(t,e,r))}Tm._jsonSchemaVersion="firestore/querySnapshot/1.0",Tm._jsonSchema={type:yi("string",Tm._jsonSchemaVersion),bundleSource:yi("string","QuerySnapshot"),bundleName:yi("string"),bundle:yi("string")};class wR extends bte{constructor(t){super(),this.firestore=t}convertBytes(t){return new Kc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new cs(this.firestore,null,r)}}function Ir(e){e=cl(e,sf);const t=cl(e.firestore,rf),r=i1(t),a=new wR(t);return gte(e._query),D1e(r,e._query).then(n=>new Tm(t,a,e,n))}function ai(e,t,r){e=cl(e,cs);const a=cl(e.firestore,rf),n=yR(e.converter,t,r);return d1(a,[hR(c1(a),"setDoc",e._key,n,e.converter!==null,r).toMutation(e._key,Tl.none())])}function Bo(e,t,r,...a){e=cl(e,cs);const n=cl(e.firestore,rf),s=c1(n);let o;return o=typeof(t=$a(t))=="string"||t instanceof o1?fte(s,"updateDoc",e._key,t,r,a):dte(s,"updateDoc",e._key,t),d1(n,[o.toMutation(e._key,Tl.exists(!0))])}function xn(e){return d1(cl(e.firestore,rf),[new Z_(e._key,Tl.none())])}function Zr(e,t){const r=cl(e.firestore,rf),a=Jt(e),n=yR(e.converter,t);return d1(r,[hR(c1(e.firestore),"addDoc",a._key,n,e.converter!==null,{}).toMutation(a._key,Tl.exists(!1))]).then(()=>a)}function nr(e,...t){var c,u,d;e=$a(e);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||OH(t[a])||(r=t[a++]);const n={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(OH(t[a])){const f=t[a];t[a]=(c=f.next)==null?void 0:c.bind(f),t[a+1]=(u=f.error)==null?void 0:u.bind(f),t[a+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,o,l;if(e instanceof cs)o=cl(e.firestore,rf),l=K_(e._key.path),s={next:f=>{t[a]&&t[a](yte(o,e,f))},error:t[a+1],complete:t[a+2]};else{const f=cl(e,sf);o=cl(f.firestore,rf),l=f._query;const h=new wR(o);s={next:m=>{t[a]&&t[a](new Tm(o,h,f,m))},error:t[a+1],complete:t[a+2]},gte(e._query)}return function(h,m,g,x){const v=new fR(x),y=new cR(m,v,g);return h.asyncQueue.enqueueAndForget(async()=>iR(await Qj(h),y)),()=>{v.Nu(),h.asyncQueue.enqueueAndForget(async()=>oR(await Qj(h),y))}}(i1(o),l,n,s)}function d1(e,t){return function(a,n){const s=new jh;return a.asyncQueue.enqueueAndForget(async()=>w1e(await O1e(a),n,s)),s.promise}(i1(e),t)}function yte(e,t,r){const a=r.docs.get(t._key),n=new wR(e);return new Bm(e,n,t._key,a,new Tv(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wte{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=c1(t)}set(t,r,a){this._verifyNotCommitted();const n=EB(t,this._firestore),s=yR(n.converter,r,a),o=hR(this._dataReader,"WriteBatch.set",n._key,s,n.converter!==null,a);return this._mutations.push(o.toMutation(n._key,Tl.none())),this}update(t,r,a,...n){this._verifyNotCommitted();const s=EB(t,this._firestore);let o;return o=typeof(r=$a(r))=="string"||r instanceof o1?fte(this._dataReader,"WriteBatch.update",s._key,r,a,n):dte(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,Tl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=EB(t,this._firestore);return this._mutations=this._mutations.concat(new Z_(r._key,Tl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qt(jt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function EB(e,t){if((e=$a(e)).firestore!==t)throw new qt(jt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Ga(){return new mR("serverTimestamp")}function Nte(...e){return new pR("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(e){return i1(e=cl(e,rf)),new wte(e,t=>d1(e,t))}(function(t,r=!0){(function(n){r1=n})(Wg),Qm(new Dh("firestore",(a,{instanceIdentifier:n,options:s})=>{const o=a.getProvider("app").getImmediate(),l=new rf(new zxe(a.getProvider("auth-internal")),new Gxe(o,a.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new qt(jt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pb(u.options.projectId,d)}(o,n),o);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),td(LQ,MQ,t),td(LQ,MQ,"esm2020")})();const Nb=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:bte,Bytes:Kc,CollectionReference:kh,DocumentReference:cs,DocumentSnapshot:Bm,FieldPath:o1,FieldValue:l1,Firestore:rf,FirestoreError:qt,GeoPoint:qd,Query:sf,QueryCompositeFilterConstraint:lS,QueryConstraint:yN,QueryDocumentSnapshot:P2,QueryFieldFilterConstraint:wN,QueryLimitConstraint:uS,QueryOrderByConstraint:cS,QuerySnapshot:Tm,QueryStartAtConstraint:dS,SnapshotMetadata:Tv,Timestamp:ir,VectorValue:Kd,WriteBatch:wte,_AutoId:H_,_ByteString:no,_DatabaseId:pb,_DocumentKey:xr,_EmptyAuthCredentialsProvider:XZ,_FieldPath:eo,_cast:cl,_logWarn:Tg,_validateIsNotUsedTogether:JZ,addDoc:Zr,arrayUnion:Nte,collection:ht,connectFirestoreEmulator:lte,deleteDoc:xn,doc:Jt,ensureFirestoreConfigured:i1,executeWrite:d1,getDoc:Uh,getDocs:Ir,getFirestore:AR,limit:Wd,onSnapshot:nr,orderBy:Yt,query:Dt,serverTimestamp:Ga,setDoc:ai,startAfter:xte,updateDoc:Bo,where:ur,writeBatch:ex},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ete="firebasestorage.googleapis.com",Cte="storageBucket",$1e=120*1e3,G1e=600*1e3,q1e=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends nf{constructor(t,r,a=0){super(CB(t),`Firebase Storage: ${r} (${CB(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ms.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return CB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kn||(Kn={}));function CB(e){return"storage/"+e}function NR(){const e="An unknown error occurred, please check the error payload for server response.";return new ms(Kn.UNKNOWN,e)}function K1e(e){return new ms(Kn.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function W1e(e){return new ms(Kn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function X1e(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ms(Kn.UNAUTHENTICATED,e)}function Y1e(){return new ms(Kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function J1e(e){return new ms(Kn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function jte(){return new ms(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kte(){return new ms(Kn.CANCELED,"User canceled the upload/download.")}function Z1e(e){return new ms(Kn.INVALID_URL,"Invalid URL '"+e+"'.")}function eye(e){return new ms(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function tye(){return new ms(Kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Cte+"' property when initializing the app?")}function _te(){return new ms(Kn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rye(){return new ms(Kn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function aye(){return new ms(Kn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function nye(e){return new ms(Kn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function RO(e){return new ms(Kn.INVALID_ARGUMENT,e)}function Ste(){return new ms(Kn.APP_DELETED,"The Firebase app was deleted.")}function sye(e){return new ms(Kn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function R2(e,t){return new ms(Kn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ky(e){throw new ms(Kn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let a;try{a=kl.makeFromUrl(t,r)}catch{return new kl(t,"")}if(a.path==="")return a;throw eye(t)}static makeFromUrl(t,r){let a=null;const n="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+n+o,"i"),c={bucket:1,path:3};function u(O){O.path_=decodeURIComponent(O.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${n}/o${h}`,"i"),g={bucket:1,path:3},x=r===Ete?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${n}/${v}`,"i"),j=[{regex:l,indices:c,postModify:s},{regex:m,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let O=0;O<j.length;O++){const B=j[O],T=B.regex.exec(t);if(T){const C=T[B.indices.bucket];let _=T[B.indices.path];_||(_=""),a=new kl(C,_),B.postModify(a);break}}if(a==null)throw Z1e(t);return a}}class iye{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oye(e,t,r){let a=1,n=null,s=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...v){u||(u=!0,t.apply(null,v))}function f(v){n=setTimeout(()=>{n=null,e(m,c())},v)}function h(){s&&clearTimeout(s)}function m(v,...y){if(u){h();return}if(v){h(),d.call(null,v,...y);return}if(c()||o){h(),d.call(null,v,...y);return}a<64&&(a*=2);let j;l===1?(l=2,j=0):j=(a+Math.random())*1e3,f(j)}let g=!1;function x(v){g||(g=!0,h(),!u&&(n!==null?(v||(l=2),clearTimeout(n),f(0)):v||(l=1)))}return f(0),s=setTimeout(()=>{o=!0,x(!0)},r),x}function lye(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cye(e){return e!==void 0}function uye(e){return typeof e=="function"}function dye(e){return typeof e=="object"&&!Array.isArray(e)}function fS(e){return typeof e=="string"||e instanceof String}function PH(e){return ER()&&e instanceof Blob}function ER(){return typeof Blob<"u"}function LO(e,t,r,a){if(a<t)throw RO(`Invalid value for '${e}'. Expected ${t} or greater.`);if(a>r)throw RO(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(e,t,r){let a=t;return r==null&&(a=`https://${t}`),`${r}://${a}/v0${e}`}function Bte(e){const t=encodeURIComponent;let r="?";for(const a in e)if(e.hasOwnProperty(a)){const n=t(a)+"="+t(e[a]);r=r+n+"&"}return r=r.slice(0,-1),r}var fg;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(fg||(fg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tte(e,t){const r=e>=500&&e<600,n=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||n||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fye{constructor(t,r,a,n,s,o,l,c,u,d,f,h=!0,m=!1){this.url_=t,this.method_=r,this.headers_=a,this.body_=n,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(a,n)=>{if(n){a(!1,new cC(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===fg.NO_ERROR,c=s.getStatus();if(!l||Tte(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===fg.ABORT;a(!1,new cC(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;a(!0,new cC(u,s))})},r=(a,n)=>{const s=this.resolve_,o=this.reject_,l=n.connection;if(n.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());cye(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=NR();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(n.canceled){const c=this.appDelete_?Ste():kte();o(c)}else{const c=jte();o(c)}};this.canceled_?r(!1,new cC(!1,null,!0)):this.backoffId_=oye(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&lye(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cC{constructor(t,r,a){this.wasSuccessCode=t,this.connection=r,this.canceled=!!a}}function Aye(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function hye(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function mye(e,t){t&&(e["X-Firebase-GMPID"]=t)}function pye(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function gye(e,t,r,a,n,s,o=!0,l=!1){const c=Bte(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return mye(d,t),Aye(d,r),hye(d,s),pye(d,a),new fye(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xye(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vye(...e){const t=xye();if(t!==void 0){const r=new t;for(let a=0;a<e.length;a++)r.append(e[a]);return r.getBlob()}else{if(ER())return new Blob(e);throw new ms(Kn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function bye(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yye(e){if(typeof atob>"u")throw nye("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jB{constructor(t,r){this.data=t,this.contentType=r||null}}function wye(e,t){switch(e){case nA.RAW:return new jB(Ite(t));case nA.BASE64:case nA.BASE64URL:return new jB(Ote(e,t));case nA.DATA_URL:return new jB(Eye(t),Cye(t))}throw NR()}function Ite(e){const t=[];for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);if(a<=127)t.push(a);else if(a<=2047)t.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=a,o=e.charCodeAt(++r);a=65536|(s&1023)<<10|o&1023,t.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?t.push(239,191,189):t.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(t)}function Nye(e){let t;try{t=decodeURIComponent(e)}catch{throw R2(nA.DATA_URL,"Malformed data URL.")}return Ite(t)}function Ote(e,t){switch(e){case nA.BASE64:{const n=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(n||s)throw R2(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case nA.BASE64URL:{const n=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(n||s)throw R2(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=yye(t)}catch(n){throw n.message.includes("polyfill")?n:R2(e,"Invalid character found")}const a=new Uint8Array(r.length);for(let n=0;n<r.length;n++)a[n]=r.charCodeAt(n);return a}class Fte{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw R2(nA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=r[1]||null;a!=null&&(this.base64=jye(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=t.substring(t.indexOf(",")+1)}}function Eye(e){const t=new Fte(e);return t.base64?Ote(nA.BASE64,t.rest):Nye(t.rest)}function Cye(e){return new Fte(e).contentType}function jye(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(t,r){let a=0,n="";PH(t)?(this.data_=t,a=t.size,n=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),a=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),a=t.length),this.size_=a,this.type_=n}size(){return this.size_}type(){return this.type_}slice(t,r){if(PH(this.data_)){const a=this.data_,n=bye(a,t,r);return n===null?null:new dh(n)}else{const a=new Uint8Array(this.data_.buffer,t,r-t);return new dh(a,!0)}}static getBlob(...t){if(ER()){const r=t.map(a=>a instanceof dh?a.data_:a);return new dh(vye.apply(null,r))}else{const r=t.map(o=>fS(o)?wye(nA.RAW,o).data:o.data_);let a=0;r.forEach(o=>{a+=o.byteLength});const n=new Uint8Array(a);let s=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)n[s++]=o[l]}),new dh(n,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(e){let t;try{t=JSON.parse(e)}catch{return null}return dye(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kye(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function _ye(e,t){const r=t.split("/").filter(a=>a.length>0).join("/");return e.length===0?r:e+"/"+r}function Dte(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sye(e,t){return t}class yl{constructor(t,r,a,n){this.server=t,this.local=r||t,this.writable=!!a,this.xform=n||Sye}}let uC=null;function Bye(e){return!fS(e)||e.length<2?e:Dte(e)}function jR(){if(uC)return uC;const e=[];e.push(new yl("bucket")),e.push(new yl("generation")),e.push(new yl("metageneration")),e.push(new yl("name","fullPath",!0));function t(s,o){return Bye(o)}const r=new yl("name");r.xform=t,e.push(r);function a(s,o){return o!==void 0?Number(o):o}const n=new yl("size");return n.xform=a,e.push(n),e.push(new yl("timeCreated")),e.push(new yl("updated")),e.push(new yl("md5Hash",null,!0)),e.push(new yl("cacheControl",null,!0)),e.push(new yl("contentDisposition",null,!0)),e.push(new yl("contentEncoding",null,!0)),e.push(new yl("contentLanguage",null,!0)),e.push(new yl("contentType",null,!0)),e.push(new yl("metadata","customMetadata",!0)),uC=e,uC}function Tye(e,t){function r(){const a=e.bucket,n=e.fullPath,s=new kl(a,n);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function Iye(e,t,r){const a={};a.type="file";const n=r.length;for(let s=0;s<n;s++){const o=r[s];a[o.local]=o.xform(a,t[o.server])}return Tye(a,e),a}function Pte(e,t,r){const a=CR(t);return a===null?null:Iye(e,a,r)}function Oye(e,t,r,a){const n=CR(t);if(n===null||!fS(n.downloadTokens))return null;const s=n.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+o(d)+"/o/"+o(f),m=tx(h,r,a),g=Bte({alt:"media",token:u});return m+g})[0]}function Rte(e,t){const r={},a=t.length;for(let n=0;n<a;n++){const s=t[n];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH="prefixes",LH="items";function Fye(e,t,r){const a={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[RH])for(const n of r[RH]){const s=n.replace(/\/$/,""),o=e._makeStorageReference(new kl(t,s));a.prefixes.push(o)}if(r[LH])for(const n of r[LH]){const s=e._makeStorageReference(new kl(t,n.name));a.items.push(s)}return a}function Dye(e,t,r){const a=CR(r);return a===null?null:Fye(e,t,a)}class ip{constructor(t,r,a,n){this.url=t,this.method=r,this.handler=a,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(e){if(!e)throw NR()}function kR(e,t){function r(a,n){const s=Pte(e,n,t);return mA(s!==null),s}return r}function Pye(e,t){function r(a,n){const s=Dye(e,t,n);return mA(s!==null),s}return r}function Rye(e,t){function r(a,n){const s=Pte(e,n,t);return mA(s!==null),Oye(s,n,e.host,e._protocol)}return r}function f1(e){function t(r,a){let n;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?n=Y1e():n=X1e():r.getStatus()===402?n=W1e(e.bucket):r.getStatus()===403?n=J1e(e.path):n=a,n.status=r.getStatus(),n.serverResponse=a.serverResponse,n}return t}function _R(e){const t=f1(e);function r(a,n){let s=t(a,n);return a.getStatus()===404&&(s=K1e(e.path)),s.serverResponse=n.serverResponse,s}return r}function Lye(e,t,r){const a=t.fullServerUrl(),n=tx(a,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new ip(n,s,kR(e,r),o);return l.errorHandler=_R(t),l}function Mye(e,t,r,a,n){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),a&&(s.pageToken=a),n&&(s.maxResults=n);const o=t.bucketOnlyServerUrl(),l=tx(o,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new ip(l,c,Pye(e,t.bucket),u);return d.urlParams=s,d.errorHandler=f1(t),d}function Uye(e,t,r){const a=t.fullServerUrl(),n=tx(a,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new ip(n,s,Rye(e,r),o);return l.errorHandler=_R(t),l}function Qye(e,t){const r=t.fullServerUrl(),a=tx(r,e.host,e._protocol),n="DELETE",s=e.maxOperationRetryTime;function o(c,u){}const l=new ip(a,n,o,s);return l.successCodes=[200,204],l.errorHandler=_R(t),l}function Hye(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Lte(e,t,r){const a=Object.assign({},r);return a.fullPath=e.path,a.size=t.size(),a.contentType||(a.contentType=Hye(null,t)),a}function Mte(e,t,r,a,n){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let j="";for(let O=0;O<2;O++)j=j+Math.random().toString().slice(2);return j}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=Lte(t,a,n),d=Rte(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=dh.getBlob(f,a,h);if(m===null)throw _te();const g={name:u.fullPath},x=tx(s,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,w=new ip(x,v,kR(e,r),y);return w.urlParams=g,w.headers=o,w.body=m.uploadData(),w.errorHandler=f1(t),w}class zj{constructor(t,r,a,n){this.current=t,this.total=r,this.finalized=!!a,this.metadata=n||null}}function SR(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{mA(!1)}return mA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function zye(e,t,r,a,n){const s=t.bucketOnlyServerUrl(),o=Lte(t,a,n),l={name:o.fullPath},c=tx(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${a.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=Rte(o,r),h=e.maxUploadRetryTime;function m(x){SR(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{mA(!1)}return mA(fS(v)),v}const g=new ip(c,u,m,h);return g.urlParams=l,g.headers=d,g.body=f,g.errorHandler=f1(t),g}function Vye(e,t,r,a){const n={"X-Goog-Upload-Command":"query"};function s(u){const d=SR(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{mA(!1)}f||mA(!1);const h=Number(f);return mA(!isNaN(h)),new zj(h,a.size(),d==="final")}const o="POST",l=e.maxUploadRetryTime,c=new ip(r,o,s,l);return c.headers=n,c.errorHandler=f1(t),c}const MH=256*1024;function $ye(e,t,r,a,n,s,o,l){const c=new zj(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw rye();const u=c.total-c.current;let d=u;n>0&&(d=Math.min(d,n));const f=c.current,h=f+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=a.slice(f,h);if(x===null)throw _te();function v(O,B){const T=SR(O,["active","final"]),C=c.current+d,_=a.size();let S;return T==="final"?S=kR(t,s)(O,B):S=null,new zj(C,_,T==="final",S)}const y="POST",w=t.maxUploadRetryTime,j=new ip(r,y,v,w);return j.headers=g,j.body=x.uploadData(),j.progressCallback=l||null,j.errorHandler=f1(e),j}const rc={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function kB(e){switch(e){case"running":case"pausing":case"canceling":return rc.RUNNING;case"paused":return rc.PAUSED;case"success":return rc.SUCCESS;case"canceled":return rc.CANCELED;case"error":return rc.ERROR;default:return rc.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gye{constructor(t,r,a){if(uye(t)||r!=null||a!=null)this.next=t,this.error=r??void 0,this.complete=a??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class qye{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fg.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fg.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fg.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,a,n,s){if(this.sent_)throw ky("cannot .send() more than once");if(r0(t)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ky("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ky("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ky("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ky("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Kye extends qye{initXhr(){this.xhr_.responseType="text"}}function fh(){return new Kye}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wye{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,a=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=a,this._mappings=jR(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=n=>{if(this._request=void 0,this._chunkMultiplier=1,n._codeEquals(Kn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Tte(n.status,[]))if(s)n=jte();else{this.sleepTime=Math.max(this.sleepTime*2,q1e),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=n,this._transition("error")}},this._metadataErrorHandler=n=>{this._request=void 0,n._codeEquals(Kn.CANCELED)?this.completeTransitions_():(this._error=n,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((n,s)=>{this._resolve=n,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,a])=>{switch(this._state){case"running":t(r,a);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const a=zye(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(a,fh,t,r);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,a)=>{const n=Vye(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(n,fh,r,a);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=MH*this._chunkMultiplier,r=new zj(this._transferred,this._blob.size()),a=this._uploadUrl;this._resolveToken((n,s)=>{let o;try{o=$ye(this._ref._location,this._ref.storage,a,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,fh,n,s,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){MH*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const a=Lye(this._ref.storage,this._ref._location,this._mappings),n=this._ref.storage._makeRequest(a,fh,t,r);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const a=Mte(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(a,fh,t,r);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=kte(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=kB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,a,n){const s=new Gye(r||void 0,a||void 0,n||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(kB(this._state)){case rc.SUCCESS:$x(this._resolve.bind(null,this.snapshot))();break;case rc.CANCELED:case rc.ERROR:const r=this._reject;$x(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(kB(this._state)){case rc.RUNNING:case rc.PAUSED:t.next&&$x(t.next.bind(t,this.snapshot))();break;case rc.SUCCESS:t.complete&&$x(t.complete.bind(t))();break;case rc.CANCELED:case rc.ERROR:t.error&&$x(t.error.bind(t,this._error))();break;default:t.error&&$x(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(t,r){this._service=t,r instanceof kl?this._location=r:this._location=kl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Og(t,r)}get root(){const t=new kl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Dte(this._location.path)}get storage(){return this._service}get parent(){const t=kye(this._location.path);if(t===null)return null;const r=new kl(this._location.bucket,t);return new Og(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw sye(t)}}function Xye(e,t,r){e._throwIfRoot("uploadBytes");const a=Mte(e.storage,e._location,jR(),new dh(t,!0),r);return e.storage.makeRequestWithTokens(a,fh).then(n=>({metadata:n,ref:e}))}function Yye(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new Wye(e,new dh(t),r)}function Jye(e){const t={prefixes:[],items:[]};return Ute(e,t).then(()=>t)}async function Ute(e,t,r){const n=await Zye(e,{pageToken:r});t.prefixes.push(...n.prefixes),t.items.push(...n.items),n.nextPageToken!=null&&await Ute(e,t,n.nextPageToken)}function Zye(e,t){t!=null&&typeof t.maxResults=="number"&&LO("options.maxResults",1,1e3,t.maxResults);const r=t||{},a=Mye(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(a,fh)}function e2e(e){e._throwIfRoot("getDownloadURL");const t=Uye(e.storage,e._location,jR());return e.storage.makeRequestWithTokens(t,fh).then(r=>{if(r===null)throw aye();return r})}function t2e(e){e._throwIfRoot("deleteObject");const t=Qye(e.storage,e._location);return e.storage.makeRequestWithTokens(t,fh)}function r2e(e,t){const r=_ye(e._location.path,t),a=new kl(e._location.bucket,r);return new Og(e.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2e(e){return/^[A-Za-z]+:\/\//.test(e)}function n2e(e,t){return new Og(e,t)}function Qte(e,t){if(e instanceof BR){const r=e;if(r._bucket==null)throw tye();const a=new Og(r,r._bucket);return t!=null?Qte(a,t):a}else return t!==void 0?r2e(e,t):e}function s2e(e,t){if(t&&a2e(t)){if(e instanceof BR)return n2e(e,t);throw RO("To use ref(service, url), the first argument must be a Storage instance.")}else return Qte(e,t)}function UH(e,t){const r=t==null?void 0:t[Cte];return r==null?null:kl.makeFromBucketSpec(r,e)}function i2e(e,t,r,a={}){e.host=`${t}:${r}`;const n=r0(t);n&&(D_(`https://${e.host}/b`),P_("Storage",!0)),e._isUsingEmulator=!0,e._protocol=n?"https":"http";const{mockUserToken:s}=a;s&&(e._overrideAuthToken=typeof s=="string"?s:rZ(s,e.app.options.projectId))}class BR{constructor(t,r,a,n,s,o=!1){this.app=t,this._authProvider=r,this._appCheckProvider=a,this._url=n,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Ete,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$1e,this._maxUploadRetryTime=G1e,this._requests=new Set,n!=null?this._bucket=kl.makeFromBucketSpec(n,this._host):this._bucket=UH(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=kl.makeFromBucketSpec(this._url,t):this._bucket=UH(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){LO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){LO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(qc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Og(this,t)}_makeRequest(t,r,a,n,s=!0){if(this._deleted)return new iye(Ste());{const o=gye(t,this._appId,a,n,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[a,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,a,n).getPromise()}}const QH="@firebase/storage",HH="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hte="storage";function AS(e,t,r){return e=$a(e),Xye(e,t,r)}function o2e(e,t,r){return e=$a(e),Yye(e,t,r)}function l2e(e){return e=$a(e),Jye(e)}function NN(e){return e=$a(e),e2e(e)}function zte(e){return e=$a(e),t2e(e)}function rx(e,t){return e=$a(e),s2e(e,t)}function TR(e=R_(),t){e=$a(e);const a=fN(e,Hte).getImmediate({identifier:t}),n=_P("storage");return n&&c2e(a,...n),a}function c2e(e,t,r,a={}){i2e(e,t,r,a)}function u2e(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),n=e.getProvider("app-check-internal");return new BR(r,a,n,t,Wg)}function d2e(){Qm(new Dh(Hte,u2e,"PUBLIC").setMultipleInstances(!0)),td(QH,HH,""),td(QH,HH,"esm2020")}d2e();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2e="type.googleapis.com/google.protobuf.Int64Value",A2e="type.googleapis.com/google.protobuf.UInt64Value";function Vte(e,t){const r={};for(const a in e)e.hasOwnProperty(a)&&(r[a]=t(e[a]));return r}function Vj(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>Vj(t));if(typeof e=="function"||typeof e=="object")return Vte(e,t=>Vj(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Eb(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case f2e:case A2e:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Eb(t)):typeof e=="function"||typeof e=="object"?Vte(e,t=>Eb(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class uc extends nf{constructor(t,r,a){super(`${IR}/${t}`,r||""),this.details=a,Object.setPrototypeOf(this,uc.prototype)}}function h2e(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $j(e,t){let r=h2e(e),a=r,n;try{const s=t&&t.error;if(s){const o=s.status;if(typeof o=="string"){if(!zH[o])return new uc("internal","internal");r=zH[o],a=o}const l=s.message;typeof l=="string"&&(a=l),n=s.details,n!==void 0&&(n=Eb(n))}}catch{}return r==="ok"?null:new uc(r,a,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2e{constructor(t,r,a,n){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,qc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||a.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),a=await this.getMessagingToken(),n=await this.getAppCheckToken(t);return{authToken:r,messagingToken:a,appCheckToken:n}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="us-central1",p2e=/^data: (.*?)(?:\n|$)/;function g2e(e){let t=null;return{promise:new Promise((r,a)=>{t=setTimeout(()=>{a(new uc("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class x2e{constructor(t,r,a,n,s=MO,o=(...l)=>fetch(...l)){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new m2e(t,r,a,n),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=MO}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function v2e(e,t,r){const a=r0(t);e.emulatorOrigin=`http${a?"s":""}://${t}:${r}`,a&&(D_(e.emulatorOrigin),P_("Functions",!0))}function b2e(e,t,r){const a=n=>w2e(e,t,n,{});return a.stream=(n,s)=>E2e(e,t,n,s),a}async function y2e(e,t,r,a){r["Content-Type"]="application/json";let n;try{n=await a(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await n.json()}catch{}return{status:n.status,json:s}}async function $te(e,t){const r={},a=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return a.authToken&&(r.Authorization="Bearer "+a.authToken),a.messagingToken&&(r["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=a.appCheckToken),r}function w2e(e,t,r,a){const n=e._url(t);return N2e(e,n,r,a)}async function N2e(e,t,r,a){r=Vj(r);const n={data:r},s=await $te(e,a),o=a.timeout||7e4,l=g2e(o),c=await Promise.race([y2e(t,n,s,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new uc("cancelled","Firebase Functions instance was deleted.");const u=$j(c.status,c.json);if(u)throw u;if(!c.json)throw new uc("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new uc("internal","Response is missing data field.");return{data:Eb(d)}}function E2e(e,t,r,a){const n=e._url(t);return C2e(e,n,r,a||{})}async function C2e(e,t,r,a){var h;r=Vj(r);const n={data:r},s=await $te(e,a);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:s,signal:a==null?void 0:a.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new uc("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=$j(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const u=new Promise((m,g)=>{l=m,c=g});(h=a==null?void 0:a.signal)==null||h.addEventListener("abort",()=>{const m=new uc("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),f=j2e(d,l,c,a==null?void 0:a.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function j2e(e,t,r,a){const n=(o,l)=>{const c=o.match(p2e);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(Eb(d.result));return}if("message"in d){l.enqueue(Eb(d.message));return}if("error"in d){const f=$j(0,d);l.error(f),r(f);return}}catch(d){if(d instanceof uc){l.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(a!=null&&a.aborted){const u=new uc("cancelled","Request was cancelled");return o.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){l.trim()&&n(l.trim(),o),o.close();return}if(a!=null&&a.aborted){const h=new uc("cancelled","Request was cancelled");o.error(h),r(h),await e.cancel();return}l+=s.decode(u,{stream:!0});const f=l.split(`
`);l=f.pop()||"";for(const h of f)h.trim()&&n(h.trim(),o);return c()}catch(u){const d=u instanceof uc?u:$j(0,null);o.error(d),r(d)}}},cancel(){return e.cancel()}})}const VH="@firebase/functions",$H="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2e="auth-internal",_2e="app-check-internal",S2e="messaging-internal";function B2e(e){const t=(r,{instanceIdentifier:a})=>{const n=r.getProvider("app").getImmediate(),s=r.getProvider(k2e),o=r.getProvider(S2e),l=r.getProvider(_2e);return new x2e(n,s,o,l,a)};Qm(new Dh(IR,t,"PUBLIC").setMultipleInstances(!0)),td(VH,$H,e),td(VH,$H,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(e=R_(),t=MO){const a=fN($a(e),IR).getImmediate({identifier:t}),n=_P("functions");return n&&T2e(a,...n),a}function T2e(e,t,r){v2e($a(e),t,r)}function Vc(e,t,r){return b2e($a(e),t)}B2e();const I2e={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604"},A1=TP(I2e),so=QZ(A1),vr=AR(A1),OR=TR(A1),bw=Am(A1,"us-central1"),Gte=Object.freeze(Object.defineProperty({__proto__:null,app:A1,auth:so,db:vr,functions:bw,storage:OR},Symbol.toStringTag,{value:"Module"})),O2e=async(e,t)=>{try{return(await Cge(so,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},_B=async()=>{try{await _ge(so)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},F2e=async e=>{try{await Ege(so,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},qte=async e=>{try{const t=Jt(vr,"usuarios",e),r=await Uh(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontr perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var zt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(zt||{}),sa=(e=>(e.EVALUACION="Evaluacin",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedaggica",e))(sa||{}),Xp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Gua de Aprendizaje",e.RUBRICA="Rbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Xp||{});const D2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),P2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),Ps="w-6 h-6",hS="w-24 h-24",FR=()=>i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-32 h-32 object-contain"}),R2e=()=>i.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M9 18h6"}),i.jsx("path",{d:"M10 22h4"}),i.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),L2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),M2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),c2=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),u2=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Kte=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),U2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:hS,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),Q2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:hS,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),H2e=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:hS,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),z2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:hS,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),V2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),_y=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),dC=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),fC=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),AC=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Gx=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),GH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),$2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),G2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),q2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),K2e=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),hC=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),W2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),SB=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),X2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ps,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),Y2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),qH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ps,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),mC=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ps,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),J2e=[{id:zt.SUBDIRECCION,label:"Subdireccin Pedaggica",icon:i.jsx(U2e,{})},{id:zt.PROFESORADO,label:"Profesorado",icon:i.jsx(Q2e,{})},{id:zt.COORDINACION_TP,label:"Coordinacin TP",icon:i.jsx(H2e,{})},{id:zt.ESTUDIANTE,label:"Estudiantes",icon:i.jsx(z2e,{})}],Z2e={[zt.SUBDIRECCION]:[{name:"Dashboard",icon:i.jsx(V2e,{})},{name:"Administracin",icon:i.jsx(K2e,{})},{name:"Horario del liceo",icon:i.jsx(fC,{})},{name:"Multicopias",icon:i.jsx(_y,{})},{name:"Evaluacin de Ensayo",icon:i.jsx(Gx,{})},{name:"Seguimiento Curricular",icon:i.jsx(Y2e,{})},{name:"Acompaamiento docente",icon:i.jsx(q2e,{})},{name:"Anlisis Taxonmico",icon:i.jsx(qH,{})},{name:"SIMCE",icon:i.jsx(mC,{})},{name:"Interdisciplinario",icon:i.jsx(SB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:i.jsx(_y,{})},{name:"Crear horarios",icon:i.jsx(fC,{})},{name:"Seguimiento de acciones pedaggicas",icon:i.jsx(AC,{})},{name:"Inclusin",icon:i.jsx(hC,{})},{name:"Calendario Acadmico",icon:i.jsx(dC,{})},{name:"Muro de Anuncios",icon:i.jsx(c2,{})},{name:"Mensajera Interna",icon:i.jsx(u2,{})},{name:"Generador de Actas",icon:i.jsx(Gx,{})}],[zt.PROFESORADO]:[{name:"Planificacin",icon:i.jsx(GH,{})},{name:"Mis Acompaamientos",icon:i.jsx(W2e,{})},{name:"Recursos de Aprendizaje",icon:i.jsx($2e,{})},{name:"Anlisis Taxonmico",icon:i.jsx(qH,{})},{name:"SIMCE",icon:i.jsx(mC,{})},{name:"Interdisciplinario",icon:i.jsx(SB,{})},{name:"Inclusin",icon:i.jsx(hC,{})},{name:"Multicopias",icon:i.jsx(_y,{})},{name:"Actividades Remotas",icon:i.jsx(G2e,{})},{name:"Evaluacin de Ensayo",icon:i.jsx(Gx,{})},{name:"Evaluacin de Aprendizajes",icon:i.jsx(Gx,{})},{name:"Evaluaciones Formativas",icon:i.jsx(AC,{})},{name:"Desarrollo Profesional",icon:i.jsx(hC,{})},{name:"Evaluacin de Competencias",icon:i.jsx(P2e,{})},{name:"Calendario Acadmico",icon:i.jsx(dC,{})},{name:"Muro de Anuncios",icon:i.jsx(c2,{})},{name:"Mensajera Interna",icon:i.jsx(u2,{})},{name:"Generador de Actas",icon:i.jsx(_y,{})}],[zt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:i.jsx(AC,{})},{name:"Asistencia Dual",icon:i.jsx(fC,{})},{name:"Paol",icon:i.jsx(X2e,{})},{name:"SIMCE",icon:i.jsx(mC,{})},{name:"Evaluacin de Ensayo",icon:i.jsx(Gx,{})},{name:"Multicopias",icon:i.jsx(_y,{})},{name:"Gestin de Empresas",icon:i.jsx(D2e,{})},{name:"Calendario Acadmico",icon:i.jsx(dC,{})},{name:"Muro de Anuncios",icon:i.jsx(c2,{})},{name:"Mensajera Interna",icon:i.jsx(u2,{})},{name:"Alternancia TP",icon:""},{name:"Desarrollo Profesional",icon:i.jsx(hC,{})},{name:"Generador de Actas",icon:i.jsx(Gx,{})}],[zt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:i.jsx(GH,{})},{name:"Evaluacin Formativa",icon:i.jsx(AC,{})},{name:"SIMCE",icon:i.jsx(mC,{})},{name:"Tareas Interdisciplinarias",icon:i.jsx(SB,{})},{name:"Asistencia a Empresa",icon:i.jsx(fC,{})},{name:"Calendario Acadmico",icon:i.jsx(dC,{})},{name:"Muro de Anuncios",icon:i.jsx(c2,{})},{name:"Mensajera Interna",icon:i.jsx(u2,{})}]},gh=["1 Medio","2 Medio","3 Medio","4 Medio"],En=["Lengua y Literatura","Matemtica","Ingls","Filosofa","Historia y Geografa","Educacin Ciudadana","Ciencias","Ciencias para la Ciudadana","Artes","Msica","Educacin Fsica","Orientacin","Mecnica Industrial","Mecnica Automotriz","Emprendimiento","Tecnologa","Pensamiento Lgico","Competencia Lectora"],Nn=["1A","1B","1C","1D","1E","2A","2B","2C","2D","3A","3B","3C","3D","4A","4B","4C","4D"],UO=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],pA=["Lunes","Martes","Mircoles","Jueves","Viernes"],Ws=[{bloque:1,inicio:"08:30",fin:"09:10"},{bloque:2,inicio:"09:10",fin:"09:50"},{bloque:3,inicio:"10:10",fin:"10:50"},{bloque:4,inicio:"10:50",fin:"11:30"},{bloque:5,inicio:"11:40",fin:"12:20"},{bloque:6,inicio:"12:20",fin:"13:00"},{bloque:7,inicio:"13:40",fin:"14:20"},{bloque:8,inicio:"14:20",fin:"15:00"},{bloque:9,inicio:"15:10",fin:"15:50"},{bloque:10,inicio:"15:50",fin:"16:30"}],Wv={[sa.EVALUACION]:{label:"Evaluacin",icon:"",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[sa.ACTO]:{label:"Acto",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[sa.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[sa.SALIDA_PEDAGOGICA]:{label:"Salida Pedaggica",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},ewe=Object.values(Xp),BB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestin Pedaggica","Equipo Directivo","Equipo de Gestin","Consejo Escolar"],TB=["Vinculado","Desvinculado","En proceso","Empresa"],Ag=["3A","3B","3C","3D","4A","4B","4C","4D"],twe=["Quiz","Comprensin de Lectura","Trminos Pareados","Desarrollo"],Gj=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limtrofe","Trastorno Dficit Atencional (TDA)","Trastorno Dficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Especfica del Aprendizaje","Dificultad Especfica de Aprendizaje en Matemticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarizacin"],L2=[{domain:"Dominio A: Preparacin de la Enseanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que ensea, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que ensea, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemolgicas o metodolgicas en su rea.","Conoce y comprende los principios y conceptos centrales de las disciplinas que ensea, atendiendo a la permanente actualizacin curricular en su rea.","Conoce, comprende y cuestiona los principios centrales de la disciplina que ensea a la luz de nuevos paradigmas epistemolgicos o tericos, permitiendo que el trabajo o la exposicin conceptual invite al desarrollo del pensamiento crtico o la investigacin continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificacin o gestin de la clase estndar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relacin al contexto y caractersticas del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Seleccin de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las caractersticas de sus estudiantes y a la relacin con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didcticos de aprendizaje, siendo congruentes al contenido pero no a las caractersticas de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejndose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didcticos de aprendizaje congruentes con la complejidad de los contenidos y las caractersticas de sus alumnos.","Conoce y selecciona distintos recursos didcticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisicin de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluacin",levels:["Establece estrategias de evaluacin incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo adems, las metodologas empleadas previamente en clases.","Establece estrategias de evaluacin coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexin, y, la retroalimentacin descriptiva."]},{name:"Estrategias de enseanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes disean e implementan estrategias de enseanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes disean e implementan estrategias efectivas de enseanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes disean e implementan estrategias avanzadas de enseanza-aprendizaje tales como (ABP, ABD, Gamificacin, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creacin de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empata",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vnculos fundados en el respeto y/o en la empata.","Establece un clima de relaciones interpersonales respetuosas y empticas con la mayora de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos, generando situaciones concretas de cooperacin y ayuda mutua entre l/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Inters por las especialidades",levels:["No transmite inters por las especialidades, centrndose exclusivamente en su rea de desempeo.","Transmite inters general por las especialidades, no obstante no es capaz de acercarse a las caractersticas concretas de los mdulos.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha rea de desempeo."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implcitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estndar que implican un desarrollo mecnico y que no tienden hacia la consolidacin de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus caractersticas personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivacin por el aprendizaje",levels:["No transmite motivacin por el aprendizaje, la bsqueda o la indagacin.","Transmite una motivacin positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autnoma","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda.","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemtico en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participacin."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentacin de objetivos",levels:["Al iniciar las clases no presenta el objetivo o slo lo enuncia sin profundizar en l.","Al iniciar las clases presenta el objetivo de aprendizaje y el propsito, pero no logra dar cuenta de la relacin con el futuro laboral de los estudiantes o con otras reas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionndolo con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a travs de la relacin con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro."]},{name:"Clase en funcin de objetivos",levels:["No realiza su clase en funcin de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currculum nacional","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando slo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional y en el PEI."]},{name:"Introduccin de nueva informacin",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva informacin, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisin conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolacin que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentacin",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes slo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal, a travs de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensin y desempeo de sus estudiantes.","Monitorea parcialmente el grado de comprensin y desempeo de sus estudiantes, no siempre a travs de evidencia.","Monitorea constantemente el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo."]},{name:"Orientacin a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales, no obstante, la orientacin es superficial y no predispone la construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores en consonancia a elementos propios del PEI."]},{name:"Conclusin de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicacin que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora adems preguntas de metacognicin y/o autoevaluacin."]},{name:"Abordaje de errores",levels:["No aborda los errores, nicamente los seala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a travs de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogneo, descuidando la diversidad y las caractersticas particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias segn nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],Wte=["Lder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],pC=[{nombre:"Aprendiz Emergente",emoji:"",promedioMin:1,promedioMax:3.9,mensaje:"Ests comenzando tu viaje de aprendizaje! Sigue esforzndote."},{nombre:"Explorador del Conocimiento",emoji:"",promedioMin:4,promedioMax:4.9,mensaje:"Buen trabajo! Ests construyendo una base slida."},{nombre:"Arquitecto de Ideas",emoji:"",promedioMin:5,promedioMax:5.9,mensaje:"Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"",promedioMin:6,promedioMax:6.5,mensaje:"Impresionante! Tu dedicacin te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"",promedioMin:6.6,promedioMax:7,mensaje:"Extraordinario! Eres una inspiracin para tus compaeros."}],rwe=["Mecnica Industrial","Mecnica Automotriz"],awe=["INACAP","UNAB","DUOC","Universidad de Las Amricas"],nwe={"Mecnica Automotriz":["3A","3B","4A","4B"],"Mecnica Industrial":["3C","3D","4C","4D"]},swe=["Pasanta","Visita","Certificacin","Formacin en empresa"],iwe={"Mecnica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medicin y verificacin","Mecnica de banco","Torneado de piezas y conjuntos mecnicos","Fresado de piezas mecnicas","Taladrado de piezas mecnicas","Rectificado de piezas mecnicas","Fabricacin asistida por computador (CNC)"],"Mecnica Automotriz":["Ajuste de motores","Lectura de planos y manuales tcnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas elctricos y electrnicos","Mantenimiento de motores","Mantenimiento de sistemas hidrulicos y neumticos","Mantenimiento de los sistemas de transmisin y frenos","Mantenimiento de sistemas de direccin y suspensin","Emprendimiento y empleabilidad"]},owe={"Mecnica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, disel, gas e hbridos), incluyendo sistemas de control de emisiones, lubricacin y refrigeracin, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales tcnicos":["Leer e interpretar informacin tcnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnsticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulacin y disposicin de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatizacin, cierre centralizado, asientos elctricos) segn especificaciones tcnicas."],"Mantenimiento de sistemas elctricos y electrnicos":["Reemplazar, ajustar y probar sistemas elctricos y electrnicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parmetros operativos segn especificaciones."],"Mantenimiento de sistemas hidrulicos y neumticos":["Inspeccionar, diagnosticar y reparar sistemas hidrulicos y neumticos de vehculos automotrices."],"Mantenimiento de los sistemas de transmisin y frenos":["Verificar, ajustar o reemplazar componentes de transmisin y frenos, segn manual del fabricante."],"Mantenimiento de sistemas de direccin y suspensin":["Diagnosticar, alinear y corregir sistemas de direccin y suspensin, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestin, marketing y normativa vigente."]},"Mecnica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de mquinas, asegurando su operatividad y prolongando su vida til."],"Medicin y verificacin":["Utilizar instrumentos de medicin y verificacin para controlar dimensiones y tolerancias segn planos y especificaciones tcnicas."],"Mecnica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecnicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecnicos, cumpliendo con las especificaciones tcnicas y de seguridad."],"Fresado de piezas mecnicas":["Operar fresadoras para fabricar piezas mecnicas, seleccionando herramientas de corte y parmetros de mecanizado adecuados."],"Taladrado de piezas mecnicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones tcnicas y de seguridad."],"Rectificado de piezas mecnicas":["Utilizar rectificadoras para mejorar el acabado y precisin dimensional de piezas mecnicas, cumpliendo tolerancias indicadas."],"Fabricacin asistida por computador (CNC)":["Programar y operar mquinas CNC para fabricar piezas mecnicas con precisin, optimizando procesos y aplicando normas de seguridad."]}},Ah={"Liderazgo Curricular":["Planificacin y organizacin del currculo","Asegurar la cobertura y secuenciacin de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prcticas Pedaggicas en el Aula":["Estrategias de enseanza y metodologas activas","Evaluacin de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologas para apoyar la enseanza"],"Acompaamiento y Desarrollo Profesional Docente":["Observacin de clases y retroalimentacin","Planes de formacin continua y actualizacin pedaggica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluacin de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedaggicas","Evaluaciones internas y externas","Ajuste de estrategias segn resultados y metas de aprendizaje"]},KH=["Pendiente","En Proceso","Cumplida"],WH=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],lwe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[a,n]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState("login"),u=h=>{h.preventDefault(),e(a,s)},d=h=>{h.preventDefault(),t(a),c("forgot_sent")},f=()=>l==="forgot"?i.jsxs("form",{onSubmit:d,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico Registrado"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:h=>n(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperacin"})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesin"})})]}):l==="forgot_sent"?i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),i.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",i.jsx("strong",{children:a}),", hemos enviado un enlace para restablecer su contrasea."]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulacin, revise la consola del navegador para ver el enlace)."}),i.jsx("button",{type:"button",onClick:()=>{c("login"),n("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:" Volver a Iniciar Sesin"})]}):i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:h=>n(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contrasea"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>o(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:i.jsx("p",{children:r})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Olvid su contrasea?"})}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(FR,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:l==="login"?"Bienvenido/a, por favor inicie sesin":"Recuperacin de Contrasea"})]}),i.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},gC=({trigger:e,children:t,onOpen:r})=>{const[a,n]=N.useState(!1),s=N.useRef(null),o=()=>{const c=!a;n(c),c&&r&&r()},l=c=>{s.current&&!s.current.contains(c.target)&&n(!1)};return N.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),i.jsxs("div",{className:"relative",ref:s,children:[i.jsx("div",{onClick:o,children:e}),a&&i.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>n(!1),children:t})]})},XH="usuariosLiceo",cwe=({user:e,onClose:t,onSave:r})=>{const[a,n]=N.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=l=>{n({...a,[l.target.name]:l.target.value})},o=l=>{l.preventDefault();const c={...e,...a};try{const u=localStorage.getItem(XH);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(XH,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:l=>l.stopPropagation(),children:i.jsxs("form",{onSubmit:o,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),i.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:a.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:a.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrnico"}),i.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Funcin"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},YH="usuariosLiceo",uwe=({user:e,onClose:t,onSave:r})=>{const[a,n]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState(null),u=d=>{if(d.preventDefault(),c(null),!a){c("La contrasea no puede estar en blanco.");return}if(a!==s){c("Las contraseas no coinciden.");return}const f={...e,password:a};try{const h=localStorage.getItem(YH);let m=h?JSON.parse(h):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=f:m.push(f),localStorage.setItem(YH,JSON.stringify(m)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contrasea.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuracin de Cuenta"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contrasea"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:a,onChange:d=>n(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contrasea"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>o(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:i.jsx("p",{children:l})})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contrasea"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dwe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fwe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),JH=e=>{const t=fwe(e);return t.charAt(0).toUpperCase()+t.slice(1)},Xte=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),Awe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hwe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mwe=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:s,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...hwe,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:Xte("lucide",n),...!s&&!Awe(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>N.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=(e,t)=>{const r=N.forwardRef(({className:a,...n},s)=>N.createElement(mwe,{ref:s,iconNode:t,className:Xte(`lucide-${dwe(JH(e))}`,`lucide-${e}`,a),...n}));return r.displayName=JH(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pwe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],gwe=Lt("activity",pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xwe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xC=Lt("arrow-left",xwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vwe=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],bwe=Lt("arrow-up-down",vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ywe=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],wwe=Lt("award",ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nwe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],Ewe=Lt("bell-ring",Nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cwe=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],jwe=Lt("book-marked",Cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kwe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],_we=Lt("book-open-check",kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Swe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],wi=Lt("book-open",Swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bwe=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],ZH=Lt("book",Bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Twe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Iwe=Lt("brain-circuit",Twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Owe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],yw=Lt("brain",Owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fwe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ww=Lt("briefcase",Fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dwe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],M2=Lt("building-2",Dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pwe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Rwe=Lt("building",Pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lwe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],DR=Lt("calculator",Lwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mwe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Yte=Lt("calendar-check",Mwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uwe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ul=Lt("calendar",Uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qwe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],_l=Lt("chart-column",Qwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hwe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],zwe=Lt("chart-line",Hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vwe=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],$we=Lt("chart-no-axes-column-increasing",Vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gwe=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Jte=Lt("chart-no-axes-column",Gwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qwe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],U2=Lt("chart-pie",qwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kwe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Zte=Lt("check",Kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wwe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ez=Lt("chevron-down",Wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xwe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Nw=Lt("chevron-left",Xwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ywe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],PR=Lt("chevron-right",Ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ac=Lt("circle-alert",Jwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zwe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mS=Lt("circle-check-big",Zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nn=Lt("circle-check",eNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],vC=Lt("circle-plus",tNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ere=Lt("circle-question-mark",rNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],eA=Lt("circle-x",aNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sNe=Lt("circle",nNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iNe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],d2=Lt("clipboard-check",iNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oNe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Fg=Lt("clipboard-list",oNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lNe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wc=Lt("clock",lNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cNe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Qh=Lt("download",cNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uNe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],IB=Lt("external-link",uNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dNe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Q2=Lt("eye",dNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fNe=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ANe=Lt("factory",fNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hNe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],QO=Lt("file-check",hNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mNe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],pNe=Lt("file-down",mNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gNe=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],xNe=Lt("file-pen",gNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vNe=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],bNe=Lt("file-play",vNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yNe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],RR=Lt("file-spreadsheet",yNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wNe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ru=Lt("file-text",wNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NNe=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],OB=Lt("files",NNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ENe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],CNe=Lt("film",ENe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jNe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],kNe=Lt("folder-closed",jNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ne=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],tz=Lt("folder-open",_Ne);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SNe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],EN=Lt("funnel",SNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BNe=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],qj=Lt("gauge",BNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TNe=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Dg=Lt("graduation-cap",TNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const INe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ONe=Lt("hash",INe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FNe=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],tre=Lt("hourglass",FNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DNe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],PNe=Lt("image",DNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],LNe=Lt("info",RNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MNe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],rre=Lt("layout-dashboard",MNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UNe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],pS=Lt("layers",UNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QNe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],HNe=Lt("layout-grid",QNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zNe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],VNe=Lt("layout-list",zNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ne=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],rz=Lt("link-2",$Ne);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GNe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],HO=Lt("link",GNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qNe=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Xv=Lt("list-checks",qNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KNe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Co=Lt("loader-circle",KNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WNe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],XNe=Lt("mail",WNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YNe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Kj=Lt("map-pin",YNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JNe=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],ZNe=Lt("megaphone",JNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eEe=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],tEe=Lt("menu",eEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rEe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],LR=Lt("message-square",rEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aEe=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],az=Lt("notebook-pen",aEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nEe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],sEe=Lt("palette",nEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iEe=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],f2=Lt("paperclip",iEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oEe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Wj=Lt("pen-line",oEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lEe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],MR=Lt("pencil",lEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cEe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],uEe=Lt("percent",cEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dEe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],So=Lt("plus",dEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fEe=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],zO=Lt("presentation",fEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AEe=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],hEe=Lt("puzzle",AEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mEe=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],VO=Lt("refresh-ccw",mEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pEe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gA=Lt("refresh-cw",pEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gEe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],xEe=Lt("route",gEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vEe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],bEe=Lt("ruler",vEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yEe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Fl=Lt("save",yEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wEe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],vm=Lt("school",wEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NEe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],nz=Lt("scroll-text",NEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EEe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],h1=Lt("search",EEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CEe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],are=Lt("send",CEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jEe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kEe=Lt("settings",jEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ee=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],SEe=Lt("shield-check",_Ee);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BEe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hg=Lt("sparkles",BEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TEe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xh=Lt("square-pen",TEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IEe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],$O=Lt("square-plus",IEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OEe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],FEe=Lt("star",OEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Cb=Lt("target",DEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PEe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sn=Lt("trash-2",PEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const REe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Xj=Lt("trending-up",REe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LEe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ew=Lt("triangle-alert",LEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MEe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],UEe=Lt("university",MEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QEe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],m1=Lt("upload",QEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HEe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],sz=Lt("user-cog",HEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],iz=Lt("user-minus",zEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Yj=Lt("user-plus",VEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ee=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jb=Lt("user",$Ee);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GEe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],Ev=Lt("users-round",GEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Fi=Lt("users",qEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KEe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],hm=Lt("video",KEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WEe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],XEe=Lt("wand-sparkles",WEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YEe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],$5=Lt("wrench",YEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JEe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Xd=Lt("x",JEe);async function nre(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Ga()};return Object.keys(t).forEach(a=>t[a]===void 0&&delete t[a]),(await Zr(ht(vr,"notificaciones"),t)).id}function ZEe(e,t){const r=[];let a=[],n=[];const s=()=>{const o=new Map;[...a,...n].forEach(c=>{c.id&&(o.has(c.id)||o.set(c.id,c))});const l=Array.from(o.values()).sort((c,u)=>{var h,m;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((m=u.createdAt)!=null&&m.toDate?u.createdAt.toDate().getTime():0)-d});t(l)};if(e.email){const o=Dt(ht(vr,"notificaciones"),ur("docenteEmailLower","==",e.email.toLowerCase()),Yt("createdAt","desc"));r.push(nr(o,l=>{a=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const o=Dt(ht(vr,"notificaciones"),ur("docenteNombre","==",e.nombreCompleto),Yt("createdAt","desc"));r.push(nr(o,l=>{n=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(o=>o())}async function eCe(e){const t=Jt(vr,"notificaciones",e);await Bo(t,{leida:!0})}async function tCe(e){const t=Jt(vr,"notificaciones",e);await xn(t)}const oz="anunciosMuro",lz="mensajesInternos",cz="lir-read-status",rCe=({user:e})=>{if(e.fotoUrl)return i.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(a=>a).map(a=>a[0]).join("").toUpperCase();return i.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},aCe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:a,onChangeProfile:n,canChangeProfile:s,toggleSidebar:o,unreadMessagesCount:l,refreshUnreadCount:c})=>{const[u,d]=N.useState([]),[f,h]=N.useState([]),[m,g]=N.useState(!1),[x,v]=N.useState(!1),[y,w]=N.useState([]),j=N.useCallback(()=>{try{const S=localStorage.getItem(`${cz}-${e.id}`);return S?JSON.parse(S):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),O=N.useCallback(S=>{try{localStorage.setItem(`${cz}-${e.id}`,JSON.stringify(S))}catch(L){console.error("Failed to set read status:",L)}},[e.id]);N.useEffect(()=>{const S=JSON.parse(localStorage.getItem(oz)||"[]"),L=j();d(S.filter(k=>!L.announcements.includes(k.id)));const P=JSON.parse(localStorage.getItem(lz)||"[]");h(P.filter(k=>k.para===e.email).sort((k,M)=>new Date(M.fecha).getTime()-new Date(k.fecha).getTime()).slice(0,5))},[e.id,j,l]),N.useEffect(()=>{if(!(e!=null&&e.email))return;const S=ZEe({email:e.email,nombreCompleto:e.nombreCompleto},L=>{const P=L.filter(k=>k.tipo&&(k.tipo.toLowerCase()==="pie"||k.tipo==="nueva_intervencion"));w(P)});return()=>S()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const B=()=>{const S=j(),L=JSON.parse(localStorage.getItem(oz)||"[]").map(P=>P.id);S.announcements=L,O(S),d([])},T=()=>{const S=j(),P=JSON.parse(localStorage.getItem(lz)||"[]").filter(k=>k.para===e.email).map(k=>k.id);S.messages=[...new Set([...S.messages,...P])],O(S),c()},C=y.filter(S=>!S.leida).length,_=S=>{var L;try{const P=(L=S.createdAt)!=null&&L.toDate?S.createdAt.toDate():new Date(S.createdAt);return P?P.toLocaleString("es-CL"):""}catch{return""}};return i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:i.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:o,children:i.jsx(L2e,{})}),i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestin LIR"})]})]}),i.jsx("div",{className:"flex-1 flex justify-center",children:i.jsx("button",{onClick:()=>r("Calendario Acadmico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Acadmico",children:i.jsx(M2e,{})})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(gC,{onOpen:B,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[i.jsx(c2,{}),u.length>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),i.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(S=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsx("p",{className:"font-bold dark:text-slate-200",children:S.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:S.mensaje})]},S.id)),u.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),i.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),i.jsx(gC,{trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[i.jsx(hEe,{className:"w-5 h-5"}),C>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:C})]}),children:i.jsxs("div",{className:"p-2 w-80",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),i.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&i.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(S=>i.jsx("li",{className:"p-2 text-sm",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:S.titulo}),i.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:S.mensaje}),S.estudianteNombre&&i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",i.jsx("b",{children:S.estudianteNombre})]}),i.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:_(S)})]}),i.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!S.leida&&i.jsx("button",{onClick:()=>S.id&&eCe(S.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leda"}),i.jsx("button",{onClick:()=>S.id&&tCe(S.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},S.id))]})]})}),i.jsx(gC,{onOpen:T,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[i.jsx(u2,{}),l>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),i.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(S=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",S.de]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:S.asunto})]},S.id)),f.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),i.jsx("button",{onClick:()=>r("Mensajera Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),i.jsx(gC,{trigger:i.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(rCe,{user:e})}),children:i.jsxs("div",{className:"p-2",children:[i.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),i.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuracin"})}),s&&i.jsx("li",{children:i.jsx("button",{onClick:n,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:" Cambiar Vista"})}),i.jsx("li",{children:i.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesin"})})]})]})})]})]})}),m&&i.jsx(cwe,{user:e,onClose:()=>g(!1),onSave:a}),x&&i.jsx(uwe,{user:e,onClose:()=>v(!1),onSave:a})]})},nCe={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604",measurementId:void 0},UR=hQ().length?hQ()[0]:TP(nCe),st=AR(UR),Cw=QZ(UR),gS=TR(UR),QR=Object.freeze(Object.defineProperty({__proto__:null,auth:Cw,db:st,storage:gS},Symbol.toStringTag,{value:"Module"})),xS="reemplazos_docentes",sCe="usuarios",sre=e=>{var r,a,n,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(n=t.fechaActualizacion)==null?void 0:n.toDate)==null?void 0:s.call(n).toISOString())||t.fechaActualizacion}},iCe=e=>{const t=e.data();return{id:e.id,...t}},oCe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await Zr(ht(st,xS),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},lCe=async(e,t)=>{try{const r=Jt(st,xS,e),a=await Uh(r);if(!a.exists()||a.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await xn(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},cCe=(e,t,r=50)=>{try{const a=Dt(ht(st,xS),ur("userId","==",e),Yt("diaAusencia","desc"),Wd(r));return nr(a,n=>{const s=n.docs.map(sre);t(s)},n=>{console.error("Error en suscripcin a reemplazos:",n),t([])})}catch(a){return console.error("Error al crear la suscripcin de reemplazos:",a),()=>{}}},uCe=e=>{try{const t=Dt(ht(st,sCe),ur("profile","==",zt.PROFESORADO));return nr(t,a=>{const n=a.docs.map(iCe);e(n)},a=>{console.error("Error al obtener la lista de profesores:",a),e([])})}catch(t){return console.error("Error al crear la suscripcin de profesores:",t),()=>{}}},dCe=async(e,t)=>{try{if(!t.trim())return[];const r=Dt(ht(st,xS),ur("userId","==",e),Yt("diaAusencia","desc"),Wd(100)),n=(await Ir(r)).docs.map(sre),s=t.toLowerCase();return n.filter(o=>o.docenteAusente.toLowerCase().includes(s)||o.docenteReemplazante.toLowerCase().includes(s)||o.curso.toLowerCase().includes(s)||o.diaAusencia.includes(s)||o.asignaturaAusente.toLowerCase().includes(s)||o.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en bsqueda de reemplazos:",r),[]}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Jj={};Jj.version="0.18.5";var ire=1252,fCe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],HR={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},zR=function(e){fCe.indexOf(e)!=-1&&(ire=HR[0]=e)};function ACe(){zR(1252)}var Hd=function(e){zR(e)};function VR(){Hd(1200),ACe()}function uz(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function hCe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function ore(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var A2=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?hCe(e.slice(2)):t==254&&r==255?ore(e.slice(2)):t==65279?e.slice(1):e},bC=function(t){return String.fromCharCode(t)},dz=function(t){return String.fromCharCode(t)},jw,bm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function kw(e){for(var t="",r=0,a=0,n=0,s=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,a=e.charCodeAt(u++),o=(r&3)<<4|a>>4,n=e.charCodeAt(u++),l=(a&15)<<2|n>>6,c=n&63,isNaN(a)?l=c=64:isNaN(n)&&(c=64),t+=bm.charAt(s)+bm.charAt(o)+bm.charAt(l)+bm.charAt(c);return t}function su(e){var t="",r=0,a=0,n=0,s=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=bm.indexOf(e.charAt(u++)),o=bm.indexOf(e.charAt(u++)),r=s<<2|o>>4,t+=String.fromCharCode(r),l=bm.indexOf(e.charAt(u++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=bm.indexOf(e.charAt(u++)),n=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(n));return t}var da=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),n0=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Km(e){return da?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function fz(e){return da?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Xc=function(t){return da?n0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function vS(e){if(typeof ArrayBuffer>"u")return Xc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function op(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function mCe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function $R(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return $R(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var to=da?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:n0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),n=0;for(t=0,r=0;t<e.length;r+=n,++t)if(n=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function pCe(e){for(var t=[],r=0,a=e.length+250,n=Km(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)n[r++]=o;else if(o<2048)n[r++]=192|o>>6&31,n[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++s)&1023;n[r++]=240|o>>8&7,n[r++]=128|o>>2&63,n[r++]=128|l>>6&15|(o&3)<<4,n[r++]=128|l&63}else n[r++]=224|o>>12&15,n[r++]=128|o>>6&63,n[r++]=128|o&63;r>a&&(t.push(n.slice(0,r)),r=0,n=Km(65535),a=65530)}return t.push(n.slice(0,r)),to(t)}var Il=/\u0000/g,h2=/[\u0001-\u0006]/g;function Yv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function zd(e,t){var r=""+e;return r.length>=t?r:Ss("0",t-r.length)+r}function GR(e,t){var r=""+e;return r.length>=t?r:Ss(" ",t-r.length)+r}function Zj(e,t){var r=""+e;return r.length>=t?r:r+Ss(" ",t-r.length)}function gCe(e,t){var r=""+Math.round(e);return r.length>=t?r:Ss("0",t-r.length)+r}function xCe(e,t){var r=""+e;return r.length>=t?r:Ss("0",t-r.length)+r}var Az=Math.pow(2,32);function qx(e,t){if(e>Az||e<-Az)return gCe(e,t);var r=Math.round(e);return xCe(r,t)}function ek(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var hz=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],FB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function vCe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Dr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},mz={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},bCe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function tk(e,t,r){for(var a=e<0?-1:1,n=e*a,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(n);u<t&&(f=Math.floor(n),l=f*o+s,d=f*u+c,!(n-f<5e-8));)n=1/(n-f),s=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=s):(d=u,l=o)),!r)return[0,a*l,d];var h=Math.floor(a*l/d);return[h,a*l-h*d,d]}function ag(e,t,r){if(e>2958465||e<0)return null;var a=e|0,n=Math.floor(86400*(e-a)),s=0,o=[],l={D:a,T:n,u:86400*(e-a)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++n==86400&&(l.T=n=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),a<60&&(s=(s+6)%7),r&&(s=jCe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=n%60,n=Math.floor(n/60),l.M=n%60,n=Math.floor(n/60),l.H=n,l.q=s,l}var lre=new Date(1899,11,31,0,0,0),yCe=lre.getTime(),wCe=new Date(1900,2,1,0,0,0);function cre(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=wCe&&(r+=1440*60*1e3),(r-(yCe+(e.getTimezoneOffset()-lre.getTimezoneOffset())*6e4))/(1440*60*1e3)}function qR(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function NCe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function ECe(e){var t=e<0?12:11,r=qR(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function CCe(e){var t=qR(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function _w(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=ECe(e):t===10?r=e.toFixed(10).substr(0,12):r=CCe(e),qR(NCe(r.toUpperCase()))}function Pg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):_w(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ad(14,cre(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function jCe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function kCe(e,t,r,a){var n="",s=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return FB[r.m-1][1];case 5:return FB[r.m-1][0];default:return FB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return hz[r.q][0];default:return hz[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?zd(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(n=zd(s,2+a),t==="ss"?n.substr(0,2):"."+n.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?zd(c,u):"";return d}function ym(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var ure=/%/g;function _Ce(e,t,r){var a=t.replace(ure,""),n=t.length-a.length;return _h(e,a,r*Math.pow(10,2*n))+Ss("%",n)}function SCe(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return _h(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function dre(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+dre(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%n;if(s<0&&(s+=n),r=(t/Math.pow(10,s)).toPrecision(a+1+(n+s)%n),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(n+s)%n)+"."+d.substr(s)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var fre=/# (\?+)( ?)\/( ?)(\d+)/;function BCe(e,t,r){var a=parseInt(e[4],10),n=Math.round(t*a),s=Math.floor(n/a),o=n-s*a,l=a;return r+(s===0?"":""+s)+" "+(o===0?Ss(" ",e[1].length+1+e[4].length):GR(o,e[1].length)+e[2]+"/"+e[3]+zd(l,e[4].length))}function TCe(e,t,r){return r+(t===0?"":""+t)+Ss(" ",e[1].length+2+e[4].length)}var Are=/^#*0*\.([0#]+)/,hre=/\).*[0#]/,mre=/\(###\) ###\\?-####/;function El(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function pz(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function gz(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function ICe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function OCe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Uu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(hre)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Uu("n",a,r):"("+Uu("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return SCe(e,t,r);if(t.indexOf("%")!==-1)return _Ce(e,t,r);if(t.indexOf("E")!==-1)return dre(t,r);if(t.charCodeAt(0)===36)return"$"+Uu(e,t.substr(t.charAt(1)==" "?2:1),r);var n,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+qx(c,t.length);if(t.match(/^[#?]+$/))return n=qx(r,0),n==="0"&&(n=""),n.length>t.length?n:El(t.substr(0,t.length-n.length))+n;if(s=t.match(fre))return BCe(s,c,u);if(t.match(/^#+0+$/))return u+qx(c,t.length-t.indexOf("0"));if(s=t.match(Are))return n=pz(r,s[1].length).replace(/^([^\.]+)$/,"$1."+El(s[1])).replace(/\.$/,"."+El(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Ss("0",El(s[1]).length-x.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+pz(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+ym(qx(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Uu(e,t,-r):ym(""+(Math.floor(r)+ICe(r,s[1].length)))+"."+zd(gz(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Uu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Yv(Uu(e,t.replace(/[\\-]/g,""),r)),o=0,Yv(Yv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<n.length?n.charAt(o++):g==="0"?"0":""}));if(t.match(mre))return n=Uu(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=tk(c,Math.pow(10,o)-1,!1),n=""+u,d=_h("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),n+=d+s[2]+"/"+s[3],d=Zj(l[2],o),d.length<s[4].length&&(d=El(s[4].substr(s[4].length-d.length))+d),n+=d,n;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=tk(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?GR(l[1],o)+s[2]+"/"+s[3]+Zj(l[2],o):Ss(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return n=qx(r,0),t.length<=n.length?n:El(t.substr(0,t.length-n.length))+n;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=n.indexOf(".");var f=t.indexOf(".")-o,h=t.length-n.length-f;return El(t.substr(0,f)+n+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=gz(r,s[1].length),r<0?"-"+Uu(e,t,-r):ym(OCe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?zd(0,3-g.length):"")+g})+"."+zd(o,s[1].length);switch(t){case"###,##0.00":return Uu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=ym(qx(c,0));return m!=="0"?u+m:"";case"###,###.00":return Uu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Uu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function FCe(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return _h(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function DCe(e,t,r){var a=t.replace(ure,""),n=t.length-a.length;return _h(e,a,r*Math.pow(10,2*n))+Ss("%",n)}function pre(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+pre(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%n;if(s<0&&(s+=n),r=(t/Math.pow(10,s)).toPrecision(a+1+(n+s)%n),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(n+s)%n)+"."+d.substr(s)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Gf(e,t,r){if(e.charCodeAt(0)===40&&!t.match(hre)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Gf("n",a,r):"("+Gf("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return FCe(e,t,r);if(t.indexOf("%")!==-1)return DCe(e,t,r);if(t.indexOf("E")!==-1)return pre(t,r);if(t.charCodeAt(0)===36)return"$"+Gf(e,t.substr(t.charAt(1)==" "?2:1),r);var n,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+zd(c,t.length);if(t.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>t.length?n:El(t.substr(0,t.length-n.length))+n;if(s=t.match(fre))return TCe(s,c,u);if(t.match(/^#+0+$/))return u+zd(c,t.length-t.indexOf("0"));if(s=t.match(Are))return n=(""+r).replace(/^([^\.]+)$/,"$1."+El(s[1])).replace(/\.$/,"."+El(s[1])),n=n.replace(/\.(\d*)$/,function(g,x){return"."+x+Ss("0",El(s[1]).length-x.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+ym(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Gf(e,t,-r):ym(""+r)+"."+Ss("0",s[1].length);if(s=t.match(/^#,#*,#0/))return Gf(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Yv(Gf(e,t.replace(/[\\-]/g,""),r)),o=0,Yv(Yv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<n.length?n.charAt(o++):g==="0"?"0":""}));if(t.match(mre))return n=Gf(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=tk(c,Math.pow(10,o)-1,!1),n=""+u,d=_h("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),n+=d+s[2]+"/"+s[3],d=Zj(l[2],o),d.length<s[4].length&&(d=El(s[4].substr(s[4].length-d.length))+d),n+=d,n;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=tk(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?GR(l[1],o)+s[2]+"/"+s[3]+Zj(l[2],o):Ss(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return n=""+r,t.length<=n.length?n:El(t.substr(0,t.length-n.length))+n;if(s=t.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=n.indexOf(".");var f=t.indexOf(".")-o,h=t.length-n.length-f;return El(t.substr(0,f)+n+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Gf(e,t,-r):ym(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?zd(0,3-g.length):"")+g})+"."+zd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=ym(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return Gf(e,t.slice(0,t.lastIndexOf(".")),r)+El(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function _h(e,t,r){return(r|0)===r?Gf(e,t,r):Uu(e,t,r)}function PCe(e){for(var t=[],r=!1,a=0,n=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(n,a-n),n=a+1}if(t[t.length]=e.substr(n),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var gre=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function p1(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":ek(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(gre))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function RCe(e,t,r,a){for(var n=[],s="",o=0,l="",c="t",u,d,f,h="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!ek(e,o))throw new Error("unrecognized character "+l+" in "+e);n[n.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(f);n[n.length]={t:"t",v:s},++o;break;case"\\":var m=e.charAt(++o),g=m==="("||m===")"?m:"t";n[n.length]={t:g,v:m},++o;break;case"_":n[n.length]={t:"t",v:" "},o+=2;break;case"@":n[n.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=ag(t,r,e.charAt(o+1)==="2"),u==null))return"";n[n.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=ag(t,r),u==null))return"";for(s=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),n[n.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var x={t:l,v:l};if(u==null&&(u=ag(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",o+=5,h="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(x.v=u.H>=12?"":""),x.t="T",o+=5,h="h"):(x.t="t",++o),u==null&&x.t==="T")return"";n[n.length]=x,c=l;break;case"[":for(s=l;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(gre)){if(u==null&&(u=ag(t,r),u==null))return"";n[n.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",p1(e)||(n[n.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<e.length&&(l=e.charAt(o))==="0";)s+=l;n[n.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)s+=l;n[n.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++o)===l;)s+=l;n[n.length]={t:l,v:s},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":n[n.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);n[n.length]={t:"D",v:s};break;case" ":n[n.length]={t:l,v:l},++o;break;case"$":n[n.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);n[n.length]={t:"t",v:l},++o;break}var v=0,y=0,w;for(o=n.length-1,c="t";o>=0;--o)switch(n[o].t){case"h":case"H":n[o].t=h,c="h",v<1&&(v=1);break;case"s":(w=n[o].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=n[o].t;break;case"m":c==="s"&&(n[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&n[o].v.match(/[Hh]/)&&(v=1),v<2&&n[o].v.match(/[Mm]/)&&(v=2),v<3&&n[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var j="",O;for(o=0;o<n.length;++o)switch(n[o].t){case"t":case"T":case" ":case"D":break;case"X":n[o].v="",n[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[o].v=kCe(n[o].t.charCodeAt(0),n[o].v,u,y),n[o].t="t";break;case"n":case"?":for(O=o+1;n[O]!=null&&((l=n[O].t)==="?"||l==="D"||(l===" "||l==="t")&&n[O+1]!=null&&(n[O+1].t==="?"||n[O+1].t==="t"&&n[O+1].v==="/")||n[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(n[O].v==="/"||n[O].v===" "&&n[O+1]!=null&&n[O+1].t=="?"));)n[o].v+=n[O].v,n[O]={v:"",t:";"},++O;j+=n[o].v,o=O-1;break;case"G":n[o].t="t",n[o].v=Pg(t,r);break}var B="",T,C;if(j.length>0){j.charCodeAt(0)==40?(T=t<0&&j.charCodeAt(0)===45?-t:t,C=_h("n",j,T)):(T=t<0&&a>1?-t:t,C=_h("n",j,T),T<0&&n[0]&&n[0].t=="t"&&(C=C.substr(1),n[0].v="-"+n[0].v)),O=C.length-1;var _=n.length;for(o=0;o<n.length;++o)if(n[o]!=null&&n[o].t!="t"&&n[o].v.indexOf(".")>-1){_=o;break}var S=n.length;if(_===n.length&&C.indexOf("E")===-1){for(o=n.length-1;o>=0;--o)n[o]==null||"n?".indexOf(n[o].t)===-1||(O>=n[o].v.length-1?(O-=n[o].v.length,n[o].v=C.substr(O+1,n[o].v.length)):O<0?n[o].v="":(n[o].v=C.substr(0,O+1),O=-1),n[o].t="t",S=o);O>=0&&S<n.length&&(n[S].v=C.substr(0,O+1)+n[S].v)}else if(_!==n.length&&C.indexOf("E")===-1){for(O=C.indexOf(".")-1,o=_;o>=0;--o)if(!(n[o]==null||"n?".indexOf(n[o].t)===-1)){for(d=n[o].v.indexOf(".")>-1&&o===_?n[o].v.indexOf(".")-1:n[o].v.length-1,B=n[o].v.substr(d+1);d>=0;--d)O>=0&&(n[o].v.charAt(d)==="0"||n[o].v.charAt(d)==="#")&&(B=C.charAt(O--)+B);n[o].v=B,n[o].t="t",S=o}for(O>=0&&S<n.length&&(n[S].v=C.substr(0,O+1)+n[S].v),O=C.indexOf(".")+1,o=_;o<n.length;++o)if(!(n[o]==null||"n?(".indexOf(n[o].t)===-1&&o!==_)){for(d=n[o].v.indexOf(".")>-1&&o===_?n[o].v.indexOf(".")+1:0,B=n[o].v.substr(0,d);d<n[o].v.length;++d)O<C.length&&(B+=C.charAt(O++));n[o].v=B,n[o].t="t",S=o}}}for(o=0;o<n.length;++o)n[o]!=null&&"n?".indexOf(n[o].t)>-1&&(T=a>1&&t<0&&o>0&&n[o-1].v==="-"?-t:t,n[o].v=_h(n[o].t,n[o].v,T),n[o].t="t");var L="";for(o=0;o!==n.length;++o)n[o]!=null&&(L+=n[o].v);return L}var xz=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function vz(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function LCe(e,t){var r=PCe(e),a=r.length,n=r[a-1].indexOf("@");if(a<4&&n>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(xz),l=r[1].match(xz);return vz(t,o)?[a,r[0]]:vz(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,s]}function ad(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:Dr)[e],a==null&&(a=r.table&&r.table[mz[e]]||Dr[mz[e]]),a==null&&(a=bCe[e]||"General");break}if(ek(a,0))return Pg(t,r);t instanceof Date&&(t=cre(t,r.date1904));var n=LCe(a,t);if(ek(n[1]))return Pg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return RCe(n[1],t,r,n[0])}function Sh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Dr[r]==null){t<0&&(t=r);continue}if(Dr[r]==e){t=r;break}}t<0&&(t=391)}return Dr[t]=e,t}function bS(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Sh(e[t],t)}function g1(){Dr=vCe()}var MCe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},xre=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function UCe(e){var t=typeof e=="number"?Dr[e]:e;return t=t.replace(xre,"(\\d+)"),new RegExp("^"+t+"$")}function QCe(e,t,r){var a=-1,n=-1,s=-1,o=-1,l=-1,c=-1;(t.match(xre)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=m;break;case"d":s=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:n=m;break}}),c>=0&&l==-1&&n>=0&&(l=n,n=-1);var u=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:a==-1&&n==-1&&s==-1?d:u+"T"+d}var HCe=function(){var e={};e.version="1.2.0";function t(){for(var C=0,_=new Array(256),S=0;S!=256;++S)C=S,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,_[S]=C;return typeof Int32Array<"u"?new Int32Array(_):_}var r=t();function a(C){var _=0,S=0,L=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)P[L]=C[L];for(L=0;L!=256;++L)for(S=C[L],_=256+L;_<4096;_+=256)S=P[_]=S>>>8^C[S&255];var k=[];for(L=1;L!=16;++L)k[L-1]=typeof Int32Array<"u"?P.subarray(L*256,L*256+256):P.slice(L*256,L*256+256);return k}var n=a(r),s=n[0],o=n[1],l=n[2],c=n[3],u=n[4],d=n[5],f=n[6],h=n[7],m=n[8],g=n[9],x=n[10],v=n[11],y=n[12],w=n[13],j=n[14];function O(C,_){for(var S=_^-1,L=0,P=C.length;L<P;)S=S>>>8^r[(S^C.charCodeAt(L++))&255];return~S}function B(C,_){for(var S=_^-1,L=C.length-15,P=0;P<L;)S=j[C[P++]^S&255]^w[C[P++]^S>>8&255]^y[C[P++]^S>>16&255]^v[C[P++]^S>>>24]^x[C[P++]]^g[C[P++]]^m[C[P++]]^h[C[P++]]^f[C[P++]]^d[C[P++]]^u[C[P++]]^c[C[P++]]^l[C[P++]]^o[C[P++]]^s[C[P++]]^r[C[P++]];for(L+=15;P<L;)S=S>>>8^r[(S^C[P++])&255];return~S}function T(C,_){for(var S=_^-1,L=0,P=C.length,k=0,M=0;L<P;)k=C.charCodeAt(L++),k<128?S=S>>>8^r[(S^k)&255]:k<2048?(S=S>>>8^r[(S^(192|k>>6&31))&255],S=S>>>8^r[(S^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,M=C.charCodeAt(L++)&1023,S=S>>>8^r[(S^(240|k>>8&7))&255],S=S>>>8^r[(S^(128|k>>2&63))&255],S=S>>>8^r[(S^(128|M>>6&15|(k&3)<<4))&255],S=S>>>8^r[(S^(128|M&63))&255]):(S=S>>>8^r[(S^(224|k>>12&15))&255],S=S>>>8^r[(S^(128|k>>6&63))&255],S=S>>>8^r[(S^(128|k&63))&255]);return~S}return e.table=r,e.bstr=O,e.buf=B,e.str=T,e}(),Cr=function(){var t={};t.version="1.2.1";function r(we,Ue){for(var Oe=we.split("/"),De=Ue.split("/"),ge=0,he=0,Be=Math.min(Oe.length,De.length);ge<Be;++ge){if(he=Oe[ge].length-De[ge].length)return he;if(Oe[ge]!=De[ge])return Oe[ge]<De[ge]?-1:1}return Oe.length-De.length}function a(we){if(we.charAt(we.length-1)=="/")return we.slice(0,-1).indexOf("/")===-1?we:a(we.slice(0,-1));var Ue=we.lastIndexOf("/");return Ue===-1?we:we.slice(0,Ue+1)}function n(we){if(we.charAt(we.length-1)=="/")return n(we.slice(0,-1));var Ue=we.lastIndexOf("/");return Ue===-1?we:we.slice(Ue+1)}function s(we,Ue){typeof Ue=="string"&&(Ue=new Date(Ue));var Oe=Ue.getHours();Oe=Oe<<6|Ue.getMinutes(),Oe=Oe<<5|Ue.getSeconds()>>>1,we.write_shift(2,Oe);var De=Ue.getFullYear()-1980;De=De<<4|Ue.getMonth()+1,De=De<<5|Ue.getDate(),we.write_shift(2,De)}function o(we){var Ue=we.read_shift(2)&65535,Oe=we.read_shift(2)&65535,De=new Date,ge=Oe&31;Oe>>>=5;var he=Oe&15;Oe>>>=4,De.setMilliseconds(0),De.setFullYear(Oe+1980),De.setMonth(he-1),De.setDate(ge);var Be=Ue&31;Ue>>>=5;var Qe=Ue&63;return Ue>>>=6,De.setHours(Ue),De.setMinutes(Qe),De.setSeconds(Be<<1),De}function l(we){Eo(we,0);for(var Ue={},Oe=0;we.l<=we.length-4;){var De=we.read_shift(2),ge=we.read_shift(2),he=we.l+ge,Be={};switch(De){case 21589:Oe=we.read_shift(1),Oe&1&&(Be.mtime=we.read_shift(4)),ge>5&&(Oe&2&&(Be.atime=we.read_shift(4)),Oe&4&&(Be.ctime=we.read_shift(4))),Be.mtime&&(Be.mt=new Date(Be.mtime*1e3));break}we.l=he,Ue[De]=Be}return Ue}var c;function u(){return c||(c={})}function d(we,Ue){if(we[0]==80&&we[1]==75)return Pr(we,Ue);if((we[0]|32)==109&&(we[1]|32)==105)return Rs(we,Ue);if(we.length<512)throw new Error("CFB file size "+we.length+" < 512");var Oe=3,De=512,ge=0,he=0,Be=0,Qe=0,Fe=0,qe=[],Xe=we.slice(0,512);Eo(Xe,0);var yt=f(Xe);switch(Oe=yt[0],Oe){case 3:De=512;break;case 4:De=4096;break;case 0:if(yt[1]==0)return Pr(we,Ue);default:throw new Error("Major Version: Expected 3 or 4 saw "+Oe)}De!==512&&(Xe=we.slice(0,De),Eo(Xe,28));var wt=we.slice(0,De);h(Xe,Oe);var Ht=Xe.read_shift(4,"i");if(Oe===3&&Ht!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ht);Xe.l+=4,Be=Xe.read_shift(4,"i"),Xe.l+=4,Xe.chk("00100000","Mini Stream Cutoff Size: "),Qe=Xe.read_shift(4,"i"),ge=Xe.read_shift(4,"i"),Fe=Xe.read_shift(4,"i"),he=Xe.read_shift(4,"i");for(var Tt=-1,Vt=0;Vt<109&&(Tt=Xe.read_shift(4,"i"),!(Tt<0));++Vt)qe[Vt]=Tt;var jr=m(we,De);v(Fe,he,jr,De,qe);var ea=w(jr,Be,qe,De);ea[Be].name="!Directory",ge>0&&Qe!==M&&(ea[Qe].name="!MiniFAT"),ea[qe[0]].name="!FAT",ea.fat_addrs=qe,ea.ssz=De;var ta={},ia=[],gs=[],To=[];j(Be,ea,jr,ia,ge,ta,gs,Qe),g(gs,To,ia),ia.shift();var xs={FileIndex:gs,FullPaths:To};return Ue&&Ue.raw&&(xs.raw={header:wt,sectors:jr}),xs}function f(we){if(we[we.l]==80&&we[we.l+1]==75)return[0,0];we.chk(U,"Header Signature: "),we.l+=16;var Ue=we.read_shift(2,"u");return[we.read_shift(2,"u"),Ue]}function h(we,Ue){var Oe=9;switch(we.l+=2,Oe=we.read_shift(2)){case 9:if(Ue!=3)throw new Error("Sector Shift: Expected 9 saw "+Oe);break;case 12:if(Ue!=4)throw new Error("Sector Shift: Expected 12 saw "+Oe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Oe)}we.chk("0600","Mini Sector Shift: "),we.chk("000000000000","Reserved: ")}function m(we,Ue){for(var Oe=Math.ceil(we.length/Ue)-1,De=[],ge=1;ge<Oe;++ge)De[ge-1]=we.slice(ge*Ue,(ge+1)*Ue);return De[Oe-1]=we.slice(Oe*Ue),De}function g(we,Ue,Oe){for(var De=0,ge=0,he=0,Be=0,Qe=0,Fe=Oe.length,qe=[],Xe=[];De<Fe;++De)qe[De]=Xe[De]=De,Ue[De]=Oe[De];for(;Qe<Xe.length;++Qe)De=Xe[Qe],ge=we[De].L,he=we[De].R,Be=we[De].C,qe[De]===De&&(ge!==-1&&qe[ge]!==ge&&(qe[De]=qe[ge]),he!==-1&&qe[he]!==he&&(qe[De]=qe[he])),Be!==-1&&(qe[Be]=De),ge!==-1&&De!=qe[De]&&(qe[ge]=qe[De],Xe.lastIndexOf(ge)<Qe&&Xe.push(ge)),he!==-1&&De!=qe[De]&&(qe[he]=qe[De],Xe.lastIndexOf(he)<Qe&&Xe.push(he));for(De=1;De<Fe;++De)qe[De]===De&&(he!==-1&&qe[he]!==he?qe[De]=qe[he]:ge!==-1&&qe[ge]!==ge&&(qe[De]=qe[ge]));for(De=1;De<Fe;++De)if(we[De].type!==0){if(Qe=De,Qe!=qe[Qe])do Qe=qe[Qe],Ue[De]=Ue[Qe]+"/"+Ue[De];while(Qe!==0&&qe[Qe]!==-1&&Qe!=qe[Qe]);qe[De]=-1}for(Ue[0]+="/",De=1;De<Fe;++De)we[De].type!==2&&(Ue[De]+="/")}function x(we,Ue,Oe){for(var De=we.start,ge=we.size,he=[],Be=De;Oe&&ge>0&&Be>=0;)he.push(Ue.slice(Be*k,Be*k+k)),ge-=k,Be=Yp(Oe,Be*4);return he.length===0?Ct(0):to(he).slice(0,we.size)}function v(we,Ue,Oe,De,ge){var he=M;if(we===M){if(Ue!==0)throw new Error("DIFAT chain shorter than expected")}else if(we!==-1){var Be=Oe[we],Qe=(De>>>2)-1;if(!Be)return;for(var Fe=0;Fe<Qe&&(he=Yp(Be,Fe*4))!==M;++Fe)ge.push(he);v(Yp(Be,De-4),Ue-1,Oe,De,ge)}}function y(we,Ue,Oe,De,ge){var he=[],Be=[];ge||(ge=[]);var Qe=De-1,Fe=0,qe=0;for(Fe=Ue;Fe>=0;){ge[Fe]=!0,he[he.length]=Fe,Be.push(we[Fe]);var Xe=Oe[Math.floor(Fe*4/De)];if(qe=Fe*4&Qe,De<4+qe)throw new Error("FAT boundary crossed: "+Fe+" 4 "+De);if(!we[Xe])break;Fe=Yp(we[Xe],qe)}return{nodes:he,data:Tz([Be])}}function w(we,Ue,Oe,De){var ge=we.length,he=[],Be=[],Qe=[],Fe=[],qe=De-1,Xe=0,yt=0,wt=0,Ht=0;for(Xe=0;Xe<ge;++Xe)if(Qe=[],wt=Xe+Ue,wt>=ge&&(wt-=ge),!Be[wt]){Fe=[];var Tt=[];for(yt=wt;yt>=0;){Tt[yt]=!0,Be[yt]=!0,Qe[Qe.length]=yt,Fe.push(we[yt]);var Vt=Oe[Math.floor(yt*4/De)];if(Ht=yt*4&qe,De<4+Ht)throw new Error("FAT boundary crossed: "+yt+" 4 "+De);if(!we[Vt]||(yt=Yp(we[Vt],Ht),Tt[yt]))break}he[wt]={nodes:Qe,data:Tz([Fe])}}return he}function j(we,Ue,Oe,De,ge,he,Be,Qe){for(var Fe=0,qe=De.length?2:0,Xe=Ue[we].data,yt=0,wt=0,Ht;yt<Xe.length;yt+=128){var Tt=Xe.slice(yt,yt+128);Eo(Tt,64),wt=Tt.read_shift(2),Ht=e8(Tt,0,wt-qe),De.push(Ht);var Vt={name:Ht,type:Tt.read_shift(1),color:Tt.read_shift(1),L:Tt.read_shift(4,"i"),R:Tt.read_shift(4,"i"),C:Tt.read_shift(4,"i"),clsid:Tt.read_shift(16),state:Tt.read_shift(4,"i"),start:0,size:0},jr=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);jr!==0&&(Vt.ct=O(Tt,Tt.l-8));var ea=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);ea!==0&&(Vt.mt=O(Tt,Tt.l-8)),Vt.start=Tt.read_shift(4,"i"),Vt.size=Tt.read_shift(4,"i"),Vt.size<0&&Vt.start<0&&(Vt.size=Vt.type=0,Vt.start=M,Vt.name=""),Vt.type===5?(Fe=Vt.start,ge>0&&Fe!==M&&(Ue[Fe].name="!StreamData")):Vt.size>=4096?(Vt.storage="fat",Ue[Vt.start]===void 0&&(Ue[Vt.start]=y(Oe,Vt.start,Ue.fat_addrs,Ue.ssz)),Ue[Vt.start].name=Vt.name,Vt.content=Ue[Vt.start].data.slice(0,Vt.size)):(Vt.storage="minifat",Vt.size<0?Vt.size=0:Fe!==M&&Vt.start!==M&&Ue[Fe]&&(Vt.content=x(Vt,Ue[Fe].data,(Ue[Qe]||{}).data))),Vt.content&&Eo(Vt.content,0),he[Ht]=Vt,Be.push(Vt)}}function O(we,Ue){return new Date((Gc(we,Ue+4)/1e7*Math.pow(2,32)+Gc(we,Ue)/1e7-11644473600)*1e3)}function B(we,Ue){return u(),d(c.readFileSync(we),Ue)}function T(we,Ue){var Oe=Ue&&Ue.type;switch(Oe||da&&Buffer.isBuffer(we)&&(Oe="buffer"),Oe||"base64"){case"file":return B(we,Ue);case"base64":return d(Xc(su(we)),Ue);case"binary":return d(Xc(we),Ue)}return d(we,Ue)}function C(we,Ue){var Oe=Ue||{},De=Oe.root||"Root Entry";if(we.FullPaths||(we.FullPaths=[]),we.FileIndex||(we.FileIndex=[]),we.FullPaths.length!==we.FileIndex.length)throw new Error("inconsistent CFB structure");we.FullPaths.length===0&&(we.FullPaths[0]=De+"/",we.FileIndex[0]={name:De,type:5}),Oe.CLSID&&(we.FileIndex[0].clsid=Oe.CLSID),_(we)}function _(we){var Ue="Sh33tJ5";if(!Cr.find(we,"/"+Ue)){var Oe=Ct(4);Oe[0]=55,Oe[1]=Oe[3]=50,Oe[2]=54,we.FileIndex.push({name:Ue,type:2,content:Oe,size:4,L:69,R:69,C:69}),we.FullPaths.push(we.FullPaths[0]+Ue),S(we)}}function S(we,Ue){C(we);for(var Oe=!1,De=!1,ge=we.FullPaths.length-1;ge>=0;--ge){var he=we.FileIndex[ge];switch(he.type){case 0:De?Oe=!0:(we.FileIndex.pop(),we.FullPaths.pop());break;case 1:case 2:case 5:De=!0,isNaN(he.R*he.L*he.C)&&(Oe=!0),he.R>-1&&he.L>-1&&he.R==he.L&&(Oe=!0);break;default:Oe=!0;break}}if(!(!Oe&&!Ue)){var Be=new Date(1987,1,19),Qe=0,Fe=Object.create?Object.create(null):{},qe=[];for(ge=0;ge<we.FullPaths.length;++ge)Fe[we.FullPaths[ge]]=!0,we.FileIndex[ge].type!==0&&qe.push([we.FullPaths[ge],we.FileIndex[ge]]);for(ge=0;ge<qe.length;++ge){var Xe=a(qe[ge][0]);De=Fe[Xe],De||(qe.push([Xe,{name:n(Xe).replace("/",""),type:1,clsid:Q,ct:Be,mt:Be,content:null}]),Fe[Xe]=!0)}for(qe.sort(function(Ht,Tt){return r(Ht[0],Tt[0])}),we.FullPaths=[],we.FileIndex=[],ge=0;ge<qe.length;++ge)we.FullPaths[ge]=qe[ge][0],we.FileIndex[ge]=qe[ge][1];for(ge=0;ge<qe.length;++ge){var yt=we.FileIndex[ge],wt=we.FullPaths[ge];if(yt.name=n(wt).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||Q,ge===0)yt.C=qe.length>1?1:-1,yt.size=0,yt.type=5;else if(wt.slice(-1)=="/"){for(Qe=ge+1;Qe<qe.length&&a(we.FullPaths[Qe])!=wt;++Qe);for(yt.C=Qe>=qe.length?-1:Qe,Qe=ge+1;Qe<qe.length&&a(we.FullPaths[Qe])!=a(wt);++Qe);yt.R=Qe>=qe.length?-1:Qe,yt.type=1}else a(we.FullPaths[ge+1]||"")==a(wt)&&(yt.R=ge+1),yt.type=2}}}function L(we,Ue){var Oe=Ue||{};if(Oe.fileType=="mad")return Zt(we,Oe);switch(S(we),Oe.fileType){case"zip":return Fn(we,Oe)}var De=function(Ht){for(var Tt=0,Vt=0,jr=0;jr<Ht.FileIndex.length;++jr){var ea=Ht.FileIndex[jr];if(ea.content){var ta=ea.content.length;ta>0&&(ta<4096?Tt+=ta+63>>6:Vt+=ta+511>>9)}}for(var ia=Ht.FullPaths.length+3>>2,gs=Tt+7>>3,To=Tt+127>>7,xs=gs+Vt+ia+To,ii=xs+127>>7,Ls=ii<=109?0:Math.ceil((ii-109)/127);xs+ii+Ls+127>>7>ii;)Ls=++ii<=109?0:Math.ceil((ii-109)/127);var Ei=[1,Ls,ii,To,ia,Vt,Tt,0];return Ht.FileIndex[0].size=Tt<<6,Ei[7]=(Ht.FileIndex[0].start=Ei[0]+Ei[1]+Ei[2]+Ei[3]+Ei[4]+Ei[5])+(Ei[6]+7>>3),Ei}(we),ge=Ct(De[7]<<9),he=0,Be=0;{for(he=0;he<8;++he)ge.write_shift(1,z[he]);for(he=0;he<8;++he)ge.write_shift(2,0);for(ge.write_shift(2,62),ge.write_shift(2,3),ge.write_shift(2,65534),ge.write_shift(2,9),ge.write_shift(2,6),he=0;he<3;++he)ge.write_shift(2,0);for(ge.write_shift(4,0),ge.write_shift(4,De[2]),ge.write_shift(4,De[0]+De[1]+De[2]+De[3]-1),ge.write_shift(4,0),ge.write_shift(4,4096),ge.write_shift(4,De[3]?De[0]+De[1]+De[2]-1:M),ge.write_shift(4,De[3]),ge.write_shift(-4,De[1]?De[0]-1:M),ge.write_shift(4,De[1]),he=0;he<109;++he)ge.write_shift(-4,he<De[2]?De[1]+he:-1)}if(De[1])for(Be=0;Be<De[1];++Be){for(;he<236+Be*127;++he)ge.write_shift(-4,he<De[2]?De[1]+he:-1);ge.write_shift(-4,Be===De[1]-1?M:Be+1)}var Qe=function(Ht){for(Be+=Ht;he<Be-1;++he)ge.write_shift(-4,he+1);Ht&&(++he,ge.write_shift(-4,M))};for(Be=he=0,Be+=De[1];he<Be;++he)ge.write_shift(-4,q.DIFSECT);for(Be+=De[2];he<Be;++he)ge.write_shift(-4,q.FATSECT);Qe(De[3]),Qe(De[4]);for(var Fe=0,qe=0,Xe=we.FileIndex[0];Fe<we.FileIndex.length;++Fe)Xe=we.FileIndex[Fe],Xe.content&&(qe=Xe.content.length,!(qe<4096)&&(Xe.start=Be,Qe(qe+511>>9)));for(Qe(De[6]+7>>3);ge.l&511;)ge.write_shift(-4,q.ENDOFCHAIN);for(Be=he=0,Fe=0;Fe<we.FileIndex.length;++Fe)Xe=we.FileIndex[Fe],Xe.content&&(qe=Xe.content.length,!(!qe||qe>=4096)&&(Xe.start=Be,Qe(qe+63>>6)));for(;ge.l&511;)ge.write_shift(-4,q.ENDOFCHAIN);for(he=0;he<De[4]<<2;++he){var yt=we.FullPaths[he];if(!yt||yt.length===0){for(Fe=0;Fe<17;++Fe)ge.write_shift(4,0);for(Fe=0;Fe<3;++Fe)ge.write_shift(4,-1);for(Fe=0;Fe<12;++Fe)ge.write_shift(4,0);continue}Xe=we.FileIndex[he],he===0&&(Xe.start=Xe.size?Xe.start-1:M);var wt=he===0&&Oe.root||Xe.name;if(qe=2*(wt.length+1),ge.write_shift(64,wt,"utf16le"),ge.write_shift(2,qe),ge.write_shift(1,Xe.type),ge.write_shift(1,Xe.color),ge.write_shift(-4,Xe.L),ge.write_shift(-4,Xe.R),ge.write_shift(-4,Xe.C),Xe.clsid)ge.write_shift(16,Xe.clsid,"hex");else for(Fe=0;Fe<4;++Fe)ge.write_shift(4,0);ge.write_shift(4,Xe.state||0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,Xe.start),ge.write_shift(4,Xe.size),ge.write_shift(4,0)}for(he=1;he<we.FileIndex.length;++he)if(Xe=we.FileIndex[he],Xe.size>=4096)if(ge.l=Xe.start+1<<9,da&&Buffer.isBuffer(Xe.content))Xe.content.copy(ge,ge.l,0,Xe.size),ge.l+=Xe.size+511&-512;else{for(Fe=0;Fe<Xe.size;++Fe)ge.write_shift(1,Xe.content[Fe]);for(;Fe&511;++Fe)ge.write_shift(1,0)}for(he=1;he<we.FileIndex.length;++he)if(Xe=we.FileIndex[he],Xe.size>0&&Xe.size<4096)if(da&&Buffer.isBuffer(Xe.content))Xe.content.copy(ge,ge.l,0,Xe.size),ge.l+=Xe.size+63&-64;else{for(Fe=0;Fe<Xe.size;++Fe)ge.write_shift(1,Xe.content[Fe]);for(;Fe&63;++Fe)ge.write_shift(1,0)}if(da)ge.l=ge.length;else for(;ge.l<ge.length;)ge.write_shift(1,0);return ge}function P(we,Ue){var Oe=we.FullPaths.map(function(Fe){return Fe.toUpperCase()}),De=Oe.map(function(Fe){var qe=Fe.split("/");return qe[qe.length-(Fe.slice(-1)=="/"?2:1)]}),ge=!1;Ue.charCodeAt(0)===47?(ge=!0,Ue=Oe[0].slice(0,-1)+Ue):ge=Ue.indexOf("/")!==-1;var he=Ue.toUpperCase(),Be=ge===!0?Oe.indexOf(he):De.indexOf(he);if(Be!==-1)return we.FileIndex[Be];var Qe=!he.match(h2);for(he=he.replace(Il,""),Qe&&(he=he.replace(h2,"!")),Be=0;Be<Oe.length;++Be)if((Qe?Oe[Be].replace(h2,"!"):Oe[Be]).replace(Il,"")==he||(Qe?De[Be].replace(h2,"!"):De[Be]).replace(Il,"")==he)return we.FileIndex[Be];return null}var k=64,M=-2,U="d0cf11e0a1b11ae1",z=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:M,FREESECT:-1,HEADER_SIGNATURE:U,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function V(we,Ue,Oe){u();var De=L(we,Oe);c.writeFileSync(Ue,De)}function Y(we){for(var Ue=new Array(we.length),Oe=0;Oe<we.length;++Oe)Ue[Oe]=String.fromCharCode(we[Oe]);return Ue.join("")}function K(we,Ue){var Oe=L(we,Ue);switch(Ue&&Ue.type||"buffer"){case"file":return u(),c.writeFileSync(Ue.filename,Oe),Oe;case"binary":return typeof Oe=="string"?Oe:Y(Oe);case"base64":return kw(typeof Oe=="string"?Oe:Y(Oe));case"buffer":if(da)return Buffer.isBuffer(Oe)?Oe:n0(Oe);case"array":return typeof Oe=="string"?Xc(Oe):Oe}return Oe}var J;function R(we){try{var Ue=we.InflateRaw,Oe=new Ue;if(Oe._processChunk(new Uint8Array([3,0]),Oe._finishFlushFlag),Oe.bytesRead)J=we;else throw new Error("zlib does not expose bytesRead")}catch(De){console.error("cannot use native zlib: "+(De.message||De))}}function F(we,Ue){if(!J)return br(we,Ue);var Oe=J.InflateRaw,De=new Oe,ge=De._processChunk(we.slice(we.l),De._finishFlushFlag);return we.l+=De.bytesRead,ge}function W(we){return J?J.deflateRawSync(we):Et(we)}var X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ie(we){var Ue=(we<<1|we<<11)&139536|(we<<5|we<<15)&558144;return(Ue>>16|Ue>>8|Ue)&255}for(var ae=typeof Uint8Array<"u",Ae=ae?new Uint8Array(256):[],ke=0;ke<256;++ke)Ae[ke]=ie(ke);function re(we,Ue){var Oe=Ae[we&255];return Ue<=8?Oe>>>8-Ue:(Oe=Oe<<8|Ae[we>>8&255],Ue<=16?Oe>>>16-Ue:(Oe=Oe<<8|Ae[we>>16&255],Oe>>>24-Ue))}function Re(we,Ue){var Oe=Ue&7,De=Ue>>>3;return(we[De]|(Oe<=6?0:we[De+1]<<8))>>>Oe&3}function Le(we,Ue){var Oe=Ue&7,De=Ue>>>3;return(we[De]|(Oe<=5?0:we[De+1]<<8))>>>Oe&7}function Te(we,Ue){var Oe=Ue&7,De=Ue>>>3;return(we[De]|(Oe<=4?0:we[De+1]<<8))>>>Oe&15}function de(we,Ue){var Oe=Ue&7,De=Ue>>>3;return(we[De]|(Oe<=3?0:we[De+1]<<8))>>>Oe&31}function Ce(we,Ue){var Oe=Ue&7,De=Ue>>>3;return(we[De]|(Oe<=1?0:we[De+1]<<8))>>>Oe&127}function me(we,Ue,Oe){var De=Ue&7,ge=Ue>>>3,he=(1<<Oe)-1,Be=we[ge]>>>De;return Oe<8-De||(Be|=we[ge+1]<<8-De,Oe<16-De)||(Be|=we[ge+2]<<16-De,Oe<24-De)||(Be|=we[ge+3]<<24-De),Be&he}function ye(we,Ue,Oe){var De=Ue&7,ge=Ue>>>3;return De<=5?we[ge]|=(Oe&7)<<De:(we[ge]|=Oe<<De&255,we[ge+1]=(Oe&7)>>8-De),Ue+3}function oe(we,Ue,Oe){var De=Ue&7,ge=Ue>>>3;return Oe=(Oe&1)<<De,we[ge]|=Oe,Ue+1}function fe(we,Ue,Oe){var De=Ue&7,ge=Ue>>>3;return Oe<<=De,we[ge]|=Oe&255,Oe>>>=8,we[ge+1]=Oe,Ue+8}function be(we,Ue,Oe){var De=Ue&7,ge=Ue>>>3;return Oe<<=De,we[ge]|=Oe&255,Oe>>>=8,we[ge+1]=Oe&255,we[ge+2]=Oe>>>8,Ue+16}function Pe(we,Ue){var Oe=we.length,De=2*Oe>Ue?2*Oe:Ue+5,ge=0;if(Oe>=Ue)return we;if(da){var he=fz(De);if(we.copy)we.copy(he);else for(;ge<we.length;++ge)he[ge]=we[ge];return he}else if(ae){var Be=new Uint8Array(De);if(Be.set)Be.set(we);else for(;ge<Oe;++ge)Be[ge]=we[ge];return Be}return we.length=De,we}function $e(we){for(var Ue=new Array(we),Oe=0;Oe<we;++Oe)Ue[Oe]=0;return Ue}function Ke(we,Ue,Oe){var De=1,ge=0,he=0,Be=0,Qe=0,Fe=we.length,qe=ae?new Uint16Array(32):$e(32);for(he=0;he<32;++he)qe[he]=0;for(he=Fe;he<Oe;++he)we[he]=0;Fe=we.length;var Xe=ae?new Uint16Array(Fe):$e(Fe);for(he=0;he<Fe;++he)qe[ge=we[he]]++,De<ge&&(De=ge),Xe[he]=0;for(qe[0]=0,he=1;he<=De;++he)qe[he+16]=Qe=Qe+qe[he-1]<<1;for(he=0;he<Fe;++he)Qe=we[he],Qe!=0&&(Xe[he]=qe[Qe+16]++);var yt=0;for(he=0;he<Fe;++he)if(yt=we[he],yt!=0)for(Qe=re(Xe[he],De)>>De-yt,Be=(1<<De+4-yt)-1;Be>=0;--Be)Ue[Qe|Be<<yt]=yt&15|he<<4;return De}var nt=ae?new Uint16Array(512):$e(512),He=ae?new Uint16Array(32):$e(32);if(!ae){for(var it=0;it<512;++it)nt[it]=0;for(it=0;it<32;++it)He[it]=0}(function(){for(var we=[],Ue=0;Ue<32;Ue++)we.push(5);Ke(we,He,32);var Oe=[];for(Ue=0;Ue<=143;Ue++)Oe.push(8);for(;Ue<=255;Ue++)Oe.push(9);for(;Ue<=279;Ue++)Oe.push(7);for(;Ue<=287;Ue++)Oe.push(8);Ke(Oe,nt,288)})();var xt=function(){for(var Ue=ae?new Uint8Array(32768):[],Oe=0,De=0;Oe<le.length-1;++Oe)for(;De<le[Oe+1];++De)Ue[De]=Oe;for(;De<32768;++De)Ue[De]=29;var ge=ae?new Uint8Array(259):[];for(Oe=0,De=0;Oe<ne.length-1;++Oe)for(;De<ne[Oe+1];++De)ge[De]=Oe;function he(Qe,Fe){for(var qe=0;qe<Qe.length;){var Xe=Math.min(65535,Qe.length-qe),yt=qe+Xe==Qe.length;for(Fe.write_shift(1,+yt),Fe.write_shift(2,Xe),Fe.write_shift(2,~Xe&65535);Xe-- >0;)Fe[Fe.l++]=Qe[qe++]}return Fe.l}function Be(Qe,Fe){for(var qe=0,Xe=0,yt=ae?new Uint16Array(32768):[];Xe<Qe.length;){var wt=Math.min(65535,Qe.length-Xe);if(wt<10){for(qe=ye(Fe,qe,+(Xe+wt==Qe.length)),qe&7&&(qe+=8-(qe&7)),Fe.l=qe/8|0,Fe.write_shift(2,wt),Fe.write_shift(2,~wt&65535);wt-- >0;)Fe[Fe.l++]=Qe[Xe++];qe=Fe.l*8;continue}qe=ye(Fe,qe,+(Xe+wt==Qe.length)+2);for(var Ht=0;wt-- >0;){var Tt=Qe[Xe];Ht=(Ht<<5^Tt)&32767;var Vt=-1,jr=0;if((Vt=yt[Ht])&&(Vt|=Xe&-32768,Vt>Xe&&(Vt-=32768),Vt<Xe))for(;Qe[Vt+jr]==Qe[Xe+jr]&&jr<250;)++jr;if(jr>2){Tt=ge[jr],Tt<=22?qe=fe(Fe,qe,Ae[Tt+1]>>1)-1:(fe(Fe,qe,3),qe+=5,fe(Fe,qe,Ae[Tt-23]>>5),qe+=3);var ea=Tt<8?0:Tt-4>>2;ea>0&&(be(Fe,qe,jr-ne[Tt]),qe+=ea),Tt=Ue[Xe-Vt],qe=fe(Fe,qe,Ae[Tt]>>3),qe-=3;var ta=Tt<4?0:Tt-2>>1;ta>0&&(be(Fe,qe,Xe-Vt-le[Tt]),qe+=ta);for(var ia=0;ia<jr;++ia)yt[Ht]=Xe&32767,Ht=(Ht<<5^Qe[Xe])&32767,++Xe;wt-=jr-1}else Tt<=143?Tt=Tt+48:qe=oe(Fe,qe,1),qe=fe(Fe,qe,Ae[Tt]),yt[Ht]=Xe&32767,++Xe}qe=fe(Fe,qe,0)-1}return Fe.l=(qe+7)/8|0,Fe.l}return function(Fe,qe){return Fe.length<8?he(Fe,qe):Be(Fe,qe)}}();function Et(we){var Ue=Ct(50+Math.floor(we.length*1.1)),Oe=xt(we,Ue);return Ue.slice(0,Oe)}var gt=ae?new Uint16Array(32768):$e(32768),Ve=ae?new Uint16Array(32768):$e(32768),Bt=ae?new Uint16Array(128):$e(128),dr=1,er=1;function Er(we,Ue){var Oe=de(we,Ue)+257;Ue+=5;var De=de(we,Ue)+1;Ue+=5;var ge=Te(we,Ue)+4;Ue+=4;for(var he=0,Be=ae?new Uint8Array(19):$e(19),Qe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Fe=1,qe=ae?new Uint8Array(8):$e(8),Xe=ae?new Uint8Array(8):$e(8),yt=Be.length,wt=0;wt<ge;++wt)Be[X[wt]]=he=Le(we,Ue),Fe<he&&(Fe=he),qe[he]++,Ue+=3;var Ht=0;for(qe[0]=0,wt=1;wt<=Fe;++wt)Xe[wt]=Ht=Ht+qe[wt-1]<<1;for(wt=0;wt<yt;++wt)(Ht=Be[wt])!=0&&(Qe[wt]=Xe[Ht]++);var Tt=0;for(wt=0;wt<yt;++wt)if(Tt=Be[wt],Tt!=0){Ht=Ae[Qe[wt]]>>8-Tt;for(var Vt=(1<<7-Tt)-1;Vt>=0;--Vt)Bt[Ht|Vt<<Tt]=Tt&7|wt<<3}var jr=[];for(Fe=1;jr.length<Oe+De;)switch(Ht=Bt[Ce(we,Ue)],Ue+=Ht&7,Ht>>>=3){case 16:for(he=3+Re(we,Ue),Ue+=2,Ht=jr[jr.length-1];he-- >0;)jr.push(Ht);break;case 17:for(he=3+Le(we,Ue),Ue+=3;he-- >0;)jr.push(0);break;case 18:for(he=11+Ce(we,Ue),Ue+=7;he-- >0;)jr.push(0);break;default:jr.push(Ht),Fe<Ht&&(Fe=Ht);break}var ea=jr.slice(0,Oe),ta=jr.slice(Oe);for(wt=Oe;wt<286;++wt)ea[wt]=0;for(wt=De;wt<30;++wt)ta[wt]=0;return dr=Ke(ea,gt,286),er=Ke(ta,Ve,30),Ue}function $r(we,Ue){if(we[0]==3&&!(we[1]&3))return[Km(Ue),2];for(var Oe=0,De=0,ge=fz(Ue||1<<18),he=0,Be=ge.length>>>0,Qe=0,Fe=0;(De&1)==0;){if(De=Le(we,Oe),Oe+=3,De>>>1)De>>1==1?(Qe=9,Fe=5):(Oe=Er(we,Oe),Qe=dr,Fe=er);else{Oe&7&&(Oe+=8-(Oe&7));var qe=we[Oe>>>3]|we[(Oe>>>3)+1]<<8;if(Oe+=32,qe>0)for(!Ue&&Be<he+qe&&(ge=Pe(ge,he+qe),Be=ge.length);qe-- >0;)ge[he++]=we[Oe>>>3],Oe+=8;continue}for(;;){!Ue&&Be<he+32767&&(ge=Pe(ge,he+32767),Be=ge.length);var Xe=me(we,Oe,Qe),yt=De>>>1==1?nt[Xe]:gt[Xe];if(Oe+=yt&15,yt>>>=4,(yt>>>8&255)===0)ge[he++]=yt;else{if(yt==256)break;yt-=257;var wt=yt<8?0:yt-4>>2;wt>5&&(wt=0);var Ht=he+ne[yt];wt>0&&(Ht+=me(we,Oe,wt),Oe+=wt),Xe=me(we,Oe,Fe),yt=De>>>1==1?He[Xe]:Ve[Xe],Oe+=yt&15,yt>>>=4;var Tt=yt<4?0:yt-2>>1,Vt=le[yt];for(Tt>0&&(Vt+=me(we,Oe,Tt),Oe+=Tt),!Ue&&Be<Ht&&(ge=Pe(ge,Ht+100),Be=ge.length);he<Ht;)ge[he]=ge[he-Vt],++he}}}return Ue?[ge,Oe+7>>>3]:[ge.slice(0,he),Oe+7>>>3]}function br(we,Ue){var Oe=we.slice(we.l||0),De=$r(Oe,Ue);return we.l+=De[1],De[0]}function kn(we,Ue){if(we)typeof console<"u"&&console.error(Ue);else throw new Error(Ue)}function Pr(we,Ue){var Oe=we;Eo(Oe,0);var De=[],ge=[],he={FileIndex:De,FullPaths:ge};C(he,{root:Ue.root});for(var Be=Oe.length-4;(Oe[Be]!=80||Oe[Be+1]!=75||Oe[Be+2]!=5||Oe[Be+3]!=6)&&Be>=0;)--Be;Oe.l=Be+4,Oe.l+=4;var Qe=Oe.read_shift(2);Oe.l+=6;var Fe=Oe.read_shift(4);for(Oe.l=Fe,Be=0;Be<Qe;++Be){Oe.l+=20;var qe=Oe.read_shift(4),Xe=Oe.read_shift(4),yt=Oe.read_shift(2),wt=Oe.read_shift(2),Ht=Oe.read_shift(2);Oe.l+=8;var Tt=Oe.read_shift(4),Vt=l(Oe.slice(Oe.l+yt,Oe.l+yt+wt));Oe.l+=yt+wt+Ht;var jr=Oe.l;Oe.l=Tt+4,Pa(Oe,qe,Xe,he,Vt),Oe.l=jr}return he}function Pa(we,Ue,Oe,De,ge){we.l+=2;var he=we.read_shift(2),Be=we.read_shift(2),Qe=o(we);if(he&8257)throw new Error("Unsupported ZIP encryption");for(var Fe=we.read_shift(4),qe=we.read_shift(4),Xe=we.read_shift(4),yt=we.read_shift(2),wt=we.read_shift(2),Ht="",Tt=0;Tt<yt;++Tt)Ht+=String.fromCharCode(we[we.l++]);if(wt){var Vt=l(we.slice(we.l,we.l+wt));(Vt[21589]||{}).mt&&(Qe=Vt[21589].mt),((ge||{})[21589]||{}).mt&&(Qe=ge[21589].mt)}we.l+=wt;var jr=we.slice(we.l,we.l+qe);switch(Be){case 8:jr=F(we,Xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Be)}var ea=!1;he&8&&(Fe=we.read_shift(4),Fe==134695760&&(Fe=we.read_shift(4),ea=!0),qe=we.read_shift(4),Xe=we.read_shift(4)),qe!=Ue&&kn(ea,"Bad compressed size: "+Ue+" != "+qe),Xe!=Oe&&kn(ea,"Bad uncompressed size: "+Oe+" != "+Xe),la(De,Ht,jr,{unsafe:!0,mt:Qe})}function Fn(we,Ue){var Oe=Ue||{},De=[],ge=[],he=Ct(1),Be=Oe.compression?8:0,Qe=0,Fe=0,qe=0,Xe=0,yt=0,wt=we.FullPaths[0],Ht=wt,Tt=we.FileIndex[0],Vt=[],jr=0;for(Fe=1;Fe<we.FullPaths.length;++Fe)if(Ht=we.FullPaths[Fe].slice(wt.length),Tt=we.FileIndex[Fe],!(!Tt.size||!Tt.content||Ht=="Sh33tJ5")){var ea=Xe,ta=Ct(Ht.length);for(qe=0;qe<Ht.length;++qe)ta.write_shift(1,Ht.charCodeAt(qe)&127);ta=ta.slice(0,ta.l),Vt[yt]=HCe.buf(Tt.content,0);var ia=Tt.content;Be==8&&(ia=W(ia)),he=Ct(30),he.write_shift(4,67324752),he.write_shift(2,20),he.write_shift(2,Qe),he.write_shift(2,Be),Tt.mt?s(he,Tt.mt):he.write_shift(4,0),he.write_shift(-4,Vt[yt]),he.write_shift(4,ia.length),he.write_shift(4,Tt.content.length),he.write_shift(2,ta.length),he.write_shift(2,0),Xe+=he.length,De.push(he),Xe+=ta.length,De.push(ta),Xe+=ia.length,De.push(ia),he=Ct(46),he.write_shift(4,33639248),he.write_shift(2,0),he.write_shift(2,20),he.write_shift(2,Qe),he.write_shift(2,Be),he.write_shift(4,0),he.write_shift(-4,Vt[yt]),he.write_shift(4,ia.length),he.write_shift(4,Tt.content.length),he.write_shift(2,ta.length),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(4,0),he.write_shift(4,ea),jr+=he.l,ge.push(he),jr+=ta.length,ge.push(ta),++yt}return he=Ct(22),he.write_shift(4,101010256),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,yt),he.write_shift(2,yt),he.write_shift(4,jr),he.write_shift(4,Xe),he.write_shift(2,0),to([to(De),to(ge),he])}var Rr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function mr(we,Ue){if(we.ctype)return we.ctype;var Oe=we.name||"",De=Oe.match(/\.([^\.]+)$/);return De&&Rr[De[1]]||Ue&&(De=(Oe=Ue).match(/[\.\\]([^\.\\])+$/),De&&Rr[De[1]])?Rr[De[1]]:"application/octet-stream"}function Yr(we){for(var Ue=kw(we),Oe=[],De=0;De<Ue.length;De+=76)Oe.push(Ue.slice(De,De+76));return Oe.join(`\r
`)+`\r
`}function ps(we){var Ue=we.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(qe){var Xe=qe.charCodeAt(0).toString(16).toUpperCase();return"="+(Xe.length==1?"0"+Xe:Xe)});Ue=Ue.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ue.charAt(0)==`
`&&(Ue="=0D"+Ue.slice(1)),Ue=Ue.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Oe=[],De=Ue.split(`\r
`),ge=0;ge<De.length;++ge){var he=De[ge];if(he.length==0){Oe.push("");continue}for(var Be=0;Be<he.length;){var Qe=76,Fe=he.slice(Be,Be+Qe);Fe.charAt(Qe-1)=="="?Qe--:Fe.charAt(Qe-2)=="="?Qe-=2:Fe.charAt(Qe-3)=="="&&(Qe-=3),Fe=he.slice(Be,Be+Qe),Be+=Qe,Be<he.length&&(Fe+="="),Oe.push(Fe)}}return Oe.join(`\r
`)}function Ya(we){for(var Ue=[],Oe=0;Oe<we.length;++Oe){for(var De=we[Oe];Oe<=we.length&&De.charAt(De.length-1)=="=";)De=De.slice(0,De.length-1)+we[++Oe];Ue.push(De)}for(var ge=0;ge<Ue.length;++ge)Ue[ge]=Ue[ge].replace(/[=][0-9A-Fa-f]{2}/g,function(he){return String.fromCharCode(parseInt(he.slice(1),16))});return Xc(Ue.join(`\r
`))}function Dn(we,Ue,Oe){for(var De="",ge="",he="",Be,Qe=0;Qe<10;++Qe){var Fe=Ue[Qe];if(!Fe||Fe.match(/^\s*$/))break;var qe=Fe.match(/^(.*?):\s*([^\s].*)$/);if(qe)switch(qe[1].toLowerCase()){case"content-location":De=qe[2].trim();break;case"content-type":he=qe[2].trim();break;case"content-transfer-encoding":ge=qe[2].trim();break}}switch(++Qe,ge.toLowerCase()){case"base64":Be=Xc(su(Ue.slice(Qe).join("")));break;case"quoted-printable":Be=Ya(Ue.slice(Qe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ge)}var Xe=la(we,De.slice(Oe.length),Be,{unsafe:!0});he&&(Xe.ctype=he)}function Rs(we,Ue){if(Y(we.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Oe=Ue&&Ue.root||"",De=(da&&Buffer.isBuffer(we)?we.toString("binary"):Y(we)).split(`\r
`),ge=0,he="";for(ge=0;ge<De.length;++ge)if(he=De[ge],!!/^Content-Location:/i.test(he)&&(he=he.slice(he.indexOf("file")),Oe||(Oe=he.slice(0,he.lastIndexOf("/")+1)),he.slice(0,Oe.length)!=Oe))for(;Oe.length>0&&(Oe=Oe.slice(0,Oe.length-1),Oe=Oe.slice(0,Oe.lastIndexOf("/")+1),he.slice(0,Oe.length)!=Oe););var Be=(De[1]||"").match(/boundary="(.*?)"/);if(!Be)throw new Error("MAD cannot find boundary");var Qe="--"+(Be[1]||""),Fe=[],qe=[],Xe={FileIndex:Fe,FullPaths:qe};C(Xe);var yt,wt=0;for(ge=0;ge<De.length;++ge){var Ht=De[ge];Ht!==Qe&&Ht!==Qe+"--"||(wt++&&Dn(Xe,De.slice(yt,ge),Oe),yt=ge)}return Xe}function Zt(we,Ue){var Oe=Ue||{},De=Oe.boundary||"SheetJS";De="------="+De;for(var ge=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+De.slice(2)+'"',"","",""],he=we.FullPaths[0],Be=he,Qe=we.FileIndex[0],Fe=1;Fe<we.FullPaths.length;++Fe)if(Be=we.FullPaths[Fe].slice(he.length),Qe=we.FileIndex[Fe],!(!Qe.size||!Qe.content||Be=="Sh33tJ5")){Be=Be.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(jr){return"_x"+jr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(jr){return"_u"+jr.charCodeAt(0).toString(16)+"_"});for(var qe=Qe.content,Xe=da&&Buffer.isBuffer(qe)?qe.toString("binary"):Y(qe),yt=0,wt=Math.min(1024,Xe.length),Ht=0,Tt=0;Tt<=wt;++Tt)(Ht=Xe.charCodeAt(Tt))>=32&&Ht<128&&++yt;var Vt=yt>=wt*4/5;ge.push(De),ge.push("Content-Location: "+(Oe.root||"file:///C:/SheetJS/")+Be),ge.push("Content-Transfer-Encoding: "+(Vt?"quoted-printable":"base64")),ge.push("Content-Type: "+mr(Qe,Be)),ge.push(""),ge.push(Vt?ps(Xe):Yr(Xe))}return ge.push(De+`--\r
`),ge.join(`\r
`)}function xa(we){var Ue={};return C(Ue,we),Ue}function la(we,Ue,Oe,De){var ge=De&&De.unsafe;ge||C(we);var he=!ge&&Cr.find(we,Ue);if(!he){var Be=we.FullPaths[0];Ue.slice(0,Be.length)==Be?Be=Ue:(Be.slice(-1)!="/"&&(Be+="/"),Be=(Be+Ue).replace("//","/")),he={name:n(Ue),type:2},we.FileIndex.push(he),we.FullPaths.push(Be),ge||Cr.utils.cfb_gc(we)}return he.content=Oe,he.size=Oe?Oe.length:0,De&&(De.CLSID&&(he.clsid=De.CLSID),De.mt&&(he.mt=De.mt),De.ct&&(he.ct=De.ct)),he}function Ia(we,Ue){C(we);var Oe=Cr.find(we,Ue);if(Oe){for(var De=0;De<we.FileIndex.length;++De)if(we.FileIndex[De]==Oe)return we.FileIndex.splice(De,1),we.FullPaths.splice(De,1),!0}return!1}function Ka(we,Ue,Oe){C(we);var De=Cr.find(we,Ue);if(De){for(var ge=0;ge<we.FileIndex.length;++ge)if(we.FileIndex[ge]==De)return we.FileIndex[ge].name=n(Oe),we.FullPaths[ge]=Oe,!0}return!1}function Ja(we){S(we,!0)}return t.find=P,t.read=T,t.parse=d,t.write=K,t.writeFile=V,t.utils={cfb_new:xa,cfb_add:la,cfb_del:Ia,cfb_mov:Ka,cfb_gc:Ja,ReadShift:H2,CheckField:Ure,prep_blob:Eo,bconcat:to,use_zlib:R,_deflateRaw:Et,_inflateRaw:br,consts:q},t}();function zCe(e){return typeof e=="string"?vS(e):Array.isArray(e)?mCe(e):e}function CN(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=vS(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?sA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var n=new Blob([zCe(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,e);if(typeof saveAs<"u")return saveAs(n,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=op(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function VCe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Ds(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function bz(e,t){for(var r=[],a=Ds(e),n=0;n!==a.length;++n)r[e[a[n]][t]]==null&&(r[e[a[n]][t]]=a[n]);return r}function yS(e){for(var t=[],r=Ds(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function wS(e){for(var t=[],r=Ds(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function $Ce(e){for(var t=[],r=Ds(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var rk=new Date(1899,11,30,0,0,0);function Di(e,t){var r=e.getTime(),a=rk.getTime()+(e.getTimezoneOffset()-rk.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var vre=new Date,GCe=rk.getTime()+(vre.getTimezoneOffset()-rk.getTimezoneOffset())*6e4,yz=vre.getTimezoneOffset();function NS(e){var t=new Date;return t.setTime(e*24*60*60*1e3+GCe),t.getTimezoneOffset()!==yz&&t.setTime(t.getTime()+(t.getTimezoneOffset()-yz)*6e4),t}function qCe(e){var t=0,r=0,a=!1,n=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=n.length;++s)if(n[s]){switch(r=1,s>3&&(a=!0),n[s].slice(n[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[s].slice(n[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(n[s],10)}return t}var wz=new Date("2017-02-19T19:06:09.000Z"),bre=isNaN(wz.getFullYear())?new Date("2/19/17"):wz,KCe=bre.getFullYear()==2017;function Gn(e,t){var r=new Date(e);if(KCe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(bre.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Rg(e,t){if(da&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return sA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return sA(ore(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return sA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return sA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var a=[],n=0;n!=e.length;++n)a.push(String.fromCharCode(e[n]));return a.join("")}function qn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=qn(e[r]));return t}function Ss(e,t){for(var r="";r.length<t;)r+=e;return r}function Yd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(n,s){return r=-r,s}),!isNaN(t=Number(a)))?t/r:t}var WCe=["january","february","march","april","may","june","july","august","september","october","november","december"];function kb(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),n=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&WCe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(n>0||s>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var XCe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,n){if(e||typeof a=="string")return r.split(a);for(var s=r.split(a),o=[s[0]],l=1;l<s.length;++l)o.push(n),o.push(s[l]);return o}}();function yre(e){return e?e.content&&e.type?Rg(e.content,!0):e.data?A2(e.data):e.asNodeBuffer&&da?A2(e.asNodeBuffer().toString("binary")):e.asBinary?A2(e.asBinary()):e._data&&e._data.getContent?A2(Rg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function wre(e){if(!e)return null;if(e.data)return uz(e.data);if(e.asNodeBuffer&&da)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?uz(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function YCe(e){return e&&e.name.slice(-4)===".bin"?wre(e):yre(e)}function Vu(e,t){for(var r=e.FullPaths||Ds(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),n=a.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||n==o)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function KR(e,t){var r=Vu(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function mi(e,t,r){if(!r)return YCe(KR(e,t));if(!t)return null;try{return mi(e,t)}catch{return null}}function Yc(e,t,r){if(!r)return yre(KR(e,t));if(!t)return null;try{return Yc(e,t)}catch{return null}}function JCe(e,t,r){return wre(KR(e,t))}function Nz(e){for(var t=e.FullPaths||Ds(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function na(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return da?a=n0(r):a=pCe(r),Cr.utils.cfb_add(e,t,a)}Cr.utils.cfb_add(e,t,r)}else e.file(t,r)}function WR(){return Cr.utils.cfb_new()}function Nre(e,t){switch(t.type){case"base64":return Cr.read(e,{type:"base64"});case"binary":return Cr.read(e,{type:"binary"});case"buffer":case"array":return Cr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function m2(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var n=a.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var ni=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ZCe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Ez=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,e5e=/<[^>]*>/g,ml=ni.match(Ez)?Ez:e5e,t5e=/<\w*:/,r5e=/<(\/?)\w+:/;function Vr(e,t,r){for(var a={},n=0,s=0;n!==e.length&&!((s=e.charCodeAt(n))===32||s===10||s===13);++n);if(t||(a[0]=e.slice(0,n)),n===e.length)return a;var o=e.match(ZCe),l=0,c="",u=0,d="",f="",h=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(n=f.charCodeAt(s+1))==34||n==39?1:0,c=f.slice(s+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),a[d]=c,a[d.toLowerCase()]=c;else{var m=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(a[m]&&d.slice(l-3,l)=="ext")continue;a[m]=c,a[m.toLowerCase()]=c}}return a}function EA(e){return e.replace(r5e,"<$1")}var Ere={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},XR=yS(Ere),Fa=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var n=a+"",s=n.indexOf("<![CDATA[");if(s==-1)return n.replace(e,function(l,c){return Ere[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=n.indexOf("]]>");return r(n.slice(0,s))+n.slice(s+9,o)+r(n.slice(o+3))}}(),YR=/[&<>'"]/g,a5e=/[\u0000-\u0008\u000b-\u001f]/g;function pn(e){var t=e+"";return t.replace(YR,function(r){return XR[r]}).replace(a5e,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Cz(e){return pn(e).replace(/ /g,"_x0020_")}var Cre=/[\u0000-\u001f]/g;function JR(e){var t=e+"";return t.replace(YR,function(r){return XR[r]}).replace(/\n/g,"<br/>").replace(Cre,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function n5e(e){var t=e+"";return t.replace(YR,function(r){return XR[r]}).replace(Cre,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var jz=function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}}();function s5e(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Vn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function DB(e){for(var t="",r=0,a=0,n=0,s=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(n=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=n&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(n&63)<<6|s&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(n&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function kz(e){var t=Km(2*e.length),r,a,n=1,s=0,o=0,l;for(a=0;a<e.length;a+=n)n=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),n=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),n=3):(n=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function _z(e){return n0(e,"binary").toString("utf8")}var yC="foo bar baz",jn=da&&(_z(yC)==DB(yC)&&_z||kz(yC)==DB(yC)&&kz)||DB,sA=da?function(e){return n0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,n=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,n=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(n>>18&7))),t.push(String.fromCharCode(144+(n>>12&63))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},Sw=function(){var e={};return function(r,a){var n=r+"|"+(a||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),jre=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<e.length;++n)a=a.replace(e[n][0],e[n][1]);return a}}(),i5e=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),o5e=/<\/?(?:vt:)?variant>/g,l5e=/<(?:vt:)([^>]*)>([\s\S]*)</;function Sz(e,t){var r=Vr(e),a=e.match(i5e(r.baseType))||[],n=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return n}return a.forEach(function(s){var o=s.replace(o5e,"").match(l5e);o&&n.push({v:jn(o[2]),t:o[1]})}),n}var kre=/(^\s|\s$|\n)/;function jo(e,t){return"<"+e+(t.match(kre)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Bw(e){return Ds(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function $t(e,t,r){return"<"+e+(r!=null?Bw(r):"")+(t!=null?(t.match(kre)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function GO(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function c5e(e,t){switch(typeof e){case"string":var r=$t("vt:lpwstr",pn(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return $t((e|0)==e?"vt:i4":"vt:r8",pn(String(e)));case"boolean":return $t("vt:bool",e?"true":"false")}if(e instanceof Date)return $t("vt:filetime",GO(e));throw new Error("Unable to serialize "+e)}function ZR(e){if(da&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return jn(op($R(e)));throw new Error("Bad input format: expected Buffer or string")}var Tw=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ii={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},ax=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],$c={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function u5e(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),n=e[t+6]&15,s=5;s>=0;--s)n=n*256+e[t+s];return a==2047?n==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,n+=Math.pow(2,52)),r*Math.pow(2,a-52)*n)}function d5e(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,n=0,s=0,o=a?-t:t;isFinite(o)?o==0?n=s=0:(n=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-n),n<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?n=-1022:(s-=Math.pow(2,52),n+=1023)):(n=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[r+l]=s&255;e[r+6]=(n&15)<<4|s&15,e[r+7]=n>>4|a}var Bz=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var n=0,s=e[0][a].length;n<s;n+=r)t.push.apply(t,e[0][a].slice(n,n+r));return t},Tz=da?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:n0(t)})):Bz(e)}:Bz,Iz=function(e,t,r){for(var a=[],n=t;n<r;n+=2)a.push(String.fromCharCode(vh(e,n)));return a.join("").replace(Il,"")},e8=da?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Il,""):Iz(e,t,r)}:Iz,Oz=function(e,t,r){for(var a=[],n=t;n<t+r;++n)a.push(("0"+e[n].toString(16)).slice(-2));return a.join("")},_re=da?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):Oz(e,t,r)}:Oz,Fz=function(e,t,r){for(var a=[],n=t;n<r;n++)a.push(String.fromCharCode(Cv(e,n)));return a.join("")},jN=da?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):Fz(t,r,a)}:Fz,Sre=function(e,t){var r=Gc(e,t);return r>0?jN(e,t+4,t+4+r-1):""},Bre=Sre,Tre=function(e,t){var r=Gc(e,t);return r>0?jN(e,t+4,t+4+r-1):""},Ire=Tre,Ore=function(e,t){var r=2*Gc(e,t);return r>0?jN(e,t+4,t+4+r-1):""},Fre=Ore,Dre=function(t,r){var a=Gc(t,r);return a>0?e8(t,r+4,r+4+a):""},Pre=Dre,Rre=function(e,t){var r=Gc(e,t);return r>0?jN(e,t+4,t+4+r):""},Lre=Rre,Mre=function(e,t){return u5e(e,t)},ak=Mre,t8=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};da&&(Bre=function(t,r){if(!Buffer.isBuffer(t))return Sre(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},Ire=function(t,r){if(!Buffer.isBuffer(t))return Tre(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},Fre=function(t,r){if(!Buffer.isBuffer(t))return Ore(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},Pre=function(t,r){if(!Buffer.isBuffer(t))return Dre(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},Lre=function(t,r){if(!Buffer.isBuffer(t))return Rre(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},ak=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Mre(t,r)},t8=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Cv=function(e,t){return e[t]},vh=function(e,t){return e[t+1]*256+e[t]},f5e=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Gc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Yp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},A5e=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function H2(e,t){var r="",a,n,s=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,da&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(vh(this,u)),u+=2;e*=2;break;case"utf8":r=jN(this,this.l,this.l+e);break;case"utf16le":e*=2,r=e8(this,this.l,this.l+e);break;case"wstr":return H2.call(this,e,"dbcs");case"lpstr-ansi":r=Bre(this,this.l),e=4+Gc(this,this.l);break;case"lpstr-cp":r=Ire(this,this.l),e=4+Gc(this,this.l);break;case"lpwstr":r=Fre(this,this.l),e=4+2*Gc(this,this.l);break;case"lpp4":e=4+Gc(this,this.l),r=Pre(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Gc(this,this.l),r=Lre(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Cv(this,this.l+e++))!==0;)s.push(bC(o));r=s.join("");break;case"_wstr":for(e=0,r="";(o=vh(this,this.l+e))!==0;)s.push(bC(o)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Cv(this,u),this.l=u+1,l=H2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(bC(vh(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Cv(this,u),this.l=u+1,l=H2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(bC(Cv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return a=Cv(this,this.l),this.l++,a;case 2:return a=(t==="i"?f5e:vh)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?Yp:A5e)(this,this.l),this.l+=4,a):(n=Gc(this,this.l),this.l+=4,n);case 8:case-8:if(t==="f")return e==8?n=ak(this,this.l):n=ak([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:r=_re(this,this.l,e);break}}return this.l+=e,r}var h5e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},m5e=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},p5e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function g5e(e,t,r){var a=0,n=0;if(r==="dbcs"){for(n=0;n!=t.length;++n)p5e(this,t.charCodeAt(n),this.l+2*n);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=t.length;++n)this[this.l+n]=t.charCodeAt(n)&255;a=t.length}else if(r==="hex"){for(;n<e;++n)this[this.l++]=parseInt(t.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(n=0;n<Math.min(t.length,e);++n){var o=t.charCodeAt(n);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,h5e(this,t,this.l);break;case 8:if(a=8,r==="f"){d5e(this,t,this.l);break}case 16:break;case-4:a=4,m5e(this,t,this.l);break}return this.l+=a,this}function Ure(e,t){var r=_re(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Eo(e,t){e.l=t,e.read_shift=H2,e.chk=Ure,e.write_shift=g5e}function Al(e,t){e.l+=t}function Ct(e){var t=Km(e);return Eo(t,0),t}function s0(e,t,r){if(e){var a,n,s;Eo(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=Rw[l]||Rw[65535];for(a=e.read_shift(1),s=a&127,n=1;n<4&&a&128;++n)s+=((a=e.read_shift(1))&127)<<7*n;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,l))return}}}function hc(){var e=[],t=da?256:2048,r=function(u){var d=Ct(u);return Eo(d,0),d},a=r(t),n=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},s=function(u){return a&&u<a.length-a.l?a:(n(),a=r(Math.max(u+1,t)))},o=function(){return n(),to(e)},l=function(u){n(),a=u,a.l==null&&(a.l=a.length),s(t)};return{next:s,push:l,end:o,_bufs:e}}function Mt(e,t,r,a){var n=+t,s;if(!isNaN(n)){a||(a=Rw[n].p||(r||[]).length||0),s=1+(n>=128?1:0)+1,a>=128&&++s,a>=16384&&++s,a>=2097152&&++s;var o=e.next(s);n<=127?o.write_shift(1,n):(o.write_shift(1,(n&127)+128),o.write_shift(1,n>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&t8(r)&&e.push(r)}}function z2(e,t,r){var a=qn(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function Dz(e,t,r){var a=qn(e);return a.s=z2(a.s,t.s,r),a.e=z2(a.e,t.s,r),a}function V2(e,t){if(e.cRel&&e.c<0)for(e=qn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=qn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Ur(e);return!e.cRel&&e.cRel!=null&&(r=b5e(r)),!e.rRel&&e.rRel!=null&&(r=x5e(r)),r}function PB(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+us(e.s.c)+":"+(e.e.cRel?"":"$")+us(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ti(e.s.r)+":"+(e.e.rRel?"":"$")+ti(e.e.r):V2(e.s,t.biff)+":"+V2(e.e,t.biff)}function r8(e){return parseInt(v5e(e),10)-1}function ti(e){return""+(e+1)}function x5e(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function v5e(e){return e.replace(/\$(\d+)$/,"$1")}function a8(e){for(var t=y5e(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function us(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function b5e(e){return e.replace(/^([A-Z])/,"$$$1")}function y5e(e){return e.replace(/^\$([A-Z])/,"$1")}function w5e(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ds(e){for(var t=0,r=0,a=0;a<e.length;++a){var n=e.charCodeAt(a);n>=48&&n<=57?t=10*t+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:t-1}}function Ur(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function pc(e){var t=e.indexOf(":");return t==-1?{s:ds(e),e:ds(e)}:{s:ds(e.slice(0,t)),e:ds(e.slice(t+1))}}function Jr(e,t){return typeof t>"u"||typeof t=="number"?Jr(e.s,e.e):(typeof e!="string"&&(e=Ur(e)),typeof t!="string"&&(t=Ur(t)),e==t?e:e+":"+t)}function Da(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,n=0,s=e.length;for(r=0;a<s&&!((n=e.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(t.s.c=--r,r=0;a<s&&!((n=e.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;if(t.s.r=--r,a===s||n!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=s&&!((n=e.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(t.e.c=--r,r=0;a!=s&&!((n=e.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;return t.e.r=--r,t}function Pz(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=ad(e.z,r?Di(t):t)}catch{}try{return e.w=ad((e.XF||{}).numFmtId||(r?14:0),r?Di(t):t)}catch{return""+t}}function Hh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?i0[e.v]||e.v:t==null?Pz(e,e.v):Pz(e,t))}function lp(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function Qre(e,t,r){var a=r||{},n=e?Array.isArray(e):a.dense,s=e||(n?[]:{}),o=0,l=0;if(s&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?ds(a.origin):a.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Da(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var m={v:t[f][h]},g=o+f,x=l+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))m=t[f][h];else if(Array.isArray(m.v)&&(m.f=t[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(a.nullError)m.t="e",m.v=0;else if(a.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=a.dateNF||Dr[14],a.cellDates?(m.t="d",m.w=ad(m.z,Di(m.v))):(m.t="n",m.v=Di(m.v),m.w=ad(m.z,m.v))):m.t="s";if(n)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(m.z=s[g][x].z),s[g][x]=m;else{var v=Ur({c:x,r:g});s[v]&&s[v].z&&(m.z=s[v].z),s[v]=m}}}return u.s.c<1e7&&(s["!ref"]=Jr(u)),s}function x1(e,t){return Qre(null,e,t)}function N5e(e){return e.read_shift(4,"i")}function Jd(e,t){return t||(t=Ct(4)),t.write_shift(4,e),t}function dl(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function ro(e,t){var r=!1;return t==null&&(r=!0,t=Ct(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function E5e(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function C5e(e,t){return t||(t=Ct(4)),t.write_shift(2,0),t.write_shift(2,0),t}function n8(e,t){var r=e.l,a=e.read_shift(1),n=dl(e),s=[],o={t:n,h:n};if((a&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(E5e(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function j5e(e,t){var r=!1;return t==null&&(r=!0,t=Ct(15+4*e.t.length)),t.write_shift(1,0),ro(e.t,t),r?t.slice(0,t.l):t}var k5e=n8;function _5e(e,t){var r=!1;return t==null&&(r=!0,t=Ct(23+4*e.t.length)),t.write_shift(1,1),ro(e.t,t),t.write_shift(4,1),C5e({},t),r?t.slice(0,t.l):t}function id(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function nx(e,t){return t==null&&(t=Ct(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function sx(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function ix(e,t){return t==null&&(t=Ct(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var S5e=dl,Hre=ro;function s8(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function nk(e,t){var r=!1;return t==null&&(r=!0,t=Ct(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var B5e=dl,qO=s8,i8=nk;function o8(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var n=a===0?ak([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Yp(t,0)>>2;return r?n/100:n}function zre(e,t){t==null&&(t=Ct(4));var r=0,a=0,n=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:n==(n|0)&&n>=-536870912&&n<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?n:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Vre(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function T5e(e,t){return t||(t=Ct(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var ox=Vre,v1=T5e;function il(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Lg(e,t){return(t||Ct(8)).write_shift(8,e,"f")}function I5e(e){var t={},r=e.read_shift(1),a=r>>>1,n=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=n;var u=mg[n];u&&(t.rgb=Ow(u));break;case 2:t.rgb=Ow([o,l,c]);break;case 3:t.theme=n;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function sk(e,t){if(t||(t=Ct(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function O5e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function F5e(e,t){t||(t=Ct(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function $re(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function D5e(e){return $re(e,1)}function P5e(e){return $re(e,2)}var l8=2,Zl=3,wC=11,Rz=12,ik=19,NC=64,R5e=65,L5e=71,M5e=4108,U5e=4126,Yi=80,Gre=81,Q5e=[Yi,Gre],KO={1:{n:"CodePage",t:l8},2:{n:"Category",t:Yi},3:{n:"PresentationFormat",t:Yi},4:{n:"ByteCount",t:Zl},5:{n:"LineCount",t:Zl},6:{n:"ParagraphCount",t:Zl},7:{n:"SlideCount",t:Zl},8:{n:"NoteCount",t:Zl},9:{n:"HiddenCount",t:Zl},10:{n:"MultimediaClipCount",t:Zl},11:{n:"ScaleCrop",t:wC},12:{n:"HeadingPairs",t:M5e},13:{n:"TitlesOfParts",t:U5e},14:{n:"Manager",t:Yi},15:{n:"Company",t:Yi},16:{n:"LinksUpToDate",t:wC},17:{n:"CharacterCount",t:Zl},19:{n:"SharedDoc",t:wC},22:{n:"HyperlinksChanged",t:wC},23:{n:"AppVersion",t:Zl,p:"version"},24:{n:"DigSig",t:R5e},26:{n:"ContentType",t:Yi},27:{n:"ContentStatus",t:Yi},28:{n:"Language",t:Yi},29:{n:"Version",t:Yi},255:{},2147483648:{n:"Locale",t:ik},2147483651:{n:"Behavior",t:ik},1919054434:{}},WO={1:{n:"CodePage",t:l8},2:{n:"Title",t:Yi},3:{n:"Subject",t:Yi},4:{n:"Author",t:Yi},5:{n:"Keywords",t:Yi},6:{n:"Comments",t:Yi},7:{n:"Template",t:Yi},8:{n:"LastAuthor",t:Yi},9:{n:"RevNumber",t:Yi},10:{n:"EditTime",t:NC},11:{n:"LastPrinted",t:NC},12:{n:"CreatedDate",t:NC},13:{n:"ModifiedDate",t:NC},14:{n:"PageCount",t:Zl},15:{n:"WordCount",t:Zl},16:{n:"CharCount",t:Zl},17:{n:"Thumbnail",t:L5e},18:{n:"Application",t:Yi},19:{n:"DocSecurity",t:Zl},255:{},2147483648:{n:"Locale",t:ik},2147483651:{n:"Behavior",t:ik},1919054434:{}},Lz={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},H5e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function z5e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var V5e=z5e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),mg=qn(V5e),i0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},qre={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},XO={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},EC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function c8(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function $5e(e){var t=c8();if(!e||!e.match)return t;var r={};if((e.match(ml)||[]).forEach(function(a){var n=Vr(a);switch(n[0].replace(t5e,"<")){case"<?xml":break;case"<Types":t.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":t[XO[n.ContentType]]!==void 0&&t[XO[n.ContentType]].push(n.PartName);break}}),t.xmlns!==Ii.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Kre(e,t){var r=$Ce(XO),a=[],n;a[a.length]=ni,a[a.length]=$t("Types",null,{xmlns:Ii.CT,"xmlns:xsd":Ii.xsd,"xmlns:xsi":Ii.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return $t("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(n=e[c][0],a[a.length]=$t("Override",null,{PartName:(n[0]=="/"?"":"/")+n,ContentType:EC[c][t.bookType]||EC[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){a[a.length]=$t("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:EC[c][t.bookType]||EC[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){a[a.length]=$t("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var ga={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Iw(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function $2(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(ml)||[]).forEach(function(n){var s=Vr(n);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:m2(s.Target,t);r[l]=o,a[s.Id]=o}}),r["!id"]=a,r}function Jv(e){var t=[ni,$t("Relationships",null,{xmlns:Ii.RELS})];return Ds(e["!id"]).forEach(function(r){t[t.length]=$t("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function hn(e,t,r,a,n,s){if(n||(n={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,n.Id="rId"+t,n.Type=a,n.Target=r,[ga.HLINK,ga.XPATH,ga.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),e["!id"][n.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][n.Id]=n,e[("/"+n.Target).replace("//","/")]=n,t}var G5e="application/vnd.oasis.opendocument.spreadsheet";function q5e(e,t){for(var r=ZR(e),a,n;a=Tw.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(n=Vr(a[0],!1),n.path=="/"&&n.type!==G5e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function K5e(e){var t=[ni];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function Mz(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function W5e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function X5e(e){var t=[ni];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(Mz(e[r][0],e[r][1])),t.push(W5e("",e[r][0]));return t.push(Mz("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Wre(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Jj.version+"</meta:generator></office:meta></office:document-meta>"}var rd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Y5e=function(){for(var e=new Array(rd.length),t=0;t<rd.length;++t){var r=rd[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e}();function Xre(e){var t={};e=jn(e);for(var r=0;r<rd.length;++r){var a=rd[r],n=e.match(Y5e[r]);n!=null&&n.length>0&&(t[a[1]]=Fa(n[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=Gn(t[a[1]]))}return t}function RB(e,t,r,a,n){n[e]!=null||t==null||t===""||(n[e]=t,t=pn(t),a[a.length]=r?$t(e,t,r):jo(e,t))}function Yre(e,t){var r=t||{},a=[ni,$t("cp:coreProperties",null,{"xmlns:cp":Ii.CORE_PROPS,"xmlns:dc":Ii.dc,"xmlns:dcterms":Ii.dcterms,"xmlns:dcmitype":Ii.dcmitype,"xmlns:xsi":Ii.xsi})],n={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&RB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:GO(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n),e.ModifiedDate!=null&&RB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:GO(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,n));for(var s=0;s!=rd.length;++s){var o=rd[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&RB(o[0],l,null,a,n)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var pg=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Jre=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Zre(e,t,r,a){var n=[];if(typeof e=="string")n=Sz(e,a);else for(var s=0;s<e.length;++s)n=n.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?Sz(t,a).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==n.length;u+=2){switch(c=+n[u+1].v,n[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function J5e(e,t,r){var a={};return t||(t={}),e=jn(e),pg.forEach(function(n){var s=(e.match(Sw(n[0]))||[])[1];switch(n[2]){case"string":s&&(t[n[1]]=Fa(s));break;case"bool":t[n[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));o&&o.length>0&&(a[n[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&Zre(a.HeadingPairs,a.TitlesOfParts,t,r),t}function eae(e){var t=[],r=$t;return e||(e={}),e.Application="SheetJS",t[t.length]=ni,t[t.length]=$t("Properties",null,{xmlns:Ii.EXT_PROPS,"xmlns:vt":Ii.vt}),pg.forEach(function(a){if(e[a[1]]!==void 0){var n;switch(a[2]){case"string":n=pn(String(e[a[1]]));break;case"bool":n=e[a[1]]?"true":"false";break}n!==void 0&&(t[t.length]=r(a[0],n))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+pn(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Z5e=/<[^>]+>[^<]*/g;function eje(e,t){var r={},a="",n=e.match(Z5e);if(n)for(var s=0;s!=n.length;++s){var o=n[s],l=Vr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Fa(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[a]=Fa(d);break;case"bool":r[a]=Vn(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(d);break;case"filetime":case"date":r[a]=Gn(d);break;case"cy":case"error":r[a]=Fa(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function tae(e){var t=[ni,$t("Properties",null,{xmlns:Ii.CUST_PROPS,"xmlns:vt":Ii.vt})];if(!e)return t.join("");var r=1;return Ds(e).forEach(function(n){++r,t[t.length]=$t("property",c5e(e[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:pn(n)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var YO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},LB;function tje(e,t,r){LB||(LB=yS(YO)),t=LB[t]||t,e[t]=r}function rje(e,t){var r=[];return Ds(YO).map(function(a){for(var n=0;n<rd.length;++n)if(rd[n][1]==a)return rd[n];for(n=0;n<pg.length;++n)if(pg[n][1]==a)return pg[n];throw a}).forEach(function(a){if(e[a[1]]!=null){var n=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}typeof n=="number"?n=String(n):n===!0||n===!1?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),r.push(jo(YO[a[1]]||a[1],n))}}),$t("DocumentProperties",r.join(""),{xmlns:$c.o})}function aje(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",n=[];return e&&Ds(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var o=0;o<rd.length;++o)if(s==rd[o][1])return;for(o=0;o<pg.length;++o)if(s==pg[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=e[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),n.push($t(Cz(s),l,{"dt:dt":c}))}}),t&&Ds(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),n.push($t(Cz(s),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+$c.o+'">'+n.join("")+"</"+a+">"}function u8(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function nje(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),n=(r-a)/Math.pow(2,32);a*=1e7,n*=1e7;var s=a/Math.pow(2,32)|0;s>0&&(a=a%Math.pow(2,32),n+=s);var o=Ct(8);return o.write_shift(4,a),o.write_shift(4,n),o}function rae(e,t,r){var a=e.l,n=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return n}function aae(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function nae(e,t,r){return t===31?aae(e):rae(e,t,r)}function JO(e,t,r){return nae(e,t,r===!1?0:4)}function sje(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return nae(e,t,0)}function ije(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var n=e.l;r[a]=e.read_shift(0,"lpwstr").replace(Il,""),e.l-n&2&&(e.l+=2)}return r}function oje(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(Il,"");return r}function lje(e){var t=e.l,r=ok(e,Gre);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=ok(e,Zl);return[r,a]}function cje(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(lje(e));return r}function Uz(e,t){for(var r=e.read_shift(4),a={},n=0;n!=r;++n){var s=e.read_shift(4),o=e.read_shift(4);a[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Il,"").replace(h2,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function sae(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function uje(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function ok(e,t,r){var a=e.read_shift(2),n,s=r||{};if(e.l+=2,t!==Rz&&a!==t&&Q5e.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===Rz?a:t){case 2:return n=e.read_shift(2,"i"),s.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i"),n;case 11:return e.read_shift(4)!==0;case 19:return n=e.read_shift(4),n;case 30:return rae(e,a,4).replace(Il,"");case 31:return aae(e);case 64:return u8(e);case 65:return sae(e);case 71:return uje(e);case 80:return JO(e,a,!s.raw).replace(Il,"");case 81:return sje(e,a).replace(Il,"");case 4108:return cje(e);case 4126:case 4127:return a==4127?ije(e):oje(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function Qz(e,t){var r=Ct(4),a=Ct(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=Ct(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=nje(t);break;case 31:case 80:for(a=Ct(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return to([r,a])}function Hz(e,t){var r=e.l,a=e.read_shift(4),n=e.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=n;++o){var d=e.read_shift(4),f=e.read_shift(4);s[o]=[d,f+r]}s.sort(function(w,j){return w[1]-j[1]});var h={};for(o=0;o!=n;++o){if(e.l!==s[o][1]){var m=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(m=!1,e.l=s[o][1]),m)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var g=t[s[o][0]];if(h[g.n]=ok(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Hd(l=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[o][0]===1){if(l=h.CodePage=ok(e,l8),Hd(l),c!==-1){var x=e.l;e.l=s[c][1],u=Uz(e,l),e.l=x}}else if(s[o][0]===0){if(l===0){c=o,e.l=s[o+1][1];continue}u=Uz(e,l)}else{var v=u[s[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=sae(e);break;case 30:e.l+=4,y=JO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=JO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Gs(e,4);break;case 64:e.l+=4,y=Gn(u8(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=y}}return e.l=r+a,h}var iae=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function dje(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function zz(e,t,r){var a=Ct(8),n=[],s=[],o=8,l=0,c=Ct(8),u=Ct(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),n.push(u),o+=8+c.length,!t){u=Ct(8),u.write_shift(4,0),n.unshift(u);var d=[Ct(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Ct(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=to(d),s.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(iae.indexOf(e[l][0])>-1||Jre.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=Qz(g.t,h)}else{var v=dje(h);v==-1&&(v=31,h=String(h)),c=Qz(v,h)}s.push(c),u=Ct(8),u.write_shift(4,t?m:2+l),n.push(u),o+=8+c.length}var y=8*(s.length+1);for(l=0;l<s.length;++l)n[l].write_shift(4,y),y+=s[l].length;return a.write_shift(4,o),a.write_shift(4,s.length),to([a].concat(n).concat(s))}function Vz(e,t,r){var a=e.content;if(!a)return{};Eo(a,0);var n,s,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var u=a.read_shift(4),d=a.read_shift(16);if(d!==Cr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(n=a.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(s=a.read_shift(16),l=a.read_shift(4),n===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);n===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=Hz(a,t),h={SystemIdentifier:u};for(var m in f)h[m]=f[m];if(h.FMTID=s,n===1)return h;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var g;try{g=Hz(a,null)}catch{}for(m in g)h[m]=g[m];return h.FMTID=[s,o],h}function $z(e,t,r,a,n,s){var o=Ct(n?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Cr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,n?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,n?68:48);var c=zz(e,r,a);if(l.push(c),n){var u=zz(n,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return to(l)}function q0(e,t){return e.read_shift(t),null}function fje(e,t){t||(t=Ct(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Aje(e,t,r){for(var a=[],n=e.l+t;e.l<n;)a.push(r(e,n-e.l));if(n!==e.l)throw new Error("Slurp error");return a}function Gs(e,t){return e.read_shift(t)===1}function Cl(e,t){return t||(t=Ct(2)),t.write_shift(2,+!!e),t}function pi(e){return e.read_shift(2,"u")}function Gu(e,t){return t||(t=Ct(2)),t.write_shift(2,e),t}function oae(e,t){return Aje(e,t,pi)}function hje(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function lae(e,t,r){return r||(r=Ct(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function kN(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var o=a?e.read_shift(a,n):"";return o}function mje(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,n=r&8,s=1+(r&1),o=0,l,c={};n&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return n&&(e.l+=4*o),a&&(e.l+=l),c.t=d,n||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function pje(e){var t=e.t||"",r=Ct(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=Ct(2*t.length);a.write_shift(2*t.length,t,"utf16le");var n=[r,a];return to(n)}function Mg(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var n=e.read_shift(1);return n===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function _N(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):Mg(e,a,r)}function lx(e,t,r){if(r.biff>5)return _N(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function cae(e,t,r){return r||(r=Ct(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function gje(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function xje(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var n=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Il,"");return a&&(e.l+=24),n}function vje(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=e.read_shift(4);if(n===0)return r+a.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(Il,"");return r+o}function bje(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return xje(e);case"0303000000000000c000000000000046":return vje(e);default:throw new Error("Unsupported Moniker "+r)}}function CC(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Il,""):"";return r}function Gz(e,t){t||(t=Ct(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function yje(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var n=e.read_shift(2);e.l+=2;var s,o,l,c,u="",d,f;n&16&&(s=CC(e,r-e.l)),n&128&&(o=CC(e,r-e.l)),(n&257)===257&&(l=CC(e,r-e.l)),(n&257)===1&&(c=bje(e,r-e.l)),n&8&&(u=CC(e,r-e.l)),n&32&&(d=e.read_shift(16)),n&64&&(f=u8(e)),e.l=r;var h=o||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),n&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return d&&(m.guid=d),f&&(m.time=f),s&&(m.Tooltip=s),m}function wje(e){var t=Ct(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var n=a.indexOf("#"),s=n>-1?31:23;switch(a.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(s==28)a=a.slice(1),Gz(a,t);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=n>-1?a.slice(0,n):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),s&8&&Gz(n>-1?a.slice(n+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function uae(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),n=e.read_shift(1);return[t,r,a,n]}function dae(e,t){var r=uae(e);return r[3]=0,r}function CA(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Ug(e,t,r,a){return a||(a=Ct(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function Nje(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Eje(e,t,r){return t===0?"":lx(e,t,r)}function Cje(e,t,r){var a=r.biff>8?4:2,n=e.read_shift(a),s=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[n,s,o]}function fae(e){var t=e.read_shift(2),r=o8(e);return[t,r]}function jje(e,t,r){e.l+=4,t-=4;var a=e.l+t,n=kN(e,t,r),s=e.read_shift(2);if(a-=e.l,s!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+s);return e.l+=s,n}function ES(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),n=e.read_shift(2);return{s:{c:a,r:t},e:{c:n,r}}}function Aae(e,t){return t||(t=Ct(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function hae(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),n=e.read_shift(1);return{s:{c:a,r:t},e:{c:n,r}}}var kje=hae;function mae(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function _je(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Sje(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Vo(e){e.l+=2,e.l+=e.read_shift(2)}var Bje={0:Vo,4:Vo,5:Vo,6:Vo,7:Sje,8:Vo,9:Vo,10:Vo,11:Vo,12:Vo,13:_je,14:Vo,15:Vo,16:Vo,17:Vo,18:Vo,19:Vo,20:Vo,21:mae};function Tje(e,t){for(var r=e.l+t,a=[];e.l<r;){var n=e.read_shift(2);e.l-=2;try{a.push(Bje[n](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function jC(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function d8(e,t,r){var a=1536,n=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,n=8;break;case"biff4":a=4,n=6;break;case"biff3":a=3,n=6;break;case"biff2":a=2,n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ct(n);return s.write_shift(2,a),s.write_shift(2,t),n>4&&s.write_shift(2,29282),n>6&&s.write_shift(2,1997),n>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Ije(e,t){return t===0||e.read_shift(2),1200}function Oje(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,n=lx(e,0,r);return e.read_shift(t+a-e.l),n}function Fje(e,t){var r=!t||t.biff==8,a=Ct(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function Dje(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function Pje(e,t,r){var a=e.read_shift(4),n=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=kN(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:n,dt:s,name:o}}function Rje(e,t){var r=!t||t.biff>=8?2:1,a=Ct(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var n=a.slice(0,a.l);return n.l=a.l,n}function Lje(e,t){for(var r=e.l+t,a=e.read_shift(4),n=e.read_shift(4),s=[],o=0;o!=n&&e.l<r;++o)s.push(mje(e));return s.Count=a,s.Unique=n,s}function Mje(e,t){var r=Ct(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],n=0;n<e.length;++n)a[n]=pje(e[n]);var s=to([r].concat(a));return s.parts=[r.length].concat(a.map(function(o){return o.length})),s}function Uje(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Qje(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function Hje(e){var t=Nje(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function zje(e){return e.read_shift(2),e.read_shift(4)}function qz(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var n=e.read_shift(2);r&&r.biff==2&&(a=1-(n>>15),n&=32767);var s={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[s,n]}function Vje(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[a,n],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function $je(){var e=Ct(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Gje(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function qje(e){var t=Ct(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Kje(){}function Wje(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=kN(e,0,r),a}function Xje(e,t){var r=e.name||"Arial",a=t&&t.biff==5,n=a?15+r.length:16+2*r.length,s=Ct(n);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),a||s.write_shift(1,1),s.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),s}function Yje(e){var t=CA(e);return t.isst=e.read_shift(4),t}function Jje(e,t,r,a){var n=Ct(10);return Ug(e,t,a,n),n.write_shift(4,r),n}function Zje(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,n=CA(e);r.biff==2&&e.l++;var s=_N(e,a-e.l,r);return n.val=s,n}function eke(e,t,r,a,n){var s=!n||n.biff==8,o=Ct(8+ +s+(1+s)*r.length);return Ug(e,t,a,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function tke(e,t,r){var a=e.read_shift(2),n=lx(e,0,r);return[a,n]}function rke(e,t,r,a){var n=r&&r.biff==5;a||(a=Ct(n?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(n?1:2,t.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le");var s=a.length>a.l?a.slice(0,a.l):a;return s.l==null&&(s.l=s.length),s}var ake=lx;function Kz(e,t,r){var a=e.l+t,n=r.biff==8||!r.biff?4:2,s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:s,c:l},e:{r:o,c}}}function nke(e,t){var r=t.biff==8||!t.biff?4:2,a=Ct(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function ske(e){var t=e.read_shift(2),r=e.read_shift(2),a=fae(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function ike(e,t){for(var r=e.l+t-2,a=e.read_shift(2),n=e.read_shift(2),s=[];e.l<r;)s.push(fae(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-n+1)throw new Error("MulRK length mismatch");return{r:a,c:n,C:o,rkrec:s}}function oke(e,t){for(var r=e.l+t-2,a=e.read_shift(2),n=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-n+1)throw new Error("MulBlank length mismatch");return{r:a,c:n,C:o,ixfe:s}}function lke(e,t,r,a){var n={},s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return n.patternType=H5e[l>>26],a.cellStyles&&(n.alc=s&7,n.fWrap=s>>3&1,n.alcV=s>>4&7,n.fJustLast=s>>7&1,n.trot=s>>8&255,n.cIndent=s>>16&15,n.fShrinkToFit=s>>20&1,n.iReadOrder=s>>22&2,n.fAtrNum=s>>26&1,n.fAtrFnt=s>>27&1,n.fAtrAlc=s>>28&1,n.fAtrBdr=s>>29&1,n.fAtrPat=s>>30&1,n.fAtrProt=s>>31&1,n.dgLeft=o&15,n.dgRight=o>>4&15,n.dgTop=o>>8&15,n.dgBottom=o>>12&15,n.icvLeft=o>>16&127,n.icvRight=o>>23&127,n.grbitDiag=o>>30&3,n.icvTop=l&127,n.icvBottom=l>>7&127,n.icvDiag=l>>14&127,n.dgDiag=l>>21&15,n.icvFore=c&127,n.icvBack=c>>7&127,n.fsxButton=c>>14&1),n}function cke(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=lke(e,t,a.fStyle,r),a}function Wz(e,t,r,a){var n=r&&r.biff==5;a||(a=Ct(n?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&n&&(s|=1024),a.write_shift(4,s),a.write_shift(4,0),n||a.write_shift(4,0),a.write_shift(2,0),a}function uke(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function dke(e){var t=Ct(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function Xz(e,t,r){var a=CA(e);(r.biff==2||t==9)&&++e.l;var n=hje(e);return a.val=n,a.t=n===!0||n===!1?"b":"e",a}function fke(e,t,r,a,n,s){var o=Ct(8);return Ug(e,t,a,o),lae(r,s,o),o}function Ake(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=CA(e),n=il(e);return a.val=n,a}function hke(e,t,r,a){var n=Ct(14);return Ug(e,t,a,n),Lg(r,n),n}var Yz=Eje;function mke(e,t,r){var a=e.l+t,n=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,n];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=Mg(e,s),l=[];a>e.l;)l.push(_N(e));return[s,n,o,l]}function Jz(e,t,r){var a=e.read_shift(2),n,s={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(n=jje(e,t-2,r)),s.body=n||e.read_shift(t-2),typeof n=="string"&&(s.Name=n),s}var pke=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Zz(e,t,r){var a=e.l+t,n=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Mg(e,o,r);n&32&&(u=pke[u.charCodeAt(0)]);var d=a-e.l;r&&r.biff==2&&--d;var f=a==e.l||l===0||!(d>0)?[]:T3e(e,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function pae(e,t,r){if(r.biff<8)return gke(e,t,r);for(var a=[],n=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)a.push(Cje(e,r.biff>8?12:6,r));if(e.l!=n)throw new Error("Bad ExternSheet: "+e.l+" != "+n);return a}function gke(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=kN(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function xke(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),n=e.read_shift(2),s=Mg(e,a,r),o=Mg(e,n,r);return[s,o]}function vke(e,t,r){var a=hae(e);e.l++;var n=e.read_shift(1);return t-=8,[I3e(e,t,r),n,a]}function eV(e,t,r){var a=kje(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,S3e(e,t,r)]}function bke(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function yke(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=lx(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:n},l,o,s]}}function wke(e,t,r){return yke(e,t,r)}function Nke(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(ES(e));return r}function Eke(e){var t=Ct(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Aae(e[r],t);return t}function Cke(e,t,r){if(r&&r.biff<8)return kke(e,t,r);var a=mae(e),n=Tje(e,t-22,a[1]);return{cmo:a,ft:n}}var jke={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var n=e.read_shift(1);return e.l+=n,e.l=r,{fmt:a}}};function kke(e,t,r){e.l+=4;var a=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((jke[a]||Al)(e,t,r)),{cmo:[n,a,s],ft:o}}function _ke(e,t,r){var a=e.l,n="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=gje(e,6,r);var l=e.read_shift(2);e.read_shift(2),pi(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-a!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Mg(e,e.lens[u+1]-e.lens[u]-1);if(n+=f,n.length>=(d?l:2*l))break}if(n.length!==l&&n.length!==l*2)throw new Error("cchText: "+l+" != "+n.length);return e.l=a+t,{t:n}}catch{return e.l=a+t,{t:n}}}function Ske(e,t){var r=ES(e);e.l+=16;var a=yje(e,t-24);return[r,a]}function Bke(e){var t=Ct(24),r=ds(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)t.write_shift(1,parseInt(a[n],16));return to([t,wje(e[1])])}function Tke(e,t){e.read_shift(2);var r=ES(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Il,""),[r,a]}function Ike(e){var t=e[1].Tooltip,r=Ct(10+2*(t.length+1));r.write_shift(2,2048);var a=ds(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var n=0;n<t.length;++n)r.write_shift(2,t.charCodeAt(n));return r.write_shift(2,0),r}function Oke(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=Lz[r]||r,r=e.read_shift(2),t[1]=Lz[r]||r,t}function Fke(e){return e||(e=Ct(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Dke(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(dae(e));return r}function Pke(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(dae(e));return r}function Rke(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function gae(e,t,r){if(!r.cellStyles)return Al(e,t);var a=r&&r.biff>=12?4:2,n=e.read_shift(a),s=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var u={s:n,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function Lke(e,t){var r=Ct(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function Mke(e,t){var r={};return t<32||(e.l+=16,r.header=il(e),r.footer=il(e),e.l+=2),r}function Uke(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var n=e.read_shift(1);return e.l+=3,n&16&&(a.area=!0),a}function Qke(e){for(var t=Ct(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Hke=CA,zke=oae,Vke=_N;function $ke(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),n={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,n}function Gke(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=CA(e);++e.l;var n=lx(e,t-7,r);return a.t="str",a.val=n,a}function qke(e){var t=CA(e);++e.l;var r=il(e);return t.t="n",t.val=r,t}function Kke(e,t,r){var a=Ct(15);return IN(a,e,t),a.write_shift(8,r,"f"),a}function Wke(e){var t=CA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Xke(e,t,r){var a=Ct(9);return IN(a,e,t),a.write_shift(2,r),a}function Yke(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Jke(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Zke(e,t,r){var a=e.l+t,n=CA(e),s=e.read_shift(2),o=Mg(e,s,r);return e.l=a,n.t="str",n.val=o,n}var e_e=[2,3,48,49,131,139,140,245],ZO=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=yS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Km(1);switch(c.type){case"base64":d=Xc(su(l));break;case"binary":d=Xc(l);break;case"buffer":case"array":d=l;break}Eo(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,v=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(v=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var j=[],O={},B=Math.min(d.length,f==2?521:v-10-(m?264:0)),T=g?32:11;d.l<B&&d[d.l]!=13;)switch(O={},O.name=jw.utils.decode(w,d.slice(d.l,d.l+T)).replace(/[\u0000\r\n].*$/g,""),d.l+=T,O.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(O.offset=d.read_shift(4)),O.len=d.read_shift(1),f==2&&(O.offset=d.read_shift(2)),O.dec=d.read_shift(1),O.name.length&&j.push(O),f!=2&&(d.l+=g?13:14),O.type){case"B":(!m||O.len!=8)&&c.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+O.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var C=0,_=0;for(u[0]=[],_=0;_!=j.length;++_)u[0][_]=j[_].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++C]=[],_=0,_=0;_!=j.length;++_){var S=d.slice(d.l,d.l+j[_].len);d.l+=j[_].len,Eo(S,0);var L=jw.utils.decode(w,S);switch(j[_].type){case"C":L.trim().length&&(u[C][_]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[C][_]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[C][_]=L;break;case"F":u[C][_]=parseFloat(L.trim());break;case"+":case"I":u[C][_]=g?S.read_shift(-4,"i")^2147483648:S.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[C][_]=!0;break;case"N":case"F":u[C][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[C][_]="##MEMO##"+(g?parseInt(L.trim(),10):S.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[C][_]=+L||0);break;case"@":u[C][_]=new Date(S.read_shift(-8,"f")-621356832e5);break;case"T":u[C][_]=new Date((S.read_shift(4)-2440588)*864e5+S.read_shift(4));break;case"Y":u[C][_]=S.read_shift(4,"i")/1e4+S.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[C][_]=-S.read_shift(-8,"f");break;case"B":if(m&&j[_].len==8){u[C][_]=S.read_shift(8,"f");break}case"G":case"P":S.l+=j[_].len;break;case"0":if(j[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[_].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=j,u}function a(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=x1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function n(l,c){try{return lp(a(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Hd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=hc(),f=uk(l,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),g=l["!cols"]||[],x=0,v=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(v=0;v<1024;++v)if(h.indexOf(h[x]+"_"+v)==-1){h[x]+="_"+v;break}}}}var j=Da(l["!ref"]),O=[],B=[],T=[];for(x=0;x<=j.e.c-j.s.c;++x){var C="",_="",S=0,L=[];for(v=0;v<m.length;++v)m[v][x]!=null&&L.push(m[v][x]);if(L.length==0||h[x]==null){O[x]="?";continue}for(v=0;v<L.length;++v){switch(typeof L[v]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=L[v]instanceof Date?"D":"C";break;default:_="C"}S=Math.max(S,String(L[v]).length),C=C&&C!=_?"C":_}S>250&&(S=250),_=((g[x]||{}).DBF||{}).type,_=="C"&&g[x].DBF.len>S&&(S=g[x].DBF.len),C=="B"&&_=="N"&&(C="N",T[x]=g[x].DBF.dec,S=g[x].DBF.len),B[x]=C=="C"||_=="N"?S:s[C]||0,w+=B[x],O[x]=C}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,m.length),P.write_shift(2,296+32*y),P.write_shift(2,w),x=0;x<4;++x)P.write_shift(4,0);for(P.write_shift(4,0|(+t[ire]||3)<<8),x=0,v=0;x<h.length;++x)if(h[x]!=null){var k=d.next(32),M=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,M,"sbcs"),k.write_shift(1,O[x]=="?"?"C":O[x],"sbcs"),k.write_shift(4,v),k.write_shift(1,B[x]||s[O[x]]||0),k.write_shift(1,T[x]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),v+=B[x]||s[O[x]]||0}var U=d.next(264);for(U.write_shift(4,13),x=0;x<65;++x)U.write_shift(4,0);for(x=0;x<m.length;++x){var z=d.next(w);for(z.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(O[v]){case"L":z.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":z.write_shift(8,m[x][v]||0,"f");break;case"N":var Q="0";for(typeof m[x][v]=="number"&&(Q=m[x][v].toFixed(T[v]||0)),y=0;y<B[v]-Q.length;++y)z.write_shift(1,32);z.write_shift(1,Q,"sbcs");break;case"D":m[x][v]?(z.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),z.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),z.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):z.write_shift(8,"00000000","sbcs");break;case"C":var q=String(m[x][v]!=null?m[x][v]:"").slice(0,B[v]);for(z.write_shift(1,q,"sbcs"),y=0;y<B[v]-q.length;++y)z.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:n,to_sheet:a,from_sheet:o}}(),xae=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ds(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var g=e[m];return typeof g=="number"?dz(g):g},a=function(h,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:dz(x)};e["|"]=254;function n(h,m){switch(m.type){case"base64":return s(su(h),m);case"binary":return s(h,m);case"buffer":return s(da&&Buffer.isBuffer(h)?h.toString("binary"):op(h),m);case"array":return s(Rg(h),m)}throw new Error("Unrecognized type "+m.type)}function s(h,m){var g=h.split(/[\n\r]+/),x=-1,v=-1,y=0,w=0,j=[],O=[],B=null,T={},C=[],_=[],S=[],L=0,P;for(+m.codepage>=0&&Hd(+m.codepage);y!==g.length;++y){L=0;var k=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),M=k.replace(/;;/g,"\0").split(";").map(function(X){return X.replace(/\u0000/g,";")}),U=M[0],z;if(k.length>0)switch(U){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":M[1].charAt(0)=="P"&&O.push(k.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,q=!1,V=!1,Y=!1,K=-1,J=-1;for(w=1;w<M.length;++w)switch(M[w].charAt(0)){case"A":break;case"X":v=parseInt(M[w].slice(1))-1,q=!0;break;case"Y":for(x=parseInt(M[w].slice(1))-1,q||(v=0),P=j.length;P<=x;++P)j[P]=[];break;case"K":z=M[w].slice(1),z.charAt(0)==='"'?z=z.slice(1,z.length-1):z==="TRUE"?z=!0:z==="FALSE"?z=!1:isNaN(Yd(z))?isNaN(kb(z).getDate())||(z=Gn(z)):(z=Yd(z),B!==null&&p1(B)&&(z=NS(z))),Q=!0;break;case"E":Y=!0;var R=Zv(M[w].slice(1),{r:x,c:v});j[x][v]=[j[x][v],R];break;case"S":V=!0,j[x][v]=[j[x][v],"S5S"];break;case"G":break;case"R":K=parseInt(M[w].slice(1))-1;break;case"C":J=parseInt(M[w].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}if(Q&&(j[x][v]&&j[x][v].length==2?j[x][v][0]=z:j[x][v]=z,B=null),V){if(Y)throw new Error("SYLK shared formula cannot have own formula");var F=K>-1&&j[K][J];if(!F||!F[1])throw new Error("SYLK shared formula cannot find base");j[x][v][1]=Pae(F[1],{r:x-K,c:v-J})}break;case"F":var W=0;for(w=1;w<M.length;++w)switch(M[w].charAt(0)){case"X":v=parseInt(M[w].slice(1))-1,++W;break;case"Y":for(x=parseInt(M[w].slice(1))-1,P=j.length;P<=x;++P)j[P]=[];break;case"M":L=parseInt(M[w].slice(1))/20;break;case"F":break;case"G":break;case"P":B=O[parseInt(M[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(S=M[w].slice(1).split(" "),P=parseInt(S[0],10);P<=parseInt(S[1],10);++P)L=parseInt(S[2],10),_[P-1]=L===0?{hidden:!0}:{wch:L},Wm(_[P-1]);break;case"C":v=parseInt(M[w].slice(1))-1,_[v]||(_[v]={});break;case"R":x=parseInt(M[w].slice(1))-1,C[x]||(C[x]={}),L>0?(C[x].hpt=L,C[x].hpx=Sb(L)):L===0&&(C[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}W<1&&(B=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}}return C.length>0&&(T["!rows"]=C),_.length>0&&(T["!cols"]=_),m&&m.sheetRows&&(j=j.slice(0,m.sheetRows)),[j,T]}function o(h,m){var g=n(h,m),x=g[0],v=g[1],y=x1(x,m);return Ds(v).forEach(function(w){y[w]=v[w]}),y}function l(h,m){return lp(o(h,m),m)}function c(h,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+g8(h.f,{r:g,c:x}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Fw(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=Dw(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*Pw(g.hpx)+";"),v.length>2&&h.push(v+"R"+(x+1))})}function f(h,m){var g=["ID;PWXL;N;E"],x=[],v=Da(h["!ref"]),y,w=Array.isArray(h),j=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var O=v.s.r;O<=v.e.r;++O)for(var B=v.s.c;B<=v.e.c;++B){var T=Ur({r:O,c:B});y=w?(h[O]||[])[B]:h[T],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,O,B))}return g.join(j)+j+x.join(j)+j+"E"+j}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),vae=function(){function e(s,o){switch(o.type){case"base64":return t(su(s),o);case"binary":return t(s,o);case"buffer":return t(da&&Buffer.isBuffer(s)?s.toString("binary"):op(s),o);case"array":return t(Rg(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),m=h[0],g=h[1];++d;for(var x=l[d]||"";(x.match(/["]/g)||[]).length&1&&d<l.length-1;)x+=`
`+l[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(Yd(g))?isNaN(kb(g).getDate())?f[c][u]=g:f[c][u]=Gn(g):f[c][u]=Yd(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return x1(e(s,o),o)}function a(s,o){return lp(r(s,o),o)}var n=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Da(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Ur({r:m,c:g});if(f=h?(c[m]||[])[g]:c[x],!f){o(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,v,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=ad(f.z||Dr[14],Di(Gn(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:a,to_sheet:r,from_sheet:n}}(),bae=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var w=m[v].trim().split(":");if(w[0]==="cell"){var j=ds(w[1]);if(y.length<=j.r)for(g=y.length;g<=j.r;++g)y[g]||(y[g]=[]);switch(g=j.r,x=j.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var O=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],O])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function a(f,h){return x1(r(f,h),h)}function n(f,h){return lp(a(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],g,x="",v=pc(f["!ref"]),y=Array.isArray(f),w=v.s.r;w<=v.e.r;++w)for(var j=v.s.c;j<=v.e.c;++j)if(x=Ur({r:w,c:j}),g=y?(f[w]||[])[j]:f[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var O=Di(Gn(g.v));m[2]="vtc",m[3]="nd",m[4]=""+O,m[5]=g.w||ad(g.z||Dr[14],O);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:n,to_sheet:a,from_sheet:d}}(),_b=function(){function e(d,f,h,m,g){g.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN(Yd(d))?isNaN(kb(d).getDate())?f[h][m]=d:f[h][m]=Gn(d):f[h][m]=Yd(d))}function t(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,v=Math.max(v,y);for(w=0;w<=x;++w){m[w]=[];var j=0;for(e(g[w].slice(0,v).trim(),m,w,j,h),j=1;j<=(g[w].length-v)/10+1;++j)e(g[w].slice(v+(j-1)*10,v+j*10).trim(),m,w,j,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function n(d){for(var f={},h=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=a;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(x,v){return x[0]-v[0]||a[x[1]]-a[v[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},m="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=n(d.slice(0,1024)):h&&h.FS?m=h.FS:m=n(d.slice(0,1024));var v=0,y=0,w=0,j=0,O=0,B=m.charCodeAt(0),T=!1,C=0,_=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var S=h.dateNF!=null?UCe(h.dateNF):null;function L(){var P=d.slice(j,O),k={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)k.t="z";else if(h.raw)k.t="s",k.v=P;else if(P.trim().length===0)k.t="s",k.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(k.t="s",k.v=P.slice(2,-1).replace(/""/g,'"')):m4e(P)?(k.t="n",k.f=P.slice(1)):(k.t="s",k.v=P);else if(P=="TRUE")k.t="b",k.v=!0;else if(P=="FALSE")k.t="b",k.v=!1;else if(!isNaN(w=Yd(P)))k.t="n",h.cellText!==!1&&(k.w=P),k.v=w;else if(!isNaN(kb(P).getDate())||S&&P.match(S)){k.z=h.dateNF||Dr[14];var M=0;S&&P.match(S)&&(P=QCe(P,h.dateNF,P.match(S)||[]),M=1),h.cellDates?(k.t="d",k.v=Gn(P,M)):(k.t="n",k.v=Di(Gn(P,M))),h.cellText!==!1&&(k.w=ad(k.z,k.v instanceof Date?Di(k.v):k.v)),h.cellNF||delete k.z}else k.t="s",k.v=P;if(k.t=="z"||(h.dense?(g[v]||(g[v]=[]),g[v][y]=k):g[Ur({c:y,r:v})]=k),j=O+1,_=d.charCodeAt(j),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),C==B)++y;else if(y=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;O<d.length;++O)switch(C=d.charCodeAt(O)){case 34:_===34&&(T=!T);break;case B:case 10:case 13:if(!T&&L())break e;break}return O-j>0&&L(),g["!ref"]=Jr(x),g}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):x1(t(d,f),f)}function l(d,f){var h="",m=f.type=="string"?[0,0,0,0]:C8(d,f);switch(f.type){case"base64":h=su(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof jw<"u"||(h=da&&Buffer.isBuffer(d)?d.toString("binary"):op(d));break;case"array":h=Rg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=jn(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=jn(h):f.type=="binary"&&typeof jw<"u",h.slice(0,19)=="socialcalc:version:"?bae.to_sheet(f.type=="string"?h:jn(h),f):o(h,f)}function c(d,f){return lp(l(d,f),f)}function u(d){for(var f=[],h=Da(d["!ref"]),m,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var v=[],y=h.s.c;y<=h.e.c;++y){var w=Ur({r:x,c:y});if(m=g?(d[x]||[])[y]:d[w],!m||m.v==null){v.push("          ");continue}for(var j=(m.w||(Hh(m),m.w)||"").slice(0,10);j.length<10;)j+=" ";v.push(j+(y===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function t_e(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var n=xae.to_workbook(e,r);return r.WTF=a,n}catch(s){if(r.WTF=a,!s.message.match(/SYLK bad record ID/)&&a)throw s;return _b.to_workbook(e,t)}}var gg=function(){function e(R,F,W){if(R){Eo(R,R.l||0);for(var X=W.Enum||K;R.l<R.length;){var ne=R.read_shift(2),le=X[ne]||X[65535],ie=R.read_shift(2),ae=R.l+ie,Ae=le.f&&le.f(R,ie,W);if(R.l=ae,F(Ae,le,ne))return}}}function t(R,F){switch(F.type){case"base64":return r(Xc(su(R)),F);case"binary":return r(Xc(R),F);case"buffer":case"array":return r(R,F)}throw"Unsupported type "+F.type}function r(R,F){if(!R)return R;var W=F||{},X=W.dense?[]:{},ne="Sheet1",le="",ie=0,ae={},Ae=[],ke=[],re={s:{r:0,c:0},e:{r:0,c:0}},Re=W.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)W.Enum=K,e(R,function(Ce,me,ye){switch(ye){case 0:W.vers=Ce,Ce>=4096&&(W.qpro=!0);break;case 6:re=Ce;break;case 204:Ce&&(le=Ce);break;case 222:le=Ce;break;case 15:case 51:W.qpro||(Ce[1].v=Ce[1].v.slice(1));case 13:case 14:case 16:ye==14&&(Ce[2]&112)==112&&(Ce[2]&15)>1&&(Ce[2]&15)<15&&(Ce[1].z=W.dateNF||Dr[14],W.cellDates&&(Ce[1].t="d",Ce[1].v=NS(Ce[1].v))),W.qpro&&Ce[3]>ie&&(X["!ref"]=Jr(re),ae[ne]=X,Ae.push(ne),X=W.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},ie=Ce[3],ne=le||"Sheet"+(ie+1),le="");var oe=W.dense?(X[Ce[0].r]||[])[Ce[0].c]:X[Ur(Ce[0])];if(oe){oe.t=Ce[1].t,oe.v=Ce[1].v,Ce[1].z!=null&&(oe.z=Ce[1].z),Ce[1].f!=null&&(oe.f=Ce[1].f);break}W.dense?(X[Ce[0].r]||(X[Ce[0].r]=[]),X[Ce[0].r][Ce[0].c]=Ce[1]):X[Ur(Ce[0])]=Ce[1];break}},W);else if(R[2]==26||R[2]==14)W.Enum=J,R[2]==14&&(W.qpro=!0,R.l=0),e(R,function(Ce,me,ye){switch(ye){case 204:ne=Ce;break;case 22:Ce[1].v=Ce[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ce[3]>ie&&(X["!ref"]=Jr(re),ae[ne]=X,Ae.push(ne),X=W.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},ie=Ce[3],ne="Sheet"+(ie+1)),Re>0&&Ce[0].r>=Re)break;W.dense?(X[Ce[0].r]||(X[Ce[0].r]=[]),X[Ce[0].r][Ce[0].c]=Ce[1]):X[Ur(Ce[0])]=Ce[1],re.e.c<Ce[0].c&&(re.e.c=Ce[0].c),re.e.r<Ce[0].r&&(re.e.r=Ce[0].r);break;case 27:Ce[14e3]&&(ke[Ce[14e3][0]]=Ce[14e3][1]);break;case 1537:ke[Ce[0]]=Ce[1],Ce[0]==ie&&(ne=Ce[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(X["!ref"]=Jr(re),ae[le||ne]=X,Ae.push(le||ne),!ke.length)return{SheetNames:Ae,Sheets:ae};for(var Le={},Te=[],de=0;de<ke.length;++de)ae[Ae[de]]?(Te.push(ke[de]||Ae[de]),Le[ke[de]]=ae[ke[de]]||ae[Ae[de]]):(Te.push(ke[de]),Le[ke[de]]={"!ref":"A1"});return{SheetNames:Te,Sheets:Le}}function a(R,F){var W=F||{};if(+W.codepage>=0&&Hd(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var X=hc(),ne=Da(R["!ref"]),le=Array.isArray(R),ie=[];Gt(X,0,s(1030)),Gt(X,6,c(ne));for(var ae=Math.min(ne.e.r,8191),Ae=ne.s.r;Ae<=ae;++Ae)for(var ke=ti(Ae),re=ne.s.c;re<=ne.e.c;++re){Ae===ne.s.r&&(ie[re]=us(re));var Re=ie[re]+ke,Le=le?(R[Ae]||[])[re]:R[Re];if(!(!Le||Le.t=="z"))if(Le.t=="n")(Le.v|0)==Le.v&&Le.v>=-32768&&Le.v<=32767?Gt(X,13,m(Ae,re,Le.v)):Gt(X,14,x(Ae,re,Le.v));else{var Te=Hh(Le);Gt(X,15,f(Ae,re,Te.slice(0,239)))}}return Gt(X,1),X.end()}function n(R,F){var W=F||{};if(+W.codepage>=0&&Hd(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var X=hc();Gt(X,0,o(R));for(var ne=0,le=0;ne<R.SheetNames.length;++ne)(R.Sheets[R.SheetNames[ne]]||{})["!ref"]&&Gt(X,27,Y(R.SheetNames[ne],le++));var ie=0;for(ne=0;ne<R.SheetNames.length;++ne){var ae=R.Sheets[R.SheetNames[ne]];if(!(!ae||!ae["!ref"])){for(var Ae=Da(ae["!ref"]),ke=Array.isArray(ae),re=[],Re=Math.min(Ae.e.r,8191),Le=Ae.s.r;Le<=Re;++Le)for(var Te=ti(Le),de=Ae.s.c;de<=Ae.e.c;++de){Le===Ae.s.r&&(re[de]=us(de));var Ce=re[de]+Te,me=ke?(ae[Le]||[])[de]:ae[Ce];if(!(!me||me.t=="z"))if(me.t=="n")Gt(X,23,L(Le,de,ie,me.v));else{var ye=Hh(me);Gt(X,22,C(Le,de,ie,ye.slice(0,239)))}}++ie}}return Gt(X,1),X.end()}function s(R){var F=Ct(2);return F.write_shift(2,R),F}function o(R){var F=Ct(26);F.write_shift(2,4096),F.write_shift(2,4),F.write_shift(4,0);for(var W=0,X=0,ne=0,le=0;le<R.SheetNames.length;++le){var ie=R.SheetNames[le],ae=R.Sheets[ie];if(!(!ae||!ae["!ref"])){++ne;var Ae=pc(ae["!ref"]);W<Ae.e.r&&(W=Ae.e.r),X<Ae.e.c&&(X=Ae.e.c)}}return W>8191&&(W=8191),F.write_shift(2,W),F.write_shift(1,ne),F.write_shift(1,X),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(1,1),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(4,0),F}function l(R,F,W){var X={s:{c:0,r:0},e:{c:0,r:0}};return F==8&&W.qpro?(X.s.c=R.read_shift(1),R.l++,X.s.r=R.read_shift(2),X.e.c=R.read_shift(1),R.l++,X.e.r=R.read_shift(2),X):(X.s.c=R.read_shift(2),X.s.r=R.read_shift(2),F==12&&W.qpro&&(R.l+=2),X.e.c=R.read_shift(2),X.e.r=R.read_shift(2),F==12&&W.qpro&&(R.l+=2),X.s.c==65535&&(X.s.c=X.e.c=X.s.r=X.e.r=0),X)}function c(R){var F=Ct(8);return F.write_shift(2,R.s.c),F.write_shift(2,R.s.r),F.write_shift(2,R.e.c),F.write_shift(2,R.e.r),F}function u(R,F,W){var X=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(X[0].c=R.read_shift(1),X[3]=R.read_shift(1),X[0].r=R.read_shift(2),R.l+=2):(X[2]=R.read_shift(1),X[0].c=R.read_shift(2),X[0].r=R.read_shift(2)),X}function d(R,F,W){var X=R.l+F,ne=u(R,F,W);if(ne[1].t="s",W.vers==20768){R.l++;var le=R.read_shift(1);return ne[1].v=R.read_shift(le,"utf8"),ne}return W.qpro&&R.l++,ne[1].v=R.read_shift(X-R.l,"cstr"),ne}function f(R,F,W){var X=Ct(7+W.length);X.write_shift(1,255),X.write_shift(2,F),X.write_shift(2,R),X.write_shift(1,39);for(var ne=0;ne<X.length;++ne){var le=W.charCodeAt(ne);X.write_shift(1,le>=128?95:le)}return X.write_shift(1,0),X}function h(R,F,W){var X=u(R,F,W);return X[1].v=R.read_shift(2,"i"),X}function m(R,F,W){var X=Ct(7);return X.write_shift(1,255),X.write_shift(2,F),X.write_shift(2,R),X.write_shift(2,W,"i"),X}function g(R,F,W){var X=u(R,F,W);return X[1].v=R.read_shift(8,"f"),X}function x(R,F,W){var X=Ct(13);return X.write_shift(1,255),X.write_shift(2,F),X.write_shift(2,R),X.write_shift(8,W,"f"),X}function v(R,F,W){var X=R.l+F,ne=u(R,F,W);if(ne[1].v=R.read_shift(8,"f"),W.qpro)R.l=X;else{var le=R.read_shift(2);O(R.slice(R.l,R.l+le),ne),R.l+=le}return ne}function y(R,F,W){var X=F&32768;return F&=-32769,F=(X?R:0)+(F>=8192?F-16384:F),(X?"":"$")+(W?us(F):ti(F))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function O(R,F){Eo(R,0);for(var W=[],X=0,ne="",le="",ie="",ae="";R.l<R.length;){var Ae=R[R.l++];switch(Ae){case 0:W.push(R.read_shift(8,"f"));break;case 1:le=y(F[0].c,R.read_shift(2),!0),ne=y(F[0].r,R.read_shift(2),!1),W.push(le+ne);break;case 2:{var ke=y(F[0].c,R.read_shift(2),!0),re=y(F[0].r,R.read_shift(2),!1);le=y(F[0].c,R.read_shift(2),!0),ne=y(F[0].r,R.read_shift(2),!1),W.push(ke+re+":"+le+ne)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(R.read_shift(2));break;case 6:{for(var Re="";Ae=R[R.l++];)Re+=String.fromCharCode(Ae);W.push('"'+Re.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:ae=W.pop(),ie=W.pop(),W.push(["AND","OR"][Ae-20]+"("+ie+","+ae+")");break;default:if(Ae<32&&j[Ae])ae=W.pop(),ie=W.pop(),W.push(ie+j[Ae]+ae);else if(w[Ae]){if(X=w[Ae][1],X==69&&(X=R[R.l++]),X>W.length){console.error("WK1 bad formula parse 0x"+Ae.toString(16)+":|"+W.join("|")+"|");return}var Le=W.slice(-X);W.length-=X,W.push(w[Ae][0]+"("+Le.join(",")+")")}else return Ae<=7?console.error("WK1 invalid opcode "+Ae.toString(16)):Ae<=24?console.error("WK1 unsupported op "+Ae.toString(16)):Ae<=30?console.error("WK1 invalid opcode "+Ae.toString(16)):Ae<=115?console.error("WK1 unsupported function opcode "+Ae.toString(16)):console.error("WK1 unrecognized opcode "+Ae.toString(16))}}W.length==1?F[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function B(R){var F=[{c:0,r:0},{t:"n",v:0},0];return F[0].r=R.read_shift(2),F[3]=R[R.l++],F[0].c=R[R.l++],F}function T(R,F){var W=B(R);return W[1].t="s",W[1].v=R.read_shift(F-4,"cstr"),W}function C(R,F,W,X){var ne=Ct(6+X.length);ne.write_shift(2,R),ne.write_shift(1,W),ne.write_shift(1,F),ne.write_shift(1,39);for(var le=0;le<X.length;++le){var ie=X.charCodeAt(le);ne.write_shift(1,ie>=128?95:ie)}return ne.write_shift(1,0),ne}function _(R,F){var W=B(R);W[1].v=R.read_shift(2);var X=W[1].v>>1;if(W[1].v&1)switch(X&7){case 0:X=(X>>3)*5e3;break;case 1:X=(X>>3)*500;break;case 2:X=(X>>3)/20;break;case 3:X=(X>>3)/200;break;case 4:X=(X>>3)/2e3;break;case 5:X=(X>>3)/2e4;break;case 6:X=(X>>3)/16;break;case 7:X=(X>>3)/64;break}return W[1].v=X,W}function S(R,F){var W=B(R),X=R.read_shift(4),ne=R.read_shift(4),le=R.read_shift(2);if(le==65535)return X===0&&ne===3221225472?(W[1].t="e",W[1].v=15):X===0&&ne===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var ie=le&32768;return le=(le&32767)-16446,W[1].v=(1-ie*2)*(ne*Math.pow(2,le+32)+X*Math.pow(2,le)),W}function L(R,F,W,X){var ne=Ct(14);if(ne.write_shift(2,R),ne.write_shift(1,W),ne.write_shift(1,F),X==0)return ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(2,65535),ne;var le=0,ie=0,ae=0,Ae=0;return X<0&&(le=1,X=-X),ie=Math.log2(X)|0,X/=Math.pow(2,ie-31),Ae=X>>>0,(Ae&2147483648)==0&&(X/=2,++ie,Ae=X>>>0),X-=Ae,Ae|=2147483648,Ae>>>=0,X*=Math.pow(2,32),ae=X>>>0,ne.write_shift(4,ae),ne.write_shift(4,Ae),ie+=16383+(le?32768:0),ne.write_shift(2,ie),ne}function P(R,F){var W=S(R);return R.l+=F-14,W}function k(R,F){var W=B(R),X=R.read_shift(4);return W[1].v=X>>6,W}function M(R,F){var W=B(R),X=R.read_shift(8,"f");return W[1].v=X,W}function U(R,F){var W=M(R);return R.l+=F-10,W}function z(R,F){return R[R.l+F-1]==0?R.read_shift(F,"cstr"):""}function Q(R,F){var W=R[R.l++];W>F-1&&(W=F-1);for(var X="";X.length<W;)X+=String.fromCharCode(R[R.l++]);return X}function q(R,F,W){if(!(!W.qpro||F<21)){var X=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var ne=R.read_shift(F-21,"cstr");return[X,ne]}}function V(R,F){for(var W={},X=R.l+F;R.l<X;){var ne=R.read_shift(2);if(ne==14e3){for(W[ne]=[0,""],W[ne][0]=R.read_shift(2);R[R.l];)W[ne][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return W}function Y(R,F){var W=Ct(5+R.length);W.write_shift(2,14e3),W.write_shift(2,F);for(var X=0;X<R.length;++X){var ne=R.charCodeAt(X);W[W.l++]=ne>127?95:ne}return W[W.l++]=0,W}var K={0:{n:"BOF",f:pi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:z},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},J={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:T},23:{n:"NUMBER17",f:S},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:V},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:M},40:{n:"FORMULA28",f:U},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:n,to_workbook:t}}();function r_e(e){var t={},r=e.match(ml),a=0,n=!1;if(r)for(;a!=r.length;++a){var s=Vr(r[a]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=HR[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(s[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+s[0])}}return t}var a_e=function(){var e=Sw("t"),t=Sw("rPr");function r(s){var o=s.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Fa(o[1])},c=s.match(t);return c&&(l.s=r_e(c[1])),l}var a=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(n).map(r).filter(function(l){return l.v})}}(),n_e=function(){var t=/(\r\n|\n)/g;function r(n,s,o){var l=[];n.u&&l.push("text-decoration: underline;"),n.uval&&l.push("text-underline-style:"+n.uval+";"),n.sz&&l.push("font-size:"+n.sz+"pt;"),n.outline&&l.push("text-effect: outline;"),n.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),n.b&&(s.push("<b>"),o.push("</b>")),n.i&&(s.push("<i>"),o.push("</i>")),n.strike&&(s.push("<s>"),o.push("</s>"));var c=n.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),n}function a(n){var s=[[],n.v,[]];return n.v?(n.s&&r(n.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(a).join("")}}(),s_e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,i_e=/<(?:\w+:)?r>/,o_e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function f8(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Fa(jn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=jn(e),r&&(a.h=JR(a.t))):e.match(i_e)&&(a.r=jn(e),a.t=Fa(jn((e.replace(o_e,"").match(s_e)||[]).join("").replace(ml,""))),r&&(a.h=n_e(a_e(a.r)))),a):{t:""}}var l_e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,c_e=/<(?:\w+:)?(?:si|sstItem)>/g,u_e=/<\/(?:\w+:)?(?:si|sstItem)>/;function d_e(e,t){var r=[],a="";if(!e)return r;var n=e.match(l_e);if(n){a=n[2].replace(c_e,"").split(u_e);for(var s=0;s!=a.length;++s){var o=f8(a[s].trim(),t);o!=null&&(r[r.length]=o)}n=Vr(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}var f_e=/^\s|\s$|[\t\n\r]/;function yae(e,t){if(!t.bookSST)return"";var r=[ni];r[r.length]=$t("sst",null,{xmlns:ax[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var n=e[a],s="<si>";n.r?s+=n.r:(s+="<t",n.t||(n.t=""),n.t.match(f_e)&&(s+=' xml:space="preserve"'),s+=">"+pn(n.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function A_e(e){return[e.read_shift(4),e.read_shift(4)]}function h_e(e,t){var r=[],a=!1;return s0(e,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function m_e(e,t){return t||(t=Ct(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var p_e=j5e;function g_e(e){var t=hc();Mt(t,159,m_e(e));for(var r=0;r<e.length;++r)Mt(t,19,p_e(e[r]));return Mt(t,160),t.end()}function wae(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function Bh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function x_e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Bh(e,4),t.U=Bh(e,4),t.W=Bh(e,4),t}function v_e(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},n=e.read_shift(4),s=[];n-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function b_e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(v_e(e));return t}function y_e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function w_e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Bh(e,4),t.U=Bh(e,4),t.W=Bh(e,4),t}function N_e(e){var t=w_e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Nae(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var n=!1;switch(a.AlgID){case 26126:case 26127:case 26128:n=a.Flags==36;break;case 26625:n=a.Flags==4;break;case 0:n=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function Eae(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function E_e(e){var t=Bh(e);switch(t.Minor){case 2:return[t.Minor,C_e(e)];case 3:return[t.Minor,j_e()];case 4:return[t.Minor,k_e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function C_e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=Nae(e,r),n=Eae(e,e.length-e.l);return{t:"Std",h:a,v:n}}function j_e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function k_e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(ml,function(s){var o=Vr(s);switch(EA(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function __e(e,t){var r={},a=r.EncryptionVersionInfo=Bh(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var n=e.read_shift(4);return t-=4,r.EncryptionHeader=Nae(e,n),t-=n,r.EncryptionVerifier=Eae(e,t),r}function S_e(e){var t={},r=t.EncryptionVersionInfo=Bh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function A8(e){var t=0,r,a=wae(e),n=a.length+1,s,o,l,c,u;for(r=Km(n),r[0]=a.length,s=1;s!=n;++s)r[s]=a[s-1];for(s=n-1;s>=0;--s)o=r[s],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var Cae=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},n=function(o,l){return a(o^l)},s=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=wae(o),c=s(l),u=l.length,d=Km(16),f=0;f!=16;++f)d[f]=0;var h,m,g;for((u&1)===1&&(h=c>>8,d[u]=n(e[0],h),--u,h=c&255,m=l[l.length-1],d[u]=n(m,h));u>0;)--u,h=c>>8,d[u]=n(l[u],h),--u,h=c&255,d[u]=n(l[u],h);for(u=15,g=15-l.length;g>0;)h=c>>8,d[u]=n(e[g],h),--u,--g,h=c&255,d[u]=n(l[u],h),--u,--g;return d}}(),B_e=function(e,t,r,a,n){n||(n=t),a||(a=Cae(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=a[r],o=(o>>5|o<<3)&255,n[s]=o,++r;return[n,r,a]},T_e=function(e){var t=0,r=Cae(e);return function(a){var n=B_e("",a,t,r);return t=n[1],n[0]}};function I_e(e,t,r,a){var n={key:pi(e),verificationBytes:pi(e)};return r.password&&(n.verifier=A8(r.password)),a.valid=n.verificationBytes===n.verifier,a.valid&&(a.insitu=T_e(r.password)),n}function O_e(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=S_e(e):a.Data=__e(e,t),a}function F_e(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?O_e(e,t-2,a):I_e(e,r.biff>=8?t:t-2,r,a),a}var jae=function(){function e(n,s){switch(s.type){case"base64":return t(su(n),s);case"binary":return t(n,s);case"buffer":return t(da&&Buffer.isBuffer(n)?n.toString("binary"):op(n),s);case"array":return t(Rg(n),s)}throw new Error("Unrecognized type "+s.type)}function t(n,s){var o=s||{},l=o.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,m=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(m,h.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(l)?l[f][x]=y:l[Ur({r:f,c:x})]=y}break}m=h.lastIndex}x>u.e.c&&(u.e.c=x)}),l["!ref"]=Jr(u),l}function r(n,s){return lp(e(n,s),s)}function a(n){for(var s=["{\\rtf1\\ansi"],o=Da(n["!ref"]),l,c=Array.isArray(n),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=Ur({r:u,c:d});l=c?(n[u]||[])[d]:n[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Hh(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}}();function D_e(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Ow(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function P_e(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,n=Math.max(t,r,a),s=Math.min(t,r,a),o=n-s;if(o===0)return[0,0,t];var l=0,c=0,u=n+s;switch(c=o/(u>1?2-u:u),n){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,u/2]}function R_e(e){var t=e[0],r=e[1],a=e[2],n=r*2*(a<.5?a:1-a),s=a-n/2,o=[s,s,s],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=n*l,o[0]+=n,o[1]+=c;break;case 1:c=n*(2-l),o[0]+=c,o[1]+=n;break;case 2:c=n*(l-2),o[1]+=n,o[2]+=c;break;case 3:c=n*(4-l),o[1]+=c,o[2]+=n;break;case 4:c=n*(l-4),o[2]+=n,o[0]+=c;break;case 5:c=n*(6-l),o[2]+=c,o[0]+=n;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function lk(e,t){if(t===0)return e;var r=P_e(D_e(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Ow(R_e(r))}var kae=6,L_e=15,M_e=1,al=kae;function Fw(e){return Math.floor((e+Math.round(128/al)/256)*al)}function Dw(e){return Math.floor((e-5)/al*100+.5)/100}function ck(e){return Math.round((e*al+5)/al*256)/256}function MB(e){return ck(Dw(Fw(e)))}function h8(e){var t=Math.abs(e-MB(e)),r=al;if(t>.005)for(al=M_e;al<L_e;++al)Math.abs(e-MB(e))<=t&&(t=Math.abs(e-MB(e)),r=al);al=r}function Wm(e){e.width?(e.wpx=Fw(e.width),e.wch=Dw(e.wpx),e.MDW=al):e.wpx?(e.wch=Dw(e.wpx),e.width=ck(e.wch),e.MDW=al):typeof e.wch=="number"&&(e.width=ck(e.wch),e.wpx=Fw(e.width),e.MDW=al),e.customWidth&&delete e.customWidth}var U_e=96,_ae=U_e;function Pw(e){return e*96/_ae}function Sb(e){return e*_ae/96}var Q_e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function H_e(e,t,r,a){t.Borders=[];var n={},s=!1;(e[0].match(ml)||[]).forEach(function(o){var l=Vr(o);switch(EA(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},l.diagonalUp&&(n.diagonalUp=Vn(l.diagonalUp)),l.diagonalDown&&(n.diagonalDown=Vn(l.diagonalDown)),t.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function z_e(e,t,r,a){t.Fills=[];var n={},s=!1;(e[0].match(ml)||[]).forEach(function(o){var l=Vr(o);switch(EA(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},t.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":l.patternType&&(n.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),l.indexed&&(n.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(n.bgColor.theme=parseInt(l.theme,10)),l.tint&&(n.bgColor.tint=parseFloat(l.tint)),l.rgb&&(n.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),l.theme&&(n.fgColor.theme=parseInt(l.theme,10)),l.tint&&(n.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(n.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function V_e(e,t,r,a){t.Fonts=[];var n={},s=!1;(e[0].match(ml)||[]).forEach(function(o){var l=Vr(o);switch(EA(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(n),n={};break;case"<name":l.val&&(n.name=jn(l.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=l.val?Vn(l.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=l.val?Vn(l.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(l.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=l.val?Vn(l.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=l.val?Vn(l.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=l.val?Vn(l.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=l.val?Vn(l.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=l.val?Vn(l.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":l.val&&(n.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(n.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(n.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(n.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=HR[parseInt(l.val,10)];break;case"<color":if(n.color||(n.color={}),l.auto&&(n.color.auto=Vn(l.auto)),l.rgb)n.color.rgb=l.rgb.slice(-6);else if(l.indexed){n.color.index=parseInt(l.indexed,10);var c=mg[n.color.index];n.color.index==81&&(c=mg[1]),c||(c=mg[1]),n.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(n.color.theme=parseInt(l.theme,10),l.tint&&(n.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=lk(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function $_e(e,t,r){t.NumberFmt=[];for(var a=Ds(Dr),n=0;n<a.length;++n)t.NumberFmt[a[n]]=Dr[a[n]];var s=e[0].match(ml);if(s)for(n=0;n<s.length;++n){var o=Vr(s[n]);switch(EA(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Fa(jn(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Sh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function G_e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=$t("numFmt",null,{numFmtId:a,formatCode:pn(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=$t("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var kC=["numFmtId","fillId","fontId","borderId","xfId"],_C=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function q_e(e,t,r){t.CellXf=[];var a,n=!1;(e[0].match(ml)||[]).forEach(function(s){var o=Vr(s),l=0;switch(EA(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<kC.length;++l)a[kC[l]]&&(a[kC[l]]=parseInt(a[kC[l]],10));for(l=0;l<_C.length;++l)a[_C[l]]&&(a[_C[l]]=Vn(a[_C[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Vn(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function K_e(e){var t=[];return t[t.length]=$t("cellXfs",null),e.forEach(function(r){t[t.length]=$t("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=$t("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var W_e=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&$_e(f,d,u),(f=l.match(n))&&V_e(f,d,c,u),(f=l.match(a))&&z_e(f,d,c,u),(f=l.match(s))&&H_e(f,d,c,u),(f=l.match(r))&&q_e(f,d,u),d}}();function Sae(e,t){var r=[ni,$t("styleSheet",null,{xmlns:ax[0],"xmlns:vt":Ii.vt})],a;return e.SSF&&(a=G_e(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=K_e(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function X_e(e,t){var r=e.read_shift(2),a=dl(e);return[r,a]}function Y_e(e,t,r){r||(r=Ct(6+4*t.length)),r.write_shift(2,e),ro(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function J_e(e,t,r){var a={};a.sz=e.read_shift(2)/20;var n=O5e(e);n.fItalic&&(a.italic=1),n.fCondense&&(a.condense=1),n.fExtend&&(a.extend=1),n.fShadow&&(a.shadow=1),n.fOutline&&(a.outline=1),n.fStrikeout&&(a.strike=1);var s=e.read_shift(2);switch(s===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=I5e(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=dl(e),a}function Z_e(e,t){t||(t=Ct(153)),t.write_shift(2,e.sz*20),F5e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),sk(e.color,t);var a=0;return a=2,t.write_shift(1,a),ro(e.name,t),t.length>t.l?t.slice(0,t.l):t}var eSe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],UB,tSe=Al;function tV(e,t){t||(t=Ct(84)),UB||(UB=yS(eSe));var r=UB[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(sk({auto:1},t),sk({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function rSe(e,t){var r=e.l+t,a=e.read_shift(2),n=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:n}}function Bae(e,t,r){r||(r=Ct(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Sy(e,t){return t||(t=Ct(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var aSe=Al;function nSe(e,t){return t||(t=Ct(51)),t.write_shift(1,0),Sy(null,t),Sy(null,t),Sy(null,t),Sy(null,t),Sy(null,t),t.length>t.l?t.slice(0,t.l):t}function sSe(e,t){return t||(t=Ct(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),nk(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function iSe(e,t,r){var a=Ct(2052);return a.write_shift(4,e),nk(t,a),nk(r,a),a.length>a.l?a.slice(0,a.l):a}function oSe(e,t,r){var a={};a.NumberFmt=[];for(var n in Dr)a.NumberFmt[n]=Dr[n];a.CellXf=[],a.Fonts=[];var s=[],o=!1;return s0(e,function(c,u,d){switch(d){case 44:a.NumberFmt[c[0]]=c[1],Sh(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=lk(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}function lSe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)t[n]!=null&&++r}),r!=0&&(Mt(e,615,Jd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)t[n]!=null&&Mt(e,44,Y_e(n,t[n]))}),Mt(e,616))}}function cSe(e){var t=1;Mt(e,611,Jd(t)),Mt(e,43,Z_e({sz:12,color:{theme:1},name:"Calibri",family:2})),Mt(e,612)}function uSe(e){var t=2;Mt(e,603,Jd(t)),Mt(e,45,tV({patternType:"none"})),Mt(e,45,tV({patternType:"gray125"})),Mt(e,604)}function dSe(e){var t=1;Mt(e,613,Jd(t)),Mt(e,46,nSe()),Mt(e,614)}function fSe(e){var t=1;Mt(e,626,Jd(t)),Mt(e,47,Bae({numFmtId:0},65535)),Mt(e,627)}function ASe(e,t){Mt(e,617,Jd(t.length)),t.forEach(function(r){Mt(e,47,Bae(r,0))}),Mt(e,618)}function hSe(e){var t=1;Mt(e,619,Jd(t)),Mt(e,48,sSe({xfId:0,name:"Normal"})),Mt(e,620)}function mSe(e){var t=0;Mt(e,505,Jd(t)),Mt(e,506)}function pSe(e){var t=0;Mt(e,508,iSe(t,"TableStyleMedium9","PivotStyleMedium4")),Mt(e,509)}function gSe(e,t){var r=hc();return Mt(r,278),lSe(r,e.SSF),cSe(r),uSe(r),dSe(r),fSe(r),ASe(r,t.cellXfs),hSe(r),mSe(r),pSe(r),Mt(r,279),r.end()}var xSe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function vSe(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(ml)||[]).forEach(function(n){var s=Vr(n);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=s.val;break;case"<a:sysClr":a.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[xSe.indexOf(s[0])]=a,a={}):a.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function bSe(){}function ySe(){}var wSe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,NSe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,ESe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function CSe(e,t,r){t.themeElements={};var a;[["clrScheme",wSe,vSe],["fontScheme",NSe,bSe],["fmtScheme",ESe,ySe]].forEach(function(n){if(!(a=e.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](a,t,r)})}var jSe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Tae(e,t){(!e||e.length===0)&&(e=m8());var r,a={};if(!(r=e.match(jSe)))throw new Error("themeElements not found in theme");return CSe(r[0],a,t),a.raw=e,a}function m8(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ni];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function kSe(e,t,r){var a=e.l+t,n=e.read_shift(4);if(n!==124226){if(!r.cellStyles){e.l=a;return}var s=e.slice(e.l);e.l=a;var o;try{o=Nre(s,{type:"array"})}catch{return}var l=Yc(o,"theme/theme/theme1.xml",!0);if(l)return Tae(l,r)}}function _Se(e){return e.read_shift(4)}function SSe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=BSe(e,4);break;case 2:t.xclrValue=uae(e);break;case 3:t.xclrValue=_Se(e);break;case 4:e.l+=4;break}return e.l+=8,t}function BSe(e,t){return Al(e,t)}function TSe(e,t){return Al(e,t)}function ISe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=SSe(e);break;case 6:a[1]=TSe(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function OSe(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),s=[];n-- >0;)s.push(ISe(e,r-e.l));return{ixfe:a,ext:s}}function FSe(e,t){t.forEach(function(r){r[0]})}function DSe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:dl(e)}}function PSe(e){var t=Ct(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),ro(e.name,t),t.slice(0,t.l)}function RSe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function LSe(e){var t=Ct(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function MSe(e,t){var r=Ct(8+2*t.length);return r.write_shift(4,e),ro(t,r),r.slice(0,r.l)}function USe(e){return e.l+=4,e.read_shift(4)!=0}function QSe(e,t){var r=Ct(8);return r.write_shift(4,e),r.write_shift(4,1),r}function HSe(e,t,r){var a={Types:[],Cell:[],Value:[]},n=r||{},s=[],o=!1,l=2;return s0(e,function(c,u,d){switch(d){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):l==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||n.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}function zSe(){var e=hc();return Mt(e,332),Mt(e,334,Jd(1)),Mt(e,335,PSe({name:"XLDAPR",version:12e4,flags:3496657072})),Mt(e,336),Mt(e,339,MSe(1,"XLDAPR")),Mt(e,52),Mt(e,35,Jd(514)),Mt(e,4096,Jd(0)),Mt(e,4097,Gu(1)),Mt(e,36),Mt(e,53),Mt(e,340),Mt(e,337,QSe(1)),Mt(e,51,LSe([[1,0]])),Mt(e,338),Mt(e,333),e.end()}function VSe(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var n=!1,s=2,o;return e.replace(ml,function(l){var c=Vr(l);switch(EA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<a.Types.length;++u)a.Types[u].name==c.name&&(o=a.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):s==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function Iae(){var e=[ni];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function $Se(e){var t=[];if(!e)return t;var r=1;return(e.match(ml)||[]).forEach(function(a){var n=Vr(a);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,t.push(n);break}}),t}function GSe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Ur(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function qSe(e,t,r){var a=[];return s0(e,function(s,o,l){switch(l){case 63:a.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function KSe(e,t,r,a){if(!e)return e;var n=a||{},s=!1;s0(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||n.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},n)}function WSe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Iv=1024;function Oae(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),n=[$t("xml",null,{"xmlns:v":$c.v,"xmlns:o":$c.o,"xmlns:x":$c.x,"xmlns:mv":$c.mv}).replace(/\/>/,">"),$t("o:shapelayout",$t("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),$t("v:shapetype",[$t("v:stroke",null,{joinstyle:"miter"}),$t("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];Iv<e*1e3;)Iv+=1e3;return t.forEach(function(s){var o=ds(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?$t("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=$t("v:fill",c,l),d={on:"t",obscured:"t"};++Iv,n=n.concat(["<v:shape"+Bw({id:"_x0000_s"+Iv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,$t("v:shadow",null,d),$t("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",jo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),jo("x:AutoFill","False"),jo("x:Row",String(o.r)),jo("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function rV(e,t,r,a){var n=Array.isArray(e),s;t.forEach(function(o){var l=ds(o.ref);if(n?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[o.ref],!s){s={t:"z"},n?e[l.r][l.c]=s:e[o.ref]=s;var c=Da(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=Jr(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&a){for(f=0;f<a.length;++f)if(d.a==a[f].id){d.a=a[f].name||d.a;break}}s.c.push(d)})}function XSe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],n=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Vr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=ds(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&f8(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),a.push(u)}}}}),a}function Fae(e){var t=[ni,$t("comments",null,{xmlns:ax[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(n){var s=pn(n.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),n.T&&n.ID&&r.indexOf("tc="+n.ID)==-1&&(r.push("tc="+n.ID),t.push("<author>tc="+n.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var n=0,s=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?n=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(n=r.indexOf(pn(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+n+'"><text>'),s.length<=1)t.push(jo("t",pn(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;t.push(jo("t",pn(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function YSe(e,t){var r=[],a=!1,n={},s=0;return e.replace(ml,function(l,c){var u=Vr(l);switch(EA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":n.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function JSe(e,t,r){var a=[ni,$t("ThreadedComments",null,{xmlns:Ii.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(n){var s="";(n[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push($t("threadedComment",jo("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function ZSe(e,t){var r=[],a=!1;return e.replace(ml,function(s){var o=Vr(s);switch(EA(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function e4e(e){var t=[ni,$t("personList",null,{xmlns:Ii.TCMNT,"xmlns:x":ax[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push($t("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function t4e(e){var t={};t.iauthor=e.read_shift(4);var r=ox(e);return t.rfx=r.s,t.ref=Ur(r.s),e.l+=16,t}function r4e(e,t){return t==null&&(t=Ct(36)),t.write_shift(4,e[1].iauthor),v1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var a4e=dl;function n4e(e){return ro(e.slice(0,54))}function s4e(e,t){var r=[],a=[],n={},s=!1;return s0(e,function(l,c,u){switch(u){case 632:a.push(l);break;case 635:n=l;break;case 637:n.t=l.t,n.h=l.h,n.r=l.r;break;case 636:if(n.author=a[n.iauthor],delete n.iauthor,t.sheetRows&&n.rfx&&t.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function i4e(e){var t=hc(),r=[];return Mt(t,628),Mt(t,630),e.forEach(function(a){a[1].forEach(function(n){r.indexOf(n.a)>-1||(r.push(n.a.slice(0,54)),Mt(t,632,n4e(n.a)))})}),Mt(t,631),Mt(t,633),e.forEach(function(a){a[1].forEach(function(n){n.iauthor=r.indexOf(n.a);var s={s:ds(a[0]),e:ds(a[0])};Mt(t,635,r4e([s,n])),n.t&&n.t.length>0&&Mt(t,637,_5e(n)),Mt(t,636),delete n.iauthor})}),Mt(t,634),Mt(t,629),t.end()}var o4e="application/vnd.ms-office.vbaProject";function l4e(e){var t=Cr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Cr.utils.cfb_add(t,n,e.FileIndex[a].content)}}),Cr.write(t)}function c4e(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var n=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");n.slice(-1)!=="/"&&Cr.utils.cfb_add(e,n,t.FileIndex[a].content)}})}var Dae=["xlsb","xlsm","xlam","biff8","xla"];function u4e(){return{"!type":"dialog"}}function d4e(){return{"!type":"dialog"}}function f4e(){return{"!type":"macro"}}function A4e(){return{"!type":"macro"}}var Zv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,n,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,n+(l?"":"$")+us(d)+(c?"":"$")+ti(u)}return function(n,s){return t=s,n.replace(e,r)}}(),p8=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,g8=function(){return function(t,r){return t.replace(p8,function(a,n,s,o,l,c){var u=a8(o)-(s?0:r.c),d=r8(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return n+"R"+f+"C"+h})}}();function Pae(e,t){return e.replace(p8,function(r,a,n,s,o,l){return a+(n=="$"?n+s:us(a8(s)+t.c))+(o=="$"?o+l:ti(r8(l)+t.r))})}function h4e(e,t,r){var a=pc(t),n=a.s,s=ds(r),o={r:s.r-n.r,c:s.c-n.c};return Pae(e,o)}function m4e(e){return e.length!=1}function aV(e){return e.replace(/_xlfn\./g,"")}function fi(e){e.l+=1}function Xm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Rae(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return Lae(e);r.biff==12&&(a=4)}var n=e.read_shift(a),s=e.read_shift(a),o=Xm(e),l=Xm(e);return{s:{r:n,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Lae(e){var t=Xm(e),r=Xm(e),a=e.read_shift(1),n=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function p4e(e,t,r){if(r.biff<8)return Lae(e);var a=e.read_shift(r.biff==12?4:2),n=e.read_shift(r.biff==12?4:2),s=Xm(e),o=Xm(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r:n,c:o[0],cRel:o[1],rRel:o[2]}}}function Mae(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return g4e(e);var a=e.read_shift(r&&r.biff==12?4:2),n=Xm(e);return{r:a,c:n[0],cRel:n[1],rRel:n[2]}}function g4e(e){var t=Xm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function x4e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function v4e(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return b4e(e);var n=e.read_shift(a>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;n>524287;)n-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:n,c:s,cRel:o,rRel:l}}function b4e(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,n=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),n==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:n,rRel:a}}function y4e(e,t,r){var a=(e[e.l++]&96)>>5,n=Rae(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,n]}function w4e(e,t,r){var a=(e[e.l++]&96)>>5,n=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=Rae(e,s,r);return[a,n,o]}function N4e(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function E4e(e,t,r){var a=(e[e.l++]&96)>>5,n=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[a,n]}function C4e(e,t,r){var a=(e[e.l++]&96)>>5,n=p4e(e,t-1,r);return[a,n]}function j4e(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function nV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function k4e(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),n=[],s=0;s<=a;++s)n.push(e.read_shift(r&&r.biff==2?1:2));return n}function _4e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function S4e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function B4e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function T4e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function Uae(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function I4e(e){return e.read_shift(2),Uae(e)}function O4e(e){return e.read_shift(2),Uae(e)}function F4e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=Mae(e,0,r);return[a,n]}function D4e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=v4e(e,0,r);return[a,n]}function P4e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Mae(e,0,r);return[a,n,s]}function R4e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(r&&r.biff<=3?1:2);return[U3e[n],zae[n],a]}function L4e(e,t,r){var a=e[e.l++],n=e.read_shift(1),s=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:M4e(e);return[n,(s[0]===0?zae:M3e)[s[1]]]}function M4e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function U4e(e,t,r){e.l+=r&&r.biff==2?3:4}function Q4e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),n=e.read_shift(r&&r.biff==2?1:2);return[a,n]}function H4e(e){return e.l++,i0[e.read_shift(1)]}function z4e(e){return e.l++,e.read_shift(2)}function V4e(e){return e.l++,e.read_shift(1)!==0}function $4e(e){return e.l++,il(e)}function G4e(e,t,r){return e.l++,kN(e,t-1,r)}function q4e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Gs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=i0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=il(e);break;case 2:r[1]=lx(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function K4e(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),n=[],s=0;s!=a;++s)n.push((r.biff==12?ox:ES)(e));return n}function W4e(e,t,r){var a=0,n=0;r.biff==12?(a=e.read_shift(4),n=e.read_shift(4)):(n=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--n==0&&(n=256));for(var s=0,o=[];s!=a&&(o[s]=[]);++s)for(var l=0;l!=n;++l)o[s][l]=q4e(e,r.biff);return o}function X4e(e,t,r){var a=e.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,s=e.read_shift(n);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,s]}function Y4e(e,t,r){if(r.biff==5)return J4e(e);var a=e.read_shift(1)>>>5&3,n=e.read_shift(2),s=e.read_shift(4);return[a,n,s]}function J4e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function Z4e(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var n=e.read_shift(r&&r.biff==2?1:2);return[a,n]}function e3e(e,t,r){var a=e.read_shift(1)>>>5&3,n=e.read_shift(r&&r.biff==2?1:2);return[a,n]}function t3e(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function r3e(e,t,r){var a=(e[e.l++]&96)>>5,n=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[a,n]}var a3e=Al,n3e=Al,s3e=Al;function SN(e,t,r){return e.l+=2,[x4e(e)]}function x8(e){return e.l+=6,[]}var i3e=SN,o3e=x8,l3e=x8,c3e=SN;function Qae(e){return e.l+=2,[pi(e),e.read_shift(2)&1]}var u3e=SN,d3e=Qae,f3e=x8,A3e=SN,h3e=SN,m3e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function p3e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),n=e.read_shift(2),s=e.read_shift(2),o=m3e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:n,C:s}}function g3e(e){return e.l+=2,[e.read_shift(4)]}function x3e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function v3e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function b3e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function y3e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function w3e(e){return e.l+=4,[0,0]}var sV={1:{n:"PtgExp",f:Q4e},2:{n:"PtgTbl",f:s3e},3:{n:"PtgAdd",f:fi},4:{n:"PtgSub",f:fi},5:{n:"PtgMul",f:fi},6:{n:"PtgDiv",f:fi},7:{n:"PtgPower",f:fi},8:{n:"PtgConcat",f:fi},9:{n:"PtgLt",f:fi},10:{n:"PtgLe",f:fi},11:{n:"PtgEq",f:fi},12:{n:"PtgGe",f:fi},13:{n:"PtgGt",f:fi},14:{n:"PtgNe",f:fi},15:{n:"PtgIsect",f:fi},16:{n:"PtgUnion",f:fi},17:{n:"PtgRange",f:fi},18:{n:"PtgUplus",f:fi},19:{n:"PtgUminus",f:fi},20:{n:"PtgPercent",f:fi},21:{n:"PtgParen",f:fi},22:{n:"PtgMissArg",f:fi},23:{n:"PtgStr",f:G4e},26:{n:"PtgSheet",f:x3e},27:{n:"PtgEndSheet",f:v3e},28:{n:"PtgErr",f:H4e},29:{n:"PtgBool",f:V4e},30:{n:"PtgInt",f:z4e},31:{n:"PtgNum",f:$4e},32:{n:"PtgArray",f:j4e},33:{n:"PtgFunc",f:R4e},34:{n:"PtgFuncVar",f:L4e},35:{n:"PtgName",f:X4e},36:{n:"PtgRef",f:F4e},37:{n:"PtgArea",f:y4e},38:{n:"PtgMemArea",f:Z4e},39:{n:"PtgMemErr",f:a3e},40:{n:"PtgMemNoMem",f:n3e},41:{n:"PtgMemFunc",f:e3e},42:{n:"PtgRefErr",f:t3e},43:{n:"PtgAreaErr",f:N4e},44:{n:"PtgRefN",f:D4e},45:{n:"PtgAreaN",f:C4e},46:{n:"PtgMemAreaN",f:b3e},47:{n:"PtgMemNoMemN",f:y3e},57:{n:"PtgNameX",f:Y4e},58:{n:"PtgRef3d",f:P4e},59:{n:"PtgArea3d",f:w4e},60:{n:"PtgRefErr3d",f:r3e},61:{n:"PtgAreaErr3d",f:E4e},255:{}},N3e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},E3e={1:{n:"PtgElfLel",f:Qae},2:{n:"PtgElfRw",f:A3e},3:{n:"PtgElfCol",f:i3e},6:{n:"PtgElfRwV",f:h3e},7:{n:"PtgElfColV",f:c3e},10:{n:"PtgElfRadical",f:u3e},11:{n:"PtgElfRadicalS",f:f3e},13:{n:"PtgElfColS",f:o3e},15:{n:"PtgElfColSV",f:l3e},16:{n:"PtgElfRadicalLel",f:d3e},25:{n:"PtgList",f:p3e},29:{n:"PtgSxName",f:g3e},255:{}},C3e={0:{n:"PtgAttrNoop",f:w3e},1:{n:"PtgAttrSemi",f:T4e},2:{n:"PtgAttrIf",f:S4e},4:{n:"PtgAttrChoose",f:k4e},8:{n:"PtgAttrGoto",f:_4e},16:{n:"PtgAttrSum",f:U4e},32:{n:"PtgAttrBaxcel",f:nV},33:{n:"PtgAttrBaxcel",f:nV},64:{n:"PtgAttrSpace",f:I4e},65:{n:"PtgAttrSpaceSemi",f:O4e},128:{n:"PtgAttrIfError",f:B4e},255:{}};function BN(e,t,r,a){if(a.biff<8)return Al(e,t);for(var n=e.l+t,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=W4e(e,0,a),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=K4e(e,r[o][1],a),s.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=n-e.l,t!==0&&s.push(Al(e,t)),s}function TN(e,t,r){for(var a=e.l+t,n,s,o=[];a!=e.l;)t=a-e.l,s=e[e.l],n=sV[s]||sV[N3e[s]],(s===24||s===25)&&(n=(s===24?E3e:C3e)[e[e.l+1]]),!n||!n.f?Al(e,t):o.push([n.n,n.f(e,t,r)]);return o}function j3e(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],n=[],s=0;s<a.length;++s){var o=a[s];if(o)switch(o[0]){case 2:n.push('"'+o[1].replace(/"/g,'""')+'"');break;default:n.push(o[1])}else n.push("")}t.push(n.join(","))}return t.join(";")}var k3e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function _3e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Hae(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var n="";if(r.biff>8)switch(e[a[0]][0]){case 357:return n=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?n:n+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return n=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?n:n+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[a[0]][0][3]?(n=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?n:n+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function iV(e,t,r){var a=Hae(e,t,r);return a=="#REF"?a:_3e(a,r)}function el(e,t,r,a,n){var s=n&&n.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,w=e[0].length;y<w;++y){var j=e[0][y];switch(j[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=Ss(" ",e[0][x][1][1]);break;case 1:v=Ss("\r",e[0][x][1][1]);break;default:if(v="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+v,x=-1}l.push(u+k3e[j[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=z2(j[1][1],o,n),l.push(V2(d,s));break;case"PtgRefN":d=r?z2(j[1][1],r,n):j[1][1],l.push(V2(d,s));break;case"PtgRef3d":f=j[1][1],d=z2(j[1][2],o,n),g=iV(a,f,n),l.push(g+"!"+V2(d,s));break;case"PtgFunc":case"PtgFuncVar":var O=j[1][0],B=j[1][1];O||(O=0),O&=127;var T=O==0?[]:l.slice(-O);l.length-=O,B==="User"&&(B=T.shift()),l.push(B+"("+T.join(",")+")");break;case"PtgBool":l.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(j[1]);break;case"PtgNum":l.push(String(j[1]));break;case"PtgStr":l.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(j[1]);break;case"PtgAreaN":m=Dz(j[1][1],r?{s:r}:o,n),l.push(PB(m,n));break;case"PtgArea":m=Dz(j[1][1],o,n),l.push(PB(m,n));break;case"PtgArea3d":f=j[1][1],m=j[1][2],g=iV(a,f,n),l.push(g+"!"+PB(m,n));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=j[1][2];var C=(a.names||[])[h-1]||(a[0]||[])[h],_=C?C.Name:"SH33TJSNAME"+String(h);_&&_.slice(0,6)=="_xlfn."&&!n.xlfn&&(_=_.slice(6)),l.push(_);break;case"PtgNameX":var S=j[1][1];h=j[1][2];var L;if(n.biff<=5)S<0&&(S=-S),a[S]&&(L=a[S][h]);else{var P="";if(((a[S]||[])[0]||[])[0]==14849||(((a[S]||[])[0]||[])[0]==1025?a[S][h]&&a[S][h].itab>0&&(P=a.SheetNames[a[S][h].itab-1]+"!"):P=a.SheetNames[h-1]+"!"),a[S]&&a[S][h])P+=a[S][h].Name;else if(a[0]&&a[0][h])P+=a[0][h].Name;else{var k=(Hae(a,S,n)||"").split(";;");k[h-1]?P=k[h-1]:P+="SH33TJSERRX"}l.push(P);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var M="(",U=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:M=Ss(" ",e[0][x][1][1])+M;break;case 3:M=Ss("\r",e[0][x][1][1])+M;break;case 4:U=Ss(" ",e[0][x][1][1])+U;break;case 5:U=Ss("\r",e[0][x][1][1])+U;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(M+l.pop()+U);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:j[1][1],r:j[1][0]};var z={c:r.c,r:r.r};if(a.sharedf[Ur(d)]){var Q=a.sharedf[Ur(d)];l.push(el(Q,o,z,a,n))}else{var q=!1;for(c=0;c!=a.arrayf.length;++c)if(u=a.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(el(u[1],o,z,a,n)),q=!0;break}q||l.push(j[1])}break;case"PtgArray":l.push("{"+j3e(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var V=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&x>=0&&V.indexOf(e[0][y][0])==-1){j=e[0][x];var Y=!0;switch(j[1][0]){case 4:Y=!1;case 0:v=Ss(" ",j[1][1]);break;case 5:Y=!1;case 1:v=Ss("\r",j[1][1]);break;default:if(v="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}l.push((Y?v:"")+l.pop()+(Y?"":v)),x=-1}}if(l.length>1&&n.WTF)throw new Error("bad formula stack");return l[0]}function S3e(e,t,r){var a=e.l+t,n=r.biff==2?1:2,s,o=e.read_shift(n);if(o==65535)return[[],Al(e,t-2)];var l=TN(e,o,r);return t!==o+n&&(s=BN(e,t-o-n,l,r)),e.l=a,[l,s]}function B3e(e,t,r){var a=e.l+t,n=r.biff==2?1:2,s,o=e.read_shift(n);if(o==65535)return[[],Al(e,t-2)];var l=TN(e,o,r);return t!==o+n&&(s=BN(e,t-o-n,l,r)),e.l=a,[l,s]}function T3e(e,t,r,a){var n=e.l+t,s=TN(e,a,r),o;return n!==e.l&&(o=BN(e,n-e.l,s,r)),[s,o]}function I3e(e,t,r){var a=e.l+t,n,s=e.read_shift(2),o=TN(e,s,r);return s==65535?[[],Al(e,t-2)]:(t!==s+2&&(n=BN(e,a-s-2,o,r)),[o,n])}function O3e(e){var t;if(vh(e,e.l+6)!==65535)return[il(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function F3e(e){if(e==null){var t=Ct(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Lg(e);return Lg(0)}function QB(e,t,r){var a=e.l+t,n=CA(e);r.biff==2&&++e.l;var s=O3e(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=B3e(e,a-e.l,r);return{cell:n,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function D3e(e,t,r,a,n){var s=Ug(t,r,n),o=F3e(e.v),l=Ct(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Ct(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=to([s,o,l,u]);return f}function CS(e,t,r){var a=e.read_shift(4),n=TN(e,a,r),s=e.read_shift(4),o=s>0?BN(e,s,n,r):null;return[n,o]}var P3e=CS,jS=CS,R3e=CS,L3e=CS,M3e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},zae={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},U3e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function oV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Q3e(e){var t="of:="+e.replace(p8,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function HB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function H3e(e){return e.replace(/\./,"!")}var G2={},eb={},q2=typeof Map<"u";function v8(e,t,r){var a=0,n=e.length;if(r){if(q2?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=q2?r.get(t):r[t];a<s.length;++a)if(e[s[a]].t===t)return e.Count++,s[a]}}else for(;a<n;++a)if(e[a].t===t)return e.Count++,a;return e[n]={t},e.Count++,e.Unique++,r&&(q2?(r.has(t)||r.set(t,[]),r.get(t).push(n)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(n))),n}function kS(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(al=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=Dw(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=ck(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function xg(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function cp(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],n=60,s=e.length;if(a==null&&r.ssf){for(;n<392;++n)if(r.ssf[n]==null){Sh(t.z,n),r.ssf[n]=t.z,r.revssf[t.z]=a=n;break}}for(n=0;n!=s;++n)if(e[n].numFmtId===a)return n;return e[s]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Vae(e,t,r,a,n,s){try{a.cellNF&&(e.z=Dr[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Gn(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(Dr[t]==null&&Sh(MCe[t]||"General",t),e.t==="e")e.w=e.w||i0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=_w(e.v);else if(e.t==="d"){var o=Di(e.v);(o|0)===o?e.w=o.toString(10):e.w=_w(o)}else{if(e.v===void 0)return"";e.w=Pg(e.v,eb)}else e.t==="d"?e.w=ad(t,Di(e.v),eb):e.w=ad(t,e.v,eb)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=lk(n.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=n.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=lk(n.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=n.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&s.Fills)throw l}}}function z3e(e,t,r){if(e&&e["!ref"]){var a=Da(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function V3e(e,t){var r=Da(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Jr(r))}var $3e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,G3e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,q3e=/<(?:\w:)?hyperlink [^>]*>/mg,K3e=/"(\w*:\w*)"/,W3e=/<(?:\w:)?col\b[^>]*[\/]?>/g,X3e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Y3e=/<(?:\w:)?pageMargins[^>]*\/>/g,$ae=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,J3e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Z3e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function eBe(e,t,r,a,n,s,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(G3e);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match($ae);h?b8(h[0],l,n,r):(h=u.match(J3e))&&rBe(h[0],h[1]||"",l,n,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=u.slice(m,m+50).match(K3e);g&&V3e(l,g[1])}var x=u.match(Z3e);x&&x[1]&&mBe(x[1],n);var v=[];if(t.cellStyles){var y=u.match(W3e);y&&uBe(v,y)}f&&xBe(f[1],l,t,c,s,o);var w=d.match(X3e);w&&(l["!autofilter"]=fBe(w[0]));var j=[],O=d.match($3e);if(O)for(m=0;m!=O.length;++m)j[m]=Da(O[m].slice(O[m].indexOf('"')+1));var B=d.match(q3e);B&&oBe(l,B,a);var T=d.match(Y3e);if(T&&(l["!margins"]=lBe(Vr(T[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=Jr(c)),t.sheetRows>0&&l["!ref"]){var C=Da(l["!ref"]);t.sheetRows<=+C.e.r&&(C.e.r=t.sheetRows-1,C.e.r>c.e.r&&(C.e.r=c.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>c.e.c&&(C.e.c=c.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Jr(C))}return v.length>0&&(l["!cols"]=v),j.length>0&&(l["!merges"]=j),l}function tBe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Jr(e[r])+'"/>';return t+"</mergeCells>"}function b8(e,t,r,a){var n=Vr(e);r.Sheets[a]||(r.Sheets[a]={}),n.codeName&&(r.Sheets[a].CodeName=Fa(jn(n.codeName)))}function rBe(e,t,r,a,n){b8(e.slice(0,e.indexOf(">")),r,a,n)}function aBe(e,t,r,a,n){var s=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=sA(pn(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+$t("outlinePr",null,u)}!s&&!l||(n[n.length]=$t("sheetPr",l,o))}var nBe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sBe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function iBe(e){var t={sheet:1};return nBe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),sBe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=A8(e.password).toString(16).toUpperCase()),$t("sheetProtection",null,t)}function oBe(e,t,r){for(var a=Array.isArray(e),n=0;n!=t.length;++n){var s=Vr(jn(t[n]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+Fa(s.location))):(s.Target="#"+Fa(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Da(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Ur({c:u,r:c});a?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function lBe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function cBe(e){return xg(e),$t("pageMargins",null,e)}function uBe(e,t){for(var r=!1,a=0;a!=t.length;++a){var n=Vr(t[a],!0);n.hidden&&(n.hidden=Vn(n.hidden));var s=parseInt(n.min,10)-1,o=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,h8(n.width)),Wm(n);s<=o;)e[s++]=qn(n)}}function dBe(e,t){for(var r=["<cols>"],a,n=0;n!=t.length;++n)(a=t[n])&&(r[r.length]=$t("col",null,kS(n,a)));return r[r.length]="</cols>",r.join("")}function fBe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function ABe(e,t,r,a){var n=typeof e.ref=="string"?e.ref:Jr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=pc(n);o.s.r==o.e.r&&(o.e.r=pc(t["!ref"]).e.r,n=Jr(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+n;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+n}),$t("autoFilter",null,{ref:n})}var hBe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function mBe(e,t){t.Views||(t.Views=[{}]),(e.match(hBe)||[]).forEach(function(r,a){var n=Vr(r);t.Views[a]||(t.Views[a]={}),+n.zoomScale&&(t.Views[a].zoom=+n.zoomScale),Vn(n.rightToLeft)&&(t.Views[a].RTL=!0)})}function pBe(e,t,r,a){var n={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),$t("sheetViews",$t("sheetView",null,n),{})}function gBe(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var n="",s=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":n=e.v?"1":"0";break;case"n":n=""+e.v;break;case"e":n=i0[e.v];break;case"d":a&&a.cellDates?n=Gn(e.v,-1).toISOString():(e=qn(e),e.t="n",n=""+(e.v=Di(Gn(e.v)))),typeof e.z>"u"&&(e.z=Dr[14]);break;default:n=e.v;break}var l=jo("v",pn(n)),c={r:t},u=cp(a.cellXfs,e,a);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=jo("v",""+v8(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=$t("f",pn(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),$t("c",l,c)}var xBe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,s=Sw("v"),o=Sw("f");return function(c,u,d,f,h,m){for(var g=0,x="",v=[],y=[],w=0,j=0,O=0,B="",T,C,_=0,S=0,L,P,k=0,M=0,U=Array.isArray(m.CellXf),z,Q=[],q=[],V=Array.isArray(u),Y=[],K={},J=!1,R=!!d.sheetStubs,F=c.split(t),W=0,X=F.length;W!=X;++W){x=F[W].trim();var ne=x.length;if(ne!==0){var le=0;e:for(g=0;g<ne;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(C=Vr(x.slice(le,g),!0),_=C.r!=null?parseInt(C.r,10):_+1,S=-1,d.sheetRows&&d.sheetRows<_)continue;K={},J=!1,C.ht&&(J=!0,K.hpt=parseFloat(C.ht),K.hpx=Sb(K.hpt)),C.hidden=="1"&&(J=!0,K.hidden=!0),C.outlineLevel!=null&&(J=!0,K.level=+C.outlineLevel),J&&(Y[_-1]=K)}break;case"<":le=g;break}if(le>=g)break;if(C=Vr(x.slice(le,g),!0),_=C.r!=null?parseInt(C.r,10):_+1,S=-1,!(d.sheetRows&&d.sheetRows<_)){f.s.r>_-1&&(f.s.r=_-1),f.e.r<_-1&&(f.e.r=_-1),d&&d.cellStyles&&(K={},J=!1,C.ht&&(J=!0,K.hpt=parseFloat(C.ht),K.hpx=Sb(K.hpt)),C.hidden=="1"&&(J=!0,K.hidden=!0),C.outlineLevel!=null&&(J=!0,K.level=+C.outlineLevel),J&&(Y[_-1]=K)),v=x.slice(g).split(e);for(var ie=0;ie!=v.length&&v[ie].trim().charAt(0)=="<";++ie);for(v=v.slice(ie),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),w=g,j=0,O=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,B=y[1],j=0;j!=B.length&&!((O=B.charCodeAt(j)-64)<1||O>26);++j)w=26*w+O;--w,S=w}else++S;for(j=0;j!=x.length&&x.charCodeAt(j)!==62;++j);if(++j,C=Vr(x.slice(0,j),!0),C.r||(C.r=Ur({r:_-1,c:S})),B=x.slice(j),T={t:""},(y=B.match(s))!=null&&y[1]!==""&&(T.v=Fa(y[1])),d.cellFormula){if((y=B.match(o))!=null&&y[1]!==""){if(T.f=Fa(jn(y[1])).replace(/\r\n/g,`
`),d.xlfn||(T.f=aV(T.f)),y[0].indexOf('t="array"')>-1)T.F=(B.match(n)||[])[1],T.F.indexOf(":")>-1&&Q.push([Da(T.F),T.F]);else if(y[0].indexOf('t="shared"')>-1){P=Vr(y[0]);var ae=Fa(jn(y[1]));d.xlfn||(ae=aV(ae)),q[parseInt(P.si,10)]=[P,ae,C.r]}}else(y=B.match(/<f[^>]*\/>/))&&(P=Vr(y[0]),q[P.si]&&(T.f=h4e(q[P.si][1],q[P.si][2],C.r)));var Ae=ds(C.r);for(j=0;j<Q.length;++j)Ae.r>=Q[j][0].s.r&&Ae.r<=Q[j][0].e.r&&Ae.c>=Q[j][0].s.c&&Ae.c<=Q[j][0].e.c&&(T.F=Q[j][1])}if(C.t==null&&T.v===void 0)if(T.f||T.F)T.v=0,T.t="n";else if(R)T.t="z";else continue;else T.t=C.t||"n";switch(f.s.c>S&&(f.s.c=S),f.e.c<S&&(f.e.c=S),T.t){case"n":if(T.v==""||T.v==null){if(!R)continue;T.t="z"}else T.v=parseFloat(T.v);break;case"s":if(typeof T.v>"u"){if(!R)continue;T.t="z"}else L=G2[parseInt(T.v,10)],T.v=L.t,T.r=L.r,d.cellHTML&&(T.h=L.h);break;case"str":T.t="s",T.v=T.v!=null?jn(T.v):"",d.cellHTML&&(T.h=JR(T.v));break;case"inlineStr":y=B.match(a),T.t="s",y!=null&&(L=f8(y[1]))?(T.v=L.t,d.cellHTML&&(T.h=L.h)):T.v="";break;case"b":T.v=Vn(T.v);break;case"d":d.cellDates?T.v=Gn(T.v,1):(T.v=Di(Gn(T.v,1)),T.t="n");break;case"e":(!d||d.cellText!==!1)&&(T.w=T.v),T.v=qre[T.v];break}if(k=M=0,z=null,U&&C.s!==void 0&&(z=m.CellXf[C.s],z!=null&&(z.numFmtId!=null&&(k=z.numFmtId),d.cellStyles&&z.fillId!=null&&(M=z.fillId))),Vae(T,k,M,d,h,m),d.cellDates&&U&&T.t=="n"&&p1(Dr[k])&&(T.t="d",T.v=NS(T.v)),C.cm&&d.xlmeta){var ke=(d.xlmeta.Cell||[])[+C.cm-1];ke&&ke.type=="XLDAPR"&&(T.D=!0)}if(V){var re=ds(C.r);u[re.r]||(u[re.r]=[]),u[re.r][re.c]=T}else u[C.r]=T}}}}Y.length>0&&(u["!rows"]=Y)}}();function vBe(e,t,r,a){var n=[],s=[],o=Da(e["!ref"]),l="",c,u="",d=[],f=0,h=0,m=e["!rows"],g=Array.isArray(e),x={r:u},v,y=-1;for(h=o.s.c;h<=o.e.c;++h)d[h]=us(h);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=ti(f),h=o.s.c;h<=o.e.c;++h){c=d[h]+u;var w=g?(e[f]||[])[h]:e[c];w!==void 0&&(l=gBe(w,c,e,t))!=null&&s.push(l)}(s.length>0||m&&m[f])&&(x={r:u},m&&m[f]&&(v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=Pw(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),n[n.length]=$t("row",s.join(""),x))}if(m)for(;f<m.length;++f)m&&m[f]&&(x={r:f+1},v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=Pw(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),n[n.length]=$t("row","",x));return n.join("")}function Gae(e,t,r,a){var n=[ni,$t("worksheet",null,{xmlns:ax[0],"xmlns:r":Ii.r})],s=r.SheetNames[e],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Da(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Jr(d)}a||(a={}),c["!comments"]=[];var f=[];aBe(c,r,e,t,n),n[n.length]=$t("dimension",null,{ref:u}),n[n.length]=pBe(c,t,e,r),t.sheetFormat&&(n[n.length]=$t("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(n[n.length]=dBe(c,c["!cols"])),n[o=n.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=vBe(c,t),l.length>0&&(n[n.length]=l)),n.length>o+1&&(n[n.length]="</sheetData>",n[o]=n[o].replace("/>",">")),c["!protect"]&&(n[n.length]=iBe(c["!protect"])),c["!autofilter"]!=null&&(n[n.length]=ABe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(n[n.length]=tBe(c["!merges"]));var h=-1,m,g=-1;return c["!links"].length>0&&(n[n.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=hn(a,-1,pn(x[1].Target).replace(/#.*$/,""),ga.HLINK),m["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(m.location=pn(x[1].Target.slice(h+1))),x[1].Tooltip&&(m.tooltip=pn(x[1].Tooltip)),n[n.length]=$t("hyperlink",null,m))}),n[n.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(n[n.length]=cBe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(n[n.length]=jo("ignoredErrors",$t("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=hn(a,-1,"../drawings/drawing"+(e+1)+".xml",ga.DRAW),n[n.length]=$t("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=hn(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ga.VML),n[n.length]=$t("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}function bBe(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var n=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=a,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=n/20),r}function yBe(e,t,r){var a=Ct(145),n=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var s=320;n.hpx?s=Pw(n.hpx)*20:n.hpt&&(s=n.hpt*20),a.write_shift(2,s),a.write_shift(1,0);var o=0;n.level&&(o|=n.level),n.hidden&&(o|=16),(n.hpx||n.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Ur(u)];g&&(f<0&&(f=m),h=m)}f<0||(++l,a.write_shift(4,f),a.write_shift(4,h))}var x=a.l;return a.l=c,a.write_shift(4,l),a.l=x,a.length>a.l?a.slice(0,a.l):a}function wBe(e,t,r,a){var n=yBe(a,r,t);(n.length>17||(t["!rows"]||[])[a])&&Mt(e,0,n)}var NBe=ox,EBe=v1;function CBe(){}function jBe(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=S5e(e),r}function kBe(e,t,r){r==null&&(r=Ct(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var n=1;n<3;++n)r.write_shift(1,0);return sk({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Hre(e,r),r.slice(0,r.l)}function _Be(e){var t=id(e);return[t]}function SBe(e,t,r){return r==null&&(r=Ct(8)),nx(t,r)}function BBe(e){var t=sx(e);return[t]}function TBe(e,t,r){return r==null&&(r=Ct(4)),ix(t,r)}function IBe(e){var t=id(e),r=e.read_shift(1);return[t,r,"b"]}function OBe(e,t,r){return r==null&&(r=Ct(9)),nx(t,r),r.write_shift(1,e.v?1:0),r}function FBe(e){var t=sx(e),r=e.read_shift(1);return[t,r,"b"]}function DBe(e,t,r){return r==null&&(r=Ct(5)),ix(t,r),r.write_shift(1,e.v?1:0),r}function PBe(e){var t=id(e),r=e.read_shift(1);return[t,r,"e"]}function RBe(e,t,r){return r==null&&(r=Ct(9)),nx(t,r),r.write_shift(1,e.v),r}function LBe(e){var t=sx(e),r=e.read_shift(1);return[t,r,"e"]}function MBe(e,t,r){return r==null&&(r=Ct(8)),ix(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function UBe(e){var t=id(e),r=e.read_shift(4);return[t,r,"s"]}function QBe(e,t,r){return r==null&&(r=Ct(12)),nx(t,r),r.write_shift(4,t.v),r}function HBe(e){var t=sx(e),r=e.read_shift(4);return[t,r,"s"]}function zBe(e,t,r){return r==null&&(r=Ct(8)),ix(t,r),r.write_shift(4,t.v),r}function VBe(e){var t=id(e),r=il(e);return[t,r,"n"]}function $Be(e,t,r){return r==null&&(r=Ct(16)),nx(t,r),Lg(e.v,r),r}function qae(e){var t=sx(e),r=il(e);return[t,r,"n"]}function GBe(e,t,r){return r==null&&(r=Ct(12)),ix(t,r),Lg(e.v,r),r}function qBe(e){var t=id(e),r=o8(e);return[t,r,"n"]}function KBe(e,t,r){return r==null&&(r=Ct(12)),nx(t,r),zre(e.v,r),r}function WBe(e){var t=sx(e),r=o8(e);return[t,r,"n"]}function XBe(e,t,r){return r==null&&(r=Ct(8)),ix(t,r),zre(e.v,r),r}function YBe(e){var t=id(e),r=n8(e);return[t,r,"is"]}function JBe(e){var t=id(e),r=dl(e);return[t,r,"str"]}function ZBe(e,t,r){return r==null&&(r=Ct(12+4*e.v.length)),nx(t,r),ro(e.v,r),r.length>r.l?r.slice(0,r.l):r}function eTe(e){var t=sx(e),r=dl(e);return[t,r,"str"]}function tTe(e,t,r){return r==null&&(r=Ct(8+4*e.v.length)),ix(t,r),ro(e.v,r),r.length>r.l?r.slice(0,r.l):r}function rTe(e,t,r){var a=e.l+t,n=id(e);n.r=r["!row"];var s=e.read_shift(1),o=[n,s,"b"];if(r.cellFormula){e.l+=2;var l=jS(e,a-e.l,r);o[3]=el(l,null,n,r.supbooks,r)}else e.l=a;return o}function aTe(e,t,r){var a=e.l+t,n=id(e);n.r=r["!row"];var s=e.read_shift(1),o=[n,s,"e"];if(r.cellFormula){e.l+=2;var l=jS(e,a-e.l,r);o[3]=el(l,null,n,r.supbooks,r)}else e.l=a;return o}function nTe(e,t,r){var a=e.l+t,n=id(e);n.r=r["!row"];var s=il(e),o=[n,s,"n"];if(r.cellFormula){e.l+=2;var l=jS(e,a-e.l,r);o[3]=el(l,null,n,r.supbooks,r)}else e.l=a;return o}function sTe(e,t,r){var a=e.l+t,n=id(e);n.r=r["!row"];var s=dl(e),o=[n,s,"str"];if(r.cellFormula){e.l+=2;var l=jS(e,a-e.l,r);o[3]=el(l,null,n,r.supbooks,r)}else e.l=a;return o}var iTe=ox,oTe=v1;function lTe(e,t){return t==null&&(t=Ct(4)),t.write_shift(4,e),t}function cTe(e,t){var r=e.l+t,a=ox(e),n=s8(e),s=dl(e),o=dl(e),l=dl(e);e.l=r;var c={rfx:a,relId:n,loc:s,display:l};return o&&(c.Tooltip=o),c}function uTe(e,t){var r=Ct(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));v1({s:ds(e[0]),e:ds(e[0])},r),i8("rId"+t,r);var a=e[1].Target.indexOf("#"),n=a==-1?"":e[1].Target.slice(a+1);return ro(n||"",r),ro(e[1].Tooltip||"",r),ro("",r),r.slice(0,r.l)}function dTe(){}function fTe(e,t,r){var a=e.l+t,n=Vre(e),s=e.read_shift(1),o=[n];if(o[2]=s,r.cellFormula){var l=P3e(e,a-e.l,r);o[1]=l}else e.l=a;return o}function ATe(e,t,r){var a=e.l+t,n=ox(e),s=[n];if(r.cellFormula){var o=L3e(e,a-e.l,r);s[1]=o,e.l=a}else e.l=a;return s}function hTe(e,t,r){r==null&&(r=Ct(18));var a=kS(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var n=0;return t.hidden&&(n|=1),typeof a.width=="number"&&(n|=2),t.level&&(n|=t.level<<8),r.write_shift(2,n),r}var Kae=["left","right","top","bottom","header","footer"];function mTe(e){var t={};return Kae.forEach(function(r){t[r]=il(e)}),t}function pTe(e,t){return t==null&&(t=Ct(48)),xg(e),Kae.forEach(function(r){Lg(e[r],t)}),t}function gTe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function xTe(e,t,r){r==null&&(r=Ct(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function vTe(e){var t=Ct(24);return t.write_shift(4,4),t.write_shift(4,1),v1(e,t),t}function bTe(e,t){return t==null&&(t=Ct(66)),t.write_shift(2,e.password?A8(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function yTe(){}function wTe(){}function NTe(e,t,r,a,n,s,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,m,g,x,v,y,w,j,O,B,T=[];l.biff=12,l["!row"]=0;var C=0,_=!1,S=[],L={},P=l.supbooks||n.supbooks||[[]];if(P.sharedf=L,P.arrayf=S,P.SheetNames=n.SheetNames||n.Sheets.map(function(V){return V.name}),!l.supbooks&&(l.supbooks=P,n.Names))for(var k=0;k<n.Names.length;++k)P[0][k+1]=n.Names[k];var M=[],U=[],z=!1;Rw[16]={n:"BrtShortReal",f:qae};var Q;if(s0(e,function(Y,K,J){if(!h)switch(J){case 148:u=Y;break;case 0:m=Y,l.sheetRows&&l.sheetRows<=m.r&&(h=!0),O=ti(v=m.r),l["!row"]=m.r,(Y.hidden||Y.hpt||Y.level!=null)&&(Y.hpt&&(Y.hpx=Sb(Y.hpt)),U[Y.r]=Y);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:Y[2]},Y[2]){case"n":g.v=Y[1];break;case"s":j=G2[Y[1]],g.v=j.t,g.r=j.r;break;case"b":g.v=!!Y[1];break;case"e":g.v=Y[1],l.cellText!==!1&&(g.w=i0[g.v]);break;case"str":g.t="s",g.v=Y[1];break;case"is":g.t="s",g.v=Y[1].t;break}if((x=o.CellXf[Y[0].iStyleRef])&&Vae(g,x.numFmtId,null,l,s,o),y=Y[0].c==-1?y+1:Y[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[us(y)+O]=g,l.cellFormula){for(_=!1,C=0;C<S.length;++C){var R=S[C];m.r>=R[0].s.r&&m.r<=R[0].e.r&&y>=R[0].s.c&&y<=R[0].e.c&&(g.F=Jr(R[0]),_=!0)}!_&&Y.length>3&&(g.f=Y[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),l.cellDates&&x&&g.t=="n"&&p1(Dr[x.numFmtId])){var F=ag(g.v);F&&(g.t="d",g.v=new Date(F.y,F.m-1,F.d,F.H,F.M,F.S,F.u))}Q&&(Q.type=="XLDAPR"&&(g.D=!0),Q=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;g={t:"z",v:void 0},y=Y[0].c==-1?y+1:Y[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[us(y)+O]=g,d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),Q&&(Q.type=="XLDAPR"&&(g.D=!0),Q=void 0);break;case 176:T.push(Y);break;case 49:Q=((l.xlmeta||{}).Cell||[])[Y-1];break;case 494:var W=a["!id"][Y.relId];for(W?(Y.Target=W.Target,Y.loc&&(Y.Target+="#"+Y.loc),Y.Rel=W):Y.relId==""&&(Y.Target="#"+Y.loc),v=Y.rfx.s.r;v<=Y.rfx.e.r;++v)for(y=Y.rfx.s.c;y<=Y.rfx.e.c;++y)l.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=Y):(w=Ur({c:y,r:v}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=Y);break;case 426:if(!l.cellFormula)break;S.push(Y),B=l.dense?c[v][y]:c[us(y)+O],B.f=el(Y[1],d,{r:m.r,c:y},P,l),B.F=Jr(Y[0]);break;case 427:if(!l.cellFormula)break;L[Ur(Y[0].s)]=Y[1],B=l.dense?c[v][y]:c[us(y)+O],B.f=el(Y[1],d,{r:m.r,c:y},P,l);break;case 60:if(!l.cellStyles)break;for(;Y.e>=Y.s;)M[Y.e--]={width:Y.w/256,hidden:!!(Y.flags&1),level:Y.level},z||(z=!0,h8(Y.w/256)),Wm(M[Y.e+1]);break;case 161:c["!autofilter"]={ref:Jr(Y)};break;case 476:c["!margins"]=Y;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),Y.name&&(n.Sheets[r].CodeName=Y.name),(Y.above||Y.left)&&(c["!outline"]={above:Y.above,left:Y.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),Y.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!K.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+J.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Jr(u||d)),l.sheetRows&&c["!ref"]){var q=Da(c["!ref"]);l.sheetRows<=+q.e.r&&(q.e.r=l.sheetRows-1,q.e.r>d.e.r&&(q.e.r=d.e.r),q.e.r<q.s.r&&(q.s.r=q.e.r),q.e.c>d.e.c&&(q.e.c=d.e.c),q.e.c<q.s.c&&(q.s.c=q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Jr(q))}return T.length>0&&(c["!merges"]=T),M.length>0&&(c["!cols"]=M),U.length>0&&(c["!rows"]=U),c}function ETe(e,t,r,a,n,s,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=qn(t),t.z=t.z||Dr[14],t.v=Di(Gn(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=cp(n.cellXfs,t,n),t.l&&s["!links"].push([Ur(c),t.l]),t.c&&s["!comments"].push([Ur(c),t.c]),t.t){case"s":case"str":return n.bookSST?(l=v8(n.Strings,t.v,n.revStrings),c.t="s",c.v=l,o?Mt(e,18,zBe(t,c)):Mt(e,7,QBe(t,c))):(c.t="str",o?Mt(e,17,tTe(t,c)):Mt(e,6,ZBe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Mt(e,13,XBe(t,c)):Mt(e,2,KBe(t,c)):o?Mt(e,16,GBe(t,c)):Mt(e,5,$Be(t,c)),!0;case"b":return c.t="b",o?Mt(e,15,DBe(t,c)):Mt(e,4,OBe(t,c)),!0;case"e":return c.t="e",o?Mt(e,14,MBe(t,c)):Mt(e,3,RBe(t,c)),!0}return o?Mt(e,12,TBe(t,c)):Mt(e,1,SBe(t,c)),!0}function CTe(e,t,r,a){var n=Da(t["!ref"]||"A1"),s,o="",l=[];Mt(e,145);var c=Array.isArray(t),u=n.e.r;t["!rows"]&&(u=Math.max(n.e.r,t["!rows"].length-1));for(var d=n.s.r;d<=u;++d){o=ti(d),wBe(e,t,n,d);var f=!1;if(d<=n.e.r)for(var h=n.s.c;h<=n.e.c;++h){d===n.s.r&&(l[h]=us(h)),s=l[h]+o;var m=c?(t[d]||[])[h]:t[s];if(!m){f=!1;continue}f=ETe(e,m,d,h,a,t,f)}}Mt(e,146)}function jTe(e,t){!t||!t["!merges"]||(Mt(e,177,lTe(t["!merges"].length)),t["!merges"].forEach(function(r){Mt(e,176,oTe(r))}),Mt(e,178))}function kTe(e,t){!t||!t["!cols"]||(Mt(e,390),t["!cols"].forEach(function(r,a){r&&Mt(e,60,hTe(a,r))}),Mt(e,391))}function _Te(e,t){!t||!t["!ref"]||(Mt(e,648),Mt(e,649,vTe(Da(t["!ref"]))),Mt(e,650))}function STe(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var n=hn(r,-1,a[1].Target.replace(/#.*$/,""),ga.HLINK);Mt(e,494,uTe(a,n))}}),delete t["!links"]}function BTe(e,t,r,a){if(t["!comments"].length>0){var n=hn(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ga.VML);Mt(e,551,i8("rId"+n)),t["!legacy"]=n}}function TTe(e,t,r,a){if(t["!autofilter"]){var n=t["!autofilter"],s=typeof n.ref=="string"?n.ref:Jr(n.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=pc(s);l.s.r==l.e.r&&(l.e.r=pc(t["!ref"]).e.r,s=Jr(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==a){u.Ref="'"+r.SheetNames[a]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),Mt(e,161,v1(Da(s))),Mt(e,162)}}function ITe(e,t,r){Mt(e,133),Mt(e,137,xTe(t,r)),Mt(e,138),Mt(e,134)}function OTe(e,t){t["!protect"]&&Mt(e,535,bTe(t["!protect"]))}function FTe(e,t,r,a){var n=hc(),s=r.SheetNames[e],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Da(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Mt(n,129),(r.vbaraw||o["!outline"])&&Mt(n,147,kBe(l,o["!outline"])),Mt(n,148,EBe(c)),ITe(n,o,r.Workbook),kTe(n,o),CTe(n,o,e,t),OTe(n,o),TTe(n,o,r,e),jTe(n,o),STe(n,o,a),o["!margins"]&&Mt(n,476,pTe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&_Te(n,o),BTe(n,o,e,a),Mt(n,130),n.end()}function DTe(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var n=Fa((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){a=s.replace(/<.*?>/g,"")}),[t,n,a]}function PTe(e,t,r,a,n,s){var o=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=DTe(f);d.s.r=d.s.c=0,d.e.c=l,u=us(l),h[0].forEach(function(m,g){o[u+ti(g)]={t:"n",v:m,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=Jr(d)),o}function RTe(e,t,r,a,n){if(!e)return e;a||(a={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match($ae);return l&&b8(l[0],s,n,r),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),a["!id"][s["!rel"]]&&(s["!drawel"]=a["!id"][s["!rel"]]),s}function LTe(e,t){e.l+=10;var r=dl(e);return{name:r}}function MTe(e,t,r,a,n){if(!e)return e;a||(a={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return s0(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),c.name&&(n.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),a["!id"][s["!rel"]]&&(s["!drawel"]=a["!id"][s["!rel"]]),s}var y8=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],UTe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],QTe=[],HTe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function lV(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],n=0;n!=t.length;++n){var s=t[n];if(a[s[0]]==null)a[s[0]]=s[1];else switch(s[2]){case"bool":typeof a[s[0]]=="string"&&(a[s[0]]=Vn(a[s[0]]));break;case"int":typeof a[s[0]]=="string"&&(a[s[0]]=parseInt(a[s[0]],10));break}}}function cV(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=Vn(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function Wae(e){cV(e.WBProps,y8),cV(e.CalcPr,HTe),lV(e.WBView,UTe),lV(e.Sheets,QTe),eb.date1904=Vn(e.WBProps.date1904)}function zTe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Vn(e.Workbook.WBProps.date1904)?"true":"false"}var VTe="][*?/\\".split("");function Xae(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return VTe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function $Te(e,t,r){e.forEach(function(a,n){Xae(a);for(var s=0;s<n;++s)if(a==e[s])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[n]&&t[n].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function GTe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];$Te(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)z3e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var qTe=/<\w+:workbook/;function KTe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,n="xmlns",s={},o=0;if(e.replace(ml,function(c,u){var d=Vr(c);switch(EA(d[0])){case"<?xml":break;case"<workbook":c.match(qTe)&&(n="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[n];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":y8.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Vn(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=jn(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Fa(jn(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":s={},s.Name=jn(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Vn(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=Fa(jn(e.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),ax.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Wae(r),r}function Yae(e){var t=[ni];t[t.length]=$t("workbook",null,{xmlns:ax[0],"xmlns:r":Ii.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(y8.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=$t("workbookPr",null,a);var n=e.Workbook&&e.Workbook.Sheets||[],s=0;if(n&&n[0]&&n[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!n[s]||!n[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:pn(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),n[s])switch(n[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=$t("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=$t("definedName",pn(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function WTe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=qO(e),r.name=dl(e),r}function XTe(e,t){return t||(t=Ct(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),i8(e.strRelID,t),ro(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function YTe(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var n=t>8?dl(e):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function JTe(e,t){t||(t=Ct(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Hre(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function ZTe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function eIe(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var n=e.read_shift(4),s=B5e(e),o=R3e(e,0,r),l=s8(e);e.l=a;var c={Name:s,Ptg:o};return n<268435455&&(c.Sheet=n),l&&(c.Comment=l),c}function tIe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],n=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],Rw[16]={n:"BrtFRTArchID$",f:ZTe},s0(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=el(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(d),n=!0;break;case 36:a.pop(),n=!1;break;case 37:a.push(d),n=!0;break;case 38:a.pop(),n=!1;break;case 16:break;default:if(!u.T){if(!n||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),Wae(r),r.Names=s,r.supbooks=o,r}function rIe(e,t){Mt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,n={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Mt(e,156,XTe(n))}Mt(e,144)}function aIe(e,t){t||(t=Ct(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return ro("SheetJS",t),ro(Jj.version,t),ro(Jj.version,t),ro("7262",t),t.length>t.l?t.slice(0,t.l):t}function nIe(e,t){t||(t=Ct(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function sIe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,n=-1,s=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&n==-1?n=a:r[a].Hidden==1&&s==-1&&(s=a);s>n||(Mt(e,135),Mt(e,158,nIe(n)),Mt(e,136))}}function iIe(e,t){var r=hc();return Mt(r,131),Mt(r,128,aIe()),Mt(r,153,JTe(e.Workbook&&e.Workbook.WBProps||null)),sIe(r,e),rIe(r,e),Mt(r,132),r.end()}function oIe(e,t,r){return t.slice(-4)===".bin"?tIe(e,r):KTe(e,r)}function lIe(e,t,r,a,n,s,o,l){return t.slice(-4)===".bin"?NTe(e,a,r,n,s,o,l):eBe(e,a,r,n,s,o,l)}function cIe(e,t,r,a,n,s,o,l){return t.slice(-4)===".bin"?MTe(e,a,r,n,s):RTe(e,a,r,n,s)}function uIe(e,t,r,a,n,s,o,l){return t.slice(-4)===".bin"?f4e():A4e()}function dIe(e,t,r,a,n,s,o,l){return t.slice(-4)===".bin"?u4e():d4e()}function fIe(e,t,r,a){return t.slice(-4)===".bin"?oSe(e,r,a):W_e(e,r,a)}function AIe(e,t,r){return Tae(e,r)}function hIe(e,t,r){return t.slice(-4)===".bin"?h_e(e,r):d_e(e,r)}function mIe(e,t,r){return t.slice(-4)===".bin"?s4e(e,r):XSe(e,r)}function pIe(e,t,r){return t.slice(-4)===".bin"?qSe(e):$Se(e)}function gIe(e,t,r,a){return r.slice(-4)===".bin"?KSe(e,t,r,a):void 0}function xIe(e,t,r){return t.slice(-4)===".bin"?HSe(e,t,r):VSe(e,t,r)}function vIe(e,t,r){return(t.slice(-4)===".bin"?iIe:Yae)(e)}function bIe(e,t,r,a,n){return(t.slice(-4)===".bin"?FTe:Gae)(e,r,a,n)}function yIe(e,t,r){return(t.slice(-4)===".bin"?gSe:Sae)(e,r)}function wIe(e,t,r){return(t.slice(-4)===".bin"?g_e:yae)(e,r)}function NIe(e,t,r){return(t.slice(-4)===".bin"?i4e:Fae)(e)}function EIe(e){return(e.slice(-4)===".bin"?zSe:Iae)()}var Jae=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Zae=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Id(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var n=e.match(Jae),s,o,l,c;if(n)for(c=0;c!=n.length;++c)s=n[c].match(Zae),(o=s[1].indexOf(":"))===-1?a[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),a[l]=s[2].slice(1,s[2].length-1));return a}function CIe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(Jae),n,s,o,l;if(a)for(l=0;l!=a.length;++l)n=a[l].match(Zae),(s=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?o="xmlns"+n[1].slice(6):o=n[1].slice(s+1),r[o]=n[2].slice(1,n[2].length-1));return r}var K2;function jIe(e,t){var r=K2[e]||Fa(e);return r==="General"?Pg(t):ad(r,t)}function kIe(e,t,r,a){var n=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=Vn(a);break;case"i2":case"int":n=parseInt(a,10);break;case"r4":case"float":n=parseFloat(a);break;case"date":case"dateTime.tz":n=Gn(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Fa(t)]=n}function _Ie(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||i0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=_w(e.v):e.w=Pg(e.v):e.w=jIe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var a=K2[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&p1(a)){var n=ag(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(s){if(r.WTF)throw s}}}function SIe(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=Q_e[a.Pattern]||a.Pattern)}e[t.ID]=t}function BIe(e,t,r,a,n,s,o,l,c,u){var d="General",f=a.StyleID,h={};u=u||{};var m=[],g=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&m.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=Vn(e);break;case"String":a.t="s",a.r=jz(Fa(e)),a.v=e.indexOf("<")>-1?Fa(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(Gn(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=Fa(e):a.v<60&&(a.v=a.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=qre[e],u.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=jz(t||e));break}if(_Ie(a,d,u),u.cellFormula!==!1)if(a.Formula){var x=Fa(a.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),a.f=Zv(x,n),delete a.Formula,a.ArrayRange=="RC"?a.F=Zv("RC:RC",n):a.ArrayRange&&(a.F=Zv(a.ArrayRange,n),c.push([Da(a.F),a.F]))}else for(g=0;g<c.length;++g)n.r>=c[g][0].s.r&&n.r<=c[g][0].e.r&&n.c>=c[g][0].s.c&&n.c<=c[g][0].e.c&&(a.F=c[g][1]);u.cellStyles&&(m.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),a.s=h),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function TIe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function zB(e,t){var r=t||{};g1();var a=A2(ZR(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=jn(a));var n=a.slice(0,1024).toLowerCase(),s=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var o=qn(r);return o.type="string",_b.to_workbook(a,o)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(me){n.indexOf("<"+me)>=0&&(s=!0)}),s)return p6e(a,r);K2={"General Number":"General","General Date":Dr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Dr[15],"Short Date":Dr[14],"Long Time":Dr[19],"Medium Time":Dr[18],"Short Time":Dr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Dr[2],Standard:Dr[4],Percent:Dr[10],Scientific:Dr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},m="",g={},x={},v=Id('<Data ss:Type="String">'),y=0,w=0,j=0,O={s:{r:2e6,c:2e6},e:{r:0,c:0}},B={},T={},C="",_=0,S=[],L={},P={},k=0,M=[],U=[],z={},Q=[],q,V=!1,Y=[],K=[],J={},R=0,F=0,W={Sheets:[],WBProps:{date1904:!1}},X={};Tw.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var ne="";l=Tw.exec(a);)switch(l[3]=(ne=l[3]).toLowerCase()){case"data":if(ne=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?BIe(a.slice(y,l.index),C,v,c[c.length-1][0]=="comment"?z:g,{c:w,r:j},B,Q[w],x,Y,r):(C="",v=Id(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(U.length>0&&(g.c=U),(!r.sheetRows||r.sheetRows>j)&&g.v!==void 0&&(r.dense?(h[j]||(h[j]=[]),h[j][w]=g):h[us(w)+ti(j)]=g),g.HRef&&(g.l={Target:Fa(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(R=w+(parseInt(g.MergeAcross,10)|0),F=j+(parseInt(g.MergeDown,10)|0),S.push({s:{c:w,r:j},e:{c:R,r:F}})),!r.sheetStubs)g.MergeAcross?w=R+1:++w;else if(g.MergeAcross||g.MergeDown){for(var le=w;le<=R;++le)for(var ie=j;ie<=F;++ie)(le>w||ie>j)&&(r.dense?(h[ie]||(h[ie]=[]),h[ie][le]={t:"z"}):h[us(le)+ti(ie)]={t:"z"});w=R+1}else++w;else g=CIe(l[0]),g.Index&&(w=+g.Index-1),w<O.s.c&&(O.s.c=w),w>O.e.c&&(O.e.c=w),l[0].slice(-2)==="/>"&&++w,U=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(j<O.s.r&&(O.s.r=j),j>O.e.r&&(O.e.r=j),l[0].slice(-2)==="/>"&&(x=Id(l[0]),x.Index&&(j=+x.Index-1)),w=0,++j):(x=Id(l[0]),x.Index&&(j=+x.Index-1),J={},(x.AutoFitHeight=="0"||x.Height)&&(J.hpx=parseInt(x.Height,10),J.hpt=Pw(J.hpx),K[j]=J),x.Hidden=="1"&&(J.hidden=!0,K[j]=J));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(m),O.s.r<=O.e.r&&O.s.c<=O.e.c&&(h["!ref"]=Jr(O),r.sheetRows&&r.sheetRows<=O.e.r&&(h["!fullref"]=h["!ref"],O.e.r=r.sheetRows-1,h["!ref"]=Jr(O))),S.length&&(h["!merges"]=S),Q.length>0&&(h["!cols"]=Q),K.length>0&&(h["!rows"]=K),d[m]=h}else O={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=w=0,c.push([l[3],!1]),u=Id(l[0]),m=Fa(u.Name),h=r.dense?[]:{},S=[],Y=[],K=[],X={name:m,Hidden:0},W.Sheets.push(X);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Q=[],V=!1}break;case"style":l[1]==="/"?SIe(B,T,r):T=Id(l[0]);break;case"numberformat":T.nf=Fa(Id(l[0]).Format||"General"),K2[T.nf]&&(T.nf=K2[T.nf]);for(var ae=0;ae!=392&&Dr[ae]!=T.nf;++ae);if(ae==392){for(ae=57;ae!=392;++ae)if(Dr[ae]==null){Sh(T.nf,ae);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(q=Id(l[0]),q.Hidden&&(q.hidden=!0,delete q.Hidden),q.Width&&(q.wpx=parseInt(q.Width,10)),!V&&q.wpx>10){V=!0,al=kae;for(var Ae=0;Ae<Q.length;++Ae)Q[Ae]&&Wm(Q[Ae])}V&&Wm(q),Q[q.Index-1||Q.length]=q;for(var ke=0;ke<+q.Span;++ke)Q[Q.length]=qn(q);break;case"namedrange":if(l[1]==="/")break;W.Names||(W.Names=[]);var re=Vr(l[0]),Re={Name:re.Name,Ref:Zv(re.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(Re.Sheet=W.Sheets.length-1),W.Names.push(Re);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?C+=a.slice(_,l.index):_=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;T.Interior=Id(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?tje(L,ne,a.slice(k,l.index)):k=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));TIe(z),U.push(z)}else c.push([l[3],!1]),u=Id(l[0]),z={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Le=Id(l[0]);h["!autofilter"]={ref:Zv(Le.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return hV(a,r);var Te=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Te=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Te=!1}break;case"excelworkbook":switch(l[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Te=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:Te=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(k,l.index)){case"SheetHidden":X.Hidden=1;break;case"SheetVeryHidden":X.Hidden=2;break}else k=l.index+l[0].length;break;case"header":h["!margins"]||xg(h["!margins"]={},"xlml"),isNaN(+Vr(l[0]).Margin)||(h["!margins"].header=+Vr(l[0]).Margin);break;case"footer":h["!margins"]||xg(h["!margins"]={},"xlml"),isNaN(+Vr(l[0]).Margin)||(h["!margins"].footer=+Vr(l[0]).Margin);break;case"pagemargins":var de=Vr(l[0]);h["!margins"]||xg(h["!margins"]={},"xlml"),isNaN(+de.Top)||(h["!margins"].top=+de.Top),isNaN(+de.Left)||(h["!margins"].left=+de.Left),isNaN(+de.Right)||(h["!margins"].right=+de.Right),isNaN(+de.Bottom)||(h["!margins"].bottom=+de.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Te=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Te=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Te=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Te=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Te=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Te=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Te=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Te=!1}break;case"smarttags":break;default:Te=!1;break}if(Te||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?kIe(P,ne,M,a.slice(k,l.index)):(M=l,k=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Ce={};return!r.bookSheets&&!r.bookProps&&(Ce.Sheets=d),Ce.SheetNames=f,Ce.Workbook=W,Ce.SSF=qn(Dr),Ce.Props=L,Ce.Custprops=P,Ce}function eF(e,t){switch(N8(t=t||{}),t.type||"base64"){case"base64":return zB(su(e),t);case"binary":case"buffer":case"file":return zB(e,t);case"array":return zB(op(e),t)}}function IIe(e,t){var r=[];return e.Props&&r.push(rje(e.Props,t)),e.Custprops&&r.push(aje(e.Props,e.Custprops)),r.join("")}function OIe(){return""}function FIe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,n){var s=[];s.push($t("NumberFormat",null,{"ss:Format":pn(Dr[a.numFmtId])}));var o={"ss:ID":"s"+(21+n)};r.push($t("Style",s.join(""),o))}),$t("Styles",r.join(""))}function ene(e){return $t("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+g8(e.Ref,{r:0,c:0})})}function DIe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var n=t[a];n.Sheet==null&&(n.Name.match(/^_xlfn\./)||r.push(ene(n)))}return $t("Names",r.join(""))}function PIe(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var n=a.Workbook.Names,s=[],o=0;o<n.length;++o){var l=n[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(ene(l)))}return s.join("")}function RIe(e,t,r,a){if(!e)return"";var n=[];if(e["!margins"]&&(n.push("<PageSetup>"),e["!margins"].header&&n.push($t("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&n.push($t("Footer",null,{"x:Margin":e["!margins"].footer})),n.push($t("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),n.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)n.push($t("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(a.Workbook.Sheets[s]&&!a.Workbook.Sheets[s].Hidden);++s);s==r&&n.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),e["!protect"]&&(n.push(jo("ProtectContents","True")),e["!protect"].objects&&n.push(jo("ProtectObjects","True")),e["!protect"].scenarios&&n.push(jo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?n.push(jo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&n.push(jo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&n.push("<"+o[1]+"/>")})),n.length==0?"":$t("WorksheetOptions",n.join(""),{xmlns:$c.x})}function LIe(e){return e.map(function(t){var r=s5e(t.t||""),a=$t("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return $t("Comment",a,{"ss:Author":t.a})}).join("")}function MIe(e,t,r,a,n,s,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+pn(g8(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=ds(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=pn(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=pn(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=i0[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Dr[14]);break;case"s":f="String",h=n5e(e.v||"");break}var m=cp(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=LIe(e.c)),$t("Cell",x,l)}function UIe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Sb(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function QIe(e,t,r,a){if(!e["!ref"])return"";var n=Da(e["!ref"]),s=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,y){Wm(v);var w=!!v.width,j=kS(y,v),O={"ss:Index":y+1};w&&(O["ss:Width"]=Fw(j.width)),v.hidden&&(O["ss:Hidden"]="1"),l.push($t("Column",null,O))});for(var c=Array.isArray(e),u=n.s.r;u<=n.e.r;++u){for(var d=[UIe(u,(e["!rows"]||[])[u])],f=n.s.c;f<=n.e.c;++f){var h=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},g=Ur(m),x=c?(e[u]||[])[f]:e[g];d.push(MIe(x,g,e,t,r,a,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function HIe(e,t,r){var a=[],n=r.SheetNames[e],s=r.Sheets[n],o=s?PIe(s,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=s?QIe(s,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push(RIe(s,t,e,r)),a.join("")}function zIe(e,t){t||(t={}),e.SSF||(e.SSF=qn(Dr)),e.SSF&&(g1(),bS(e.SSF),t.revssf=wS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],cp(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(IIe(e,t)),r.push(OIe()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push($t("Worksheet",HIe(a,t,e),{"ss:Name":pn(e.SheetNames[a])}));return r[2]=FIe(e,t),r[3]=DIe(e),ni+$t("Workbook",r.join(""),{xmlns:$c.ss,"xmlns:o":$c.o,"xmlns:x":$c.x,"xmlns:ss":$c.ss,"xmlns:dt":$c.dt,"xmlns:html":$c.html})}function VIe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=D5e(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=P5e(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var $Ie=[60,1084,2066,2165,2175];function GIe(e,t,r,a,n){var s=a,o=[],l=r.slice(r.l,r.l+s);if(n&&n.enc&&n.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(l)}o.push(l),r.l+=s;for(var c=vh(r,r.l),u=tF[c],d=0;u!=null&&$Ie.indexOf(c)>-1;)s=vh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=tF[c=vh(r,r.l)];var f=to(o);Eo(f,0);var h=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(h),h+=o[m].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,n)}function Hf(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Dr[a])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||i0[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=_w(e.v):e.w=Pg(e.v):e.w=ad(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&a&&e.t=="n"&&p1(Dr[a]||String(a))){var n=ag(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function SC(e,t,r){return{v:e,ixfe:t,t:r}}function qIe(e,t){var r={opts:{}},a={},n=t.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,h="",m,g,x,v,y={},w=[],j,O,B=[],T=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},S=function(Et){return Et<8?mg[Et]:Et<64&&T[Et-8]||mg[Et]},L=function(Et,gt,Ve){var Bt=gt.XF.data;if(!(!Bt||!Bt.patternType||!Ve||!Ve.cellStyles)){gt.s={},gt.s.patternType=Bt.patternType;var dr;(dr=Ow(S(Bt.icvFore)))&&(gt.s.fgColor={rgb:dr}),(dr=Ow(S(Bt.icvBack)))&&(gt.s.bgColor={rgb:dr})}},P=function(Et,gt,Ve){if(!(J>1)&&!(Ve.sheetRows&&Et.r>=Ve.sheetRows)){if(Ve.cellStyles&&gt.XF&&gt.XF.data&&L(Et,gt,Ve),delete gt.ixfe,delete gt.XF,f=Et,h=Ur(Et),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Et.r<o.s.r&&(o.s.r=Et.r),Et.c<o.s.c&&(o.s.c=Et.c),Et.r+1>o.e.r&&(o.e.r=Et.r+1),Et.c+1>o.e.c&&(o.e.c=Et.c+1),Ve.cellFormula&&gt.f){for(var Bt=0;Bt<w.length;++Bt)if(!(w[Bt][0].s.c>Et.c||w[Bt][0].s.r>Et.r)&&!(w[Bt][0].e.c<Et.c||w[Bt][0].e.r<Et.r)){gt.F=Jr(w[Bt][0]),(w[Bt][0].s.c!=Et.c||w[Bt][0].s.r!=Et.r)&&delete gt.f,gt.f&&(gt.f=""+el(w[Bt][1],o,Et,Y,k));break}}Ve.dense?(n[Et.r]||(n[Et.r]=[]),n[Et.r][Et.c]=gt):n[h]=gt}},k={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(k.password=t.password);var M,U=[],z=[],Q=[],q=[],V=!1,Y=[];Y.SheetNames=k.snames,Y.sharedf=k.sharedf,Y.arrayf=k.arrayf,Y.names=[],Y.XTI=[];var K=0,J=0,R=0,F=[],W=[],X;k.codepage=1200,Hd(1200);for(var ne=!1;e.l<e.length-1;){var le=e.l,ie=e.read_shift(2);if(ie===0&&K===10)break;var ae=e.l===e.length?0:e.read_shift(2),Ae=tF[ie];if(Ae&&Ae.f){if(t.bookSheets&&K===133&&ie!==133)break;if(K=ie,Ae.r===2||Ae.r==12){var ke=e.read_shift(2);if(ae-=2,!k.enc&&ke!==ie&&((ke&255)<<8|ke>>8)!==ie)throw new Error("rt mismatch: "+ke+"!="+ie);Ae.r==12&&(e.l+=10,ae-=10)}var re={};if(ie===10?re=Ae.f(e,ae,k):re=GIe(ie,Ae,e,ae,k),J==0&&[9,521,1033,2057].indexOf(K)===-1)continue;switch(ie){case 34:r.opts.Date1904=C.WBProps.date1904=re;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(e.l=0),k.enc=re,!t.password)throw new Error("File is password-protected");if(re.valid==null)throw new Error("Encryption scheme unsupported");if(!re.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=re;break;case 66:var Re=Number(re);switch(Re){case 21010:Re=1200;break;case 32768:Re=1e4;break;case 32769:Re=1252;break}Hd(k.codepage=Re),ne=!0;break;case 317:k.rrtabid=re;break;case 25:k.winlocked=re;break;case 439:r.opts.RefreshAll=re;break;case 12:r.opts.CalcCount=re;break;case 16:r.opts.CalcDelta=re;break;case 17:r.opts.CalcIter=re;break;case 13:r.opts.CalcMode=re;break;case 14:r.opts.CalcPrecision=re;break;case 95:r.opts.CalcSaveRecalc=re;break;case 15:k.CalcRefMode=re;break;case 2211:r.opts.FullCalc=re;break;case 129:re.fDialog&&(n["!type"]="dialog"),re.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),re.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:B.push(re);break;case 430:Y.push([re]),Y[Y.length-1].XTI=[];break;case 35:case 547:Y[Y.length-1].push(re);break;case 24:case 536:X={Name:re.Name,Ref:el(re.rgce,o,null,Y,k)},re.itab>0&&(X.Sheet=re.itab-1),Y.names.push(X),Y[0]||(Y[0]=[],Y[0].XTI=[]),Y[Y.length-1].push(re),re.Name=="_xlnm._FilterDatabase"&&re.itab>0&&re.rgce&&re.rgce[0]&&re.rgce[0][0]&&re.rgce[0][0][0]=="PtgArea3d"&&(W[re.itab-1]={ref:Jr(re.rgce[0][0][1][2])});break;case 22:k.ExternCount=re;break;case 23:Y.length==0&&(Y[0]=[],Y[0].XTI=[]),Y[Y.length-1].XTI=Y[Y.length-1].XTI.concat(re),Y.XTI=Y.XTI.concat(re);break;case 2196:if(k.biff<8)break;X!=null&&(X.Comment=re[1]);break;case 18:n["!protect"]=re;break;case 19:re!==0&&k.WTF&&console.error("Password verifier: "+re);break;case 133:s[re.pos]=re,k.snames.push(re.name);break;case 10:{if(--J)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,n["!ref"]=Jr(o),t.sheetRows&&t.sheetRows<=o.e.r){var Le=o.e.r;o.e.r=t.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=Jr(o),o.e.r=Le}o.e.r++,o.e.c++}U.length>0&&(n["!merges"]=U),z.length>0&&(n["!objects"]=z),Q.length>0&&(n["!cols"]=Q),q.length>0&&(n["!rows"]=q),C.Sheets.push(_)}u===""?d=n:a[u]=n,n=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[ie]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[re.BIFFVer]||8),k.biffguess=re.BIFFVer==0,re.BIFFVer==0&&re.dt==4096&&(k.biff=5,ne=!0,Hd(k.codepage=28591)),k.biff==8&&re.BIFFVer==0&&re.dt==16&&(k.biff=2),J++)break;if(n=t.dense?[]:{},k.biff<8&&!ne&&(ne=!0,Hd(k.codepage=t.codepage||1252)),k.biff<5||re.BIFFVer==0&&re.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Te={pos:e.l-ae,name:u};s[Te.pos]=Te,k.snames.push(u)}else u=(s[le]||{name:""}).name;re.dt==32&&(n["!type"]="chart"),re.dt==64&&(n["!type"]="macro"),U=[],z=[],k.arrayf=w=[],Q=[],q=[],V=!1,_={Hidden:(s[le]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(t.dense?(n[re.r]||[])[re.c]:n[Ur({c:re.c,r:re.r})])&&++re.c,j={ixfe:re.ixfe,XF:B[re.ixfe]||{},v:re.val,t:"n"},R>0&&(j.z=F[j.ixfe>>8&63]),Hf(j,t,r.opts.Date1904),P({c:re.c,r:re.r},j,t);break;case 5:case 517:j={ixfe:re.ixfe,XF:B[re.ixfe],v:re.val,t:re.t},R>0&&(j.z=F[j.ixfe>>8&63]),Hf(j,t,r.opts.Date1904),P({c:re.c,r:re.r},j,t);break;case 638:j={ixfe:re.ixfe,XF:B[re.ixfe],v:re.rknum,t:"n"},R>0&&(j.z=F[j.ixfe>>8&63]),Hf(j,t,r.opts.Date1904),P({c:re.c,r:re.r},j,t);break;case 189:for(var de=re.c;de<=re.C;++de){var Ce=re.rkrec[de-re.c][0];j={ixfe:Ce,XF:B[Ce],v:re.rkrec[de-re.c][1],t:"n"},R>0&&(j.z=F[j.ixfe>>8&63]),Hf(j,t,r.opts.Date1904),P({c:de,r:re.r},j,t)}break;case 6:case 518:case 1030:{if(re.val=="String"){l=re;break}if(j=SC(re.val,re.cell.ixfe,re.tt),j.XF=B[j.ixfe],t.cellFormula){var me=re.formula;if(me&&me[0]&&me[0][0]&&me[0][0][0]=="PtgExp"){var ye=me[0][0][1][0],oe=me[0][0][1][1],fe=Ur({r:ye,c:oe});y[fe]?j.f=""+el(re.formula,o,re.cell,Y,k):j.F=((t.dense?(n[ye]||[])[oe]:n[fe])||{}).F}else j.f=""+el(re.formula,o,re.cell,Y,k)}R>0&&(j.z=F[j.ixfe>>8&63]),Hf(j,t,r.opts.Date1904),P(re.cell,j,t),l=re}break;case 7:case 519:if(l)l.val=re,j=SC(re,l.cell.ixfe,"s"),j.XF=B[j.ixfe],t.cellFormula&&(j.f=""+el(l.formula,o,l.cell,Y,k)),R>0&&(j.z=F[j.ixfe>>8&63]),Hf(j,t,r.opts.Date1904),P(l.cell,j,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(re);var be=Ur(re[0].s);if(m=t.dense?(n[re[0].s.r]||[])[re[0].s.c]:n[be],t.cellFormula&&m){if(!l||!be||!m)break;m.f=""+el(re[1],o,re[0],Y,k),m.F=Jr(re[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!l)break;y[Ur(l.cell)]=re[0],m=t.dense?(n[l.cell.r]||[])[l.cell.c]:n[Ur(l.cell)],(m||{}).f=""+el(re[0],o,f,Y,k)}}break;case 253:j=SC(c[re.isst].t,re.ixfe,"s"),c[re.isst].h&&(j.h=c[re.isst].h),j.XF=B[j.ixfe],R>0&&(j.z=F[j.ixfe>>8&63]),Hf(j,t,r.opts.Date1904),P({c:re.c,r:re.r},j,t);break;case 513:t.sheetStubs&&(j={ixfe:re.ixfe,XF:B[re.ixfe],t:"z"},R>0&&(j.z=F[j.ixfe>>8&63]),Hf(j,t,r.opts.Date1904),P({c:re.c,r:re.r},j,t));break;case 190:if(t.sheetStubs)for(var Pe=re.c;Pe<=re.C;++Pe){var $e=re.ixfe[Pe-re.c];j={ixfe:$e,XF:B[$e],t:"z"},R>0&&(j.z=F[j.ixfe>>8&63]),Hf(j,t,r.opts.Date1904),P({c:Pe,r:re.r},j,t)}break;case 214:case 516:case 4:j=SC(re.val,re.ixfe,"s"),j.XF=B[j.ixfe],R>0&&(j.z=F[j.ixfe>>8&63]),Hf(j,t,r.opts.Date1904),P({c:re.c,r:re.r},j,t);break;case 0:case 512:J===1&&(o=re);break;case 252:c=re;break;case 1054:if(k.biff==4){F[R++]=re[1];for(var Ke=0;Ke<R+163&&Dr[Ke]!=re[1];++Ke);Ke>=163&&Sh(re[1],R+163)}else Sh(re[1],re[0]);break;case 30:{F[R++]=re;for(var nt=0;nt<R+163&&Dr[nt]!=re;++nt);nt>=163&&Sh(re,R+163)}break;case 229:U=U.concat(re);break;case 93:z[re.cmo[0]]=k.lastobj=re;break;case 438:k.lastobj.TxO=re;break;case 127:k.lastobj.ImData=re;break;case 440:for(v=re[0].s.r;v<=re[0].e.r;++v)for(x=re[0].s.c;x<=re[0].e.c;++x)m=t.dense?(n[v]||[])[x]:n[Ur({c:x,r:v})],m&&(m.l=re[1]);break;case 2048:for(v=re[0].s.r;v<=re[0].e.r;++v)for(x=re[0].s.c;x<=re[0].e.c;++x)m=t.dense?(n[v]||[])[x]:n[Ur({c:x,r:v})],m&&m.l&&(m.l.Tooltip=re[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;m=t.dense?(n[re[0].r]||[])[re[0].c]:n[Ur(re[0])];var He=z[re[2]];m||(t.dense?(n[re[0].r]||(n[re[0].r]=[]),m=n[re[0].r][re[0].c]={t:"z"}):m=n[Ur(re[0])]={t:"z"},o.e.r=Math.max(o.e.r,re[0].r),o.s.r=Math.min(o.s.r,re[0].r),o.e.c=Math.max(o.e.c,re[0].c),o.s.c=Math.min(o.s.c,re[0].c)),m.c||(m.c=[]),g={a:re[1],t:He.TxO.t},m.c.push(g)}break;case 2173:FSe(B[re.ixfe],re.ext);break;case 125:{if(!k.cellStyles)break;for(;re.e>=re.s;)Q[re.e--]={width:re.w/256,level:re.level||0,hidden:!!(re.flags&1)},V||(V=!0,h8(re.w/256)),Wm(Q[re.e+1])}break;case 520:{var it={};re.level!=null&&(q[re.r]=it,it.level=re.level),re.hidden&&(q[re.r]=it,it.hidden=!0),re.hpt&&(q[re.r]=it,it.hpt=re.hpt,it.hpx=Sb(re.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||xg(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ie]]=re;break;case 161:n["!margins"]||xg(n["!margins"]={}),n["!margins"].header=re.header,n["!margins"].footer=re.footer;break;case 574:re.RTL&&(C.Views[0].RTL=!0);break;case 146:T=re;break;case 2198:M=re;break;case 140:O=re;break;case 442:u?_.CodeName=re||_.name:C.WBProps.CodeName=re||"ThisWorkbook";break}}else Ae||console.error("Missing Info for XLS Record 0x"+ie.toString(16)),e.l+=ae}return r.SheetNames=Ds(s).sort(function(xt,Et){return Number(xt)-Number(Et)}).map(function(xt){return s[xt].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&W.forEach(function(xt,Et){r.Sheets[r.SheetNames[Et]]["!autofilter"]=xt}),r.Strings=c,r.SSF=qn(Dr),k.enc&&(r.Encryption=k.enc),M&&(r.Themes=M),r.Metadata={},O!==void 0&&(r.Metadata.Country=O),Y.names.length>0&&(C.Names=Y.names),r.Workbook=C,r}var W2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function KIe(e,t,r){var a=Cr.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var n=Vz(a,KO,W2.DSI);for(var s in n)t[s]=n[s]}catch(u){if(r.WTF)throw u}var o=Cr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=Vz(o,WO,W2.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(Zre(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function WIe(e,t){var r=[],a=[],n=[],s=0,o,l=bz(KO,"n"),c=bz(WO,"n");if(e.Props)for(o=Ds(e.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?a:n).push([o[s],e.Props[o[s]]]);if(e.Custprops)for(o=Ds(e.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?a:n).push([o[s],e.Custprops[o[s]]]);var u=[];for(s=0;s<n.length;++s)iae.indexOf(n[s][0])>-1||Jre.indexOf(n[s][0])>-1||n[s][1]!=null&&u.push(n[s]);a.length&&Cr.utils.cfb_add(t,"/SummaryInformation",$z(a,W2.SI,c,WO)),(r.length||u.length)&&Cr.utils.cfb_add(t,"/DocumentSummaryInformation",$z(r,W2.DSI,l,KO,u.length?u:null,W2.UDI))}function tne(e,t){t||(t={}),N8(t),VR(),t.codepage&&zR(t.codepage);var r,a;if(e.FullPaths){if(Cr.find(e,"/encryption"))throw new Error("File is password-protected");r=Cr.find(e,"!CompObj"),a=Cr.find(e,"/Workbook")||Cr.find(e,"/Book")}else{switch(t.type){case"base64":e=Xc(su(e));break;case"binary":e=Xc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Eo(e,0),a={content:e}}var n,s;if(r&&VIe(r),t.bookProps&&!t.bookSheets)n={};else{var o=da?"buffer":"array";if(a&&a.content)n=qIe(a.content,t);else if((s=Cr.find(e,"PerfectOffice_MAIN"))&&s.content)n=gg.to_workbook(s.content,(t.type=o,t));else if((s=Cr.find(e,"NativeContent_MAIN"))&&s.content)n=gg.to_workbook(s.content,(t.type=o,t));else throw(s=Cr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Cr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=l4e(e))}var l={};return e.FullPaths&&KIe(e,l,t),n.Props=n.Custprops=l,t.bookFiles&&(n.cfb=e),n}function XIe(e,t){var r=t||{},a=Cr.utils.cfb_new({root:"R"}),n="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":n="/Workbook",r.biff=8;break;case"biff5":n="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Cr.utils.cfb_add(a,n,rne(e,r)),r.biff==8&&(e.Props||e.Custprops)&&WIe(e,a),r.biff==8&&e.vbaraw&&c4e(a,Cr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var Rw={0:{f:bBe},1:{f:_Be},2:{f:qBe},3:{f:PBe},4:{f:IBe},5:{f:VBe},6:{f:JBe},7:{f:UBe},8:{f:sTe},9:{f:nTe},10:{f:rTe},11:{f:aTe},12:{f:BBe},13:{f:WBe},14:{f:LBe},15:{f:FBe},16:{f:qae},17:{f:eTe},18:{f:HBe},19:{f:n8},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:eIe},40:{},42:{},43:{f:J_e},44:{f:X_e},45:{f:tSe},46:{f:aSe},47:{f:rSe},48:{},49:{f:N5e},50:{},51:{f:RSe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:gae},62:{f:YBe},63:{f:GSe},64:{f:yTe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Al,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:gTe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:jBe},148:{f:NBe,p:16},151:{f:dTe},152:{},153:{f:YTe},154:{},155:{},156:{f:WTe},157:{},158:{},159:{T:1,f:A_e},160:{T:-1},161:{T:1,f:ox},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:iTe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:DSe},336:{T:-1},337:{f:USe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:qO},357:{},358:{},359:{},360:{T:1},361:{},362:{f:pae},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:fTe},427:{f:ATe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:mTe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:CBe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:cTe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:qO},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:a4e},633:{T:1},634:{T:-1},635:{T:1,f:t4e},636:{T:-1},637:{f:k5e},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:LTe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:wTe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},tF={6:{f:QB},10:{f:q0},12:{f:pi},13:{f:pi},14:{f:Gs},15:{f:Gs},16:{f:il},17:{f:Gs},18:{f:Gs},19:{f:pi},20:{f:Yz},21:{f:Yz},23:{f:pae},24:{f:Zz},25:{f:Gs},26:{},27:{},28:{f:wke},29:{},34:{f:Gs},35:{f:Jz},38:{f:il},39:{f:il},40:{f:il},41:{f:il},42:{f:Gs},43:{f:Gs},47:{f:F_e},49:{f:Wje},51:{f:pi},60:{},61:{f:Vje},64:{f:Gs},65:{f:Kje},66:{f:pi},77:{},80:{},81:{},82:{},85:{f:pi},89:{},90:{},91:{},92:{f:Oje},93:{f:Cke},94:{},95:{f:Gs},96:{},97:{},99:{f:Gs},125:{f:gae},128:{f:uke},129:{f:Dje},130:{f:pi},131:{f:Gs},132:{f:Gs},133:{f:Pje},134:{},140:{f:Oke},141:{f:pi},144:{},146:{f:Pke},151:{},152:{},153:{},154:{},155:{},156:{f:pi},157:{},158:{},160:{f:zke},161:{f:Mke},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:ike},190:{f:oke},193:{f:q0},197:{},198:{},199:{},200:{},201:{},202:{f:Gs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:pi},220:{},221:{f:Gs},222:{},224:{f:cke},225:{f:Ije},226:{f:q0},227:{},229:{f:Nke},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Lje},253:{f:Yje},255:{f:Uje},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:oae},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Gs},353:{f:q0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:mke},431:{f:Gs},432:{},433:{},434:{},437:{},438:{f:_ke},439:{f:Gs},440:{f:Ske},441:{},442:{f:_N},443:{},444:{f:pi},445:{},446:{},448:{f:q0},449:{f:zje,r:2},450:{f:q0},512:{f:Kz},513:{f:Hke},515:{f:Ake},516:{f:Zje},517:{f:Xz},519:{f:Vke},520:{f:Qje},523:{},545:{f:eV},549:{f:qz},566:{},574:{f:Gje},638:{f:ske},659:{},1048:{},1054:{f:tke},1084:{},1212:{f:vke},2048:{f:Tke},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:jC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:q0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Rke,r:12},2173:{f:OSe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Gs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:xke,r:12},2197:{},2198:{f:kSe,r:12},2199:{},2200:{},2201:{},2202:{f:bke,r:12},2203:{f:q0},2204:{},2205:{},2206:{},2207:{},2211:{f:Hje},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:pi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Uke},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Dke},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Kz},1:{},2:{f:Wke},3:{f:qke},4:{f:Gke},5:{f:Xz},7:{f:Yke},8:{},9:{f:jC},11:{},22:{f:pi},30:{f:ake},31:{},32:{},33:{f:eV},36:{},37:{f:qz},50:{f:Jke},62:{},52:{},67:{},68:{f:pi},69:{},86:{},126:{},127:{f:$ke},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Zke},223:{},234:{},354:{},421:{},518:{f:QB},521:{f:jC},536:{f:Zz},547:{f:Jz},561:{},579:{},1030:{f:QB},1033:{f:jC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Gt(e,t,r,a){var n=t;if(!isNaN(n)){var s=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,n),o.write_shift(2,s),s>0&&t8(r)&&e.push(r)}}function YIe(e,t,r,a){var n=(r||[]).length||0;if(n<=8224)return Gt(e,t,r,n);var s=t;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<n;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function IN(e,t,r){return e||(e=Ct(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function JIe(e,t,r,a){var n=Ct(9);return IN(n,e,t),lae(r,a||"b",n),n}function ZIe(e,t,r){var a=Ct(8+2*r.length);return IN(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function e6e(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var n=t.t=="d"?Di(Gn(t.v)):t.v;n==(n|0)&&n>=0&&n<65536?Gt(e,2,Xke(r,a,n)):Gt(e,3,Kke(r,a,n));return;case"b":case"e":Gt(e,5,JIe(r,a,t.v,t.t));return;case"s":case"str":Gt(e,4,ZIe(r,a,(t.v||"").slice(0,255)));return}Gt(e,1,IN(null,r,a))}function t6e(e,t,r,a){var n=Array.isArray(t),s=Da(t["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Jr(s)}for(var u=s.s.r;u<=s.e.r;++u){l=ti(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=us(d)),o=c[d]+l;var f=n?(t[u]||[])[d]:t[o];f&&e6e(e,f,u,d)}}}function r6e(e,t){for(var r=t||{},a=hc(),n=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(n=s);if(n==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Gt(a,r.biff==4?1033:r.biff==3?521:9,d8(e,16,r)),t6e(a,e.Sheets[e.SheetNames[n]],n,r),Gt(a,10),a.end()}function a6e(e,t,r){Gt(e,49,Xje({sz:12,name:"Arial"},r))}function n6e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)t[n]!=null&&Gt(e,1054,rke(n,t[n],r))})}function s6e(e,t){var r=Ct(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Gt(e,2151,r),r=Ct(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Aae(Da(t["!ref"]||"A1"),r),r.write_shift(4,4),Gt(e,2152,r)}function i6e(e,t){for(var r=0;r<16;++r)Gt(e,224,Wz({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){Gt(e,224,Wz(a,0,t))})}function o6e(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];Gt(e,440,Bke(a)),a[1].Tooltip&&Gt(e,2048,Ike(a))}delete t["!links"]}function l6e(e,t){if(t){var r=0;t.forEach(function(a,n){++r<=256&&a&&Gt(e,125,Lke(kS(n,a),n))})}}function c6e(e,t,r,a,n){var s=16+cp(n.cellXfs,t,n);if(t.v==null&&!t.bf){Gt(e,513,Ug(r,a,s));return}if(t.bf)Gt(e,6,D3e(t,r,a,n,s));else switch(t.t){case"d":case"n":var o=t.t=="d"?Di(Gn(t.v)):t.v;Gt(e,515,hke(r,a,o,s));break;case"b":case"e":Gt(e,517,fke(r,a,t.v,s,n,t.t));break;case"s":case"str":if(n.bookSST){var l=v8(n.Strings,t.v,n.revStrings);Gt(e,253,Jje(r,a,l,s))}else Gt(e,516,eke(r,a,(t.v||"").slice(0,255),s,n));break;default:Gt(e,513,Ug(r,a,s))}}function u6e(e,t,r){var a=hc(),n=r.SheetNames[e],s=r.Sheets[n]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],m=Da(s["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}Gt(a,2057,d8(r,16,t)),Gt(a,13,Gu(1)),Gt(a,12,Gu(100)),Gt(a,15,Cl(!0)),Gt(a,17,Cl(!1)),Gt(a,16,Lg(.001)),Gt(a,95,Cl(!0)),Gt(a,42,Cl(!1)),Gt(a,43,Cl(!1)),Gt(a,130,Gu(1)),Gt(a,128,dke()),Gt(a,131,Cl(!1)),Gt(a,132,Cl(!1)),u&&l6e(a,s["!cols"]),Gt(a,512,nke(m,t)),u&&(s["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){f=ti(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(h[v]=us(v)),d=h[v]+f;var y=c?(s[x]||[])[v]:s[d];y&&(c6e(a,y,x,v,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=l.CodeName||l.name||n;return u&&Gt(a,574,qje((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&Gt(a,229,Eke(s["!merges"])),u&&o6e(a,s),Gt(a,442,cae(w)),u&&s6e(a,s),Gt(a,10),a.end()}function d6e(e,t,r){var a=hc(),n=(e||{}).Workbook||{},s=n.Sheets||[],o=n.WBProps||{},l=r.biff==8,c=r.biff==5;if(Gt(a,2057,d8(e,5,r)),r.bookType=="xla"&&Gt(a,135),Gt(a,225,l?Gu(1200):null),Gt(a,193,fje(2)),c&&Gt(a,191),c&&Gt(a,192),Gt(a,226),Gt(a,92,Fje("SheetJS",r)),Gt(a,66,Gu(l?1200:1252)),l&&Gt(a,353,Gu(0)),l&&Gt(a,448),Gt(a,317,Qke(e.SheetNames.length)),l&&e.vbaraw&&Gt(a,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";Gt(a,442,cae(u))}Gt(a,156,Gu(17)),Gt(a,25,Cl(!1)),Gt(a,18,Cl(!1)),Gt(a,19,Gu(0)),l&&Gt(a,431,Cl(!1)),l&&Gt(a,444,Gu(0)),Gt(a,61,$je()),Gt(a,64,Cl(!1)),Gt(a,141,Gu(0)),Gt(a,34,Cl(zTe(e)=="true")),Gt(a,14,Cl(!0)),l&&Gt(a,439,Cl(!1)),Gt(a,218,Gu(0)),a6e(a,e,r),n6e(a,e.SSF,r),i6e(a,r),l&&Gt(a,352,Cl(!1));var d=a.end(),f=hc();l&&Gt(f,140,Fke()),l&&r.Strings&&YIe(f,252,Mje(r.Strings)),Gt(f,10);var h=f.end(),m=hc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var v=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};Gt(m,133,Rje({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var w=m.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var j=[];return d.length&&j.push(d),w.length&&j.push(w),h.length&&j.push(h),to(j)}function f6e(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=qn(Dr)),e&&e.SSF&&(g1(),bS(e.SSF),r.revssf=wS(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,E8(r),r.cellXfs=[],cp(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var n=0;n<e.SheetNames.length;++n)a[a.length]=u6e(n,r,e);return a.unshift(d6e(e,a,r)),to(a)}function rne(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var n=pc(a["!ref"]);n.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return f6e(e,t);case 4:case 3:case 2:return r6e(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function uV(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var n=e.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=n.index,l=s&&s.index||e.length,c=XCe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var x=c[o].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var w=y[l].trim();if(w.match(/<t[dh]/i)){for(var j=w,O=0;j.charAt(0)=="<"&&(O=j.indexOf(">"))>-1;)j=j.slice(O+1);for(var B=0;B<g.length;++B){var T=g[B];T.s.c==d&&T.s.r<u&&u<=T.e.r&&(d=T.e.c+1,B=-1)}var C=Vr(w.slice(0,w.indexOf(">")));h=C.colspan?+C.colspan:1,((f=+C.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var _=C.t||C["data-t"]||"";if(!j.length){d+=h;continue}if(j=jre(j),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!j.length){d+=h;continue}var S={t:"s",v:j};r.raw||!j.trim().length||_=="s"||(j==="TRUE"?S={t:"b",v:!0}:j==="FALSE"?S={t:"b",v:!1}:isNaN(Yd(j))?isNaN(kb(j).getDate())||(S={t:"d",v:Gn(j)},r.cellDates||(S={t:"n",v:Di(S.v)}),S.z=r.dateNF||Dr[14]):S={t:"n",v:Yd(j)}),r.dense?(a[u]||(a[u]=[]),a[u][d]=S):a[Ur({r:u,c:d})]=S,d+=h}}}}return a["!ref"]=Jr(m),g.length&&(a["!merges"]=g),a}function A6e(e,t,r,a){for(var n=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<n.length;++u)if(!(n[u].s.r>r||n[u].s.c>o)&&!(n[u].e.r<r||n[u].e.c<o)){if(n[u].s.r<r||n[u].s.c<o){l=-1;break}l=n[u].e.r-n[u].s.r+1,c=n[u].e.c-n[u].s.c+1;break}if(!(l<0)){var d=Ur({r,c:o}),f=a.dense?(e[r]||[])[o]:e[d],h=f&&f.v!=null&&(f.h||JR(f.w||(Hh(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),a.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(a.id||"sjs")+"-"+d,s.push($t("td",h,m))}}var g="<tr>";return g+s.join("")+"</tr>"}var h6e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',m6e="</body></html>";function p6e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return lp(uV(r[0],t),t);var a=k8();return r.forEach(function(n,s){_8(a,uV(n,t),"Sheet"+(s+1))}),a}function g6e(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function ane(e,t){var r=t||{},a=r.header!=null?r.header:h6e,n=r.footer!=null?r.footer:m6e,s=[a],o=pc(e["!ref"]);r.dense=Array.isArray(e),s.push(g6e(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(A6e(e,o,l,r));return s.push("</table>"+n),s.join("")}function nne(e,t,r){var a=r||{},n=0,s=0;if(a.origin!=null)if(typeof a.origin=="number")n=a.origin;else{var o=typeof a.origin=="string"?ds(a.origin):a.origin;n=o.r,s=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:n,c:s}};if(e["!ref"]){var d=pc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),n==-1&&(u.e.r=n=d.e.r+1)}var f=[],h=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,w=0,j=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var O=l[g];if(dV(O)){if(a.display)continue;m[x]={hidden:!0}}var B=O.children;for(v=y=0;v<B.length;++v){var T=B[v];if(!(a.display&&dV(T))){var C=T.hasAttribute("data-v")?T.getAttribute("data-v"):T.hasAttribute("v")?T.getAttribute("v"):jre(T.innerHTML),_=T.getAttribute("data-z")||T.getAttribute("z");for(h=0;h<f.length;++h){var S=f[h];S.s.c==y+s&&S.s.r<x+n&&x+n<=S.e.r&&(y=S.e.c+1-s,h=-1)}j=+T.getAttribute("colspan")||1,((w=+T.getAttribute("rowspan")||1)>1||j>1)&&f.push({s:{r:x+n,c:y+s},e:{r:x+n+(w||1)-1,c:y+s+(j||1)-1}});var L={t:"s",v:C},P=T.getAttribute("data-t")||T.getAttribute("t")||"";C!=null&&(C.length==0?L.t=P||"z":a.raw||C.trim().length==0||P=="s"||(C==="TRUE"?L={t:"b",v:!0}:C==="FALSE"?L={t:"b",v:!1}:isNaN(Yd(C))?isNaN(kb(C).getDate())||(L={t:"d",v:Gn(C)},a.cellDates||(L={t:"n",v:Di(L.v)}),L.z=a.dateNF||Dr[14]):L={t:"n",v:Yd(C)})),L.z===void 0&&_!=null&&(L.z=_);var k="",M=T.getElementsByTagName("A");if(M&&M.length)for(var U=0;U<M.length&&!(M[U].hasAttribute("href")&&(k=M[U].getAttribute("href"),k.charAt(0)!="#"));++U);k&&k.charAt(0)!="#"&&(L.l={Target:k}),a.dense?(e[x+n]||(e[x+n]=[]),e[x+n][y+s]=L):e[Ur({c:y+s,r:x+n})]=L,u.e.c<y+s&&(u.e.c=y+s),y+=j}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+n),e["!ref"]=Jr(u),x>=c&&(e["!fullref"]=Jr((u.e.r=l.length-g+x-1+n,u))),e}function sne(e,t){var r=t||{},a=r.dense?[]:{};return nne(a,e,t)}function x6e(e,t){return lp(sne(e,t),t)}function dV(e){var t="",r=v6e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function v6e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function b6e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Fa(t.replace(/<[^>]*>/g,""));return[r]}var fV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function ine(e,t){var r=t||{},a=ZR(e),n=[],s,o,l={name:""},c="",u=0,d,f,h={},m=[],g=r.dense?[]:{},x,v,y={value:""},w="",j=0,O=[],B=-1,T=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,S={},L=[],P={},k=0,M=0,U=[],z=1,Q=1,q=[],V={Names:[]},Y={},K=["",""],J=[],R={},F="",W=0,X=!1,ne=!1,le=0;for(Tw.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=Tw.exec(a);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"":x[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?g["!ref"]=Jr(C):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(g["!fullref"]=g["!ref"],C.e.r=r.sheetRows-1,g["!ref"]=Jr(C)),L.length&&(g["!merges"]=L),U.length&&(g["!rows"]=U),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),h[d.name]=g,ne=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Vr(x[0],!1),B=T=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,g=r.dense?[]:{},L=[],U=[],ne=!0);break;case"table-row-group":x[1]==="/"?--_:++_;break;case"table-row":case"":if(x[1]==="/"){B+=z,z=1;break}if(f=Vr(x[0],!1),f.?B=f.-1:B==-1&&(B=0),z=+f["number-rows-repeated"]||1,z<10)for(le=0;le<z;++le)_>0&&(U[B+le]={level:_});T=-1;break;case"covered-table-cell":x[1]!=="/"&&++T,r.sheetStubs&&(r.dense?(g[B]||(g[B]=[]),g[B][T]={t:"z"}):g[Ur({r:B,c:T})]={t:"z"}),w="",O=[];break;case"table-cell":case"":if(x[0].charAt(x[0].length-2)==="/")++T,y=Vr(x[0],!1),Q=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=oV(Fa(y.formula))),(y.||y["value-type"])=="string"&&(v.t="s",v.v=Fa(y["string-value"]||""),r.dense?(g[B]||(g[B]=[]),g[B][T]=v):g[Ur({r:B,c:T})]=v),T+=Q-1;else if(x[1]!=="/"){++T,w="",j=0,O=[],Q=1;var ie=z?B+z-1:B;if(T>C.e.c&&(C.e.c=T),T<C.s.c&&(C.s.c=T),B<C.s.r&&(C.s.r=B),ie>C.e.r&&(C.e.r=ie),y=Vr(x[0],!1),J=[],R={},v={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Fa(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(k=parseInt(y["number-matrix-rows-spanned"],10)||0,M=parseInt(y["number-matrix-columns-spanned"],10)||0,P={s:{r:B,c:T},e:{r:B+k-1,c:T+M-1}},v.F=Jr(P),q.push([P,v.F])),y.formula)v.f=oV(y.formula);else for(le=0;le<q.length;++le)B>=q[le][0].s.r&&B<=q[le][0].e.r&&T>=q[le][0].s.c&&T<=q[le][0].e.c&&(v.F=q[le][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(k=parseInt(y["number-rows-spanned"],10)||0,M=parseInt(y["number-columns-spanned"],10)||0,P={s:{r:B,c:T},e:{r:B+k-1,c:T+M-1}},L.push(P)),y["number-columns-repeated"]&&(Q=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Vn(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=Gn(y["date-value"]),r.cellDates||(v.t="n",v.v=Di(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=qCe(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=NS(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(w=Fa(y["string-value"]),O=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(X=!1,v.t==="s"&&(v.v=w||"",O.length&&(v.R=O),X=j==0),Y.Target&&(v.l=Y),J.length>0&&(v.c=J,J=[]),w&&r.cellText!==!1&&(v.w=w),X&&(v.t="z",delete v.v),(!X||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=B))for(var ae=0;ae<z;++ae){if(Q=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[B+ae]||(g[B+ae]=[]),g[B+ae][T]=ae==0?v:qn(v);--Q>0;)g[B+ae][T+Q]=qn(v);else for(g[Ur({r:B+ae,c:T})]=v;--Q>0;)g[Ur({r:B+ae,c:T+Q})]=qn(v);C.e.c<=T&&(C.e.c=T)}Q=parseInt(y["number-columns-repeated"]||"1",10),T+=Q-1,Q=0,v={},w="",O=[]}Y={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=n.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=n.pop())[0]!==x[3])throw"Bad state: "+s;R.t=w,O.length&&(R.R=O),R.a=F,J.push(R)}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!1]);F="",W=0,w="",j=0,O=[];break;case"creator":x[1]==="/"?F=a.slice(W,x.index):W=x.index+x[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=n.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!1]);w="",j=0,O=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(S[l.name]=c,(s=n.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=Vr(x[0],!1),n.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":o=Vr(x[0],!1),c+=fV[x[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":o=Vr(x[0],!1),c+=fV[x[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":o=Vr(x[0],!1),K=HB(o["cell-range-address"]);var Ae={Name:o.name,Ref:K[0]+"!"+K[1]};ne&&(Ae.Sheet=m.length),V.Names.push(Ae);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var ke=b6e(a.slice(j,x.index));w=(w.length>0?w+`
`:"")+ke[0]}else Vr(x[0],!1),j=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{K=HB(Vr(x[0])["target-range-address"]),h[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(Y=Vr(x[0],!1),!Y.href)break;Y.Target=Fa(Y.href),delete Y.href,Y.Target.charAt(0)=="#"&&Y.Target.indexOf(".")>-1?(K=HB(Y.Target.slice(1)),Y.Target="#"+K[0]+"!"+K[1]):Y.Target.match(/^\.\.[\\\/]/)&&(Y.Target=Y.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(x)}}var re={Sheets:h,SheetNames:m,Workbook:V};return r.bookSheets&&delete re.Sheets,re}function AV(e,t){t=t||{},Vu(e,"META-INF/manifest.xml")&&q5e(mi(e,"META-INF/manifest.xml"),t);var r=Yc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=ine(jn(r),t);return Vu(e,"meta.xml")&&(a.Props=Xre(mi(e,"meta.xml"))),a}function hV(e,t){return ine(e,t)}var y6e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Bw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ni+t}}(),mV=function(){var e=function(s){return pn(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(s,o,l){var c=[];c.push('      <table:table table:name="'+pn(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=pc(s["!ref"]||"A1"),h=s["!merges"]||[],m=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,w={},j="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,w["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(y){c.push(r);continue}var O=Ur({r:u,c:d}),B=g?(s[u]||[])[d]:s[O];if(B&&B.f&&(w["table:formula"]=pn(Q3e(B.f)),B.F&&B.F.slice(0,O.length)==O)){var T=pc(B.F);w["table:number-matrix-columns-spanned"]=T.e.c-T.s.c+1,w["table:number-matrix-rows-spanned"]=T.e.r-T.s.r+1}if(!B){c.push(t);continue}switch(B.t){case"b":j=B.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=B.v?"true":"false";break;case"n":j=B.w||String(B.v||0),w["office:value-type"]="float",w["office:value"]=B.v||0;break;case"s":case"str":j=B.v==null?"":B.v,w["office:value-type"]="string";break;case"d":j=B.w||Gn(B.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=Gn(B.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var C=e(j);if(B.l&&B.l.Target){var _=B.l.Target;_=_.charAt(0)=="#"?"#"+H3e(_.slice(1)):_,_.charAt(0)!="#"&&!_.match(/^\w+:/)&&(_="../"+_),C=$t("text:a",C,{"xlink:href":_.replace(/&/g,"&amp;")})}c.push("          "+$t("table:table-cell",$t("text:p",C,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},n=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Wm(f),f.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[ni],u=Bw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Bw({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Wre().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),n(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(a(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function one(e,t){if(t.bookType=="fods")return mV(e,t);var r=WR(),a="",n=[],s=[];return a="mimetype",na(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",na(r,a,mV(e,t)),n.push([a,"text/xml"]),s.push([a,"ContentFile"]),a="styles.xml",na(r,a,y6e(e,t)),n.push([a,"text/xml"]),s.push([a,"StylesFile"]),a="meta.xml",na(r,a,ni+Wre()),n.push([a,"text/xml"]),s.push([a,"MetadataFile"]),a="manifest.rdf",na(r,a,X5e(s)),n.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",na(r,a,K5e(n)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Qg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function rF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):jn(op(e))}function w6e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Xc(sA(e))}function N6e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Ym(e){var t=e.reduce(function(n,s){return n+s.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(n){r.set(n,a),a+=n.length}),r}function pV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function E6e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,n=t+13;n>=t;--n)a=a*256+e[n];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function C6e(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,n=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var s=0;n>=1;++s,n/=256)e[t+s]=n&255;e[t+15]|=r>=0?0:128}function Lw(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function An(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Os(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function za(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],n=Lw(e,r),s=n&7;n=Math.floor(n/8);var o=0,l;if(n==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Lw(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(n," at offset ").concat(a))}var u={data:l,type:s};t[n]==null?t[n]=[u]:t[n].push(u)}return t}function xo(e){var t=[];return e.forEach(function(r,a){r.forEach(function(n){n.data&&(t.push(An(a*8+n.type)),n.type==2&&t.push(An(n.data.length)),t.push(n.data))})}),Ym(t)}function w8(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Qu(e){for(var t,r=[],a=[0];a[0]<e.length;){var n=Lw(e,a),s=za(e.slice(a[0],a[0]+n));a[0]+=n;var o={id:Os(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=za(l.data),u=Os(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+u)}),a[0]+=u}),(t=s[3])!=null&&t[0]&&(o.merge=Os(s[3][0].data)>>>0>0),r.push(o)}return r}function Kx(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:An(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:An(+!!r.merge),type:0}]);var n=[];r.messages.forEach(function(o){n.push(o.data),o.meta[3]=[{type:0,data:An(o.data.length)}],a[2].push({data:xo(o.meta),type:2})});var s=xo(a);t.push(An(s.length)),t.push(s),n.forEach(function(o){return t.push(o)})}),Ym(t)}function j6e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=Lw(t,r),n=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}n.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),n=[Ym(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(n.push(n[0].slice(-c)),u-=c;u>=n[n.length-1].length;)n.push(n[n.length-1]),u-=n[n.length-1].length;n.push(n[0].slice(-c,-c+u))}}var d=Ym(n);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function Hu(e){for(var t=[],r=0;r<e.length;){var a=e[r++],n=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(j6e(a,e.slice(r,r+n))),r+=n}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Ym(t)}function Wx(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),n=new Uint8Array(4);t.push(n);var s=An(a),o=s.length;t.push(s),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,n[0]=0,n[1]=o&255,n[2]=o>>8&255,n[3]=o>>16&255,r+=a}return Ym(t)}function k6e(e,t,r,a){var n=Qg(e),s=n.getUint32(4,!0),o=(a>1?12:8)+pV(s&(a>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=n.getUint32(o,!0),o+=4),o+=pV(s&(a>1?12288:4096))*4,s&16&&(c=n.getUint32(o,!0),o+=4),s&32&&(u=n.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+n.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function _6e(e,t,r){var a=Qg(e),n=a.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);n&1&&(c=E6e(e,s),s+=16),n&2&&(u=a.getFloat64(s,!0),s+=8),n&4&&(d.setTime(d.getTime()+a.getFloat64(s,!0)*1e3),s+=8),n&8&&(l=a.getUint32(s,!0),s+=4),n&16&&(o=a.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)))}return f}function VB(e,t){var r=new Uint8Array(32),a=Qg(r),n=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,C6e(r,n,e.v),s|=1,n+=16;break;case"b":r[1]=6,a.setFloat64(n,e.v?1:0,!0),s|=2,n+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(n,t.indexOf(e.v),!0),s|=8,n+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,s,!0),r.slice(0,n)}function $B(e,t){var r=new Uint8Array(32),a=Qg(r),n=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(n,e.v,!0),s|=32,n+=8;break;case"b":r[2]=6,a.setFloat64(n,e.v?1:0,!0),s|=32,n+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(n,t.indexOf(e.v),!0),s|=16,n+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,s,!0),r.slice(0,n)}function S6e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return k6e(e,t,r,e[0]);case 5:return _6e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Zo(e){var t=za(e);return Lw(t[1][0].data)}function gV(e,t){var r=za(t.data),a=Os(r[1][0].data),n=r[3],s=[];return(n||[]).forEach(function(o){var l=za(o.data),c=Os(l[1][0].data)>>>0;switch(a){case 1:s[c]=rF(l[3][0].data);break;case 8:{var u=e[Zo(l[9][0].data)][0],d=za(u.data),f=e[Zo(d[1][0].data)][0],h=Os(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=za(f.data);s[c]=m[3].map(function(g){return rF(g.data)}).join("")}break}}),s}function B6e(e,t){var r,a,n,s,o,l,c,u,d,f,h,m,g,x,v=za(e),y=Os(v[1][0].data)>>>0,w=Os(v[2][0].data)>>>0,j=((a=(r=v[8])==null?void 0:r[0])==null?void 0:a.data)&&Os(v[8][0].data)>0||!1,O,B;if((s=(n=v[7])==null?void 0:n[0])!=null&&s.data&&t!=0)O=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,B=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)O=(m=(h=v[4])==null?void 0:h[0])==null?void 0:m.data,B=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var T=j?4:1,C=Qg(O),_=[],S=0;S<O.length/2;++S){var L=C.getUint16(S*2,!0);L<65535&&_.push([S,L])}if(_.length!=w)throw"Expected ".concat(w," cells, found ").concat(_.length);var P=[];for(S=0;S<_.length-1;++S)P[_[S][0]]=B.subarray(_[S][1]*T,_[S+1][1]*T);return _.length>=1&&(P[_[_.length-1][0]]=B.subarray(_[_.length-1][1]*T)),{R:y,cells:P}}function T6e(e,t){var r,a=za(t.data),n=(r=a==null?void 0:a[7])!=null&&r[0]?Os(a[7][0].data)>>>0>0?1:0:-1,s=w8(a[5],function(o){return B6e(o,n)});return{nrows:Os(a[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function I6e(e,t,r){var a,n=za(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Os(n[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(s.e.c=(Os(n[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=Jr(s);var o=za(n[4][0].data),l=gV(e,e[Zo(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?gV(e,e[Zo(o[17][0].data)][0]):[],u=za(o[3][0].data),d=0;u[1].forEach(function(f){var h=za(f.data),m=e[Zo(h[2][0].data)][0],g=Os(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=T6e(e,m);x.data.forEach(function(v,y){v.forEach(function(w,j){var O=Ur({r:d+y,c:j}),B=S6e(w,l,c);B&&(r[O]=B)})}),d+=x.nrows})}function O6e(e,t){var r=za(t.data),a={"!ref":"A1"},n=e[Zo(r[2][0].data)],s=Os(n[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return I6e(e,n[0],a),a}function F6e(e,t){var r,a=za(t.data),n={name:(r=a[1])!=null&&r[0]?rF(a[1][0].data):"",sheets:[]},s=w8(a[2],Zo);return s.forEach(function(o){e[o].forEach(function(l){var c=Os(l.meta[1][0].data);c==6e3&&n.sheets.push(O6e(e,l))})}),n}function D6e(e,t){var r=k8(),a=za(t.data),n=w8(a[1],Zo);if(n.forEach(function(s){e[s].forEach(function(o){var l=Os(o.meta[1][0].data);if(l==2){var c=F6e(e,o);c.sheets.forEach(function(u,d){_8(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function GB(e){var t,r,a,n,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Hu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Qu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((n=(a=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:n[0].data)&&Os(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=Os(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return D6e(s,l)}function P6e(e,t,r){var a,n,s,o;if(!((a=e[6])!=null&&a[0])||!((n=e[7])!=null&&n[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=e[8])==null?void 0:s[0])==null?void 0:o.data)&&Os(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Qg(e[7][0].data),d=0,f=[],h=Qg(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=VB({t:"s",v:t[x]},r),y=$B({t:"s",v:t[x]},r);break;case"number":v=VB({t:"n",v:t[x]},r),y=$B({t:"n",v:t[x]},r);break;case"boolean":v=VB({t:"b",v:t[x]},r),y=$B({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(v),d+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=An(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=Ym(f),e[3][0].data=Ym(g),c}function R6e(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=pc(r["!ref"]);a.s.r=a.s.c=0;var n=!1;a.e.c>9&&(n=!0,a.e.c=9),a.e.r>49&&(n=!0,a.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(Jr(a)));var s=uk(r,{range:a,header:1}),o=["~Sh33tJ5~"];s.forEach(function(F){return F.forEach(function(W){typeof W=="string"&&o.push(W)})});var l={},c=[],u=Cr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(F,W){return[F,u.FullPaths[W]]}).forEach(function(F){var W=F[0],X=F[1];if(W.type==2&&W.name.match(/\.iwa/)){var ne=W.content,le=Hu(ne),ie=Qu(le);ie.forEach(function(ae){c.push(ae.id),l[ae.id]={deps:[],location:X,type:Os(ae.messages[0].meta[1][0].data)}})}}),c.sort(function(F,W){return F-W});var d=c.filter(function(F){return F>1}).map(function(F){return[F,An(F)]});u.FileIndex.map(function(F,W){return[F,u.FullPaths[W]]}).forEach(function(F){var W=F[0];if(F[1],!!W.name.match(/\.iwa/)){var X=Qu(Hu(W.content));X.forEach(function(ne){ne.messages.forEach(function(le){d.forEach(function(ie){ne.messages.some(function(ae){return Os(ae.meta[1][0].data)!=11006&&N6e(ae.data,ie[1])})&&l[ie[0]].deps.push(ne.id)})})})}});for(var f=Cr.find(u,l[1].location),h=Qu(Hu(f.content)),m,g=0;g<h.length;++g){var x=h[g];x.id==1&&(m=x)}var v=Zo(za(m.messages[0].data)[1][0].data);for(f=Cr.find(u,l[v].location),h=Qu(Hu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Zo(za(m.messages[0].data)[2][0].data),f=Cr.find(u,l[v].location),h=Qu(Hu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Zo(za(m.messages[0].data)[2][0].data),f=Cr.find(u,l[v].location),h=Qu(Hu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);var y=za(m.messages[0].data);{y[6][0].data=An(a.e.r+1),y[7][0].data=An(a.e.c+1);var w=Zo(y[46][0].data),j=Cr.find(u,l[w].location),O=Qu(Hu(j.content));{for(var B=0;B<O.length&&O[B].id!=w;++B);if(O[B].id!=w)throw"Bad ColumnRowUIDMapArchive";var T=za(O[B].messages[0].data);T[1]=[],T[2]=[],T[3]=[];for(var C=0;C<=a.e.c;++C){var _=[];_[1]=_[2]=[{type:0,data:An(C+420690)}],T[1].push({type:2,data:xo(_)}),T[2].push({type:0,data:An(C)}),T[3].push({type:0,data:An(C)})}T[4]=[],T[5]=[],T[6]=[];for(var S=0;S<=a.e.r;++S)_=[],_[1]=_[2]=[{type:0,data:An(S+726270)}],T[4].push({type:2,data:xo(_)}),T[5].push({type:0,data:An(S)}),T[6].push({type:0,data:An(S)});O[B].messages[0].data=xo(T)}j.content=Wx(Kx(O)),j.size=j.content.length,delete y[46];var L=za(y[4][0].data);{L[7][0].data=An(a.e.r+1);var P=za(L[1][0].data),k=Zo(P[2][0].data);j=Cr.find(u,l[k].location),O=Qu(Hu(j.content));{if(O[0].id!=k)throw"Bad HeaderStorageBucket";var M=za(O[0].messages[0].data);for(S=0;S<s.length;++S){var U=za(M[2][0].data);U[1][0].data=An(S),U[4][0].data=An(s[S].length),M[2][S]={type:M[2][0].type,data:xo(U)}}O[0].messages[0].data=xo(M)}j.content=Wx(Kx(O)),j.size=j.content.length;var z=Zo(L[2][0].data);j=Cr.find(u,l[z].location),O=Qu(Hu(j.content));{if(O[0].id!=z)throw"Bad HeaderStorageBucket";for(M=za(O[0].messages[0].data),C=0;C<=a.e.c;++C)U=za(M[2][0].data),U[1][0].data=An(C),U[4][0].data=An(a.e.r+1),M[2][C]={type:M[2][0].type,data:xo(U)};O[0].messages[0].data=xo(M)}j.content=Wx(Kx(O)),j.size=j.content.length;var Q=Zo(L[4][0].data);(function(){for(var F=Cr.find(u,l[Q].location),W=Qu(Hu(F.content)),X,ne=0;ne<W.length;++ne){var le=W[ne];le.id==Q&&(X=le)}var ie=za(X.messages[0].data);{ie[3]=[];var ae=[];o.forEach(function(re,Re){ae[1]=[{type:0,data:An(Re)}],ae[2]=[{type:0,data:An(1)}],ae[3]=[{type:2,data:w6e(re)}],ie[3].push({type:2,data:xo(ae)})})}X.messages[0].data=xo(ie);var Ae=Kx(W),ke=Wx(Ae);F.content=ke,F.size=F.content.length})();var q=za(L[3][0].data);{var V=q[1][0];delete q[2];var Y=za(V.data);{var K=Zo(Y[2][0].data);(function(){for(var F=Cr.find(u,l[K].location),W=Qu(Hu(F.content)),X,ne=0;ne<W.length;++ne){var le=W[ne];le.id==K&&(X=le)}var ie=za(X.messages[0].data);{delete ie[6],delete q[7];var ae=new Uint8Array(ie[5][0].data);ie[5]=[];for(var Ae=0,ke=0;ke<=a.e.r;++ke){var re=za(ae);Ae+=P6e(re,s[ke],o),re[1][0].data=An(ke),ie[5].push({data:xo(re),type:2})}ie[1]=[{type:0,data:An(a.e.c+1)}],ie[2]=[{type:0,data:An(a.e.r+1)}],ie[3]=[{type:0,data:An(Ae)}],ie[4]=[{type:0,data:An(a.e.r+1)}]}X.messages[0].data=xo(ie);var Re=Kx(W),Le=Wx(Re);F.content=Le,F.size=F.content.length})()}V.data=xo(Y)}L[3][0].data=xo(q)}y[4][0].data=xo(L)}m.messages[0].data=xo(y);var J=Kx(h),R=Wx(J);return f.content=R,f.size=f.content.length,u}function lne(e){return function(r){for(var a=0;a!=e.length;++a){var n=e[a];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function N8(e){lne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function E8(e){lne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function L6e(e){return ga.WS.indexOf(e)>-1?"sheet":e==ga.CS?"chart":e==ga.DS?"dialog":e==ga.MS?"macro":e&&e.length?e:"sheet"}function M6e(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,L6e(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function U6e(e,t,r,a,n,s,o,l,c,u,d,f){try{s[a]=$2(Yc(e,r,!0),t);var h=mi(e,t),m;switch(l){case"sheet":m=lIe(h,t,n,c,s[a],u,d,f);break;case"chart":if(m=cIe(h,t,n,c,s[a],u,d,f),!m||!m["!drawel"])break;var g=m2(m["!drawel"].Target,t),x=Iw(g),v=WSe(Yc(e,g,!0),$2(Yc(e,x,!0),g)),y=m2(v,g),w=Iw(y);m=PTe(Yc(e,y,!0),y,c,$2(Yc(e,w,!0),y),u,m);break;case"macro":m=uIe(h,t,n,c,s[a],u,d,f);break;case"dialog":m=dIe(h,t,n,c,s[a],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=m;var j=[];s&&s[a]&&Ds(s[a]).forEach(function(O){var B="";if(s[a][O].Type==ga.CMNT){B=m2(s[a][O].Target,t);var T=mIe(mi(e,B,!0),B,c);if(!T||!T.length)return;rV(m,T,!1)}s[a][O].Type==ga.TCMNT&&(B=m2(s[a][O].Target,t),j=j.concat(YSe(mi(e,B,!0),c)))}),j&&j.length&&rV(m,j,!0,c.people||[])}catch(O){if(c.WTF)throw O}}function Du(e){return e.charAt(0)=="/"?e.slice(1):e}function Q6e(e,t){if(g1(),t=t||{},N8(t),Vu(e,"META-INF/manifest.xml")||Vu(e,"objectdata.xml"))return AV(e,t);if(Vu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof GB<"u"){if(e.FileIndex)return GB(e);var r=Cr.utils.cfb_new();return Nz(e).forEach(function(U){na(r,U,JCe(e,U))}),GB(r)}throw new Error("Unsupported NUMBERS file")}if(!Vu(e,"[Content_Types].xml"))throw Vu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Vu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=Nz(e),n=$5e(Yc(e,"[Content_Types].xml")),s=!1,o,l;if(n.workbooks.length===0&&(l="xl/workbook.xml",mi(e,l,!0)&&n.workbooks.push(l)),n.workbooks.length===0){if(l="xl/workbook.bin",!mi(e,l,!0))throw new Error("Could not find workbook");n.workbooks.push(l),s=!0}n.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(G2=[],n.sst)try{G2=hIe(mi(e,Du(n.sst)),n.sst,t)}catch(U){if(t.WTF)throw U}t.cellStyles&&n.themes.length&&(c=AIe(Yc(e,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],t)),n.style&&(u=fIe(mi(e,Du(n.style)),n.style,c,t))}n.links.map(function(U){try{var z=$2(Yc(e,Iw(Du(U))),U);return gIe(mi(e,Du(U)),z,U,t)}catch{}});var d=oIe(mi(e,Du(n.workbooks[0])),n.workbooks[0],t),f={},h="";n.coreprops.length&&(h=mi(e,Du(n.coreprops[0]),!0),h&&(f=Xre(h)),n.extprops.length!==0&&(h=mi(e,Du(n.extprops[0]),!0),h&&J5e(h,f,t)));var m={};(!t.bookSheets||t.bookProps)&&n.custprops.length!==0&&(h=Yc(e,Du(n.custprops[0]),!0),h&&(m=eje(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(z){return z.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=m),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var x={};t.bookDeps&&n.calcchain&&(x=pIe(mi(e,Du(n.calcchain)),n.calcchain));var v=0,y={},w,j;{var O=d.Sheets;f.Worksheets=O.length,f.SheetNames=[];for(var B=0;B!=O.length;++B)f.SheetNames[B]=O[B].name}var T=s?"bin":"xml",C=n.workbooks[0].lastIndexOf("/"),_=(n.workbooks[0].slice(0,C+1)+"_rels/"+n.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");Vu(e,_)||(_="xl/_rels/workbook."+T+".rels");var S=$2(Yc(e,_,!0),_.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(t.xlmeta=xIe(mi(e,Du(n.metadata[0])),n.metadata[0],t)),(n.people||[]).length>=1&&(t.people=ZSe(mi(e,Du(n.people[0])),t)),S&&(S=M6e(S,d.Sheets));var L=mi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var P="sheet";if(S&&S[v]?(w="xl/"+S[v][1].replace(/[\/]?xl\//,""),Vu(e,w)||(w=S[v][1]),Vu(e,w)||(w=_.replace(/_rels\/.*$/,"")+S[v][1]),P=S[v][2]):(w="xl/worksheets/sheet"+(v+1-L)+"."+T,w=w.replace(/sheet0\./,"sheet.")),j=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var k=!1,M=0;M!=t.sheets.length;++M)typeof t.sheets[M]=="number"&&t.sheets[M]==v&&(k=1),typeof t.sheets[M]=="string"&&t.sheets[M].toLowerCase()==f.SheetNames[v].toLowerCase()&&(k=1);if(!k)continue e}}U6e(e,w,j,f.SheetNames[v],v,y,o,P,t,d,c,u)}return g={Directory:n,Workbook:d,Props:f,Custprops:m,Deps:x,Sheets:o,SheetNames:f.SheetNames,Strings:G2,Styles:u,Themes:c,SSF:qn(Dr)},t&&t.bookFiles&&(e.files?(g.keys=a,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(U,z){U=U.replace(/^Root Entry[\/]/,""),g.keys.push(U),g.files[U]=e.FileIndex[z]}))),t&&t.bookVBA&&(n.vba.length>0?g.vbaraw=mi(e,Du(n.vba[0]),!0):n.defaults&&n.defaults.bin===o4e&&(g.vbaraw=mi(e,"xl/vbaProject.bin",!0))),g}function H6e(e,t){var r=t||{},a="Workbook",n=Cr.find(e,a);try{if(a="/!DataSpaces/Version",n=Cr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(x_e(n.content),a="/!DataSpaces/DataSpaceMap",n=Cr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var s=b_e(n.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=Cr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=y_e(n.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=Cr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);N_e(n.content)}catch{}if(a="/EncryptionInfo",n=Cr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=E_e(n.content);if(a="/EncryptedPackage",n=Cr.find(e,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],n.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function z6e(e,t){return t.bookType=="ods"?one(e,t):t.bookType=="numbers"?R6e(e,t):t.bookType=="xlsb"?V6e(e,t):$6e(e,t)}function V6e(e,t){Iv=1024,e&&!e.SSF&&(e.SSF=qn(Dr)),e&&e.SSF&&(g1(),bS(e.SSF),t.revssf=wS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,q2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=Dae.indexOf(t.bookType)>-1,n=c8();E8(t=t||{});var s=WR(),o="",l=0;if(t.cellXfs=[],cp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",na(s,o,Yre(e.Props,t)),n.coreprops.push(o),hn(t.rels,2,o,ga.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,na(s,o,eae(e.Props)),n.extprops.push(o),hn(t.rels,3,o,ga.EXT_PROPS),e.Custprops!==e.Props&&Ds(e.Custprops||{}).length>0&&(o="docProps/custom.xml",na(s,o,tae(e.Custprops)),n.custprops.push(o),hn(t.rels,4,o,ga.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,na(s,o,bIe(l-1,o,t,e,d)),n.sheets.push(o),hn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,ga.WS[0])}if(f){var m=f["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+r,na(s,x,NIe(m,x)),n.comments.push(x),hn(d,-1,"../comments"+l+"."+r,ga.CMNT),g=!0),f["!legacy"]&&g&&na(s,"xl/drawings/vmlDrawing"+l+".vml",Oae(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&na(s,Iw(o),Jv(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,na(s,o,wIe(t.Strings,o,t)),n.strs.push(o),hn(t.wbrels,-1,"sharedStrings."+r,ga.SST)),o="xl/workbook."+r,na(s,o,vIe(e,o)),n.workbooks.push(o),hn(t.rels,1,o,ga.WB),o="xl/theme/theme1.xml",na(s,o,m8(e.Themes,t)),n.themes.push(o),hn(t.wbrels,-1,"theme/theme1.xml",ga.THEME),o="xl/styles."+r,na(s,o,yIe(e,o,t)),n.styles.push(o),hn(t.wbrels,-1,"styles."+r,ga.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",na(s,o,e.vbaraw),n.vba.push(o),hn(t.wbrels,-1,"vbaProject.bin",ga.VBA)),o="xl/metadata."+r,na(s,o,EIe(o)),n.metadata.push(o),hn(t.wbrels,-1,"metadata."+r,ga.XLMETA),na(s,"[Content_Types].xml",Kre(n,t)),na(s,"_rels/.rels",Jv(t.rels)),na(s,"xl/_rels/workbook."+r+".rels",Jv(t.wbrels)),delete t.revssf,delete t.ssf,s}function $6e(e,t){Iv=1024,e&&!e.SSF&&(e.SSF=qn(Dr)),e&&e.SSF&&(g1(),bS(e.SSF),t.revssf=wS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,q2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=Dae.indexOf(t.bookType)>-1,n=c8();E8(t=t||{});var s=WR(),o="",l=0;if(t.cellXfs=[],cp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",na(s,o,Yre(e.Props,t)),n.coreprops.push(o),hn(t.rels,2,o,ga.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,na(s,o,eae(e.Props)),n.extprops.push(o),hn(t.rels,3,o,ga.EXT_PROPS),e.Custprops!==e.Props&&Ds(e.Custprops||{}).length>0&&(o="docProps/custom.xml",na(s,o,tae(e.Custprops)),n.custprops.push(o),hn(t.rels,4,o,ga.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,na(s,o,Gae(l-1,t,e,f)),n.sheets.push(o),hn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,ga.WS[0])}if(h){var g=h["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(j){j.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+l+"."+r,na(s,v,JSe(g,d,t)),n.threadedcomments.push(v),hn(f,-1,"../threadedComments/threadedComment"+l+"."+r,ga.TCMNT)),v="xl/comments"+l+"."+r,na(s,v,Fae(g)),n.comments.push(v),hn(f,-1,"../comments"+l+"."+r,ga.CMNT),x=!0}h["!legacy"]&&x&&na(s,"xl/drawings/vmlDrawing"+l+".vml",Oae(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&na(s,Iw(o),Jv(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,na(s,o,yae(t.Strings,t)),n.strs.push(o),hn(t.wbrels,-1,"sharedStrings."+r,ga.SST)),o="xl/workbook."+r,na(s,o,Yae(e)),n.workbooks.push(o),hn(t.rels,1,o,ga.WB),o="xl/theme/theme1.xml",na(s,o,m8(e.Themes,t)),n.themes.push(o),hn(t.wbrels,-1,"theme/theme1.xml",ga.THEME),o="xl/styles."+r,na(s,o,Sae(e,t)),n.styles.push(o),hn(t.wbrels,-1,"styles."+r,ga.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",na(s,o,e.vbaraw),n.vba.push(o),hn(t.wbrels,-1,"vbaProject.bin",ga.VBA)),o="xl/metadata."+r,na(s,o,Iae()),n.metadata.push(o),hn(t.wbrels,-1,"metadata."+r,ga.XLMETA),d.length>1&&(o="xl/persons/person.xml",na(s,o,e4e(d)),n.people.push(o),hn(t.wbrels,-1,"persons/person.xml",ga.PEOPLE)),na(s,"[Content_Types].xml",Kre(n,t)),na(s,"_rels/.rels",Jv(t.rels)),na(s,"xl/_rels/workbook."+r+".rels",Jv(t.wbrels)),delete t.revssf,delete t.ssf,s}function C8(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=su(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function G6e(e,t){return Cr.find(e,"EncryptedPackage")?H6e(e,t):tne(e,t)}function q6e(e,t){var r,a=e,n=t||{};return n.type||(n.type=da&&Buffer.isBuffer(e)?"buffer":"base64"),r=Nre(a,n),Q6e(r,n)}function cne(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return eF(e.slice(r),t);default:break e}return _b.to_workbook(e,t)}function K6e(e,t){var r="",a=C8(e,t);switch(t.type){case"base64":r=su(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Rg(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=jn(r)),t.type="binary",cne(r,t)}function W6e(e,t){var r=e;return t.type=="base64"&&(r=su(r)),r=jw.utils.decode(1200,r.slice(2),"str"),t.type="binary",cne(r,t)}function X6e(e){return e.match(/[^\x00-\x7F]/)?sA(e):e}function qB(e,t,r,a){return a?(r.type="string",_b.to_workbook(e,r)):_b.to_workbook(t,r)}function Bb(e,t){VR();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Bb(new Uint8Array(e),(r=qn(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,n=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),eb={},r.dateNF&&(eb.dateNF=r.dateNF),r.type||(r.type=da&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=da?"buffer":"binary",a=VCe(e),typeof Uint8Array<"u"&&!da&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,a=X6e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=qn(r),r.type="array",Bb($R(a),r)}switch((n=C8(a,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return G6e(Cr.read(a,r),r);break;case 9:if(n[1]<=8)return tne(a,r);break;case 60:return eF(a,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return t_e(a,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return vae.to_workbook(a,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?q6e(a,r):qB(e,a,r,s);case 239:return n[3]===60?eF(a,r):qB(e,a,r,s);case 255:if(n[1]===254)return W6e(a,r);if(n[1]===0&&n[2]===2&&n[3]===0)return gg.to_workbook(a,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return gg.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return ZO.to_workbook(a,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return jae.to_workbook(a,r);break;case 10:case 13:case 32:return K6e(a,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return e_e.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?ZO.to_workbook(a,r):qB(e,a,r,s)}function une(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return CN(t.file,Cr.write(e,{type:da?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Cr.write(e,t)}function Y6e(e,t){var r=qn(t||{}),a=z6e(e,r);return J6e(a,r)}function J6e(e,t){var r={},a=da?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var n=e.FullPaths?Cr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof n=="string"){if(t.type=="binary"||t.type=="base64")return n;n=new Uint8Array(vS(n))}return t.password&&typeof encrypt_agile<"u"?une(encrypt_agile(n,t.password),t):t.type==="file"?CN(t.file,n):t.type=="string"?jn(n):n}function Z6e(e,t){var r=t||{},a=XIe(e,r);return une(a,r)}function qf(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return kw(sA(a));case"binary":return sA(a);case"string":return e;case"file":return CN(t.file,a,"utf8");case"buffer":return da?n0(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):qf(a,{type:"binary"}).split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function eOe(e,t){switch(t.type){case"base64":return kw(e);case"binary":return e;case"string":return e;case"file":return CN(t.file,e,"binary");case"buffer":return da?n0(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function BC(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?kw(r):t.type=="string"?jn(r):r;case"file":return CN(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function dne(e,t){VR(),GTe(e);var r=qn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=dne(e,r);return r.type="array",vS(a)}var n=0;if(r.sheet&&(typeof r.sheet=="number"?n=r.sheet:n=e.SheetNames.indexOf(r.sheet),!e.SheetNames[n]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return qf(zIe(e,r),r);case"slk":case"sylk":return qf(xae.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"htm":case"html":return qf(ane(e.Sheets[e.SheetNames[n]],r),r);case"txt":return eOe(fne(e.Sheets[e.SheetNames[n]],r),r);case"csv":return qf(j8(e.Sheets[e.SheetNames[n]],r),r,"\uFEFF");case"dif":return qf(vae.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"dbf":return BC(ZO.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"prn":return qf(_b.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"rtf":return qf(jae.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"eth":return qf(bae.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"fods":return qf(one(e,r),r);case"wk1":return BC(gg.sheet_to_wk1(e.Sheets[e.SheetNames[n]],r),r);case"wk3":return BC(gg.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),BC(rne(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Z6e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Y6e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function tOe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function b1(e,t,r){var a={};return a.type="file",a.file=t,tOe(a),dne(e,a)}function rOe(e,t,r,a,n,s,o,l){var c=ti(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=o?e[r][m]:e[a[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[m]!=null&&(h[s[m]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[m]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[m]]=null;else if(u!==void 0)h[s[m]]=u;else if(d&&x===null)h[s[m]]=null;else continue;else h[s[m]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:Hh(g,x,l);x!=null&&(f=!1)}}return{row:h,isempty:f}}function uk(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,n=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)?a=3:u.header==null&&(a=0),typeof d){case"string":c=Da(d);break;case"number":c=Da(e["!ref"]),c.s.r=d;break;default:c=d}a>0&&(n=0);var f=ti(c.s.r),h=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,w=0,j={};v&&!e[y]&&(e[y]=[]);var O=u.skipHidden&&e["!cols"]||[],B=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(O[w]||{}).hidden)switch(h[w]=us(w),r=v?e[y][w]:e[h[w]+f],a){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Hh(r,null,u),x=j[o]||0,!x)j[o]=1;else{do l=o+"_"+x++;while(j[l]);j[o]=x,j[l]=1}s[w]=l}for(y=c.s.r+n;y<=c.e.r;++y)if(!(B[y]||{}).hidden){var T=rOe(e,c,y,h,a,s,v,u);(T.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=T.row)}return m.length=g,m}var xV=/"/g;function aOe(e,t,r,a,n,s,o,l){for(var c=!0,u=[],d="",f=ti(r),h=t.s.c;h<=t.e.c;++h)if(a[h]){var m=l.dense?(e[r]||[])[h]:e[a[h]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:Hh(m,null,l));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===n||x===s||x===34||l.forceQuotes){d='"'+d.replace(xV,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(xV,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function j8(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var n=Da(e["!ref"]),s=a.FS!==void 0?a.FS:",",o=s.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var h=a.skipHidden&&e["!cols"]||[],m=a.skipHidden&&e["!rows"]||[],g=n.s.c;g<=n.e.c;++g)(h[g]||{}).hidden||(f[g]=us(g));for(var x=0,v=n.s.r;v<=n.e.r;++v)(m[v]||{}).hidden||(d=aOe(e,n,v,f,o,c,s,a),d!=null&&(a.strip&&(d=d.replace(u,"")),(d||a.blankrows!==!1)&&r.push((x++?l:"")+d)));return delete a.dense,r.join("")}function fne(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=j8(e,t);return r}function nOe(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var n=Da(e["!ref"]),s="",o=[],l,c=[],u=Array.isArray(e);for(l=n.s.c;l<=n.e.c;++l)o[l]=us(l);for(var d=n.s.r;d<=n.e.r;++d)for(s=ti(d),l=n.s.c;l<=n.e.c;++l)if(t=o[l]+s,r=u?(e[d]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function Ane(e,t,r){var a=r||{},n=+!a.skipHeader,s=e||{},o=0,l=0;if(s&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?ds(a.origin):a.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+n}};if(s["!ref"]){var f=Da(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+n)}else o==-1&&(o=0,d.e.r=t.length-1+n);var h=a.header||[],m=0;t.forEach(function(x,v){Ds(x).forEach(function(y){(m=h.indexOf(y))==-1&&(h[m=h.length]=y);var w=x[y],j="z",O="",B=Ur({c:l+m,r:o+v+n});u=Mw(s,B),w&&typeof w=="object"&&!(w instanceof Date)?s[B]=w:(typeof w=="number"?j="n":typeof w=="boolean"?j="b":typeof w=="string"?j="s":w instanceof Date?(j="d",a.cellDates||(j="n",w=Di(w)),O=a.dateNF||Dr[14]):w===null&&a.nullError&&(j="e",w=0),u?(u.t=j,u.v=w,delete u.w,delete u.R,O&&(u.z=O)):s[B]=u={t:j,v:w},O&&(u.z=O))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=ti(o);if(n)for(m=0;m<h.length;++m)s[us(m+l)+g]={t:"s",v:h[m]};return s["!ref"]=Jr(d),s}function sOe(e,t){return Ane(null,e,t)}function Mw(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=ds(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Mw(e,Ur(t)):Mw(e,Ur({r:t,c:r||0}))}function iOe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function k8(){return{SheetNames:[],Sheets:{}}}function _8(e,t,r,a){var n=1;if(!r)for(;n<=65535&&e.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);n=s&&+s[2]||0;var o=s&&s[1]||r;for(++n;n<=65535&&e.SheetNames.indexOf(r=o+n)!=-1;++n);}if(Xae(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function oOe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=iOe(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function lOe(e,t){return e.z=t,e}function hne(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function cOe(e,t,r){return hne(e,"#"+t,r)}function uOe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function dOe(e,t,r,a){for(var n=typeof t!="string"?t:Da(t),s=typeof t=="string"?t:Jr(t),o=n.s.r;o<=n.e.r;++o)for(var l=n.s.c;l<=n.e.c;++l){var c=Mw(e,o,l);c.t="n",c.F=s,delete c.v,o==n.s.r&&l==n.s.c&&(c.f=r,a&&(c.D=!0))}return e}var Ts={encode_col:us,encode_row:ti,encode_cell:Ur,encode_range:Jr,decode_col:a8,decode_row:r8,split_cell:w5e,decode_cell:ds,decode_range:pc,format_cell:Hh,sheet_add_aoa:Qre,sheet_add_json:Ane,sheet_add_dom:nne,aoa_to_sheet:x1,json_to_sheet:sOe,table_to_sheet:sne,table_to_book:x6e,sheet_to_csv:j8,sheet_to_txt:fne,sheet_to_json:uk,sheet_to_html:ane,sheet_to_formulae:nOe,sheet_to_row_object_array:uk,sheet_get_cell:Mw,book_new:k8,book_append_sheet:_8,book_set_sheet_visibility:oOe,cell_set_number_format:lOe,cell_set_hyperlink:hne,cell_set_internal_link:cOe,cell_add_comment:uOe,sheet_set_array_formula:dOe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function fOe({data:e,fileName:t,sheetName:r="Sheet 1"}){try{const a=Ts.book_new(),n=Ts.json_to_sheet(e);Ts.book_append_sheet(a,n,r),b1(a,`${t}.xlsx`)}catch(a){console.error("Error exporting to Excel:",a),alert("Hubo un error al generar el archivo de Excel. Por favor, intente de nuevo.")}}const AOe=Array.from({length:Ws.length},(e,t)=>t+1),vV={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},hOe=e=>{const[t,r]=N.useState([]),[a,n]=N.useState(!0),[s,o]=N.useState(null);N.useEffect(()=>e?cCe(e,f=>{r(f),n(!1)}):void 0,[e]);const l=N.useCallback(async d=>{try{return o(null),await oCe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=N.useCallback(async d=>{try{o(null),await lCe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=N.useCallback(async d=>{try{return o(null),d.trim()?await dCe(e,d):t}catch(f){return o(f instanceof Error?f.message:"Error en la bsqueda"),[]}},[e,t]);return{reemplazos:t,loading:a,error:s,save:l,remove:c,search:u}},mOe=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(!0);N.useEffect(()=>uCe(o=>{t(o),a(!1)}),[]);const n=N.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:n,loading:r}},Xx=({label:e,icon:t,children:r})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),i.jsxs("div",{className:"relative",children:[t&&i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),pOe="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",gOe="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",xOe="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",K0=({title:e,value:t,icon:r})=>i.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),i.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),vOe=({data:e,title:t,period:r})=>{const a=Math.max(1,...e.map(s=>s.value)),n=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[i.jsx(_l,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:t||`Reemplazos / Inasistencias por curso (${r==="month"?"mes":"total"})`})]}),e.length===0?i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["No hay registros ",r==="month"?"este mes":"en el perodo seleccionado","."]}):i.jsx("div",{className:"grid gap-3",children:e.map((s,o)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:s.label}),i.jsx("span",{children:s.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${n[o%n.length]}`,style:{width:`${s.value/a*100}%`}})})]},s.label))})]})},KB=({title:e,data:t,icon:r})=>{const a=Math.max(1,...t.map(s=>s.value)),n=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[r,i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:e})]}),t.length===0?i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros para mostrar."}):i.jsx("div",{className:"grid gap-3",children:t.slice(0,5).map((s,o)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:s.label}),i.jsx("span",{children:s.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${n[o%n.length]}`,style:{width:`${s.value/a*100}%`}})})]},s.label))})]})},bOe=({reemplazos:e,period:t})=>{const r=N.useMemo(()=>{if(t==="month"){const n=new Date,s=n.getMonth(),o=n.getFullYear();return(e||[]).filter(l=>{if(!l.diaAusencia)return!1;const c=new Date(l.diaAusencia+"T00:00:00");return c.getMonth()===s&&c.getFullYear()===o})}return e},[e,t]),a=N.useMemo(()=>{const n=r.length,s=r.filter(u=>u.resultado==="Hora realizada").length,o=n-s,l=n>0?s/n*100:0,c=u=>Object.entries(r.reduce((d,f)=>{const h=f[u];return h&&(d[h]=(d[h]||0)+1),d},{})).map(([d,f])=>({label:d,value:f})).sort((d,f)=>f.value-d.value);return{totalReemplazos:n,horasRealizadas:s,horasCubiertas:o,porcentajeRealizadas:l,setAusentes:new Set(r.map(u=>u.docenteAusente).filter(Boolean)),setReemplazan:new Set(r.map(u=>u.docenteReemplazante).filter(Boolean)),setCursos:new Set(r.map(u=>u.curso).filter(Boolean)),setAsigAusentes:new Set(r.map(u=>u.asignaturaAusente).filter(Boolean)),ausenciasPorProfesor:c("docenteAusente"),reemplazosPorProfesor:c("docenteReemplazante"),ausenciasPorAsignatura:c("asignaturaAusente")}},[r]);return a?i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(K0,{title:"Total Reemplazos",value:a.totalReemplazos,icon:i.jsx(Ewe,{className:"h-6 w-6"})}),i.jsx(K0,{title:"Horas Realizadas",value:a.horasRealizadas,icon:i.jsx(nn,{className:"h-6 w-6"})}),i.jsx(K0,{title:"Horas Cubiertas",value:a.horasCubiertas,icon:i.jsx(d2,{className:"h-6 w-6"})}),i.jsx(K0,{title:"Efectividad",value:`${a.porcentajeRealizadas.toFixed(1)}%`,icon:i.jsx(uEe,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(K0,{title:"Profesores ausentes (nicos)",value:a.setAusentes.size,icon:i.jsx(iz,{className:"h-6 w-6"})}),i.jsx(K0,{title:"Reemplazantes (nicos)",value:a.setReemplazan.size,icon:i.jsx(Yj,{className:"h-6 w-6"})}),i.jsx(K0,{title:"Cursos (nicos)",value:a.setCursos.size,icon:i.jsx(Fi,{className:"h-6 w-6"})}),i.jsx(K0,{title:"Asignaturas ausentes (nicas)",value:a.setAsigAusentes.size,icon:i.jsx(wi,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsx(KB,{title:`Profesores con ms ausencias (${t==="month"?"mes":"total"})`,data:a.ausenciasPorProfesor,icon:i.jsx(iz,{className:"h-5 w-5 text-slate-400"})}),i.jsx(KB,{title:`Profesores que ms reemplazan (${t==="month"?"mes":"total"})`,data:a.reemplazosPorProfesor,icon:i.jsx(Yj,{className:"h-5 w-5 text-slate-400"})})]}),i.jsx("div",{className:"grid gap-4",children:i.jsx(KB,{title:`Asignaturas con ms ausencias (${t==="month"?"mes":"total"})`,data:a.ausenciasPorAsignatura,icon:i.jsx(wi,{className:"h-5 w-5 text-slate-400"})})})]}):i.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[i.jsx(Co,{className:"h-5 w-5 animate-spin"}),"Calculando estadsticas"]})})},yOe=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:a,remove:n,search:s,loading:o,error:l}=hOe(t),{profesorNames:c,loading:u}=mOe(),[d,f]=N.useState(vV),[h,m]=N.useState(""),[g,x]=N.useState([]),[v,y]=N.useState(null),[w,j]=N.useState(!1),[O,B]=N.useState(!1),[T,C]=N.useState("month"),[_,S]=N.useState(null);N.useEffect(()=>{(async()=>{if(!h.trim()){x(r);return}B(!0);try{const Y=await s(h);x(Y)}finally{B(!1)}})()},[r,h,s]);const L=N.useMemo(()=>{let V=[...g];return _!==null&&V.sort((Y,K)=>{const J=_.key,R=Y[J],F=K[J];if(R==null)return 1;if(F==null)return-1;let W=0;if(J==="bloquesAfectados"){const X=R,ne=F;X.length<ne.length?W=-1:X.length>ne.length&&(W=1)}else{const X=String(R),ne=String(F);W=X.localeCompare(ne,"es",{numeric:!0})}return _.direction==="ascending"?W:-W}),V},[g,_]),P=V=>{let Y="ascending";_&&_.key===V&&_.direction==="ascending"&&(Y="descending"),S({key:V,direction:Y})},k=N.useCallback(V=>{const{name:Y,value:K}=V.target;f(J=>({...J,[Y]:K}))},[]),M=N.useCallback(V=>{f(Y=>{const J=Y.bloquesAfectados.includes(V)?Y.bloquesAfectados.filter(R=>R!==V):[...Y.bloquesAfectados,V].sort((R,F)=>R-F);return{...Y,bloquesAfectados:J}})},[]),U=N.useCallback(async V=>{V.preventDefault(),y(null),j(!0);const{docenteAusente:Y,asignaturaAusente:K,curso:J,diaAusencia:R,bloquesAfectados:F,docenteReemplazante:W,asignaturaReemplazante:X}=d;if(!Y||!K||!J||!R||!W||!X||F.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),j(!1);return}if(Y===W){y("El docente ausente y el reemplazante no pueden ser la misma persona."),j(!1);return}try{const ne=K.trim().toLowerCase()===X.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",le={...d,resultado:ne};await a(le),f(vV);const ie=document.createElement("div");ie.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",ie.textContent=ne==="Hora realizada"?" Reemplazo registrado  Hora realizada":" Reemplazo registrado  Hora cubierta, no realizada",document.body.appendChild(ie),setTimeout(()=>{document.body.contains(ie)&&document.body.removeChild(ie)},2500)}catch(ne){console.error(ne),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{j(!1)}},[d,a]),z=N.useCallback(async V=>{if(window.confirm("Eliminar este registro?"))try{await n(V)}catch(Y){console.error(Y),alert("No se pudo eliminar. Intente nuevamente.")}},[n]),Q=N.useMemo(()=>{const V=T==="month"?r.filter(K=>{if(!K.diaAusencia)return!1;const J=new Date(K.diaAusencia+"T00:00:00"),R=new Date;return J.getMonth()===R.getMonth()&&J.getFullYear()===R.getFullYear()}):r,Y={};for(const K of V){const J=K.curso||"Sin curso";Y[J]=(Y[J]||0)+1}return Object.entries(Y).sort(([K],[J])=>K.localeCompare(J,"es")).map(([K,J])=>({label:K,value:J}))},[r,T]),q="w-full rounded-lg border bg-white pl-10 pr-4 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!(e!=null&&e.id)&&!(e!=null&&e.email)?i.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadsticas"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando datos para: ",T==="month"?"Mes Actual":"Total"]})]}),i.jsxs("div",{className:"flex items-center rounded-lg bg-slate-100 p-1 dark:bg-slate-700",children:[i.jsx("button",{onClick:()=>C("month"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${T==="month"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Mes"}),i.jsx("button",{onClick:()=>C("total"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${T==="total"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Total"})]})]}),i.jsx(bOe,{reemplazos:r,period:T})]}),i.jsx(vOe,{data:Q,title:`Reemplazos / Inasistencias por curso (${T==="month"?"mes":"total"})`,period:T}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[i.jsx(Co,{className:"h-5 w-5 animate-spin"})," Cargando profesores"]}):i.jsxs("form",{onSubmit:U,className:"space-y-8",children:[i.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fi,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),i.jsx(Xx,{label:"Nombre",icon:i.jsx(Dg,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:k,className:q,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(V=>i.jsx("option",{value:V,children:V},V))]})}),i.jsx(Xx,{label:"Asignatura",icon:i.jsx(wi,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:k,className:q,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),En.map(V=>i.jsx("option",{value:V,children:V},V))]})}),i.jsx(Xx,{label:"Curso",icon:i.jsx(Fi,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"curso",value:d.curso,onChange:k,className:q,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),Nn.map(V=>i.jsx("option",{value:V,children:V},V))]})}),i.jsx(Xx,{label:"Da de ausencia",icon:i.jsx(ul,{className:"h-5 w-5"}),children:i.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:k,className:q,required:!0,disabled:w})}),i.jsxs("div",{children:[i.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[i.jsx(Wc,{className:"h-5 w-5 text-slate-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),i.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:AOe.map(V=>{const Y=d.bloquesAfectados.includes(V);return i.jsx("button",{type:"button",onClick:()=>M(V),disabled:w,className:`${pOe} ${Y?gOe:xOe}`,"aria-pressed":Y,children:V},V)})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fi,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),i.jsx(Xx,{label:"Nombre",icon:i.jsx(Dg,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:k,className:q,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(V=>i.jsx("option",{value:V,children:V},V))]})}),i.jsx(Xx,{label:"Asignatura",icon:i.jsx(wi,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:k,className:q,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),En.map(V=>i.jsx("option",{value:V,children:V},V))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&i.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[i.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(nn,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||l)&&i.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||l}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?i.jsxs(i.Fragment,{children:[i.jsx(Co,{className:"h-4 w-4 animate-spin"})," Registrando"]}):i.jsxs(i.Fragment,{children:[i.jsx(Fl,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando ",L.length," de ",r.length," registros."]})]}),i.jsxs("div",{className:"flex w-full sm:w-auto items-center gap-2",children:[i.jsxs("div",{className:"relative w-full max-w-md",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:O?i.jsx(Co,{className:"h-5 w-5 animate-spin"}):i.jsx(h1,{className:"h-5 w-5"})}),i.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)",value:h,onChange:V=>m(V.target.value),className:q+" pl-10",disabled:O})]}),i.jsxs("button",{onClick:()=>fOe({data:L.map(V=>({Fecha:V.diaAusencia,Curso:V.curso,"Docente Ausente":V.docenteAusente,"Asignatura Ausente":V.asignaturaAusente,"Docente Reemplazante":V.docenteReemplazante,"Asignatura Reemplazante":V.asignaturaReemplazante,"Bloques Afectados":V.bloquesAfectados.join(", "),Resultado:V.resultado})),fileName:`Historial_Reemplazos_${new Date().toISOString().split("T")[0]}`,sheetName:"Reemplazos"}),disabled:L.length===0,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-50",title:"Descargar datos filtrados a Excel",children:[i.jsx(pNe,{className:"h-4 w-4"}),i.jsx("span",{children:"Excel"})]})]})]}),o?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[i.jsx(Co,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos"]}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[[{label:"Fecha",key:"diaAusencia"},{label:"Curso",key:"curso"},{label:"Docente Ausente",key:"docenteAusente"},{label:"Docente Reemplazante",key:"docenteReemplazante"},{label:"Bloques",key:"bloquesAfectados"},{label:"Resultado",key:"resultado"}].map(V=>i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:i.jsxs("button",{onClick:()=>P(V.key),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-200",children:[V.label,i.jsx(bwe,{className:"h-3 w-3"})]})},V.key)),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:L.length>0?L.map(V=>i.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(V.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:V.curso}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[V.docenteAusente,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:V.asignaturaAusente})]}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[V.docenteReemplazante,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:V.asignaturaReemplazante})]}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:V.bloquesAfectados.join(", ")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${V.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(nn,{className:"h-4 w-4"}),V.resultado]})}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsx("button",{onClick:()=>z(V.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:i.jsx(sn,{className:"h-4 w-4"})})})]},V.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu bsqueda.":"An no hay registros."})})})]}),L.length>0&&!h&&i.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los ltimos ",L.length," registros"]})]})]})]})},wOe=e=>{console.log(" Iniciando suscripcin a todos los reemplazos...");try{const t=ht(vr,"reemplazos"),r=Dt(t,Yt("fecha","desc"));return nr(r,n=>{const s=[];n.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Reemplazos cargados para dashboard:",s.length),e(s)},n=>{throw console.error(" Error al cargar reemplazos:",n),n})}catch(t){throw console.error(" Error al configurar suscripcin a reemplazos:",t),t}},NOe=e=>{console.log(" Iniciando suscripcin a todos los acompaamientos...");try{const t=ht(vr,"acompanamientos"),r=Dt(t,Yt("fecha","desc"));return nr(r,n=>{const s=[];n.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Acompaamientos cargados para dashboard:",s.length),e(s)},n=>{throw console.error(" Error al cargar acompaamientos:",n),n})}catch(t){throw console.error(" Error al configurar suscripcin a acompaamientos:",t),t}},EOe=e=>{console.log(" Iniciando suscripcin a todos los eventos del calendario...");try{const t=ht(vr,"calendar_events"),r=Dt(t,Yt("date","asc"));return nr(r,n=>{const s=[];n.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Eventos del calendario cargados para dashboard:",s.length),e(s)},n=>{throw console.error(" Error al cargar eventos del calendario:",n),n})}catch(t){throw console.error(" Error al configurar suscripcin a eventos del calendario:",t),t}},zf=({title:e,value:t,description:r,isLoading:a=!1})=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),a?i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Mp=({title:e,data:t,colorClass:r,valueFormatter:a=s=>String(s),isLoading:n=!1})=>{const s=N.useMemo(()=>t.map(l=>typeof l.value=="number"?l.value:parseFloat(String(l.value))||0),[t]),o=N.useMemo(()=>Math.max(...s,1),[s]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),n?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):i.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((l,c)=>(typeof c.value=="number"?c.value:0)-(typeof l.value=="number"?l.value:0)).map((l,c)=>{const u=typeof l.value=="number"?l.value:parseFloat(String(l.value))||0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:l.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a(l.value)})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/o*100}%`}})})]},l.label+c)}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},COe=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[n,s]=N.useState([]),[o,l]=N.useState(!0),[c,u]=N.useState(null);return N.useEffect(()=>{console.log(" Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(l(!1),console.log(" Todos los datos del dashboard cargados"))};try{const m=wOe(v=>{t(v),h()}),g=NOe(v=>{a(v),h()}),x=EOe(v=>{s(v),h()});return()=>{m(),g(),x()}}catch(m){console.error(" Error al configurar suscripciones del dashboard:",m),u(m instanceof Error?m.message:"Error al cargar datos del dashboard"),l(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:n,loading:o,error:c}},jOe=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log(" Dashboard - currentUser completo:",e),console.log(" Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log(" Dashboard - Verificacin de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log(" Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log(" Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log(" Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - Comparacin con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:a,loading:n,error:s}=COe(),[o,l]=N.useState(L2);if(console.log(" Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:a.length,loading:n,error:s,currentUser:e==null?void 0:e.profile}),N.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");l(m?JSON.parse(m):L2)}catch(m){console.error("Error al leer rbrica personalizada",m),l(L2)}},[]),console.log(" Dashboard - Verificando permisos..."),console.log(" Dashboard - currentUser existe:",!!e),console.log(" Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - comparacin exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log(" Dashboard - currentUser es null/undefined"),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log(" Dashboard - Perfil no autorizado:",e.profile),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard est disponible solo para usuarios con perfil de Subdireccin."}),i.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[i.jsx("p",{children:i.jsx("strong",{children:"Debug Info:"})}),i.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),i.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),i.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log(" Dashboard - Permisos verificados correctamente"),s)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),i.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Pgina"})]});const c=N.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(B=>B.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(B,T)=>B.reduce((C,_)=>{const S=_[T];return typeof S=="string"&&(C[S]=(C[S]||0)+1),C},{}),w=y(t,"docenteAusente"),j=y(t,"docenteReemplazante"),O=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(w).map(([B,T])=>({label:B,value:T})),reemplazosPorDocente:Object.entries(j).map(([B,T])=>({label:B,value:T})),inasistenciasPorCurso:Object.entries(O).map(([B,T])=>({label:B,value:T})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=N.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;o.forEach(T=>{T.criteria.forEach(C=>{g.set(C.name,T.domain)})});let x=0,v=0;const y={},w={};r.forEach(T=>{y[T.docente]||(y[T.docente]={total:0,count:0}),Object.entries(T.rubricaResultados).forEach(([C,_])=>{x+=_,v++,y[T.docente].total+=_,y[T.docente].count++;const S=g.get(C);S&&(w[S]||(w[S]={total:0,count:0}),w[S].total+=_,w[S].count++)})});const j=v>0?(x/v).toFixed(2):"N/A",O=Object.entries(y).map(([T,C])=>({label:T,value:C.count>0?(C.total/C.count).toFixed(2):0})),B=Object.entries(w).map(([T,C])=>({label:T,value:C.count>0?(C.total/C.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:j,desempenoPorDocente:O,desempenoPorDominio:B}},[r,o]),d=N.useMemo(()=>{const m={[sa.EVALUACION]:0,[sa.ACTO]:0,[sa.ACTIVIDAD_FOCALIZADA]:0,[sa.SALIDA_PEDAGOGICA]:0};for(const x of a)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:Wv[x].label,value:v}));return{totalEvaluaciones:m[sa.EVALUACION],totalActos:m[sa.ACTO],totalActividadesFocalizadas:m[sa.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[sa.SALIDA_PEDAGOGICA],distribucionEventos:g}},[a]);return n?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&a.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdireccin"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"An no hay datos para mostrar. Comience por aadir registros en los mdulos correspondientes."}),i.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[i.jsx("p",{children:" Mdulo de Inasistencias y Reemplazos"}),i.jsx("p",{children:" Mdulo de Acompaamiento Docente"}),i.jsx("p",{children:" Calendario Acadmico"})]})]}):i.jsxs("div",{className:"space-y-12 animate-fade-in",children:[i.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdireccin"}),i.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),i.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["ltima actualizacin: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Inasistencias y Reemplazos"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(zf,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:n}),i.jsx(zf,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:n}),i.jsx(zf,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:n}),i.jsx(zf,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:n})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(Mp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:n}),i.jsx(Mp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:n}),i.jsx(Mp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:n}),i.jsx(Mp,{title:"Distribucin de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:n})]})]}),r.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Acompaamiento Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(zf,{title:"Total Acompaamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:n}),i.jsx(zf,{title:"Promedio General",value:u.promedioGeneral,description:"Calificacin promedio (1-4)",isLoading:n})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(Mp,{title:"Desempeo Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:n}),i.jsx(Mp,{title:"Desempeo Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:n})]})]}),a.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Resumen del Calendario Acadmico"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(zf,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:n}),i.jsx(zf,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:n}),i.jsx(zf,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:n}),i.jsx(zf,{title:"Salidas Pedaggicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:n})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(Mp,{title:"Distribucin de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:n}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Prximos Eventos"}),n?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[a.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return i.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin ttulo"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&i.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:[" ",m.ubicacion]})]}),i.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=Wv[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=Wv[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),a.filter(m=>new Date(m.date)>=new Date).length===0&&i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos prximos programados"})]})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:" Resumen Ejecutivo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+a.length}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),i.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[i.jsx("p",{children:"Dashboard de Subdireccin - Sistema de Gestin Pedaggica"}),i.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},aF="carga_horaria_asignaciones",mne="usuarios",kOe=e=>{const t=e.data();return{id:e.id,...t}},_Oe=e=>{const t=Dt(ht(st,mne),ur("profile","in",["PROFESORADO","SUBDIRECCION","COORDINACION_TP"]),Yt("nombreCompleto","asc"));return nr(t,a=>{const n=a.docs.map(s=>{const o=s.data();return{id:s.id,nombre:o.nombreCompleto||o.nombre||o.email||"Sin nombre",departamento:o.departamento||"General",horasContrato:o.horasContrato||44,perfil:o.profile||"PROFESORADO",email:o.email}});e(n)},a=>{console.error("Error al suscribirse a los docentes:",a),e([])})},SOe=async e=>{try{return(await Zr(ht(st,mne),{nombreCompleto:e.nombre,email:e.email,departamento:e.departamento||"General",horasContrato:e.horasContrato,profile:e.perfil,createdAt:Ga()})).id}catch(t){throw console.error("Error al crear nuevo docente:",t),new Error("No se pudo crear el docente.")}},BOe=e=>{const t=Dt(ht(st,aF),Yt("docenteNombre","asc"));return nr(t,a=>{const n=a.docs.map(s=>kOe(s));e(n)},a=>{console.error("Error al suscribirse a las asignaciones:",a),e([])})},TOe=async(e,t=!1)=>{try{if(t){const n=(await Ir(ht(st,aF))).docs.map(s=>xn(s.ref));await Promise.all(n),console.log(`Se eliminaron ${n.length} asignaciones existentes`)}const r=e.map(a=>Zr(ht(st,aF),{...a,createdAt:Ga(),updatedAt:Ga()}));await Promise.all(r),console.log(`Se guardaron ${r.length} asignaciones`)}catch(r){throw console.error("Error al guardar asignaciones en batch:",r),new Error("No se pudieron guardar todas las asignaciones.")}},dk=e=>{const t={44:38,43:37,42:36,41:35,40:35,39:34,38:33,37:32,36:31,35:30,34:29,33:29,32:28,31:27,30:26,29:25,28:24,27:23,26:22,25:22,24:21,23:20,22:19,21:18,20:17,19:16,18:16,17:15,16:14,15:13,14:12,13:11,12:10,11:10,10:9,9:8,8:7,7:6,6:5,5:4,4:3,3:2,2:1,1:1};return t[e]!==void 0?t[e]:Math.round(e*.65)},p2=e=>{const t=dk(e);return e-t},G5=e=>Object.values(e).reduce((t,r)=>t+(r||0),0),pne=(e,t)=>{const r=dk(e.horasContrato),a=p2(e.horasContrato),n=t.filter(m=>m.docenteId===e.id),s=n.reduce((m,g)=>m+G5(g.horasPorCurso),0),o=n.reduce((m,g)=>{if(g.funcionesLectivas&&g.funcionesLectivas.length>0)return m+g.funcionesLectivas.reduce((x,v)=>x+v.horas,0);if(g.funcionesNoLectivas&&g.funcionesNoLectivas.length>0)return m+g.funcionesNoLectivas.reduce((x,v)=>x+v.horas,0);{const x=g.otraFuncion&&parseInt(g.otraFuncion)||0;return m+x}},0),l=s+o,c=0,u=r-l,d=a-c,f=[],h=[];return l>r&&f.push(`Excede horas lectivas: ${l}/${r}`),c>a&&f.push(`Excede horas no lectivas: ${c}/${a}`),l<r&&l>0&&h.push(`Faltan ${u} horas lectivas`),{HA:r,HB:a,sumCursos:s,sumFunciones:c,sumFuncionesLectivas:o,totalHorasLectivas:l,restantesHA:u,restantesHB:d,horasContrato:e.horasContrato,valido:f.length===0,warnings:h,errors:f}},IOe=(e,t)=>{const r=pne(e,t),a=[];return r.errors.forEach(n=>{a.push({asignacionId:"",docenteId:e.id,tipo:"error",mensaje:`${e.nombre}: ${n}`})}),r.warnings.forEach(n=>{a.push({asignacionId:"",docenteId:e.id,tipo:"warning",mensaje:`${e.nombre}: ${n}`})}),a},OOe=e=>{const t=e.match(/^(\d+)([A-E])$/i);return t?`${t[1]}${t[2].toUpperCase()}`:e},gne="horarios_generados",FOe=async e=>{try{const t=Jt(st,gne,"global");await ai(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},xne=e=>{const t=Jt(st,gne,"global");return nr(t,a=>{a.exists()?e(a.data().data||{}):e({})},a=>{console.error("Error al suscribirse a los horarios:",a),e({})})};var bV;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(bV||(bV={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yV;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(yV||(yV={}));var wV;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(wV||(wV={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=["user","model","function","system"];var EV;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(EV||(EV={}));var CV;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(CV||(CV={}));var jV;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(jV||(jV={}));var kV;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(kV||(kV={}));var X2;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(X2||(X2={}));var _V;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(_V||(_V={}));var SV;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(SV||(SV={}));var BV;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(BV||(BV={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Yx extends ol{constructor(t,r){super(t),this.response=r}}class vne extends ol{constructor(t,r,a,n){super(t),this.status=r,this.statusText=a,this.errorDetails=n}}class Im extends ol{}class bne extends ol{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DOe="https://generativelanguage.googleapis.com",POe="v1beta",ROe="0.24.1",LOe="genai-js";var Hg;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Hg||(Hg={}));class MOe{constructor(t,r,a,n,s){this.model=t,this.task=r,this.apiKey=a,this.stream=n,this.requestOptions=s}toString(){var t,r;const a=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||POe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||DOe}/${a}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function UOe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${LOe}/${ROe}`),t.join(" ")}async function QOe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",UOe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let a=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(n){throw new Im(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${n.message}`)}for(const[n,s]of a.entries()){if(n==="x-goog-api-key")throw new Im(`Cannot set reserved header name ${n}`);if(n==="x-goog-api-client")throw new Im(`Header name ${n} can only be set using the apiClient field`);r.append(n,s)}}return r}async function HOe(e,t,r,a,n,s){const o=new MOe(e,t,r,a,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},GOe(s)),{method:"POST",headers:await QOe(o),body:n})}}async function ON(e,t,r,a,n,s={},o=fetch){const{url:l,fetchOptions:c}=await HOe(e,t,r,a,n,s);return zOe(l,c,o)}async function zOe(e,t,r=fetch){let a;try{a=await r(e,t)}catch(n){VOe(n,e)}return a.ok||await $Oe(a,e),a}function VOe(e,t){let r=e;throw r.name==="AbortError"?(r=new bne(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof vne||e instanceof Im||(r=new ol(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function $Oe(e,t){let r="",a;try{const n=await e.json();r=n.error.message,n.error.details&&(r+=` ${JSON.stringify(n.error.details)}`,a=n.error.details)}catch{}throw new vne(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,a)}function GOe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),q5(e.candidates[0]))throw new Yx(`${sm(e)}`,e);return qOe(e)}else if(e.promptFeedback)throw new Yx(`Text not available. ${sm(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),q5(e.candidates[0]))throw new Yx(`${sm(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),TV(e)[0]}else if(e.promptFeedback)throw new Yx(`Function call not available. ${sm(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),q5(e.candidates[0]))throw new Yx(`${sm(e)}`,e);return TV(e)}else if(e.promptFeedback)throw new Yx(`Function call not available. ${sm(e)}`,e)},e}function qOe(e){var t,r,a,n;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(n=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||n===void 0?void 0:n.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function TV(e){var t,r,a,n;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(n=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||n===void 0?void 0:n.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const KOe=[X2.RECITATION,X2.SAFETY,X2.LANGUAGE];function q5(e){return!!e.finishReason&&KOe.includes(e.finishReason)}function sm(e){var t,r,a;let n="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)n+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(n+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(n+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((a=e.candidates)===null||a===void 0)&&a[0]){const s=e.candidates[0];q5(s)&&(n+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(n+=`: ${s.finishMessage}`))}return n}function Uw(e){return this instanceof Uw?(this.v=e,this):new Uw(e)}function WOe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r.apply(e,t||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(h){a[h]&&(n[h]=function(m){return new Promise(function(g,x){s.push([h,m,g,x])>1||l(h,m)})})}function l(h,m){try{c(a[h](m))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof Uw?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,m){h(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function XOe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=ZOe(t),[a,n]=r.tee();return{stream:JOe(a),response:YOe(n)}}async function YOe(e){const t=[],r=e.getReader();for(;;){const{done:a,value:n}=await r.read();if(a)return S8(eFe(t));t.push(n)}}function JOe(e){return WOe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:a,done:n}=yield Uw(r.read());if(n)break;yield yield Uw(S8(a))}})}function ZOe(e){const t=e.getReader();return new ReadableStream({start(a){let n="";return s();function s(){return t.read().then(({value:o,done:l})=>{if(l){if(n.trim()){a.error(new ol("Failed to parse stream"));return}a.close();return}n+=o;let c=n.match(IV),u;for(;c;){try{u=JSON.parse(c[1])}catch{a.error(new ol(`Error parsing JSON response: "${c[1]}"`));return}a.enqueue(u),n=n.substring(c[0].length),c=n.match(IV)}return s()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new bne("Request aborted when reading from the stream"):l=new ol("Error reading from the stream"),l})}}})}function eFe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const a of e){if(a.candidates){let n=0;for(const s of a.candidates)if(r.candidates||(r.candidates=[]),r.candidates[n]||(r.candidates[n]={index:n}),r.candidates[n].citationMetadata=s.citationMetadata,r.candidates[n].groundingMetadata=s.groundingMetadata,r.candidates[n].finishReason=s.finishReason,r.candidates[n].finishMessage=s.finishMessage,r.candidates[n].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[n].content||(r.candidates[n].content={role:s.content.role||"user",parts:[]});const o={};for(const l of s.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),r.candidates[n].content.parts.push(o)}n++}a.usageMetadata&&(r.usageMetadata=a.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yne(e,t,r,a){const n=await ON(t,Hg.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),a);return XOe(n)}async function wne(e,t,r,a){const s=await(await ON(t,Hg.GENERATE_CONTENT,e,!1,JSON.stringify(r),a)).json();return{response:S8(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nne(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Qw(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return tFe(t)}function tFe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let a=!1,n=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),n=!0):(t.parts.push(s),a=!0);if(a&&n)throw new ol("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!n)throw new ol("No content is provided for sending chat message.");return a?t:r}function rFe(e,t){var r;let a={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const n=e.generateContentRequest!=null;if(e.contents){if(n)throw new Im("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=e.contents}else if(n)a=Object.assign(Object.assign({},a),e.generateContentRequest);else{const s=Qw(e);a.contents=[s]}return{generateContentRequest:a}}function OV(e){let t;return e.contents?t=e:t={contents:[Qw(e)]},e.systemInstruction&&(t.systemInstruction=Nne(e.systemInstruction)),t}function aFe(e){return typeof e=="string"||Array.isArray(e)?{content:Qw(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],nFe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function sFe(e){let t=!1;for(const r of e){const{role:a,parts:n}=r;if(!t&&a!=="user")throw new ol(`First content should be with role 'user', got ${a}`);if(!NV.includes(a))throw new ol(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(NV)}`);if(!Array.isArray(n))throw new ol("Content should have 'parts' property with an array of Parts");if(n.length===0)throw new ol("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of n)for(const c of FV)c in l&&(s[c]+=1);const o=nFe[a];for(const l of FV)if(!o.includes(l)&&s[l]>0)throw new ol(`Content with role '${a}' can't contain '${l}' part`);t=!0}}function DV(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const a of r.parts)if(a===void 0||Object.keys(a).length===0||a.text!==void 0&&a.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="SILENT_ERROR";class iFe{constructor(t,r,a,n={}){this.model=r,this.params=a,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,a!=null&&a.history&&(sFe(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var a,n,s,o,l,c;await this._sendPromise;const u=Qw(t),d={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>wne(this._apiKey,this.model,d,f)).then(m=>{var g;if(DV(m.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=sm(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,h}async sendMessageStream(t,r={}){var a,n,s,o,l,c;await this._sendPromise;const u=Qw(t),d={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=yne(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(m=>{throw new Error(PV)}).then(m=>m.response).then(m=>{if(DV(m)){this._history.push(u);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=sm(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==PV&&console.error(m)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oFe(e,t,r,a){return(await ON(t,Hg.COUNT_TOKENS,e,!1,JSON.stringify(r),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lFe(e,t,r,a){return(await ON(t,Hg.EMBED_CONTENT,e,!1,JSON.stringify(r),a)).json()}async function cFe(e,t,r,a){const n=r.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await ON(t,Hg.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:n}),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(t,r,a={}){this.apiKey=t,this._requestOptions=a,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Nne(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var a;const n=OV(t),s=Object.assign(Object.assign({},this._requestOptions),r);return wne(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},n),s)}async generateContentStream(t,r={}){var a;const n=OV(t),s=Object.assign(Object.assign({},this._requestOptions),r);return yne(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},n),s)}startChat(t){var r;return new iFe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const a=rFe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),r);return oFe(this.apiKey,this.model,a,n)}async embedContent(t,r={}){const a=aFe(t),n=Object.assign(Object.assign({},this._requestOptions),r);return lFe(this.apiKey,this.model,a,n)}async batchEmbedContents(t,r={}){const a=Object.assign(Object.assign({},this._requestOptions),r);return cFe(this.apiKey,this.model,t,a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new ol("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new RV(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,a){if(!t.name)throw new Im("Cached content must contain a `name` field.");if(!t.model)throw new Im("Cached content must contain a `model` field.");const n=["model","systemInstruction"];for(const o of n)if(r!=null&&r[o]&&t[o]&&(r==null?void 0:r[o])!==t[o]){if(o==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new Im(`Different value for "${o}" specified in modelParams (${r[o]}) and cachedContent (${t[o]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new RV(this.apiKey,s,a)}}const uFe=[{model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}},{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}}],Ene=()=>(console.warn("No se encontr la API key de Gemini"),null);async function dFe(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function Hw(){const e=Ene();if(!e)return null;for(const t of uFe){const r=await dFe(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontr ningn modelo de Gemini disponible"),null}function Cne(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function fFe(e){const t=[...e];for(let r=t.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1));[t[r],t[a]]=[t[a],t[r]]}return t}async function AFe(e,t=3){var a;const r=await Hw();if(!r)return WB(e,t);try{const n=`Genera ${t} preguntas de seleccin mltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "Pregunta 1?",
          "opciones": ["Opcin 1", "Opcin 2", "Opcin 3", "Opcin 4"]
        }
      ]
    }`,o=(await r.generateContent(n)).response.text(),l=Cne(o);return(a=l==null?void 0:l.preguntas)!=null&&a.length?l.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",o),WB(e,t))}catch(n){return console.error("Error al generar preguntas:",n),WB(e,t)}}async function hFe(e,t=30){var a;const r=await Hw();if(!r)return XB(e);try{const n=e.filter(u=>u&&u.trim());if(n.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${n.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos ms relevantes.`,l=(await r.generateContent(s)).response.text(),c=Cne(l);return(a=c==null?void 0:c.keywords)!=null&&a.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",l),XB(e))}catch(n){return console.error("Error al analizar respuestas:",n),XB(e)}}function WB(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((a,n)=>({enunciado:`Pregunta ${n+1} sobre ${e}`,opciones:fFe(r).slice(0,4)}))}function XB(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},a=e.join(" ").toLowerCase().split(/\W+/).filter(n=>n.length>3&&!t.has(n));for(const n of a)r[n]=(r[n]||0)+1;return Object.entries(r).sort(([,n],[,s])=>s-n).slice(0,20).map(([n,s])=>({keyword:n,score:Math.min(1,s/a.length)}))}async function mFe(){const e=Ene();if(!e)return null;const t={model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}};try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),console.log(`Usando modelo optimizado: ${t.model}`),r}catch(r){return console.warn("Modelo Pro no disponible, usando fallback:",r),Hw()}}async function B8(e,t=2,r=!0){var u,d;const a=e.substring(0,50).replace(/\n/g," ")+"...";console.log(`Iniciando generacin con IA. Prompt: "${a}"`),console.log(`Configuracin: maxRetries=${t}, useProModel=${r}`);try{const h=await Vc(bw,"callGeminiGeneric")({prompt:e,module:"Horarios"});if((u=h==null?void 0:h.data)!=null&&u.success&&typeof h.data.response=="string"&&h.data.response.length>0)return console.log("Respuesta obtenida va Cloud Function (genrica)."),h.data.response;const g=await Vc(bw,"callGeminiAI")({prompt:e,module:"Horarios"});if((d=g==null?void 0:g.data)!=null&&d.success&&typeof g.data.response=="string"&&g.data.response.length>0)return console.log("Respuesta obtenida va Cloud Function (secreto en backend)."),g.data.response}catch(f){const h=(f==null?void 0:f.message)||String(f);console.warn("Fallo llamada a Cloud Function callGeminiAI, intentando otras rutas:",h)}let n;try{if(r?(console.log("Intentando usar modelo Pro prioritariamente..."),n=await mFe(),n||(console.warn("Modelo Pro no disponible, intentando fallback a modelos alternativos"),n=await Hw())):n=await Hw(),!n)throw console.warn("IA en cliente no disponible (sin API key en frontend o sin conectividad). Usar fallback."),new Error("IA_NOT_AVAILABLE")}catch(f){throw console.warn("Inicializacin de IA fallida, continuando con fallback:",f),new Error("IA_NOT_AVAILABLE")}let s=0,o,l="",c=0;for(;s<=t;){try{console.log(`Intento ${s+1}/${t+1} de generacin con IA`);const f=e+`

IMPORTANTE: Devuelve SOLO el JSON estructurado sin comentarios adicionales. El JSON debe ser vlido y parseable.`,h=await n.generateContent(f);if(h!=null&&h.response&&typeof h.response.text=="function"){const m=h.response.text();if(m&&m.length>100){if(console.log(`Respuesta generada exitosamente (${m.length} caracteres)`),m.includes("{")&&m.includes("}")||m.includes("[")&&m.includes("]"))return console.log("La respuesta contiene estructuras JSON"),m;if(console.warn("La respuesta no parece contener JSON vlido"),m.length>c&&(l=m,c=m.length),s===t)return console.log("Usando la mejor respuesta disponible en el ltimo intento"),l}else console.warn("Respuesta de IA demasiado corta, reintentando...")}else if(h){const m=typeof h=="string"?h:JSON.stringify(h);return console.warn("Formato de respuesta inesperado, usando fallback a string"),m}else console.warn("No se recibi respuesta vlida del modelo")}catch(f){console.error(`Error en intento ${s+1}:`,f),o=f,f.message&&(f.message.includes("token")||f.message.includes("length")||f.message.includes("limit"))&&(console.log("Error relacionado con lmites de tokens, intentando simplificar el prompt"),e=e.substring(0,Math.floor(e.length*.75)))}if(s++,s<=t){const f=Math.min(1e3*Math.pow(2,s),8e3);console.log(`Esperando ${f}ms antes de reintentar...`),await new Promise(h=>setTimeout(h,f))}}if(l)return console.log("Devolviendo la mejor respuesta disponible despus de agotar reintentos"),l;throw console.error(`Todos los intentos de generacin fallaron despus de ${t+1} intentos`),o||new Error("No se pudo generar contenido despus de mltiples intentos. Por favor, intente nuevamente.")}const Ak=e=>{const[t,r]=e.split(":").map(Number);return t*60+r},pFe=e=>e==="Viernes",LV=(e,t)=>{if(!pFe(e))return!0;const r=Ws.find(a=>a.bloque===t);return!!r&&Ak(r.fin)<=Ak("13:00")},g2=e=>{const t=(e||"").toLowerCase();return["mecnica","mecanica","taller","mquinas","maquinas","automotriz","electromecnica","electromecanica","metal","soldadura","tp"].some(r=>t.includes(r))},Jp=e=>{const t=(e||"").toLowerCase();return["lenguaje","matem","historia","ingls","ingles","ciencias","biologa","biologia","qumica","quimica","fsica","fisica","ed. fsica","educacin fsica","ciudadana","ciudadania"].some(r=>t.includes(r))},nF=e=>{const t=(e||"").toLowerCase();return["taller","prctica","practica","laboratorio","mecnica","mecanica","electr","maquin","tp"].some(r=>t.includes(r))},sF=e=>{const t=Ws.find(r=>r.bloque===e);return t?Ak(t.inicio)>=Ak("13:40"):!1};function T8(){const e={};for(const t of pA){e[t]={};for(const r of Ws){const a=String(r.bloque);e[t][a]={}}}return e}function jne(e){const t=[];for(const r of Object.keys(e)){const a=e[r];for(const n of Object.keys(a)){const s=a[n],o=new Map;for(const l of Object.keys(s)){const c=s[l];if(c!=null&&c.profesor){const u=o.get(c.profesor)||[];u.push(l),o.set(c.profesor,u)}}for(const[l,c]of o.entries())c.length>1&&t.push(`Tope docente ${l} el ${r} bloque ${n} en cursos: ${c.join(", ")}`)}}return t}function gFe(e,t){const r=T8();for(const a of e){if(!r[a.dia])continue;const n=String(a.bloque);r[a.dia][n]&&t.includes(a.curso)&&(r[a.dia][n][a.curso]={asignatura:a.asignatura,profesor:a.docente})}return r}function xFe(e,t,r){var d,f,h,m;const a=T8(),n=e.map(g=>({...g})),s={},o={},l=(g,x)=>`${g}|${x}`;for(const g of t)s[g]={};n.sort((g,x)=>x.horas-g.horas);const c=(g,x)=>Ws.map(v=>v.bloque).filter(v=>!!a[x][String(v)][g]);for(const g of n){let x=g.horas;e:for(;x>0;){let v=!1;const y=[...pA].sort((w,j)=>{const O=c(g.curso,w).length;return c(g.curso,j).length-O});for(const w of y)if(!(r.terceroSoloPlanGeneral&&typeof g.curso=="string"&&g.curso.trim().startsWith("3")&&!Jp(g.asignatura)))for(let j=0;j<Ws.length;j++){const B=Ws[j].bloque;if(!LV(w,B)||r.practicasPM&&nF(g.asignatura)&&!sF(B))continue;const T=l(w,B),C=(d=s[g.curso])==null?void 0:d[T],_=(f=o[g.docente])==null?void 0:f[T],S=a[w][String(B)][g.curso];if(!C&&!_&&!S){const L=g2(g.asignatura),P=Jp(g.asignatura),k=Math.max(1,Math.min(10,r.maxConsecutivasMecanica??10)),M=Math.max(1,Math.min(3,r.maxConsecutivasPlanGeneral??3)),U=Q=>{const q=Y=>Q==="mec"?g2(Y):Jp(Y);let V=0;for(let Y=j-1;Y>=0;Y--){const K=Ws[Y].bloque,J=a[w][String(K)][g.curso];if(!J)break;if(q(J.asignatura))V++;else break}for(let Y=j+1;Y<Ws.length;Y++){const K=Ws[Y].bloque,J=a[w][String(K)][g.curso];if(!J)break;if(q(J.asignatura))V++;else break}return V};if(L&&U("mec")+1>k||P&&U("pg")+1>M)continue;if(a[w][String(B)][g.curso]={asignatura:g.asignatura,profesor:g.docente},s[g.curso][T]=!0,o[g.docente]=o[g.docente]||{},o[g.docente][T]=!0,x--,v=!0,x===0)break e;const z=Ws[j+1];if(z&&LV(w,z.bloque)){const Q=l(w,z.bloque),q=a[w][String(z.bloque)][g.curso],V=(h=o[g.docente])==null?void 0:h[Q],Y=()=>{if(r.practicasPM&&nF(g.asignatura)&&!sF(z.bloque))return!1;const K=g2(g.asignatura),J=Jp(g.asignatura),R=F=>{const W=ne=>F==="mec"?g2(ne):Jp(ne);let X=1;for(let ne=j-1;ne>=0;ne--){const le=Ws[ne].bloque,ie=a[w][String(le)][g.curso];if(!ie)break;if(W(ie.asignatura))X++;else break}return X++,X};return!(K&&R("mec")>(r.maxConsecutivasMecanica??10)||J&&R("pg")>(r.maxConsecutivasPlanGeneral??3))};if(x>0&&!((m=s[g.curso])!=null&&m[Q])&&!V&&!q&&Y()&&(a[w][String(z.bloque)][g.curso]={asignatura:g.asignatura,profesor:g.docente},s[g.curso][Q]=!0,o[g.docente][Q]=!0,x--,x===0))break e}}}if(!v)break}}const u=[];for(const g of n){let x=0;for(const y of pA)for(const w of Ws){const j=a[y][String(w.bloque)][g.curso];j&&j.asignatura===g.asignatura&&j.profesor===g.docente&&x++}const v=g.horas-x;v>0&&u.push(`No se pudieron ubicar ${v} bloque(s) para ${g.asignatura} (${g.curso}) con ${g.docente}`)}for(const g of t)for(const x of pA){const v=Ws.map(y=>y.bloque).filter(y=>!!a[x][String(y)][g]);if(v.length>0){const y=Math.min(...v),w=Math.max(...v);for(let j=y;j<=w;j++)if(!a[x][String(j)][g]){u.push(`Ventana detectada en ${g} el ${x} entre bloques ${y}${w}`);break}}}return u.push(...jne(a)),{horarios:a,conflictos:u,fuente:"fallback"}}async function vFe(e,t,r,a){var o,l;const n={maxConsecutivasMecanica:(a==null?void 0:a.maxConsecutivasMecanica)??10,maxConsecutivasPlanGeneral:(a==null?void 0:a.maxConsecutivasPlanGeneral)??3,practicasPM:(a==null?void 0:a.practicasPM)??!1,terceroSoloPlanGeneral:(a==null?void 0:a.terceroSoloPlanGeneral)??!1},s=[];for(const c of e){const u=c.docenteNombre||((o=t.find(d=>d.id===c.docenteId))==null?void 0:o.nombre)||"Docente";for(const[d,f]of Object.entries(c.horasPorCurso||{})){const h=typeof f=="number"?f:0;h>0&&d&&s.push({curso:d,asignatura:c.asignaturaOModulo||"Asignatura",docente:u,horas:h})}}if(s.length===0)return{horarios:T8(),conflictos:[],fuente:"fallback"};try{const c={dias:pA,bloques:Ws,cursos:r,demanda:s},u=`Genera un horario semanal sin topes de profesor entre cursos.
Reglas:
- Un docente no puede estar en ms de un curso en el mismo da y bloque.
- Cada item de demanda representa cuntos bloques deben ubicarse.
- Usa solamente los das y bloques provistos.
- Distribuye equilibradamente a lo largo de la semana evitando ventanas (huecos) y procurando no dejar das completamente vacos por curso.
- El da Viernes no se pueden asignar bloques que terminen despus de las 13:00.
 - Mximo de bloques consecutivos de asignaturas de mecnica: ${n.maxConsecutivasMecanica}.
 - Mximo de bloques consecutivos de asignaturas de plan general: ${n.maxConsecutivasPlanGeneral}.
 - ${n.practicasPM?"Las asignaturas prcticas (taller/prctica/laboratorio/TP) deben ubicarse en horario PM (desde 13:40).":"Preferir, si es posible, las asignaturas prcticas en PM, pero no obligatorio."}
 - ${n.terceroSoloPlanGeneral?"Para cursos de 3 medio (3A, 3B, etc.), solo ubicar asignaturas de plan general.":"Sin restriccin especial para 3 medio."}

Entrada JSON:
${JSON.stringify(c,null,2)}

Devuelve SOLO JSON vlido con el formato:
{
	"sesiones": [
		{ "curso": "1A", "dia": "Lunes", "bloque": 1, "asignatura": "Matemtica", "docente": "Nombre" }
	]
}`,d=await B8(u,1,!0);let f=d;const h=d.match(/```(?:json)?\s*([\s\S]*?)\s*```/);h&&h[1]&&(f=h[1]);const m=JSON.parse(f);if(!((l=m==null?void 0:m.sesiones)!=null&&l.length))throw new Error("Respuesta IA sin sesiones");const g=gFe(m.sesiones,r),x=jne(g),v=[];for(const y of r)for(const w of pA){let j=0,O=0;for(const B of Ws){const T=g[w][String(B.bloque)][y];T&&(g2(T.asignatura)?j++:j=0,Jp(T.asignatura)?O++:O=0,j>(n.maxConsecutivasMecanica??10)&&v.push(`Exceso mecnica consecutiva en ${y} ${w}`),O>(n.maxConsecutivasPlanGeneral??3)&&v.push(`Exceso plan general consecutiva en ${y} ${w}`),n.practicasPM&&nF(T.asignatura)&&!sF(B.bloque)&&v.push(`Prctica fuera de PM en ${y} ${w} bloque ${B.bloque}`),n.terceroSoloPlanGeneral&&y.trim().startsWith("3")&&!Jp(T.asignatura)&&v.push(`3 medio con asignatura no plan general en ${y} ${w} bloque ${B.bloque}`))}}return{horarios:g,conflictos:[...x,...v],fuente:"IA"}}catch(c){return c instanceof Error&&c.message==="IA_NOT_AVAILABLE"?console.warn("IA no disponible. Generando horario con algoritmo fallback."):console.warn("Falla IA en generacin de horario, usando fallback:",c),xFe(s,r,n)}}const bFe=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes slideInFromBottom {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scaleIn {
    animation: scaleIn 0.3s ease-out forwards;
  }

  .animate-slideIn {
    animation: slideInFromBottom 0.3s ease-out forwards;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0,0,0,0.25);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
  }
`,yFe=()=>{N.useEffect(()=>{const me=document.createElement("style");return me.innerHTML=bFe,document.head.appendChild(me),()=>{document.head.removeChild(me)}},[]);const[e,t]=N.useState([]),[r,a]=N.useState([]),[n,s]=N.useState({busqueda:"",curso:"",asignatura:"",departamento:""}),[o,l]=N.useState(!1),[c,u]=N.useState("docentes"),[d,f]=N.useState([]),[h,m]=N.useState(!1),[g,x]=N.useState(null),[v,y]=N.useState(null),[w,j]=N.useState([]),[O,B]=N.useState(null),[T,C]=N.useState(Nn[0]||""),[_,S]=N.useState(!1),[L,P]=N.useState({maxConsecutivasMecanica:10,maxConsecutivasPlanGeneral:3,practicasPM:!1,terceroSoloPlanGeneral:!1}),[k,M]=N.useState(!1),[U,z]=N.useState({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),[Q,q]=N.useState("");N.useEffect(()=>_Oe(ye=>t(ye)),[]),N.useEffect(()=>BOe(ye=>{const oe=ye.map(fe=>{let be=fe.funcionesLectivas||[];!be.length&&fe.funcionesNoLectivas&&fe.funcionesNoLectivas.length?be=fe.funcionesNoLectivas:!be.length&&fe.otraFuncion&&(be=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:fe.otraFuncion,horas:parseInt(fe.otraFuncion)||0}]);const{funcionesNoLectivas:Pe,otraFuncion:$e,...Ke}=fe;return{...Ke,funcionesLectivas:be}});a(oe)}),[]),N.useEffect(()=>xne(ye=>{x(ye&&Object.keys(ye).length>0?ye:null)}),[]);const V=N.useMemo(()=>{const me={};return e.forEach(ye=>{const oe=r.filter(fe=>fe.docenteId===ye.id);me[ye.id]=pne(ye,oe)}),me},[e,r]);N.useEffect(()=>{const me=[];e.forEach(ye=>me.push(...IOe(ye,r))),f(me)},[e,r]);const Y=N.useMemo(()=>Q?e.filter(me=>{var ye;return me.nombre.toLowerCase().includes(Q.toLowerCase())||((ye=me.email)==null?void 0:ye.toLowerCase().includes(Q.toLowerCase()))}):e,[e,Q]),K=N.useMemo(()=>r.filter(ye=>{const oe=e.find(fe=>fe.id===ye.docenteId);return!(!oe||n.busqueda&&!oe.nombre.toLowerCase().includes(n.busqueda.toLowerCase())||n.asignatura&&ye.asignaturaOModulo!==n.asignatura||n.departamento&&oe.departamento!==n.departamento||n.curso&&!Object.keys(ye.horasPorCurso).includes(n.curso))}).sort((ye,oe)=>ye.docenteId!==oe.docenteId?ye.docenteId.localeCompare(oe.docenteId):(ye.asignaturaOModulo||"").localeCompare(oe.asignaturaOModulo||"")),[r,e,n]),J=async()=>{try{if(m(!0),!U.nombre||!U.email){alert("El nombre y email son obligatorios"),m(!1);return}await SOe(U),M(!1),z({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),alert("Docente creado exitosamente")}catch(me){console.error(me),alert("Error al crear docente")}finally{m(!1)}},R=N.useCallback(()=>{if(e.length===0)return;const me={id:`asig_${Date.now()}`,docenteId:e[0].id,docenteNombre:e[0].nombre,asignaturaOModulo:En[0],funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};a(ye=>[...ye,me])},[e]),F=N.useCallback((me,ye)=>{const oe=r.filter(Pe=>Pe.docenteId===me).map(Pe=>Pe.asignaturaOModulo);let fe=En[0];for(const Pe of En)if(!oe.includes(Pe)){fe=Pe;break}const be={id:`asig_${Date.now()}`,docenteId:me,docenteNombre:ye,asignaturaOModulo:fe,funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};a(Pe=>[...Pe,be])},[r]),W=N.useCallback(me=>a(ye=>ye.filter(oe=>oe.id!==me)),[]),X=N.useCallback(me=>{a(ye=>ye.map(oe=>{if(oe.id!==me)return oe;const fe={id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:"",horas:0};return{...oe,funcionesLectivas:[...oe.funcionesLectivas||[],fe]}}))},[]),ne=N.useCallback((me,ye,oe,fe)=>{a(be=>be.map(Pe=>{if(Pe.id!==me)return Pe;const $e=(Pe.funcionesLectivas||[]).map(Ke=>Ke.id===ye?{...Ke,[oe]:fe}:Ke);return{...Pe,funcionesLectivas:$e}}))},[]),le=N.useCallback((me,ye)=>{a(oe=>oe.map(fe=>{if(fe.id!==me)return fe;const be=(fe.funcionesLectivas||[]).filter(Pe=>Pe.id!==ye);return{...fe,funcionesLectivas:be}}))},[]),ie=N.useCallback((me,ye,oe)=>{a(fe=>fe.map(be=>{if(be.id!==me)return be;const Pe={...be,[ye]:oe};if(ye==="docenteId"){const $e=e.find(Ke=>Ke.id===oe);$e&&(Pe.docenteNombre=$e.nombre)}return ye==="horasPorCurso"&&(Pe.horasXAsig=G5(oe)),Pe}))},[e]),ae=N.useCallback((me,ye,oe)=>{a(fe=>fe.map(be=>{if(be.id!==me)return be;const Pe={...be.horasPorCurso};return oe===0?delete Pe[ye]:Pe[ye]=oe,{...be,horasPorCurso:Pe,horasXAsig:G5(Pe)}}))},[]),Ae=N.useCallback(me=>{m(!0);const ye=new FileReader;ye.onload=oe=>{var fe;try{const be=new Uint8Array((fe=oe.target)==null?void 0:fe.result),Pe=Bb(be,{type:"array"}),$e=Pe.Sheets["Docentes 2025"]||Pe.Sheets[Pe.SheetNames[0]],Ke=Ts.sheet_to_json($e,{header:1});let nt=-1;for(let xt=0;xt<Ke.length;xt++){const Et=Ke[xt];if(Et&&Et.some(gt=>typeof gt=="string"&&(gt.includes("Docente")||gt.includes("ASIGNATURA")||Nn.some(Ve=>gt.includes(Ve.replace("","")))))){nt=xt;break}}if(nt===-1){alert("No se encontr la fila de encabezado en el archivo");return}const He=Ke[nt],it=[];for(let xt=nt+1;xt<Ke.length;xt++){const Et=Ke[xt];if(!Et||Et.length===0)continue;const gt=Et[He.indexOf("Docente")]||"";if(!gt)continue;const Ve=e.find($r=>$r.nombre.toLowerCase().includes(gt.toLowerCase()));if(!Ve)continue;const Bt={};He.forEach(($r,br)=>{if(typeof $r=="string"){const kn=OOe($r.trim());if(Nn.includes(kn)){const Pr=parseInt(Et[br])||0;Pr>0&&(Bt[kn]=Pr)}}});let dr=[];const er=Et[He.indexOf("FUNCIONES LECTIVAS")]||Et[He.indexOf("FUNCIONES NO LECTIVAS")]||Et[He.indexOf("OTRA FUNCIN")]||"";typeof er=="string"&&er.includes(":")?dr=er.split(",").map($r=>{const[br,kn]=$r.split(":").map(Pr=>Pr.trim());return{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:br,horas:parseInt(kn)||0}}):er&&(dr=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:er,horas:0}]);const Er={id:`import_${Date.now()}_${xt}`,docenteId:Ve.id,docenteNombre:Ve.nombre,asignaturaOModulo:Et[He.indexOf("ASIGNATURA O MDULO")]||"",funcionesLectivas:dr,horasPorCurso:Bt,horasXAsig:G5(Bt)};it.push(Er)}a(it),alert(`Se importaron ${it.length} asignaciones exitosamente`)}catch(be){console.error("Error al importar:",be),alert("Error al procesar el archivo. Verifique el formato.")}finally{m(!1)}},ye.readAsArrayBuffer(me)},[e]),ke=N.useCallback(()=>{const me=r.map(fe=>{const be=e.find(nt=>nt.id===fe.docenteId),Pe=V[fe.docenteId];let $e="";fe.funcionesLectivas&&fe.funcionesLectivas.length>0?$e=fe.funcionesLectivas.map(nt=>`${nt.nombre}: ${nt.horas}h`).join(", "):fe.funcionesNoLectivas&&fe.funcionesNoLectivas.length>0?$e=fe.funcionesNoLectivas.map(nt=>`${nt.nombre}: ${nt.horas}h`).join(", "):fe.otraFuncion&&($e=fe.otraFuncion);const Ke={Docente:fe.docenteNombre,"ASIGNATURA O MDULO":fe.asignaturaOModulo||"","FUNCIONES LECTIVAS":$e,"HORAS X ASIG.":fe.horasXAsig||0};return Nn.forEach(nt=>Ke[nt]=fe.horasPorCurso[nt]||0),Pe&&(Ke["HORAS LECTIVAS (HA)"]=Pe.HA,Ke["HORAS NO LECTIVAS (HB)"]=Pe.HB,Ke["HORAS CONTRATO"]=(be==null?void 0:be.horasContrato)||0),Ke}),ye=Ts.json_to_sheet(me),oe=Ts.book_new();Ts.book_append_sheet(oe,ye,"Horarios"),b1(oe,`horarios_${new Date().toISOString().split("T")[0]}.xlsx`)},[r,e,V]),re=N.useCallback(async()=>{try{m(!0);const me=Nn,ye=await vFe(r,e,me,L);y(ye.horarios),j(ye.conflictos||[]),B(ye.fuente),!T&&me.length&&C(me[0])}catch(me){console.error("Error al generar horario:",me),alert("No se pudo generar el horario.")}finally{m(!1)}},[r,e,T,L]),Re=N.useCallback(async()=>{if(!v){alert("No hay un horario generado para guardar.");return}try{m(!0),await FOe(v),alert("Horario guardado exitosamente"),x(v)}catch(me){console.error("Error al guardar horario:",me),alert("Error al guardar el horario")}finally{m(!1)}},[v]),Le=N.useCallback(()=>{y(null),j([]),B(null)},[]),Te=N.useCallback(async()=>{if(d.filter(ye=>ye.tipo==="error").length>0){alert("No se puede guardar. Hay errores que deben corregirse primero.");return}try{m(!0);const ye=[],oe=[];r.forEach(be=>{let Pe=be.funcionesLectivas||[];be.funcionesNoLectivas&&be.funcionesNoLectivas.length>0&&Pe.length===0?Pe=be.funcionesNoLectivas.map(it=>({id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:it.nombre,horas:it.horas})):be.otraFuncion&&Pe.length===0&&(Pe=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:be.otraFuncion,horas:parseInt(be.otraFuncion)||0}]);const{funcionesNoLectivas:$e,otraFuncion:Ke,...nt}=be,He={...nt,funcionesLectivas:Pe};if(be.id.startsWith("asig_")||be.id.startsWith("import_")){const{id:it,...xt}=He;oe.push(xt)}else ye.push(He)});const fe=[...ye.map(({id:be,...Pe})=>Pe),...oe];await TOe(fe,!0),alert("Horarios guardados exitosamente")}catch(ye){console.error("Error al guardar horarios:",ye),alert("Error al guardar los horarios")}finally{m(!1)}},[d,r]),de=me=>{const ye=V[me];return ye?ye.errors.length>0?"red":ye.warnings.length>0?"yellow":"green":"gray"},Ce=()=>k?i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-full overflow-hidden animate-scaleIn",children:[i.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[i.jsx(Yj,{className:"w-5 h-5"}),"Aadir Nuevo Docente"]}),i.jsx("button",{onClick:()=>M(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",disabled:h,children:i.jsx(Xd,{className:"w-5 h-5"})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Nombre Completo"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:U.nombre,onChange:me=>z({...U,nombre:me.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Nombre Apellido",required:!0})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Email"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"email",value:U.email,onChange:me=>z({...U,email:me.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"correo@ejemplo.com",required:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Departamento"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:U.departamento,onChange:me=>z({...U,departamento:me.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Ej: Matemticas, Lenguaje, etc."})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Horas Contrato"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",value:U.horasContrato,onChange:me=>z({...U,horasContrato:parseInt(me.target.value)||0}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",min:1,max:44}),i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"horas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Perfil"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:U.perfil,onChange:me=>z({...U,perfil:me.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 appearance-none",children:[i.jsx("option",{value:"PROFESORADO",children:"Profesorado"}),i.jsx("option",{value:"SUBDIRECCION",children:"Subdireccin"}),i.jsx("option",{value:"COORDINACION_TP",children:"Coordinacin TP"})]}),i.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:i.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),i.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",disabled:h,children:"Cancelar"}),i.jsx("button",{onClick:J,className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-sm disabled:opacity-50 transition-all duration-200 flex items-center gap-2",disabled:h||!U.nombre||!U.email,children:h?i.jsxs(i.Fragment,{children:[i.jsx(Co,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Guardando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Zte,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar"})]})})]})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ere,{className:"w-3.5 h-3.5"}),i.jsxs("span",{children:["Los campos marcados con ",i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 inline-block"})," son obligatorios"]})]})})]})}):null;return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-800 dark:to-indigo-900 rounded-xl p-6 shadow-lg relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-gray-900 opacity-5",children:[i.jsx("div",{className:"w-96 h-96 rounded-full bg-white dark:bg-blue-600 absolute -top-20 -right-20 opacity-20"}),i.jsx("div",{className:"w-64 h-64 rounded-full bg-white dark:bg-indigo-600 absolute -bottom-10 -left-10 opacity-20"})]}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[i.jsx(ul,{className:"mr-3 h-8 w-8"}),"Crear Horarios"]}),i.jsx("p",{className:"text-blue-100 dark:text-blue-200 max-w-2xl",children:"Sistema de gestin de carga horaria docente con validacin 65%/35% y visualizacin en tiempo real"})]}),i.jsxs("div",{className:"mt-4 md:mt-0 flex gap-3",children:[i.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-sm rounded-lg transition-all duration-200 border border-white border-opacity-30",children:[i.jsx(U2,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver estadsticas"})]}),i.jsxs("button",{onClick:Te,disabled:d.some(me=>me.tipo==="error")||h,className:"flex items-center justify-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:[i.jsx(Fl,{className:"w-4 h-4"}),i.jsx("span",{children:h?"Guardando...":"Guardar cambios"})]})]})]})})]}),i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center",children:[i.jsx(EN,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Filtros y acciones"})]}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[i.jsx("div",{className:"flex-1 md:max-w-xs",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(h1,{className:"text-gray-400 w-4 h-4"})}),i.jsx("input",{type:"text",placeholder:"Buscar docente...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",value:Q,onChange:me=>q(me.target.value)})]})}),i.jsxs("div",{className:"flex gap-3 flex-wrap",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(vm,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[150px]",value:n.curso,onChange:me=>s(ye=>({...ye,curso:me.target.value})),children:[i.jsx("option",{value:"",children:"Todos los cursos"}),Nn.map(me=>i.jsx("option",{value:me,children:me},me))]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(wi,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[180px]",value:n.asignatura,onChange:me=>s(ye=>({...ye,asignatura:me.target.value})),children:[i.jsx("option",{value:"",children:"Todas las asignaturas"}),En.map(me=>i.jsx("option",{value:me,children:me},me))]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[i.jsxs("button",{onClick:()=>M(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(Yj,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Nuevo Docente"})]}),i.jsxs("button",{onClick:R,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(So,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Agregar Asignatura"})]}),i.jsxs("label",{className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white rounded-lg transition-all duration-200 shadow-sm cursor-pointer group",children:[i.jsx(m1,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Importar Excel"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:me=>{var ye;return((ye=me.target.files)==null?void 0:ye[0])&&Ae(me.target.files[0])}})]}),i.jsxs("button",{onClick:ke,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(RR,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Exportar Excel"})]}),i.jsxs("button",{onClick:()=>S(!0),disabled:h||r.length===0,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-cyan-500 to-sky-600 hover:from-cyan-600 hover:to-sky-700 text-white rounded-lg transition-all duration-200 shadow-sm group disabled:opacity-50",title:"Generar horario semanal automticamente (IA)",children:[h?i.jsx(Co,{className:"w-5 h-5 animate-spin"}):i.jsx(gA,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Generar horario (IA)"})]}),i.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(_l,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Abrir Resumen"})]}),i.jsxs("button",{onClick:Te,disabled:d.some(me=>me.tipo==="error")||h,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-amber-500 disabled:hover:to-orange-600 group",children:[h?i.jsx(Co,{className:"w-5 h-5 animate-spin"}):i.jsx(Fl,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:h?"Guardando...":"Guardar"})]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800/30 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ac,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),i.jsxs("h3",{className:"font-medium text-red-700 dark:text-red-300",children:["Validaciones y Alertas (",d.length,")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(eA,{className:"w-3 h-3"})," ",d.filter(me=>me.tipo==="error").length," Errores"]}),i.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-800/30 text-yellow-700 dark:text-yellow-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(Ew,{className:"w-3 h-3"})," ",d.filter(me=>me.tipo==="warning").length," Advertencias"]})]})]}),i.jsx("div",{className:"p-5",children:i.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map((me,ye)=>i.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm ${me.tipo==="error"?"bg-red-50 dark:bg-red-900/10 text-red-700 dark:text-red-300 border-l-4 border-red-500 dark:border-red-600":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-500 dark:border-yellow-600"}`,children:[me.tipo==="error"?i.jsx(eA,{className:"w-5 h-5 shrink-0"}):i.jsx(Ew,{className:"w-5 h-5 shrink-0"}),i.jsx("span",{className:"text-sm",children:me.mensaje})]},ye))})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ww,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asignaciones de Carga Horaria"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Correcto"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advertencia"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Error"})]})]})]}),i.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:i.jsxs("table",{className:"w-full min-w-[1000px]",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 dark:bg-blue-500"}),i.jsx("span",{children:"Estado"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-14 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Fi,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Docente"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(wi,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Asignatura"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(sz,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Func. Lectivas"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(Wc,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Hrs"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",colSpan:Nn.length,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5",children:[i.jsx(vm,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Cursos"}),i.jsx("span",{className:"ml-1 text-xs text-gray-400 font-normal",children:"(horas por curso)"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(U2,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"HA/HB"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky right-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsx("div",{className:"flex items-center justify-center gap-1.5",children:i.jsx("span",{children:"Acciones"})})})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:K.map((me,ye)=>{const oe=V[me.docenteId],fe=de(me.docenteId),be=ye===0||K[ye-1].docenteId!==me.docenteId,Pe=ye===K.length-1||K[ye+1].docenteId!==me.docenteId,$e=K.filter(He=>He.docenteId===me.docenteId),Ke=$e.length>1;let nt="hover:bg-gray-50 dark:hover:bg-gray-750 ";return Ke&&(be?nt+="border-t-2 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 ":nt+="bg-blue-50 dark:bg-blue-900/10 ",Pe&&(nt+="border-b-2 border-blue-200 dark:border-blue-800 mb-1 ")),i.jsxs("tr",{className:nt,children:[i.jsx("td",{className:"px-1 py-2 sticky left-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${fe==="green"?"bg-green-500":fe==="yellow"?"bg-yellow-500":fe==="red"?"bg-red-500":"bg-gray-500"}`}),Ke&&be&&i.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:$e.length})]})}),i.jsx("td",{className:"px-1 py-2 sticky left-10 z-10 bg-inherit",children:!Ke||be?i.jsxs("div",{children:[i.jsx("select",{value:me.docenteId,onChange:He=>ie(me.id,"docenteId",He.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${Ke?"font-medium":""}`,children:(Y.length>0?Y:e).map(He=>i.jsx("option",{value:He.id,children:He.nombre},He.id))}),Ke&&i.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[$e.length," asig."]})]}):i.jsx("div",{className:"pl-1 italic text-gray-500 dark:text-gray-400 text-xs whitespace-nowrap",children:" Mismo"})}),i.jsxs("td",{className:"px-1 py-2",children:[i.jsxs("select",{value:me.asignaturaOModulo||"",onChange:He=>ie(me.id,"asignaturaOModulo",He.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${Ke?"border-blue-300 dark:border-blue-700":""}`,children:[i.jsx("option",{value:"",children:"Seleccionar..."}),En.map(He=>i.jsx("option",{value:He,children:He},He))]}),Ke&&!be&&i.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Adicional"})]}),i.jsx("td",{className:"px-1 py-2",children:i.jsxs("div",{className:"space-y-1 w-full min-w-[200px]",children:[(me.funcionesLectivas||[]).map(He=>i.jsxs("div",{className:"flex gap-1 items-center",children:[i.jsx("input",{type:"text",value:He.nombre,onChange:it=>ne(me.id,He.id,"nombre",it.target.value),placeholder:"Nombre",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),i.jsx("input",{type:"number",value:He.horas,onChange:it=>ne(me.id,He.id,"horas",parseInt(it.target.value)||0),min:0,max:44,className:"w-10 px-1 py-1 border-y border-r border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"}),i.jsx("button",{onClick:()=>le(me.id,He.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-r",title:"Eliminar funcin",children:i.jsx(sn,{className:"w-3 h-3"})})]},He.id)),!me.funcionesLectivas&&i.jsx("div",{className:"flex gap-1 items-center",children:i.jsx("input",{type:"text",value:me.otraFuncion||"",onChange:He=>ie(me.id,"otraFuncion",He.target.value),placeholder:"Ej: Coordinador",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"})}),i.jsxs("button",{onClick:()=>X(me.id),className:"flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:[i.jsx(So,{className:"w-3 h-3"})," ",i.jsx("span",{className:"text-xs",children:"Agregar"})]})]})}),i.jsx("td",{className:"px-1 py-2 text-center",children:i.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:me.horasXAsig||0})}),i.jsx("td",{className:"px-1 py-2",children:i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1",children:Nn.map(He=>i.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-gray-750 p-1 rounded",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:He}),i.jsx("input",{type:"number",min:0,value:me.horasPorCurso[He]||"",onChange:it=>ae(me.id,He,parseInt(it.target.value)||0),className:"w-10 h-7 px-1 py-0 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"})]},He))})}),i.jsx("td",{className:"px-1 py-2 text-center whitespace-nowrap",children:oe&&i.jsxs("div",{className:"space-y-0",children:[i.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["HA: ",oe.HA," (",oe.restantesHA>=0?"+":"",oe.restantesHA,")"]}),i.jsxs("div",{className:"text-green-600 dark:text-green-400 text-xs",children:["HB: ",oe.HB," (",oe.restantesHB>=0?"+":"",oe.restantesHB,")"]})]})}),i.jsx("td",{className:"px-1 py-2 text-center sticky right-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("button",{onClick:()=>F(me.docenteId,me.docenteNombre),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Agregar otra asignatura a este docente",children:i.jsx(So,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>W(me.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Eliminar esta asignacin",children:i.jsx(sn,{className:"w-3.5 h-3.5"})})]})})]},me.id)})})]})})]}),o&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Panel de Resumen"}),i.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(Xd,{})})]}),i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"flex -mb-px px-6",children:[i.jsx("button",{onClick:()=>u("docentes"),className:`px-6 py-3 font-medium text-sm ${c==="docentes"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Docente"}),i.jsx("button",{onClick:()=>u("cursos"),className:`px-6 py-3 font-medium text-sm ${c==="cursos"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Curso"}),i.jsx("button",{onClick:()=>u("funciones"),className:`px-6 py-3 font-medium text-sm ${c==="funciones"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Funcin"}),i.jsx("button",{onClick:()=>u("totales"),className:`px-6 py-3 font-medium text-sm ${c==="totales"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Totales Generales"})]})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[c==="docentes"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Docente"}),i.jsx("div",{className:"grid gap-4",children:e.map(me=>{const ye=V[me.id],oe=r.filter(fe=>fe.docenteId===me.id);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:me.nombre}),i.jsx("div",{className:`w-3 h-3 rounded-full ${de(me.id)==="green"?"bg-green-500":de(me.id)==="yellow"?"bg-yellow-500":de(me.id)==="red"?"bg-red-500":"bg-gray-500"}`})]}),ye&&i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contrato:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[me.horasContrato,"h"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HA:"}),i.jsxs("span",{className:"ml-1 font-medium text-blue-600 dark:text-blue-400",children:[ye.sumCursos,"/",ye.HA]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HB:"}),i.jsxs("span",{className:"ml-1 font-medium text-green-600 dark:text-green-400",children:[ye.sumFunciones,"/",ye.HB]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Asignaciones:"}),i.jsx("span",{className:"ml-1 font-medium",children:oe.length})]})]}),oe.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Asignaturas asignadas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:oe.map(fe=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:fe.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[fe.horasXAsig||0,"h"]})]},fe.id))})]}),i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Distribucin por curso:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:Nn.filter(fe=>oe.some(be=>be.horasPorCurso[fe])).map(fe=>{const be=oe.reduce((Pe,$e)=>Pe+($e.horasPorCurso[fe]||0),0);return i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:fe}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[be,"h"]})]},fe)})})]})]}),oe.some(fe=>(fe.funcionesLectivas||[]).length>0)&&i.jsxs("div",{className:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Funciones lectivas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:oe.flatMap(fe=>(fe.funcionesLectivas||[]).map(be=>({id:`${fe.id}_${be.id}`,nombre:be.nombre,horas:be.horas}))).map(fe=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:fe.nombre||"Sin nombre"}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[fe.horas,"h"]})]},fe.id))})]})]})]},me.id)})})]}),c==="cursos"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Curso"}),i.jsx("div",{className:"grid gap-4",children:Nn.filter(me=>r.some(ye=>ye.horasPorCurso[me])).map(me=>{const ye=r.filter(be=>be.horasPorCurso[me]),oe=[];ye.forEach(be=>{const Pe=oe.findIndex($e=>$e.id===be.docenteId);Pe===-1?oe.push({id:be.docenteId,nombre:be.docenteNombre,asignaciones:[be]}):oe[Pe].asignaciones.push(be)});const fe=ye.reduce((be,Pe)=>be+(Pe.horasPorCurso[me]||0),0);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:me}),i.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-md",children:["Total: ",fe,"h"]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("div",{className:"grid gap-2",children:oe.map(be=>i.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:be.nombre}),i.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[be.asignaciones.reduce((Pe,$e)=>Pe+($e.horasPorCurso[me]||0),0),"h"]})]}),i.jsx("ul",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-2",children:be.asignaciones.filter(Pe=>Pe.horasPorCurso[me]).map(Pe=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:Pe.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{children:[Pe.horasPorCurso[me],"h"]})]},Pe.id))})]},be.id))})]})]},me)})})]}),c==="funciones"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Funciones Lectivas"}),(()=>{const me=[];return r.forEach(ye=>{(ye.funcionesLectivas||[]).forEach(oe=>{if(!oe.nombre)return;const fe=me.find(be=>be.nombre===oe.nombre);if(!fe)me.push({nombre:oe.nombre,docentes:[{id:ye.docenteId,nombre:ye.docenteNombre,horas:oe.horas}],totalHoras:oe.horas});else{const be=fe.docentes.find(Pe=>Pe.id===ye.docenteId);be?be.horas+=oe.horas:fe.docentes.push({id:ye.docenteId,nombre:ye.docenteNombre,horas:oe.horas}),fe.totalHoras+=oe.horas}})}),me.sort((ye,oe)=>oe.totalHoras-ye.totalHoras),me.length===0?i.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-750",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No hay funciones lectivas asignadas."})}):i.jsx("div",{className:"grid gap-4",children:me.map((ye,oe)=>i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:ye.nombre}),i.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-md",children:["Total: ",ye.totalHoras,"h"]})]}),i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ye.docentes.sort((fe,be)=>be.horas-fe.horas).map(fe=>i.jsxs("li",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[i.jsx("span",{children:fe.nombre}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[fe.horas,"h"]})]},fe.id))})]},oe))})})()]}),c==="totales"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Resumen de Totales Generales"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Total de Horas Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:(()=>{let me=0;return r.forEach(ye=>{ye.horasPorCurso&&Object.values(ye.horasPorCurso).forEach(oe=>typeof oe=="number"&&(me+=oe)),(ye.funcionesLectivas||[]).forEach(oe=>typeof oe.horas=="number"&&(me+=oe.horas))}),me})()}),i.jsx("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400",children:"Total de horas lectivas asignadas (HA)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"Total de Horas No Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:(()=>{let me=0;return e.forEach(ye=>{const oe=typeof ye.horasContrato=="number"?ye.horasContrato:0;me+=p2(oe)}),me})()}),i.jsx("span",{className:"text-sm text-green-500 dark:text-green-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:"Total de horas no lectivas (HB)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-2",children:"Total de Horas Contrato"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:e.reduce((ye,oe)=>{const fe=typeof oe.horasContrato=="number"?oe.horasContrato:0;return ye+fe},0)}),i.jsx("span",{className:"text-sm text-amber-500 dark:text-amber-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-amber-600 dark:text-amber-400",children:"Total de horas contratadas (Lectivas + No lectivas)"})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md",children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Distribucin de Horas"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distribucin Porcentual"}),(()=>{let me=0,ye=0;r.forEach(Pe=>{Pe.horasPorCurso&&Object.values(Pe.horasPorCurso).forEach($e=>typeof $e=="number"&&(me+=$e)),(Pe.funcionesLectivas||[]).forEach($e=>typeof $e.horas=="number"&&(me+=$e.horas))}),e.forEach(Pe=>{const $e=typeof Pe.horasContrato=="number"?Pe.horasContrato:0;ye+=p2($e)});const oe=me+ye,fe=oe>0?Math.round(me/oe*100):0,be=oe>0?Math.round(ye/oe*100):0;return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Horas Lectivas (HA)"}),i.jsxs("span",{className:"font-bold",children:[fe,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 rounded-full",style:{width:`${fe}%`}})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Horas No Lectivas (HB)"}),i.jsxs("span",{className:"font-bold",children:[be,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 rounded-full",style:{width:`${be}%`}})})]}),i.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-750 rounded-lg text-xs text-gray-700 dark:text-gray-300",children:[i.jsx("p",{children:i.jsx("strong",{children:"Distribucin Objetivo:"})}),i.jsx("p",{children:" Horas Lectivas (HA): 65% del contrato"}),i.jsx("p",{children:" Horas No Lectivas (HB): 35% del contrato"}),i.jsx("p",{children:" Horas Contrato Total = Horas Lectivas + Horas No Lectivas"}),i.jsx("div",{className:"mt-2",children:Math.abs(fe-65)<=5?i.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:" La distribucin est dentro de los parmetros recomendados"}):i.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:" La distribucin difiere de los parmetros recomendados"})})]})]})})()]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estadsticas Generales"}),i.jsxs("ul",{className:"space-y-3 text-sm",children:[i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de docentes:"}),i.jsx("span",{className:"font-semibold",children:e.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de asignaciones:"}),i.jsx("span",{className:"font-semibold",children:r.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Promedio horas contrato:"}),i.jsxs("span",{className:"font-semibold",children:[e.length>0?(e.reduce((me,ye)=>me+(typeof ye.horasContrato=="number"?ye.horasContrato:0),0)/e.length).toFixed(1):"0"," horas"]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("h5",{className:"text-md font-medium text-red-700 dark:text-red-300 mb-2",children:["Advertencias (",d.length,")"]}),i.jsx("div",{className:"max-h-32 overflow-y-auto p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("ul",{className:"text-xs space-y-1 text-red-600 dark:text-red-400",children:[d.slice(0,5).map((me,ye)=>i.jsxs("li",{className:"flex items-center gap-1",children:[me.tipo==="error"?"":"",i.jsx("span",{children:me.mensaje})]},ye)),d.length>5&&i.jsxs("li",{className:"italic",children:["Y ",d.length-5," ms..."]})]})})]})]})]})]})]})]})]})}),i.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ul,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Generacin de Horario Semanal"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"relative",children:i.jsx("select",{className:"pl-3 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm",value:T,onChange:me=>C(me.target.value),children:Nn.map(me=>i.jsx("option",{value:me,children:me},me))})}),v&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:Re,disabled:h,className:"px-3 py-2 bg-emerald-500 hover:bg-emerald-600 text-white text-sm rounded-lg transition-all duration-200 shadow-sm",children:"Guardar horario"}),i.jsx("button",{onClick:Le,disabled:h,className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 text-sm rounded-lg transition-all duration-200",children:"Descartar"})]})]})]}),i.jsxs("div",{className:"p-5 space-y-4",children:[O&&i.jsxs("div",{className:`px-4 py-3 rounded-lg text-sm ${O==="IA"?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300"}`,children:["Fuente: ",O==="IA"?"Generado por IA":"Generado por algoritmo (fallback)"]}),w.length>0&&i.jsxs("div",{className:"px-4 py-3 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 text-sm",children:[i.jsxs("div",{className:"font-medium mb-1",children:["Conflictos detectados (",w.length,"):"]}),i.jsx("ul",{className:"list-disc ml-5 space-y-1",children:w.map((me,ye)=>i.jsx("li",{children:me},ye))})]}),v||g?i.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:i.jsxs("table",{className:"w-full min-w-[800px] border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:"Bloque"}),pA.map(me=>i.jsx("th",{className:"px-3 py-2 text-center text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:me},me))]})}),i.jsx("tbody",{children:(()=>{const me=oe=>{const[fe,be]=oe.split(":").map(Number);return fe*60+be},ye=[];for(let oe=0;oe<Ws.length;oe++){const fe=Ws[oe];ye.push({type:"block",label:`Bloque ${fe.bloque}`,start:fe.inicio,end:fe.fin,bloque:fe.bloque});const be=Ws[oe+1];if(be&&me(be.inicio)-me(fe.fin)>0){const $e=fe.fin==="13:00"&&be.inicio==="13:40";ye.push({type:"break",label:$e?"Almuerzo":"Recreo",start:fe.fin,end:be.inicio})}}return ye.map((oe,fe)=>{if(oe.type==="break")return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[i.jsxs("td",{className:`px-3 py-2 text-sm font-medium whitespace-nowrap ${oe.label==="Almuerzo"?"text-amber-700":"text-slate-600"}`,children:[oe.label," ",oe.start&&oe.end?`(${oe.start}  ${oe.end})`:""]}),pA.map(Pe=>i.jsx("td",{className:`px-3 py-2 align-top ${oe.label==="Almuerzo"?"bg-amber-50 dark:bg-amber-900/20":"bg-slate-50 dark:bg-slate-800/50"}`},`${Pe}_break_${fe}`))]},`break_${fe}`);const be=Ws.find(Pe=>Pe.bloque===oe.bloque);return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[i.jsxs("td",{className:"px-3 py-2 text-sm text-gray-700 dark:text-gray-300 whitespace-nowrap",children:[oe.bloque,". ",oe.start," - ",oe.end]}),pA.map(Pe=>{var nt,He,it;const $e=(it=(He=(nt=v||g)==null?void 0:nt[Pe])==null?void 0:He[String(oe.bloque)])==null?void 0:it[T],Ke=Pe==="Viernes"&&be&&be.fin>"13:00";return i.jsx("td",{className:`px-3 py-2 align-top ${Ke?"bg-red-50 dark:bg-red-900/20":""}`,title:Ke?"No permitido (Viernes > 13:00)":"",children:$e&&($e.asignatura||$e.profesor)?i.jsxs("div",{className:`p-2 rounded border ${Ke?"border-red-300 dark:border-red-700 bg-red-50/60 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750"}`,children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:$e.asignatura}),i.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:$e.profesor})]}):i.jsx("div",{className:`h-10 rounded ${Ke?"bg-red-50/60 dark:bg-red-900/10 border border-red-200 dark:border-red-800":"bg-white dark:bg-gray-800 border border-dashed border-gray-200 dark:border-gray-700"}`})},`${Pe}_${oe.bloque}`)})]},`block_${oe.bloque}`)})})()})]})}):i.jsx("div",{className:"px-4 py-3 rounded-lg bg-gray-50 dark:bg-gray-750 text-gray-600 dark:text-gray-300 text-sm",children:'An no hay un horario guardado ni generado. Usa "Generar horario (IA)" para crear una propuesta.'})]})]}),i.jsxs("div",{className:"mt-8 p-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 dark:from-blue-900/10 dark:to-indigo-900/10 rounded-xl overflow-hidden border border-blue-200 dark:border-blue-800 shadow-sm",children:[i.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(U2,{className:"w-5 h-5"}),i.jsx("h4",{className:"font-medium",children:"Informacin sobre Distribucin de Horas"})]})}),i.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-700 dark:text-blue-300 shrink-0",children:i.jsx(vm,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Horas Lectivas (HA)"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Segn tabla oficial (ej: 44h  ",dk(44),"h, 30h  ",dk(30),"h)"]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-700 dark:text-green-300 shrink-0",children:i.jsx(ww,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Funciones Lectivas"}),i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Las horas de las funciones se suman a las horas lectivas (HA)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-700 dark:text-amber-300 shrink-0",children:i.jsx(sz,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Horas No Lectivas (HB)"}),i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["El resto del contrato (ej: 44h  ",p2(44),"h, 30h  ",p2(30),"h)"]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 mb-4",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Frmulas de clculo"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-mono",children:"HA"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Lectivas = 65% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded text-xs font-mono",children:"HB"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas No Lectivas = 35% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-mono",children:"HC"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Contrato = HA + HB"})]})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Gua de semforos"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Completo"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Faltan horas"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Excede lmites"})]})]})]})]})]})]}),i.jsx(Ce,{}),_&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg overflow-hidden animate-scaleIn",children:[i.jsxs("div",{className:"p-5 bg-gradient-to-r from-cyan-500 to-sky-600 text-white flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Reglas para generar horario"}),i.jsx("button",{onClick:()=>S(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",children:i.jsx(Xd,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mximo de horas de mecnica juntas"}),i.jsx("select",{value:L.maxConsecutivasMecanica,onChange:me=>P(ye=>({...ye,maxConsecutivasMecanica:parseInt(me.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:Array.from({length:10},(me,ye)=>ye+1).map(me=>i.jsx("option",{value:me,children:me},me))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mximo de horas de plan general juntas"}),i.jsx("select",{value:L.maxConsecutivasPlanGeneral,onChange:me=>P(ye=>({...ye,maxConsecutivasPlanGeneral:parseInt(me.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[1,2,3].map(me=>i.jsx("option",{value:me,children:me},me))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Asignaturas prcticas en horario P.M."}),i.jsx("p",{className:"text-xs text-gray-500",children:"Ubica taller/prctica/laboratorio en bloques desde 13:40"})]}),i.jsx("input",{type:"checkbox",checked:!!L.practicasPM,onChange:me=>P(ye=>({...ye,practicasPM:me.target.checked})),className:"w-5 h-5"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"3 medio slo horas de plan general"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Para cursos 3*, restringe a asignaturas de plan general"})]}),i.jsx("input",{type:"checkbox",checked:!!L.terceroSoloPlanGeneral,onChange:me=>P(ye=>({...ye,terceroSoloPlanGeneral:me.target.checked})),className:"w-5 h-5"})]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200",children:"Cancelar"}),i.jsxs("button",{onClick:async()=>{S(!1),await re()},className:"px-4 py-2 rounded-lg bg-cyan-600 hover:bg-cyan-700 text-white flex items-center gap-2",children:[i.jsx(gA,{className:"w-4 h-4"})," Generar con estas reglas"]})]})]})}),h&&i.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col items-center animate-pulse",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 border-solid rounded-full"}),i.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 dark:border-blue-400 border-t-transparent animate-spin rounded-full absolute top-0 left-0"})]}),i.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300",children:"Procesando solicitud..."}),i.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Por favor, espere un momento"})]})})]})},_S="acciones_pedagogicas",wFe=(e,t)=>{var n,s,o,l;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(n=t.creadoTs)==null?void 0:n.toMillis)==null?void 0:s.call(n))??Date.now()};const r=t,a=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:a,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((l=(o=r.creadoTs)==null?void 0:o.toMillis)==null?void 0:l.call(o))??Date.now()}};async function NFe(){const e=[];try{const t=Dt(ht(st,_S),Yt("creadoTs","desc"));(await Ir(t)).docs.forEach(a=>e.push(wFe(a.id,a.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function EFe(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:ir.now()};await Zr(ht(st,_S),t)}async function CFe(e,t){const r=Jt(ht(st,_S),e),a={...t};a.area&&!a.dimension&&(a.dimension=a.area,delete a.area),a.enlaceDocumento&&(a.enlaces=[String(a.enlaceDocumento)],delete a.enlaceDocumento),Array.isArray(a.indicadores)===!1&&typeof a.indicadores=="string"&&(a.indicadores=String(a.indicadores).split(",").map(n=>n.trim()).filter(Boolean)),await Bo(r,a)}async function jFe(e){const t=Jt(ht(st,_S),e);await xn(t)}function kne(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=kne(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function fa(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=kne(e))&&(a&&(a+=" "),a+=t);return a}var YB={},JB={},MV;function kFe(){return MV||(MV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(JB)),JB}var ZB={},UV;function _ne(){return UV||(UV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(ZB)),ZB}var eT={},QV;function Sne(){return QV||(QV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;return typeof r=="string"||typeof r=="symbol"?r:Object.is((a=r==null?void 0:r.valueOf)==null?void 0:a.call(r),-0)?"-0":String(r)}e.toKey=t}(eT)),eT}var tT={},HV;function I8(){return HV||(HV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const a=[],n=r.length;if(n===0)return a;let s=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(a.push(""),s++);s<n;){const u=r[s];l?u==="\\"&&s+1<n?(s++,o+=r[s]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,a.push(o),o=""):o+=u:u==="["?(c=!0,o&&(a.push(o),o="")):u==="."?o&&(a.push(o),o=""):o+=u,s++}return o&&a.push(o),a}e.toPath=t}(tT)),tT}var zV;function O8(){return zV||(zV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kFe(),r=_ne(),a=Sne(),n=I8();function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,n.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=a.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(YB)),YB}var rT,VV;function _Fe(){return VV||(VV=1,rT=O8().get),rT}var SFe=_Fe();const Jm=Dl(SFe);var aT={exports:{}},tn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $V;function BFe(){if($V)return tn;$V=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,n=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function j(B){if(typeof B=="object"&&B!==null){var T=B.$$typeof;switch(T){case t:switch(B=B.type,B){case c:case u:case a:case s:case n:case f:return B;default:switch(B=B&&B.$$typeof,B){case l:case d:case g:case m:case o:return B;default:return T}}case r:return T}}}function O(B){return j(B)===u}return tn.AsyncMode=c,tn.ConcurrentMode=u,tn.ContextConsumer=l,tn.ContextProvider=o,tn.Element=t,tn.ForwardRef=d,tn.Fragment=a,tn.Lazy=g,tn.Memo=m,tn.Portal=r,tn.Profiler=s,tn.StrictMode=n,tn.Suspense=f,tn.isAsyncMode=function(B){return O(B)||j(B)===c},tn.isConcurrentMode=O,tn.isContextConsumer=function(B){return j(B)===l},tn.isContextProvider=function(B){return j(B)===o},tn.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===t},tn.isForwardRef=function(B){return j(B)===d},tn.isFragment=function(B){return j(B)===a},tn.isLazy=function(B){return j(B)===g},tn.isMemo=function(B){return j(B)===m},tn.isPortal=function(B){return j(B)===r},tn.isProfiler=function(B){return j(B)===s},tn.isStrictMode=function(B){return j(B)===n},tn.isSuspense=function(B){return j(B)===f},tn.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===a||B===u||B===s||B===n||B===f||B===h||typeof B=="object"&&B!==null&&(B.$$typeof===g||B.$$typeof===m||B.$$typeof===o||B.$$typeof===l||B.$$typeof===d||B.$$typeof===v||B.$$typeof===y||B.$$typeof===w||B.$$typeof===x)},tn.typeOf=j,tn}var GV;function TFe(){return GV||(GV=1,aT.exports=BFe()),aT.exports}var IFe=TFe(),ao=e=>e===0?0:e>0?1:-1,iu=e=>typeof e=="number"&&e!=+e,ng=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,cr=e=>(typeof e=="number"||e instanceof Number)&&!iu(e),wA=e=>cr(e)||typeof e=="string",OFe=0,zw=e=>{var t=++OFe;return"".concat(e||"").concat(t)},Ol=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!cr(t)&&typeof t!="string")return a;var s;if(ng(t)){if(r==null)return a;var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return iu(s)&&(s=a),n&&r!=null&&s>r&&(s=r),s},Bne=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[e[a]])r[e[a]]=!0;else return!0;return!1},Ov=(e,t)=>cr(e)&&cr(t)?r=>e+r*(t-e):()=>t;function Jx(e,t,r){return cr(e)&&cr(t)?e+r*(t-e):t}function FFe(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):Jm(a,t))===r)}var Fs=e=>e===null||typeof e>"u",FN=e=>Fs(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),DFe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function F8(e){if(typeof e!="string")return!1;var t=DFe;return t.includes(e)}var PFe=["viewBox","children"],qV=["points","pathLength"],nT={svg:PFe,polygon:qV,polyline:qV},D8=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(n=>{F8(n)&&(a[n]=s=>r[n](r,s))}),a},RFe=(e,t,r)=>a=>(e(t,r,a),null),cx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(n=>{var s=e[n];F8(n)&&typeof s=="function"&&(a||(a={}),a[n]=RFe(s,t,r))}),a},LFe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Tne(e){if(typeof e!="string")return!1;var t=LFe;return t.includes(e)}function pl(e){var t=Object.entries(e).filter(r=>{var[a]=r;return Tne(a)});return Object.fromEntries(t)}var KV=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",WV=null,sT=null,Ine=e=>{if(e===WV&&Array.isArray(sT))return sT;var t=[];return N.Children.forEach(e,r=>{Fs(r)||(IFe.isFragment(r)?t=t.concat(Ine(r.props.children)):t.push(r))}),sT=t,WV=e,t};function DN(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(n=>KV(n)):a=[KV(t)],Ine(e).forEach(n=>{var s=Jm(n,"type.displayName")||Jm(n,"type.name");a.indexOf(s)!==-1&&r.push(n)}),r}var MFe=(e,t,r,a)=>{var n;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(n=a&&(nT==null?void 0:nT[a]))!==null&&n!==void 0?n:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!a&&s.includes(t)||Tne(t)),c=!!r&&F8(t);return o||l||c},Va=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(N.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var n={};return Object.keys(a).forEach(s=>{var o;MFe((o=a)===null||o===void 0?void 0:o[s],s,t,r)&&(n[s]=a[s])}),n},UFe=["children","width","height","viewBox","className","style","title","desc"];function iF(){return iF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},iF.apply(null,arguments)}function QFe(e,t){if(e==null)return{};var r,a,n=HFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function HFe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var P8=N.forwardRef((e,t)=>{var{children:r,width:a,height:n,viewBox:s,className:o,style:l,title:c,desc:u}=e,d=QFe(e,UFe),f=s||{width:a,height:n,x:0,y:0},h=fa("recharts-surface",o);return N.createElement("svg",iF({},Va(d,!0,"svg"),{className:h,width:a,height:n,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),N.createElement("title",null,c),N.createElement("desc",null,u),r)}),zFe=["children","className"];function oF(){return oF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},oF.apply(null,arguments)}function VFe(e,t){if(e==null)return{};var r,a,n=$Fe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $Fe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var As=N.forwardRef((e,t)=>{var{children:r,className:a}=e,n=VFe(e,zFe),s=fa("recharts-layer",a);return N.createElement("g",oF({className:s},Va(n,!0),{ref:t}),r)}),R8=WJ(),One=N.createContext(null),GFe=()=>N.useContext(One);function Mn(e){return function(){return e}}const Fne=Math.cos,hk=Math.sin,of=Math.sqrt,mk=Math.PI,SS=2*mk,lF=Math.PI,cF=2*lF,$p=1e-6,qFe=cF-$p;function Dne(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function KFe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Dne;const r=10**t;return function(a){this._+=a[0];for(let n=1,s=a.length;n<s;++n)this._+=Math.round(arguments[n]*r)/r+a[n]}}class WFe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Dne:KFe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,n){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+n}`}bezierCurveTo(t,r,a,n,s,o){this._append`C${+t},${+r},${+a},${+n},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,a,n,s){if(t=+t,r=+r,a=+a,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=a-t,u=n-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>$p)if(!(Math.abs(f*c-u*d)>$p)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=a-o,g=n-l,x=c*c+u*u,v=m*m+g*g,y=Math.sqrt(x),w=Math.sqrt(h),j=s*Math.tan((lF-Math.acos((x+h-v)/(2*y*w)))/2),O=j/w,B=j/y;Math.abs(O-1)>$p&&this._append`L${t+O*d},${r+O*f}`,this._append`A${s},${s},0,0,${+(f*m>d*g)},${this._x1=t+B*c},${this._y1=r+B*u}`}}arc(t,r,a,n,s,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(n),c=a*Math.sin(n),u=t+l,d=r+c,f=1^o,h=o?n-s:s-n;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>$p||Math.abs(this._y1-d)>$p)&&this._append`L${u},${d}`,a&&(h<0&&(h=h%cF+cF),h>qFe?this._append`A${a},${a},0,1,${f},${t-l},${r-c}A${a},${a},0,1,${f},${this._x1=u},${this._y1=d}`:h>$p&&this._append`A${a},${a},0,${+(h>=lF)},${f},${this._x1=t+a*Math.cos(s)},${this._y1=r+a*Math.sin(s)}`)}rect(t,r,a,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+n}h${-a}Z`}toString(){return this._}}function L8(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new WFe(t)}function M8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pne(e){this._context=e}Pne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function BS(e){return new Pne(e)}function Rne(e){return e[0]}function Lne(e){return e[1]}function Mne(e,t){var r=Mn(!0),a=null,n=BS,s=null,o=L8(l);e=typeof e=="function"?e:e===void 0?Rne:Mn(e),t=typeof t=="function"?t:t===void 0?Lne:Mn(t);function l(c){var u,d=(c=M8(c)).length,f,h=!1,m;for(a==null&&(s=n(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Mn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Mn(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Mn(!!c),l):r},l.curve=function(c){return arguments.length?(n=c,a!=null&&(s=n(a)),l):n},l.context=function(c){return arguments.length?(c==null?a=s=null:s=n(a=c),l):a},l}function TC(e,t,r){var a=null,n=Mn(!0),s=null,o=BS,l=null,c=L8(u);e=typeof e=="function"?e:e===void 0?Rne:Mn(+e),t=typeof t=="function"?t:Mn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Lne:Mn(+r);function u(f){var h,m,g,x=(f=M8(f)).length,v,y=!1,w,j=new Array(x),O=new Array(x);for(s==null&&(l=o(w=c())),h=0;h<=x;++h){if(!(h<x&&n(v=f[h],h,f))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(j[g],O[g]);l.lineEnd(),l.areaEnd()}y&&(j[h]=+e(v,h,f),O[h]=+t(v,h,f),l.point(a?+a(v,h,f):j[h],r?+r(v,h,f):O[h]))}if(w)return l=null,w+""||null}function d(){return Mne().defined(n).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Mn(+f),a=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Mn(+f),u):e},u.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Mn(+f),u):a},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Mn(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Mn(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Mn(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(a).y(t)},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Mn(!!f),u):n},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class Une{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function XFe(e){return new Une(e,!0)}function YFe(e){return new Une(e,!1)}const U8={draw(e,t){const r=of(t/mk);e.moveTo(r,0),e.arc(0,0,r,0,SS)}},JFe={draw(e,t){const r=of(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Qne=of(1/3),ZFe=Qne*2,eDe={draw(e,t){const r=of(t/ZFe),a=r*Qne;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},tDe={draw(e,t){const r=of(t),a=-r/2;e.rect(a,a,r,r)}},rDe=.8908130915292852,Hne=hk(mk/10)/hk(7*mk/10),aDe=hk(SS/10)*Hne,nDe=-Fne(SS/10)*Hne,sDe={draw(e,t){const r=of(t*rDe),a=aDe*r,n=nDe*r;e.moveTo(0,-r),e.lineTo(a,n);for(let s=1;s<5;++s){const o=SS*s/5,l=Fne(o),c=hk(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*n,c*a+l*n)}e.closePath()}},iT=of(3),iDe={draw(e,t){const r=-of(t/(iT*3));e.moveTo(0,r*2),e.lineTo(-iT*r,-r),e.lineTo(iT*r,-r),e.closePath()}},Pu=-.5,Ru=of(3)/2,uF=1/of(12),oDe=(uF/2+1)*3,lDe={draw(e,t){const r=of(t/oDe),a=r/2,n=r*uF,s=a,o=r*uF+r,l=-s,c=o;e.moveTo(a,n),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(Pu*a-Ru*n,Ru*a+Pu*n),e.lineTo(Pu*s-Ru*o,Ru*s+Pu*o),e.lineTo(Pu*l-Ru*c,Ru*l+Pu*c),e.lineTo(Pu*a+Ru*n,Pu*n-Ru*a),e.lineTo(Pu*s+Ru*o,Pu*o-Ru*s),e.lineTo(Pu*l+Ru*c,Pu*c-Ru*l),e.closePath()}};function cDe(e,t){let r=null,a=L8(n);e=typeof e=="function"?e:Mn(e||U8),t=typeof t=="function"?t:Mn(t===void 0?64:+t);function n(){let s;if(r||(r=s=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return n.type=function(s){return arguments.length?(e=typeof s=="function"?s:Mn(s),n):e},n.size=function(s){return arguments.length?(t=typeof s=="function"?s:Mn(+s),n):t},n.context=function(s){return arguments.length?(r=s??null,n):r},n}function pk(){}function gk(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function zne(e){this._context=e}zne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uDe(e){return new zne(e)}function Vne(e){this._context=e}Vne.prototype={areaStart:pk,areaEnd:pk,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dDe(e){return new Vne(e)}function $ne(e){this._context=e}$ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:gk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fDe(e){return new $ne(e)}function Gne(e){this._context=e}Gne.prototype={areaStart:pk,areaEnd:pk,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ADe(e){return new Gne(e)}function XV(e){return e<0?-1:1}function YV(e,t,r){var a=e._x1-e._x0,n=t-e._x1,s=(e._y1-e._y0)/(a||n<0&&-0),o=(r-e._y1)/(n||a<0&&-0),l=(s*n+o*a)/(a+n);return(XV(s)+XV(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function JV(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function oT(e,t,r){var a=e._x0,n=e._y0,s=e._x1,o=e._y1,l=(s-a)/3;e._context.bezierCurveTo(a+l,n+l*t,s-l,o-l*r,s,o)}function xk(e){this._context=e}xk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oT(this,this._t0,JV(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,oT(this,JV(this,r=YV(this,e,t)),r);break;default:oT(this,this._t0,r=YV(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function qne(e){this._context=new Kne(e)}(qne.prototype=Object.create(xk.prototype)).point=function(e,t){xk.prototype.point.call(this,t,e)};function Kne(e){this._context=e}Kne.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,n,s){this._context.bezierCurveTo(t,e,a,r,s,n)}};function hDe(e){return new xk(e)}function mDe(e){return new qne(e)}function Wne(e){this._context=e}Wne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=ZV(e),n=ZV(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(a[0][s],n[0][s],a[1][s],n[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ZV(e){var t,r=e.length-1,a,n=new Array(r),s=new Array(r),o=new Array(r);for(n[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)n[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(n[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=n[t]/s[t-1],s[t]-=a,o[t]-=a*o[t-1];for(n[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)n[t]=(o[t]-n[t+1])/s[t];for(s[r-1]=(e[r]+n[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-n[t+1];return[n,s]}function pDe(e){return new Wne(e)}function TS(e,t){this._context=e,this._t=t}TS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function gDe(e){return new TS(e,.5)}function xDe(e){return new TS(e,0)}function vDe(e){return new TS(e,1)}function Tb(e,t){if((o=e.length)>1)for(var r=1,a,n,s=e[t[0]],o,l=s.length;r<o;++r)for(n=s,s=e[t[r]],a=0;a<l;++a)s[a][1]+=s[a][0]=isNaN(n[a][1])?n[a][0]:n[a][1]}function dF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function bDe(e,t){return e[t]}function yDe(e){const t=[];return t.key=e,t}function wDe(){var e=Mn([]),t=dF,r=Tb,a=bDe;function n(s){var o=Array.from(e.apply(this,arguments),yDe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+a(f,o[l].key,u,s)]).data=f;for(l=0,d=M8(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return n.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Mn(Array.from(s)),n):e},n.value=function(s){return arguments.length?(a=typeof s=="function"?s:Mn(+s),n):a},n.order=function(s){return arguments.length?(t=s==null?dF:typeof s=="function"?s:Mn(Array.from(s)),n):t},n.offset=function(s){return arguments.length?(r=s??Tb,n):r},n}function NDe(e,t){if((a=e.length)>0){for(var r,a,n=0,s=e[0].length,o;n<s;++n){for(o=r=0;r<a;++r)o+=e[r][n][1]||0;if(o)for(r=0;r<a;++r)e[r][n][1]/=o}Tb(e,t)}}function EDe(e,t){if((n=e.length)>0){for(var r=0,a=e[t[0]],n,s=a.length;r<s;++r){for(var o=0,l=0;o<n;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}Tb(e,t)}}function CDe(e,t){if(!(!((o=e.length)>0)||!((s=(n=e[t[0]]).length)>0))){for(var r=0,a=1,n,s,o;a<s;++a){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[a][1]||0,h=d[a-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var x=e[t[g]],v=x[a][1]||0,y=x[a-1][1]||0;m+=v-y}c+=f,u+=m*f}n[a-1][1]+=n[a-1][0]=r,c&&(r-=u/c)}n[a-1][1]+=n[a-1][0]=r,Tb(e,t)}}var jDe=["type","size","sizeType"];function fF(){return fF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fF.apply(null,arguments)}function e$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function t$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e$(Object(r),!0).forEach(function(a){kDe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kDe(e,t,r){return(t=_De(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _De(e){var t=SDe(e,"string");return typeof t=="symbol"?t:t+""}function SDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BDe(e,t){if(e==null)return{};var r,a,n=TDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function TDe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Xne={symbolCircle:U8,symbolCross:JFe,symbolDiamond:eDe,symbolSquare:tDe,symbolStar:sDe,symbolTriangle:iDe,symbolWye:lDe},IDe=Math.PI/180,ODe=e=>{var t="symbol".concat(FN(e));return Xne[t]||U8},FDe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*IDe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},DDe=(e,t)=>{Xne["symbol".concat(FN(e))]=t},Q8=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,n=BDe(e,jDe),s=t$(t$({},n),{},{type:t,size:r,sizeType:a}),o=()=>{var f=ODe(t),h=cDe().type(f).size(FDe(r,a,t));return h()},{className:l,cx:c,cy:u}=s,d=Va(s,!0);return c===+c&&u===+u&&r===+r?N.createElement("path",fF({},d,{className:fa("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};Q8.registerSymbol=DDe;function AF(){return AF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},AF.apply(null,arguments)}function r$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function PDe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r$(Object(r),!0).forEach(function(a){H8(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function H8(e,t,r){return(t=RDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RDe(e){var t=LDe(e,"string");return typeof t=="symbol"?t:t+""}function LDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lu=32;class z8 extends N.PureComponent{renderIcon(t,r){var{inactiveColor:a}=this.props,n=Lu/2,s=Lu/6,o=Lu/3,l=t.inactive?a:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return N.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:n,x2:Lu,y2:n,className:"recharts-legend-icon"});if(c==="line")return N.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(n,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(n,`
            H`).concat(Lu,"M").concat(2*o,",").concat(n,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if(c==="rect")return N.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Lu/8,"h").concat(Lu,"v").concat(Lu*3/4,"h").concat(-Lu,"z"),className:"recharts-legend-icon"});if(N.isValidElement(t.legendIcon)){var u=PDe({},t);return delete u.legendIcon,N.cloneElement(t.legendIcon,u)}return N.createElement(Q8,{fill:l,cx:n,cy:n,size:Lu,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:a,formatter:n,inactiveColor:s,iconType:o}=this.props,l={x:0,y:0,width:Lu,height:Lu},c={display:a==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||n,m=fa({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,f):d.value;return N.createElement("li",AF({className:m,style:c,key:"legend-item-".concat(f)},cx(this.props,d,f)),N.createElement(P8,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,o)),N.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:a}=this.props;if(!t||!t.length)return null;var n={padding:0,margin:0,textAlign:r==="horizontal"?a:"left"};return N.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}H8(z8,"displayName","Legend");H8(z8,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var lT={},cT={},a$;function MDe(){return a$||(a$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const n=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=a(o);n.has(l)||n.set(l,o)}return Array.from(n.values())}e.uniqBy=t}(cT)),cT}var uT={},n$;function IS(){return n$||(n$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(uT)),uT}var dT={},fT={},AT={},s$;function UDe(){return s$||(s$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(AT)),AT}var i$;function V8(){return i$||(i$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UDe();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r}(fT)),fT}var hT={},o$;function QDe(){return o$||(o$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(hT)),hT}var l$;function HDe(){return l$||(l$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V8(),r=QDe();function a(n){return r.isObjectLike(n)&&t.isArrayLike(n)}e.isArrayLikeObject=a}(dT)),dT}var mT={},pT={},c$;function zDe(){return c$||(c$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O8();function r(a){return function(n){return t.get(n,a)}}e.property=r}(pT)),pT}var gT={},xT={},vT={},bT={},u$;function Yne(){return u$||(u$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(bT)),bT}var yT={},d$;function Jne(){return d$||(d$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(yT)),yT}var wT={},f$;function $8(){return f$||(f$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.eq=t}(wT)),wT}var A$;function VDe(){return A$||(A$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G8(),r=Yne(),a=Jne(),n=$8();function s(f,h,m){return typeof m!="function"?t.isMatch(f,h):o(f,h,function g(x,v,y,w,j,O){const B=m(x,v,y,w,j,O);return B!==void 0?!!B:o(x,v,g,O)},new Map)}function o(f,h,m,g){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,m,g);case"function":return Object.keys(h).length>0?o(f,{...h},m,g):n.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:n.eq(f,h)}}function l(f,h,m,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,m,g);if(h instanceof Map)return c(f,h,m,g);if(h instanceof Set)return d(f,h,m,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let v=0;v<x.length;v++){const y=x[v];if(!a.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!m(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,m,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,v]of h.entries()){const y=f.get(x);if(m(y,v,x,f,h,g)===!1)return!1}return!0}function u(f,h,m,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let v=0;v<h.length;v++){const y=h[v];let w=!1;for(let j=0;j<f.length;j++){if(x.has(j))continue;const O=f[j];let B=!1;if(m(O,y,v,f,h,g)&&(B=!0),B){x.add(j),w=!0;break}}if(!w)return!1}return!0}function d(f,h,m,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],m,g):!1}e.isMatchWith=s,e.isSetMatch=d}(vT)),vT}var h$;function G8(){return h$||(h$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VDe();function r(a,n){return t.isMatchWith(a,n,()=>{})}e.isMatch=r}(xT)),xT}var NT={},ET={},CT={},m$;function Zne(){return m$||(m$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t}(CT)),CT}var jT={},p$;function q8(){return p$||(p$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(jT)),jT}var kT={},g$;function K8(){return g$||(g$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",n="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",j="[object Uint32Array]",O="[object BigUint64Array]",B="[object Int8Array]",T="[object Int16Array]",C="[object Int32Array]",_="[object BigInt64Array]",S="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=_,e.bigUint64ArrayTag=O,e.booleanTag=n,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=S,e.float64ArrayTag=L,e.functionTag=f,e.int16ArrayTag=T,e.int32ArrayTag=C,e.int8ArrayTag=B,e.mapTag=c,e.numberTag=a,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=j,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(kT)),kT}var _T={},x$;function $De(){return x$||(x$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(_T)),_T}var v$;function ese(){return v$||(v$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zne(),r=q8(),a=K8(),n=Jne(),s=$De();function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,m=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,m);if(x!=null)return x;if(n.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[y,w]of d)v.set(y,l(w,y,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const y of d)v.add(l(y,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,f,h=d,m,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<x.length;v++){const y=x[v],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=l(f[y],y,h,m,g))}}function u(d){switch(r.getTag(d)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(ET)),ET}var b$;function GDe(){return b$||(b$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ese();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r}(NT)),NT}var y$;function qDe(){return y$||(y$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G8(),r=GDe();function a(n){return n=r.cloneDeep(n),s=>t.isMatch(s,n)}e.matches=a}(gT)),gT}var ST={},BT={},TT={},w$;function KDe(){return w$||(w$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ese(),r=K8();function a(n,s){return t.cloneDeepWith(n,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!=null)return d;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new n.constructor(n==null?void 0:n.valueOf());return t.copyProperties(f,n),f}case r.argumentsTag:{const f={};return t.copyProperties(f,n),f.length=n.length,f[Symbol.iterator]=n[Symbol.iterator],f}default:return}})}e.cloneDeepWith=a}(TT)),TT}var N$;function WDe(){return N$||(N$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KDe();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r}(BT)),BT}var IT={},OT={},E$;function tse(){return E$||(E$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,n=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<n;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r}(OT)),OT}var FT={},C$;function XDe(){return C$||(C$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q8();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r}(FT)),FT}var j$;function YDe(){return j$||(j$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_ne(),r=tse(),a=XDe(),n=I8();function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=n.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||a.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(IT)),IT}var k$;function JDe(){return k$||(k$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G8(),r=Sne(),a=WDe(),n=O8(),s=YDe();function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=a.cloneDeep(c),function(u){const d=n.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o}(ST)),ST}var _$;function W8(){return _$||(_$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IS(),r=zDe(),a=qDe(),n=JDe();function s(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?n.matchesProperty(o[0],o[1]):a.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=s}(mT)),mT}var S$;function ZDe(){return S$||(S$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MDe(),r=IS(),a=HDe(),n=W8();function s(o,l=r.identity){return a.isArrayLikeObject(o)?t.uniqBy(Array.from(o),n.iteratee(l)):[]}e.uniqBy=s}(lT)),lT}var DT,B$;function ePe(){return B$||(B$=1,DT=ZDe().uniqBy),DT}var tPe=ePe();const T$=Dl(tPe);function rse(e,t,r){return t===!0?T$(e,r):typeof t=="function"?T$(e,t):e}var PT={exports:{}},RT={},LT={exports:{}},MT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I$;function rPe(){if(I$)return MT;I$=1;var e=e1();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,n=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(f,h){var m=h(),g=a({inst:{value:m,getSnapshot:h}}),x=g[0].inst,v=g[1];return s(function(){x.value=m,x.getSnapshot=h,c(x)&&v({inst:x})},[f,m,h]),n(function(){return c(x)&&v({inst:x}),f(function(){c(x)&&v({inst:x})})},[f]),o(m),m}function c(f){var h=f.getSnapshot;f=f.value;try{var m=h();return!r(f,m)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return MT.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,MT}var O$;function aPe(){return O$||(O$=1,LT.exports=rPe()),LT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F$;function nPe(){if(F$)return RT;F$=1;var e=e1(),t=aPe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var a=typeof Object.is=="function"?Object.is:r,n=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return RT.useSyncExternalStoreWithSelector=function(u,d,f,h,m){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(T){if(!w){if(w=!0,j=T,T=h(T),m!==void 0&&x.hasValue){var C=x.value;if(m(C,T))return O=C}return O=T}if(C=O,a(j,T))return C;var _=h(T);return m!==void 0&&m(C,_)?(j=T,C):(j=T,O=_)}var w=!1,j,O,B=f===void 0?null:f;return[function(){return y(d())},B===null?void 0:function(){return y(B())}]},[d,f,h,m]);var v=n(u,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},RT}var D$;function sPe(){return D$||(D$=1,PT.exports=nPe()),PT.exports}var ase=sPe();const iPe=Dl(ase);var X8=N.createContext(null),oPe=e=>e,Wn=()=>{var e=N.useContext(X8);return e?e.store.dispatch:oPe},K5=()=>{},lPe=()=>K5,cPe=(e,t)=>e===t;function ar(e){var t=N.useContext(X8);return ase.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:lPe,t?t.store.getState:K5,t?t.store.getState:K5,t?e:K5,cPe)}function uPe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function dPe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function fPe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var P$=e=>Array.isArray(e)?e:[e];function APe(e){const t=Array.isArray(e[0])?e[0]:e;return fPe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function hPe(e,t){const r=[],{length:a}=e;for(let n=0;n<a;n++)r.push(e[n].apply(null,t));return r}var mPe=class{constructor(e){this.value=e}deref(){return this.value}},pPe=typeof WeakRef<"u"?WeakRef:mPe,gPe=0,R$=1;function IC(){return{s:gPe,v:void 0,o:null,p:null}}function nse(e,t={}){let r=IC();const{resultEqualityCheck:a}=t;let n,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const v=x.get(g);v===void 0?(l=IC(),x.set(g,l)):l=v}else{let x=l.p;x===null&&(l.p=x=new Map);const v=x.get(g);v===void 0?(l=IC(),x.set(g,l)):l=v}}const u=l;let d;if(l.s===R$)d=l.v;else if(d=e.apply(null,arguments),s++,a){const h=((f=n==null?void 0:n.deref)==null?void 0:f.call(n))??n;h!=null&&a(h,d)&&(d=h,s!==0&&s--),n=typeof d=="object"&&d!==null||typeof d=="function"?new pPe(d):d}return u.s=R$,u.v=d,d}return o.clearCache=()=>{r=IC(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function xPe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...n)=>{let s=0,o=0,l,c={},u=n.pop();typeof u=="object"&&(c=u,u=n.pop()),uPe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=nse,argsMemoizeOptions:g=[]}=d,x=P$(h),v=P$(g),y=APe(n),w=f(function(){return s++,u.apply(null,arguments)},...x),j=m(function(){o++;const B=hPe(y,arguments);return l=w.apply(null,B),l},...v);return Object.assign(j,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(a,{withTypes:()=>a}),a}var mt=xPe(nse),vPe=Object.assign((e,t=mt)=>{dPe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(s=>e[s]);return t(a,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>vPe}),UT={},QT={},HT={},L$;function bPe(){return L$||(L$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,n,s)=>{if(a!==n){const o=t(a),l=t(n);if(o===l&&o===0){if(a<n)return s==="desc"?1:-1;if(a>n)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};e.compareValues=r}(HT)),HT}var zT={},VT={},M$;function sse(){return M$||(M$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(VT)),VT}var U$;function yPe(){return U$||(U$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sse(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function n(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(a.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}e.isKey=n}(zT)),zT}var Q$;function wPe(){return Q$||(Q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bPe(),r=yPe(),a=I8();function n(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:a.toPath(m)}));return s.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let x=0;x<f.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],l[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=n}(QT)),QT}var $T={},H$;function NPe(){return H$||(H$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const n=[],s=Math.floor(a),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):n.push(d)}};return o(r,0),n}e.flatten=t}($T)),$T}var GT={},z$;function ise(){return z$||(z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tse(),r=V8(),a=Yne(),n=$8();function s(o,l,c){return a.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?n.eq(c[l],o):!1}e.isIterateeCall=s}(GT)),GT}var V$;function EPe(){return V$||(V$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wPe(),r=NPe(),a=ise();function n(s,...o){const l=o.length;return l>1&&a.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&a.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(s,r.flatten(o),["asc"])}e.sortBy=n}(UT)),UT}var qT,$$;function CPe(){return $$||($$=1,qT=EPe().sortBy),qT}var jPe=CPe();const OS=Dl(jPe);var ose=e=>e.legend.settings,kPe=e=>e.legend.size,_Pe=e=>e.legend.payload,SPe=mt([_Pe,ose],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?OS(a,r):a});function BPe(){return ar(SPe)}var OC=1;function lse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=N.useState({height:0,left:0,top:0,width:0}),a=N.useCallback(n=>{if(n!=null){var s=n.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-t.height)>OC||Math.abs(o.left-t.left)>OC||Math.abs(o.top-t.top)>OC||Math.abs(o.width-t.width)>OC)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function vo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var TPe=typeof Symbol=="function"&&Symbol.observable||"@@observable",G$=TPe,KT=()=>Math.random().toString(36).substring(7).split("").join("."),IPe={INIT:`@@redux/INIT${KT()}`,REPLACE:`@@redux/REPLACE${KT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${KT()}`},vk=IPe;function Y8(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function cse(e,t,r){if(typeof e!="function")throw new Error(vo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(vo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(vo(1));return r(cse)(e,t)}let a=e,n=t,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((v,y)=>{o.set(y,v)}))}function d(){if(c)throw new Error(vo(3));return n}function f(v){if(typeof v!="function")throw new Error(vo(4));if(c)throw new Error(vo(5));let y=!0;u();const w=l++;return o.set(w,v),function(){if(y){if(c)throw new Error(vo(6));y=!1,u(),o.delete(w),s=null}}}function h(v){if(!Y8(v))throw new Error(vo(7));if(typeof v.type>"u")throw new Error(vo(8));if(typeof v.type!="string")throw new Error(vo(17));if(c)throw new Error(vo(9));try{c=!0,n=a(n,v)}finally{c=!1}return(s=o).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(vo(10));a=v,h({type:vk.REPLACE})}function g(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(vo(11));function w(){const O=y;O.next&&O.next(d())}return w(),{unsubscribe:v(w)}},[G$](){return this}}}return h({type:vk.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[G$]:g}}function OPe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:vk.INIT})>"u")throw new Error(vo(12));if(typeof r(void 0,{type:vk.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(vo(13))})}function use(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(r[o]=e[o])}const a=Object.keys(r);let n;try{OPe(r)}catch(s){n=s}return function(o={},l){if(n)throw n;let c=!1;const u={};for(let d=0;d<a.length;d++){const f=a[d],h=r[f],m=o[f],g=h(m,l);if(typeof g>"u")throw l&&l.type,new Error(vo(14));u[f]=g,c=c||g!==m}return c=c||a.length!==Object.keys(o).length,c?u:o}}function bk(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function FPe(...e){return t=>(r,a)=>{const n=t(r,a);let s=()=>{throw new Error(vo(15))};const o={getState:n.getState,dispatch:(c,...u)=>s(c,...u)},l=e.map(c=>c(o));return s=bk(...l)(n.dispatch),{...n,dispatch:s}}}function dse(e){return Y8(e)&&"type"in e&&typeof e.type=="string"}var fse=Symbol.for("immer-nothing"),q$=Symbol.for("immer-draftable"),ou=Symbol.for("immer-state");function Ld(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ib=Object.getPrototypeOf;function zg(e){return!!e&&!!e[ou]}function zh(e){var t;return e?Ase(e)||Array.isArray(e)||!!e[q$]||!!((t=e.constructor)!=null&&t[q$])||DS(e)||PS(e):!1}var DPe=Object.prototype.constructor.toString();function Ase(e){if(!e||typeof e!="object")return!1;const t=Ib(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===DPe}function yk(e,t){FS(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function FS(e){const t=e[ou];return t?t.type_:Array.isArray(e)?1:DS(e)?2:PS(e)?3:0}function hF(e,t){return FS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hse(e,t,r){const a=FS(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function PPe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function DS(e){return e instanceof Map}function PS(e){return e instanceof Set}function Gp(e){return e.copy_||e.base_}function mF(e,t){if(DS(e))return new Map(e);if(PS(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Ase(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[ou];let n=Reflect.ownKeys(a);for(let s=0;s<n.length;s++){const o=n[s],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Ib(e),a)}else{const a=Ib(e);if(a!==null&&r)return{...e};const n=Object.create(a);return Object.assign(n,e)}}function J8(e,t=!1){return RS(e)||zg(e)||!zh(e)||(FS(e)>1&&(e.set=e.add=e.clear=e.delete=RPe),Object.freeze(e),t&&Object.entries(e).forEach(([r,a])=>J8(a,!0))),e}function RPe(){Ld(2)}function RS(e){return Object.isFrozen(e)}var LPe={};function Vg(e){const t=LPe[e];return t||Ld(0,e),t}var Vw;function mse(){return Vw}function MPe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function K$(e,t){t&&(Vg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function pF(e){gF(e),e.drafts_.forEach(UPe),e.drafts_=null}function gF(e){e===Vw&&(Vw=e.parent_)}function W$(e){return Vw=MPe(Vw,e)}function UPe(e){const t=e[ou];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function X$(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ou].modified_&&(pF(t),Ld(4)),zh(e)&&(e=wk(t,e),t.parent_||Nk(t,e)),t.patches_&&Vg("Patches").generateReplacementPatches_(r[ou].base_,e,t.patches_,t.inversePatches_)):e=wk(t,r,[]),pF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==fse?e:void 0}function wk(e,t,r){if(RS(t))return t;const a=t[ou];if(!a)return yk(t,(n,s)=>Y$(e,a,t,n,s,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return Nk(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const n=a.copy_;let s=n,o=!1;a.type_===3&&(s=new Set(n),n.clear(),o=!0),yk(s,(l,c)=>Y$(e,a,n,l,c,r,o)),Nk(e,n,!1),r&&e.patches_&&Vg("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function Y$(e,t,r,a,n,s,o){if(zg(n)){const l=s&&t&&t.type_!==3&&!hF(t.assigned_,a)?s.concat(a):void 0,c=wk(e,n,l);if(hse(r,a,c),zg(c))e.canAutoFreeze_=!1;else return}else o&&r.add(n);if(zh(n)&&!RS(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;wk(e,n),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,a)&&Nk(e,n)}}function Nk(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&J8(t,r)}function QPe(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:mse(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=a,s=Z8;r&&(n=[a],s=$w);const{revoke:o,proxy:l}=Proxy.revocable(n,s);return a.draft_=l,a.revoke_=o,l}var Z8={get(e,t){if(t===ou)return e;const r=Gp(e);if(!hF(r,t))return HPe(e,r,t);const a=r[t];return e.finalized_||!zh(a)?a:a===WT(e.base_,t)?(XT(e),e.copy_[t]=vF(a,e)):a},has(e,t){return t in Gp(e)},ownKeys(e){return Reflect.ownKeys(Gp(e))},set(e,t,r){const a=pse(Gp(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const n=WT(Gp(e),t),s=n==null?void 0:n[ou];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(PPe(r,n)&&(r!==void 0||hF(e.base_,t)))return!0;XT(e),xF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return WT(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,XT(e),xF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Gp(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Ld(11)},getPrototypeOf(e){return Ib(e.base_)},setPrototypeOf(){Ld(12)}},$w={};yk(Z8,(e,t)=>{$w[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$w.deleteProperty=function(e,t){return $w.set.call(this,e,t,void 0)};$w.set=function(e,t,r){return Z8.set.call(this,e[0],t,r,e[0])};function WT(e,t){const r=e[ou];return(r?Gp(r):e)[t]}function HPe(e,t,r){var n;const a=pse(t,r);return a?"value"in a?a.value:(n=a.get)==null?void 0:n.call(e.draft_):void 0}function pse(e,t){if(!(t in e))return;let r=Ib(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Ib(r)}}function xF(e){e.modified_||(e.modified_=!0,e.parent_&&xF(e.parent_))}function XT(e){e.copy_||(e.copy_=mF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var zPe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Ld(6),a!==void 0&&typeof a!="function"&&Ld(7);let n;if(zh(t)){const s=W$(this),o=vF(t,void 0);let l=!0;try{n=r(o),l=!1}finally{l?pF(s):gF(s)}return K$(s,a),X$(n,s)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===fse&&(n=void 0),this.autoFreeze_&&J8(n,!0),a){const s=[],o=[];Vg("Patches").generateReplacementPatches_(t,n,s,o),a(s,o)}return n}else Ld(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,n;return[this.produce(t,r,(o,l)=>{a=o,n=l}),a,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){zh(e)||Ld(8),zg(e)&&(e=Th(e));const t=W$(this),r=vF(e,void 0);return r[ou].isManual_=!0,gF(t),r}finishDraft(e,t){const r=e&&e[ou];(!r||!r.isManual_)&&Ld(9);const{scope_:a}=r;return K$(a,t),X$(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));const a=Vg("Patches").applyPatches_;return zg(e)?a(e,t):this.produce(e,n=>a(n,t))}};function vF(e,t){const r=DS(e)?Vg("MapSet").proxyMap_(e,t):PS(e)?Vg("MapSet").proxySet_(e,t):QPe(e,t);return(t?t.scope_:mse()).drafts_.push(r),r}function Th(e){return zg(e)||Ld(10,e),gse(e)}function gse(e){if(!zh(e)||RS(e))return e;const t=e[ou];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=mF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=mF(e,!0);return yk(r,(a,n)=>{hse(r,a,gse(n))}),t&&(t.finalized_=!1),r}var lu=new zPe,xse=lu.produce;lu.produceWithPatches.bind(lu);lu.setAutoFreeze.bind(lu);lu.setUseStrictShallowCopy.bind(lu);lu.applyPatches.bind(lu);lu.createDraft.bind(lu);lu.finishDraft.bind(lu);function vse(e){return({dispatch:r,getState:a})=>n=>s=>typeof s=="function"?s(r,a,e):n(s)}var VPe=vse(),$Pe=vse,GPe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bk:bk.apply(null,arguments)};function nd(e,t){function r(...a){if(t){let n=t(...a);if(!n)throw new Error(au(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>dse(a)&&a.type===e,r}var bse=class x2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,x2.prototype)}static get[Symbol.species](){return x2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new x2(...t[0].concat(this)):new x2(...t.concat(this))}};function J$(e){return zh(e)?xse(e,()=>{}):e}function FC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function qPe(e){return typeof e=="boolean"}var KPe=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:n=!0,actionCreatorCheck:s=!0}=t??{};let o=new bse;return r&&(qPe(r)?o.push(VPe):o.push($Pe(r.extraArgument))),o},WPe="RTK_autoBatch",Z$=e=>t=>{setTimeout(t,e)},XPe=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let n=!0,s=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Z$(10):e.type==="callback"?e.queueNotification:Z$(e.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},a,{subscribe(d){const f=()=>n&&d(),h=a.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return n=!((f=d==null?void 0:d.meta)!=null&&f[WPe]),s=!n,s&&(o||(o=!0,c(u))),a.dispatch(d)}finally{n=!0}}})},YPe=e=>function(r){const{autoBatch:a=!0}=r??{};let n=new bse(e);return a&&n.push(XPe(typeof a=="object"?a:void 0)),n};function JPe(e){const t=KPe(),{reducer:r=void 0,middleware:a,devTools:n=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(Y8(r))l=use(r);else throw new Error(au(1));let c;typeof a=="function"?c=a(t):c=t();let u=bk;n&&(u=GPe({trace:!1,...typeof n=="object"&&n}));const d=FPe(...c),f=YPe(d);let h=typeof o=="function"?o(f):f();const m=u(...h);return cse(l,s,m)}function yse(e){const t={},r=[];let a;const n={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(au(28));if(l in t)throw new Error(au(29));return t[l]=o,n},addMatcher(s,o){return r.push({matcher:s,reducer:o}),n},addDefaultCase(s){return a=s,n}};return e(n),[t,r,a]}function ZPe(e){return typeof e=="function"}function eRe(e,t){let[r,a,n]=yse(t),s;if(ZPe(e))s=()=>J$(e());else{const l=J$(e);s=()=>l}function o(l=s(),c){let u=[r[c.type],...a.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[n]),u.reduce((d,f)=>{if(f)if(zg(d)){const m=f(d,c);return m===void 0?d:m}else{if(zh(d))return xse(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return o.getInitialState=s,o}var tRe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rRe=(e=21)=>{let t="",r=e;for(;r--;)t+=tRe[Math.random()*64|0];return t},aRe=Symbol.for("rtk-slice-createasyncthunk");function nRe(e,t){return`${e}/${t}`}function sRe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[aRe];return function(n){const{name:s,reducerPath:o=s}=n;if(!s)throw new Error(au(11));const l=(typeof n.reducers=="function"?n.reducers(oRe()):n.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(O,B){const T=typeof O=="string"?O:O.type;if(!T)throw new Error(au(12));if(T in u.sliceCaseReducersByType)throw new Error(au(13));return u.sliceCaseReducersByType[T]=B,d},addMatcher(O,B){return u.sliceMatchers.push({matcher:O,reducer:B}),d},exposeAction(O,B){return u.actionCreators[O]=B,d},exposeCaseReducer(O,B){return u.sliceCaseReducersByName[O]=B,d}};c.forEach(O=>{const B=l[O],T={reducerName:O,type:nRe(s,O),createNotation:typeof n.reducers=="function"};cRe(B)?dRe(T,B,d,t):lRe(T,B,d)});function f(){const[O={},B=[],T=void 0]=typeof n.extraReducers=="function"?yse(n.extraReducers):[n.extraReducers],C={...O,...u.sliceCaseReducersByType};return eRe(n.initialState,_=>{for(let S in C)_.addCase(S,C[S]);for(let S of u.sliceMatchers)_.addMatcher(S.matcher,S.reducer);for(let S of B)_.addMatcher(S.matcher,S.reducer);T&&_.addDefaultCase(T)})}const h=O=>O,m=new Map,g=new WeakMap;let x;function v(O,B){return x||(x=f()),x(O,B)}function y(){return x||(x=f()),x.getInitialState()}function w(O,B=!1){function T(_){let S=_[O];return typeof S>"u"&&B&&(S=FC(g,T,y)),S}function C(_=h){const S=FC(m,B,()=>new WeakMap);return FC(S,_,()=>{const L={};for(const[P,k]of Object.entries(n.selectors??{}))L[P]=iRe(k,_,()=>FC(g,_,y),B);return L})}return{reducerPath:O,getSelectors:C,get selectors(){return C(T)},selectSlice:T}}const j={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(o),injectInto(O,{reducerPath:B,...T}={}){const C=B??o;return O.inject({reducerPath:C,reducer:v},T),{...j,...w(C,!0)}}};return j}}function iRe(e,t,r,a){function n(s,...o){let l=t(s);return typeof l>"u"&&a&&(l=r()),e(l,...o)}return n.unwrapped=e,n}var du=sRe();function oRe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function lRe({type:e,reducerName:t,createNotation:r},a,n){let s,o;if("reducer"in a){if(r&&!uRe(a))throw new Error(au(17));s=a.reducer,o=a.prepare}else s=a;n.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?nd(e,o):nd(e))}function cRe(e){return e._reducerDefinitionType==="asyncThunk"}function uRe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function dRe({type:e,reducerName:t},r,a,n){if(!n)throw new Error(au(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=n(e,s,d);a.exposeAction(t,f),o&&a.addCase(f.fulfilled,o),l&&a.addCase(f.pending,l),c&&a.addCase(f.rejected,c),u&&a.addMatcher(f.settled,u),a.exposeCaseReducer(t,{fulfilled:o||DC,pending:l||DC,rejected:c||DC,settled:u||DC})}function DC(){}var fRe="task",wse="listener",Nse="completed",eL="cancelled",ARe=`task-${eL}`,hRe=`task-${Nse}`,bF=`${wse}-${eL}`,mRe=`${wse}-${Nse}`,LS=class{constructor(e){sB(this,"name","TaskAbortError");sB(this,"message");this.code=e,this.message=`${fRe} ${eL} (reason: ${e})`}},tL=(e,t)=>{if(typeof e!="function")throw new TypeError(au(32))},Ek=()=>{},Ese=(e,t=Ek)=>(e.catch(t),e),Cse=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),vg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},bg=e=>{if(e.aborted){const{reason:t}=e;throw new LS(t)}};function jse(e,t){let r=Ek;return new Promise((a,n)=>{const s=()=>n(new LS(e.reason));if(e.aborted){s();return}r=Cse(e,s),t.finally(()=>r()).then(a,n)}).finally(()=>{r=Ek})}var pRe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof LS?"cancelled":"rejected",error:r}}finally{t==null||t()}},Ck=e=>t=>Ese(jse(e,t).then(r=>(bg(e),r))),kse=e=>{const t=Ck(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:tb}=Object,eG={},MS="listenerMiddleware",gRe=(e,t)=>{const r=a=>Cse(e,()=>vg(a,e.reason));return(a,n)=>{tL(a);const s=new AbortController;r(s);const o=pRe(async()=>{bg(e),bg(s.signal);const l=await a({pause:Ck(s.signal),delay:kse(s.signal),signal:s.signal});return bg(s.signal),l},()=>vg(s,hRe));return n!=null&&n.autoJoin&&t.push(o.catch(Ek)),{result:Ck(e)(o),cancel(){vg(s,ARe)}}}},xRe=(e,t)=>{const r=async(a,n)=>{bg(t);let s=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:a,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];n!=null&&l.push(new Promise(c=>setTimeout(c,n,null)));try{const c=await jse(t,Promise.race(l));return bg(t),c}finally{s()}};return(a,n)=>Ese(r(a,n))},_se=e=>{let{type:t,actionCreator:r,matcher:a,predicate:n,effect:s}=e;if(t)n=nd(t).match;else if(r)t=r.type,n=r.match;else if(a)n=a;else if(!n)throw new Error(au(21));return tL(s),{predicate:n,type:t,effect:s}},Sse=tb(e=>{const{type:t,predicate:r,effect:a}=_se(e);return{id:rRe(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(au(22))}}},{withTypes:()=>Sse}),tG=(e,t)=>{const{type:r,effect:a,predicate:n}=_se(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===n)&&s.effect===a)},yF=e=>{e.pending.forEach(t=>{vg(t,bF)})},vRe=e=>()=>{e.forEach(yF),e.clear()},rG=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},Bse=tb(nd(`${MS}/add`),{withTypes:()=>Bse}),bRe=nd(`${MS}/removeAll`),Tse=tb(nd(`${MS}/remove`),{withTypes:()=>Tse}),yRe=(...e)=>{console.error(`${MS}/error`,...e)},PN=(e={})=>{const t=new Map,{extra:r,onError:a=yRe}=e;tL(a);const n=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&yF(d)}),s=d=>{const f=tG(t,d)??Sse(d);return n(f)};tb(s,{withTypes:()=>s});const o=d=>{const f=tG(t,d);return f&&(f.unsubscribe(),d.cancelActive&&yF(f)),!!f};tb(o,{withTypes:()=>o});const l=async(d,f,h,m)=>{const g=new AbortController,x=xRe(s,g.signal),v=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,tb({},h,{getOriginalState:m,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:kse(g.signal),pause:Ck(g.signal),extra:r,signal:g.signal,fork:gRe(g.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,j)=>{y!==g&&(vg(y,bF),j.delete(y))})},cancel:()=>{vg(g,bF),d.pending.delete(g)},throwIfCancelled:()=>{bg(g.signal)}})))}catch(y){y instanceof LS||rG(a,y,{raisedBy:"effect"})}finally{await Promise.all(v),vg(g,mRe),d.pending.delete(g)}},c=vRe(t);return{middleware:d=>f=>h=>{if(!dse(h))return f(h);if(Bse.match(h))return s(h.payload);if(bRe.match(h)){c();return}if(Tse.match(h))return o(h.payload);let m=d.getState();const g=()=>{if(m===eG)throw new Error(au(23));return m};let x;try{if(x=f(h),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const w of y){let j=!1;try{j=w.predicate(h,v,m)}catch(O){j=!1,rG(a,O,{raisedBy:"predicate"})}j&&l(w,h,d,g)}}}finally{m=eG}return x},startListening:s,stopListening:o,clearListeners:c}};function au(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var wRe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Ise=du({name:"chartLayout",initialState:wRe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:NRe,setLayout:ERe,setChartSize:CRe,setScale:jRe}=Ise.actions,kRe=Ise.reducer;function aG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function nG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aG(Object(r),!0).forEach(function(a){_Re(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _Re(e,t,r){return(t=SRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SRe(e){var t=BRe(e,"string");return typeof t=="symbol"?t:t+""}function BRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jk=Math.PI/180,TRe=e=>e*180/Math.PI,Xa=(e,t,r,a)=>({x:e+Math.cos(-jk*a)*r,y:t+Math.sin(-jk*a)*r}),Ose=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},IRe=(e,t)=>{var{x:r,y:a}=e,{x:n,y:s}=t;return Math.sqrt((r-n)**2+(a-s)**2)},ORe=(e,t)=>{var{x:r,y:a}=e,{cx:n,cy:s}=t,o=IRe({x:r,y:a},{x:n,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-n)/o,c=Math.acos(l);return a>s&&(c=2*Math.PI-c),{radius:o,angle:TRe(c),angleInRadian:c}},FRe=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),n=Math.floor(r/360),s=Math.min(a,n);return{startAngle:t-s*360,endAngle:r-s*360}},DRe=(e,t)=>{var{startAngle:r,endAngle:a}=t,n=Math.floor(r/360),s=Math.floor(a/360),o=Math.min(n,s);return e+o*360},PRe=(e,t)=>{var{x:r,y:a}=e,{radius:n,angle:s}=ORe({x:r,y:a},t),{innerRadius:o,outerRadius:l}=t;if(n<o||n>l||n===0)return null;var{startAngle:c,endAngle:u}=FRe(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?nG(nG({},t),{},{radius:n,angle:DRe(d,t)}):null},Fse=e=>!N.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Dse(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function sG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function qu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sG(Object(r),!0).forEach(function(a){RRe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function RRe(e,t,r){return(t=LRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LRe(e){var t=MRe(e,"string");return typeof t=="symbol"?t:t+""}function MRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qn(e,t,r){return Fs(e)||Fs(t)?r:wA(t)?Jm(e,t,r):typeof t=="function"?t(e):r}var URe=(e,t,r,a,n)=>{var s,o=-1,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(ao(d-u)!==ao(f-d)){var m=[];if(ao(f-d)===ao(n[1]-n[0])){h=f;var g=d+n[1]-n[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+n[1]-n[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){({index:o}=r[c]);break}}}else if(t){for(var j=0;j<l;j++)if(j===0&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j>0&&j<l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j===l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2){({index:o}=t[j]);break}}return o},QRe=(e,t,r)=>{if(t&&r){var{width:a,height:n}=r,{align:s,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&cr(e[s]))return qu(qu({},e),{},{[s]:e[s]+(a||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&cr(e[o]))return qu(qu({},e),{},{[o]:e[o]+(n||0)})}return e},up=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Pse=(e,t,r,a)=>{if(a)return e.map(l=>l.coordinate);var n,s,o=e.map(l=>(l.coordinate===t&&(n=!0),l.coordinate===r&&(s=!0),l.coordinate));return n||o.push(t),s||o.push(r),o},Rse=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:n,range:s,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=n==="category"&&o.bandwidth?o.bandwidth()/g:0;if(x=m==="angleAxis"&&s&&s.length>=2?ao(s[0]-s[1])*2*x:x,f||h){var v=(f||h||[]).map((y,w)=>{var j=a?a.indexOf(y):y;return{coordinate:o(j)+x,value:y,offset:x,index:w}});return v.filter(y=>!iu(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:o(y)+x,value:y,index:w,offset:x})):o.ticks&&d!=null?o.ticks(d).map((y,w)=>({coordinate:o(y)+x,value:y,offset:x,index:w})):o.domain().map((y,w)=>({coordinate:o(y)+x,value:a?a[y]:y,index:w,offset:x}))},iG=1e-4,HRe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,a=e.range(),n=Math.min(a[0],a[1])-iG,s=Math.max(a[0],a[1])+iG,o=e(t[0]),l=e(t[r-1]);(o<n||o>s||l<n||l>s)&&e.domain([t[0],t[r-1]])}},zRe=(e,t)=>{if(!t||t.length!==2||!cr(t[0])||!cr(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),n=[e[0],e[1]];return(!cr(e[0])||e[0]<r)&&(n[0]=r),(!cr(e[1])||e[1]>a)&&(n[1]=a),n[0]>a&&(n[0]=a),n[1]<r&&(n[1]=r),n},VRe=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var n=0,s=0,o=0;o<t;++o){var l=iu(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=n,e[o][r][1]=n+l,n=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},$Re=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var n=0,s=0;s<t;++s){var o=iu(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=n,e[s][r][1]=n+o,n=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},GRe={sign:VRe,expand:NDe,none:Tb,silhouette:EDe,wiggle:CDe,positive:$Re},qRe=(e,t,r)=>{var a=GRe[r],n=wDe().keys(t).value((s,o)=>+Qn(s,o,0)).order(dF).offset(a);return n(e)};function KRe(e){return e==null?void 0:String(e)}var oG=e=>{var{axis:t,ticks:r,offset:a,bandSize:n,entry:s,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+a:null;var l=Qn(s,t.dataKey,t.scale.domain()[o]);return Fs(l)?null:t.scale(l)-n/2+a},WRe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var a=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return a<=0&&n>=0?0:n<0?n:a}return r[0]},XRe=e=>{var t=e.flat(2).filter(cr);return[Math.min(...t),Math.max(...t)]},YRe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],JRe=(e,t,r)=>{if(e!=null)return YRe(Object.keys(e).reduce((a,n)=>{var s=e[n],{stackedData:o}=s,l=o.reduce((c,u)=>{var d=Dse(u,t,r),f=XRe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]))},lG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Gw=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var n=OS(t,d=>d.coordinate),s=1/0,o=1,l=n.length;o<l;o++){var c=n[o],u=n[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function uG(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:n,name:s}=e;return qu(qu({},t),{},{dataKey:r,payload:a,value:n,name:s})}function y1(e,t){if(e)return String(e);if(typeof t=="string")return t}function ZRe(e,t,r,a,n){if(r==="horizontal"||r==="vertical"){var s=e>=n.left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height;return s?{x:e,y:t}:null}return a?PRe({x:e,y:t},a):null}var e8e=(e,t,r,a)=>{var n=t.find(u=>u&&u.index===r);if(n){if(e==="horizontal")return{x:n.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:n.coordinate};if(e==="centric"){var s=n.coordinate,{radius:o}=a;return qu(qu(qu({},a),Xa(a.cx,a.cy,o,s)),{},{angle:s,radius:o})}var l=n.coordinate,{angle:c}=a;return qu(qu(qu({},a),Xa(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},t8e=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,o0=e=>e.layout.width,l0=e=>e.layout.height,r8e=e=>e.layout.scale,Lse=e=>e.layout.margin,rL=mt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),aL=mt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Mse="data-recharts-item-index",Use="data-recharts-item-data-key",US=60;function dG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function W0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dG(Object(r),!0).forEach(function(a){a8e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function a8e(e,t,r){return(t=n8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n8e(e){var t=s8e(e,"string");return typeof t=="symbol"?t:t+""}function s8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i8e=e=>e.brush.height,Pi=mt([o0,l0,Lse,i8e,rL,aL,ose,kPe],(e,t,r,a,n,s,o,l)=>{var c=s.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:US;return W0(W0({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),u=n.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?W0(W0({},g),{},{[v]:Jm(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=W0(W0({},u),c),f=d.bottom;d.bottom+=a,d=QRe(d,o,l);var h=e-d.left-d.right,m=t-d.top-d.bottom;return W0(W0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),o8e=mt(Pi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Qse=mt(o0,l0,(e,t)=>({x:0,y:0,width:e,height:t})),l8e=N.createContext(null),xc=()=>N.useContext(l8e)!=null,QS=e=>e.brush,HS=mt([QS,Pi,Lse],(e,t,r)=>({height:e.height,x:cr(e.x)?e.x:t.left,y:cr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:cr(e.width)?e.width:t.width})),nL=()=>{var e,t=xc(),r=ar(o8e),a=ar(HS),n=(e=ar(QS))===null||e===void 0?void 0:e.padding;return!t||!a||!n?r:{width:a.width-n.left-n.right,height:a.height-n.top-n.bottom,x:n.left,y:n.top}},c8e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Hse=()=>{var e;return(e=ar(Pi))!==null&&e!==void 0?e:c8e},sL=()=>ar(o0),iL=()=>ar(l0),u8e={top:0,right:0,bottom:0,left:0},d8e=()=>{var e;return(e=ar(t=>t.layout.margin))!==null&&e!==void 0?e:u8e},Ca=e=>e.layout.layoutType,oL=()=>ar(Ca),f8e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},zse=du({name:"legend",initialState:f8e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Th(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:fG,setLegendSettings:A8e,addLegendPayload:Vse,removeLegendPayload:$se}=zse.actions,h8e=zse.reducer,m8e=["contextPayload"];function wF(){return wF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},wF.apply(null,arguments)}function AG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Ob(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AG(Object(r),!0).forEach(function(a){lL(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lL(e,t,r){return(t=p8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p8e(e){var t=g8e(e,"string");return typeof t=="symbol"?t:t+""}function g8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x8e(e,t){if(e==null)return{};var r,a,n=v8e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function v8e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function b8e(e){return e.value}function y8e(e){var{contextPayload:t}=e,r=x8e(e,m8e),a=rse(t,e.payloadUniqBy,b8e),n=Ob(Ob({},r),{},{payload:a});return N.isValidElement(e.content)?N.cloneElement(e.content,n):typeof e.content=="function"?N.createElement(e.content,n):N.createElement(z8,n)}function w8e(e,t,r,a,n,s){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((a||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((n||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Ob(Ob({},u),d)}function N8e(e){var t=Wn();return N.useEffect(()=>{t(A8e(e))},[t,e]),null}function E8e(e){var t=Wn();return N.useEffect(()=>(t(fG(e)),()=>{t(fG({width:0,height:0}))}),[t,e]),null}function C8e(e){var t=BPe(),r=GFe(),a=d8e(),{width:n,height:s,wrapperStyle:o,portal:l}=e,[c,u]=lse([t]),d=sL(),f=iL(),h=d-(a.left||0)-(a.right||0),m=ux.getWidthOrHeight(e.layout,s,n,h),g=l?o:Ob(Ob({position:"absolute",width:(m==null?void 0:m.width)||n||"auto",height:(m==null?void 0:m.height)||s||"auto"},w8e(o,e,a,d,f,c)),o),x=l??r;if(x==null)return null;var v=N.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},N.createElement(N8e,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),N.createElement(E8e,{width:c.width,height:c.height}),N.createElement(y8e,wF({},e,m,{margin:a,chartWidth:d,chartHeight:f,contextPayload:t})));return R8.createPortal(v,x)}class ux extends N.PureComponent{static getWidthOrHeight(t,r,a,n){return t==="vertical"&&cr(r)?{height:r}:t==="horizontal"?{width:a||n}:null}render(){return N.createElement(C8e,this.props)}}lL(ux,"displayName","Legend");lL(ux,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function NF(){return NF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},NF.apply(null,arguments)}function hG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function YT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hG(Object(r),!0).forEach(function(a){j8e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function j8e(e,t,r){return(t=k8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k8e(e){var t=_8e(e,"string");return typeof t=="symbol"?t:t+""}function _8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S8e(e){return Array.isArray(e)&&wA(e[0])&&wA(e[1])?e.join(" ~ "):e}var B8e=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:a={},labelStyle:n={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(s&&s.length){var B={padding:0,margin:0},T=(l?OS(s,l):s).map((C,_)=>{if(C.type==="none")return null;var S=C.formatter||o||S8e,{value:L,name:P}=C,k=L,M=P;if(S){var U=S(L,P,C,_,s);if(Array.isArray(U))[k,M]=U;else if(U!=null)k=U;else return null}var z=YT({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},a);return N.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(_),style:z},wA(M)?N.createElement("span",{className:"recharts-tooltip-item-name"},M):null,wA(M)?N.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,N.createElement("span",{className:"recharts-tooltip-item-value"},k),N.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return N.createElement("ul",{className:"recharts-tooltip-item-list",style:B},T)}return null},g=YT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=YT({margin:0},n),v=!Fs(d),y=v?d:"",w=fa("recharts-default-tooltip",c),j=fa("recharts-tooltip-label",u);v&&f&&s!==void 0&&s!==null&&(y=f(d,s));var O=h?{role:"status","aria-live":"assertive"}:{};return N.createElement("div",NF({className:w,style:g},O),N.createElement("p",{className:j,style:x},N.isValidElement(y)?y:"".concat(y)),m())},By="recharts-tooltip-wrapper",T8e={visibility:"hidden"};function I8e(e){var{coordinate:t,translateX:r,translateY:a}=e;return fa(By,{["".concat(By,"-right")]:cr(r)&&t&&cr(t.x)&&r>=t.x,["".concat(By,"-left")]:cr(r)&&t&&cr(t.x)&&r<t.x,["".concat(By,"-bottom")]:cr(a)&&t&&cr(t.y)&&a>=t.y,["".concat(By,"-top")]:cr(a)&&t&&cr(t.y)&&a<t.y})}function mG(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offsetTopLeft:n,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(s&&cr(s[a]))return s[a];var d=r[a]-l-(n>0?n:0),f=r[a]+n;if(t[a])return o[a]?d:f;var h=c[a];if(h==null)return 0;if(o[a]){var m=d,g=h;return m<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+l,v=h+u;return x>v?Math.max(d,h):Math.max(f,h)}function O8e(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function F8e(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:a,position:n,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=mG({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:n,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=mG({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:n,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=O8e({translateX:d,translateY:f,useTranslate3d:l})):u=T8e,{cssProperties:u,cssClasses:I8e({translateX:d,translateY:f,coordinate:r})}}function pG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function PC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pG(Object(r),!0).forEach(function(a){EF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function EF(e,t,r){return(t=D8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D8e(e){var t=P8e(e,"string");return typeof t=="symbol"?t:t+""}function P8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class R8e extends N.PureComponent{constructor(){super(...arguments),EF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),EF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,n,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(n=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:n,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:j}=F8e({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),O=y?{}:PC(PC({transition:c&&t?"transform ".concat(a,"ms ").concat(n):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),B=PC(PC({},O),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return N.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:B,ref:v},s)}}var L8e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),dx={isSsr:L8e()},Gse=()=>ar(e=>e.rootProps.accessibilityLayer);function cu(e){return Number.isFinite(e)}function Fb(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function CF(){return CF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},CF.apply(null,arguments)}function gG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function xG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gG(Object(r),!0).forEach(function(a){M8e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function M8e(e,t,r){return(t=U8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U8e(e){var t=Q8e(e,"string");return typeof t=="symbol"?t:t+""}function Q8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vG={curveBasisClosed:dDe,curveBasisOpen:fDe,curveBasis:uDe,curveBumpX:XFe,curveBumpY:YFe,curveLinearClosed:ADe,curveLinear:BS,curveMonotoneX:hDe,curveMonotoneY:mDe,curveNatural:pDe,curveStep:gDe,curveStepAfter:vDe,curveStepBefore:xDe},RC=e=>cu(e.x)&&cu(e.y),Ty=e=>e.x,Iy=e=>e.y,H8e=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(FN(e));return(r==="curveMonotone"||r==="curveBump")&&t?vG["".concat(r).concat(t==="vertical"?"Y":"X")]:vG[r]||BS},z8e=e=>{var{type:t="linear",points:r=[],baseLine:a,layout:n,connectNulls:s=!1}=e,o=H8e(t,n),l=s?r.filter(RC):r,c;if(Array.isArray(a)){var u=s?a.filter(f=>RC(f)):a,d=l.map((f,h)=>xG(xG({},f),{},{base:u[h]}));return n==="vertical"?c=TC().y(Iy).x1(Ty).x0(f=>f.base.x):c=TC().x(Ty).y1(Iy).y0(f=>f.base.y),c.defined(RC).curve(o),c(d)}return n==="vertical"&&cr(a)?c=TC().y(Iy).x1(Ty).x0(a):cr(a)?c=TC().x(Ty).y1(Iy).y0(a):c=Mne().x(Ty).y(Iy),c.defined(RC).curve(o),c(l)},qse=e=>{var{className:t,points:r,path:a,pathRef:n}=e;if((!r||!r.length)&&!a)return null;var s=r&&r.length?z8e(e):a;return N.createElement("path",CF({},pl(e),D8(e),{className:fa("recharts-curve",t),d:s===null?void 0:s,ref:n}))},V8e=["x","y","top","left","width","height","className"];function jF(){return jF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jF.apply(null,arguments)}function bG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function $8e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bG(Object(r),!0).forEach(function(a){G8e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function G8e(e,t,r){return(t=q8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q8e(e){var t=K8e(e,"string");return typeof t=="symbol"?t:t+""}function K8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W8e(e,t){if(e==null)return{};var r,a,n=X8e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function X8e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Y8e=(e,t,r,a,n,s)=>"M".concat(e,",").concat(n,"v").concat(a,"M").concat(s,",").concat(t,"h").concat(r),J8e=e=>{var{x:t=0,y:r=0,top:a=0,left:n=0,width:s=0,height:o=0,className:l}=e,c=W8e(e,V8e),u=$8e({x:t,y:r,top:a,left:n,width:s,height:o},c);return!cr(t)||!cr(r)||!cr(s)||!cr(o)||!cr(a)||!cr(n)?null:N.createElement("path",jF({},Va(u,!0),{className:fa("recharts-cross",l),d:Y8e(t,r,s,o,a,n)}))};function Z8e(e,t,r,a){var n=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-n:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-n,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function yG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function eLe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yG(Object(r),!0).forEach(function(a){tLe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tLe(e,t,r){return(t=rLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rLe(e){var t=aLe(e,"string");return typeof t=="symbol"?t:t+""}function aLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function od(e,t){var r=eLe({},e),a=t,n=Object.keys(t),s=n.reduce((o,l)=>(o[l]===void 0&&a[l]!==void 0&&(o[l]=a[l]),o),r);return s}var JT={},ZT={},eI={},wG;function nLe(){return wG||(wG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const a=Object.getPrototypeOf(r);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(eI)),eI}var NG;function sLe(){return NG||(NG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nLe(),r=Zne(),a=q8(),n=K8(),s=$8();function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,h,m,g,x){const v=x(u,d,f,h,m,g);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let m=a.getTag(u),g=a.getTag(d);if(m===n.argumentsTag&&(m=n.objectTag),g===n.argumentsTag&&(g=n.objectTag),m!==g)return!1;switch(m){case n.stringTag:return u.toString()===d.toString();case n.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case n.booleanTag:case n.dateTag:case n.symbolTag:return Object.is(u.valueOf(),d.valueOf());case n.regexpTag:return u.source===d.source&&u.flags===d.flags;case n.functionTag:return u===d}f=f??new Map;const x=f.get(u),v=f.get(d);if(x!=null&&v!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case n.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!l(w,d.get(y),y,u,d,f,h))return!1;return!0}case n.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let j=0;j<y.length;j++){const O=y[j],B=w.findIndex(T=>l(O,T,void 0,u,d,f,h));if(B===-1)return!1;w.splice(B,1)}return!0}case n.arrayTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:case n.bigUint64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.bigInt64ArrayTag:case n.float32ArrayTag:case n.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!l(u[y],d[y],y,u,d,f,h))return!1;return!0}case n.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case n.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case n.errorTag:return u.name===d.name&&u.message===d.message;case n.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],j=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==j.length)return!1;for(let O=0;O<w.length;O++){const B=w[O],T=u[B];if(!Object.hasOwn(d,B))return!1;const C=d[B];if(!l(T,C,B,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o}(ZT)),ZT}var tI={},EG;function iLe(){return EG||(EG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(tI)),tI}var CG;function oLe(){return CG||(CG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sLe(),r=iLe();function a(n,s){return t.isEqualWith(n,s,r.noop)}e.isEqual=a}(JT)),JT}var rI,jG;function lLe(){return jG||(jG=1,rI=oLe().isEqual),rI}var cLe=lLe();const uLe=Dl(cLe);var kk=1e-4,Kse=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Wse=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),kG=(e,t)=>r=>{var a=Kse(e,t);return Wse(a,r)},dLe=(e,t)=>r=>{var a=Kse(e,t),n=[...a.map((s,o)=>s*o).slice(1),0];return Wse(n,r)},_G=function(){for(var t,r,a,n,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,a,r,n]=[0,0,1,1];break;case"ease":[t,a,r,n]=[.25,.1,.25,1];break;case"ease-in":[t,a,r,n]=[.42,0,1,1];break;case"ease-out":[t,a,r,n]=[.42,0,.58,1];break;case"ease-in-out":[t,a,r,n]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,a,r,n]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else o.length===4&&([t,a,r,n]=o);var u=kG(t,r),d=kG(a,n),f=dLe(t,r),h=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var w=u(v)-x,j=f(v);if(Math.abs(w-x)<kk||j<kk)return d(v);v=h(v-w/j)}return d(v)};return m.isStepper=!1,m},fLe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:n=17}=t,s=(o,l,c)=>{var u=-(o-l)*r,d=c*a,f=c+(u-d)*n/1e3,h=c*n/1e3+o;return Math.abs(h-l)<kk&&Math.abs(f)<kk?[l,0]:[h,f]};return s.isStepper=!0,s.dt=n,s},Xse=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _G(e);case"spring":return fLe();default:if(e.split("(")[0]==="cubic-bezier")return _G(e)}return typeof e=="function"?e:null};function SG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function BG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SG(Object(r),!0).forEach(function(a){ALe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ALe(e,t,r){return(t=hLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hLe(e){var t=mLe(e,"string");return typeof t=="symbol"?t:t+""}function mLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pLe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),gLe=(e,t,r)=>e.map(a=>"".concat(pLe(a)," ").concat(t,"ms ").concat(r)).join(","),xLe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(n=>a.includes(n))),qw=(e,t)=>Object.keys(t).reduce((r,a)=>BG(BG({},r),{},{[a]:e(a,t[a])}),{});function TG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function No(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TG(Object(r),!0).forEach(function(a){vLe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vLe(e,t,r){return(t=bLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bLe(e){var t=yLe(e,"string");return typeof t=="symbol"?t:t+""}function yLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _k=(e,t,r)=>e+(t-e)*r,kF=e=>{var{from:t,to:r}=e;return t!==r},Yse=(e,t,r)=>{var a=qw((n,s)=>{if(kF(s)){var[o,l]=e(s.from,s.to,s.velocity);return No(No({},s),{},{from:o,velocity:l})}return s},t);return r<1?qw((n,s)=>kF(s)?No(No({},s),{},{velocity:_k(s.velocity,a[n].velocity,r),from:_k(s.from,a[n].from,r)}):s,t):Yse(e,a,r-1)};function wLe(e,t,r,a,n,s){var o,l=a.reduce((h,m)=>No(No({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>qw((h,m)=>m.from,l),u=()=>!Object.values(l).filter(kF).length,d=null,f=h=>{o||(o=h);var m=h-o,g=m/r.dt;l=Yse(r,l,g),n(No(No(No({},e),t),c())),o=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function NLe(e,t,r,a,n,s,o){var l=null,c=n.reduce((f,h)=>No(No({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/a,m=qw((x,v)=>_k(...v,r(h)),c);if(s(No(No(No({},e),t),m)),h<1)l=o.setTimeout(d);else{var g=qw((x,v)=>_k(...v,r(1)),c);s(No(No(No({},e),t),g))}};return()=>(l=o.setTimeout(d),()=>{l()})}const Jse=(e,t,r,a,n,s)=>{var o=xLe(e,t);return r.isStepper===!0?wLe(e,t,r,o,n,s):NLe(e,t,r,a,o,n,s)};function ELe(e){var t,r=()=>null,a=!1,n=null,s=o=>{if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){n=e.setTimeout(s.bind(null,u),c);return}s(c),n=e.setTimeout(s.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{a=!0},start:o=>{a=!1,n&&(n(),n=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class CLe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),n=null,s=o=>{o-a>=r?t(o):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(s))};return n=requestAnimationFrame(s),()=>{cancelAnimationFrame(n)}}}function jLe(){return ELe(new CLe)}var kLe=N.createContext(jLe);function Zse(e,t){var r=N.useContext(kLe);return N.useMemo(()=>t??r(e),[e,t,r])}var _Le=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function _F(){return _F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_F.apply(null,arguments)}function SLe(e,t){if(e==null)return{};var r,a,n=BLe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function BLe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function IG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function X0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IG(Object(r),!0).forEach(function(a){sg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IG(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sg(e,t,r){return(t=TLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TLe(e){var t=ILe(e,"string");return typeof t=="symbol"?t:t+""}function ILe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class cL extends N.PureComponent{constructor(t,r){super(t,r),sg(this,"mounted",!1),sg(this,"manager",void 0),sg(this,"stopJSAnimation",null),sg(this,"unSubscribe",null);var{isActive:a,attributeName:n,from:s,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:n?{[n]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:a,attributeName:n,shouldReAnimate:s,to:o,from:l}=this.props,{style:c}=this.state;if(a){if(!r){var u={style:n?{[n]:o}:o};this.state&&c&&(n&&c[n]!==o||!n&&c!==o)&&this.setState(u);return}if(!(uLe(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?l:t.to;if(this.state&&c){var h={style:n?{[n]:f}:f};(n&&c[n]!==f||!n&&c!==f)&&this.setState(h)}this.runAnimation(X0(X0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:a,duration:n,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=Jse(r,a,Xse(s),n,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,n,l])}runAnimation(t){var{begin:r,duration:a,attributeName:n,to:s,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=n?{[n]:s}:s,f=gLe(Object.keys(d),a,o);this.manager.start([l,r,X0(X0({},d),{},{transition:f}),a,c])}render(){var t=this.props,{children:r,begin:a,duration:n,attributeName:s,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:g}=t,x=SLe(t,_Le),v=N.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||v===0||n<=0)return r;var w=j=>{var{style:O={},className:B}=j.props,T=N.cloneElement(j,X0(X0({},x),{},{style:X0(X0({},O),y),className:B}));return T};return v===1?w(N.Children.only(r)):N.createElement("div",null,N.Children.map(r,j=>w(j)))}}sg(cL,"displayName","Animate");sg(cL,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Sk(e){var t,r=Zse((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return N.createElement(cL,_F({},e,{animationManager:r}))}function Bk(){return Bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Bk.apply(null,arguments)}var OG=(e,t,r,a,n)=>{var s=Math.min(Math.abs(r)/2,Math.abs(a)/2),o=a>=0?1:-1,l=r>=0?1:-1,c=a>=0&&r>=0||a<0&&r<0?1:0,u;if(s>0&&n instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=n[f]>s?s:n[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+a-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+a)),u+="L ".concat(e+l*d[3],",").concat(t+a),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+a-o*d[3])),u+="Z"}else if(s>0&&n===+n&&n>0){var m=Math.min(s,n);u="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+a-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+a,`
            L `).concat(e+l*m,",").concat(t+a,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+a-o*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return u},OLe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eie=e=>{var t=od(e,OLe),r=N.useRef(null),[a,n]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&n(y)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var v=fa("recharts-rectangle",d);return x?N.createElement(Sk,{canBegin:a>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:h,animationEasing:f,isActive:x},y=>{var{width:w,height:j,x:O,y:B}=y;return N.createElement(Sk,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:g,easing:f},N.createElement("path",Bk({},Va(t,!0),{className:v,d:OG(O,B,w,j,u),ref:r})))}):N.createElement("path",Bk({},Va(t,!0),{className:v,d:OG(s,o,l,c,u)}))};function tie(e){var{cx:t,cy:r,radius:a,startAngle:n,endAngle:s}=e,o=Xa(t,r,a,n),l=Xa(t,r,a,s);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:n,endAngle:s}}function SF(){return SF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},SF.apply(null,arguments)}var FLe=(e,t)=>{var r=ao(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},LC=e=>{var{cx:t,cy:r,radius:a,angle:n,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+a,d=Math.asin(l/u)/jk,f=c?n:n+s*d,h=Xa(t,r,u,f),m=Xa(t,r,a,f),g=c?n-s*d:n,x=Xa(t,r,u*Math.cos(d*jk),g);return{center:h,circleTangency:m,lineTangency:x,theta:d}},rie=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:n,startAngle:s,endAngle:o}=e,l=FLe(s,o),c=s+l,u=Xa(t,r,n,s),d=Xa(t,r,n,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var h=Xa(t,r,a,s),m=Xa(t,r,a,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},DLe=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:n,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=ao(u-c),{circleTangency:f,lineTangency:h,theta:m}=LC({cx:t,cy:r,radius:n,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:v}=LC({cx:t,cy:r,radius:n,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),y=l?Math.abs(c-u):Math.abs(c-u)-m-v;if(y<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):rie({cx:t,cy:r,innerRadius:a,outerRadius:n,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(n,",").concat(n,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(a>0){var{circleTangency:j,lineTangency:O,theta:B}=LC({cx:t,cy:r,radius:a,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:T,lineTangency:C,theta:_}=LC({cx:t,cy:r,radius:a,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),S=l?Math.abs(c-u):Math.abs(c-u)-B-_;if(S<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(S>180),",").concat(+(d>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},PLe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},aie=e=>{var t=od(e,PLe),{cx:r,cy:a,innerRadius:n,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<n||u===d)return null;var h=fa("recharts-sector",f),m=s-n,g=Ol(o,m,0,!0),x;return g>0&&Math.abs(u-d)<360?x=DLe({cx:r,cy:a,innerRadius:n,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=rie({cx:r,cy:a,innerRadius:n,outerRadius:s,startAngle:u,endAngle:d}),N.createElement("path",SF({},Va(t,!0),{className:h,d:x}))};function RLe(e,t,r){var a,n,s,o;if(e==="horizontal")a=t.x,s=a,n=r.top,o=r.top+r.height;else if(e==="vertical")n=t.y,o=n,a=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=Xa(l,c,u,f),m=Xa(l,c,d,f);a=h.x,n=h.y,s=m.x,o=m.y}else return tie(t);return[{x:a,y:n},{x:s,y:o}]}var aI={},nI={},sI={},FG;function LLe(){return FG||(FG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sse();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r}(sI)),sI}var DG;function MLe(){return DG||(DG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LLe();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r}(nI)),nI}var PG;function ULe(){return PG||(PG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ise(),r=MLe();function a(n,s,o){o&&typeof o!="number"&&t.isIterateeCall(n,s,o)&&(s=o=void 0),n=r.toFinite(n),s===void 0?(s=n,n=0):s=r.toFinite(s),o=o===void 0?n<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-n)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=n,n+=o;return c}e.range=a}(aI)),aI}var iI,RG;function QLe(){return RG||(RG=1,iI=ULe().range),iI}var HLe=QLe();const nie=Dl(HLe);function Om(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zLe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function uL(e){let t,r,a;e.length!==2?(t=Om,r=(l,c)=>Om(e(l),c),a=(l,c)=>e(l)-c):(t=e===Om||e===zLe?e:VLe,r=e,a=e);function n(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=n(l,c,u,d-1);return f>u&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:n,center:o,right:s}}function VLe(){return 0}function sie(e){return e===null?NaN:+e}function*$Le(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const GLe=uL(Om),RN=GLe.right;uL(sie).center;class LG extends Map{constructor(t,r=WLe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,n]of t)this.set(a,n)}get(t){return super.get(MG(this,t))}has(t){return super.has(MG(this,t))}set(t,r){return super.set(qLe(this,t),r)}delete(t){return super.delete(KLe(this,t))}}function MG({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function qLe({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function KLe({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function WLe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function XLe(e=Om){if(e===Om)return iie;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function iie(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const YLe=Math.sqrt(50),JLe=Math.sqrt(10),ZLe=Math.sqrt(2);function Tk(e,t,r){const a=(t-e)/Math.max(0,r),n=Math.floor(Math.log10(a)),s=a/Math.pow(10,n),o=s>=YLe?10:s>=JLe?5:s>=ZLe?2:1;let l,c,u;return n<0?(u=Math.pow(10,-n)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,n)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Tk(e,t,r*2):[l,c,u]}function BF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[n,s,o]=a?Tk(t,e,r):Tk(e,t,r);if(!(s>=n))return[];const l=s-n+1,c=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(n+u)/-o;else for(let u=0;u<l;++u)c[u]=(n+u)*o;return c}function TF(e,t,r){return t=+t,e=+e,r=+r,Tk(e,t,r)[2]}function IF(e,t,r){t=+t,e=+e,r=+r;const a=t<e,n=a?TF(t,e,r):TF(e,t,r);return(a?-1:1)*(n<0?1/-n:n)}function UG(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function QG(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function oie(e,t,r=0,a=1/0,n){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(n=n===void 0?iie:XLe(n);a>r;){if(a-r>600){const c=a-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(a,Math.floor(t+(c-u)*f/c+h));oie(e,t,m,g,n)}const s=e[t];let o=r,l=a;for(Oy(e,r,t),n(e[a],s)>0&&Oy(e,r,a);o<l;){for(Oy(e,o,l),++o,--l;n(e[o],s)<0;)++o;for(;n(e[l],s)>0;)--l}n(e[r],s)===0?Oy(e,r,l):(++l,Oy(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Oy(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function eMe(e,t,r){if(e=Float64Array.from($Le(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return QG(e);if(t>=1)return UG(e);var a,n=(a-1)*t,s=Math.floor(n),o=UG(oie(e,s).subarray(0,s+1)),l=QG(e.subarray(s+1));return o+(l-o)*(n-s)}}function tMe(e,t,r=sie){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,n=(a-1)*t,s=Math.floor(n),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(n-s)}}function rMe(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var a=-1,n=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(n);++a<n;)s[a]=e+a*r;return s}function ld(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function c0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const OF=Symbol("implicit");function zS(){var e=new LG,t=[],r=[],a=OF;function n(s){let o=e.get(s);if(o===void 0){if(a!==OF)return a;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return n.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new LG;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return n},n.range=function(s){return arguments.length?(r=Array.from(s),n):r.slice()},n.unknown=function(s){return arguments.length?(a=s,n):a},n.copy=function(){return zS(t,r).unknown(a)},ld.apply(n,arguments),n}function dL(){var e=zS().unknown(void 0),t=e.domain,r=e.range,a=0,n=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=n<a,g=m?n:a,x=m?a:n;s=(x-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=rMe(h).map(function(y){return g+s*y});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([a,n]=h,a=+a,n=+n,f()):[a,n]},e.rangeRound=function(h){return[a,n]=h,a=+a,n=+n,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return dL(t(),[a,n]).round(l).paddingInner(c).paddingOuter(u).align(d)},ld.apply(f(),arguments)}function lie(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lie(t())},e}function aMe(){return lie(dL.apply(null,arguments).paddingInner(1))}function fL(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function cie(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function LN(){}var Kw=.7,Ik=1/Kw,rb="\\s*([+-]?\\d+)\\s*",Ww="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nMe=/^#([0-9a-f]{3,8})$/,sMe=new RegExp(`^rgb\\(${rb},${rb},${rb}\\)$`),iMe=new RegExp(`^rgb\\(${xA},${xA},${xA}\\)$`),oMe=new RegExp(`^rgba\\(${rb},${rb},${rb},${Ww}\\)$`),lMe=new RegExp(`^rgba\\(${xA},${xA},${xA},${Ww}\\)$`),cMe=new RegExp(`^hsl\\(${Ww},${xA},${xA}\\)$`),uMe=new RegExp(`^hsla\\(${Ww},${xA},${xA},${Ww}\\)$`),HG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fL(LN,$g,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zG,formatHex:zG,formatHex8:dMe,formatHsl:fMe,formatRgb:VG,toString:VG});function zG(){return this.rgb().formatHex()}function dMe(){return this.rgb().formatHex8()}function fMe(){return uie(this).formatHsl()}function VG(){return this.rgb().formatRgb()}function $g(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=nMe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$G(t):r===3?new dc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?MC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?MC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sMe.exec(e))?new dc(t[1],t[2],t[3],1):(t=iMe.exec(e))?new dc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oMe.exec(e))?MC(t[1],t[2],t[3],t[4]):(t=lMe.exec(e))?MC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cMe.exec(e))?KG(t[1],t[2]/100,t[3]/100,1):(t=uMe.exec(e))?KG(t[1],t[2]/100,t[3]/100,t[4]):HG.hasOwnProperty(e)?$G(HG[e]):e==="transparent"?new dc(NaN,NaN,NaN,0):null}function $G(e){return new dc(e>>16&255,e>>8&255,e&255,1)}function MC(e,t,r,a){return a<=0&&(e=t=r=NaN),new dc(e,t,r,a)}function AMe(e){return e instanceof LN||(e=$g(e)),e?(e=e.rgb(),new dc(e.r,e.g,e.b,e.opacity)):new dc}function FF(e,t,r,a){return arguments.length===1?AMe(e):new dc(e,t,r,a??1)}function dc(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}fL(dc,FF,cie(LN,{brighter(e){return e=e==null?Ik:Math.pow(Ik,e),new dc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new dc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dc(yg(this.r),yg(this.g),yg(this.b),Ok(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GG,formatHex:GG,formatHex8:hMe,formatRgb:qG,toString:qG}));function GG(){return`#${ig(this.r)}${ig(this.g)}${ig(this.b)}`}function hMe(){return`#${ig(this.r)}${ig(this.g)}${ig(this.b)}${ig((isNaN(this.opacity)?1:this.opacity)*255)}`}function qG(){const e=Ok(this.opacity);return`${e===1?"rgb(":"rgba("}${yg(this.r)}, ${yg(this.g)}, ${yg(this.b)}${e===1?")":`, ${e})`}`}function Ok(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ig(e){return e=yg(e),(e<16?"0":"")+e.toString(16)}function KG(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Md(e,t,r,a)}function uie(e){if(e instanceof Md)return new Md(e.h,e.s,e.l,e.opacity);if(e instanceof LN||(e=$g(e)),!e)return new Md;if(e instanceof Md)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,n=Math.min(t,r,a),s=Math.max(t,r,a),o=NaN,l=s-n,c=(s+n)/2;return l?(t===s?o=(r-a)/l+(r<a)*6:r===s?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+n:2-s-n,o*=60):l=c>0&&c<1?0:o,new Md(o,l,c,e.opacity)}function mMe(e,t,r,a){return arguments.length===1?uie(e):new Md(e,t,r,a??1)}function Md(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}fL(Md,mMe,cie(LN,{brighter(e){return e=e==null?Ik:Math.pow(Ik,e),new Md(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new Md(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,n=2*r-a;return new dc(oI(e>=240?e-240:e+120,n,a),oI(e,n,a),oI(e<120?e+240:e-120,n,a),this.opacity)},clamp(){return new Md(WG(this.h),UC(this.s),UC(this.l),Ok(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ok(this.opacity);return`${e===1?"hsl(":"hsla("}${WG(this.h)}, ${UC(this.s)*100}%, ${UC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function WG(e){return e=(e||0)%360,e<0?e+360:e}function UC(e){return Math.max(0,Math.min(1,e||0))}function oI(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const AL=e=>()=>e;function pMe(e,t){return function(r){return e+r*t}}function gMe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function xMe(e){return(e=+e)==1?die:function(t,r){return r-t?gMe(t,r,e):AL(isNaN(t)?r:t)}}function die(e,t){var r=t-e;return r?pMe(e,r):AL(isNaN(e)?t:e)}const Fk=function e(t){var r=xMe(t);function a(n,s){var o=r((n=FF(n)).r,(s=FF(s)).r),l=r(n.g,s.g),c=r(n.b,s.b),u=die(n.opacity,s.opacity);return function(d){return n.r=o(d),n.g=l(d),n.b=c(d),n.opacity=u(d),n+""}}return a.gamma=e,a}(1);function vMe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),n;return function(s){for(n=0;n<r;++n)a[n]=e[n]*(1-s)+t[n]*s;return a}}function bMe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function yMe(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,n=new Array(a),s=new Array(r),o;for(o=0;o<a;++o)n[o]=w1(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<a;++o)s[o]=n[o](l);return s}}function wMe(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Rd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function NMe(e,t){var r={},a={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=w1(e[n],t[n]):a[n]=t[n];return function(s){for(n in r)a[n]=r[n](s);return a}}var DF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lI=new RegExp(DF.source,"g");function EMe(e){return function(){return e}}function CMe(e){return function(t){return e(t)+""}}function fie(e,t){var r=DF.lastIndex=lI.lastIndex=0,a,n,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=DF.exec(e))&&(n=lI.exec(t));)(s=n.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(a=a[0])===(n=n[0])?l[o]?l[o]+=n:l[++o]=n:(l[++o]=null,c.push({i:o,x:Rd(a,n)})),r=lI.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?CMe(c[0].x):EMe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function w1(e,t){var r=typeof t,a;return t==null||r==="boolean"?AL(t):(r==="number"?Rd:r==="string"?(a=$g(t))?(t=a,Fk):fie:t instanceof $g?Fk:t instanceof Date?wMe:bMe(t)?vMe:Array.isArray(t)?yMe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?NMe:Rd)(e,t)}function hL(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var XG=180/Math.PI,PF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Aie(e,t,r,a,n,s){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*a)&&(r-=e*c,a-=t*c),(l=Math.sqrt(r*r+a*a))&&(r/=l,a/=l,c/=l),e*a<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:n,translateY:s,rotate:Math.atan2(t,e)*XG,skewX:Math.atan(c)*XG,scaleX:o,scaleY:l}}var QC;function jMe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?PF:Aie(t.a,t.b,t.c,t.d,t.e,t.f)}function kMe(e){return e==null||(QC||(QC=document.createElementNS("http://www.w3.org/2000/svg","g")),QC.setAttribute("transform",e),!(e=QC.transform.baseVal.consolidate()))?PF:(e=e.matrix,Aie(e.a,e.b,e.c,e.d,e.e,e.f))}function hie(e,t,r,a){function n(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:Rd(u,f)},{i:x-2,x:Rd(d,h)})}else(f||h)&&m.push("translate("+f+t+h+r)}function o(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(n(f)+"rotate(",null,a)-2,x:Rd(u,d)})):d&&f.push(n(f)+"rotate("+d+a)}function l(u,d,f,h){u!==d?h.push({i:f.push(n(f)+"skewX(",null,a)-2,x:Rd(u,d)}):d&&f.push(n(f)+"skewX("+d+a)}function c(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push(n(m)+"scale(",null,",",null,")");g.push({i:x-4,x:Rd(u,f)},{i:x-2,x:Rd(d,h)})}else(f!==1||h!==1)&&m.push(n(m)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),o(u.rotate,d.rotate,f,h),l(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(m){for(var g=-1,x=h.length,v;++g<x;)f[(v=h[g]).i]=v.x(m);return f.join("")}}}var _Me=hie(jMe,"px, ","px)","deg)"),SMe=hie(kMe,", ",")",")"),BMe=1e-12;function YG(e){return((e=Math.exp(e))+1/e)/2}function TMe(e){return((e=Math.exp(e))-1/e)/2}function IMe(e){return((e=Math.exp(2*e))-1)/(e+1)}const OMe=function e(t,r,a){function n(s,o){var l=s[0],c=s[1],u=s[2],d=o[0],f=o[1],h=o[2],m=d-l,g=f-c,x=m*m+g*g,v,y;if(x<BMe)y=Math.log(h/u)/t,v=function(C){return[l+C*m,c+C*g,u*Math.exp(t*C*y)]};else{var w=Math.sqrt(x),j=(h*h-u*u+a*x)/(2*u*r*w),O=(h*h-u*u-a*x)/(2*h*r*w),B=Math.log(Math.sqrt(j*j+1)-j),T=Math.log(Math.sqrt(O*O+1)-O);y=(T-B)/t,v=function(C){var _=C*y,S=YG(B),L=u/(r*w)*(S*IMe(t*_+B)-TMe(B));return[l+L*m,c+L*g,u*S/YG(t*_+B)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return n.rho=function(s){var o=Math.max(.001,+s),l=o*o,c=l*l;return e(o,l,c)},n}(Math.SQRT2,2,4);function FMe(e,t){t===void 0&&(t=e,e=w1);for(var r=0,a=t.length-1,n=t[0],s=new Array(a<0?0:a);r<a;)s[r]=e(n,n=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return s[l](o-l)}}function DMe(e){return function(){return e}}function Dk(e){return+e}var JG=[0,1];function Sl(e){return e}function RF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:DMe(isNaN(t)?NaN:.5)}function PMe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function RMe(e,t,r){var a=e[0],n=e[1],s=t[0],o=t[1];return n<a?(a=RF(n,a),s=r(o,s)):(a=RF(a,n),s=r(s,o)),function(l){return s(a(l))}}function LMe(e,t,r){var a=Math.min(e.length,t.length)-1,n=new Array(a),s=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)n[o]=RF(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=RN(e,l,1,a)-1;return s[c](n[c](l))}}function MN(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function VS(){var e=JG,t=JG,r=w1,a,n,s,o=Sl,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Sl&&(o=PMe(e[0],e[h-1])),l=h>2?LMe:RMe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(a),t,r)))(a(o(h)))}return f.invert=function(h){return o(n((u||(u=l(t,e.map(a),Rd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Dk),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=hL,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Sl,d()):o!==Sl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,m){return a=h,n=m,d()}}function mL(){return VS()(Sl,Sl)}function MMe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Pk(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Db(e){return e=Pk(Math.abs(e)),e?e[1]:NaN}function UMe(e,t){return function(r,a){for(var n=r.length,s=[],o=0,l=e[0],c=0;n>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),s.push(r.substring(n-=l,n+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function QMe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var HMe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xw(e){if(!(t=HMe.exec(e)))throw new Error("invalid format: "+e);var t;return new pL({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xw.prototype=pL.prototype;function pL(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zMe(e){e:for(var t=e.length,r=1,a=-1,n;r<t;++r)switch(e[r]){case".":a=n=r;break;case"0":a===0&&(a=r),n=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(n+1):e}var mie;function VMe(e,t){var r=Pk(e,t);if(!r)return e+"";var a=r[0],n=r[1],s=n-(mie=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=a.length;return s===o?a:s>o?a+new Array(s-o+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+Pk(e,Math.max(0,t+s-1))[0]}function ZG(e,t){var r=Pk(e,t);if(!r)return e+"";var a=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+a:a.length>n+1?a.slice(0,n+1)+"."+a.slice(n+1):a+new Array(n-a.length+2).join("0")}const eq={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:MMe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ZG(e*100,t),r:ZG,s:VMe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function tq(e){return e}var rq=Array.prototype.map,aq=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $Me(e){var t=e.grouping===void 0||e.thousands===void 0?tq:UMe(rq.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?tq:QMe(rq.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Xw(f);var h=f.fill,m=f.align,g=f.sign,x=f.symbol,v=f.zero,y=f.width,w=f.comma,j=f.precision,O=f.trim,B=f.type;B==="n"?(w=!0,B="g"):eq[B]||(j===void 0&&(j=12),O=!0,B="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var T=x==="$"?r:x==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",C=x==="$"?a:/[%p]/.test(B)?o:"",_=eq[B],S=/[defgprs%]/.test(B);j=j===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function L(P){var k=T,M=C,U,z,Q;if(B==="c")M=_(P)+M,P="";else{P=+P;var q=P<0||1/P<0;if(P=isNaN(P)?c:_(Math.abs(P),j),O&&(P=zMe(P)),q&&+P==0&&g!=="+"&&(q=!1),k=(q?g==="("?g:l:g==="-"||g==="("?"":g)+k,M=(B==="s"?aq[8+mie/3]:"")+M+(q&&g==="("?")":""),S){for(U=-1,z=P.length;++U<z;)if(Q=P.charCodeAt(U),48>Q||Q>57){M=(Q===46?n+P.slice(U+1):P.slice(U))+M,P=P.slice(0,U);break}}}w&&!v&&(P=t(P,1/0));var V=k.length+P.length+M.length,Y=V<y?new Array(y-V+1).join(h):"";switch(w&&v&&(P=t(Y+P,Y.length?y-M.length:1/0),Y=""),m){case"<":P=k+P+M+Y;break;case"=":P=k+Y+P+M;break;case"^":P=Y.slice(0,V=Y.length>>1)+k+P+M+Y.slice(V);break;default:P=Y+k+P+M;break}return s(P)}return L.toString=function(){return f+""},L}function d(f,h){var m=u((f=Xw(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Db(h)/3)))*3,x=Math.pow(10,-g),v=aq[8+g/3];return function(y){return m(x*y)+v}}return{format:u,formatPrefix:d}}var HC,gL,pie;GMe({thousands:",",grouping:[3],currency:["$",""]});function GMe(e){return HC=$Me(e),gL=HC.format,pie=HC.formatPrefix,HC}function qMe(e){return Math.max(0,-Db(Math.abs(e)))}function KMe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Db(t)/3)))*3-Db(Math.abs(e)))}function WMe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Db(t)-Db(e))+1}function gie(e,t,r,a){var n=IF(e,t,r),s;switch(a=Xw(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(s=KMe(n,o))&&(a.precision=s),pie(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(s=WMe(n,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=s-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(s=qMe(n))&&(a.precision=s-(a.type==="%")*2);break}}return gL(a)}function dp(e){var t=e.domain;return e.ticks=function(r){var a=t();return BF(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var n=t();return gie(n[0],n[n.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),n=0,s=a.length-1,o=a[n],l=a[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=n,n=s,s=u);d-- >0;){if(u=TF(o,l,r),u===c)return a[n]=o,a[s]=l,t(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function xie(){var e=mL();return e.copy=function(){return MN(e,xie())},ld.apply(e,arguments),dp(e)}function vie(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,Dk),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return vie(e).unknown(t)},e=arguments.length?Array.from(e,Dk):[0,1],dp(r)}function bie(e,t){e=e.slice();var r=0,a=e.length-1,n=e[r],s=e[a],o;return s<n&&(o=r,r=a,a=o,o=n,n=s,s=o),e[r]=t.floor(n),e[a]=t.ceil(s),e}function nq(e){return Math.log(e)}function sq(e){return Math.exp(e)}function XMe(e){return-Math.log(-e)}function YMe(e){return-Math.exp(-e)}function JMe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ZMe(e){return e===10?JMe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function e7e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function iq(e){return(t,r)=>-e(-t,r)}function xL(e){const t=e(nq,sq),r=t.domain;let a=10,n,s;function o(){return n=e7e(a),s=ZMe(a),r()[0]<0?(n=iq(n),s=iq(s),e(XMe,YMe)):e(nq,sq),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=n(u),m=n(d),g,x;const v=l==null?10:+l;let y=[];if(!(a%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<a;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=m;++h)for(g=a-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<v&&(y=BF(u,d,v))}else y=BF(h,m,Math.min(m-h,v)).map(s);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Xw(c)).precision==null&&(c.trim=!0),c=gL(c)),l===1/0)return c;const u=Math.max(1,a*l/t.ticks().length);return d=>{let f=d/s(Math.round(n(d)));return f*a<a-.5&&(f*=a),f<=u?c(d):""}},t.nice=()=>r(bie(r(),{floor:l=>s(Math.floor(n(l))),ceil:l=>s(Math.ceil(n(l)))})),t}function yie(){const e=xL(VS()).domain([1,10]);return e.copy=()=>MN(e,yie()).base(e.base()),ld.apply(e,arguments),e}function oq(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lq(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vL(e){var t=1,r=e(oq(t),lq(t));return r.constant=function(a){return arguments.length?e(oq(t=+a),lq(t)):t},dp(r)}function wie(){var e=vL(VS());return e.copy=function(){return MN(e,wie()).constant(e.constant())},ld.apply(e,arguments)}function cq(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function t7e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function r7e(e){return e<0?-e*e:e*e}function bL(e){var t=e(Sl,Sl),r=1;function a(){return r===1?e(Sl,Sl):r===.5?e(t7e,r7e):e(cq(r),cq(1/r))}return t.exponent=function(n){return arguments.length?(r=+n,a()):r},dp(t)}function yL(){var e=bL(VS());return e.copy=function(){return MN(e,yL()).exponent(e.exponent())},ld.apply(e,arguments),e}function a7e(){return yL.apply(null,arguments).exponent(.5)}function uq(e){return Math.sign(e)*e*e}function n7e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Nie(){var e=mL(),t=[0,1],r=!1,a;function n(s){var o=n7e(e(s));return isNaN(o)?a:r?Math.round(o):o}return n.invert=function(s){return e.invert(uq(s))},n.domain=function(s){return arguments.length?(e.domain(s),n):e.domain()},n.range=function(s){return arguments.length?(e.range((t=Array.from(s,Dk)).map(uq)),n):t.slice()},n.rangeRound=function(s){return n.range(s).round(!0)},n.round=function(s){return arguments.length?(r=!!s,n):r},n.clamp=function(s){return arguments.length?(e.clamp(s),n):e.clamp()},n.unknown=function(s){return arguments.length?(a=s,n):a},n.copy=function(){return Nie(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},ld.apply(n,arguments),dp(n)}function Eie(){var e=[],t=[],r=[],a;function n(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=tMe(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?a:t[RN(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Om),n()},s.range=function(o){return arguments.length?(t=Array.from(o),n()):t.slice()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.quantiles=function(){return r.slice()},s.copy=function(){return Eie().domain(e).range(t).unknown(a)},ld.apply(s,arguments)}function Cie(){var e=0,t=1,r=1,a=[.5],n=[0,1],s;function o(c){return c!=null&&c<=c?n[RN(a,c,0,r)]:s}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(n=Array.from(c)).length-1,l()):n.slice()},o.invertExtent=function(c){var u=n.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=r?[a[r-1],t]:[a[u-1],a[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return Cie().domain([e,t]).range(n).unknown(s)},ld.apply(dp(o),arguments)}function jie(){var e=[.5],t=[0,1],r,a=1;function n(s){return s!=null&&s<=s?t[RN(e,s,0,a)]:r}return n.domain=function(s){return arguments.length?(e=Array.from(s),a=Math.min(e.length,t.length-1),n):e.slice()},n.range=function(s){return arguments.length?(t=Array.from(s),a=Math.min(e.length,t.length-1),n):t.slice()},n.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},n.unknown=function(s){return arguments.length?(r=s,n):r},n.copy=function(){return jie().domain(e).range(t).unknown(r)},ld.apply(n,arguments)}const cI=new Date,uI=new Date;function Ri(e,t,r,a){function n(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return n.floor=s=>(e(s=new Date(+s)),s),n.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),n.round=s=>{const o=n(s),l=n.ceil(s);return s-o<l-s?o:l},n.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),n.range=(s,o,l)=>{const c=[];if(s=n.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},n.filter=s=>Ri(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(n.count=(s,o)=>(cI.setTime(+s),uI.setTime(+o),e(cI),e(uI),Math.floor(r(cI,uI))),n.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?n.filter(a?o=>a(o)%s===0:o=>n.count(0,o)%s===0):n)),n}const Rk=Ri(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Rk.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ri(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Rk);Rk.range;const bh=1e3,Yu=bh*60,yh=Yu*60,Vh=yh*24,wL=Vh*7,dq=Vh*30,dI=Vh*365,og=Ri(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bh)},(e,t)=>(t-e)/bh,e=>e.getUTCSeconds());og.range;const NL=Ri(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bh)},(e,t)=>{e.setTime(+e+t*Yu)},(e,t)=>(t-e)/Yu,e=>e.getMinutes());NL.range;const EL=Ri(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Yu)},(e,t)=>(t-e)/Yu,e=>e.getUTCMinutes());EL.range;const CL=Ri(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bh-e.getMinutes()*Yu)},(e,t)=>{e.setTime(+e+t*yh)},(e,t)=>(t-e)/yh,e=>e.getHours());CL.range;const jL=Ri(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yh)},(e,t)=>(t-e)/yh,e=>e.getUTCHours());jL.range;const UN=Ri(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Yu)/Vh,e=>e.getDate()-1);UN.range;const $S=Ri(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vh,e=>e.getUTCDate()-1);$S.range;const kie=Ri(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vh,e=>Math.floor(e/Vh));kie.range;function fx(e){return Ri(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Yu)/wL)}const GS=fx(0),Lk=fx(1),s7e=fx(2),i7e=fx(3),Pb=fx(4),o7e=fx(5),l7e=fx(6);GS.range;Lk.range;s7e.range;i7e.range;Pb.range;o7e.range;l7e.range;function Ax(e){return Ri(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/wL)}const qS=Ax(0),Mk=Ax(1),c7e=Ax(2),u7e=Ax(3),Rb=Ax(4),d7e=Ax(5),f7e=Ax(6);qS.range;Mk.range;c7e.range;u7e.range;Rb.range;d7e.range;f7e.range;const kL=Ri(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kL.range;const _L=Ri(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_L.range;const $h=Ri(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$h.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ri(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});$h.range;const Gh=Ri(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Gh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ri(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Gh.range;function _ie(e,t,r,a,n,s){const o=[[og,1,bh],[og,5,5*bh],[og,15,15*bh],[og,30,30*bh],[s,1,Yu],[s,5,5*Yu],[s,15,15*Yu],[s,30,30*Yu],[n,1,yh],[n,3,3*yh],[n,6,6*yh],[n,12,12*yh],[a,1,Vh],[a,2,2*Vh],[r,1,wL],[t,1,dq],[t,3,3*dq],[e,1,dI]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=uL(([,,v])=>v).right(o,h);if(m===o.length)return e.every(IF(u/dI,d/dI,f));if(m===0)return Rk.every(Math.max(IF(u,d,f),1));const[g,x]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(x)}return[l,c]}const[A7e,h7e]=_ie(Gh,_L,qS,kie,jL,EL),[m7e,p7e]=_ie($h,kL,GS,UN,CL,NL);function fI(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function AI(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function g7e(e){var t=e.dateTime,r=e.date,a=e.time,n=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Dy(n),d=Py(n),f=Dy(s),h=Py(s),m=Dy(o),g=Py(o),x=Dy(l),v=Py(l),y=Dy(c),w=Py(c),j={a:q,A:V,b:Y,B:K,c:null,d:gq,e:gq,f:U7e,g:X7e,G:J7e,H:R7e,I:L7e,j:M7e,L:Sie,m:Q7e,M:H7e,p:J,q:R,Q:bq,s:yq,S:z7e,u:V7e,U:$7e,V:G7e,w:q7e,W:K7e,x:null,X:null,y:W7e,Y:Y7e,Z:Z7e,"%":vq},O={a:F,A:W,b:X,B:ne,c:null,d:xq,e:xq,f:aUe,g:AUe,G:mUe,H:eUe,I:tUe,j:rUe,L:Tie,m:nUe,M:sUe,p:le,q:ie,Q:bq,s:yq,S:iUe,u:oUe,U:lUe,V:cUe,w:uUe,W:dUe,x:null,X:null,y:fUe,Y:hUe,Z:pUe,"%":vq},B={a:L,A:P,b:k,B:M,c:U,d:mq,e:mq,f:O7e,g:hq,G:Aq,H:pq,I:pq,j:S7e,L:I7e,m:_7e,M:B7e,p:S,q:k7e,Q:D7e,s:P7e,S:T7e,u:w7e,U:N7e,V:E7e,w:y7e,W:C7e,x:z,X:Q,y:hq,Y:Aq,Z:j7e,"%":F7e};j.x=T(r,j),j.X=T(a,j),j.c=T(t,j),O.x=T(r,O),O.X=T(a,O),O.c=T(t,O);function T(ae,Ae){return function(ke){var re=[],Re=-1,Le=0,Te=ae.length,de,Ce,me;for(ke instanceof Date||(ke=new Date(+ke));++Re<Te;)ae.charCodeAt(Re)===37&&(re.push(ae.slice(Le,Re)),(Ce=fq[de=ae.charAt(++Re)])!=null?de=ae.charAt(++Re):Ce=de==="e"?" ":"0",(me=Ae[de])&&(de=me(ke,Ce)),re.push(de),Le=Re+1);return re.push(ae.slice(Le,Re)),re.join("")}}function C(ae,Ae){return function(ke){var re=Fy(1900,void 0,1),Re=_(re,ae,ke+="",0),Le,Te;if(Re!=ke.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(Ae&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(Le=AI(Fy(re.y,0,1)),Te=Le.getUTCDay(),Le=Te>4||Te===0?Mk.ceil(Le):Mk(Le),Le=$S.offset(Le,(re.V-1)*7),re.y=Le.getUTCFullYear(),re.m=Le.getUTCMonth(),re.d=Le.getUTCDate()+(re.w+6)%7):(Le=fI(Fy(re.y,0,1)),Te=Le.getDay(),Le=Te>4||Te===0?Lk.ceil(Le):Lk(Le),Le=UN.offset(Le,(re.V-1)*7),re.y=Le.getFullYear(),re.m=Le.getMonth(),re.d=Le.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Te="Z"in re?AI(Fy(re.y,0,1)).getUTCDay():fI(Fy(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(Te+5)%7:re.w+re.U*7-(Te+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,AI(re)):fI(re)}}function _(ae,Ae,ke,re){for(var Re=0,Le=Ae.length,Te=ke.length,de,Ce;Re<Le;){if(re>=Te)return-1;if(de=Ae.charCodeAt(Re++),de===37){if(de=Ae.charAt(Re++),Ce=B[de in fq?Ae.charAt(Re++):de],!Ce||(re=Ce(ae,ke,re))<0)return-1}else if(de!=ke.charCodeAt(re++))return-1}return re}function S(ae,Ae,ke){var re=u.exec(Ae.slice(ke));return re?(ae.p=d.get(re[0].toLowerCase()),ke+re[0].length):-1}function L(ae,Ae,ke){var re=m.exec(Ae.slice(ke));return re?(ae.w=g.get(re[0].toLowerCase()),ke+re[0].length):-1}function P(ae,Ae,ke){var re=f.exec(Ae.slice(ke));return re?(ae.w=h.get(re[0].toLowerCase()),ke+re[0].length):-1}function k(ae,Ae,ke){var re=y.exec(Ae.slice(ke));return re?(ae.m=w.get(re[0].toLowerCase()),ke+re[0].length):-1}function M(ae,Ae,ke){var re=x.exec(Ae.slice(ke));return re?(ae.m=v.get(re[0].toLowerCase()),ke+re[0].length):-1}function U(ae,Ae,ke){return _(ae,t,Ae,ke)}function z(ae,Ae,ke){return _(ae,r,Ae,ke)}function Q(ae,Ae,ke){return _(ae,a,Ae,ke)}function q(ae){return o[ae.getDay()]}function V(ae){return s[ae.getDay()]}function Y(ae){return c[ae.getMonth()]}function K(ae){return l[ae.getMonth()]}function J(ae){return n[+(ae.getHours()>=12)]}function R(ae){return 1+~~(ae.getMonth()/3)}function F(ae){return o[ae.getUTCDay()]}function W(ae){return s[ae.getUTCDay()]}function X(ae){return c[ae.getUTCMonth()]}function ne(ae){return l[ae.getUTCMonth()]}function le(ae){return n[+(ae.getUTCHours()>=12)]}function ie(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var Ae=T(ae+="",j);return Ae.toString=function(){return ae},Ae},parse:function(ae){var Ae=C(ae+="",!1);return Ae.toString=function(){return ae},Ae},utcFormat:function(ae){var Ae=T(ae+="",O);return Ae.toString=function(){return ae},Ae},utcParse:function(ae){var Ae=C(ae+="",!0);return Ae.toString=function(){return ae},Ae}}}var fq={"-":"",_:" ",0:"0"},io=/^\s*\d+/,x7e=/^%/,v7e=/[\\^$*+?|[\]().{}]/g;function qa(e,t,r){var a=e<0?"-":"",n=(a?-e:e)+"",s=n.length;return a+(s<r?new Array(r-s+1).join(t)+n:n)}function b7e(e){return e.replace(v7e,"\\$&")}function Dy(e){return new RegExp("^(?:"+e.map(b7e).join("|")+")","i")}function Py(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function y7e(e,t,r){var a=io.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function w7e(e,t,r){var a=io.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function N7e(e,t,r){var a=io.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function E7e(e,t,r){var a=io.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function C7e(e,t,r){var a=io.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function Aq(e,t,r){var a=io.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function hq(e,t,r){var a=io.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function j7e(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function k7e(e,t,r){var a=io.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function _7e(e,t,r){var a=io.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function mq(e,t,r){var a=io.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function S7e(e,t,r){var a=io.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function pq(e,t,r){var a=io.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function B7e(e,t,r){var a=io.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function T7e(e,t,r){var a=io.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function I7e(e,t,r){var a=io.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function O7e(e,t,r){var a=io.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function F7e(e,t,r){var a=x7e.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function D7e(e,t,r){var a=io.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function P7e(e,t,r){var a=io.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function gq(e,t){return qa(e.getDate(),t,2)}function R7e(e,t){return qa(e.getHours(),t,2)}function L7e(e,t){return qa(e.getHours()%12||12,t,2)}function M7e(e,t){return qa(1+UN.count($h(e),e),t,3)}function Sie(e,t){return qa(e.getMilliseconds(),t,3)}function U7e(e,t){return Sie(e,t)+"000"}function Q7e(e,t){return qa(e.getMonth()+1,t,2)}function H7e(e,t){return qa(e.getMinutes(),t,2)}function z7e(e,t){return qa(e.getSeconds(),t,2)}function V7e(e){var t=e.getDay();return t===0?7:t}function $7e(e,t){return qa(GS.count($h(e)-1,e),t,2)}function Bie(e){var t=e.getDay();return t>=4||t===0?Pb(e):Pb.ceil(e)}function G7e(e,t){return e=Bie(e),qa(Pb.count($h(e),e)+($h(e).getDay()===4),t,2)}function q7e(e){return e.getDay()}function K7e(e,t){return qa(Lk.count($h(e)-1,e),t,2)}function W7e(e,t){return qa(e.getFullYear()%100,t,2)}function X7e(e,t){return e=Bie(e),qa(e.getFullYear()%100,t,2)}function Y7e(e,t){return qa(e.getFullYear()%1e4,t,4)}function J7e(e,t){var r=e.getDay();return e=r>=4||r===0?Pb(e):Pb.ceil(e),qa(e.getFullYear()%1e4,t,4)}function Z7e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qa(t/60|0,"0",2)+qa(t%60,"0",2)}function xq(e,t){return qa(e.getUTCDate(),t,2)}function eUe(e,t){return qa(e.getUTCHours(),t,2)}function tUe(e,t){return qa(e.getUTCHours()%12||12,t,2)}function rUe(e,t){return qa(1+$S.count(Gh(e),e),t,3)}function Tie(e,t){return qa(e.getUTCMilliseconds(),t,3)}function aUe(e,t){return Tie(e,t)+"000"}function nUe(e,t){return qa(e.getUTCMonth()+1,t,2)}function sUe(e,t){return qa(e.getUTCMinutes(),t,2)}function iUe(e,t){return qa(e.getUTCSeconds(),t,2)}function oUe(e){var t=e.getUTCDay();return t===0?7:t}function lUe(e,t){return qa(qS.count(Gh(e)-1,e),t,2)}function Iie(e){var t=e.getUTCDay();return t>=4||t===0?Rb(e):Rb.ceil(e)}function cUe(e,t){return e=Iie(e),qa(Rb.count(Gh(e),e)+(Gh(e).getUTCDay()===4),t,2)}function uUe(e){return e.getUTCDay()}function dUe(e,t){return qa(Mk.count(Gh(e)-1,e),t,2)}function fUe(e,t){return qa(e.getUTCFullYear()%100,t,2)}function AUe(e,t){return e=Iie(e),qa(e.getUTCFullYear()%100,t,2)}function hUe(e,t){return qa(e.getUTCFullYear()%1e4,t,4)}function mUe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Rb(e):Rb.ceil(e),qa(e.getUTCFullYear()%1e4,t,4)}function pUe(){return"+0000"}function vq(){return"%"}function bq(e){return+e}function yq(e){return Math.floor(+e/1e3)}var Zx,Oie,Fie;gUe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gUe(e){return Zx=g7e(e),Oie=Zx.format,Zx.parse,Fie=Zx.utcFormat,Zx.utcParse,Zx}function xUe(e){return new Date(e)}function vUe(e){return e instanceof Date?+e:+new Date(+e)}function SL(e,t,r,a,n,s,o,l,c,u){var d=mL(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),x=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),w=u("%b %d"),j=u("%B"),O=u("%Y");function B(T){return(c(T)<T?m:l(T)<T?g:o(T)<T?x:s(T)<T?v:a(T)<T?n(T)<T?y:w:r(T)<T?j:O)(T)}return d.invert=function(T){return new Date(f(T))},d.domain=function(T){return arguments.length?h(Array.from(T,vUe)):h().map(xUe)},d.ticks=function(T){var C=h();return e(C[0],C[C.length-1],T??10)},d.tickFormat=function(T,C){return C==null?B:u(C)},d.nice=function(T){var C=h();return(!T||typeof T.range!="function")&&(T=t(C[0],C[C.length-1],T??10)),T?h(bie(C,T)):d},d.copy=function(){return MN(d,SL(e,t,r,a,n,s,o,l,c,u))},d}function bUe(){return ld.apply(SL(m7e,p7e,$h,kL,GS,UN,CL,NL,og,Oie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yUe(){return ld.apply(SL(A7e,h7e,Gh,_L,qS,$S,jL,EL,og,Fie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function KS(){var e=0,t=1,r,a,n,s,o=Sl,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(n===0?.5:(f=(s(f)-r)*n,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),a=s(t=+t),n=r===a?0:1/(a-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(w1),u.rangeRound=d(hL),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),a=f(t),n=r===a?0:1/(a-r),u}}function fp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Die(){var e=dp(KS()(Sl));return e.copy=function(){return fp(e,Die())},c0.apply(e,arguments)}function Pie(){var e=xL(KS()).domain([1,10]);return e.copy=function(){return fp(e,Pie()).base(e.base())},c0.apply(e,arguments)}function Rie(){var e=vL(KS());return e.copy=function(){return fp(e,Rie()).constant(e.constant())},c0.apply(e,arguments)}function BL(){var e=bL(KS());return e.copy=function(){return fp(e,BL()).exponent(e.exponent())},c0.apply(e,arguments)}function wUe(){return BL.apply(null,arguments).exponent(.5)}function Lie(){var e=[],t=Sl;function r(a){if(a!=null&&!isNaN(a=+a))return t((RN(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let n of a)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(Om),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,n)=>t(n/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(n,s)=>eMe(e,s/a))},r.copy=function(){return Lie(t).domain(e)},c0.apply(r,arguments)}function WS(){var e=0,t=.5,r=1,a=1,n,s,o,l,c,u=Sl,d,f=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(a*x<a*s?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,n=d(e=+e),s=d(t=+t),o=d(r=+r),l=n===s?0:.5/(s-n),c=s===o?0:.5/(o-s),a=s<n?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function g(x){return function(v){var y,w,j;return arguments.length?([y,w,j]=v,u=FMe(x,[y,w,j]),m):[u(0),u(.5),u(1)]}}return m.range=g(w1),m.rangeRound=g(hL),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return d=x,n=x(e),s=x(t),o=x(r),l=n===s?0:.5/(s-n),c=s===o?0:.5/(o-s),a=s<n?-1:1,m}}function Mie(){var e=dp(WS()(Sl));return e.copy=function(){return fp(e,Mie())},c0.apply(e,arguments)}function Uie(){var e=xL(WS()).domain([.1,1,10]);return e.copy=function(){return fp(e,Uie()).base(e.base())},c0.apply(e,arguments)}function Qie(){var e=vL(WS());return e.copy=function(){return fp(e,Qie()).constant(e.constant())},c0.apply(e,arguments)}function TL(){var e=bL(WS());return e.copy=function(){return fp(e,TL()).exponent(e.exponent())},c0.apply(e,arguments)}function NUe(){return TL.apply(null,arguments).exponent(.5)}const v2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dL,scaleDiverging:Mie,scaleDivergingLog:Uie,scaleDivergingPow:TL,scaleDivergingSqrt:NUe,scaleDivergingSymlog:Qie,scaleIdentity:vie,scaleImplicit:OF,scaleLinear:xie,scaleLog:yie,scaleOrdinal:zS,scalePoint:aMe,scalePow:yL,scaleQuantile:Eie,scaleQuantize:Cie,scaleRadial:Nie,scaleSequential:Die,scaleSequentialLog:Pie,scaleSequentialPow:BL,scaleSequentialQuantile:Lie,scaleSequentialSqrt:wUe,scaleSequentialSymlog:Rie,scaleSqrt:a7e,scaleSymlog:wie,scaleThreshold:jie,scaleTime:bUe,scaleUtc:yUe,tickFormat:gie},Symbol.toStringTag,{value:"Module"}));var Ap=e=>e.chartData,XS=mt([Ap],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),IL=(e,t,r,a)=>a?XS(e):Ap(e);function Lb(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(cu(t)&&cu(r))return!0}return!1}function wq(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function EUe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,n,s;if(cu(r))n=r;else if(typeof r=="function")return;if(cu(a))s=a;else if(typeof a=="function")return;var o=[n,s];if(Lb(o))return o}}function CUe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(Lb(a))return wq(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[n,s]=e,o,l;if(n==="auto")t!=null&&(o=Math.min(...t));else if(cr(n))o=n;else if(typeof n=="function")try{t!=null&&(o=n(t==null?void 0:t[0]))}catch{}else if(typeof n=="string"&&lG.test(n)){var c=lG.exec(n);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(s==="auto")t!=null&&(l=Math.max(...t));else if(cr(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&cG.test(s)){var d=cG.exec(s);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[o,l];if(Lb(h))return t==null?h:wq(h,t,r)}}}var N1=1e9,jUe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},FL,as=!0,sd="[DecimalError] ",wg=sd+"Invalid argument: ",OL=sd+"Exponent out of range: ",E1=Math.floor,qp=Math.pow,kUe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Jc,Ji=1e7,zn=7,Hie=9007199254740991,Uk=E1(Hie/zn),fr={};fr.absoluteValue=fr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};fr.comparedTo=fr.cmp=function(e){var t,r,a,n,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(a=s.d.length,n=e.d.length,t=0,r=a<n?a:n;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return a===n?0:a>n^s.s<0?1:-1};fr.decimalPlaces=fr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*zn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};fr.dividedBy=fr.div=function(e){return Ih(this,new this.constructor(e))};fr.dividedToIntegerBy=fr.idiv=function(e){var t=this,r=t.constructor;return In(Ih(t,new r(e),0,1),r.precision)};fr.equals=fr.eq=function(e){return!this.cmp(e)};fr.exponent=function(){return Ni(this)};fr.greaterThan=fr.gt=function(e){return this.cmp(e)>0};fr.greaterThanOrEqualTo=fr.gte=function(e){return this.cmp(e)>=0};fr.isInteger=fr.isint=function(){return this.e>this.d.length-2};fr.isNegative=fr.isneg=function(){return this.s<0};fr.isPositive=fr.ispos=function(){return this.s>0};fr.isZero=function(){return this.s===0};fr.lessThan=fr.lt=function(e){return this.cmp(e)<0};fr.lessThanOrEqualTo=fr.lte=function(e){return this.cmp(e)<1};fr.logarithm=fr.log=function(e){var t,r=this,a=r.constructor,n=a.precision,s=n+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Jc))throw Error(sd+"NaN");if(r.s<1)throw Error(sd+(r.s?"NaN":"-Infinity"));return r.eq(Jc)?new a(0):(as=!1,t=Ih(Yw(r,s),Yw(e,s),s),as=!0,In(t,n))};fr.minus=fr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$ie(t,e):zie(t,(e.s=-e.s,e))};fr.modulo=fr.mod=function(e){var t,r=this,a=r.constructor,n=a.precision;if(e=new a(e),!e.s)throw Error(sd+"NaN");return r.s?(as=!1,t=Ih(r,e,0,1).times(e),as=!0,r.minus(t)):In(new a(r),n)};fr.naturalExponential=fr.exp=function(){return Vie(this)};fr.naturalLogarithm=fr.ln=function(){return Yw(this)};fr.negated=fr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};fr.plus=fr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?zie(t,e):$ie(t,(e.s=-e.s,e))};fr.precision=fr.sd=function(e){var t,r,a,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(wg+e);if(t=Ni(n)+1,a=n.d.length-1,r=a*zn+1,a=n.d[a],a){for(;a%10==0;a/=10)r--;for(a=n.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};fr.squareRoot=fr.sqrt=function(){var e,t,r,a,n,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(sd+"NaN")}for(e=Ni(l),as=!1,n=Math.sqrt(+l),n==0||n==1/0?(t=iA(l.d),(t.length+e)%2==0&&(t+="0"),n=Math.sqrt(t),e=E1((e+1)/2)-(e<0||e%2),n==1/0?t="5e"+e:(t=n.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(n.toString()),r=c.precision,n=o=r+3;;)if(s=a,a=s.plus(Ih(l,s,o+2)).times(.5),iA(s.d).slice(0,o)===(t=iA(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),n==o&&t=="4999"){if(In(s,r+1,0),s.times(s).eq(l)){a=s;break}}else if(t!="9999")break;o+=4}return as=!0,In(a,r)};fr.times=fr.mul=function(e){var t,r,a,n,s,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,o=c,c=u,u=o),s=[],o=c+u,a=o;a--;)s.push(0);for(a=u;--a>=0;){for(t=0,n=c+a;n>a;)l=s[n]+m[a]*h[n-a-1]+t,s[n--]=l%Ji|0,t=l/Ji|0;s[n]=(s[n]+t)%Ji|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,as?In(e,f.precision):e};fr.toDecimalPlaces=fr.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(NA(e,0,N1),t===void 0?t=a.rounding:NA(t,0,8),In(r,e+Ni(r)+1,t))};fr.toExponential=function(e,t){var r,a=this,n=a.constructor;return e===void 0?r=Gg(a,!0):(NA(e,0,N1),t===void 0?t=n.rounding:NA(t,0,8),a=In(new n(a),e+1,t),r=Gg(a,!0,e+1)),r};fr.toFixed=function(e,t){var r,a,n=this,s=n.constructor;return e===void 0?Gg(n):(NA(e,0,N1),t===void 0?t=s.rounding:NA(t,0,8),a=In(new s(n),e+Ni(n)+1,t),r=Gg(a.abs(),!1,e+Ni(a)+1),n.isneg()&&!n.isZero()?"-"+r:r)};fr.toInteger=fr.toint=function(){var e=this,t=e.constructor;return In(new t(e),Ni(e)+1,t.rounding)};fr.toNumber=function(){return+this};fr.toPower=fr.pow=function(e){var t,r,a,n,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Jc);if(l=new c(l),!l.s){if(e.s<1)throw Error(sd+"Infinity");return l}if(l.eq(Jc))return l;if(a=c.precision,e.eq(Jc))return In(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=d<0?-d:d)<=Hie){for(n=new c(Jc),t=Math.ceil(a/zn+4),as=!1;r%2&&(n=n.times(l),Eq(n.d,t)),r=E1(r/2),r!==0;)l=l.times(l),Eq(l.d,t);return as=!0,e.s<0?new c(Jc).div(n):In(n,a)}}else if(s<0)throw Error(sd+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,as=!1,n=e.times(Yw(l,a+u)),as=!0,n=Vie(n),n.s=s,n};fr.toPrecision=function(e,t){var r,a,n=this,s=n.constructor;return e===void 0?(r=Ni(n),a=Gg(n,r<=s.toExpNeg||r>=s.toExpPos)):(NA(e,1,N1),t===void 0?t=s.rounding:NA(t,0,8),n=In(new s(n),e,t),r=Ni(n),a=Gg(n,e<=r||r<=s.toExpNeg,e)),a};fr.toSignificantDigits=fr.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(NA(e,1,N1),t===void 0?t=a.rounding:NA(t,0,8)),In(new a(r),e,t)};fr.toString=fr.valueOf=fr.val=fr.toJSON=fr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ni(e),r=e.constructor;return Gg(e,t<=r.toExpNeg||t>=r.toExpPos)};function zie(e,t){var r,a,n,s,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),as?In(t,f):t;if(c=e.d,u=t.d,o=e.e,n=t.e,c=c.slice(),s=o-n,s){for(s<0?(a=c,s=-s,l=u.length):(a=u,n=o,l=c.length),o=Math.ceil(f/zn),l=o>l?o+1:l+1,s>l&&(s=l,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,a=u,u=c,c=a),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Ji|0,c[s]%=Ji;for(r&&(c.unshift(r),++n),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=n,as?In(t,f):t}function NA(e,t,r){if(e!==~~e||e<t||e>r)throw Error(wg+e)}function iA(e){var t,r,a,n=e.length-1,s="",o=e[0];if(n>0){for(s+=o,t=1;t<n;t++)a=e[t]+"",r=zn-a.length,r&&(s+=im(r)),s+=a;o=e[t],a=o+"",r=zn-a.length,r&&(s+=im(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Ih=function(){function e(a,n){var s,o=0,l=a.length;for(a=a.slice();l--;)s=a[l]*n+o,a[l]=s%Ji|0,o=s/Ji|0;return o&&a.unshift(o),a}function t(a,n,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(a[l]!=n[l]){c=a[l]>n[l]?1:-1;break}return c}function r(a,n,s){for(var o=0;s--;)a[s]-=o,o=a[s]<n[s]?1:0,a[s]=o*Ji+a[s]-n[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,n,s,o){var l,c,u,d,f,h,m,g,x,v,y,w,j,O,B,T,C,_,S=a.constructor,L=a.s==n.s?1:-1,P=a.d,k=n.d;if(!a.s)return new S(a);if(!n.s)throw Error(sd+"Division by zero");for(c=a.e-n.e,C=k.length,B=P.length,m=new S(L),g=m.d=[],u=0;k[u]==(P[u]||0);)++u;if(k[u]>(P[u]||0)&&--c,s==null?w=s=S.precision:o?w=s+(Ni(a)-Ni(n))+1:w=s,w<0)return new S(0);if(w=w/zn+2|0,u=0,C==1)for(d=0,k=k[0],w++;(u<B||d)&&w--;u++)j=d*Ji+(P[u]||0),g[u]=j/k|0,d=j%k|0;else{for(d=Ji/(k[0]+1)|0,d>1&&(k=e(k,d),P=e(P,d),C=k.length,B=P.length),O=C,x=P.slice(0,C),v=x.length;v<C;)x[v++]=0;_=k.slice(),_.unshift(0),T=k[0],k[1]>=Ji/2&&++T;do d=0,l=t(k,x,C,v),l<0?(y=x[0],C!=v&&(y=y*Ji+(x[1]||0)),d=y/T|0,d>1?(d>=Ji&&(d=Ji-1),f=e(k,d),h=f.length,v=x.length,l=t(f,x,h,v),l==1&&(d--,r(f,C<h?_:k,h))):(d==0&&(l=d=1),f=k.slice()),h=f.length,h<v&&f.unshift(0),r(x,f,v),l==-1&&(v=x.length,l=t(k,x,C,v),l<1&&(d++,r(x,C<v?_:k,v))),v=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[v++]=P[O]||0:(x=[P[O]],v=1);while((O++<B||x[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,In(m,o?s+Ni(m)+1:s)}}();function Vie(e,t){var r,a,n,s,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Ni(e)>16)throw Error(OL+Ni(e));if(!e.s)return new d(Jc);for(as=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(a=Math.log(qp(2,u))/Math.LN10*2+5|0,l+=a,r=n=s=new d(Jc),d.precision=l;;){if(n=In(n.times(e),l),r=r.times(++c),o=s.plus(Ih(n,r,l)),iA(o.d).slice(0,l)===iA(s.d).slice(0,l)){for(;u--;)s=In(s.times(s),l);return d.precision=f,t==null?(as=!0,In(s,f)):s}s=o}}function Ni(e){for(var t=e.e*zn,r=e.d[0];r>=10;r/=10)t++;return t}function hI(e,t,r){if(t>e.LN10.sd())throw as=!0,r&&(e.precision=r),Error(sd+"LN10 precision limit exceeded");return In(new e(e.LN10),t)}function im(e){for(var t="";e--;)t+="0";return t}function Yw(e,t){var r,a,n,s,o,l,c,u,d,f=1,h=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(sd+(m.s?"NaN":"-Infinity"));if(m.eq(Jc))return new x(0);if(t==null?(as=!1,u=v):u=t,m.eq(10))return t==null&&(as=!0),hI(x,u);if(u+=h,x.precision=u,r=iA(g),a=r.charAt(0),s=Ni(m),Math.abs(s)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)m=m.times(e),r=iA(m.d),a=r.charAt(0),f++;s=Ni(m),a>1?(m=new x("0."+r),s++):m=new x(a+"."+r.slice(1))}else return c=hI(x,u+2,v).times(s+""),m=Yw(new x(a+"."+r.slice(1)),u-h).plus(c),x.precision=v,t==null?(as=!0,In(m,v)):m;for(l=o=m=Ih(m.minus(Jc),m.plus(Jc),u),d=In(m.times(m),u),n=3;;){if(o=In(o.times(d),u),c=l.plus(Ih(o,new x(n),u)),iA(c.d).slice(0,u)===iA(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(hI(x,u+2,v).times(s+""))),l=Ih(l,new x(f),u),x.precision=v,t==null?(as=!0,In(l,v)):l;l=c,n+=2}}function Nq(e,t){var r,a,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(n=t.length;t.charCodeAt(n-1)===48;)--n;if(t=t.slice(a,n),t){if(n-=a,r=r-a-1,e.e=E1(r/zn),e.d=[],a=(r+1)%zn,r<0&&(a+=zn),a<n){for(a&&e.d.push(+t.slice(0,a)),n-=zn;a<n;)e.d.push(+t.slice(a,a+=zn));t=t.slice(a),a=zn-t.length}else a-=n;for(;a--;)t+="0";if(e.d.push(+t),as&&(e.e>Uk||e.e<-Uk))throw Error(OL+r)}else e.s=0,e.e=0,e.d=[0];return e}function In(e,t,r){var a,n,s,o,l,c,u,d,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(a=t-o,a<0)a+=zn,n=t,u=f[d=0];else{if(d=Math.ceil((a+1)/zn),s=f.length,d>=s)return e;for(u=s=f[d],o=1;s>=10;s/=10)o++;a%=zn,n=a-zn+o}if(r!==void 0&&(s=qp(10,o-n-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?n>0?u/qp(10,o-n):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=Ni(e),f.length=1,t=t-s-1,f[0]=qp(10,(zn-t%zn)%zn),e.e=E1(-t/zn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=d,s=1,d--):(f.length=d+1,s=qp(10,zn-a),f[d]=n>0?(u/qp(10,o-n)%qp(10,n)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Ji&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Ji)break;f[d--]=0,s=1}for(a=f.length;f[--a]===0;)f.pop();if(as&&(e.e>Uk||e.e<-Uk))throw Error(OL+Ni(e));return e}function $ie(e,t){var r,a,n,s,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),as?In(t,m):t;if(c=e.d,f=t.d,a=t.e,u=e.e,c=c.slice(),o=u-a,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,a=u,l=c.length),n=Math.max(Math.ceil(m/zn),l)+2,o>n&&(o=n,r.length=1),r.reverse(),n=o;n--;)r.push(0);r.reverse()}else{for(n=c.length,l=f.length,d=n<l,d&&(l=n),n=0;n<l;n++)if(c[n]!=f[n]){d=c[n]<f[n];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,n=f.length-l;n>0;--n)c[l++]=0;for(n=f.length;n>o;){if(c[--n]<f[n]){for(s=n;s&&c[--s]===0;)c[s]=Ji-1;--c[s],c[n]+=Ji}c[n]-=f[n]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,as?In(t,m):t):new h(0)}function Gg(e,t,r){var a,n=Ni(e),s=iA(e.d),o=s.length;return t?(r&&(a=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+im(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n<0?"e":"e+")+n):n<0?(s="0."+im(-n-1)+s,r&&(a=r-o)>0&&(s+=im(a))):n>=o?(s+=im(n+1-o),r&&(a=r-n-1)>0&&(s=s+"."+im(a))):((a=n+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),r&&(a=r-o)>0&&(n+1===o&&(s+="."),s+=im(a))),e.s<0?"-"+s:s}function Eq(e,t){if(e.length>t)return e.length=t,!0}function Gie(e){var t,r,a;function n(s){var o=this;if(!(o instanceof n))return new n(s);if(o.constructor=n,s instanceof n){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(wg+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return Nq(o,s.toString())}else if(typeof s!="string")throw Error(wg+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,kUe.test(s))Nq(o,s);else throw Error(wg+s)}if(n.prototype=fr,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=Gie,n.config=n.set=_Ue,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return n.config(e),n}function _Ue(e){if(!e||typeof e!="object")throw Error(sd+"Object expected");var t,r,a,n=["precision",1,N1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<n.length;t+=3)if((a=e[r=n[t]])!==void 0)if(E1(a)===a&&a>=n[t+1]&&a<=n[t+2])this[r]=a;else throw Error(wg+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(wg+r+": "+a);return this}var FL=Gie(jUe);Jc=new FL(1);const mn=FL;var SUe=e=>e,qie={},Kie=e=>e===qie,Cq=e=>function t(){return arguments.length===0||arguments.length===1&&Kie(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Wie=(e,t)=>e===1?t:Cq(function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=a.filter(o=>o!==qie).length;return s>=e?t(...a):Wie(e-s,Cq(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=a.map(d=>Kie(d)?l.shift():d);return t(...u,...l)}))}),YS=e=>Wie(e.length,e),LF=(e,t)=>{for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},BUe=YS((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),TUe=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return SUe;var n=r.reverse(),s=n[0],o=n.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}},MF=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Xie=e=>{var t=null,r=null;return function(){for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return t&&n.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=n,r=e(...n)),r}};function Yie(e){var t;return e===0?t=1:t=Math.floor(new mn(e).abs().log(10).toNumber())+1,t}function Jie(e,t,r){for(var a=new mn(e),n=0,s=[];a.lt(t)&&n<1e5;)s.push(a.toNumber()),a=a.add(r),n++;return s}YS((e,t,r)=>{var a=+e,n=+t;return a+r*(n-a)});YS((e,t,r)=>{var a=t-+e;return a=a||1/0,(r-e)/a});YS((e,t,r)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});var Zie=e=>{var[t,r]=e,[a,n]=[t,r];return t>r&&([a,n]=[r,t]),[a,n]},eoe=(e,t,r)=>{if(e.lte(0))return new mn(0);var a=Yie(e.toNumber()),n=new mn(10).pow(a),s=e.div(n),o=a!==1?.05:.1,l=new mn(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(n);return t?new mn(c.toNumber()):new mn(Math.ceil(c.toNumber()))},IUe=(e,t,r)=>{var a=new mn(1),n=new mn(e);if(!n.isint()&&r){var s=Math.abs(e);s<1?(a=new mn(10).pow(Yie(e)-1),n=new mn(Math.floor(n.div(a).toNumber())).mul(a)):s>1&&(n=new mn(Math.floor(e)))}else e===0?n=new mn(Math.floor((t-1)/2)):r||(n=new mn(Math.floor(e)));var o=Math.floor((t-1)/2),l=TUe(BUe(c=>n.add(new mn(c-o).mul(a)).toNumber()),LF);return l(0,t)},toe=function(t,r,a,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new mn(0),tickMin:new mn(0),tickMax:new mn(0)};var o=eoe(new mn(r).sub(t).div(a-1),n,s),l;t<=0&&r>=0?l=new mn(0):(l=new mn(t).add(r).div(2),l=l.sub(new mn(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new mn(r).sub(l).div(o).toNumber()),d=c+u+1;return d>a?toe(t,r,a,n,s+1):(d<a&&(u=r>0?u+(a-d):u,c=r>0?c:c+(a-d)),{step:o,tickMin:l.sub(new mn(c).mul(o)),tickMax:l.add(new mn(u).mul(o))})};function OUe(e){var[t,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),[o,l]=Zie([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...LF(0,a-1).map(()=>1/0)]:[...LF(0,a-1).map(()=>-1/0),l];return t>r?MF(c):c}if(o===l)return IUe(o,a,n);var{step:u,tickMin:d,tickMax:f}=toe(o,l,s,n,0),h=Jie(d,f.add(new mn(.1).mul(u)),u);return t>r?MF(h):h}function FUe(e,t){var[r,a]=e,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=Zie([r,a]);if(s===-1/0||o===1/0)return[r,a];if(s===o)return[s];var l=Math.max(t,2),c=eoe(new mn(o).sub(s).div(l-1),n,0),u=[...Jie(new mn(s),new mn(o),c),o];return n===!1&&(u=u.map(d=>Math.round(d))),r>a?MF(u):u}var DUe=Xie(OUe),PUe=Xie(FUe),roe=e=>e.rootProps.maxBarSize,RUe=e=>e.rootProps.barGap,aoe=e=>e.rootProps.barCategoryGap,LUe=e=>e.rootProps.barSize,QN=e=>e.rootProps.stackOffset,DL=e=>e.options.chartName,PL=e=>e.rootProps.syncId,noe=e=>e.rootProps.syncMethod,RL=e=>e.options.eventEmitter,tA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},nc={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},JS=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},MUe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:tA.angleAxisId,includeHidden:!1,name:void 0,reversed:tA.reversed,scale:tA.scale,tick:tA.tick,tickCount:void 0,ticks:void 0,type:tA.type,unit:void 0},UUe={allowDataOverflow:nc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:nc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:nc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:nc.scale,tick:nc.tick,tickCount:nc.tickCount,ticks:void 0,type:nc.type,unit:void 0},QUe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:tA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:tA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:tA.scale,tick:tA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},HUe={allowDataOverflow:nc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:nc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:nc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:nc.scale,tick:nc.tick,tickCount:nc.tickCount,ticks:void 0,type:"category",unit:void 0},C1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?QUe:MUe,HN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?HUe:UUe,ZS=e=>e.polarOptions,LL=mt([o0,l0,Pi],Ose),soe=mt([ZS,LL],(e,t)=>{if(e!=null)return Ol(e.innerRadius,t,0)}),ioe=mt([ZS,LL],(e,t)=>{if(e!=null)return Ol(e.outerRadius,t,t*.8)}),zUe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},ooe=mt([ZS],zUe),VUe=mt([C1,ooe],JS),loe=mt([LL,soe,ioe],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),$Ue=mt([HN,loe],JS),j1=mt([Ca,ZS,soe,ioe,o0,l0],(e,t,r,a,n,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:Ol(o,n,n/2),cy:Ol(l,s,s/2),innerRadius:r,outerRadius:a,startAngle:c,endAngle:u,clockWise:!1}}}),On=(e,t)=>t,zN=(e,t,r)=>r;function ML(e){return e==null?void 0:e.id}var Li=e=>{var t=Ca(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},k1=e=>e.tooltip.settings.axisId,Mi=e=>{var t=Li(e),r=k1(e);return _1(e,t,r)};function coe(e,t,r){var{chartData:a=[]}=t,n=r==null?void 0:r.dataKey,s=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:a;if(!(c==null||c.length===0)){var u=ML(o);c.forEach((d,f)=>{var h=n==null?f:String(Qn(d,n,null)),m=Qn(d,o.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:m}),s.set(h,g)})}}),Array.from(s.values())}function e4(e){return e.stackId!=null&&e.dataKey!=null}function jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Qk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jq(Object(r),!0).forEach(function(a){GUe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function GUe(e,t,r){return(t=qUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qUe(e){var t=KUe(e,"string");return typeof t=="symbol"?t:t+""}function KUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UF=[0,"auto"],Qc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},u0=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Qc},Hc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:UF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:US},hp=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Hc},WUe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},UL=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??WUe},si=(e,t,r)=>{switch(t){case"xAxis":return u0(e,r);case"yAxis":return hp(e,r);case"zAxis":return UL(e,r);case"angleAxis":return C1(e,r);case"radiusAxis":return HN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},XUe=(e,t,r)=>{switch(t){case"xAxis":return u0(e,r);case"yAxis":return hp(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},_1=(e,t,r)=>{switch(t){case"xAxis":return u0(e,r);case"yAxis":return hp(e,r);case"angleAxis":return C1(e,r);case"radiusAxis":return HN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},uoe=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function QL(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var HL=e=>e.graphicalItems.cartesianItems,YUe=mt([On,zN],QL),zL=(e,t,r)=>e.filter(r).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),VN=mt([HL,si,YUe],zL),doe=mt([VN],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(e4)),foe=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Aoe=mt([VN],foe),VL=e=>e.map(t=>t.data).filter(Boolean).flat(1),JUe=mt([VN],VL),$L=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:n}=t;return e.length>0?e:r.slice(a,n+1)},GL=mt([JUe,IL],$L),qL=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Qn(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(n=>({value:Qn(n,a)}))):e.map(a=>({value:a})),t4=mt([GL,si,VN],qL);function hoe(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function hx(e){return e.filter(t=>wA(t)||t instanceof Date).map(Number).filter(t=>iu(t)===!1)}function ZUe(e,t,r){return!r||typeof t!="number"||iu(t)?[]:r.length?hx(r.flatMap(a=>{var n=Qn(e,a.dataKey),s,o;if(Array.isArray(n)?[s,o]=n:s=o=n,!(!cu(s)||!cu(o)))return[t-s,t+o]})):[]}var e9e=mt([doe,IL,Mi],coe),moe=(e,t,r)=>{var a={},n=t.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),a);return Object.fromEntries(Object.entries(n).map(s=>{var[o,l]=s,c=l.map(ML);return[o,{stackedData:qRe(e,c,r),graphicalItems:l}]}))},QF=mt([e9e,doe,QN],moe),poe=(e,t,r)=>{var{dataStartIndex:a,dataEndIndex:n}=t;if(r!=="zAxis"){var s=JRe(e,a,n);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},t9e=mt([QF,Ap,On],poe),goe=(e,t,r,a,n)=>r.length>0?e.flatMap(s=>r.flatMap(o=>{var l,c,u=(l=a[o.id])===null||l===void 0?void 0:l.filter(f=>hoe(n,f)),d=Qn(s,(c=t.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:ZUe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Qn(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),r4=e=>e.errorBars,xoe=(e,t,r)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>hoe(r,a));mt([Aoe,r4,On],xoe);var r9e=mt([GL,si,Aoe,r4,On],goe);function a9e(e){var{value:t}=e;if(wA(t)||t instanceof Date)return t}var kq=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),r=hx(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},n9e=(e,t,r)=>{var a=e.map(a9e).filter(n=>n!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Bne(a))?nie(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},KL=e=>{var t;if(e==null||!("domain"in e))return UF;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=hx(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:UF},Hk=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var n=r.filter(Boolean);if(n.length!==0){var s=n.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},voe=e=>e.referenceElements.dots,S1=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),s9e=mt([voe,On,zN],S1),boe=e=>e.referenceElements.areas,i9e=mt([boe,On,zN],S1),yoe=e=>e.referenceElements.lines,o9e=mt([yoe,On,zN],S1),woe=(e,t)=>{var r=hx(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},l9e=mt(s9e,On,woe),Noe=(e,t)=>{var r=hx(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},c9e=mt([i9e,On],Noe),Eoe=(e,t)=>{var r=hx(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},u9e=mt(o9e,On,Eoe),d9e=mt(l9e,u9e,c9e,(e,t,r)=>Hk(e,r,t)),Coe=mt([si],KL),WL=(e,t,r,a,n,s,o)=>{var l=EUe(t,e.allowDataOverflow);if(l!=null)return l;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?Hk(r,n,kq(a)):Hk(n,kq(a));return CUe(t,u,e.allowDataOverflow)},f9e=mt([si,Coe,t9e,r9e,d9e,Ca,On],WL),A9e=[0,1],XL=(e,t,r,a,n,s,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=up(t,s);return u&&l==null?nie(0,r.length):c==="category"?n9e(a,e,u):n==="expand"?A9e:o}},YL=mt([si,Ca,GL,t4,QN,On,f9e],XL),joe=(e,t,r,a,n)=>{if(e!=null){var{scale:s,type:o}=e;if(s==="auto")return t==="radial"&&n==="radiusAxis"?"band":t==="radial"&&n==="angleAxis"?"linear":o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(FN(s));return l in v2?l:"point"}}},mp=mt([si,Ca,uoe,DL,On],joe);function h9e(e){if(e!=null){if(e in v2)return v2[e]();var t="scale".concat(FN(e));if(t in v2)return v2[t]()}}function a4(e,t,r,a){if(!(r==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(a);var n=h9e(t);if(n!=null){var s=n.domain(r).range(a);return HRe(s),s}}}var JL=(e,t,r)=>{var a=KL(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Lb(e))return DUe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Lb(e))return PUe(e,t.tickCount,t.allowDecimals)}},ZL=mt([YL,_1,mp],JL),eM=(e,t,r,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Lb(t)&&Array.isArray(r)&&r.length>0){var n=t[0],s=r[0],o=t[1],l=r[r.length-1];return[Math.min(n,s),Math.max(o,l)]}return t},m9e=mt([si,YL,ZL,On],eM),p9e=mt(t4,si,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from(hx(e.map(l=>l.value))).sort((l,c)=>l-c);if(a.length<2)return 1/0;var n=a[a.length-1]-a[0];if(n===0)return 1/0;for(var s=0;s<a.length-1;s++){var o=a[s+1]-a[s];r=Math.min(r,o)}return r/n}}),koe=mt(p9e,Ca,aoe,Pi,(e,t,r,a)=>a,(e,t,r,a,n)=>{if(!cu(e))return 0;var s=t==="vertical"?a.height:a.width;if(n==="gap")return e*s/2;if(n==="no-gap"){var o=Ol(r,e*s),l=e*s/2;return l-o-(l-o)/s*o}return 0}),g9e=(e,t)=>{var r=u0(e,t);return r==null||typeof r.padding!="string"?0:koe(e,"xAxis",t,r.padding)},x9e=(e,t)=>{var r=hp(e,t);return r==null||typeof r.padding!="string"?0:koe(e,"yAxis",t,r.padding)},v9e=mt(u0,g9e,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:n}=e;return typeof n=="string"?{left:t,right:t}:{left:((r=n.left)!==null&&r!==void 0?r:0)+t,right:((a=n.right)!==null&&a!==void 0?a:0)+t}}),b9e=mt(hp,x9e,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:n}=e;return typeof n=="string"?{top:t,bottom:t}:{top:((r=n.top)!==null&&r!==void 0?r:0)+t,bottom:((a=n.bottom)!==null&&a!==void 0?a:0)+t}}),y9e=mt([Pi,v9e,HS,QS,(e,t,r)=>r],(e,t,r,a,n)=>{var{padding:s}=a;return n?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),w9e=mt([Pi,Ca,b9e,HS,QS,(e,t,r)=>r],(e,t,r,a,n,s)=>{var{padding:o}=n;return s?[a.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),$N=(e,t,r,a)=>{var n;switch(t){case"xAxis":return y9e(e,r,a);case"yAxis":return w9e(e,r,a);case"zAxis":return(n=UL(e,r))===null||n===void 0?void 0:n.range;case"angleAxis":return ooe(e);case"radiusAxis":return loe(e,r);default:return}},_oe=mt([si,$N],JS),B1=mt([si,mp,m9e,_oe],a4);mt([VN,r4,On],xoe);function Soe(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var n4=(e,t)=>t,s4=(e,t,r)=>r,N9e=mt(rL,n4,s4,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(Soe)),E9e=mt(aL,n4,s4,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(Soe)),Boe=(e,t)=>({width:e.width,height:t.height}),C9e=(e,t)=>{var r=typeof t.width=="number"?t.width:US;return{width:r,height:e.height}},Toe=mt(Pi,u0,Boe),j9e=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},k9e=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},_9e=mt(l0,Pi,N9e,n4,s4,(e,t,r,a,n)=>{var s={},o;return r.forEach(l=>{var c=Boe(t,l);o==null&&(o=j9e(t,a,e));var u=a==="top"&&!n||a==="bottom"&&n;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),S9e=mt(o0,Pi,E9e,n4,s4,(e,t,r,a,n)=>{var s={},o;return r.forEach(l=>{var c=C9e(t,l);o==null&&(o=k9e(t,a,e));var u=a==="left"&&!n||a==="right"&&n;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),B9e=(e,t)=>{var r=Pi(e),a=u0(e,t);if(a!=null){var n=_9e(e,a.orientation,a.mirror),s=n[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},T9e=(e,t)=>{var r=Pi(e),a=hp(e,t);if(a!=null){var n=S9e(e,a.orientation,a.mirror),s=n[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Ioe=mt(Pi,hp,(e,t)=>{var r=typeof t.width=="number"?t.width:US;return{width:r,height:e.height}}),_q=(e,t,r)=>{switch(t){case"xAxis":return Toe(e,r).width;case"yAxis":return Ioe(e,r).height;default:return}},Ooe=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:n,type:s,dataKey:o}=r,l=up(e,a),c=t.map(u=>u.value);if(o&&l&&s==="category"&&n&&Bne(c))return c}},GN=mt([Ca,t4,si,On],Ooe),tM=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:n,scale:s}=r,o=up(e,a);if(o&&(n==="number"||s!=="auto"))return t.map(l=>l.value)}},rM=mt([Ca,t4,_1,On],tM),Sq=mt([Ca,XUe,mp,B1,GN,rM,$N,ZL,On],(e,t,r,a,n,s,o,l,c)=>{if(t==null)return null;var u=up(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:n,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:a}}),Foe=(e,t,r,a,n,s,o,l,c)=>{if(!(t==null||a==null)){var u=up(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,g=d==="category"&&a.bandwidth?a.bandwidth()/m:0;g=c==="angleAxis"&&s!=null&&s.length>=2?ao(s[0]-s[1])*2*g:g;var x=f||n;if(x){var v=x.map((y,w)=>{var j=o?o.indexOf(y):y;return{index:w,coordinate:a(j)+g,value:y,offset:g}});return v.filter(y=>!iu(y.coordinate))}return u&&l?l.map((y,w)=>({coordinate:a(y)+g,value:y,index:w,offset:g})):a.ticks?a.ticks(h).map(y=>({coordinate:a(y)+g,value:y,offset:g})):a.domain().map((y,w)=>({coordinate:a(y)+g,value:o?o[y]:y,index:w,offset:g}))}},Doe=mt([Ca,_1,mp,B1,ZL,$N,GN,rM,On],Foe),Poe=(e,t,r,a,n,s,o)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var l=up(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(a==null?void 0:a.length)>=2?ao(a[0]-a[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:n?n[d]:d,index:f,offset:u}))}},Mb=mt([Ca,_1,B1,$N,GN,rM,On],Poe),Ub=mt(si,B1,(e,t)=>{if(!(e==null||t==null))return Qk(Qk({},e),{},{scale:t})}),I9e=mt([si,mp,YL,_oe],a4);mt((e,t,r)=>UL(e,r),I9e,(e,t)=>{if(!(e==null||t==null))return Qk(Qk({},e),{},{scale:t})});var O9e=mt([Ca,rL,aL],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Roe=e=>e.options.defaultTooltipEventType,Loe=e=>e.options.validateTooltipEventTypes;function Moe(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function aM(e,t){var r=Roe(e),a=Loe(e);return Moe(t,r,a)}function F9e(e){return ar(t=>aM(t,e))}var Uoe=(e,t)=>{var r,a=Number(t);if(!(iu(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},D9e=e=>e.tooltip.settings,mm={active:!1,index:null,dataKey:void 0,coordinate:void 0},P9e={itemInteraction:{click:mm,hover:mm},axisInteraction:{click:mm,hover:mm},keyboardInteraction:mm,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Qoe=du({name:"tooltip",initialState:P9e,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Th(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:R9e,removeTooltipEntrySettings:L9e,setTooltipSettingsState:M9e,setActiveMouseOverItemIndex:Hoe,mouseLeaveItem:U9e,mouseLeaveChart:zoe,setActiveClickItemIndex:Q9e,setMouseOverAxisIndex:Voe,setMouseClickAxisIndex:H9e,setSyncInteraction:HF,setKeyboardInteraction:zF}=Qoe.actions,z9e=Qoe.reducer;function Bq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function zC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bq(Object(r),!0).forEach(function(a){V9e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function V9e(e,t,r){return(t=$9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $9e(e){var t=G9e(e,"string");return typeof t=="symbol"?t:t+""}function G9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q9e(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function K9e(e){return e.index!=null}var $oe=(e,t,r,a)=>{if(t==null)return mm;var n=q9e(e,t,r);if(n==null)return mm;if(n.active)return n;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(K9e(n)){if(s)return zC(zC({},n),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return zC(zC({},mm),{},{coordinate:n.coordinate})},nM=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var a=Number(r);if(!cu(a))return r;var n=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(n,Math.min(a,s)))},Goe=(e,t,r,a,n,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=n==null?void 0:n[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:d.coordinate}}}},qoe=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var n;return r==="hover"?n=e.itemInteraction.hover.dataKey:n=e.itemInteraction.click.dataKey,n==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===n})},qN=e=>e.options.tooltipPayloadSearcher,T1=e=>e.tooltip;function Tq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Iq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tq(Object(r),!0).forEach(function(a){W9e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function W9e(e,t,r){return(t=X9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X9e(e){var t=Y9e(e,"string");return typeof t=="symbol"?t:t+""}function Y9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J9e(e,t){return e??t}var Koe=(e,t,r,a,n,s,o)=>{if(!(t==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=J9e(x,l),w=Array.isArray(y)?Dse(y,u,d):y,j=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:a==null?void 0:a.dataKey,O=v==null?void 0:v.nameKey,B;if(a!=null&&a.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?B=FFe(w,a.dataKey,n):B=s(w,t,c,O),Array.isArray(B))B.forEach(C=>{var _=Iq(Iq({},v),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});h.push(uG({tooltipEntrySettings:_,dataKey:C.dataKey,payload:C.payload,value:Qn(C.payload,C.dataKey),name:C.name}))});else{var T;h.push(uG({tooltipEntrySettings:v,dataKey:j,payload:B,value:Qn(B,j),name:(T=Qn(B,O))!==null&&T!==void 0?T:v==null?void 0:v.name}))}return h},f)}},sM=mt([Mi,Ca,uoe,DL,Li],joe),Z9e=mt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),eQe=mt([Li,k1],QL),KN=mt([Z9e,Mi,eQe],zL),tQe=mt([KN],e=>e.filter(e4)),rQe=mt([KN],VL),I1=mt([rQe,Ap],$L),aQe=mt([tQe,Ap,Mi],coe),iM=mt([I1,Mi,KN],qL),nQe=mt([Mi],KL),sQe=mt([KN],e=>e.filter(e4)),iQe=mt([aQe,sQe,QN],moe),oQe=mt([iQe,Ap,Li],poe),lQe=mt([KN],foe),cQe=mt([I1,Mi,lQe,r4,Li],goe),uQe=mt([voe,Li,k1],S1),dQe=mt([uQe,Li],woe),fQe=mt([boe,Li,k1],S1),AQe=mt([fQe,Li],Noe),hQe=mt([yoe,Li,k1],S1),mQe=mt([hQe,Li],Eoe),pQe=mt([dQe,mQe,AQe],Hk),gQe=mt([Mi,nQe,oQe,cQe,pQe,Ca,Li],WL),Woe=mt([Mi,Ca,I1,iM,QN,Li,gQe],XL),xQe=mt([Woe,Mi,sM],JL),vQe=mt([Mi,Woe,xQe,Li],eM),Xoe=e=>{var t=Li(e),r=k1(e),a=!1;return $N(e,t,r,a)},Yoe=mt([Mi,Xoe],JS),Joe=mt([Mi,sM,vQe,Yoe],a4),bQe=mt([Ca,iM,Mi,Li],Ooe),yQe=mt([Ca,iM,Mi,Li],tM),wQe=(e,t,r,a,n,s,o,l)=>{if(t){var{type:c}=t,u=up(e,l);if(a){var d=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,f=c==="category"&&a.bandwidth?a.bandwidth()/d:0;return f=l==="angleAxis"&&n!=null&&(n==null?void 0:n.length)>=2?ao(n[0]-n[1])*2*f:f,u&&o?o.map((h,m)=>({coordinate:a(h)+f,value:h,index:m,offset:f})):a.domain().map((h,m)=>({coordinate:a(h)+f,value:s?s[h]:h,index:m,offset:f}))}}},d0=mt([Ca,Mi,sM,Joe,Xoe,bQe,yQe,Li],wQe),oM=mt([Roe,Loe,D9e],(e,t,r)=>Moe(r.shared,e,t)),Zoe=e=>e.tooltip.settings.trigger,lM=e=>e.tooltip.settings.defaultIndex,i4=mt([T1,oM,Zoe,lM],$oe),Zm=mt([i4,I1],nM),ele=mt([d0,Zm],Uoe),tle=mt([i4],e=>{if(e)return e.dataKey}),rle=mt([T1,oM,Zoe,lM],qoe),NQe=mt([o0,l0,Ca,Pi,d0,lM,rle,qN],Goe),EQe=mt([i4,NQe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),CQe=mt([i4],e=>e.active),jQe=mt([rle,Zm,Ap,Mi,ele,qN,oM],Koe),kQe=mt([jQe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Oq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Fq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oq(Object(r),!0).forEach(function(a){_Qe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _Qe(e,t,r){return(t=SQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SQe(e){var t=BQe(e,"string");return typeof t=="symbol"?t:t+""}function BQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TQe=()=>ar(Mi),IQe=()=>{var e=TQe(),t=ar(d0),r=ar(Joe);return Gw(Fq(Fq({},e),{},{scale:r}),t)},OQe=()=>ar(DL),cM=(e,t)=>t,ale=(e,t,r)=>r,uM=(e,t,r,a)=>a,FQe=mt(d0,e=>OS(e,t=>t.coordinate)),dM=mt([T1,cM,ale,uM],$oe),nle=mt([dM,I1],nM),DQe=(e,t,r)=>{if(t!=null){var a=T1(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},sle=mt([T1,cM,ale,uM],qoe),zk=mt([o0,l0,Ca,Pi,d0,uM,sle,qN],Goe),PQe=mt([dM,zk],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),ile=mt(d0,nle,Uoe),RQe=mt([sle,nle,Ap,Mi,ile,qN,cM],Koe),LQe=mt([dM],e=>({isActive:e.active,activeIndex:e.index})),MQe=(e,t,r,a,n,s,o,l)=>{if(!(!e||!t||!a||!n||!s)){var c=ZRe(e.chartX,e.chartY,t,r,l);if(c){var u=t8e(c,t),d=URe(u,o,s,a,n),f=e8e(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function VF(){return VF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},VF.apply(null,arguments)}function Dq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function VC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dq(Object(r),!0).forEach(function(a){UQe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function UQe(e,t,r){return(t=QQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QQe(e){var t=HQe(e,"string");return typeof t=="symbol"?t:t+""}function HQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zQe(e){var{coordinate:t,payload:r,index:a,offset:n,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=a;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,g;if(u==="ScatterChart")m=d,g=J8e;else if(u==="BarChart")m=Z8e(o,d,n,s),g=eie;else if(o==="radial"){var{cx:x,cy:v,radius:y,startAngle:w,endAngle:j}=tie(d);m={cx:x,cy:v,startAngle:w,endAngle:j,innerRadius:y,outerRadius:y},g=aie}else m={points:RLe(o,d,n)},g=qse;var O=typeof l=="object"&&"className"in l?l.className:void 0,B=VC(VC(VC(VC({stroke:"#ccc",pointerEvents:"none"},n),m),Va(l,!1)),{},{payload:f,payloadIndex:h,className:fa("recharts-tooltip-cursor",O)});return N.isValidElement(l)?N.cloneElement(l,B):N.createElement(g,B)}function VQe(e){var t=IQe(),r=Hse(),a=oL(),n=OQe();return N.createElement(zQe,VF({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:a,tooltipAxisBandSize:t,chartName:n}))}var ole=N.createContext(null),$Qe=()=>N.useContext(ole),mI={exports:{}},Pq;function GQe(){return Pq||(Pq=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function n(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new n(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var x=r?r+u:u;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,w,j;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(j=1,w=new Array(y-1);j<y;j++)w[j-1]=arguments[j];v.fn.apply(v.context,w)}else{var O=v.length,B;for(j=0;j<O;j++)switch(v[j].once&&this.removeListener(u,v[j].fn,void 0,!0),y){case 1:v[j].fn.call(v[j].context);break;case 2:v[j].fn.call(v[j].context,d);break;case 3:v[j].fn.call(v[j].context,d,f);break;case 4:v[j].fn.call(v[j].context,d,f,h);break;default:if(!w)for(B=1,w=new Array(y-1);B<y;B++)w[B-1]=arguments[B];v[j].fn.apply(v[j].context,w)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(mI)),mI.exports}var qQe=GQe();const KQe=Dl(qQe);var Jw=new KQe,$F="recharts.syncEvent.tooltip",Rq="recharts.syncEvent.brush";function fM(e,t){if(t){var r=Number.parseInt(t,10);if(!iu(r))return e==null?void 0:e[r]}}var WQe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},lle=du({name:"options",initialState:WQe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),XQe=lle.reducer,{createEventEmitter:YQe}=lle.actions;function JQe(e){return e.tooltip.syncInteraction}var ZQe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},cle=du({name:"chartData",initialState:ZQe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:Lq,setDataStartEndIndexes:eHe,setComputedData:vgt}=cle.actions,tHe=cle.reducer,ule=()=>{};function rHe(){var e=ar(PL),t=ar(RL),r=Wn(),a=ar(noe),n=ar(d0),s=oL(),o=nL(),l=ar(c=>c.rootProps.className);N.useEffect(()=>{if(e==null)return ule;var c=(u,d,f)=>{if(t!==f&&e===u){if(a==="index"){r(d);return}if(n!=null){var h;if(typeof a=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=a(n,m);h=n[g]}else a==="value"&&(h=n.find(T=>String(T.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||o==null){r(HF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,w=Math.min(v,o.x+o.width),j=Math.min(y,o.y+o.height),O={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?j:h.coordinate},B=HF({active:d.payload.active,coordinate:O,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(B)}}};return Jw.on($F,c),()=>{Jw.off($F,c)}},[l,r,t,e,a,n,s,o])}function aHe(){var e=ar(PL),t=ar(RL),r=Wn();N.useEffect(()=>{if(e==null)return ule;var a=(n,s,o)=>{t!==o&&e===n&&r(eHe(s))};return Jw.on(Rq,a),()=>{Jw.off(Rq,a)}},[r,t,e])}function nHe(){var e=Wn();N.useEffect(()=>{e(YQe())},[e]),rHe(),aHe()}function sHe(e,t,r,a,n,s){var o=ar(h=>DQe(h,e,t)),l=ar(RL),c=ar(PL),u=ar(noe),d=ar(JQe),f=d==null?void 0:d.active;N.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=HF({active:s,coordinate:r,dataKey:o,index:n,label:typeof a=="number"?String(a):a});Jw.emit($F,c,h,l)}},[f,r,o,n,a,l,c,u,s])}function Mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Uq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mq(Object(r),!0).forEach(function(a){iHe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function iHe(e,t,r){return(t=oHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oHe(e){var t=lHe(e,"string");return typeof t=="symbol"?t:t+""}function lHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cHe(e){return e.dataKey}function uHe(e,t){return N.isValidElement(e)?N.cloneElement(e,t):typeof e=="function"?N.createElement(e,t):N.createElement(B8e,t)}var Qq=[],dHe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!dx.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function lc(e){var t=od(e,dHe),{active:r,allowEscapeViewBox:a,animationDuration:n,animationEasing:s,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:w,portal:j,axisId:O}=t,B=Wn(),T=typeof w=="number"?String(w):w;N.useEffect(()=>{B(M9e({shared:v,trigger:y,axisId:O,active:r,defaultIndex:T}))},[B,v,y,O,r,T]);var C=nL(),_=Gse(),S=F9e(v),{activeIndex:L,isActive:P}=ar(X=>LQe(X,S,y,T)),k=ar(X=>RQe(X,S,y,T)),M=ar(X=>ile(X,S,y,T)),U=ar(X=>PQe(X,S,y,T)),z=k,Q=$Qe(),q=r??P,[V,Y]=lse([z,q]),K=S==="axis"?M:void 0;sHe(S,y,U,K,L,q);var J=j??Q;if(J==null)return null;var R=z??Qq;q||(R=Qq),l&&R.length&&(R=rse(z.filter(X=>X.value!=null&&(X.hide!==!0||t.includeHidden)),d,cHe));var F=R.length>0,W=N.createElement(R8e,{allowEscapeViewBox:a,animationDuration:n,animationEasing:s,isAnimationActive:c,active:q,coordinate:U,hasPayload:F,offset:u,position:f,reverseDirection:h,useTranslate3d:m,viewBox:C,wrapperStyle:g,lastBoundingBox:V,innerRef:Y,hasPortalFromProps:!!j},uHe(o,Uq(Uq({},t),{},{payload:R,label:K,active:q,coordinate:U,accessibilityLayer:_})));return N.createElement(N.Fragment,null,R8.createPortal(W,J),q&&N.createElement(VQe,{cursor:x,tooltipEventType:S,coordinate:U,payload:z,index:L}))}var pI={},gI={},xI={},Hq;function fHe(){return Hq||(Hq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a,{signal:n,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),x()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},a)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),o=void 0,l=null},v=()=>{d()},y=function(...w){if(n!=null&&n.aborted)return;o=this,l=w;const j=h==null;m(),c&&j&&d()};return y.schedule=m,y.cancel=x,y.flush=v,n==null||n.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(xI)),xI}var zq;function AHe(){return zq||(zq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fHe();function r(a,n=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=a.apply(this,x),f=null},n,{edges:u}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=a.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r}(gI)),gI}var Vq;function hHe(){return Vq||(Vq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AHe();function r(a,n=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return t.debounce(a,n,{leading:o,maxWait:n,trailing:l})}e.throttle=r}(pI)),pI}var vI,$q;function mHe(){return $q||($q=1,vI=hHe().throttle),vI}var pHe=mHe();const gHe=Dl(pHe);var Y2=function(t,r){for(var a=arguments.length,n=new Array(a>2?a-2:0),s=2;s<a;s++)n[s-2]=arguments[s]};function Gq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function bI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gq(Object(r),!0).forEach(function(a){xHe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xHe(e,t,r){return(t=vHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vHe(e){var t=bHe(e,"string");return typeof t=="symbol"?t:t+""}function bHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cc=N.forwardRef((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:n="100%",height:s="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:g={}}=e,x=N.useRef(null),v=N.useRef();v.current=m,N.useImperativeHandle(t,()=>x.current);var[y,w]=N.useState({containerWidth:a.width,containerHeight:a.height}),j=N.useCallback((B,T)=>{w(C=>{var _=Math.round(B),S=Math.round(T);return C.containerWidth===_&&C.containerHeight===S?C:{containerWidth:_,containerHeight:S}})},[]);N.useEffect(()=>{var B=S=>{var L,{width:P,height:k}=S[0].contentRect;j(P,k),(L=v.current)===null||L===void 0||L.call(v,P,k)};d>0&&(B=gHe(B,d,{trailing:!0,leading:!1}));var T=new ResizeObserver(B),{width:C,height:_}=x.current.getBoundingClientRect();return j(C,_),T.observe(x.current),()=>{T.disconnect()}},[j,d]);var O=N.useMemo(()=>{var{containerWidth:B,containerHeight:T}=y;if(B<0||T<0)return null;Y2(ng(n)||ng(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,n,s),Y2(!r||r>0,"The aspect(%s) must be greater than zero.",r);var C=ng(n)?B:n,_=ng(s)?T:s;return r&&r>0&&(C?_=C/r:_&&(C=_*r),c&&_>c&&(_=c)),Y2(C>0||_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,_,n,s,o,l,r),N.Children.map(u,S=>N.cloneElement(S,{width:C,height:_,style:bI({width:C,height:_},S.props.style)}))},[r,u,s,c,l,o,y,n]);return N.createElement("div",{id:f?"".concat(f):void 0,className:fa("recharts-responsive-container",h),style:bI(bI({},g),{},{width:n,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:x},N.createElement("div",{style:{width:0,height:0,overflow:"visible"}},O))}),qh=e=>null;qh.displayName="Cell";function yHe(e,t,r){return(t=wHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wHe(e){var t=NHe(e,"string");return typeof t=="symbol"?t:t+""}function NHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class EHe{constructor(t){yHe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;this.cache.delete(a)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function CHe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qq(Object(r),!0).forEach(function(a){jHe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qq(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jHe(e,t,r){return(t=kHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kHe(e){var t=_He(e,"string");return typeof t=="symbol"?t:t+""}function _He(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SHe={cacheSize:2e3,enableCache:!0},dle=CHe({},SHe),Kq=new EHe(dle.cacheSize),BHe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Wq="recharts_measurement_span";function THe(e,t){var r=t.fontSize||"",a=t.fontFamily||"",n=t.fontWeight||"",s=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(a,"|").concat(n,"|").concat(s,"|").concat(o,"|").concat(l)}var Xq=(e,t)=>{try{var r=document.getElementById(Wq);r||(r=document.createElement("span"),r.setAttribute("id",Wq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,BHe,t),r.textContent="".concat(e);var a=r.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},J2=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||dx.isSsr)return{width:0,height:0};if(!dle.enableCache)return Xq(t,r);var a=THe(t,r),n=Kq.get(a);if(n)return n;var s=Xq(t,r);return Kq.set(a,s),s},Yq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Jq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,IHe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,OHe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,fle={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FHe=Object.keys(fle),Fv="NaN";function DHe(e,t){return e*fle[t]}class ec{static parse(t){var r,[,a,n]=(r=OHe.exec(t))!==null&&r!==void 0?r:[];return new ec(parseFloat(a),n??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,iu(t)&&(this.unit=""),r!==""&&!IHe.test(r)&&(this.num=NaN,this.unit=""),FHe.includes(r)&&(this.num=DHe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ec(NaN,""):new ec(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ec(NaN,""):new ec(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ec(NaN,""):new ec(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ec(NaN,""):new ec(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return iu(this.num)}}function Ale(e){if(e.includes(Fv))return Fv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,n,s]=(r=Yq.exec(t))!==null&&r!==void 0?r:[],o=ec.parse(a??""),l=ec.parse(s??""),c=n==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Fv;t=t.replace(Yq,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=Jq.exec(t))!==null&&u!==void 0?u:[],m=ec.parse(d??""),g=ec.parse(h??""),x=f==="+"?m.add(g):m.subtract(g);if(x.isNaN())return Fv;t=t.replace(Jq,x.toString())}return t}var Zq=/\(([^()]*)\)/;function PHe(e){for(var t=e,r;(r=Zq.exec(t))!=null;){var[,a]=r;t=t.replace(Zq,Ale(a))}return t}function RHe(e){var t=e.replace(/\s+/g,"");return t=PHe(t),t=Ale(t),t}function LHe(e){try{return RHe(e)}catch{return Fv}}function yI(e){var t=LHe(e.slice(5,-1));return t===Fv?"":t}var MHe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],UHe=["dx","dy","angle","className","breakAll"];function GF(){return GF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},GF.apply(null,arguments)}function eK(e,t){if(e==null)return{};var r,a,n=QHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function QHe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var hle=/[ \f\n\r\t\v\u2028\u2029]+/,mle=e=>{var{children:t,breakAll:r,style:a}=e;try{var n=[];Fs(t)||(r?n=t.toString().split(""):n=t.toString().split(hle));var s=n.map(l=>({word:l,width:J2(l,a).width})),o=r?0:J2("",a).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},HHe=(e,t,r,a,n)=>{var{maxLines:s,children:o,style:l,breakAll:c}=e,u=cr(s),d=o,f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((k,M)=>{var{word:U,width:z}=M,Q=k[k.length-1];if(Q&&(a==null||n||Q.width+z+r<Number(a)))Q.words.push(U),Q.width+=z+r;else{var q={words:[U],width:z};k.push(q)}return k},[])},h=f(t),m=L=>L.reduce((P,k)=>P.width>k.width?P:k);if(!u||n)return h;var g=h.length>s||m(h).width>Number(a);if(!g)return h;for(var x="",v=L=>{var P=d.slice(0,L),k=mle({breakAll:c,style:l,children:P+x}).wordsWithComputedWidth,M=f(k),U=M.length>s||m(M).width>Number(a);return[U,M]},y=0,w=d.length-1,j=0,O;y<=w&&j<=d.length-1;){var B=Math.floor((y+w)/2),T=B-1,[C,_]=v(T),[S]=v(B);if(!C&&!S&&(y=B+1),C&&S&&(w=B-1),!C&&S){O=_;break}j++}return O||h},tK=e=>{var t=Fs(e)?[]:e.toString().split(hle);return[{words:t}]},zHe=e=>{var{width:t,scaleToFit:r,children:a,style:n,breakAll:s,maxLines:o}=e;if((t||r)&&!dx.isSsr){var l,c,u=mle({breakAll:s,children:a,style:n});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return tK(a);return HHe({breakAll:s,children:a,maxLines:o,style:n},l,c,t,r)}return tK(a)},rK="#808080",O1=N.forwardRef((e,t)=>{var{x:r=0,y:a=0,lineHeight:n="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=rK}=e,d=eK(e,MHe),f=N.useMemo(()=>zHe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:h,dy:m,angle:g,className:x,breakAll:v}=d,y=eK(d,UHe);if(!wA(r)||!wA(a))return null;var w=r+(cr(h)?h:0),j=a+(cr(m)?m:0),O;switch(c){case"start":O=yI("calc(".concat(s,")"));break;case"middle":O=yI("calc(".concat((f.length-1)/2," * -").concat(n," + (").concat(s," / 2))"));break;default:O=yI("calc(".concat(f.length-1," * -").concat(n,")"));break}var B=[];if(o){var T=f[0].width,{width:C}=d;B.push("scale(".concat(cr(C)?C/T:1,")"))}return g&&B.push("rotate(".concat(g,", ").concat(w,", ").concat(j,")")),B.length&&(y.transform=B.join(" ")),N.createElement("text",GF({},Va(y,!0),{ref:t,x:w,y:j,className:fa("recharts-text",x),textAnchor:l,fill:u.includes("url")?rK:u}),f.map((_,S)=>{var L=_.words.join(v?"":" ");return N.createElement("tspan",{x:w,dy:S===0?O:n,key:"".concat(L,"-").concat(S)},L)}))});O1.displayName="Text";var VHe=["offset"],$He=["labelRef"];function aK(e,t){if(e==null)return{};var r,a,n=GHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function GHe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function nK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nK(Object(r),!0).forEach(function(a){qHe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qHe(e,t,r){return(t=KHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KHe(e){var t=WHe(e,"string");return typeof t=="symbol"?t:t+""}function WHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hh(){return hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hh.apply(null,arguments)}var XHe=e=>{var{value:t,formatter:r}=e,a=Fs(e.children)?t:e.children;return typeof r=="function"?r(a):a},AM=e=>e!=null&&typeof e=="function",YHe=(e,t)=>{var r=ao(t-e),a=Math.min(Math.abs(t-e),360);return r*a},JHe=(e,t,r,a)=>{var{position:n,offset:s,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=a,g=(u+d)/2,x=YHe(f,h),v=x>=0?1:-1,y,w;n==="insideStart"?(y=f+v*s,w=m):n==="insideEnd"?(y=h-v*s,w=!m):n==="end"&&(y=h+v*s,w=m),w=x<=0?w:!w;var j=Xa(l,c,g,y),O=Xa(l,c,g,y+(w?1:-1)*359),B="M".concat(j.x,",").concat(j.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(O.x,",").concat(O.y),T=Fs(e.id)?zw("recharts-radial-line-"):e.id;return N.createElement("text",hh({},r,{dominantBaseline:"central",className:fa("recharts-radial-bar-label",o)}),N.createElement("defs",null,N.createElement("path",{id:T,d:B})),N.createElement("textPath",{xlinkHref:"#".concat(T)},t))},ZHe=(e,t,r)=>{var{cx:a,cy:n,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=Xa(a,n,o+t,u);return{x:d,y:f,textAnchor:d>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:n,textAnchor:"middle",verticalAnchor:"end"};var h=(s+o)/2,{x:m,y:g}=Xa(a,n,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},eze=(e,t)=>{var{parentViewBox:r,offset:a,position:n}=e,{x:s,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*a,f=u>0?"end":"start",h=u>0?"start":"end",m=l>=0?1:-1,g=m*a,x=m>0?"end":"start",v=m>0?"start":"end";if(n==="top"){var y={x:s+l/2,y:o-u*a,textAnchor:"middle",verticalAnchor:f};return Cs(Cs({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(n==="bottom"){var w={x:s+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:h};return Cs(Cs({},w),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(n==="left"){var j={x:s-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return Cs(Cs({},j),r?{width:Math.max(j.x-r.x,0),height:c}:{})}if(n==="right"){var O={x:s+l+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Cs(Cs({},O),r?{width:Math.max(r.x+r.width-O.x,0),height:c}:{})}var B=r?{width:l,height:c}:{};return n==="insideLeft"?Cs({x:s+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},B):n==="insideRight"?Cs({x:s+l-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},B):n==="insideTop"?Cs({x:s+l/2,y:o+d,textAnchor:"middle",verticalAnchor:h},B):n==="insideBottom"?Cs({x:s+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},B):n==="insideTopLeft"?Cs({x:s+g,y:o+d,textAnchor:v,verticalAnchor:h},B):n==="insideTopRight"?Cs({x:s+l-g,y:o+d,textAnchor:x,verticalAnchor:h},B):n==="insideBottomLeft"?Cs({x:s+g,y:o+c-d,textAnchor:v,verticalAnchor:f},B):n==="insideBottomRight"?Cs({x:s+l-g,y:o+c-d,textAnchor:x,verticalAnchor:f},B):n&&typeof n=="object"&&(cr(n.x)||ng(n.x))&&(cr(n.y)||ng(n.y))?Cs({x:s+Ol(n.x,l),y:o+Ol(n.y,c),textAnchor:"end",verticalAnchor:"end"},B):Cs({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},B)},tze=e=>"cx"in e&&cr(e.cx);function ic(e){var{offset:t=5}=e,r=aK(e,VHe),a=Cs({offset:t},r),{viewBox:n,position:s,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=a,h=ar(j1),m=nL(),g=s==="center"?m:h??m,x=n||g;if(!x||Fs(o)&&Fs(l)&&!N.isValidElement(c)&&typeof c!="function")return null;var v=Cs(Cs({},a),{},{viewBox:x});if(N.isValidElement(c)){var{labelRef:y}=v,w=aK(v,$He);return N.cloneElement(c,w)}var j;if(typeof c=="function"){if(j=N.createElement(c,v),N.isValidElement(j))return j}else j=XHe(a);var O=tze(x),B=Va(a,!0);if(O&&(s==="insideStart"||s==="insideEnd"||s==="end"))return JHe(a,j,B,x);var T=O?ZHe(x,a.offset,a.position):eze(a,x);return N.createElement(O1,hh({ref:f,className:fa("recharts-label",u)},B,T,{breakAll:d}),j)}ic.displayName="Label";var ple=e=>{var{cx:t,cy:r,angle:a,startAngle:n,endAngle:s,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(cr(g)&&cr(x)){if(cr(d)&&cr(f))return{x:d,y:f,width:g,height:x};if(cr(h)&&cr(m))return{x:h,y:m,width:g,height:x}}if(cr(d)&&cr(f))return{x:d,y:f,width:0,height:0};if(cr(t)&&cr(r))return{cx:t,cy:r,startAngle:n||a||0,endAngle:s||a||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:v};if(e.viewBox)return e.viewBox},rze=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?N.createElement(ic,hh({key:"label-implicit"},a)):wA(e)?N.createElement(ic,hh({key:"label-implicit",value:e},a)):N.isValidElement(e)?e.type===ic?N.cloneElement(e,Cs({key:"label-implicit"},a)):N.createElement(ic,hh({key:"label-implicit",content:e},a)):AM(e)?N.createElement(ic,hh({key:"label-implicit",content:e},a)):e&&typeof e=="object"?N.createElement(ic,hh({},e,{key:"label-implicit"},a)):null},aze=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:n,labelRef:s}=t,o=ple(t),l=DN(n,ic).map((u,d)=>N.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!a)return l;var c=rze(t.label,r||o,s);return[c,...l]};ic.parseViewBox=ple;ic.renderCallByParent=aze;var wI={},NI={},sK;function nze(){return sK||(sK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(NI)),NI}var EI={},iK;function sze(){return iK||(iK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(EI)),EI}var oK;function ize(){return oK||(oK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nze(),r=sze(),a=V8();function n(s){if(a.isArrayLike(s))return t.last(r.toArray(s))}e.last=n}(wI)),wI}var CI,lK;function oze(){return lK||(lK=1,CI=ize().last),CI}var lze=oze();const gle=Dl(lze);var cze=["valueAccessor"],uze=["data","dataKey","clockWise","id","textBreakAll"];function Vk(){return Vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vk.apply(null,arguments)}function cK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function uK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cK(Object(r),!0).forEach(function(a){dze(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dze(e,t,r){return(t=fze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fze(e){var t=Aze(e,"string");return typeof t=="symbol"?t:t+""}function Aze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dK(e,t){if(e==null)return{};var r,a,n=hze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hze(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var mze=e=>Array.isArray(e.value)?gle(e.value):e.value;function Fm(e){var{valueAccessor:t=mze}=e,r=dK(e,cze),{data:a,dataKey:n,clockWise:s,id:o,textBreakAll:l}=r,c=dK(r,uze);return!a||!a.length?null:N.createElement(As,{className:"recharts-label-list"},a.map((u,d)=>{var f=Fs(n)?t(u,d):Qn(u&&u.payload,n),h=Fs(o)?{}:{id:"".concat(o,"-").concat(d)};return N.createElement(ic,Vk({},Va(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:ic.parseViewBox(Fs(s)?u:uK(uK({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}Fm.displayName="LabelList";function pze(e,t){return e?e===!0?N.createElement(Fm,{key:"labelList-implicit",data:t}):N.isValidElement(e)||AM(e)?N.createElement(Fm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?N.createElement(Fm,Vk({data:t},e,{key:"labelList-implicit"})):null:null}function gze(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:a}=e,n=DN(a,Fm).map((o,l)=>N.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return n;var s=pze(e.label,t);return[s,...n]}Fm.renderCallByParent=gze;var xze=["points","className","baseLinePoints","connectNulls"];function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Dv.apply(null,arguments)}function vze(e,t){if(e==null)return{};var r,a,n=bze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function bze(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var fK=e=>e&&e.x===+e.x&&e.y===+e.y,yze=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(a=>{fK(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),fK(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Z2=(e,t)=>{var r=yze(e);t&&(r=[r.reduce((n,s)=>[...n,...s],[])]);var a=r.map(n=>n.reduce((s,o,l)=>"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y),"")).join("");return r.length===1?"".concat(a,"Z"):a},wze=(e,t,r)=>{var a=Z2(e,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Z2(t.reverse(),r).slice(1))},xle=e=>{var{points:t,className:r,baseLinePoints:a,connectNulls:n}=e,s=vze(e,xze);if(!t||!t.length)return null;var o=fa("recharts-polygon",r);if(a&&a.length){var l=s.stroke&&s.stroke!=="none",c=wze(t,a,n);return N.createElement("g",{className:o},N.createElement("path",Dv({},Va(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?N.createElement("path",Dv({},Va(s,!0),{fill:"none",d:Z2(t,n)})):null,l?N.createElement("path",Dv({},Va(s,!0),{fill:"none",d:Z2(a,n)})):null)}var u=Z2(t,n);return N.createElement("path",Dv({},Va(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:o,d:u}))};function qF(){return qF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qF.apply(null,arguments)}var hM=e=>{var{cx:t,cy:r,r:a,className:n}=e,s=fa("recharts-dot",n);return t===+t&&r===+r&&a===+a?N.createElement("circle",qF({},pl(e),D8(e),{className:s,cx:t,cy:r,r:a})):null},mM=e=>e.graphicalItems.polarItems,Nze=mt([On,zN],QL),pM=mt([mM,si,Nze],zL),Eze=mt([pM],VL),gM=mt([Eze,XS],$L),vle=mt([gM,si,pM],qL),Cze=mt([gM,si,pM],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(n=>{var s,o=Qn(a,(s=t.dataKey)!==null&&s!==void 0?s:n.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Qn(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),AK=()=>{},jze=mt([si,Coe,AK,Cze,AK,Ca,On],WL),ble=mt([si,Ca,gM,vle,QN,On,jze],XL),yle=mt([ble,si,mp],JL),kze=mt([si,ble,yle,On],eM),xM=(e,t,r)=>{switch(t){case"angleAxis":return C1(e,r);case"radiusAxis":return HN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},vM=(e,t,r)=>{switch(t){case"angleAxis":return VUe(e,r);case"radiusAxis":return $Ue(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},F1=mt([xM,mp,kze,vM],a4),wle=mt([Ca,vle,_1,On],tM),D1=mt([Ca,xM,mp,F1,yle,vM,GN,wle,On],Foe);mt([Ca,xM,F1,vM,GN,wle,On],Poe);var _ze=(e,t)=>D1(e,"angleAxis",t,!1),Sze=mt([_ze],e=>{if(e)return e.map(t=>t.coordinate)}),Bze=(e,t)=>D1(e,"radiusAxis",t,!1),Tze=mt([Bze],e=>{if(e)return e.map(t=>t.coordinate)}),Ize=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function Oze(e,t){if(e==null)return{};var r,a,n=Fze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fze(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Kh.apply(null,arguments)}function hK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Qb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hK(Object(r),!0).forEach(function(a){Dze(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Dze(e,t,r){return(t=Pze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pze(e){var t=Rze(e,"string");return typeof t=="symbol"?t:t+""}function Rze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lze=(e,t,r,a)=>{var n="";return a.forEach((s,o)=>{var l=Xa(t,r,e,s);o?n+="L ".concat(l.x,",").concat(l.y):n+="M ".concat(l.x,",").concat(l.y)}),n+="Z",n},Mze=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:n,polarAngles:s,radialLines:o}=e;if(!s||!s.length||!o)return null;var l=Qb({stroke:"#ccc"},pl(e));return N.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=Xa(t,r,a,c),d=Xa(t,r,n,c);return N.createElement("line",Kh({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},Uze=e=>{var{cx:t,cy:r,radius:a,index:n}=e,s=Qb(Qb({stroke:"#ccc"},pl(e)),{},{fill:"none"});return N.createElement("circle",Kh({},s,{className:fa("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(n),cx:t,cy:r,r:a}))},Qze=e=>{var{radius:t,index:r}=e,a=Qb(Qb({stroke:"#ccc"},pl(e)),{},{fill:"none"});return N.createElement("path",Kh({},a,{className:fa("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:Lze(t,e.cx,e.cy,e.polarAngles)}))},Hze=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:N.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((a,n)=>{var s=n;return r==="circle"?N.createElement(Uze,Kh({key:s},e,{radius:a,index:n})):N.createElement(Qze,Kh({key:s},e,{radius:a,index:n}))}))},Nle=e=>{var t,r,a,n,s,o,l,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=Oze(e,Ize),w=ar(j1),j=Qb({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(a=(n=w==null?void 0:w.cy)!==null&&n!==void 0?n:g)!==null&&a!==void 0?a:0,innerRadius:(s=(o=w==null?void 0:w.innerRadius)!==null&&o!==void 0?o:x)!==null&&s!==void 0?s:0,outerRadius:(l=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0},y),{polarAngles:O,polarRadius:B,cx:T,cy:C,innerRadius:_,outerRadius:S}=j,L=ar(U=>Sze(U,f)),P=ar(U=>Tze(U,h)),k=Array.isArray(O)?O:L,M=Array.isArray(B)?B:P;return S<=0||k==null||M==null?null:N.createElement("g",{className:"recharts-polar-grid"},N.createElement(Mze,Kh({cx:T,cy:C,innerRadius:_,outerRadius:S,gridType:u,radialLines:d},j,{polarAngles:k,polarRadius:M})),N.createElement(Hze,Kh({cx:T,cy:C,innerRadius:_,outerRadius:S,gridType:u,radialLines:d},j,{polarAngles:k,polarRadius:M})))};Nle.displayName="PolarGrid";var jI={},kI={},mK;function zze(){return mK||(mK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){if(r.length===0)return;let n=r[0],s=a(n);for(let o=1;o<r.length;o++){const l=r[o],c=a(l);c>s&&(s=c,n=l)}return n}e.maxBy=t}(kI)),kI}var pK;function Vze(){return pK||(pK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zze(),r=IS(),a=W8();function n(s,o){if(s!=null)return t.maxBy(Array.from(s),a.iteratee(o??r.identity))}e.maxBy=n}(jI)),jI}var _I,gK;function $ze(){return gK||(gK=1,_I=Vze().maxBy),_I}var Gze=$ze();const qze=Dl(Gze);var SI={},BI={},xK;function Kze(){return xK||(xK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){if(r.length===0)return;let n=r[0],s=a(n);for(let o=1;o<r.length;o++){const l=r[o],c=a(l);c<s&&(s=c,n=l)}return n}e.minBy=t}(BI)),BI}var vK;function Wze(){return vK||(vK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kze(),r=IS(),a=W8();function n(s,o){if(s!=null)return t.minBy(Array.from(s),a.iteratee(o??r.identity))}e.minBy=n}(SI)),SI}var TI,bK;function Xze(){return bK||(bK=1,TI=Wze().minBy),TI}var Yze=Xze();const Jze=Dl(Yze);var Zze={radiusAxis:{},angleAxis:{}},Ele=du({name:"polarAxis",initialState:Zze,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:eVe,removeRadiusAxis:tVe,addAngleAxis:rVe,removeAngleAxis:aVe}=Ele.actions,nVe=Ele.reducer,sVe=["cx","cy","angle","axisLine"],iVe=["angle","tickFormatter","stroke","tick"];function Zw(){return Zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zw.apply(null,arguments)}function yK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function oA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yK(Object(r),!0).forEach(function(a){o4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function o4(e,t,r){return(t=oVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oVe(e){var t=lVe(e,"string");return typeof t=="symbol"?t:t+""}function lVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cle(e,t){if(e==null)return{};var r,a,n=cVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cVe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var jle="radiusAxis";function uVe(e){var t=Wn();return N.useEffect(()=>(t(eVe(e)),()=>{t(tVe(e))})),null}var dVe=(e,t,r,a)=>{var{coordinate:n}=e;return Xa(r,a,n,t)},fVe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},AVe=(e,t,r,a)=>{var n=qze(a,o=>o.coordinate||0),s=Jze(a,o=>o.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:n.coordinate||0}},hVe=(e,t)=>{var{cx:r,cy:a,angle:n,axisLine:s}=e,o=Cle(e,sVe),l=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=Xa(r,a,l[0],n),u=Xa(r,a,l[1],n),d=oA(oA(oA({},pl(o)),{},{fill:"none"},Va(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return N.createElement("line",Zw({className:"recharts-polar-radius-axis-line"},d))},mVe=(e,t,r)=>{var a;return N.isValidElement(e)?a=N.cloneElement(e,t):typeof e=="function"?a=e(t):a=N.createElement(O1,Zw({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),a},pVe=(e,t)=>{var{angle:r,tickFormatter:a,stroke:n,tick:s}=e,o=Cle(e,iVe),l=fVe(e.orientation),c=pl(o),u=Va(s,!1),d=t.map((f,h)=>{var m=dVe(f,e.angle,e.cx,e.cy),g=oA(oA(oA(oA({textAnchor:l,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:n},u),{},{index:h},m),{},{payload:f});return N.createElement(As,Zw({className:fa("recharts-polar-radius-axis-tick",Fse(s)),key:"tick-".concat(f.coordinate)},cx(e,f,h)),mVe(s,g,a?a(f.value,h):f.value))});return N.createElement(As,{className:"recharts-polar-radius-axis-ticks"},d)},gVe=e=>{var{radiusAxisId:t}=e,r=ar(j1),a=ar(c=>F1(c,"radiusAxis",t)),n=ar(c=>D1(c,"radiusAxis",t,!1));if(r==null||!n||!n.length)return null;var s=oA(oA(oA({},e),{},{scale:a},r),{},{radius:r.outerRadius}),{tick:o,axisLine:l}=s;return N.createElement(As,{className:fa("recharts-polar-radius-axis",jle,s.className)},l&&hVe(s,n),o&&pVe(s,n),ic.renderCallByParent(s,AVe(s.angle,s.cx,s.cy,n)))};class l4 extends N.PureComponent{render(){return N.createElement(N.Fragment,null,N.createElement(uVe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),N.createElement(gVe,this.props))}}o4(l4,"displayName","PolarRadiusAxis");o4(l4,"axisType",jle);o4(l4,"defaultProps",nc);var xVe=["children"];function Wh(){return Wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Wh.apply(null,arguments)}function wK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function rA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wK(Object(r),!0).forEach(function(a){c4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function c4(e,t,r){return(t=vVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vVe(e){var t=bVe(e,"string");return typeof t=="symbol"?t:t+""}function bVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yVe(e,t){if(e==null)return{};var r,a,n=wVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wVe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var NVe=Math.PI/180,NK=1e-5,kle="angleAxis";function EVe(e){var t=Wn(),r=N.useMemo(()=>{var{children:s}=e,o=yVe(e,xVe);return o},[e]),a=ar(s=>C1(s,r.id)),n=r===a;return N.useEffect(()=>(t(rVe(r)),()=>{t(aVe(r))}),[t,r]),n?e.children:null}var CVe=(e,t)=>{var{cx:r,cy:a,radius:n,orientation:s,tickSize:o}=t,l=o||8,c=Xa(r,a,n,e.coordinate),u=Xa(r,a,n+(s==="inner"?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},jVe=(e,t)=>{var r=Math.cos(-e.coordinate*NVe);return r>NK?t==="outer"?"start":"end":r<-NK?t==="outer"?"end":"start":"middle"},kVe=e=>{var{cx:t,cy:r,radius:a,axisLineType:n,axisLine:s,ticks:o}=e;if(!s)return null;var l=rA(rA({},pl(e)),{},{fill:"none"},Va(s,!1));if(n==="circle")return N.createElement(hM,Wh({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:a}));var c=o.map(u=>Xa(t,r,a,u.coordinate));return N.createElement(xle,Wh({className:"recharts-polar-angle-axis-line"},l,{points:c}))},_Ve=e=>{var{tick:t,tickProps:r,value:a}=e;return t?N.isValidElement(t)?N.cloneElement(t,r):typeof t=="function"?t(r):N.createElement(O1,Wh({},r,{className:"recharts-polar-angle-axis-tick-value"}),a):null},SVe=e=>{var{tick:t,tickLine:r,tickFormatter:a,stroke:n,ticks:s}=e,o=pl(e),l=Va(t,!1),c=rA(rA({},o),{},{fill:"none"},Va(r,!1)),u=s.map((d,f)=>{var h=CVe(d,e),m=jVe(d,e.orientation),g=rA(rA(rA({},o),{},{textAnchor:m,stroke:"none",fill:n},l),{},{index:f,payload:d,x:h.x2,y:h.y2});return N.createElement(As,Wh({className:fa("recharts-polar-angle-axis-tick",Fse(t)),key:"tick-".concat(d.coordinate)},cx(e,d,f)),r&&N.createElement("line",Wh({className:"recharts-polar-angle-axis-tick-line"},c,h)),N.createElement(_Ve,{tick:t,tickProps:g,value:a?a(d.value,f):d.value}))});return N.createElement(As,{className:"recharts-polar-angle-axis-ticks"},u)},BVe=e=>{var{angleAxisId:t}=e,r=ar(j1),a=ar(l=>F1(l,"angleAxis",t)),n=xc(),s=ar(l=>D1(l,"angleAxis",t,n));if(r==null||!s||!s.length)return null;var o=rA(rA(rA({},e),{},{scale:a},r),{},{radius:r.outerRadius});return N.createElement(As,{className:fa("recharts-polar-angle-axis",kle,o.className)},N.createElement(kVe,Wh({},o,{ticks:s})),N.createElement(SVe,Wh({},o,{ticks:s})))};class u4 extends N.PureComponent{render(){return this.props.radius<=0?null:N.createElement(EVe,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},N.createElement(BVe,this.props))}}c4(u4,"displayName","PolarAngleAxis");c4(u4,"axisType",kle);c4(u4,"defaultProps",tA);function EK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function CK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EK(Object(r),!0).forEach(function(a){TVe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function TVe(e,t,r){return(t=IVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IVe(e){var t=OVe(e,"string");return typeof t=="symbol"?t:t+""}function OVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FVe=(e,t)=>t,bM=mt([mM,FVe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),DVe=[],yM=(e,t,r)=>(r==null?void 0:r.length)===0?DVe:r,_le=mt([XS,bM,yM],(e,t,r)=>{var{chartData:a}=e;if(t!=null){var n;if((t==null?void 0:t.data)!=null&&t.data.length>0?n=t.data:n=a,(!n||!n.length)&&r!=null&&(n=r.map(s=>CK(CK({},t.presentationProps),s.props))),n!=null)return n}}),PVe=mt([_le,bM,yM],(e,t,r)=>{if(!(e==null||t==null))return e.map((a,n)=>{var s,o=Qn(a,t.nameKey,t.name),l;return r!=null&&(s=r[n])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[n].props.fill:typeof a=="object"&&a!=null&&"fill"in a?l=a.fill:l=t.fill,{value:y1(o,t.dataKey),color:l,payload:a,type:t.legendType}})}),RVe=mt([_le,bM,yM,Pi],(e,t,r,a)=>{if(!(t==null||e==null))return B$e({offset:a,pieSettings:t,displayedData:e,cells:r})}),II={},jK;function LVe(){return jK||(jK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((n=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&n.writable)?!1:r.toString()===`[object ${s}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t}(II)),II}var OI,kK;function MVe(){return kK||(kK=1,OI=LVe().isPlainObject),OI}var UVe=MVe();const QVe=Dl(UVe);function $k(){return $k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$k.apply(null,arguments)}var _K=(e,t,r,a,n)=>{var s=r-a,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-s/2,",").concat(t+n),o+="L ".concat(e+r-s/2-a,",").concat(t+n),o+="L ".concat(e,",").concat(t," Z"),o},HVe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zVe=e=>{var t=od(e,HVe),r=N.useRef(),[a,n]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&n(v)}catch{}},[]);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var x=fa("recharts-trapezoid",d);return g?N.createElement(Sk,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:o},duration:h,animationEasing:f,isActive:g},v=>{var{upperWidth:y,lowerWidth:w,height:j,x:O,y:B}=v;return N.createElement(Sk,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:f},N.createElement("path",$k({},Va(t,!0),{className:x,d:_K(O,B,y,w,j),ref:r})))}):N.createElement("g",null,N.createElement("path",$k({},Va(t,!0),{className:x,d:_K(s,o,l,c,u)})))},VVe=["option","shapeType","propTransformer","activeClassName","isActive"];function $Ve(e,t){if(e==null)return{};var r,a,n=GVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function GVe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function SK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Gk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SK(Object(r),!0).forEach(function(a){qVe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qVe(e,t,r){return(t=KVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KVe(e){var t=WVe(e,"string");return typeof t=="symbol"?t:t+""}function WVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XVe(e,t){return Gk(Gk({},t),e)}function YVe(e,t){return e==="symbols"}function BK(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return N.createElement(eie,r);case"trapezoid":return N.createElement(zVe,r);case"sector":return N.createElement(aie,r);case"symbols":if(YVe(t))return N.createElement(Q8,r);break;default:return null}}function JVe(e){return N.isValidElement(e)?e.props:e}function Sle(e){var{option:t,shapeType:r,propTransformer:a=XVe,activeClassName:n="recharts-active-shape",isActive:s}=e,o=$Ve(e,VVe),l;if(N.isValidElement(t))l=N.cloneElement(t,Gk(Gk({},o),JVe(t)));else if(typeof t=="function")l=t(o);else if(QVe(t)&&typeof t!="boolean"){var c=a(t,o);l=N.createElement(BK,{shapeType:r,elementProps:c})}else{var u=o;l=N.createElement(BK,{shapeType:r,elementProps:u})}return s?N.createElement(As,{className:n},l):l}var wM=(e,t)=>{var r=Wn();return(a,n)=>s=>{e==null||e(a,n,s),r(Hoe({activeIndex:String(n),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},NM=e=>{var t=Wn();return(r,a)=>n=>{e==null||e(r,a,n),t(U9e())}},EM=(e,t)=>{var r=Wn();return(a,n)=>s=>{e==null||e(a,n,s),r(Q9e({activeIndex:String(n),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}};function CM(e){var{fn:t,args:r}=e,a=Wn(),n=xc();return N.useEffect(()=>{if(!n){var s=t(r);return a(R9e(s)),()=>{a(L9e(s))}}},[t,r,a,n]),null}var Ble=()=>{};function ZVe(e){var{legendPayload:t}=e,r=Wn(),a=xc();return N.useEffect(()=>a?Ble:(r(Vse(t)),()=>{r($se(t))}),[r,a,t]),null}function Tle(e){var{legendPayload:t}=e,r=Wn(),a=ar(Ca);return N.useEffect(()=>a!=="centric"&&a!=="radial"?Ble:(r(Vse(t)),()=>{r($se(t))}),[r,a,t]),null}function jM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=N.useRef(zw(t)),a=N.useRef(e);return a.current!==e&&(r.current=zw(t),a.current=e),r.current}var FI,e$e=()=>{var[e]=N.useState(()=>zw("uid-"));return e},t$e=(FI=P0e.useId)!==null&&FI!==void 0?FI:e$e;function r$e(e,t){var r=t$e();return t||(e?"".concat(e,"-").concat(r):r)}var a$e=N.createContext(void 0),kM=e=>{var{id:t,type:r,children:a}=e,n=r$e("recharts-".concat(r),t);return N.createElement(a$e.Provider,{value:n},a(n))},n$e={cartesianItems:[],polarItems:[]},Ile=du({name:"graphicalItems",initialState:n$e,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:a}=t.payload,n=Th(e).cartesianItems.indexOf(r);n>-1&&(e.cartesianItems[n]=a)},removeCartesianGraphicalItem(e,t){var r=Th(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Th(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:s$e,replaceCartesianGraphicalItem:i$e,removeCartesianGraphicalItem:o$e,addPolarGraphicalItem:l$e,removePolarGraphicalItem:c$e}=Ile.actions,u$e=Ile.reducer;function d$e(e){var t=Wn(),r=N.useRef(null);return N.useEffect(()=>{r.current===null?t(s$e(e)):r.current!==e&&t(i$e({prev:r.current,next:e})),r.current=e},[t,e]),N.useEffect(()=>()=>{r.current&&(t(o$e(r.current)),r.current=null)},[t]),null}function Ole(e){var t=Wn();return N.useEffect(()=>(t(l$e(e)),()=>{t(c$e(e))}),[t,e]),null}function f$e(){}var A$e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},TK={t:0},DI={t:1};function _M(e){var t=od(e,A$e),{isActive:r,canBegin:a,duration:n,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=Zse("JavascriptAnimate",t.animationManager),[f,h]=N.useState(r?TK:DI),m=N.useRef(null);return N.useEffect(()=>{r||h(DI)},[r]),N.useEffect(()=>{if(!r||!a)return f$e;var g=Jse(TK,DI,Xse(s),n,h,d.getTimeoutController()),x=()=>{m.current=g()};return d.start([c,o,x,n,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,a,n,s,o,c,l,d]),u(f.t)}var h$e=["onMouseEnter","onClick","onMouseLeave"],m$e=["id"],p$e=["id"];function SM(e,t){if(e==null)return{};var r,a,n=g$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function g$e(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function IK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Bs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IK(Object(r),!0).forEach(function(a){x$e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function x$e(e,t,r){return(t=v$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v$e(e){var t=b$e(e,"string");return typeof t=="symbol"?t:t+""}function b$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xh(){return Xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xh.apply(null,arguments)}function y$e(e){var t=N.useMemo(()=>DN(e.children,qh),[e.children]),r=ar(a=>PVe(a,e.id,t));return r==null?null:N.createElement(Tle,{legendPayload:r})}function w$e(e){var{dataKey:t,nameKey:r,sectors:a,stroke:n,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:a==null?void 0:a.map(d=>d.tooltipPayload),positions:a==null?void 0:a.map(d=>d.tooltipPosition),settings:{stroke:n,strokeWidth:s,fill:o,dataKey:t,nameKey:r,name:y1(l,t),hide:c,type:u,color:o,unit:""}}}var N$e=(e,t)=>e>t?"start":e<t?"end":"middle",E$e=(e,t,r)=>typeof t=="function"?t(e):Ol(t,r,r*.8),C$e=(e,t,r)=>{var{top:a,left:n,width:s,height:o}=t,l=Ose(s,o),c=n+Ol(e.cx,s,s/2),u=a+Ol(e.cy,o,o/2),d=Ol(e.innerRadius,l,0),f=E$e(r,e.outerRadius,l),h=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},j$e=(e,t)=>{var r=ao(t-e),a=Math.min(Math.abs(t-e),360);return r*a},k$e=(e,t)=>{if(N.isValidElement(e))return N.cloneElement(e,t);if(typeof e=="function")return e(t);var r=fa("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return N.createElement(qse,Xh({},t,{type:"linear",className:r}))},_$e=(e,t,r)=>{if(N.isValidElement(e))return N.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),N.isValidElement(a)))return a;var n=fa("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return N.createElement(O1,Xh({},t,{alignmentBaseline:"middle",className:n}),a)};function S$e(e){var{sectors:t,props:r,showLabels:a}=e,{label:n,labelLine:s,dataKey:o}=r;if(!a||!n||!t)return null;var l=pl(r),c=Va(n,!1),u=Va(s,!1),d=typeof n=="object"&&"offsetRadius"in n&&n.offsetRadius||20,f=t.map((h,m)=>{var g=(h.startAngle+h.endAngle)/2,x=Xa(h.cx,h.cy,h.outerRadius+d,g),v=Bs(Bs(Bs(Bs({},l),h),{},{stroke:"none"},c),{},{index:m,textAnchor:N$e(x.x,h.cx)},x),y=Bs(Bs(Bs(Bs({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:m,points:[Xa(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return N.createElement(As,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(m)},s&&k$e(s,y),_$e(n,v,Qn(h,o)))});return N.createElement(As,{className:"recharts-pie-labels"},f)}function Fle(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:n,showLabels:s}=e,o=ar(Zm),{onMouseEnter:l,onClick:c,onMouseLeave:u}=n,d=SM(n,h$e),f=wM(l,n.dataKey),h=NM(u),m=EM(c,n.dataKey);return t==null?null:N.createElement(N.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===o,y=o?a:null,w=v?r:y,j=Bs(Bs({},g),{},{stroke:g.stroke,tabIndex:-1,[Mse]:x,[Use]:n.dataKey});return N.createElement(As,Xh({tabIndex:-1,className:"recharts-pie-sector"},cx(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),N.createElement(Sle,Xh({option:w,isActive:v,shapeType:"sector"},j)))}),N.createElement(S$e,{sectors:t,props:n,showLabels:s}))}function B$e(e){var t,{pieSettings:r,displayedData:a,cells:n,offset:s}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),m=j$e(l,c),g=Math.abs(m),x=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=a.filter(T=>Qn(T,u,0)!==0).length,y=(g>=360?v:v-1)*x,w=g-v*h-y,j=a.reduce((T,C)=>{var _=Qn(C,u,0);return T+(cr(_)?_:0)},0),O;if(j>0){var B;O=a.map((T,C)=>{var _=Qn(T,u,0),S=Qn(T,d,C),L=C$e(r,s,T),P=(cr(_)?_:0)/j,k,M=Bs(Bs({},T),n&&n[C]&&n[C].props);C?k=B.endAngle+ao(m)*x*(_!==0?1:0):k=l;var U=k+ao(m)*((_!==0?h:0)+P*w),z=(k+U)/2,Q=(L.innerRadius+L.outerRadius)/2,q=[{name:S,value:_,payload:M,dataKey:u,type:f}],V=Xa(L.cx,L.cy,Q,z);return B=Bs(Bs(Bs(Bs({},r.presentationProps),{},{percent:P,cornerRadius:o,name:S,tooltipPayload:q,midAngle:z,middleRadius:Q,tooltipPosition:V},M),L),{},{value:Qn(T,u),startAngle:k,endAngle:U,payload:M,paddingAngle:ao(m)*x}),B})}return O}function T$e(e){var{props:t,previousSectorsRef:r}=e,{sectors:a,isAnimationActive:n,animationBegin:s,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=jM(t,"recharts-pie-"),m=r.current,[g,x]=N.useState(!0),v=N.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=N.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return N.createElement(_M,{begin:s,duration:o,isActive:n,easing:l,onAnimationStart:y,onAnimationEnd:v,key:h},w=>{var j=[],O=a&&a[0],B=O.startAngle;return a.forEach((T,C)=>{var _=m&&m[C],S=C>0?Jm(T,"paddingAngle",0):0;if(_){var L=Ov(_.endAngle-_.startAngle,T.endAngle-T.startAngle),P=Bs(Bs({},T),{},{startAngle:B+S,endAngle:B+L(w)+S});j.push(P),B=P.endAngle}else{var{endAngle:k,startAngle:M}=T,U=Ov(0,k-M),z=U(w),Q=Bs(Bs({},T),{},{startAngle:B+S,endAngle:B+z+S});j.push(Q),B=Q.endAngle}}),r.current=j,N.createElement(As,null,N.createElement(Fle,{sectors:j,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function I$e(e){var{sectors:t,isAnimationActive:r,activeShape:a,inactiveShape:n}=e,s=N.useRef(null),o=s.current;return r&&t&&t.length&&(!o||o!==t)?N.createElement(T$e,{props:e,previousSectorsRef:s}):N.createElement(Fle,{sectors:t,activeShape:a,inactiveShape:n,allOtherPieProps:e,showLabels:!0})}function O$e(e){var{hide:t,className:r,rootTabIndex:a}=e,n=fa("recharts-pie",r);return t?null:N.createElement(As,{tabIndex:a,className:n},N.createElement(I$e,e))}var F$e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!dx.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function D$e(e){var{id:t}=e,r=SM(e,m$e),a=N.useMemo(()=>DN(e.children,qh),[e.children]),n=ar(s=>RVe(s,t,a));return N.createElement(N.Fragment,null,N.createElement(CM,{fn:w$e,args:Bs(Bs({},e),{},{sectors:n})}),N.createElement(O$e,Xh({},r,{sectors:n})))}function WN(e){var t=od(e,F$e),{id:r}=t,a=SM(t,p$e),n=pl(a);return N.createElement(kM,{id:r,type:"pie"},s=>N.createElement(N.Fragment,null,N.createElement(Ole,{type:"pie",id:s,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:n}),N.createElement(y$e,Xh({},a,{id:s})),N.createElement(D$e,Xh({},a,{id:s})),a.children))}WN.displayName="Pie";var P$e=mt([Pi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),R$e=mt([P$e,o0,l0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Dle=()=>ar(R$e),L$e=()=>ar(kQe);function OK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function FK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OK(Object(r),!0).forEach(function(a){M$e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function M$e(e,t,r){return(t=U$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U$e(e){var t=Q$e(e,"string");return typeof t=="symbol"?t:t+""}function Q$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H$e=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:n,dataKey:s}=e;if(n===!1||t.x==null||t.y==null)return null;var o=FK(FK({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Va(n,!1)),D8(n)),l;return N.isValidElement(n)?l=N.cloneElement(n,o):typeof n=="function"?l=n(o):l=N.createElement(hM,o),N.createElement(As,{className:"recharts-active-dot"},l)};function z$e(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:n}=e,s=ar(Zm),o=L$e();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Fs(l)?null:H$e({point:l,childIndex:Number(s),mainColor:r,dataKey:n,activeDot:a})}function DK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function qk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DK(Object(r),!0).forEach(function(a){V$e(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function V$e(e,t,r){return(t=$$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $$e(e){var t=G$e(e,"string");return typeof t=="symbol"?t:t+""}function G$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ple=(e,t)=>F1(e,"radiusAxis",t),q$e=mt([Ple],e=>{if(e!=null)return{scale:e}}),K$e=mt([HN,Ple],(e,t)=>{if(!(e==null||t==null))return qk(qk({},e),{},{scale:t})}),W$e=(e,t,r,a)=>D1(e,"radiusAxis",t,a),Rle=(e,t,r)=>C1(e,r),Lle=(e,t,r)=>F1(e,"angleAxis",r),X$e=mt([Rle,Lle],(e,t)=>{if(!(e==null||t==null))return qk(qk({},e),{},{scale:t})}),Y$e=(e,t,r,a)=>D1(e,"angleAxis",r,a),J$e=mt([Rle,Lle,j1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),Z$e=(e,t,r,a,n)=>n,eGe=mt([Ca,K$e,W$e,X$e,Y$e],(e,t,r,a,n)=>up(e,"radiusAxis")?Gw(t,r,!1):Gw(a,n,!1)),tGe=mt([mM,Z$e],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),rGe=mt([q$e,J$e,XS,tGe,eGe],(e,t,r,a,n)=>{var{chartData:s,dataStartIndex:o,dataEndIndex:l}=r;if(!(e==null||t==null||s==null||n==null||a==null)){var c=s.slice(o,l+1);return dGe({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:a,bandSize:n})}}),aGe=["id"];function nGe(e,t){if(e==null)return{};var r,a,n=sGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sGe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function PK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Bl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PK(Object(r),!0).forEach(function(a){BM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function BM(e,t,r){return(t=iGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iGe(e){var t=oGe(e,"string");return typeof t=="symbol"?t:t+""}function oGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hb(){return Hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Hb.apply(null,arguments)}function TM(e,t){return e&&e!=="none"?e:t}var lGe=e=>{var{dataKey:t,name:r,stroke:a,fill:n,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:TM(a,n),value:y1(r,t),payload:e}]};function cGe(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:n,name:s,hide:o,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:n,nameKey:void 0,dataKey:t,name:y1(s,t),hide:o,type:l,color:TM(r,n),unit:""}}}function uGe(e,t){var r;return N.isValidElement(e)?r=N.cloneElement(e,t):typeof e=="function"?r=e(t):r=N.createElement(hM,Hb({},t,{className:fa("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function dGe(e){var{radiusAxis:t,angleAxis:r,displayedData:a,dataKey:n,bandSize:s}=e,{cx:o,cy:l}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;a.forEach((h,m)=>{var g=Qn(h,r.dataKey,m),x=Qn(h,n),v=r.scale(g)+d,y=Array.isArray(x)?gle(x):x,w=Fs(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(Bl(Bl({},Xa(o,l,w,v)),{},{name:g,value:x,cx:o,cy:l,radius:w,angle:v,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var m=h.value[0],g=Fs(m)?void 0:t.scale(m);f.push(Bl(Bl({},h),{},{radius:g},Xa(o,l,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function fGe(e){var{points:t,props:r}=e,{dot:a,dataKey:n}=r;if(!a)return null;var{id:s}=r,o=nGe(r,aGe),l=pl(o),c=Va(a,!0),u=t.map((d,f)=>{var h=Bl(Bl(Bl({key:"dot-".concat(f),r:3},l),c),{},{dataKey:n,cx:d.x,cy:d.y,index:f,payload:d});return uGe(a,h)});return N.createElement(As,{className:"recharts-radar-dots"},u)}function Mle(e){var{points:t,props:r,showLabels:a}=e;if(t==null)return null;var{shape:n,isRange:s,baseLinePoints:o,connectNulls:l}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return N.isValidElement(n)?d=N.cloneElement(n,Bl(Bl({},r),{},{points:t})):typeof n=="function"?d=n(Bl(Bl({},r),{},{points:t})):d=N.createElement(xle,Hb({},Va(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?o:null,connectNulls:l})),N.createElement(As,{className:"recharts-radar-polygon"},d,N.createElement(fGe,{props:r,points:t}),a&&Fm.renderCallByParent(r,t))}function AGe(e){var{props:t,previousPointsRef:r}=e,{points:a,isAnimationActive:n,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=jM(t,"recharts-radar-"),[h,m]=N.useState(!0),g=N.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=N.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return N.createElement(_M,{begin:s,duration:o,isActive:n,easing:l,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},v=>{var y=d&&d.length/a.length,w=v===1?a:a.map((j,O)=>{var B=d&&d[Math.floor(O*y)];if(B){var T=Ov(B.x,j.x),C=Ov(B.y,j.y);return Bl(Bl({},j),{},{x:T(v),y:C(v)})}var _=Ov(j.cx,j.x),S=Ov(j.cy,j.y);return Bl(Bl({},j),{},{x:_(v),y:S(v)})});return v>0&&(r.current=w),N.createElement(Mle,{points:w,props:t,showLabels:!h})})}function hGe(e){var{points:t,isAnimationActive:r,isRange:a}=e,n=N.useRef(void 0),s=n.current;return r&&t&&t.length&&!a&&(!s||s!==t)?N.createElement(AGe,{props:e,previousPointsRef:n}):N.createElement(Mle,{points:t,props:e,showLabels:!0})}var mGe={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!dx.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class pGe extends N.PureComponent{render(){var{hide:t,className:r,points:a}=this.props;if(t)return null;var n=fa("recharts-radar",r);return N.createElement(N.Fragment,null,N.createElement(As,{className:n},N.createElement(hGe,this.props)),N.createElement(z$e,{points:a,mainColor:TM(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function gGe(e){var t=xc(),r=ar(a=>rGe(a,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return N.createElement(pGe,Hb({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class IM extends N.PureComponent{render(){return N.createElement(kM,{id:this.props.id,type:"radar"},t=>N.createElement(N.Fragment,null,N.createElement(Ole,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),N.createElement(Tle,{legendPayload:lGe(this.props)}),N.createElement(CM,{fn:cGe,args:this.props}),N.createElement(gGe,Hb({},this.props,{id:t}))))}}BM(IM,"displayName","Radar");BM(IM,"defaultProps",mGe);var xGe="Invariant failed";function vGe(e,t){throw new Error(xGe)}var bGe=["x","y"];function KF(){return KF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},KF.apply(null,arguments)}function RK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Ry(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RK(Object(r),!0).forEach(function(a){yGe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yGe(e,t,r){return(t=wGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wGe(e){var t=NGe(e,"string");return typeof t=="symbol"?t:t+""}function NGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EGe(e,t){if(e==null)return{};var r,a,n=CGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function CGe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function jGe(e,t){var{x:r,y:a}=e,n=EGe(e,bGe),s="".concat(r),o=parseInt(s,10),l="".concat(a),c=parseInt(l,10),u="".concat(t.height||n.height),d=parseInt(u,10),f="".concat(t.width||n.width),h=parseInt(f,10);return Ry(Ry(Ry(Ry(Ry({},t),n),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Ule(e){return N.createElement(Sle,KF({shapeType:"rectangle",propTransformer:jGe,activeClassName:"recharts-active-bar"},e))}var kGe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,n)=>{if(cr(t))return t;var s=cr(a)||Fs(a);return s?t(a,n):(s||vGe(),r)}},_Ge={},Qle=du({name:"errorBars",initialState:_Ge,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]||(e[r]=[]),e[r].push(a)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]&&(e[r]=e[r].filter(n=>n.dataKey!==a.dataKey||n.direction!==a.direction))}}}),{addErrorBar:bgt,removeErrorBar:ygt}=Qle.actions,SGe=Qle.reducer,BGe=["children"];function TGe(e,t){if(e==null)return{};var r,a,n=IGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function IGe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var OGe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},FGe=N.createContext(OGe);function DGe(e){var{children:t}=e,r=TGe(e,BGe);return N.createElement(FGe.Provider,{value:r},t)}function Hle(e,t){var r,a,n=ar(u=>u0(u,e)),s=ar(u=>hp(u,t)),o=(r=n==null?void 0:n.allowDataOverflow)!==null&&r!==void 0?r:Qc.allowDataOverflow,l=(a=s==null?void 0:s.allowDataOverflow)!==null&&a!==void 0?a:Hc.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function PGe(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,n=Dle(),{needClipX:s,needClipY:o,needClip:l}=Hle(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=n;return N.createElement("clipPath",{id:"clipPath-".concat(a)},N.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var RGe=["onMouseEnter","onMouseLeave","onClick"],LGe=["value","background","tooltipPosition"],MGe=["id"],UGe=["onMouseEnter","onClick","onMouseLeave"];function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zb.apply(null,arguments)}function LK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LK(Object(r),!0).forEach(function(a){QGe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function QGe(e,t,r){return(t=HGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HGe(e){var t=zGe(e,"string");return typeof t=="symbol"?t:t+""}function zGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kk(e,t){if(e==null)return{};var r,a,n=VGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function VGe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var $Ge=e=>{var{dataKey:t,name:r,fill:a,legendType:n,hide:s}=e;return[{inactive:s,dataKey:t,type:n,color:a,value:y1(r,t),payload:e}]};function GGe(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:n,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:n,dataKey:t,nameKey:void 0,name:y1(s,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function qGe(e){var t=ar(Zm),{data:r,dataKey:a,background:n,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=Kk(s,RGe),d=wM(o,a),f=NM(l),h=EM(c,a);if(!n||r==null)return null;var m=Va(n,!1);return N.createElement(N.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:w}=g,j=Kk(g,LGe);if(!y)return null;var O=d(g,x),B=f(g,x),T=h(g,x),C=nl(nl(nl(nl(nl({option:n,isActive:String(x)===t},j),{},{fill:"#eee"},y),m),cx(u,g,x)),{},{onMouseEnter:O,onMouseLeave:B,onClick:T,dataKey:a,index:x,className:"recharts-bar-background-rectangle"});return N.createElement(Ule,zb({key:"background-bar-".concat(x)},C))}))}function zle(e){var{data:t,props:r,showLabels:a}=e,n=pl(r),{id:s}=n,o=Kk(n,MGe),{shape:l,dataKey:c,activeBar:u}=r,d=ar(Zm),f=ar(tle),{onMouseEnter:h,onClick:m,onMouseLeave:g}=r,x=Kk(r,UGe),v=wM(h,c),y=NM(g),w=EM(m,c);return t?N.createElement(N.Fragment,null,t.map((j,O)=>{var B=u&&String(O)===d&&(f==null||c===f),T=B?u:l,C=nl(nl(nl({},o),j),{},{isActive:B,option:T,index:O,dataKey:c});return N.createElement(As,zb({className:"recharts-bar-rectangle"},cx(x,j,O),{onMouseEnter:v(j,O),onMouseLeave:y(j,O),onClick:w(j,O),key:"rectangle-".concat(j==null?void 0:j.x,"-").concat(j==null?void 0:j.y,"-").concat(j==null?void 0:j.value,"-").concat(O)}),N.createElement(Ule,C))}),a&&Fm.renderCallByParent(r,t)):null}function KGe(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:n,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=jM(t,"recharts-bar-"),[m,g]=N.useState(!1),x=N.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=N.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return N.createElement(_M,{begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:h},y=>{var w=y===1?a:a==null?void 0:a.map((j,O)=>{var B=f&&f[O];if(B)return nl(nl({},j),{},{x:Jx(B.x,j.x,y),y:Jx(B.y,j.y,y),width:Jx(B.width,j.width,y),height:Jx(B.height,j.height,y)});if(n==="horizontal"){var T=Jx(0,j.height,y);return nl(nl({},j),{},{y:j.y+j.height-T,height:T})}var C=Jx(0,j.width,y);return nl(nl({},j),{},{width:C})});return y>0&&(r.current=w??null),w==null?null:N.createElement(As,null,N.createElement(zle,{props:t,data:w,showLabels:!m}))})}function WGe(e){var{data:t,isAnimationActive:r}=e,a=N.useRef(null);return r&&t&&t.length&&(a.current==null||a.current!==t)?N.createElement(KGe,{previousRectanglesRef:a,props:e}):N.createElement(zle,{props:e,data:t,showLabels:!0})}var Vle=0,XGe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Qn(e,t)}};class YGe extends N.PureComponent{render(){var{hide:t,data:r,dataKey:a,className:n,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t)return null;var d=fa("recharts-bar",n),f=u;return N.createElement(As,{className:d,id:u},l&&N.createElement("defs",null,N.createElement(PGe,{clipPathId:f,xAxisId:s,yAxisId:o})),N.createElement(As,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},N.createElement(qGe,{data:r,dataKey:a,background:c,allOtherBarProps:this.props}),N.createElement(WGe,this.props)),this.props.children)}}var JGe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!dx.isSsr,legendType:"rect",minPointSize:Vle,xAxisId:0,yAxisId:0};function ZGe(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:n,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Hle(t,r),h=oL(),m=xc(),g=DN(e.children,qh),x=ar(w=>jqe(w,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,N.createElement(DGe,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:XGe,errorBarOffset:v},N.createElement(YGe,zb({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:a,legendType:n,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function eqe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:n,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m}=e,g=t==="horizontal"?l:o,x=d?g.scale.domain():null,v=WRe({numericAxis:g});return f.map((y,w)=>{var j,O,B,T,C,_;d?j=zRe(d[w],x):(j=Qn(y,r),Array.isArray(j)||(j=[v,j]));var S=kGe(a,Vle)(j[1],w);if(t==="horizontal"){var L,[P,k]=[l.scale(j[0]),l.scale(j[1])];O=oG({axis:o,ticks:c,bandSize:s,offset:n.offset,entry:y,index:w}),B=(L=k??P)!==null&&L!==void 0?L:void 0,T=n.size;var M=P-k;if(C=iu(M)?0:M,_={x:O,y:h.top,width:T,height:h.height},Math.abs(S)>0&&Math.abs(C)<Math.abs(S)){var U=ao(C||S)*(Math.abs(S)-Math.abs(C));B-=U,C+=U}}else{var[z,Q]=[o.scale(j[0]),o.scale(j[1])];if(O=z,B=oG({axis:l,ticks:u,bandSize:s,offset:n.offset,entry:y,index:w}),T=Q-z,C=n.size,_={x:h.left,y:B,width:h.width,height:C},Math.abs(S)>0&&Math.abs(T)<Math.abs(S)){var q=ao(T||S)*(Math.abs(S)-Math.abs(T));T+=q}}if(O==null||B==null||T==null||C==null)return null;var V=nl(nl({},y),{},{x:O,y:B,width:T,height:C,value:d?j:j[1],payload:y,background:_,tooltipPosition:{x:O+T/2,y:B+C/2}},m&&m[w]&&m[w].props);return V}).filter(Boolean)}function lA(e){var t=od(e,JGe),r=xc();return N.createElement(kM,{id:t.id,type:"bar"},a=>N.createElement(N.Fragment,null,N.createElement(ZVe,{legendPayload:$Ge(t)}),N.createElement(CM,{fn:GGe,args:t}),N.createElement(d$e,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:KRe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),N.createElement(ZGe,zb({},t,{id:a}))))}lA.displayName="Bar";function MK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function $C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MK(Object(r),!0).forEach(function(a){tqe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tqe(e,t,r){return(t=rqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rqe(e){var t=aqe(e,"string");return typeof t=="symbol"?t:t+""}function aqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nqe=(e,t)=>t,sqe=(e,t,r)=>r,iqe=(e,t,r,a)=>a,oqe=(e,t,r,a,n)=>n,XN=mt([HL,oqe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),lqe=mt([XN],e=>e==null?void 0:e.maxBarSize),cqe=(e,t,r,a,n,s)=>s,UK=(e,t,r)=>{var a=r??e;if(!Fs(a))return Ol(a,t,0)},uqe=mt([Ca,HL,nqe,sqe,iqe],(e,t,r,a,n)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===a).filter(s=>s.isPanorama===n).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),dqe=(e,t,r,a)=>{var n=Ca(e);return n==="horizontal"?QF(e,"yAxis",r,a):QF(e,"xAxis",t,a)},fqe=(e,t,r)=>{var a=Ca(e);return a==="horizontal"?_q(e,"xAxis",t):_q(e,"yAxis",r)},Aqe=(e,t,r)=>{var a={},n=e.filter(e4),s=e.filter(u=>u.stackId==null),o=n.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),a),l=Object.entries(o).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),m=UK(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=UK(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},hqe=mt([uqe,LUe,fqe],Aqe),mqe=(e,t,r,a,n)=>{var s,o,l=XN(e,t,r,a,n);if(l!=null){var c=Ca(e),u=roe(e),{maxBarSize:d}=l,f=Fs(d)?u:d,h,m;return c==="horizontal"?(h=Ub(e,"xAxis",t,a),m=Mb(e,"xAxis",t,a)):(h=Ub(e,"yAxis",r,a),m=Mb(e,"yAxis",r,a)),(s=(o=Gw(h,m,!0))!==null&&o!==void 0?o:f)!==null&&s!==void 0?s:0}},$le=(e,t,r,a)=>{var n=Ca(e),s,o;return n==="horizontal"?(s=Ub(e,"xAxis",t,a),o=Mb(e,"xAxis",t,a)):(s=Ub(e,"yAxis",r,a),o=Mb(e,"yAxis",r,a)),Gw(s,o)};function pqe(e,t,r,a,n){var s=a.length;if(!(s<1)){var o=Ol(e,r,0,!0),l,c=[];if(cu(a[0].barSize)){var u=!1,d=r/s,f=a.reduce((y,w)=>y+(w.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,m={offset:h-o,size:0};l=a.reduce((y,w)=>{var j,O={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(j=w.barSize)!==null&&j!==void 0?j:0}},B=[...y,O];return m=B[B.length-1].position,B},c)}else{var g=Ol(t,r,0,!0);r-2*g-(s-1)*o<=0&&(o=0);var x=(r-2*g-(s-1)*o)/s;x>1&&(x>>=0);var v=cu(n)?Math.min(x,n):x;l=a.reduce((y,w,j)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+o)*j+(x-v)/2,size:v}}],c)}return l}}var gqe=(e,t,r,a,n,s,o)=>{var l=Fs(o)?t:o,c=pqe(r,a,n!==s?n:s,e,l);return n!==s&&c!=null&&(c=c.map(u=>$C($C({},u),{},{position:$C($C({},u.position),{},{offset:u.position.offset-n/2})}))),c},xqe=mt([hqe,roe,RUe,aoe,mqe,$le,lqe],gqe),vqe=(e,t,r,a)=>Ub(e,"xAxis",t,a),bqe=(e,t,r,a)=>Ub(e,"yAxis",r,a),yqe=(e,t,r,a)=>Mb(e,"xAxis",t,a),wqe=(e,t,r,a)=>Mb(e,"yAxis",r,a),Nqe=mt([xqe,XN],(e,t)=>{if(!(e==null||t==null)){var r=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Eqe=(e,t)=>{var r=ML(t);if(!(!e||r==null||t==null)){var{stackId:a}=t;if(a!=null){var n=e[a];if(n){var{stackedData:s}=n;if(s)return s.find(o=>o.key===r)}}}},Cqe=mt([dqe,XN],Eqe),jqe=mt([Pi,vqe,bqe,yqe,wqe,Nqe,Ca,IL,$le,Cqe,XN,cqe],(e,t,r,a,n,s,o,l,c,u,d,f)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:g}=l;if(!(d==null||s==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||a==null||n==null||c==null)){var{data:x}=d,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(m,g+1),v!=null)return eqe({layout:o,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:n,stackedData:u,displayedData:v,offset:e,cells:f})}}),Gle=e=>{var{chartData:t}=e,r=Wn(),a=xc();return N.useEffect(()=>a?()=>{}:(r(Lq(t)),()=>{r(Lq(void 0))}),[t,r,a]),null},QK={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},qle=du({name:"brush",initialState:QK,reducers:{setBrushSettings(e,t){return t.payload==null?QK:t.payload}}}),{setBrushSettings:wgt}=qle.actions,kqe=qle.reducer;function _qe(e,t,r){return(t=Sqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sqe(e){var t=Bqe(e,"string");return typeof t=="symbol"?t:t+""}function Bqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class OM{static create(t){return new OM(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+n}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),a=r[0],n=r[r.length-1];return a<=n?t>=a&&t<=n:t>=n&&t<=a}}_qe(OM,"EPS",1e-4);function Tqe(e){return(e%180+180)%180}var Iqe=function(t){var{width:r,height:a}=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Tqe(n),o=s*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Oqe={dots:[],areas:[],lines:[]},Kle=du({name:"referenceElements",initialState:Oqe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Th(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Th(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Th(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Ngt,removeDot:Egt,addArea:Cgt,removeArea:jgt,addLine:kgt,removeLine:_gt}=Kle.actions,Fqe=Kle.reducer,Dqe=N.createContext(void 0),Pqe=e=>{var{children:t}=e,[r]=N.useState("".concat(zw("recharts"),"-clip")),a=Dle();if(a==null)return null;var{x:n,y:s,width:o,height:l}=a;return N.createElement(Dqe.Provider,{value:r},N.createElement("defs",null,N.createElement("clipPath",{id:r},N.createElement("rect",{x:n,y:s,height:l,width:o}))),t)};function PI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Wle(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],n=0;n<e.length;n+=t)a.push(e[n]);return a}function Rqe(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return Iqe(a,r)}function Lqe(e,t,r){var a=r==="width",{x:n,y:s,width:o,height:l}=e;return t===1?{start:a?n:s,end:a?n+o:s+l}:{start:a?n+o:s+l,end:a?n:s}}function Wk(e,t,r,a,n){if(e*t<e*a||e*t>e*n)return!1;var s=r();return e*(t-e*s/2-a)>=0&&e*(t+e*s/2-n)<=0}function Mqe(e,t){return Wle(e,t+1)}function Uqe(e,t,r,a,n){for(var s=(a||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var g=a==null?void 0:a[c];if(g===void 0)return{v:Wle(a,u)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),w=g.coordinate,j=c===0||Wk(e,w,y,d,l);j||(c=0,d=o,u+=1),j&&(d=w+e*(y()/2+n),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function HK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HK(Object(r),!0).forEach(function(a){Qqe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Qqe(e,t,r){return(t=Hqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hqe(e){var t=zqe(e,"string");return typeof t=="symbol"?t:t+""}function zqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vqe(e,t,r,a,n){for(var s=(a||[]).slice(),o=s.length,{start:l}=t,{end:c}=t,u=function(h){var m=s[h],g,x=()=>(g===void 0&&(g=r(m,h)),g);if(h===o-1){var v=e*(m.coordinate+e*x()/2-c);s[h]=m=Yo(Yo({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else s[h]=m=Yo(Yo({},m),{},{tickCoord:m.coordinate});var y=Wk(e,m.tickCoord,x,l,c);y&&(c=m.tickCoord-e*(x()/2+n),s[h]=Yo(Yo({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function $qe(e,t,r,a,n,s){var o=(a||[]).slice(),l=o.length,{start:c,end:u}=t;if(s){var d=a[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Yo(Yo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=Wk(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+n),o[l-1]=Yo(Yo({},d),{},{isShow:!0}))}for(var g=s?l-1:l,x=function(w){var j=o[w],O,B=()=>(O===void 0&&(O=r(j,w)),O);if(w===0){var T=e*(j.coordinate-e*B()/2-c);o[w]=j=Yo(Yo({},j),{},{tickCoord:T<0?j.coordinate-T*e:j.coordinate})}else o[w]=j=Yo(Yo({},j),{},{tickCoord:j.coordinate});var C=Wk(e,j.tickCoord,B,c,u);C&&(c=j.tickCoord+e*(B()/2+n),o[w]=Yo(Yo({},j),{},{isShow:!0}))},v=0;v<g;v++)x(v);return o}function FM(e,t,r){var{tick:a,ticks:n,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!n||!n.length||!a)return[];if(cr(c)||dx.isSsr){var h;return(h=Mqe(n,cr(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?J2(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(j,O)=>{var B=typeof u=="function"?u(j.value,O):j.value;return g==="width"?Rqe(J2(B,{fontSize:t,letterSpacing:r}),x,f):J2(B,{fontSize:t,letterSpacing:r})[g]},y=n.length>=2?ao(n[1].coordinate-n[0].coordinate):1,w=Lqe(s,y,g);return c==="equidistantPreserveStart"?Uqe(y,w,v,n,o):(c==="preserveStart"||c==="preserveStartEnd"?m=$qe(y,w,v,n,o,c==="preserveStartEnd"):m=Vqe(y,w,v,n,o),m.filter(j=>j.isShow))}var Gqe=["viewBox"],qqe=["viewBox"];function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Pv.apply(null,arguments)}function zK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zK(Object(r),!0).forEach(function(a){DM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function VK(e,t){if(e==null)return{};var r,a,n=Kqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Kqe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function DM(e,t,r){return(t=Wqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wqe(e){var t=Xqe(e,"string");return typeof t=="symbol"?t:t+""}function Xqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pp extends N.Component{constructor(t){super(t),this.tickRefs=N.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:a}=t,n=VK(t,Gqe),s=this.props,{viewBox:o}=s,l=VK(s,qqe);return!PI(a,o)||!PI(n,l)||!PI(r,this.state)}getTickLineCoord(t){var{x:r,y:a,width:n,height:s,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,h,m,g,x,v=c?-1:1,y=t.tickSize||l,w=cr(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,m=a+ +!c*s,h=m-v*y,x=h-v*u,g=w;break;case"left":h=m=t.coordinate,f=r+ +!c*n,d=f-v*y,g=d-v*u,x=w;break;case"right":h=m=t.coordinate,f=r+ +c*n,d=f+v*y,g=d+v*u,x=w;break;default:d=f=t.coordinate,m=a+ +c*s,h=m+v*y,x=h+v*u,g=w;break}return{line:{x1:d,y1:h,x2:f,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,a;switch(t){case"left":a=r?"start":"end";break;case"right":a=r?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:a,height:n,orientation:s,mirror:o,axisLine:l}=this.props,c=Bi(Bi(Bi({},Va(this.props,!1)),Va(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=Bi(Bi({},c),{},{x1:t,y1:r+u*n,x2:t+a,y2:r+u*n})}else{var d=+(s==="left"&&!o||s==="right"&&o);c=Bi(Bi({},c),{},{x1:t+d*a,y1:r,x2:t+d*a,y2:r+n})}return N.createElement("line",Pv({},c,{className:fa("recharts-cartesian-axis-line",Jm(l,"className"))}))}static renderTickItem(t,r,a){var n,s=fa(r.className,"recharts-cartesian-axis-tick-value");if(N.isValidElement(t))n=N.cloneElement(t,Bi(Bi({},r),{},{className:s}));else if(typeof t=="function")n=t(Bi(Bi({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=fa(o,t.className)),n=N.createElement(O1,Pv({},r,{className:o}),a)}return n}renderTicks(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:n,stroke:s,tick:o,tickFormatter:l,unit:c,padding:u}=this.props,d=FM(Bi(Bi({},this.props),{},{ticks:a}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=pl(this.props),g=Va(o,!1),x=Bi(Bi({},m),{},{fill:"none"},Va(n,!1)),v=d.map((y,w)=>{var{line:j,tick:O}=this.getTickLineCoord(y),B=Bi(Bi(Bi(Bi({textAnchor:f,verticalAnchor:h},m),{},{stroke:"none",fill:s},g),O),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:l,padding:u});return N.createElement(As,Pv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},cx(this.props,y,w)),n&&N.createElement("line",Pv({},x,j,{className:fa("recharts-cartesian-axis-tick-line",Jm(n,"className"))})),o&&pp.renderTickItem(o,B,"".concat(typeof l=="function"?l(y.value,w):y.value).concat(c||"")))});return v.length>0?N.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:a,className:n,hide:s}=this.props;if(s)return null;var{ticks:o}=this.props;return r!=null&&r<=0||a!=null&&a<=0?null:N.createElement(As,{className:fa("recharts-cartesian-axis",n),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),ic.renderCallByParent(this.props))}}DM(pp,"displayName","CartesianAxis");DM(pp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Yqe=["x1","y1","x2","y2","key"],Jqe=["offset"],Zqe=["xAxisId","yAxisId"],eKe=["xAxisId","yAxisId"];function $K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function sl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$K(Object(r),!0).forEach(function(a){tKe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$K(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tKe(e,t,r){return(t=rKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rKe(e){var t=aKe(e,"string");return typeof t=="symbol"?t:t+""}function aKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lg(){return lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lg.apply(null,arguments)}function Xk(e,t){if(e==null)return{};var r,a,n=nKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nKe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var sKe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:n,width:s,height:o,ry:l}=e;return N.createElement("rect",{x:a,y:n,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xle(e,t){var r;if(N.isValidElement(e))r=N.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:a,y1:n,x2:s,y2:o,key:l}=t,c=Xk(t,Yqe),u=pl(c),{offset:d}=u,f=Xk(u,Jqe);r=N.createElement("line",lg({},f,{x1:a,y1:n,x2:s,y2:o,fill:"none",key:l}))}return r}function iKe(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:n}=e;if(!a||!n||!n.length)return null;var{xAxisId:s,yAxisId:o}=e,l=Xk(e,Zqe),c=n.map((u,d)=>{var f=sl(sl({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Xle(a,f)});return N.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function oKe(e){var{y:t,height:r,vertical:a=!0,verticalPoints:n}=e;if(!a||!n||!n.length)return null;var{xAxisId:s,yAxisId:o}=e,l=Xk(e,eKe),c=n.map((u,d)=>{var f=sl(sl({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Xle(a,f)});return N.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function lKe(e){var{horizontalFill:t,fillOpacity:r,x:a,y:n,width:s,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+n-n)).sort((f,h)=>f-h);n!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?n+o-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return N.createElement("rect",{key:"react-".concat(h),y:f,x:a,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function cKe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:n,y:s,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+n-n)).sort((f,h)=>f-h);n!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?n+o-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return N.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var uKe=(e,t)=>{var{xAxis:r,width:a,height:n,offset:s}=e;return Pse(FM(sl(sl(sl({},pp.defaultProps),r),{},{ticks:Rse(r),viewBox:{x:0,y:0,width:a,height:n}})),s.left,s.left+s.width,t)},dKe=(e,t)=>{var{yAxis:r,width:a,height:n,offset:s}=e;return Pse(FM(sl(sl(sl({},pp.defaultProps),r),{},{ticks:Rse(r),viewBox:{x:0,y:0,width:a,height:n}})),s.top,s.top+s.height,t)},fKe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function wh(e){var t=sL(),r=iL(),a=Hse(),n=sl(sl({},od(e,fKe)),{},{x:cr(e.x)?e.x:a.left,y:cr(e.y)?e.y:a.top,width:cr(e.width)?e.width:a.width,height:cr(e.height)?e.height:a.height}),{xAxisId:s,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=n,g=xc(),x=ar(S=>Sq(S,"xAxis",s,g)),v=ar(S=>Sq(S,"yAxis",o,g));if(!cr(u)||u<=0||!cr(d)||d<=0||!cr(l)||l!==+l||!cr(c)||c!==+c)return null;var y=n.verticalCoordinatesGenerator||uKe,w=n.horizontalCoordinatesGenerator||dKe,{horizontalPoints:j,verticalPoints:O}=n;if((!j||!j.length)&&typeof w=="function"){var B=h&&h.length,T=w({yAxis:v?sl(sl({},v),{},{ticks:B?h:v.ticks}):void 0,width:t,height:r,offset:a},B?!0:f);Y2(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(j=T)}if((!O||!O.length)&&typeof y=="function"){var C=m&&m.length,_=y({xAxis:x?sl(sl({},x),{},{ticks:C?m:x.ticks}):void 0,width:t,height:r,offset:a},C?!0:f);Y2(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(O=_)}return N.createElement("g",{className:"recharts-cartesian-grid"},N.createElement(sKe,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),N.createElement(lKe,lg({},n,{horizontalPoints:j})),N.createElement(cKe,lg({},n,{verticalPoints:O})),N.createElement(iKe,lg({},n,{offset:a,horizontalPoints:j,xAxis:x,yAxis:v})),N.createElement(oKe,lg({},n,{offset:a,verticalPoints:O,xAxis:x,yAxis:v})))}wh.displayName="CartesianGrid";function GK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function qK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GK(Object(r),!0).forEach(function(a){AKe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AKe(e,t,r){return(t=hKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hKe(e){var t=mKe(e,"string");return typeof t=="symbol"?t:t+""}function mKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pKe={xAxis:{},yAxis:{},zAxis:{}},Yle=du({name:"cartesianAxis",initialState:pKe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload;e.yAxis[r]&&(e.yAxis[r]=qK(qK({},e.yAxis[r]),{},{width:a}))}}}),{addXAxis:gKe,removeXAxis:xKe,addYAxis:vKe,removeYAxis:bKe,addZAxis:Sgt,removeZAxis:Bgt,updateYAxisWidth:yKe}=Yle.actions,wKe=Yle.reducer,NKe=["children"],EKe=["dangerouslySetInnerHTML","ticks"];function Jle(e,t,r){return(t=CKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CKe(e){var t=jKe(e,"string");return typeof t=="symbol"?t:t+""}function jKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WF(){return WF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},WF.apply(null,arguments)}function Zle(e,t){if(e==null)return{};var r,a,n=kKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kKe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function _Ke(e){var t=Wn(),r=N.useMemo(()=>{var{children:s}=e,o=Zle(e,NKe);return o},[e]),a=ar(s=>u0(s,r.id)),n=r===a;return N.useEffect(()=>(t(gKe(r)),()=>{t(xKe(r))}),[r,t]),n?e.children:null}var SKe=e=>{var{xAxisId:t,className:r}=e,a=ar(Qse),n=xc(),s="xAxis",o=ar(m=>B1(m,s,t,n)),l=ar(m=>Doe(m,s,t,n)),c=ar(m=>Toe(m,t)),u=ar(m=>B9e(m,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=Zle(e,EKe);return N.createElement(pp,WF({},h,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:fa("recharts-".concat(s," ").concat(s),r),viewBox:a,ticks:l}))},BKe=e=>{var t,r,a,n,s;return N.createElement(_Ke,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},N.createElement(SKe,e))};class Vd extends N.Component{render(){return N.createElement(BKe,this.props)}}Jle(Vd,"displayName","XAxis");Jle(Vd,"defaultProps",{allowDataOverflow:Qc.allowDataOverflow,allowDecimals:Qc.allowDecimals,allowDuplicatedCategory:Qc.allowDuplicatedCategory,height:Qc.height,hide:!1,mirror:Qc.mirror,orientation:Qc.orientation,padding:Qc.padding,reversed:Qc.reversed,scale:Qc.scale,tickCount:Qc.tickCount,type:Qc.type,xAxisId:0});var TKe=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:n=0,tickMargin:s=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=n+s,u=o+c+l+(r?a:0);return Math.round(u)}return 0},IKe=["dangerouslySetInnerHTML","ticks"];function ece(e,t,r){return(t=OKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OKe(e){var t=FKe(e,"string");return typeof t=="symbol"?t:t+""}function FKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XF(){return XF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},XF.apply(null,arguments)}function DKe(e,t){if(e==null)return{};var r,a,n=PKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function PKe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function RKe(e){var t=Wn();return N.useEffect(()=>(t(vKe(e)),()=>{t(bKe(e))}),[e,t]),null}var LKe=e=>{var t,{yAxisId:r,className:a,width:n,label:s}=e,o=N.useRef(null),l=N.useRef(null),c=ar(Qse),u=xc(),d=Wn(),f="yAxis",h=ar(j=>B1(j,f,r,u)),m=ar(j=>Ioe(j,r)),g=ar(j=>T9e(j,r)),x=ar(j=>Doe(j,f,r,u));if(N.useLayoutEffect(()=>{var j;if(!(n!=="auto"||!m||AM(s)||N.isValidElement(s))){var O=o.current,B=O==null||(j=O.tickRefs)===null||j===void 0?void 0:j.current,{tickSize:T,tickMargin:C}=O.props,_=TKe({ticks:B,label:l.current,labelGapWithTick:5,tickSize:T,tickMargin:C});Math.round(m.width)!==Math.round(_)&&d(yKe({id:r,width:_}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,s,r,n]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,w=DKe(e,IKe);return N.createElement(pp,XF({},w,{ref:o,labelRef:l,scale:h,x:g.x,y:g.y,width:m.width,height:m.height,className:fa("recharts-".concat(f," ").concat(f),a),viewBox:c,ticks:x}))},MKe=e=>{var t,r,a,n,s;return N.createElement(N.Fragment,null,N.createElement(RKe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),N.createElement(LKe,e))},UKe={allowDataOverflow:Hc.allowDataOverflow,allowDecimals:Hc.allowDecimals,allowDuplicatedCategory:Hc.allowDuplicatedCategory,hide:!1,mirror:Hc.mirror,orientation:Hc.orientation,padding:Hc.padding,reversed:Hc.reversed,scale:Hc.scale,tickCount:Hc.tickCount,type:Hc.type,width:Hc.width,yAxisId:0};class $d extends N.Component{render(){return N.createElement(MKe,this.props)}}ece($d,"displayName","YAxis");ece($d,"defaultProps",UKe);var RI={exports:{}},LI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KK;function QKe(){if(KK)return LI;KK=1;var e=e1();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,n=e.useRef,s=e.useEffect,o=e.useMemo,l=e.useDebugValue;return LI.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var m=n(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=o(function(){function v(B){if(!y){if(y=!0,w=B,B=f(B),h!==void 0&&g.hasValue){var T=g.value;if(h(T,B))return j=T}return j=B}if(T=j,r(w,B))return T;var C=f(B);return h!==void 0&&h(T,C)?(w=B,T):(w=B,j=C)}var y=!1,w,j,O=d===void 0?null:d;return[function(){return v(u())},O===null?void 0:function(){return v(O())}]},[u,d,f,h]);var x=a(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},LI}var WK;function HKe(){return WK||(WK=1,RI.exports=QKe()),RI.exports}HKe();function zKe(e){e()}function VKe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){zKe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const n=t={callback:r,next:null,prev:t};return n.prev?n.prev.next=n:e=n,function(){!a||e===null||(a=!1,n.next?n.next.prev=n.prev:t=n.prev,n.prev?n.prev.next=n.next:e=n.next)}}}}var XK={notify(){},get:()=>[]};function $Ke(e,t){let r,a=XK,n=0,s=!1;function o(x){d();const v=a.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),f())}}function l(){a.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){n++,r||(r=e.subscribe(c),a=VKe())}function f(){n--,r&&n===0&&(r(),r=void 0,a.clear(),a=XK)}function h(){s||(s=!0,d())}function m(){s&&(s=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>a};return g}var GKe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qKe=GKe(),KKe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",WKe=KKe(),XKe=()=>qKe||WKe?N.useLayoutEffect:N.useEffect,YKe=XKe(),MI=Symbol.for("react-redux-context"),UI=typeof globalThis<"u"?globalThis:{};function JKe(){if(!N.createContext)return{};const e=UI[MI]??(UI[MI]=new Map);let t=e.get(N.createContext);return t||(t=N.createContext(null),e.set(N.createContext,t)),t}var ZKe=JKe();function eWe(e){const{children:t,context:r,serverState:a,store:n}=e,s=N.useMemo(()=>{const c=$Ke(n);return{store:n,subscription:c,getServerState:a?()=>a:void 0}},[n,a]),o=N.useMemo(()=>n.getState(),[n]);YKe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==n.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||ZKe;return N.createElement(l.Provider,{value:s},t)}var tWe=eWe,rWe=(e,t)=>t,PM=mt([rWe,Ca,j1,Li,Yoe,d0,FQe,Pi],MQe),RM=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},tce=nd("mouseClick"),rce=PN();rce.startListening({actionCreator:tce,effect:(e,t)=>{var r=e.payload,a=PM(t.getState(),RM(r));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(H9e({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var YF=nd("mouseMove"),ace=PN();ace.startListening({actionCreator:YF,effect:(e,t)=>{var r=e.payload,a=t.getState(),n=aM(a,a.tooltip.settings.shared),s=PM(a,RM(r));n==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(Voe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(zoe()))}});function aWe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var YK={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},nce=du({name:"rootProps",initialState:YK,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:YK.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),nWe=nce.reducer,{updateOptions:sWe}=nce.actions,sce=du({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:iWe}=sce.actions,oWe=sce.reducer,ice=nd("keyDown"),oce=nd("focus"),LM=PN();LM.startListening({actionCreator:ice,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:n}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(nM(n,I1(r))),l=d0(r);if(s==="Enter"){var c=zk(r,"axis","hover",String(n.index));t.dispatch(zF({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:c}));return}var u=O9e(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=o+f*d;if(!(l==null||h>=l.length||h<0)){var m=zk(r,"axis","hover",String(h));t.dispatch(zF({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});LM.startListening({actionCreator:oce,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&n.index==null){var s="0",o=zk(r,"axis","hover",String(s));t.dispatch(zF({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var zu=nd("externalEvent"),lce=PN();lce.startListening({actionCreator:zu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),a={activeCoordinate:EQe(r),activeDataKey:tle(r),activeIndex:Zm(r),activeLabel:ele(r),activeTooltipIndex:Zm(r),isTooltipActive:CQe(r)};e.payload.handler(a,e.payload.reactEvent)}}});var lWe=mt([T1],e=>e.tooltipItemPayloads),cWe=mt([lWe,qN,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,a)=>{var n=e.find(l=>l.settings.dataKey===a);if(n!=null){var{positions:s}=n;if(s!=null){var o=t(s,r);return o}}}),cce=nd("touchMove"),uce=PN();uce.startListening({actionCreator:cce,effect:(e,t)=>{var r=e.payload,a=t.getState(),n=aM(a,a.tooltip.settings.shared);if(n==="axis"){var s=PM(a,RM({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(Voe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(n==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Mse),d=(o=c.getAttribute(Use))!==null&&o!==void 0?o:void 0,f=cWe(t.getState(),u,d);t.dispatch(Hoe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var uWe=use({brush:kqe,cartesianAxis:wKe,chartData:tHe,errorBars:SGe,graphicalItems:u$e,layout:kRe,legend:h8e,options:XQe,polarAxis:nVe,polarOptions:oWe,referenceElements:Fqe,rootProps:nWe,tooltip:z9e}),dWe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return JPe({reducer:uWe,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([rce.middleware,ace.middleware,LM.middleware,lce.middleware,uce.middleware]),devTools:{serialize:{replacer:aWe},name:"recharts-".concat(r)}})};function dce(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,n=xc(),s=N.useRef(null);if(n)return r;s.current==null&&(s.current=dWe(t,a));var o=X8;return N.createElement(tWe,{context:o,store:s.current},r)}function fce(e){var{layout:t,width:r,height:a,margin:n}=e,s=Wn(),o=xc();return N.useEffect(()=>{o||(s(ERe(t)),s(CRe({width:r,height:a})),s(NRe(n)))},[s,o,t,r,a,n]),null}function Ace(e){var t=Wn();return N.useEffect(()=>{t(sWe(e))},[t,e]),null}var fWe=["children"];function AWe(e,t){if(e==null)return{};var r,a,n=hWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hWe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Yk(){return Yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Yk.apply(null,arguments)}var mWe={width:"100%",height:"100%"},pWe=N.forwardRef((e,t)=>{var r=sL(),a=iL(),n=Gse();if(!Fb(r)||!Fb(a))return null;var{children:s,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=n?0:void 0,typeof o.role=="string"?d=o.role:d=n?"application":void 0,N.createElement(P8,Yk({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:a,style:mWe,ref:t}),s)}),gWe=e=>{var{children:t}=e,r=ar(HS);if(!r)return null;var{width:a,height:n,y:s,x:o}=r;return N.createElement(P8,{width:a,height:n,x:o,y:s},t)},JK=N.forwardRef((e,t)=>{var{children:r}=e,a=AWe(e,fWe),n=xc();return n?N.createElement(gWe,null,r):N.createElement(pWe,Yk({ref:t},a),r)});function xWe(){var e=Wn(),[t,r]=N.useState(null),a=ar(r8e);return N.useEffect(()=>{if(t!=null){var n=t.getBoundingClientRect(),s=n.width/t.offsetWidth;cu(s)&&s!==a&&e(jRe(s))}},[t,e,a]),r}function ZK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function vWe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZK(Object(r),!0).forEach(function(a){bWe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZK(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bWe(e,t,r){return(t=yWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yWe(e){var t=wWe(e,"string");return typeof t=="symbol"?t:t+""}function wWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NWe=N.forwardRef((e,t)=>{var{children:r,className:a,height:n,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,w=Wn(),[j,O]=N.useState(null),[B,T]=N.useState(null);nHe();var C=xWe(),_=N.useCallback(R=>{C(R),typeof t=="function"&&t(R),O(R),T(R)},[C,t,O,T]),S=N.useCallback(R=>{w(tce(R)),w(zu({handler:s,reactEvent:R}))},[w,s]),L=N.useCallback(R=>{w(YF(R)),w(zu({handler:u,reactEvent:R}))},[w,u]),P=N.useCallback(R=>{w(zoe()),w(zu({handler:d,reactEvent:R}))},[w,d]),k=N.useCallback(R=>{w(YF(R)),w(zu({handler:f,reactEvent:R}))},[w,f]),M=N.useCallback(()=>{w(oce())},[w]),U=N.useCallback(R=>{w(ice(R.key))},[w]),z=N.useCallback(R=>{w(zu({handler:o,reactEvent:R}))},[w,o]),Q=N.useCallback(R=>{w(zu({handler:l,reactEvent:R}))},[w,l]),q=N.useCallback(R=>{w(zu({handler:c,reactEvent:R}))},[w,c]),V=N.useCallback(R=>{w(zu({handler:h,reactEvent:R}))},[w,h]),Y=N.useCallback(R=>{w(zu({handler:x,reactEvent:R}))},[w,x]),K=N.useCallback(R=>{w(cce(R)),w(zu({handler:g,reactEvent:R}))},[w,g]),J=N.useCallback(R=>{w(zu({handler:m,reactEvent:R}))},[w,m]);return N.createElement(ole.Provider,{value:j},N.createElement(One.Provider,{value:B},N.createElement("div",{className:fa("recharts-wrapper",a),style:vWe({position:"relative",cursor:"default",width:y,height:n},v),onClick:S,onContextMenu:z,onDoubleClick:Q,onFocus:M,onKeyDown:U,onMouseDown:q,onMouseEnter:L,onMouseLeave:P,onMouseMove:k,onMouseUp:V,onTouchEnd:J,onTouchMove:K,onTouchStart:Y,ref:_},r)))}),EWe=["children","className","width","height","style","compact","title","desc"];function CWe(e,t){if(e==null)return{};var r,a,n=jWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jWe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var hce=N.forwardRef((e,t)=>{var{children:r,className:a,width:n,height:s,style:o,compact:l,title:c,desc:u}=e,d=CWe(e,EWe),f=pl(d);return l?N.createElement(JK,{otherAttributes:f,title:c,desc:u},r):N.createElement(NWe,{className:a,style:o,width:n,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},N.createElement(JK,{otherAttributes:f,title:c,desc:u,ref:t},N.createElement(Pqe,null,r)))}),kWe=["width","height"];function JF(){return JF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},JF.apply(null,arguments)}function _We(e,t){if(e==null)return{};var r,a,n=SWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function SWe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var BWe={top:5,right:5,bottom:5,left:5},TWe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:BWe,reverseStackOrder:!1,syncMethod:"index"},IWe=N.forwardRef(function(t,r){var a,n=od(t.categoricalChartProps,TWe),{width:s,height:o}=n,l=_We(n,kWe);if(!Fb(s)||!Fb(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return N.createElement(dce,{preloadedState:{options:m},reduxStoreName:(a=h.id)!==null&&a!==void 0?a:c},N.createElement(Gle,{chartData:h.data}),N.createElement(fce,{width:s,height:o,layout:n.layout,margin:n.margin}),N.createElement(Ace,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),N.createElement(hce,JF({},l,{width:s,height:o,ref:r})))}),OWe=["axis","item"],Nh=N.forwardRef((e,t)=>N.createElement(IWe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:OWe,tooltipPayloadSearcher:fM,categoricalChartProps:e,ref:t}));function FWe(e){var t=Wn();return N.useEffect(()=>{t(iWe(e))},[t,e]),null}var DWe=["width","height","layout"];function ZF(){return ZF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ZF.apply(null,arguments)}function PWe(e,t){if(e==null)return{};var r,a,n=RWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function RWe(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var LWe={top:5,right:5,bottom:5,left:5},MWe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:LWe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},mce=N.forwardRef(function(t,r){var a,n=od(t.categoricalChartProps,MWe),{width:s,height:o,layout:l}=n,c=PWe(n,DWe);if(!Fb(s)||!Fb(o))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return N.createElement(dce,{preloadedState:{options:m},reduxStoreName:(a=n.id)!==null&&a!==void 0?a:u},N.createElement(Gle,{chartData:n.data}),N.createElement(fce,{width:s,height:o,layout:l,margin:n.margin}),N.createElement(Ace,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),N.createElement(FWe,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),N.createElement(hce,ZF({width:s,height:o},c,{ref:r})))}),UWe=["item"],QWe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},d4=N.forwardRef((e,t)=>{var r=od(e,QWe);return N.createElement(mce,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:UWe,tooltipPayloadSearcher:fM,categoricalChartProps:r,ref:t})}),HWe=["axis"],zWe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},VWe=N.forwardRef((e,t)=>{var r=od(e,zWe);return N.createElement(mce,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:HWe,tooltipPayloadSearcher:fM,categoricalChartProps:r,ref:t})});const Y0=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],eW={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},Ly="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",go="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",Rc="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",QI="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",HI="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",zI="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",GC="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",$We="from-sky-500 to-indigo-500",GWe="from-emerald-500 to-lime-500",qWe="from-amber-500 to-rose-500",KWe="from-fuchsia-500 to-purple-600",VI={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:Ac,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:tre,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:nn,dot:"bg-emerald-500"}},WWe=e=>{const t=VI[e].icon;return i.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${VI[e].badge}`,children:[i.jsx("span",{className:`h-2 w-2 rounded-full ${VI[e].dot}`}),i.jsx(t,{className:"h-4 w-4"})," ",e]})},XWe=()=>{var Y,K;const[e,t]=N.useState("registro"),[r,a]=N.useState([]),[n,s]=N.useState(eW),[o,l]=N.useState(null),[c,u]=N.useState(null),[d,f]=N.useState(!1),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState(""),[w,j]=N.useState(""),O=N.useMemo(()=>Ah[n.dimension]??[],[n.dimension]),B=N.useCallback(async()=>{f(!0);try{const J=await NFe();a(J)}catch(J){console.error(J),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);N.useEffect(()=>{B()},[B]);const T=J=>{const{name:R,value:F}=J.target;s(W=>({...W,[R]:F}))},C=J=>{const R=J.split(",").map(F=>F.trim()).filter(Boolean);s(F=>({...F,indicadores:R}))},_=J=>{const R=J.split(",").map(F=>F.trim()).filter(Boolean);s(F=>({...F,enlaces:R}))},S=()=>{s(eW),l(null),u(null)},L=async J=>{if(J.preventDefault(),!n.responsable||!n.dimension||!n.subdimension||!n.descripcion||!n.fechaCumplimiento){u("Responsable, dimensin, subdimensin, descripcin y fecha de cumplimiento son obligatorios.");return}try{o?await CFe(o,n):await EFe(n),await B(),S(),t("seguimiento")}catch(R){console.error(R),u("Error al guardar la accin.")}},P=J=>{l(J.id),s({...J,enlaces:J.enlaces??[],indicadores:J.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},k=async J=>{confirm("Eliminar esta accin?")&&(await jFe(J),await B())},M=N.useMemo(()=>r.filter(J=>{const R=!h||J.responsable.toLowerCase().includes(h.toLowerCase())||J.descripcion.toLowerCase().includes(h.toLowerCase())||J.subdimension.toLowerCase().includes(h.toLowerCase()),F=!g||J.dimension===g,W=!v||J.subdimension===v,X=!w||J.estado===w;return R&&F&&W&&X}),[r,h,g,v,w]),U=N.useMemo(()=>{const J=new Map;return r.forEach(R=>J.set(R.dimension,(J.get(R.dimension)??0)+1)),Array.from(J.entries()).map(([R,F])=>({name:R,value:F}))},[r]),z=N.useMemo(()=>{const J=new Map;return r.forEach(R=>J.set(R.estado,(J.get(R.estado)??0)+1)),Array.from(J.entries()).map(([R,F])=>({name:R,value:F}))},[r]),Q=N.useMemo(()=>{const J=r.map(R=>R.avance??0);return J.length?Math.round(J.reduce((R,F)=>R+F,0)/J.length):0},[r]),q=N.useMemo(()=>{const J=new Map;return r.forEach(R=>J.set(R.subdimension,(J.get(R.subdimension)??0)+1)),Array.from(J.entries()).map(([R,F])=>({name:R,value:F})).sort((R,F)=>F.value-R.value).slice(0,6)},[r]),V=()=>{const J=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],R=r.map(le=>[le.id,le.fechaRegistro,le.responsable,le.dimension,le.subdimension,le.descripcion.replace(/\n/g," "),le.objetivos??"",(le.indicadores??[]).join("|"),le.cobertura??"",le.fechaInicio??"",le.fechaCumplimiento,le.estado,le.avance??0,(le.enlaces??[]).join("|")]),F=[J.join(","),...R.map(le=>le.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(","))].join(`
`),W=new Blob([F],{type:"text/csv;charset=utf-8"}),X=URL.createObjectURL(W),ne=document.createElement("a");ne.href=X,ne.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,ne.click(),URL.revokeObjectURL(X)};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),i.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[i.jsx(hg,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(sEe,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensin/Subdimensin."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[i.jsx(VO,{className:"h-4 w-4"})," Refrescar"]}),i.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[i.jsx(Qh,{className:"h-4 w-4"})," CSV"]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("button",{onClick:()=>t("registro"),className:`${QI} ${e==="registro"?HI:zI}`,children:[i.jsx(Fg,{className:"h-4 w-4"})," Registro"]}),i.jsxs("button",{onClick:()=>t("seguimiento"),className:`${QI} ${e==="seguimiento"?HI:zI}`,children:[i.jsx(Xv,{className:"h-4 w-4"})," Seguimiento"]}),i.jsxs("button",{onClick:()=>t("dashboard"),className:`${QI} ${e==="dashboard"?HI:zI}`,children:[i.jsx(zwe,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&i.jsx("div",{className:Ly,children:i.jsxs("form",{onSubmit:L,className:"p-6 md:p-8 space-y-6",children:[c&&i.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[i.jsx(Ac,{className:"h-5 w-5"}),i.jsx("span",{children:c})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:Rc,children:"Fecha de Registro"}),i.jsxs("div",{className:"relative",children:[i.jsx(ul,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),i.jsx("input",{type:"date",name:"fechaRegistro",value:n.fechaRegistro,onChange:T,className:go+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Rc,children:"Responsable"}),i.jsxs("div",{className:"relative",children:[i.jsx(jb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),i.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:n.responsable,onChange:T,className:go+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Rc,children:"Cobertura (niveles/cursos)"}),i.jsxs("div",{className:"relative",children:[i.jsx(Cb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),i.jsx("input",{type:"text",name:"cobertura",placeholder:"2A, 2B, 3Mecnica...",value:n.cobertura??"",onChange:T,className:go+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Rc,children:"Dimensin PME"}),i.jsxs("div",{className:"relative",children:[i.jsx(HNe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsxs("select",{name:"dimension",value:n.dimension,onChange:T,className:go+" pl-10",children:[i.jsx("option",{value:"",children:"Selecciona una dimensin"}),Object.keys(Ah).map(J=>i.jsx("option",{value:J,children:J},J))]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:Rc,children:"Subdimensin"}),i.jsxs("div",{className:"relative",children:[i.jsx(EN,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),i.jsxs("select",{name:"subdimension",value:n.subdimension,onChange:T,className:go+" pl-10",disabled:!n.dimension,children:[i.jsx("option",{value:"",children:n.dimension?"Selecciona una subdimensin":"Primero elige una dimensin"}),O.map(J=>i.jsx("option",{value:J,children:J},J))]})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:Rc,children:"Descripcin de la Accin"}),i.jsxs("div",{className:"relative",children:[i.jsx(ru,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),i.jsx("textarea",{name:"descripcion",value:n.descripcion,onChange:T,rows:3,placeholder:"Qu se har? Dnde y con quin?",className:go+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:Rc,children:"Objetivos (opcional)"}),i.jsx("textarea",{name:"objetivos",value:n.objetivos??"",onChange:T,rows:2,placeholder:"Propsitos pedaggicos",className:go})]}),i.jsxs("div",{children:[i.jsx("label",{className:Rc,children:"Indicadores (separados por coma)"}),i.jsx("input",{type:"text",value:(n.indicadores??[]).join(", "),onChange:J=>C(J.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:go})]}),i.jsxs("div",{children:[i.jsx("label",{className:Rc,children:"Fecha de Inicio"}),i.jsxs("div",{className:"relative",children:[i.jsx(ul,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),i.jsx("input",{type:"date",name:"fechaInicio",value:n.fechaInicio??"",onChange:T,className:go+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Rc,children:"Fecha de Cumplimiento"}),i.jsxs("div",{className:"relative",children:[i.jsx(ul,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"date",name:"fechaCumplimiento",value:n.fechaCumplimiento,onChange:T,className:go+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Rc,children:"Estado"}),i.jsx("select",{name:"estado",value:n.estado,onChange:T,className:go,children:KH.map(J=>i.jsx("option",{value:J,children:J},J))})]}),i.jsxs("div",{children:[i.jsx("label",{className:Rc,children:"Avance (%)"}),i.jsxs("div",{className:"relative",children:[i.jsx(qj,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"number",min:0,max:100,name:"avance",value:n.avance??0,onChange:T,className:go+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:Rc,children:"Enlaces de evidencia (separados por coma)"}),i.jsxs("div",{className:"relative",children:[i.jsx(rz,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsx("input",{type:"text",value:(n.enlaces??[]).join(", "),onChange:J=>_(J.target.value),placeholder:"https://..., https://...",className:go+" pl-10"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3",children:[o&&i.jsx("button",{type:"button",onClick:S,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[o?i.jsx(Fl,{className:"h-4 w-4"}):i.jsx(So,{className:"h-4 w-4"}),o?"Guardar cambios":"Registrar accin"]})]})]})}),e==="seguimiento"&&i.jsx("div",{className:Ly,children:i.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"relative md:col-span-2",children:[i.jsx(h1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),i.jsx("input",{className:go+" pl-10",placeholder:"Buscar por responsable, descripcin o subdimensin...",value:h,onChange:J=>m(J.target.value)})]}),i.jsxs("select",{value:g,onChange:J=>{x(J.target.value),y("")},className:go,children:[i.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(Ah).map(J=>i.jsx("option",{value:J,children:J},J))]}),i.jsxs("select",{value:v,onChange:J=>y(J.target.value),className:go,children:[i.jsx("option",{value:"",children:"Todas las subdimensiones"}),(Ah[g]??Object.values(Ah).flat()).map(J=>i.jsx("option",{value:J,children:J},J))]}),i.jsxs("select",{value:w,onChange:J=>j(J.target.value),className:go,children:[i.jsx("option",{value:"",children:"Todos los estados"}),KH.map(J=>i.jsx("option",{value:J,children:J},J))]})]}),i.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensin / Subdimensin"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripcin"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[M.map(J=>{var R,F;return i.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[i.jsx("td",{className:"px-4 py-4 align-top text-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((F=(R=J.responsable)==null?void 0:R.slice(0,1))==null?void 0:F.toUpperCase())||"?"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:J.responsable}),i.jsx("div",{className:"text-xs text-slate-500",children:J.cobertura})]})]})}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[i.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:J.dimension}),i.jsx("div",{className:"text-xs text-slate-500",children:J.subdimension})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[i.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:J.descripcion}),J.enlaces&&J.enlaces.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:J.enlaces.map((W,X)=>i.jsxs("a",{href:W,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[i.jsx(rz,{className:"h-3.5 w-3.5"})," Evidencia ",X+1]},X))})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",J.fechaRegistro||"-"]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",J.fechaInicio||"-"]}),i.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",J.fechaCumplimiento]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:WWe(J.estado)}),i.jsxs("td",{className:"px-4 py-4 align-top",children:[i.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(J.avance??0,0),100)}%`}})}),i.jsxs("div",{className:"text-xs text-center mt-1",children:[J.avance??0,"%"]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx("button",{onClick:()=>P(J),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:i.jsx(MR,{className:"h-5 w-5 text-amber-600"})}),i.jsx("button",{onClick:()=>k(J.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:i.jsx(sn,{className:"h-5 w-5 text-rose-600"})})]})})]},J.id)}),M.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:`${GC} ${$We}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(_l,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),i.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),i.jsx("div",{className:`${GC} ${GWe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(nn,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),i.jsx("div",{className:"text-2xl font-black",children:((Y=z.find(J=>J.name==="Cumplida"))==null?void 0:Y.value)??0})]})]})}),i.jsx("div",{className:`${GC} ${qWe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(tre,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),i.jsx("div",{className:"text-2xl font-black",children:((K=z.find(J=>J.name==="En Proceso"))==null?void 0:K.value)??0})]})]})}),i.jsx("div",{className:`${GC} ${KWe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(qj,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),i.jsxs("div",{className:"text-2xl font-black",children:[Q,"%"]})]})]})})]}),i.jsxs("div",{className:Ly+" p-5",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensin"})}),i.jsx("div",{className:"h-64",children:i.jsx(cc,{width:"100%",height:"100%",children:i.jsxs(Nh,{data:U,children:[i.jsx(wh,{strokeDasharray:"3 3"}),i.jsx(Vd,{dataKey:"name",hide:!0}),i.jsx($d,{allowDecimals:!1}),i.jsx(lc,{}),i.jsx(lA,{dataKey:"value",children:U.map((J,R)=>i.jsx(qh,{fill:Y0[R%Y0.length]},R))})]})})}),i.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:U.map((J,R)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:Y0[R%Y0.length]}}),i.jsx("span",{className:"flex-1",children:J.name}),i.jsx("span",{className:"font-semibold",children:J.value})]},R))})]}),i.jsxs("div",{className:Ly+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribucin por estado"}),i.jsx("div",{className:"h-64",children:i.jsx(cc,{width:"100%",height:"100%",children:i.jsxs(d4,{children:[i.jsx(WN,{data:z,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:z.map((J,R)=>i.jsx(qh,{fill:Y0[R%Y0.length]},R))}),i.jsx(ux,{}),i.jsx(lc,{})]})})})]}),i.jsxs("div",{className:Ly+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones ms trabajadas"}),i.jsxs("ul",{className:"space-y-2",children:[q.map((J,R)=>i.jsxs("li",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:Y0[R%Y0.length]}}),J.name]}),i.jsx("span",{className:"font-semibold",children:J.value})]},R)),q.length===0&&i.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},YWe="modulepreload",JWe=function(e){return"/"+e},tW={},ei=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=o(r.map(u=>{if(u=JWe(u),u in tW)return;tW[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":YWe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},f4="presentacionesDidacticas",ZWe=async(e,t)=>{const r=Jt(ht(vr,f4)),a={...e,id:r.id,userId:t,fechaCreacion:new Date().toISOString(),estado:"generando"};return await ai(r,a),r.id},rW=async(e,t)=>{const r=Jt(vr,f4,e);await Bo(r,t)},eXe=async e=>{await xn(Jt(vr,f4,e))},tXe=(e,t)=>{const r=Dt(ht(vr,f4),ur("userId","==",e),Yt("fechaCreacion","desc"));return nr(r,a=>{const n=a.docs.map(s=>s.data());t(n)})},rXe=async e=>{let t=null;try{const r=so.currentUser;if(!r)throw new Error("Usuario no autenticado. Debe iniciar sesin para generar presentaciones.");console.log("Estado de autenticacin:",{isLoggedIn:!!r,uid:r.uid,email:r.email});const a=await r.getIdToken(!0);console.log("Token actualizado correctamente, longitud:",a.length);const n=Vc(bw,"generateSlides"),s={tema:e.tema,asignatura:e.asignatura,objetivosAprendizaje:e.objetivosAprendizaje,curso:e.curso,numDiapositivas:e.numDiapositivas,estilo:e.estilo,incluirImagenes:e.incluirImagenes,contenidoFuente:e.contenidoFuente||"",enlaces:e.enlaces||[],planificacionId:e.planificacionId,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,userId:r.uid};t=await ZWe({...e,userId:r.uid,fechaCreacion:new Date().toISOString(),estado:"generando",urlPresentacion:""},r.uid),console.log("Presentacin guardada con ID:",t),console.log("Enviando solicitud a generateSlides con usuario:",r.uid),console.log("Datos enviados:",s);const o=await n(s);console.log("Respuesta de funcin:",o);const l=o.data;if(l.presentacionId&&l.url)try{const c={estado:"completada",urlPresentacion:l.url};l.demoMode&&(c.mensajeError="NOTA: Esta es una versin de demostracin. La presentacin no existe realmente."),await rW(t,c)}catch(c){console.warn("Error al actualizar la presentacin en Firestore:",c)}return l}catch(r){if(console.error("Error al generar presentacin:",r),console.error("Cdigo:",r==null?void 0:r.code,"Mensaje:",r==null?void 0:r.message,"Detalles:",r==null?void 0:r.details),t)try{await rW(t,{estado:"error",mensajeError:(r==null?void 0:r.message)||"Error desconocido al generar la presentacin"}),console.warn(`Presentacin ${t} marcada como fallida`)}catch(a){console.error("Error al actualizar el estado de la presentacin:",a)}throw r}},$I=async()=>{var t,r,a,n;const e=so.currentUser;if(!e)throw new Error("Usuario no autenticado. Debe iniciar sesin para verificar la autorizacin.");try{const s=await e.getIdToken(),o=await fetch("https://us-central1-plania-clase.cloudfunctions.net/checkGoogleSlidesAuth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({})});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const l=await o.json();return{isAuthorized:l.isAuthorized||!1,message:l.message||"Estado de autorizacin desconocido"}}catch(s){if(console.error("Error al verificar autorizacin de Google Slides:",s),(t=s.message)!=null&&t.includes("cors")||(r=s.message)!=null&&r.includes("blocked")||(a=s.message)!=null&&a.includes("CORS")||(n=s.message)!=null&&n.includes("fetch")){console.warn("Error de red detectado, usando mtodo alternativo para verificar autorizacin");try{const o=Dt(ht(vr,"userTokens"),ur("userId","==",e.uid)),l=await Ir(o);return{isAuthorized:!l.empty,message:l.empty?"Usuario no ha autorizado Google Slides (verificacin directa)":"Usuario autorizado para Google Slides (verificacin directa)"}}catch(o){return console.error("Error en verificacin alternativa:",o),{isAuthorized:!1,message:"Error al verificar autorizacin"}}}return{isAuthorized:!1,message:`Error al verificar autorizacin: ${s.message||"Error desconocido"}`}}},aXe=()=>{const[e,t]=N.useState(!1),[r,a]=N.useState(null),n=async()=>{t(!0);try{const o=await Vc(bw,"testGemini")();a(o.data)}catch(s){console.error("Error calling testGemini:",s),a({success:!1,error:s.message||"Error desconocido",type:"client_error"})}t(!1)};return i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Prueba de Gemini AI"}),i.jsx("button",{onClick:n,disabled:e,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 mb-4",children:e?"Probando...":"Probar Gemini 1.5 Pro"}),r&&i.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Resultado:"}),i.jsx("pre",{className:"text-sm overflow-auto max-h-96",children:JSON.stringify(r,null,2)}),r.success?i.jsx("div",{className:"mt-2 text-green-600",children:" Gemini AI est funcionando correctamente"}):i.jsxs("div",{className:"mt-2 text-red-600",children:[" Problema detectado: ",r.error]})]})]})},nXe=({estilo:e,tema:t="Ejemplo de Presentacin"})=>{const a=(()=>{switch(e){case"sobrio":return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedaggica",ejemplo:["Ttulo principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]};case"visual":return{colores:{fondo:"bg-blue-50",fondoDiapo:"bg-white",titulo:"text-blue-800",texto:"text-slate-600",acento:"bg-blue-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Dinmico y colorido, con nfasis en elementos grficos e infografas",ejemplo:["Mayor uso de elementos visuales","Diagramas y representaciones grficas","Paleta de colores vibrantes"]};case"academico":return{colores:{fondo:"bg-amber-50",fondoDiapo:"bg-white",titulo:"text-amber-800",texto:"text-slate-700",acento:"bg-amber-100"},fuentes:{titulo:"font-serif",texto:"font-serif"},iconos:"",descripcion:"Formal y riguroso, con nfasis en conceptos tericos",ejemplo:["Estructura acadmica formal","Referencias y citas bibliogrficas","nfasis en conceptos tericos"]};case"interactivo":return{colores:{fondo:"bg-green-50",fondoDiapo:"bg-white",titulo:"text-green-800",texto:"text-slate-600",acento:"bg-green-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Participativo y colaborativo, con mltiples actividades",ejemplo:["Preguntas y actividades prcticas","Espacios para participacin","Dinmicas grupales sugeridas"]};case"profesional":return{colores:{fondo:"bg-indigo-50",fondoDiapo:"bg-white",titulo:"text-indigo-800",texto:"text-slate-600",acento:"bg-indigo-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Corporativo y prctico, enfocado en aplicaciones reales",ejemplo:["Diseo corporativo y estructurado","Casos de estudio prcticos","Aplicaciones en contexto laboral"]};case"creativo":return{colores:{fondo:"bg-purple-50",fondoDiapo:"bg-white",titulo:"text-purple-800",texto:"text-slate-600",acento:"bg-purple-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Innovador y atractivo, estimula la imaginacin",ejemplo:["Diseo creativo no convencional","Elementos visuales llamativos","Enfoque innovador del contenido"]};case"minimalista":return{colores:{fondo:"bg-gray-50",fondoDiapo:"bg-white",titulo:"text-gray-800",texto:"text-gray-600",acento:"bg-gray-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Simple y esencial, centrado en lo ms importante",ejemplo:["Diseo muy simplificado","Amplio espacio en blanco","Solo informacin esencial"]};default:return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedaggica",ejemplo:["Ttulo principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]}}})();return i.jsxs("div",{className:`p-4 rounded-lg ${a.colores.fondo} transition-all`,children:[i.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Vista previa: Estilo ",e]}),i.jsx("p",{className:"text-sm text-gray-500 mb-3",children:a.descripcion}),i.jsxs("div",{className:"shadow-md rounded-lg overflow-hidden",children:[i.jsxs("div",{className:`p-4 ${a.colores.fondoDiapo} border-b border-gray-200`,children:[i.jsx("h4",{className:`${a.fuentes.titulo} ${a.colores.titulo} text-lg font-bold mb-2`,children:t}),i.jsxs("div",{className:`${a.fuentes.texto} ${a.colores.texto} text-sm space-y-2`,children:[i.jsx("p",{children:"Diapositiva de ttulo con subttulo"}),i.jsx("div",{className:`w-2/3 h-2 ${a.colores.acento} rounded mt-2`})]})]}),i.jsxs("div",{className:`p-4 ${a.colores.fondoDiapo}`,children:[i.jsx("h4",{className:`${a.fuentes.titulo} ${a.colores.titulo} text-md font-bold mb-2`,children:"Caractersticas principales"}),i.jsx("ul",{className:`${a.fuentes.texto} ${a.colores.texto} text-xs space-y-1 list-disc pl-4`,children:a.ejemplo.map((n,s)=>i.jsx("li",{children:n},s))}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx("span",{className:"text-lg",children:a.iconos})})]})]})]})},sXe=({userId:e,planificaciones:t})=>{const[r,a]=N.useState("presentaciones"),[n,s]=N.useState(null),[o,l]=N.useState({tema:"",objetivosAprendizaje:[],numDiapositivas:8,estilo:"sobrio",incluirImagenes:!0,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,contenidoFuente:"",enlaces:""}),[c,u]=N.useState(!1),[d,f]=N.useState([]),[h,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(null),[w,j]=N.useState({isAuthorized:!1,message:"Verificando autorizacin...",checking:!0});N.useEffect(()=>e?tXe(e,M=>{f(M)}):void 0,[e]),N.useEffect(()=>{const k=async()=>{if(e)try{j(q=>({...q,checking:!0}));const Q=await $I();j({isAuthorized:Q.isAuthorized,message:Q.message,checking:!1})}catch(Q){j({isAuthorized:!1,message:`Error: ${Q.message||"No se pudo verificar la autorizacin"}`,checking:!1})}};k();const M=setTimeout(()=>{j(Q=>Q.checking?{isAuthorized:!1,message:"Timeout al verificar autorizacin",checking:!1}:Q)},1e4);if(new URLSearchParams(window.location.search).get("auth")==="success"){const Q=setTimeout(()=>{k()},2e3);return()=>{clearTimeout(Q),clearTimeout(M)}}return()=>clearTimeout(M)},[e]),N.useEffect(()=>{const k=async()=>{if(new URLSearchParams(window.location.search).get("auth")==="success"&&!w.isAuthorized)try{j(Q=>({...Q,checking:!0}));const z=await $I();j({isAuthorized:z.isAuthorized,message:z.message,checking:!1})}catch(z){j({isAuthorized:!1,message:`Error: ${z.message||"No se pudo verificar la autorizacin"}`,checking:!1})}};return window.addEventListener("popstate",k),()=>window.removeEventListener("popstate",k)},[w.isAuthorized]),N.useEffect(()=>{n&&("nombreUnidad"in n?l(k=>({...k,tema:n.nombreUnidad})):"nombreClase"in n&&l(k=>({...k,tema:n.nombreClase})))},[n]);const O=()=>{var k;if(!n)return[];if("lecciones"in n){const M=[];return(k=n.lecciones)==null||k.forEach(U=>{U.objetivosAprendizaje&&!M.includes(U.objetivosAprendizaje)&&M.push(U.objetivosAprendizaje)}),M}else if(n.detalleLeccionOrigen)return[n.detalleLeccionOrigen.objetivosAprendizaje];return[]},B=k=>{const{name:M,value:U,type:z}=k.target;if(z==="checkbox"){const Q=k.target.checked;l(q=>({...q,[M]:Q}))}else l(Q=>({...Q,[M]:U}))},T=k=>{const M=Array.from(k.target.selectedOptions,U=>U.value);l(U=>({...U,objetivosAprendizaje:M}))},C=async k=>{if(k.preventDefault(),!n){y("Debes seleccionar una planificacin");return}if(o.objetivosAprendizaje.length===0){y("Debes seleccionar al menos un objetivo de aprendizaje");return}y(null),x(!0);try{const M={planificacionId:n.id,tema:o.tema,curso:n.nivel,asignatura:n.asignatura,objetivosAprendizaje:o.objetivosAprendizaje,numDiapositivas:o.numDiapositivas,estilo:o.estilo,incluirImagenes:o.incluirImagenes,contenidoFuente:o.contenidoFuente,enlaces:o.enlaces?o.enlaces.split(/[\s,]+/).filter(Boolean):[]};console.log("Datos para presentacin:",M);const U=await rXe({...M,userId:e});console.log("Resultado de la funcin:",U),U&&U.url&&console.log("Presentacin generada:",U.url)}catch(M){console.error("Error al generar presentacin:",M);const U=(M==null?void 0:M.message)||"Error desconocido",z=(M==null?void 0:M.code)||"unknown";y(`Error (${z}): ${U}`)}finally{x(!1)}},_=async k=>{if(window.confirm("Ests seguro de que deseas eliminar esta presentacin?"))try{m(!0),await eXe(k)}catch(M){console.error("Error al eliminar presentacin:",M),y("Error al eliminar la presentacin")}finally{m(!1)}},S=()=>i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Generar Presentacin con IA"}),i.jsxs("form",{onSubmit:C,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Seleccionar Planificacin"}),i.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",value:(n==null?void 0:n.id)||"",onChange:k=>{const M=t.find(U=>U.id===k.target.value);s(M||null)},required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una planificacin"}),i.jsx("optgroup",{label:"Unidades",children:t.filter(k=>k.tipo==="Unidad").map(k=>i.jsxs("option",{value:k.id,children:[k.tipo==="Unidad"?k.nombreUnidad:""," - ",k.asignatura," (",k.nivel,")"]},k.id))}),i.jsx("optgroup",{label:"Clases",children:t.filter(k=>k.tipo==="Clase").map(k=>i.jsxs("option",{value:k.id,children:[k.tipo==="Clase"?k.nombreClase:""," - ",k.asignatura," (",k.nivel,")"]},k.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),i.jsx("input",{type:"text",name:"tema",value:o.tema,onChange:B,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Objetivos de Aprendizaje (selecciona al menos uno)"}),i.jsx("select",{multiple:!0,name:"objetivosAprendizaje",value:o.objetivosAprendizaje,onChange:T,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",size:3,required:!0,children:O().map((k,M)=>i.jsx("option",{value:k,children:k},M))}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mantn presionado Ctrl (o Cmd) para seleccionar mltiples opciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"N de diapositivas"}),i.jsx("input",{type:"number",name:"numDiapositivas",value:o.numDiapositivas,onChange:B,min:4,max:20,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estilo de Presentacin"}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-2",children:[i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="sobrio"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"sobrio"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Sobrio"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Elegante y minimalista"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="visual"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"visual"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Visual"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Colorido y grfico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="academico"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"academico"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Acadmico"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formal y riguroso"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="interactivo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"interactivo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Interactivo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Participativo y dinmico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="profesional"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"profesional"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Profesional"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Corporativo y prctico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="creativo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"creativo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Creativo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Innovador y atractivo"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="minimalista"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"minimalista"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Minimalista"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Simple y esencial"})]})})]}),i.jsxs("button",{type:"button",onClick:()=>u(!0),className:"mt-3 w-full flex items-center justify-center gap-2 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-800/40 transition-colors",children:[i.jsx(Q2,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver ejemplo del estilo seleccionado"})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[i.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-lg font-medium",children:["Vista previa de estilo: ",o.estilo]}),i.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(Xd,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-5",children:[i.jsx(nXe,{estilo:o.estilo,tema:o.tema||"Tema de la presentacin"}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-medium mb-2",children:["Caractersticas del estilo ",o.estilo]}),i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.estilo==="sobrio"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo elegante y profesional"}),i.jsx("li",{children:"Colores neutros y tipografa clsica"}),i.jsx("li",{children:"nfasis en la claridad y simplicidad"}),i.jsx("li",{children:"Ideal para presentaciones formales"})]}),o.estilo==="visual"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo colorido y dinmico"}),i.jsx("li",{children:"Mayor uso de grficos e imgenes"}),i.jsx("li",{children:"nfasis en elementos visuales e infografas"}),i.jsx("li",{children:"Ideal para mantener la atencin visual"})]}),o.estilo==="academico"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo formal y riguroso"}),i.jsx("li",{children:"Espacio para citas y referencias"}),i.jsx("li",{children:"nfasis en conceptos tericos"}),i.jsx("li",{children:"Ideal para contenido acadmico complejo"})]}),o.estilo==="interactivo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo participativo"}),i.jsx("li",{children:"Incluye actividades y preguntas"}),i.jsx("li",{children:"nfasis en la participacin activa"}),i.jsx("li",{children:"Ideal para clases dinmicas"})]}),o.estilo==="profesional"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo corporativo"}),i.jsx("li",{children:"Elementos de casos prcticos"}),i.jsx("li",{children:"nfasis en aplicaciones reales"}),i.jsx("li",{children:"Ideal para formacin profesional"})]}),o.estilo==="creativo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo no convencional y llamativo"}),i.jsx("li",{children:"Elementos visuales originales"}),i.jsx("li",{children:"nfasis en despertar la imaginacin"}),i.jsx("li",{children:"Ideal para temas creativos o artsticos"})]}),o.estilo==="minimalista"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo extremadamente simplificado"}),i.jsx("li",{children:"Amplio espacio en blanco"}),i.jsx("li",{children:"nfasis en lo esencial"}),i.jsx("li",{children:"Ideal para conceptos claros y concisos"})]})]})]})]}),i.jsx("div",{className:"p-4 bg-gray-100 dark:bg-slate-700 flex justify-end",children:i.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Cerrar vista previa"})})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenes",name:"incluirImagenes",checked:o.incluirImagenes,onChange:k=>l(M=>({...M,incluirImagenes:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenes",className:"text-sm text-gray-700 dark:text-gray-300",children:" Incluir sugerencias para imgenes educativas"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirActividades",name:"incluirActividades",checked:o.incluirActividades||!1,onChange:k=>l(M=>({...M,incluirActividades:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirActividades",className:"text-sm text-gray-700 dark:text-gray-300",children:" Incluir actividades y ejercicios prcticos"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirEvaluacion",name:"incluirEvaluacion",checked:o.incluirEvaluacion||!1,onChange:k=>l(M=>({...M,incluirEvaluacion:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirEvaluacion",className:"text-sm text-gray-700 dark:text-gray-300",children:" Incluir diapositiva de evaluacin/reflexin"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"formatoPedagogico",name:"formatoPedagogico",checked:o.formatoPedagogico||!0,onChange:k=>l(M=>({...M,formatoPedagogico:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"formatoPedagogico",className:"text-sm text-gray-700 dark:text-gray-300",children:" Aplicar estructura pedaggica avanzada"})]})]}),i.jsxs("div",{className:"hidden",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenesOld",name:"incluirImagenesOld",checked:o.incluirImagenes,onChange:k=>l(M=>({...M,incluirImagenes:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenesOld",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Incluir imgenes libres de derechos"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto/recursos fuente (opcional)"}),i.jsx("textarea",{name:"contenidoFuente",value:o.contenidoFuente,onChange:B,rows:3,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"Pega aqu cualquier contenido de referencia para la presentacin..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Enlaces (opcional)"}),i.jsx("input",{type:"text",name:"enlaces",value:o.enlaces,onChange:B,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"URLs separadas por comas o espacios"})]}),v&&i.jsx("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:v}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:g||!n,className:"w-full flex items-center justify-center gap-2 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?i.jsxs(i.Fragment,{children:[i.jsx(Co,{className:"w-4 h-4 animate-spin"}),"Generando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(zO,{className:"w-4 h-4"}),"Generar Presentacin"]})})})]})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Mis Presentaciones"}),i.jsx("div",{className:"space-y-4",children:h?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Co,{className:"w-8 h-8 animate-spin text-indigo-500"})}):d.length===0?i.jsxs("div",{className:"text-center py-8 space-y-4",children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No has generado presentaciones todava"}),i.jsx("div",{className:"text-sm",children:w.checking?i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[i.jsx(Co,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Verificando autorizacin..."})]}):i.jsxs("div",{className:`flex items-center justify-center gap-2 ${w.isAuthorized?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:[i.jsx("span",{children:w.isAuthorized?"":""}),i.jsx("span",{children:w.message})]})}),!w.checking&&!w.isAuthorized&&i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:()=>{const k=`https://us-central1-plania-clase.cloudfunctions.net/slidesAuthorize?userId=${e}`;window.location.href=k},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(IB,{className:"w-4 h-4"}),i.jsx("span",{children:"Autorizar Google Slides"})]})}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:async()=>{try{j(M=>({...M,checking:!0}));const k=await $I();j({isAuthorized:k.isAuthorized,message:k.message,checking:!1})}catch(k){j({isAuthorized:!1,message:`Error: ${k.message||"No se pudo verificar la autorizacin"}`,checking:!1})}},disabled:w.checking,className:`flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors ${w.isAuthorized?"text-green-600 hover:text-green-800 border border-green-300 hover:bg-green-50":"text-gray-600 hover:text-gray-800 border border-gray-300 hover:bg-gray-50"}`,children:[w.checking?i.jsx(Co,{className:"w-3 h-3 animate-spin"}):i.jsx("span",{children:""}),i.jsx("span",{children:"Verificar estado"})]})})]}):d.map(k=>i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:k.tema}),k.estado==="generando"?i.jsxs("span",{className:"flex items-center text-amber-500 text-xs gap-1",children:[i.jsx(Co,{className:"w-3 h-3 animate-spin"}),"Generando"]}):k.estado==="error"?i.jsxs("span",{className:"flex items-center text-red-500 text-xs gap-1",children:[i.jsx(Xd,{className:"w-3 h-3"}),"Error"]}):i.jsxs("span",{className:"flex items-center text-green-500 text-xs gap-1",children:[i.jsx(nn,{className:"w-3 h-3"}),"Lista"]})]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[k.asignatura," - ",k.curso]}),i.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4 mt-2 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ul,{className:"w-3 h-3"}),new Date(k.fechaCreacion).toLocaleDateString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(OB,{className:"w-3 h-3"}),k.numDiapositivas," diapositivas"]}),i.jsxs("span",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full ${k.estilo==="sobrio"?"bg-slate-100 text-slate-700":k.estilo==="visual"?"bg-blue-100 text-blue-700":k.estilo==="academico"?"bg-amber-100 text-amber-700":k.estilo==="interactivo"?"bg-green-100 text-green-700":k.estilo==="profesional"?"bg-indigo-100 text-indigo-700":k.estilo==="creativo"?"bg-purple-100 text-purple-700":(k.estilo==="minimalista","bg-gray-100 text-gray-700")}`,children:[k.estilo==="sobrio"&&"",k.estilo==="visual"&&"",k.estilo==="academico"&&"",k.estilo==="interactivo"&&"",k.estilo==="profesional"&&"",k.estilo==="creativo"&&"",k.estilo==="minimalista"&&"",k.estilo]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Objetivos de Aprendizaje:"}),i.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 dark:text-gray-400",children:k.objetivosAprendizaje.map((M,U)=>i.jsx("li",{className:"truncate",children:M.length>60?M.substring(0,57)+"...":M},U))})]}),k.mensajeError&&i.jsx("div",{className:"mt-2 text-xs italic text-amber-600 dark:text-amber-400",children:k.mensajeError}),i.jsxs("div",{className:"mt-3 flex justify-between",children:[k.estado==="completada"?i.jsxs(i.Fragment,{children:[i.jsxs("a",{href:k.esDemoMode||k.urlPresentacion.includes("example.com")?"#":k.urlPresentacion,onClick:M=>{(k.esDemoMode||k.urlPresentacion.includes("example.com"))&&(M.preventDefault(),alert("Esta es una versin de demostracin. En la versin final, aqu vers una presentacin real de Google Slides."))},target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-sm ${k.esDemoMode||k.urlPresentacion.includes("example.com")?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,children:[i.jsx(IB,{className:"w-3 h-3"}),k.esDemoMode||k.urlPresentacion.includes("example.com")?"Ver Demo":"Abrir en Google Slides"]}),k.esDemoMode&&k.urlAutorizacion&&i.jsxs("a",{href:k.urlAutorizacion,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center gap-1 text-sm text-green-600 hover:text-green-800",children:[i.jsx(IB,{className:"w-3 h-3"}),"Autorizar Google Slides"]})]}):i.jsx("span",{className:"text-gray-400 text-sm italic",children:"En progreso..."}),i.jsx("button",{onClick:()=>_(k.id),className:"text-red-500 hover:text-red-700",children:i.jsx(sn,{className:"w-4 h-4"})})]})]},k.id))})]})})]}),L=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(ZH,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Seccin de Guas Didcticas"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta funcin estar disponible prximamente."})]}),P=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(OB,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Repositorio de Recursos"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta funcin estar disponible prximamente."})]});return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-1",children:i.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>a("presentaciones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="presentaciones"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(zO,{className:"w-4 h-4"}),i.jsx("span",{children:"Presentaciones"})]}),i.jsxs("button",{onClick:()=>a("guias"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="guias"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(ZH,{className:"w-4 h-4"}),i.jsx("span",{children:"Guas"})]}),i.jsxs("button",{onClick:()=>a("recursos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="recursos"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(OB,{className:"w-4 h-4"}),i.jsx("span",{children:"Recursos"})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx(aXe,{})}),i.jsxs("div",{children:[r==="presentaciones"&&S(),r==="guias"&&L(),r==="recursos"&&P()]})]})},YN="planificaciones",pce="actividades_calendario",MM=e=>{var r,a,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r))==null?void 0:n.toISOString())||t.fechaCreacion,...t.detallesLeccion?{detallesLeccion:Array.isArray(t.detallesLeccion)?t.detallesLeccion:[]}:{}}},gce=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await Zr(ht(st,YN),r)).id}catch(r){throw console.error("Error al guardar planificacin:",r),new Error("No se pudo guardar la planificacin")}},xce=async(e,t,r)=>{try{const a=Jt(st,YN,e),n=await Uh(a);if(!n.exists()||n.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificacin");await Bo(a,{...t,fechaActualizacion:ir.fromDate(new Date)})}catch(a){throw console.error("Error al actualizar planificacin:",a),new Error("No se pudo actualizar la planificacin")}},vce=async(e,t)=>{try{const r=Jt(st,YN,e),a=await Uh(r);if(!a.exists()||a.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificacin");await xn(r)}catch(r){throw console.error("Error al eliminar planificacin:",r),new Error("No se pudo eliminar la planificacin")}},iXe=async e=>{try{const t=Dt(ht(st,YN),ur("userId","==",e),Yt("fechaCreacion","desc"));return(await Ir(t)).docs.map(MM)}catch(t){return console.error("Error al obtener planificaciones:",t),[]}},bce=(e,t)=>{const r=Dt(ht(st,YN),ur("userId","==",e),Yt("fechaCreacion","desc"));return nr(r,a=>{try{const n=a.docs.map(MM);console.log(`Recibiendo ${n.length} planificaciones del usuario ${e}`);const s=n.map(o=>o.tipo==="Unidad"&&!Array.isArray(o.detallesLeccion)?(console.warn(`Planificacin ${o.id} tiene detallesLeccion invlidos, corrigiendo.`),{...o,detallesLeccion:[]}):o);t(s)}catch(n){console.error("Error procesando datos de planificaciones:",n),t([])}},a=>{console.error("Error en suscripcin a planificaciones:",a)})},yce=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await Zr(ht(st,pce),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},wce=(e,t)=>{const r=Dt(ht(st,pce),ur("userId","==",e),Yt("fecha","desc"));return nr(r,a=>{const n=a.docs.map(MM);t(n)},a=>{console.error("Error en suscripcin a actividades:",a)})},eD=Object.freeze(Object.defineProperty({__proto__:null,deletePlanificacion:vce,getPlanificacionesByUser:iXe,saveActividad:yce,savePlanificacion:gce,subscribeToActividades:wce,subscribeToPlanificaciones:bce,updatePlanificacion:xce},Symbol.toStringTag,{value:"Module"})),oXe=(e,t)=>{const[r,a]=N.useState([]),[n,s]=N.useState(!0),[o,l]=N.useState(null),c=N.useCallback(async()=>{if(!e){console.warn(" cargarPlanificacionesDirectamente: userId nulo, no se pueden cargar planificaciones"),s(!1),l("No se pudo determinar la identidad del usuario"),a([]);return}try{console.log(` Cargando planificaciones directamente para ${e}`);const{getPlanificacionesByUser:m}=await ei(async()=>{const{getPlanificacionesByUser:v}=await Promise.resolve().then(()=>eD);return{getPlanificacionesByUser:v}},void 0),g=await m(e);console.log(` Obtenidas ${g.length} planificaciones directamente de Firestore`);const x=g.map(v=>v.tipo==="Unidad"&&!Array.isArray(v.detallesLeccion)?(console.log(` Corrigiendo datos de planificacin ${v.id}`),{...v,detallesLeccion:[]}):v);a(x),s(!1)}catch(m){console.error(" Error cargando planificaciones directamente:",m),l(m instanceof Error?m.message:"Error al cargar planificaciones directamente"),s(!1)}},[e]);N.useEffect(()=>{if(!e){console.log(" usePlanificaciones: userId nulo o vaco, no se cargarn planificaciones"),s(!1),l("ID de usuario no disponible"),a([]);return}console.log(` usePlanificaciones: Cargando planificaciones para usuario ${e}`),s(!0),l(null);let m=null;try{m=bce(e,x=>{if(console.log(` usePlanificaciones: Recibidos ${x.length} documentos por suscripcin`),x.length===0){c();return}const v=x.map(y=>y.tipo==="Unidad"&&!Array.isArray(y.detallesLeccion)?(console.log(` Corrigiendo datos de planificacin ${y.id}`),{...y,detallesLeccion:[]}):y);a(v),s(!1)})}catch(x){console.error(" Error en hook usePlanificaciones:",x),l(x instanceof Error?x.message:"Error al cargar planificaciones"),c()}const g=setTimeout(()=>{n&&r.length===0&&(console.log(" Timeout: cargando planificaciones directamente como respaldo"),c())},5e3);return()=>{m&&m(),clearTimeout(g)}},[e,c]);const u=async m=>{try{return l(null),await gce(m,e)}catch(g){throw l(g.message||"Error al guardar planificacin"),g}},d=async(m,g)=>{try{l(null),await xce(m,g,e)}catch(x){throw l(x.message||"Error al actualizar planificacin"),x}},f=async m=>{try{l(null),await vce(m,e)}catch(g){throw l(g.message||"Error al eliminar planificacin"),g}},h=N.useCallback(async()=>{try{if(!e)return{status:"error",message:"No hay usuario identificado. Datos del usuario no disponibles."};console.log(" Diagnstico - ID de usuario:",e);const{getPlanificacionesByUser:m}=await ei(async()=>{const{getPlanificacionesByUser:y}=await Promise.resolve().then(()=>eD);return{getPlanificacionesByUser:y}},void 0),g=await m(e),x=g.filter(y=>y.tipo==="Unidad"),v=x.filter(y=>!Array.isArray(y.detallesLeccion)||y.detallesLeccion===void 0);if(console.log(` Diagnstico - Total planificaciones: ${g.length}, Unidades: ${x.length}, Invlidas: ${v.length}`),v.length>0){const{updateDoc:y,doc:w}=await ei(async()=>{const{updateDoc:O,doc:B}=await Promise.resolve().then(()=>Nb);return{updateDoc:O,doc:B}},void 0),{db:j}=await ei(async()=>{const{db:O}=await Promise.resolve().then(()=>QR);return{db:O}},void 0);for(const O of v)await y(w(j,"planificaciones",O.id),{detallesLeccion:[]});return{status:"repaired",message:`Se repararon ${v.length} planificaciones de ${x.length} totales.`}}else if(x.length===0)return{status:"empty",message:`No se encontraron planificaciones de unidad para el usuario ${e}. Cree una nueva planificacin.`};return{status:"ok",message:`Todo correcto. ${x.length} planificaciones de unidad encontradas.`}}catch(m){return console.error(" Error en diagnstico:",m),{status:"error",message:`Error: ${m instanceof Error?m.message:"Desconocido"}`}}},[e]);return{planificaciones:r,loading:n,error:o,save:u,update:d,remove:f,diagnosticarYReparar:h}},tD=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},lXe=e=>{const[t,r]=N.useState([]),[a,n]=N.useState(!0),[s,o]=N.useState(null);N.useEffect(()=>{if(!e){n(!1);return}n(!0);try{return wce(e,u=>{r(u),n(!1)})}catch(c){o(c instanceof Error?c.message:"Error al cargar actividades"),n(!1)}},[e]);const l=N.useCallback(async c=>{try{return o(null),await yce(c,e)}catch(u){throw o(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:a,error:s,save:l}},cXe=({lesson:e,onClose:t,onSave:r,isLoading:a=!1})=>{const[n,s]=N.useState(e),o=c=>{s({...n,[c.target.name]:c.target.value})},l=async()=>{try{await r(n),t()}catch(c){console.error("Error al guardar leccin:",c)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Leccin"}),i.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(n).map(([c,u])=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),i.jsx("textarea",{name:c,value:u,onChange:o,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:a})]},c))}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:a,children:"Cancelar"}),i.jsxs("button",{onClick:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a,children:[a&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},uXe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:a=!1,onUpdatePlan:n})=>{var L,P,k;const[s,o]=N.useState(e.progreso??0),[l,c]=N.useState(!1),[u,d]=N.useState(((L=e.reflexionUnidad)==null?void 0:L.fortalezas)||""),[f,h]=N.useState(((P=e.reflexionUnidad)==null?void 0:P.mejoras)||""),[m,g]=N.useState(((k=e.reflexionUnidad)==null?void 0:k.debilidades)||""),x=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],v=(()=>{var U;const M=Object.fromEntries(x.map(z=>[z,""]));return(((U=e.reflexionUnidad)==null?void 0:U.ordenHabilidades)||[]).forEach((z,Q)=>{x.includes(z)&&(M[z]=Q+1)}),M})(),[y,w]=N.useState(v),[j,O]=N.useState(!1);N.useEffect(()=>{var U,z,Q,q;d(((U=e.reflexionUnidad)==null?void 0:U.fortalezas)||""),h(((z=e.reflexionUnidad)==null?void 0:z.mejoras)||""),g(((Q=e.reflexionUnidad)==null?void 0:Q.debilidades)||"");const M=Object.fromEntries(x.map(V=>[V,""]));(((q=e.reflexionUnidad)==null?void 0:q.ordenHabilidades)||[]).forEach((V,Y)=>{x.includes(V)&&(M[V]=Y+1)}),w(M)},[e.id]);const B=()=>{const M=u.trim().length>0&&f.trim().length>0&&m.trim().length>0,z=Object.entries(y).filter(([,Q])=>Q!=="").sort((Q,q)=>Q[1]-q[1]).map(([Q])=>Q).length>=1;return M&&z},T=async M=>{const U=parseInt(M.target.value,10);if(U===100&&!B()){alert("Para marcar la unidad como 100% completada, primero debes completar y guardar la Reflexin Docente (fortalezas, mejoras, desafos y priorizacin de habilidades).");return}o(U),c(!0);try{e.id&&n&&(await n(e.id,{progreso:U}),console.log(" Progreso actualizado exitosamente"))}catch(z){console.error(" Error completo:",z),alert(`Error al guardar el avance: ${z.message}`),o(e.progreso??0)}finally{c(!1)}},C=(M,U)=>{w(z=>{const Q={...z};if(U!==""){const q=Object.keys(Q).find(V=>V!==M&&Q[V]===U);q&&(Q[q]="")}return Q[M]=U,Q})},_=()=>Object.entries(y).filter(([,M])=>M!=="").sort((M,U)=>M[1]-U[1]).map(([M])=>M),S=async()=>{if(!(!n||!e.id)){if(!B()){alert("La Reflexin Docente es obligatoria: completa Fortalezas, Mejoras, Desafos y prioriza al menos una habilidad de Bloom.");return}O(!0);try{const M=_();await n(e.id,{reflexionUnidad:{fortalezas:u.trim(),mejoras:f.trim(),debilidades:m.trim(),ordenHabilidades:M}})}catch(M){console.error(" Error al guardar reflexin:",M),alert(`Error al guardar la reflexin: ${M.message}`)}finally{O(!1)}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"range",min:0,max:100,value:s,onChange:T,disabled:l||a}),i.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),l&&i.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),i.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((M,U)=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",U+1,": ",M.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo:"})," ",M.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Contenidos:"})," ",M.contenidosConceptuales]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Habilidad (Bloom):"})," ",M.habilidadesBloom]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Perfil de Egreso:"})," ",M.perfilEgreso]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Interdisciplinariedad:"})," ",M.asignaturasInterdisciplinariedad]})]}),i.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-md",children:i.jsxs("p",{className:"font-medium",children:[i.jsx("strong",{children:"Actividades sugeridas:"})," ",M.actividades]})}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{onClick:()=>t(U,M),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:a,children:"Editar"}),i.jsx("button",{onClick:()=>r(M,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:a,children:"Usar para Plan de Clase"})]})]},U))}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-3",children:"Reflexin Docente"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:'Obligatoria. Se usa en el mdulo "Seguimiento Curricular" para anlisis y visualizacin.'}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Fortalezas ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:u,onChange:M=>d(M.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Mejoras ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:f,onChange:M=>h(M.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Desafos ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:m,onChange:M=>g(M.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Habilidades Bloom priorizadas (1 = mayor prioridad) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:x.map(M=>i.jsxs("div",{className:"flex items-center justify-between gap-3 p-2 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:M}),i.jsxs("select",{value:y[M]===""?"":String(y[M]),onChange:U=>C(M,U.target.value===""?"":parseInt(U.target.value,10)),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:""}),[1,2,3,4,5,6].map(U=>i.jsx("option",{value:U,children:U},U))]})]},M))}),i.jsx("div",{className:"mt-3 text-xs text-slate-500 dark:text-slate-400",children:"Selecciona nmeros sin repetir. Solo se guardan las habilidades con nmero asignado."})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsxs("button",{onClick:S,disabled:j||a,className:"inline-flex items-center gap-2 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2 px-4 rounded-md disabled:opacity-50",children:[j?i.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin inline-block"}):i.jsx(Fl,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar reflexin"})]})})]})]})},dXe=({plan:e,onBack:t,onSave:r,onDelete:a,isLoading:n=!1})=>{const[s,o]=N.useState(e),[l,c]=N.useState(!1);N.useEffect(()=>{console.log("Plan inicial:",e.momentosClase);const h=v=>{if(typeof v=="object"&&v!==null)return JSON.stringify(v);if(typeof v=="string")try{if(v.trim().startsWith("{")){const y=JSON.parse(v);return JSON.stringify(y)}}catch(y){console.log("No es JSON vlido:",y)}return String(v)},m=h(e.momentosClase.inicio),g=h(e.momentosClase.desarrollo),x=h(e.momentosClase.cierre);console.log("Contenido procesado - inicio:",m),o(v=>({...v,momentosClase:{inicio:m,desarrollo:g,cierre:x}}))},[e]);const u=h=>{const{name:m,value:g}=h.target,[x,v]=m.split(".");o(x==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[v]:g}}):y=>({...y,[m]:g}))},d=async()=>{c(!0);try{await r((()=>{const m={...s};return Object.keys(m.momentosClase).forEach(g=>{const x=m.momentosClase[g];if(typeof x=="string"&&(x.includes("TIEMPO:")||x.includes("OBJETIVO:")||x.includes("ACTIVIDADES:")))try{const v=x.match(/TIEMPO:\s*(.*?)(?:\n\n|\n$)/s),y=x.match(/OBJETIVO:\s*(.*?)(?:\n\nACTIVIDADES:|\n$)/s);(v||y)&&console.log("Manteniendo formato para visualizacin")}catch(v){console.error("Error al procesar plan para guardar:",v)}}),m})())}catch(h){console.error("Error al guardar plan de clase:",h)}finally{c(!1)}},f=h=>{if(console.log("Formateando contenido:",typeof h,h!=null&&h.substring?h.substring(0,50):h),typeof h=="string")try{h.trim().startsWith("{")&&(h=JSON.parse(h),console.log("Contenido parseado a objeto:",h))}catch(m){console.log("Error al parsear JSON:",m)}if(typeof h=="object"&&h!==null)try{let m="";if(h.actividades&&Array.isArray(h.actividades)){m=`${h.tiempo?"TIEMPO: "+h.tiempo+`

`:""}`,m+=`${h.objetivo?`OBJETIVO:
`+h.objetivo+`

`:""}`,m+=`ACTIVIDADES:

`,h.actividades.forEach((x,v)=>{m+=`ACTIVIDAD ${v+1}: ${x.nombre||"Sin nombre"}
`,m+=`${x.descripcion||"Sin descripcin"}

`;let y="";x.tipo&&(y+=` Tipo: ${x.tipo}
`),x.recursos&&(y+=` Recursos: ${x.recursos}
`),x.evaluacion&&(y+=` Evaluacin: ${x.evaluacion}
`),y&&(m+=`${y}
`)});let g="";return Object.keys(h).forEach(x=>{x!=="tiempo"&&x!=="objetivo"&&x!=="actividades"&&(g+=` ${x.charAt(0).toUpperCase()+x.slice(1)}: ${typeof h[x]=="object"?JSON.stringify(h[x]):h[x]}
`)}),g&&(m+=`
INFORMACIN ADICIONAL:
${g}`),m}else{if(typeof h=="string")try{const y=JSON.parse(h);if(y.actividades||y.tiempo||y.objetivo)return f(y)}catch{}const x=JSON.stringify(h,null,2).replace(/[{}"]/g,"").replace(/,$/gm,"").replace(/^\s*\n/gm,"").split(`
`);let v="";return x.forEach(y=>{if(y.trim().startsWith("["))v+=`
`+y.trim()+`
`;else if(y.trim().startsWith("-"))v+=" "+y.trim().substring(1)+`
`;else if(y.includes(":")){const w=y.split(":");if(w.length>=2){const j=w[0].trim(),O=w.slice(1).join(":").trim();["tiempo","duracin","objetivo","actividad","tipo","recursos","evaluacin"].includes(j.toLowerCase())?v+=`${j.toUpperCase()}: ${O}
`:v+=`${j}: ${O}
`}else v+=y+`
`}else v+=y+`
`}),v}}catch(m){return console.error("Error al formatear contenido:",m),String(h)}return String(h)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),i.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:n||l,children:" Volver"})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-blue-400 dark:border-blue-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsx("label",{className:"font-bold text-lg text-blue-700 dark:text-blue-300",children:"Inicio de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.inicio",value:f(s.momentosClase.inicio),onChange:u,rows:5,placeholder:"Describe las actividades iniciales, activacin de conocimientos previos, motivacin y presentacin del objetivo de la clase...",className:"w-full p-3 border border-blue-200 dark:border-blue-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-700 focus:border-blue-300 focus:outline-none transition-all",disabled:n||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-transparent dark:from-green-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-green-400 dark:border-green-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("label",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:"Desarrollo de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.desarrollo",value:f(s.momentosClase.desarrollo),onChange:u,rows:8,placeholder:"Describe las actividades principales de aprendizaje, secuencia didctica, estrategias de enseanza, actividades prcticas...",className:"w-full p-3 border border-green-200 dark:border-green-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-green-300 dark:focus:ring-green-700 focus:border-green-300 focus:outline-none transition-all",disabled:n||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-transparent dark:from-amber-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-amber-400 dark:border-amber-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600 dark:text-amber-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("label",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:"Cierre de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.cierre",value:f(s.momentosClase.cierre),onChange:u,rows:5,placeholder:"Describe las actividades de cierre, sntesis, metacognicin, evaluacin formativa y retroalimentacin...",className:"w-full p-3 border border-amber-200 dark:border-amber-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-amber-300 dark:focus:ring-amber-700 focus:border-amber-300 focus:outline-none transition-all",disabled:n||l})]})]}),i.jsx("div",{className:"text-right mt-6",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("button",{onClick:()=>a(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:n||l,children:" Eliminar Plan"}),i.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n||l,children:[l&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},fXe=({userId:e})=>{const{actividades:t,save:r}=lXe(e),[a,n]=N.useState("list"),[s,o]=N.useState(null),[l,c]=N.useState(!1),[u,d]=N.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,m]=N.useState(f);N.useEffect(()=>{a==="summary"&&s&&g()},[a,s,e]);const g=async()=>{if(s)try{d(!1)}catch(T){console.error("Error al verificar evento en calendario:",T)}},x=T=>{const{name:C,value:_}=T.target;m(S=>({...S,[C]:_}))},v=(T,C,_)=>{m(S=>({...S,tareas:S.tareas.map(L=>L.id===T?{...L,[C]:_}:L)}))},y=()=>{m(T=>({...T,tareas:[...T.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=T=>{m(C=>({...C,tareas:C.tareas.filter(_=>_.id!==T)}))},j=async T=>{T.preventDefault(),c(!0);const C=`Eres un especialista en objetivos educacionales segn el currculum nacional chileno. Basado en la siguiente informacin de una actividad pedaggica, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripcin: ${h.descripcion}
    - Tareas: ${h.tareas.map(_=>_.descripcion).join(", ")}
    
    El objetivo debe:
    - Ser breve y conciso (mximo 120 caracteres)
    - Empezar con un verbo en infinitivo (como establece el MINEDUC)
    - Enfocarse en el propsito principal de la actividad
    - Estar alineado con los aprendizajes esperados del currculum nacional
    - Ser medible y observable`;try{tD("Planificacin - Actividad Calendario");const _=so.currentUser,S=_?await _.getIdToken():null;if(!S)throw new Error("No se pudo obtener el token de autenticacin");const L=await fetch("/api/generarObjetivoActividad",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({prompt:C,formData:h})});let P="No generado";L.ok?P=(await L.json()).objetivo||P:(console.error("Error al generar objetivo con IA:",await L.text()),alert("Hubo un error al generar el objetivo. La actividad se guardar sin l."));const k={...h,objetivo:P},M=await r(k),U={...k,id:M};o(U),n("summary")}catch(_){console.error("Error al guardar actividad:",_),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}finally{c(!1)}},O=T=>{console.log("Agregando al calendario:",T),d(!0)},B="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return a==="form"?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsxs("form",{onSubmit:j,className:"space-y-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Detalles de la Actividad"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:B,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:B,required:!0,disabled:l}),i.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:B,required:!0,disabled:l})]}),i.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripcin (objetivos, contenidos, metodologa)",rows:4,className:B,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicacin",className:B,required:!0,disabled:l}),i.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:B,required:!0,disabled:l})]}),i.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:B,disabled:l})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),i.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:l,children:"+ Agregar Tarea"})]}),i.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((T,C)=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[i.jsx("button",{type:"button",onClick:()=>w(T.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:l,children:""}),i.jsx("textarea",{value:T.descripcion,onChange:_=>v(T.id,"descripcion",_.target.value),placeholder:`Descripcin de la Tarea ${C+1}`,rows:2,className:B,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.jsx("input",{value:T.responsable,onChange:_=>v(T.id,"responsable",_.target.value),placeholder:"Responsable",className:B,required:!0,disabled:l}),i.jsx("input",{value:T.recursos,onChange:_=>v(T.id,"recursos",_.target.value),placeholder:"Recursos Necesarios",className:B,disabled:l})]})]},T.id))})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[i.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),i.jsx("p",{className:"text-sm",children:"Este objetivo se generar automticamente a partir de la descripcin y las tareas ingresadas. Una vez guardada la actividad, podr revisar y ajustar el objetivo propuesto por el sistema."})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:()=>n("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:l,children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:l?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):a==="summary"&&s?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-lg",children:"Actividad Planificada con xito!"}),i.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuacin."})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),i.jsxs("div",{className:"space-y-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),i.jsx("span",{children:s.nombre})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),i.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Descripcin:"}),i.jsx("p",{children:s.descripcion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Ubicacin:"}),i.jsx("span",{children:s.ubicacion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),i.jsx("span",{children:s.participantes})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),i.jsx("p",{children:s.recursosGenerales})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),i.jsx("p",{children:s.objetivo})]})]}),i.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[i.jsx("p",{className:"text-sm",children:"Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),i.jsx("button",{onClick:()=>O(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?" Aadido al Calendario":"Aadir al Calendario"})]})]}),i.jsx("button",{onClick:()=>{n("list"),o(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),i.jsx("button",{onClick:()=>{n("form"),m(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),i.jsx("div",{className:"space-y-3",children:t.length>0?t.map(T=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:T.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(T.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",T.ubicacion]})]},T.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},AXe=({currentUser:e})=>{const t=(e==null?void 0:e.uid)||(e==null?void 0:e.id)||(e==null?void 0:e.email)||"";console.log(" PlanificacionDocente - Usuario actual:",{uid:e==null?void 0:e.uid,id:e==null?void 0:e.id,email:e==null?void 0:e.email,nombreCompleto:e==null?void 0:e.nombreCompleto,usuarioSeleccionado:t});const r=t&&t.length>0;console.log(" ID de usuario vlido:",r);const{planificaciones:a,save:n,update:s,remove:o,loading:l,diagnosticarYReparar:c}=oXe(r?t:null),u={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[d,f]=N.useState(u),[h,m]=N.useState(null),[g,x]=N.useState(!1),[v,y]=N.useState(null),[w,j]=N.useState("unidad"),[O,B]=N.useState(null),[T,C]=N.useState(null),_=(ne,le)=>{h&&C({planId:h.id,lessonIndex:ne,lessonData:le})},S=ne=>{m(ne),f({asignatura:ne.asignatura,nivel:ne.nivel,nombreUnidad:ne.nombreUnidad,contenidos:ne.contenidos,cantidadClases:ne.cantidadClases,observaciones:ne.observaciones,ideasParaUnidad:ne.ideasParaUnidad})},L=async ne=>{if(window.confirm("Ests seguro de que quieres eliminar esta planificacin?"))try{await o(ne),(h==null?void 0:h.id)===ne&&m(null)}catch(le){console.error("Error al eliminar planificacin:",le),alert("No se pudo eliminar la planificacin.")}},P=async ne=>{if(window.confirm("Ests seguro de que quieres eliminar este plan de clase?"))try{await o(ne),B(null)}catch(le){console.error("Error al eliminar plan de clase:",le),alert("No se pudo eliminar el plan de clase.")}},k=N.useMemo(()=>e.asignaturas||[],[e.asignaturas]),M=N.useMemo(()=>{const ne=e.cursos||[],le=new Set;return ne.forEach(ie=>{ie.startsWith("1")?le.add("1 Medio"):ie.startsWith("2")?le.add("2 Medio"):ie.startsWith("3")?le.add("3 Medio"):ie.startsWith("4")&&le.add("4 Medio")}),Array.from(le)},[e.cursos]);N.useEffect(()=>{f(ne=>({...ne,asignatura:k[0]||"",nivel:M[0]||""}))},[k,M]);const U=ne=>{const{name:le,value:ie}=ne.target;f(ae=>({...ae,[le]:le==="cantidadClases"?parseInt(ie,10):ie}))},z=()=>{const{asignatura:ne,nivel:le,nombreUnidad:ie,contenidos:ae,cantidadClases:Ae,observaciones:ke,ideasParaUnidad:re}=d;return`Eres un experto diseador curricular para la educacin media tcnico profesional en Chile. Tu tarea es generar una planificacin de unidad didctica siguiendo fielmente las bases curriculares y los objetivos de aprendizaje del Currculum Nacional Chileno (MINEDUC) para ${ne} en ${le}. La planificacin debe presentarse en formato JSON estructurado.

    **Informacin Base:**
    - Asignatura: ${ne}
    - Nivel: ${le}
    - Nombre de la Unidad: "${ie}"
    - Contenidos clave a trabajar (insumo principal): "${ae}"
    - Cantidad de clases para la unidad: ${Ae}
    - Ideas y perspectiva del docente para la unidad: "${re||"Ninguna. S creativo."}"
    - Observaciones y nfasis del docente: "${ke||"Ninguna"}"
    
    **Orientaciones Curriculares Nacionales:**
    - Asegrate que los objetivos estn alineados con las Bases Curriculares del MINEDUC para ${ne} en ${le}.
    - Contempla los Objetivos de Aprendizaje (OA) oficiales del currculum en lnea chileno.
    - Incorpora los Objetivos de Aprendizaje Transversales (OAT) cuando sea apropiado.
    - Para niveles tcnico-profesionales, considera los perfiles de egreso de cada especialidad.

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluacin general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Ae} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje especfico para la leccin, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarn en la leccin.
        - **habilidadesBloom**: La habilidad principal de la Taxonoma de Bloom que se trabajar (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la leccin con una habilidad del perfil de egreso (ej: "Pensamiento crtico", "Colaboracin").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el nmero de clase entre parntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podra realizar un trabajo interdisciplinario.

    Asegrate de que el contenido generado sea coherente, pedaggicamente slido y est directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},Q=async ne=>{ne.preventDefault(),x(!0),y(null);try{tD("Planificacin - Unidad");const le=z(),ie=so.currentUser,ae=ie?await ie.getIdToken():null;if(!ae)throw new Error("No se pudo obtener el token de autenticacin");const Ae=await fetch("/api/generarUnidadPlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({prompt:le,unidadFormData:d})});if(!Ae.ok){const Re=await Ae.text();throw console.error("Error response from backend:",Re),new Error(`Error al generar la unidad con IA: ${Ae.statusText}`)}const ke=await Ae.json(),re={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:d.asignatura,nivel:d.nivel,nombreUnidad:d.nombreUnidad,contenidos:d.contenidos,cantidadClases:d.cantidadClases,observaciones:d.observaciones,ideasParaUnidad:d.ideasParaUnidad,objetivosAprendizaje:ke.objetivosAprendizaje,indicadoresEvaluacion:ke.indicadoresEvaluacion,detallesLeccion:ke.detallesLeccion};if(h)await s(h.id,re),m({...re,id:h.id});else{const Re=await n(re);m({...re,id:Re})}}catch(le){console.error("Error al generar planificacin con IA",le),y("Ocurri un error al contactar con la IA. Verifique la configuracin y reintente.")}finally{x(!1)}},q=async(ne,le)=>{x(!0),y(null);const ie=()=>`Eres un experto pedagogo chileno especialista en diseo de planes de clase alineados con el currculum nacional. A partir de la siguiente informacin de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${le.asignatura}
    - Nivel: ${le.nivel}
    - Objetivo de la clase: ${ne.objetivosAprendizaje}
    - Contenidos: ${ne.contenidosConceptuales}
    - Actividades sugeridas: ${ne.actividades}
    
    **Orientaciones didcticas**:
    - El plan debe seguir el modelo de diseo instruccional del Ministerio de Educacin de Chile.
    - Incluir estrategias de aprendizaje activo y centrado en el estudiante.
    - Incorporar metodologas que desarrollen habilidades del siglo XXI segn el currculum chileno.
    - Considerar momentos para activacin de conocimientos previos, desarrollo de aprendizajes y metacognicin/evaluacin.
    
    Responde SLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{tD("Planificacin - Utilizar Clase");const ae=ie(),Ae=so.currentUser,ke=Ae?await Ae.getIdToken():null;if(!ke)throw new Error("No se pudo obtener el token de autenticacin");const re=await fetch("/api/generarClasePlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ke}`},body:JSON.stringify({prompt:ae,unitPlan:le,lessonDetail:ne,currentUser:e})});if(!re.ok){const Te=await re.text();throw console.error("Error response from backend:",Te),new Error(`Error al generar el plan de clase con IA: ${re.statusText}`)}const Re=await re.json(),Le={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:le.asignatura,nivel:le.nivel,contenidos:ne.contenidosConceptuales,observaciones:"",nombreClase:ne.actividades,duracionClase:80,momentosClase:Re,detalleLeccionOrigen:ne};await n(Le),alert('Plan de clase generado y guardado en la pestaa "Clase"!'),j("clase")}catch(ae){console.error("Error al generar plan de clase con IA",ae),y("No se pudo generar el plan de clase. Intntelo de nuevo.")}finally{x(!1)}},V=async ne=>{if(T)try{const{planId:le,lessonIndex:ie}=T,ae=a.find(re=>re.id===le&&re.tipo==="Unidad");if(!ae)return;const Ae=[...ae.detallesLeccion];Ae[ie]=ne;const ke={...ae,detallesLeccion:Ae};await s(le,ke),m(ke),C(null)}catch(le){console.error("Error al actualizar leccin:",le),alert("Error al actualizar la leccin. Por favor, intente nuevamente.")}},Y="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=async()=>{try{console.log(" Recargando planificaciones manualmente...");const{getPlanificacionesByUser:ne}=await ei(async()=>{const{getPlanificacionesByUser:ie}=await Promise.resolve().then(()=>eD);return{getPlanificacionesByUser:ie}},void 0);if(!t){console.warn(" No hay userId para recargar planificaciones");return}const le=await ne(t);console.log(` Obtenidas ${le.length} planificaciones frescas`),alert(`Se han encontrado ${le.length} planificaciones en la base de datos. Recargue la pgina para ver los cambios.`),window.location.reload()}catch(ne){console.error(" Error recargando planificaciones:",ne),alert("Hubo un error al recargar las planificaciones. Intente recargar la pgina manualmente.")}},[J,R]=N.useState({visible:!1,ejecutando:!1,resultado:null}),F=async()=>{R(le=>({...le,ejecutando:!0,resultado:null}));const ne=await c();R(le=>({...le,ejecutando:!1,resultado:ne}))},W=()=>{var ne;return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Complete los campos y use la IA para crear una planificacin de unidad estructurada."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>R(le=>({...le,visible:!le.visible})),className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-md text-sm",children:"Diagnstico"}),i.jsxs("button",{onClick:K,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm flex items-center gap-1",children:[i.jsx(VO,{className:"w-4 h-4"}),i.jsx("span",{children:"Recargar"})]})]})]}),J.visible&&i.jsxs("div",{className:"mb-6 p-4 border border-slate-300 dark:border-slate-600 rounded-lg",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"Herramienta de Diagnstico"}),i.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Esta herramienta intentar resolver problemas con las planificaciones que no aparecen en el historial."}),J.resultado&&i.jsx("div",{className:`p-3 mb-3 rounded-md ${J.resultado.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":J.resultado.status==="repaired"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:J.resultado.message}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:F,disabled:J.ejecutando,className:"bg-slate-700 hover:bg-slate-800 text-white px-4 py-2 rounded-md flex items-center gap-2 disabled:opacity-50",children:J.ejecutando?i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx("span",{children:"Ejecutar diagnstico"})}),((ne=J.resultado)==null?void 0:ne.status)==="repaired"&&i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:"Recargar pgina"})]})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:d.asignatura,onChange:U,className:Y,required:!0,disabled:g,children:k.map(le=>i.jsx("option",{value:le,children:le},le))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsx("select",{name:"nivel",value:d.nivel,onChange:U,className:Y,required:!0,disabled:g,children:M.map(le=>i.jsx("option",{value:le,children:le},le))})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[i.jsx("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre de la Unidad"}),i.jsx("input",{type:"text",name:"nombreUnidad",value:d.nombreUnidad,onChange:U,className:Y,placeholder:"Ej: Introduccin a la Programacin",required:!0,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos Clave"}),i.jsx("textarea",{name:"contenidos",value:d.contenidos,onChange:U,rows:3,placeholder:"Describe los temas, conceptos y habilidades principales que se deben abordar en la unidad. S lo ms especfico posible.",className:Y,required:!0,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),i.jsx("textarea",{name:"ideasParaUnidad",value:d.ideasParaUnidad,onChange:U,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificacin (ej: enfocar en trabajo colaborativo, usar casos prcticos, conectar con la actualidad).",className:Y,disabled:g})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),i.jsx("input",{type:"number",name:"cantidadClases",value:d.cantidadClases,onChange:U,className:Y,min:"1",max:"20",disabled:g})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (nfasis)"}),i.jsx("textarea",{name:"observaciones",value:d.observaciones,onChange:U,rows:1,placeholder:"Ej: clase prctica, modelo ABP, juego, reforzamiento...",className:Y,disabled:g})]})]}),i.jsx("div",{className:"pt-4 text-right",children:i.jsx("button",{type:"submit",disabled:g||l,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:g?i.jsx(VO,{className:"w-5 h-5 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(hg,{className:"w-5 h-5"}),i.jsx("span",{children:h?"Regenerar Plan":"Generar con IA"})]})})}),v&&i.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),h&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisin y Edicin"}),i.jsx(uXe,{plan:h,onEditLesson:_,onUseLesson:q,onUpdatePlan:s,isLoading:g})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"space-y-4",children:[console.log(" RENDERIZANDO HISTORIAL - Cantidad de planificaciones:",a.length),console.log(" RENDERIZANDO HISTORIAL - Cantidad de unidades:",a.filter(le=>le.tipo==="Unidad").length),a.length>0?a.filter(le=>le.tipo==="Unidad").map(le=>i.jsx("div",{className:`p-5 border rounded-xl transition-all ${(h==null?void 0:h.id)===le.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:le.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(le.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",le.contenidos]}),i.jsx("div",{className:"mt-2 flex items-center gap-2",children:le.reflexionUnidad&&le.reflexionUnidad.fortalezas&&le.reflexionUnidad.mejoras&&le.reflexionUnidad.debilidades?i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"Reflexin completa"}):i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:"Reflexin pendiente"})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>S(le),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(xNe,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar"})]}),i.jsxs("button",{onClick:()=>L(le.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(sn,{className:"w-4 h-4"}),i.jsx("span",{children:"Eliminar"})]})]})]})},le.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})]})]})]})},X=()=>{const ne=a.filter(le=>le.tipo==="Clase").sort((le,ie)=>new Date(ie.fechaCreacion).getTime()-new Date(le.fechaCreacion).getTime());return O?i.jsx(dXe,{plan:O,onBack:()=>B(null),onDelete:P,onSave:async le=>{try{await s(le.id,le),B(le)}catch(ie){console.error("Error al actualizar plan de clase:",ie),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:g}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(jwe,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"space-y-4",children:ne.length>0?ne.map(le=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:le.nombreClase}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(le.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",le.contenidos]})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:()=>B(le),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},le.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaa 'Unidad'."})})]})};return N.useEffect(()=>{if((async()=>{try{if(console.log(" Diagnstico de planificaciones - Inicio"),console.log(`userId: ${t}`),!t){console.warn(" Sin userId, no se pueden obtener planificaciones");return}const{collection:le,query:ie,where:ae,getDocs:Ae}=await ei(async()=>{const{collection:Le,query:Te,where:de,getDocs:Ce}=await Promise.resolve().then(()=>Nb);return{collection:Le,query:Te,where:de,getDocs:Ce}},void 0),{db:ke}=await ei(async()=>{const{db:Le}=await Promise.resolve().then(()=>QR);return{db:Le}},void 0),re=ie(le(ke,"planificaciones"),ae("userId","==",t)),Re=await Ae(re);if(console.log(` Documentos en Firestore: ${Re.docs.length}`),Re.docs.length>0){console.log(" Primer documento:",Re.docs[0].data());const Le=Re.docs.filter(de=>de.data().tipo==="Unidad");console.log(` Documentos de tipo Unidad: ${Le.length}`);const Te=Le.filter(de=>Array.isArray(de.data().detallesLeccion)&&de.data().detallesLeccion!==void 0);if(console.log(` Unidades con detallesLeccion vlidos: ${Te.length}`),Le.length>Te.length){console.log(` Intentando corregir ${Le.length-Te.length} unidades invlidas...`);for(const de of Le){const Ce=de.data();if(!Array.isArray(Ce.detallesLeccion)||Ce.detallesLeccion===void 0)try{console.log(` Corrigiendo documento ${de.id}...`);const{doc:me,updateDoc:ye}=await ei(async()=>{const{doc:oe,updateDoc:fe}=await Promise.resolve().then(()=>Nb);return{doc:oe,updateDoc:fe}},void 0);await ye(me(ke,"planificaciones",de.id),{detallesLeccion:[]}),console.log(` Documento ${de.id} corregido con xito`)}catch(me){console.error(` Error al corregir documento ${de.id}:`,me)}}}}console.log(" Diagnstico de planificaciones - Finalizado")}catch(le){console.error(" Error en diagnstico de planificaciones:",le)}})(),!l){console.log(` Verificando ${a.length} planificaciones recibidas...`),console.log(" Tipos de planificaciones:",a.map(ie=>ie.tipo));const le=a.filter(ie=>ie.tipo==="Unidad"&&(!Array.isArray(ie.detallesLeccion)||ie.detallesLeccion===void 0));le.length>0&&(console.warn(` Encontradas ${le.length} unidades con formato invlido`),le.forEach(async ie=>{try{await s(ie.id,{...ie,detallesLeccion:[]}),console.log(` Reparada planificacin ${ie.id}`)}catch(ae){console.error(` Error al reparar planificacin ${ie.id}:`,ae)}}))}},[t,a,l,s]),e?r?i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx(rre,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificacin Docente"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:i.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>j("unidad"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(wi,{className:"w-4 h-4"}),i.jsx("span",{children:"Unidad"})]}),i.jsxs("button",{onClick:()=>j("clase"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(UEe,{className:"w-4 h-4"}),i.jsx("span",{children:"Clase"})]}),i.jsxs("button",{onClick:()=>j("calendario"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(ul,{className:"w-4 h-4"}),i.jsx("span",{children:"Actividades Calendario"})]}),i.jsxs("button",{onClick:()=>j("materiales"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="materiales"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(zO,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Materiales"})]})]})}),w==="unidad"&&W(),w==="clase"&&X(),w==="calendario"&&i.jsx(fXe,{userId:t}),w==="materiales"&&i.jsx(sXe,{userId:t,planificaciones:a}),T&&i.jsx(cXe,{lesson:T.lessonData,onClose:()=>C(null),onSave:V,isLoading:g})]}):i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-8 max-w-2xl mx-auto my-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-amber-800 dark:text-amber-300 mb-4",children:"Error de identificacin de usuario"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-md p-4 mb-4 overflow-auto max-h-40",children:i.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:JSON.stringify(e,null,2)})}),i.jsx("p",{className:"text-amber-700 dark:text-amber-400 mb-4",children:"No se pudo determinar su identificador de usuario para cargar las planificaciones. Este problema puede deberse a:"}),i.jsxs("ul",{className:"list-disc pl-5 text-amber-700 dark:text-amber-400 mb-6 space-y-2",children:[i.jsx("li",{children:"La sesin no se ha inicializado correctamente"}),i.jsx("li",{children:"Su cuenta no tiene asignado un ID vlido"}),i.jsx("li",{children:"Hay un problema en la sincronizacin con la base de datos"})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-600 hover:bg-amber-700 text-white py-2 px-6 rounded-md transition-colors",children:"Recargar aplicacin"})})]}):i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No se recibieron datos de usuario"})]})})},A4="events",hXe=async()=>{try{const e=Dt(ht(vr,A4),Yt("date","asc"));return(await Ir(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},mXe=async e=>{try{return{id:(await Zr(ht(vr,A4),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},pXe=async(e,t)=>{try{const r=Jt(vr,A4,e);await Bo(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},gXe=async e=>{try{const t=Jt(vr,A4,e);await xn(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},xXe=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],aW={[sa.EVALUACION]:i.jsx(wi,{className:"h-4 w-4"}),[sa.ACTO]:i.jsx(ZNe,{className:"h-4 w-4"}),[sa.ACTIVIDAD_FOCALIZADA]:i.jsx(Cb,{className:"h-4 w-4"}),[sa.SALIDA_PEDAGOGICA]:i.jsx(xEe,{className:"h-4 w-4"})},vXe=e=>{switch(e.type){case sa.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case sa.ACTO:return`Acto: ${e.ubicacion}`;case sa.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case sa.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},bXe=({isOpen:e,onClose:t,onSave:r,onDelete:a,event:n,date:s,isLoading:o})=>{const[l,c]=N.useState({});N.useEffect(()=>{c(n||{type:sa.EVALUACION,subtype:Xp.PRUEBA_PARCIAL,asignatura:En[0],curso:Nn[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[n,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:v,value:y}=x.target;c(w=>({...w,[v]:y}))},f=x=>{c(v=>{if(v.type===sa.SALIDA_PEDAGOGICA){const y=v.cursos||[],w=y.includes(x)?y.filter(j=>j!==x):[...y,x];return{...v,cursos:w.sort()}}return v})},h=x=>{var y;x.preventDefault();let v;switch(l.type){case sa.EVALUACION:{const w={date:s,type:sa.EVALUACION,subtype:l.subtype,asignatura:l.asignatura,curso:l.curso,contenidos:l.contenidos};(l.subtype===Xp.RUBRICA||l.subtype===Xp.PAUTA_COTEJO)&&((y=l.enlace)!=null&&y.trim())&&(w.enlace=l.enlace.trim()),v=w;break}case sa.ACTO:v={date:s,type:sa.ACTO,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case sa.ACTIVIDAD_FOCALIZADA:v={date:s,type:sa.ACTIVIDAD_FOCALIZADA,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case sa.SALIDA_PEDAGOGICA:v={date:s,type:sa.SALIDA_PEDAGOGICA,responsable:l.responsable,ubicacion:l.ubicacion,cursos:l.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(l.type){case sa.EVALUACION:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),i.jsx("select",{id:"subtype",name:"subtype",value:l.subtype,onChange:d,required:!0,className:u,children:ewe.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{id:"asignatura",name:"asignatura",value:l.asignatura,onChange:d,required:!0,className:u,children:En.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{id:"curso",name:"curso",value:l.curso,onChange:d,required:!0,className:u,children:Nn.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),i.jsx("textarea",{id:"contenidos",name:"contenidos",value:l.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(l.subtype===Xp.RUBRICA||l.subtype===Xp.PAUTA_COTEJO)&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),i.jsx("input",{id:"enlace",name:"enlace",type:"url",value:l.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case sa.ACTO:case sa.ACTIVIDAD_FOCALIZADA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),i.jsx("input",{id:"responsables",name:"responsables",type:"text",value:l.responsables||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin"}),i.jsxs("div",{className:"relative",children:[i.jsx(Kj,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),i.jsxs("div",{className:"relative",children:[i.jsx(Wc,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"horario",name:"horario",type:"text",value:l.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case sa.SALIDA_PEDAGOGICA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),i.jsx("input",{id:"responsable",name:"responsable",type:"text",value:l.responsable||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin/Destino"}),i.jsxs("div",{className:"relative",children:[i.jsx(Kj,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("fieldset",{children:[i.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),i.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Nn.map(x=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:(l.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),i.jsx("span",{children:x})]},x))})]})]});default:return null}};return i.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:i.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:i.jsxs("form",{onSubmit:h,children:[i.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:n?"Editar Evento":"Agregar Evento"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),i.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:i.jsx(Xd,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),i.jsx("select",{id:"type",name:"type",value:l.type,onChange:d,className:u,children:Object.values(sa).map(x=>i.jsx("option",{value:x,children:x},x))})]}),g()]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[i.jsx("div",{children:n&&a&&i.jsxs("button",{type:"button",onClick:a,disabled:o,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[i.jsx(sn,{className:"h-4 w-4"}),o?"Eliminando...":"Eliminar"]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{type:"button",onClick:t,disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[i.jsx(Xd,{className:"h-4 w-4"}),"Cancelar"]}),i.jsxs("button",{type:"submit",disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[i.jsx(Fl,{className:"h-4 w-4"}),o?"Guardando...":"Guardar"]})]})]})]})})})},yXe=({profile:e})=>{const[t,r]=N.useState(new Date),[a,n]=N.useState([]),[s,o]=N.useState(!1),[l,c]=N.useState(null),[u,d]=N.useState(!1),[f,h]=N.useState(Object.values(sa)),[m,g]=N.useState(!1),[x,v]=N.useState(null),[y,w]=N.useState(null),j=N.useCallback(async()=>{o(!0);try{const P=await hXe();n(P),c(null)}catch(P){console.error("Error al cargar eventos desde Firestore",P),c("No se pudieron cargar los eventos desde la nube.")}finally{o(!1)}},[]);N.useEffect(()=>{j()},[j]);const O=N.useMemo(()=>{const P=t.getFullYear(),k=t.getMonth(),M=new Date(P,k,1).getDay(),U=new Date(P,k+1,0).getDate(),z=[];let Q=1;for(let q=0;q<6;q++){const V=[];for(let Y=0;Y<7;Y++)q===0&&Y<M||Q>U?V.push(null):(V.push(new Date(P,k,Q)),Q++);if(z.push(V),Q>U)break}return z},[t]),B=P=>{h(k=>k.includes(P)?k.filter(M=>M!==P):[...k,P])},T=()=>{f.length===Object.values(sa).length?h([]):h(Object.values(sa))},C=P=>{e!==zt.ESTUDIANTE&&(v(P.toISOString().split("T")[0]),w(null),g(!0))},_=(P,k)=>{k.stopPropagation(),e!==zt.ESTUDIANTE&&(v(P.date),w(P),g(!0))},S=async P=>{d(!0);try{y?await pXe(y.id,P):await mXe(P),await j(),g(!1)}catch(k){console.error("Error al guardar evento:",k);const M=k instanceof Error?k.message:"Error desconocido";c(`Error al guardar el evento: ${M}`)}finally{d(!1)}},L=async()=>{if(y){d(!0);try{await gXe(y.id),await j(),g(!1)}catch(P){console.error("Error al eliminar evento:",P);const k=P instanceof Error?P.message:"Error desconocido";c(`No se pudo eliminar el evento: ${k}`)}finally{d(!1)}}};return i.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[i.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),i.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Acadmico"}),i.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&i.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando"})})]}),l&&i.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:l}),!s&&a.length===0&&i.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[i.jsx(LNe,{className:"h-5 w-5 mt-0.5"}),i.jsx("p",{children:"No hay eventos registrados en la nube."})]}),i.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[i.jsx(EN,{className:"h-4 w-4"}),i.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[i.jsx("button",{onClick:T,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(sa).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(sa).map(P=>i.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(P)?`shadow-sm ${Wv[P].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[i.jsx("input",{type:"checkbox",checked:f.includes(P),onChange:()=>B(P),className:"hidden"}),i.jsx("span",{className:"shrink-0",children:aW[P]}),i.jsx("span",{children:Wv[P].label})]},P))]})]}),i.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[i.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(Nw,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(PR,{className:"h-5 w-5"})})]}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),i.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),i.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:xXe.map(P=>i.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:P},P))}),i.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:O.flat().map((P,k)=>{const M=P&&P.toDateString()===new Date().toDateString(),U=P==null?void 0:P.toISOString().split("T")[0],z=U?a.filter(Q=>Q.date===U&&f.includes(Q.type)):[];return i.jsx("div",{onClick:()=>P&&C(P),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${P?e!==zt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:P&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`self-end text-sm font-semibold ${M?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:P.getDate()}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:z.map(Q=>i.jsxs("div",{onClick:q=>_(Q,q),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Wv[Q.type].color}`,children:[i.jsx("span",{className:"shrink-0",children:aW[Q.type]}),i.jsx("span",{className:"truncate",children:vXe(Q)})]},Q.id))}),e!==zt.ESTUDIANTE&&i.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:i.jsx(So,{className:"h-4 w-4"})})]})},k)})})]}),m&&i.jsx(bXe,{isOpen:m,onClose:()=>g(!1),onSave:S,onDelete:L,event:y,date:x,isLoading:u})]})},h4="anuncios",wXe=async()=>{try{const e=Dt(ht(vr,h4),Yt("fechaPublicacion","desc"));return(await Ir(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},NXe=async e=>{try{return{id:(await Zr(ht(vr,h4),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},EXe=async(e,t)=>{try{const r=Jt(vr,h4,e);await Bo(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},CXe=async e=>{try{const t=Jt(vr,h4,e);await xn(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},nW=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],jXe=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=N.useState({tipo:"Todos",cursos:[]}),f=N.useCallback(async()=>{n(!0);try{const C=await wXe();r(C),o(null)}catch(C){console.error("Error al cargar anuncios desde Firestore",C),o("No se pudieron cargar los anuncios desde la nube.")}finally{n(!1)}},[]);N.useEffect(()=>{f()},[f]);const h=C=>{const{name:_,value:S}=C.target;c(L=>({...L,[_]:S}))},m=C=>{d({tipo:C,cursos:C==="Cursos"?[]:void 0})},g=C=>{d(_=>{var L;if(_.tipo!=="Cursos")return _;const S=(L=_.cursos)!=null&&L.includes(C)?_.cursos.filter(P=>P!==C):[..._.cursos||[],C];return{..._,cursos:S}})},x=async C=>{if(C.preventDefault(),!l.titulo||!l.mensaje){alert("Ttulo y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const _={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...l};await NXe(_),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(_){console.error("Error al crear anuncio:",_),o("Error al publicar el anuncio en la nube.")}},v=async C=>{if(window.confirm("Est seguro de que desea eliminar este anuncio?"))try{await CXe(C),await f()}catch(_){console.error("Error al eliminar anuncio:",_),o("No se pudo eliminar el anuncio en la nube.")}},y=async C=>{try{const _=t.find(S=>S.id===C);_&&(await EXe(C,{destacado:!_.destacado}),await f())}catch(_){console.error("Error al actualizar anuncio:",_),o("No se pudo actualizar el estado del anuncio en la nube.")}},w=N.useMemo(()=>[...t].sort((C,_)=>C.destacado&&!_.destacado?-1:!C.destacado&&_.destacado?1:new Date(_.fechaPublicacion).getTime()-new Date(C.fechaPublicacion).getTime()),[t]),j=N.useMemo(()=>{const C=e.profile,_=e.curso;return w.filter(S=>{if(C===zt.SUBDIRECCION)return!0;if(!S.destinatarios)return C!==zt.ESTUDIANTE;const{tipo:L,cursos:P}=S.destinatarios;return L==="Todos"||L==="Profesores"&&C===zt.PROFESORADO||L==="Coordinacin TP"&&C===zt.COORDINACION_TP?!0:L==="Cursos"?C===zt.ESTUDIANTE?P==null?void 0:P.includes(_||""):!0:!1})},[w,e]),O=C=>e.profile===zt.ESTUDIANTE?!1:e.profile===zt.SUBDIRECCION||e.profile===C.profileCreador,B=()=>e.profile===zt.SUBDIRECCION||e.profile===zt.PROFESORADO,T="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),a&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==zt.ESTUDIANTE?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ttulo"}),i.jsx("input",{type:"text",name:"titulo",value:l.titulo,onChange:h,required:!0,className:T})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),i.jsx("textarea",{name:"mensaje",value:l.mensaje,onChange:h,required:!0,rows:4,className:T})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),i.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinacin TP"].map(C=>i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"destinatarioTipo",value:C,checked:u.tipo===C,onChange:()=>m(C),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:C.replace("Coordinacin TP","Coord. TP")})]},C))})]}),u.tipo==="Cursos"&&i.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Nn.map(C=>{var _;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(_=u.cursos)==null?void 0:_.includes(C),onChange:()=>g(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:C})]},C)})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),i.jsx("input",{type:"url",name:"adjunto",value:l.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:T})]}),i.jsx("div",{className:"pt-2 text-right",children:i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este mdulo es de solo lectura."})]}),!a&&j.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!a&&j.length>0&&j.map((C,_)=>{const S=nW[_%nW.length];return i.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${S.bg} ${S.rotate}`,children:[C.destacado&&i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:i.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:""})}),i.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:C.titulo}),i.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:C.mensaje}),C.adjunto&&i.jsx("div",{className:"font-sans text-sm mb-4",children:i.jsxs("a",{href:C.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),i.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:C.autor}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(C.fechaPublicacion).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"flex items-center",children:[B()&&i.jsx("button",{onClick:()=>y(C.id),title:C.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("span",{className:`text-xl transition-opacity ${C.destacado?"opacity-100":"opacity-30"}`,children:""})}),O(C)&&i.jsx("button",{onClick:()=>v(C.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},C.id)})})]})},Nce="api_logs",kXe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:ir.fromDate(new Date)};await Zr(ht(st,Nce),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},_Xe=e=>{const t=Dt(ht(st,Nce),Yt("timestamp","desc"));return nr(t,a=>{const n=a.docs.map(s=>{var l,c;const o=s.data();return{id:s.id,...o,timestamp:((c=(l=o.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l).toISOString())||o.timestamp}});e(n)},a=>{console.error("Error al suscribirse a los logs de API:",a),e([])})},m4=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es invlido o no est en sesin.");return}kXe(e,t)},UM="actas_de_reunion",SXe=e=>{var r,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion}},BXe=e=>{const t=Dt(ht(st,UM),Yt("fechaCreacion","desc"));return nr(t,a=>{const n=a.docs.map(s=>SXe(s));e(n)},a=>{console.error("Error al suscribirse a las actas:",a),e([])})},TXe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date(e.fechaCreacion))};return(await Zr(ht(st,UM),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},IXe=async e=>{try{const t=Jt(st,UM,e);await xn(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},Ece=window.SpeechRecognition||window.webkitSpeechRecognition,sW=!!Ece,OXe=({isListening:e})=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),FXe=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState(null),[s,o]=N.useState({tipoReunion:BB[0],asistentes:"",textoReunion:""}),[l,c]=N.useState(!1),[u,d]=N.useState(!1),[f,h]=N.useState(!0),[m,g]=N.useState(null),x=N.useRef(null);N.useEffect(()=>{h(!0);const C=BXe(_=>{r(_),!a&&_.length>0&&n(_[0]),h(!1)});return()=>C()},[a]);const v=C=>{const{name:_,value:S}=C.target;o(L=>({...L,[_]:S}))},y=N.useCallback(()=>{var C;if(!sW){g("El reconocimiento de voz no es compatible con este navegador.");return}l?(C=x.current)==null||C.stop():(x.current=new Ece,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=_=>{let S="";for(let L=_.resultIndex;L<_.results.length;++L)_.results[L].isFinal&&(S+=_.results[L][0].transcript+". ");o(L=>({...L,textoReunion:L.textoReunion+S}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=_=>{console.error("Speech recognition error",_.error),g(`Error de reconocimiento: ${_.error}`),c(!1)},x.current.start())},[l]),w=async C=>{C.preventDefault();const{tipoReunion:_,asistentes:S,textoReunion:L}=s;if(!_||!S.trim()||!L.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{m4("Generador de Actas");const P="",M=new globalThis.GoogleGenerativeAI(P).getGenerativeModel({model:"gemini-pro-latest"}),U=`
                Analiza el siguiente texto de un acta de reunin y extrae la informacin clave.
                El texto es una transcripcin de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones especficas tomadas.
                - Lista cualquier plazo o fecha lmite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${L}"
                
                Asistentes a la reunin para referencia de nombres: ${S}
            `,V=(await(await M.generateContent(U)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(V),K={fechaCreacion:new Date().toISOString(),...s,...Y},J=await TXe(K,e);o({tipoReunion:BB[0],asistentes:"",textoReunion:""})}catch(P){console.error("Error al analizar acta con IA:",P),g("Ocurri un error al procesar el acta con la IA. Por favor, revise el texto e intntelo de nuevo.")}finally{d(!1)}},j=async C=>{if(window.confirm("Est seguro de que desea eliminar esta acta?"))try{await IXe(C),(a==null?void 0:a.id)===C&&n(t.length>1?t[1]:null)}catch(_){console.error("Error deleting acta:",_),alert("No se pudo eliminar el acta.")}},O=C=>{n(C)},B=C=>C.temas||C.acuerdos||C.plazos||C.responsables?i.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Anlisis con IA"}),C.temas&&C.temas.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.temas.map((S,L)=>i.jsx("li",{children:S},L))})]}),C.acuerdos&&C.acuerdos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.acuerdos.map((S,L)=>i.jsx("li",{children:S},L))})]}),C.plazos&&C.plazos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.plazos.map((S,L)=>i.jsx("li",{children:S},L))})]}),C.responsables&&C.responsables.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.responsables.map((S,L)=>i.jsx("li",{children:S},L))})]})]}):null,T="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?i.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[i.jsxs("div",{className:"md:col-span-1 space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),i.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",i.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es slo una herramienta para agilizar redaccin."]})})]})}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunin"}),i.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:v,required:!0,className:T,children:BB.map(C=>i.jsx("option",{value:C,children:C},C))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),i.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:v,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:T})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunin"}),i.jsxs("div",{className:"relative",children:[i.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:v,required:!0,rows:6,placeholder:"Escriba o use el micrfono para dictar...",className:T}),sW&&i.jsx("button",{type:"button",onClick:y,title:l?"Detener grabacin":"Iniciar grabacin",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${l?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:i.jsx(OXe,{isListening:l})})]})]}),m&&i.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),i.jsx("div",{className:"pt-2 text-right",children:i.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),i.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(C=>i.jsxs("button",{onClick:()=>O(C),className:`w-full text-left p-3 rounded-lg border transition-colors ${(a==null?void 0:a.id)===C.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.tipoReunion}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(C.fechaCreacion).toLocaleDateString("es-CL")})]},C.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),i.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:a?i.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunin: ${a.tipoReunion}`}),i.jsx("button",{onClick:()=>j(a.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i.jsx("strong",{children:"Fecha:"})," ",new Date(a.fechaCreacion).toLocaleString("es-CL")]}),i.jsx("h2",{children:"Asistentes"}),i.jsx("ul",{className:"list-disc pl-5",children:String(a.asistentes||"").split(",").map((C,_)=>C.trim()&&i.jsx("li",{children:C.trim()},_))}),B(a),i.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripcin Original"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:i.jsx("p",{children:a.textoReunion})})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[i.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aqu, o cree una nueva usando el formulario."})]})})]})},QM="evaluaciones_pruebas",HM="rubricas_estaticas",zM="rubricas_interactivas",DXe="usuarios",p4=e=>{var n,s,o;const t=e.data()||{},r=t.fechaCreacion,a=((o=(s=(n=r==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:s.toISOString)==null?void 0:o.call(s))??(typeof r=="string"?r:void 0);return{id:e.id,...t,fechaCreacion:a}},PXe=e=>{const t=Dt(ht(st,QM),Yt("fechaCreacion","desc"));return nr(t,a=>e(a.docs.map(n=>p4(n))),a=>{console.error("[subscribeToPruebas]",a),e([])})},RXe=async e=>{const{id:t,fechaCreacion:r,...a}=e,n=Jt(st,QM,t),s={...a,fechaCreacion:r?ir.fromDate(new Date(r)):Ga()};await ai(n,s,{merge:!0})},LXe=async e=>{await xn(Jt(st,QM,e))},MXe=e=>{const t=Dt(ht(st,HM),Yt("fechaCreacion","desc"));return nr(t,r=>e(r.docs.map(a=>p4(a))),r=>{console.error("[subscribeToRubricasEstaticas]",r),e([])})},rD=async e=>{const{id:t,fechaCreacion:r,...a}=e,n=Jt(st,HM,t),s={...a,fechaCreacion:r?ir.fromDate(new Date(r)):Ga()};await ai(n,s,{merge:!0})},UXe=async e=>{await xn(Jt(st,HM,e))},QXe=e=>{const t=Dt(ht(st,zM),Yt("curso","asc"));return nr(t,r=>e(r.docs.map(a=>p4(a))),r=>{console.error("[subscribeToRubricasInteractivas]",r),e([])})},HXe=async e=>{const t={...e,fechaCreacion:Ga()};return(await Zr(ht(st,zM),t)).id},zXe=async(e,t)=>{const r=Jt(st,zM,e);await ai(r,t,{merge:!0})},VXe=e=>{const t=Dt(ht(st,DXe),Yt("nombreCompleto","asc"));return nr(t,r=>e(r.docs.map(a=>p4(a))),r=>{console.error("[subscribeToAllUsers]",r),e([])})},VM=()=>{const[e,t]=N.useState(null),[r,a]=N.useState(!0);return N.useEffect(()=>{const n=BZ(Cw,async s=>{if(console.log("[useAuth] FirebaseUser:",s),s&&s.email)try{const o=await qte(s.email);console.log("[useAuth] Perfil Firestore:",o),t(o?{...o,uid:s.uid}:null)}catch(o){console.error("Error al obtener el perfil del usuario:",o),t(null)}else t(null);a(!1)});return()=>n()},[]),{currentUser:e,loading:r}};function gn(e){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gn(e)}var ll=Uint8Array,tu=Uint16Array,$M=Int32Array,g4=new ll([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),x4=new ll([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aD=new ll([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cce=function(e,t){for(var r=new tu(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var n=new $M(r[30]),a=1;a<30;++a)for(var s=r[a];s<r[a+1];++s)n[s]=s-r[a]<<5|a;return{b:r,r:n}},jce=Cce(g4,2),kce=jce.b,nD=jce.r;kce[28]=258,nD[258]=28;var _ce=Cce(x4,0),$Xe=_ce.b,iW=_ce.r,sD=new tu(32768);for(var $n=0;$n<32768;++$n){var J0=($n&43690)>>1|($n&21845)<<1;J0=(J0&52428)>>2|(J0&13107)<<2,J0=(J0&61680)>>4|(J0&3855)<<4,sD[$n]=((J0&65280)>>8|(J0&255)<<8)>>1}var vA=function(e,t,r){for(var a=e.length,n=0,s=new tu(t);n<a;++n)e[n]&&++s[e[n]-1];var o=new tu(t);for(n=1;n<t;++n)o[n]=o[n-1]+s[n-1]<<1;var l;if(r){l=new tu(1<<t);var c=15-t;for(n=0;n<a;++n)if(e[n])for(var u=n<<4|e[n],d=t-e[n],f=o[e[n]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[sD[f]>>c]=u}else for(l=new tu(a),n=0;n<a;++n)e[n]&&(l[n]=sD[o[e[n]-1]++]>>15-e[n]);return l},ep=new ll(288);for(var $n=0;$n<144;++$n)ep[$n]=8;for(var $n=144;$n<256;++$n)ep[$n]=9;for(var $n=256;$n<280;++$n)ep[$n]=7;for(var $n=280;$n<288;++$n)ep[$n]=8;var eN=new ll(32);for(var $n=0;$n<32;++$n)eN[$n]=5;var GXe=vA(ep,9,0),qXe=vA(ep,9,1),KXe=vA(eN,5,0),WXe=vA(eN,5,1),GI=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Od=function(e,t,r){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&r},qI=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},GM=function(e){return(e+7)/8|0},Sce=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new ll(e.subarray(t,r))},XXe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pd=function(e,t,r){var a=new Error(t||XXe[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Pd),!r)throw a;return a},YXe=function(e,t,r,a){var n=e.length,s=0;if(!n||t.f&&!t.l)return r||new ll(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new ll(n*3));var u=function(ke){var re=r.length;if(ke>re){var Re=new ll(Math.max(re*2,ke));Re.set(r),r=Re}},d=t.f||0,f=t.p||0,h=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=n*8;do{if(!m){d=Od(e,f,1);var w=Od(e,f+1,3);if(f+=3,w)if(w==1)m=qXe,g=WXe,x=9,v=5;else if(w==2){var T=Od(e,f,31)+257,C=Od(e,f+10,15)+4,_=T+Od(e,f+5,31)+1;f+=14;for(var S=new ll(_),L=new ll(19),P=0;P<C;++P)L[aD[P]]=Od(e,f+P*3,7);f+=C*3;for(var k=GI(L),M=(1<<k)-1,U=vA(L,k,1),P=0;P<_;){var z=U[Od(e,f,M)];f+=z&15;var j=z>>4;if(j<16)S[P++]=j;else{var Q=0,q=0;for(j==16?(q=3+Od(e,f,3),f+=2,Q=S[P-1]):j==17?(q=3+Od(e,f,7),f+=3):j==18&&(q=11+Od(e,f,127),f+=7);q--;)S[P++]=Q}}var V=S.subarray(0,T),Y=S.subarray(T);x=GI(V),v=GI(Y),m=vA(V,x,1),g=vA(Y,v,1)}else Pd(1);else{var j=GM(f)+4,O=e[j-4]|e[j-3]<<8,B=j+O;if(B>n){c&&Pd(0);break}l&&u(h+O),r.set(e.subarray(j,B),h),t.b=h+=O,t.p=f=B*8,t.f=d;continue}if(f>y){c&&Pd(0);break}}l&&u(h+131072);for(var K=(1<<x)-1,J=(1<<v)-1,R=f;;R=f){var Q=m[qI(e,f)&K],F=Q>>4;if(f+=Q&15,f>y){c&&Pd(0);break}if(Q||Pd(2),F<256)r[h++]=F;else if(F==256){R=f,m=null;break}else{var W=F-254;if(F>264){var P=F-257,X=g4[P];W=Od(e,f,(1<<X)-1)+kce[P],f+=X}var ne=g[qI(e,f)&J],le=ne>>4;ne||Pd(3),f+=ne&15;var Y=$Xe[le];if(le>3){var X=x4[le];Y+=qI(e,f)&(1<<X)-1,f+=X}if(f>y){c&&Pd(0);break}l&&u(h+131072);var ie=h+W;if(h<Y){var ae=s-Y,Ae=Math.min(Y,ie);for(ae+h<0&&Pd(3);h<Ae;++h)r[h]=a[ae+h]}for(;h<ie;++h)r[h]=r[h-Y]}}t.l=m,t.p=R,t.b=h,t.f=d,m&&(d=1,t.m=x,t.d=g,t.n=v)}while(!d);return h!=r.length&&o?Sce(r,0,h):r.subarray(0,h)},sh=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},My=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},KI=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var n=r.length,s=r.slice();if(!n)return{t:Tce,l:0};if(n==1){var o=new ll(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(B,T){return B.f-T.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=n-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,a=1;a<n;++a)s[a].s>h&&(h=s[a].s);var m=new tu(h+1),g=iD(r[d-1],m,0);if(g>t){var a=0,x=0,v=g-t,y=1<<v;for(s.sort(function(T,C){return m[C.s]-m[T.s]||T.f-C.f});a<n;++a){var w=s[a].s;if(m[w]>t)x+=y-(1<<g-m[w]),m[w]=t;else break}for(x>>=v;x>0;){var j=s[a].s;m[j]<t?x-=1<<t-m[j]++-1:++a}for(;a>=0&&x;--a){var O=s[a].s;m[O]==t&&(--m[O],++x)}g=t}return{t:new ll(m),l:g}},iD=function(e,t,r){return e.s==-1?Math.max(iD(e.l,t,r+1),iD(e.r,t,r+1)):t[e.s]=r},oW=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new tu(++t),a=0,n=e[0],s=1,o=function(c){r[a++]=c},l=1;l<=t;++l)if(e[l]==n&&l!=t)++s;else{if(!n&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(n),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(n);s=1,n=e[l]}return{c:r.subarray(0,a),n:t}},Uy=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},Bce=function(e,t,r){var a=r.length,n=GM(t+2);e[n]=a&255,e[n+1]=a>>8,e[n+2]=e[n]^255,e[n+3]=e[n+1]^255;for(var s=0;s<a;++s)e[n+s+4]=r[s];return(n+4+a)*8},lW=function(e,t,r,a,n,s,o,l,c,u,d){sh(t,d++,r),++n[256];for(var f=KI(n,15),h=f.t,m=f.l,g=KI(s,15),x=g.t,v=g.l,y=oW(h),w=y.c,j=y.n,O=oW(x),B=O.c,T=O.n,C=new tu(19),_=0;_<w.length;++_)++C[w[_]&31];for(var _=0;_<B.length;++_)++C[B[_]&31];for(var S=KI(C,7),L=S.t,P=S.l,k=19;k>4&&!L[aD[k-1]];--k);var M=u+5<<3,U=Uy(n,ep)+Uy(s,eN)+o,z=Uy(n,h)+Uy(s,x)+o+14+3*k+Uy(C,L)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&M<=U&&M<=z)return Bce(t,d,e.subarray(c,c+u));var Q,q,V,Y;if(sh(t,d,1+(z<U)),d+=2,z<U){Q=vA(h,m,0),q=h,V=vA(x,v,0),Y=x;var K=vA(L,P,0);sh(t,d,j-257),sh(t,d+5,T-1),sh(t,d+10,k-4),d+=14;for(var _=0;_<k;++_)sh(t,d+3*_,L[aD[_]]);d+=3*k;for(var J=[w,B],R=0;R<2;++R)for(var F=J[R],_=0;_<F.length;++_){var W=F[_]&31;sh(t,d,K[W]),d+=L[W],W>15&&(sh(t,d,F[_]>>5&127),d+=F[_]>>12)}}else Q=GXe,q=ep,V=KXe,Y=eN;for(var _=0;_<l;++_){var X=a[_];if(X>255){var W=X>>18&31;My(t,d,Q[W+257]),d+=q[W+257],W>7&&(sh(t,d,X>>23&31),d+=g4[W]);var ne=X&31;My(t,d,V[ne]),d+=Y[ne],ne>3&&(My(t,d,X>>5&8191),d+=x4[ne])}else My(t,d,Q[X]),d+=q[X]}return My(t,d,Q[256]),d+q[256]},JXe=new $M([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Tce=new ll(0),ZXe=function(e,t,r,a,n,s){var o=s.z||e.length,l=new ll(a+o+5*(1+Math.ceil(o/7e3))+n),c=l.subarray(a,l.length-n),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=JXe[t-1],h=f>>13,m=f&8191,g=(1<<r)-1,x=s.p||new tu(32768),v=s.h||new tu(g+1),y=Math.ceil(r/3),w=2*y,j=function(Le){return(e[Le]^e[Le+1]<<y^e[Le+2]<<w)&g},O=new $M(25e3),B=new tu(288),T=new tu(32),C=0,_=0,S=s.i||0,L=0,P=s.w||0,k=0;S+2<o;++S){var M=j(S),U=S&32767,z=v[M];if(x[U]=z,v[M]=U,P<=S){var Q=o-S;if((C>7e3||L>24576)&&(Q>423||!u)){d=lW(e,c,0,O,B,T,_,L,k,S-k,d),L=C=_=0,k=S;for(var q=0;q<286;++q)B[q]=0;for(var q=0;q<30;++q)T[q]=0}var V=2,Y=0,K=m,J=U-z&32767;if(Q>2&&M==j(S-J))for(var R=Math.min(h,Q)-1,F=Math.min(32767,S),W=Math.min(258,Q);J<=F&&--K&&U!=z;){if(e[S+V]==e[S+V-J]){for(var X=0;X<W&&e[S+X]==e[S+X-J];++X);if(X>V){if(V=X,Y=J,X>R)break;for(var ne=Math.min(J,X-2),le=0,q=0;q<ne;++q){var ie=S-J+q&32767,ae=x[ie],Ae=ie-ae&32767;Ae>le&&(le=Ae,z=ie)}}}U=z,z=x[U],J+=U-z&32767}if(Y){O[L++]=268435456|nD[V]<<18|iW[Y];var ke=nD[V]&31,re=iW[Y]&31;_+=g4[ke]+x4[re],++B[257+ke],++T[re],P=S+V,++C}else O[L++]=e[S],++B[e[S]]}}for(S=Math.max(S,P);S<o;++S)O[L++]=e[S],++B[e[S]];d=lW(e,c,u,O,B,T,_,L,k,S-k,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=v,s.p=x,s.i=S,s.w=P)}else{for(var S=s.w||0;S<o+u;S+=65535){var Re=S+65535;Re>=o&&(c[d/8|0]=u,Re=o),d=Bce(c,d+1,e.subarray(S,Re))}s.i=o}return Sce(l,0,a+GM(d)+n)},Ice=function(){var e=1,t=0;return{p:function(r){for(var a=e,n=t,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)n+=a+=r[o];a=(a&65535)+15*(a>>16),n=(n&65535)+15*(n>>16)}e=a,t=n},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},eYe=function(e,t,r,a,n){if(!n&&(n={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new ll(s.length+e.length);o.set(s),o.set(e,s.length),e=o,n.w=s.length}return ZXe(e,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,n)},Oce=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},tYe=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=Ice();n.p(t.dictionary),Oce(e,2,n.d())}},rYe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Pd(6,"invalid zlib data"),(e[1]>>5&1)==1&&Pd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function oD(e,t){t||(t={});var r=Ice();r.p(e);var a=eYe(e,t,t.dictionary?6:2,4);return tYe(a,t),Oce(a,a.length-4,r.d()),a}function aYe(e,t){return YXe(e.subarray(rYe(e),-4),{i:2},t,t)}var nYe=typeof TextDecoder<"u"&&new TextDecoder,sYe=0;try{nYe.decode(Tce,{stream:!0}),sYe=1}catch{}var Mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function WI(){Mr.console&&typeof Mr.console.log=="function"&&Mr.console.log.apply(Mr.console,arguments)}var Bn={log:WI,warn:function(e){Mr.console&&(typeof Mr.console.warn=="function"?Mr.console.warn.apply(Mr.console,arguments):WI.call(null,arguments))},error:function(e){Mr.console&&(typeof Mr.console.error=="function"?Mr.console.error.apply(Mr.console,arguments):WI(e))}};function XI(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){Kp(a.response,t,r)},a.onerror=function(){Bn.error("could not download file")},a.send()}function cW(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function qC(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ew,lD,Kp=Mr.saveAs||((typeof window>"u"?"undefined":gn(window))!=="object"||window!==Mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=Mr.URL||Mr.webkitURL,n=document.createElement("a");t=t||e.name||"download",n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?cW(n.href)?XI(e,t,r):qC(n,n.target="_blank"):qC(n)):(n.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(n.href)},4e4),setTimeout(function(){qC(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(cW(e))XI(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){qC(a)})}else navigator.msSaveOrOpenBlob(function(n,s){return s===void 0?s={autoBom:!1}:gn(s)!=="object"&&(Bn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return XI(e,t,r);var n=e.type==="application/octet-stream",s=/constructor/i.test(Mr.HTMLElement)||Mr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&s)&&(typeof FileReader>"u"?"undefined":gn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=d:location=d,a=null},l.readAsDataURL(e)}else{var c=Mr.URL||Mr.webkitURL,u=c.createObjectURL(e);a?a.location=u:location.href=u,a=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Fce(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var n=r[a].re,s=r[a].process,o=n.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function YI(e,t){var r=e[0],a=e[1],n=e[2],s=e[3];r=$o(r,a,n,s,t[0],7,-680876936),s=$o(s,r,a,n,t[1],12,-389564586),n=$o(n,s,r,a,t[2],17,606105819),a=$o(a,n,s,r,t[3],22,-1044525330),r=$o(r,a,n,s,t[4],7,-176418897),s=$o(s,r,a,n,t[5],12,1200080426),n=$o(n,s,r,a,t[6],17,-1473231341),a=$o(a,n,s,r,t[7],22,-45705983),r=$o(r,a,n,s,t[8],7,1770035416),s=$o(s,r,a,n,t[9],12,-1958414417),n=$o(n,s,r,a,t[10],17,-42063),a=$o(a,n,s,r,t[11],22,-1990404162),r=$o(r,a,n,s,t[12],7,1804603682),s=$o(s,r,a,n,t[13],12,-40341101),n=$o(n,s,r,a,t[14],17,-1502002290),r=Go(r,a=$o(a,n,s,r,t[15],22,1236535329),n,s,t[1],5,-165796510),s=Go(s,r,a,n,t[6],9,-1069501632),n=Go(n,s,r,a,t[11],14,643717713),a=Go(a,n,s,r,t[0],20,-373897302),r=Go(r,a,n,s,t[5],5,-701558691),s=Go(s,r,a,n,t[10],9,38016083),n=Go(n,s,r,a,t[15],14,-660478335),a=Go(a,n,s,r,t[4],20,-405537848),r=Go(r,a,n,s,t[9],5,568446438),s=Go(s,r,a,n,t[14],9,-1019803690),n=Go(n,s,r,a,t[3],14,-187363961),a=Go(a,n,s,r,t[8],20,1163531501),r=Go(r,a,n,s,t[13],5,-1444681467),s=Go(s,r,a,n,t[2],9,-51403784),n=Go(n,s,r,a,t[7],14,1735328473),r=qo(r,a=Go(a,n,s,r,t[12],20,-1926607734),n,s,t[5],4,-378558),s=qo(s,r,a,n,t[8],11,-2022574463),n=qo(n,s,r,a,t[11],16,1839030562),a=qo(a,n,s,r,t[14],23,-35309556),r=qo(r,a,n,s,t[1],4,-1530992060),s=qo(s,r,a,n,t[4],11,1272893353),n=qo(n,s,r,a,t[7],16,-155497632),a=qo(a,n,s,r,t[10],23,-1094730640),r=qo(r,a,n,s,t[13],4,681279174),s=qo(s,r,a,n,t[0],11,-358537222),n=qo(n,s,r,a,t[3],16,-722521979),a=qo(a,n,s,r,t[6],23,76029189),r=qo(r,a,n,s,t[9],4,-640364487),s=qo(s,r,a,n,t[12],11,-421815835),n=qo(n,s,r,a,t[15],16,530742520),r=Ko(r,a=qo(a,n,s,r,t[2],23,-995338651),n,s,t[0],6,-198630844),s=Ko(s,r,a,n,t[7],10,1126891415),n=Ko(n,s,r,a,t[14],15,-1416354905),a=Ko(a,n,s,r,t[5],21,-57434055),r=Ko(r,a,n,s,t[12],6,1700485571),s=Ko(s,r,a,n,t[3],10,-1894986606),n=Ko(n,s,r,a,t[10],15,-1051523),a=Ko(a,n,s,r,t[1],21,-2054922799),r=Ko(r,a,n,s,t[8],6,1873313359),s=Ko(s,r,a,n,t[15],10,-30611744),n=Ko(n,s,r,a,t[6],15,-1560198380),a=Ko(a,n,s,r,t[13],21,1309151649),r=Ko(r,a,n,s,t[4],6,-145523070),s=Ko(s,r,a,n,t[11],10,-1120210379),n=Ko(n,s,r,a,t[2],15,718787259),a=Ko(a,n,s,r,t[9],21,-343485551),e[0]=wm(r,e[0]),e[1]=wm(a,e[1]),e[2]=wm(n,e[2]),e[3]=wm(s,e[3])}function v4(e,t,r,a,n,s){return t=wm(wm(t,e),wm(a,s)),wm(t<<n|t>>>32-n,r)}function $o(e,t,r,a,n,s,o){return v4(t&r|~t&a,e,t,n,s,o)}function Go(e,t,r,a,n,s,o){return v4(t&a|r&~a,e,t,n,s,o)}function qo(e,t,r,a,n,s,o){return v4(t^r^a,e,t,n,s,o)}function Ko(e,t,r,a,n,s,o){return v4(r^(t|~a),e,t,n,s,o)}function Dce(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)YI(a,iYe(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(YI(a,n),t=0;t<16;t++)n[t]=0;return n[14]=8*r,YI(a,n),a}function iYe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}ew=Mr.atob.bind(Mr),lD=Mr.btoa.bind(Mr);var uW="0123456789abcdef".split("");function oYe(e){for(var t="",r=0;r<4;r++)t+=uW[e>>8*r+4&15]+uW[e>>8*r&15];return t}function lYe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function cD(e){return Dce(e).map(lYe).join("")}var cYe=function(e){for(var t=0;t<e.length;t++)e[t]=oYe(e[t]);return e.join("")}(Dce("hello"))!="5d41402abc4b2a76b9719d911017c592";function wm(e,t){if(cYe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function uD(e,t){var r,a,n,s;if(e!==r){for(var o=(n=e,s=1+(256/e.length>>0),new Array(s+1).join(n)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,a=l}else l=a;var f=t.length,h=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=d,o=l[(l[h]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var dW={print:4,modify:8,copy:16,"annot-forms":32};function jv(e,t,r,a){this.v=1,this.r=2;var n=192;e.forEach(function(l){if(dW.perm!==void 0)throw new Error("Invalid permission: "+l);n+=dW[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^n)),this.encryptionKey=cD(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=uD(this.encryptionKey,this.padding)}function kv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var n=e.charCodeAt(a);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?t+="#"+("0"+n.toString(16)).slice(-2):t+=e[a]}return t}function fW(e){if(gn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,n){if(n=n||!1,typeof r!="string"||typeof a!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[a,!!n],s},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),n=[];for(var s in t[r]){var o=t[r][s];try{o[0].apply(e,a)}catch(l){Mr.console&&Bn.error("jsPDF PubSub Error",l.message,l)}o[1]&&n.push(s)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Jk(e){if(!(this instanceof Jk))return new Jk(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Pce(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Zp(e,t,r,a,n){if(!(this instanceof Zp))return new Zp(e,t,r,a,n);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Pce.call(this,a,n)}function Rv(e,t,r,a,n){if(!(this instanceof Rv))return new Rv(e,t,r,a,n);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Pce.call(this,a,n)}function pr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],n=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;gn(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,n=e.format||n,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=fW;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(ee){g=ee};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(ee){return v[ee]};n=n||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},j=w.COMPAT;function O(){this.saveGraphicsState(),de(new Zt(gt,0,0,-gt,0,zi()*gt).toString()+" cm"),this.setFontSize(this.getFontSize()/gt),u="n",j=w.ADVANCED}function B(){this.restoreGraphicsState(),u="S",j=w.COMPAT}var T=m.__private__.combineFontStyleAndFontWeight=function(ee,ve){if(ee=="bold"&&ve=="normal"||ee=="bold"&&ve==400||ee=="normal"&&ve=="italic"||ee=="bold"&&ve=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ve&&(ee=ve==400||ve==="normal"?ee==="italic"?"italic":"normal":ve!=700&&ve!=="bold"||ee!=="normal"?(ve==700?"bold":ve)+""+ee:"bold"),ee};m.advancedAPI=function(ee){var ve=j===w.COMPAT;return ve&&O.call(this),typeof ee!="function"||(ee(this),ve&&B.call(this)),this},m.compatAPI=function(ee){var ve=j===w.ADVANCED;return ve&&B.call(this),typeof ee!="function"||(ee(this),ve&&O.call(this)),this},m.isAdvancedAPI=function(){return j===w.ADVANCED};var C,_=function(ee){if(j!==w.ADVANCED)throw new Error(ee+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=m.roundToPrecision=m.__private__.roundToPrecision=function(ee,ve){var ze=t||ve;if(isNaN(ee)||isNaN(ze))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ee.toFixed(ze).replace(/0+$/,"")};C=m.hpf=m.__private__.hpf=typeof c=="number"?function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return S(ee,c)}:c==="smart"?function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return S(ee,ee>-1&&ee<1?16:5)}:function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return S(ee,16)};var L=m.f2=m.__private__.f2=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.f2");return S(ee,2)},P=m.__private__.f3=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.f3");return S(ee,3)},k=m.scale=m.__private__.scale=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.scale");return j===w.COMPAT?ee*gt:j===w.ADVANCED?ee:void 0},M=function(ee){return j===w.COMPAT?zi()-ee:j===w.ADVANCED?ee:void 0},U=function(ee){return k(M(ee))};m.__private__.setPrecision=m.setPrecision=function(ee){typeof parseInt(ee,10)=="number"&&(t=parseInt(ee,10))};var z,Q="00000000000000000000000000000000",q=m.__private__.getFileId=function(){return Q},V=m.__private__.setFileId=function(ee){return Q=ee!==void 0&&/^[a-fA-F0-9]{32}$/.test(ee)?ee.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(cn=new jv(d.userPermissions,d.userPassword,d.ownerPassword,Q)),Q};m.setFileId=function(ee){return V(ee),this},m.getFileId=function(){return q()};var Y=m.__private__.convertDateToPDFDate=function(ee){var ve=ee.getTimezoneOffset(),ze=ve<0?"+":"-",We=Math.floor(Math.abs(ve/60)),rt=Math.abs(ve%60),Nt=[ze,W(We),"'",W(rt),"'"].join("");return["D:",ee.getFullYear(),W(ee.getMonth()+1),W(ee.getDate()),W(ee.getHours()),W(ee.getMinutes()),W(ee.getSeconds()),Nt].join("")},K=m.__private__.convertPDFDateToDate=function(ee){var ve=parseInt(ee.substr(2,4),10),ze=parseInt(ee.substr(6,2),10)-1,We=parseInt(ee.substr(8,2),10),rt=parseInt(ee.substr(10,2),10),Nt=parseInt(ee.substr(12,2),10),Ut=parseInt(ee.substr(14,2),10);return new Date(ve,ze,We,rt,Nt,Ut,0)},J=m.__private__.setCreationDate=function(ee){var ve;if(ee===void 0&&(ee=new Date),ee instanceof Date)ve=Y(ee);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ee))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ve=ee}return z=ve},R=m.__private__.getCreationDate=function(ee){var ve=z;return ee==="jsDate"&&(ve=K(z)),ve};m.setCreationDate=function(ee){return J(ee),this},m.getCreationDate=function(ee){return R(ee)};var F,W=m.__private__.padd2=function(ee){return("0"+parseInt(ee)).slice(-2)},X=m.__private__.padd2Hex=function(ee){return("00"+(ee=ee.toString())).substr(ee.length)},ne=0,le=[],ie=[],ae=0,Ae=[],ke=[],re=!1,Re=ie,Le=function(){ne=0,ae=0,ie=[],le=[],Ae=[],Oe=Ja(),De=Ja()};m.__private__.setCustomOutputDestination=function(ee){re=!0,Re=ee};var Te=function(ee){re||(Re=ee)};m.__private__.resetCustomOutputDestination=function(){re=!1,Re=ie};var de=m.__private__.out=function(ee){return ee=ee.toString(),ae+=ee.length+1,Re.push(ee),Re},Ce=m.__private__.write=function(ee){return de(arguments.length===1?ee.toString():Array.prototype.join.call(arguments," "))},me=m.__private__.getArrayBuffer=function(ee){for(var ve=ee.length,ze=new ArrayBuffer(ve),We=new Uint8Array(ze);ve--;)We[ve]=ee.charCodeAt(ve);return ze},ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ye};var oe=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(ee){return oe=j===w.ADVANCED?ee/gt:ee,this};var fe,be=m.__private__.getFontSize=m.getFontSize=function(){return j===w.COMPAT?oe:oe*gt},Pe=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(ee){return Pe=ee,this},m.__private__.getR2L=m.getR2L=function(){return Pe};var $e,Ke=m.__private__.setZoomMode=function(ee){var ve=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ee))fe=ee;else if(isNaN(ee)){if(ve.indexOf(ee)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ee+'" is not recognized.');fe=ee}else fe=parseInt(ee,10)};m.__private__.getZoomMode=function(){return fe};var nt,He=m.__private__.setPageMode=function(ee){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ee)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ee+'" is not recognized.');$e=ee};m.__private__.getPageMode=function(){return $e};var it=m.__private__.setLayoutMode=function(ee){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ee)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ee+'" is not recognized.');nt=ee};m.__private__.getLayoutMode=function(){return nt},m.__private__.setDisplayMode=m.setDisplayMode=function(ee,ve,ze){return Ke(ee),it(ve),He(ze),this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(ee){if(Object.keys(xt).indexOf(ee)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xt[ee]},m.__private__.getDocumentProperties=function(){return xt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(ee){for(var ve in xt)xt.hasOwnProperty(ve)&&ee[ve]&&(xt[ve]=ee[ve]);return this},m.__private__.setDocumentProperty=function(ee,ve){if(Object.keys(xt).indexOf(ee)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xt[ee]=ve};var Et,gt,Ve,Bt,dr,er={},Er={},$r=[],br={},kn={},Pr={},Pa={},Fn=null,Rr=0,mr=[],Yr=new fW(m),ps=e.hotfixes||[],Ya={},Dn={},Rs=[],Zt=function ee(ve,ze,We,rt,Nt,Ut){if(!(this instanceof ee))return new ee(ve,ze,We,rt,Nt,Ut);isNaN(ve)&&(ve=1),isNaN(ze)&&(ze=0),isNaN(We)&&(We=0),isNaN(rt)&&(rt=1),isNaN(Nt)&&(Nt=0),isNaN(Ut)&&(Ut=0),this._matrix=[ve,ze,We,rt,Nt,Ut]};Object.defineProperty(Zt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ee){this._matrix[0]=ee}}),Object.defineProperty(Zt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ee){this._matrix[1]=ee}}),Object.defineProperty(Zt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ee){this._matrix[2]=ee}}),Object.defineProperty(Zt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ee){this._matrix[3]=ee}}),Object.defineProperty(Zt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ee){this._matrix[4]=ee}}),Object.defineProperty(Zt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ee){this._matrix[5]=ee}}),Object.defineProperty(Zt.prototype,"a",{get:function(){return this._matrix[0]},set:function(ee){this._matrix[0]=ee}}),Object.defineProperty(Zt.prototype,"b",{get:function(){return this._matrix[1]},set:function(ee){this._matrix[1]=ee}}),Object.defineProperty(Zt.prototype,"c",{get:function(){return this._matrix[2]},set:function(ee){this._matrix[2]=ee}}),Object.defineProperty(Zt.prototype,"d",{get:function(){return this._matrix[3]},set:function(ee){this._matrix[3]=ee}}),Object.defineProperty(Zt.prototype,"e",{get:function(){return this._matrix[4]},set:function(ee){this._matrix[4]=ee}}),Object.defineProperty(Zt.prototype,"f",{get:function(){return this._matrix[5]},set:function(ee){this._matrix[5]=ee}}),Object.defineProperty(Zt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Zt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Zt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Zt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Zt.prototype.join=function(ee){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(ee)},Zt.prototype.multiply=function(ee){var ve=ee.sx*this.sx+ee.shy*this.shx,ze=ee.sx*this.shy+ee.shy*this.sy,We=ee.shx*this.sx+ee.sy*this.shx,rt=ee.shx*this.shy+ee.sy*this.sy,Nt=ee.tx*this.sx+ee.ty*this.shx+this.tx,Ut=ee.tx*this.shy+ee.ty*this.sy+this.ty;return new Zt(ve,ze,We,rt,Nt,Ut)},Zt.prototype.decompose=function(){var ee=this.sx,ve=this.shy,ze=this.shx,We=this.sy,rt=this.tx,Nt=this.ty,Ut=Math.sqrt(ee*ee+ve*ve),Wt=(ee/=Ut)*ze+(ve/=Ut)*We;ze-=ee*Wt,We-=ve*Wt;var D=Math.sqrt(ze*ze+We*We);return Wt/=D,ee*(We/=D)<ve*(ze/=D)&&(ee=-ee,ve=-ve,Wt=-Wt,Ut=-Ut),{scale:new Zt(Ut,0,0,D,0,0),translate:new Zt(1,0,0,1,rt,Nt),rotate:new Zt(ee,ve,-ve,ee,0,0),skew:new Zt(1,0,Wt,1,0,0)}},Zt.prototype.toString=function(ee){return this.join(" ")},Zt.prototype.inversed=function(){var ee=this.sx,ve=this.shy,ze=this.shx,We=this.sy,rt=this.tx,Nt=this.ty,Ut=1/(ee*We-ve*ze),Wt=We*Ut,D=-ve*Ut,se=-ze*Ut,ue=ee*Ut;return new Zt(Wt,D,se,ue,-Wt*rt-se*Nt,-D*rt-ue*Nt)},Zt.prototype.applyToPoint=function(ee){var ve=ee.x*this.sx+ee.y*this.shx+this.tx,ze=ee.x*this.shy+ee.y*this.sy+this.ty;return new Ad(ve,ze)},Zt.prototype.applyToRectangle=function(ee){var ve=this.applyToPoint(ee),ze=this.applyToPoint(new Ad(ee.x+ee.w,ee.y+ee.h));return new gf(ve.x,ve.y,ze.x-ve.x,ze.y-ve.y)},Zt.prototype.clone=function(){var ee=this.sx,ve=this.shy,ze=this.shx,We=this.sy,rt=this.tx,Nt=this.ty;return new Zt(ee,ve,ze,We,rt,Nt)},m.Matrix=Zt;var xa=m.matrixMult=function(ee,ve){return ve.multiply(ee)},la=new Zt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=la;var Ia=function(ee,ve){if(!kn[ee]){var ze=(ve instanceof Zp?"Sh":"P")+(Object.keys(br).length+1).toString(10);ve.id=ze,kn[ee]=ze,br[ze]=ve,Yr.publish("addPattern",ve)}};m.ShadingPattern=Zp,m.TilingPattern=Rv,m.addShadingPattern=function(ee,ve){return _("addShadingPattern()"),Ia(ee,ve),this},m.beginTilingPattern=function(ee){_("beginTilingPattern()"),yu(ee.boundingBox[0],ee.boundingBox[1],ee.boundingBox[2]-ee.boundingBox[0],ee.boundingBox[3]-ee.boundingBox[1],ee.matrix)},m.endTilingPattern=function(ee,ve){_("endTilingPattern()"),ve.stream=ke[F].join(`
`),Ia(ee,ve),Yr.publish("endTilingPattern",ve),Rs.pop().restore()};var Ka=m.__private__.newObject=function(){var ee=Ja();return we(ee,!0),ee},Ja=m.__private__.newObjectDeferred=function(){return ne++,le[ne]=function(){return ae},ne},we=function(ee,ve){return ve=typeof ve=="boolean"&&ve,le[ee]=ae,ve&&de(ee+" 0 obj"),ee},Ue=m.__private__.newAdditionalObject=function(){var ee={objId:Ja(),content:""};return Ae.push(ee),ee},Oe=Ja(),De=Ja(),ge=m.__private__.decodeColorString=function(ee){var ve=ee.split(" ");if(ve.length!==2||ve[1]!=="g"&&ve[1]!=="G")ve.length===5&&(ve[4]==="k"||ve[4]==="K")&&(ve=[(1-ve[0])*(1-ve[3]),(1-ve[1])*(1-ve[3]),(1-ve[2])*(1-ve[3]),"r"]);else{var ze=parseFloat(ve[0]);ve=[ze,ze,ze,"r"]}for(var We="#",rt=0;rt<3;rt++)We+=("0"+Math.floor(255*parseFloat(ve[rt])).toString(16)).slice(-2);return We},he=m.__private__.encodeColorString=function(ee){var ve;typeof ee=="string"&&(ee={ch1:ee});var ze=ee.ch1,We=ee.ch2,rt=ee.ch3,Nt=ee.ch4,Ut=ee.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ze=="string"&&ze.charAt(0)!=="#"){var Wt=new Fce(ze);if(Wt.ok)ze=Wt.toHex();else if(!/^\d*\.?\d*$/.test(ze))throw new Error('Invalid color "'+ze+'" passed to jsPDF.encodeColorString.')}if(typeof ze=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ze)&&(ze="#"+ze[1]+ze[1]+ze[2]+ze[2]+ze[3]+ze[3]),typeof ze=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ze)){var D=parseInt(ze.substr(1),16);ze=D>>16&255,We=D>>8&255,rt=255&D}if(We===void 0||Nt===void 0&&ze===We&&We===rt)if(typeof ze=="string")ve=ze+" "+Ut[0];else switch(ee.precision){case 2:ve=L(ze/255)+" "+Ut[0];break;case 3:default:ve=P(ze/255)+" "+Ut[0]}else if(Nt===void 0||gn(Nt)==="object"){if(Nt&&!isNaN(Nt.a)&&Nt.a===0)return ve=["1.","1.","1.",Ut[1]].join(" ");if(typeof ze=="string")ve=[ze,We,rt,Ut[1]].join(" ");else switch(ee.precision){case 2:ve=[L(ze/255),L(We/255),L(rt/255),Ut[1]].join(" ");break;default:case 3:ve=[P(ze/255),P(We/255),P(rt/255),Ut[1]].join(" ")}}else if(typeof ze=="string")ve=[ze,We,rt,Nt,Ut[2]].join(" ");else switch(ee.precision){case 2:ve=[L(ze),L(We),L(rt),L(Nt),Ut[2]].join(" ");break;case 3:default:ve=[P(ze),P(We),P(rt),P(Nt),Ut[2]].join(" ")}return ve},Be=m.__private__.getFilters=function(){return o},Qe=m.__private__.putStream=function(ee){var ve=(ee=ee||{}).data||"",ze=ee.filters||Be(),We=ee.alreadyAppliedFilters||[],rt=ee.addLength1||!1,Nt=ve.length,Ut=ee.objectId,Wt=function(Br){return Br};if(d!==null&&Ut===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Wt=cn.encryptor(Ut,0));var D={};ze===!0&&(ze=["FlateEncode"]);var se=ee.additionalKeyValues||[],ue=(D=pr.API.processDataByFilters!==void 0?pr.API.processDataByFilters(ve,ze):{data:ve,reverseChain:[]}).reverseChain+(Array.isArray(We)?We.join(" "):We.toString());if(D.data.length!==0&&(se.push({key:"Length",value:D.data.length}),rt===!0&&se.push({key:"Length1",value:Nt})),ue.length!=0)if(ue.split("/").length-1==1)se.push({key:"Filter",value:ue});else{se.push({key:"Filter",value:"["+ue+"]"});for(var _e=0;_e<se.length;_e+=1)if(se[_e].key==="DecodeParms"){for(var tt=[],ft=0;ft<D.reverseChain.split("/").length-1;ft+=1)tt.push("null");tt.push(se[_e].value),se[_e].value="["+tt.join(" ")+"]"}}de("<<");for(var Qt=0;Qt<se.length;Qt++)de("/"+se[Qt].key+" "+se[Qt].value);de(">>"),D.data.length!==0&&(de("stream"),de(Wt(D.data)),de("endstream"))},Fe=m.__private__.putPage=function(ee){var ve=ee.number,ze=ee.data,We=ee.objId,rt=ee.contentsObjId;we(We,!0),de("<</Type /Page"),de("/Parent "+ee.rootDictionaryObjId+" 0 R"),de("/Resources "+ee.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(C(ee.mediaBox.bottomLeftX))+" "+parseFloat(C(ee.mediaBox.bottomLeftY))+" "+C(ee.mediaBox.topRightX)+" "+C(ee.mediaBox.topRightY)+"]"),ee.cropBox!==null&&de("/CropBox ["+C(ee.cropBox.bottomLeftX)+" "+C(ee.cropBox.bottomLeftY)+" "+C(ee.cropBox.topRightX)+" "+C(ee.cropBox.topRightY)+"]"),ee.bleedBox!==null&&de("/BleedBox ["+C(ee.bleedBox.bottomLeftX)+" "+C(ee.bleedBox.bottomLeftY)+" "+C(ee.bleedBox.topRightX)+" "+C(ee.bleedBox.topRightY)+"]"),ee.trimBox!==null&&de("/TrimBox ["+C(ee.trimBox.bottomLeftX)+" "+C(ee.trimBox.bottomLeftY)+" "+C(ee.trimBox.topRightX)+" "+C(ee.trimBox.topRightY)+"]"),ee.artBox!==null&&de("/ArtBox ["+C(ee.artBox.bottomLeftX)+" "+C(ee.artBox.bottomLeftY)+" "+C(ee.artBox.topRightX)+" "+C(ee.artBox.topRightY)+"]"),typeof ee.userUnit=="number"&&ee.userUnit!==1&&de("/UserUnit "+ee.userUnit),Yr.publish("putPage",{objId:We,pageContext:mr[ve],pageNumber:ve,page:ze}),de("/Contents "+rt+" 0 R"),de(">>"),de("endobj");var Nt=ze.join(`
`);return j===w.ADVANCED&&(Nt+=`
Q`),we(rt,!0),Qe({data:Nt,filters:Be(),objectId:rt}),de("endobj"),We},qe=m.__private__.putPages=function(){var ee,ve,ze=[];for(ee=1;ee<=Rr;ee++)mr[ee].objId=Ja(),mr[ee].contentsObjId=Ja();for(ee=1;ee<=Rr;ee++)ze.push(Fe({number:ee,data:ke[ee],objId:mr[ee].objId,contentsObjId:mr[ee].contentsObjId,mediaBox:mr[ee].mediaBox,cropBox:mr[ee].cropBox,bleedBox:mr[ee].bleedBox,trimBox:mr[ee].trimBox,artBox:mr[ee].artBox,userUnit:mr[ee].userUnit,rootDictionaryObjId:Oe,resourceDictionaryObjId:De}));we(Oe,!0),de("<</Type /Pages");var We="/Kids [";for(ve=0;ve<Rr;ve++)We+=ze[ve]+" 0 R ";de(We+"]"),de("/Count "+Rr),de(">>"),de("endobj"),Yr.publish("postPutPages")},Xe=function(ee){Yr.publish("putFont",{font:ee,out:de,newObject:Ka,putStream:Qe}),ee.isAlreadyPutted!==!0&&(ee.objectNumber=Ka(),de("<<"),de("/Type /Font"),de("/BaseFont /"+kv(ee.postScriptName)),de("/Subtype /Type1"),typeof ee.encoding=="string"&&de("/Encoding /"+ee.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},yt=function(){for(var ee in er)er.hasOwnProperty(ee)&&(f===!1||f===!0&&h.hasOwnProperty(ee))&&Xe(er[ee])},wt=function(ee){ee.objectNumber=Ka();var ve=[];ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Form"}),ve.push({key:"BBox",value:"["+[C(ee.x),C(ee.y),C(ee.x+ee.width),C(ee.y+ee.height)].join(" ")+"]"}),ve.push({key:"Matrix",value:"["+ee.matrix.toString()+"]"});var ze=ee.pages[1].join(`
`);Qe({data:ze,additionalKeyValues:ve,objectId:ee.objectNumber}),de("endobj")},Ht=function(){for(var ee in Ya)Ya.hasOwnProperty(ee)&&wt(Ya[ee])},Tt=function(ee,ve){var ze,We=[],rt=1/(ve-1);for(ze=0;ze<1;ze+=rt)We.push(ze);if(We.push(1),ee[0].offset!=0){var Nt={offset:0,color:ee[0].color};ee.unshift(Nt)}if(ee[ee.length-1].offset!=1){var Ut={offset:1,color:ee[ee.length-1].color};ee.push(Ut)}for(var Wt="",D=0,se=0;se<We.length;se++){for(ze=We[se];ze>ee[D+1].offset;)D++;var ue=ee[D].offset,_e=(ze-ue)/(ee[D+1].offset-ue),tt=ee[D].color,ft=ee[D+1].color;Wt+=X(Math.round((1-_e)*tt[0]+_e*ft[0]).toString(16))+X(Math.round((1-_e)*tt[1]+_e*ft[1]).toString(16))+X(Math.round((1-_e)*tt[2]+_e*ft[2]).toString(16))}return Wt.trim()},Vt=function(ee,ve){ve||(ve=21);var ze=Ka(),We=Tt(ee.colors,ve),rt=[];rt.push({key:"FunctionType",value:"0"}),rt.push({key:"Domain",value:"[0.0 1.0]"}),rt.push({key:"Size",value:"["+ve+"]"}),rt.push({key:"BitsPerSample",value:"8"}),rt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Qe({data:We,additionalKeyValues:rt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ze}),de("endobj"),ee.objectNumber=Ka(),de("<< /ShadingType "+ee.type),de("/ColorSpace /DeviceRGB");var Nt="/Coords ["+C(parseFloat(ee.coords[0]))+" "+C(parseFloat(ee.coords[1]))+" ";ee.type===2?Nt+=C(parseFloat(ee.coords[2]))+" "+C(parseFloat(ee.coords[3])):Nt+=C(parseFloat(ee.coords[2]))+" "+C(parseFloat(ee.coords[3]))+" "+C(parseFloat(ee.coords[4]))+" "+C(parseFloat(ee.coords[5])),de(Nt+="]"),ee.matrix&&de("/Matrix ["+ee.matrix.toString()+"]"),de("/Function "+ze+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},jr=function(ee,ve){var ze=Ja(),We=Ka();ve.push({resourcesOid:ze,objectOid:We}),ee.objectNumber=We;var rt=[];rt.push({key:"Type",value:"/Pattern"}),rt.push({key:"PatternType",value:"1"}),rt.push({key:"PaintType",value:"1"}),rt.push({key:"TilingType",value:"1"}),rt.push({key:"BBox",value:"["+ee.boundingBox.map(C).join(" ")+"]"}),rt.push({key:"XStep",value:C(ee.xStep)}),rt.push({key:"YStep",value:C(ee.yStep)}),rt.push({key:"Resources",value:ze+" 0 R"}),ee.matrix&&rt.push({key:"Matrix",value:"["+ee.matrix.toString()+"]"}),Qe({data:ee.stream,additionalKeyValues:rt,objectId:ee.objectNumber}),de("endobj")},ea=function(ee){var ve;for(ve in br)br.hasOwnProperty(ve)&&(br[ve]instanceof Zp?Vt(br[ve]):br[ve]instanceof Rv&&jr(br[ve],ee))},ta=function(ee){for(var ve in ee.objectNumber=Ka(),de("<<"),ee)switch(ve){case"opacity":de("/ca "+L(ee[ve]));break;case"stroke-opacity":de("/CA "+L(ee[ve]))}de(">>"),de("endobj")},ia=function(){var ee;for(ee in Pr)Pr.hasOwnProperty(ee)&&ta(Pr[ee])},gs=function(){for(var ee in de("/XObject <<"),Ya)Ya.hasOwnProperty(ee)&&Ya[ee].objectNumber>=0&&de("/"+ee+" "+Ya[ee].objectNumber+" 0 R");Yr.publish("putXobjectDict"),de(">>")},To=function(){cn.oid=Ka(),de("<<"),de("/Filter /Standard"),de("/V "+cn.v),de("/R "+cn.r),de("/U <"+cn.toHexString(cn.U)+">"),de("/O <"+cn.toHexString(cn.O)+">"),de("/P "+cn.P),de(">>"),de("endobj")},xs=function(){for(var ee in de("/Font <<"),er)er.hasOwnProperty(ee)&&(f===!1||f===!0&&h.hasOwnProperty(ee))&&de("/"+ee+" "+er[ee].objectNumber+" 0 R");de(">>")},ii=function(){if(Object.keys(br).length>0){for(var ee in de("/Shading <<"),br)br.hasOwnProperty(ee)&&br[ee]instanceof Zp&&br[ee].objectNumber>=0&&de("/"+ee+" "+br[ee].objectNumber+" 0 R");Yr.publish("putShadingPatternDict"),de(">>")}},Ls=function(ee){if(Object.keys(br).length>0){for(var ve in de("/Pattern <<"),br)br.hasOwnProperty(ve)&&br[ve]instanceof m.TilingPattern&&br[ve].objectNumber>=0&&br[ve].objectNumber<ee&&de("/"+ve+" "+br[ve].objectNumber+" 0 R");Yr.publish("putTilingPatternDict"),de(">>")}},Ei=function(){if(Object.keys(Pr).length>0){var ee;for(ee in de("/ExtGState <<"),Pr)Pr.hasOwnProperty(ee)&&Pr[ee].objectNumber>=0&&de("/"+ee+" "+Pr[ee].objectNumber+" 0 R");Yr.publish("putGStateDict"),de(">>")}},vn=function(ee){we(ee.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),xs(),ii(),Ls(ee.objectOid),Ei(),gs(),de(">>"),de("endobj")},oi=function(){var ee=[];yt(),ia(),Ht(),ea(ee),Yr.publish("putResources"),ee.forEach(vn),vn({resourcesOid:De,objectOid:Number.MAX_SAFE_INTEGER}),Yr.publish("postPutResources")},ff=function(){Yr.publish("putAdditionalObjects");for(var ee=0;ee<Ae.length;ee++){var ve=Ae[ee];we(ve.objId,!0),de(ve.content),de("endobj")}Yr.publish("postPutAdditionalObjects")},f0=function(ee){Er[ee.fontName]=Er[ee.fontName]||{},Er[ee.fontName][ee.fontStyle]=ee.id},fu=function(ee,ve,ze,We,rt){var Nt={id:"F"+(Object.keys(er).length+1).toString(10),postScriptName:ee,fontName:ve,fontStyle:ze,encoding:We,isStandardFont:rt||!1,metadata:{}};return Yr.publish("addFont",{font:Nt,instance:this}),er[Nt.id]=Nt,f0(Nt),Nt.id},BA=function(ee){for(var ve=0,ze=ye.length;ve<ze;ve++){var We=fu.call(this,ee[ve][0],ee[ve][1],ee[ve][2],ye[ve][3],!0);f===!1&&(h[We]=!0);var rt=ee[ve][0].split("-");f0({id:We,fontName:rt[0],fontStyle:rt[1]||""})}Yr.publish("addFonts",{fonts:er,dictionary:Er})},Ci=function(ee){return ee.foo=function(){try{return ee.apply(this,arguments)}catch(We){var ve=We.stack||"";~ve.indexOf(" at ")&&(ve=ve.split(" at ")[1]);var ze="Error in function "+ve.split(`
`)[0].split("<")[0]+": "+We.message;if(!Mr.console)throw new Error(ze);Mr.console.error(ze,We),Mr.alert&&alert(ze)}},ee.foo.bar=ee,ee.foo},Af=function(ee,ve){var ze,We,rt,Nt,Ut,Wt,D,se,ue;if(rt=(ve=ve||{}).sourceEncoding||"Unicode",Ut=ve.outputEncoding,(ve.autoencode||Ut)&&er[Et].metadata&&er[Et].metadata[rt]&&er[Et].metadata[rt].encoding&&(Nt=er[Et].metadata[rt].encoding,!Ut&&er[Et].encoding&&(Ut=er[Et].encoding),!Ut&&Nt.codePages&&(Ut=Nt.codePages[0]),typeof Ut=="string"&&(Ut=Nt[Ut]),Ut)){for(D=!1,Wt=[],ze=0,We=ee.length;ze<We;ze++)(se=Ut[ee.charCodeAt(ze)])?Wt.push(String.fromCharCode(se)):Wt.push(ee[ze]),Wt[ze].charCodeAt(0)>>8&&(D=!0);ee=Wt.join("")}for(ze=ee.length;D===void 0&&ze!==0;)ee.charCodeAt(ze-1)>>8&&(D=!0),ze--;if(!D)return ee;for(Wt=ve.noBOM?[]:[254,255],ze=0,We=ee.length;ze<We;ze++){if((ue=(se=ee.charCodeAt(ze))>>8)>>8)throw new Error("Character at position "+ze+" of string '"+ee+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Wt.push(ue),Wt.push(se-(ue<<8))}return String.fromCharCode.apply(void 0,Wt)},ja=m.__private__.pdfEscape=m.pdfEscape=function(ee,ve){return Af(ee,ve).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ji=m.__private__.beginPage=function(ee){ke[++Rr]=[],mr[Rr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ee[0]),topRightY:Number(ee[1])}},Rl(Rr),Te(ke[F])},Au=function(ee,ve){var ze,We,rt;switch(r=ve||r,typeof ee=="string"&&(ze=y(ee.toLowerCase()),Array.isArray(ze)&&(We=ze[0],rt=ze[1])),Array.isArray(ee)&&(We=ee[0]*gt,rt=ee[1]*gt),isNaN(We)&&(We=n[0],rt=n[1]),(We>14400||rt>14400)&&(Bn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),We=Math.min(14400,We),rt=Math.min(14400,rt)),n=[We,rt],r.substr(0,1)){case"l":rt>We&&(n=[rt,We]);break;case"p":We>rt&&(n=[rt,We])}ji(n),FA(gu),de(ki),DA!==0&&de(DA+" J"),fd!==0&&de(fd+" j"),Yr.publish("addPage",{pageNumber:Rr})},hu=function(ee){ee>0&&ee<=Rr&&(ke.splice(ee,1),mr.splice(ee,1),Rr--,F>Rr&&(F=Rr),this.setPage(F))},Rl=function(ee){ee>0&&ee<=Rr&&(F=ee)},Ra=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ke.length-1},mu=function(ee,ve,ze){var We,rt=void 0;return ze=ze||{},ee=ee!==void 0?ee:er[Et].fontName,ve=ve!==void 0?ve:er[Et].fontStyle,We=ee.toLowerCase(),Er[We]!==void 0&&Er[We][ve]!==void 0?rt=Er[We][ve]:Er[ee]!==void 0&&Er[ee][ve]!==void 0?rt=Er[ee][ve]:ze.disableWarning===!1&&Bn.warn("Unable to look up font label for font '"+ee+"', '"+ve+"'. Refer to getFontList() for available fonts."),rt||ze.noFallback||(rt=Er.times[ve])==null&&(rt=Er.times.normal),rt},Io=m.__private__.putInfo=function(){var ee=Ka(),ve=function(We){return We};for(var ze in d!==null&&(ve=cn.encryptor(ee,0)),de("<<"),de("/Producer ("+ja(ve("jsPDF "+pr.version))+")"),xt)xt.hasOwnProperty(ze)&&xt[ze]&&de("/"+ze.substr(0,1).toUpperCase()+ze.substr(1)+" ("+ja(ve(xt[ze]))+")");de("/CreationDate ("+ja(ve(z))+")"),de(">>"),de("endobj")},bc=m.__private__.putCatalog=function(ee){var ve=(ee=ee||{}).rootDictionaryObjId||Oe;switch(Ka(),de("<<"),de("/Type /Catalog"),de("/Pages "+ve+" 0 R"),fe||(fe="fullwidth"),fe){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ze=""+fe;ze.substr(ze.length-1)==="%"&&(fe=parseInt(fe)/100),typeof fe=="number"&&de("/OpenAction [3 0 R /XYZ null null "+L(fe)+"]")}switch(nt||(nt="continuous"),nt){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}$e&&de("/PageMode /"+$e),Yr.publish("putCatalog"),de(">>"),de("endobj")},A0=m.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(ne+1)),de("/Root "+ne+" 0 R"),de("/Info "+(ne-1)+" 0 R"),d!==null&&de("/Encrypt "+cn.oid+" 0 R"),de("/ID [ <"+Q+"> <"+Q+"> ]"),de(">>")},TA=m.__private__.putHeader=function(){de("%PDF-"+g),de("%")},IA=m.__private__.putXRef=function(){var ee="0000000000";de("xref"),de("0 "+(ne+1)),de("0000000000 65535 f ");for(var ve=1;ve<=ne;ve++)typeof le[ve]=="function"?de((ee+le[ve]()).slice(-10)+" 00000 n "):le[ve]!==void 0?de((ee+le[ve]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},yc=m.__private__.buildDocument=function(){Le(),Te(ie),Yr.publish("buildDocument"),TA(),qe(),ff(),oi(),d!==null&&To(),Io(),bc();var ee=ae;return IA(),A0(),de("startxref"),de(""+ee),de("%%EOF"),Te(ke[F]),ie.join(`
`)},hf=m.__private__.getBlob=function(ee){return new Blob([me(ee)],{type:"application/pdf"})},wc=m.output=m.__private__.output=Ci(function(ee,ve){switch(typeof(ve=ve||{})=="string"?ve={filename:ve}:ve.filename=ve.filename||"generated.pdf",ee){case void 0:return yc();case"save":m.save(ve.filename);break;case"arraybuffer":return me(yc());case"blob":return hf(yc());case"bloburi":case"bloburl":if(Mr.URL!==void 0&&typeof Mr.URL.createObjectURL=="function")return Mr.URL&&Mr.URL.createObjectURL(hf(yc()))||void 0;Bn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ze="",We=yc();try{ze=lD(We)}catch{ze=lD(unescape(encodeURIComponent(We)))}return"data:application/pdf;filename="+ve.filename+";base64,"+ze;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var rt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Nt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ve.pdfObjectUrl&&(rt=ve.pdfObjectUrl,Nt="");var Ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+rt+'"'+Nt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ve)+");<\/script></body></html>",Wt=Mr.open();return Wt!==null&&Wt.document.write(Ut),Wt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var D='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ve.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ve.filename+'" width="500px" height="400px" /></body></html>',se=Mr.open();if(se!==null){se.document.write(D);var ue=this;se.document.documentElement.querySelector("#pdfViewer").onload=function(){se.document.title=ve.filename,se.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ue.output("bloburl"))}}return se}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ve)+'"></iframe></body></html>',tt=Mr.open();if(tt!==null&&(tt.document.write(_e),tt.document.title=ve.filename),tt||typeof safari>"u")return tt;break;case"datauri":case"dataurl":return Mr.document.location.href=this.output("datauristring",ve);default:return null}}),Ll=function(ee){return Array.isArray(ps)===!0&&ps.indexOf(ee)>-1};switch(a){case"pt":gt=1;break;case"mm":gt=72/25.4;break;case"cm":gt=72/2.54;break;case"in":gt=72;break;case"px":gt=Ll("px_scaling")==1?.75:96/72;break;case"pc":case"em":gt=12;break;case"ex":gt=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);gt=a}var cn=null;J(),V();var Nc=function(ee){return d!==null?cn.encryptor(ee,0):function(ve){return ve}},Ml=m.__private__.getPageInfo=m.getPageInfo=function(ee){if(isNaN(ee)||ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mr[ee].objId,pageNumber:ee,pageContext:mr[ee]}},Sr=m.__private__.getPageInfoByObjId=function(ee){if(isNaN(ee)||ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ve in mr)if(mr[ve].objId===ee)break;return Ml(ve)},Ul=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:mr[F].objId,pageNumber:F,pageContext:mr[F]}};m.addPage=function(){return Au.apply(this,arguments),this},m.setPage=function(){return Rl.apply(this,arguments),Te.call(this,ke[F]),this},m.insertPage=function(ee){return this.addPage(),this.movePage(F,ee),this},m.movePage=function(ee,ve){var ze,We;if(ee>ve){ze=ke[ee],We=mr[ee];for(var rt=ee;rt>ve;rt--)ke[rt]=ke[rt-1],mr[rt]=mr[rt-1];ke[ve]=ze,mr[ve]=We,this.setPage(ve)}else if(ee<ve){ze=ke[ee],We=mr[ee];for(var Nt=ee;Nt<ve;Nt++)ke[Nt]=ke[Nt+1],mr[Nt]=mr[Nt+1];ke[ve]=ze,mr[ve]=We,this.setPage(ve)}return this},m.deletePage=function(){return hu.apply(this,arguments),this},m.__private__.text=m.text=function(ee,ve,ze,We,rt){var Nt,Ut,Wt,D,se,ue,_e,tt,ft,Qt=(We=We||{}).scope||this;if(typeof ee=="number"&&typeof ve=="number"&&(typeof ze=="string"||Array.isArray(ze))){var Br=ze;ze=ve,ve=ee,ee=Br}if(arguments[3]instanceof Zt?(_("The transform parameter of text() with a Matrix value"),ft=rt):(Wt=arguments[4],D=arguments[5],gn(_e=arguments[3])==="object"&&_e!==null||(typeof Wt=="string"&&(D=Wt,Wt=null),typeof _e=="string"&&(D=_e,_e=null),typeof _e=="number"&&(Wt=_e,_e=null),We={flags:_e,angle:Wt,align:D})),isNaN(ve)||isNaN(ze)||ee==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ee.length===0)return Qt;var ha="",Gr=!1,La=typeof We.lineHeightFactor=="number"?We.lineHeightFactor:Aa,Za=Qt.internal.scaleFactor;function Vl(ca){return ca=ca.split("	").join(Array(We.TabLen||9).join(" ")),ja(ca,_e)}function ns(ca){for(var ua,bn=ca.concat(),ss=[],Gl=bn.length;Gl--;)typeof(ua=bn.shift())=="string"?ss.push(ua):Array.isArray(ca)&&(ua.length===1||ua[1]===void 0&&ua[2]===void 0)?ss.push(ua[0]):ss.push([ua[0],ua[1],ua[2]]);return ss}function Po(ca,ua){var bn;if(typeof ca=="string")bn=ua(ca)[0];else if(Array.isArray(ca)){for(var ss,Gl,_f=ca.concat(),Sf=[],xd=_f.length;xd--;)typeof(ss=_f.shift())=="string"?Sf.push(ua(ss)[0]):Array.isArray(ss)&&typeof ss[0]=="string"&&(Gl=ua(ss[0],ss[1],ss[2]),Sf.push([Gl[0],Gl[1],Gl[2]]));bn=Sf}return bn}var Nu=!1,vf=!0;if(typeof ee=="string")Nu=!0;else if(Array.isArray(ee)){var g0=ee.concat();Ut=[];for(var PA,Ms=g0.length;Ms--;)(typeof(PA=g0.shift())!="string"||Array.isArray(PA)&&typeof PA[0]!="string")&&(vf=!1);Nu=vf}if(Nu===!1)throw new Error('Type of text must be string or Array. "'+ee+'" is not recognized.');typeof ee=="string"&&(ee=ee.match(/[\r?\n]/)?ee.split(/\r\n|\r|\n/g):[ee]);var bf=oe/Qt.internal.scaleFactor,RA=bf*(La-1);switch(We.baseline){case"bottom":ze-=RA;break;case"top":ze+=bf-RA;break;case"hanging":ze+=bf-2*RA;break;case"middle":ze+=bf/2-RA}if((ue=We.maxWidth||0)>0&&(typeof ee=="string"?ee=Qt.splitTextToSize(ee,ue):Object.prototype.toString.call(ee)==="[object Array]"&&(ee=ee.reduce(function(ca,ua){return ca.concat(Qt.splitTextToSize(ua,ue))},[]))),Nt={text:ee,x:ve,y:ze,options:We,mutex:{pdfEscape:ja,activeFontKey:Et,fonts:er,activeFontSize:oe}},Yr.publish("preProcessText",Nt),ee=Nt.text,Wt=(We=Nt.options).angle,!(ft instanceof Zt)&&Wt&&typeof Wt=="number"){Wt*=Math.PI/180,We.rotationDirection===0&&(Wt=-Wt),j===w.ADVANCED&&(Wt=-Wt);var LA=Math.cos(Wt),x0=Math.sin(Wt);ft=new Zt(LA,x0,-x0,LA,0,0)}else Wt&&Wt instanceof Zt&&(ft=Wt);j!==w.ADVANCED||ft||(ft=la),(se=We.charSpace||dd)!==void 0&&(ha+=C(k(se))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(tt=We.horizontalScale)!==void 0&&(ha+=C(100*tt)+` Tz
`),We.lang;var Ro=-1,Q1=We.renderingMode!==void 0?We.renderingMode:We.stroke,gp=Qt.internal.getCurrentPageInfo().pageContext;switch(Q1){case 0:case!1:case"fill":Ro=0;break;case 1:case!0:case"stroke":Ro=1;break;case 2:case"fillThenStroke":Ro=2;break;case 3:case"invisible":Ro=3;break;case 4:case"fillAndAddForClipping":Ro=4;break;case 5:case"strokeAndAddPathForClipping":Ro=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ro=6;break;case 7:case"addToPathForClipping":Ro=7}var px=gp.usedRenderingMode!==void 0?gp.usedRenderingMode:-1;Ro!==-1?ha+=Ro+` Tr
`:px!==-1&&(ha+=`0 Tr
`),Ro!==-1&&(gp.usedRenderingMode=Ro),D=We.align||"left";var $l,li=oe*La,yf=Qt.internal.pageSize.getWidth(),xp=er[Et];se=We.charSpace||dd,ue=We.maxWidth||0,_e=Object.assign({autoencode:!0,noBOM:!0},We.flags);var pd=[],wf=function(ca){return Qt.getStringUnitWidth(ca,{font:xp,charSpace:se,fontSize:oe,doKerning:!1})*oe/Za};if(Object.prototype.toString.call(ee)==="[object Array]"){var uo;Ut=ns(ee),D!=="left"&&($l=Ut.map(wf));var _i,Nf=0;if(D==="right"){ve-=$l[0],ee=[],Ms=Ut.length;for(var Lo=0;Lo<Ms;Lo++)Lo===0?(_i=Hi(ve),uo=bs(ze)):(_i=k(Nf-$l[Lo]),uo=-li),ee.push([Ut[Lo],_i,uo]),Nf=$l[Lo]}else if(D==="center"){ve-=$l[0]/2,ee=[],Ms=Ut.length;for(var kc=0;kc<Ms;kc++)kc===0?(_i=Hi(ve),uo=bs(ze)):(_i=k((Nf-$l[kc])/2),uo=-li),ee.push([Ut[kc],_i,uo]),Nf=$l[kc]}else if(D==="left"){ee=[],Ms=Ut.length;for(var Eu=0;Eu<Ms;Eu++)ee.push(Ut[Eu])}else if(D==="justify"&&xp.encoding==="Identity-H"){ee=[],Ms=Ut.length,ue=ue!==0?ue:yf;for(var _c=0,Xn=0;Xn<Ms;Xn++)if(uo=Xn===0?bs(ze):-li,_i=Xn===0?Hi(ve):_c,Xn<Ms-1){var Sc=k((ue-$l[Xn])/(Ut[Xn].split(" ").length-1)),ys=Ut[Xn].split(" ");ee.push([ys[0]+" ",_i,uo]),_c=0;for(var Mo=1;Mo<ys.length;Mo++){var MA=(wf(ys[Mo-1]+" "+ys[Mo])-wf(ys[Mo]))*Za+Sc;Mo==ys.length-1?ee.push([ys[Mo],MA,0]):ee.push([ys[Mo]+" ",MA,0]),_c-=MA}}else ee.push([Ut[Xn],_i,uo]);ee.push(["",_c,0])}else{if(D!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ee=[],Ms=Ut.length,ue=ue!==0?ue:yf,Xn=0;Xn<Ms;Xn++)uo=Xn===0?bs(ze):-li,_i=Xn===0?Hi(ve):0,Xn<Ms-1?pd.push(C(k((ue-$l[Xn])/(Ut[Xn].split(" ").length-1)))):pd.push(0),ee.push([Ut[Xn],_i,uo])}}var Cu=typeof We.R2L=="boolean"?We.R2L:Pe;Cu===!0&&(ee=Po(ee,function(ca,ua,bn){return[ca.split("").reverse().join(""),ua,bn]})),Nt={text:ee,x:ve,y:ze,options:We,mutex:{pdfEscape:ja,activeFontKey:Et,fonts:er,activeFontSize:oe}},Yr.publish("postProcessText",Nt),ee=Nt.text,Gr=Nt.mutex.isHex||!1;var v0=er[Et].encoding;v0!=="WinAnsiEncoding"&&v0!=="StandardEncoding"||(ee=Po(ee,function(ca,ua,bn){return[Vl(ca),ua,bn]})),Ut=ns(ee),ee=[];for(var Ef,Cf,jf,UA=0,b0=1,kf=Array.isArray(Ut[0])?b0:UA,gd="",QA=function(ca,ua,bn){var ss="";return bn instanceof Zt?(bn=typeof We.angle=="number"?xa(bn,new Zt(1,0,0,1,ca,ua)):xa(new Zt(1,0,0,1,ca,ua),bn),j===w.ADVANCED&&(bn=xa(new Zt(1,0,0,-1,0,0),bn)),ss=bn.join(" ")+` Tm
`):ss=C(ca)+" "+C(ua)+` Td
`,ss},Yn=0;Yn<Ut.length;Yn++){switch(gd="",kf){case b0:jf=(Gr?"<":"(")+Ut[Yn][0]+(Gr?">":")"),Ef=parseFloat(Ut[Yn][1]),Cf=parseFloat(Ut[Yn][2]);break;case UA:jf=(Gr?"<":"(")+Ut[Yn]+(Gr?">":")"),Ef=Hi(ve),Cf=bs(ze)}pd!==void 0&&pd[Yn]!==void 0&&(gd=pd[Yn]+` Tw
`),Yn===0?ee.push(gd+QA(Ef,Cf,ft)+jf):kf===UA?ee.push(gd+jf):kf===b0&&ee.push(gd+QA(Ef,Cf,ft)+jf)}ee=kf===UA?ee.join(` Tj
T* `):ee.join(` Tj
`),ee+=` Tj
`;var xl=`BT
/`;return xl+=Et+" "+oe+` Tf
`,xl+=C(oe*La)+` TL
`,xl+=Cc+`
`,xl+=ha,xl+=ee,de(xl+="ET"),h[Et]=!0,Qt};var h0=m.__private__.clip=m.clip=function(ee){return de(ee==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return h0("evenodd")},m.__private__.discardPath=m.discardPath=function(){return de("n"),this};var Ui=m.__private__.isValidStyle=function(ee){var ve=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ee)!==-1&&(ve=!0),ve};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(ee){return Ui(ee)&&(u=ee),this};var Oo=m.__private__.getStyle=m.getStyle=function(ee){var ve=u;switch(ee){case"D":case"S":ve="S";break;case"F":ve="f";break;case"FD":case"DF":ve="B";break;case"f":case"f*":case"B":case"B*":ve=ee}return ve},co=m.close=function(){return de("h"),this};m.stroke=function(){return de("S"),this},m.fill=function(ee){return Ql("f",ee),this},m.fillEvenOdd=function(ee){return Ql("f*",ee),this},m.fillStroke=function(ee){return Ql("B",ee),this},m.fillStrokeEvenOdd=function(ee){return Ql("B*",ee),this};var Ql=function(ee,ve){gn(ve)==="object"?Ec(ve,ee):de(ee)},Fo=function(ee){ee===null||j===w.ADVANCED&&ee===void 0||(ee=Oo(ee),de(ee))};function pu(ee,ve,ze,We,rt){var Nt=new Rv(ve||this.boundingBox,ze||this.xStep,We||this.yStep,this.gState,rt||this.matrix);Nt.stream=this.stream;var Ut=ee+"$$"+this.cloneIndex+++"$$";return Ia(Ut,Nt),Nt}var Ec=function(ee,ve){var ze=kn[ee.key],We=br[ze];if(We instanceof Zp)de("q"),de(OA(ve)),We.gState&&m.setGState(We.gState),de(ee.matrix.toString()+" cm"),de("/"+ze+" sh"),de("Q");else if(We instanceof Rv){var rt=new Zt(1,0,0,-1,0,zi());ee.matrix&&(rt=rt.multiply(ee.matrix||la),ze=pu.call(We,ee.key,ee.boundingBox,ee.xStep,ee.yStep,rt).id),de("q"),de("/Pattern cs"),de("/"+ze+" scn"),We.gState&&m.setGState(We.gState),de(ve),de("Q")}},OA=function(ee){switch(ee){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Do=m.moveTo=function(ee,ve){return de(C(k(ee))+" "+C(U(ve))+" m"),this},Qi=m.lineTo=function(ee,ve){return de(C(k(ee))+" "+C(U(ve))+" l"),this},Hl=m.curveTo=function(ee,ve,ze,We,rt,Nt){return de([C(k(ee)),C(U(ve)),C(k(ze)),C(U(We)),C(k(rt)),C(U(Nt)),"c"].join(" ")),this};m.__private__.line=m.line=function(ee,ve,ze,We,rt){if(isNaN(ee)||isNaN(ve)||isNaN(ze)||isNaN(We)||!Ui(rt))throw new Error("Invalid arguments passed to jsPDF.line");return j===w.COMPAT?this.lines([[ze-ee,We-ve]],ee,ve,[1,1],rt||"S"):this.lines([[ze-ee,We-ve]],ee,ve,[1,1]).stroke()},m.__private__.lines=m.lines=function(ee,ve,ze,We,rt,Nt){var Ut,Wt,D,se,ue,_e,tt,ft,Qt,Br,ha,Gr;if(typeof ee=="number"&&(Gr=ze,ze=ve,ve=ee,ee=Gr),We=We||[1,1],Nt=Nt||!1,isNaN(ve)||isNaN(ze)||!Array.isArray(ee)||!Array.isArray(We)||!Ui(rt)||typeof Nt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Do(ve,ze),Ut=We[0],Wt=We[1],se=ee.length,Br=ve,ha=ze,D=0;D<se;D++)(ue=ee[D]).length===2?(Br=ue[0]*Ut+Br,ha=ue[1]*Wt+ha,Qi(Br,ha)):(_e=ue[0]*Ut+Br,tt=ue[1]*Wt+ha,ft=ue[2]*Ut+Br,Qt=ue[3]*Wt+ha,Br=ue[4]*Ut+Br,ha=ue[5]*Wt+ha,Hl(_e,tt,ft,Qt,Br,ha));return Nt&&co(),Fo(rt),this},m.path=function(ee){for(var ve=0;ve<ee.length;ve++){var ze=ee[ve],We=ze.c;switch(ze.op){case"m":Do(We[0],We[1]);break;case"l":Qi(We[0],We[1]);break;case"c":Hl.apply(this,We);break;case"h":co()}}return this},m.__private__.rect=m.rect=function(ee,ve,ze,We,rt){if(isNaN(ee)||isNaN(ve)||isNaN(ze)||isNaN(We)||!Ui(rt))throw new Error("Invalid arguments passed to jsPDF.rect");return j===w.COMPAT&&(We=-We),de([C(k(ee)),C(U(ve)),C(k(ze)),C(k(We)),"re"].join(" ")),Fo(rt),this},m.__private__.triangle=m.triangle=function(ee,ve,ze,We,rt,Nt,Ut){if(isNaN(ee)||isNaN(ve)||isNaN(ze)||isNaN(We)||isNaN(rt)||isNaN(Nt)||!Ui(Ut))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ze-ee,We-ve],[rt-ze,Nt-We],[ee-rt,ve-Nt]],ee,ve,[1,1],Ut,!0),this},m.__private__.roundedRect=m.roundedRect=function(ee,ve,ze,We,rt,Nt,Ut){if(isNaN(ee)||isNaN(ve)||isNaN(ze)||isNaN(We)||isNaN(rt)||isNaN(Nt)||!Ui(Ut))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Wt=4/3*(Math.SQRT2-1);return rt=Math.min(rt,.5*ze),Nt=Math.min(Nt,.5*We),this.lines([[ze-2*rt,0],[rt*Wt,0,rt,Nt-Nt*Wt,rt,Nt],[0,We-2*Nt],[0,Nt*Wt,-rt*Wt,Nt,-rt,Nt],[2*rt-ze,0],[-rt*Wt,0,-rt,-Nt*Wt,-rt,-Nt],[0,2*Nt-We],[0,-Nt*Wt,rt*Wt,-Nt,rt,-Nt]],ee+rt,ve,[1,1],Ut,!0),this},m.__private__.ellipse=m.ellipse=function(ee,ve,ze,We,rt){if(isNaN(ee)||isNaN(ve)||isNaN(ze)||isNaN(We)||!Ui(rt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Nt=4/3*(Math.SQRT2-1)*ze,Ut=4/3*(Math.SQRT2-1)*We;return Do(ee+ze,ve),Hl(ee+ze,ve-Ut,ee+Nt,ve-We,ee,ve-We),Hl(ee-Nt,ve-We,ee-ze,ve-Ut,ee-ze,ve),Hl(ee-ze,ve+Ut,ee-Nt,ve+We,ee,ve+We),Hl(ee+Nt,ve+We,ee+ze,ve+Ut,ee+ze,ve),Fo(rt),this},m.__private__.circle=m.circle=function(ee,ve,ze,We){if(isNaN(ee)||isNaN(ve)||isNaN(ze)||!Ui(We))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ee,ve,ze,ze,We)},m.setFont=function(ee,ve,ze){return ze&&(ve=T(ve,ze)),Et=mu(ee,ve,{disableWarning:!1}),this};var vs=m.__private__.getFont=m.getFont=function(){return er[mu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var ee,ve,ze={};for(ee in Er)if(Er.hasOwnProperty(ee))for(ve in ze[ee]=[],Er[ee])Er[ee].hasOwnProperty(ve)&&ze[ee].push(ve);return ze},m.addFont=function(ee,ve,ze,We,rt){var Nt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Nt.indexOf(arguments[3])!==-1?rt=arguments[3]:arguments[3]&&Nt.indexOf(arguments[3])==-1&&(ze=T(ze,We)),rt=rt||"Identity-H",fu.call(this,ee,ve,ze,rt)};var Aa,gu=e.lineWidth||.200025,zl=m.__private__.getLineWidth=m.getLineWidth=function(){return gu},FA=m.__private__.setLineWidth=m.setLineWidth=function(ee){return gu=ee,de(C(k(ee))+" w"),this};m.__private__.setLineDash=pr.API.setLineDash=pr.API.setLineDashPattern=function(ee,ve){if(ee=ee||[],ve=ve||0,isNaN(ve)||!Array.isArray(ee))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ee=ee.map(function(ze){return C(k(ze))}).join(" "),ve=C(k(ve)),de("["+ee+"] "+ve+" d"),this};var cd=m.__private__.getLineHeight=m.getLineHeight=function(){return oe*Aa};m.__private__.getLineHeight=m.getLineHeight=function(){return oe*Aa};var ud=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(ee){return typeof(ee=ee||1.15)=="number"&&(Aa=ee),this},gl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Aa};ud(e.lineHeight);var Hi=m.__private__.getHorizontalCoordinate=function(ee){return k(ee)},bs=m.__private__.getVerticalCoordinate=function(ee){return j===w.ADVANCED?ee:mr[F].mediaBox.topRightY-mr[F].mediaBox.bottomLeftY-k(ee)},m0=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(ee){return C(Hi(ee))},xu=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(ee){return C(bs(ee))},ki=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ge(ki)},m.__private__.setStrokeColor=m.setDrawColor=function(ee,ve,ze,We){return ki=he({ch1:ee,ch2:ve,ch3:ze,ch4:We,pdfColorType:"draw",precision:2}),de(ki),this};var vu=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ge(vu)},m.__private__.setFillColor=m.setFillColor=function(ee,ve,ze,We){return vu=he({ch1:ee,ch2:ve,ch3:ze,ch4:We,pdfColorType:"fill",precision:2}),de(vu),this};var Cc=e.textColor||"0 g",mf=m.__private__.getTextColor=m.getTextColor=function(){return ge(Cc)};m.__private__.setTextColor=m.setTextColor=function(ee,ve,ze,We){return Cc=he({ch1:ee,ch2:ve,ch3:ze,ch4:We,pdfColorType:"text",precision:3}),this};var dd=e.charSpace,pf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(dd||0)};m.__private__.setCharSpace=m.setCharSpace=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return dd=ee,this};var DA=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(ee){var ve=m.CapJoinStyles[ee];if(ve===void 0)throw new Error("Line cap style of '"+ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return DA=ve,de(ve+" J"),this};var fd=0;m.__private__.setLineJoin=m.setLineJoin=function(ee){var ve=m.CapJoinStyles[ee];if(ve===void 0)throw new Error("Line join style of '"+ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fd=ve,de(ve+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(ee){if(ee=ee||0,isNaN(ee))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(C(k(ee))+" M"),this},m.GState=Jk,m.setGState=function(ee){(ee=typeof ee=="string"?Pr[Pa[ee]]:bu(null,ee)).equals(Fn)||(de("/"+ee.id+" gs"),Fn=ee)};var bu=function(ee,ve){if(!ee||!Pa[ee]){var ze=!1;for(var We in Pr)if(Pr.hasOwnProperty(We)&&Pr[We].equals(ve)){ze=!0;break}if(ze)ve=Pr[We];else{var rt="GS"+(Object.keys(Pr).length+1).toString(10);Pr[rt]=ve,ve.id=rt}return ee&&(Pa[ee]=ve.id),Yr.publish("addGState",ve),ve}};m.addGState=function(ee,ve){return bu(ee,ve),this},m.saveGraphicsState=function(){return de("q"),$r.push({key:Et,size:oe,color:Cc}),this},m.restoreGraphicsState=function(){de("Q");var ee=$r.pop();return Et=ee.key,oe=ee.size,Cc=ee.color,Fn=null,this},m.setCurrentTransformationMatrix=function(ee){return de(ee.toString()+" cm"),this},m.comment=function(ee){return de("#"+ee),this};var Ad=function(ee,ve){var ze=ee||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ze},set:function(Nt){isNaN(Nt)||(ze=parseFloat(Nt))}});var We=ve||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return We},set:function(Nt){isNaN(Nt)||(We=parseFloat(Nt))}});var rt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return rt},set:function(Nt){rt=Nt.toString()}}),this},gf=function(ee,ve,ze,We){Ad.call(this,ee,ve),this.type="rect";var rt=ze||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return rt},set:function(Ut){isNaN(Ut)||(rt=parseFloat(Ut))}});var Nt=We||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Nt},set:function(Ut){isNaN(Ut)||(Nt=parseFloat(Ut))}}),this},hd=function(){this.page=Rr,this.currentPage=F,this.pages=ke.slice(0),this.pagesContext=mr.slice(0),this.x=Ve,this.y=Bt,this.matrix=dr,this.width=wu(F),this.height=zi(F),this.outputDestination=Re,this.id="",this.objectNumber=-1};hd.prototype.restore=function(){Rr=this.page,F=this.currentPage,mr=this.pagesContext,ke=this.pages,Ve=this.x,Bt=this.y,dr=this.matrix,md(F,this.width),xf(F,this.height),Re=this.outputDestination};var yu=function(ee,ve,ze,We,rt){Rs.push(new hd),Rr=F=0,ke=[],Ve=ee,Bt=ve,dr=rt,ji([ze,We])},p0=function(ee){if(Dn[ee])Rs.pop().restore();else{var ve=new hd,ze="Xo"+(Object.keys(Ya).length+1).toString(10);ve.id=ze,Dn[ee]=ze,Ya[ze]=ve,Yr.publish("addFormObject",ve),Rs.pop().restore()}};for(var jc in m.beginFormObject=function(ee,ve,ze,We,rt){return yu(ee,ve,ze,We,rt),this},m.endFormObject=function(ee){return p0(ee),this},m.doFormObject=function(ee,ve){var ze=Ya[Dn[ee]];return de("q"),de(ve.toString()+" cm"),de("/"+ze.id+" Do"),de("Q"),this},m.getFormObject=function(ee){var ve=Ya[Dn[ee]];return{x:ve.x,y:ve.y,width:ve.width,height:ve.height,matrix:ve.matrix}},m.save=function(ee,ve){return ee=ee||"generated.pdf",(ve=ve||{}).returnPromise=ve.returnPromise||!1,ve.returnPromise===!1?(Kp(hf(yc()),ee),typeof Kp.unload=="function"&&Mr.setTimeout&&setTimeout(Kp.unload,911),this):new Promise(function(ze,We){try{var rt=Kp(hf(yc()),ee);typeof Kp.unload=="function"&&Mr.setTimeout&&setTimeout(Kp.unload,911),ze(rt)}catch(Nt){We(Nt.message)}})},pr.API)pr.API.hasOwnProperty(jc)&&(jc==="events"&&pr.API.events.length?function(ee,ve){var ze,We,rt;for(rt=ve.length-1;rt!==-1;rt--)ze=ve[rt][0],We=ve[rt][1],ee.subscribe.apply(ee,[ze].concat(typeof We=="function"?[We]:We))}(Yr,pr.API.events):m[jc]=pr.API[jc]);var wu=m.getPageWidth=function(ee){return(mr[ee=ee||F].mediaBox.topRightX-mr[ee].mediaBox.bottomLeftX)/gt},md=m.setPageWidth=function(ee,ve){mr[ee].mediaBox.topRightX=ve*gt+mr[ee].mediaBox.bottomLeftX},zi=m.getPageHeight=function(ee){return(mr[ee=ee||F].mediaBox.topRightY-mr[ee].mediaBox.bottomLeftY)/gt},xf=m.setPageHeight=function(ee,ve){mr[ee].mediaBox.topRightY=ve*gt+mr[ee].mediaBox.bottomLeftY};return m.internal={pdfEscape:ja,getStyle:Oo,getFont:vs,getFontSize:be,getCharSpace:pf,getTextColor:mf,getLineHeight:cd,getLineHeightFactor:gl,getLineWidth:zl,write:Ce,getHorizontalCoordinate:Hi,getVerticalCoordinate:bs,getCoordinateString:m0,getVerticalCoordinateString:xu,collections:{},newObject:Ka,newAdditionalObject:Ue,newObjectDeferred:Ja,newObjectDeferredBegin:we,getFilters:Be,putStream:Qe,events:Yr,scaleFactor:gt,pageSize:{getWidth:function(){return wu(F)},setWidth:function(ee){md(F,ee)},getHeight:function(){return zi(F)},setHeight:function(ee){xf(F,ee)}},encryptionOptions:d,encryption:cn,getEncryptor:Nc,output:wc,getNumberOfPages:Ra,pages:ke,out:de,f2:L,f3:P,getPageInfo:Ml,getPageInfoByObjId:Sr,getCurrentPageInfo:Ul,getPDFVersion:x,Point:Ad,Rectangle:gf,Matrix:Zt,hasHotfix:Ll},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return wu(F)},set:function(ee){md(F,ee)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return zi(F)},set:function(ee){xf(F,ee)},enumerable:!0,configurable:!0}),BA.call(m,ye),Et="F1",Au(n,r),Yr.publish("initialized"),m}jv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},jv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},jv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},jv.prototype.processOwnerPassword=function(e,t){return uD(cD(t).substr(0,5),e)},jv.prototype.encryptor=function(e,t){var r=cD(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return uD(r,a)}},Jk.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||gn(e)!==gn(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},pr.API={events:[]},pr.version="2.5.2";var ks=pr.API,qM=1,mx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ev=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Wr=function(e){return e.toFixed(2)},Z0=function(e){return e.toFixed(5)};ks.__acroform__={};var vc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},AW=function(e){return e*qM},Kf=function(e){var t=new Lce,r=hr.internal.getHeight(e)||0,a=hr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Wr(a)),Number(Wr(r))],t},uYe=ks.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},dYe=ks.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},fYe=ks.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Ys=ks.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return fYe(e,t-1)},Js=ks.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return uYe(e,t-1)},Zs=ks.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return dYe(e,t-1)},AYe=ks.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,n=e[0],s=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(n)||0,c.lowerLeft_Y=a(s+l)||0,c.upperRight_X=r(n+o)||0,c.upperRight_Y=a(s)||0,[Number(Wr(c.lowerLeft_X)),Number(Wr(c.lowerLeft_Y)),Number(Wr(c.upperRight_X)),Number(Wr(c.upperRight_Y))]},hYe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=dD(e,r),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+n+" "+Wr(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Kf(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},dD=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=e.multiline?n.map(function(P){return P.split(`
`)}):n.map(function(P){return[P]});var s=r,o=hr.internal.getHeight(e)||0;o=o<0?-o:o;var l=hr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,k,M){if(P+1<n.length){var U=k+" "+n[P+1][0];return KC(U,e,M).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=KC("3",e,s).height,h=e.multiline?o-s:(o-f)/2,m=h+=2,g=0,x=0,v=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+KC(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",w=0,j=0;j<n.length;j++)if(n.hasOwnProperty(j)){var O=!1;if(n[j].length!==1&&v!==n[j].length-1){if((f+2)*(w+2)+2>o)continue e;y+=n[j][v],O=!0,x=j,j--}else{y=(y+=n[j][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var B=parseInt(j),T=c(B,y,s),C=j>=n.length-1;if(T&&!C){y+=" ",v=0;continue}if(T||C){if(C)x=B;else if(e.multiline&&(f+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>o)continue e;x=B}}for(var _="",S=g;S<=x;S++){var L=n[S];if(e.multiline){if(S===x){_+=L[v]+" ",v=(v+1)%L.length;continue}if(S===g){_+=L[L.length-1]+" ";continue}}_+=L[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,d=KC(_,e,s).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=Wr(u)+" "+Wr(m)+` Td
`,t+="("+mx(_)+`) Tj
`,t+=-Wr(u)+` 0 Td
`,m=-(s+2),d=0,g=O?x:x+1,w++,y=""}break}return a.text=t,a.fontSize=s,a},KC=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},mYe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},pYe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},gYe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=r,n=e[r];t.internal.newObjectDeferredBegin(n.objId,!0),gn(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete e[a]}},xYe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(lf.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(mYe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");qM=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Mce,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in a)if(a.hasOwnProperty(n)){var s=a[n];s.objId=void 0,s.hasAnnotation&&pYe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(a,n){var s=!a;for(var o in a||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=AYe(l.Rect,n)),n.internal.newObjectDeferredBegin(l.objId,!0),l.DA=hr.createDefaultAppearanceStream(l),gn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=hYe(l);c.push({key:"AP",value:"<</N "+d+">>"}),n.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var g=m[o];typeof g=="function"&&(g=g.call(n,l)),f+="/"+o+" "+g+" ",n.internal.acroformPlugin.xForms.indexOf(g)>=0||n.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(n,l)),f+="/"+o+" "+g,n.internal.acroformPlugin.xForms.indexOf(g)>=0||n.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}n.internal.putStream({additionalKeyValues:c,objectId:l.objId}),n.internal.out("endobj")}s&&gYe(n.internal.acroformPlugin.xForms,n)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Rce=ks.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(o){return o};if(Array.isArray(e)){for(var n="[",s=0;s<e.length;s++)switch(s!==0&&(n+=" "),gn(e[s])){case"boolean":case"number":case"object":n+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),n+="("+mx(a(e[s].toString()))+")"):n+=e[s].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},JI=function(e,t,r){var a=function(n){return n};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+mx(a(e))+")"},cA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};cA.prototype.toString=function(){return this.objId+" 0 R"},cA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},cA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],n=this[a];n&&(Array.isArray(n)?e.push({key:a,value:Rce(n,this.objId,this.scope)}):n instanceof cA?(n.scope=this.scope,e.push({key:a,value:n.objId+" 0 R"})):typeof n!="function"&&e.push({key:a,value:n}))}return e};var Lce=function(){cA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};vc(Lce,cA);var Mce=function(){cA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+mx(r(e))+")"}},set:function(r){e=r}})};vc(Mce,cA);var lf=function e(){cA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ys(t,3)},set:function(y){y?this.F=Js(t,3):this.F=Zs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(y){a=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(y){a[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(y){a[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(y){a[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(y){a[3]=y}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Zk)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+mx(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/qM:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Zk||this instanceof Ng))return JI(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Zi?h:JI(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof Zi?y:y.substr(0,1)==="("?ev(y.substr(1,y.length-2)):ev(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zi?ev(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Zi?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Zi?m:JI(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Zi?y:y.substr(0,1)==="("?ev(y.substr(1,y.length-2)):ev(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zi?ev(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Zi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,1)},set:function(y){y?this.Ff=Js(this.Ff,1):this.Ff=Zs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,2)},set:function(y){y?this.Ff=Js(this.Ff,2):this.Ff=Zs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,3)},set:function(y){y?this.Ff=Js(this.Ff,3):this.Ff=Zs(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};vc(lf,cA);var ab=function(){lf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Rce(t,this.objId,this.scope)},set:function(r){var a,n;n=[],typeof(a=r)=="string"&&(n=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(a,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,18)},set:function(r){r?this.Ff=Js(this.Ff,18):this.Ff=Zs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Js(this.Ff,19):this.Ff=Zs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,20)},set:function(r){r?(this.Ff=Js(this.Ff,20),t.sort()):this.Ff=Zs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,22)},set:function(r){r?this.Ff=Js(this.Ff,22):this.Ff=Zs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,23)},set:function(r){r?this.Ff=Js(this.Ff,23):this.Ff=Zs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,27)},set:function(r){r?this.Ff=Js(this.Ff,27):this.Ff=Zs(this.Ff,27)}}),this.hasAppearanceStream=!1};vc(ab,lf);var nb=function(){ab.call(this),this.fontName="helvetica",this.combo=!1};vc(nb,ab);var sb=function(){nb.call(this),this.combo=!0};vc(sb,nb);var W5=function(){sb.call(this),this.edit=!0};vc(W5,sb);var Zi=function(){lf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,15)},set:function(r){r?this.Ff=Js(this.Ff,15):this.Ff=Zs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,16)},set:function(r){r?this.Ff=Js(this.Ff,16):this.Ff=Zs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,17)},set:function(r){r?this.Ff=Js(this.Ff,17):this.Ff=Zs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,26)},set:function(r){r?this.Ff=Js(this.Ff,26):this.Ff=Zs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,n=[];for(a in n.push("<<"),t)n.push("/"+a+" ("+mx(r(t[a]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){gn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};vc(Zi,lf);var X5=function(){Zi.call(this),this.pushButton=!0};vc(X5,Zi);var ib=function(){Zi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};vc(ib,Zi);var Zk=function(){var e,t;lf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),a)o.push("/"+s+" ("+mx(n(a[s]))+")");return o.push(">>"),o.join(`
`)},set:function(n){gn(n)==="object"&&(a=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(n){typeof n=="string"&&(a.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=hr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};vc(Zk,lf),ib.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},ib.prototype.createOption=function(e){var t=new Zk;return t.Parent=this,t.optionName=e,this.Kids.push(t),vYe.call(this.scope,t),t};var Y5=function(){Zi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=hr.CheckBox.createAppearanceStream()};vc(Y5,Zi);var Ng=function(){lf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,13)},set:function(t){t?this.Ff=Js(this.Ff,13):this.Ff=Zs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,21)},set:function(t){t?this.Ff=Js(this.Ff,21):this.Ff=Zs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,23)},set:function(t){t?this.Ff=Js(this.Ff,23):this.Ff=Zs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,24)},set:function(t){t?this.Ff=Js(this.Ff,24):this.Ff=Zs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,25)},set:function(t){t?this.Ff=Js(this.Ff,25):this.Ff=Zs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,26)},set:function(t){t?this.Ff=Js(this.Ff,26):this.Ff=Zs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};vc(Ng,lf);var J5=function(){Ng.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,14)},set:function(e){e?this.Ff=Js(this.Ff,14):this.Ff=Zs(this.Ff,14)}}),this.password=!0};vc(J5,Ng);var hr={CheckBox:{createAppearanceStream:function(){return{N:{On:hr.CheckBox.YesNormal},D:{On:hr.CheckBox.YesPushDown,Off:hr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Kf(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=dD(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Wr(hr.internal.getWidth(e))+" "+Wr(hr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Wr(s.fontSize)+" Tf "+n),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Kf(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),n=[],s=hr.internal.getHeight(e),o=hr.internal.getWidth(e),l=dD(e,e.caption);return n.push("1 g"),n.push("0 0 "+Wr(o)+" "+Wr(s)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+Wr(o-1)+" "+Wr(s-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+Wr(l.fontSize)+" Tf "+a),n.push(l.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Kf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Wr(hr.internal.getWidth(e))+" "+Wr(hr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:hr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=hr.RadioButton.Circle.YesNormal,t.D[e]=hr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Kf(e);t.scope=e.scope;var r=[],a=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=hr.internal.Bezier_C,s=Number((a*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Z0(hr.internal.getWidth(e)/2)+" "+Z0(hr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Kf(e);t.scope=e.scope;var r=[],a=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),s=Number((n*hr.internal.Bezier_C).toFixed(5)),o=Number((a*hr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Z0(hr.internal.getWidth(e)/2)+" "+Z0(hr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Z0(hr.internal.getWidth(e)/2)+" "+Z0(hr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Kf(e);t.scope=e.scope;var r=[],a=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),s=Number((n*hr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Z0(hr.internal.getWidth(e)/2)+" "+Z0(hr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:hr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=hr.RadioButton.Cross.YesNormal,t.D[e]=hr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Kf(e);t.scope=e.scope;var r=[],a=hr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Wr(hr.internal.getWidth(e)-2)+" "+Wr(hr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Wr(a.x1.x)+" "+Wr(a.x1.y)+" m"),r.push(Wr(a.x2.x)+" "+Wr(a.x2.y)+" l"),r.push(Wr(a.x4.x)+" "+Wr(a.x4.y)+" m"),r.push(Wr(a.x3.x)+" "+Wr(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Kf(e);t.scope=e.scope;var r=hr.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Wr(hr.internal.getWidth(e))+" "+Wr(hr.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Wr(hr.internal.getWidth(e)-2)+" "+Wr(hr.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Wr(r.x1.x)+" "+Wr(r.x1.y)+" m"),a.push(Wr(r.x2.x)+" "+Wr(r.x2.y)+" l"),a.push(Wr(r.x4.x)+" "+Wr(r.x4.y)+" m"),a.push(Wr(r.x3.x)+" "+Wr(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Kf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Wr(hr.internal.getWidth(e))+" "+Wr(hr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};hr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=hr.internal.getWidth(e),r=hr.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},hr.internal.getWidth=function(e){var t=0;return gn(e)==="object"&&(t=AW(e.Rect[2])),t},hr.internal.getHeight=function(e){var t=0;return gn(e)==="object"&&(t=AW(e.Rect[3])),t};var vYe=ks.addField=function(e){if(xYe(this,e),!(e instanceof lf))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ks.AcroFormChoiceField=ab,ks.AcroFormListBox=nb,ks.AcroFormComboBox=sb,ks.AcroFormEditBox=W5,ks.AcroFormButton=Zi,ks.AcroFormPushButton=X5,ks.AcroFormRadioButton=ib,ks.AcroFormCheckBox=Y5,ks.AcroFormTextField=Ng,ks.AcroFormPasswordField=J5,ks.AcroFormAppearance=hr,ks.AcroForm={ChoiceField:ab,ListBox:nb,ComboBox:sb,EditBox:W5,Button:Zi,PushButton:X5,RadioButton:ib,CheckBox:Y5,TextField:Ng,PasswordField:J5,Appearance:hr},pr.AcroForm={ChoiceField:ab,ListBox:nb,ComboBox:sb,EditBox:W5,Button:Zi,PushButton:X5,RadioButton:ib,CheckBox:Y5,TextField:Ng,PasswordField:J5,Appearance:hr};pr.AcroForm;function Uce(e){return e.reduce(function(t,r,a){return t[r]=a,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(P,k){var M,U,z,Q,q,V=t;if((k=k||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(T(P))for(q in r)for(z=r[q],M=0;M<z.length;M+=1){for(Q=!0,U=0;U<z[M].length;U+=1)if(z[M][U]!==void 0&&z[M][U]!==P[U]){Q=!1;break}if(Q===!0){V=q;break}}else for(q in r)for(z=r[q],M=0;M<z.length;M+=1){for(Q=!0,U=0;U<z[M].length;U+=1)if(z[M][U]!==void 0&&z[M][U]!==P.charCodeAt(U)){Q=!1;break}if(Q===!0){V=q;break}}return V===t&&k!==t&&(V=k),V},n=function P(k){for(var M=this.internal.write,U=this.internal.putStream,z=(0,this.internal.getFilters)();z.indexOf("FlateEncode")!==-1;)z.splice(z.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:k.width}),Q.push({key:"Height",value:k.height}),k.colorSpace===v.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===v.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var q="",V=0,Y=k.transparency.length;V<Y;V++)q+=k.transparency[V]+" "+k.transparency[V]+" ";Q.push({key:"Mask",value:"["+q+"]"})}k.sMask!==void 0&&Q.push({key:"SMask",value:k.objectId+1+" 0 R"});var K=k.filter!==void 0?["/"+k.filter]:void 0;if(U({data:k.data,additionalKeyValues:Q,alreadyAppliedFilters:K,objectId:k.objectId}),M("endobj"),"sMask"in k&&k.sMask!==void 0){var J="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,R={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:J,data:k.sMask};"filter"in k&&(R.filter=k.filter),P.call(this,R)}if(k.colorSpace===v.INDEXED){var F=this.internal.newObject();U({data:_(new Uint8Array(k.palette)),objectId:F}),M("endobj")}},s=function(){var P=this.internal.collections.addImage_images;for(var k in P)n.call(this,P[k])},o=function(){var P,k=this.internal.collections.addImage_images,M=this.internal.write;for(var U in k)M("/I"+(P=k[U]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(P){return typeof e["process"+P.toUpperCase()]=="function"},f=function(P){return gn(P)==="object"&&P.nodeType===1},h=function(P,k){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var M=""+P.getAttribute("src");if(M.indexOf("data:image/")===0)return ew(unescape(M).split("base64,").pop());var U=e.loadFile(M,!0);if(U!==void 0)return U}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var z;switch(k){case"PNG":z="image/png";break;case"WEBP":z="image/webp";break;case"JPEG":case"JPG":default:z="image/jpeg"}return ew(P.toDataURL(z,1).split("base64,").pop())}},m=function(P){var k=this.internal.collections.addImage_images;if(k){for(var M in k)if(P===k[M].alias)return k[M]}},g=function(P,k,M){return P||k||(P=-96,k=-96),P<0&&(P=-1*M.width*72/P/this.internal.scaleFactor),k<0&&(k=-1*M.height*72/k/this.internal.scaleFactor),P===0&&(P=k*M.width/M.height),k===0&&(k=P*M.height/M.width),[P,k]},x=function(P,k,M,U,z,Q){var q=g.call(this,M,U,z),V=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,K=c.call(this);if(M=q[0],U=q[1],K[z.index]=z,Q){Q*=Math.PI/180;var J=Math.cos(Q),R=Math.sin(Q),F=function(X){return X.toFixed(4)},W=[F(J),F(R),F(-1*R),F(J),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,V(P),Y(k+U),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([V(M),"0","0",V(U),"0","0","cm"].join(" "))):this.internal.write([V(M),"0","0",V(U),V(P),Y(k+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+z.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(P){var k,M,U=0;if(typeof P=="string")for(M=P.length,k=0;k<M;k++)U=(U<<5)-U+P.charCodeAt(k),U|=0;else if(T(P))for(M=P.byteLength/2,k=0;k<M;k++)U=(U<<5)-U+P[k],U|=0;return U},j=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var k=!0;return P.length===0&&(k=!1),P.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(k=!1),k},O=e.__addimage__.extractImageFromDataUrl=function(P){var k=(P=P||"").split("base64,"),M=null;if(k.length===2){var U=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(k[0]);Array.isArray(U)&&(M={mimeType:U[1],charset:U[2],data:k[1]})}return M},B=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return B()&&P instanceof ArrayBuffer};var T=e.__addimage__.isArrayBufferView=function(P){return B()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},C=e.__addimage__.binaryStringToUint8Array=function(P){for(var k=P.length,M=new Uint8Array(k),U=0;U<k;U++)M[U]=P.charCodeAt(U);return M},_=e.__addimage__.arrayBufferToBinaryString=function(P){for(var k="",M=T(P)?P:new Uint8Array(P),U=0;U<M.length;U+=8192)k+=String.fromCharCode.apply(null,M.subarray(U,U+8192));return k};e.addImage=function(){var P,k,M,U,z,Q,q,V,Y;if(typeof arguments[1]=="number"?(k=t,M=arguments[1],U=arguments[2],z=arguments[3],Q=arguments[4],q=arguments[5],V=arguments[6],Y=arguments[7]):(k=arguments[1],M=arguments[2],U=arguments[3],z=arguments[4],Q=arguments[5],q=arguments[6],V=arguments[7],Y=arguments[8]),gn(P=arguments[0])==="object"&&!f(P)&&"imageData"in P){var K=P;P=K.imageData,k=K.format||k||t,M=K.x||M||0,U=K.y||U||0,z=K.w||K.width||z,Q=K.h||K.height||Q,q=K.alias||q,V=K.compression||V,Y=K.rotation||K.angle||Y}var J=this.internal.getFilters();if(V===void 0&&J.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(M)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var R=S.call(this,P,k,q,V);return x.call(this,M,U,z,Q,R,Y),this};var S=function(P,k,M,U){var z,Q,q;if(typeof P=="string"&&a(P)===t){P=unescape(P);var V=L(P,!1);(V!==""||(V=e.loadFile(P,!0))!==void 0)&&(P=V)}if(f(P)&&(P=h(P,k)),k=a(P,k),!d(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((q=M)==null||q.length===0)&&(M=function(Y){return typeof Y=="string"||T(Y)?w(Y):T(Y.data)?w(Y.data):null}(P)),(z=m.call(this,M))||(B()&&(P instanceof Uint8Array||k==="RGBA"||(Q=P,P=C(P))),z=this["process"+k.toUpperCase()](P,u.call(this),M,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in e.image_compression?Y:y.NONE}(U),Q)),!z)throw new Error("An unknown error occurred whilst processing the image.");return z},L=e.__addimage__.convertBase64ToBinaryString=function(P,k){var M;k=typeof k!="boolean"||k;var U,z="";if(typeof P=="string"){U=(M=O(P))!==null?M.data:P;try{z=ew(U)}catch(Q){if(k)throw j(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};e.getImageProperties=function(P){var k,M,U="";if(f(P)&&(P=h(P)),typeof P=="string"&&a(P)===t&&((U=L(P,!1))===""&&(U=e.loadFile(P)||""),P=U),M=a(P),!d(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(!B()||P instanceof Uint8Array||(P=C(P)),!(k=this["process"+M.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=M,k}})(pr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};pr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,n,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((a=u[f]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){a=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=a.title||"Note";s="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+m(y(a.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(y(w))+") >>",x.content=s;var j=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+j,a.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var O=a.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+m(g(a.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(a.options.name){var B=this.annotations._nameMap[a.options.name];a.options.pageNumber=B.page,a.options.top=B.y}else a.options.top||(a.options.top=0);if(n="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",s="",a.options.url)s="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(a.options.url))+") >>";else if(a.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,s+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var T=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),s+=" /XYZ "+a.options.left+" "+T+" "+a.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,n,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(a),w:c(r+n),h:u(a+s)},options:o,type:"link"})},e.textWithLink=function(r,a,n,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,a,n,s),n+=.2*u,s.align==="center"&&(a-=c/2),s.align==="right"&&(a-=c),this.link(a,n-u,l,o,s),c},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(pr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&n.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,w="",j=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(j++,typeof(y=y[x.charCodeAt(v)])=="number"&&(w+=String.fromCharCode(y),y=r,j=0),v===x.length-1&&(y=r,w+=x.charAt(v-(j-1)),v-=j-1,j=0)):(y=r,w+=x.charAt(v-j),v-=j,j=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&a[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,v,y){return o(x)?s(x)===!1?-1:!u(x)||!o(v)&&!o(y)||!o(y)&&l(v)||l(x)&&!o(v)||l(x)&&c(v)||l(x)&&l(v)?0:d(x)&&o(v)&&!l(v)&&o(y)&&u(y)?3:l(x)||!o(y)?1:2:-1},m=function(x){var v=0,y=0,w=0,j="",O="",B="",T=(x=x||"").split("\\s+"),C=[];for(v=0;v<T.length;v+=1){for(C.push(""),y=0;y<T[v].length;y+=1)j=T[v][y],O=T[v][y-1],B=T[v][y+1],o(j)?(w=h(j,O,B),C[v]+=w!==-1?String.fromCharCode(t[j.charCodeAt(0)][w]):j):C[v]+=j;C[v]=f(C[v])}return C.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var w=0;for(y=[],w=0;w<v.length;w+=1)Array.isArray(v[w])?y.push([m(v[w][0]),v[w][1],v[w][2]]):y.push([m(v[w])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(pr.API),pr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var n;if((r=r||"2d")!=="2d")return null;for(n in a)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=a[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(pr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){a.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,O){return j.concat(v.splitTextToSize(O,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)m<(x=this.getStringUnitWidth(c[w],{font:f})*d)&&(m=x);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(a.call(this),!d)throw new Error("No data for PDF table.");var m,g,x,v,y=[],w=[],j=[],O={},B={},T=[],C=[],_=(h=h||{}).autoSize||!1,S=h.printHeaders!==!1,L=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,P=h.margins||Object.assign({width:this.getPageWidth()},t),k=typeof h.padding=="number"?h.padding:3,M=h.headerBackgroundColor||"#c8c8c8",U=h.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=U,this.setFontSize(L),f==null)w=y=Object.keys(d[0]),j=y.map(function(){return"left"});else if(Array.isArray(f)&&gn(f[0])==="object")for(y=f.map(function(K){return K.name}),w=f.map(function(K){return K.prompt||K.name||""}),j=f.map(function(K){return K.align||"left"}),m=0;m<f.length;m+=1)B[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,j=y.map(function(){return"left"}));if(_||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(O[v=y[m]]=d.map(function(K){return K[v]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(w[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=O[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)T.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[v]=Math.max.apply(null,T)+k+k,T=[]}if(S){var z={};for(m=0;m<y.length;m+=1)z[y[m]]={},z[y[m]].text=w[m],z[y[m]].align=j[m];var Q=l.call(this,z,B);C=y.map(function(K){return new s(c,u,B[K],Q,z[K].text,void 0,z[K].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var q=f.reduce(function(K,J){return K[J.name]=J.align,K},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var V=l.call(this,d[m],B);for(x=0;x<y.length;x+=1){var Y=d[m][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:x,data:Y},this),o.call(this,new s(c,u,B[y[x]],V,Y,m+2,q[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(pr.API);var Qce={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Hce=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],fD=Uce(Hce),zce=[100,200,300,400,500,600,700,800,900],bYe=Uce(zce);function AD(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Qce[s=s||"normal"]?s:"normal"}(e.style),a=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),n=function(s){return typeof fD[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:a,stretch:n,src:e.src||[],ref:e.ref||{name:t,style:[n,r,a].join(" ")}}}function hW(e,t,r,a){var n;for(n=r;n>=0&&n<t.length;n+=a)if(e[t[n]])return e[t[n]];for(n=r;n>=0&&n<t.length;n-=a)if(e[t[n]])return e[t[n]]}var yYe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},mW={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function pW(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function wYe(e,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",n=Object.assign({},yYe,r.genericFontFamilies||{}),s=null,o=null,l=0;l<t.length;++l)if(n[(s=AD(t[l])).family]&&(s.family=n[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+pW(s)+"' and default family '"+a+"'.");if(o=function(c,u){if(u[c])return u[c];var d=fD[c],f=d<=fD.normal?-1:1,h=hW(u,Hce,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,o),o=function(c,u){if(u[c])return u[c];for(var d=Qce[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=bYe[c],f=hW(u,zce,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+pW(s)+"'.");return o}function gW(e){return e.trimLeft()}function NYe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function EYe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var WC,xW,vW,ZI=["times"];(function(e){var t,r,a,n,s,o,l,c,u,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new o,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new o,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=R;Object.defineProperty(this,"pdf",{get:function(){return F}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(Te){W=!!Te}});var X=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return X},set:function(Te){X=!!Te}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(Te){isNaN(Te)||(ne=Te)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(Te){isNaN(Te)||(le=Te)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Te){var de;typeof Te=="number"?de=[Te,Te,Te,Te]:((de=new Array(4))[0]=Te[0],de[1]=Te.length>=2?Te[1]:de[0],de[2]=Te.length>=3?Te[2]:de[0],de[3]=Te.length>=4?Te[3]:de[1]),u.margin=de}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Te){ie=Te}});var ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return ae},set:function(Te){ae=Te}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(Te){Ae=Te}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Te){Te instanceof d&&(u=Te)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Te){u.path=Te}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(Te){ke=Te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Te){var de;de=h(Te),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Te){var de=h(Te);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Te){["butt","round","square"].indexOf(Te)!==-1&&(this.ctx.lineCap=Te,this.pdf.setLineCap(Te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Te){isNaN(Te)||(this.ctx.lineWidth=Te,this.pdf.setLineWidth(Te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Te){["bevel","round","miter"].indexOf(Te)!==-1&&(this.ctx.lineJoin=Te,this.pdf.setLineJoin(Te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Te){isNaN(Te)||(this.ctx.miterLimit=Te,this.pdf.setMiterLimit(Te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Te){this.ctx.textBaseline=Te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Te){["right","end","center","left","start"].indexOf(Te)!==-1&&(this.ctx.textAlign=Te)}});var re=null;function Re(Te,de){if(re===null){var Ce=function(me){var ye=[];return Object.keys(me).forEach(function(oe){me[oe].forEach(function(fe){var be=null;switch(fe){case"bold":be={family:oe,weight:"bold"};break;case"italic":be={family:oe,style:"italic"};break;case"bolditalic":be={family:oe,weight:"bold",style:"italic"};break;case"":case"normal":be={family:oe}}be!==null&&(be.ref={name:oe,style:fe},ye.push(be))})}),ye}(Te.getFontList());re=function(me){for(var ye={},oe=0;oe<me.length;++oe){var fe=AD(me[oe]),be=fe.family,Pe=fe.stretch,$e=fe.style,Ke=fe.weight;ye[be]=ye[be]||{},ye[be][Pe]=ye[be][Pe]||{},ye[be][Pe][$e]=ye[be][Pe][$e]||{},ye[be][Pe][$e][Ke]=fe}return ye}(Ce.concat(de))}return re}var Le=null;Object.defineProperty(this,"fontFaces",{get:function(){return Le},set:function(Te){re=null,Le=Te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Te){var de;if(this.ctx.font=Te,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Te))!==null){var Ce=de[1],me=(de[2],de[3]),ye=de[4],oe=(de[5],de[6]),fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ye)[2];ye=Math.floor(fe==="px"?parseFloat(ye)*this.pdf.internal.scaleFactor:fe==="em"?parseFloat(ye)*this.pdf.getFontSize():parseFloat(ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ye);var be=function(xt){var Et,gt,Ve=[],Bt=xt.trim();if(Bt==="")return ZI;if(Bt in mW)return[mW[Bt]];for(;Bt!=="";){switch(gt=null,Et=(Bt=gW(Bt)).charAt(0)){case'"':case"'":gt=NYe(Bt.substring(1),Et);break;default:gt=EYe(Bt)}if(gt===null||(Ve.push(gt[0]),(Bt=gW(gt[1]))!==""&&Bt.charAt(0)!==","))return ZI;Bt=Bt.replace(/^,/,"")}return Ve}(oe);if(this.fontFaces){var Pe=wYe(Re(this.pdf,this.fontFaces),be.map(function(xt){return{family:xt,stretch:"normal",weight:me,style:Ce}}));this.pdf.setFont(Pe.ref.name,Pe.ref.style)}else{var $e="";(me==="bold"||parseInt(me,10)>=700||Ce==="bold")&&($e="bold"),Ce==="italic"&&($e+="italic"),$e.length===0&&($e="normal");for(var Ke="",nt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},He=0;He<be.length;He++){if(this.pdf.internal.getFont(be[He],$e,{noFallback:!0,disableWarning:!0})!==void 0){Ke=be[He];break}if($e==="bolditalic"&&this.pdf.internal.getFont(be[He],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ke=be[He],$e="bold";else if(this.pdf.internal.getFont(be[He],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ke=be[He],$e="normal";break}}if(Ke===""){for(var it=0;it<be.length;it++)if(nt[be[it]]){Ke=nt[be[it]];break}}Ke=Ke===""?"Times":Ke,this.pdf.setFont(Ke,$e)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Te){this.ctx.globalCompositeOperation=Te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Te){this.ctx.globalAlpha=Te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Te){this.ctx.lineDashOffset=Te,J.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Te){this.ctx.lineDash=Te,J.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Te){this.ctx.ignoreClearRect=!!Te}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){O.call(this,"fill",!1)},f.prototype.stroke=function(){O.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,F){if(isNaN(R)||isNaN(F))throw Bn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new o(R,F));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(R,F)},f.prototype.closePath=function(){var R=new o(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&gn(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){R=new o(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(R.x,R.y)},f.prototype.lineTo=function(R,F){if(isNaN(R)||isNaN(F))throw Bn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new o(R,F));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,F,W,X){if(isNaN(W)||isNaN(X)||isNaN(R)||isNaN(F))throw Bn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(W,X)),le=this.ctx.transform.applyToPoint(new o(R,F));this.path.push({type:"qct",x1:le.x,y1:le.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},f.prototype.bezierCurveTo=function(R,F,W,X,ne,le){if(isNaN(ne)||isNaN(le)||isNaN(R)||isNaN(F)||isNaN(W)||isNaN(X))throw Bn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new o(ne,le)),ae=this.ctx.transform.applyToPoint(new o(R,F)),Ae=this.ctx.transform.applyToPoint(new o(W,X));this.path.push({type:"bct",x1:ae.x,y1:ae.y,x2:Ae.x,y2:Ae.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},f.prototype.arc=function(R,F,W,X,ne,le){if(isNaN(R)||isNaN(F)||isNaN(W)||isNaN(X)||isNaN(ne))throw Bn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new o(R,F));R=ie.x,F=ie.y;var ae=this.ctx.transform.applyToPoint(new o(0,W)),Ae=this.ctx.transform.applyToPoint(new o(0,0));W=Math.sqrt(Math.pow(ae.x-Ae.x,2)+Math.pow(ae.y-Ae.y,2))}Math.abs(ne-X)>=2*Math.PI&&(X=0,ne=2*Math.PI),this.path.push({type:"arc",x:R,y:F,radius:W,startAngle:X,endAngle:ne,counterclockwise:le})},f.prototype.arcTo=function(R,F,W,X,ne){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,F,W,X){if(isNaN(R)||isNaN(F)||isNaN(W)||isNaN(X))throw Bn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,F),this.lineTo(R+W,F),this.lineTo(R+W,F+X),this.lineTo(R,F+X),this.lineTo(R,F),this.lineTo(R+W,F),this.lineTo(R,F)},f.prototype.fillRect=function(R,F,W,X){if(isNaN(R)||isNaN(F)||isNaN(W)||isNaN(X))throw Bn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,F,W,X),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},f.prototype.strokeRect=function(R,F,W,X){if(isNaN(R)||isNaN(F)||isNaN(W)||isNaN(X))throw Bn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(R,F,W,X),this.stroke())},f.prototype.clearRect=function(R,F,W,X){if(isNaN(R)||isNaN(F)||isNaN(W)||isNaN(X))throw Bn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,F,W,X))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var X=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=X}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(F),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(R){var F,W,X,ne;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))F=0,W=0,X=0,ne=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(le!==null)F=parseInt(le[1]),W=parseInt(le[2]),X=parseInt(le[3]),ne=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)F=parseInt(le[1]),W=parseInt(le[2]),X=parseInt(le[3]),ne=parseFloat(le[4]);else{if(ne=1,typeof R=="string"&&R.charAt(0)!=="#"){var ie=new Fce(R);R=ie.ok?ie.toHex():"#000000"}R.length===4?(F=R.substring(1,2),F+=F,W=R.substring(2,3),W+=W,X=R.substring(3,4),X+=X):(F=R.substring(1,3),W=R.substring(3,5),X=R.substring(5,7)),F=parseInt(F,16),W=parseInt(W,16),X=parseInt(X,16)}}return{r:F,g:W,b:X,a:ne,style:R}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,F,W,X){if(isNaN(F)||isNaN(W)||typeof R!="string")throw Bn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(X=isNaN(X)?void 0:X,!m.call(this)){var ne=V(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;k.call(this,{text:R,x:F,y:W,scale:le,angle:ne,align:this.textAlign,maxWidth:X})}},f.prototype.strokeText=function(R,F,W,X){if(isNaN(F)||isNaN(W)||typeof R!="string")throw Bn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){X=isNaN(X)?void 0:X;var ne=V(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;k.call(this,{text:R,x:F,y:W,scale:le,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:X})}},f.prototype.measureText=function(R){if(typeof R!="string")throw Bn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,W=this.pdf.internal.scaleFactor,X=F.internal.getFontSize(),ne=F.getStringUnitWidth(R)*X/F.internal.scaleFactor,le=function(ie){var ae=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this};return new le({width:ne*=Math.round(96*W/72*1e4)/1e4})},f.prototype.scale=function(R,F){if(isNaN(R)||isNaN(F))throw Bn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new c(R,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.rotate=function(R){if(isNaN(R))throw Bn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},f.prototype.translate=function(R,F){if(isNaN(R)||isNaN(F))throw Bn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new c(1,0,0,1,R,F);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.transform=function(R,F,W,X,ne,le){if(isNaN(R)||isNaN(F)||isNaN(W)||isNaN(X)||isNaN(ne)||isNaN(le))throw Bn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(R,F,W,X,ne,le);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(R,F,W,X,ne,le){R=isNaN(R)?1:R,F=isNaN(F)?0:F,W=isNaN(W)?0:W,X=isNaN(X)?1:X,ne=isNaN(ne)?0:ne,le=isNaN(le)?0:le,this.ctx.transform=new c(R,F,W,X,ne,le)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,F,W,X,ne,le,ie,ae,Ae){var ke=this.pdf.getImageProperties(R),re=1,Re=1,Le=1,Te=1;X!==void 0&&ae!==void 0&&(Le=ae/X,Te=Ae/ne,re=ke.width/X*ae/X,Re=ke.height/ne*Ae/ne),le===void 0&&(le=F,ie=W,F=0,W=0),X!==void 0&&ae===void 0&&(ae=X,Ae=ne),X===void 0&&ae===void 0&&(ae=ke.width,Ae=ke.height);for(var de,Ce=this.ctx.transform.decompose(),me=V(Ce.rotate.shx),ye=new c,oe=(ye=(ye=(ye=ye.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale)).applyToRectangle(new l(le-F*Le,ie-W*Te,X*re,ne*Re)),fe=v.call(this,oe),be=[],Pe=0;Pe<fe.length;Pe+=1)be.indexOf(fe[Pe])===-1&&be.push(fe[Pe]);if(j(be),this.autoPaging)for(var $e=be[0],Ke=be[be.length-1],nt=$e;nt<Ke+1;nt++){this.pdf.setPage(nt);var He=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=nt===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gt=nt===1?0:xt+(nt-2)*Et;if(this.ctx.clip_path.length!==0){var Ve=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(de,this.posX+this.margin[3],-gt+it+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=Ve}var Bt=JSON.parse(JSON.stringify(oe));Bt=w([Bt],this.posX+this.margin[3],-gt+it+this.ctx.prevPageLastElemOffset)[0];var dr=(nt>$e||nt<Ke)&&x.call(this);dr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],He,Et,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Bt.x,Bt.y,Bt.w,Bt.h,null,null,me),dr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",oe.x,oe.y,oe.w,oe.h,null,null,me)};var v=function(R,F,W){var X=[];F=F||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":X.push(Math.floor((R.y+ne)/W)+1);break;case"arc":X.push(Math.floor((R.y+ne-R.radius)/W)+1),X.push(Math.floor((R.y+ne+R.radius)/W)+1);break;case"qct":var le=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);X.push(Math.floor((le.y+ne)/W)+1),X.push(Math.floor((le.y+le.h+ne)/W)+1);break;case"bct":var ie=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);X.push(Math.floor((ie.y+ne)/W)+1),X.push(Math.floor((ie.y+ie.h+ne)/W)+1);break;case"rect":X.push(Math.floor((R.y+ne)/W)+1),X.push(Math.floor((R.y+R.h+ne)/W)+1)}for(var ae=0;ae<X.length;ae+=1)for(;this.pdf.internal.getNumberOfPages()<X[ae];)y.call(this);return X},y=function(){var R=this.fillStyle,F=this.strokeStyle,W=this.font,X=this.lineCap,ne=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=F,this.font=W,this.lineCap=X,this.lineWidth=ne,this.lineJoin=le},w=function(R,F,W){for(var X=0;X<R.length;X++)switch(R[X].type){case"bct":R[X].x2+=F,R[X].y2+=W;case"qct":R[X].x1+=F,R[X].y1+=W;case"mt":case"lt":case"arc":default:R[X].x+=F,R[X].y+=W}return R},j=function(R){return R.sort(function(F,W){return F-W})},O=function(R,F){for(var W,X,ne=this.fillStyle,le=this.strokeStyle,ie=this.lineCap,ae=this.lineWidth,Ae=Math.abs(ae*this.ctx.transform.scaleX),ke=this.lineJoin,re=JSON.parse(JSON.stringify(this.path)),Re=JSON.parse(JSON.stringify(this.path)),Le=[],Te=0;Te<Re.length;Te++)if(Re[Te].x!==void 0)for(var de=v.call(this,Re[Te]),Ce=0;Ce<de.length;Ce+=1)Le.indexOf(de[Ce])===-1&&Le.push(de[Ce]);for(var me=0;me<Le.length;me++)for(;this.pdf.internal.getNumberOfPages()<Le[me];)y.call(this);if(j(Le),this.autoPaging)for(var ye=Le[0],oe=Le[Le.length-1],fe=ye;fe<oe+1;fe++){this.pdf.setPage(fe),this.fillStyle=ne,this.strokeStyle=le,this.lineCap=ie,this.lineWidth=Ae,this.lineJoin=ke;var be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pe=fe===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ke=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=fe===1?0:$e+(fe-2)*Ke;if(this.ctx.clip_path.length!==0){var He=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(W,this.posX+this.margin[3],-nt+Pe+this.ctx.prevPageLastElemOffset),B.call(this,R,!0),this.path=He}if(X=JSON.parse(JSON.stringify(re)),this.path=w(X,this.posX+this.margin[3],-nt+Pe+this.ctx.prevPageLastElemOffset),F===!1||fe===0){var it=(fe>ye||fe<oe)&&x.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],be,Ke,null).clip().discardPath()),B.call(this,R,F),it&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}else this.lineWidth=Ae,B.call(this,R,F),this.lineWidth=ae;this.path=re},B=function(R,F){if((R!=="stroke"||F||!g.call(this))&&(R==="stroke"||F||!m.call(this))){for(var W,X,ne=[],le=this.path,ie=0;ie<le.length;ie++){var ae=le[ie];switch(ae.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:ae,deltas:[],abs:[]});break;case"lt":var Ae=ne.length;if(le[ie-1]&&!isNaN(le[ie-1].x)&&(W=[ae.x-le[ie-1].x,ae.y-le[ie-1].y],Ae>0)){for(;Ae>=0;Ae--)if(ne[Ae-1].close!==!0&&ne[Ae-1].begin!==!0){ne[Ae-1].deltas.push(W),ne[Ae-1].abs.push(ae);break}}break;case"bct":W=[ae.x1-le[ie-1].x,ae.y1-le[ie-1].y,ae.x2-le[ie-1].x,ae.y2-le[ie-1].y,ae.x-le[ie-1].x,ae.y-le[ie-1].y],ne[ne.length-1].deltas.push(W);break;case"qct":var ke=le[ie-1].x+2/3*(ae.x1-le[ie-1].x),re=le[ie-1].y+2/3*(ae.y1-le[ie-1].y),Re=ae.x+2/3*(ae.x1-ae.x),Le=ae.y+2/3*(ae.y1-ae.y),Te=ae.x,de=ae.y;W=[ke-le[ie-1].x,re-le[ie-1].y,Re-le[ie-1].x,Le-le[ie-1].y,Te-le[ie-1].x,de-le[ie-1].y],ne[ne.length-1].deltas.push(W);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(ae)}}X=F?null:R==="stroke"?"stroke":"fill";for(var Ce=!1,me=0;me<ne.length;me++)if(ne[me].arc)for(var ye=ne[me].abs,oe=0;oe<ye.length;oe++){var fe=ye[oe];fe.type==="arc"?_.call(this,fe.x,fe.y,fe.radius,fe.startAngle,fe.endAngle,fe.counterclockwise,void 0,F,!Ce):M.call(this,fe.x,fe.y),Ce=!0}else if(ne[me].close===!0)this.pdf.internal.out("h"),Ce=!1;else if(ne[me].begin!==!0){var be=ne[me].start.x,Pe=ne[me].start.y;U.call(this,ne[me].deltas,be,Pe),Ce=!0}X&&S.call(this,X),F&&L.call(this)}},T=function(R){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-W;case"top":return R+F-W;case"hanging":return R+F-2*W;case"middle":return R+F/2-W;case"ideographic":return R;case"alphabetic":default:return R}},C=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(F,W){this.colorStops.push([F,W])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(R,F,W,X,ne,le,ie,ae,Ae){for(var ke=Q.call(this,W,X,ne,le),re=0;re<ke.length;re++){var Re=ke[re];re===0&&(Ae?P.call(this,Re.x1+R,Re.y1+F):M.call(this,Re.x1+R,Re.y1+F)),z.call(this,R,F,Re.x2,Re.y2,Re.x3,Re.y3,Re.x4,Re.y4)}ae?L.call(this):S.call(this,ie)},S=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(R,F){this.pdf.internal.out(r(R)+" "+a(F)+" m")},k=function(R){var F;switch(R.align){case"right":case"end":F="right";break;case"center":F="center";break;case"left":case"start":default:F="left"}var W=this.pdf.getTextDimensions(R.text),X=T.call(this,R.y),ne=C.call(this,X)-W.h,le=this.ctx.transform.applyToPoint(new o(R.x,X)),ie=this.ctx.transform.decompose(),ae=new c;ae=(ae=(ae=ae.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var Ae,ke,re,Re=this.ctx.transform.applyToRectangle(new l(R.x,X,W.w,W.h)),Le=ae.applyToRectangle(new l(R.x,ne,W.w,W.h)),Te=v.call(this,Le),de=[],Ce=0;Ce<Te.length;Ce+=1)de.indexOf(Te[Ce])===-1&&de.push(Te[Ce]);if(j(de),this.autoPaging)for(var me=de[0],ye=de[de.length-1],oe=me;oe<ye+1;oe++){this.pdf.setPage(oe);var fe=oe===1?this.posY+this.margin[0]:this.margin[0],be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pe=this.pdf.internal.pageSize.height-this.margin[2],$e=Pe-this.margin[0],Ke=this.pdf.internal.pageSize.width-this.margin[1],nt=Ke-this.margin[3],He=oe===1?0:be+(oe-2)*$e;if(this.ctx.clip_path.length!==0){var it=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Ae,this.posX+this.margin[3],-1*He+fe),B.call(this,"fill",!0),this.path=it}var xt=w([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-He+fe+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*R.scale),re=this.lineWidth,this.lineWidth=re*R.scale);var Et=this.autoPaging!=="text";if(Et||xt.y+xt.h<=Pe){if(Et||xt.y>=fe&&xt.x<=Ke){var gt=Et?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Ke-xt.x)[0],Ve=w([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-He+fe+this.ctx.prevPageLastElemOffset)[0],Bt=Et&&(oe>me||oe<ye)&&x.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nt,$e,null).clip().discardPath()),this.pdf.text(gt,Ve.x,Ve.y,{angle:R.angle,align:F,renderingMode:R.renderingMode}),Bt&&this.pdf.restoreGraphicsState()}}else xt.y<Pe&&(this.ctx.prevPageLastElemOffset+=Pe-xt.y);R.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=re)}else R.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*R.scale),re=this.lineWidth,this.lineWidth=re*R.scale),this.pdf.text(R.text,le.x+this.posX,le.y+this.posY,{angle:R.angle,align:F,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=re)},M=function(R,F,W,X){W=W||0,X=X||0,this.pdf.internal.out(r(R+W)+" "+a(F+X)+" l")},U=function(R,F,W){return this.pdf.lines(R,F,W,null,null)},z=function(R,F,W,X,ne,le,ie,ae){this.pdf.internal.out([t(n(W+R)),t(s(X+F)),t(n(ne+R)),t(s(le+F)),t(n(ie+R)),t(s(ae+F)),"c"].join(" "))},Q=function(R,F,W,X){for(var ne=2*Math.PI,le=Math.PI/2;F>W;)F-=ne;var ie=Math.abs(W-F);ie<ne&&X&&(ie=ne-ie);for(var ae=[],Ae=X?-1:1,ke=F;ie>1e-5;){var re=ke+Ae*Math.min(ie,le);ae.push(q.call(this,R,ke,re)),ie-=Math.abs(re-ke),ke=re}return ae},q=function(R,F,W){var X=(W-F)/2,ne=R*Math.cos(X),le=R*Math.sin(X),ie=ne,ae=-le,Ae=ie*ie+ae*ae,ke=Ae+ie*ne+ae*le,re=4/3*(Math.sqrt(2*Ae*ke)-ke)/(ie*le-ae*ne),Re=ie-re*ae,Le=ae+re*ie,Te=Re,de=-Le,Ce=X+F,me=Math.cos(Ce),ye=Math.sin(Ce);return{x1:R*Math.cos(F),y1:R*Math.sin(F),x2:Re*me-Le*ye,y2:Re*ye+Le*me,x3:Te*me-de*ye,y3:Te*ye+de*me,x4:R*Math.cos(W),y4:R*Math.sin(W)}},V=function(R){return 180*R/Math.PI},Y=function(R,F,W,X,ne,le){var ie=R+.5*(W-R),ae=F+.5*(X-F),Ae=ne+.5*(W-ne),ke=le+.5*(X-le),re=Math.min(R,ne,ie,Ae),Re=Math.max(R,ne,ie,Ae),Le=Math.min(F,le,ae,ke),Te=Math.max(F,le,ae,ke);return new l(re,Le,Re-re,Te-Le)},K=function(R,F,W,X,ne,le,ie,ae){var Ae,ke,re,Re,Le,Te,de,Ce,me,ye,oe,fe,be,Pe,$e=W-R,Ke=X-F,nt=ne-W,He=le-X,it=ie-ne,xt=ae-le;for(ke=0;ke<41;ke++)me=(de=(re=R+(Ae=ke/40)*$e)+Ae*((Le=W+Ae*nt)-re))+Ae*(Le+Ae*(ne+Ae*it-Le)-de),ye=(Ce=(Re=F+Ae*Ke)+Ae*((Te=X+Ae*He)-Re))+Ae*(Te+Ae*(le+Ae*xt-Te)-Ce),ke==0?(oe=me,fe=ye,be=me,Pe=ye):(oe=Math.min(oe,me),fe=Math.min(fe,ye),be=Math.max(be,me),Pe=Math.max(Pe,ye));return new l(Math.round(oe),Math.round(fe),Math.round(be-oe),Math.round(Pe-fe))},J=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,F,W=(R=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:F}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(pr.API),function(e){var t=function(s){var o,l,c,u,d,f,h,m,g,x;for(l=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,l.push(f+33,h+33,m+33,g+33,x+33)):l.push(122);return function(v,y){for(var w=y;w>0;w--)v.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var o,l,c,u,d,f=String,h="length",m=255,g="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],u=0,d=(s+=o="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)l=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,w){for(var j=w;j>0;j--)y.pop()}(c,o[h]),f.fromCharCode.apply(f,c)},a=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},n=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return s=(o=oD(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,o){var l=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=n(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(pr.API),function(e){e.loadFile=function(t,r,a){return function(n,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(h=0;h<x;h+=1)v.push(y(255&g.charCodeAt(h)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(n,s,o)}catch{}return l}(t,r,a)},e.loadImageFile=e.loadFile}(pr.API),function(e){function t(){return(Mr.html2canvas?Promise.resolve(Mr.html2canvas):ei(()=>Promise.resolve().then(()=>kmt),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Mr.DOMPurify?Promise.resolve(Mr.DOMPurify):ei(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var l=gn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},n=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:n("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||pr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,o,l);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,pr.getPageSize=function(o,l,c){if(gn(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>g&&(m=x,x=g,g=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:l,k:d,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(AD):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(pr.API),pr.API.addJS=function(e){return vW=e,this.internal.events.subscribe("postPutResources",function(){WC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(WC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),xW=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+vW+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){WC!==void 0&&xW!==void 0&&this.internal.out("/Names <</JavaScript "+WC+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),s=0;s<n.length;s++){var o=n[s],l=a.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,n,s){var o={title:n,options:s,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var n=0;n<a.children.length;n++)this.genIds_r(a.children[n])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<a.children.length;s++){var o=a.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),s>0&&this.line("/Prev "+this.makeRef(a.children[s-1])),s<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var u=0;u<a.children.length;u++)this.renderItems(a.children[u])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,n){for(var s=0;s<n.children.length;s++)a.count++,this.count_r(a,n.children[s]);return a.count}}])}(pr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,n,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){h=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),x={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:h,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:a,alias:n}}return d}}(pr.API);var tv,XC,bW,yW,wW,CYe=function(){var e,t,r;function a(s){var o,l,c,u,d,f,h,m,g,x,v,y,w,j;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),g=(function(){var O,B;for(B=[],O=0;O<4;++O)B.push(String.fromCharCode(this.data[this.pos++]));return B}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,o-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(v=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(s){var o,l;for(l=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,m,g){var x,v,y,w,j,O,B,T,C,_,S,L,P,k,M,U,z,Q,q,V,Y,K=Math.ceil((u.width-f)/m),J=Math.ceil((u.height-h)/g),R=u.width==K&&u.height==J;for(k=o*K,L=R?l:new Uint8Array(k*J),O=s.length,P=0,v=0;P<J&&c<O;){switch(s[c++]){case 0:for(w=z=0;z<k;w=z+=1)L[v++]=s[c++];break;case 1:for(w=Q=0;Q<k;w=Q+=1)x=s[c++],j=w<o?0:L[v-o],L[v++]=(x+j)%256;break;case 2:for(w=q=0;q<k;w=q+=1)x=s[c++],y=(w-w%o)/o,M=P&&L[(P-1)*k+y*o+w%o],L[v++]=(M+x)%256;break;case 3:for(w=V=0;V<k;w=V+=1)x=s[c++],y=(w-w%o)/o,j=w<o?0:L[v-o],M=P&&L[(P-1)*k+y*o+w%o],L[v++]=(x+Math.floor((j+M)/2))%256;break;case 4:for(w=Y=0;Y<k;w=Y+=1)x=s[c++],y=(w-w%o)/o,j=w<o?0:L[v-o],P===0?M=U=0:(M=L[(P-1)*k+y*o+w%o],U=y&&L[(P-1)*k+(y-1)*o+w%o]),B=j+M-U,T=Math.abs(B-j),_=Math.abs(B-M),S=Math.abs(B-U),C=T<=_&&T<=S?j:_<=S?M:U,L[v++]=(x+C)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!R){var F=((h+P*g)*u.width+f)*o,W=P*k;for(w=0;w<K;w+=1){for(var X=0;X<o;X+=1)l[F++]=L[W++];F+=(m-1)*o}}P++}}return s=aYe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},a.prototype.decodePalette=function(){var s,o,l,c,u,d,f,h,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,s=0,o=f=0,h=l.length;f<h;o=f+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(m=d[s++])!=null?m:255;return u},a.prototype.copyToImageData=function(s,o){var l,c,u,d,f,h,m,g,x,v,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=s.data||s).length,f=x||o,d=h=0,c===1)for(;d<g;)m=x?4*o[d/4]:h,v=f[m++],u[d++]=v,u[d++]=v,u[d++]=v,u[d++]=l?f[m++]:255,h=m;else for(;d<g;)m=x?4*o[d/4]:h,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=l?f[m++]:255,h=m},a.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var n=function(){if(Object.prototype.toString.call(Mr)==="[object Window]"){try{t=Mr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return n(),e=function(s){var o;if(n()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(s){var o,l,c,u,d,f,h,m;if(this.animation){for(m=[],l=d=0,f=(h=this.animation.frames).length;d<f;l=++d)o=h[l],c=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,m.push(o.image=e(c));return m}},a.prototype.renderFrame=function(s,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(s){var o,l,c,u,d,f,h=this;return l=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(o=function(){var m,g;if(m=l++%u,g=c[m],h.renderFrame(s,m),u>1&&l/u<d)return h.animation._timeout=setTimeout(o,g.delay)})()},a.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},a.prototype.render=function(s){var o,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function jYe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,n=e[t++],s=n>>7,o=1<<(7&n)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=o,t+=3*o);var u=!0,d=[],f=0,h=null,m=0,g=null;for(this.width=r,this.height=a;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,O=e[t++],B=O>>6&1,T=1<<(7&O)+1,C=l,_=c,S=!1;O>>7&&(S=!0,C=t,_=T,t+=3*T);var L=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}d.push({x:v,y,width:w,height:j,has_local_palette:S,palette_offset:C,palette_size:_,data_offset:L,data_length:t-L,transparent_index:h,interlaced:!!B,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(k){if(k<0||k>=d.length)throw new Error("Frame index out of range.");return d[k]},this.decodeAndBlitFrameBGRA=function(k,M){var U=this.frameInfo(k),z=U.width*U.height,Q=new Uint8Array(z);NW(e,U.data_offset,Q,z);var q=U.palette_offset,V=U.transparent_index;V===null&&(V=256);var Y=U.width,K=r-Y,J=Y,R=4*(U.y*r+U.x),F=4*((U.y+U.height)*r+U.x),W=R,X=4*K;U.interlaced===!0&&(X+=4*r*7);for(var ne=8,le=0,ie=Q.length;le<ie;++le){var ae=Q[le];if(J===0&&(J=Y,(W+=X)>=F&&(X=4*K+4*r*(ne-1),W=R+(Y+K)*(ne<<1),ne>>=1)),ae===V)W+=4;else{var Ae=e[q+3*ae],ke=e[q+3*ae+1],re=e[q+3*ae+2];M[W++]=re,M[W++]=ke,M[W++]=Ae,M[W++]=255}--J}},this.decodeAndBlitFrameRGBA=function(k,M){var U=this.frameInfo(k),z=U.width*U.height,Q=new Uint8Array(z);NW(e,U.data_offset,Q,z);var q=U.palette_offset,V=U.transparent_index;V===null&&(V=256);var Y=U.width,K=r-Y,J=Y,R=4*(U.y*r+U.x),F=4*((U.y+U.height)*r+U.x),W=R,X=4*K;U.interlaced===!0&&(X+=4*r*7);for(var ne=8,le=0,ie=Q.length;le<ie;++le){var ae=Q[le];if(J===0&&(J=Y,(W+=X)>=F&&(X=4*K+4*r*(ne-1),W=R+(Y+K)*(ne<<1),ne>>=1)),ae===V)W+=4;else{var Ae=e[q+3*ae],ke=e[q+3*ae+1],re=e[q+3*ae+2];M[W++]=Ae,M[W++]=ke,M[W++]=re,M[W++]=255}--J}}}function NW(e,t,r,a){for(var n=e[t++],s=1<<n,o=s+1,l=o+1,c=n+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==s){if(v===o)break;for(var y=v<l?v:x,w=0,j=y;j>s;)j=g[j]>>8,++w;var O=j;if(h+w+(y!==v?1:0)>a)return void Bn.log("Warning, gif stream longer than expected.");r[h++]=O;var B=h+=w;for(y!==v&&(r[h++]=O),j=y;w--;)j=g[j],r[--B]=255&j,j>>=8;x!==null&&l<4096&&(g[l++]=x<<8|O,l>=u+1&&c<12&&(++c,u=u<<1|1)),x=v}else l=o+1,u=(1<<(c=n+1))-1,x=null}return h!==a&&Bn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function e6(e){var t,r,a,n,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,w=new Array(64),j=new Array(64),O=new Array(64),B=new Array(256),T=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(R,F){for(var W=0,X=0,ne=new Array,le=1;le<=16;le++){for(var ie=1;ie<=R[le];ie++)ne[F[X]]=[],ne[F[X]][0]=W,ne[F[X]][1]=le,X++,W++;W*=2}return ne}function q(R){for(var F=R[0],W=R[1]-1;W>=0;)F&1<<W&&(v|=1<<y),W--,--y<0&&(v==255?(V(255),V(0)):V(v),y=7,v=0)}function V(R){x.push(R)}function Y(R){V(R>>8&255),V(255&R)}function K(R,F,W,X,ne){for(var le,ie=ne[0],ae=ne[240],Ae=function(ye,oe){var fe,be,Pe,$e,Ke,nt,He,it,xt,Et,gt=0;for(xt=0;xt<8;++xt){fe=ye[gt],be=ye[gt+1],Pe=ye[gt+2],$e=ye[gt+3],Ke=ye[gt+4],nt=ye[gt+5],He=ye[gt+6];var Ve=fe+(it=ye[gt+7]),Bt=fe-it,dr=be+He,er=be-He,Er=Pe+nt,$r=Pe-nt,br=$e+Ke,kn=$e-Ke,Pr=Ve+br,Pa=Ve-br,Fn=dr+Er,Rr=dr-Er;ye[gt]=Pr+Fn,ye[gt+4]=Pr-Fn;var mr=.707106781*(Rr+Pa);ye[gt+2]=Pa+mr,ye[gt+6]=Pa-mr;var Yr=.382683433*((Pr=kn+$r)-(Rr=er+Bt)),ps=.5411961*Pr+Yr,Ya=1.306562965*Rr+Yr,Dn=.707106781*(Fn=$r+er),Rs=Bt+Dn,Zt=Bt-Dn;ye[gt+5]=Zt+ps,ye[gt+3]=Zt-ps,ye[gt+1]=Rs+Ya,ye[gt+7]=Rs-Ya,gt+=8}for(gt=0,xt=0;xt<8;++xt){fe=ye[gt],be=ye[gt+8],Pe=ye[gt+16],$e=ye[gt+24],Ke=ye[gt+32],nt=ye[gt+40],He=ye[gt+48];var xa=fe+(it=ye[gt+56]),la=fe-it,Ia=be+He,Ka=be-He,Ja=Pe+nt,we=Pe-nt,Ue=$e+Ke,Oe=$e-Ke,De=xa+Ue,ge=xa-Ue,he=Ia+Ja,Be=Ia-Ja;ye[gt]=De+he,ye[gt+32]=De-he;var Qe=.707106781*(Be+ge);ye[gt+16]=ge+Qe,ye[gt+48]=ge-Qe;var Fe=.382683433*((De=Oe+we)-(Be=Ka+la)),qe=.5411961*De+Fe,Xe=1.306562965*Be+Fe,yt=.707106781*(he=we+Ka),wt=la+yt,Ht=la-yt;ye[gt+40]=Ht+qe,ye[gt+24]=Ht-qe,ye[gt+8]=wt+Xe,ye[gt+56]=wt-Xe,gt++}for(xt=0;xt<64;++xt)Et=ye[xt]*oe[xt],m[xt]=Et>0?Et+.5|0:Et-.5|0;return m}(R,F),ke=0;ke<64;++ke)g[C[ke]]=Ae[ke];var re=g[0]-W;W=g[0],re==0?q(X[0]):(q(X[h[le=32767+re]]),q(f[le]));for(var Re=63;Re>0&&g[Re]==0;)Re--;if(Re==0)return q(ie),W;for(var Le,Te=1;Te<=Re;){for(var de=Te;g[Te]==0&&Te<=Re;)++Te;var Ce=Te-de;if(Ce>=16){Le=Ce>>4;for(var me=1;me<=Le;++me)q(ae);Ce&=15}le=32767+g[Te],q(ne[(Ce<<4)+h[le]]),q(f[le]),Te++}return Re!=63&&q(ie),W}function J(R){R=Math.min(Math.max(R,1),100),s!=R&&(function(F){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],X=0;X<64;X++){var ne=o((W[X]*F+50)/100);ne=Math.min(Math.max(ne,1),255),l[C[X]]=ne}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var ae=o((le[ie]*F+50)/100);ae=Math.min(Math.max(ae,1),255),c[C[ie]]=ae}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,re=0;re<8;re++)for(var Re=0;Re<8;Re++)u[ke]=1/(l[C[ke]]*Ae[re]*Ae[Re]*8),d[ke]=1/(c[C[ke]]*Ae[re]*Ae[Re]*8),ke++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),s=R)}this.encode=function(R,F){F&&J(F),x=new Array,v=0,y=7,Y(65496),Y(65504),Y(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),Y(1),Y(1),V(0),V(0),function(){Y(65499),Y(132),V(0);for(var be=0;be<64;be++)V(l[be]);V(1);for(var Pe=0;Pe<64;Pe++)V(c[Pe])}(),function(be,Pe){Y(65472),Y(17),V(8),Y(Pe),Y(be),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(R.width,R.height),function(){Y(65476),Y(418),V(0);for(var be=0;be<16;be++)V(_[be+1]);for(var Pe=0;Pe<=11;Pe++)V(S[Pe]);V(16);for(var $e=0;$e<16;$e++)V(L[$e+1]);for(var Ke=0;Ke<=161;Ke++)V(P[Ke]);V(1);for(var nt=0;nt<16;nt++)V(k[nt+1]);for(var He=0;He<=11;He++)V(M[He]);V(17);for(var it=0;it<16;it++)V(U[it+1]);for(var xt=0;xt<=161;xt++)V(z[xt])}(),Y(65498),Y(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var W=0,X=0,ne=0;v=0,y=7,this.encode.displayName="_encode_";for(var le,ie,ae,Ae,ke,re,Re,Le,Te,de=R.data,Ce=R.width,me=R.height,ye=4*Ce,oe=0;oe<me;){for(le=0;le<ye;){for(ke=ye*oe+le,Re=-1,Le=0,Te=0;Te<64;Te++)re=ke+(Le=Te>>3)*ye+(Re=4*(7&Te)),oe+Le>=me&&(re-=ye*(oe+1+Le-me)),le+Re>=ye&&(re-=le+Re-ye+4),ie=de[re++],ae=de[re++],Ae=de[re++],w[Te]=(T[ie]+T[ae+256>>0]+T[Ae+512>>0]>>16)-128,j[Te]=(T[ie+768>>0]+T[ae+1024>>0]+T[Ae+1280>>0]>>16)-128,O[Te]=(T[ie+1280>>0]+T[ae+1536>>0]+T[Ae+1792>>0]>>16)-128;W=K(w,u,W,t,a),X=K(j,d,X,r,n),ne=K(O,d,ne,r,n),le+=32}oe+=8}if(y>=0){var fe=[];fe[1]=y+1,fe[0]=(1<<y+1)-1,q(fe)}return Y(65497),new Uint8Array(x)},e=e||50,function(){for(var R=String.fromCharCode,F=0;F<256;F++)B[F]=R(F)}(),t=Q(_,S),r=Q(k,M),a=Q(L,P),n=Q(U,z),function(){for(var R=1,F=2,W=1;W<=15;W++){for(var X=R;X<F;X++)h[32767+X]=W,f[32767+X]=[],f[32767+X][1]=W,f[32767+X][0]=X;for(var ne=-(F-1);ne<=-R;ne++)h[32767+ne]=W,f[32767+ne]=[],f[32767+ne][1]=W,f[32767+ne][0]=F-1+ne;R<<=1,F<<=1}}(),function(){for(var R=0;R<256;R++)T[R]=19595*R,T[R+256>>0]=38470*R,T[R+512>>0]=7471*R+32768,T[R+768>>0]=-11059*R,T[R+1024>>0]=-21709*R,T[R+1280>>0]=32768*R+8421375,T[R+1536>>0]=-27439*R,T[R+1792>>0]=-5329*R}(),J(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Fd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function EW(e){function t(_){if(!_)throw Error("assert :P")}function r(_,S,L){for(var P=0;4>P;P++)if(_[S+P]!=L.charCodeAt(P))return!0;return!1}function a(_,S,L,P,k){for(var M=0;M<k;M++)_[S+M]=L[P+M]}function n(_,S,L,P){for(var k=0;k<P;k++)_[S+k]=L}function s(_){return new Int32Array(_)}function o(_,S){for(var L=[],P=0;P<_;P++)L.push(new S);return L}function l(_,S){var L=[];return function P(k,M,U){for(var z=U[M],Q=0;Q<z&&(k.push(U.length>M+1?[]:new S),!(U.length<M+1));Q++)P(k[Q],M+1,U)}(L,0,_),L}var c=function(){var _=this;function S(I,G){for(var te=1<<G-1>>>0;I&te;)te>>>=1;return te?(I&te-1)+te:I}function L(I,G,te,ce,xe){t(!(ce%te));do I[G+(ce-=te)]=xe;while(0<ce)}function P(I,G,te,ce,xe){if(t(2328>=xe),512>=xe)var Ne=s(512);else if((Ne=s(xe))==null)return 0;return function(Ee,je,Ie,Me,Ye,dt){var lt,at,Ot=je,bt=1<<Ie,Je=s(16),et=s(16);for(t(Ye!=0),t(Me!=null),t(Ee!=null),t(0<Ie),at=0;at<Ye;++at){if(15<Me[at])return 0;++Je[Me[at]]}if(Je[0]==Ye)return 0;for(et[1]=0,lt=1;15>lt;++lt){if(Je[lt]>1<<lt)return 0;et[lt+1]=et[lt]+Je[lt]}for(at=0;at<Ye;++at)lt=Me[at],0<Me[at]&&(dt[et[lt]++]=at);if(et[15]==1)return(Me=new k).g=0,Me.value=dt[0],L(Ee,Ot,1,bt,Me),bt;var kt,Ft=-1,St=bt-1,tr=0,Kt=1,gr=1,Xt=1<<Ie;for(at=0,lt=1,Ye=2;lt<=Ie;++lt,Ye<<=1){if(Kt+=gr<<=1,0>(gr-=Je[lt]))return 0;for(;0<Je[lt];--Je[lt])(Me=new k).g=lt,Me.value=dt[at++],L(Ee,Ot+tr,Ye,Xt,Me),tr=S(tr,lt)}for(lt=Ie+1,Ye=2;15>=lt;++lt,Ye<<=1){if(Kt+=gr<<=1,0>(gr-=Je[lt]))return 0;for(;0<Je[lt];--Je[lt]){if(Me=new k,(tr&St)!=Ft){for(Ot+=Xt,kt=1<<(Ft=lt)-Ie;15>Ft&&!(0>=(kt-=Je[Ft]));)++Ft,kt<<=1;bt+=Xt=1<<(kt=Ft-Ie),Ee[je+(Ft=tr&St)].g=kt+Ie,Ee[je+Ft].value=Ot-je-Ft}Me.g=lt-Ie,Me.value=dt[at++],L(Ee,Ot+(tr>>Ie),Ye,Xt,Me),tr=S(tr,lt)}}return Kt!=2*et[15]-1?0:bt}(I,G,te,ce,xe,Ne)}function k(){this.value=this.g=0}function M(){this.value=this.g=0}function U(){this.G=o(5,k),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ms,M)}function z(I,G,te,ce){t(I!=null),t(G!=null),t(2147483648>ce),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=G,I.pa=te,I.Jd=G,I.Yc=te+ce,I.Zc=4<=ce?te+ce-4+1:te,le(I)}function Q(I,G){for(var te=0;0<G--;)te|=ae(I,128)<<G;return te}function q(I,G){var te=Q(I,G);return ie(I)?-te:te}function V(I,G,te,ce){var xe,Ne=0;for(t(I!=null),t(G!=null),t(4294967288>ce),I.Sb=ce,I.Ra=0,I.u=0,I.h=0,4<ce&&(ce=4),xe=0;xe<ce;++xe)Ne+=G[te+xe]<<8*xe;I.Ra=Ne,I.bb=ce,I.oa=G,I.pa=te}function Y(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<LA-8>>>0,++I.bb,I.u-=8;W(I)&&(I.h=1,I.u=0)}function K(I,G){if(t(0<=G),!I.h&&G<=RA){var te=F(I)&bf[G];return I.u+=G,Y(I),te}return I.h=1,I.u=0}function J(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function F(I){return I.Ra>>>(I.u&LA-1)>>>0}function W(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>LA}function X(I,G){I.u=G,I.h=W(I)}function ne(I){I.u>=x0&&(t(I.u>=x0),Y(I))}function le(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function ie(I){return Q(I,1)}function ae(I,G){var te=I.Ca;0>I.b&&le(I);var ce=I.b,xe=te*G>>>8,Ne=(I.I>>>ce>xe)+0;for(Ne?(te-=xe,I.I-=xe+1<<ce>>>0):te=xe+1,ce=te,xe=0;256<=ce;)xe+=8,ce>>=8;return ce=7^xe+Ro[ce],I.b-=ce,I.Ca=(te<<ce)-1,Ne}function Ae(I,G,te){I[G+0]=te>>24&255,I[G+1]=te>>16&255,I[G+2]=te>>8&255,I[G+3]=te>>0&255}function ke(I,G){return I[G+0]<<0|I[G+1]<<8}function re(I,G){return ke(I,G)|I[G+2]<<16}function Re(I,G){return ke(I,G)|ke(I,G+2)<<16}function Le(I,G){var te=1<<G;return t(I!=null),t(0<G),I.X=s(te),I.X==null?0:(I.Mb=32-G,I.Xa=G,1)}function Te(I,G){t(I!=null),t(G!=null),t(I.Xa==G.Xa),a(G.X,0,I.X,0,1<<G.Xa)}function de(){this.X=[],this.Xa=this.Mb=0}function Ce(I,G,te,ce){t(te!=null),t(ce!=null);var xe=te[0],Ne=ce[0];return xe==0&&(xe=(I*Ne+G/2)/G),Ne==0&&(Ne=(G*xe+I/2)/I),0>=xe||0>=Ne?0:(te[0]=xe,ce[0]=Ne,1)}function me(I,G){return I+(1<<G)-1>>>G}function ye(I,G){return((4278255360&I)+(4278255360&G)>>>0&4278255360)+((16711935&I)+(16711935&G)>>>0&16711935)>>>0}function oe(I,G){_[G]=function(te,ce,xe,Ne,Ee,je,Ie){var Me;for(Me=0;Me<Ee;++Me){var Ye=_[I](je[Ie+Me-1],xe,Ne+Me);je[Ie+Me]=ye(te[ce+Me],Ye)}}}function fe(){this.ud=this.hd=this.jd=0}function be(I,G){return((4278124286&(I^G))>>>1)+(I&G)>>>0}function Pe(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function $e(I,G){return Pe(I+(I-G+.5>>1))}function Ke(I,G,te){return Math.abs(G-te)-Math.abs(I-te)}function nt(I,G,te,ce,xe,Ne,Ee){for(ce=Ne[Ee-1],te=0;te<xe;++te)Ne[Ee+te]=ce=ye(I[G+te],ce)}function He(I,G,te,ce,xe){var Ne;for(Ne=0;Ne<te;++Ne){var Ee=I[G+Ne],je=Ee>>8&255,Ie=16711935&(Ie=(Ie=16711935&Ee)+((je<<16)+je));ce[xe+Ne]=(4278255360&Ee)+Ie>>>0}}function it(I,G){G.jd=I>>0&255,G.hd=I>>8&255,G.ud=I>>16&255}function xt(I,G,te,ce,xe,Ne){var Ee;for(Ee=0;Ee<ce;++Ee){var je=G[te+Ee],Ie=je>>>8,Me=je,Ye=255&(Ye=(Ye=je>>>16)+((I.jd<<24>>24)*(Ie<<24>>24)>>>5));Me=255&(Me=(Me=Me+((I.hd<<24>>24)*(Ie<<24>>24)>>>5))+((I.ud<<24>>24)*(Ye<<24>>24)>>>5)),xe[Ne+Ee]=(4278255360&je)+(Ye<<16)+Me}}function Et(I,G,te,ce,xe){_[G]=function(Ne,Ee,je,Ie,Me,Ye,dt,lt,at){for(Ie=dt;Ie<lt;++Ie)for(dt=0;dt<at;++dt)Me[Ye++]=xe(je[ce(Ne[Ee++])])},_[I]=function(Ne,Ee,je,Ie,Me,Ye,dt){var lt=8>>Ne.b,at=Ne.Ea,Ot=Ne.K[0],bt=Ne.w;if(8>lt)for(Ne=(1<<Ne.b)-1,bt=(1<<lt)-1;Ee<je;++Ee){var Je,et=0;for(Je=0;Je<at;++Je)Je&Ne||(et=ce(Ie[Me++])),Ye[dt++]=xe(Ot[et&bt]),et>>=lt}else _["VP8LMapColor"+te](Ie,Me,Ot,bt,Ye,dt,Ee,je,at)}}function gt(I,G,te,ce,xe){for(te=G+te;G<te;){var Ne=I[G++];ce[xe++]=Ne>>16&255,ce[xe++]=Ne>>8&255,ce[xe++]=Ne>>0&255}}function Ve(I,G,te,ce,xe){for(te=G+te;G<te;){var Ne=I[G++];ce[xe++]=Ne>>16&255,ce[xe++]=Ne>>8&255,ce[xe++]=Ne>>0&255,ce[xe++]=Ne>>24&255}}function Bt(I,G,te,ce,xe){for(te=G+te;G<te;){var Ne=(Ee=I[G++])>>16&240|Ee>>12&15,Ee=Ee>>0&240|Ee>>28&15;ce[xe++]=Ne,ce[xe++]=Ee}}function dr(I,G,te,ce,xe){for(te=G+te;G<te;){var Ne=(Ee=I[G++])>>16&248|Ee>>13&7,Ee=Ee>>5&224|Ee>>3&31;ce[xe++]=Ne,ce[xe++]=Ee}}function er(I,G,te,ce,xe){for(te=G+te;G<te;){var Ne=I[G++];ce[xe++]=Ne>>0&255,ce[xe++]=Ne>>8&255,ce[xe++]=Ne>>16&255}}function Er(I,G,te,ce,xe,Ne){if(Ne==0)for(te=G+te;G<te;)Ae(ce,((Ne=I[G++])[0]>>24|Ne[1]>>8&65280|Ne[2]<<8&16711680|Ne[3]<<24)>>>0),xe+=32;else a(ce,xe,I,G,te)}function $r(I,G){_[G][0]=_[I+"0"],_[G][1]=_[I+"1"],_[G][2]=_[I+"2"],_[G][3]=_[I+"3"],_[G][4]=_[I+"4"],_[G][5]=_[I+"5"],_[G][6]=_[I+"6"],_[G][7]=_[I+"7"],_[G][8]=_[I+"8"],_[G][9]=_[I+"9"],_[G][10]=_[I+"10"],_[G][11]=_[I+"11"],_[G][12]=_[I+"12"],_[G][13]=_[I+"13"],_[G][14]=_[I+"0"],_[G][15]=_[I+"0"]}function br(I){return I==bp||I==Bf||I==bd||I==w0}function kn(){this.eb=[],this.size=this.A=this.fb=0}function Pr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Pa(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new kn,this.f.kb=new Pr,this.sd=null}function Fn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mr(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function Yr(I,G){var te=I.T,ce=G.ba.f.RGBA,xe=ce.eb,Ne=ce.fb+I.ka*ce.A,Ee=ui[G.ba.S],je=I.y,Ie=I.O,Me=I.f,Ye=I.N,dt=I.ea,lt=I.W,at=G.cc,Ot=G.dc,bt=G.Mc,Je=G.Nc,et=I.ka,kt=I.ka+I.T,Ft=I.U,St=Ft+1>>1;for(et==0?Ee(je,Ie,null,null,Me,Ye,dt,lt,Me,Ye,dt,lt,xe,Ne,null,null,Ft):(Ee(G.ec,G.fc,je,Ie,at,Ot,bt,Je,Me,Ye,dt,lt,xe,Ne-ce.A,xe,Ne,Ft),++te);et+2<kt;et+=2)at=Me,Ot=Ye,bt=dt,Je=lt,Ye+=I.Rc,lt+=I.Rc,Ne+=2*ce.A,Ee(je,(Ie+=2*I.fa)-I.fa,je,Ie,at,Ot,bt,Je,Me,Ye,dt,lt,xe,Ne-ce.A,xe,Ne,Ft);return Ie+=I.fa,I.j+kt<I.o?(a(G.ec,G.fc,je,Ie,Ft),a(G.cc,G.dc,Me,Ye,St),a(G.Mc,G.Nc,dt,lt,St),te--):1&kt||Ee(je,Ie,null,null,Me,Ye,dt,lt,Me,Ye,dt,lt,xe,Ne+ce.A,null,null,Ft),te}function ps(I,G,te){var ce=I.F,xe=[I.J];if(ce!=null){var Ne=I.U,Ee=G.ba.S,je=Ee==zA||Ee==bd;G=G.ba.f.RGBA;var Ie=[0],Me=I.ka;Ie[0]=I.T,I.Kb&&(Me==0?--Ie[0]:(--Me,xe[0]-=I.width),I.j+I.ka+I.T==I.o&&(Ie[0]=I.o-I.j-Me));var Ye=G.eb;Me=G.fb+Me*G.A,I=ua(ce,xe[0],I.width,Ne,Ie,Ye,Me+(je?0:3),G.A),t(te==Ie),I&&br(Ee)&&xl(Ye,Me,je,Ne,Ie,G.A)}return 0}function Ya(I){var G=I.ma,te=G.ba.S,ce=11>te,xe=te==y0||te==vp||te==zA||te==vd||te==12||br(te);if(G.memory=null,G.Ib=null,G.Jb=null,G.Nd=null,!vf(G.Oa,I,xe?11:12))return 0;if(xe&&br(te)&&Ut(),I.da)alert("todo:use_scaling");else{if(ce){if(G.Ib=mr,I.Kb){if(te=I.U+1>>1,G.memory=s(I.U+2*te),G.memory==null)return 0;G.ec=G.memory,G.fc=0,G.cc=G.ec,G.dc=G.fc+I.U,G.Mc=G.cc,G.Nc=G.dc+te,G.Ib=Yr,Ut()}}else alert("todo:EmitYUV");xe&&(G.Jb=ps,ce&&rt())}if(ce&&!cE){for(I=0;256>I;++I)t3[I]=89858*(I-128)+Qs>>Bu,Np[I]=-22014*(I-128)+Qs,z1[I]=-45773*(I-128),Hs[I]=113618*(I-128)+Qs>>Bu;for(I=Of;I<Nx;++I)G=76283*(I-16)+Qs>>Bu,Ep[I-Of]=La(G,255),V1[I-Of]=La(G+8>>4,15);cE=1}return 1}function Dn(I){var G=I.ma,te=I.U,ce=I.T;return t(!(1&I.ka)),0>=te||0>=ce?0:(te=G.Ib(I,G),G.Jb!=null&&G.Jb(I,G,te),G.Dc+=te,1)}function Rs(I){I.ma.memory=null}function Zt(I,G,te,ce){return K(I,8)!=47?0:(G[0]=K(I,14)+1,te[0]=K(I,14)+1,ce[0]=K(I,1),K(I,3)!=0?0:!I.h)}function xa(I,G){if(4>I)return I+1;var te=I-2>>1;return(2+(1&I)<<te)+K(G,te)+1}function la(I,G){return 120<G?G-120:1<=(te=((te=wd[G-1])>>4)*I+(8-(15&te)))?te:1;var te}function Ia(I,G,te){var ce=F(te),xe=I[G+=255&ce].g-8;return 0<xe&&(X(te,te.u+8),ce=F(te),G+=I[G].value,G+=ce&(1<<xe)-1),X(te,te.u+I[G].g),I[G].value}function Ka(I,G,te){return te.g+=I.g,te.value+=I.value<<G>>>0,t(8>=te.g),I.g}function Ja(I,G,te){var ce=I.xc;return t((G=ce==0?0:I.vc[I.md*(te>>ce)+(G>>ce)])<I.Wb),I.Ya[G]}function we(I,G,te,ce){var xe=I.ab,Ne=I.c*G,Ee=I.C;G=Ee+G;var je=te,Ie=ce;for(ce=I.Ta,te=I.Ua;0<xe--;){var Me=I.gc[xe],Ye=Ee,dt=G,lt=je,at=Ie,Ot=(Ie=ce,je=te,Me.Ea);switch(t(Ye<dt),t(dt<=Me.nc),Me.hc){case 2:px(lt,at,(dt-Ye)*Ot,Ie,je);break;case 0:var bt=Ye,Je=dt,et=Ie,kt=je,Ft=(Xt=Me).Ea;bt==0&&(Q1(lt,at,null,null,1,et,kt),nt(lt,at+1,0,0,Ft-1,et,kt+1),at+=Ft,kt+=Ft,++bt);for(var St=1<<Xt.b,tr=St-1,Kt=me(Ft,Xt.b),gr=Xt.K,Xt=Xt.w+(bt>>Xt.b)*Kt;bt<Je;){var _a=gr,Ma=Xt,oa=1;for(gp(lt,at,et,kt-Ft,1,et,kt);oa<Ft;){var ra=(oa&~tr)+St;ra>Ft&&(ra=Ft),(0,pd[_a[Ma++]>>8&15])(lt,at+ +oa,et,kt+oa-Ft,ra-oa,et,kt+oa),oa=ra}at+=Ft,kt+=Ft,++bt&tr||(Xt+=Kt)}dt!=Me.nc&&a(Ie,je-Ot,Ie,je+(dt-Ye-1)*Ot,Ot);break;case 1:for(Ot=lt,Je=at,Ft=(lt=Me.Ea)-(kt=lt&~(et=(at=1<<Me.b)-1)),bt=me(lt,Me.b),St=Me.K,Me=Me.w+(Ye>>Me.b)*bt;Ye<dt;){for(tr=St,Kt=Me,gr=new fe,Xt=Je+kt,_a=Je+lt;Je<Xt;)it(tr[Kt++],gr),wf(gr,Ot,Je,at,Ie,je),Je+=at,je+=at;Je<_a&&(it(tr[Kt++],gr),wf(gr,Ot,Je,Ft,Ie,je),Je+=Ft,je+=Ft),++Ye&et||(Me+=bt)}break;case 3:if(lt==Ie&&at==je&&0<Me.b){for(Je=Ie,lt=Ot=je+(dt-Ye)*Ot-(kt=(dt-Ye)*me(Me.Ea,Me.b)),at=Ie,et=je,bt=[],kt=(Ft=kt)-1;0<=kt;--kt)bt[kt]=at[et+kt];for(kt=Ft-1;0<=kt;--kt)Je[lt+kt]=bt[kt];$l(Me,Ye,dt,Ie,Ot,Ie,je)}else $l(Me,Ye,dt,lt,at,Ie,je)}je=ce,Ie=te}Ie!=te&&a(ce,te,je,Ie,Ne)}function Ue(I,G){var te=I.V,ce=I.Ba+I.c*I.C,xe=G-I.C;if(t(G<=I.l.o),t(16>=xe),0<xe){var Ne=I.l,Ee=I.Ta,je=I.Ua,Ie=Ne.width;if(we(I,xe,te,ce),xe=je=[je],t((te=I.C)<(ce=G)),t(Ne.v<Ne.va),ce>Ne.o&&(ce=Ne.o),te<Ne.j){var Me=Ne.j-te;te=Ne.j,xe[0]+=Me*Ie}if(te>=ce?te=0:(xe[0]+=4*Ne.v,Ne.ka=te-Ne.j,Ne.U=Ne.va-Ne.v,Ne.T=ce-te,te=1),te){if(je=je[0],11>(te=I.ca).S){var Ye=te.f.RGBA,dt=(ce=te.S,xe=Ne.U,Ne=Ne.T,Me=Ye.eb,Ye.A),lt=Ne;for(Ye=Ye.fb+I.Ma*Ye.A;0<lt--;){var at=Ee,Ot=je,bt=xe,Je=Me,et=Ye;switch(ce){case Vi:uo(at,Ot,bt,Je,et);break;case y0:_i(at,Ot,bt,Je,et);break;case bp:_i(at,Ot,bt,Je,et),xl(Je,et,0,bt,1,0);break;case ju:kc(at,Ot,bt,Je,et);break;case vp:Er(at,Ot,bt,Je,et,1);break;case Bf:Er(at,Ot,bt,Je,et,1),xl(Je,et,0,bt,1,0);break;case zA:Er(at,Ot,bt,Je,et,0);break;case bd:Er(at,Ot,bt,Je,et,0),xl(Je,et,1,bt,1,0);break;case vd:Nf(at,Ot,bt,Je,et);break;case w0:Nf(at,Ot,bt,Je,et),ca(Je,et,bt,1,0);break;case xx:Lo(at,Ot,bt,Je,et);break;default:t(0)}je+=Ie,Ye+=dt}I.Ma+=Ne}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=te.height)}}I.C=G,t(I.C<=I.i)}function Oe(I){var G;if(0<I.ua)return 0;for(G=0;G<I.Wb;++G){var te=I.Ya[G].G,ce=I.Ya[G].H;if(0<te[1][ce[1]+0].g||0<te[2][ce[2]+0].g||0<te[3][ce[3]+0].g)return 0}return 1}function De(I,G,te,ce,xe,Ne){if(I.Z!=0){var Ee=I.qd,je=I.rd;for(t(_u[I.Z]!=null);G<te;++G)_u[I.Z](Ee,je,ce,xe,ce,xe,Ne),Ee=ce,je=xe,xe+=Ne;I.qd=Ee,I.rd=je}}function ge(I,G){var te=I.l.ma,ce=te.Z==0||te.Z==1?I.l.j:I.C;if(ce=I.C<ce?ce:I.C,t(G<=I.l.o),G>ce){var xe=I.l.width,Ne=te.ca,Ee=te.tb+xe*ce,je=I.V,Ie=I.Ba+I.c*ce,Me=I.gc;t(I.ab==1),t(Me[0].hc==3),yf(Me[0],ce,G,je,Ie,Ne,Ee),De(te,ce,G,Ne,Ee,xe)}I.C=I.Ma=G}function he(I,G,te,ce,xe,Ne,Ee){var je=I.$/ce,Ie=I.$%ce,Me=I.m,Ye=I.s,dt=te+I.$,lt=dt;xe=te+ce*xe;var at=te+ce*Ne,Ot=280+Ye.ua,bt=I.Pb?je:16777216,Je=0<Ye.ua?Ye.Wa:null,et=Ye.wc,kt=dt<at?Ja(Ye,Ie,je):null;t(I.C<Ne),t(at<=xe);var Ft=!1;e:for(;;){for(;Ft||dt<at;){var St=0;if(je>=bt){var tr=dt-te;t((bt=I).Pb),bt.wd=bt.m,bt.xd=tr,0<bt.s.ua&&Te(bt.s.Wa,bt.s.vb),bt=je+iE}if(Ie&et||(kt=Ja(Ye,Ie,je)),t(kt!=null),kt.Qb&&(G[dt]=kt.qb,Ft=!0),!Ft)if(ne(Me),kt.jc){St=Me,tr=G;var Kt=dt,gr=kt.pd[F(St)&Ms-1];t(kt.jc),256>gr.g?(X(St,St.u+gr.g),tr[Kt]=gr.value,St=0):(X(St,St.u+gr.g-256),t(256<=gr.value),St=gr.value),St==0&&(Ft=!0)}else St=Ia(kt.G[0],kt.H[0],Me);if(Me.h)break;if(Ft||256>St){if(!Ft)if(kt.nd)G[dt]=(kt.qb|St<<8)>>>0;else{if(ne(Me),Ft=Ia(kt.G[1],kt.H[1],Me),ne(Me),tr=Ia(kt.G[2],kt.H[2],Me),Kt=Ia(kt.G[3],kt.H[3],Me),Me.h)break;G[dt]=(Kt<<24|Ft<<16|St<<8|tr)>>>0}if(Ft=!1,++dt,++Ie>=ce&&(Ie=0,++je,Ee!=null&&je<=Ne&&!(je%16)&&Ee(I,je),Je!=null))for(;lt<dt;)St=G[lt++],Je.X[(506832829*St&4294967295)>>>Je.Mb]=St}else if(280>St){if(St=xa(St-256,Me),tr=Ia(kt.G[4],kt.H[4],Me),ne(Me),tr=la(ce,tr=xa(tr,Me)),Me.h)break;if(dt-te<tr||xe-dt<St)break e;for(Kt=0;Kt<St;++Kt)G[dt+Kt]=G[dt+Kt-tr];for(dt+=St,Ie+=St;Ie>=ce;)Ie-=ce,++je,Ee!=null&&je<=Ne&&!(je%16)&&Ee(I,je);if(t(dt<=xe),Ie&et&&(kt=Ja(Ye,Ie,je)),Je!=null)for(;lt<dt;)St=G[lt++],Je.X[(506832829*St&4294967295)>>>Je.Mb]=St}else{if(!(St<Ot))break e;for(Ft=St-280,t(Je!=null);lt<dt;)St=G[lt++],Je.X[(506832829*St&4294967295)>>>Je.Mb]=St;St=dt,t(!(Ft>>>(tr=Je).Xa)),G[St]=tr.X[Ft],Ft=!0}Ft||t(Me.h==W(Me))}if(I.Pb&&Me.h&&dt<xe)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&Te(I.s.vb,I.s.Wa);else{if(Me.h)break e;Ee!=null&&Ee(I,je>Ne?Ne:je),I.a=0,I.$=dt-te}return 1}return I.a=3,0}function Be(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var G=I.Wa;G!=null&&(G.X=null),I.vb=null,t(I!=null)}function Qe(){var I=new p0;return I==null?null:(I.a=0,I.xb=N0,$r("Predictor","VP8LPredictors"),$r("Predictor","VP8LPredictors_C"),$r("PredictorAdd","VP8LPredictorsAdd"),$r("PredictorAdd","VP8LPredictorsAdd_C"),px=He,wf=xt,uo=gt,_i=Ve,Nf=Bt,Lo=dr,kc=er,_.VP8LMapColor32b=li,_.VP8LMapColor8b=xp,I)}function Fe(I,G,te,ce,xe){var Ne=1,Ee=[I],je=[G],Ie=ce.m,Me=ce.s,Ye=null,dt=0;e:for(;;){if(te)for(;Ne&&K(Ie,1);){var lt=Ee,at=je,Ot=ce,bt=1,Je=Ot.m,et=Ot.gc[Ot.ab],kt=K(Je,2);if(Ot.Oc&1<<kt)Ne=0;else{switch(Ot.Oc|=1<<kt,et.hc=kt,et.Ea=lt[0],et.nc=at[0],et.K=[null],++Ot.ab,t(4>=Ot.ab),kt){case 0:case 1:et.b=K(Je,3)+2,bt=Fe(me(et.Ea,et.b),me(et.nc,et.b),0,Ot,et.K),et.K=et.K[0];break;case 3:var Ft,St=K(Je,8)+1,tr=16<St?0:4<St?1:2<St?2:3;if(lt[0]=me(et.Ea,tr),et.b=tr,Ft=bt=Fe(St,1,0,Ot,et.K)){var Kt,gr=St,Xt=et,_a=1<<(8>>Xt.b),Ma=s(_a);if(Ma==null)Ft=0;else{var oa=Xt.K[0],ra=Xt.w;for(Ma[0]=Xt.K[0][0],Kt=1;Kt<1*gr;++Kt)Ma[Kt]=ye(oa[ra+Kt],Ma[Kt-1]);for(;Kt<4*_a;++Kt)Ma[Kt]=0;Xt.K[0]=null,Xt.K[0]=Ma,Ft=1}}bt=Ft;break;case 2:break;default:t(0)}Ne=bt}}if(Ee=Ee[0],je=je[0],Ne&&K(Ie,1)&&!(Ne=1<=(dt=K(Ie,4))&&11>=dt)){ce.a=3;break e}var en;if(en=Ne)t:{var Ua,qr,un,kr=ce,Lr=Ee,ka=je,Sa=dt,di=te,zs=kr.m,is=kr.s,os=[null],ws=1,Wl=0,Qa=$A[Sa];r:for(;;){if(di&&K(zs,1)){var Ns=K(zs,3)+2,Bc=me(Lr,Ns),Ff=me(ka,Ns),KA=Bc*Ff;if(!Fe(Bc,Ff,0,kr,os))break r;for(os=os[0],is.xc=Ns,Ua=0;Ua<KA;++Ua){var Df=os[Ua]>>8&65535;os[Ua]=Df,Df>=ws&&(ws=Df+1)}}if(zs.h)break r;for(qr=0;5>qr;++qr){var Pn=vl[qr];!qr&&0<Sa&&(Pn+=1<<Sa),Wl<Pn&&(Wl=Pn)}var Cp=o(ws*Qa,k),Ex=ws,Ao=o(Ex,U);if(Ao==null)var Hn=null;else t(65536>=Ex),Hn=Ao;var WA=s(Wl);if(Hn==null||WA==null||Cp==null){kr.a=1;break r}var Pf=Cp;for(Ua=un=0;Ua<ws;++Ua){var Uo=Hn[Ua],Rf=Uo.G,Qo=Uo.H,jp=0,C0=1,Cx=0;for(qr=0;5>qr;++qr){Pn=vl[qr],Rf[qr]=Pf,Qo[qr]=un,!qr&&0<Sa&&(Pn+=1<<Sa);n:{var kp,jx=Pn,_p=kr,j0=WA,fE=Pf,AE=un,Sp=0,jd=_p.m,a3=K(jd,1);if(n(j0,0,0,jx),a3){var hE=K(jd,1)+1,mE=K(jd,1),$1=K(jd,mE==0?1:8);j0[$1]=1,hE==2&&(j0[$1=K(jd,8)]=1);var k0=1}else{var G1=s(19),q1=K(jd,4)+4;if(19<q1){_p.a=3;var Bp=0;break n}for(kp=0;kp<q1;++kp)G1[yd[kp]]=K(jd,3);var kx=void 0,_0=void 0,pE=_p,gE=G1,kd=jx,Tp=j0,_x=0,Tc=pE.m,S0=8,K1=o(128,k);a:for(;P(K1,0,7,gE,19);){if(K(Tc,1)){var xE=2+2*K(Tc,3);if((kx=2+K(Tc,xE))>kd)break a}else kx=kd;for(_0=0;_0<kd&&kx--;){ne(Tc);var W1=K1[0+(127&F(Tc))];X(Tc,Tc.u+W1.g);var XA=W1.value;if(16>XA)Tp[_0++]=XA,XA!=0&&(S0=XA);else{var vE=XA==16,X1=XA-16,Y1=Kl[X1],J1=K(Tc,vx[X1])+Y1;if(_0+J1>kd)break a;for(var bE=vE?S0:0;0<J1--;)Tp[_0++]=bE}}_x=1;break a}_x||(pE.a=3),k0=_x}(k0=k0&&!jd.h)&&(Sp=P(fE,AE,8,j0,jx)),k0&&Sp!=0?Bp=Sp:(_p.a=3,Bp=0)}if(Bp==0)break r;if(C0&&VA[qr]==1&&(C0=Pf[un].g==0),jp+=Pf[un].g,un+=Bp,3>=qr){var YA,Sx=WA[0];for(YA=1;YA<Pn;++YA)WA[YA]>Sx&&(Sx=WA[YA]);Cx+=Sx}}if(Uo.nd=C0,Uo.Qb=0,C0&&(Uo.qb=(Rf[3][Qo[3]+0].value<<24|Rf[1][Qo[1]+0].value<<16|Rf[2][Qo[2]+0].value)>>>0,jp==0&&256>Rf[0][Qo[0]+0].value&&(Uo.Qb=1,Uo.qb+=Rf[0][Qo[0]+0].value<<8)),Uo.jc=!Uo.Qb&&6>Cx,Uo.jc){var Ip,_d=Uo;for(Ip=0;Ip<Ms;++Ip){var Tu=Ip,Sd=_d.pd[Tu],Op=_d.G[0][_d.H[0]+Tu];256<=Op.value?(Sd.g=Op.g+256,Sd.value=Op.value):(Sd.g=0,Sd.value=0,Tu>>=Ka(Op,8,Sd),Tu>>=Ka(_d.G[1][_d.H[1]+Tu],16,Sd),Tu>>=Ka(_d.G[2][_d.H[2]+Tu],0,Sd),Ka(_d.G[3][_d.H[3]+Tu],24,Sd))}}}is.vc=os,is.Wb=ws,is.Ya=Hn,is.yc=Cp,en=1;break t}en=0}if(!(Ne=en)){ce.a=3;break e}if(0<dt){if(Me.ua=1<<dt,!Le(Me.Wa,dt)){ce.a=1,Ne=0;break e}}else Me.ua=0;var Fp=ce,Z1=Ee,yE=je,ey=Fp.s,ty=ey.xc;if(Fp.c=Z1,Fp.i=yE,ey.md=me(Z1,ty),ey.wc=ty==0?-1:(1<<ty)-1,te){ce.xb=lE;break e}if((Ye=s(Ee*je))==null){ce.a=1,Ne=0;break e}Ne=(Ne=he(ce,Ye,0,Ee,je,je,null))&&!Ie.h;break e}return Ne?(xe!=null?xe[0]=Ye:(t(Ye==null),t(te)),ce.$=0,te||Be(Me)):Be(Me),Ne}function qe(I,G){var te=I.c*I.i,ce=te+G+16*G;return t(I.c<=G),I.V=s(ce),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+te+G,1)}function Xe(I,G){var te=I.C,ce=G-te,xe=I.V,Ne=I.Ba+I.c*te;for(t(G<=I.l.o);0<ce;){var Ee=16<ce?16:ce,je=I.l.ma,Ie=I.l.width,Me=Ie*Ee,Ye=je.ca,dt=je.tb+Ie*te,lt=I.Ta,at=I.Ua;we(I,Ee,xe,Ne),bn(lt,at,Ye,dt,Me),De(je,te,te+Ee,Ye,dt,Ie),ce-=Ee,xe+=Ee*I.c,te+=Ee}t(te==G),I.C=I.Ma=G}function yt(){this.ub=this.yd=this.td=this.Rb=0}function wt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ht(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Tt(){this.Yb=function(){var I=[];return function G(te,ce,xe){for(var Ne=xe[ce],Ee=0;Ee<Ne&&(te.push(xe.length>ce+1?[]:0),!(xe.length<ce+1));Ee++)G(te[Ee],ce+1,xe)}(I,0,[3,11]),I}()}function Vt(){this.jb=s(3),this.Wc=l([4,8],Tt),this.Xc=l([4,17],Tt)}function jr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ea(){this.ld=this.La=this.dd=this.tc=0}function ta(){this.Na=this.la=0}function ia(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function gs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function To(){this.uc=this.M=this.Nb=0,this.wa=Array(new ea),this.Y=0,this.ya=Array(new gs),this.aa=0,this.l=new Ls}function xs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ii(){this.cb=this.a=0,this.sc="",this.m=new J,this.Od=new yt,this.Kc=new wt,this.ed=new jr,this.Qa=new Ht,this.Ic=this.$c=this.Aa=0,this.D=new To,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,J),this.ia=0,this.pb=o(4,ia),this.Pa=new Vt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xs),this.Hd=0,this.rb=Array(new ta),this.sb=0,this.wa=Array(new ea),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new gs),this.L=this.aa=0,this.gd=l([4,2],ea),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ls(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ei(){var I=new ii;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,Us||(Us=f0)),I}function vn(I,G,te){return I.a==0&&(I.a=G,I.sc=te,I.cb=0),0}function oi(I,G,te){return 3<=te&&I[G+0]==157&&I[G+1]==1&&I[G+2]==42}function ff(I,G){if(I==null)return 0;if(I.a=0,I.sc="OK",G==null)return vn(I,2,"null VP8Io passed to VP8GetHeaders()");var te=G.data,ce=G.w,xe=G.ha;if(4>xe)return vn(I,7,"Truncated header.");var Ne=te[ce+0]|te[ce+1]<<8|te[ce+2]<<16,Ee=I.Od;if(Ee.Rb=!(1&Ne),Ee.td=Ne>>1&7,Ee.yd=Ne>>4&1,Ee.ub=Ne>>5,3<Ee.td)return vn(I,3,"Incorrect keyframe parameters.");if(!Ee.yd)return vn(I,4,"Frame not displayable.");ce+=3,xe-=3;var je=I.Kc;if(Ee.Rb){if(7>xe)return vn(I,7,"cannot parse picture header");if(!oi(te,ce,xe))return vn(I,3,"Bad code word");je.c=16383&(te[ce+4]<<8|te[ce+3]),je.Td=te[ce+4]>>6,je.i=16383&(te[ce+6]<<8|te[ce+5]),je.Ud=te[ce+6]>>6,ce+=7,xe-=7,I.za=je.c+15>>4,I.Ub=je.i+15>>4,G.width=je.c,G.height=je.i,G.Da=0,G.j=0,G.v=0,G.va=G.width,G.o=G.height,G.da=0,G.ib=G.width,G.hb=G.height,G.U=G.width,G.T=G.height,n((Ne=I.Pa).jb,0,255,Ne.jb.length),t((Ne=I.Qa)!=null),Ne.Cb=0,Ne.Bb=0,Ne.Fb=1,n(Ne.Zb,0,0,Ne.Zb.length),n(Ne.Lb,0,0,Ne.Lb)}if(Ee.ub>xe)return vn(I,7,"bad partition length");z(Ne=I.m,te,ce,Ee.ub),ce+=Ee.ub,xe-=Ee.ub,Ee.Rb&&(je.Ld=ie(Ne),je.Kd=ie(Ne)),je=I.Qa;var Ie,Me=I.Pa;if(t(Ne!=null),t(je!=null),je.Cb=ie(Ne),je.Cb){if(je.Bb=ie(Ne),ie(Ne)){for(je.Fb=ie(Ne),Ie=0;4>Ie;++Ie)je.Zb[Ie]=ie(Ne)?q(Ne,7):0;for(Ie=0;4>Ie;++Ie)je.Lb[Ie]=ie(Ne)?q(Ne,6):0}if(je.Bb)for(Ie=0;3>Ie;++Ie)Me.jb[Ie]=ie(Ne)?Q(Ne,8):255}else je.Bb=0;if(Ne.Ka)return vn(I,3,"cannot parse segment header");if((je=I.ed).zd=ie(Ne),je.Tb=Q(Ne,6),je.wb=Q(Ne,3),je.Pc=ie(Ne),je.Pc&&ie(Ne)){for(Me=0;4>Me;++Me)ie(Ne)&&(je.vd[Me]=q(Ne,6));for(Me=0;4>Me;++Me)ie(Ne)&&(je.od[Me]=q(Ne,6))}if(I.L=je.Tb==0?0:je.zd?1:2,Ne.Ka)return vn(I,3,"cannot parse filter header");var Ye=xe;if(xe=Ie=ce,ce=Ie+Ye,je=Ye,I.Xb=(1<<Q(I.m,2))-1,Ye<3*(Me=I.Xb))te=7;else{for(Ie+=3*Me,je-=3*Me,Ye=0;Ye<Me;++Ye){var dt=te[xe+0]|te[xe+1]<<8|te[xe+2]<<16;dt>je&&(dt=je),z(I.Jc[+Ye],te,Ie,dt),Ie+=dt,je-=dt,xe+=3}z(I.Jc[+Me],te,Ie,je),te=Ie<ce?0:5}if(te!=0)return vn(I,te,"cannot parse partitions");for(te=Q(Ie=I.m,7),xe=ie(Ie)?q(Ie,4):0,ce=ie(Ie)?q(Ie,4):0,je=ie(Ie)?q(Ie,4):0,Me=ie(Ie)?q(Ie,4):0,Ie=ie(Ie)?q(Ie,4):0,Ye=I.Qa,dt=0;4>dt;++dt){if(Ye.Cb){var lt=Ye.Zb[dt];Ye.Fb||(lt+=te)}else{if(0<dt){I.pb[dt]=I.pb[0];continue}lt=te}var at=I.pb[dt];at.Sc[0]=yp[La(lt+xe,127)],at.Sc[1]=wp[La(lt+0,127)],at.Eb[0]=2*yp[La(lt+ce,127)],at.Eb[1]=101581*wp[La(lt+je,127)]>>16,8>at.Eb[1]&&(at.Eb[1]=8),at.Qc[0]=yp[La(lt+Me,117)],at.Qc[1]=wp[La(lt+Ie,127)],at.lc=lt+Ie}if(!Ee.Rb)return vn(I,4,"Not a key frame.");for(ie(Ne),Ee=I.Pa,te=0;4>te;++te){for(xe=0;8>xe;++xe)for(ce=0;3>ce;++ce)for(je=0;11>je;++je)Me=ae(Ne,GA[te][xe][ce][je])?Q(Ne,8):ku[te][xe][ce][je],Ee.Wc[te][xe].Yb[ce][je]=Me;for(xe=0;17>xe;++xe)Ee.Xc[te][xe]=Ee.Wc[te][oE[xe]]}return I.kc=ie(Ne),I.kc&&(I.Bd=Q(Ne,8)),I.cb=1}function f0(I,G,te,ce,xe,Ne,Ee){var je=G[xe].Yb[te];for(te=0;16>xe;++xe){if(!ae(I,je[te+0]))return xe;for(;!ae(I,je[te+1]);)if(je=G[++xe].Yb[0],te=0,xe==16)return 16;var Ie=G[xe+1].Yb;if(ae(I,je[te+2])){var Me=I,Ye=0;if(ae(Me,(lt=je)[(dt=te)+3]))if(ae(Me,lt[dt+6])){for(je=0,dt=2*(Ye=ae(Me,lt[dt+8]))+(lt=ae(Me,lt[dt+9+Ye])),Ye=0,lt=Jn[dt];lt[je];++je)Ye+=Ye+ae(Me,lt[je]);Ye+=3+(8<<dt)}else ae(Me,lt[dt+7])?(Ye=7+2*ae(Me,165),Ye+=ae(Me,145)):Ye=5+ae(Me,159);else Ye=ae(Me,lt[dt+4])?3+ae(Me,lt[dt+5]):2;je=Ie[2]}else Ye=1,je=Ie[1];Ie=Ee+Oa[xe],0>(Me=I).b&&le(Me);var dt,lt=Me.b,at=(dt=Me.Ca>>1)-(Me.I>>lt)>>31;--Me.b,Me.Ca+=at,Me.Ca|=1,Me.I-=(dt+1&at)<<lt,Ne[Ie]=((Ye^at)-at)*ce[(0<xe)+0]}return 16}function fu(I){var G=I.rb[I.sb-1];G.la=0,G.Na=0,n(I.zc,0,0,I.zc.length),I.ja=0}function BA(I,G){if(I==null)return 0;if(G==null)return vn(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!ff(I,G))return 0;if(t(I.cb),G.ac==null||G.ac(G)){G.ob&&(I.L=0);var te=Cd[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=G.v-te>>4,I.zb=G.j-te>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=G.o+15+te>>4,I.Hb=G.va+15+te>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var ce=I.ed;for(te=0;4>te;++te){var xe;if(I.Qa.Cb){var Ne=I.Qa.Lb[te];I.Qa.Fb||(Ne+=ce.Tb)}else Ne=ce.Tb;for(xe=0;1>=xe;++xe){var Ee=I.gd[te][xe],je=Ne;if(ce.Pc&&(je+=ce.vd[0],xe&&(je+=ce.od[0])),0<(je=0>je?0:63<je?63:je)){var Ie=je;0<ce.wb&&(Ie=4<ce.wb?Ie>>2:Ie>>1)>9-ce.wb&&(Ie=9-ce.wb),1>Ie&&(Ie=1),Ee.dd=Ie,Ee.tc=2*je+Ie,Ee.ld=40<=je?2:15<=je?1:0}else Ee.tc=0;Ee.La=xe}}}te=0}else vn(I,6,"Frame setup failed"),te=I.a;if(te=te==0){if(te){I.$c=0,0<I.Aa||(I.Ic=uE);e:{te=I.Ic,ce=4*(Ie=I.za);var Me=32*Ie,Ye=Ie+1,dt=0<I.L?Ie*(0<I.Aa?2:1):0,lt=(I.Aa==2?2:1)*Ie;if((Ee=ce+832+(xe=3*(16*te+Cd[I.L])/2*Me)+(Ne=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=Ee)te=0;else{if(Ee>I.Vb){if(I.Vb=0,I.Ec=s(Ee),I.Fc=0,I.Ec==null){te=vn(I,1,"no memory during frame initialization.");break e}I.Vb=Ee}Ee=I.Ec,je=I.Fc,I.Ac=Ee,I.Bc=je,je+=ce,I.Gd=o(Me,xs),I.Hd=0,I.rb=o(Ye+1,ta),I.sb=1,I.wa=dt?o(dt,ea):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=Ie),t(!0),I.oc=Ee,I.pc=je,je+=832,I.ya=o(lt,gs),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=Ie),I.R=16*Ie,I.B=8*Ie,Ie=(Me=Cd[I.L])*I.R,Me=Me/2*I.B,I.sa=Ee,I.ta=je+Ie,I.qa=I.sa,I.ra=I.ta+16*te*I.R+Me,I.Ha=I.qa,I.Ia=I.ra+8*te*I.B+Me,I.$c=0,je+=xe,I.mb=Ne?Ee:null,I.nb=Ne?je:null,t(je+Ne<=I.Fc+I.Vb),fu(I),n(I.Ac,I.Bc,0,ce),te=1}}if(te){if(G.ka=0,G.y=I.sa,G.O=I.ta,G.f=I.qa,G.N=I.ra,G.ea=I.Ha,G.Vd=I.Ia,G.fa=I.R,G.Rc=I.B,G.F=null,G.J=0,!xd){for(te=-255;255>=te;++te)ss[255+te]=0>te?-te:te;for(te=-1020;1020>=te;++te)Gl[1020+te]=-128>te?-128:127<te?127:te;for(te=-112;112>=te;++te)_f[112+te]=-16>te?-16:15<te?15:te;for(te=-255;510>=te;++te)Sf[255+te]=0>te?0:255<te?255:te;xd=1}Eu=Io,_c=hu,Sc=Rl,ys=Ra,Mo=mu,Xn=Au,MA=vu,Cu=Cc,v0=pf,Ef=DA,Cf=mf,jf=dd,UA=fd,b0=bu,kf=gl,gd=Hi,QA=bs,Yn=m0,fo[0]=Ui,fo[1]=A0,fo[2]=Ul,fo[3]=h0,fo[4]=Oo,fo[5]=Ql,fo[6]=co,fo[7]=Fo,fo[8]=Ec,fo[9]=pu,Nd[0]=Ll,Nd[1]=IA,Nd[2]=yc,Nd[3]=hf,Nd[4]=cn,Nd[5]=Nc,Nd[6]=Ml,bl[0]=Hl,bl[1]=TA,bl[2]=OA,bl[3]=Do,bl[4]=Aa,bl[5]=vs,bl[6]=gu,te=1}else te=0}te&&(te=function(at,Ot){for(at.M=0;at.M<at.Va;++at.M){var bt,Je=at.Jc[at.M&at.Xb],et=at.m,kt=at;for(bt=0;bt<kt.za;++bt){var Ft=et,St=kt,tr=St.Ac,Kt=St.Bc+4*bt,gr=St.zc,Xt=St.ya[St.aa+bt];if(St.Qa.Bb?Xt.$b=ae(Ft,St.Pa.jb[0])?2+ae(Ft,St.Pa.jb[2]):ae(Ft,St.Pa.jb[1]):Xt.$b=0,St.kc&&(Xt.Ad=ae(Ft,St.Bd)),Xt.Za=!ae(Ft,145)+0,Xt.Za){var _a=Xt.Ob,Ma=0;for(St=0;4>St;++St){var oa,ra=gr[0+St];for(oa=0;4>oa;++oa){ra=H1[tr[Kt+oa]][ra];for(var en=Tf[ae(Ft,ra[0])];0<en;)en=Tf[2*en+ae(Ft,ra[en])];ra=-en,tr[Kt+oa]=ra}a(_a,Ma,tr,Kt,4),Ma+=4,gr[0+St]=ra}}else ra=ae(Ft,156)?ae(Ft,128)?1:3:ae(Ft,163)?2:0,Xt.Ob[0]=ra,n(tr,Kt,ra,4),n(gr,0,ra,4);Xt.Dd=ae(Ft,142)?ae(Ft,114)?ae(Ft,183)?1:3:2:0}if(kt.m.Ka)return vn(at,7,"Premature end-of-partition0 encountered.");for(;at.ja<at.za;++at.ja){if(kt=Je,Ft=(et=at).rb[et.sb-1],tr=et.rb[et.sb+et.ja],bt=et.ya[et.aa+et.ja],Kt=et.kc?bt.Ad:0)Ft.la=tr.la=0,bt.Za||(Ft.Na=tr.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var Ua,qr;if(Ft=tr,tr=kt,Kt=et.Pa.Xc,gr=et.ya[et.aa+et.ja],Xt=et.pb[gr.$b],St=gr.ad,_a=0,Ma=et.rb[et.sb-1],ra=oa=0,n(St,_a,0,384),gr.Za)var un=0,kr=Kt[3];else{en=s(16);var Lr=Ft.Na+Ma.Na;if(Lr=Us(tr,Kt[1],Lr,Xt.Eb,0,en,0),Ft.Na=Ma.Na=(0<Lr)+0,1<Lr)Eu(en,0,St,_a);else{var ka=en[0]+3>>3;for(en=0;256>en;en+=16)St[_a+en]=ka}un=1,kr=Kt[0]}var Sa=15&Ft.la,di=15&Ma.la;for(en=0;4>en;++en){var zs=1&di;for(ka=qr=0;4>ka;++ka)Sa=Sa>>1|(zs=(Lr=Us(tr,kr,Lr=zs+(1&Sa),Xt.Sc,un,St,_a))>un)<<7,qr=qr<<2|(3<Lr?3:1<Lr?2:St[_a+0]!=0),_a+=16;Sa>>=4,di=di>>1|zs<<7,oa=(oa<<8|qr)>>>0}for(kr=Sa,un=di>>4,Ua=0;4>Ua;Ua+=2){for(qr=0,Sa=Ft.la>>4+Ua,di=Ma.la>>4+Ua,en=0;2>en;++en){for(zs=1&di,ka=0;2>ka;++ka)Lr=zs+(1&Sa),Sa=Sa>>1|(zs=0<(Lr=Us(tr,Kt[2],Lr,Xt.Qc,0,St,_a)))<<3,qr=qr<<2|(3<Lr?3:1<Lr?2:St[_a+0]!=0),_a+=16;Sa>>=2,di=di>>1|zs<<5}ra|=qr<<4*Ua,kr|=Sa<<4<<Ua,un|=(240&di)<<Ua}Ft.la=kr,Ma.la=un,gr.Hc=oa,gr.Gc=ra,gr.ia=43690&ra?0:Xt.ia,Kt=!(oa|ra)}if(0<et.L&&(et.wa[et.Y+et.ja]=et.gd[bt.$b][bt.Za],et.wa[et.Y+et.ja].La|=!Kt),kt.Ka)return vn(at,7,"Premature end-of-file encountered.")}if(fu(at),et=Ot,kt=1,bt=(Je=at).D,Ft=0<Je.L&&Je.M>=Je.zb&&Je.M<=Je.Va,Je.Aa==0)e:{if(bt.M=Je.M,bt.uc=Ft,Po(Je,bt),kt=1,bt=(qr=Je.D).Nb,Ft=(ra=Cd[Je.L])*Je.R,tr=ra/2*Je.B,en=16*bt*Je.R,ka=8*bt*Je.B,Kt=Je.sa,gr=Je.ta-Ft+en,Xt=Je.qa,St=Je.ra-tr+ka,_a=Je.Ha,Ma=Je.Ia-tr+ka,di=(Sa=qr.M)==0,oa=Sa>=Je.Va-1,Je.Aa==2&&Po(Je,qr),qr.uc)for(zs=(Lr=Je).D.M,t(Lr.D.uc),qr=Lr.yb;qr<Lr.Hb;++qr){un=qr,kr=zs;var is=(os=(Pn=Lr).D).Nb;Ua=Pn.R;var os=os.wa[os.Y+un],ws=Pn.sa,Wl=Pn.ta+16*is*Ua+16*un,Qa=os.dd,Ns=os.tc;if(Ns!=0)if(t(3<=Ns),Pn.L==1)0<un&&gd(ws,Wl,Ua,Ns+4),os.La&&Yn(ws,Wl,Ua,Ns),0<kr&&kf(ws,Wl,Ua,Ns+4),os.La&&QA(ws,Wl,Ua,Ns);else{var Bc=Pn.B,Ff=Pn.qa,KA=Pn.ra+8*is*Bc+8*un,Df=Pn.Ha,Pn=Pn.Ia+8*is*Bc+8*un;is=os.ld,0<un&&(Cu(ws,Wl,Ua,Ns+4,Qa,is),Ef(Ff,KA,Df,Pn,Bc,Ns+4,Qa,is)),os.La&&(jf(ws,Wl,Ua,Ns,Qa,is),b0(Ff,KA,Df,Pn,Bc,Ns,Qa,is)),0<kr&&(MA(ws,Wl,Ua,Ns+4,Qa,is),v0(Ff,KA,Df,Pn,Bc,Ns+4,Qa,is)),os.La&&(Cf(ws,Wl,Ua,Ns,Qa,is),UA(Ff,KA,Df,Pn,Bc,Ns,Qa,is))}}if(Je.ia&&alert("todo:DitherRow"),et.put!=null){if(qr=16*Sa,Sa=16*(Sa+1),di?(et.y=Je.sa,et.O=Je.ta+en,et.f=Je.qa,et.N=Je.ra+ka,et.ea=Je.Ha,et.W=Je.Ia+ka):(qr-=ra,et.y=Kt,et.O=gr,et.f=Xt,et.N=St,et.ea=_a,et.W=Ma),oa||(Sa-=ra),Sa>et.o&&(Sa=et.o),et.F=null,et.J=null,Je.Fa!=null&&0<Je.Fa.length&&qr<Sa&&(et.J=xf(Je,et,qr,Sa-qr),et.F=Je.mb,et.F==null&&et.F.length==0)){kt=vn(Je,3,"Could not decode alpha data.");break e}qr<et.j&&(ra=et.j-qr,qr=et.j,t(!(1&ra)),et.O+=Je.R*ra,et.N+=Je.B*(ra>>1),et.W+=Je.B*(ra>>1),et.F!=null&&(et.J+=et.width*ra)),qr<Sa&&(et.O+=et.v,et.N+=et.v>>1,et.W+=et.v>>1,et.F!=null&&(et.J+=et.v),et.ka=qr-et.j,et.U=et.va-et.v,et.T=Sa-qr,kt=et.put(et))}bt+1!=Je.Ic||oa||(a(Je.sa,Je.ta-Ft,Kt,gr+16*Je.R,Ft),a(Je.qa,Je.ra-tr,Xt,St+8*Je.B,tr),a(Je.Ha,Je.Ia-tr,_a,Ma+8*Je.B,tr))}if(!kt)return vn(at,6,"Output aborted.")}return 1}(I,G)),G.bc!=null&&G.bc(G),te&=1}return te?(I.cb=0,te):0}function Ci(I,G,te,ce,xe){xe=I[G+te+32*ce]+(xe>>3),I[G+te+32*ce]=-256&xe?0>xe?0:255:xe}function Af(I,G,te,ce,xe,Ne){Ci(I,G,0,te,ce+xe),Ci(I,G,1,te,ce+Ne),Ci(I,G,2,te,ce-Ne),Ci(I,G,3,te,ce-xe)}function ja(I){return(20091*I>>16)+I}function ji(I,G,te,ce){var xe,Ne=0,Ee=s(16);for(xe=0;4>xe;++xe){var je=I[G+0]+I[G+8],Ie=I[G+0]-I[G+8],Me=(35468*I[G+4]>>16)-ja(I[G+12]),Ye=ja(I[G+4])+(35468*I[G+12]>>16);Ee[Ne+0]=je+Ye,Ee[Ne+1]=Ie+Me,Ee[Ne+2]=Ie-Me,Ee[Ne+3]=je-Ye,Ne+=4,G++}for(xe=Ne=0;4>xe;++xe)je=(I=Ee[Ne+0]+4)+Ee[Ne+8],Ie=I-Ee[Ne+8],Me=(35468*Ee[Ne+4]>>16)-ja(Ee[Ne+12]),Ci(te,ce,0,0,je+(Ye=ja(Ee[Ne+4])+(35468*Ee[Ne+12]>>16))),Ci(te,ce,1,0,Ie+Me),Ci(te,ce,2,0,Ie-Me),Ci(te,ce,3,0,je-Ye),Ne++,ce+=32}function Au(I,G,te,ce){var xe=I[G+0]+4,Ne=35468*I[G+4]>>16,Ee=ja(I[G+4]),je=35468*I[G+1]>>16;Af(te,ce,0,xe+Ee,I=ja(I[G+1]),je),Af(te,ce,1,xe+Ne,I,je),Af(te,ce,2,xe-Ne,I,je),Af(te,ce,3,xe-Ee,I,je)}function hu(I,G,te,ce,xe){ji(I,G,te,ce),xe&&ji(I,G+16,te,ce+4)}function Rl(I,G,te,ce){_c(I,G+0,te,ce,1),_c(I,G+32,te,ce+128,1)}function Ra(I,G,te,ce){var xe;for(I=I[G+0]+4,xe=0;4>xe;++xe)for(G=0;4>G;++G)Ci(te,ce,G,xe,I)}function mu(I,G,te,ce){I[G+0]&&ys(I,G+0,te,ce),I[G+16]&&ys(I,G+16,te,ce+4),I[G+32]&&ys(I,G+32,te,ce+128),I[G+48]&&ys(I,G+48,te,ce+128+4)}function Io(I,G,te,ce){var xe,Ne=s(16);for(xe=0;4>xe;++xe){var Ee=I[G+0+xe]+I[G+12+xe],je=I[G+4+xe]+I[G+8+xe],Ie=I[G+4+xe]-I[G+8+xe],Me=I[G+0+xe]-I[G+12+xe];Ne[0+xe]=Ee+je,Ne[8+xe]=Ee-je,Ne[4+xe]=Me+Ie,Ne[12+xe]=Me-Ie}for(xe=0;4>xe;++xe)Ee=(I=Ne[0+4*xe]+3)+Ne[3+4*xe],je=Ne[1+4*xe]+Ne[2+4*xe],Ie=Ne[1+4*xe]-Ne[2+4*xe],Me=I-Ne[3+4*xe],te[ce+0]=Ee+je>>3,te[ce+16]=Me+Ie>>3,te[ce+32]=Ee-je>>3,te[ce+48]=Me-Ie>>3,ce+=64}function bc(I,G,te){var ce,xe=G-32,Ne=ci,Ee=255-I[xe-1];for(ce=0;ce<te;++ce){var je,Ie=Ne,Me=Ee+I[G-1];for(je=0;je<te;++je)I[G+je]=Ie[Me+I[xe+je]];G+=32}}function A0(I,G){bc(I,G,4)}function TA(I,G){bc(I,G,8)}function IA(I,G){bc(I,G,16)}function yc(I,G){var te;for(te=0;16>te;++te)a(I,G+32*te,I,G-32,16)}function hf(I,G){var te;for(te=16;0<te;--te)n(I,G,I[G-1],16),G+=32}function wc(I,G,te){var ce;for(ce=0;16>ce;++ce)n(G,te+32*ce,I,16)}function Ll(I,G){var te,ce=16;for(te=0;16>te;++te)ce+=I[G-1+32*te]+I[G+te-32];wc(ce>>5,I,G)}function cn(I,G){var te,ce=8;for(te=0;16>te;++te)ce+=I[G-1+32*te];wc(ce>>4,I,G)}function Nc(I,G){var te,ce=8;for(te=0;16>te;++te)ce+=I[G+te-32];wc(ce>>4,I,G)}function Ml(I,G){wc(128,I,G)}function Sr(I,G,te){return I+2*G+te+2>>2}function Ul(I,G){var te,ce=G-32;for(ce=new Uint8Array([Sr(I[ce-1],I[ce+0],I[ce+1]),Sr(I[ce+0],I[ce+1],I[ce+2]),Sr(I[ce+1],I[ce+2],I[ce+3]),Sr(I[ce+2],I[ce+3],I[ce+4])]),te=0;4>te;++te)a(I,G+32*te,ce,0,ce.length)}function h0(I,G){var te=I[G-1],ce=I[G-1+32],xe=I[G-1+64],Ne=I[G-1+96];Ae(I,G+0,16843009*Sr(I[G-1-32],te,ce)),Ae(I,G+32,16843009*Sr(te,ce,xe)),Ae(I,G+64,16843009*Sr(ce,xe,Ne)),Ae(I,G+96,16843009*Sr(xe,Ne,Ne))}function Ui(I,G){var te,ce=4;for(te=0;4>te;++te)ce+=I[G+te-32]+I[G-1+32*te];for(ce>>=3,te=0;4>te;++te)n(I,G+32*te,ce,4)}function Oo(I,G){var te=I[G-1+0],ce=I[G-1+32],xe=I[G-1+64],Ne=I[G-1-32],Ee=I[G+0-32],je=I[G+1-32],Ie=I[G+2-32],Me=I[G+3-32];I[G+0+96]=Sr(ce,xe,I[G-1+96]),I[G+1+96]=I[G+0+64]=Sr(te,ce,xe),I[G+2+96]=I[G+1+64]=I[G+0+32]=Sr(Ne,te,ce),I[G+3+96]=I[G+2+64]=I[G+1+32]=I[G+0+0]=Sr(Ee,Ne,te),I[G+3+64]=I[G+2+32]=I[G+1+0]=Sr(je,Ee,Ne),I[G+3+32]=I[G+2+0]=Sr(Ie,je,Ee),I[G+3+0]=Sr(Me,Ie,je)}function co(I,G){var te=I[G+1-32],ce=I[G+2-32],xe=I[G+3-32],Ne=I[G+4-32],Ee=I[G+5-32],je=I[G+6-32],Ie=I[G+7-32];I[G+0+0]=Sr(I[G+0-32],te,ce),I[G+1+0]=I[G+0+32]=Sr(te,ce,xe),I[G+2+0]=I[G+1+32]=I[G+0+64]=Sr(ce,xe,Ne),I[G+3+0]=I[G+2+32]=I[G+1+64]=I[G+0+96]=Sr(xe,Ne,Ee),I[G+3+32]=I[G+2+64]=I[G+1+96]=Sr(Ne,Ee,je),I[G+3+64]=I[G+2+96]=Sr(Ee,je,Ie),I[G+3+96]=Sr(je,Ie,Ie)}function Ql(I,G){var te=I[G-1+0],ce=I[G-1+32],xe=I[G-1+64],Ne=I[G-1-32],Ee=I[G+0-32],je=I[G+1-32],Ie=I[G+2-32],Me=I[G+3-32];I[G+0+0]=I[G+1+64]=Ne+Ee+1>>1,I[G+1+0]=I[G+2+64]=Ee+je+1>>1,I[G+2+0]=I[G+3+64]=je+Ie+1>>1,I[G+3+0]=Ie+Me+1>>1,I[G+0+96]=Sr(xe,ce,te),I[G+0+64]=Sr(ce,te,Ne),I[G+0+32]=I[G+1+96]=Sr(te,Ne,Ee),I[G+1+32]=I[G+2+96]=Sr(Ne,Ee,je),I[G+2+32]=I[G+3+96]=Sr(Ee,je,Ie),I[G+3+32]=Sr(je,Ie,Me)}function Fo(I,G){var te=I[G+0-32],ce=I[G+1-32],xe=I[G+2-32],Ne=I[G+3-32],Ee=I[G+4-32],je=I[G+5-32],Ie=I[G+6-32],Me=I[G+7-32];I[G+0+0]=te+ce+1>>1,I[G+1+0]=I[G+0+64]=ce+xe+1>>1,I[G+2+0]=I[G+1+64]=xe+Ne+1>>1,I[G+3+0]=I[G+2+64]=Ne+Ee+1>>1,I[G+0+32]=Sr(te,ce,xe),I[G+1+32]=I[G+0+96]=Sr(ce,xe,Ne),I[G+2+32]=I[G+1+96]=Sr(xe,Ne,Ee),I[G+3+32]=I[G+2+96]=Sr(Ne,Ee,je),I[G+3+64]=Sr(Ee,je,Ie),I[G+3+96]=Sr(je,Ie,Me)}function pu(I,G){var te=I[G-1+0],ce=I[G-1+32],xe=I[G-1+64],Ne=I[G-1+96];I[G+0+0]=te+ce+1>>1,I[G+2+0]=I[G+0+32]=ce+xe+1>>1,I[G+2+32]=I[G+0+64]=xe+Ne+1>>1,I[G+1+0]=Sr(te,ce,xe),I[G+3+0]=I[G+1+32]=Sr(ce,xe,Ne),I[G+3+32]=I[G+1+64]=Sr(xe,Ne,Ne),I[G+3+64]=I[G+2+64]=I[G+0+96]=I[G+1+96]=I[G+2+96]=I[G+3+96]=Ne}function Ec(I,G){var te=I[G-1+0],ce=I[G-1+32],xe=I[G-1+64],Ne=I[G-1+96],Ee=I[G-1-32],je=I[G+0-32],Ie=I[G+1-32],Me=I[G+2-32];I[G+0+0]=I[G+2+32]=te+Ee+1>>1,I[G+0+32]=I[G+2+64]=ce+te+1>>1,I[G+0+64]=I[G+2+96]=xe+ce+1>>1,I[G+0+96]=Ne+xe+1>>1,I[G+3+0]=Sr(je,Ie,Me),I[G+2+0]=Sr(Ee,je,Ie),I[G+1+0]=I[G+3+32]=Sr(te,Ee,je),I[G+1+32]=I[G+3+64]=Sr(ce,te,Ee),I[G+1+64]=I[G+3+96]=Sr(xe,ce,te),I[G+1+96]=Sr(Ne,xe,ce)}function OA(I,G){var te;for(te=0;8>te;++te)a(I,G+32*te,I,G-32,8)}function Do(I,G){var te;for(te=0;8>te;++te)n(I,G,I[G-1],8),G+=32}function Qi(I,G,te){var ce;for(ce=0;8>ce;++ce)n(G,te+32*ce,I,8)}function Hl(I,G){var te,ce=8;for(te=0;8>te;++te)ce+=I[G+te-32]+I[G-1+32*te];Qi(ce>>4,I,G)}function vs(I,G){var te,ce=4;for(te=0;8>te;++te)ce+=I[G+te-32];Qi(ce>>3,I,G)}function Aa(I,G){var te,ce=4;for(te=0;8>te;++te)ce+=I[G-1+32*te];Qi(ce>>3,I,G)}function gu(I,G){Qi(128,I,G)}function zl(I,G,te){var ce=I[G-te],xe=I[G+0],Ne=3*(xe-ce)+gx[1020+I[G-2*te]-I[G+te]],Ee=HA[112+(Ne+4>>3)];I[G-te]=ci[255+ce+HA[112+(Ne+3>>3)]],I[G+0]=ci[255+xe-Ee]}function FA(I,G,te,ce){var xe=I[G+0],Ne=I[G+te];return ql[255+I[G-2*te]-I[G-te]]>ce||ql[255+Ne-xe]>ce}function cd(I,G,te,ce){return 4*ql[255+I[G-te]-I[G+0]]+ql[255+I[G-2*te]-I[G+te]]<=ce}function ud(I,G,te,ce,xe){var Ne=I[G-3*te],Ee=I[G-2*te],je=I[G-te],Ie=I[G+0],Me=I[G+te],Ye=I[G+2*te],dt=I[G+3*te];return 4*ql[255+je-Ie]+ql[255+Ee-Me]>ce?0:ql[255+I[G-4*te]-Ne]<=xe&&ql[255+Ne-Ee]<=xe&&ql[255+Ee-je]<=xe&&ql[255+dt-Ye]<=xe&&ql[255+Ye-Me]<=xe&&ql[255+Me-Ie]<=xe}function gl(I,G,te,ce){var xe=2*ce+1;for(ce=0;16>ce;++ce)cd(I,G+ce,te,xe)&&zl(I,G+ce,te)}function Hi(I,G,te,ce){var xe=2*ce+1;for(ce=0;16>ce;++ce)cd(I,G+ce*te,1,xe)&&zl(I,G+ce*te,1)}function bs(I,G,te,ce){var xe;for(xe=3;0<xe;--xe)gl(I,G+=4*te,te,ce)}function m0(I,G,te,ce){var xe;for(xe=3;0<xe;--xe)Hi(I,G+=4,te,ce)}function xu(I,G,te,ce,xe,Ne,Ee,je){for(Ne=2*Ne+1;0<xe--;){if(ud(I,G,te,Ne,Ee))if(FA(I,G,te,je))zl(I,G,te);else{var Ie=I,Me=G,Ye=te,dt=Ie[Me-2*Ye],lt=Ie[Me-Ye],at=Ie[Me+0],Ot=Ie[Me+Ye],bt=Ie[Me+2*Ye],Je=27*(kt=gx[1020+3*(at-lt)+gx[1020+dt-Ot]])+63>>7,et=18*kt+63>>7,kt=9*kt+63>>7;Ie[Me-3*Ye]=ci[255+Ie[Me-3*Ye]+kt],Ie[Me-2*Ye]=ci[255+dt+et],Ie[Me-Ye]=ci[255+lt+Je],Ie[Me+0]=ci[255+at-Je],Ie[Me+Ye]=ci[255+Ot-et],Ie[Me+2*Ye]=ci[255+bt-kt]}G+=ce}}function ki(I,G,te,ce,xe,Ne,Ee,je){for(Ne=2*Ne+1;0<xe--;){if(ud(I,G,te,Ne,Ee))if(FA(I,G,te,je))zl(I,G,te);else{var Ie=I,Me=G,Ye=te,dt=Ie[Me-Ye],lt=Ie[Me+0],at=Ie[Me+Ye],Ot=HA[112+((bt=3*(lt-dt))+4>>3)],bt=HA[112+(bt+3>>3)],Je=Ot+1>>1;Ie[Me-2*Ye]=ci[255+Ie[Me-2*Ye]+Je],Ie[Me-Ye]=ci[255+dt+bt],Ie[Me+0]=ci[255+lt-Ot],Ie[Me+Ye]=ci[255+at-Je]}G+=ce}}function vu(I,G,te,ce,xe,Ne){xu(I,G,te,1,16,ce,xe,Ne)}function Cc(I,G,te,ce,xe,Ne){xu(I,G,1,te,16,ce,xe,Ne)}function mf(I,G,te,ce,xe,Ne){var Ee;for(Ee=3;0<Ee;--Ee)ki(I,G+=4*te,te,1,16,ce,xe,Ne)}function dd(I,G,te,ce,xe,Ne){var Ee;for(Ee=3;0<Ee;--Ee)ki(I,G+=4,1,te,16,ce,xe,Ne)}function pf(I,G,te,ce,xe,Ne,Ee,je){xu(I,G,xe,1,8,Ne,Ee,je),xu(te,ce,xe,1,8,Ne,Ee,je)}function DA(I,G,te,ce,xe,Ne,Ee,je){xu(I,G,1,xe,8,Ne,Ee,je),xu(te,ce,1,xe,8,Ne,Ee,je)}function fd(I,G,te,ce,xe,Ne,Ee,je){ki(I,G+4*xe,xe,1,8,Ne,Ee,je),ki(te,ce+4*xe,xe,1,8,Ne,Ee,je)}function bu(I,G,te,ce,xe,Ne,Ee,je){ki(I,G+4,1,xe,8,Ne,Ee,je),ki(te,ce+4,1,xe,8,Ne,Ee,je)}function Ad(){this.ba=new Pa,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function gf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function hd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function yu(){this.ua=0,this.Wa=new de,this.vb=new de,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new k}function p0(){this.xb=this.a=0,this.l=new Ls,this.ca=new Pa,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new yu,this.ab=0,this.gc=o(4,hd),this.Oc=0}function jc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ls,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wu(I,G,te,ce,xe,Ne,Ee){for(I=I==null?0:I[G+0],G=0;G<Ee;++G)xe[Ne+G]=I+te[ce+G]&255,I=xe[Ne+G]}function md(I,G,te,ce,xe,Ne,Ee){var je;if(I==null)wu(null,null,te,ce,xe,Ne,Ee);else for(je=0;je<Ee;++je)xe[Ne+je]=I[G+je]+te[ce+je]&255}function zi(I,G,te,ce,xe,Ne,Ee){if(I==null)wu(null,null,te,ce,xe,Ne,Ee);else{var je,Ie=I[G+0],Me=Ie,Ye=Ie;for(je=0;je<Ee;++je)Me=Ye+(Ie=I[G+je])-Me,Ye=te[ce+je]+(-256&Me?0>Me?0:255:Me)&255,Me=Ie,xe[Ne+je]=Ye}}function xf(I,G,te,ce){var xe=G.width,Ne=G.o;if(t(I!=null&&G!=null),0>te||0>=ce||te+ce>Ne)return null;if(!I.Cc){if(I.ga==null){var Ee;if(I.ga=new jc,(Ee=I.ga==null)||(Ee=G.width*G.o,t(I.Gb.length==0),I.Gb=s(Ee),I.Uc=0,I.Gb==null?Ee=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,Ee=1),Ee=!Ee),!Ee){Ee=I.ga;var je=I.Fa,Ie=I.P,Me=I.qc,Ye=I.mb,dt=I.nb,lt=Ie+1,at=Me-1,Ot=Ee.l;if(t(je!=null&&Ye!=null&&G!=null),_u[0]=null,_u[1]=wu,_u[2]=md,_u[3]=zi,Ee.ca=Ye,Ee.tb=dt,Ee.c=G.width,Ee.i=G.height,t(0<Ee.c&&0<Ee.i),1>=Me)G=0;else if(Ee.$a=je[Ie+0]>>0&3,Ee.Z=je[Ie+0]>>2&3,Ee.Lc=je[Ie+0]>>4&3,Ie=je[Ie+0]>>6&3,0>Ee.$a||1<Ee.$a||4<=Ee.Z||1<Ee.Lc||Ie)G=0;else if(Ot.put=Dn,Ot.ac=Ya,Ot.bc=Rs,Ot.ma=Ee,Ot.width=G.width,Ot.height=G.height,Ot.Da=G.Da,Ot.v=G.v,Ot.va=G.va,Ot.j=G.j,Ot.o=G.o,Ee.$a)e:{t(Ee.$a==1),G=Qe();t:for(;;){if(G==null){G=0;break e}if(t(Ee!=null),Ee.mc=G,G.c=Ee.c,G.i=Ee.i,G.l=Ee.l,G.l.ma=Ee,G.l.width=Ee.c,G.l.height=Ee.i,G.a=0,V(G.m,je,lt,at),!Fe(Ee.c,Ee.i,1,G,null)||(G.ab==1&&G.gc[0].hc==3&&Oe(G.s)?(Ee.ic=1,je=G.c*G.i,G.Ta=null,G.Ua=0,G.V=s(je),G.Ba=0,G.V==null?(G.a=1,G=0):G=1):(Ee.ic=0,G=qe(G,Ee.c)),!G))break t;G=1;break e}Ee.mc=null,G=0}else G=at>=Ee.c*Ee.i;Ee=!G}if(Ee)return null;I.ga.Lc!=1?I.Ga=0:ce=Ne-te}t(I.ga!=null),t(te+ce<=Ne);e:{if(G=(je=I.ga).c,Ne=je.l.o,je.$a==0){if(lt=I.rc,at=I.Vc,Ot=I.Fa,Ie=I.P+1+te*G,Me=I.mb,Ye=I.nb+te*G,t(Ie<=I.P+I.qc),je.Z!=0)for(t(_u[je.Z]!=null),Ee=0;Ee<ce;++Ee)_u[je.Z](lt,at,Ot,Ie,Me,Ye,G),lt=Me,at=Ye,Ye+=G,Ie+=G;else for(Ee=0;Ee<ce;++Ee)a(Me,Ye,Ot,Ie,G),lt=Me,at=Ye,Ye+=G,Ie+=G;I.rc=lt,I.Vc=at}else{if(t(je.mc!=null),G=te+ce,t((Ee=je.mc)!=null),t(G<=Ee.i),Ee.C>=G)G=1;else if(je.ic||rt(),je.ic){je=Ee.V,lt=Ee.Ba,at=Ee.c;var bt=Ee.i,Je=(Ot=1,Ie=Ee.$/at,Me=Ee.$%at,Ye=Ee.m,dt=Ee.s,Ee.$),et=at*bt,kt=at*G,Ft=dt.wc,St=Je<kt?Ja(dt,Me,Ie):null;t(Je<=et),t(G<=bt),t(Oe(dt));t:for(;;){for(;!Ye.h&&Je<kt;){if(Me&Ft||(St=Ja(dt,Me,Ie)),t(St!=null),ne(Ye),256>(bt=Ia(St.G[0],St.H[0],Ye)))je[lt+Je]=bt,++Je,++Me>=at&&(Me=0,++Ie<=G&&!(Ie%16)&&ge(Ee,Ie));else{if(!(280>bt)){Ot=0;break t}bt=xa(bt-256,Ye);var tr,Kt=Ia(St.G[4],St.H[4],Ye);if(ne(Ye),!(Je>=(Kt=la(at,Kt=xa(Kt,Ye)))&&et-Je>=bt)){Ot=0;break t}for(tr=0;tr<bt;++tr)je[lt+Je+tr]=je[lt+Je+tr-Kt];for(Je+=bt,Me+=bt;Me>=at;)Me-=at,++Ie<=G&&!(Ie%16)&&ge(Ee,Ie);Je<kt&&Me&Ft&&(St=Ja(dt,Me,Ie))}t(Ye.h==W(Ye))}ge(Ee,Ie>G?G:Ie);break t}!Ot||Ye.h&&Je<et?(Ot=0,Ee.a=Ye.h?5:3):Ee.$=Je,G=Ot}else G=he(Ee,Ee.V,Ee.Ba,Ee.c,Ee.i,G,Xe);if(!G){ce=0;break e}}te+ce>=Ne&&(I.Cc=1),ce=1}if(!ce)return null;if(I.Cc&&((ce=I.ga)!=null&&(ce.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+te*xe}function ee(I,G,te,ce,xe,Ne){for(;0<xe--;){var Ee,je=I,Ie=G+(te?1:0),Me=I,Ye=G+(te?0:3);for(Ee=0;Ee<ce;++Ee){var dt=Me[Ye+4*Ee];dt!=255&&(dt*=32897,je[Ie+4*Ee+0]=je[Ie+4*Ee+0]*dt>>23,je[Ie+4*Ee+1]=je[Ie+4*Ee+1]*dt>>23,je[Ie+4*Ee+2]=je[Ie+4*Ee+2]*dt>>23)}G+=Ne}}function ve(I,G,te,ce,xe){for(;0<ce--;){var Ne;for(Ne=0;Ne<te;++Ne){var Ee=I[G+2*Ne+0],je=15&(Me=I[G+2*Ne+1]),Ie=4369*je,Me=(240&Me|Me>>4)*Ie>>16;I[G+2*Ne+0]=(240&Ee|Ee>>4)*Ie>>16&240|(15&Ee|Ee<<4)*Ie>>16>>4&15,I[G+2*Ne+1]=240&Me|je}G+=xe}}function ze(I,G,te,ce,xe,Ne,Ee,je){var Ie,Me,Ye=255;for(Me=0;Me<xe;++Me){for(Ie=0;Ie<ce;++Ie){var dt=I[G+Ie];Ne[Ee+4*Ie]=dt,Ye&=dt}G+=te,Ee+=je}return Ye!=255}function We(I,G,te,ce,xe){var Ne;for(Ne=0;Ne<xe;++Ne)te[ce+Ne]=I[G+Ne]>>8}function rt(){xl=ee,ca=ve,ua=ze,bn=We}function Nt(I,G,te){_[I]=function(ce,xe,Ne,Ee,je,Ie,Me,Ye,dt,lt,at,Ot,bt,Je,et,kt,Ft){var St,tr=Ft-1>>1,Kt=je[Ie+0]|Me[Ye+0]<<16,gr=dt[lt+0]|at[Ot+0]<<16;t(ce!=null);var Xt=3*Kt+gr+131074>>2;for(G(ce[xe+0],255&Xt,Xt>>16,bt,Je),Ne!=null&&(Xt=3*gr+Kt+131074>>2,G(Ne[Ee+0],255&Xt,Xt>>16,et,kt)),St=1;St<=tr;++St){var _a=je[Ie+St]|Me[Ye+St]<<16,Ma=dt[lt+St]|at[Ot+St]<<16,oa=Kt+_a+gr+Ma+524296,ra=oa+2*(_a+gr)>>3;Xt=ra+Kt>>1,Kt=(oa=oa+2*(Kt+Ma)>>3)+_a>>1,G(ce[xe+2*St-1],255&Xt,Xt>>16,bt,Je+(2*St-1)*te),G(ce[xe+2*St-0],255&Kt,Kt>>16,bt,Je+(2*St-0)*te),Ne!=null&&(Xt=oa+gr>>1,Kt=ra+Ma>>1,G(Ne[Ee+2*St-1],255&Xt,Xt>>16,et,kt+(2*St-1)*te),G(Ne[Ee+2*St+0],255&Kt,Kt>>16,et,kt+(2*St+0)*te)),Kt=_a,gr=Ma}1&Ft||(Xt=3*Kt+gr+131074>>2,G(ce[xe+Ft-1],255&Xt,Xt>>16,bt,Je+(Ft-1)*te),Ne!=null&&(Xt=3*gr+Kt+131074>>2,G(Ne[Ee+Ft-1],255&Xt,Xt>>16,et,kt+(Ft-1)*te)))}}function Ut(){ui[Vi]=Ed,ui[y0]=Su,ui[ju]=If,ui[vp]=bx,ui[zA]=yx,ui[vd]=E0,ui[xx]=wx,ui[bp]=Su,ui[Bf]=bx,ui[bd]=yx,ui[w0]=E0}function Wt(I){return I&-16384?0>I?0:255:I>>e3}function D(I,G){return Wt((19077*I>>8)+(26149*G>>8)-14234)}function se(I,G,te){return Wt((19077*I>>8)-(6419*G>>8)-(13320*te>>8)+8708)}function ue(I,G){return Wt((19077*I>>8)+(33050*G>>8)-17685)}function _e(I,G,te,ce,xe){ce[xe+0]=D(I,te),ce[xe+1]=se(I,G,te),ce[xe+2]=ue(I,G)}function tt(I,G,te,ce,xe){ce[xe+0]=ue(I,G),ce[xe+1]=se(I,G,te),ce[xe+2]=D(I,te)}function ft(I,G,te,ce,xe){var Ne=se(I,G,te);G=Ne<<3&224|ue(I,G)>>3,ce[xe+0]=248&D(I,te)|Ne>>5,ce[xe+1]=G}function Qt(I,G,te,ce,xe){var Ne=240&ue(I,G)|15;ce[xe+0]=240&D(I,te)|se(I,G,te)>>4,ce[xe+1]=Ne}function Br(I,G,te,ce,xe){ce[xe+0]=255,_e(I,G,te,ce,xe+1)}function ha(I,G,te,ce,xe){tt(I,G,te,ce,xe),ce[xe+3]=255}function Gr(I,G,te,ce,xe){_e(I,G,te,ce,xe),ce[xe+3]=255}function La(I,G){return 0>I?0:I>G?G:I}function Za(I,G,te){_[I]=function(ce,xe,Ne,Ee,je,Ie,Me,Ye,dt){for(var lt=Ye+(-2&dt)*te;Ye!=lt;)G(ce[xe+0],Ne[Ee+0],je[Ie+0],Me,Ye),G(ce[xe+1],Ne[Ee+0],je[Ie+0],Me,Ye+te),xe+=2,++Ee,++Ie,Ye+=2*te;1&dt&&G(ce[xe+0],Ne[Ee+0],je[Ie+0],Me,Ye)}}function Vl(I,G,te){return te==0?I==0?G==0?6:5:G==0?4:0:te}function ns(I,G,te,ce,xe){switch(I>>>30){case 3:_c(G,te,ce,xe,0);break;case 2:Xn(G,te,ce,xe);break;case 1:ys(G,te,ce,xe)}}function Po(I,G){var te,ce,xe=G.M,Ne=G.Nb,Ee=I.oc,je=I.pc+40,Ie=I.oc,Me=I.pc+584,Ye=I.oc,dt=I.pc+600;for(te=0;16>te;++te)Ee[je+32*te-1]=129;for(te=0;8>te;++te)Ie[Me+32*te-1]=129,Ye[dt+32*te-1]=129;for(0<xe?Ee[je-1-32]=Ie[Me-1-32]=Ye[dt-1-32]=129:(n(Ee,je-32-1,127,21),n(Ie,Me-32-1,127,9),n(Ye,dt-32-1,127,9)),ce=0;ce<I.za;++ce){var lt=G.ya[G.aa+ce];if(0<ce){for(te=-1;16>te;++te)a(Ee,je+32*te-4,Ee,je+32*te+12,4);for(te=-1;8>te;++te)a(Ie,Me+32*te-4,Ie,Me+32*te+4,4),a(Ye,dt+32*te-4,Ye,dt+32*te+4,4)}var at=I.Gd,Ot=I.Hd+ce,bt=lt.ad,Je=lt.Hc;if(0<xe&&(a(Ee,je-32,at[Ot].y,0,16),a(Ie,Me-32,at[Ot].f,0,8),a(Ye,dt-32,at[Ot].ea,0,8)),lt.Za){var et=Ee,kt=je-32+16;for(0<xe&&(ce>=I.za-1?n(et,kt,at[Ot].y[15],4):a(et,kt,at[Ot+1].y,0,4)),te=0;4>te;te++)et[kt+128+te]=et[kt+256+te]=et[kt+384+te]=et[kt+0+te];for(te=0;16>te;++te,Je<<=2)et=Ee,kt=je+qA[te],fo[lt.Ob[te]](et,kt),ns(Je,bt,16*+te,et,kt)}else if(et=Vl(ce,xe,lt.Ob[0]),Nd[et](Ee,je),Je!=0)for(te=0;16>te;++te,Je<<=2)ns(Je,bt,16*+te,Ee,je+qA[te]);for(te=lt.Gc,et=Vl(ce,xe,lt.Dd),bl[et](Ie,Me),bl[et](Ye,dt),Je=bt,et=Ie,kt=Me,255&(lt=te>>0)&&(170&lt?Sc(Je,256,et,kt):Mo(Je,256,et,kt)),lt=Ye,Je=dt,255&(te>>=8)&&(170&te?Sc(bt,320,lt,Je):Mo(bt,320,lt,Je)),xe<I.Ub-1&&(a(at[Ot].y,0,Ee,je+480,16),a(at[Ot].f,0,Ie,Me+224,8),a(at[Ot].ea,0,Ye,dt+224,8)),te=8*Ne*I.B,at=I.sa,Ot=I.ta+16*ce+16*Ne*I.R,bt=I.qa,lt=I.ra+8*ce+te,Je=I.Ha,et=I.Ia+8*ce+te,te=0;16>te;++te)a(at,Ot+te*I.R,Ee,je+32*te,16);for(te=0;8>te;++te)a(bt,lt+te*I.B,Ie,Me+32*te,8),a(Je,et+te*I.B,Ye,dt+32*te,8)}}function Nu(I,G,te,ce,xe,Ne,Ee,je,Ie){var Me=[0],Ye=[0],dt=0,lt=Ie!=null?Ie.kd:0,at=Ie??new gf;if(I==null||12>te)return 7;at.data=I,at.w=G,at.ha=te,G=[G],te=[te],at.gb=[at.gb];e:{var Ot=G,bt=te,Je=at.gb;if(t(I!=null),t(bt!=null),t(Je!=null),Je[0]=0,12<=bt[0]&&!r(I,Ot[0],"RIFF")){if(r(I,Ot[0]+8,"WEBP")){Je=3;break e}var et=Re(I,Ot[0]+4);if(12>et||4294967286<et){Je=3;break e}if(lt&&et>bt[0]-8){Je=7;break e}Je[0]=et,Ot[0]+=12,bt[0]-=12}Je=0}if(Je!=0)return Je;for(et=0<at.gb[0],te=te[0];;){e:{var kt=I;bt=G,Je=te;var Ft=Me,St=Ye,tr=Ot=[0];if((Xt=dt=[dt])[0]=0,8>Je[0])Je=7;else{if(!r(kt,bt[0],"VP8X")){if(Re(kt,bt[0]+4)!=10){Je=3;break e}if(18>Je[0]){Je=7;break e}var Kt=Re(kt,bt[0]+8),gr=1+re(kt,bt[0]+12);if(2147483648<=gr*(kt=1+re(kt,bt[0]+15))){Je=3;break e}tr!=null&&(tr[0]=Kt),Ft!=null&&(Ft[0]=gr),St!=null&&(St[0]=kt),bt[0]+=18,Je[0]-=18,Xt[0]=1}Je=0}}if(dt=dt[0],Ot=Ot[0],Je!=0)return Je;if(bt=!!(2&Ot),!et&&dt)return 3;if(Ne!=null&&(Ne[0]=!!(16&Ot)),Ee!=null&&(Ee[0]=bt),je!=null&&(je[0]=0),Ee=Me[0],Ot=Ye[0],dt&&bt&&Ie==null){Je=0;break}if(4>te){Je=7;break}if(et&&dt||!et&&!dt&&!r(I,G[0],"ALPH")){te=[te],at.na=[at.na],at.P=[at.P],at.Sa=[at.Sa];e:{Kt=I,Je=G,et=te;var Xt=at.gb;Ft=at.na,St=at.P,tr=at.Sa,gr=22,t(Kt!=null),t(et!=null),kt=Je[0];var _a=et[0];for(t(Ft!=null),t(tr!=null),Ft[0]=null,St[0]=null,tr[0]=0;;){if(Je[0]=kt,et[0]=_a,8>_a){Je=7;break e}var Ma=Re(Kt,kt+4);if(4294967286<Ma){Je=3;break e}var oa=8+Ma+1&-2;if(gr+=oa,0<Xt&&gr>Xt){Je=3;break e}if(!r(Kt,kt,"VP8 ")||!r(Kt,kt,"VP8L")){Je=0;break e}if(_a[0]<oa){Je=7;break e}r(Kt,kt,"ALPH")||(Ft[0]=Kt,St[0]=kt+8,tr[0]=Ma),kt+=oa,_a-=oa}}if(te=te[0],at.na=at.na[0],at.P=at.P[0],at.Sa=at.Sa[0],Je!=0)break}te=[te],at.Ja=[at.Ja],at.xa=[at.xa];e:if(Xt=I,Je=G,et=te,Ft=at.gb[0],St=at.Ja,tr=at.xa,Kt=Je[0],kt=!r(Xt,Kt,"VP8 "),gr=!r(Xt,Kt,"VP8L"),t(Xt!=null),t(et!=null),t(St!=null),t(tr!=null),8>et[0])Je=7;else{if(kt||gr){if(Xt=Re(Xt,Kt+4),12<=Ft&&Xt>Ft-12){Je=3;break e}if(lt&&Xt>et[0]-8){Je=7;break e}St[0]=Xt,Je[0]+=8,et[0]-=8,tr[0]=gr}else tr[0]=5<=et[0]&&Xt[Kt+0]==47&&!(Xt[Kt+4]>>5),St[0]=et[0];Je=0}if(te=te[0],at.Ja=at.Ja[0],at.xa=at.xa[0],G=G[0],Je!=0)break;if(4294967286<at.Ja)return 3;if(je==null||bt||(je[0]=at.xa?2:1),Ee=[Ee],Ot=[Ot],at.xa){if(5>te){Je=7;break}je=Ee,lt=Ot,bt=Ne,I==null||5>te?I=0:5<=te&&I[G+0]==47&&!(I[G+4]>>5)?(et=[0],Xt=[0],Ft=[0],V(St=new R,I,G,te),Zt(St,et,Xt,Ft)?(je!=null&&(je[0]=et[0]),lt!=null&&(lt[0]=Xt[0]),bt!=null&&(bt[0]=Ft[0]),I=1):I=0):I=0}else{if(10>te){Je=7;break}je=Ot,I==null||10>te||!oi(I,G+3,te-3)?I=0:(lt=I[G+0]|I[G+1]<<8|I[G+2]<<16,bt=16383&(I[G+7]<<8|I[G+6]),I=16383&(I[G+9]<<8|I[G+8]),1&lt||3<(lt>>1&7)||!(lt>>4&1)||lt>>5>=at.Ja||!bt||!I?I=0:(Ee&&(Ee[0]=bt),je&&(je[0]=I),I=1))}if(!I||(Ee=Ee[0],Ot=Ot[0],dt&&(Me[0]!=Ee||Ye[0]!=Ot)))return 3;Ie!=null&&(Ie[0]=at,Ie.offset=G-Ie.w,t(4294967286>G-Ie.w),t(Ie.offset==Ie.ha-te));break}return Je==0||Je==7&&dt&&Ie==null?(Ne!=null&&(Ne[0]|=at.na!=null&&0<at.na.length),ce!=null&&(ce[0]=Ee),xe!=null&&(xe[0]=Ot),0):Je}function vf(I,G,te){var ce=G.width,xe=G.height,Ne=0,Ee=0,je=ce,Ie=xe;if(G.Da=I!=null&&0<I.Da,G.Da&&(je=I.cd,Ie=I.bd,Ne=I.v,Ee=I.j,11>te||(Ne&=-2,Ee&=-2),0>Ne||0>Ee||0>=je||0>=Ie||Ne+je>ce||Ee+Ie>xe))return 0;if(G.v=Ne,G.j=Ee,G.va=Ne+je,G.o=Ee+Ie,G.U=je,G.T=Ie,G.da=I!=null&&0<I.da,G.da){if(!Ce(je,Ie,te=[I.ib],Ne=[I.hb]))return 0;G.ib=te[0],G.hb=Ne[0]}return G.ob=I!=null&&I.ob,G.Kb=I==null||!I.Sd,G.da&&(G.ob=G.ib<3*ce/4&&G.hb<3*xe/4,G.Kb=0),1}function g0(I){if(I==null)return 2;if(11>I.S){var G=I.f.RGBA;G.fb+=(I.height-1)*G.A,G.A=-G.A}else G=I.f.kb,I=I.height,G.O+=(I-1)*G.fa,G.fa=-G.fa,G.N+=(I-1>>1)*G.Ab,G.Ab=-G.Ab,G.W+=(I-1>>1)*G.Db,G.Db=-G.Db,G.F!=null&&(G.J+=(I-1)*G.lb,G.lb=-G.lb);return 0}function PA(I,G,te,ce){if(ce==null||0>=I||0>=G)return 2;if(te!=null){if(te.Da){var xe=te.cd,Ne=te.bd,Ee=-2&te.v,je=-2&te.j;if(0>Ee||0>je||0>=xe||0>=Ne||Ee+xe>I||je+Ne>G)return 2;I=xe,G=Ne}if(te.da){if(!Ce(I,G,xe=[te.ib],Ne=[te.hb]))return 2;I=xe[0],G=Ne[0]}}ce.width=I,ce.height=G;e:{var Ie=ce.width,Me=ce.height;if(I=ce.S,0>=Ie||0>=Me||!(I>=Vi&&13>I))I=2;else{if(0>=ce.Rd&&ce.sd==null){Ee=Ne=xe=G=0;var Ye=(je=Ie*dE[I])*Me;if(11>I||(Ne=(Me+1)/2*(G=(Ie+1)/2),I==12&&(Ee=(xe=Ie)*Me)),(Me=s(Ye+2*Ne+Ee))==null){I=1;break e}ce.sd=Me,11>I?((Ie=ce.f.RGBA).eb=Me,Ie.fb=0,Ie.A=je,Ie.size=Ye):((Ie=ce.f.kb).y=Me,Ie.O=0,Ie.fa=je,Ie.Fd=Ye,Ie.f=Me,Ie.N=0+Ye,Ie.Ab=G,Ie.Cd=Ne,Ie.ea=Me,Ie.W=0+Ye+Ne,Ie.Db=G,Ie.Ed=Ne,I==12&&(Ie.F=Me,Ie.J=0+Ye+2*Ne),Ie.Tc=Ee,Ie.lb=xe)}if(G=1,xe=ce.S,Ne=ce.width,Ee=ce.height,xe>=Vi&&13>xe)if(11>xe)I=ce.f.RGBA,G&=(je=Math.abs(I.A))*(Ee-1)+Ne<=I.size,G&=je>=Ne*dE[xe],G&=I.eb!=null;else{I=ce.f.kb,je=(Ne+1)/2,Ye=(Ee+1)/2,Ie=Math.abs(I.fa),Me=Math.abs(I.Ab);var dt=Math.abs(I.Db),lt=Math.abs(I.lb),at=lt*(Ee-1)+Ne;G&=Ie*(Ee-1)+Ne<=I.Fd,G&=Me*(Ye-1)+je<=I.Cd,G=(G&=dt*(Ye-1)+je<=I.Ed)&Ie>=Ne&Me>=je&dt>=je,G&=I.y!=null,G&=I.f!=null,G&=I.ea!=null,xe==12&&(G&=lt>=Ne,G&=at<=I.Tc,G&=I.F!=null)}else G=0;I=G?0:2}}return I!=0||te!=null&&te.fd&&(I=g0(ce)),I}var Ms=64,bf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],RA=24,LA=32,x0=8,Ro=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];oe("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(I){return I},_.Predictor2=function(I,G,te){return G[te+0]},_.Predictor3=function(I,G,te){return G[te+1]},_.Predictor4=function(I,G,te){return G[te-1]},_.Predictor5=function(I,G,te){return be(be(I,G[te+1]),G[te+0])},_.Predictor6=function(I,G,te){return be(I,G[te-1])},_.Predictor7=function(I,G,te){return be(I,G[te+0])},_.Predictor8=function(I,G,te){return be(G[te-1],G[te+0])},_.Predictor9=function(I,G,te){return be(G[te+0],G[te+1])},_.Predictor10=function(I,G,te){return be(be(I,G[te-1]),be(G[te+0],G[te+1]))},_.Predictor11=function(I,G,te){var ce=G[te+0];return 0>=Ke(ce>>24&255,I>>24&255,(G=G[te-1])>>24&255)+Ke(ce>>16&255,I>>16&255,G>>16&255)+Ke(ce>>8&255,I>>8&255,G>>8&255)+Ke(255&ce,255&I,255&G)?ce:I},_.Predictor12=function(I,G,te){var ce=G[te+0];return(Pe((I>>24&255)+(ce>>24&255)-((G=G[te-1])>>24&255))<<24|Pe((I>>16&255)+(ce>>16&255)-(G>>16&255))<<16|Pe((I>>8&255)+(ce>>8&255)-(G>>8&255))<<8|Pe((255&I)+(255&ce)-(255&G)))>>>0},_.Predictor13=function(I,G,te){var ce=G[te-1];return($e((I=be(I,G[te+0]))>>24&255,ce>>24&255)<<24|$e(I>>16&255,ce>>16&255)<<16|$e(I>>8&255,ce>>8&255)<<8|$e(I>>0&255,ce>>0&255))>>>0};var Q1=_.PredictorAdd0;_.PredictorAdd1=nt,oe("Predictor2","PredictorAdd2"),oe("Predictor3","PredictorAdd3"),oe("Predictor4","PredictorAdd4"),oe("Predictor5","PredictorAdd5"),oe("Predictor6","PredictorAdd6"),oe("Predictor7","PredictorAdd7"),oe("Predictor8","PredictorAdd8"),oe("Predictor9","PredictorAdd9"),oe("Predictor10","PredictorAdd10"),oe("Predictor11","PredictorAdd11"),oe("Predictor12","PredictorAdd12"),oe("Predictor13","PredictorAdd13");var gp=_.PredictorAdd2;Et("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),Et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var px,$l=_.ColorIndexInverseTransform,li=_.MapARGB,yf=_.VP8LColorIndexInverseTransformAlpha,xp=_.MapAlpha,pd=_.VP8LPredictorsAdd=[];pd.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var wf,uo,_i,Nf,Lo,kc,Eu,_c,Xn,Sc,ys,Mo,MA,Cu,v0,Ef,Cf,jf,UA,b0,kf,gd,QA,Yn,xl,ca,ua,bn,ss=s(511),Gl=s(2041),_f=s(225),Sf=s(767),xd=0,gx=Gl,HA=_f,ci=Sf,ql=ss,Vi=0,y0=1,ju=2,vp=3,zA=4,vd=5,xx=6,bp=7,Bf=8,bd=9,w0=10,vx=[2,3,7],Kl=[3,3,11],vl=[280,256,256,256,40],VA=[0,1,1,1,0],yd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],wd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$A=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],iE=8,yp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],wp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Us=null,Jn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Oa=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Tf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ku=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],H1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],GA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],oE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Nd=[],fo=[],bl=[],lE=1,N0=2,_u=[],ui=[];Nt("UpsampleRgbLinePair",_e,3),Nt("UpsampleBgrLinePair",tt,3),Nt("UpsampleRgbaLinePair",Gr,4),Nt("UpsampleBgraLinePair",ha,4),Nt("UpsampleArgbLinePair",Br,4),Nt("UpsampleRgba4444LinePair",Qt,2),Nt("UpsampleRgb565LinePair",ft,2);var Ed=_.UpsampleRgbLinePair,If=_.UpsampleBgrLinePair,Su=_.UpsampleRgbaLinePair,bx=_.UpsampleBgraLinePair,yx=_.UpsampleArgbLinePair,E0=_.UpsampleRgba4444LinePair,wx=_.UpsampleRgb565LinePair,Bu=16,Qs=1<<Bu-1,Of=-227,Nx=482,e3=6,cE=0,t3=s(256),Hs=s(256),z1=s(256),Np=s(256),Ep=s(Nx-Of),V1=s(Nx-Of);Za("YuvToRgbRow",_e,3),Za("YuvToBgrRow",tt,3),Za("YuvToRgbaRow",Gr,4),Za("YuvToBgraRow",ha,4),Za("YuvToArgbRow",Br,4),Za("YuvToRgba4444Row",Qt,2),Za("YuvToRgb565Row",ft,2);var qA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cd=[0,2,8],r3=[8,7,6,4,4,2,2,2,1,1,1,1],uE=1;this.WebPDecodeRGBA=function(I,G,te,ce,xe){var Ne=y0,Ee=new Ad,je=new Pa;Ee.ba=je,je.S=Ne,je.width=[je.width],je.height=[je.height];var Ie=je.width,Me=je.height,Ye=new Fn;if(Ye==null||I==null)var dt=2;else t(Ye!=null),dt=Nu(I,G,te,Ye.width,Ye.height,Ye.Pd,Ye.Qd,Ye.format,null);if(dt!=0?Ie=0:(Ie!=null&&(Ie[0]=Ye.width[0]),Me!=null&&(Me[0]=Ye.height[0]),Ie=1),Ie){je.width=je.width[0],je.height=je.height[0],ce!=null&&(ce[0]=je.width),xe!=null&&(xe[0]=je.height);e:{if(ce=new Ls,(xe=new gf).data=I,xe.w=G,xe.ha=te,xe.kd=1,G=[0],t(xe!=null),((I=Nu(xe.data,xe.w,xe.ha,null,null,null,G,null,xe))==0||I==7)&&G[0]&&(I=4),(G=I)==0){if(t(Ee!=null),ce.data=xe.data,ce.w=xe.w+xe.offset,ce.ha=xe.ha-xe.offset,ce.put=Dn,ce.ac=Ya,ce.bc=Rs,ce.ma=Ee,xe.xa){if((I=Qe())==null){Ee=1;break e}if(function(lt,at){var Ot=[0],bt=[0],Je=[0];t:for(;;){if(lt==null)return 0;if(at==null)return lt.a=2,0;if(lt.l=at,lt.a=0,V(lt.m,at.data,at.w,at.ha),!Zt(lt.m,Ot,bt,Je)){lt.a=3;break t}if(lt.xb=N0,at.width=Ot[0],at.height=bt[0],!Fe(Ot[0],bt[0],1,lt,null))break t;return 1}return t(lt.a!=0),0}(I,ce)){if(ce=(G=PA(ce.width,ce.height,Ee.Oa,Ee.ba))==0){t:{ce=I;r:for(;;){if(ce==null){ce=0;break t}if(t(ce.s.yc!=null),t(ce.s.Ya!=null),t(0<ce.s.Wb),t((te=ce.l)!=null),t((xe=te.ma)!=null),ce.xb!=0){if(ce.ca=xe.ba,ce.tb=xe.tb,t(ce.ca!=null),!vf(xe.Oa,te,vp)){ce.a=2;break r}if(!qe(ce,te.width)||te.da)break r;if((te.da||br(ce.ca.S))&&rt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&rt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!Le(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break r}ce.xb=0}if(!he(ce,ce.V,ce.Ba,ce.c,ce.i,te.o,Ue))break r;xe.Dc=ce.Ma,ce=1;break t}t(ce.a!=0),ce=0}ce=!ce}ce&&(G=I.a)}else G=I.a}else{if((I=new Ei)==null){Ee=1;break e}if(I.Fa=xe.na,I.P=xe.P,I.qc=xe.Sa,ff(I,ce)){if((G=PA(ce.width,ce.height,Ee.Oa,Ee.ba))==0){if(I.Aa=0,te=Ee.Oa,t((xe=I)!=null),te!=null){if(0<(Ie=0>(Ie=te.Md)?0:100<Ie?255:255*Ie/100)){for(Me=Ye=0;4>Me;++Me)12>(dt=xe.pb[Me]).lc&&(dt.ia=Ie*r3[0>dt.lc?0:dt.lc]>>3),Ye|=dt.ia;Ye&&(alert("todo:VP8InitRandom"),xe.ia=1)}xe.Ga=te.Id,100<xe.Ga?xe.Ga=100:0>xe.Ga&&(xe.Ga=0)}BA(I,ce)||(G=I.a)}}else G=I.a}G==0&&Ee.Oa!=null&&Ee.Oa.fd&&(G=g0(Ee.ba))}Ee=G}Ne=Ee!=0?null:11>Ne?je.f.RGBA.eb:je.f.kb.y}else Ne=null;return Ne};var dE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(_,S){for(var L="",P=0;P<4;P++)L+=String.fromCharCode(_[S++]);return L}function d(_,S){return(_[S+0]<<0|_[S+1]<<8|_[S+2]<<16)>>>0}function f(_,S){return(_[S+0]<<0|_[S+1]<<8|_[S+2]<<16|_[S+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],x=new c,v=e,y=function(_,S){var L={},P=0,k=!1,M=0,U=0;if(L.frames=[],!function(F,W,X,ne){for(var le=0;le<ne;le++)if(F[W+le]!=X.charCodeAt(le))return!0;return!1}(_,S,"RIFF",4)){var z,Q;for(f(_,S+=4),S+=8;S<_.length;){var q=u(_,S),V=f(_,S+=4);S+=4;var Y=V+(1&V);switch(q){case"VP8 ":case"VP8L":L.frames[P]===void 0&&(L.frames[P]={}),(R=L.frames[P]).src_off=k?U:S-8,R.src_size=M+V+8,P++,k&&(k=!1,M=0,U=0);break;case"VP8X":(R=L.header={}).feature_flags=_[S];var K=S+4;R.canvas_width=1+d(_,K),K+=3,R.canvas_height=1+d(_,K),K+=3;break;case"ALPH":k=!0,M=Y+8,U=S-8;break;case"ANIM":(R=L.header).bgcolor=f(_,S),K=S+4,R.loop_count=(z=_)[(Q=K)+0]<<0|z[Q+1]<<8,K+=2;break;case"ANMF":var J,R;(R=L.frames[P]={}).offset_x=2*d(_,S),S+=3,R.offset_y=2*d(_,S),S+=3,R.width=1+d(_,S),S+=3,R.height=1+d(_,S),S+=3,R.duration=d(_,S),S+=3,J=_[S++],R.dispose=1&J,R.blend=J>>1&1}q!="ANMF"&&(S+=Y)}return L}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,j=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],m=[w.canvas_width];for(var O=0;O<j.length&&j[O].blend!=0;O++);}var B=j[0],T=x.WebPDecodeRGBA(v,B.src_off,B.src_size,m,h);B.rgba=T,B.imgwidth=m[0],B.imgheight=h[0];for(var C=0;C<m[0]*h[0]*4;C++)g[C]=T[C];return this.width=m,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof oD=="function"},r=function(h,m,g,x){var v=4,y=o;switch(x){case e.image_compression.FAST:v=1,y=s;break;case e.image_compression.MEDIUM:v=6,y=l;break;case e.image_compression.SLOW:v=9,y=c}h=a(h,m,g,y);var w=oD(h,{level:v});return e.__addimage__.arrayBufferToBinaryString(w)},a=function(h,m,g,x){for(var v,y,w,j=h.length/m,O=new Uint8Array(h.length+j),B=d(),T=0;T<j;T+=1){if(w=T*m,v=h.subarray(w,w+m),x)O.set(x(v,g,y),w+T);else{for(var C,_=B.length,S=[];C<_;C+=1)S[C]=B[C](v,g,y);var L=f(S.concat());O.set(S[L],w+T)}y=v}return O},n=function(h){var m=Array.apply([],h);return m.unshift(0),m},s=function(h,m){var g,x=[],v=h.length;x[0]=1;for(var y=0;y<v;y+=1)g=h[y-m]||0,x[y+1]=h[y]-g+256&255;return x},o=function(h,m,g){var x,v=[],y=h.length;v[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,v[w+1]=h[w]-x+256&255;return v},l=function(h,m,g){var x,v,y=[],w=h.length;y[0]=3;for(var j=0;j<w;j+=1)x=h[j-m]||0,v=g&&g[j]||0,y[j+1]=h[j]+256-(x+v>>>1)&255;return y},c=function(h,m,g){var x,v,y,w,j=[],O=h.length;j[0]=4;for(var B=0;B<O;B+=1)x=h[B-m]||0,v=g&&g[B]||0,y=g&&g[B-m]||0,w=u(x,v,y),j[B+1]=h[B]-w+256&255;return j},u=function(h,m,g){if(h===m&&m===g)return h;var x=Math.abs(m-g),v=Math.abs(h-g),y=Math.abs(h+m-g-g);return x<=v&&x<=y?h:v<=y?m:g},d=function(){return[n,s,o,l,c]},f=function(h){var m=h.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,g,x){var v,y,w,j,O,B,T,C,_,S,L,P,k,M,U,z=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new CYe(h)).imgData,y=w.bits,v=w.colorSpace,O=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){_=(C=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,L=new Uint8Array(_*w.colors),S=new Uint8Array(_);var q,V=w.pixelBitlength-w.bits;for(M=0,U=0;M<_;M++){for(k=C[M],q=0;q<V;)L[U++]=k>>>q&255,q+=w.bits;S[M]=k>>>q&255}}if(w.bits===16){_=(C=new Uint32Array(w.decodePixels().buffer)).length,L=new Uint8Array(_*(32/w.pixelBitlength)*w.colors),S=new Uint8Array(_*(32/w.pixelBitlength)),P=w.colors>1,M=0,U=0;for(var Y=0;M<_;)k=C[M++],L[U++]=k>>>0&255,P&&(L[U++]=k>>>16&255,k=C[M++],L[U++]=k>>>0&255),S[Y++]=k>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(L,w.width*w.colors,w.colors,x),T=r(S,w.width,1,x)):(h=L,T=S,z=void 0)}if(w.colorType===3&&(v=this.color_spaces.INDEXED,B=w.palette,w.transparency.indexed)){var K=w.transparency.indexed,J=0;for(M=0,_=K.length;M<_;++M)J+=K[M];if((J/=255)===_-1&&K.indexOf(0)!==-1)j=[K.indexOf(0)];else if(J!==_){for(C=w.decodePixels(),S=new Uint8Array(C.length),M=0,_=C.length;M<_;M++)S[M]=K[C[M]];T=r(S,w.width,1)}}var R=function(F){var W;switch(F){case e.image_compression.FAST:W=11;break;case e.image_compression.MEDIUM:W=13;break;case e.image_compression.SLOW:W=14;break;default:W=12}return W}(x);return z===this.decode.FLATE_DECODE&&(Q="/Predictor "+R+" "),Q+="/Colors "+O+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(T&&this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),{alias:g,data:h,index:m,filter:z,decodeParameters:Q,transparency:j,palette:B,sMask:T,predictor:R,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:v}}}})(pr.API),function(e){e.processGIF89A=function(t,r,a,n){var s=new jYe(t),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new e6(100).encode(u,100);return e.processJPEG.call(this,d,r,a,n)},e.processGIF87A=e.processGIF89A}(pr.API),Fd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:a,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Fd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Bn.log("bit decode error:"+r)}},Fd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,n=0;n<t;n++)for(var s=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*n*4,l=0;l<8&&8*n+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Fd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<e;n++){var s=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*n*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*n+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Fd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*a;if(n<this.palette.length){var o=this.palette[n];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Fd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=a*this.width*4+4*n;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},Fd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=n*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},Fd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=n,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},Fd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=n,this.data[l+2]=a,this.data[l+3]=o}},Fd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,a,n){var s=new Fd(t,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new e6(100).encode(c,100);return e.processJPEG.call(this,u,r,a,n)}}(pr.API),EW.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,a,n){var s=new EW(t),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new e6(100).encode(c,100);return e.processJPEG.call(this,u,r,a,n)}}(pr.API),pr.API.processRGBA=function(e,t,r){for(var a=e.data,n=a.length,s=new Uint8Array(n/4*3),o=new Uint8Array(n/4),l=0,c=0,u=0;u<n;u+=4){var d=a[u],f=a[u+1],h=a[u+2],m=a[u+3];s[l++]=d,s[l++]=f,s[l++]=h,o[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},pr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},tv=pr.API,XC=tv.getCharWidthsArray=function(e,t){var r,a,n=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:n.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:n.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,g=0,x=l[0]||c,v=[];for(r=0;r<m;r++)a=e.charCodeAt(r),typeof n.metadata.widthOfString=="function"?v.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(a))+o*(1e3/s)||0)/1e3):(h=f&&gn(u[a])==="object"&&!isNaN(parseInt(u[a][g],10))?u[a][g]/d:0,v.push((l[a]||x)/c+h)),g=a;return v},bW=tv.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return tv.processArabic&&(e=tv.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,n)/r:XC.apply(this,arguments).reduce(function(s,o){return s+o},0)},yW=function(e,t,r,a){for(var n=[],s=0,o=e.length,l=0;s!==o&&l+t[s]<r;)l+=t[s],s++;n.push(e.slice(0,s));var c=s;for(l=0;s!==o;)l+t[s]>a&&(n.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&n.push(e.slice(c,s)),n},wW=function(e,t,r){r||(r={});var a,n,s,o,l,c,u,d=[],f=[d],h=r.textIndent||0,m=0,g=0,x=e.split(" "),v=XC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(O){(O=O.split(/\s*\n/)).length>1?w=w.concat(O.map(function(B,T){return(T&&B.length?`
`:"")+B})):w.push(O[0])}),x=w,c=bW.apply(this,[y,r])}for(s=0,o=x.length;s<o;s++){var j=0;if(a=x[s],c&&a[0]==`
`&&(a=a.substr(1),j=1),h+m+(g=(n=XC.apply(this,[a,r])).reduce(function(O,B){return O+B},0))>t||j){if(g>t){for(l=yW.apply(this,[a,n,t-(h+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=n.slice(a.length-(d[0]?d[0].length:0)).reduce(function(O,B){return O+B},0)}else d=[a];f.push(d),h=g+c,m=v}else d.push(a),h+=m+g,m=v}return u=c?function(O,B){return(B?y:"")+O.join(" ")}:function(O){return O.join(" ")},f.map(u)},tv.splitTextToSize=function(e,t,r){var a,n=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/n;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=a.length;l<c;l++)u=u.concat(wW.apply(this,[a[l],o,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},n=0;n<t.length;n++)r[t[n]]="0123456789abcdef"[n],a["0123456789abcdef"[n]]=t[n];var s=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var h,m,g,x,v=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=s(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+a[g.slice(-1)];else{if(gn(h)!=="object")throw new Error("Don't know what to do with value type "+gn(h)+".");g=o(h)}v.push(m+g)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,x,v={},y=1,w=v,j=[],O="",B="",T=f.length-1,C=1;C<T;C+=1)(x=f[C])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(j.push([w,g]),w={},g=void 0):x=="}"?((m=j.pop())[0][m[1]]=w,g=void 0,w=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(O+=r[x],g=parseInt(O,16)*y,y=1,O=""):O+=x:r.hasOwnProperty(x)?(B+=r[x],w[g]=parseInt(B,16)*y,y=1,g=void 0,B=""):B+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(pr.API),function(e){var t=function(r){for(var a=r.length,n=new Uint8Array(a),s=0;s<a;s++)n[s]=r.charCodeAt(s);return n};e.API.events.push(["addFont",function(r){var a=void 0,n=r.font,s=r.instance;if(!n.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(a=s.existsFileInVFS(n.postScriptName)===!1?s.loadFile(n.postScriptName):s.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(ew(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,a)}}])}(pr),function(e){function t(){return(Mr.canvg?Promise.resolve(Mr.canvg):ei(()=>import("./index.es-LxTccdfh.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}pr.API.addSvgAsImage=function(r,a,n,s,o,l,c,u){if(isNaN(a)||isNaN(n))throw Bn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Bn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),a,n,s,o,c,u)})}}(),pr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var n=0;n<this.internal.pages[a].length;n++)this.internal.pages[a][n]=this.internal.pages[a][n].replace(t,r);return this},pr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,n,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function h(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(gn(e)==="object"){for(n in e)if(s=e[n],h(l,n)&&s!==void 0){if(r[n].type==="boolean"&&typeof s=="boolean")r[n].value=s;else if(r[n].type==="name"&&h(r[n].valueSet,s))r[n].value=s;else if(r[n].type==="integer"&&Number.isInteger(s))r[n].value=s;else if(r[n].type==="array"){for(u=0;u<s.length;u+=1)if(a=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(a=!1);a===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[n].value="["+c.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+n.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(n+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(pr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},a=function(s){var o,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(s).sort(function(m,g){return m-g})).length;f<h;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var v=u();d({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+kv(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+kv(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+kv(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:a(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+kv(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+kv(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var n=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,m=f.activeFontKey,g=f.fonts,x=m,v="",y=0,w="",j=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(w=l,x=m,Array.isArray(l)&&(w=l[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(o=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),o||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=w[y]:v+="";var O="";return parseInt(x.slice(1))<14||j==="WinAnsiEncoding"?O=h(v,x).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(O=r(v,g[x])),f.isHex=!0,{text:O,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([n(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(n(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=n(Object.assign({},c,{text:o})).text}])}(pr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(pr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var n,s,o,l,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,j=0;this.__bidiEngine__={};var O=function(P){var k=P.charCodeAt(),M=k>>8,U=x[M];return U!==void 0?f[256*U+(255&k)]:M===252||M===253?"AL":y.test(M)?"L":M===8?"R":"N"},B=function(P){for(var k,M=0;M<P.length;M++){if((k=O(P.charAt(M)))==="L")return!1;if(k==="R")return!0}return!1},T=function(P,k,M,U){var z,Q,q,V,Y=k[U];switch(Y){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(Y="AN");break;case"AL":w=!0,Y="R";break;case"WS":Y="N";break;case"CS":U<1||U+1>=k.length||(z=M[U-1])!=="EN"&&z!=="AN"||(Q=k[U+1])!=="EN"&&Q!=="AN"?Y="N":w&&(Q="AN"),Y=Q===z?Q:"N";break;case"ES":Y=(z=U>0?M[U-1]:"B")==="EN"&&U+1<k.length&&k[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&M[U-1]==="EN"){Y="EN";break}if(w){Y="N";break}for(q=U+1,V=k.length;q<V&&k[q]==="ET";)q++;Y=q<V&&k[q]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(V=k.length,q=U+1;q<V&&k[q]==="NSM";)q++;if(q<V){var K=P[U],J=K>=1425&&K<=2303||K===64286;if(z=k[q],J&&(z==="R"||z==="AL")){Y="R";break}}}Y=U<1||(z=k[U-1])==="B"?"N":M[U-1];break;case"B":w=!1,n=!0,Y=j;break;case"S":s=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":Y="N"}return Y},C=function(P,k,M){var U=P.split("");return M&&_(U,M,{hiLevel:j}),U.reverse(),k&&k.reverse(),U.join("")},_=function(P,k,M){var U,z,Q,q,V,Y=-1,K=P.length,J=0,R=[],F=j?m:h,W=[];for(w=!1,n=!1,s=!1,z=0;z<K;z++)W[z]=O(P[z]);for(Q=0;Q<K;Q++){if(V=J,R[Q]=T(P,W,R,Q),U=240&(J=F[V][g[R[Q]]]),J&=15,k[Q]=q=F[J][5],U>0)if(U===16){for(z=Y;z<Q;z++)k[z]=1;Y=-1}else Y=-1;if(F[J][6])Y===-1&&(Y=Q);else if(Y>-1){for(z=Y;z<Q;z++)k[z]=q;Y=-1}W[Q]==="B"&&(k[Q]=0),M.hiLevel|=q}s&&function(X,ne,le){for(var ie=0;ie<le;ie++)if(X[ie]==="S"){ne[ie]=j;for(var ae=ie-1;ae>=0&&X[ae]==="WS";ae--)ne[ae]=j}}(W,k,K)},S=function(P,k,M,U,z){if(!(z.hiLevel<P)){if(P===1&&j===1&&!n)return k.reverse(),void(M&&M.reverse());for(var Q,q,V,Y,K=k.length,J=0;J<K;){if(U[J]>=P){for(V=J+1;V<K&&U[V]>=P;)V++;for(Y=J,q=V-1;Y<q;Y++,q--)Q=k[Y],k[Y]=k[q],k[q]=Q,M&&(Q=M[Y],M[Y]=M[q],M[q]=Q);J=V}J++}}},L=function(P,k,M){var U=P.split(""),z={hiLevel:j};return M||(M=[]),_(U,M,z),function(Q,q,V){if(V.hiLevel!==0&&d)for(var Y,K=0;K<Q.length;K++)q[K]===1&&(Y=v.indexOf(Q[K]))>=0&&(Q[K]=v[Y+1])}(U,M,z),S(2,U,k,M,z),S(1,U,k,M,z),U.join("")};return this.__bidiEngine__.doBidiReorder=function(P,k,M){if(function(z,Q){if(Q)for(var q=0;q<z.length;q++)Q[q]=q;l===void 0&&(l=B(z)),u===void 0&&(u=B(z))}(P,k),o||!c||u)if(o&&c&&l^u)j=l?1:0,P=C(P,k,M);else if(!o&&c&&u)j=l?1:0,P=L(P,k,M),P=C(P,k);else if(!o||l||c||u){if(o&&!c&&l^u)P=C(P,k),l?(j=0,P=L(P,k,M)):(j=1,P=L(P,k,M),P=C(P,k));else if(o&&l&&!c&&u)j=1,P=L(P,k,M),P=C(P,k);else if(!o&&!c&&l^u){var U=d;l?(j=1,P=L(P,k,M),j=0,d=!1,P=L(P,k,M),d=U):(j=0,P=L(P,k,M),P=C(P,k),j=1,d=!1,P=L(P,k,M),d=U,P=C(P,k))}}else j=0,P=L(P,k,M);else j=l?1:0,P=L(P,k,M);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var n=a.text,s=(a.x,a.y,a.options||{}),o=(a.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(n)==="[object Array]"){var l=0;for(o=[],l=0;l<n.length;l+=1)Object.prototype.toString.call(n[l])==="[object Array]"?o.push([r.doBidiReorder(n[l][0]),n[l][1],n[l][2]]):o.push([r.doBidiReorder(n[l])]);a.text=o}else a.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])}(pr),pr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new tp(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new QYe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new kYe(this.contents),this.head=new SYe(this),this.name=new FYe(this),this.cmap=new Vce(this),this.toUnicode={},this.hhea=new BYe(this),this.maxp=new DYe(this),this.hmtx=new PYe(this),this.post=new IYe(this),this.os2=new TYe(this),this.loca=new UYe(this),this.glyf=new RYe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,n,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(a=255&(n=this.post.italic_angle),(32768&(r=n>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var n,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)n=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(n))+a*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e}();var cf,tp=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,n;for(n=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)n.push(this.writeByte(t.charCodeAt(r)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,n,s,o,l,c;return t=this.readByte(),r=this.readByte(),a=this.readByte(),n=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^n)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*n+16777216*s+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,n,s;for(s=[],a=0,n=t.length;a<n;a++)r=t[a],s.push(this.writeByte(r));return s},e}(),kYe=function(){var e;function t(r){var a,n,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,s=this.tableCount;0<=s?n<s:n>s;n=0<=s?++n:--n)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,n,s,o,l,c,u,d,f,h,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),d=16*m-f,(n=new tp).writeInt(this.scalarType),n.writeShort(m),n.writeShort(f),n.writeShort(o),n.writeShort(d),s=16*m,u=n.pos+s,l=null,g=[],r)for(h=r[x],n.writeString(x),n.writeInt(e(h)),n.writeInt(u),n.writeInt(h.length),g=g.concat(h),x==="head"&&(l=u),u+=h.length;u%4;)g.push(0),u++;return n.write(g),a=2981146554-e(n.data),n.pos=l+8,n.writeUInt32(a),n.data},e=function(r){var a,n,s,o;for(r=$ce.call(r);r.length%4;)r.push(0);for(s=new tp(r),n=0,a=0,o=r.length;a<o;a=a+=4)n+=s.readUInt32();return 4294967295&n},t}(),_Ye={}.hasOwnProperty,jA=function(e,t){for(var r in t)_Ye.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};cf=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var SYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return jA(t,cf),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new tp).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t}(),CW=function(){function e(t,r){var a,n,s,o,l,c,u,d,f,h,m,g,x,v,y,w,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,s=function(){var O,B;for(B=[],c=O=0;0<=h?O<h:O>h;c=0<=h?++O:--O)B.push(t.readUInt16());return B}(),t.pos+=2,x=function(){var O,B;for(B=[],c=O=0;0<=h?O<h:O>h;c=0<=h?++O:--O)B.push(t.readUInt16());return B}(),u=function(){var O,B;for(B=[],c=O=0;0<=h?O<h:O>h;c=0<=h?++O:--O)B.push(t.readUInt16());return B}(),d=function(){var O,B;for(B=[],c=O=0;0<=h?O<h:O>h;c=0<=h?++O:--O)B.push(t.readUInt16());return B}(),n=(this.length-t.pos+this.offset)/2,l=function(){var O,B;for(B=[],c=O=0;0<=n?O<n:O>n;c=0<=n?++O:--O)B.push(t.readUInt16());return B}(),c=y=0,j=s.length;y<j;c=++y)for(v=s[c],a=w=g=x[c];g<=v?w<=v:w>=v;a=g<=v?++w:--w)d[c]===0?o=a+u[c]:(o=l[d[c]/2+(a-g)-(h-c)]||0)!==0&&(o+=u[c]),this.codeMap[a]=65535&o}t.pos=f}return e.encode=function(t,r){var a,n,s,o,l,c,u,d,f,h,m,g,x,v,y,w,j,O,B,T,C,_,S,L,P,k,M,U,z,Q,q,V,Y,K,J,R,F,W,X,ne,le,ie,ae,Ae,ke,re;switch(U=new tp,o=Object.keys(t).sort(function(Re,Le){return Re-Le}),r){case"macroman":for(x=0,v=function(){var Re=[];for(g=0;g<256;++g)Re.push(0);return Re}(),w={0:0},s={},z=0,Y=o.length;z<Y;z++)w[ae=t[n=o[z]]]==null&&(w[ae]=++x),s[n]={old:t[n],new:w[t[n]]},v[n]=w[t[n]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(v),{charMap:s,subtable:U.data,maxGlyphID:x+1};case"unicode":for(k=[],f=[],j=0,w={},a={},y=u=null,Q=0,K=o.length;Q<K;Q++)w[B=t[n=o[Q]]]==null&&(w[B]=++j),a[n]={old:B,new:w[B]},l=w[B]-n,y!=null&&l===u||(y&&f.push(y),k.push(n),u=l),y=n;for(y&&f.push(y),f.push(65535),k.push(65535),L=2*(S=k.length),_=2*Math.pow(Math.log(S)/Math.LN2,2),h=Math.log(_/2)/Math.LN2,C=2*S-_,c=[],T=[],m=[],g=q=0,J=k.length;q<J;g=++q){if(P=k[g],d=f[g],P===65535){c.push(0),T.push(0);break}if(P-(M=a[P].new)>=32768)for(c.push(0),T.push(2*(m.length+S-g)),n=V=P;P<=d?V<=d:V>=d;n=P<=d?++V:--V)m.push(a[n].new);else c.push(M-P),T.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*S+2*m.length),U.writeUInt16(0),U.writeUInt16(L),U.writeUInt16(_),U.writeUInt16(h),U.writeUInt16(C),le=0,R=f.length;le<R;le++)n=f[le],U.writeUInt16(n);for(U.writeUInt16(0),ie=0,F=k.length;ie<F;ie++)n=k[ie],U.writeUInt16(n);for(Ae=0,W=c.length;Ae<W;Ae++)l=c[Ae],U.writeUInt16(l);for(ke=0,X=T.length;ke<X;ke++)O=T[ke],U.writeUInt16(O);for(re=0,ne=m.length;re<ne;re++)x=m[re],U.writeUInt16(x);return{charMap:a,subtable:U.data,maxGlyphID:j+1}}},e}(),Vce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return jA(t,cf),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,n,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)a=new CW(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var n,s;return a==null&&(a="macroman"),n=CW.encode(r,a),(s=new tp).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t}(),BYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return jA(t,cf),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),TYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return jA(t,cf),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var a,n;for(n=[],a=0;a<10;++a)n.push(r.readByte());return n}(),this.charRange=function(){var a,n;for(n=[],a=0;a<4;++a)n.push(r.readInt());return n}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var a,n;for(n=[],a=0;a<2;a=++a)n.push(r.readInt());return n}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),IYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return jA(t,cf),t.prototype.tag="post",t.prototype.parse=function(r){var a,n,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(n=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)a=r.readByte(),s.push(this.names.push(r.readString(a)));return s;case 151552:return n=r.readUInt16(),this.offsets=r.read(n);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),OYe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},FYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return jA(t,cf),t.prototype.tag="name",t.prototype.parse=function(r){var a,n,s,o,l,c,u,d,f,h,m;for(r.pos=this.offset,r.readShort(),a=r.readShort(),c=r.readShort(),n=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)n.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=f=0,h=n.length;f<h;o=++f)s=n[o],r.pos=s.offset,d=r.readString(s.length),l=new OYe(d,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),DYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return jA(t,cf),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),PYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return jA(t,cf),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,n,s,o,l,c,u;for(r.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],a=d=0;0<=s?d<s:d>s;a=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,m;for(m=[],d=0,f=(h=this.metrics).length;d<f;d++)o=h[d],m.push(o.advance);return m}).call(this),n=this.widths[this.widths.length-1],u=[],a=l=0;0<=s?l<s:l>s;a=0<=s?++l:--l)u.push(this.widths.push(n));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),$ce=[].slice,RYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return jA(t,cf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,n,s,o,l,c,u,d,f,h;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,n=o.indexOf(r),(s=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+n,l=(c=new tp(a.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new MYe(c,d,h,u,f):new LYe(c,l,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,a,n){var s,o,l,c,u;for(l=[],o=[],c=0,u=a.length;c<u;c++)s=r[a[c]],o.push(l.length),s&&(l=l.concat(s.encode(n)));return o.push(l.length),{table:l,offsets:o}},t}(),LYe=function(){function e(t,r,a,n,s,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=n,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),MYe=function(){function e(t,r,a,n,s){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=n,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new tp($ce.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),UYe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return jA(t,cf),t.prototype.tag="loca",t.prototype.parse=function(r){var a,n;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var s,o;for(o=[],n=0,s=this.length;n<s;n+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],n=0,s=this.length;n<s;n+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var n=new Uint32Array(this.offsets.length),s=0,o=0,l=0;l<n.length;++l)if(n[l]=s,o<a.length&&a[o]==l){++o,n[l]=s;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(s+=u)}for(var d=new Array(4*n.length),f=0;f<n.length;++f)d[4*f+3]=255&n[f],d[4*f+2]=(65280&n[f])>>8,d[4*f+1]=(16711680&n[f])>>16,d[4*f]=(4278190080&n[f])>>24;return d},t}(),QYe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,n,s;for(r in n=this.font.cmap.tables[0].codeMap,t={},s=this.subset)a=s[r],t[r]=n[a];return t},e.prototype.glyphsFor=function(t){var r,a,n,s,o,l,c;for(n={},o=0,l=t.length;o<l;o++)n[s=t[o]]=this.font.glyf.glyphFor(s);for(s in r=[],n)(a=n[s])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))a=c[s],n[s]=a;return n},e.prototype.encode=function(t,r){var a,n,s,o,l,c,u,d,f,h,m,g,x,v,y;for(n in a=Vce.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},y=a.charMap)m[(c=y[n]).old]=c.new;for(g in h=a.maxGlyphID,o)g in m||(m[g]=h++);return d=function(w){var j,O;for(j in O={},w)O[w[j]]=j;return O}(m),f=Object.keys(d).sort(function(w,j){return w-j}),x=function(){var w,j,O;for(O=[],w=0,j=f.length;w<j;w++)l=f[w],O.push(d[l]);return O}(),s=this.font.glyf.encode(o,x,m),u=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();pr.API.PDFObject=function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,n,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)a=r[l],u.push(t.convert(a));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in s=["<<"],r)o=r[n],s.push("/"+n+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+r},t}();function Gce(e,t,r,a,n){a=a||{};var s=1.15,o=n.internal.scaleFactor,l=n.internal.getFontSize()/o,c=n.getLineHeightFactor?n.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",h=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=l*(2-s),a.valign==="middle"?r-=h/2*u:a.valign==="bottom"&&(r-=h*u),a.halign==="center"||a.halign==="right"){var m=l;if(a.halign==="center"&&(m*=.5),f&&h>=1){for(var g=0;g<f.length;g++)n.text(f[g],t-n.getStringUnitWidth(f[g])*m,r),r+=u;return n}t-=n.getStringUnitWidth(e)*m}return a.halign==="justify"?n.text(e,t,r,{maxWidth:a.maxWidth||100,align:"justify"}):n.text(e,t,r),n}var jW={},ob=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:jW=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var a,n,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(a=this.jsPDFDocument).setFillColor.apply(a,d),d=e.unifyColor(t.textColor),d&&(n=this.jsPDFDocument).setTextColor.apply(n,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,a){return this.jsPDFDocument.splitTextToSize(t,r,a)},e.prototype.rect=function(t,r,a,n,s){return this.jsPDFDocument.rect(t,r,a,n,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return jW||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),hD=function(e,t){return hD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])},hD(e,t)};function qce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");hD(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Kce=function(e){qce(t,e);function t(r){var a=e.call(this)||this;return a._element=r,a}return t}(Array);function HYe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function zYe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function e_(e,t,r){r.applyStyles(t,!0);var a=Array.isArray(e)?e:[e],n=a.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return n}function Wce(e,t,r,a){var n=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:n,lineColor:s});var o=Xce(n,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),a.y-r.y,o)}function Xce(e,t){var r=e>0,a=t||t===0;return r&&a?"DF":r?"S":a?"F":null}function b4(e,t){var r,a,n,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(a=e.top)!==null&&a!==void 0?a:t,right:(n=e.right)!==null&&n!==void 0?n:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Yce(e,t){var r=b4(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function VYe(e,t,r,a,n){var s={},o=1.3333333333333333,l=t6(t,function(j){return n.getComputedStyle(j).backgroundColor});l!=null&&(s.fillColor=l);var c=t6(t,function(j){return n.getComputedStyle(j).color});c!=null&&(s.textColor=c);var u=GYe(a,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,h=a.borderTopWidth;if(a.borderBottomWidth===h&&a.borderRightWidth===h&&a.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/f,right:(parseFloat(a.borderRightWidth)||0)/f,bottom:(parseFloat(a.borderBottomWidth)||0)/f,left:(parseFloat(a.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=t6(t,function(j){return n.getComputedStyle(j)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(a.textAlign)!==-1&&(s.halign=a.textAlign),x=["middle","bottom","top"],x.indexOf(a.verticalAlign)!==-1&&(s.valign=a.verticalAlign);var v=parseInt(a.fontSize||"");isNaN(v)||(s.fontSize=v/o);var y=$Ye(a);y&&(s.fontStyle=y);var w=(a.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function $Ye(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function t6(e,t){var r=Jce(e,t);if(!r)return null;var a=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var n=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],s=parseInt(a[4]);return s===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Jce(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:Jce(e.parentElement,t):r}function GYe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],a=96/(72/t),n=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(l){return parseInt(l||"0")/a}),o=b4(s,0);return n>o.top&&(o.top=n),n>o.bottom&&(o.bottom=n),o}function Zce(e,t,r,a,n){var s,o;a===void 0&&(a=!1),n===void 0&&(n=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],x=(o=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),v=qYe(c,u,r,g,a,n);v&&(x==="thead"?d.push(v):x==="tfoot"?h.push(v):f.push(v))}return{head:d,body:f,foot:h}}function qYe(e,t,r,a,n,s){for(var o=new Kce(a),l=0;l<a.cells.length;l++){var c=a.cells[l],u=r.getComputedStyle(c);if(n||u.display!=="none"){var d=void 0;s&&(d=VYe(e,c,t,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:KYe(c)})}}var f=r.getComputedStyle(a);if(o.length>0&&(n||f.display!=="none"))return o}function KYe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function WYe(e,t,r){for(var a=0,n=[e,t,r];a<n.length;a++){var s=n[a];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Eh(e,t,r,a,n){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function eue(e,t){var r=new ob(e),a=r.getDocumentOptions(),n=r.getGlobalOptions();WYe(n,a,t);var s=Eh({},n,a,t),o;typeof window<"u"&&(o=window);var l=XYe(n,a,t),c=YYe(n,a,t),u=JYe(r,s),d=eJe(r,s,o);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function XYe(e,t,r){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];a.columnStyles=Eh({},u,d,f)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});a[c]=Eh({},m[0],m[1],m[2])}},s=0,o=Object.keys(a);s<o.length;s++){var l=o[s];n(l)}return a}function YYe(e,t,r){for(var a=[e,t,r],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=a;s<o.length;s++){var l=o[s];l.didParseCell&&n.didParseCell.push(l.didParseCell),l.willDrawCell&&n.willDrawCell.push(l.willDrawCell),l.didDrawCell&&n.didDrawCell.push(l.didDrawCell),l.willDrawPage&&n.willDrawPage.push(l.willDrawPage),l.didDrawPage&&n.didDrawPage.push(l.didDrawPage)}return n}function JYe(e,t){var r,a,n,s,o,l,c,u,d,f,h,m,g=b4(t.margin,40/e.scaleFactor()),x=(r=ZYe(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(n=t.showHead)!==null&&n!==void 0?n:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,j=t.theme||(w?"plain":"striped"),O=!!t.horizontalPageBreak,B=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:w,theme:j,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:O,horizontalPageBreakRepeat:B,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function ZYe(e,t){var r=e.getLastAutoTable(),a=e.scaleFactor(),n=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===n}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/a:null}function eJe(e,t,r){var a=t.head||[],n=t.body||[],s=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=Zce(e,t.html,r,o,t.useCss)||{};a=l.head||a,n=l.body||a,s=l.foot||a}else console.error("Cannot parse html in non browser environment")}var c=t.columns||tJe(a,n,s);return{columns:c,head:a,body:n,foot:s}}function tJe(e,t,r){var a=e[0]||t[0]||r[0]||[],n=[];return Object.keys(a).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(a)?l=a[parseInt(s)]:l=a[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(a)?u=n.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};n.push(d)}}),n}var mD=function(){function e(t,r,a){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=a,this.doc=t.getDocument()}return e}(),rJe=function(e){qce(t,e);function t(r,a,n,s,o,l){var c=e.call(this,r,a,l)||this;return c.cell=n,c.row=s,c.column=o,c.section=s.section,c}return t}(mD),aJe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,a,n,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new rJe(t,this,a,n,s,o),f=u(d)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var a=0,n=this.hooks.didDrawPage;a<n.length;a++){var s=n[a];s(new mD(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var a=0,n=this.hooks.willDrawPage;a<n.length;a++){var s=n[a];s(new mD(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(n,s){return n+s.wrappedWidth},0);return r}else{var a=this.settings.margin;return t-a.left-a.right}},e}(),tue=function(){function e(t,r,a,n,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof Kce&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=a,this.cells=n,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(a,n){var s;return Math.max(a,((s=r.cells[n.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(a){var n=r.cells[a.index];return n?n.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var a=this;return t.reduce(function(n,s){var o=a.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>n?u:n},0)},e}(),rue=function(){function e(t,r,a){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=a,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(n=t.content)!==null&&n!==void 0?n:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");a=this.x+n/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var a=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/t*r,s=a*n+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=b4(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),nJe=function(){function e(t,r,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=a}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,a=0,n=t.allRows();a<n.length;a++){var s=n[a],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function sJe(e,t){iJe(e,t);var r=[],a=0;t.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(t);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),a+=s.width});var n=t.getWidth(e.pageSize().width)-a;n&&(n=pD(r,n,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),n&&(n=pD(r,n,function(s){return s.minWidth})),n=Math.abs(n),!t.settings.horizontalPageBreak&&n>.1/e.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),lJe(t),cJe(t,e),oJe(t)}function iJe(e,t){var r=e.scaleFactor(),a=t.settings.horizontalPageBreak,n=Yce(e,t);t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=e_(u.text,u.styles,e)+f;var h=e_(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||a===!0)u.contentWidth>n?(u.minWidth=n,u.wrappedWidth=n):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function pD(e,t,r){for(var a=t,n=e.reduce(function(m,g){return m+g.wrappedWidth},0),s=0;s<e.length;s++){var o=e[s],l=o.wrappedWidth/n,c=a*l,u=o.width+c,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=pD(h,t,r))}return t}function oJe(e){for(var t={},r=1,a=e.allRows(),n=0;n<a.length;n++)for(var s=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=a.length-n,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function lJe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var a=t[r],n=null,s=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])s+=c.width,delete a.cells[c.index];else if(n){var u=n;delete a.cells[c.index],n=null,u.width=c.width+s}else{var u=a.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){n=u,s+=c.width;continue}u.width=c.width+s}}}function cJe(e,t){for(var r={count:0,height:0},a=0,n=e.allRows();a<n.length;a++){for(var s=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=kW(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=kW(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function kW(e,t,r,a,n){return e.map(function(s){return uJe(s,t,r,a,n)})}function uJe(e,t,r,a,n){var s=1e4*a.scaleFactor();if(t=Math.ceil(t*s)/s,t>=e_(e,r,a))return e;for(;t<e_(e+n,r,a)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+n}function aue(e,t){var r=new ob(e),a=dJe(t,r.scaleFactor()),n=new aJe(t,a);return sJe(r,n),r.applyStyles(r.userStyles),n}function dJe(e,t){var r=e.content,a=AJe(r.columns);if(r.head.length===0){var n=_W(a,"head");n&&r.head.push(n)}if(r.foot.length===0){var n=_W(a,"foot");n&&r.foot.push(n)}var s=e.settings.theme,o=e.styles;return{columns:a,head:r6("head",r.head,a,o,s,t),body:r6("body",r.body,a,o,s,t),foot:r6("foot",r.foot,a,o,s,t)}}function r6(e,t,r,a,n,s){var o={},l=t.map(function(c,u){for(var d=0,f={},h=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(o[v.index]==null||o[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-h-d]:y=c[v.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var j=hJe(e,v,u,n,a,s,w),O=new rue(y,j,e);f[v.dataKey]=O,f[v.index]=O,m=O.colSpan-1,o[v.index]={left:O.rowSpan-1,times:m}}else m--,h++;else o[v.index].left--,m=o[v.index].times,d++}return new tue(c,u,e,f)});return l}function _W(e,t){var r={};return e.forEach(function(a){if(a.raw!=null){var n=fJe(t,a.raw);n!=null&&(r[a.dataKey]=n)}}),Object.keys(r).length>0?r:null}function fJe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function AJe(e){return e.map(function(t,r){var a,n;return typeof t=="object"?n=(a=t.dataKey)!==null&&a!==void 0?a:r:n=r,new nJe(n,t,r)})}function hJe(e,t,r,a,n,s,o){var l=zYe(a),c;e==="head"?c=n.headStyles:e==="body"?c=n.bodyStyles:e==="foot"&&(c=n.footStyles);var u=Eh({},l.table,l[e],n.styles,c),d=n.columnStyles[t.dataKey]||n.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?Eh({},l.alternateRow,n.alternateRowStyles):{},m=HYe(s),g=Eh({},m,u,h,f);return Eh(g,o)}function mJe(e,t,r){var a;r===void 0&&(r={});var n=Yce(e,t),s=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!s.has(m.index)&&(s.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),n-=m.wrappedWidth)});for(var u=!0,d=(a=r==null?void 0:r.start)!==null&&a!==void 0?a:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||n>=f)u=!1,o.push(d),l.push(t.columns[d]),n-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function pJe(e,t){for(var r=[],a=0;a<t.columns.length;a++){var n=mJe(e,t,{start:a});n.columns.length&&(r.push(n),a=n.lastIndex)}return r}function nue(e,t){var r=t.settings,a=r.startY,n=r.margin,s={x:n.left,y:a},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=a+n.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);l+=u}var d=new ob(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(iue(d),s.y=n.top),t.callWillDrawPageHooks(d,s);var f=Eh({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?gJe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Yh(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;t_(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Yh(d,t,h,s,t.columns)})),Wce(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function gJe(e,t,r,a){var n=pJe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?tw(e,t,r,a,u.columns,!0):SW(e,t,a,u.columns),xJe(e,t,r,a,u.columns),a6(e,t,a,u.columns)});else for(var o=-1,l=n[0],c=function(){var u=o;if(l){e.applyStyles(e.userStyles);var d=l.columns;o>=0?tw(e,t,r,a,d,!0):SW(e,t,a,d),u=BW(e,t,o+1,a,d),a6(e,t,a,d)}var f=u-o;n.slice(1).forEach(function(h){e.applyStyles(e.userStyles),tw(e,t,r,a,h.columns,!0),BW(e,t,o+1,a,h.columns,f),a6(e,t,a,h.columns)}),o=u};o<t.body.length-1;)c()}function SW(e,t,r,a){var n=t.settings;e.applyStyles(e.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(s){return Yh(e,t,s,r,a)})}function xJe(e,t,r,a,n){e.applyStyles(e.userStyles),t.body.forEach(function(s,o){var l=o===t.body.length-1;t_(e,t,s,l,r,a,n)})}function BW(e,t,r,a,n,s){e.applyStyles(e.userStyles),s=s??t.body.length;var o=Math.min(r+s,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,u){var d=r+u===t.body.length-1,f=sue(e,t,d,a);c.canEntireRowFit(f,n)&&(Yh(e,t,c,a,n),l=r+u)}),l}function a6(e,t,r,a){var n=t.settings;e.applyStyles(e.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(s){return Yh(e,t,s,r,a)})}function vJe(e,t,r){var a=r.getLineHeight(e.styles.fontSize),n=e.padding("vertical"),s=Math.floor((t-n)/a);return Math.max(0,s)}function bJe(e,t,r,a){var n={};e.spansMultiplePages=!0,e.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new rue(u.raw,u.styles,u.section);d=Eh(d,u),d.text=[];var f=vJe(u,t,a);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=a.scaleFactor(),m=a.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>s&&(s=d.contentHeight),n[c.index]=d}}var g=new tue(e.raw,-1,e.section,n,!0);g.height=s;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function yJe(e,t,r,a){var n=e.pageSize().height,s=a.settings.margin,o=s.top+s.bottom,l=n-o;t.section==="body"&&(l-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var c=t.getMinimumRowHeight(a.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(a.columns),f=t.getMaxCellHeight(a.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||a.settings.rowPageBreak==="avoid")}function t_(e,t,r,a,n,s,o){var l=sue(e,t,a,s);if(r.canEntireRowFit(l,o))Yh(e,t,r,s,o);else if(yJe(e,r,l,t)){var c=bJe(r,l,t,e);Yh(e,t,r,s,o),tw(e,t,n,s,o),t_(e,t,c,a,n,s,o)}else tw(e,t,n,s,o),t_(e,t,r,a,n,s,o)}function Yh(e,t,r,a,n){a.x=t.settings.margin.left;for(var s=0,o=n;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){a.x+=l.width;continue}e.applyStyles(c.styles),c.x=a.x,c.y=a.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,a);if(u===!1){a.x+=l.width;continue}wJe(e,c,a);var d=c.getTextPos();Gce(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,a),a.x+=l.width}a.y+=r.height}function wJe(e,t,r){var a=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof a.lineWidth=="number"){var n=Xce(a.lineWidth,a.fillColor);n&&e.rect(t.x,r.y,t.width,t.height,n)}else typeof a.lineWidth=="object"&&(a.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),NJe(e,t,r,a.lineWidth))}function NJe(e,t,r,a){var n,s,o,l;a.top&&(n=r.x,s=r.y,o=r.x+t.width,l=r.y,a.right&&(o+=.5*a.right),a.left&&(n-=.5*a.left),c(a.top,n,s,o,l)),a.bottom&&(n=r.x,s=r.y+t.height,o=r.x+t.width,l=r.y+t.height,a.right&&(o+=.5*a.right),a.left&&(n-=.5*a.left),c(a.bottom,n,s,o,l)),a.left&&(n=r.x,s=r.y,o=r.x,l=r.y+t.height,a.top&&(s-=.5*a.top),a.bottom&&(l+=.5*a.bottom),c(a.left,n,s,o,l)),a.right&&(n=r.x+t.width,s=r.y,o=r.x+t.width,l=r.y+t.height,a.top&&(s-=.5*a.top),a.bottom&&(l+=.5*a.bottom),c(a.right,n,s,o,l));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function sue(e,t,r,a){var n=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(n+=t.getFootHeight(t.columns)),e.pageSize().height-a.y-n}function tw(e,t,r,a,n,s){n===void 0&&(n=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(l){return Yh(e,t,l,a,n)}),t.callEndPageHooks(e,a);var o=t.settings.margin;Wce(e,t,r,a),iue(e),t.pageNumber++,a.x=o.left,a.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Yh(e,t,l,a,n)}),e.applyStyles(e.userStyles))}function iue(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function EJe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=t[0],n=eue(this,a),s=aue(this,n);return nue(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,a,n){Gce(t,r,a,n,this)},e.API.autoTableSetDefaults=function(t){return ob.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){ob.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var a;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new ob(this),s=Zce(n,t,window,r,!1),o=s.head,l=s.body,c=((a=o[0])===null||a===void 0?void 0:a.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var n6;function bi(e,t){var r=eue(e,t),a=aue(e,r);nue(e,a)}try{if(typeof window<"u"&&window){var TW=window,IW=TW.jsPDF||((n6=TW.jspdf)===null||n6===void 0?void 0:n6.jsPDF);IW&&EJe(IW)}}catch(e){console.error("Could not apply autoTable plugin",e)}const CJe=["Localizar informacin explcita","Realizar inferencias a partir del texto","Interpretar y relacionar informacin del texto","Reflexionar sobre el texto y evaluarlo","Analizar aspectos formales del texto","Reconocer tipos de texto segn su propsito comunicativo","Comprender vocabulario en contexto"],jJe=["Nmeros y operaciones","lgebra y funciones","Geometra","Probabilidad y estadstica","Resolucin de problemas","Modelamiento matemtico","Argumentacin y comunicacin matemtica"],OW=ht(st,"usuarios");async function P1(){try{console.log(" [DEBUG] Obteniendo usuarios de Firestore..."),console.log(" [DEBUG] Collection ref:",OW);const e=await Ir(OW);if(console.log(` [DEBUG] Encontrados ${e.docs.length} documentos en la coleccin usuarios`),e.empty)return console.log("  [DEBUG] La coleccin usuarios est vaca"),[];const t=e.docs.map(a=>{const n=a.data();return!n.curso||typeof n.curso!="string"||!n.curso.trim()?console.warn(" [ASIGNACION] Usuario sin curso asignado o curso invlido:",{id:a.id,...n}):console.log(" [ASIGNACION] Usuario con curso:",{id:a.id,curso:n.curso,nombre:n.nombreCompleto}),{id:a.id,...n}}),r=Array.from(new Set(t.map(a=>a.curso).filter(Boolean)));return console.log(" [ASIGNACION] Cursos nicos encontrados en usuarios:",r),console.log(" [DEBUG] Usuarios procesados correctamente:",t.length),console.log(" [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error(" [DEBUG] Error al obtener usuarios:",e),console.error(" [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const kJe=e=>{try{if(!e)return new Date().toISOString();if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString();if(e instanceof Date)return e.toISOString();const t=new Date(e);if(!isNaN(t.getTime()))return t.toISOString()}catch{}return new Date().toISOString()},Zc="simce_sets",JN="simce_resultados";async function _Je(e){try{return(await Zr(ht(st,Zc),e)).id}catch(t){throw console.error("Error al crear set de preguntas:",t),new Error("No se pudo crear el set de preguntas")}}async function SJe(e,t){try{await Bo(Jt(st,Zc,e),t)}catch(r){throw console.error("Error al actualizar set de preguntas:",r),new Error("No se pudo actualizar el set de preguntas")}}async function oue(e){var t;try{console.log(`[DEBUG] obtenerSetPreguntas - Buscando set con ID: ${e}`);let r=await Uh(Jt(st,Zc,e));if(r.exists()||(console.log(`[DEBUG] obtenerSetPreguntas - No encontrado en ${Zc}, buscando en simce_evaluaciones`),r=await Uh(Jt(st,"simce_evaluaciones",e))),r.exists()){const a=r.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Set encontrado: ${a.titulo||"Sin ttulo"}`),console.log(`[DEBUG] obtenerSetPreguntas - Cantidad de preguntas: ${((t=a.preguntas)==null?void 0:t.length)||0}`),a.preguntas&&a.preguntas.length>0)for(let n=0;n<a.preguntas.length;n++){const s=a.preguntas[n];if(s.textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base encontrado en pregunta ${n+1}`),console.log(`[DEBUG] obtenerSetPreguntas - Extracto del texto base: ${s.textoBase.substring(0,50)}...`);break}}return{id:r.id,...a}}else throw console.log(`[DEBUG] obtenerSetPreguntas - No se encontr set con ID: ${e} en ninguna coleccin`),new Error("El set de preguntas no existe")}catch(r){throw console.error("Error al obtener set de preguntas:",r),new Error("No se pudo obtener el set de preguntas")}}async function KM(e){try{const t=Dt(ht(st,Zc),ur("creadorId","==",e),Yt("fechaCreacion","desc")),a=(await Ir(t)).docs.map(l=>({id:l.id,...l.data()})),n=Dt(ht(st,"simce_evaluaciones"),ur("creadorId","==",e),Yt("fechaCreacion","desc")),o=(await Ir(n)).docs.map(l=>({id:l.id,...l.data(),preguntas:l.data().preguntas||[]}));return[...a,...o]}catch(t){throw console.error("Error al obtener sets de preguntas:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function lue(e){try{if(console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Buscando sets para curso ${e}`),!e)return console.error("[DEBUG] obtenerSetsPreguntasPorCurso - Error: cursoId es undefined o vaco"),[];const t=Dt(ht(st,Zc),ur("cursosAsignados","array-contains",e),Yt("fechaCreacion","desc"));console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en ${Zc}:`,t);const r=await Ir(t);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en ${Zc}: ${r.docs.length}`);const a=Dt(ht(st,"simce_evaluaciones"),ur("cursosAsignados","array-contains",e),Yt("fechaCreacion","desc"));console.log("[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en simce_evaluaciones:",a);const n=await Ir(a);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en simce_evaluaciones: ${n.docs.length}`);let s=[...r.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en ${Zc}: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l}}),...n.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en simce_evaluaciones: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l,preguntas:l.preguntas||[]}})];if(console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Total sets combinados: ${s.length}`),!s.length){console.warn("[DEBUG] obtenerSetsPreguntasPorCurso - Sin resultados por query; aplicando fallback (getDocs + filtro cliente)");const[o,l]=await Promise.all([Ir(ht(st,Zc)),Ir(ht(st,"simce_evaluaciones"))]),c=e;s=[...o.docs.map(u=>({id:u.id,...u.data()})).filter(u=>Array.isArray(u.cursosAsignados)&&u.cursosAsignados.includes(c)),...l.docs.map(u=>({id:u.id,...u.data(),preguntas:u.data().preguntas||[]})).filter(u=>Array.isArray(u.cursosAsignados)&&u.cursosAsignados.includes(c))],console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Fallback aplic ${s.length} sets`)}return s}catch(t){throw console.error("Error al obtener sets de preguntas por curso:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function cue(e){try{if(!e)return[];const t=Dt(ht(st,Zc),ur("estudiantesAsignados","array-contains",e),Yt("fechaCreacion","desc")),r=await Ir(t),a=Dt(ht(st,"simce_evaluaciones"),ur("estudiantesAsignados","array-contains",e),Yt("fechaCreacion","desc")),n=await Ir(a);return[...r.docs.map(s=>({id:s.id,...s.data()})),...n.docs.map(s=>({id:s.id,...s.data(),preguntas:s.data().preguntas||[]}))]}catch(t){return console.error("Error al obtener sets por estudiante:",t),[]}}async function uue(e){try{await xn(Jt(st,Zc,e))}catch(t){throw console.error("Error al eliminar set de preguntas:",t),new Error("No se pudo eliminar el set de preguntas")}}async function due(e){try{return(await Zr(ht(st,JN),e)).id}catch(t){throw console.error("Error al guardar resultado de intento:",t),new Error("No se pudo guardar el resultado")}}async function fue(e){try{const t=Dt(ht(st,JN),ur("setId","==",e),Yt("fechaEnvio","desc"));return(await Ir(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error al obtener resultados por set:",t),new Error("No se pudieron obtener los resultados")}}async function Aue(e,t){try{if(!t||t.length===0)return[];const r=10,a=[];for(let o=0;o<t.length;o+=r)a.push(t.slice(o,o+r));const n=[];for(const o of a){const l=Dt(ht(st,JN),ur("setId","==",e),ur("estudianteId","in",o)),c=await Ir(l);n.push(...c.docs.map(u=>({id:u.id,...u.data()})))}const s=new Map;for(const o of n)s.set(o.id,o);return Array.from(s.values())}catch(r){throw console.error("Error al obtener resultados por curso:",r),new Error("No se pudieron obtener los resultados del curso")}}async function hue(e){try{const t=Dt(ht(st,JN),ur("estudianteId","==",e),Yt("fechaEnvio","desc"));return(await Ir(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error al obtener resultados por estudiante:",t),new Error("No se pudieron obtener los resultados del estudiante")}}async function BJe(e){try{await xn(Jt(st,JN,e))}catch(t){throw console.error("Error al eliminar resultado:",t),new Error("No se pudo eliminar el resultado")}}async function TJe(e,t){try{console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Buscando evaluaciones para estudiante ${e} en curso ${t}`);const a=(u=>{if(!u)return"";let d=u.trim().toLowerCase();return d=d.replace(//g,""),d=d.replace(/\s+(medio|bsico|basico)/g,""),d=d.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),d=d.replace(/^(\d)(?![])/,"$1"),d=d.replace(/\s+/g,"").toUpperCase(),d})(t),[n,s]=await Promise.all([lue(a),cue(e)]),o=new Map;[...n,...s].forEach(u=>o.set(u.id,u));const l=Array.from(o.values());console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Encontradas ${l.length} evaluaciones asignadas al curso ${t}`);const c=l.map(u=>{const d={id:u.id,titulo:u.titulo,descripcion:u.descripcion||"",asignatura:(()=>{const h=String(u.asignatura||"").toLowerCase();return h.includes("lect")?"Competencia Lectora":h.includes("lg")||h.includes("log")||h.includes("mat")?"Pensamiento Lgico":u.asignatura})(),preguntas:[...u.preguntas],fechaAsignacion:u.fechaCreacion||new Date().toISOString(),textoBase:""};if(String(d.asignatura||"").toLowerCase().includes("lect")){let h="";for(const m of u.preguntas)if(m.textoBase&&m.textoBase.trim()){h=m.textoBase.trim(),console.log(`[DEBUG] Texto base encontrado en pregunta ${m.id}:`,h.substring(0,50)+"...");break}h&&d.preguntas.length>0&&(console.log(`[DEBUG] Asignando texto base a la evaluacin y primera pregunta: ${u.id}`),d.textoBase=h,d.preguntas[0].textoBase=h)}return d});return console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Evaluaciones mapeadas: ${c.length}`),c}catch(r){return console.error("Error en obtenerEvaluacionesEstudiante:",r),[]}}async function rw(e){var t,r;try{console.log(`[DEBUG] obtenerEvaluacionPorId - Buscando evaluacin con ID: ${e}`);const a=await oue(e);if(a){console.log(`[DEBUG] obtenerEvaluacionPorId - Evaluacin encontrada: ${a.titulo}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Asignatura: ${a.asignatura}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Cantidad de preguntas: ${((t=a.preguntas)==null?void 0:t.length)||0}`);const n=a.preguntas.some(s=>s.textoBase);if(console.log(`[DEBUG] obtenerEvaluacionPorId - Tiene texto base?: ${n}`),n){const s=a.preguntas.find(o=>o.textoBase);console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base encontrado en pregunta: ${s==null?void 0:s.id}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base (primeros 50 caracteres): ${(r=s==null?void 0:s.textoBase)==null?void 0:r.substring(0,50)}...`)}}else console.log(`[DEBUG] obtenerEvaluacionPorId - No se encontr evaluacin con ID: ${e}`);return a||null}catch(a){return console.error("Error en obtenerEvaluacionPorId:",a),null}}async function mue(e){try{const t={...e,setId:e.evaluacionId||e.setId||null,respuestas:e.respuestas||[],porcentajeAciertos:e.porcentajeAciertos??e.porcentajeLogro??0,porcentajeLogro:e.porcentajeLogro??e.porcentajeAciertos??0,nivelLogro:e.nivelLogro||"Insuficiente",fechaEnvio:e.fechaRealizacion||new Date().toISOString(),tiempoRealizacion:e.tiempoRealizacion??e.duracionSegundos??null};return await due(t)}catch(t){throw console.error("Error en guardarIntentoEvaluacion:",t),t}}async function pue(e,t){try{return(await hue(e)).filter(n=>n.setId===t)}catch(r){return console.error("Error en verificarIntentoExistente:",r),[]}}async function gue(e){try{let t=[];try{t=await KM(e)}catch(r){console.warn("[DEBUG] obtenerEvaluacionesPorProfesor - Falla query directa, intento fallback:",r)}if(!t.length){console.warn("[DEBUG] obtenerEvaluacionesPorProfesor - Sin resultados, aplicando fallback (getDocs + filtro por creadorId)");const[r,a]=await Promise.all([Ir(ht(st,Zc)),Ir(ht(st,"simce_evaluaciones"))]);t=[...r.docs.map(n=>({id:n.id,...n.data()})),...a.docs.map(n=>({id:n.id,...n.data(),preguntas:n.data().preguntas||[]}))].filter(n=>n.creadorId===e),console.log(`[DEBUG] obtenerEvaluacionesPorProfesor - Fallback encontr ${t.length} sets`)}return t.map(r=>({id:r.id,titulo:r.titulo,descripcion:r.descripcion||"",asignatura:r.asignatura,preguntas:Array.isArray(r.preguntas)?r.preguntas:[],fechaCreacion:kJe(r.fechaCreacion),cursosAsignados:r.cursosAsignados||[]}))}catch(t){return console.error("Error en obtenerEvaluacionesPorProfesor:",t),[]}}async function gD(e){try{return await fue(e)}catch(t){return console.error("Error en obtenerIntentosPorEvaluacion:",t),[]}}async function xue(e,t){try{const r=v=>{if(!v)return"";let y=v.trim().toLowerCase();return y=y.replace(//g,""),y=y.replace(/\s+(medio|bsico|basico)/g,""),y=y.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),y=y.replace(/^(\d)(?![])/,"$1"),y=y.replace(/\s+/g,"").toUpperCase(),y},a=r(t),s=(await P1()).filter(v=>v.profile==="ESTUDIANTE"&&r(v.curso||"")===a).map(v=>v.id);if(s.length===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const o=await Aue(e,s),l=o.length;if(l===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const c=o.map(v=>v.porcentajeAciertos||v.porcentajeLogro||0),u=c.reduce((v,y)=>v+y,0)/l;let d=0,f=0,h=0;c.forEach(v=>{v>=80?d++:v>=50?f++:h++});const m=d/l*100,g=f/l*100,x=h/l*100;return{totalEstudiantes:l,promedioLogro:u,nivelPredominante:m>=Math.max(g,x)?"Adecuado":g>=x?"Elemental":"Insuficiente",porcentajeAdecuado:m,porcentajeElemental:g,porcentajeInsuficiente:x,porEjeTematico:[],porPregunta:[]}}catch(r){return console.error("Error en obtenerEstadisticasPorCurso:",r),null}}const xD=Object.freeze(Object.defineProperty({__proto__:null,actualizarSetPreguntas:SJe,crearSetPreguntas:_Je,eliminarResultado:BJe,eliminarSetPreguntas:uue,guardarIntentoEvaluacion:mue,guardarResultadoIntento:due,obtenerEstadisticasPorCurso:xue,obtenerEvaluacionPorId:rw,obtenerEvaluacionesEstudiante:TJe,obtenerEvaluacionesPorProfesor:gue,obtenerIntentosPorEvaluacion:gD,obtenerResultadosPorCurso:Aue,obtenerResultadosPorEstudiante:hue,obtenerResultadosPorSet:fue,obtenerSetPreguntas:oue,obtenerSetsPreguntasPorCurso:lue,obtenerSetsPreguntasPorEstudiante:cue,obtenerSetsPreguntasPorProfesor:KM,verificarIntentoExistente:pue},Symbol.toStringTag,{value:"Module"}));function IJe(e){if(!e)return;let t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/\t/g,"  ").trim();const r=4e3;return t.length>r&&(console.log(`Texto proporcionado truncado de ${t.length} a ${r} caracteres`),t=t.substring(0,r)+`

[Texto truncado por lmite de tamao]`),t}async function OJe(e,t){try{let r;typeof e=="string"?r={asignatura:e,cantidad:t??5}:(r=e,r.textoProporcionado&&(r.textoProporcionado=IJe(r.textoProporcionado)));const a=r.cantidad??4,n=4;r.nivel&&!["1M","2M"].includes(r.nivel)&&(r.nivel=r.nivel==="1"?"1M":r.nivel==="2"?"2M":r.nivel),console.log(`Generando ${a} preguntas de ${r.asignatura}, nivel ${r.nivel||"1M"}`);const s=FJe(r,a,n);console.log("Enviando prompt a la IA (usando modelo Pro para mejor calidad)...");const o=await B8(s,2,!0);if(!o)throw console.error("La IA no devolvi respuesta"),new Error("No se recibi respuesta del modelo de IA. Por favor, intente nuevamente.");return console.log("Procesando respuesta de la IA..."),PJe(o,a,r)}catch(r){throw console.error("Error en generarPreguntasSimce:",r),r instanceof Error?r:new Error("Ocurri un error al generar las preguntas SIMCE. Por favor, intente nuevamente.")}}function FJe(e,t,r){const a=e.asignatura,s=(e.nivel||"1M")==="1M"?"1 medio":"2 medio",o=e.dificultad||"media",l={baja:"facil",media:"media",alta:"dificil"},c=[];if(c.push("Eres un generador pedaggico especializado en preguntas tipo SIMCE para Chile."),c.push(`Tu tarea es crear exactamente ${t} preguntas de alta calidad de la asignatura "${a}" para nivel ${s} (Chile).`),a==="Lectura"){c.push(`
ESPECIFICACIONES PARA LECTURA:`);const u=e.habilidadesLectura&&e.habilidadesLectura.length>0?e.habilidadesLectura:["Localizar informacin","Relacionar informacin","Interpretar","Reflexionar y evaluar"];c.push(`- Habilidades a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar especficamente UNA de estas habilidades."),c.push("- Distribuye las preguntas entre las habilidades seleccionadas.");const d=e.textoProporcionado&&e.textoProporcionado.trim().length>0,f=e.textoBaseLectura&&e.textoBaseLectura.trim().length>0;d?(c.push(`
- IMPORTANTE: Utilizars EXCLUSIVAMENTE el texto proporcionado por el usuario para generar preguntas.`),c.push("- NO generes un texto adicional, usa nicamente el texto que se proporciona ms adelante."),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):f?(c.push(`
- Utilizars el texto base proporcionado para generar preguntas.`),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):(c.push(`
- Como no se ha proporcionado un texto base, DEBES CREAR un texto original:`),c.push("  * Extensin: 200-350 palabras"),c.push("  * Apropiado para estudiantes de "+s),c.push("  * Culturalmente relevante para Chile, pero neutro (sin controversias)"),c.push("  * Sin marcas comerciales ni contenido con derechos de autor"),c.push('  * El texto debe incluirse en la propiedad "textoBase" del primer tem solamente'))}else if(a==="Matemtica"){c.push(`
ESPECIFICACIONES PARA MATEMTICA:`);const u=e.ejesMatematica&&e.ejesMatematica.length>0?e.ejesMatematica:["Nmeros","lgebra y Funciones","Geometra","Probabilidad y Estadstica"];c.push(`- Ejes temticos a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar especficamente UNO de estos ejes."),c.push("- Distribuye las preguntas entre los ejes seleccionados."),c.push("- Usa contextos matemticos realistas y escolares, relevantes para la vida diaria de estudiantes chilenos."),e.textoProporcionado&&(c.push(`
- IMPORTANTE: Utilizars el texto proporcionado por el usuario como contexto o referencia para generar problemas matemticos.`),c.push("- Las preguntas pueden incluir datos o situaciones mencionadas en el texto."))}if(c.push(`
REGLAS DE FORMATO DE SALIDA:`),c.push("- Devuelve UN NICO bloque JSON (sin texto adicional antes o despus)."),c.push("- El JSON debe ser un arreglo de objetos; cada objeto representa una pregunta con este esquema EXACTO:"),c.push("  {"),c.push('    "id": "p1",'),c.push('    "enunciado": "Texto del enunciado...",'),c.push('    "alternativas": ['),c.push('      {"id": "A", "texto": "...", "esCorrecta": true, "explicacion": "Justificacin detallada..."},'),c.push('      {"id": "B", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "C", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "D", "texto": "...", "esCorrecta": false}'),c.push("    ],"),a==="Lectura"?(c.push('    "habilidad": "Una de las habilidades especificadas",'),e.textoBaseLectura||c.push('    "textoBase": "El texto completo aqu (solo en el primer tem)",')):c.push('    "eje": "Uno de los ejes especificados",'),c.push('    "estandarAprendizaje": "Estndar curricular especfico",'),c.push(`    "dificultad": "${l[o]}"`),c.push("  }"),c.push(`
REGLAS DE CALIDAD:`),c.push("1. Enunciados claros y directos, sin ambigedades."),c.push(`2. EXACTAMENTE ${r} alternativas por pregunta (etiquetadas A, B, C, D).`),c.push("3. Solo UNA alternativa correcta por pregunta."),c.push('4. La alternativa correcta debe tener "esCorrecta": true y debe incluir una "explicacion" pedaggica.'),c.push("5. Distractores (alternativas incorrectas) deben representar errores tpicos (conceptuales o procedimentales)."),c.push("6. Las preguntas deben estar alineadas rigurosamente con el currculum chileno para "+s+"."),c.push(`7. Ajusta el nivel de dificultad a "${o}" (${l[o]}).`),c.push("8. Usa lenguaje claro, inclusivo y espaol chileno estndar."),c.push("9. Evita contenido con derechos de autor, marcas comerciales y temas sensibles."),e.contextoCurricular&&(c.push(`
CONTEXTO CURRICULAR ESPECFICO:`),c.push(e.contextoCurricular),c.push("- Alinea tus tems al contexto curricular provisto.")),e.textoProporcionado||e.textoBaseLectura&&a==="Lectura"){const u=!!e.textoProporcionado,d=u?`
TEXTO PROPORCIONADO POR EL USUARIO:`:`
TEXTO BASE PARA LECTURA:`;c.push(d);const f=e.textoProporcionado||e.textoBaseLectura;c.push('"""'),c.push(f),c.push('"""'),c.push(`
- Formula las preguntas NICAMENTE sobre este texto.`),c.push("- IMPORTANTE: NO incluyas el texto en la propiedad textoBase del JSON, ya fue provisto externamente."),u&&(c.push("- Este es un texto proporcionado por el usuario, asegrate de formular preguntas relevantes y precisas."),a==="Matemtica"&&(c.push("- Para matemticas, extrae datos numricos y situaciones del texto para formular problemas matemticos relacionados."),c.push("- Cuando sea relevante, inventa datos numricos coherentes con la situacin para completar los problemas.")))}return c.push(`
IMPORTANTE: Produce SOLO el arreglo JSON, sin texto introductorio ni comentarios adicionales.`),c.join(`
`)}function FW(e){if(!e)return e;try{const t=["como","as","tambin","segn","vase","ejemplo"];let r=e;return t.forEach(a=>{const n=new RegExp(`"([^"]*)"${a}"([^"]*)"`,"g");r=r.replace(n,`"$1\\"${a}\\"$2"`)}),r=r.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),r=r.replace(/,(\s*[\]}])/g,"$1"),r}catch(t){return console.log("Error al corregir problemas comunes:",t),e}}function DJe(e){if(!e||typeof e!="string")return console.error("Texto de entrada invlido:",e),null;console.log("Iniciando extraccin JSON con algoritmo mejorado..."),e=e.replace(/^\uFEFF/,"");try{e=FW(e)}catch(t){console.log("Error durante pre-procesamiento de palabras problemticas:",t)}try{const t=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/ig);if(t&&t.length>0){console.log(`Encontrados ${t.length} bloques de cdigo potenciales`);for(const r of t){const a=r.replace(/```(?:json)?|```/ig,"").trim();console.log(`Probando bloque de cdigo: ${a.substring(0,50)}...`);const n=FW(a),s=rv(n);try{return JSON.parse(s),console.log("JSON vlido extrado del bloque de cdigo"),s}catch{console.log("JSON en este bloque de cdigo es invlido, continuando con siguiente bloque...")}}}}catch(t){console.log("Error procesando bloques de cdigo:",t)}try{const t=/(\[\s*\{[\s\S]*?\}\s*\])/i.exec(e);if(t&&t[1]){const r=rv(t[1].trim());try{return JSON.parse(r),console.log("JSON completo vlido encontrado directamente"),r}catch{console.log("JSON completo parece invlido, continuando...")}}}catch(t){console.log("Error buscando JSON completo:",t)}try{const t=e.indexOf("[");if(t>=0&&e.indexOf('"id":',t)>t){console.log("Analizando estructura desde el inicio del array...");const a=e.lastIndexOf("]");let n;if(a>t)n=e.substring(t,a+1);else{const o=/"id"\s*:\s*"p\d+"/g;let l,c=-1,u="";for(;(l=o.exec(e))!==null;)c=l.index,u=l[0];if(console.log(`ltima pregunta encontrada: ${u} en posicin ${c}`),c>0){let d=e.indexOf('"id":',c+u.length);d===-1?d=e.length:(d=e.lastIndexOf("}",d),d===-1?d=e.length:d+=1),n=e.substring(t,d)+"]"}else n=e.substring(t)+"]"}const s=rv(n);try{return JSON.parse(s),console.log("JSON reconstruido desde inicio del array"),s}catch{console.log("JSON reconstruido invlido, continuando...")}}}catch(t){console.log("Error en estrategia de reconstruccin desde inicio:",t)}try{console.log("Buscando primera pregunta completa...");const r=/\{[\s\S]*?"id"\s*:\s*"p1"[\s\S]*?"enunciado"[\s\S]*?"alternativas"[\s\S]*?\}/.exec(e);if(r){let a=r[0];if(a.includes('"alternativas"')&&a.includes('"id": "A"')){const n=["A","B","C","D"],s=[];for(const o of n)a.includes(`"id": "${o}"`)&&s.push(o);if(console.log(`Alternativas encontradas en p1: ${s.join(", ")}`),s.length>0){const o=a.indexOf('"alternativas"');if(!a.substring(o).includes("]}")){console.log("Estructura de alternativas incompleta, reconstruyendo...");let d=-1,f="";for(const h of s){const m=a.lastIndexOf(`"id": "${h}"`);m>d&&(d=m,f=h)}if(d!==-1){console.log(`ltima alternativa completa: ${f}`);const h=a.indexOf("}",d);h!==-1&&(a=a.substring(0,h+1),a.includes("]}")||(a+="]}"))}}let c=`[${a}]`;const u=rv(c);try{return JSON.parse(u),console.log("Primera pregunta reconstruida con xito"),u}catch(d){console.log("Error al parsear primera pregunta reconstruida:",d)}}}}}catch(t){console.log("Error buscando primera pregunta:",t)}try{console.log("Intentando extraccin quirrgica del enunciado...");const t=e.match(/"enunciado"\s*:\s*"([^"]+)"/);if(t&&t[1]){const r=t[1].replace(/"/g,'\\"');console.log("Enunciado encontrado:",r.substring(0,30)+"...");let a="A";const n=e.match(/"respuesta"\s*:\s*"([A-D])"/);n&&n[1]&&(a=n[1]);let s="No disponible";const o=e.match(/"explicacion"\s*:\s*"([^"]+)"/);o&&o[1]&&(s=o[1].replace(/"/g,'\\"'));const l=`[{
        "id": "p1",
        "enunciado": "${r}",
        "alternativas": [
          {"id": "A", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${a==="A"}, "explicacion": "${a==="A"?s:""}"},
          {"id": "B", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${a==="B"}, "explicacion": "${a==="B"?s:""}"},
          {"id": "C", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${a==="C"}, "explicacion": "${a==="C"?s:""}"},
          {"id": "D", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${a==="D"}, "explicacion": "${a==="D"?s:""}"}
        ],
        "respuesta": "${a}",
        "explicacion": "${s}",
        "habilidad": "Recuperacin parcial",
        "estandarAprendizaje": "Contenido recuperado parcialmente"
      }]`;try{const c=rv(l);return JSON.parse(c),console.log("Generado JSON de emergencia con enunciado recuperado"),c}catch(c){console.log("Error al parsear JSON de emergencia:",c)}}}catch(t){console.log("Error en extraccin quirrgica:",t)}try{return console.log("Construyendo JSON mnimo de respaldo..."),rv(`[{
      "id": "p1",
      "enunciado": "La respuesta de la IA no pudo ser procesada correctamente. Por favor, intente nuevamente.",
      "alternativas": [
        {"id": "A", "texto": "Volver a generar preguntas", "esCorrecta": true, "explicacion": "El sistema detect un formato incorrecto en la respuesta de la IA y no pudo procesarla."},
        {"id": "B", "texto": "Opcin no disponible", "esCorrecta": false},
        {"id": "C", "texto": "Opcin no disponible", "esCorrecta": false},
        {"id": "D", "texto": "Opcin no disponible", "esCorrecta": false}
      ],
      "respuesta": "A",
      "explicacion": "Se recomienda intentar generar nuevamente o con diferentes parmetros."
    }]`)}catch(t){console.error("Error final en construccin de JSON de respaldo:",t)}return console.error("Todos los mtodos de extraccin JSON fallaron"),null}function rv(e){const t=e;console.log(`Limpiando JSON (primeros 50 caracteres): ${e.substring(0,50).replace(/\n/g,"\\n")}...`);const r=()=>{if(e.includes('"alternativas"')&&e.lastIndexOf('"alternativas"')>e.lastIndexOf("]"))return console.log("JSON truncado detectado en array de alternativas"),!0;const h=e.lastIndexOf("{"),m=e.lastIndexOf("}");if(h>m)return console.log("JSON truncado con objeto incompleto al final"),!0;const g=(j,O)=>(j.match(new RegExp("\\"+O,"g"))||[]).length,x=g(e,"{"),v=g(e,"}"),y=g(e,"["),w=g(e,"]");return x!==v||y!==w?(console.log("JSON con estructura desbalanceada",{llaveAbiertas:x,llaveCerradas:v,corcheteAbiertos:y,corcheteCerrados:w}),!0):!1},a=[];for(let h=0;h<e.length;h++){const m=e.charCodeAt(h);m<32&&m!==9&&m!==10&&m!==13&&a.push({posicion:h,codigo:m,contexto:e.substring(Math.max(0,h-15),h)+"|PROBLEMA|"+e.substring(h+1,h+15)})}a.length>0&&(console.log(`Detectados ${a.length} caracteres de control problemticos`),a.slice(0,3).forEach(h=>{console.log(`Carcter de control en posicin ${h.posicion}, cdigo U+${h.codigo.toString(16).padStart(4,"0")}`),console.log(`Contexto: ${h.contexto}`)})),e=e.replace(/^\uFEFF/,"");let n="";for(let h=0;h<e.length;h++){const m=e.charCodeAt(h);m>=32&&m<=126||m>=128&&m<=255||m===9||m===10||m===13?n+=e[h]:n+=" "}if(e=n,e=e.replace(/\/\/.*/g,""),e=e.replace(/\/\*[\s\S]*?\*\//g,""),e=e.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),e=e.replace(/,(\s*[\]}])/g,"$1"),r()){console.log("Intentando reparar JSON truncado...");const h=e.match(/\{\s*"id"\s*:\s*"p1"[\s\S]*?(?="id"|$)/);if(h){let m=h[0];if(m.includes('"enunciado"')&&m.includes('"alternativas"')&&!m.includes('"}]}')&&(m.match(/"id"\s*:\s*"[A-D]"/g)||[]).length>0){let x=-1,v=-1,y=0;for(;(v=m.indexOf(`"id": "${String.fromCharCode(65+y)}"`,v+1))!==-1&&(x=v,y++,!(y>=4)););if(x!==-1){const w=m.indexOf("}",x);if(w!==-1){let j=m.substring(0,w+1);j+=" ] }",e=`[ ${j} ]`,console.log("JSON reconstruido desde alternativa incompleta")}}}}}let s="",o=!1,l=!1;for(let h=0;h<e.length;h++){const m=e[h],g=e.charCodeAt(h);o?l?(s+=m,l=!1):m==="\\"?(s+=m,l=!0):m==='"'?(s+=m,o=!1):g<32?(s+="\\u"+("0000"+g.toString(16)).slice(-4),console.log(`Escapado carcter de control en posicin ${h}: U+${g.toString(16).padStart(4,"0")}`)):m==='"'&&e[h-1]!=="\\"?(s+='\\"',console.log(`Escapada comilla sin escapar en posicin ${h}`)):s+=m:(m==='"'&&!o&&(o=!0),s+=m)}e=s,e=e.replace(/:(\s*)(true|false)(\s*[,}])/g,(h,m,g,x)=>": "+g+x),["explicacion","explanation","texto","textoBase","enunciado","habilidad","eje","estandarAprendizaje"].forEach(h=>{const m=new RegExp(`"${h}"\\s*:\\s*"([^"]*)"`,"g");e=e.replace(m,(g,x)=>{const v=x.replace(/"/g,'\\"');return`"${h}": "${v}"`})}),e=e.replace(/"([^"]*)"([^"]*)"([^"]*)"/g,(h,m,g,x)=>g.trim().length<15&&(g.includes("como")||g.includes("as")||g.includes("tambin")||g.includes("segn"))?`"${m}\\"${g}\\"${x}"`:h),e=e.replace(/[ \t]+/g," ").trim(),!e.startsWith("[")&&e.includes('"id": "p1"')&&(e=`[${e}]`,console.log("Encapsulando objeto en array")),!(e.endsWith("}]")||e.endsWith('"]'))&&e.includes('"id": "p1"')&&(e.lastIndexOf("{")>e.lastIndexOf("}")&&(e+="}",console.log("Cerrando objeto abierto")),e.lastIndexOf("[")>e.lastIndexOf("]")&&(e+="]",console.log("Cerrando array abierto"))),e.includes('"alternativas"')&&!e.includes("]")&&(e+="]",console.log("Cerrando array de alternativas truncado"));const d=e.match(/"alternativas"\s*:\s*\[\s*{\s*"id"\s*:\s*"A".*?"explicacion"\s*:\s*"[^"]*"(?!\s*})/);if(d){const h=e.indexOf(d[0])+d[0].length;e=e.substring(0,h)+" }"+e.substring(h),console.log("Reparado cierre de alternativa")}const f=h=>{if(e.length>=h+10){const m=e.substring(Math.max(0,h-20),Math.min(e.length,h+20));console.log(`Verificando contexto alrededor de posicin ${h}: "${m}"`);const g=[];for(let x=Math.max(0,h-5);x<Math.min(e.length,h+5);x++)g.push({pos:x,char:e[x],code:e.charCodeAt(x),hex:e.charCodeAt(x).toString(16).padStart(4,"0")});console.log("Anlisis de caracteres alrededor de posicin especfica:"),g.forEach(x=>{console.log(`Pos ${x.pos}: "${x.char}" (U+${x.hex})`)})}};f(392);try{e.includes("textoBase")&&(e=e.replace(/"textoBase"\s*:\s*"([^"]*)"/g,(h,m)=>`"textoBase": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalizacin especial para campo textoBase")),e.includes('"explicacion"')&&(e=e.replace(/"explicacion"\s*:\s*"([^"]*)"/g,(h,m)=>`"explicacion": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalizacin especial para campos explicacion")),JSON.parse(e),console.log("JSON limpio vlido")}catch(h){console.log("JSON sigue siendo invlido despus de limpieza, intentando reparacin ms agresiva"),console.error("Error especfico:",h.message);try{if(h.message&&h.message.includes("position")){const x=h.message.match(/position (\d+)/);if(x){const v=parseInt(x[1]);console.log(`Error en posicin especfica: ${v}`);const y=e.substring(Math.max(0,v-30),Math.min(e.length,v+30));if(console.log(`Contexto del error: "${y}"`),v===392||v>380&&v<400){console.log("Detectado el error tpico en posicin ~392! Aplicando correccin especfica..."),f(v);try{const w=e.lastIndexOf('"',v),j=e.indexOf('"',v);if(w!==-1&&j!==-1){const O=e.substring(0,w+1),B=e.substring(j);e=O+"Contenido reemplazado debido a caracteres de control"+B,console.log("Aplicada correccin especfica para error en posicin 392");try{return JSON.parse(e),console.log("Correccin especfica exitosa"),e}catch{console.log("La correccin especfica fall, continuando...")}}}catch(w){console.log("Error durante correccin especfica:",w)}}if(y.includes('"textoBase"')||y.includes('"explicacion"')){const w=e.lastIndexOf('"',v)+1,j=e.indexOf('"',v);if(w>=0&&j>=0){const O=e.substring(w,j),B=O.substring(0,Math.min(100,O.length));e=e.substring(0,w)+B+e.substring(j),console.log("Aplicada reparacin de campo con truncado de contenido");try{return JSON.parse(e),console.log("Reparacin exitosa por truncado de contenido"),e}catch{console.log("Reparacin por truncado fall, continuando con reconstruccin completa")}}}}}const m=e.match(/"id"\s*:\s*"([^"]*)"/),g=e.match(/"enunciado"\s*:\s*"([^"]*)"/);if(m&&g){const x=m[1],v=g[1],y=v.length>150?v.substring(0,150)+"...":v;console.log(`Reconstruyendo con id="${x}" y enunciado="${y.substring(0,30)}..."`);const w=`[{
          "id": "${x}",
          "enunciado": "${y}",
          "alternativas": [
            {"id": "A", "texto": "Alternativa A (reconstruida)", "esCorrecta": true, "explicacion": "Alternativa reconstruida automticamente debido a problemas en el formato JSON."},
            {"id": "B", "texto": "Alternativa B", "esCorrecta": false},
            {"id": "C", "texto": "Alternativa C", "esCorrecta": false},
            {"id": "D", "texto": "Alternativa D", "esCorrecta": false}
          ],
          "estandarAprendizaje": "Contenido reconstruido debido a problemas en el formato JSON"
        }]`;try{JSON.parse(w),console.log("Generada versin de emergencia del JSON"),e=w}catch{console.log("Error al parsear JSON de emergencia, creando versin bsica"),e=`[{
            "id": "p1",
            "enunciado": "No fue posible procesar la respuesta. Por favor, intente nuevamente.",
            "alternativas": [
              {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Se recomienda volver a intentar la generacin."},
              {"id": "B", "texto": "Opcin B", "esCorrecta": false},
              {"id": "C", "texto": "Opcin C", "esCorrecta": false},
              {"id": "D", "texto": "Opcin D", "esCorrecta": false}
            ],
            "habilidad": "Diagnstico",
            "estandarAprendizaje": "Error en generacin"
          }]`}}else console.log("No se encontraron datos mnimos para reconstruccin, usando JSON de fallback mnimo"),e=`[{
          "id": "p1",
          "enunciado": "No fue posible procesar la respuesta de la IA. Por favor, intente nuevamente.",
          "alternativas": [
            {"id": "A", "texto": "Volver a intentar", "esCorrecta": true, "explicacion": "El sistema detect un formato incorrecto en la respuesta de la IA."},
            {"id": "B", "texto": "Modificar parmetros", "esCorrecta": false},
            {"id": "C", "texto": "Usar menos preguntas", "esCorrecta": false},
            {"id": "D", "texto": "Contactar soporte", "esCorrecta": false}
          ],
          "habilidad": "Diagnstico",
          "estandarAprendizaje": "Error en formato de respuesta"
        }]`}catch(m){console.log("Error durante la reconstruccin manual:",m),e=`[{
        "id": "p1",
        "enunciado": "Error crtico en el procesamiento de la respuesta.",
        "alternativas": [
          {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Error tcnico en el procesamiento de la respuesta."},
          {"id": "B", "texto": "Opcin B", "esCorrecta": false},
          {"id": "C", "texto": "Opcin C", "esCorrecta": false},
          {"id": "D", "texto": "Opcin D", "esCorrecta": false}
        ]
      }]`}}if(t!==e){console.log("Se realizaron modificaciones al JSON original");try{JSON.parse(e)}catch(h){console.error("JSON final sigue siendo invlido:",h),console.log("JSON limpiado (primeros 100 caracteres):",e.substring(0,100))}}return e}function PJe(e,t,r){if(!e||typeof e!="string")throw console.error("Respuesta de IA invlida:",e),new Error("No se recibi una respuesta vlida de la IA");console.log("Procesando respuesta de la IA...");try{console.log(`Respuesta recibida: ${e.length} caracteres. Primeros 100:`,e.substring(0,100).replace(/\n/g,"\\n"));const a=DJe(e);if(!a)return console.error("No se pudo extraer JSON de la respuesta despus de mltiples intentos"),Qy(1,"La IA gener una respuesta en un formato que no se pudo procesar. Por favor, intente nuevamente.");console.log("JSON extrado correctamente, intentando parsear...");let n;try{n=JSON.parse(a),console.log("JSON parseado correctamente:",typeof n,Array.isArray(n)?n.length:"no es array")}catch(l){console.error("Error al parsear el JSON final:",l,"JSON parcial:",a.substring(0,200)),console.log("Intentando reparacin de emergencia del JSON...");try{const c=a.match(/\[\s*\{.*?\}\s*(?:\]|$)/s);if(c){const u=c[0].endsWith("]")?c[0]:c[0]+"]";n=JSON.parse(u),console.log("Reparacin parcial exitosa")}else throw new Error("No se pudo reparar el JSON")}catch{return console.log("Creando objeto de respaldo despus de error de parseo final"),Qy(1,"La IA gener una respuesta en formato incorrecto. Por favor, intente nuevamente con diferentes parmetros.")}}if(!Array.isArray(n))if(console.log("La respuesta no es un array, encapsulndola"),typeof n=="object"&&n!==null)n=[n];else return console.error("La respuesta no es un objeto que podamos encapsular:",typeof n),Qy(1,"La respuesta recibida no tiene el formato esperado. Por favor, intente nuevamente.");if(n=n.filter(l=>l&&typeof l=="object"),n.length===0)return console.error("No se encontraron preguntas vlidas despus de filtrar"),Qy(1,"No se pudieron extraer preguntas vlidas de la respuesta. Por favor, intente nuevamente.");console.log(`Se encontraron ${n.length} preguntas para procesar`),n.length<t&&(console.warn(` Solo se generaron ${n.length} preguntas de ${t} solicitadas. Intentando re-generacin automtica.`),n.length===1&&t>1&&r&&r.asignatura&&console.log("Detectado problema de generacin parcial. Intentando recuperar ms preguntas..."));let s;r!=null&&r.textoProporcionado?(s=r.textoProporcionado,console.log("Usando texto proporcionado por el usuario como textoBase")):n.length>0&&n[0].textoBase?(s=n[0].textoBase,console.log("Se encontr textoBase generado por la IA para preguntas de Lectura")):r!=null&&r.textoBaseLectura&&(s=r.textoBaseLectura,console.log("Usando textoBaseLectura de las opciones"));const o=n.slice(0,t).map((l,c)=>{try{if(console.log(`Procesando pregunta ${c+1}...`),!l||typeof l!="object")throw new Error(`La pregunta ${c+1} no es un objeto vlido`);if(!l.enunciado&&!l.pregunta&&!l.texto){console.warn(`La pregunta ${c+1} no tiene enunciado, buscando alternativas...`);const g=Object.entries(l).find(([x,v])=>typeof v=="string"&&v.length>20&&["contenido","stem","question","statement"].includes(x.toLowerCase()));if(g)l.enunciado=g[1],console.log(`Usando '${g[0]}' como enunciado`);else throw new Error(`No se encontr enunciado para la pregunta ${c+1}`)}let u=Array.isArray(l.alternativas)?l.alternativas:[];u.length===0&&(l.A||l.a||l.opciones||l.options)&&(console.log("Detectado formato alternativo de alternativas"),l.opciones&&Array.isArray(l.opciones)?u=l.opciones:l.options&&Array.isArray(l.options)?u=l.options:u=["A","B","C","D"].map(g=>{const x=l[g],v=l[g.toLowerCase()],y=x!==void 0?x:v;if(y){if(typeof y=="string")return{id:g,texto:y,esCorrecta:l.respuesta===g||l.correcta===g};if(typeof y=="object")return{id:g,...y}}return{id:g,texto:`Alternativa ${g}`,esCorrecta:!1}})),u.length===0&&(console.log("No se encontraron alternativas, creando alternativas por defecto"),u=[{id:"A",texto:"Opcin A (generada automticamente)",esCorrecta:!0},{id:"B",texto:"Opcin B (generada automticamente)",esCorrecta:!1},{id:"C",texto:"Opcin C (generada automticamente)",esCorrecta:!1},{id:"D",texto:"Opcin D (generada automticamente)",esCorrecta:!1}]);const d=u.map((g,x)=>{if(!g)return console.warn(`Alternativa ${x} es nula o indefinida, creando alternativa por defecto`),{id:String.fromCharCode(65+x),texto:`Alternativa ${String.fromCharCode(65+x)} (generada por defecto)`,esCorrecta:!1};if(typeof g=="string")return{id:String.fromCharCode(65+x),texto:g,esCorrecta:l.respuesta===String.fromCharCode(65+x)||l.correcta===String.fromCharCode(65+x)||l.respuesta===x||l.respuesta===(x+1).toString()};const v=(g==null?void 0:g.texto)||(g==null?void 0:g.text)||(g==null?void 0:g.contenido)||(g==null?void 0:g.content)||`Alternativa ${String.fromCharCode(65+x)}`;let y=(g==null?void 0:g.id)||String.fromCharCode(65+x);typeof y=="number"&&(y=String.fromCharCode(64+y));let w=!1;((g==null?void 0:g.esCorrecta)===!0||(g==null?void 0:g.isCorrect)===!0||(g==null?void 0:g.correct)===!0)&&(w=!0);const j=l.respuesta||l.correcta||l.respuestaCorrecta||l.correct;return j&&(j===y||j===x||j===x+1||j===(x+1).toString())&&(w=!0),{id:y,texto:v,esCorrecta:w,explicacion:(g==null?void 0:g.explicacion)||(g==null?void 0:g.explanation)||""}}).filter(g=>g&&g.texto);for(d.length===0&&(console.warn("No hay alternativas vlidas despus de filtrar, creando por defecto"),d.push({id:"A",texto:"Alternativa A (por defecto)",esCorrecta:!0},{id:"B",texto:"Alternativa B (por defecto)",esCorrecta:!1},{id:"C",texto:"Alternativa C (por defecto)",esCorrecta:!1},{id:"D",texto:"Alternativa D (por defecto)",esCorrecta:!1}));d.length<4;){const g=String.fromCharCode(65+d.length);console.log(`Agregando alternativa ${g} faltante`),d.push({id:g,texto:`Alternativa ${g} (agregada automticamente)`,esCorrecta:!1})}d.length>4&&(console.log(`Demasiadas alternativas (${d.length}), conservando solo 4`),d.splice(4)),d.some(g=>g.esCorrecta)||(console.log("No se encontr alternativa marcada como correcta, marcando la primera"),d[0].esCorrecta=!0);const f=d.find(g=>g.esCorrecta),h=(f==null?void 0:f.explicacion)||l.explicacion||l.explanation||"";return h&&f&&!f.explicacion&&(f.explicacion=h),f&&!f.explicacion&&(f.explicacion=`La respuesta correcta es la alternativa ${f.id}`),{id:l.id||`p${c+1}`,enunciado:l.enunciado||l.pregunta||l.texto||`Pregunta ${c+1}`,alternativas:d,estandarAprendizaje:l.estandarAprendizaje||l.estandar||l.standard||"",habilidad:l.habilidad||l.eje||l.skill||l.axis||"",textoBase:c===0?s:void 0,createdAt:Ga(),dificultad:l.dificultad||l.difficulty||"media"}}catch(u){return console.error(`Error procesando pregunta ${c+1}:`,u),RJe(c+1)}});return console.log(`Procesamiento completado: ${o.length} preguntas procesadas`),o}catch(a){return console.error("Error general en procesarRespuestaIA:",a),Qy(t,"Ocurri un error al procesar la respuesta de la IA. Por favor, intente nuevamente.")}}function RJe(e){return{id:`p${e}`,enunciado:`Pregunta ${e} (no se pudo generar correctamente)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generacin con el modelo Pro."},{id:"B",texto:"Modificar parmetros",esCorrecta:!1},{id:"C",texto:"Reducir complejidad",esCorrecta:!1},{id:"D",texto:"Contactar soporte",esCorrecta:!1}],habilidad:"No disponible",estandarAprendizaje:"No disponible",createdAt:Ga(),dificultad:"media"}}function Qy(e,t){const r=[];for(let a=0;a<e;a++)r.push({id:`p${a+1}`,enunciado:a===0?t:`Pregunta ${a+1} (no disponible)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generacin."},{id:"B",texto:"Modificar parmetros de generacin",esCorrecta:!1},{id:"C",texto:"Usar menos cantidad de preguntas",esCorrecta:!1},{id:"D",texto:"Revisar el contexto proporcionado",esCorrecta:!1}],habilidad:"Diagnstico",estandarAprendizaje:"Error en generacin",createdAt:Ga(),dificultad:"media"});return r}async function LJe(e){try{const t=Am(),r=Vc(t,"generarPreguntasSimce");console.log("Llamando a Cloud Function para generar preguntas SIMCE...");const a=await r({options:e}),{preguntas:n,textoBase:s}=a.data;if(!n||!Array.isArray(n)||n.length===0)throw new Error("La respuesta no contiene preguntas vlidas");return console.log(`Se generaron ${n.length} preguntas correctamente mediante Cloud Function`),s&&n.length>0&&(n[0].textoBase=s),n}catch(t){throw console.error("Error al generar preguntas SIMCE mediante Cloud Function:",t),t}}const WM=({content:e,context:t="unknown"})=>{if(typeof e=="string")return/<[a-z][\s\S]*>/i.test(e)?i.jsx("span",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e}}):i.jsx("span",{className:"whitespace-pre-wrap",children:e});if(ct.isValidElement(e))return e;try{return i.jsx("span",{children:JSON.stringify(e)})}catch{return i.jsx("span",{children:"[Sin contenido disponible]"})}},zc=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},MJe=e=>{for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null},UJe=(e,t)=>t.trim()?e.map((r,a)=>a===0?{...r,textoBase:t.trim()}:r):e,QJe=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState(!0),[s,o]=N.useState("lista"),[l,c]=N.useState(null),[u,d]=N.useState(""),[f,h]=N.useState("todas"),[m,g]=N.useState(!1),[x,v]=N.useState({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),[y,w]=N.useState(!1),[j,O]=N.useState(null),[B,T]=N.useState([]),[C,_]=N.useState([]),[S,L]=N.useState(""),[P,k]=N.useState(!1),[M,U]=N.useState(null),[z,Q]=N.useState(null),[q,V]=N.useState([]);N.useEffect(()=>{(async()=>{try{n(!0);const Ce=await KM(e.id||"");r(Ce);const me=await P1();V(me);const ye=new Set;e.cursos&&e.cursos.length>0?e.cursos.forEach(fe=>ye.add(zc(fe))):Nn.forEach(fe=>ye.add(zc(fe))),me.filter(fe=>fe.profile==="ESTUDIANTE"&&fe.curso).forEach(fe=>{fe.curso&&(fe.curso=zc(fe.curso),ye.add(fe.curso))});const oe=Array.from(ye).sort().map(fe=>({id:fe,nombre:Y(fe)}));T(oe)}catch(Ce){console.error("Error al cargar datos iniciales:",Ce),O("No se pudieron cargar los datos necesarios")}finally{n(!1)}})()},[e]);const Y=de=>{const Ce=de.match(/^(\d+)?([A-E])$/i);if(Ce){const me=Ce[1],ye=Ce[2].toUpperCase();return`${me} Medio ${ye}`}return de};N.useEffect(()=>{_(S?B.filter(de=>de.nombre.toLowerCase().includes(S.toLowerCase())):[])},[S,B]);const K=()=>t.filter(de=>{const Ce=de.titulo.toLowerCase().includes(u.toLowerCase()),me=f==="todas"||de.asignatura===f;return Ce&&me}),J=()=>{g(!0),c(null),v({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),U(null),Q(null),ne(de=>({...de,textoProporcionado:""})),o("detalle")},R=de=>{g(!0),c(de),v({...de}),o("detalle")},F=async de=>{if(window.confirm(`Ests seguro de eliminar el set "${de.titulo}"? Esta accin no se puede deshacer.`))try{await uue(de.id),r(Ce=>Ce.filter(me=>me.id!==de.id))}catch(Ce){console.error("Error al eliminar set:",Ce),O("No se pudo eliminar el set de preguntas")}},W=async()=>{try{if(!x.titulo){O("El ttulo de la evaluacin es obligatorio");return}if(!x.preguntas||x.preguntas.length===0){O("Debes agregar al menos una pregunta");return}const de=(x.cursosAsignados||[]).map(zc),Ce=de.length>0;n(!0);let me=[];Ce&&(me=q.filter(Ve=>Ve.profile==="ESTUDIANTE"&&Ve.curso&&de.includes(zc(Ve.curso))).map(Ve=>Ve.id));const ye=new Date().toISOString(),oe=e.id||"",fe=e.nombreCompleto||e.displayName||e.email||"Docente",be={...x,cursosAsignados:de,estudiantesAsignados:me,creadorId:l&&l.creadorId||oe,creadorNombre:l&&l.creadorNombre||fe,fechaCreacion:l&&l.fechaCreacion||ye},Pe=(be.preguntas||[]).map(Ve=>{var dr;const Bt=((dr=Ve.alternativas.find(er=>er.esCorrecta))==null?void 0:dr.id)||Ve.respuestaCorrecta;return{...Ve,respuestaCorrecta:Bt}});be.preguntas=Pe;let $e="";const{collection:Ke,addDoc:nt,updateDoc:He,doc:it}=await ei(async()=>{const{collection:Ve,addDoc:Bt,updateDoc:dr,doc:er}=await Promise.resolve().then(()=>Nb);return{collection:Ve,addDoc:Bt,updateDoc:dr,doc:er}},void 0),{db:xt}=await ei(async()=>{const{db:Ve}=await Promise.resolve().then(()=>QR);return{db:Ve}},void 0),Et="simce_evaluaciones";console.log("[DEBUG] Guardando evaluacin:",be);try{if(l&&l.id){const Ve=it(xt,Et,l.id),{getDoc:Bt,deleteDoc:dr}=await ei(async()=>{const{getDoc:Er,deleteDoc:$r}=await Promise.resolve().then(()=>Nb);return{getDoc:Er,deleteDoc:$r}},void 0),er=await Bt(Ve);if(console.log("[DEBUG] Documento a editar existe en simce_evaluaciones:",er.exists()),er.exists())await He(Ve,be),$e=l.id,console.log("[DEBUG] Evaluacin actualizada en simce_evaluaciones:",$e);else{$e=(await nt(Ke(xt,Et),be)).id,console.log("[DEBUG] Evaluacin migrada a simce_evaluaciones:",$e);const $r=it(xt,"simce_sets",l.id),br=await Bt($r);console.log("[DEBUG] Documento antiguo existe en simce_sets:",br.exists()),br.exists()&&(await dr($r),console.log("[DEBUG] Documento antiguo eliminado de simce_sets:",l.id))}}else $e=(await nt(Ke(xt,Et),be)).id,console.log("[DEBUG] Evaluacin nueva creada en simce_evaluaciones:",$e)}catch(Ve){throw console.error("[ERROR] Guardando evaluacin:",Ve),Ve}const gt={id:$e,...be};r(Ve=>{const Bt=Ve.findIndex(dr=>dr.id===$e);if(Bt>=0){const dr=[...Ve];return dr[Bt]=gt,dr}return[gt,...Ve]}),ie({tipo:"success",mensaje:Ce?`Evaluacin guardada y asignada a ${de.length} curso${de.length!==1?"s":""} correctamente`:"Evaluacin guardada correctamente"}),setTimeout(()=>{ie({tipo:"",mensaje:""})},3e3),g(!1),o("lista"),O(null)}catch(de){console.error("Error al guardar evaluacin:",de),O("No se pudo guardar la evaluacin"),ie({tipo:"error",mensaje:"Ocurri un error al guardar la evaluacin"}),setTimeout(()=>{ie({tipo:"",mensaje:""})},3e3)}finally{n(!1)}},[X,ne]=N.useState({cantidadPreguntas:"4",dificultad:"media",textoProporcionado:"",habilidadesLectura:{"Localizar informacin":!0,"Relacionar informacin":!0,Interpretar:!0,"Reflexionar y evaluar":!0},ejesMatematica:{Nmeros:!0,"lgebra y Funciones":!0,Geometra:!0,"Probabilidad y Estadstica":!0}}),[le,ie]=N.useState({tipo:"",mensaje:""}),ae=async()=>{var de,Ce,me,ye,oe;try{if(!x.asignatura){O("Seleccione una asignatura para generar preguntas");return}w(!0),O(null),ie({tipo:"",mensaje:""});let fe,be;x.asignatura==="Competencia Lectora"?(fe=Object.entries(X.habilidadesLectura).filter(([He,it])=>it).map(([He])=>He),fe.length===0&&(fe=["Localizar informacin","Relacionar informacin","Interpretar","Reflexionar y evaluar"])):x.asignatura==="Pensamiento Lgico"&&(be=Object.entries(X.ejesMatematica).filter(([He,it])=>it).map(([He])=>He),be.length===0&&(be=["Nmeros","lgebra y Funciones","Geometra","Probabilidad y Estadstica"])),ie({tipo:"warning",mensaje:`Generando ${X.cantidadPreguntas} preguntas de ${x.asignatura}. Este proceso puede tardar unos segundos...`});const $e={asignatura:x.asignatura.toLowerCase().replace(//g,"a").replace(//g,"e").replace(//g,"i").replace(//g,"o").replace(//g,"u").replace(//g,"n").replace(/\s+/g," ").trim(),cantidad:parseInt(X.cantidadPreguntas),opcionesPorPregunta:4,habilidadesLectura:fe,ejesMatematica:be,dificultad:X.dificultad,contextoCurricular:x.descripcion,textoProporcionado:((de=X.textoProporcionado)==null?void 0:de.trim())||void 0};let Ke,nt=[];try{if(console.log("Intentando generar preguntas usando Cloud Function..."),nt.push("Cloud Function"),Ke=await LJe($e),!Array.isArray(Ke)||Ke.length===0)throw new Error("La respuesta de Cloud Function no es vlida");Ke.forEach((He,it)=>{if(!He.enunciado||!Array.isArray(He.alternativas)||He.alternativas.length!==4)throw new Error(`Pregunta ${it+1} tiene estructura invlida`)})}catch(He){console.error("Error con Cloud Function:",He);try{if(console.log("Usando generacin local como respaldo..."),nt.push("Local"),ie({tipo:"warning",mensaje:"Usando generacin local como respaldo. Procesando..."}),Ke=await OJe($e),!Array.isArray(Ke)||Ke.length===0)throw new Error("La generacin local no produjo resultados vlidos");Ke.forEach((it,xt)=>{if(!it.enunciado||!Array.isArray(it.alternativas)||it.alternativas.length!==4)throw new Error(`Pregunta ${xt+1} generada localmente tiene estructura invlida`)})}catch(it){console.error("Error con generacin local:",it);const xt=[];throw(Ce=He.message)!=null&&Ce.includes("JSON")&&xt.push("Problema de formato en servidor remoto"),(me=it.message)!=null&&me.includes("JSON")&&xt.push("Problema de formato en generacin local"),new Error(`No se pudieron generar preguntas con ningn mtodo (intentos: ${nt.join(", ")}). Errores: ${xt.join(", ")||"Problemas de conexin o formato"}. Por favor, intente nuevamente o genere preguntas manualmente.`)}}if(!Ke||Ke.length===0)throw new Error("No se generaron preguntas vlidas despus de todos los intentos");if(x.asignatura==="Competencia Lectora"){let He=(ye=X.textoProporcionado)==null?void 0:ye.trim();He||(He=(oe=Ke[0].textoBase)==null?void 0:oe.trim()),He||(He="Texto de comprensin generado automticamente."),Ke[0].textoBase=He,console.log("[DEBUG] Texto base final asignado a la primera pregunta:",He.substring(0,50)+"...")}v(He=>({...He,preguntas:[...He.preguntas||[],...Ke]})),ie({tipo:"success",mensaje:`Se generaron ${Ke.length} preguntas correctamente usando ${nt[nt.length-1]}!`}),setTimeout(()=>{ie({tipo:"",mensaje:""})},5e3)}catch(fe){console.error("Error general al generar preguntas:",fe);let be="No se pudieron generar las preguntas.";fe instanceof Error&&(fe.message.includes("JSON")?be="Hubo un problema con el formato de las respuestas del servidor. Esto puede deberse a sobrecarga del sistema de IA. Intente nuevamente en unos minutos.":fe.message.includes("red")||fe.message.includes("network")?be="Problema de conexin. Verifique su conexin a internet e intente nuevamente.":fe.message.length>10&&(be=fe.message)),O(be),ie({tipo:"error",mensaje:be+" Puede agregar preguntas manualmente como alternativa."}),setTimeout(()=>{ie({tipo:"",mensaje:""})},8e3)}finally{w(!1)}},Ae=de=>{Q({...de})},ke=()=>{var ye,oe;if(!z)return;if(!z.enunciado){O("El enunciado de la pregunta es obligatorio");return}if(!z.alternativas.find(fe=>fe.esCorrecta)){O("Debe marcar una alternativa como correcta");return}if(z.alternativas.filter(fe=>!fe.texto).length>0){O("Todas las alternativas deben tener texto");return}const me=z.textoBase&&x.asignatura==="Competencia Lectora";if(z.id.startsWith("p"))if(me){console.log("Nueva pregunta con texto base detectado:",z.textoBase);const fe=[...x.preguntas||[]];v(be=>({...be,preguntas:[z,...fe]}))}else v(fe=>({...fe,preguntas:[...fe.preguntas||[],z]}));else if(me){console.log("Actualizando pregunta con texto base:",z.textoBase);const fe=((ye=x.preguntas)==null?void 0:ye.map(be=>be.id===z.id?z:be))||[];if(z===((oe=x.preguntas)==null?void 0:oe[0])){const be=z.textoBase||"",Pe=UJe(fe,be);v($e=>({...$e,preguntas:Pe}))}else v(be=>({...be,preguntas:fe}))}else v(fe=>{var be;return{...fe,preguntas:((be=fe.preguntas)==null?void 0:be.map(Pe=>Pe.id===z.id?z:Pe))||[]}});Q(null),O(null)},re=de=>{v(Ce=>{var me;return{...Ce,preguntas:((me=Ce.preguntas)==null?void 0:me.filter(ye=>ye.id!==de))||[]}})},Re=de=>{const Ce=zc(de);v(me=>{const ye=(me.cursosAsignados||[]).map(zc);return ye.includes(Ce)?{...me,cursosAsignados:ye.filter(oe=>oe!==Ce)}:{...me,cursosAsignados:[...ye,Ce]}})},Le=()=>{const de=K();return a?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(gA,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(h1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Buscar evaluaciones...",className:"pl-9 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:u,onChange:Ce=>d(Ce.target.value)})]}),i.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:Ce=>h(Ce.target.value),children:[i.jsx("option",{value:"todas",children:"Todas las asignaturas"}),i.jsx("option",{value:"Competencia Lectora",children:"Competencia Lectora"}),i.jsx("option",{value:"Pensamiento Lgico",children:"Pensamiento Lgico"})]})]}),i.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md",children:[i.jsx(So,{className:"w-4 h-4"}),"Nueva evaluacin"]})]}),i.jsx("div",{className:"space-y-4",children:de.length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(RR,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u||f!=="todas"?"No se encontraron evaluaciones con los filtros seleccionados":"No hay evaluaciones creadas an. Crea tu primera evaluacin SIMCE."}),(u||f!=="todas")&&i.jsx("button",{onClick:()=>{d(""),h("todas")},className:"mt-4 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 hover:dark:text-indigo-300 text-sm font-medium",children:"Limpiar filtros"})]}):de.map(Ce=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-3 ${Ce.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:Ce.asignatura==="Competencia Lectora"?i.jsx(wi,{className:"w-5 h-5"}):i.jsx(DR,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-800 dark:text-slate-200",children:Ce.titulo}),Ce.descripcion&&i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:Ce.descripcion}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:[Ce.preguntas.length," preguntas"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:Ce.asignatura}),Ce.cursosAsignados&&Ce.cursosAsignados.length>0&&i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs flex items-center gap-1",children:[i.jsx(Fi,{className:"w-3 h-3"}),Ce.cursosAsignados.length," ",Ce.cursosAsignados.length===1?"curso":"cursos"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:Ce.fechaCreacion?new Date(Ce.fechaCreacion).toLocaleDateString():"-"})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>c(Ce),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Ver detalles",children:i.jsx(Q2,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>R(Ce),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar evaluacin",children:i.jsx(xh,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>F(Ce),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded-full hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar evaluacin",children:i.jsx(sn,{className:"w-4 h-4"})})]})]}),(l==null?void 0:l.id)===Ce.id&&i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 p-4",children:[Ce.asignatura==="Competencia Lectora"&&(()=>{const me=MJe(Ce.preguntas);return me?i.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(wi,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:" Texto de Comprensin Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:i.jsx(WM,{content:me,context:"simce-texto-base"})})]}):null})(),i.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[i.jsx("span",{className:"mr-2",children:""}),"Preguntas (",Ce.preguntas.length,")"]}),i.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:Ce.preguntas.map((me,ye)=>{var oe,fe;return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("p",{className:"font-medium",children:[i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2 rounded-md text-sm mr-2 font-semibold",children:ye+1}),me.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-2",children:me.alternativas.map(be=>i.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${be.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[be.id,")"]}),i.jsx("span",{className:"flex-1",children:be.texto}),be.esCorrecta&&i.jsx(nn,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"})]},be.id))}),i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:" Estndar:"})," ",me.estandarAprendizaje]}),me.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:" Habilidad:"})," ",me.habilidad]}),((oe=me.alternativas.find(be=>be.esCorrecta))==null?void 0:oe.explicacion)&&i.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[i.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:" Explicacin:"}),i.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(fe=me.alternativas.find(be=>be.esCorrecta))==null?void 0:fe.explicacion})]})]})]},me.id)})}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:()=>c(null),className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 px-3 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:" Cerrar vista detallada"})})]})]},Ce.id))})]})},Te=()=>{var de,Ce,me,ye;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:l?"Editar evaluacin":"Nueva evaluacin"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{g(!1),o("lista"),O(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:W,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",disabled:a,children:[i.jsx(Fl,{className:"w-4 h-4"}),(x.cursosAsignados||[]).length>0?"Guardar y asignar":"Guardar evaluacin"]})]})]}),j&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-3 rounded-md flex items-center gap-2",children:[i.jsx(Ew,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:j})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la evaluacin *"}),i.jsx("input",{type:"text",value:x.titulo,onChange:oe=>v({...x,titulo:oe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Evaluacin SIMCE 4 Bsico - Competencia Lectora"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin (opcional)"}),i.jsx("textarea",{value:x.descripcion,onChange:oe=>v({...x,descripcion:oe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Breve descripcin de la evaluacin",rows:3})]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsxs("label",{className:"flex items-center mb-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[i.jsx(Fi,{className:"w-4 h-4 mr-1.5"}),"Asignar a cursos",(x.cursosAsignados||[]).length>0&&i.jsxs("span",{className:"ml-2 text-xs bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 py-0.5 px-1.5 rounded-full",children:[(x.cursosAsignados||[]).length," seleccionado",(x.cursosAsignados||[]).length!==1?"s":""]})]}),i.jsx("p",{className:"mb-2 text-xs text-slate-500 dark:text-slate-400",children:"Seleccione los cursos a los que estar asignada esta evaluacin. Estar disponible para los estudiantes en cuanto guarde."}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:S,onChange:oe=>{L(oe.target.value),k(!0)},onFocus:()=>k(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Buscar curso..."}),P&&(C.length>0||S)&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-md max-h-60 overflow-y-auto",children:C.length===0&&S?i.jsx("div",{className:"p-3 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron cursos"}):C.map(oe=>i.jsxs("div",{className:"px-3 py-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center",onClick:()=>{Re(oe.id),L("")},children:[i.jsx("div",{className:`w-4 h-4 border rounded mr-2 flex items-center justify-center ${(x.cursosAsignados||[]).includes(oe.id)?"bg-indigo-600 border-indigo-600":"border-slate-400 dark:border-slate-500"}`,children:(x.cursosAsignados||[]).includes(oe.id)&&i.jsx(Zte,{className:"w-3 h-3 text-white"})}),i.jsx("span",{children:oe.nombre})]},oe.id))})]}),(x.cursosAsignados||[]).length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(x.cursosAsignados||[]).map(oe=>{const fe=B.find(be=>be.id===oe);return i.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-md text-sm",children:[i.jsx("span",{children:(fe==null?void 0:fe.nombre)||oe}),i.jsx("button",{onClick:()=>Re(oe),className:"ml-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 hover:dark:text-slate-200",children:i.jsx(Xd,{className:"w-3 h-3"})})]},oe)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Estudiantes asignados"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md p-3 max-h-40 overflow-y-auto text-sm",children:(()=>{const oe=q.filter(fe=>{if(fe.profile!=="ESTUDIANTE"||!fe.curso)return!1;const be=zc(fe.curso);return(x.cursosAsignados||[]).includes(be)});return oe.length===0?i.jsx("span",{className:"text-slate-500",children:"No hay estudiantes asignados a los cursos seleccionados."}):i.jsx("ul",{className:"list-disc pl-4",children:oe.map(fe=>i.jsxs("li",{className:"mb-1",children:[fe.nombreCompleto||fe.nombre||fe.id," ",i.jsxs("span",{className:"text-xs text-slate-400",children:["(",Y(zc(fe.curso)),")"]})]},fe.id))})})()})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Configuracin de presentacin"})}),i.jsx("div",{className:"flex space-x-6",children:i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x.barajarAlternativas,onChange:oe=>v({...x,barajarAlternativas:oe.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Barajar alternativas"})]})})]})]}),i.jsxs("div",{className:"mb-5 bg-slate-50 dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-md font-semibold mb-3",children:"Opciones de generacin con IA"}),le.mensaje&&i.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center gap-2 ${le.tipo==="error"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300":le.tipo==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-300":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300"}`,children:[le.tipo==="error"&&i.jsx(Ew,{className:"w-5 h-5 flex-shrink-0"}),le.tipo==="warning"&&i.jsx(gA,{className:"w-5 h-5 flex-shrink-0 animate-spin"}),le.tipo==="success"&&i.jsx(nn,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:le.mensaje})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto base (opcional)"}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:"Si proporciona un texto, las preguntas se generarn basadas en l. Si lo deja vaco, la IA generar automticamente un texto adecuado."}),i.jsx("textarea",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500 resize-y",value:X.textoProporcionado||"",onChange:oe=>ne({...X,textoProporcionado:oe.target.value}),placeholder:x.asignatura==="Competencia Lectora"?"Ingrese aqu un texto para generar preguntas de comprensin lectora...":"Ingrese aqu un texto para crear problemas de pensamiento lgico relacionados...",rows:6})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cantidad de preguntas"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:X.cantidadPreguntas,onChange:oe=>ne({...X,cantidadPreguntas:oe.target.value}),children:[i.jsx("option",{value:"2",children:"2 preguntas"}),i.jsx("option",{value:"4",children:"4 preguntas"}),i.jsx("option",{value:"6",children:"6 preguntas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dificultad"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:X.dificultad,onChange:oe=>ne({...X,dificultad:oe.target.value}),children:[i.jsx("option",{value:"baja",children:"Baja"}),i.jsx("option",{value:"media",children:"Media"}),i.jsx("option",{value:"alta",children:"Alta"})]})]})]}),x.asignatura==="Competencia Lectora"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades de Competencia Lectora"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(X.habilidadesLectura).map(([oe,fe])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:fe,onChange:()=>{ne({...X,habilidadesLectura:{...X.habilidadesLectura,[oe]:!fe}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:oe})]},oe))})]}),x.asignatura==="Pensamiento Lgico"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ejes de Pensamiento Lgico"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(X.ejesMatematica).map(([oe,fe])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:fe,onChange:()=>{ne({...X,ejesMatematica:{...X.ejesMatematica,[oe]:!fe}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:oe})]},oe))})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:ae,disabled:y,className:`px-4 py-2 text-white rounded-md text-sm flex items-center gap-2 ${y?"bg-amber-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:y?i.jsxs(i.Fragment,{children:[i.jsx(gA,{className:"w-4 h-4 animate-spin"}),"Generando preguntas..."]}):i.jsxs(i.Fragment,{children:[i.jsx(So,{className:"w-4 h-4"}),"Generar preguntas automticamente"]})})}),z?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[x.asignatura==="Competencia Lectora"&&((de=x.preguntas[0])==null?void 0:de.id)===z.id&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Texto base para preguntas de comprensin"}),i.jsx("textarea",{value:z.textoBase||"",onChange:oe=>Q({...z,textoBase:oe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Texto de lectura para las preguntas...",rows:5})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Enunciado de la pregunta *"}),i.jsx("textarea",{value:z.enunciado,onChange:oe=>Q({...z,enunciado:oe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Escribe el enunciado de la pregunta...",rows:3})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Estndar de aprendizaje *"}),i.jsx("select",{value:z.estandarAprendizaje,onChange:oe=>Q({...z,estandarAprendizaje:oe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:x.asignatura==="Lectura"?CJe.map((oe,fe)=>i.jsx("option",{value:oe,children:oe},fe)):jJe.map((oe,fe)=>i.jsx("option",{value:oe,children:oe},fe))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Habilidad (opcional)"}),i.jsx("input",{value:z.habilidad||"",onChange:oe=>Q({...z,habilidad:oe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Interpretar, Analizar, Resolver problemas..."})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block mb-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Alternativas * (marca una como correcta)"}),i.jsx("div",{className:"space-y-3",children:z.alternativas.map((oe,fe)=>i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"flex items-center mt-1 mr-2",children:[i.jsx("input",{type:"radio",checked:oe.esCorrecta,onChange:()=>{Q({...z,alternativas:z.alternativas.map(be=>({...be,esCorrecta:be.id===oe.id}))})},className:"rounded-full border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsxs("span",{className:"ml-1 font-semibold",children:[oe.id,")"]})]}),i.jsx("div",{className:"flex-1",children:i.jsx("textarea",{value:oe.texto,onChange:be=>{Q({...z,alternativas:z.alternativas.map(Pe=>Pe.id===oe.id?{...Pe,texto:be.target.value}:Pe)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:`Texto de la alternativa ${oe.id}...`,rows:2})})]},oe.id))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Explicacin para alternativa correcta (recomendado)"}),i.jsx("textarea",{value:((Ce=z.alternativas.find(oe=>oe.esCorrecta))==null?void 0:Ce.explicacion)||"",onChange:oe=>{Q({...z,alternativas:z.alternativas.map(fe=>fe.esCorrecta?{...fe,explicacion:oe.target.value}:fe)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Explica por qu esta es la respuesta correcta...",rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{Q(null),O(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:ke,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",children:[i.jsx(Fl,{className:"w-4 h-4"}),"Guardar pregunta"]})]})]}):i.jsx("div",{className:"space-y-4",children:(x.preguntas||[]).length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(ere,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay preguntas agregadas an. Puedes generar preguntas automticamente o agregarlas manualmente."})]}):i.jsxs(i.Fragment,{children:[x.asignatura==="Lectura"&&((ye=(me=x.preguntas)==null?void 0:me[0])==null?void 0:ye.textoBase)&&i.jsxs("div",{className:"p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(wi,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"Texto Base de Comprensin Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Este texto acompaar a todas las preguntas de lectura"})]})]}),i.jsx("button",{onClick:()=>{var fe;const oe=(fe=x.preguntas)==null?void 0:fe[0];oe&&Ae(oe)},className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:dark:text-blue-200 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800/50",title:"Editar texto base",children:i.jsx(xh,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800 shadow-inner",children:i.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:i.jsx("p",{className:"whitespace-pre-wrap leading-relaxed text-base",children:x.preguntas[0].textoBase})})})]}),(x.preguntas||[]).map((oe,fe)=>{var be,Pe;return i.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"font-medium",children:[i.jsxs("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2.5 rounded-md mr-2 text-sm font-semibold",children:["Pregunta ",fe+1]}),oe.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-2",children:oe.alternativas.map($e=>i.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${$e.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[$e.id,")"]}),i.jsx("span",{className:"flex-1",children:$e.texto}),$e.esCorrecta&&i.jsx(nn,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400"})]},$e.id))}),i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estndar:"})," ",oe.estandarAprendizaje]}),oe.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Habilidad:"})," ",oe.habilidad]}),((be=oe.alternativas.find($e=>$e.esCorrecta))==null?void 0:be.explicacion)&&i.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[i.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"Explicacin:"}),i.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(Pe=oe.alternativas.find($e=>$e.esCorrecta))==null?void 0:Pe.explicacion})]})]})]}),i.jsxs("div",{className:"flex gap-1 ml-3",children:[i.jsx("button",{onClick:()=>Ae(oe),className:"p-1.5 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar pregunta",children:i.jsx(xh,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>re(oe.id),className:"p-1.5 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar pregunta",children:i.jsx(sn,{className:"w-4 h-4"})})]})]})},oe.id)})]})})]})]})};return i.jsxs(i.Fragment,{children:[s==="lista"&&!m&&Le(),(s==="detalle"||m)&&Te()]})},HJe=e=>(console.log("Google Sans Code font would be added here"),e);var DW={};const zJe=({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),PW=["Seleccin mltiple","Verdadero o Falso","Trminos pareados","Desarrollo","Comprensin de lectura"],vue=Am(A1),VJe=Vc(vue,"generarRubricaConGemini"),$Je=Vc(vue,"generarDescriptorDimensionConGemini"),s6={"Seleccin mltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Trminos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de lectura":[1,2,3]},GJe=({item:e,showAnswers:t=!1,shuffledDefinitions:r=[]})=>{var o;const a=e.puntaje??1,n=l=>{const c=Array.isArray(l)?l.slice(0,4):[];for(;c.length<4;)c.push("");return c},s=l=>l.length<=1?l:[...l.slice(1),l[0]];return i.jsxs("div",{className:"p-3 border rounded-lg bg-white dark:bg-slate-800 dark:border-slate-700",children:[i.jsxs("div",{className:"mb-2 flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:e.tipo}),i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:e.pregunta||(e.tipo==="Comprensin de lectura"?"Comprensin de lectura":"")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in e&&e.habilidadBloom&&i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",e.habilidadBloom]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[a," pts"]})]})]}),e.tipo==="Seleccin mltiple"&&i.jsxs("div",{className:"ml-1 mt-2 space-y-2",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-1",children:"Marca la alternativa correcta."}),n(e.opciones).map((l,c)=>{const u=t&&c===e.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/30":""}`,children:[i.jsx("div",{className:"w-5 h-5 border rounded-full flex-shrink-0"}),i.jsxs("span",{children:[String.fromCharCode(65+c),") ",l]})]},c)})]}),e.tipo==="Verdadero o Falso"&&i.jsxs("div",{className:"ml-1 mt-2 flex items-center gap-6",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400",children:"Indica si la afirmacin es verdadera (V) o falsa (F)."}),i.jsx("div",{className:"flex-1"}),i.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!0?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"V"}),i.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!1?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"F"})]}),e.tipo==="Desarrollo"&&i.jsx("div",{className:"mt-3 border rounded-md h-24 bg-slate-50 dark:bg-slate-700/40"}),e.tipo==="Trminos pareados"&&(()=>{const l=e.pares||[],c=l.map(f=>f.concepto),u=s(l.map(f=>f.definicion)),d="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-2",children:"Une cada concepto (columna izquierda) con su definicin (columna derecha)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Columna A: Conceptos"}),i.jsx("div",{className:"space-y-1",children:c.map((f,h)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"font-semibold w-6 text-right",children:[h+1,"."]}),i.jsx("span",{children:f})]},h))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Columna B: Definiciones"}),i.jsx("div",{className:"space-y-1",children:u.map((f,h)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"font-semibold w-6 text-right",children:[d[h]||"?","."]}),i.jsx("span",{children:f})]},h))})]})]})]})})(),e.tipo==="Comprensin de lectura"&&i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/40 rounded-md whitespace-pre-wrap",children:e.texto}),i.jsx("div",{className:"space-y-3",children:(o=e.preguntas)==null?void 0:o.map((l,c)=>{var u;return i.jsxs("div",{className:"p-3 border rounded-md bg-white dark:bg-slate-800 dark:border-slate-700",children:[i.jsxs("div",{className:"mb-1 flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:["CL-",c+1]}),i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:l.tipo}),i.jsx("div",{className:"font-medium",children:l.pregunta})]}),i.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in l&&l.habilidadBloom&&i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",l.habilidadBloom]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[l.puntaje??1," pts"]})]})]}),l.tipo==="Seleccin mltiple"?i.jsx("div",{className:"ml-1 mt-1 space-y-1",children:(u=l.opciones)==null?void 0:u.map((d,f)=>{const h=t&&f===l.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${h?"bg-green-100 dark:bg-green-900/30":""}`,children:[i.jsx("div",{className:"w-4 h-4 border rounded-full flex-shrink-0"}),i.jsxs("span",{children:[String.fromCharCode(65+f),") ",d]})]},f)})}):i.jsx("div",{className:"mt-2 border rounded-md h-16 bg-slate-50 dark:bg-slate-700/40"})]},c)})})]})]})},qJe=()=>{const e=N.useMemo(()=>PW.reduce((K,J)=>(K[J]=0,K),{}),[]),t=N.useMemo(()=>({nombre:"",asignatura:(En==null?void 0:En[0])||"",nivel:(gh==null?void 0:gh[0])||"",contenido:"",tiposActividad:e,dificultad:"Intermedio",isNee:!1,selectedNee:[]}),[e]),[r,a]=N.useState(t),[n,s]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState(null),[d,f]=N.useState([]),[h,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(!1),{currentUser:w}=VM();N.useEffect(()=>{if(w){const K=PXe(f);return()=>K()}},[w]);const j=K=>{const{name:J,value:R}=K.target;a(F=>({...F,[J]:R}))},O=K=>{a(J=>{var F;const R={...J.tiposActividad};return R[K]>0?R[K]=0:R[K]=((F=s6[K])==null?void 0:F[0])||1,{...J,tiposActividad:R}})},B=(K,J)=>{a(R=>({...R,tiposActividad:{...R.tiposActividad,[K]:J}}))},T=K=>{a(J=>{const R=J.selectedNee.includes(K)?J.selectedNee.filter(F=>F!==K):[...J.selectedNee,K];return{...J,selectedNee:R}})},C=K=>{const J=String(K||"").trim().toLowerCase();if(J){if(J.includes("record"))return"Recordar";if(J.includes("comprend")||J.includes("entend"))return"Comprender";if(J.includes("aplic"))return"Aplicar";if(J.includes("analiz"))return"Analizar";if(J.includes("evalu"))return"Evaluar";if(J.includes("crea")||J.includes("sintet"))return"Crear"}},_=K=>{switch(K){case"Seleccin mltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Trminos pareados":return"Comprender";case"Comprensin de lectura":return"Comprender";default:return"Comprender"}},S=K=>{const R=(Array.isArray(K)?K.map(F=>typeof F=="string"?F:(F==null?void 0:F.texto)??""):[]).slice(0,4);for(;R.length<4;)R.push("");return R},L=K=>{if(typeof(K==null?void 0:K.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,K.respuestaCorrecta));if(Array.isArray(K==null?void 0:K.alternativas)){const F=K.alternativas.findIndex(W=>W&&(W.esCorrecta===!0||W.correcta===!0));if(F>=0&&F<4)return F}const J=String((K==null?void 0:K.correcta)||(K==null?void 0:K.respuesta)||(K==null?void 0:K.respuestaCorrecta)||"").trim().toUpperCase(),R={A:0,B:1,C:2,D:3};return J in R?R[J]:0},P=K=>{const J=S(K.opciones??K.alternativas),R=L(K),F=C(K.habilidadBloom)||_("Seleccin mltiple");return{id:K.id||crypto.randomUUID(),tipo:"Seleccin mltiple",pregunta:K.pregunta||K.enunciado||"Pregunta",puntaje:K.puntaje??1,opciones:J,respuestaCorrecta:R,habilidadBloom:F}},k=K=>{let J=!1;typeof(K==null?void 0:K.respuestaCorrecta)=="boolean"?J=K.respuestaCorrecta:typeof(K==null?void 0:K.esVerdadero)=="boolean"?J=K.esVerdadero:K!=null&&K.correcta&&(J=String(K.correcta).toUpperCase().startsWith("V"));const R=C(K.habilidadBloom)||_("Verdadero o Falso");return{id:K.id||crypto.randomUUID(),tipo:"Verdadero o Falso",pregunta:K.pregunta||K.enunciado||"Afirmacin",puntaje:K.puntaje??1,respuestaCorrecta:J,habilidadBloom:R}},M=K=>{const J=C(K.habilidadBloom)||_("Desarrollo");return{id:K.id||crypto.randomUUID(),tipo:"Desarrollo",pregunta:K.pregunta||K.enunciado||"Pregunta abierta",puntaje:K.puntaje??1,habilidadBloom:J}},U=K=>{let J=Array.isArray(K==null?void 0:K.pares)?K.pares:[];if((!J||J.length===0)&&Array.isArray(K==null?void 0:K.conceptos)&&Array.isArray(K==null?void 0:K.definiciones)){const F=Math.min(K.conceptos.length,K.definiciones.length);J=Array.from({length:F},(W,X)=>({concepto:K.conceptos[X],definicion:K.definiciones[X]}))}J=(J||[]).map(F=>({concepto:(F==null?void 0:F.concepto)??"",definicion:(F==null?void 0:F.definicion)??""}));const R=C(K.habilidadBloom)||_("Trminos pareados");return{id:K.id||crypto.randomUUID(),tipo:"Trminos pareados",pregunta:K.pregunta||K.enunciado||"Relaciona los trminos",puntaje:K.puntaje??1,pares:J,habilidadBloom:R}},z=K=>{const J=typeof(K==null?void 0:K.texto)=="string"?K.texto:Array.isArray(K==null?void 0:K.texto)?K.texto.join(`
`):(K==null?void 0:K.lectura)||"",F=(Array.isArray(K==null?void 0:K.preguntas)?K.preguntas:[]).map(X=>{const ne=C(X==null?void 0:X.habilidadBloom),le=((X==null?void 0:X.tipo)||"").toLowerCase();if(le.includes("multiple")||le.includes("seleccion")){const ie=P(X);return ie.habilidadBloom||(ie.habilidadBloom=ne||_("Seleccin mltiple")),ie}if(le.includes("desarrollo")||le.includes("abierta")){const ie=M(X);return ie.habilidadBloom||(ie.habilidadBloom=ne||_("Desarrollo")),ie}if(X!=null&&X.alternativas||X!=null&&X.opciones){const ie=P(X);return ie.habilidadBloom||(ie.habilidadBloom=ne||_("Seleccin mltiple")),ie}return null}).filter(Boolean),W=C(K.habilidadBloom)||_("Comprensin de lectura");return{id:K.id||crypto.randomUUID(),tipo:"Comprensin de lectura",pregunta:K.pregunta||K.enunciado||"Comprensin de lectura",puntaje:K.puntaje??Math.max(1,F.reduce((X,ne)=>X+(ne.puntaje??1),0)),texto:J,preguntas:F,habilidadBloom:W}},Q=async K=>{var J;if(K.preventDefault(),!w||!w.uid||!w.email||!w.id){l("Debes iniciar sesin para generar una evaluacin.");return}if(!r.nombre.trim()||!r.contenido.trim()||Object.keys(r.tiposActividad).length===0){l("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),l(null);try{m4("Evaluacin - Pruebas",w);const R={...r.tiposActividad},F={objetivo:`Evaluar el siguiente contenido: "${r.contenido}" para el nivel ${r.nivel}.`,cantidadesPorTipo:R,contextoAdicional:`
          Nombre de la prueba: ${r.nombre}
          Asignatura: ${r.asignatura}
          Nivel de Dificultad General: ${r.dificultad}. 'Fcil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicacin y anlisis simple. 'Avanzado' requiere sntesis, evaluacin y resolucin de problemas complejos.
          ${r.isNee&&r.selectedNee.length>0?`**Adaptacin CRTICA para Necesidades Educativas Especiales (NEE):** Adapta esta prueba para estudiantes con las siguientes caractersticas: ${r.selectedNee.join(", ")}. Esto implica usar un lenguaje claro, simple y directo, evitar preguntas complejas, usar textos ms cortos y distractores claros.`:""}
          Directrices Generales: El vocabulario, la complejidad y el contexto de toda la prueba deben ser apropiados para el nivel educativo 'Educacin Media' en Chile.
          Formato de Salida: Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.
        `},X=`${DW.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,ne=await((J=so.currentUser)==null?void 0:J.getIdToken());if(!ne)throw new Error("No se pudo obtener token de autenticacin.");const le=await fetch(X,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify(F)});if(!le.ok){const He=await le.text();throw new Error(`Error en funcin: ${le.status} ${He}`)}const ie=await le.json(),ae=ie.prueba||ie.data&&ie.data.prueba,Ae=He=>He.normalize("NFD").replace(/[\u0300-\u036f]/g,""),ke=He=>Ae((He||"").toLowerCase()),re=He=>{const it=ke(String(He||""));return it?it.includes("comprension")||it.includes("lectura")||it.includes("reading")?"Comprensin de lectura":it.includes("multiple")||it.includes("seleccion")||it.includes("mcq")?"Seleccin mltiple":it.includes("verdadero")||it.includes("falso")||it==="vf"||it.includes("true")||it.includes("false")?"Verdadero o Falso":it.includes("paread")||it.includes("matching")||it.includes("emparejar")?"Trminos pareados":it.includes("desarrollo")||it.includes("respuesta corta")||it.includes("abierta")?"Desarrollo":null:null},Re=He=>{const xt=(Array.isArray(He)?He.map(Et=>typeof Et=="string"?Et:(Et==null?void 0:Et.texto)??""):[]).slice(0,4);for(;xt.length<4;)xt.push("");return xt},Le=He=>{if(typeof(He==null?void 0:He.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,He.respuestaCorrecta));if(Array.isArray(He==null?void 0:He.alternativas)){const Et=He.alternativas.findIndex(gt=>gt&&(gt.esCorrecta===!0||gt.correcta===!0));if(Et>=0&&Et<4)return Et}const it=String((He==null?void 0:He.correcta)||(He==null?void 0:He.respuesta)||"").trim().toUpperCase(),xt={A:0,B:1,C:2,D:3};return it in xt?xt[it]:0},Te=He=>{const it=String(He||"").trim().toLowerCase();if(it){if(it.includes("record"))return"Recordar";if(it.includes("comprend")||it.includes("entend"))return"Comprender";if(it.includes("aplic"))return"Aplicar";if(it.includes("analiz"))return"Analizar";if(it.includes("evalu"))return"Evaluar";if(it.includes("crea")||it.includes("sintet"))return"Crear"}},de=He=>{switch(He){case"Seleccin mltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Trminos pareados":return"Comprender";case"Comprensin de lectura":return"Comprender";default:return"Comprender"}},Ce=P,me=k,ye=M,oe=U,fe=z,be=He=>{switch(re(He.tipo)||(He!=null&&He.alternativas||He!=null&&He.opciones?"Seleccin mltiple":null)){case"Seleccin mltiple":return Ce(He);case"Verdadero o Falso":return me(He);case"Desarrollo":return ye(He);case"Trminos pareados":return oe(He);case"Comprensin de lectura":return fe(He);default:return He!=null&&He.alternativas||He!=null&&He.opciones?Ce(He):He!=null&&He.pares||He!=null&&He.conceptos&&(He!=null&&He.definiciones)?oe(He):(He!=null&&He.texto||He!=null&&He.lectura)&&Array.isArray(He==null?void 0:He.preguntas)?fe(He):typeof(He==null?void 0:He.respuestaCorrecta)=="boolean"||typeof(He==null?void 0:He.esVerdadero)=="boolean"||/^(v|f)$/i.test(String((He==null?void 0:He.correcta)||""))?me(He):ye(He)}},Pe=(Array.isArray(ae==null?void 0:ae.preguntas)?ae.preguntas:[]).map((He,it)=>{const xt=be(He);return xt?{...xt,id:xt.id||crypto.randomUUID(),pregunta:xt.pregunta||`tem ${it+1}`,puntaje:xt.puntaje??1}:null}).filter(Boolean),$e=ae.instruccionesGenerales&&ae.instruccionesGenerales.trim().length>0?ae.instruccionesGenerales:"Lee atentamente y responde cada tem segn se indique. Marca solo una alternativa cuando corresponda. Justifica tus respuestas en los tems de desarrollo.",Ke=(Pe||[]).reduce((He,it)=>{if(it.tipo==="Comprensin de lectura"&&Array.isArray(it.preguntas)){const xt=it.preguntas.reduce((Et,gt)=>Et+(gt.puntaje??1),0);return He+xt}return He+(it.puntaje??1)},0),nt={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:r.nombre,asignatura:r.asignatura,nivel:r.nivel,contenidoOriginal:r.contenido,tiposActividadOriginal:r.tiposActividad,objetivo:ae.objetivo||"",instruccionesGenerales:$e,puntajeIdeal:Ke,actividades:[{id:crypto.randomUUID(),titulo:r.nombre,instrucciones:$e,items:Pe}],dificultad:r.dificultad,...r.isNee&&{adaptacionNEE:r.selectedNee}};u(nt),m(!1)}catch(R){console.error(R),l("Error al generar la prueba con IA. Revisa la consola para ms detalles.")}finally{s(!1)}},q=async()=>{if(c)try{await RXe(c),alert("Prueba guardada con xito.")}catch(K){console.error(K),alert("No se pudo guardar la prueba.")}},V=async K=>{if(window.confirm("Eliminar esta prueba?"))try{await LXe(K),(c==null?void 0:c.id)===K&&u(null)}catch(J){console.error(J),alert("No se pudo eliminar la prueba.")}},Y=async K=>{try{x(!0);const J=new pr({unit:"pt",format:"letter"});try{HJe(J),J.setFont("GoogleSansCode","normal")}catch{}const R=40;let F=R;J.setFontSize(12),J.text("LICEO INDUSTRIAL DE RECOLETA",R,F),J.text("SUBDIRECCIN DE GESTIN PEDAGGICA",J.internal.pageSize.getWidth()-R,F,{align:"right"}),F+=24,J.setFont(void 0,"bold"),J.setFontSize(18),J.text(K.nombre,J.internal.pageSize.getWidth()/2,F,{align:"center"}),J.setFont(void 0,"normal"),F+=18,bi(J,{startY:F+6,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Campo","Valor"]],body:[["Fecha",new Date(K.fechaCreacion).toLocaleDateString()],["Asignatura",K.asignatura],["Nivel",K.nivel],["Puntaje Ideal",String(K.puntajeIdeal)],["Objetivo",K.objetivo],["Instrucciones Generales",K.instruccionesGenerales]]}),F=J.lastAutoTable.finalY+16,K.actividades.forEach((ne,le)=>{F>J.internal.pageSize.getHeight()-120&&(J.addPage(),F=R),J.setFontSize(13),J.setFont(void 0,"bold"),J.text(`Actividad ${le+1}: ${ne.titulo}`,R,F),F+=14,J.setFont(void 0,"normal"),J.setFontSize(10);const ie=J.splitTextToSize(ne.instrucciones,J.internal.pageSize.getWidth()-R*2);J.text(ie,R,F),F+=ie.length*12+6,ne.items.forEach((ae,Ae)=>{const ke=ae.habilidadBloom?` [Bloom: ${ae.habilidadBloom}]`:"",re=`${Ae+1}. ${ae.pregunta} (${ae.puntaje} pts)${ke}`,Re=J.splitTextToSize(re,J.internal.pageSize.getWidth()-R*2);switch(F>J.internal.pageSize.getHeight()-100&&(J.addPage(),F=R),J.setFont(void 0,"bold"),J.text(Re,R,F),F+=Re.length*12+4,J.setFont(void 0,"normal"),ae.tipo){case"Seleccin mltiple":{ae.opciones.forEach((Le,Te)=>{const de=`${String.fromCharCode(65+Te)}) ${Le}`,Ce=J.splitTextToSize(de,J.internal.pageSize.getWidth()-R*2-16);J.text(Ce,R+16,F),F+=Ce.length*12}),F+=8;break}case"Verdadero o Falso":{J.text("V ____    F ____",R+16,F),F+=18;break}case"Desarrollo":{J.rect(R,F-10,J.internal.pageSize.getWidth()-R*2,60),F+=70;break}case"Trminos pareados":{const Le=ae.pares;bi(J,{startY:F,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Columna A: Concepto","Columna B: Definicin"]],body:Le.map((Te,de)=>[`${de+1}. ${Te.concepto}`,Te.definicion])}),F=J.lastAutoTable.finalY+8;break}case"Comprensin de lectura":{const Le=ae,Te=J.splitTextToSize(Le.texto,J.internal.pageSize.getWidth()-R*2);J.text(Te,R,F),F+=Te.length*12+8,Le.preguntas.forEach((de,Ce)=>{const me=de.habilidadBloom?` [Bloom: ${de.habilidadBloom}]`:"",ye=`CL-${Ce+1}. ${de.pregunta} (${de.puntaje} pts)${me}`,oe=J.splitTextToSize(ye,J.internal.pageSize.getWidth()-R*2);F>J.internal.pageSize.getHeight()-100&&(J.addPage(),F=R),J.setFont(void 0,"bold"),J.text(oe,R+8,F),F+=oe.length*12+4,J.setFont(void 0,"normal"),de.tipo==="Seleccin mltiple"?(de.opciones.forEach((fe,be)=>{const Pe=`${String.fromCharCode(65+be)}) ${fe}`,$e=J.splitTextToSize(Pe,J.internal.pageSize.getWidth()-R*2-24);J.text($e,R+24,F),F+=$e.length*12}),F+=6):(J.rect(R+8,F-10,J.internal.pageSize.getWidth()-R*2-16,50),F+=58)});break}}})});const W=new Date().toISOString().split("T")[0],X=`${K.nombre.replace(/\s/g,"_")}_${K.asignatura.replace(/\s/g,"_")}_${W}.pdf`;J.save(X),x(!1),alert(`PDF generado y descargado como "${X}"`)}catch(J){console.error(J),x(!1),alert("No se pudo generar el PDF.")}};if(c){const K=async(J,R)=>{var F,W;try{const X=c.actividades.findIndex(Pe=>Pe.id===J);if(X<0)return;const ne=c.actividades[X],le=ne.items.findIndex(Pe=>Pe.id===R);if(le<0)return;const ie=ne.items[le],ae=Pe=>Pe,Ae=c.objetivo&&c.objetivo.trim().length>0?c.objetivo:`Evaluar el siguiente contenido: "${c.contenidoOriginal}" para el nivel ${c.nivel}.`,ke={[ae(ie.tipo)]:1},re={objetivo:Ae,cantidadesPorTipo:ke,contextoAdicional:`Regenerar un tem del tipo ${ie.tipo} manteniendo el mismo nivel (${c.nivel}) y asignatura (${c.asignatura}).`},Le=`${DW.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,Te=await((F=so.currentUser)==null?void 0:F.getIdToken());if(!Te)throw new Error("No se pudo obtener token de autenticacin.");const de=await fetch(Le,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Te}`},body:JSON.stringify(re)});if(!de.ok)throw new Error(await de.text());const Ce=await de.json(),me=Array.isArray((W=Ce==null?void 0:Ce.prueba)==null?void 0:W.preguntas)?Ce.prueba.preguntas:[];if(me.length===0)throw new Error("La IA no devolvi tems nuevos.");const ye=me[0],oe=(()=>{const Pe=((ye==null?void 0:ye.tipo)||"").toLowerCase();return Pe.includes("mltiple")||Pe.includes("multiple")||Pe.includes("seleccion")?"Seleccin mltiple":Pe.includes("verdadero")||Pe.includes("falso")||Pe==="vf"?"Verdadero o Falso":Pe.includes("paread")||Pe.includes("matching")||Pe.includes("emparejar")?"Trminos pareados":Pe.includes("comprension")||Pe.includes("lectura")?"Comprensin de lectura":Pe.includes("desarrollo")||Pe.includes("respuesta corta")||Pe.includes("abierta")?"Desarrollo":null})();let fe=null;if(oe==="Seleccin mltiple"?fe=P(ye):oe==="Verdadero o Falso"?fe=k(ye):oe==="Desarrollo"?fe=M(ye):oe==="Trminos pareados"?fe=U(ye):oe==="Comprensin de lectura"?fe=z(ye):(ye!=null&&ye.opciones||ye!=null&&ye.alternativas)&&(fe=P(ye)),!fe)throw new Error("No se pudo normalizar el tem generado.");const be={...c};be.actividades=c.actividades.map((Pe,$e)=>$e!==X?Pe:{...Pe,items:Pe.items.map((Ke,nt)=>nt===le?{...fe,id:Ke.id}:Ke)}),u(be)}catch(X){console.error("No se pudo regenerar el tem:",X),alert("No se pudo regenerar el tem. Intenta de nuevo.")}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:()=>u(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>m(!h),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[i.jsx(zJe,{open:!h})," ",i.jsxs("span",{children:[h?"Ocultar":"Mostrar"," Respuestas"]})]}),i.jsx("button",{onClick:()=>y(J=>!J),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:v?"Orden original":"Ordenar por tipo"}),i.jsx("button",{onClick:q,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),i.jsxs("button",{onClick:()=>c&&Y(c),disabled:g,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[g?"...":i.jsx(Kte,{})," PDF"]})]})]}),i.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),i.jsx("span",{children:"SUBDIRECCIN DE GESTIN PEDAGGICA"})]}),i.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:c.nombre}),i.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Asignatura:"})," ",c.asignatura]}),i.jsxs("p",{className:"text-right",children:[i.jsx("strong",{children:"Puntaje Ideal:"})," ",c.puntajeIdeal]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Nivel:"})," ",c.nivel]})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[i.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",c.dificultad||"Intermedio"]}),c.adaptacionNEE&&c.adaptacionNEE.length>0&&i.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",c.adaptacionNEE.join(", ")]})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",c.objetivo]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Instrucciones Generales:"})," ",c.instruccionesGenerales]})]}),c.actividades.map(J=>i.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:J.titulo}),i.jsx("p",{className:"italic text-sm mb-4",children:J.instrucciones}),i.jsx("div",{className:"space-y-6",children:(()=>{const R={"Comprensin de lectura":0,"Seleccin mltiple":1,"Verdadero o Falso":2,"Trminos pareados":3,Desarrollo:4};return(v?[...J.items||[]].sort((W,X)=>(R[W.tipo]??99)-(R[X.tipo]??99)):J.items||[]).map(W=>i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>K(J.id,W.id),className:"text-xs bg-sky-600 text-white px-3 py-1 rounded hover:bg-sky-700",children:"Regenerar tem"})}),i.jsx(GJe,{item:W,showAnswers:h})]},W.id))})()})]},J.id))]})]})}return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Gua"}),i.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Gua ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"nombre",value:r.nombre,onChange:j,placeholder:"Ej: Gua N1 - La Clula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:r.asignatura,onChange:j,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:En.map(K=>i.jsx("option",{children:K},K))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Nivel"}),i.jsx("select",{name:"nivel",value:r.nivel,onChange:j,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:gh.map(K=>i.jsx("option",{children:K},K))})]}),i.jsx("div",{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),i.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fcil","Intermedio","Avanzado"].map((K,J)=>i.jsx("button",{type:"button",onClick:()=>a(R=>({...R,dificultad:K})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50 ${J===0?"rounded-l-lg":""} ${J===2?"rounded-r-lg":""} ${r.dificultad===K?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:K},K))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:r.isNee,onChange:K=>a(J=>({...J,isNee:K.target.checked,selectedNee:K.target.checked?J.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),r.isNee&&i.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:Gj.map(K=>i.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:r.selectedNee.includes(K),onChange:()=>T(K),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:K})]},K))})]})]})]}),i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Contenido a evaluar"}),i.jsx("textarea",{name:"contenido",value:r.contenido,onChange:j,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"space-y-3",children:PW.map(K=>{var J;return i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:!!r.tiposActividad[K],onChange:()=>O(K),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:K})]}),r.tiposActividad[K]&&s6[K]&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),(J=s6[K])==null?void 0:J.map(R=>i.jsx("button",{type:"button",onClick:()=>B(K,R),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${r.tiposActividad[K]===R?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:R},R))]})]},K)})}),o&&i.jsx("p",{className:"text-red-500 text-sm",children:o}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:n,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:n?"Generando...":"Generar Prueba"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),i.jsx("div",{className:"space-y-2",children:d.length>0?d.map(K=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:K.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[K.asignatura," - ",K.nivel," (",new Date(K.fechaCreacion).toLocaleDateString(),")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>u(K),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),i.jsx("button",{onClick:()=>V(K.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},K.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},KJe=({rubricas:e,onSave:t,onDelete:r,onCreate:a,allUsers:n,onCreatedInteractiva:s})=>{const[o,l]=N.useState(null),[c,u]=N.useState("list"),[d,f]=N.useState(!1),[h,m]=N.useState(""),{currentUser:g}=VM(),[x,v]=N.useState(!1),[y,w]=N.useState(""),[j,O]=N.useState(""),B=N.useMemo(()=>Array.from(new Set(n.filter(z=>z.profile===zt.ESTUDIANTE&&z.curso).map(z=>zc(z.curso)))).sort(),[n]),T=async(z,Q,q)=>{try{z.id||(z.id=crypto.randomUUID()),await rD(z);const V=n.filter(R=>R.profile===zt.ESTUDIANTE&&zc(R.curso||"")===Q),Y={};V.forEach(R=>{Y[R.id]={puntajes:{},feedback:""}});const K={nombre:z.titulo,curso:Q,asignatura:q,rubricaEstaticaId:z.id,resultados:Y},J=await HXe(K);v(!1),alert("Rbrica interactiva creada."),s==null||s(J)}catch(V){console.error(V),alert("No se pudo crear la rbrica interactiva.")}},C=async(z,Q)=>{if(!z.trim()||!Q.trim()){alert("El ttulo y la descripcin son obligatorios.");return}f(!0);try{m4("Evaluacin - Rbricas",g);const V=(await VJe({objetivo:z,niveles:["Insuficiente","Suficiente","Competente","Avanzado"],dimensiones:[],contextoAdicional:`El propsito de la rbrica es: "${Q}". Por favor, genera entre 3 y 5 dimensiones de evaluacin relevantes.`})).data.rubrica,Y={id:crypto.randomUUID(),titulo:V.nombre,descripcion:V.descripcion,fechaCreacion:new Date().toISOString(),dimensiones:V.dimensiones.map(K=>({id:crypto.randomUUID(),nombre:K.nombre,niveles:K.descriptores.reduce((J,R)=>{const W={Insuficiente:"insuficiente",Suficiente:"suficiente",Competente:"competente",Avanzado:"avanzado"}[R.nivel]||R.nivel.toLowerCase().replace(/\s/g,"");return W&&(J[W]=R.descripcion),J},{insuficiente:"",suficiente:"",competente:"",avanzado:""})}))};await a(Y),l(Y),u("form"),v(!0)}catch(q){console.error(q),alert("Error al generar la rbrica con IA.")}finally{f(!1)}},_=()=>{l({id:"",titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),u("form")},S=z=>{l(z),u("form")},L=async()=>{if(!o||!h.trim())return;const z=h;m("");const Q=`temp-${crypto.randomUUID()}`;l(q=>q?{...q,dimensiones:[...q.dimensiones,{id:Q,nombre:z,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0}]}:null);try{const V=(await $Je({objetivo:o.titulo,dimension:z,nivel:"todos",contextoAdicional:'Genera descriptores para los 4 niveles: Insuficiente, Suficiente, Competente y Avanzado. La respuesta debe ser un objeto JSON con claves "insuficiente", "suficiente", "competente", "avanzado".'})).data.descriptores;l(Y=>Y?{...Y,dimensiones:Y.dimensiones.map(K=>K.id===Q?{...K,niveles:V,isLoading:!1}:K)}:null)}catch(q){console.error(q),alert("No se pudo generar la dimensin con IA."),l(V=>V?{...V,dimensiones:V.dimensiones.filter(Y=>Y.id!==Q)}:null)}},P=(z,Q,q)=>{o&&l(V=>V?{...V,dimensiones:V.dimensiones.map(Y=>Y.id!==z?Y:Q==="nombre"?{...Y,nombre:q}:{...Y,niveles:{...Y.niveles,[Q]:q}})}:null)},k=(z,Q)=>{l(q=>q?{...q,[z]:Q}:null)},M=z=>{o&&l(Q=>Q?{...Q,dimensiones:Q.dimensiones.filter(q=>q.id!==z)}:null)},U=()=>{if(!o)return null;const z="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",Q=`${z} resize-none text-sm`;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rbrica de Aprendizaje"}),i.jsx("button",{onClick:()=>u("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la Rbrica"}),i.jsx("input",{value:o.titulo,onChange:q=>k("titulo",q.target.value),placeholder:"Ej. Rbrica de Presentaciones Orales",className:`${z} mt-1`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin de la Rbrica"}),i.jsx("textarea",{value:o.descripcion,onChange:q=>k("descripcion",q.target.value),placeholder:"Describe el propsito y los criterios de evaluacin de esta rbrica.",rows:3,className:`${z} mt-1`})]})]}),o.dimensiones.length===0&&i.jsx("div",{className:"text-center py-4",children:i.jsx("button",{onClick:()=>C(o.titulo,o.descripcion),disabled:d||!o.titulo||!o.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:d?"Generando...":" Generar Rbrica con IA"})}),o.dimensiones.length>0&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),i.jsx("button",{type:"button",onClick:()=>v(!0),className:"bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Usar como Rbrica Interactiva"})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsx("tr",{children:["Dimensin","Insuficiente","Suficiente","Competente","Avanzado",""].map(q=>i.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:q},q))})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.dimensiones.map(q=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 w-1/5",children:i.jsx("textarea",{value:q.nombre,onChange:V=>P(q.id,"nombre",V.target.value),rows:4,className:Q})}),Object.keys(q.niveles).map(V=>i.jsx("td",{className:"p-2 w-1/5",children:"isLoading"in q&&q.isLoading?i.jsx("div",{className:"flex justify-center items-center h-full",children:i.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):i.jsx("textarea",{value:q.niveles[V],onChange:Y=>P(q.id,V,Y.target.value),rows:4,className:Q})},V)),i.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:i.jsx("button",{onClick:()=>M(q.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:""})})]},q.id))})]})}),i.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("label",{className:"text-sm font-medium",children:"Aadir Dimensin"}),i.jsx("input",{value:h,onChange:q=>m(q.target.value),placeholder:"Escribe el nombre de la nueva dimensin...",className:`${z} mt-1`})]}),i.jsx("button",{onClick:L,disabled:!h.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]}),x&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg w-full max-w-md space-y-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Asignar a Curso"}),i.jsx("label",{className:"text-sm font-medium",children:"Curso"}),i.jsxs("select",{value:y,onChange:q=>w(q.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[i.jsx("option",{value:"",children:"Selecciona un curso..."}),B.map(q=>i.jsx("option",{value:q,children:q},q))]}),i.jsx("label",{className:"text-sm font-medium",children:"Asignatura"}),i.jsxs("select",{value:j,onChange:q=>O(q.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[i.jsx("option",{value:"",children:"Selecciona una asignatura..."}),En.map(q=>i.jsx("option",{value:q,children:q},q))]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2",children:"Cancelar"}),i.jsx("button",{disabled:!y||!o||!j,onClick:()=>o&&T(o,y,j),className:"bg-emerald-600 text-white px-4 py-2 rounded",children:"Crear Interactiva"})]})]})})]})};return c==="list"?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rbricas"}),i.jsx("button",{onClick:_,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(z=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:z.titulo}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:z.descripcion})]}),i.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>S(z),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>r(z.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},z.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rbricas guardadas."})]}):U()},WJe=({allUsers:e,rubricasEstaticas:t})=>{const[r,a]=N.useState([]),[n,s]=N.useState(null);N.useEffect(()=>{const f=QXe(a);return()=>f()},[]);const o=N.useMemo(()=>r.find(f=>f.id===n)||null,[r,n]),l=N.useMemo(()=>o&&t.find(f=>f.id===o.rubricaEstaticaId)||null,[o,t]),c=N.useMemo(()=>o?e.filter(f=>f.profile===zt.ESTUDIANTE&&zc(f.curso||"")===zc(o.curso)):[],[o,e]),u=async(f,h,m)=>{if(!o)return;const g=o.resultados[f]||{puntajes:{},feedback:""},x={...o.resultados,[f]:{...g,puntajes:{...g.puntajes,[h]:m}}};await zXe(o.id,{resultados:x})},d=f=>{if(!l)return 1;const h=l.dimensiones.map(w=>w.nombre),m=o==null?void 0:o.resultados[f];if(!m)return 1;const g=h.reduce((w,j)=>w+(m.puntajes[j]||0),0),x=h.length*4,y=1+6*(x>0?g/x:0);return Math.round(y*10)/10};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Rbricas Interactivas"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"w-1/3 space-y-2",children:[r.map(f=>i.jsxs("button",{onClick:()=>s(f.id),className:`w-full text-left p-3 rounded border ${n===f.id?"bg-amber-100 dark:bg-amber-900/30":"bg-slate-50 dark:bg-slate-700/50"}`,children:[i.jsx("div",{className:"font-semibold",children:f.nombre}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Curso: ",f.curso,"  Asignatura: ",f.asignatura]})]},f.id)),r.length===0&&i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay rbricas interactivas."})]}),i.jsx("div",{className:"flex-1",children:o&&l?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:[o.nombre,"  ",o.curso]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Estudiante"}),l.dimensiones.map(f=>i.jsx("th",{className:"p-2 text-left",children:f.nombre},f.id)),i.jsx("th",{className:"p-2 text-left",children:"Nota"})]})}),i.jsx("tbody",{children:c.map(f=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:f.nombreCompleto}),l.dimensiones.map(h=>{var g,x;const m=((x=(g=o.resultados[f.id])==null?void 0:g.puntajes)==null?void 0:x[h.nombre])||0;return i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:m,onChange:v=>u(f.id,h.nombre,Number(v.target.value)),className:"border rounded p-1 dark:bg-slate-700",children:[i.jsx("option",{value:0,children:""}),i.jsx("option",{value:1,children:"1 - Insuficiente"}),i.jsx("option",{value:2,children:"2 - Suficiente"}),i.jsx("option",{value:3,children:"3 - Competente"}),i.jsx("option",{value:4,children:"4 - Avanzado"})]})},h.id)}),i.jsx("td",{className:"p-2 font-semibold",children:d(f.id).toFixed(1)})]},f.id))})]})})]}):i.jsx("p",{className:"text-slate-500",children:"Selecciona una rbrica interactiva para calificar."})})]})]})},XJe=()=>{const[e,t]=N.useState("pruebas"),[r,a]=N.useState([]),[n,s]=N.useState([]),[o,l]=N.useState(!0);return N.useEffect(()=>{l(!0);const c=VXe(a),u=MXe(d=>{s(d),l(!1)});return()=>{c(),u()}},[]),o?i.jsx("div",{className:"text-center py-10 text-lg",children:"Cargando datos..."}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("pruebas"),children:"Pruebas"}),i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricas"),children:"Rbricas"}),i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricasInteractivas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricasInteractivas"),children:"Rbricas Interactivas"})]}),e==="pruebas"&&i.jsx(qJe,{}),e==="rubricas"&&i.jsx(KJe,{rubricas:n,onSave:rD,onDelete:UXe,onCreate:rD,allUsers:r,onCreatedInteractiva:()=>t("rubricasInteractivas")}),e==="rubricasInteractivas"&&i.jsx(WJe,{allUsers:r,rubricasEstaticas:n})]})},YJe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let a=0,n=0;const s=[];for(const c of r)try{const u=ht(vr,c),d=await Ir(u),f=d.size;a+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),n+=h}catch(u){console.warn(`Error accediendo a coleccin ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const o=[];try{const c=ht(vr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=Dt(c,ur("timestamp",">=",u.toISOString()),Yt("timestamp","desc")),f=await Ir(d),h={};f.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{o.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const l=Math.floor(n*2.5);return{documentsCreatedToday:n,readsToday:l,writesToday:n,totalDocuments:a,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:o}}catch(e){return console.error("Error al obtener estadsticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},RW=500,av=({title:e,value:t,description:r,alert:a})=>i.jsxs("div",{className:`p-5 rounded-xl border ${a?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),i.jsx("p",{className:`text-3xl font-bold mt-2 ${a?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),i6=({title:e,data:t,colorClass:r})=>{const a=N.useMemo(()=>Math.max(...t.map(n=>n.value),1),[t]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),i.jsx("div",{className:"space-y-4",children:t.length>0?t.map(n=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:n.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n.value})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${n.value/a*100}%`}})})]},n.label)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},JJe=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(!0),[n,s]=N.useState(null),[o,l]=N.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});N.useEffect(()=>{a(!0);const f=_Xe(g=>{t(g),a(!1)}),h=async()=>{try{const g=await YJe();l(g)}catch(g){console.error("Error al cargar estadsticas de Firestore:",g)}};h();const m=setInterval(h,300*1e3);return()=>{f(),clearInterval(m)}},[]);const{stats:c,userStats:u,moduleStats:d}=N.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),m=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(O=>{const B=new Date(O.timestamp).getTime();B>=h&&x.today++,B>=m&&x.week++,B>=g&&x.month++;const T=O.userEmail||"Desconocido";v[T]||(v[T]={email:T,today:0,month:0,total:0}),v[T].total++,B>=h&&v[T].today++,B>=g&&v[T].month++,y[O.module]=(y[O.module]||0)+1});const w=Object.values(v).sort((O,B)=>B.total-O.total),j=Object.entries(y).map(([O,B])=>({label:O,value:B})).sort((O,B)=>B.value-O.value);return{stats:x,userStats:w,moduleStats:j}},[e]);return i.jsxs("div",{className:"space-y-8",children:[n&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:n}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadsticas..."}),!r&&e.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(av,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Lmite recomendado: ${RW}`,alert:c.today>RW}),i.jsx(av,{title:"Llamadas esta Semana",value:r?"--":c.week}),i.jsx(av,{title:"Llamadas este Mes",value:r?"--":c.month})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(i6,{title:"Uso por Mdulo",data:d,colorClass:"bg-sky-500"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),i.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadsticas de uso de Firestore (simuladas)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(av,{title:"Documentos Creados (Hoy)",value:o.documentsCreatedToday,description:"Nuevos documentos"}),i.jsx(av,{title:"Lecturas de Firestore (Hoy)",value:o.readsToday,description:"Operaciones de lectura"}),i.jsx(av,{title:"Total de Documentos",value:o.totalDocuments,description:"En todas las colecciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(i6,{title:"Actividad por Coleccin",data:o.collectionsActivity,colorClass:"bg-green-500"}),i.jsx(i6,{title:"Actividad Diaria (ltimos 7 das)",data:o.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},LW=Object.values(zt),o6=e=>e?e.trim().toLowerCase().replace(//g,"").replace(/\s+(medio|bsico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1").replace(/^(\d)(?![])/,"$1").replace(/\s+/g,"").toUpperCase():"",ZJe=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(!1),[n,s]=N.useState("Usuarios"),[o,l]=N.useState({nombreCompleto:"",email:"",rut:"",profile:zt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=N.useState(null),[d,f]=N.useState(""),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState(null),[w,j]=N.useState(null),[O,B]=N.useState(null),T=N.useCallback(async()=>{a(!0);try{const V=await P1();t(V)}catch(V){console.error("Error al cargar usuarios",V),y("No se pudieron cargar los usuarios.")}finally{a(!1)}},[]);N.useEffect(()=>{T()},[T]);const C=N.useCallback(V=>{const{name:Y,value:K}=V.target;l(J=>({...J,[Y]:K,curso:Y==="profile"&&K!==zt.ESTUDIANTE?"":J.curso,cursos:Y==="profile"&&K!==zt.PROFESORADO?[]:J.cursos,asignaturas:Y==="profile"&&K!==zt.PROFESORADO?[]:J.asignaturas}))},[]),_=N.useCallback((V,Y)=>{l(K=>{const J=K[V]||[],R=J.includes(Y)?J.filter(F=>F!==Y):[...J,Y];return{...K,[V]:R}})},[]),S=N.useCallback(()=>{l({nombreCompleto:"",email:"",rut:"",profile:zt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),L=N.useCallback(async V=>{V.preventDefault(),y(null);const{nombreCompleto:Y,email:K,profile:J,curso:R,password:F}=o;if(!Y.trim()||!K.trim()){y("Nombre Completo y Email son obligatorios.");return}if(J===zt.ESTUDIANTE&&!R){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(F!=null&&F.trim())){y("La contrasea es obligatoria al crear un nuevo usuario.");return}const W=Am();try{if(c){const X=Vc(W,"updateUser"),ne={...o,password:(F==null?void 0:F.trim())||void 0,curso:J===zt.ESTUDIANTE?o6(R||""):void 0};await X(ne)}else{const X=Vc(W,"createUser"),ne={...o,curso:J===zt.ESTUDIANTE?o6(R||""):void 0};await X(ne)}await T(),S()}catch(X){console.error("Error al guardar usuario:",X),y(X.message||"Error al guardar el usuario.")}},[o,c,T,S]),P=N.useCallback(V=>{u(V.email),l({nombreCompleto:V.nombreCompleto,email:V.email,rut:V.rut||"",profile:V.profile,password:"",curso:V.curso||"",cursos:V.cursos||[],asignaturas:V.asignaturas||[]}),setTimeout(()=>{const Y=document.querySelector("form");Y&&Y.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),k=N.useCallback(async V=>{if(window.confirm(`Est seguro de que desea eliminar al usuario ${V}? Esta accin es irreversible.`))try{const Y=Am();await Vc(Y,"deleteUser")({email:V}),await T()}catch(Y){console.error("Error al eliminar usuario:",Y),y(Y.message||"No se pudo borrar el usuario.")}},[T]),M=async V=>{var F;const Y=(F=V.target.files)==null?void 0:F[0];if(!Y)return;j({message:"Procesando archivo...",isError:!1});const K=Am(),J=Vc(K,"createUser"),R=new FileReader;R.onload=async W=>{var X;try{const ne=new Uint8Array((X=W.target)==null?void 0:X.result),le=Bb(ne,{type:"array"}),ie=le.Sheets[le.SheetNames[0]],ae=Ts.sheet_to_json(ie);if(ae.length===0){j({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const Ae=ae.map(Te=>{const de=Te.Nombre||Te.nombre,Ce=Te.Correo||Te.correo||Te.Email||Te.email,me=Te.Curso||Te.curso,ye=Te.RUT||Te.rut;return!de||!Ce||!me?Promise.resolve({email:Ce||"Sin email",error:"Datos incompletos"}):J({nombreCompleto:String(de).trim(),email:String(Ce).trim(),profile:zt.ESTUDIANTE,curso:o6(String(me).trim()),rut:ye?String(ye).trim():"",password:"recoleta"}).catch(oe=>({email:Ce,error:oe.message}))}),ke=await Promise.all(Ae),re=ke.filter(Te=>!Te.error).length,Re=ke.filter(Te=>Te.error);let Le=`Carga completada. ${re} estudiantes agregados.`;Re.length>0&&(Le+=` ${Re.length} fallaron.`,console.error("Errores en carga masiva:",Re)),j({message:Le,isError:Re.length>0}),await T()}catch(ne){j({message:`Error: ${ne.message}`,isError:!0})}},R.readAsArrayBuffer(Y),V.target.value=""},U=async V=>{var F;const Y=(F=V.target.files)==null?void 0:F[0];if(!Y)return;B({message:"Procesando archivo...",isError:!1});const K=Am(),J=Vc(K,"createUser"),R=new FileReader;R.onload=async W=>{var X;try{const ne=new Uint8Array((X=W.target)==null?void 0:X.result),le=Bb(ne,{type:"array"}),ie=le.Sheets[le.SheetNames[0]],ae=Ts.sheet_to_json(ie);if(ae.length===0){B({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const Ae=ae.map(Te=>{const de=Te.Nombre||Te.nombre,Ce=Te.Correo||Te.correo||Te.Email||Te.email,me=Te.Perfil||Te.perfil||Te.Profile||Te.profile,ye=Te.RUT||Te.rut;return!de||!Ce||!me?Promise.resolve({email:Ce||"Sin email",error:"Datos incompletos"}):J({nombreCompleto:String(de).trim(),email:String(Ce).trim(),profile:me,rut:ye?String(ye).trim():"",password:"recoleta"}).catch(oe=>({email:Ce,error:oe.message}))}),ke=await Promise.all(Ae),re=ke.filter(Te=>!Te.error).length,Re=ke.filter(Te=>Te.error);let Le=`Carga completada. ${re} usuarios agregados.`;Re.length>0&&(Le+=` ${Re.length} fallaron.`,console.error("Errores en carga masiva:",Re)),B({message:Le,isError:Re.length>0}),await T()}catch(ne){B({message:`Error: ${ne.message}`,isError:!0})}},R.readAsArrayBuffer(Y),V.target.value=""},z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Q=N.useMemo(()=>Array.from(new Set(e.filter(V=>V.profile===zt.ESTUDIANTE&&V.curso).map(V=>V.curso))).sort(),[e]),q=N.useMemo(()=>e.filter(V=>(d===""||V.nombreCompleto.toLowerCase().includes(d.toLowerCase())||V.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||V.profile===h)&&(g===""||V.curso===g)),[e,d,h,g]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administracin"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>s("Usuarios"),className:`${n==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestin de Usuarios"}),i.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${n==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),n==="Usuarios"&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:M,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&i.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:U,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),O&&i.jsx("p",{className:`text-sm mt-2 ${O.isError?"text-red-600":"text-green-600"}`,children:O.message})]})]})]}),i.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),i.jsxs("form",{onSubmit:L,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",name:"nombreCompleto",value:o.nombreCompleto,onChange:C,className:z,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:o.email,onChange:C,className:z,required:!0,readOnly:!!c})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contrasea"}),i.jsx("input",{type:"password",name:"password",value:o.password||"",onChange:C,placeholder:c?"Dejar en blanco para no cambiar":"Contrasea temporal",className:z})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),i.jsx("input",{type:"text",name:"rut",value:o.rut||"",onChange:C,placeholder:"12.345.678-9",className:z})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),i.jsx("select",{name:"profile",value:o.profile,onChange:C,className:z,required:!0,children:LW.map(V=>i.jsx("option",{value:V,children:V},V))})]}),o.profile===zt.ESTUDIANTE&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{name:"curso",value:o.curso,onChange:C,className:z,required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),Nn.map(V=>i.jsx("option",{value:V,children:V},V))]})]})]}),o.profile===zt.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Cursos"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Nn.map(V=>{var Y;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[i.jsx("input",{type:"checkbox",checked:((Y=o.cursos)==null?void 0:Y.includes(V))||!1,onChange:()=>_("cursos",V),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),o.profile===zt.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Asignaturas"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:En.map(V=>{var Y;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[i.jsx("input",{type:"checkbox",checked:((Y=o.asignaturas)==null?void 0:Y.includes(V))||!1,onChange:()=>_("asignaturas",V),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),v&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:v}),i.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&i.jsx("button",{type:"button",onClick:S,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:async()=>{try{console.log(" Agregando custom claim...");const V=Am(),K=await Vc(V,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log(" Custom claim agregado:",K),y(" Custom claim agregado exitosamente")}catch(V){console.error(" Error al agregar custom claim:",V),y(`Error: ${V.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:" Claim"}),i.jsx("button",{type:"button",onClick:async()=>{var V,Y,K,J,R;try{const{auth:F}=await ei(async()=>{const{auth:ne}=await Promise.resolve().then(()=>Gte);return{auth:ne}},void 0);console.log(" Usuario actual:",(V=F.currentUser)==null?void 0:V.email);const W=await((Y=F.currentUser)==null?void 0:Y.getIdToken(!0));console.log(" Token refreshed:",!!W);const X=await((K=F.currentUser)==null?void 0:K.getIdTokenResult());console.log(" Claims completos:",X==null?void 0:X.claims),console.log(" Profile claim:",(J=X==null?void 0:X.claims)==null?void 0:J.profile),((R=X==null?void 0:X.claims)==null?void 0:R.profile)==="SUBDIRECCION"?y(" Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(` Custom claim faltante. Claims: ${JSON.stringify(X==null?void 0:X.claims)}`)}catch(F){console.error(" Error verificando token:",F),y(`Error verificando token: ${F.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:" Token"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsx("div",{children:i.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:V=>f(V.target.value),className:z})}),i.jsx("div",{children:i.jsxs("select",{value:h,onChange:V=>m(V.target.value),className:z,children:[i.jsx("option",{value:"",children:"Todos los perfiles"}),LW.map(V=>i.jsx("option",{value:V,children:V},V))]})}),i.jsx("div",{children:i.jsxs("select",{value:g,onChange:V=>x(V.target.value),className:z,children:[i.jsx("option",{value:"",children:"Todos los cursos"}),Q.map(V=>i.jsx("option",{value:V,children:V},V))]})})]}),r?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:q.map(V=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:V.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:V.email}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.profile===zt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":V.profile===zt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:V.profile})}),i.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[V.profile===zt.ESTUDIANTE&&i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:V.curso||"Sin curso"}),V.profile===zt.PROFESORADO&&i.jsxs("div",{className:"space-y-1",children:[V.cursos&&V.cursos.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.cursos.slice(0,3).map(Y=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:Y},Y)),V.cursos.length>3&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.cursos.length-3]})]})]}),V.asignaturas&&V.asignaturas.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.asignaturas.slice(0,2).map(Y=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:Y},Y)),V.asignaturas.length>2&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.asignaturas.length-2]})]})]}),(!V.cursos||V.cursos.length===0)&&(!V.asignaturas||V.asignaturas.length===0)&&i.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),V.profile!==zt.ESTUDIANTE&&V.profile!==zt.PROFESORADO&&i.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[i.jsx("button",{onClick:()=>P(V),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),i.jsx("button",{onClick:()=>k(V.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},V.email))})]}),q.length===0&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),n==="Monitor de Uso"&&i.jsx(JJe,{})]})},Vb="seguimiento_dual_records",eZe=e=>{const t=e.data(),r=a=>a&&typeof a.toDate=="function"?a.toDate().toISOString().split("T")[0]:a;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},tZe=e=>{const t=Dt(ht(st,Vb),Yt("nombreEstudiante","asc"));return nr(t,a=>{const n=a.docs.map(s=>eZe(s));e(n)},a=>{console.error("Error al suscribirse a los registros de seguimiento:",a),e([])})},r_=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(a=>{t[a]&&typeof t[a]=="string"&&(t[a]=ir.fromDate(new Date(t[a]+"T00:00:00")))}),t},rZe=async e=>{try{const t=r_(e);return(await Zr(ht(st,Vb),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},MW=async(e,t)=>{try{const r=Jt(st,Vb,e),a=r_(t);await ai(r,a,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},aZe=async e=>{try{const t=Jt(st,Vb,e);await xn(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},nZe=async e=>{const t=ex(st),r=ht(st,Vb);let a=0,n=0;for(const s of e){const o=Dt(r,ur("rutEstudiante","==",s.rutEstudiante)),l=await Ir(o);if(l.empty){const c=Jt(r);t.set(c,r_(s)),n++}else{const c=l.docs[0].id,u=Jt(st,Vb,c);t.set(u,r_(s),{merge:!0}),a++}}return await t.commit(),{updated:a,created:n}},sZe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},iZe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},oZe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","s","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},lZe=({record:e,onSave:t,onClose:r})=>{const[a,n]=N.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",o=c=>{const{name:u,value:d,type:f,checked:h}=c.target;n(m=>({...m,[u]:f==="checkbox"?h:d}))},l=()=>{t(a)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisin"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),i.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),i.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:a.fecha1raSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!a.realizada1raSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),i.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:a.fecha2daSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!a.realizada2daSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),i.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:a.fecha1raSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!a.realizada1raSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),i.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:a.fecha2daSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!a.realizada2daSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisin Excepcional"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisin"}),i.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:a.fechaSupervisionExcepcional||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!a.realizadaSupervisionExcepcional,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Gua (Empresa)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Gua"}),i.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:a.nombreMaestroGuia||"",onChange:o,className:s+" mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Telfono)"}),i.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:a.contactoMaestroGuia||"",onChange:o,className:s+" mt-1"})]})]})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),i.jsx("button",{type:"button",onClick:l,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},cZe=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(!0),n=N.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Ag[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:TB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,o]=N.useState(n),[l,c]=N.useState(null),[u,d]=N.useState(""),[f,h]=N.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(!1),[j,O]=N.useState(null);N.useEffect(()=>{a(!0);const V=tZe(Y=>{t(Y),a(!1)});return()=>V()},[]);const B=N.useCallback(V=>{const{name:Y,value:K}=V.target;o(J=>({...J,[Y]:K}))},[]),T=N.useCallback(V=>{const{name:Y,value:K}=V.target;h(J=>({...J,[Y]:K}))},[]),C=N.useCallback(()=>{o(n),c(null),g(null)},[n]),_=async V=>{V.preventDefault(),g(null);const K=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(J=>{var R;return!((R=s[J])!=null&&R.trim())});if(K){g(`El campo '${K}' es obligatorio.`);return}try{l?await MW(l,s):await rZe(s),C()}catch(J){console.error(J),g("No se pudo guardar el registro.")}},S=N.useCallback(V=>{window.scrollTo({top:0,behavior:"smooth"}),c(V.id),o(V)},[]),L=async V=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await aZe(V)}catch(Y){console.error(Y),g("No se pudo eliminar el registro.")}},P=V=>{O(V),w(!0)},k=()=>{O(null),w(!1)},M=async V=>{try{await MW(V.id,V),k()}catch(Y){console.error(Y),alert("No se pudieron guardar los cambios de supervisin.")}},U=()=>{const V=["Nombre","RUT","Curso 2025","Profesor Tutor","1 Visita 1 Semestre","Realizada 1 Visita S1","2 Visita 1 Semestre","Realizada 2 Visita S1","Visita Emergencia 1 Semestre","3 Visita","Realizada 3 Visita S2","4 Visita","Realizada 4 Visita S2","Empresa","RUT-Empresa","Direccin","Comuna","Estado","Fecha de Desvinculacin","Motivo Desvinculacin","Maestro Gua","Correo maestro gua"],Y=Ts.aoa_to_sheet([V]),K=Ts.book_new();Ts.book_append_sheet(K,Y,"Plantilla"),b1(K,"Plantilla_Seguimiento_Dual.xlsx")},z=V=>{var J;const Y=(J=V.target.files)==null?void 0:J[0];if(!Y)return;v({message:"Procesando archivo...",isError:!1});const K=new FileReader;K.onload=async R=>{var F;try{const W=new Uint8Array((F=R.target)==null?void 0:F.result),X=Bb(W,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ne=X.SheetNames[0],le=X.Sheets[ne],ie=Ts.sheet_to_json(le,{raw:!1,dateNF:"yyyy-mm-dd"});if(ie.length===0)throw new Error("El archivo est vaco.");const ae={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1 visita 1 semestre":"fecha1raSupervision1erSemestre","realizada 1 visita s1":"realizada1raSupervision1erSemestre","2 visita 1 semestre":"fecha2daSupervision1erSemestre","realizada 2 visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1 semestre":"fechaSupervisionExcepcional","3 visita":"fecha1raSupervision2doSemestre","realizada 3 visita s2":"realizada1raSupervision2doSemestre","4 visita":"fecha2daSupervision2doSemestre","realizada 4 visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",direccin:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculacin":"fechaDesvinculacion","motivo desvinculacin":"motivoDesvinculacion","maestro gua":"nombreMaestroGuia","correo maestro gua":"contactoMaestroGuia"},Ae=Object.keys(ie[0]).map(Le=>Le.trim().toLowerCase()),re=["nombre","rut","curso 2025","empresa","estado"].find(Le=>!Ae.includes(Le));if(re)throw new Error(`Falta la columna requerida: '${re}'`);const Re=ie.map((Le,Te)=>{try{const de={};for(const Ce in Le){const me=ae[Ce.trim().toLowerCase()];if(me){let ye=Le[Ce];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(me)?(ye=iZe(ye),ye&&(de[me]=ye)):me.includes("realizada")?de[me]=oZe(ye):ye!=null&&ye!==""&&(de[me]=String(ye).trim())}}return!de.nombreEstudiante||!de.rutEstudiante?(console.warn(`Fila ${Te+2}: Faltan campos requeridos`),null):de}catch(de){return console.error(`Error procesando fila ${Te+2}:`,de),null}}).filter(Le=>Le!==null);if(console.log("Registros procesados:",Re),Re.length>0){const{updated:Le,created:Te}=await nZe(Re);v({message:`Carga exitosa. ${Te} registros creados, ${Le} actualizados.`,isError:!1})}else v({message:"No se encontraron registros vlidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(W){console.error("Error completo:",W),v({message:`Error al procesar el archivo: ${W.message}. Verifique que las fechas estn en formato correcto.`,isError:!0})}},K.readAsArrayBuffer(Y)},Q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",q=N.useMemo(()=>e.filter(V=>(u===""||V.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||V.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||V.rutEstudiante.includes(u))&&(f.curso===""||V.curso===f.curso)&&(f.empresa===""||V.nombreEmpresa===f.empresa)&&(f.estado===""||V.estado===f.estado)&&(f.comuna===""||V.comuna===f.comuna)&&(f.profesor===""||V.profesorTutorEmpresa===f.profesor)).sort((V,Y)=>V.nombreEstudiante.localeCompare(Y.nombreEstudiante)),[e,u,f]);return N.useMemo(()=>{const V=new Set,Y=new Set;return e.forEach(K=>{K.nombreEmpresa&&V.add(K.nombreEmpresa),K.comuna&&Y.add(K.comuna)}),{empresas:Array.from(V).sort(),comunas:Array.from(Y).sort()}},[e]),r?i.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Prctica Dual"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:l?"Editando registro existente.":"Registre un nuevo estudiante en prctica."})]})]}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),i.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:B,className:Q,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),i.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:B,className:Q,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{name:"curso",value:s.curso,onChange:B,className:Q,required:!0,children:Ag.map(V=>i.jsx("option",{value:V,children:V},V))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),i.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:B,className:Q,children:[i.jsx("option",{value:"",children:"Seleccione un profesor"}),UO.map(V=>i.jsx("option",{value:V,children:V},V))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),i.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:B,className:Q,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),i.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:B,className:Q})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Direccin Empresa"}),i.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:B,className:Q})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),i.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:B,className:Q})]}),i.jsxs("div",{className:"lg:col-span-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),i.jsx("select",{name:"estado",value:s.estado,onChange:B,className:Q,children:TB.map(V=>i.jsx("option",{value:V,children:V},V))})]})]}),s.estado==="Desvinculado"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculacin"}),i.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:B,className:`${Q} border-red-300`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculacin"}),i.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:B,className:`${Q} border-red-300`})]})]}),m&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),i.jsxs("div",{className:"flex justify-end items-center gap-4",children:[l&&i.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:l?"Actualizar":"Agregar"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[i.jsx("button",{onClick:U,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),i.jsx("input",{type:"file",onChange:z,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&i.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[i.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:V=>d(V.target.value),className:`${Q} md:col-span-2 lg:col-span-1`}),i.jsxs("select",{name:"curso",value:f.curso,onChange:T,className:Q,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),Ag.map(V=>i.jsx("option",{children:V},V))]}),i.jsxs("select",{name:"estado",value:f.estado,onChange:T,className:Q,children:[i.jsx("option",{value:"",children:"Todos los Estados"}),TB.map(V=>i.jsx("option",{children:V},V))]}),i.jsxs("select",{name:"profesor",value:f.profesor,onChange:T,className:Q,children:[i.jsx("option",{value:"",children:"Todos los Profesores"}),UO.map(V=>i.jsx("option",{children:V},V))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:q.map(V=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:V.nombreEstudiante}),i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:V.curso})]}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.nombreEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.profesorTutorEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${sZe[V.estado]}`,children:V.estado})}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[i.jsx("button",{onClick:()=>P(V),className:"text-blue-600 hover:underline",children:"Supervisin"}),i.jsx("button",{onClick:()=>S(V),className:"text-yellow-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>L(V.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},V.id))})]})})]}),y&&j&&i.jsx(lZe,{record:j,onClose:k,onSave:M})]})},XM="actividades_remotas",bue="respuestas_actividades",yue="pruebas_estandarizadas",uZe="usuarios",wue=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},YM=e=>{const t=wue(e);return t?t.toISOString():void 0},a_=e=>{const t=wue(e);return t?t.toISOString().split("T")[0]:void 0},JM=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:ir.fromDate(t)},ZM=e=>ir.fromDate(new Date(e||new Date().toISOString())),dZe=e=>!!e&&/^data:/.test(e),$b=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map($b);const t={};return Object.entries(e).forEach(([r,a])=>{a!==void 0&&(t[r]=$b(a))}),t},fZe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL invlida");const r=t[1]||"application/octet-stream",a=t[2];let n="";if(typeof atob=="function")n=atob(a);else{const l=typeof Buffer<"u"?Buffer:null;if(l)n=l.from(a,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=n.length,o=new Uint8Array(s);for(let l=0;l<s;l++)o[l]=n.charCodeAt(l);return{bytes:o,contentType:r}},AZe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:YM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:a_(t.plazoEntrega)||a_(new Date)}},hZe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:YM(t.fechaCompletado)||new Date().toISOString()}},mZe=e=>{const t=e.data()||{};return{id:e.id,...t}},pZe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:YM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:a_(t.plazoEntrega)||a_(new Date)}},gZe=e=>{const t=Dt(ht(st,XM),Yt("fechaCreacion","desc"));return nr(t,r=>e(r.docs.map(AZe)),r=>{console.error("subscribeToActividades error:",r),e([])})},xZe=(e,t)=>{const r=ht(st,bue),a=Dt(r,Yt("fechaCompletado","desc"));return nr(a,n=>e(n.docs.map(hZe)),n=>{console.error("subscribeToRespuestas error:",n),e([])})},vZe=e=>{const t=Dt(ht(st,uZe),Yt("nombreCompleto","asc"));return nr(t,r=>e(r.docs.map(mZe)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},bZe=e=>{const t=Dt(ht(st,yue),Yt("fechaCreacion","desc"));return nr(t,r=>e(r.docs.map(pZe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},yZe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:a,...n}=e||{},s=$b({...n,fechaCreacion:ZM(r),plazoEntrega:JM(a)});return(await Zr(ht(st,XM),s)).id},wZe=async(e,t)=>{const{fechaCreacion:r,plazoEntrega:a,...n}=t||{},s=$b({...n});r!==void 0&&(s.fechaCreacion=ZM(r)),a!==void 0&&(s.plazoEntrega=JM(a)),await Bo(Jt(st,XM,e),s)},NZe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:a,...n}=e||{},s=$b({...n,fechaCreacion:ZM(r),plazoEntrega:JM(a)});return(await Zr(ht(st,yue),s)).id},EZe=async(e,t)=>{const r=$b(t);await Bo(Jt(st,bue,e),r)},CZe=(e,t)=>{if(!t||t<=0)return"1.0";const a=t*.6;let n;return e>=a?n=4+3*(e-a)/(t-a+1e-9):n=1+3*e/(a+1e-9),n=Math.max(1,Math.min(7,n)),n.toFixed(1)},jZe=async(e,t,r)=>{const{bytes:a,contentType:n}=fZe(e),s=Date.now(),o=t.replace(/\s+/g,"_"),c=`recursos/${r!==""?r:"general"}/${s}/${o}`,u=rx(gS,c);await AS(u,a,{contentType:n});const d=await NN(u);return{nombre:t,url:d}},kZe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],a=await Promise.all(r.map(async(o,l)=>{if(dZe(o==null?void 0:o.url)){const c=(o==null?void 0:o.nombre)||`archivo_${l}.bin`;return jZe(o.url,c,t)}return{nombre:(o==null?void 0:o.nombre)||`archivo_${l}`,url:o==null?void 0:o.url}})),n={...e,recursos:{...e.recursos||{},archivos:a}};return yZe(n)},Hy=e=>e?new Date(e).toLocaleDateString("es-CL"):"",UW=e=>e?new Date(e).toLocaleString("es-CL"):"",_Ze=e=>new Promise((t,r)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(String(a.result)),a.onerror=n=>r(n)}),Nue=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")||a.includes("Aspecto")||a.includes("aspecto"))&&(console.warn(` OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},hi=(e,t)=>{if(t&&Nue(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(n=>hi(n,`${t}-array-item`)).join(", ");if(Object.keys(e).some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")))return"[Rbrica de evaluacin]";const a=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const n of a)if(e[n]&&typeof e[n]=="string")return e[n];try{const n=JSON.stringify(e);return n.length>100?"[Objeto complejo]":n}catch{return"[Objeto no serializable]"}}return String(e)},Jl=(e,t,...r)=>{if(Nue(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const n=hi(e[a],`${t}-${a}`);if(n&&n!=="[Objeto complejo]"&&n!=="[Objeto no serializable]")return n}return typeof e=="string"?e:"[Sin contenido disponible]"},Sn=({content:e,context:t="unknown"})=>{try{const r=hi(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}},l6={Quiz:[5,10,15],"Trminos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de Lectura":[1,2,3,4,5]},c6=["Localizar informacin","Interpretar y relacionar","Reflexionar","Extraer informacin explcita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],SZe=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[n,s]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(null),[d,f]=N.useState(null),[h,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(!1),[w,j]=N.useState(!1),[O,B]=N.useState(!1),[T,C]=N.useState(!0),[_,S]=N.useState(null),[L,P]=N.useState(""),[k,M]=N.useState(null),[U,z]=N.useState(null),[Q,q]=N.useState([]),[V,Y]=N.useState("carpetas"),[K,J]=N.useState("Todas"),[R,F]=N.useState("Todos"),[W,X]=N.useState(null),[ne,le]=N.useState([]),[ie,ae]=N.useState(!1),[Ae,ke]=N.useState(null),[re,Re]=N.useState(null),[Le,Te]=N.useState([]),[de,Ce]=N.useState(""),me={asignatura:En[0],nivel:"",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[ye,oe]=N.useState(me),fe={asignatura:En[0],nivel:"",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[be,Pe]=N.useState(fe);N.useEffect(()=>{C(!0);const ge=gZe(t),he=bZe(a),Be=xZe(s),Qe=vZe(Fe=>{l(Fe),C(!1)});return()=>{ge(),he(),Be(),Qe()}},[]);const $e=ge=>{oe(he=>({...he,[ge.target.name]:ge.target.value}))},Ke=ge=>{Pe(he=>({...he,[ge.target.name]:ge.target.value}))},nt=ge=>{oe(he=>({...he,recursos:{...he.recursos,[ge.target.name]:ge.target.value}}))},He=ge=>{ge.target.files&&q(Array.from(ge.target.files))},it=ge=>{oe(he=>{const Be=he.tipos.includes(ge)?he.tipos.filter(Fe=>Fe!==ge):[...he.tipos,ge],Qe={...he.cantidadPreguntas};return Be.includes(ge)?Qe[ge]||(Qe[ge]=l6[ge][0]):delete Qe[ge],{...he,tipos:Be,cantidadPreguntas:Qe}})},xt=(ge,he)=>{oe(Be=>({...Be,cantidadPreguntas:{...Be.cantidadPreguntas,[ge]:he}}))},Et=(ge,he=!1)=>{(he?Pe:oe)(Qe=>{const Fe=Qe.estudiantesDestino||[],qe=Fe.includes(ge)?Fe.filter(Xe=>Xe!==ge):[...Fe,ge];return{...Qe,estudiantesDestino:qe}})},gt=()=>{const{tipos:ge,contenido:he,asignatura:Be,nivel:Qe,cantidadPreguntas:Fe}=ye;let qe=`Eres un experto diseador de actividades pedaggicas con nfasis en la Taxonoma de Bloom y metodologas activas de aprendizaje. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${he}"
Asignatura: ${Be}
Nivel educativo: ${Qe}

REQUISITOS PEDAGGICOS:
1. Asegura que las preguntas sean claras, concisas y libres de ambigedades
2. Distribuye las preguntas segn Taxonoma de Bloom: 20% conocimiento, 30% comprensin, 30% aplicacin, 20% anlisis/evaluacin 
3. Evita preguntas demasiado simples o demasiado complejas para el nivel educativo
4. Incluye contextos reales y aplicaciones prcticas cuando sea posible
5. Para mltiple opcin, todas las opciones deben ser plausibles (no incluir opciones obviamente incorrectas)
6. Las rbricas de desarrollo deben incluir criterios especficos y niveles de desempeo claros
7. En comprensin lectora, genera textos originales y preguntas de distinta complejidad cognitiva

Genera los siguientes elementos:
- introduccion: breve y motivadora que contextualice el aprendizaje
- panelDidactico: Un objeto JSON con la siguiente estructura:
  {
    "titulo": "Ttulo descriptivo del tema central",
    "subtitulos": [
      {
        "titulo": "Primer subttulo",
        "texto": "Explicacin detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Segundo subttulo",
        "texto": "Explicacin detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Tercer subttulo (opcional)",
        "texto": "Explicacin detallada (80-120 palabras) con ejemplos y definiciones"
      }
    ],
    "conceptosClave": [
      "Concepto 1: breve definicin",
      "Concepto 2: breve definicin",
      "Concepto 3: breve definicin"
    ]
  }
  En total debe tener entre 300-500 palabras con contenido educativo detallado que explique los conceptos clave del tema, incluya ejemplos claros y conocimiento esencial que el estudiante necesita para responder las actividades.
- actividades: objeto con propiedades por tipo:
`;return ge.forEach(Xe=>{const yt=Fe[Xe]||l6[Xe][0];switch(Xe){case"Quiz":qe+=`- "Quiz": Array de ${yt} objetos { 
  pregunta: clara y contextualizada,
  opciones: array de 4 alternativas plausibles con opciones de distinta dificultad,
  respuestaCorrecta: la opcin correcta (no ambigua),
  puntaje: 1 para cada pregunta
}
`;break;case"Comprensin de Lectura":qe+=`- "Comprensin de Lectura": Objeto { 
  texto: texto original de 200-300 palabras adaptado al nivel con informacin relevante,
  preguntas: Array de ${yt} objetos {
    pregunta: enfocadas en distintos niveles de comprensin (literal, inferencial y crtica),
    opciones: array de 4 alternativas plausibles sin pistas obvias,
    respuestaCorrecta: la opcin correcta basada en el texto,
    puntaje: 1 para cada pregunta
  }
}
`;break;case"Trminos Pareados":qe+=`- "Trminos Pareados": Array de ${yt} objetos {
  concepto: trmino clave del contenido, claro y especfico,
  definicion: explicacin precisa y nica que no sea ambigua
}
`;break;case"Desarrollo":qe+=`- "Desarrollo": Array de ${yt} objetos {
  pregunta: pregunta que fomente el pensamiento crtico y la aplicacin de conocimientos,
  rubrica: criterios de evaluacin detallados con niveles de desempeo especficos (sobresaliente, adecuado, en desarrollo, inicial)
}
`;break}}),qe+=`
EJEMPLOS DE ALTA CALIDAD POR TIPO:
`,ge.includes("Quiz")&&(qe+=`
Quiz de ejemplo: {
  "pregunta": "En el contexto de la funcin fotosinttica de las plantas, qu ocurrira si una planta se expone a luz con longitudes de onda exclusivamente verdes?",
  "opciones": [
    "La planta aumentara su tasa fotosinttica debido a la mayor disponibilidad de luz",
    "La planta morira inmediatamente por exceso de radiacin",
    "La tasa fotosinttica disminuira significativamente ya que el pigmento clorofila refleja la luz verde",
    "No habra cambios en la fotosntesis porque las plantas no dependen del espectro luminoso"
  ],
  "respuestaCorrecta": "La tasa fotosinttica disminuira significativamente ya que el pigmento clorofila refleja la luz verde",
  "puntaje": 1
}
`),ge.includes("Comprensin de Lectura")&&(qe+=`
Comprensin de Lectura de ejemplo: {
  "texto": "La revolucin industrial transform profundamente las estructuras sociales y econmicas de Europa durante el siglo XIX. El paso de una economa agraria y artesanal a una dominada por la industria y la manufactura mecanizada signific cambios sin precedentes en las condiciones laborales. Las jornadas extenuantes de 14-16 horas, el trabajo infantil y la falta de seguridad caracterizaron los primeros aos de industrializacin. No obstante, este periodo tambin represent un aumento en la produccin de bienes, mejoras en el transporte y comunicaciones, y eventualmente, el surgimiento de una clase media con mayor acceso a productos manufacturados. Estos cambios sentaron las bases para movimientos obreros que, con el tiempo, lograron mejoras significativas en los derechos laborales que persisten hasta la actualidad.",
  "preguntas": [
    {
      "pregunta": "Segn el texto, cul fue una consecuencia negativa inmediata de la revolucin industrial?",
      "opciones": [
        "El desplome de los sistemas de transporte",
        "Las extenuantes jornadas laborales de 14-16 horas",
        "La disminucin en la produccin de bienes manufacturados",
        "La eliminacin de la clase media europea"
      ],
      "respuestaCorrecta": "Las extenuantes jornadas laborales de 14-16 horas",
      "puntaje": 1
    }
  ]
}
`),qe},Ve=()=>{const{contenido:ge,objetivosAprendizaje:he,asignatura:Be,nivel:Qe}=be;return`Eres un experto pedagogo especializado en evaluacin educativa y diseo de pruebas estandarizadas tipo SIMCE.
Responde EXCLUSIVAMENTE con JSON vlido segn la estructura solicitada.

INFORMACIN CURRICULAR:
- Asignatura: ${Be}
- Nivel educativo: ${Qe}
- Contenido principal: ${ge}
- Objetivos de Aprendizaje: ${he}

REQUISITOS PEDAGGICOS:
1. Genera preguntas equilibradas en dificultad: 25% bsicas, 50% intermedias, 25% avanzadas
2. Usa contextos reales y significativos para los estudiantes
3. Distribuye las habilidades cognitivas de manera equilibrada segn taxonoma SIMCE
4. Las preguntas deben evaluar aprendizajes significativos, no memorizacin de detalles irrelevantes
5. Los distractores (opciones incorrectas) deben ser plausibles y revelar concepciones errneas comunes
6. Los textos deben ser originales, apropiados para el nivel, y con complejidad adecuada
7. Las preguntas deben evaluar distintos niveles de comprensin y aplicacin

FORMATO REQUERIDO:
{
  "titulo": "Ttulo descriptivo de la prueba",
  "instrucciones": "Instrucciones claras y detalladas para los estudiantes",
  "textos": [
    {
      "id": 1,
      "titulo": "Ttulo representativo del texto",
      "contenido": "Texto original y apropiado de 250-350 palabras con complejidad adecuada al nivel",
      "tipo": "narrativo/informativo/argumentativo/poetico",
      "palabras": 300
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado claro que evale una habilidad especfica",
      "opciones": ["Alternativa correcta", "Distractor plausible 1", "Distractor plausible 2", "Distractor plausible 3"],
      "respuestaCorrecta": "A",
      "habilidad": "Habilidad SIMCE especfica que evala",
      "justificacion": "Explicacin pedaggica de por qu es correcta y los errores conceptuales en los distractores",
      "textoId": 1
    }
  ]
}

REQUISITOS ESPECFICOS:
- ${Be==="Lenguaje y Comunicacin"||Be==="Lengua y Literatura"?"3-4 textos de distintos tipos (narrativo, informativo, argumentativo y/o potico) con temticas complementarias":"2-3 textos informativos con contenido relevante para el objetivo de aprendizaje"}
- Exactamente 30 preguntas numeradas del 1 al 30
- 4 opciones por pregunta (A-D) con una nica respuesta correcta
- Habilidades a evaluar segn SIMCE: ${c6.join(", ")}
- Para preguntas basadas en textos: incluir el "textoId" correspondiente
- Sin comentarios, explicaciones ni marcas fuera de la estructura JSON

IMPORTANTE: Generar un instrumento de evaluacin de ALTA CALIDAD que pueda ser usado directamente en un contexto escolar real.`};function Bt(ge,he){if(ge==="Desarrollo"&&Array.isArray(he))return he.map((Be,Qe)=>{if(typeof Be=="string"){const Fe=Be.match(/^(.*?)(?:R[u]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Fe?{pregunta:Jl(Fe[1],`desarrollo-pregunta-${Qe}`),rubrica:Jl(Fe[2],`desarrollo-rubrica-${Qe}`)}:{pregunta:Jl(Be,`desarrollo-pregunta-simple-${Qe}`),rubrica:""}}if(Be&&typeof Be=="object"){const Fe=Jl(Be,`desarrollo-obj-pregunta-${Qe}`,"pregunta","Pregunta","texto");let qe="";if(Be.rubrica||Be.Rubrica||Be.rbrica||Be.Rbrica){const Xe=Be.rubrica||Be.Rubrica||Be.rbrica||Be.Rbrica;qe=hi(Xe,`desarrollo-rubrica-${Qe}`)}return{pregunta:Fe,rubrica:qe}}return{pregunta:hi(Be,`desarrollo-fallback-${Qe}`),rubrica:""}});if(ge==="Trminos Pareados"&&Array.isArray(he))return he.map((Be,Qe)=>{if(typeof Be=="string"){const Fe=Be.match(/^(.+?)[\s:-]+(.+)$/);return Fe?{id:Qe,concepto:Jl(Fe[1],`pareados-concepto-${Qe}`),definicion:Jl(Fe[2],`pareados-definicion-${Qe}`)}:{id:Qe,concepto:Jl(Be,`pareados-concepto-simple-${Qe}`),definicion:""}}return Be&&typeof Be=="object"?{id:Qe,concepto:Jl(Be,`pareados-obj-concepto-${Qe}`,"concepto","termino"),definicion:Jl(Be,`pareados-obj-definicion-${Qe}`,"definicion","significado")}:{id:Qe,concepto:hi(Be,`pareados-fallback-${Qe}`),definicion:""}});if(ge==="Comprensin de Lectura"){if(he&&typeof he=="object"&&!Array.isArray(he)&&Array.isArray(he.preguntas))return{texto:Jl(he,"comprension-texto","texto"),preguntas:he.preguntas.map((Be,Qe)=>({pregunta:Jl(Be,`comprension-pregunta-${Qe}`,"pregunta"),opciones:Array.isArray(Be.opciones)?Be.opciones.map(Fe=>hi(Fe,`comprension-opcion-${Qe}`)):[],respuestaCorrecta:hi(Be.respuestaCorrecta,`comprension-respuesta-${Qe}`),puntaje:typeof Be.puntaje=="number"?Be.puntaje:1}))};if(Array.isArray(he)){const Be=he.map((Fe,qe)=>Jl(Fe,`comprension-bloque-${qe}`,"texto")).join(`

---

`),Qe=he.flatMap(Fe=>Array.isArray(Fe.preguntas)?Fe.preguntas:[]);return{texto:Be,preguntas:Qe.map((Fe,qe)=>({pregunta:Jl(Fe,`comprension-combined-pregunta-${qe}`,"pregunta"),opciones:Array.isArray(Fe.opciones)?Fe.opciones.map(Xe=>hi(Xe,`comprension-combined-opcion-${qe}`)):[],respuestaCorrecta:hi(Fe.respuestaCorrecta,`comprension-combined-respuesta-${qe}`),puntaje:typeof Fe.puntaje=="number"?Fe.puntaje:1}))}}}return ge==="Quiz"&&Array.isArray(he)?he.map((Be,Qe)=>({pregunta:Jl(Be,`quiz-pregunta-${Qe}`,"pregunta"),opciones:Array.isArray(Be.opciones)?Be.opciones.map(Fe=>hi(Fe,`quiz-opcion-${Qe}`)):[],respuestaCorrecta:hi(Be.respuestaCorrecta,`quiz-respuesta-${Qe}`),puntaje:typeof Be.puntaje=="number"?Be.puntaje:1})):he}const dr=async ge=>{var he;if(ge.preventDefault(),!ye.contenido.trim()||ye.tipos.length===0){S("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),S(null);try{const Be=await Promise.all(Q.map(async Tt=>({nombre:Tt.name,url:await _Ze(Tt)}))),Qe=gt(),Fe=await so.currentUser.getIdToken(),qe=await fetch("/api/generarActividadRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Fe}`},body:JSON.stringify({prompt:Qe,formData:ye,selectedFiles:Q})});if(!qe.ok)throw new Error("Error al generar la actividad con IA");const Xe=await qe.json(),yt={};for(const Tt of ye.tipos){const Vt=(he=Xe.actividades)==null?void 0:he[Tt];yt[Tt]=Bt(Tt,Vt)}let wt="";Xe.panelDidactico&&(wt=typeof Xe.panelDidactico=="string"?Xe.panelDidactico:JSON.stringify(Xe.panelDidactico));const Ht={id:"",fechaCreacion:new Date().toISOString(),...ye,recursos:{...ye.recursos,archivos:Be},introduccion:hi(Xe.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",panelDidactico:wt,generatedContent:yt};M(Ht)}catch(Be){S(`Error al generar la actividad: ${(Be==null?void 0:Be.message)||Be}`)}finally{y(!1)}},er=async ge=>{if(ge.preventDefault(),!be.contenido.trim()||!be.objetivosAprendizaje.trim()){S("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),S(null);try{const he=Ve(),Be=await so.currentUser.getIdToken(),Qe=await fetch("/api/generarPruebaRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Be}`},body:JSON.stringify({prompt:he,pruebaFormData:be})});if(!Qe.ok)throw new Error("Error al generar la prueba con IA");const Fe=await Qe.json();if(!Fe.preguntas||!Array.isArray(Fe.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas vlido");const qe=(Fe.textos||[]).map((wt,Ht)=>({id:wt.id||Ht+1,titulo:hi(wt.titulo,`texto-titulo-${Ht}`)||`Texto ${Ht+1}`,contenido:hi(wt.contenido,`texto-contenido-${Ht}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(wt.tipo)?wt.tipo:"informativo",palabras:wt.palabras||(wt.contenido?String(wt.contenido).split(" ").length:0)})),Xe=Fe.preguntas.slice(0,30).map((wt,Ht)=>({numero:wt.numero||Ht+1,pregunta:hi(wt.pregunta,`pregunta-${Ht}`)||`Pregunta ${Ht+1}`,opciones:Array.isArray(wt.opciones)&&wt.opciones.length>=4?wt.opciones.slice(0,4).map((Tt,Vt)=>hi(Tt,`pregunta-opcion-${Ht}-${Vt}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(wt.respuestaCorrecta)?wt.respuestaCorrecta:"A",habilidad:c6.includes(wt.habilidad)?wt.habilidad:c6[0],justificacion:hi(wt.justificacion,`justificacion-${Ht}`)||"Justificacin no disponible",...wt.textoId&&typeof wt.textoId=="number"?{textoId:wt.textoId}:{}})),yt={id:"",fechaCreacion:new Date().toISOString(),...be,titulo:hi(Fe.titulo,"prueba-titulo")||`Prueba ${be.asignatura}`,instrucciones:hi(Fe.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:qe,preguntas:Xe};z(yt)}catch(he){S(`Error al generar la prueba: ${(he==null?void 0:he.message)||he}`)}finally{y(!1)}},Er=async()=>{if(k)try{j(!0),await kZe(k),oe(me),q([]),m(!1),M(null)}catch(ge){console.error("Error al guardar la actividad con archivos:",ge),S("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{j(!1)}},$r=async()=>{if(U)try{j(!0);const ge={...U,cursosDestino:U.cursosDestino||[],estudiantesDestino:U.estudiantesDestino||[],textos:U.textos||[],preguntas:U.preguntas.map(he=>({...he,textoId:he.textoId||null}))};await NZe(ge),Pe(fe),x(!1),z(null)}catch(ge){console.error("Error al guardar la prueba:",ge),S("No se pudo guardar la prueba.")}finally{j(!1)}},br=N.useMemo(()=>{var Be,Qe,Fe;const ge=c||d;if(!ge||!o.length)return[];const he=new Map;return!((Be=ge.cursosDestino)!=null&&Be.length)&&!((Qe=ge.estudiantesDestino)!=null&&Qe.length)?[]:((Fe=ge.estudiantesDestino)!=null&&Fe.length&&o.filter(qe=>qe.profile===zt.ESTUDIANTE&&ge.estudiantesDestino.includes(qe.nombreCompleto)).forEach(qe=>he.set(qe.id,qe)),Array.from(he.values()).sort((qe,Xe)=>qe.nombreCompleto.localeCompare(Xe.nombreCompleto)))},[c,d,o]),kn=N.useMemo(()=>{const ge=(c==null?void 0:c.id)||(d==null?void 0:d.id);return n.filter(he=>he.actividadId===ge)},[n,c,d]),Pr=N.useMemo(()=>o.filter(ge=>ge.profile===zt.ESTUDIANTE).sort((ge,he)=>ge.nombreCompleto.localeCompare(he.nombreCompleto)),[o]),Pa=N.useMemo(()=>L.trim()?Pr.filter(ge=>ge.nombreCompleto.toLowerCase().includes(L.toLowerCase())):Pr,[Pr,L]),Fn=N.useMemo(()=>{const ge=new Set;return e.forEach(he=>{(he.estudiantesDestino||[]).forEach(Be=>{const Qe=o.find(Fe=>Fe.profile===zt.ESTUDIANTE&&Fe.nombreCompleto===Be);Qe&&ge.add(Qe.id)})}),r.forEach(he=>{(he.estudiantesDestino||[]).forEach(Be=>{const Qe=o.find(Fe=>Fe.profile===zt.ESTUDIANTE&&Fe.nombreCompleto===Be);Qe&&ge.add(Qe.id)})}),n.forEach(he=>ge.add(he.estudianteId)),o.filter(he=>he.profile===zt.ESTUDIANTE&&ge.has(he.id)).sort((he,Be)=>he.nombreCompleto.localeCompare(Be.nombreCompleto))},[e,r,n,o]),Rr=N.useMemo(()=>o.find(ge=>ge.id===Ae)||null,[o,Ae]),mr=N.useMemo(()=>{if(!Rr)return{asignadas:[],respuestas:[]};const ge=[...e.filter(Be=>(Be.estudiantesDestino||[]).includes(Rr.nombreCompleto)).map(Be=>({tipo:"Actividad",item:Be})),...r.filter(Be=>(Be.estudiantesDestino||[]).includes(Rr.nombreCompleto)).map(Be=>({tipo:"Prueba",item:Be}))],he=n.filter(Be=>Be.estudianteId===Rr.id);return{asignadas:ge,respuestas:he}},[Rr,e,r,n]),Yr=()=>i.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas","gestion"].map(ge=>i.jsxs("button",{onClick:()=>{Y(ge),u(null),f(null),ke(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${V===ge?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[ge==="carpetas"&&i.jsx(tz,{size:18}),ge==="actividades"&&i.jsx(ru,{size:18}),ge==="pruebas"&&i.jsx(Jte,{size:18}),ge==="carpetas"?"Carpetas de Estudiantes":ge==="actividades"?"Actividades Remotas":ge==="pruebas"?"Pruebas Estandarizadas":"Gestin de Trabajos"]},ge)),i.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(h1,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:ge=>P(ge.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),V==="actividades"&&!k&&!c&&i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(vC,{size:18})," Nueva"]}),V==="pruebas"&&!U&&!d&&i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(vC,{size:18})," Nueva"]})]})]}),ps=N.useMemo(()=>{const ge=new Set;return e.forEach(he=>(he==null?void 0:he.asignatura)&&ge.add(he.asignatura)),["Todas",...Array.from(ge).sort()]},[e]),Ya=N.useMemo(()=>{const ge=new Set;return e.forEach(Be=>(Be==null?void 0:Be.nivel)&&ge.add(Be.nivel)),["Todos","",...Array.from(ge).filter(Be=>!!Be&&Be!=="").sort()]},[e]),Dn=N.useMemo(()=>{const ge=[];for(const he of e){const Be=he.estudiantesDestino||[];for(const Qe of Be){const Fe=o.find(Xe=>Xe.profile===zt.ESTUDIANTE&&Xe.nombreCompleto===Qe)||null,qe=Fe?n.find(Xe=>Xe.estudianteId===Fe.id&&Xe.actividadId===he.id):void 0;ge.push({actividad:he,estudiante:Fe,estado:qe?"Completado":"Pendiente",respuesta:qe})}}return ge},[e,o,n]),Rs=N.useMemo(()=>Dn.filter(ge=>{const he=K==="Todas"||ge.actividad.asignatura===K,Be=R==="Todos"||ge.actividad.nivel===R;return he&&Be}),[Dn,K,R]),Zt=()=>{var ge;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Gestin de Trabajos"}),i.jsx("p",{className:"text-slate-500",children:"Organiza envos y realizados por asignatura y nivel. Reasigna actividades ya creadas sin consumir tokens."})]}),i.jsxs("div",{className:"md:ml-auto flex flex-wrap gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),i.jsx("select",{value:K,onChange:he=>J(he.target.value),className:"border-slate-300 rounded-md",children:ps.map(he=>i.jsx("option",{value:he,children:he},he))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),i.jsx("select",{value:R,onChange:he=>F(he.target.value),className:"border-slate-300 rounded-md",children:Ya.map(he=>i.jsx("option",{value:he,children:he},he))})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Asignatura"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nivel"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipos"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Rs.map((he,Be)=>{var Qe,Fe,qe;return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:i.jsx(Sn,{content:he.actividad.asignatura,context:"gestion-asig"})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:he.actividad.nivel||""}),i.jsx("td",{className:"px-4 py-3 text-sm",children:((Qe=he.estudiante)==null?void 0:Qe.nombreCompleto)||""}),i.jsx("td",{className:"px-4 py-3 text-sm",children:(Fe=he.actividad.tipos)==null?void 0:Fe.join(", ")}),i.jsx("td",{className:"px-4 py-3 text-sm",children:he.estado==="Completado"?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[i.jsx(nn,{size:14})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[i.jsx(Wc,{size:14})," Pendiente"]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:he.respuesta?`${he.respuesta.puntaje}/${he.respuesta.puntajeMaximo}`:""}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:he.respuesta?he.respuesta.nota:""}),i.jsx("td",{className:"px-4 py-3 text-sm",children:he.respuesta?UW(he.respuesta.fechaCompletado):""}),i.jsx("td",{className:"px-4 py-3 text-sm text-right",children:i.jsx("button",{onClick:()=>{X(he.actividad),le([])},className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Reasignar a nuevos estudiantes",children:"Reasignar"})})]},`${he.actividad.id}-${((qe=he.estudiante)==null?void 0:qe.id)||Be}`)})})]})}),W&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Reasignar Actividad"}),i.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Selecciona estudiantes adicionales para la actividad de ",i.jsx("strong",{children:W.asignatura}),"  ",(ge=W.tipos)==null?void 0:ge.join(", "),"."]}),i.jsx("div",{className:"mb-3",children:i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:he=>P(he.target.value),className:"w-full border-slate-300 rounded-md shadow-sm"})}),i.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-md p-2 bg-slate-50",children:(L?Pa:Pr).map(he=>{const Be=(W.estudiantesDestino||[]).includes(he.nombreCompleto);return i.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer ${Be?"opacity-50":"hover:bg-slate-100"}`,children:[i.jsx("input",{type:"checkbox",disabled:Be,checked:ne.includes(he.nombreCompleto),onChange:()=>{le(Qe=>Qe.includes(he.nombreCompleto)?Qe.filter(Fe=>Fe!==he.nombreCompleto):[...Qe,he.nombreCompleto])},className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:he.nombreCompleto,children:he.nombreCompleto}),Be&&i.jsx("span",{className:"ml-auto text-xs text-slate-400",children:"Ya asignado"})]},he.id)})}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{X(null),le([])},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{disabled:ie||ne.length===0,onClick:async()=>{if(W)try{ae(!0);const he=W.estudiantesDestino||[],Be=Array.from(new Set([...he,...ne]));await wZe(W.id,{estudiantesDestino:Be}),X(null),le([])}catch(he){console.error("Error reasignando actividad:",he),S("No se pudo reasignar la actividad.")}finally{ae(!1)}},className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:ie?"Guardando...":"Confirmar reasignacin"})]})]})})]})},xa=()=>{const ge=L?Pa:Fn;return ge.length?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:ge.map(he=>{const Be=n.filter(qe=>qe.estudianteId===he.id),Qe=Be.length,Fe=e.filter(qe=>(qe.estudiantesDestino||[]).includes(he.nombreCompleto)).length+r.filter(qe=>(qe.estudiantesDestino||[]).includes(he.nombreCompleto)).length;return i.jsxs("button",{onClick:()=>ke(he.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[i.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:i.jsx(tz,{})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"font-semibold text-slate-800 truncate",children:he.nombreCompleto}),i.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(jb,{size:14})," ",he.curso||""]})]})]}),i.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:Fe}),i.jsx("p",{className:"text-xs",children:"Asignadas"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:Qe}),i.jsx("p",{className:"text-xs",children:"Entregas"})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Wc,{size:16,className:"opacity-70"}),i.jsx("span",{className:"text-xs mt-1",children:Be.length?Hy(Be.sort((qe,Xe)=>(qe.fechaCompletado||"").localeCompare(Xe.fechaCompletado||"")).slice(-1)[0].fechaCompletado):""})]})]})]},he.id)})}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados an."})},la=()=>{if(!Rr)return null;const{asignadas:ge,respuestas:he}=mr;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>ke(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[i.jsx(xC,{size:18})," Volver"]}),i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial  ",Rr.nombreCompleto]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Ttulo / Asignatura"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ge.map(({tipo:Be,item:Qe})=>{var yt;const Fe=he.find(wt=>wt.actividadId===Qe.id),qe=Be==="Actividad"?`${Qe.asignatura}  ${(yt=Qe.tipos)==null?void 0:yt.join(", ")}`:Qe.titulo,Xe=Qe.plazoEntrega?Hy(Qe.plazoEntrega):"";return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm",children:Be}),i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:i.jsx(Sn,{content:qe,context:"hist-titulo"})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Xe}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Fe?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[i.jsx(nn,{size:14})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[i.jsx(Wc,{size:14})," Pendiente"]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Fe?`${Fe.puntaje}/${Fe.puntajeMaximo}`:""}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Fe?Fe.nota:""})]},Qe.id)})})]})})]})},Ia=()=>{var ge,he,Be;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Sn,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):i.jsx(Sn,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",Hy((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duracin: ${d.duracionMinutos} min`]})]}),i.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(xC,{size:18})," Volver al listado"]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((ge=c==null?void 0:c.tipos)==null?void 0:ge.includes("Desarrollo"))&&i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:br.map(Qe=>{var qe;const Fe=kn.find(Xe=>Xe.estudianteId===Qe.id);return i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:Qe.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Fe?i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Fe?`${Fe.puntaje}/${Fe.puntajeMaximo}`:"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Fe?i.jsx("span",{className:parseFloat(Fe.nota)>=4?"text-green-600":"text-red-600",children:Fe.nota}):"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Fe?UW(Fe.fechaCompletado):"-"}),((qe=c==null?void 0:c.tipos)==null?void 0:qe.includes("Desarrollo"))&&i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Fe?i.jsx("button",{onClick:()=>{var yt,wt,Ht;Re(Fe);const Xe=Array.from({length:((wt=(yt=c.generatedContent)==null?void 0:yt.Desarrollo)==null?void 0:wt.length)||0},(Tt,Vt)=>({index:Vt,puntaje:0,observacion:""}));Te(Xe),Ce(((Ht=Fe==null?void 0:Fe.revisionDocente)==null?void 0:Ht.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):i.jsx("span",{className:"text-slate-400",children:"-"})})]},Qe.id)})})]})})]}),re&&((he=c==null?void 0:c.tipos)==null?void 0:he.includes("Desarrollo"))&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisin de Desarrollo  ",(re==null?void 0:re.estudianteNombre)||""]}),i.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Be=c.generatedContent)==null?void 0:Be.Desarrollo)||[]).map((Qe,Fe)=>{var qe,Xe;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("p",{className:"font-semibold",children:[Fe+1,". ",i.jsx(Sn,{content:Qe.pregunta,context:`revision-pregunta-${Fe}`})]}),Qe.rubrica&&i.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[i.jsx("strong",{children:"Rbrica:"})," ",i.jsx(Sn,{content:Qe.rubrica,context:`revision-rubrica-${Fe}`})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),i.jsx("input",{type:"number",min:0,step:.5,value:((qe=Le[Fe])==null?void 0:qe.puntaje)??0,onChange:yt=>{const wt=Number(yt.target.value)||0;Te(Ht=>{const Tt=[...Ht];return Tt[Fe]={...Tt[Fe]||{index:Fe,puntaje:0},puntaje:wt},Tt})},className:"w-24 border-slate-300 rounded-md"}),i.jsx("input",{type:"text",placeholder:"Observacin (opcional)",value:((Xe=Le[Fe])==null?void 0:Xe.observacion)||"",onChange:yt=>{const wt=yt.target.value;Te(Ht=>{const Tt=[...Ht];return Tt[Fe]={...Tt[Fe]||{index:Fe,puntaje:0},observacion:wt},Tt})},className:"flex-1 border-slate-300 rounded-md"})]})]},Fe)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),i.jsx("textarea",{rows:3,value:de,onChange:Qe=>Ce(Qe.target.value),className:"w-full border-slate-300 rounded-md"})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{Re(null),Te([]),Ce("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:async()=>{if(re)try{B(!0);const Qe=Number(re.puntaje)||0,Fe=Number(re.puntajeMaximo)||0,qe=(Le||[]).reduce((wt,Ht)=>wt+(Number(Ht.puntaje)||0),0),Xe=Qe+qe,yt=CZe(Xe,Fe);await EZe(re.id,{puntaje:Xe,puntajeMaximo:Fe,nota:yt,revisionDocente:{completada:!0,observacionesGenerales:de||"",detalle:Le||[],puntajeDocente:qe}}),Re(null),Te([]),Ce("")}catch(Qe){console.error("Error guardando revisin:",Qe),S("No se pudo guardar la revisin del docente.")}finally{B(!1)}},disabled:O,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:O?"Guardando...":"Guardar Revisin"})]})]})})]})},Ka=()=>{var ge,he;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),i.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(xC,{size:18})," Volver"]})]}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generar una actividad."}),i.jsxs("form",{onSubmit:dr,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:ye.asignatura,onChange:$e,className:"w-full border-slate-300 rounded-md shadow-sm",children:En.map(Be=>i.jsx("option",{value:Be,children:Be},Be))})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),i.jsx("textarea",{name:"instrucciones",value:(ge=ye.recursos)==null?void 0:ge.instrucciones,onChange:nt,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),i.jsx("textarea",{name:"enlaces",value:(he=ye.recursos)==null?void 0:he.enlaces,onChange:nt,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por lnea..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),i.jsx("input",{type:"file",multiple:!0,onChange:He,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Slo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Be=>P(Be.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?Pa:Pr).map(Be=>{var Qe;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Qe=ye.estudiantesDestino)==null?void 0:Qe.includes(Be.nombreCompleto),onChange:()=>Et(Be.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Be.nombreCompleto,children:Be.nombreCompleto})]},Be.id)})})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{name:"contenido",value:ye.contenido,onChange:$e,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:ye.plazoEntrega,onChange:$e,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),i.jsx("div",{className:"space-y-3",children:twe.map(Be=>i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:ye.tipos.includes(Be),onChange:()=>it(Be),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Be})]}),ye.tipos.includes(Be)&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),l6[Be].map(Qe=>i.jsx("button",{type:"button",onClick:()=>xt(Be,Qe),className:`px-3 py-1 rounded-full font-semibold text-xs ${ye.cantidadPreguntas[Be]===Qe?"bg-amber-500 text-white":"bg-slate-200"}`,children:Qe},Qe))]})]},Be))})]})]}),_&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:_}),i.jsx("div",{className:"pt-2 text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?i.jsx(Wc,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},Ja=()=>{var ge;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin de la Actividad"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo est correcto, confirma para asignar."}),i.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introduccin para el Estudiante"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Sn,{content:k==null?void 0:k.introduccion,context:"preview-introduccion"})})]}),(k==null?void 0:k.panelDidactico)&&i.jsxs("div",{className:"p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Panel Didctico - Material de Apoyo"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof k.panelDidactico=="string"&&k.panelDidactico.trim().startsWith("{")){const he=JSON.parse(k.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[he.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:he.titulo}),Array.isArray(he.subtitulos)&&he.subtitulos.map((Be,Qe)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:Be.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:Be.texto})]},Qe)),Array.isArray(he.conceptosClave)&&he.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:he.conceptosClave.map((Be,Qe)=>i.jsx("li",{className:"text-emerald-800",children:Be},Qe))})]}),!he.subtitulos&&!he.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(he,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:k.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:k.panelDidactico})}})()})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((ge=k.recursos.archivos)==null?void 0:ge.length))&&i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),i.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Sn,{content:k.recursos.instrucciones,context:"preview-instrucciones"})}),k.recursos.enlaces&&i.jsx("div",{children:k.recursos.enlaces.split(`
`).map((he,Be)=>he.trim()&&i.jsx("a",{href:he,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:he},Be))}),k.recursos.archivos&&k.recursos.archivos.length>0&&i.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(he=>i.jsx("li",{className:"text-slate-700",children:he.nombre},he.nombre))})]})]}),k==null?void 0:k.tipos.map(he=>{const Be=k.generatedContent[he];return Be?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:he}),i.jsxs("div",{className:"space-y-4 text-sm",children:[he==="Quiz"&&Array.isArray(Be)&&Be.map((Qe,Fe)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Fe+1,". ",i.jsx(Sn,{content:Qe.pregunta,context:`preview-quiz-pregunta-${Fe}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:Qe.opciones.map((qe,Xe)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+Xe),"."]})," ",i.jsx(Sn,{content:qe,context:`preview-quiz-opcion-${Fe}-${Xe}`})]},Xe))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(Sn,{content:Qe.respuestaCorrecta,context:`preview-quiz-respuesta-${Fe}`})]})]},Fe)),he==="Comprensin de Lectura"&&Be&&typeof Be=="object"&&"preguntas"in Be&&Array.isArray(Be.preguntas)&&i.jsxs("div",{children:[i.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:i.jsx(Sn,{content:Be.texto,context:"preview-lectura-texto"})}),Be.preguntas.map((Qe,Fe)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Fe+1,". ",i.jsx(Sn,{content:Qe.pregunta,context:`preview-lectura-pregunta-${Fe}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:Qe.opciones.map((qe,Xe)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+Xe),"."]})," ",i.jsx(Sn,{content:qe,context:`preview-lectura-opcion-${Fe}-${Xe}`})]},Xe))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(Sn,{content:Qe.respuestaCorrecta,context:`preview-lectura-respuesta-${Fe}`})]})]},Fe))]}),he==="Trminos Pareados"&&Array.isArray(Be)&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border border-slate-200",children:[i.jsx("thead",{className:"bg-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definicin"})]})}),i.jsx("tbody",{children:Be.map((Qe,Fe)=>i.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[i.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:i.jsx(Sn,{content:Qe.concepto,context:`preview-pareado-concepto-${Fe}`})}),i.jsx("td",{className:"p-2 align-top text-slate-700",children:i.jsx(Sn,{content:Qe.definicion,context:`preview-pareado-definicion-${Fe}`})})]},Qe.id))})]})}),he==="Desarrollo"&&Array.isArray(Be)&&Be.map((Qe,Fe)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Fe+1,". ",i.jsx(Sn,{content:Qe.pregunta,context:`preview-desarrollo-pregunta-${Fe}`})]}),i.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[i.jsx("strong",{className:"font-semibold",children:"Rbrica:"})," ",i.jsx(Sn,{content:Qe.rubrica,context:`preview-desarrollo-rubrica-${Fe}`})]})]},Fe))]})]},he):null})]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>M(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:Er,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},we=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify_between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),i.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(xC,{size:18})," Volver"]})]}),i.jsxs("form",{onSubmit:er,className:"space-y-6 mt-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:be.asignatura,onChange:Ke,className:"w-full border-slate-300 rounded-md shadow-sm",children:En.map(ge=>i.jsx("option",{value:ge,children:ge},ge))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),i.jsx("textarea",{name:"objetivosAprendizaje",value:be.objetivosAprendizaje,onChange:Ke,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),i.jsx("textarea",{name:"contenido",value:be.contenido,onChange:Ke,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:be.plazoEntrega,onChange:Ke,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Slo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:ge=>P(ge.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?Pa:Pr).map(ge=>{var he;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(he=be.estudiantesDestino)==null?void 0:he.includes(ge.nombreCompleto),onChange:()=>Et(ge.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ge.nombreCompleto,children:ge.nombreCompleto})]},ge.id)})})]})]})]}),_&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:_}),i.jsx("div",{className:"text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?i.jsx(Wc,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),Ue=()=>{var ge,he;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin Prueba"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),i.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:i.jsx(Sn,{content:U==null?void 0:U.titulo,context:"preview-prueba-titulo"})}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Sn,{content:U==null?void 0:U.instrucciones,context:"preview-prueba-instrucciones"})})]}),(ge=U==null?void 0:U.textos)!=null&&ge.length?i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),i.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:U.textos.map((Be,Qe)=>i.jsxs("li",{children:[i.jsxs("p",{className:"font-semibold",children:[i.jsx(Sn,{content:Be.titulo,context:`preview-texto-titulo-${Qe}`}),i.jsxs("span",{className:"text-xs text-slate-500",children:["(",Be.tipo,")"]})]}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:i.jsx(Sn,{content:Be.contenido,context:`preview-texto-contenido-${Qe}`})})]},Be.id))})]}):null,(he=U==null?void 0:U.preguntas)!=null&&he.length?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),U.preguntas.slice(0,10).map((Be,Qe)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Be.numero,". ",i.jsx(Sn,{content:Be.pregunta,context:`preview-pregunta-texto-${Qe}`})]}),i.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Be.opciones.map((Fe,qe)=>i.jsx("li",{children:i.jsx(Sn,{content:Fe,context:`preview-pregunta-opcion-${Qe}-${qe}`})},qe))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Be.respuestaCorrecta]})]},Be.numero))]}):null]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>z(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:$r,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},Oe=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(vC,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:e.length>0?e.map(ge=>{var Qe;const he=[];(Qe=ge.estudiantesDestino)!=null&&Qe.length&&he.push(`Estudiantes: ${ge.estudiantesDestino.length}`);const Be=he.length?he.join(" | "):"Estudiantes seleccionados";return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(Sn,{content:ge.asignatura,context:`lista-asignatura-${ge.id}`}),"  ",ge.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Be," | Creado: ",Hy(ge.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>u(ge),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},ge.id)}):i.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),De=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(vC,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:r.length>0?r.map(ge=>i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800",children:i.jsx(Sn,{content:ge.titulo,context:`lista-prueba-titulo-${ge.id}`})}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",Hy(ge.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>f(ge),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},ge.id)):i.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return T?i.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):i.jsxs("div",{className:"animate-fade-in",children:[Yr(),Ae?la():U?Ue():k?Ja():c||d?Ia():V==="gestion"?Zt():V==="pruebas"?g?we():De():V==="actividades"?h?Ka():Oe():xa()]})},BZe="actividades_remotas",e7="respuestas_actividades",Eue=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},QW=e=>{const t=Eue(e);return t?t.toISOString():void 0},TZe=e=>{const t=Eue(e);return t?t.toISOString().split("T")[0]:void 0},t7=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:QW(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:TZe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:QW(t.fechaCompletado)||t.fechaCompletado}},Gb=(e,t)=>{var a,n;console.error(` Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((a=e.message)!=null&&a.includes("requires an index"))?(r.message="Se requiere configurar un ndice en la base de datos. Contacta al administrador.",console.log(" Enlace para crear ndice:",(n=e.message.match(/https:\/\/[^\s]+/))==null?void 0:n[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},IZe=e=>new Promise(t=>setTimeout(t,e)),OZe=async(e,t=3,r="operacin")=>{for(let a=1;a<=t;a++)try{return await e()}catch(n){if(console.log(` Intento ${a} fall en ${r}:`,n.code||n.message),a===t)throw n;if(["unavailable","deadline-exceeded","internal"].includes(n.code)){const s=Math.pow(2,a)*1e3;console.log(` Reintentando en ${s}ms...`),await IZe(s)}else throw n}throw new Error("Max retries exceeded")},FZe=(e,t,r)=>{console.log(" Suscribindose a actividades disponibles para:",e.nombreCompleto);const a=Dt(ht(st,BZe),Yt("fechaCreacion","desc"));return nr(a,{next:s=>{try{console.log(" Actividades recibidas desde Firestore:",s.docs.length);const l=s.docs.map(c=>t7(c)).filter(c=>{var u,d,f,h,m;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(m=c.estudiantesDestino)!=null&&m.includes(e.nombreCompleto))});console.log(" Actividades filtradas para el estudiante:",l.length),t(l)}catch(o){console.error(" Error procesando datos de actividades:",o);const l=Gb(o,"procesamiento de actividades");r==null||r(l)}},error:s=>{const o=Gb(s,"suscripcin a actividades");r==null||r(o)}})},DZe=(e,t,r)=>{console.log(" Suscribindose a respuestas del estudiante:",e);const a=Dt(ht(st,e7),ur("estudianteId","==",e),Yt("fechaCompletado","desc"));return nr(a,{next:s=>{try{console.log(" Respuestas recibidas desde Firestore:",s.docs.length);const o=s.docs.map(l=>{var u;const c=t7(l);return console.log(` Respuesta ${l.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log(" Enviando respuestas procesadas al componente:",o.length),t(o)}catch(o){console.error(" Error procesando respuestas:",o);const l=Gb(o,"procesamiento de respuestas");r==null||r(l)}},error:s=>{var l;const o=Gb(s,"suscripcin a respuestas");if(s.code==="failed-precondition"&&((l=s.message)!=null&&l.includes("requires an index")))return console.log(" Error de ndice detectado, intentando consulta alternativa..."),PZe(e,t,r);r==null||r(o)}})},PZe=(e,t,r)=>{console.log(" Usando consulta alternativa sin ordenamiento...");const a=Dt(ht(st,e7),ur("estudianteId","==",e));return nr(a,{next:s=>{try{console.log(" Respuestas recibidas (consulta alternativa):",s.docs.length);const o=s.docs.map(l=>t7(l)).sort((l,c)=>new Date(c.fechaCompletado).getTime()-new Date(l.fechaCompletado).getTime());console.log(" Respuestas ordenadas manualmente:",o.length),t(o)}catch(o){console.error(" Error procesando respuestas (alternativa):",o);const l=Gb(o,"procesamiento de respuestas alternativo");r==null||r(l)}},error:s=>{const o=Gb(s,"suscripcin alternativa a respuestas");r==null||r(o)}})},RZe=async e=>OZe(async()=>{console.log(" Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:ir.fromDate(new Date(e.fechaCompletado))},r=await Zr(ht(st,e7),t);return console.log(" Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),LZe=.6,vD=(e,t,r=LZe,a=2)=>{if(!t||t<=0)return a.toFixed(1);const n=t*r;let s;return e>=n?s=4+3*(e-n)/(t-n+1e-9):s=1+3*e/(n+1e-9),s=Math.max(a,Math.min(7,s)),s.toFixed(1)},bD=({className:e="w-5 h-5"})=>i.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),MZe=async(e,t,r,a=3)=>{try{for(let n=1;n<=a;n++)try{const s=so.currentUser;if(!s)throw new Error("Usuario no autenticado.");const o=await s.getIdToken(),l=await fetch("/api/generarFeedbackAutoaprendizaje",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({actividad:e,respuestas:t,estudianteId:r||s.uid})});if(!l.ok){const d=await l.json();throw new Error(d.error||`Error del servidor: ${l.status}`)}const u=(await l.json()).feedback;if(u)return u;throw new Error("La respuesta de la IA no tiene el formato esperado.")}catch(s){if(console.error(`Error en intento ${n} de generar feedback:`,s),n===a)return null}}catch(n){return console.error("Error al generar feedback con IA:",n),null}},UZe=async(e,t,r)=>{console.log(" Iniciando guardado de respuesta...");try{const a=await RZe(e);console.log(" Respuesta base guardada con ID:",a);const n={id:a,...e};try{const s=await MZe(t,r);if(s){const{updateDoc:o,doc:l}=await ei(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>Nb);return{updateDoc:u,doc:d}},void 0),{db:c}=await ei(async()=>{const{db:u}=await Promise.resolve().then(()=>Gte);return{db:u}},void 0);return await o(l(c,"respuestas_actividades",a),{retroalimentacionAI:s}),console.log(" Feedback de IA agregado exitosamente"),{...n,retroalimentacionAI:s}}return n}catch(s){return console.warn(" No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),n}}catch(a){throw console.error(" Error crtico al guardar respuesta:",a),a}},ko=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(a))&&(console.warn(` OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},ac=(e,t)=>{if(t&&ko(e,t),t==="panelDidactico"||t!=null&&t.includes("panelDidactico")){if(typeof e=="string")return e;if(e==null)return"";try{return typeof e=="object"?typeof e.texto=="string"?e.texto:typeof e.contenido=="string"?e.contenido:JSON.stringify(e):String(e)}catch{return"[Error al procesar el panel didctico]"}}if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(n=>ac(n,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const n of r)if(e[n]&&typeof e[n]=="string")return e[n];if(Object.keys(e).some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(n)))return"[Criterios de evaluacin]";try{const n=JSON.stringify(e);return n.length>100?"[Objeto complejo]":n}catch{return"[Objeto no serializable]"}}return String(e)},Gd=(e,t,...r)=>{if(ko(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const s=ac(e[n],`${t}-${n}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const a=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const n of a)if(e[n]){const s=ac(e[n],`${t}-${n}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},_s=({content:e,context:t="unknown"})=>{try{const r=ac(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}};function HW(e){if(console.log(" Normalizando lectura:",e),ko(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,a)=>{ko(r,`normalizeQuestion-${a}`);const n=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,o)=>ac(s,`opcion-${a}-${o}`)).filter(Boolean):[];return{pregunta:Gd(r,`pregunta-${a}`,"pregunta","texto"),opciones:n,respuestaCorrecta:ac(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${a}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Gd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((n,s)=>Gd(n,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),a=e.flatMap((n,s)=>(ko(n,`lectura-bloque-preguntas-${s}`),Array.isArray(n==null?void 0:n.preguntas)?n.preguntas:[])).map(t);return{texto:r,preguntas:a}}return{texto:"",preguntas:[]}}function zW(e){return console.log(" Normalizando pareados:",e),ko(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(ko(t,`pareado-${r}`),{izquierda:Gd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Gd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(ko(t,`pareado-array-${r}`),{izquierda:Gd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Gd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function VW(e){return console.log(" Normalizando desarrollo:",e),ko(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(ko(t,`desarrollo-pregunta-${r}`),{enunciado:Gd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(ko(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(` Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Gd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const QZe=({actividad:e,onComplete:t,currentUser:r})=>{const[a,n]=N.useState({}),[s,o]=N.useState(!1),l=(u,d)=>{const f={...a,[u]:d};n(f)},c=async()=>{o(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=a[m];if(console.log(` Procesando tipo: ${m}`,g),ko(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensin de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,w)=>(ko(y,`quiz-question-${w}`),{pregunta:Gd(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((j,O)=>ac(j,`quiz-opcion-${w}-${O}`)):[],respuestaCorrecta:ac(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:HW(g).preguntas).forEach((y,w)=>{const j=x==null?void 0:x[w],O=j===y.respuestaCorrecta,B=y.puntaje??1;O&&(u+=B),d+=B,f.items.push({pregunta:y.pregunta,respuestaUsuario:ac(j,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:O,puntajeObtenido:O?B:0,tipo:m})}),m==="Trminos Pareados"){const v=zW(g),y=x||{};v.forEach((w,j)=>{const O=y[j],B=O===w.derecha,T=w.puntaje??1;B&&(u+=T),d+=T,f.items.push({pregunta:`${w.izquierda}  ?`,respuestaUsuario:ac(O,`pareado-feedback-${j}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:B,puntajeObtenido:B?T:0,tipo:m})})}if(m==="Desarrollo"){const v=VW(g),y=x||{};v.forEach((w,j)=>{const O=ac(y[j],`desarrollo-feedback-${j}`).trim();f.items.push({pregunta:w.enunciado,respuestaUsuario:O||"No respondida",respuestaCorrecta:"Revisin docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:a,nota:vD(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:i.jsx(_s,{content:e.asignatura,context:"actividad-asignatura"})}),i.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(_s,{content:e.introduccion,context:"actividad-introduccion"})}),e.panelDidactico&&i.jsxs("div",{className:"mt-5 p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Material de Estudio - Lee con Atencin"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof e.panelDidactico=="string"&&e.panelDidactico.trim().startsWith("{")){const u=JSON.parse(e.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[u.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:u.titulo}),Array.isArray(u.subtitulos)&&u.subtitulos.map((d,f)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:d.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:d.texto})]},f)),Array.isArray(u.conceptosClave)&&u.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:u.conceptosClave.map((d,f)=>i.jsx("li",{className:"text-emerald-800",children:d},f))})]}),!u.subtitulos&&!u.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(u,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}})()})]}),e.recursos&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-200",children:[e.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(_s,{content:e.recursos.instrucciones,context:"actividad-instrucciones"})})]}),e.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.enlaces.split(`
`).filter(Boolean).map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:u.startsWith("http")?u:`https://${u}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:u})]},d))})]}),e.recursos.archivos&&e.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.archivos.map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:u.nombre||`Archivo ${d+1}`})]},d))})]})]})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(` Renderizando tipo: ${u}`,d),ko(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,m)=>(ko(h,`render-quiz-question-${m}`),{pregunta:Gd(h,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>ac(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:ac(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),i.jsx("div",{className:"space-y-6",children:f.map((h,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx(_s,{content:h.pregunta,context:`quiz-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=a[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...a[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx(_s,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Comprensin de Lectura":{const f=HW(d);return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensin de Lectura"}),i.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:i.jsx(_s,{content:f.texto,context:"lectura-texto"})}),i.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx(_s,{content:h.pregunta,context:`lectura-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=a[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...a[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx(_s,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Trminos Pareados":{const f=zW(d),h=a[u]||{},m=[...new Set(f.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Trminos Pareados"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>i.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[i.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",i.jsx(_s,{content:g.izquierda,context:`pareado-izq-${x}`})]}),i.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:v=>l(u,{...h,[x]:v.target.value}),children:[i.jsx("option",{value:"",children:" Selecciona la pareja "}),m.map((v,y)=>i.jsx("option",{value:v,children:ac(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=VW(d),h=a[u]||{};return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),i.jsx("div",{className:"space-y-6",children:f.map((m,g)=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",i.jsx(_s,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),i.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta",value:h[g]??"",onChange:x=>l(u,{...h,[g]:x.target.value})})]},g))}),i.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado ser revisado y calificado por tu profesor/a."})]},u)}default:return null}}),i.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:i.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?i.jsx(bD,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},HZe=({currentUser:e})=>{var k,M,U;const[t,r]=N.useState(!0),[a,n]=N.useState("list"),[s,o]=N.useState("actividades"),[l,c]=N.useState(!1),[u,d]=N.useState([]),[f,h]=N.useState([]),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(null),[j,O]=N.useState("connecting");N.useEffect(()=>{console.log(" Iniciando carga de datos para usuario:",e.nombreCompleto);let z=!1,Q=!1,q=!1,V=!1;const Y=()=>{(z||q)&&(Q||V)&&(q&&V?(O("error"),w("Error al cargar datos. Verifica tu conexin e intenta nuevamente.")):O("connected"),r(!1),console.log(" Carga completada - Actividades:",z,"Respuestas:",Q))},K=FZe(e,R=>{console.log(" Actividades recibidas:",R.length),R.forEach((F,W)=>{console.log(`  ${W+1}. ${F.asignatura} (ID: ${F.id})`),ko(F,`actividad-${W}`)}),d(R),z=!0,Y()},R=>{console.error(" Error en suscripcin de actividades:",R),q=!0,Y()}),J=DZe(e.id,R=>{console.log(" Respuestas del estudiante recibidas:",R.length),R.forEach((F,W)=>{var X;console.log(`  ${W+1}. Actividad ${F.actividadId} - Fecha: ${F.fechaCompletado}`),F.nota&&console.log(`    Nota: ${F.nota}`),(X=F.revisionDocente)!=null&&X.completada&&console.log("     Con revisin docente completada"),ko(F,`respuesta-${W}`)}),h(R),Q=!0,Y()},R=>{var F;console.error(" Error en suscripcin de respuestas:",R),(F=R.message)!=null&&F.includes("requires an index")&&(console.log(" Detectado error de ndice, intentando consulta alternativa..."),w("Se detect un problema de configuracin. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),V=!0,Y()});return()=>{console.log(" Limpiando subscripciones"),K==null||K(),J==null||J()}},[e]),N.useEffect(()=>{t||console.log(" ESTADO ACTUALIZADO:",{actividades:u.length,respuestas:f.length,vista:a,conexion:j})},[u.length,f.length,a,j,t]);const B=z=>{if(console.log(" Iniciando actividad:",z.asignatura),_.has(z.id)){w("Esta actividad ya ha sido completada. No es posible realizarla nuevamente.");return}g(z),n("activity"),w(null)},T=z=>{console.log(" Viendo resultado:",z.actividadId);const Q=u.find(q=>q.id===z.actividadId);Q?(g(Q),v(z),n("result"),w(null)):w("No se pudieron cargar los detalles de esta actividad completada.")},C=N.useCallback(async(z,Q)=>{if(!m)return;console.log(" COMPLETANDO ACTIVIDAD:",{actividadId:m.id,estudianteId:e.id,puntaje:z.puntaje,nota:z.nota}),n("result"),c(!0),w(null);const q={actividadId:m.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...z,retroalimentacionDetallada:Q};console.log(" Guardando respuesta...");try{const V=await UZe(q,m,Q);console.log(" Respuesta completada con ID:",V.id),v(V),setTimeout(()=>{console.log(" Datos sincronizados")},1500)}catch(V){console.error(" Error crtico al completar actividad:",V),w("Ocurri un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),v({id:"error-temp",...q,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema tcnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{c(!1)}},[m,e.id]),_=N.useMemo(()=>{if(f.length===0)return new Set;const z=new Set(f.map(Q=>Q.actividadId));return console.log(" IDs completados calculados:",z.size),z},[f]),S=N.useMemo(()=>{if(u.length===0)return[];const z=u.filter(Q=>!_.has(Q.id));return console.log(" Actividades pendientes:",z.length),z},[u,_]),L=N.useMemo(()=>{if(f.length===0)return[];const z=f.map(Q=>{const q=u.find(V=>V.id===Q.actividadId);return{...Q,asignatura:(q==null?void 0:q.asignatura)||"Actividad no disponible",tipos:(q==null?void 0:q.tipos)||[]}}).sort((Q,q)=>new Date(q.fechaCompletado).getTime()-new Date(Q.fechaCompletado).getTime());return console.log(" Historial preparado:",z.length),z},[f,u]),P=N.useMemo(()=>{if(L.length===0)return[];const z=new Map;for(const q of L){const V=q.asignatura||"Sin asignatura";let Y;if(q.nota!=null){const J=parseFloat(q.nota);isNaN(J)||(Y=J)}if(Y==null&&typeof q.puntaje=="number"&&typeof q.puntajeMaximo=="number"&&q.puntajeMaximo>0){const J=vD(q.puntaje,q.puntajeMaximo),R=parseFloat(J);isNaN(R)||(Y=R)}if(Y==null||isNaN(Y))continue;const K=z.get(V)||{suma:0,cantidad:0};z.set(V,{suma:K.suma+Y,cantidad:K.cantidad+1})}const Q=Array.from(z.entries()).map(([q,V])=>({asignatura:q,promedio:Math.round(V.suma/V.cantidad*100)/100,cantidad:V.cantidad}));return Q.sort((q,V)=>V.promedio-q.promedio),Q},[L]);return t?i.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[i.jsx(bD,{className:"w-8 h-8 text-slate-500"}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),i.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",j==="connecting"?"Conectando...":j==="connected"?"Conectado":"Error de conexin"]})]})]}):j==="error"&&u.length===0&&f.length===0?i.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexin"}),i.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):a==="activity"&&m?i.jsx(QZe,{actividad:m,onComplete:C,currentUser:e}):a==="result"&&x?(console.log(" Renderizando resultado:",x),i.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),i.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",i.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[x.puntaje," / ",x.puntajeMaximo]})]}),i.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",i.jsx("span",{className:`font-bold text-2xl ${parseFloat(x.nota)>=4?"text-green-600":"text-red-600"}`,children:x.nota})]})]}),(m==null?void 0:m.recursos)&&i.jsxs("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:[i.jsx("h2",{className:"text-lg font-bold text-sky-800 mb-2",children:"Material complementario"}),m.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(_s,{content:m.recursos.instrucciones,context:"resultado-instrucciones"})})]}),m.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.enlaces.split(`
`).filter(Boolean).map((z,Q)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:z.startsWith("http")?z:`https://${z}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:z})]},Q))})]}),m.recursos.archivos&&m.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.archivos.map((z,Q)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:z.nombre||`Archivo ${Q+1}`})]},Q))})]})]}),y&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("p",{className:"text-red-700 font-medium",children:[" ",y]})}),l&&i.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[i.jsx(bD,{className:"w-8 h-8 text-blue-500"}),i.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),i.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),x.retroalimentacionAI&&!l&&i.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeo "}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-green-700",children:" Principales Logros"}),i.jsx("p",{className:"text-slate-700 mt-1",children:i.jsx(_s,{content:x.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((k=x.retroalimentacionAI.desafios)==null?void 0:k.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-amber-700",children:" reas de Mejora"}),i.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.desafios.map((z,Q)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx(_s,{content:z.pregunta,context:`feedback-desafio-pregunta-${Q}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx(_s,{content:z.explicacionDelError,context:`feedback-desafio-explicacion-${Q}`})})]},Q))})]}),((U=(M=x.retroalimentacionAI)==null?void 0:M.comentariosDesarrollo)==null?void 0:U.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-sky-700",children:" Retroalimentacin de Desarrollo"}),i.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.comentariosDesarrollo.map((z,Q)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx(_s,{content:z.pregunta,context:`feedback-desarrollo-pregunta-${Q}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx(_s,{content:z.retroalimentacionBreve,context:`feedback-desarrollo-retro-${Q}`})})]},Q))})]})]}),x.retroalimentacionDetallada&&i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisin Detallada"}),x.retroalimentacionDetallada.items.map((z,Q)=>{const q=z.esCorrecta===null,V=q?"border-slate-400 bg-slate-50":z.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",Y=q?"":z.esCorrecta?"":"";return i.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${V}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[Q+1,". ",i.jsx(_s,{content:z.pregunta,context:`feedback-item-pregunta-${Q}`})]}),i.jsx("span",{className:"font-bold text-lg",children:Y})]}),i.jsxs("div",{className:"mt-2 text-sm pl-4",children:[i.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",i.jsx("span",{className:"font-medium",children:i.jsx(_s,{content:z.respuestaUsuario,context:`feedback-item-respuesta-${Q}`})})]}),!q&&!z.esCorrecta&&i.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",i.jsx("span",{className:"font-medium text-green-700",children:i.jsx(_s,{content:z.respuestaCorrecta,context:`feedback-item-correcta-${Q}`})})]}),q&&i.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisin docente."})]})]},Q)})]}),i.jsx("div",{className:"flex gap-4",children:i.jsx("button",{onClick:()=>{n("list"),g(null),v(null),w(null)},className:"w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"})})]})):i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[y&&i.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:i.jsxs("p",{className:"text-amber-800",children:[" ",y]})}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"actividades",label:"Actividades Pendientes"},{key:"historial",label:"Historial"},{key:"promedios",label:"Promedios Remotos"}].map(z=>i.jsx("button",{onClick:()=>o(z.key),className:`px-4 py-2 rounded-lg border transition-colors ${s===z.key?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-700 hover:bg-slate-50 border-slate-200"}`,children:z.label},z.key))}),s==="actividades"&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),i.jsx("p",{className:"text-slate-500 mb-2",children:"Completa las actividades asignadas por tus profesores."}),i.jsx("p",{className:"text-amber-600 text-sm font-medium mb-6",children:i.jsxs("span",{className:"bg-amber-100 p-1 rounded inline-flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Importante: Cada actividad solo puede ser respondida una vez."]})}),i.jsx("div",{className:"space-y-4",children:S.length>0?S.map(z=>i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(_s,{content:z.asignatura,context:`actividad-asignatura-${z.id}`})," - ",z.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",i.jsx(_s,{content:typeof z.plazoEntrega=="string"?z.plazoEntrega:"",context:`actividad-plazo-${z.id}`})]})]}),i.jsx("button",{onClick:()=>B(z),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},z.id)):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Todo al da!"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]})}),s==="historial"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentacin de las actividades completadas."}),i.jsx("div",{className:"space-y-4",children:L.length>0?L.map(z=>i.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(_s,{content:z.asignatura,context:`completada-asignatura-${z.id}`})," - ",z.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(z.fechaCompletado).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",i.jsx("span",{className:`font-bold text-lg ${(parseFloat(z.nota)||0)>=4?"text-green-600":"text-red-600"}`,children:z.nota??vD(z.puntaje,z.puntajeMaximo)})]}),i.jsx("button",{onClick:()=>T(z),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},z.id)):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"An no hay historial"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecern aqu."})]})})]}),s==="promedios"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Promedios Remotos"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Promedio de tus calificaciones por asignatura en actividades remotas."}),P.length>0?i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:P.map(z=>i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 shadow-sm",children:[i.jsx("p",{className:"font-bold text-slate-800 mb-1",children:z.asignatura}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:`text-2xl font-extrabold ${z.promedio>=4?"text-green-600":"text-red-600"}`,children:z.promedio.toFixed(2)}),i.jsx("p",{className:"text-xs text-slate-500",children:"Promedio (1-7)"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-slate-700 font-semibold",children:z.cantidad}),i.jsx("p",{className:"text-xs text-slate-500",children:"actividades"})]})]})]},z.asignatura))}):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Sin datos an"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Completa actividades para ver tus promedios por asignatura."})]})]})]})},y4="estudiantes_inclusion",zZe="usuarios",Cue=e=>{const t=e.data();return{id:e.id,...t}},VZe=e=>{const t=Dt(ht(st,y4));return nr(t,a=>{const n=a.docs.map(s=>Cue(s));e(n)},a=>{console.error("Error al suscribirse a estudiantes de inclusin:",a),e([])})},$Ze=e=>{const t=Dt(ht(st,zZe));return nr(t,a=>{const n=a.docs.map(s=>Cue(s));e(n)},a=>{console.error("Error al suscribirse a todos los usuarios:",a),e([])})},GZe=async e=>{try{return(await Zr(ht(st,y4),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusin:",t),new Error("No se pudo agregar al estudiante.")}},qZe=async(e,t)=>{try{const{id:r,...a}=t,n=Jt(st,y4,e);await ai(n,a)}catch(r){throw console.error("Error al actualizar estudiante de inclusin:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},KZe=async e=>{try{const t=Jt(st,y4,e);await xn(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusin:",t),new Error("No se pudo eliminar al estudiante.")}},WZe=({estudiantes:e})=>{const t=N.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=N.useMemo(()=>{const l=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(l).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),a=N.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),n=N.useMemo(()=>{const l=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(l/e.length).toFixed(1):"0";return{total:l,promedio:c}},[e]),s=N.useMemo(()=>e.reduce((l,c)=>l+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),o=Math.max(0,...t.map(l=>l.cantidad),...r.map(l=>l.cantidad),...a.map(l=>l.cantidad));return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),i.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n.total}),i.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),i.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:n.promedio}),i.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),i.jsx("div",{className:"space-y-2",children:t.map(({curso:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),i.jsx("div",{className:"space-y-2",children:r.map(({nivel:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[l,""]}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnstico"}),i.jsx("div",{className:"space-y-2",children:a.map(({diagnostico:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:l,children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]})]})]})},$W=({estudiantesDisponibles:e,onSelect:t})=>{const[r,a]=N.useState(""),[n,s]=N.useState(""),[o,l]=N.useState(!1),c=N.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=n===""||f.curso===n;return h&&m}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,n]),u=N.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),a(""),s(""),l(!1)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),i.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{a(f.target.value),l(f.target.value.length>0||n!=="")},onFocus:()=>l(r.length>0||n!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),i.jsxs("select",{value:n,onChange:f=>{s(f.target.value),l(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>i.jsx("option",{value:f,children:f},f))]})]})]}),i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),i.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),i.jsx("button",{onClick:()=>l(!o),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:o?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),o&&i.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?i.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||n?"No se encontraron estudiantes con los criterios de bsqueda.":"No hay estudiantes disponibles."}):i.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>i.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),i.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:""})]})},f.id))})}),r&&c.length===1&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:" Solo hay un resultado! Haga clic para agregarlo directamente:"}),i.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},XZe=({student:e,onClose:t,onConfirm:r})=>{const[a,n]=N.useState(Gj[0]),s=()=>r(e,a);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),i.jsx("select",{id:"dificultad",value:a,onChange:o=>n(o.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Gj.map(o=>i.jsx("option",{value:o,children:o},o))})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},YZe=({student:e,onClose:t,onSave:r,profesores:a,getDocenteEmail:n})=>{const[s,o]=N.useState("intervenciones"),[l,c]=N.useState(e);N.useEffect(()=>c(e),[e]);const[u,d]=N.useState(null),f={responsable:"",accion:"",observaciones:""},[h,m]=N.useState(f),[g,x]=N.useState({trimestre:"T1",meta:""}),[v,y]=N.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,j]=N.useState(null),[O,B]=N.useState(!1),T={motivo:"",acuerdos:"",asistentes:""},[C,_]=N.useState(T),S=()=>{r(l),t()},L=async()=>{var Te;if(!h.responsable||!h.accion){alert("Responsable y Accin son campos obligatorios.");return}let re,Re=!1;u?re=(l.intervenciones||[]).map(de=>de.id===u.id?{...de,...h}:de):(Re=!0,re=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...l.intervenciones||[]]);const Le=re.sort((de,Ce)=>new Date(Ce.fecha).getTime()-new Date(de.fecha).getTime());if(c(de=>({...de,intervenciones:Le})),Re)try{await nre({docenteNombre:h.responsable,docenteEmail:n?n(h.responsable):void 0,docenteEmailLower:(Te=n?n(h.responsable):void 0)==null?void 0:Te.toLowerCase(),tipo:"nueva_intervencion",titulo:" Nueva Intervencin Asignada",mensaje:`Se te ha asignado una nueva intervencin para el estudiante ${l.nombre}. Accin: ${h.accion}`,estudianteNombre:l.nombre,estudianteId:l.id,accionRequerida:h.accion}),alert(` Intervencin registrada y notificacin enviada a ${h.responsable}`)}catch(de){console.error("Error al crear notificacin:",de),alert(" Intervencin guardada, pero no se pudo enviar la notificacin al docente.")}m(f),d(null)},P=re=>{d(re),m({responsable:re.responsable,accion:re.accion,observaciones:re.observaciones})},k=re=>{window.confirm("Eliminar esta intervencin?")&&c(Re=>({...Re,intervenciones:(Re.intervenciones||[]).filter(Le=>Le.id!==re)}))},M=re=>{const{name:Re,value:Le}=re.target;c(Te=>({...Te,[Re]:Le,fechaActualizacionApoyos:new Date().toISOString()}))},U=()=>{if(!g.meta.trim())return;const re={...g,id:crypto.randomUUID(),cumplida:!1};c(Re=>({...Re,metasProgreso:[...Re.metasProgreso||[],re]})),x({trimestre:"T1",meta:""})},z=re=>{c(Re=>({...Re,metasProgreso:(Re.metasProgreso||[]).map(Le=>Le.id===re?{...Le,cumplida:!Le.cumplida}:Le)}))},Q=re=>{c(Re=>({...Re,metasProgreso:(Re.metasProgreso||[]).filter(Le=>Le.id!==re)}))},q=N.useMemo(()=>{const re=l.metasProgreso||[];if(re.length===0)return{percent:0,color:"bg-slate-300"};const Re=re.filter(de=>de.cumplida).length,Le=Math.round(Re/re.length*100),Te=Le<40?"bg-red-500":Le<75?"bg-yellow-500":"bg-green-500";return{percent:Le,color:Te}},[l.metasProgreso]),V=N.useMemo(()=>{if(!l.fechaActualizacionApoyos)return!0;const re=new Date(l.fechaActualizacionApoyos),Re=new Date;return Re.setMonth(Re.getMonth()-3),re<Re},[l.fechaActualizacionApoyos]),Y=()=>{if(!v.titulo.trim()||!v.fecha)return;const re={...v,id:crypto.randomUUID(),resuelta:!1};c(Re=>({...Re,alertas:[...Re.alertas||[],re].sort((Le,Te)=>new Date(Le.fecha).getTime()-new Date(Te.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},K=re=>{c(Re=>({...Re,alertas:(Re.alertas||[]).map(Le=>Le.id===re?{...Le,resuelta:!Le.resuelta}:Le)}))},J=re=>{c(Re=>({...Re,alertas:(Re.alertas||[]).filter(Le=>Le.id!==re)}))},R=re=>{re.target.files&&re.target.files[0]&&j(re.target.files[0])},F=()=>{if(!w)return;B(!0);const re=new FileReader;re.readAsDataURL(w),re.onloadend=()=>{const Re={id:crypto.randomUUID(),nombre:w.name,url:re.result,fechaSubida:new Date().toISOString()};c(Le=>({...Le,archivos:[Re,...Le.archivos||[]]})),j(null),B(!1)},re.onerror=()=>{alert("Error al leer el archivo."),B(!1)}},W=re=>{window.confirm("Eliminar este archivo?")&&c(Re=>({...Re,archivos:(Re.archivos||[]).filter(Le=>Le.id!==re)}))},X=()=>{if(!C.motivo.trim()||!C.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const re={...C,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(Re=>({...Re,reuniones:[re,...Re.reuniones||[]].sort((Le,Te)=>new Date(Te.fecha).getTime()-new Date(Le.fecha).getTime())})),_(T)},ne=re=>{window.confirm("Eliminar este registro de reunin?")&&c(Re=>({...Re,reuniones:(Re.reuniones||[]).filter(Le=>Le.id!==re)}))},le=()=>{var oe,fe,be;const re=new pr("p","mm","a4"),Re=20,Le=re.internal.pageSize.getWidth(),Te=re.internal.pageSize.getHeight();let de=Re;const Ce=Pe=>{Pe.setFontSize(10),Pe.setTextColor(100),Pe.text("Ficha de Seguimiento - Mdulo Inclusin",Re,15)};Ce(re),re.setFontSize(18),re.setFont("helvetica","bold"),re.setTextColor(40),re.text(l.nombre,Re,de+10),de+=15,re.setFontSize(11),re.setFont("helvetica","normal"),re.setTextColor(80),re.text(`Curso: ${l.curso}`,Re,de),re.text(`Dificultad: ${l.dificultad}`,Re,de+6),de+=15;const me=Pe=>{de+Pe>Te-Re&&(re.addPage(),Ce(re),de=Re)},ye=Pe=>{me(15),re.setFontSize(14),re.setFont("helvetica","bold"),re.text(Pe,Re,de),de+=10};if((oe=l.intervenciones)!=null&&oe.length&&(ye("Historial de Intervenciones"),bi(re,{startY:de,head:[["Fecha","Responsable","Accin","Observaciones"]],body:l.intervenciones.map(Pe=>[new Date(Pe.fecha).toLocaleDateString("es-CL"),Pe.responsable,Pe.accion,Pe.observaciones||""]),theme:"grid",didDrawPage:()=>Ce(re)}),de=re.lastAutoTable.finalY+10),l.adaptacionesCurriculares||l.apoyosRecibidos){me(30),ye("Seguimiento y Apoyos"),re.setFontSize(11),re.setFont("helvetica","normal");const Pe=`Adaptaciones: ${l.adaptacionesCurriculares||"No registradas."}
Apoyos: ${l.apoyosRecibidos||"No registrados."}`,$e=re.splitTextToSize(Pe,Le-Re*2);re.text($e,Re,de),de+=$e.length*5+10}(fe=l.metasProgreso)!=null&&fe.length&&(me(30),ye("Metas de Progreso"),bi(re,{startY:de,head:[["Trimestre","Meta","Estado"]],body:l.metasProgreso.map(Pe=>[Pe.trimestre,Pe.meta,Pe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Ce(re)}),de=re.lastAutoTable.finalY+10),(be=l.reuniones)!=null&&be.length&&(ye("Reuniones con Apoderados"),bi(re,{startY:de,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:l.reuniones.map(Pe=>[new Date(Pe.fecha).toLocaleDateString("es-CL"),Pe.motivo,Pe.acuerdos||"",Pe.asistentes]),theme:"grid",didDrawPage:()=>Ce(re)})),re.save(`Ficha_Inclusion_${l.nombre.replace(/\s/g,"_")}.pdf`)},ie=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervencin":"Registrar Nueva Intervencin"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviar notificacin automtica)"]}),i.jsxs("select",{value:h.responsable,onChange:re=>m(Re=>({...Re,responsable:re.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione Responsable..."}),a.map(re=>i.jsx("option",{value:re,children:re},re))]}),h.responsable&&!u&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:[" Se enviar una notificacin a ",h.responsable," cuando se guarde la intervencin"]})]}),i.jsx("textarea",{value:h.accion,onChange:re=>m(Re=>({...Re,accion:re.target.value})),placeholder:"Accin realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:h.observaciones,onChange:re=>m(Re=>({...Re,observaciones:re.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[u&&i.jsx("button",{onClick:()=>{d(null),m(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edicin"}),i.jsx("button",{onClick:L,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.intervenciones||[]).map(re=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:re.accion}),re.observaciones&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:re.observaciones}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(re.fecha).toLocaleString("es-CL")," - ",re.responsable]}),i.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:" Notificado"})]})]}),i.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[i.jsx("button",{onClick:()=>P(re),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervencin",children:""}),i.jsx("button",{onClick:()=>k(re.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervencin",children:""})]})]})},re.id)),(!l.intervenciones||l.intervenciones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"No hay intervenciones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera intervencin arriba"})]})]})]}),ae=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),V&&i.jsx("span",{title:"Informacin no actualizada en los ltimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),i.jsx("textarea",{name:"adaptacionesCurriculares",value:l.adaptacionesCurriculares||"",onChange:M,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),i.jsx("textarea",{name:"apoyosRecibidos",value:l.apoyosRecibidos||"",onChange:M,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",q.percent,"%"]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:i.jsx("div",{className:`${q.color} h-4 rounded-full transition-all duration-500`,style:{width:`${q.percent}%`}})})]}),i.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[i.jsxs("select",{value:g.trimestre,onChange:re=>x(Re=>({...Re,trimestre:re.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"T1",children:"T1"}),i.jsx("option",{value:"T2",children:"T2"}),i.jsx("option",{value:"T3",children:"T3"})]}),i.jsx("input",{value:g.meta,onChange:re=>x(Re=>({...Re,meta:re.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:U,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),i.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(l.metasProgreso||[]).map(re=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[i.jsx("input",{type:"checkbox",checked:re.cumplida,onChange:()=>z(re.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${re.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[i.jsxs("strong",{children:[re.trimestre,":"]})," ",re.meta]}),i.jsx("button",{onClick:()=>Q(re.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:""})]},re.id)),(!l.metasProgreso||l.metasProgreso.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"No hay metas definidas"}),i.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),Ae=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),i.jsx("input",{type:"text",value:v.titulo,onChange:re=>y(Re=>({...Re,titulo:re.target.value})),placeholder:"Ttulo de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:re=>y(Re=>({...Re,fecha:re.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("button",{onClick:Y,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.alertas||[]).map(re=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsx("input",{type:"checkbox",checked:re.resuelta,onChange:()=>K(re.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${re.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[re.titulo," (",new Date(re.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),i.jsx("button",{onClick:()=>J(re.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:""})]},re.id)),(!l.alertas||l.alertas.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"No hay alertas programadas"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),i.jsx("input",{type:"file",onChange:R,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),i.jsx("button",{onClick:F,disabled:!w||O,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:O?"Subiendo...":"Subir"}),w&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.archivos||[]).map(re=>i.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsxs("a",{href:re.url,download:re.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:re.nombre,children:[" ",re.nombre]}),i.jsx("button",{onClick:()=>W(re.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:""})]},re.id)),(!l.archivos||l.archivos.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),ke=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunin"}),i.jsx("input",{value:C.motivo,onChange:re=>_(Re=>({...Re,motivo:re.target.value})),placeholder:"Motivo de la reunin...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:C.acuerdos,onChange:re=>_(Re=>({...Re,acuerdos:re.target.value})),placeholder:"Acuerdos tomados en la reunin...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{value:C.asistentes,onChange:re=>_(Re=>({...Re,asistentes:re.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"text-right",children:i.jsx("button",{onClick:X,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!C.motivo.trim()||!C.asistentes.trim(),children:"Guardar Reunin"})})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.reuniones||[]).map(re=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:re.motivo}),re.acuerdos&&i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[i.jsx("strong",{children:"Acuerdos:"})," ",re.acuerdos]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(re.fecha).toLocaleString("es-CL")," - Asistentes: ",re.asistentes]})]}),i.jsx("button",{onClick:()=>ne(re.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunin",children:""})]})},re.id)),(!l.reuniones||l.reuniones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"No hay reuniones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera reunin con apoderados"})]})]})]});return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:re=>re.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:le,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:" Exportar PDF"}),i.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:""})]})]}),i.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:i.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(re=>i.jsx("button",{onClick:()=>o(re),className:`${s===re?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:re==="alertas"?"Alertas y Archivos":re==="seguimiento"?"Seguimiento y Metas":re},re))})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&ie(),s==="seguimiento"&&ae(),s==="reuniones"&&ke(),s==="alertas"&&Ae()]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),i.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},GW=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState([]),[s,o]=N.useState(!0),[l,c]=N.useState(null),[u,d]=N.useState(null),[f,h]=N.useState(""),[m,g]=N.useState(""),[x,v]=N.useState(""),[y,w]=N.useState("dashboard");N.useEffect(()=>{o(!0);const L=VZe(k=>{r(k),o(!1)}),P=$Ze(k=>n(k));return()=>{L(),P()}},[]);const j=async(L,P)=>{if(t.some(M=>M.nombre===L.nombreCompleto)){alert("Este estudiante ya est en el programa de inclusin.");return}const k={nombre:L.nombreCompleto,curso:L.curso||"",dificultad:P,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await GZe(k),alert(` ${L.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(M){console.error("Error al agregar estudiante:",M),alert("Hubo un error al agregar al estudiante al programa.")}},O=async L=>{try{await qZe(L.id,L)}catch(P){console.error("Error al actualizar la ficha:",P),alert("Hubo un error al guardar los cambios en la ficha.")}},B=async L=>{if(window.confirm("Est seguro de que desea eliminar a este estudiante del programa de inclusin? Esta accin es irreversible."))try{await KZe(L),(l==null?void 0:l.id)===L&&c(null),alert(" Estudiante eliminado del programa PIE")}catch(P){console.error("Error al eliminar estudiante:",P),alert("Hubo un error al eliminar al estudiante.")}},T=L=>{const P=_;if(P.length===0){alert("No hay datos para exportar.");return}const k=P.map(M=>{var U;return{Nombre:M.nombre,Curso:M.curso,Dificultad:M.dificultad,"N Intervenciones":((U=M.intervenciones)==null?void 0:U.length)||0,"Alertas Pendientes":(M.alertas||[]).filter(z=>!z.resuelta).length,"Metas Cumplidas":(M.metasProgreso||[]).filter(z=>z.cumplida).length,"Total Metas":(M.metasProgreso||[]).length,"ltima Actualizacin":M.fechaActualizacionApoyos?new Date(M.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(L==="xlsx"){const M=Ts.json_to_sheet(k),U=Ts.book_new();Ts.book_append_sheet(U,M,"Estudiantes_Inclusion"),b1(U,"Estudiantes_Inclusion.xlsx"),alert(" Archivo Excel exportado exitosamente")}else{const M=new pr;M.text("Listado de Estudiantes - Programa de Inclusin",14,15),bi(M,{startY:20,head:[Object.keys(k[0])],body:k.map(Object.values)}),M.save("Estudiantes_Inclusion.pdf"),alert(" Archivo PDF exportado exitosamente")}},C=N.useMemo(()=>a.filter(L=>{var P;return L.profile===zt.ESTUDIANTE&&(((P=e.cursos)==null?void 0:P.includes(L.curso||""))||e.profile===zt.SUBDIRECCION)}).filter(L=>!t.some(P=>P.nombre===L.nombreCompleto)),[a,t,e]),_=N.useMemo(()=>t.filter(L=>L.nombre.toLowerCase().includes(f.toLowerCase())&&(m===""||L.curso===m)&&(x===""||L.dificultad===x)).sort((L,P)=>L.nombre.localeCompare(P.nombre)),[t,f,m,x]),S=N.useMemo(()=>a.filter(L=>L.profile===zt.PROFESORADO).map(L=>L.nombreCompleto).sort(),[a]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusin Escolar (PIE)"}),i.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Dashboard"}),i.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Lista de Estudiantes"})]})]}),s?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):i.jsxs(i.Fragment,{children:[y==="dashboard"&&i.jsxs("div",{className:"space-y-8",children:[i.jsx(WZe,{estudiantes:t}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),i.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos "})]}),i.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(L=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:L.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[L.curso," - ",L.dificultad]})]}),i.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},L.id)),t.length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),i.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nmina"})]})]})]}),i.jsx($W,{estudiantesDisponibles:C,onSelect:L=>d(L)})]})]}),y==="lista"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",_.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>T("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:" Excel"}),i.jsx("button",{onClick:()=>T("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:" PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),i.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:L=>h(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),i.jsxs("select",{value:m,onChange:L=>g(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),Nn.map(L=>i.jsx("option",{value:L,children:L},L))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnstico"}),i.jsxs("select",{value:x,onChange:L=>v(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas las Dificultades"}),Gj.map(L=>i.jsx("option",{value:L,children:L},L))]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-blue-600",children:_.length}),i.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-green-600",children:t.length}),i.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((L,P)=>L+(P.alertas||[]).filter(k=>!k.resuelta).length,0)}),i.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(L=>L.curso)).size}),i.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[_.map(L=>{var P;return i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.nombre}),(L.alertas||[]).filter(k=>!k.resuelta).length>0&&i.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(L.alertas||[]).filter(k=>!k.resuelta).length," alertas"]})]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[L.curso," - ",L.dificultad]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[i.jsxs("span",{children:[((P=L.intervenciones)==null?void 0:P.length)||0," intervenciones"]}),i.jsxs("span",{children:[(L.metasProgreso||[]).filter(k=>k.cumplida).length," metas cumplidas"]}),L.fechaActualizacionApoyos&&i.jsxs("span",{children:["lt. actualizacin: ",new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),i.jsx("button",{onClick:()=>B(L.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:""})]})]})},L.id)}),_.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||m||x)&&i.jsx("button",{onClick:()=>{h(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),i.jsx($W,{estudiantesDisponibles:C,onSelect:L=>d(L)})]})]}),u&&i.jsx(XZe,{student:u,onClose:()=>d(null),onConfirm:(L,P)=>{j(L,P),d(null)}}),l&&i.jsx(YZe,{student:l,onClose:()=>c(null),onSave:O,profesores:S})]})},jue="asistencia_dual",JZe=e=>{var r,a;const t=e.data();return{id:e.id,...t,fechaHora:((a=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaHora}},ZZe=(e,t)=>{const r=Dt(ht(st,jue),ur("emailEstudiante","==",e),Yt("fechaHora","desc"));return nr(r,n=>{const s=n.docs.map(o=>JZe(o));t(s)},n=>{console.error("Error subscribing to personal attendance:",n),t([])})},eet=async e=>{try{const t={...e,fechaHora:ir.fromDate(new Date(e.fechaHora))};await Zr(ht(st,jue),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},tet=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),ret=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),aet=({currentUser:e})=>{const[t,r]=N.useState(e.curso||""),[a,n]=N.useState([]),[s,o]=N.useState(!1),[l,c]=N.useState(!0),[u,d]=N.useState(null);N.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=ZZe(e.email,m=>{n(m),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}o(!0),d(null),navigator.geolocation.getCurrentPosition(async m=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:m.coords.latitude,longitud:m.coords.longitude}};try{await eet(g),d({text:`Marca de ${h} registrada con xito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{o(!1)}},m=>{console.error("Geolocation error:",m);let g="No se pudo obtener la ubicacin.";switch(m.code){case m.PERMISSION_DENIED:g="Permiso de ubicacin denegado. Por favor, habilite la ubicacin en su navegador y dispositivo.";break;case m.POSITION_UNAVAILABLE:g="La informacin de ubicacin no est disponible en este momento. Verifique su conexin y GPS.";break;case m.TIMEOUT:g="La solicitud de ubicacin ha tardado demasiado. Intntelo de nuevo en un lugar con mejor seal.";break;default:g=`Ocurri un error desconocido al obtener la ubicacin (cdigo: ${m.code}).`;break}d({text:g,type:"error"}),o(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de prctica."}),i.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),i.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"-- Mi curso --"}),Ag.map(h=>i.jsx("option",{value:h,children:h},h))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[i.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),i.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&i.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i.jsx("span",{children:"Obteniendo ubicacin..."})]}),u&&i.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):a.length>0?a.map(h=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?i.jsx(tet,{}):i.jsx(ret,{}),h.tipo]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},net=async()=>{try{console.log(" Debugging users collection...");const e=ht(vr,"users"),t=Dt(e,Wd(10)),r=await Ir(t),a={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},n=new Set;return r.forEach((s,o)=>{const l=s.data(),c={id:s.id,data:l,fields:Object.keys(l)};a.sampleDocs.push(c),Object.keys(l).forEach(u=>n.add(u))}),a.fieldAnalysis={allFields:Array.from(n),commonFields:Array.from(n).filter(s=>a.sampleDocs.filter(l=>s in l.data).length>a.sampleDocs.length*.5)},console.log("Users collection debug result:",a),a}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},set=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),a=new Date(e,t+1,0,23,59,59,999),n=ir.fromDate(r),s=ir.fromDate(a),o=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],l={};for(const f of o)try{const h=ht(vr,f);try{const m=Dt(h,ur("fechaHora",">=",n),ur("fechaHora","<=",s)),g=await Ir(m);l[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=Dt(h,ur(v,">=",n),ur(v,"<=",s)),w=await Ir(y);l[f]={exists:!0,hasDateField:v,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const v=Dt(h,Yt("__name__"),Wd(5)),y=await Ir(v);l[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){l[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",l),l},iet=(e,t,r,a)=>{try{const n=new Date(e,t,1);n.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(` Buscando registros entre: ${n.toISOString()} y ${s.toISOString()}`),console.log(` Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const o=ir.fromDate(n),l=ir.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(` Total registros encontrados: ${h.length}`),h.length>0&&console.log(" Registros por da:",h.reduce((m,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const v=x.getDate();return m[v]=(m[v]||0)+1,m},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(` Configurando suscripcin para: ${h}`);const m=ht(vr,h),g=Dt(m,ur("fechaHora",">=",o),ur("fechaHora","<=",l),Yt("fechaHora","desc")),x=nr(g,v=>{console.log(` ${h}: ${v.size} documentos encontrados con filtro`),v.size>0?(console.log(` Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),v.docs.forEach((w,j)=>{var O;if(j<5){const B=w.data();let T;(O=B.fechaHora)!=null&&O.toDate?T=B.fechaHora.toDate():typeof B.fechaHora=="string"?T=new Date(B.fechaHora):T=new Date,console.log(`   ${j+1}. ${B.emailEstudiante} - ${T.toLocaleString()} - ${B.tipo}`),console.log(`       Fecha original: ${B.fechaHora} (tipo: ${typeof B.fechaHora})`)}}),v.forEach(w=>{var C;const j=w.data();let O;(C=j.fechaHora)!=null&&C.toDate?O=j.fechaHora.toDate():typeof j.fechaHora=="string"?O=new Date(j.fechaHora):j.fechaHora instanceof Date?O=j.fechaHora:j.fechaHora?O=new Date(j.fechaHora):O=new Date;const B={id:w.id,emailEstudiante:j.emailEstudiante||j.email||"",nombreEstudiante:j.nombreEstudiante||j.nombre||"",curso:j.curso||"",fechaHora:O,tipo:j.tipo,ubicacion:j.ubicacion||null,observaciones:j.observaciones||"",...j},T=`${h}_${w.id}`;u.set(T,B)}),d()):console.log(` ${h}: vaca, manteniendo datos existentes`)},v=>{console.warn(` Error con filtro en ${h}:`,v),console.log(` Intentando estrategia alternativa en ${h}...`);const y=Dt(m,Wd(200)),w=nr(y,O=>{if(console.log(` ${h} (sin filtro): ${O.size} documentos`),O.size>0){const T=O.docs[0].data();console.log(` Estructura en ${h}:`,Object.keys(T)),console.log(" Primer documento:",T)}const B=O.docs.filter(T=>{var S;const C=T.data();if(!C.fechaHora)return!1;let _;return(S=C.fechaHora)!=null&&S.toDate?_=C.fechaHora.toDate():typeof C.fechaHora=="string"?_=new Date(C.fechaHora):C.fechaHora instanceof Date?_=C.fechaHora:_=new Date(C.fechaHora),_>=n&&_<=s});console.log(` ${h}: ${B.length} registros despus de filtro manual`),B.length>0&&(Array.from(u.keys()).filter(C=>C.startsWith(`${h}_`)).forEach(C=>u.delete(C)),B.forEach(C=>{var k;const _=C.data();let S;(k=_.fechaHora)!=null&&k.toDate?S=_.fechaHora.toDate():typeof _.fechaHora=="string"?S=new Date(_.fechaHora):_.fechaHora instanceof Date?S=_.fechaHora:S=new Date(_.fechaHora);const L={id:C.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:S,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},P=`${h}_${C.id}`;u.set(P,L)}),d())}),j=c.findIndex(O=>O===x);j>=0?c[j]=w:c.push(w)});c.push(x)}catch(m){console.warn(` Error configurando ${h}:`,m)}}),()=>{c.forEach(h=>{try{h()}catch(m){console.warn("Error unsubscribing:",m)}})}}catch(n){return console.error("Error setting up subscribeToAsistenciaByMonth:",n),a&&a(new Error(`Error al configurar suscripcin: ${n instanceof Error?n.message:"Error desconocido"}`)),()=>{}}},oet=(e,t)=>{try{console.log(" Buscando usuarios en mltiples colecciones...");const r=["usuarios","users"],a=[],n=new Map,s=()=>{const l=Array.from(n.values());console.log(` Total usuarios encontrados: ${l.length}`);const c=l.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log(" Usuarios por perfil:",c);const u=l.filter(d=>d.profile===zt.ESTUDIANTE);console.log(` Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(l)};let o=!1;return r.forEach(l=>{try{const c=ht(vr,l),u=Dt(c),d=nr(u,f=>{f.size>0?(console.log(` Encontrados ${f.size} usuarios en coleccin: ${l}`),o=!0,Array.from(n.keys()).filter(m=>m.startsWith(`${l}_`)).forEach(m=>n.delete(m)),f.forEach(m=>{var g,x,v,y;try{const w=m.data(),j=w.email||w.userEmail||w.mail||w.correo||"",O=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",B=w.curso||w.course||w.class||w.grade||"";let T=w.profile||w.role||w.tipo||w.userType||zt.ESTUDIANTE;if(typeof T=="string"){const S=T.toLowerCase();S.includes("estudiante")||S.includes("student")||S.includes("alumno")?T=zt.ESTUDIANTE:S.includes("coordinador")||S.includes("coordinator")?T=zt.COORDINADOR_TP:S.includes("profesor")||S.includes("teacher")||S.includes("docente")?T=zt.PROFESOR:(S.includes("subdireccion")||S.includes("subdir"))&&(T=zt.COORDINADOR_TP)}const C={id:m.id,email:j,nombreCompleto:O,curso:B,profile:T,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(v=w.ultimaActividad)==null?void 0:v.toDate)==null?void 0:y.call(v))||new Date(w.ultimaActividad)||new Date,...w},_=`${l}_${m.id}`;n.set(_,C)}catch(w){console.warn(`Error procesando documento ${m.id} en ${l}:`,w)}}),s()):console.log(` Coleccin ${l}: vaca`)},f=>{console.warn(` Error en coleccin ${l}:`,f)});a.push(d)}catch(c){console.warn(` Error configurando ${l}:`,c)}}),setTimeout(()=>{o||(console.error(" No se encontraron usuarios en ninguna coleccin"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{a.forEach(l=>{try{l()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripcin multi-coleccin: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},cet=(e,t)=>{try{console.log("Setting up users subscription...");const r=ht(vr,"users"),a=Dt(r);return nr(a,s=>{console.log(`Raw users snapshot size: ${s.size}`);const o=[];s.forEach(d=>{var f,h,m,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const v=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let j=x.profile||x.role||x.tipo||zt.ESTUDIANTE;if(typeof j=="string"){const B=j.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?j=zt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?j=zt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?j=zt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(j=zt.COORDINADOR_TP)}const O={id:d.id,email:v,nombreCompleto:y,curso:w,profile:j,activo:x.activo!==!1,fechaCreacion:((h=(f=x.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(m=x.ultimaActividad)==null?void 0:m.toDate)==null?void 0:g.call(m))||new Date(x.ultimaActividad)||new Date,...x};o.push(O)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),o.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${o.length} users successfully`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",l);const c=o.filter(d=>d.profile===zt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(o)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripcin de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},YC=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},uet=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),det=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),fet=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[n,s]=N.useState(!0),[o,l]=N.useState(null),[c,u]=N.useState(new Date),[d,f]=N.useState("todos"),[h,m]=N.useState("");N.useEffect(()=>{s(!0),l(null);const T=c.getFullYear(),C=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Ao:",T,"Mes:",C);let _=!1,S=!1;const L=()=>{_&&S&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log(" INICIANDO PRUEBA DIRECTA SIMPLE...");try{const k=ht(vr,"asistencia_dual"),M=Dt(k,Wd(5)),U=await Ir(M);if(console.log(` asistencia_dual - Documentos encontrados: ${U.size}`),U.size>0)U.docs.forEach((z,Q)=>{const q=z.data();console.log(`   ${Q+1}. ${z.id.slice(0,8)} - ${q.emailEstudiante} - ${q.tipo}`),console.log("      Fecha original:",q.fechaHora),console.log("      Todos los campos:",Object.keys(q))});else{console.log(" No se encontraron documentos en asistencia_dual");const z=["asistenciaEmpresa","asistencia_empresa"];for(const Q of z)try{const q=ht(vr,Q),V=Dt(q,Wd(3)),Y=await Ir(V);if(console.log(` ${Q}: ${Y.size} documentos`),Y.size>0){const K=Y.docs[0].data();console.log("   Estructura:",Object.keys(K)),console.log("   Email:",K.emailEstudiante||K.email),console.log("   Fecha:",K.fechaHora||K.fecha)}}catch(q){console.log(` ${Q}: ${q instanceof Error?q.message:"Error"}`)}}}catch(k){console.error(" Error en prueba directa:",k),k.code==="permission-denied"?(console.log(" PROBLEMA: Permisos de Firestore denegados"),console.log(" Ve a Firebase Console  Firestore  Rules y verifica los permisos")):k.code==="failed-precondition"&&(console.log(" PROBLEMA: Faltan ndices en Firestore"),console.log(" Ve a Firebase Console  Firestore  Indexes"))}})(),set(T,C).then(k=>{console.log(" Debug info for collections:",k),Object.entries(k).forEach(([M,U])=>{if(U.exists&&U.totalDocs>0){if(console.log(`
 COLECCIN ${M.toUpperCase()}:`),console.log(`    Total documentos: ${U.totalDocs}`),console.log(`    Documentos del perodo: ${U.count}`),console.log(`    Campo de fecha: ${U.hasDateField}`),U.sampleDoc){console.log("    Documento ejemplo:",U.sampleDoc);const z=U.sampleDoc,Q=z.emailEstudiante||z.email||z.userEmail||z.correo||"NO ENCONTRADO",q=z.tipo||z.type||z.action||z.tipoRegistro||"NO ENCONTRADO",V=z.fechaHora||z.fecha||z.timestamp||z.createdAt||"NO ENCONTRADO";console.log(`    Email estudiante: ${Q}`),console.log(`    Tipo registro: ${q}`),console.log(`    Fecha: ${V}`),console.log("    Todos los campos:",Object.keys(z))}U.filteredDocs&&U.filteredDocs.length>0&&(console.log("    Registros del perodo encontrados:",U.filteredDocs.length),U.filteredDocs.forEach((z,Q)=>{Q<3&&console.log(`      ${Q+1}. ID: ${z.id}`,z.data)}))}else U.exists?console.log(` Coleccin ${M}: vaca`):console.log(` Coleccin ${M}: no existe`)})}).catch(k=>{console.error("Debug error:",k)}),net().then(k=>{console.log(" Debug info for users:",k),(!k.exists||k.totalDocs===0)&&(console.log(' Coleccin "users" vaca o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async U=>{var z;try{const Q=ht(vr,U),q=Dt(Q,Wd(5)),V=await Ir(q);V.size>0?(console.log(` Encontrada coleccin alternativa: ${U} con ${V.size} documentos`),console.log("Documento muestra:",(z=V.docs[0])==null?void 0:z.data())):console.log(` Coleccin ${U}: vaca`)}catch{console.log(` Coleccin ${U}: no existe`)}}))}).catch(k=>{console.error("Users debug error:",k)});try{console.log("Configurando suscripcin a asistencia...");const k=iet(T,C,U=>{if(console.log(" Received registros:",U.length),U.length>0){console.log(" ANLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",U[0]);const z=[...new Set(U.map(J=>J.emailEstudiante).filter(Boolean))];console.log(" Emails de estudiantes en registros:",z);const Q=[...new Set(U.map(J=>J.tipo).filter(Boolean))];console.log(" Tipos de registro encontrados:",Q);const q=U.reduce((J,R)=>{const F=new Date(R.fechaHora).getDate();return J[F]||(J[F]=[]),J[F].push(R),J},{});console.log(" Registros por da del mes:",Object.keys(q).map(J=>({dia:parseInt(J),cantidad:q[parseInt(J)].length})));const V=r.map(J=>J.email).filter(Boolean);console.log(" Emails de estudiantes cargados:",V);const Y=z.filter(J=>V.includes(J)),K=z.filter(J=>!V.includes(J));console.log(" Emails que coinciden:",Y),console.log(" Emails que NO coinciden:",K)}else console.log(" No se encontraron registros de asistencia para el perodo");t(U),_=!0,L()},U=>{console.error(" Error fetching asistencia:",U),l("Error al cargar datos de asistencia: "+U.message),_=!0,L()});console.log("Configurando suscripcin a usuarios...");const M=oet(U=>{if(console.log(" Received users (multi-collection):",U.length),U.length>0){console.log("Sample user:",U[0]);const z=U.filter(Q=>Q.profile===zt.ESTUDIANTE&&Q.curso);console.log("Dual students found:",z.length),z.forEach(Q=>{console.log(`- ${Q.nombreCompleto} (${Q.curso}) - ${Q.email}`)})}a(U),S=!0,L()},U=>{console.error(" Error fetching users (multi-collection):",U),console.log(" Intentando con funcin original de usuarios...");const z=cet(Q=>{console.log(" Received users (fallback):",Q.length),a(Q),S=!0,L()},Q=>{console.error(" Error en fallback tambin:",Q),l("Error al cargar estudiantes: "+U.message),S=!0,L()})});return()=>{console.log("Limpiando suscripciones..."),k&&k(),M&&M()}}catch(k){console.error(" Error setting up subscriptions:",k),l("Error al inicializar conexiones: "+(k instanceof Error?k.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:v}=N.useMemo(()=>{const T=c.getFullYear(),C=c.getMonth();return{monthDays:new Date(T,C+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:T}},[c]),y=N.useMemo(()=>{let T=r.filter(C=>C.profile===zt.ESTUDIANTE&&C.curso&&Ag.includes(YC(C.curso)));if(d!=="todos"&&(T=T.filter(C=>YC(C.curso||"")===d)),h&&(T=T.filter(C=>C.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const C=[...new Set(e.map(L=>L.emailEstudiante).filter(Boolean))],_=T.map(L=>L.email),S=C.filter(L=>!_.includes(L));if(S.length>0){console.log(" Agregando estudiantes faltantes con registros:",S);const P=S.map(k=>{const M=e.find(U=>U.emailEstudiante===k);return{id:k,email:k,nombreCompleto:(M==null?void 0:M.nombreEstudiante)||k.split("@")[0],curso:(M==null?void 0:M.curso)||"3C",profile:zt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(k=>{const M=d==="todos"||YC(k.curso)===d,U=!h||k.nombreCompleto.toLowerCase().includes(h.toLowerCase());return M&&U&&Ag.includes(YC(k.curso))});T=[...T,...P]}}return console.log(` Estudiantes filtrados para mostrar: ${T.length}`),T.forEach(C=>{console.log(`   - ${C.nombreCompleto} (${C.curso}) - ${C.email}`)}),T.sort((C,_)=>C.nombreCompleto.localeCompare(_.nombreCompleto))},[r,d,h,e]),w=N.useMemo(()=>{console.log(" Procesando datos de asistencia para la tabla..."),console.log(` Total registros a procesar: ${e.length}`),console.log(` Estudiantes disponibles: ${y.length}`);const T=new Map;return e.length===0?(console.log(" No hay registros para procesar an"),T):(e.forEach((C,_)=>{const S=C.emailEstudiante;if(!S)return;let L;if(C.fechaHora instanceof Date)L=C.fechaHora;else if(C.fechaHora&&typeof C.fechaHora=="object"&&"toDate"in C.fechaHora)L=C.fechaHora.toDate();else if(typeof C.fechaHora=="string")L=new Date(C.fechaHora);else{console.warn("Fecha no vlida en registro:",C);return}const P=L.getDate(),k=L.getMonth(),M=L.getFullYear();_<3&&console.log(` Registro ${_+1}:`,{email:S,tipo:C.tipo,fechaOriginal:C.fechaHora,fechaProcesada:L.toLocaleString(),ao:M,mes:k,da:P}),T.has(S)||T.set(S,new Map);const U=T.get(S);U.has(P)||U.set(P,{});const z=U.get(P);C.tipo==="Entrada"?(!z.entrada||L<new Date(z.entrada.fechaHora))&&(z.entrada=C):C.tipo==="Salida"&&(!z.salida||L>new Date(z.salida.fechaHora))&&(z.salida=C)}),console.log(" Datos de asistencia procesados:",{estudiantesConRegistros:T.size,estudiantes:Array.from(T.keys()),registrosPorEstudiante:Array.from(T.entries()).map(([C,_])=>({email:C,dias:Array.from(_.keys()),totalRegistros:Array.from(_.values()).reduce((S,L)=>S+(L.entrada?1:0)+(L.salida?1:0),0)}))}),T)},[e]),j=T=>{u(C=>{const _=new Date(C);return _.setMonth(_.getMonth()+T),_})},O=T=>{T!=null&&T.latitud&&(T!=null&&T.longitud)&&window.open(`https://www.google.com/maps?q=${T.latitud},${T.longitud}`,"_blank")},B=["D","L","M","M","J","V","S"];return o?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:o})}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[i.jsx("button",{onClick:()=>j(-1),disabled:n,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:""}),i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${v}`}),i.jsx("button",{onClick:()=>j(1),disabled:n,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:""})]}),i.jsxs("select",{value:d,onChange:T=>f(T.target.value),disabled:n,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"todos",children:"Todos los Cursos"}),Ag.map(T=>i.jsx("option",{value:T,children:T},T))]}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:T=>m(T.target.value),disabled:n,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n?i.jsxs("div",{className:"text-center text-amber-600 py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),i.jsx("div",{children:"Cargando datos de asistencia..."})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(T,C)=>{const S=new Date(v,c.getMonth(),C+1).getDay(),L=S===0||S===6;return i.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${L?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[i.jsx("div",{className:"font-semibold",children:B[S]}),i.jsx("div",{children:C+1})]},C)})]})}),i.jsx("tbody",{children:y.length>0?y.map(T=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:T.nombreCompleto}),Array.from({length:g},(C,_)=>{var M;const S=_+1,L=(M=w.get(T.email))==null?void 0:M.get(S),P=new Date(v,c.getMonth(),_+1),k=P.getDay()===0||P.getDay()===6;return T.email==="alexis.robles@industrialderecoleta.cl"&&S===2&&console.log(" Verificando da 2 para Alexis:",{email:T.email,day:S,hasDataForStudent:w.has(T.email),studentDayRecords:L,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(T.email)?Array.from(w.get(T.email).keys()):[]}),i.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${k?"bg-slate-100 dark:bg-slate-700/50":""}`,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(L==null?void 0:L.entrada)&&i.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var U;return O((U=L.entrada)==null?void 0:U.ubicacion)},children:[i.jsx(uet,{}),i.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(L.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(L==null?void 0:L.salida)&&i.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var U;return O((U=L.salida)==null?void 0:U.ubicacion)},children:[i.jsx(det,{}),i.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(L.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},S)})]},T.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la bsqueda."})})})]})})]})},w4="evaluaciones_formativas",N4="calificaciones_formativas",r7="trabajos_grupales_formativos",Aet="usuarios",a7=e=>{var r,a,n,s;const t=e.data();return{id:e.id,...t,fecha:((a=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(n=t.fechaPresentacion)==null?void 0:n.toDate)==null?void 0:s.call(n).toISOString().split("T")[0])||t.fechaPresentacion}},het=(e,t,r)=>{const a=Dt(ht(st,w4),ur("curso","==",e),ur("asignatura","==",t),Yt("fecha","asc"));return nr(a,n=>{r(n.docs.map(s=>a7(s)))},n=>{console.error("Error al suscribirse a evaluaciones:",n),r([])})},met=async(e,t)=>{const r=ex(st),a=Jt(ht(st,w4));r.set(a,{...e,fecha:ir.fromDate(new Date(e.fecha+"T00:00:00"))});const n=Jt(st,N4,a.id);return r.set(n,t),await r.commit(),a.id},pet=async(e,t)=>{const r=Jt(st,w4,e);await ai(r,t,{merge:!0})},get=async e=>{const t=ex(st);t.delete(Jt(st,w4,e)),t.delete(Jt(st,N4,e)),await t.commit()},xet=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(a=>{const n=Jt(st,N4,a);return nr(n,s=>{s.exists()&&t({[a]:s.data()})})});return()=>r.forEach(a=>a())},vet=async(e,t)=>{const r=Jt(st,N4,e);await ai(r,t,{merge:!0})},bet=(e,t,r)=>{const a=Dt(ht(st,r7),ur("curso","==",e),ur("asignatura","==",t),Yt("fechaPresentacion","desc"));return nr(a,n=>{r(n.docs.map(s=>a7(s)))},n=>{console.error("Error al suscribirse a trabajos grupales:",n),r([])})},yet=async e=>{const t={...e,fechaPresentacion:ir.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await Zr(ht(st,r7),t)},wet=async(e,t)=>{const r=Jt(st,r7,e);await ai(r,t,{merge:!0})},Net=e=>{const t=Dt(ht(st,Aet));return nr(t,r=>{e(r.docs.map(a=>a7(a)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},kue=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},Lv={"Lengua y Literatura":"",Matemtica:"",Ingls:"",Filosofa:"","Historia y Geografa":"","Educacin Ciudadana":"",Ciencias:"","Ciencias para la Ciudadana":"",Artes:"",Msica:"","Educacin Fsica":"",Orientacin:"","Mecnica Industrial":"","Mecnica Automotriz":"",Emprendimiento:"",Tecnologa:"","Pensamiento Lgico":"","Competencia Lectora":"",Default:""},_ue=e=>e.startsWith("1")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},Eet=({cursos:e,onSelect:t})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const a=_ue(r);return i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${a.bg} ${a.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[i.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${a.spine} rounded-l-md`}),i.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${a.text}`,children:[i.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),i.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),Cet=({curso:e,asignaturas:t,onSelect:r,onBack:a})=>{const n=_ue(e);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:" Volver a Cursos"}),i.jsxs("div",{className:`p-2 rounded-md ${n.bg} ${n.text} font-bold`,children:["Libro de Clases: ",e]})]}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>i.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[i.jsx("span",{className:"text-2xl",children:Lv[s]||Lv.Default}),i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},jet=({curso:e,asignatura:t,allUsers:r,onBack:a})=>{const[n,s]=N.useState([]),[o,l]=N.useState({}),[c,u]=N.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=N.useState(null),[h,m]=N.useState(null),[g,x]=N.useState(!0),v=N.useMemo(()=>r.filter(_=>_.profile===zt.ESTUDIANTE&&kue(_.curso||"")===e).map(_=>_.nombreCompleto).sort((_,S)=>_.localeCompare(S)),[r,e]);N.useEffect(()=>{x(!0);const _=het(e,t,S=>{s(S);const L=S.map(k=>k.id),P=xet(L,k=>{l(M=>({...M,...k}))});return x(!1),()=>P()});return()=>_()},[e,t]);const y=_=>{const{name:S,value:L}=_.target;d?f(P=>P?{...P,[S]:L}:null):u(P=>({...P,[S]:L}))},w=async _=>{if(_.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const S={asignatura:t,curso:e,...c},L=v.reduce((P,k)=>(P[k]="trabajado",P),{});try{await met(S,L),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(P){console.error(P),m("No se pudo crear la evaluacin.")}},j=(_,S)=>{var M;const L=((M=o[_])==null?void 0:M[S])||"trabajado";let P;L==="trabajado"?P="no trabajado":L==="no trabajado"?P="ausente":P="trabajado";const k={...o,[_]:{...o[_]||{},[S]:P}};l(k),vet(_,{[S]:P}).catch(U=>{console.error("Error updating grade:",U)})},O=_=>f(_),B=async()=>{if(d)try{await pet(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(_){console.error(_),m("No se pudo guardar la edicin.")}},T=async _=>{if(window.confirm("Eliminar esta evaluacin y todas sus calificaciones?"))try{await get(_)}catch(S){console.error(S),m("No se pudo eliminar la evaluacin.")}},C=N.useCallback(_=>{if(n.length===0)return"-";let S=0,L=0;return n.forEach(P=>{var M;const k=(M=o[P.id])==null?void 0:M[_];k==="trabajado"?(S+=7,L++):k==="no trabajado"&&(S+=2,L++)}),L===0?"-":(S/L).toFixed(1)},[o,n]);return g?i.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluacin"}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),i.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),i.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("div",{className:"w-full",children:i.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&i.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),n.map(_=>i.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===_.id?i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("button",{onClick:B,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:""})]}):i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"font-semibold",children:_.nombreActividad}),i.jsx("span",{className:"font-normal text-slate-500",children:_.fecha}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx("button",{onClick:()=>O(_),className:"text-blue-500 hover:text-blue-700",children:""}),i.jsx("button",{onClick:()=>T(_.id),className:"text-red-500 hover:text-red-700",children:""})]})]})},_.id)),i.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(_=>i.jsxs("tr",{children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:_}),n.map(S=>{var k;const L=(k=o[S.id])==null?void 0:k[_];let P;return L==="trabajado"?P=Lv[t]||Lv.Default:L==="no trabajado"?P="":L==="ausente"?P="A":P=Lv[t]||Lv.Default,i.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:i.jsx("button",{onClick:()=>j(S.id,_),className:`text-3xl transition-opacity duration-200 ${L==="trabajado"?"opacity-100":L==="no trabajado"?"opacity-40":L==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:P})},S.id)}),i.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:C(_)})]},_))})]})})]})},ket=({curso:e,asignatura:t,allUsers:r,onBack:a})=>{const[n,s]=N.useState([]),[o,l]=N.useState(null),[c,u]=N.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=N.useState({}),[h,m]=N.useState(2),g=N.useMemo(()=>r.filter(O=>O.profile===zt.ESTUDIANTE&&kue(O.curso||"")===e).sort((O,B)=>O.nombreCompleto.localeCompare(B.nombreCompleto)),[r,e]);N.useEffect(()=>{const O=bet(e,t,s);return()=>O()},[e,t]),N.useEffect(()=>{if(o){const O={};o.grupos.forEach(B=>{B.integrantes.forEach(T=>{O[T.nombre]={groupNumber:String(B.numero),role:T.rol||""}})}),f(O)}else f({})},[o]);const x=async O=>{if(O.preventDefault(),!c.nombre.trim())return;const B={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await yet(B),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(T){console.error(T),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!o)return;const O=new Map;for(const T of g){const C=d[T.nombreCompleto];if(C&&C.groupNumber){const _=parseInt(C.groupNumber,10);isNaN(_)||(O.has(_)||O.set(_,[]),O.get(_).push({nombre:T.nombreCompleto,rol:C.role||""}))}}const B=Array.from(O.entries()).map(([T,C])=>({numero:T,integrantes:C})).sort((T,C)=>T.numero-C.numero);try{await wet(o.id,{grupos:B}),alert("Grupos guardados con xito.")}catch(T){console.error(T),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const O=[...g].sort(()=>Math.random()-.5),B={};O.forEach((T,C)=>{var _;B[T.nombreCompleto]={groupNumber:String(C%h+1),role:((_=d[T.nombreCompleto])==null?void 0:_.role)||""}}),f(B)},w=(O,B,T)=>{f(C=>({...C,[O]:{...C[O]||{groupNumber:"",role:""},[B]:T}}))},j=N.useMemo(()=>{const O=new Map;return Object.entries(d).forEach(([B,T])=>{T.groupNumber&&(O.has(T.groupNumber)||O.set(T.groupNumber,[]),O.get(T.groupNumber).push({nombre:B,rol:T.role}))}),Array.from(O.entries()).sort((B,T)=>parseInt(B[0])-parseInt(T[0]))},[d]);return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a Actividades"}),i.jsx("h2",{className:"text-2xl font-bold",children:o.nombreActividad})]}),i.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-1 space-y-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignacin"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:h,onChange:O=>m(parseInt(O.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),i.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Nmina del Curso"}),i.jsx("table",{className:"w-full text-sm",children:i.jsx("tbody",{children:g.map(O=>{var B;return i.jsxs("tr",{children:[i.jsx("td",{className:"py-1 pr-2",children:O.nombreCompleto}),i.jsx("td",{className:"py-1",children:i.jsx("input",{type:"number",value:((B=d[O.nombreCompleto])==null?void 0:B.groupNumber)||"",onChange:T=>w(O.nombreCompleto,"groupNumber",T.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N"})})]},O.id)})})})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:j.map(([O,B])=>i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[i.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",O]}),i.jsx("ul",{className:"space-y-2",children:B.map(T=>i.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"flex-1 truncate",children:T.nombre}),i.jsxs("select",{value:T.rol||"",onChange:C=>w(T.nombre,"role",C.target.value),className:"p-1 border rounded text-xs w-32",children:[i.jsx("option",{value:"",children:"-- Asignar Rol --"}),Wte.map(C=>i.jsx("option",{value:C,children:C},C))]})]},T.nombre))})]},O))})]})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),i.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[i.jsx("input",{value:c.nombre,onChange:O=>u({...c,nombre:O.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("input",{type:"date",value:c.fecha,onChange:O=>u({...c,fecha:O.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),n.map(O=>i.jsxs("button",{onClick:()=>l(O),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[i.jsx("p",{className:"font-bold",children:O.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",O.fechaPresentacion]})]},O.id))]})]})},_et=({currentUser:e})=>{const[t,r]=N.useState("calificaciones"),[a,n]=N.useState(null),[s,o]=N.useState(null),[l,c]=N.useState([]),[u,d]=N.useState(!0);N.useEffect(()=>{d(!0);const x=Net(v=>{c(v),d(!1)});return()=>x()},[]);const f=N.useMemo(()=>e.cursos||[],[e.cursos]),h=N.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>i.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(u)return i.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!a)return i.jsx(Eet,{cursos:f,onSelect:n});if(!s)return i.jsx(Cet,{curso:a,asignaturas:h,onSelect:o,onBack:()=>n(null)});if(t==="calificaciones")return i.jsx(jet,{curso:a,asignatura:s,allUsers:l,onBack:()=>o(null)});if(t==="grupos")return i.jsx(ket,{curso:a,asignatura:s,allUsers:l,onBack:()=>o(null)})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),i.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),i.jsx("div",{className:"mt-6",children:g()})]})};function Bet(e){return e.map(t=>{const[r,a]=t.minuto.split("-").map(Number),n=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(a-r):0;return{minuto:r,participacion:Math.min(100,n*10)}})}function Tet(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[a]|cu[a]l|qu[e]|c[o]mo|por qu[e]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[e] m[a]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[o]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[i] es|mejorar[i]a)/gi};for(const[a,n]of Object.entries(r)){const s=e.match(n);t.set(a,s?s.length:0)}return t}async function Iet(e,t){var o;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=Bet(e.detallesObservacion);let l=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),h=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?l+=h:c+=h}),r.stats.min_interaccion=l,r.stats.min_explicacion=c}const a=new Map;let n=0;(o=e.detallesObservacion)==null||o.forEach(l=>{Tet(l.accionesDocente).forEach((u,d)=>{a.set(d,(a.get(d)||0)+u)}),n+=l.accionesDocente.length}),a.forEach((l,c)=>{const u=n>0?l/n*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:l}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((l,c)=>l+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...a.entries()].sort(([,l],[,c])=>c-l);return r.summary.fortalezas=s.slice(0,3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crtico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensin";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentacin inmediata y efectiva";default:return`Buen uso de ${l.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar ms secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar ms ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar ms retroalimentacin inmediata";default:return`Incrementar el uso de ${l.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(l=>l.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":l.includes("secuencias de preguntas")?'Implementar la tcnica de "Por qu?" en cascada':l.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificacin cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participacin estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicacin vs. interaccin"),r}const Oet=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[a,n]=N.useState(null),[s,o]=N.useState(null),[l,c]=N.useState(!1),u=e.length,d=Object.values(t).reduce((y,w)=>y+w.length,0)+r.length,f=[...Object.values(t).flat(),...r],h=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,m=f.reduce((y,w)=>{const j=new Date(w.fecha).toLocaleDateString("es-ES",{month:"long"});return y[j]=(y[j]||0)+1,y},{}),g=f.reduce((y,w)=>(w.asignaturaInfo&&(y[w.asignaturaInfo]=(y[w.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,w])=>w-y).slice(0,5);f.reduce((y,w)=>{if(!w.horaInicio||!w.horaTermino)return y;const j=new Date("2000/01/01 "+w.horaInicio),B=(new Date("2000/01/01 "+w.horaTermino).getTime()-j.getTime())/(1e3*60);return y+B},0)/f.length;const v=f.filter(y=>{var w,j,O;return((w=y.retroalimentacion)==null?void 0:w.exito)&&((j=y.retroalimentacion)==null?void 0:j.modelo)&&((O=y.retroalimentacion)==null?void 0:O.foco)}).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:i.jsx(ru,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompaamientos"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:i.jsx(hm,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(Fi,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(nn,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentacin Completa"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(ul,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),i.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,w])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${w/d*100}%`}})})]})},y))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(yw,{className:"w-5 h-5 text-purple-600"}),"Anlisis Inteligente"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Anlisis"}),i.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const w=f.find(j=>j.id===y.target.value);o(w||null)},children:[i.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>i.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!a&&i.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(j=>j.docenteInfo===s.docenteInfo&&j.id!==s.id),w=await Iet(s,y);n(w)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:l,children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(yw,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),a&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participacin"}),i.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[a.stats.participacion_promedio.toFixed(1),"%"]})]}),i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interaccin vs Explicacin"}),i.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[a.stats.min_interaccion,"min / ",a.stats.min_explicacion,"min"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[i.jsx(nn,{className:"w-4 h-4"})," Fortalezas"]}),i.jsx("ul",{className:"space-y-2",children:a.summary.fortalezas.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},w))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[i.jsx(Cb,{className:"w-4 h-4"})," reas de Mejora"]}),i.jsx("ul",{className:"space-y-2",children:a.summary.mejoras.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},w))})]})]}),a.alerts.length>0&&i.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[i.jsx(Ac,{className:"w-4 h-4"})," Alertas"]}),i.jsx("ul",{className:"space-y-2",children:a.alerts.map((y,w)=>i.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},w))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[i.jsx(Xj,{className:"w-4 h-4"})," Recomendaciones"]}),i.jsx("ul",{className:"space-y-2",children:a.summary.recomendaciones.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},w))})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(wi,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Ms Observadas"]}),i.jsx("div",{className:"space-y-2",children:x.map(([y,w])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${w/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Xj,{className:"w-5 h-5 text-blue-600"}),"ltimos Ciclos OPR"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),i.jsx("tbody",{children:f.sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var w;return i.jsxs("tr",{className:"border-t dark:border-slate-700",children:[i.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),i.jsx("td",{className:"py-2 px-3",children:(w=y.retroalimentacion)!=null&&w.exito?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[i.jsx(nn,{className:"w-3 h-3"})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[i.jsx(Cb,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},Sue=TR(),R1="acompanamientos",Jh="ciclos_opr",af=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},Bue=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,a=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+a.toLowerCase()},Fet=(e,t,r)=>{const a=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),n=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=Bue(r);return`videos_opr/${a}/${n}/${s}`},Det=async(e,t,r)=>{try{if(!Cw.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesin nuevamente.");if(!e)throw new Error("No se proporcion un archivo vlido.");const a=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],n=500*1024*1024;if(e.size>n)throw new Error(`El archivo es demasiado grande. Mximo permitido: ${(n/1024/1024).toFixed(0)}MB`);if(!a.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const o=(t||"").split("/");if(o.length>=4&&o[0]==="videos_opr"){const d=o[1],f=o[2],h=o.slice(3).join("/");s=Fet(d,f,h)}else{const d=Date.now(),f=Bue(e.name);s=`videos_opr/general/${d}_${f}`}const l=rx(Sue,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:Cw.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=o2e(l,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agot el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexin a internet.";break;default:m!=null&&m.message&&(g=m.message);break}f(new Error(g))},async()=>{try{const m=await NN(u.snapshot.ref);d(m)}catch{f(new Error("El archivo se subi, pero no se pudo obtener la URL de descarga."))}})})}catch(a){const n=(a==null?void 0:a.message)||"Error inesperado al procesar el archivo.";throw new Error(n)}},n7=async e=>{try{const t=rx(Sue,e),{items:r,prefixes:a}=await l2e(t);await Promise.all(r.map(n=>zte(n))),await Promise.all(a.map(n=>n7(n.fullPath)))}catch{}},Pet=async()=>{try{const e=Dt(ht(st,R1),Yt("fecha","desc"));return(await Ir(e)).docs.map(a=>{const n=a.data();return{id:a.id,...n,fecha:af(n==null?void 0:n.fecha)}}).sort((a,n)=>a.fecha<n.fecha?1:a.fecha>n.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompaamientos")}},Ret=async e=>{var t,r;try{const a=e.docenteEmailLower||((r=(t=Cw.currentUser)==null?void 0:t.email)==null?void 0:r.toLowerCase())||void 0,n={...e,docenteEmailLower:a,fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()},s=await Zr(ht(st,R1),n);return{...e,id:s.id,fecha:af(e.fecha)}}catch{throw new Error("No se pudo crear el acompaamiento")}},Let=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:ir.fromDate(new Date(t.fecha))}:{},fechaModificacion:ir.now()};await Bo(Jt(st,R1,e),r)}catch{throw new Error("No se pudo actualizar el acompaamiento")}},Met=async e=>{try{const t=Dt(ht(st,Jh),ur("acompanamientoId","==",e)),r=await Ir(t),a=ex(st);r.forEach(n=>a.delete(Jt(st,Jh,n.id))),await a.commit(),await n7(`videos_opr/${e}`),await xn(Jt(st,R1,e))}catch{throw new Error("No se pudo eliminar el acompaamiento y sus datos asociados")}},qW=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now(),...e.docenteEmailLower?{docenteEmailLower:e.docenteEmailLower}:{}};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:ir.fromDate(new Date(e.seguimiento.fecha))});const a=await Zr(ht(st,Jh),r);return{...e,id:a.id,acompanamientoId:String(e.acompanamientoId||""),fecha:af(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},Uet=async(e,t)=>{var r;try{const a={...t};t.fecha&&(a.fecha=ir.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(a.seguimiento={...t.seguimiento,fecha:ir.fromDate(new Date(t.seguimiento.fecha))}),a.fechaModificacion=ir.now(),await Bo(Jt(st,Jh,e),a)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},yD=async e=>{try{const t=Dt(ht(st,Jh),ur("acompanamientoId","==",e),Yt("fecha","desc"));return(await Ir(t)).docs.map(n=>{var l;const s=n.data(),o={id:n.id,...s,fecha:af(s==null?void 0:s.fecha)};return(l=s==null?void 0:s.seguimiento)!=null&&l.fecha&&(o.seguimiento={...s.seguimiento,fecha:af(s.seguimiento.fecha)}),o})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el ndice compuesto (acompanamientoId + fecha).")}},Qet=async()=>{try{const e=Dt(ht(st,Jh),ur("acompanamientoId","==",""),Yt("fecha","desc"));return(await Ir(e)).docs.map(a=>{var o;const n=a.data(),s={id:a.id,...n,fecha:af(n==null?void 0:n.fecha)};return(o=n==null?void 0:n.seguimiento)!=null&&o.fecha&&(s.seguimiento={...n.seguimiento,fecha:af(n.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},Het=(e,t,r)=>{const a=Dt(ht(st,Jh),ur("acompanamientoId","==",e),Yt("fecha","desc"));return nr(a,n=>{const s=n.docs.map(o=>{var u;const l=o.data(),c={id:o.id,...l,fecha:af(l==null?void 0:l.fecha)};return(u=l==null?void 0:l.seguimiento)!=null&&u.fecha&&(c.seguimiento={...l.seguimiento,fecha:af(l.seguimiento.fecha)}),c});t(s)},n=>r==null?void 0:r(n))},wD=async e=>{try{const t=await Uh(Jt(st,Jh,e));if(!t.exists())return;const r=t.data(),a=(r==null?void 0:r.acompanamientoId)||"general";await n7(`videos_opr/${a}/${e}`),await xn(Jt(st,Jh,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},KW=async e=>{try{const t=Dt(ht(st,R1),ur("docente","==",e),Yt("fecha","desc"));return(await Ir(t)).docs.map(a=>{const n=a.data();return{id:a.id,...n,fecha:af(n==null?void 0:n.fecha)}})}catch{throw new Error("No se pudieron cargar los acompaamientos del docente")}},zet=async e=>{try{const t=Dt(ht(st,R1),ur("docenteEmailLower","==",e),Yt("fecha","desc"));return(await Ir(t)).docs.map(a=>{const n=a.data();return{id:a.id,...n,fecha:af(n==null?void 0:n.fecha)}})}catch{throw new Error("No se pudieron cargar los acompaamientos del docente")}},Vet=async e=>{try{const t=Dt(ht(st,"rubricas_personalizadas"),ur("docente","==",e)),r=await Ir(t);if(r.empty)return null;const a=r.docs[0].data();return(a==null?void 0:a.rubrica)??null}catch{return null}},$et=async()=>await P1(),Get=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:a,onRemove:n,isUploading:s,accept:o="video/mp4,video/quicktime,video/avi,video/mov",error:l,progress:c=0,allowLink:u=!1})=>{const[d,f]=N.useState(!1),[h,m]=N.useState(!1),[g,x]=N.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=C=>{C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?f(!0):C.type==="dragleave"&&f(!1)},w=C=>{if(C.preventDefault(),C.stopPropagation(),f(!1),C.dataTransfer.files&&C.dataTransfer.files[0]&&!s){const _=C.dataTransfer.files[0];O(_)}},j=C=>{if(C.target.files&&C.target.files[0]&&!s){const _=C.target.files[0];O(_)}},O=C=>{if(C.size>524288e3){alert(`El archivo es demasiado grande. Tamao mximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(C.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(C)},B=()=>l?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",T=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL vlida que comience con http:// o https://");return}r(g),m(!1),x("")}};return i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!a&&!s&&i.jsx("button",{type:"button",onClick:()=>m(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"url",value:g,onChange:C=>x(C.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),a?i.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[i.jsx(nn,{className:"w-5 h-5 text-green-600"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:a.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),i.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:a.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),i.jsx("button",{type:"button",onClick:n,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:i.jsx(sn,{className:"w-4 h-4"})})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":l?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,onClick:()=>{var C;return!s&&((C=document.getElementById(v))==null?void 0:C.click())},children:[i.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):l?i.jsxs("div",{className:"text-center",children:[i.jsx(Ac,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):i.jsxs("div",{className:"text-center",children:[i.jsx(m1,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aqu"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (mx. 500MB)"})]})}),i.jsx("input",{id:v,type:"file",onChange:j,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:o,style:{display:"none"}})]}),s&&i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:`${B()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),l&&i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[i.jsx(Ac,{className:"w-4 h-4 text-red-500"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})]})]})},qet=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:a,profesores:n})=>{const[s,o]=N.useState(!1),[l,c]=N.useState({}),[u,d]=N.useState({}),[f,h]=N.useState({}),[m,g]=N.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=N.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=N.useState(t||x);N.useEffect(()=>{t&&(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""}))},[t]);const w=k=>{const{name:M,value:U}=k.target,z=M.split(".");z.length>1?y(Q=>{const q=JSON.parse(JSON.stringify(Q));let V=q;for(let Y=0;Y<z.length-1;Y++)V=V[z[Y]];return V[z[z.length-1]]=U,q}):y(Q=>({...Q,[M]:U}))},j=(k,M,U)=>{y(z=>({...z,detallesObservacion:z.detallesObservacion.map(Q=>Q.id===k?{...Q,[M]:U}:Q)}))},O=()=>{const k=v.detallesObservacion[v.detallesObservacion.length-1],M=k&&parseInt(k.minuto.split("-")[1],10)||0,U=`${M+1}-${M+5}`;y(z=>({...z,detallesObservacion:[...z.detallesObservacion,{id:`row_${Date.now()}`,minuto:U,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},B=k=>{y(M=>({...M,detallesObservacion:M.detallesObservacion.filter(U=>U.id!==k)}))},T=async(k,M)=>{h(U=>({...U,[k]:null})),c(U=>({...U,[k]:!0})),d(U=>({...U,[k]:0}));try{const U=Date.now(),z=M.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),Q=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",q=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",V=`videos_opr/${Q}/${q}/${U}_${z}`,Y=await Det(M,V,K=>{d(J=>({...J,[k]:K}))});C(k,Y),d(K=>({...K,[k]:100}))}catch(U){const z=(U==null?void 0:U.message)||"Error desconocido al subir el archivo";h(Q=>({...Q,[k]:z})),alert(`Error al subir el video: ${z}`)}finally{c(U=>({...U,[k]:!1})),setTimeout(()=>{d(U=>({...U,[k]:0}))},2e3)}},C=(k,M)=>{const U=k.split(".");U.length>1?y(z=>{const Q=JSON.parse(JSON.stringify(z));let q=Q;for(let V=0;V<U.length-1;V++)q=q[U[V]];return q[U[U.length-1]]=M,Q}):y(z=>({...z,[k]:M}))},_=k=>{const M=k.split(".");M.length>1?y(U=>{const z=JSON.parse(JSON.stringify(U));let Q=z;for(let q=0;q<M.length-1;q++)Q=Q[M[q]];return Q[M[M.length-1]]="",z}):y(U=>({...U,[k]:""})),h(U=>({...U,[k]:null})),d(U=>({...U,[k]:0}))},S=async()=>{o(!0);try{const k=so.currentUser;if(!k){alert("No se pudo obtener el token de autenticacin. Inicia sesin nuevamente."),o(!1);return}const M=await k.getIdToken(),U=await fetch("/api/mejorarTextoOPR",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`},body:JSON.stringify({formData:v})});if(!U.ok){const Q=await U.json();throw new Error(Q.error||"Error al mejorar el texto con IA")}const{retroalimentacion:z}=await U.json();y(Q=>({...Q,retroalimentacion:{...Q.retroalimentacion,...z}})),alert("Textos mejorados exitosamente con IA")}catch(k){console.error(k),alert(k.message||"No se pudo mejorar la redaccin. Intenta nuevamente.")}finally{o(!1)}},L=()=>{const k=new pr,M=k.internal.pageSize.getWidth(),U=k.internal.pageSize.getHeight(),z=15,Q="https://res.cloudinary.com/dwncmu1wu/image/upload/v1753209432/LIR_fpq2lc.png",q=15,V=15;let Y=25;const K=()=>{const ie="Liceo Industrial de Recoleta";k.setFontSize(8),k.setFont("helvetica","normal"),k.text(ie,M/2,U-10,{align:"center"}),k.setFontSize(10),k.setFont("helvetica","normal");const ae=U-25;k.line(z,ae,z+70,ae),k.text("Firma Docente",z+15,ae+5),k.line(M-z-70,ae,M-z,ae),k.text("Firma Observador",M-z-55,ae+5)},J=()=>{try{k.addImage(Q,"PNG",M-V-10,10,V,q)}catch(ie){console.error("Error al cargar el logo:",ie)}};J();const R=k.addPage;k.addPage=function(){return R.apply(this,arguments),J(),K(),this};const F=ie=>{Y>240&&(k.addPage(),Y=25),k.setFontSize(14),k.setFont("helvetica","bold"),k.text(ie,z,Y),Y+=12};k.setFontSize(18),k.setFont("helvetica","bold"),k.text("Informe de Ciclo OPR",M/2,Y,{align:"center"}),Y+=18,F("1. Datos Generales");const W=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];bi(k,{body:W,startY:Y,theme:"plain",styles:{fontSize:10,cellPadding:3,lineWidth:.1,lineColor:[220,220,220]},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:z,right:z}}),Y=k.lastAutoTable.finalY+15,F("2. Registro Detallado de Observacin");const X=v.detallesObservacion.map(ie=>[ie.minuto,ie.accionesDocente,ie.accionesEstudiantes,ie.actividades]);bi(k,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:X,startY:Y,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,cellPadding:4,halign:"center"},styles:{fontSize:9,cellPadding:4,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{left:z,right:z},didDrawPage:ie=>{var ae;Y=((ae=ie.cursor)==null?void 0:ae.y)||25}}),Y=k.lastAutoTable.finalY+15,F("3. Retroalimentacin Docente");const ne=[];if(v.retroalimentacion.exito&&ne.push(["xito:",v.retroalimentacion.exito]),v.retroalimentacion.modelo&&ne.push(["Modelo:",v.retroalimentacion.modelo]),v.retroalimentacion.foco&&ne.push(["Foco:",v.retroalimentacion.foco]),v.retroalimentacion.elementosIdentificar&&ne.push(["Elementos a Identificar:",v.retroalimentacion.elementosIdentificar]),ne.length>0&&(bi(k,{body:ne,startY:Y,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{cellWidth:"auto"}},margin:{left:z,right:z}}),Y=k.lastAutoTable.finalY+10),v.retroalimentacion.brecha){Y>240&&(k.addPage(),Y=40),k.setFontSize(12),k.setFont("helvetica","bold"),k.text("Anlisis de Brecha",z,Y),Y+=8;const ie=[],ae=v.retroalimentacion.brecha.minutoInicial,Ae=v.retroalimentacion.brecha.minutoFinal;ae&&Ae&&ie.push(["Minutos:",`${ae} a ${Ae}`]),v.retroalimentacion.brecha.preguntas&&ie.push(["Preguntas:",v.retroalimentacion.brecha.preguntas]),v.retroalimentacion.brecha.indicadores&&ie.push(["Indicadores:",v.retroalimentacion.brecha.indicadores]),ie.length>0&&(bi(k,{body:ie,startY:Y,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:z+5,right:z}}),Y=k.lastAutoTable.finalY+10)}F("4. Planificacin de Prctica");const le=[];v.planificacion.preparacion&&le.push(["Preparacin:",v.planificacion.preparacion]),v.planificacion.objetivo&&le.push(["Objetivo:",v.planificacion.objetivo]),v.planificacion.actividad&&le.push(["Actividad:",v.planificacion.actividad]),v.planificacion.tiempo&&le.push(["Tiempo:",v.planificacion.tiempo]),le.length>0&&(bi(k,{body:le,startY:Y,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:z,right:z}}),Y=k.lastAutoTable.finalY+10),K(),k.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},P=async k=>{if(k.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const M={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(M)}catch(U){console.error("Error al guardar ciclo OPR:",U),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Bsicos del Ciclo OPR"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),i.jsxs("select",{value:m.docente,onChange:k=>g(M=>({...M,docente:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),n.map(k=>i.jsx("option",{value:k,children:k},k))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{value:m.curso,onChange:k=>g(M=>({...M,curso:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),Nn.map(k=>i.jsx("option",{value:k,children:k},k))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:m.asignatura,onChange:k=>g(M=>({...M,asignatura:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),En.map(k=>i.jsx("option",{value:k,children:k},k))]})]})]})]}),i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:S,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[i.jsx(MR,{className:"w-4 h-4"}),s?"Mejorando redaccin...":"Mejorar Redaccin del Ciclo"]}),i.jsxs("button",{type:"button",onClick:L,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(Qh,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redaccin de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),i.jsxs("form",{onSubmit:P,className:"space-y-8",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(hm,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:w,placeholder:"Nombre o N del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:w,placeholder:"Registro de Observacin N",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),i.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx(Get,{label:"Video de observacin de clase",onFileChange:k=>T("videoObservacionUrl",k),onLinkChange:k=>C("videoObservacionUrl",k),uploadedUrl:v.videoObservacionUrl,onRemove:()=>_("videoObservacionUrl"),isUploading:!!l.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Fg,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observacin"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b dark:border-slate-600",children:[i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),i.jsx("th",{className:"p-2"})]})}),i.jsx("tbody",{children:v.detallesObservacion.map(k=>i.jsxs("tr",{className:"border-b dark:border-slate-700",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:k.minuto,onChange:M=>j(k.id,"minuto",M.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:k.accionesDocente,onChange:M=>j(k.id,"accionesDocente",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:k.accionesEstudiantes,onChange:M=>j(k.id,"accionesEstudiantes",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:k.actividades,onChange:M=>j(k.id,"actividades",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),i.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&i.jsx("button",{type:"button",onClick:()=>B(k.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:i.jsx(sn,{className:"w-4 h-4"})})})]},k.id))})]})}),i.jsxs("button",{type:"button",onClick:O,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[i.jsx($O,{className:"w-4 h-4"})," Agregar Fila"]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(LR,{className:"w-5 h-5 text-green-600"})," Retroalimentacin Docente"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"xito"}),i.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),i.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedaggico o metodologa observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),i.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observacin y retroalimentacin...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),i.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos especficos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Yte,{className:"w-5 h-5 text-purple-600"})," Planificacin de Prctica y Seguimiento"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparacin"}),i.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparacin para la prxima prctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),i.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:w,placeholder:"Objetivo especfico para la siguiente observacin...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),i.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:w,placeholder:"Actividades especficas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),i.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(Fi,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),i.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),i.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:a,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(l).some(Boolean),children:[Object.values(l).some(Boolean)&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},Ket=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[n,s]=N.useState({}),[o,l]=N.useState(!0),[c,u]=N.useState(!0),[d,f]=N.useState(null),[h,m]=N.useState("list"),[g,x]=N.useState(null),[v,y]=N.useState(null),[w,j]=N.useState("general"),[O,B]=N.useState(!1),[T,C]=N.useState({}),[_,S]=N.useState([]),L=L2,P=N.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[k,M]=N.useState(P),U=N.useCallback(async()=>{l(!0),f(null);try{const ie=await Pet();t(ie)}catch(ie){f("No se pudieron cargar los registros de acompaamiento."),console.error(" Error al cargar acompaamientos:",ie)}finally{l(!1)}},[]),z=N.useCallback(async()=>{u(!0);try{const ae=(await $et()).filter(re=>re.profile==="PROFESORADO").map(re=>({nombre:re.nombreCompleto,email:(re.email||"").toLowerCase()})),Ae=ae.map(re=>re.nombre).sort(),ke={};ae.forEach(re=>{re.nombre&&re.email&&(ke[re.nombre]=re.email)}),a(Ae),s(ke)}catch(ie){f("No se pudo cargar la lista de profesores."),console.error(" Error al cargar profesores:",ie)}finally{u(!1)}},[]),Q=N.useCallback(async()=>{try{const ie={};for(const ae of e)if(ae.id)try{const Ae=await yD(ae.id);Ae.length>0&&(ie[ae.id]=Ae)}catch(Ae){console.error(`Error loading OPR cycles for ${ae.id}:`,Ae)}try{const ae=await Qet();S(ae)}catch(ae){console.error("Error loading standalone OPR cycles:",ae),S([])}C(ie)}catch(ie){console.error("Error fetching OPR cycles:",ie)}},[e]);N.useEffect(()=>{U(),z()},[U,z]),N.useEffect(()=>{e.length>0&&Q()},[e,Q]);const q=(ie,ae)=>{if(y(ie),ae)M(ae),x(ae.id);else{const Ae={id:"temp-"+Date.now(),fecha:ie.fecha,docente:ie.docenteInfo||"",curso:ie.cursoInfo||"",asignatura:ie.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};M(Ae),x(null)}m("form"),j("opr"),f(null)},V=async()=>{if(!("docente"in k)||!k.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentacin.');return}B(!0),f(null);try{const ie=so.currentUser;if(!ie){alert("No se pudo obtener el token de autenticacin. Inicia sesin nuevamente."),B(!1);return}const ae=await ie.getIdToken(),Ae=await fetch("/api/generarFeedbackAcompanamientoDocente",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({formData:k})});if(!Ae.ok)throw new Error("Error al generar la retroalimentacin con IA");const{feedback:ke}=await Ae.json();M(re=>({...re,retroalimentacionConsolidada:ke})),alert("Retroalimentacin generada exitosamente con IA.")}catch{f("No se pudo generar la retroalimentacin automtica."),alert("Error: No se pudo generar la retroalimentacin automtica.")}finally{B(!1)}},Y=async ie=>{var ae;if(ie.preventDefault(),!("docente"in k)||!k.docente||!k.curso||!k.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}f(null);try{const Ae=(ae=n[k.docente])==null?void 0:ae.toLowerCase();if(g)await Let(g,{...k,docenteEmailLower:Ae}),alert("Acompaamiento actualizado correctamente!");else{const ke=await Ret({...k,docenteEmailLower:Ae});x(ke.id),M(ke),alert("Acompaamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await U()}catch(Ae){const ke=(Ae==null?void 0:Ae.message)??"Error al guardar el registro de acompaamiento.";f(ke),console.error(" Error al guardar:",Ae),alert(`Error: ${ke}`)}},K=()=>{M(P),x(null),y(null),m("form"),j("general"),f(null)},J=ie=>{M(ie),x(ie.id),y(null),m("form"),j("general"),f(null)},R=async ie=>{if(window.confirm("Est seguro de que desea eliminar este registro? Esta accin no se puede deshacer."))try{await Met(ie),await U(),alert("Registro eliminado exitosamente.")}catch(ae){const Ae="No se pudo eliminar el registro.";f(Ae),console.error(" Error al eliminar:",ae),alert(`Error: ${Ae}`)}},F=(ie,ae)=>{M(Ae=>({...Ae,rubricaResultados:{...Ae.rubricaResultados||{},[ie]:ae}}))},W=()=>{var ie;if(!("docente"in k)||!k.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const ae=new pr,Ae=ae.internal.pageSize.getWidth(),ke=ae.internal.pageSize.getHeight(),re=20,Re=Ae-re*2,Le=(ye,oe)=>oe+ye>ke-re,Te=()=>{const ye=ae.getNumberOfPages();for(let oe=1;oe<=ye;oe++)ae.setPage(oe),ae.setFontSize(9),ae.setTextColor(128),ae.text(`pg. ${oe} de ${ye}`,Ae-re,ke-10,{align:"right"})};let de=re;ae.setFontSize(16),ae.setFont("helvetica","bold"),ae.text("INFORME DE ACOMPAAMIENTO DOCENTE",Ae/2,de,{align:"center"}),de+=15;const Ce=40;if(bi(ae,{startY:de,head:[],body:[["Docente:",k.docente],["Curso:",k.curso],["Asignatura:",k.asignatura],["Fecha:",new Date(k.fecha).toLocaleDateString("es-CL")],["Bloques:",k.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:re,right:re}}),de=ae.lastAutoTable.finalY+10,Object.keys(k.rubricaResultados||{}).length>0){ae.setFontSize(14),ae.setFont("helvetica","bold"),ae.text("Evaluacin por Indicadores",re,de),de+=10;const ye=Object.entries(k.rubricaResultados).map(([oe,fe])=>{let be;switch(fe){case 1:be="Dbil";break;case 2:be="Incipiente";break;case 3:be="Satisfactorio";break;case 4:be="Avanzado";break;default:be="No evaluado"}return[oe,be,fe]});bi(ae,{startY:de,head:[["Indicador","Nivel de Logro","Puntuacin"]],body:ye,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:re,right:re}})}ae.addPage(),de=re,ae.setFontSize(14),ae.setFont("helvetica","bold"),ae.text("Observaciones Generales y Sugerencias de Mejora",re,de),de+=15,k.observacionesGenerales&&(ae.setFontSize(12),ae.setFont("helvetica","bold"),ae.text("Fortalezas:",re,de),de+=10,ae.setFont("helvetica","normal"),ae.setFontSize(11),ae.splitTextToSize(k.observacionesGenerales,Re).forEach(oe=>{Le(7,de)&&(ae.addPage(),de=re),ae.text(oe,re,de,{align:"justify"}),de+=7}),de+=10),k.retroalimentacionConsolidada&&(Le(50,de)&&(ae.addPage(),de=re),ae.setFontSize(12),ae.setFont("helvetica","bold"),ae.text("Sugerencias de mejora:",re,de),de+=10,ae.setFont("helvetica","normal"),ae.setFontSize(11),ae.splitTextToSize(k.retroalimentacionConsolidada,Re).forEach(oe=>{Le(7,de)&&(ae.addPage(),de=re),ae.text(oe,re,de,{align:"justify"}),de+=7})),Te();const me=`Informe_Acompanamiento_${(ie=k.docente)==null?void 0:ie.replace(/\s+/g,"_")}_${k.curso}_${new Date().toISOString().split("T")[0]}.pdf`;ae.save(me)}catch(ae){console.error(" Error al generar PDF:",ae),alert("Error al generar el PDF. Intenta nuevamente.")}},X=ie=>{const{name:ae,value:Ae}=ie.target;M(ke=>({...ke,[ae]:Ae}))},ne=()=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mdulo de Acompaamiento Docente"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>{K(),j("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[i.jsx($O,{className:"w-5 h-5"})," Acompaamiento General"]}),i.jsxs("button",{onClick:()=>{M(P),x(null),y(null),m("form"),j("opr"),f(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[i.jsx($O,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),d&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ac,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:d})]})}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(_l,{className:"w-6 h-6 text-amber-500"})," Acompaamientos Generales"]}),i.jsxs("div",{className:"space-y-3",children:[o&&i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),i.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!o&&e.filter(ie=>ie.id).length>0?i.jsx("div",{className:"grid gap-3",children:e.filter(ie=>ie.id).map(ie=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Fi,{className:"w-4 h-4 text-amber-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ie.docente})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Curso:"})," ",ie.curso," "," ",i.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",ie.asignatura]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ie.fecha).toLocaleDateString("es-CL")]}),ie.bloques&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Bloques:"})," ",ie.bloques]}),ie.retroalimentacionConsolidada&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(nn,{className:"w-3 h-3"}),"Con retroalimentacin IA"]}),T[ie.id]&&T[ie.id].length>0&&i.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[i.jsx(hm,{className:"w-3 h-3"}),T[ie.id].length," Ciclo",T[ie.id].length>1?"s":""," OPR"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{J(ie),j("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:()=>{J(ie),j("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),i.jsx("button",{onClick:()=>R(ie.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(sn,{className:"w-4 h-4"})})]})]}),T[ie.id]&&T[ie.id].length>0&&i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[i.jsx(hm,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),i.jsx("div",{className:"space-y-2",children:T[ie.id].map(ae=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:ae.nombreCiclo||`Registro N ${ae.registroN}`}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(ae.fecha).toLocaleDateString("es-CL"),ae.horaInicio&&ae.horaTermino&&i.jsxs("span",{children:["  ",ae.horaInicio," - ",ae.horaTermino]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>{const Ae=e.find(ke=>ke.id===ie.id);q(ae,Ae)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("Seguro que desea eliminar este Ciclo OPR?"))try{await wD(ae.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(Ae){console.error("Error deleting OPR cycle:",Ae),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:i.jsx(sn,{className:"w-3 h-3"})})]})]},ae.id))})]})]},ie.id))}):!o&&i.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsx(ru,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompaamientos generales registrados"}),i.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompaamiento usando el botn superior"})]})]})]}),_.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(hm,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),i.jsx("div",{className:"space-y-3",children:_.map(ie=>i.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(hm,{className:"w-4 h-4 text-blue-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ie.nombreCiclo||`Registro N ${ie.registroN}`})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Docente:"})," ",ie.docenteInfo||"No especificado"," "," ",i.jsx("span",{className:"font-medium",children:"Curso:"})," ",ie.cursoInfo||"No especificado"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ie.fecha).toLocaleDateString("es-CL"),ie.horaInicio&&ie.horaTermino&&i.jsxs("span",{children:["  ",ie.horaInicio," - ",ie.horaTermino]})]}),ie.videoObservacionUrl&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(nn,{className:"w-3 h-3"}),"Con video de observacin"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{q(ie)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("Seguro que desea eliminar este Ciclo OPR?"))try{await wD(ie.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(ae){console.error("Error deleting standalone OPR cycle:",ae),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(sn,{className:"w-4 h-4"})})]})]})},ie.id))})]})]}),le=()=>{const ie=g?e.find(Ae=>Ae.id===g):null,ae={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in k&&k.docente||"",curso:"curso"in k&&k.curso||"",asignatura:"asignatura"in k&&k.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:w==="general"?g?"Editando Acompaamiento General":"Nuevo Acompaamiento General":v?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),i.jsx("button",{type:"button",onClick:()=>{m("list"),y(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:" Volver al listado"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>j("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${w==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(ru,{className:"w-4 h-4"}),"Acompaamiento General"]})}),i.jsx("button",{onClick:()=>j("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${w==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(hm,{className:"w-4 h-4"}),"Ciclos OPR"]})}),i.jsx("button",{onClick:()=>j("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${w==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(_l,{className:"w-4 h-4"}),"Dashboard"]})})]})}),d&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ac,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:d})]})}),w==="dashboard"&&i.jsx("div",{className:"animate-fade-in",children:i.jsx(Oet,{acompanamientos:e,ciclosOPR:T,standaloneCiclos:_})}),w==="general"&&i.jsxs("form",{onSubmit:Y,className:"space-y-8",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[i.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx($5,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:V,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:O,children:[i.jsx(MR,{className:"w-4 h-4"}),O?"Generando...":"Generar Retroalimentacin con IA"]}),i.jsxs("button",{type:"button",onClick:W,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(Qh,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observacin y rbrica, luego genera automticamente la retroalimentacin. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in k&&k.retroalimentacionConsolidada&&i.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[i.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(nn,{className:"w-4 h-4"}),"Retroalimentacin Consolidada Generada:"]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:i.jsx("textarea",{readOnly:!0,rows:8,value:k.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),i.jsxs("select",{name:"docente",value:"docente"in k?k.docente:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:c,children:[i.jsx("option",{value:"",children:c?"Cargando profesores...":"Seleccione un docente"}),r.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),i.jsxs("select",{name:"curso",value:"curso"in k?k.curso:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),Nn.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),i.jsxs("select",{name:"asignatura",value:"asignatura"in k?k.asignatura:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),En.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),i.jsx("input",{type:"text",name:"bloques",value:"bloques"in k?k.bloques:"",onChange:X,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),i.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in k?k.observacionesGenerales:"",onChange:X,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodologa utilizada, participacin de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(_l,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observacin - Rbrica de Evaluacin"]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Dbil (1)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:L.map(Ae=>i.jsx(ct.Fragment,{children:Ae.criteria.map((ke,re)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[re===0&&i.jsx("td",{rowSpan:Ae.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:Ae.domain}),i.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ke.name}),ke.levels.map((Re,Le)=>{const Te=Le+1,de="rubricaResultados"in k&&k.rubricaResultados[ke.name]===Te,Ce=de?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return i.jsx("td",{onClick:()=>F(ke.name,Te),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Ce} ${de?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${Te} para ${ke.name}`,children:i.jsxs("div",{className:"text-xs leading-relaxed",children:[de&&i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx(nn,{className:"w-3 h-3 text-amber-600"}),i.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),Re]})},Te)})]},ke.name))},Ae.domain))})]})}),Object.keys(k.rubricaResultados||{}).length>0&&i.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[i.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[i.jsx(_l,{className:"w-4 h-4"}),"Resumen de Evaluacin (",Object.keys(k.rubricaResultados).length," criterios evaluados)"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(k.rubricaResultados).map(([Ae,ke])=>i.jsxs("div",{className:"flex justify-between items-center py-1",children:[i.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[Ae,":"]}),i.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${ke===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":ke===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":ke===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",ke]})]},Ae))})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:()=>m("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:O,children:[O&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),g?"Actualizar":"Guardar"," Acompaamiento"]})]})]}),w==="opr"&&i.jsx(qet,{acompanamiento:ie||ae,cicloToEdit:v,profesores:r,onSave:async Ae=>{var ke;try{const re=(ie==null?void 0:ie.id)||typeof Ae.acompanamientoId=="string"&&Ae.acompanamientoId||void 0,Re=(ie==null?void 0:ie.docente)||Ae.docenteInfo||"",Le=(ke=n[Re])==null?void 0:ke.toLowerCase();if(v&&v.id)await Uet(v.id,{...Ae,docenteEmailLower:Le}),alert("Ciclo OPR actualizado exitosamente");else{if(!re||String(re).startsWith("temp-")){const Te={...Ae,docenteEmailLower:Le,acompanamientoId:""};await qW(Te)}else{const Te={...Ae,docenteEmailLower:Le,acompanamientoId:String(re)};await qW(Te)}alert("Ciclo OPR guardado exitosamente")}y(null),await U(),await Q(),m("list")}catch(re){console.error(" Error al guardar ciclo OPR:",re);const Re=re.message||"Error desconocido al guardar el ciclo OPR";f(Re),alert(`Error al guardar el ciclo OPR: ${Re}`)}},onCancel:()=>{y(null),m("list")}})]})};return o||c?i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando mdulo de acompaamiento..."}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[o&&"Cargando registros...",c&&" Cargando profesores..."]})]})})}):i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h==="list"?ne():le()})})},s7="mensajes_internos",Wet="usuarios",Tue="mensajes_read_status",Iue=e=>{var r,a;const t=e.data();return{id:e.id,...t,fecha:((a=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fecha}},Xet=(e,t)=>{const r=Dt(ht(st,s7),ur("participants","array-contains",e),Yt("fecha","desc"));return nr(r,n=>{const s=n.docs.map(o=>Iue(o));t(s)},n=>{console.error("Error al suscribirse a los mensajes:",n),t([])})},Yet=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:ir.fromDate(new Date)};await Zr(ht(st,s7),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},Jet=async e=>{try{const t=Jt(st,s7,e);await xn(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},Zet=(e,t)=>{const r=Jt(st,Tue,e);return nr(r,n=>{n.exists()?t(n.data()):t({announcements:[],messages:[]})},n=>{console.error("Error al suscribirse al estado de lectura:",n),t({announcements:[],messages:[]})})},ett=async(e,t)=>{try{const r=Jt(st,Tue,e);await ai(r,{messages:Nte(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como ledo:",r),new Error("No se pudo actualizar el estado de lectura.")}},ttt=e=>{const t=Dt(ht(st,Wet),Yt("nombreCompleto","asc"));return nr(t,a=>{const n=a.docs.map(s=>Iue(s));e(n)},a=>{console.error("Error al suscribirse a todos los usuarios:",a),e([])})},rtt=({currentUser:e,refreshUnreadCount:t})=>{const[r,a]=N.useState("inbox"),[n,s]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(null),[d,f]=N.useState({announcements:[],messages:[]}),[h,m]=N.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,v]=N.useState(g);N.useEffect(()=>{if(!e.id||!e.email){m(!1);return}m(!0);const C=Xet(e.email,L=>{s(L),m(!1)}),_=ttt(l),S=Zet(e.id,L=>{f(L),t()});return()=>{C(),_(),S()}},[e.id,e.email,t]);const y=C=>{u(C),r==="inbox"&&!d.messages.includes(C.id)&&ett(e.id,C.id).catch(_=>{console.error("Failed to mark message as read:",_)})},w=async C=>{if(C.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const _={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await Yet(_),v(g),a("sent")}catch(S){console.error("Error sending message:",S),alert("No se pudo enviar el mensaje. Intntelo de nuevo.")}},j=async C=>{if(window.confirm("Est seguro de que desea eliminar este mensaje? Esta accin es irreversible."))try{await Jet(C),u(null)}catch(_){console.error("Error deleting message:",_),alert("No se pudo eliminar el mensaje.")}},O=C=>{v({para:C.de,asunto:`Re: ${C.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${C.de}
Fecha: ${new Date(C.fecha).toLocaleString("es-CL")}

${C.cuerpo}`}),a("compose")},B=N.useMemo(()=>n.filter(C=>C.para===e.email),[n,e.email]),T=N.useMemo(()=>n.filter(C=>C.de===e.email),[n,e.email]);return h?i.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajera..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[i.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[i.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:i.jsx("button",{onClick:()=>{a("compose"),u(null),v(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),i.jsxs("nav",{className:"p-2 space-y-1",children:[i.jsx("button",{onClick:()=>{a("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),i.jsx("button",{onClick:()=>{a("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&i.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?B:T).map(C=>{const _=r==="inbox"&&!d.messages.includes(C.id);return i.jsxs("div",{onClick:()=>y(C),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===C.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("p",{className:`font-bold truncate ${_?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?C.de:`Para: ${C.para}`}),_&&i.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),i.jsx("p",{className:`truncate text-sm ${_?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:C.asunto}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(C.fecha).toLocaleString("es-CL")})]},C.id)})}),i.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),i.jsxs("select",{id:"para",value:x.para,onChange:C=>v({...x,para:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione un destinatario..."}),o.filter(C=>C.email!==e.email).map(C=>i.jsxs("option",{value:C.email,children:[C.nombreCompleto," (",C.email,")"]},C.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),i.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:C=>v({...x,asunto:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),i.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:C=>v({...x,cuerpo:C.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?i.jsxs("div",{children:[i.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[i.jsx("strong",{children:"De:"})," ",c.de," ",i.jsx("br",{}),i.jsx("strong",{children:"Para:"})," ",c.para," ",i.jsx("br",{}),i.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),i.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),i.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&i.jsx("button",{onClick:()=>O(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),i.jsx("button",{onClick:()=>j(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:i.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},E4="proyectos_interdisciplinarios",i7="entregas_interdisciplinarias",att="usuarios",o7=e=>{const t=e.data();return{id:e.id,...t}},ntt=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),stt=e=>{const t=Dt(ht(st,E4),Yt("nombreProyecto","asc"));return nr(t,a=>{try{const n=a.docs.map(s=>ntt(o7(s)));e(n)}catch(n){console.error("Error parseando planificaciones:",n),e([])}},a=>{console.error("Error al suscribirse a las planificaciones:",a),e([])})},itt=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:ir.now(),updatedAt:ir.now()};return(await Zr(ht(st,E4),t)).id},WW=async(e,t)=>{const{id:r,...a}=t,n=Jt(st,E4,e);await ai(n,{...a,contenidosPorAsignatura:Array.isArray(a==null?void 0:a.contenidosPorAsignatura)?a.contenidosPorAsignatura:(a==null?void 0:a.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(a==null?void 0:a.actividades)?a.actividades:(a==null?void 0:a.actividades)===void 0?void 0:[],fechasClave:Array.isArray(a==null?void 0:a.fechasClave)?a.fechasClave:(a==null?void 0:a.fechasClave)===void 0?void 0:[],tareas:Array.isArray(a==null?void 0:a.tareas)?a.tareas:(a==null?void 0:a.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(a==null?void 0:a.docentesResponsables)?a.docentesResponsables:(a==null?void 0:a.docentesResponsables)===void 0?void 0:[a==null?void 0:a.docentesResponsables].filter(Boolean),updatedAt:ir.now()},{merge:!0})},ott=async e=>{const t=Jt(st,E4,e),r=Dt(ht(st,i7),ur("planificacionId","==",e)),a=await Ir(r),n=ex(st);a.forEach(s=>n.delete(s.ref)),n.delete(t),await n.commit()},ltt=(e,t)=>{const r=Dt(ht(st,i7),ur("planificacionId","==",e));return nr(r,n=>{const s=n.docs.map(o=>o7(o));t(s)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},ctt=async(e,t)=>{const r=Jt(st,i7,e);await ai(r,{feedbackProfesor:t,fechaFeedback:ir.fromDate(new Date)},{merge:!0})},Oue=e=>{const t=Dt(ht(st,att));return nr(t,a=>{const n=a.docs.map(s=>o7(s));e(n)},a=>{console.error("Error al suscribirse a todos los usuarios:",a),e([])})},u6={},ND={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hiptesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Disear","Construir","Idear"]},aw=({href:e})=>{if(!e)return i.jsx("span",{className:"text-slate-400",children:""});const t=e.startsWith("http")?e:`https://${e}`;return i.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx(HO,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},Up=({icon:e,label:t,children:r,aiButton:a,className:n=""})=>i.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${n}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),a]}),r]}),utt=({planificaciones:e,onActivityUpdate:t})=>{const[r,a]=N.useState(null),n=N.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=N.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),o=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},l=({data:c,onClose:u,onSave:d})=>{const[f,h]=N.useState(c.activity),m=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(xh,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),i.jsx("input",{name:"nombre",value:f.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),i.jsx("input",{name:"responsables",value:f.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),i.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),i.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),i.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),i.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!n.length||n.every(c=>c.items.length===0)?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ac,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):i.jsxs("div",{className:"space-y-8",children:[n.map(({plan:c,items:u})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:i.jsx(Wc,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),h=d.type==="activity";return i.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&a({planId:d.planId,activity:d}),children:[i.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),i.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),i.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(aw,{href:d.recursoUrl})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(o,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&i.jsx(l,{data:r,onClose:()=>a(null),onSave:t})]})},dtt=({planificaciones:e,onBack:t})=>{const r=N.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var m;(m=h.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(ND).forEach(([x,v])=>{v.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),a=N.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","ms","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),n=N.useMemo(()=>{const c=e.length,u=e.reduce((h,m)=>{var g;return h+(((g=m.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,m)=>{var g;return h+(((g=m.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((m,g)=>g[1]-m[1]).slice(0,20),h=Math.max(...f.map(([,m])=>m));return h?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),i.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([m,g])=>{const x=Math.max(.8,g/h*2),v=Math.max(.6,g/h);return i.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},o=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:i.jsx(yw,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonoma de Bloom"})]}),i.jsx("div",{className:"space-y-4",children:Object.keys(ND).map(h=>{const m=c[h]||0,g=d>0?m/d*100:0,x=f[h]||"bg-slate-400";return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},l=({icon:c,title:u,value:d,description:f,color:h})=>i.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold",children:d}),i.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),i.jsx("p",{className:"text-white/90 text-sm",children:f})]});return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:i.jsx(Xj,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analtico"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Anlisis de habilidades y contenidos desarrollados"})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(Nw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(l,{icon:i.jsx(Dg,{className:"w-8 h-8"}),title:"Proyectos",value:n.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),i.jsx(l,{icon:i.jsx(gwe,{className:"w-8 h-8"}),title:"Actividades",value:n.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),i.jsx(l,{icon:i.jsx(ru,{className:"w-8 h-8"}),title:"Tareas",value:n.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),i.jsx(l,{icon:i.jsx(wi,{className:"w-8 h-8"}),title:"Asignaturas",value:n.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(o,{data:r.categoriaCount}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(U2,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribucin de Asignaturas"})]}),i.jsx("div",{className:"space-y-3",children:Object.entries(a.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(a.asignaturasCount)),f=d>0?u/d*100:0;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),i.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(s,{data:a.palabrasCount,title:"Contenidos Ms Frecuentes"}),i.jsx(s,{data:r.habilidadesCount,title:"Habilidades Ms Desarrolladas"})]})]})},ftt=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[a,n]=N.useState([]),[s,o]=N.useState([]),[l,c]=N.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=N.useState(null);N.useEffect(()=>{const v=Oue(n),y=ltt(e.id,o);return()=>{v(),y()}},[e.id]);const f=N.useMemo(()=>a.filter(v=>v.profile===zt.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[a,e.cursos]),h=async v=>{d(v.id);{alert("La API Key de Gemini no est configurada."),d(null);return}},m=v=>v.map(y=>{var w;return((w=r.find(j=>j.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(Nw,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),i.jsx("select",{value:l.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>i.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),i.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(v=>{const y=s.find(w=>w.tareaId===l.id&&w.estudianteId===v.id);return i.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[i.jsx(mS,{className:"w-4 h-4"})," Entregado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[i.jsx(Ac,{className:"w-4 h-4"})," Pendiente"]})})]}),y?i.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),i.jsx(aw,{href:y.enlaceUrl})]}),y.archivoAdjunto&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),i.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[i.jsx(Qh,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentacin del profesor:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{placeholder:"Escribir retroalimentacin...",defaultValue:y.feedbackProfesor||"",onBlur:w=>ctt(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),i.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(hg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):i.jsxs("div",{className:"text-center py-6",children:[i.jsx(Ac,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante an no ha realizado la entrega"})]})]},v.id)})})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Ac,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),i.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[i.jsx(Nw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},Att=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:a,onIndicadores:n,onEstructura:s,availableTeachers:o})=>{const[l,c]=N.useState(null),u=u6==null?void 0:u6.VITE_GEMINI_API_KEY,d=h=>h.map(m=>{var g;return((g=o.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),f=async h=>{var m,g,x;if(!u){alert("La API Key de Gemini no est configurada.");return}if(!e.trim()){alert("Ingrese una descripcin del proyecto.");return}c(h);try{const y=new fk(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripcin: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,j=await y.generateContent(w);a(j.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripcin: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,j=await y.generateContent(w);n(j.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON vlido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripcin: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,O=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),B=JSON.parse(O);s({actividades:(m=B.actividades)==null?void 0:m.map(T=>({...T,id:crypto.randomUUID()})),fechasClave:(g=B.fechasClave)==null?void 0:g.map(T=>({id:crypto.randomUUID(),nombre:T.nombre,fecha:T.fecha,recursoUrl:T.recursoUrl})),tareas:(x=B.tareas)==null?void 0:x.map((T,C)=>({...T,id:crypto.randomUUID(),numero:C+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generacin con IA.")}finally{c(null)}};return i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:l==="obj"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(hg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:l==="ind"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(hg,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("est"),disabled:l!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:l==="est"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",i.jsx("span",{children:"Generando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(hg,{className:"w-4 h-4"})," ",i.jsx("span",{children:"Estructura IA"})]})})]})},htt=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:a})=>{const[n,s]=N.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[o,l]=N.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=N.useState(null),[d,f]=N.useState({nombre:"",fecha:"",recursoUrl:""}),[h,m]=N.useState(null),[g,x]=N.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[v,y]=N.useState(null);N.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const w=q=>s(V=>({...V,[q.target.name]:q.target.value})),j=q=>{s(V=>{const Y=V.asignaturas,K=Y.includes(q)?Y.filter(R=>R!==q):[...Y,q];let J=V.contenidosPorAsignatura;return K.includes(q)&&!Y.includes(q)&&(J=[...J,{asignatura:q,contenidos:"",habilidades:[]}]),!K.includes(q)&&Y.includes(q)&&(J=J.filter(R=>R.asignatura!==q)),{...V,asignaturas:K,contenidosPorAsignatura:J}})},O=q=>s(V=>({...V,cursos:V.cursos.includes(q)?V.cursos.filter(Y=>Y!==q):[...V.cursos,q]})),B=q=>s(V=>({...V,docentesResponsables:V.docentesResponsables.includes(q)?V.docentesResponsables.filter(Y=>Y!==q):[...V.docentesResponsables,q]})),T=(q,V,Y)=>s(K=>({...K,contenidosPorAsignatura:K.contenidosPorAsignatura.map(J=>J.asignatura===q?{...J,[V]:Y}:J)})),C=(q,V)=>s(Y=>({...Y,contenidosPorAsignatura:Y.contenidosPorAsignatura.map(K=>K.asignatura===q?{...K,habilidades:K.habilidades.includes(V)?K.habilidades.filter(J=>J!==V):[...K.habilidades,V]}:K)})),_=()=>{if(!o.nombre||!o.fechaInicio||!o.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}c?(s(q=>({...q,actividades:q.actividades.map(V=>V.id===c?{...o,id:c}:V)})),u(null)):s(q=>({...q,actividades:[...q.actividades||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},S=q=>{u(q.id),l(q)},L=q=>{window.confirm("Eliminar esta actividad?")&&s(V=>({...V,actividades:V.actividades.filter(Y=>Y.id!==q)}))},P=()=>{if(!d.nombre||!d.fecha){alert("Nombre y fecha son obligatorios para el hito.");return}h?(s(q=>({...q,fechasClave:q.fechasClave.map(V=>V.id===h?{...d,id:h}:V)})),m(null)):s(q=>({...q,fechasClave:[...q.fechasClave||[],{...d,id:crypto.randomUUID()}]})),f({nombre:"",fecha:"",recursoUrl:""})},k=q=>{m(q.id),f(q)},M=q=>{window.confirm("Eliminar este hito?")&&s(V=>({...V,fechasClave:V.fechasClave.filter(Y=>Y.id!==q)}))},U=()=>{var q,V;if(!g.instrucciones||!g.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}if(v){const Y={...g,id:v,numero:((q=n.tareas.find(K=>K.id===v))==null?void 0:q.numero)||0};s(K=>({...K,tareas:K.tareas.map(J=>J.id===v?Y:J)})),y(null)}else{const Y={id:crypto.randomUUID(),numero:(((V=n.tareas)==null?void 0:V.length)||0)+1,...g};s(K=>({...K,tareas:[...K.tareas||[],Y]}))}x({instrucciones:"",fechaEntrega:"",recursoUrl:""})},z=q=>{y(q.id),x({instrucciones:q.instrucciones,fechaEntrega:q.fechaEntrega,recursoUrl:q.recursoUrl||""})},Q=q=>{window.confirm("Eliminar esta tarea?")&&s(V=>({...V,tareas:V.tareas.filter(Y=>Y.id!==q)}))};return i.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:i.jsx(Dg,{className:"w-10 h-10 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Disee experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx(Up,{icon:i.jsx(ru,{className:"w-6 h-6 text-slate-600"}),label:"Informacin del Proyecto",aiButton:i.jsx(Att,{descripcion:n.descripcionProyecto,asignaturas:n.asignaturas,docentes:n.docentesResponsables,availableTeachers:[],onObjetivos:q=>s(V=>({...V,objetivos:q})),onIndicadores:q=>s(V=>({...V,indicadoresLogro:q})),onEstructura:q=>s(V=>{var Y,K,J;return{...V,actividades:(Y=q.actividades)!=null&&Y.length?q.actividades:V.actividades,fechasClave:(K=q.fechasClave)!=null&&K.length?q.fechasClave:V.fechasClave,tareas:(J=q.tareas)!=null&&J.length?q.tareas:V.tareas}})}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),i.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:w,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripcin del Proyecto"}),i.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:w,placeholder:"Detalle metodologa, producto final y propsito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),i.jsx(Up,{icon:i.jsx(Fi,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:i.jsx("div",{className:"space-y-3",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:a.map(q=>i.jsx("button",{type:"button",onClick:()=>B(q.id),className:`p-3 rounded-lg text-left transition-all duration-200 ${n.docentesResponsables.includes(q.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${n.docentesResponsables.includes(q.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:i.jsx(jb,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-sm",children:q.nombreCompleto}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:q.email})]})]})},q.id))})})}),i.jsx(Up,{icon:i.jsx(M2,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:Nn.map(q=>i.jsx("button",{type:"button",onClick:()=>O(q),className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${n.cursos.includes(q)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:q},q))})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(Up,{icon:i.jsx(wi,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:En.map(q=>i.jsx("button",{type:"button",onClick:()=>j(q),className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${n.asignaturas.includes(q)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:q},q))})]}),n.contenidosPorAsignatura.length>0&&i.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),n.contenidosPorAsignatura.map(q=>i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[i.jsx(wi,{className:"w-4 h-4"})," ",q.asignatura]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),i.jsx("textarea",{value:q.contenidos,onChange:V=>T(q.asignatura,"contenidos",V.target.value),placeholder:`Detalle los contenidos especficos de ${q.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades segn Taxonoma de Bloom:"}),i.jsx("div",{className:"space-y-2",children:Object.entries(ND).map(([V,Y])=>i.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[i.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[V,":"]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:Y.map(K=>i.jsx("button",{type:"button",onClick:()=>C(q.asignatura,K),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${q.habilidades.includes(K)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:K},K))})]},V))}),q.habilidades.length>0&&i.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[i.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:q.habilidades.map(V=>i.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:V},V))})]})]})]})]},q.asignatura))]})]})}),i.jsx(Up,{icon:i.jsx(Cb,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:i.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:w,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsx(Up,{icon:i.jsx(_l,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de xito",children:i.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:w,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsxs(Up,{icon:i.jsx(ul,{className:"w-6 h-6 text-slate-600"}),label:"Planificacin y Cronograma",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Wc,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),i.jsx("input",{value:o.nombre,onChange:q=>l({...o,nombre:q.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),i.jsx("input",{type:"date",value:o.fechaInicio,onChange:q=>l({...o,fechaInicio:q.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),i.jsx("input",{type:"date",value:o.fechaFin,onChange:q=>l({...o,fechaFin:q.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:o.recursoUrl||"",onChange:q=>l({...o,recursoUrl:q.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx("button",{type:"button",onClick:_,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:c?"Actualizar":i.jsxs(i.Fragment,{children:[i.jsx(So,{className:"w-4 h-4"})," Agregar"]})})})]}),!!n.actividades.length&&i.jsx("div",{className:"mt-4 space-y-2",children:n.actividades.map(q=>i.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:q.nombre})," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",q.fechaInicio," - ",q.fechaFin,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(aw,{href:q.recursoUrl}),i.jsx("button",{onClick:()=>S(q),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(xh,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>L(q.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(sn,{className:"w-3 h-3"})})]})]},q.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(mS,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[i.jsxs("div",{className:"sm:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),i.jsx("input",{value:d.nombre,onChange:q=>f({...d,nombre:q.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),i.jsx("input",{type:"date",value:d.fecha,onChange:q=>f({...d,fecha:q.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"sm:col-span-1",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:d.recursoUrl||"",onChange:q=>f({...d,recursoUrl:q.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("button",{type:"button",onClick:P,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:h?"Actualizar":i.jsxs(i.Fragment,{children:[i.jsx(So,{className:"w-4 h-4"})," Agregar"]})})]}),!!n.fechasClave.length&&i.jsx("div",{className:"mt-4 space-y-2",children:n.fechasClave.map(q=>i.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:q.nombre})," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",q.fecha,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(aw,{href:q.recursoUrl}),i.jsx("button",{onClick:()=>k(q),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(xh,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>M(q.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(sn,{className:"w-3 h-3"})})]})]},q.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(yw,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-5",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones"}),i.jsx("input",{value:g.instrucciones,onChange:q=>x({...g,instrucciones:q.target.value}),placeholder:"Descripcin de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),i.jsx("input",{type:"date",value:g.fechaEntrega,onChange:q=>x({...g,fechaEntrega:q.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:g.recursoUrl||"",onChange:q=>x({...g,recursoUrl:q.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx("button",{type:"button",onClick:U,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:v?i.jsx(xh,{className:"w-4 h-4"}):i.jsx(So,{className:"w-4 h-4"})})})]}),!!n.tareas.length&&i.jsx("div",{className:"mt-4 space-y-2",children:n.tareas.map(q=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",q.numero]}),i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:q.instrucciones})]}),i.jsxs("div",{className:"text-right space-y-1",children:[i.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:q.fechaEntrega}),"recursoUrl"in q?i.jsx(aw,{href:q.recursoUrl}):i.jsx("span",{className:"text-slate-400 text-xs",children:""})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2 pl-2 border-l ml-2",children:[i.jsx("button",{onClick:()=>z(q),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(xh,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>Q(q.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(sn,{className:"w-3 h-3"})})]})]},q.id))})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),i.jsx("button",{onClick:()=>t(n),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},XW=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[n,s]=N.useState(!0),[o,l]=N.useState("list"),[c,u]=N.useState(null),[d,f]=N.useState(null),[h,m]=N.useState(null),[g,x]=N.useState("all"),v=N.useMemo(()=>g==="all"?e:e.filter(_=>_.id===g),[e,g]);N.useEffect(()=>{s(!0);const _=Oue(L=>{const P=L.filter(k=>k.profile===zt.PROFESORADO);a(P)}),S=stt(L=>{const P=L.map(k=>({...k,docentesResponsables:Array.isArray(k.docentesResponsables)?k.docentesResponsables:[k.docentesResponsables].filter(Boolean),contenidosPorAsignatura:k.contenidosPorAsignatura||[],actividades:k.actividades||[],fechasClave:k.fechasClave||[]}));t(P),s(!1)});return()=>{_(),S()}},[]);const y=N.useCallback(async(_,S)=>{const L=e.find(k=>k.id===_);if(!L)return;const P={...L,actividades:(L.actividades||[]).map(k=>k.id===S.id?S:k)};await WW(_,P)},[e]),w=async _=>{try{const S=_.id&&String(_.id).length>0,L={..._};if(S){const{id:P,...k}=L;await WW(_.id,k)}else delete L.id,await itt(L);l("list"),u(null)}catch(S){console.error("Error al guardar la planificacin:",S),alert("No se pudo guardar la planificacin.")}},j=_=>{u(_),l("form")},O=async _=>{if(!_){alert("Error: ID invlido.");return}if(window.confirm("Est seguro de eliminar esta planificacin?"))try{await ott(_)}catch(S){console.error(S),alert("No se pudo eliminar la planificacin.")}},B=()=>{u(null),l("form")},T=async _=>{f(_.id);try{const S=new pr("p","mm","a4"),L=S.internal.pageSize.getHeight(),P=S.internal.pageSize.getWidth(),k=15,M=P-k*2;let U=k,z=1;const V=await(await fetch("https://res.cloudinary.com/dwncmu1wu/image/upload/v1756260600/Captura_de_pantalla_2025-08-26_a_la_s_10.09.17_p._m._aakgkt.png")).blob(),Y=await new Promise((ie,ae)=>{const Ae=new FileReader;Ae.onloadend=()=>ie(Ae.result),Ae.onerror=ae,Ae.readAsDataURL(V)}),K=()=>{S.addImage(Y,"PNG",k,U,M,20),U+=25},J=()=>{S.setFont("helvetica","normal"),S.setFontSize(9),S.setTextColor(149,165,166);const ie=`Pgina ${z}`,ae=S.getStringUnitWidth(ie)*S.getFontSize()/S.internal.scaleFactor;S.text(ie,(P-ae)/2,L-10)},R=ie=>U+ie>L-k?(J(),S.addPage(),z++,U=k,K(),!0):!1,F=ie=>{R(15),S.setFont("helvetica","bold"),S.setFontSize(14),S.setTextColor(44,62,80),S.text(ie,k,U),U+=8},W=ie=>{if(!ie||!ie.trim())return;S.setFont("helvetica","normal"),S.setFontSize(11),S.setTextColor(86,101,115);const ae=S.splitTextToSize(ie,M);R(ae.length*5+5),S.text(ae,k,U),U+=ae.length*5+8};K(),S.setFont("helvetica","bold"),S.setFontSize(22),S.setTextColor(41,128,185);const X=S.splitTextToSize(_.nombreProyecto,M);R(X.length*10+10),S.text(X,k,U),U+=X.length*9+10,bi(S,{startY:U,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(ie=>ie.map(ae=>{var Ae;return((Ae=r.find(ke=>ke.id===ae))==null?void 0:Ae.nombreCompleto)||ae}).join(", "))(_.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},_.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},_.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold",fillColor:[245,245,245]}},didDrawPage:ie=>{ie.pageNumber>1&&(U=k,K())}}),U=S.lastAutoTable.finalY+10,F("Descripcin del Proyecto"),W(_.descripcionProyecto),F("Objetivos de Aprendizaje"),W(_.objetivos),F("Indicadores de Logro"),W(_.indicadoresLogro),_.contenidosPorAsignatura&&_.contenidosPorAsignatura.length>0&&(F("Contenidos y Habilidades por Asignatura"),_.contenidosPorAsignatura.forEach(ie=>{var ae;R(15),S.setFont("helvetica","bold"),S.setFontSize(12),S.setTextColor(52,73,94),S.text(`${ie.asignatura}:`,k,U),U+=7,ie.contenidos&&W(`Contenidos: ${ie.contenidos}`),(ae=ie.habilidades)!=null&&ae.length&&W(`Habilidades: ${ie.habilidades.join(", ")}`)}));const le={theme:"striped",headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},styles:{fontSize:10,cellPadding:2.5,halign:"left"},didDrawPage:ie=>{ie.pageNumber>z&&(z=ie.pageNumber,J()),ie.pageNumber>1&&(U=k,K())}};if(_.actividades&&_.actividades.length>0&&(F("Cronograma de Actividades"),bi(S,{...le,startY:U,head:[["Actividad","Inicio","Fin","Recurso"]],body:_.actividades.map(ie=>[ie.nombre,ie.fechaInicio,ie.fechaFin,ie.recursoUrl||""])}),U=S.lastAutoTable.finalY+10),_.fechasClave&&_.fechasClave.length>0&&(F("Hitos y Fechas Clave"),bi(S,{...le,startY:U,head:[["Hito","Fecha","Recurso"]],body:_.fechasClave.map(ie=>[ie.nombre,ie.fecha,ie.recursoUrl||""])}),U=S.lastAutoTable.finalY+10),_.tareas&&_.tareas.length>0){F("Tareas para Estudiantes");const ie=_.tareas.map(ae=>[String(ae.numero||""),ae.instrucciones,ae.fechaEntrega,ae.recursoUrl||""]);bi(S,{...le,startY:U,head:[["#","Instrucciones","Entrega","Recurso"]],body:ie}),U=S.lastAutoTable.finalY+10}J(),S.save(`Proyecto_${_.nombreProyecto.replace(/\s/g,"_")}.pdf`)}catch(S){console.error("Error al generar PDF:",S),alert("No se pudo generar el PDF. Verifique la consola para ms detalles.")}finally{f(null)}},C=_=>_.map(S=>{var L;return((L=r.find(P=>P.id===S))==null?void 0:L.nombreCompleto)||S}).join(", ");return n?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?i.jsx(ftt,{plan:h,onBack:()=>m(null),availableTeachers:r}):o==="dashboard"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>l("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),i.jsx(dtt,{planificaciones:e,onBack:()=>l("list")})]}):o==="form"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>{l("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsx(htt,{initialPlan:c,onSave:w,onCancel:()=>{l("list"),u(null)},availableTeachers:r})]}):i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:i.jsx(Dg,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{type:"button",onClick:()=>l("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[i.jsx(Xj,{className:"w-5 h-5"})," Ver Dashboard"]}),i.jsxs("button",{type:"button",onClick:B,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[i.jsx(So,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:i.jsx(Dg,{className:"w-12 h-12 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),i.jsxs("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(So,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(_=>i.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[i.jsx("div",{className:"flex justify-between items-start mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:_.nombreProyecto}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(M2,{className:"w-4 h-4"}),i.jsxs("span",{children:["Cursos: ",_.cursos.join(", ")]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(Fi,{className:"w-4 h-4"}),i.jsxs("span",{children:["Profesores: ",C(_.docentesResponsables)]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(wi,{className:"w-4 h-4"}),i.jsxs("span",{children:["Asignaturas: ",_.asignaturas.length]})]})]})]})}),!!_.descripcionProyecto&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:_.descripcionProyecto}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>m(_),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[i.jsx(mS,{className:"w-4 h-4"})," Entregas"]}),i.jsxs("button",{type:"button",onClick:()=>T(_),disabled:d===_.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===_.id?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):i.jsx(Qh,{className:"w-4 h-4"}),"PDF"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>j(_),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:i.jsx(xh,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",onClick:()=>O(_.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:i.jsx(sn,{className:"w-4 h-4"})})]})]})]},_.id))})]}),e.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(VNe,{className:"w-5 h-5 text-slate-600"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),i.jsxs("select",{value:g,onChange:_=>x(_.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[i.jsx("option",{value:"all",children:"Todos"}),e.map(_=>i.jsx("option",{value:_.id,children:_.nombreProyecto},_.id))]})]})]}),i.jsx("div",{id:"gantt-container-vertical",children:i.jsx(utt,{planificaciones:v,onActivityUpdate:y})})]})]})},qb="panol_maquinas",ZN="panol_registros",mtt=e=>{const t=Dt(ht(st,qb),Yt("nombre","asc"));return nr(t,r=>{const a=r.docs.map(n=>({id:n.id,...n.data()}));e(a)})},ptt=e=>{const t=Dt(ht(st,ZN),Yt("fecha","desc"));return nr(t,r=>{const a=r.docs.map(n=>{const s=n.data();return{id:n.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(a)})},gtt=async e=>(await Zr(ht(st,qb),{...e,createdAt:Ga(),updatedAt:Ga()})).id,xtt=async(e,t)=>{await Bo(Jt(st,qb,e),{...t,updatedAt:Ga()})},vtt=async e=>{const t=Dt(ht(st,ZN),ur("maquinaId","==",e));if(!(await Ir(t)).empty)throw new Error("No se puede eliminar una mquina con registros de uso. Elimine los registros primero.");await xn(Jt(st,qb,e))},btt=async e=>(await Zr(ht(st,ZN),{...e,createdAt:Ga(),updatedAt:Ga()})).id,ytt=async(e,t)=>{await Bo(Jt(st,ZN,e),{...t,updatedAt:Ga()})},wtt=async e=>{await xn(Jt(st,ZN,e))},Ntt=async()=>{if(!(await Ir(ht(st,qb))).empty)return;const t=ex(st);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidrulica",especialidad:"Automotriz"}].forEach(a=>{const n=Jt(ht(st,qb));t.set(n,{...a,createdAt:Ga(),updatedAt:Ga()})}),await t.commit()},Ett=()=>{var z;const[e,t]=N.useState([]),[r,a]=N.useState([]),n={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,o]=N.useState(n),[l,c]=N.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=N.useState(u),[h,m]=N.useState(null),[g,x]=N.useState({maquinaId:"",curso:"",profesor:"",fecha:""});N.useEffect(()=>{Ntt().catch(console.error);const Q=mtt(t),q=ptt(a);return()=>{Q&&Q(),q&&q()}},[]);const v=async Q=>{if(Q.preventDefault(),!!d.nombre.trim())try{h?await xtt(h.id,{...d}):await gtt({...d}),f(u),m(null)}catch(q){alert(q.message||"Error al guardar mquina")}},y=N.useCallback(async Q=>{try{await vtt(Q)}catch(q){alert(q.message||"Error al eliminar mquina")}},[]),w=async Q=>{Q.preventDefault();const q=l||s;if(!q.curso||!q.profesorResponsable.trim()||!q.maquinaId||Number(q.totalHoras)<=0){alert("Curso, Profesor, Mquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(l){const{id:V,...Y}=l;await ytt(V,Y)}else await btt({...s});o(n),c(null)}catch(V){alert(V.message||"Error al guardar registro")}},j=N.useCallback(async Q=>{try{await wtt(Q)}catch(q){alert(q.message||"Error al eliminar registro")}},[]),O=N.useMemo(()=>r.filter(Q=>(g.maquinaId===""||Q.maquinaId===g.maquinaId)&&(g.curso===""||Q.curso===g.curso)&&(g.profesor===""||Q.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||Q.fecha===g.fecha)).sort((Q,q)=>new Date(q.fecha).getTime()-new Date(Q.fecha).getTime()),[r,g]),B=N.useMemo(()=>new Map(e.map(Q=>[Q.id,Q])),[e]),T=N.useMemo(()=>O.reduce((Q,q)=>Q+(Number(q.totalHoras)||0),0),[O]),C=N.useMemo(()=>{const Q=new Map;O.forEach(V=>{var K;const Y=((K=B.get(V.maquinaId))==null?void 0:K.nombre)||"N/A";Q.set(Y,(Q.get(Y)||0)+(Number(V.totalHoras)||0))});const q=Array.from(Q.entries()).map(([V,Y])=>({maquina:V,horas:Number(Y.toFixed(2))}));return q.sort((V,Y)=>Y.horas-V.horas),q},[O,B]),_=()=>{const Q=O.map(Y=>{var K,J;return{Fecha:Y.fecha,Curso:Y.curso,Profesor:Y.profesorResponsable,Mquina:((K=B.get(Y.maquinaId))==null?void 0:K.nombre)||"N/A",Especialidad:((J=B.get(Y.maquinaId))==null?void 0:J.especialidad)||"N/A","Total Horas":Y.totalHoras,Observaciones:Y.observaciones}}),q=Ts.json_to_sheet(Q),V=Ts.book_new();Ts.book_append_sheet(V,q,"RegistrosPaol"),b1(V,"Registros_Paol.xlsx")},S=()=>{const Q=new pr;bi(Q,{head:[["Fecha","Curso","Profesor","Mquina","Especialidad","Total Horas","Observaciones"]],body:O.map(q=>{var V,Y;return[q.fecha,q.curso,q.profesorResponsable,((V=B.get(q.maquinaId))==null?void 0:V.nombre)||"N/A",((Y=B.get(q.maquinaId))==null?void 0:Y.especialidad)||"N/A",q.totalHoras,q.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:q=>{Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text("LICEO INDUSTRIAL DE RECOLETA",q.settings.margin.left,14),Q.setFontSize(10),Q.setFont("helvetica","normal"),Q.text("Informe de Registros de Paol",q.settings.margin.left,20)}}),Q.save("Registros_Paol.pdf")},L="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",P=(Q,q)=>i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q}`,children:Q}),k=({icon:Q,label:q,value:V,accent:Y="from-indigo-500 to-sky-500"})=>i.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${Y} opacity-10`}),i.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[i.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:Q}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:q}),i.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:V})]})]})]}),M=({title:Q,icon:q,children:V,right:Y,accent:K="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>i.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${K}`}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[q," ",i.jsx("span",{children:Q})]}),Y]}),V]})]}),U=()=>{const Q=l||s,q=l?c:o;return i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ul,{size:16})," Fecha"]}),i.jsx("input",{name:"fecha",type:"date",value:Q.fecha,onChange:V=>q({...Q,fecha:V.target.value}),className:L,required:!0})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Fi,{size:16})," Curso"]}),i.jsxs("select",{name:"curso",value:Q.curso,onChange:V=>q({...Q,curso:V.target.value}),className:L,required:!0,children:[i.jsx("option",{value:"",children:"Curso"}),Nn.map(V=>i.jsx("option",{children:V},V))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(wi,{size:16})," Profesor"]}),i.jsxs("select",{name:"profesorResponsable",value:Q.profesorResponsable,onChange:V=>q({...Q,profesorResponsable:V.target.value}),className:L,required:!0,children:[i.jsx("option",{value:"",children:"Profesor Responsable"}),UO.map(V=>i.jsx("option",{value:V,children:V},V))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx($5,{size:16})," Mquina"]}),i.jsxs("select",{name:"maquinaId",value:Q.maquinaId,onChange:V=>q({...Q,maquinaId:V.target.value}),className:L,required:!0,children:[i.jsx("option",{value:"",children:"Mquina"}),e.map(V=>i.jsx("option",{value:V.id,children:V.nombre},V.id))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(qj,{size:16})," Total de Horas"]}),i.jsx("input",{name:"totalHoras",type:"number",value:Q.totalHoras,onChange:V=>q({...Q,totalHoras:Number(V.target.value)}),className:L,required:!0,min:.5,step:.5})]}),i.jsxs("div",{className:"lg:col-span-6",children:[i.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),i.jsx("textarea",{name:"observaciones",value:Q.observaciones,onChange:V=>q({...Q,observaciones:V.target.value}),placeholder:"Observaciones...",className:L+" min-h-[40px]",rows:2})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l&&i.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[i.jsx(Xd,{size:16})," Cancelar"]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[l?i.jsx(Fl,{size:16}):i.jsx(So,{size:16}),l?"Actualizar":"Registrar"]})]})]})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Paol: Registro de Uso de Mquinas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra mquinas, registra usos y exporta informes (Firestore)."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[i.jsx(RR,{size:18})," Excel"]}),i.jsxs("button",{onClick:S,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[i.jsx(ru,{size:18})," PDF"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(k,{icon:i.jsx($5,{className:"w-5 h-5 text-indigo-600"}),label:"Mquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),i.jsx(k,{icon:i.jsx(ru,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:O.length,accent:"from-sky-500 to-cyan-500"}),i.jsx(k,{icon:i.jsx(qj,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:T.toFixed(1),accent:"from-emerald-500 to-lime-500"}),i.jsx(k,{icon:i.jsx(ul,{className:"w-5 h-5 text-amber-600"}),label:"ltima actualizacin",value:(z=r[0])!=null&&z.fecha?new Date(r[0].fecha).toLocaleDateString():"",accent:"from-amber-500 to-rose-400"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[i.jsx("div",{className:"xl:col-span-3",children:i.jsx(M,{title:l?`Editando registro #${l.id.slice(0,4)}`:"Nuevo registro de uso",icon:i.jsx(ANe,{size:18}),children:i.jsx(U,{})})}),i.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:i.jsx(M,{title:"Uso por mquina (horas)",icon:i.jsx(_l,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:i.jsx("div",{className:"flex gap-2 items-center",children:P(`${C.length} mquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:i.jsx("div",{className:"h-[320px] w-full",children:i.jsx(cc,{width:"100%",height:"100%",children:i.jsxs(Nh,{data:C,margin:{top:8,right:16,bottom:8,left:0},children:[i.jsx(wh,{strokeDasharray:"3 3"}),i.jsx(Vd,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),i.jsx($d,{}),i.jsx(lc,{}),i.jsx(ux,{}),i.jsx(lA,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),i.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:i.jsxs(M,{title:"Administrar mquinas",icon:i.jsx($5,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[i.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[i.jsx("input",{value:d.nombre,onChange:Q=>f({...d,nombre:Q.target.value}),placeholder:"Nombre mquina",className:L+" md:col-span-2"}),i.jsxs("select",{value:d.especialidad,onChange:Q=>f({...d,especialidad:Q.target.value}),className:L+" md:col-span-2",children:[i.jsx("option",{value:"Industrial",children:"Industrial"}),i.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?i.jsx(Fl,{size:16}):i.jsx(So,{size:16}),h?"Guardar":"Agregar"]})]}),i.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(Q=>i.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:Q.nombre}),i.jsx("div",{className:"text-xs",children:Q.especialidad==="Industrial"?P("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):P("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{m(Q),f(Q)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:i.jsx(Wj,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>y(Q.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:i.jsx(sn,{size:16,className:"text-red-600"})})]})]},Q.id))})]})}),i.jsx("div",{className:"xl:col-span-2 order-3",children:i.jsxs(M,{title:"Historial de uso",icon:i.jsx(ru,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(EN,{size:16,className:"text-slate-600"})}),children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[i.jsx("input",{type:"date",value:g.fecha,onChange:Q=>x({...g,fecha:Q.target.value}),className:L,placeholder:"Fecha"}),i.jsxs("select",{value:g.curso,onChange:Q=>x({...g,curso:Q.target.value}),className:L,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),Nn.map(Q=>i.jsx("option",{children:Q},Q))]}),i.jsxs("select",{value:g.maquinaId,onChange:Q=>x({...g,maquinaId:Q.target.value}),className:L,children:[i.jsx("option",{value:"",children:"Todas las Mquinas"}),e.map(Q=>i.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]}),i.jsxs("div",{className:"relative",children:[i.jsx(h1,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),i.jsx("input",{value:g.profesor,onChange:Q=>x({...g,profesor:Q.target.value}),placeholder:"Buscar profesor...",className:L+" pl-9"})]})]}),i.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Mquina"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),i.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),i.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[O.map(Q=>{var q;return i.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:Q.fecha}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((q=B.get(Q.maquinaId))==null?void 0:q.nombre)||"N/A"}),i.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[Q.profesorResponsable," ",i.jsxs("span",{className:"text-slate-400",children:["(",Q.curso,")"]})]}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:Q.totalHoras}),i.jsxs("td",{className:"px-3 py-2 text-center",children:[i.jsx("button",{onClick:()=>c(Q),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:i.jsx(Wj,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>j(Q.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:i.jsx(sn,{size:16,className:"text-red-600"})})]})]},Q.id)}),O.length===0&&i.jsx("tr",{children:i.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function Pl(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,a;r<e.length;r++)(a=Pl(e[r]))!==""&&(t+=(t&&" ")+a);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const Ctt={},YW=e=>{let t;const r=new Set,a=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,m))}},n=()=>t,c={setState:a,getState:n,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Ctt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(a,n,c);return c},jtt=e=>e?YW(e):YW,{useDebugValue:ktt}=ct,{useSyncExternalStoreWithSelector:_tt}=iPe,Stt=e=>e;function Fue(e,t=Stt,r){const a=_tt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return ktt(a),a}const JW=(e,t)=>{const r=jtt(e),a=(n,s=t)=>Fue(r,n,s);return Object.assign(a,r),a},Btt=(e,t)=>e?JW(e,t):JW;function hl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[a,n]of e)if(!Object.is(n,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const a of r)if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(e[a],t[a]))return!1;return!0}var Ttt={value:()=>{}};function C4(){for(var e=0,t=arguments.length,r={},a;e<t;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new Z5(r)}function Z5(e){this._=e}function Itt(e,t){return e.trim().split(/^|\s+/).map(function(r){var a="",n=r.indexOf(".");if(n>=0&&(a=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}Z5.prototype=C4.prototype={constructor:Z5,on:function(e,t){var r=this._,a=Itt(e+"",r),n,s=-1,o=a.length;if(arguments.length<2){for(;++s<o;)if((n=(e=a[s]).type)&&(n=Ott(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(n=(e=a[s]).type)r[n]=ZW(r[n],e.name,t);else if(t==null)for(n in r)r[n]=ZW(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Z5(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),a=0,n,s;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],a=0,n=s.length;a<n;++a)s[a].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],n=0,s=a.length;n<s;++n)a[n].value.apply(t,r)}};function Ott(e,t){for(var r=0,a=e.length,n;r<a;++r)if((n=e[r]).name===t)return n.value}function ZW(e,t,r){for(var a=0,n=e.length;a<n;++a)if(e[a].name===t){e[a]=Ttt,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:t,value:r}),e}var ED="http://www.w3.org/1999/xhtml";const eX={svg:"http://www.w3.org/2000/svg",xhtml:ED,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function j4(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),eX.hasOwnProperty(t)?{space:eX[t],local:e}:e}function Ftt(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===ED&&t.documentElement.namespaceURI===ED?t.createElement(e):t.createElementNS(r,e)}}function Dtt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Due(e){var t=j4(e);return(t.local?Dtt:Ftt)(t)}function Ptt(){}function l7(e){return e==null?Ptt:function(){return this.querySelector(e)}}function Rtt(e){typeof e!="function"&&(e=l7(e));for(var t=this._groups,r=t.length,a=new Array(r),n=0;n<r;++n)for(var s=t[n],o=s.length,l=a[n]=new Array(o),c,u,d=0;d<o;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new uu(a,this._parents)}function Ltt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Mtt(){return[]}function Pue(e){return e==null?Mtt:function(){return this.querySelectorAll(e)}}function Utt(e){return function(){return Ltt(e.apply(this,arguments))}}function Qtt(e){typeof e=="function"?e=Utt(e):e=Pue(e);for(var t=this._groups,r=t.length,a=[],n=[],s=0;s<r;++s)for(var o=t[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(a.push(e.call(c,c.__data__,u,o)),n.push(c));return new uu(a,n)}function Rue(e){return function(){return this.matches(e)}}function Lue(e){return function(t){return t.matches(e)}}var Htt=Array.prototype.find;function ztt(e){return function(){return Htt.call(this.children,e)}}function Vtt(){return this.firstElementChild}function $tt(e){return this.select(e==null?Vtt:ztt(typeof e=="function"?e:Lue(e)))}var Gtt=Array.prototype.filter;function qtt(){return Array.from(this.children)}function Ktt(e){return function(){return Gtt.call(this.children,e)}}function Wtt(e){return this.selectAll(e==null?qtt:Ktt(typeof e=="function"?e:Lue(e)))}function Xtt(e){typeof e!="function"&&(e=Rue(e));for(var t=this._groups,r=t.length,a=new Array(r),n=0;n<r;++n)for(var s=t[n],o=s.length,l=a[n]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new uu(a,this._parents)}function Mue(e){return new Array(e.length)}function Ytt(){return new uu(this._enter||this._groups.map(Mue),this._parents)}function n_(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}n_.prototype={constructor:n_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Jtt(e){return function(){return e}}function Ztt(e,t,r,a,n,s){for(var o=0,l,c=t.length,u=s.length;o<u;++o)(l=t[o])?(l.__data__=s[o],a[o]=l):r[o]=new n_(e,s[o]);for(;o<c;++o)(l=t[o])&&(n[o]=l)}function ert(e,t,r,a,n,s,o){var l,c,u=new Map,d=t.length,f=s.length,h=new Array(d),m;for(l=0;l<d;++l)(c=t[l])&&(h[l]=m=o.call(c,c.__data__,l,t)+"",u.has(m)?n[l]=c:u.set(m,c));for(l=0;l<f;++l)m=o.call(e,s[l],l,s)+"",(c=u.get(m))?(a[l]=c,c.__data__=s[l],u.delete(m)):r[l]=new n_(e,s[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(h[l])===c&&(n[l]=c)}function trt(e){return e.__data__}function rrt(e,t){if(!arguments.length)return Array.from(this,trt);var r=t?ert:Ztt,a=this._parents,n=this._groups;typeof e!="function"&&(e=Jtt(e));for(var s=n.length,o=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=a[u],f=n[u],h=f.length,m=art(e.call(d,d&&d.__data__,u,a)),g=m.length,x=l[u]=new Array(g),v=o[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,v,y,m,t);for(var w=0,j=0,O,B;w<g;++w)if(O=x[w]){for(w>=j&&(j=w+1);!(B=v[j])&&++j<g;);O._next=B||null}}return o=new uu(o,a),o._enter=l,o._exit=c,o}function art(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nrt(){return new uu(this._exit||this._groups.map(Mue),this._parents)}function srt(e,t,r){var a=this.enter(),n=this,s=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(n=t(n),n&&(n=n.selection())),r==null?s.remove():r(s),a&&n?a.merge(n).order():n}function irt(e){for(var t=e.selection?e.selection():e,r=this._groups,a=t._groups,n=r.length,s=a.length,o=Math.min(n,s),l=new Array(n),c=0;c<o;++c)for(var u=r[c],d=a[c],f=u.length,h=l[c]=new Array(f),m,g=0;g<f;++g)(m=u[g]||d[g])&&(h[g]=m);for(;c<n;++c)l[c]=r[c];return new uu(l,this._parents)}function ort(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var a=e[t],n=a.length-1,s=a[n],o;--n>=0;)(o=a[n])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function lrt(e){e||(e=crt);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,a=r.length,n=new Array(a),s=0;s<a;++s){for(var o=r[s],l=o.length,c=n[s]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new uu(n,this._parents).order()}function crt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function urt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function drt(){return Array.from(this)}function frt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],n=0,s=a.length;n<s;++n){var o=a[n];if(o)return o}return null}function Art(){let e=0;for(const t of this)++e;return e}function hrt(){return!this.node()}function mrt(e){for(var t=this._groups,r=0,a=t.length;r<a;++r)for(var n=t[r],s=0,o=n.length,l;s<o;++s)(l=n[s])&&e.call(l,l.__data__,s,n);return this}function prt(e){return function(){this.removeAttribute(e)}}function grt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xrt(e,t){return function(){this.setAttribute(e,t)}}function vrt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function brt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function yrt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function wrt(e,t){var r=j4(e);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((t==null?r.local?grt:prt:typeof t=="function"?r.local?yrt:brt:r.local?vrt:xrt)(r,t))}function Uue(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Nrt(e){return function(){this.style.removeProperty(e)}}function Ert(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Crt(e,t,r){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,r)}}function jrt(e,t,r){return arguments.length>1?this.each((t==null?Nrt:typeof t=="function"?Crt:Ert)(e,t,r??"")):Kb(this.node(),e)}function Kb(e,t){return e.style.getPropertyValue(t)||Uue(e).getComputedStyle(e,null).getPropertyValue(t)}function krt(e){return function(){delete this[e]}}function _rt(e,t){return function(){this[e]=t}}function Srt(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Brt(e,t){return arguments.length>1?this.each((t==null?krt:typeof t=="function"?Srt:_rt)(e,t)):this.node()[e]}function Que(e){return e.trim().split(/^|\s+/)}function c7(e){return e.classList||new Hue(e)}function Hue(e){this._node=e,this._names=Que(e.getAttribute("class")||"")}Hue.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function zue(e,t){for(var r=c7(e),a=-1,n=t.length;++a<n;)r.add(t[a])}function Vue(e,t){for(var r=c7(e),a=-1,n=t.length;++a<n;)r.remove(t[a])}function Trt(e){return function(){zue(this,e)}}function Irt(e){return function(){Vue(this,e)}}function Ort(e,t){return function(){(t.apply(this,arguments)?zue:Vue)(this,e)}}function Frt(e,t){var r=Que(e+"");if(arguments.length<2){for(var a=c7(this.node()),n=-1,s=r.length;++n<s;)if(!a.contains(r[n]))return!1;return!0}return this.each((typeof t=="function"?Ort:t?Trt:Irt)(r,t))}function Drt(){this.textContent=""}function Prt(e){return function(){this.textContent=e}}function Rrt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Lrt(e){return arguments.length?this.each(e==null?Drt:(typeof e=="function"?Rrt:Prt)(e)):this.node().textContent}function Mrt(){this.innerHTML=""}function Urt(e){return function(){this.innerHTML=e}}function Qrt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Hrt(e){return arguments.length?this.each(e==null?Mrt:(typeof e=="function"?Qrt:Urt)(e)):this.node().innerHTML}function zrt(){this.nextSibling&&this.parentNode.appendChild(this)}function Vrt(){return this.each(zrt)}function $rt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Grt(){return this.each($rt)}function qrt(e){var t=typeof e=="function"?e:Due(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Krt(){return null}function Wrt(e,t){var r=typeof e=="function"?e:Due(e),a=t==null?Krt:typeof t=="function"?t:l7(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function Xrt(){var e=this.parentNode;e&&e.removeChild(this)}function Yrt(){return this.each(Xrt)}function Jrt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zrt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eat(e){return this.select(e?Zrt:Jrt)}function tat(e){return arguments.length?this.property("__data__",e):this.node().__data__}function rat(e){return function(t){e.call(this,t,this.__data__)}}function aat(e){return e.trim().split(/^|\s+/).map(function(t){var r="",a=t.indexOf(".");return a>=0&&(r=t.slice(a+1),t=t.slice(0,a)),{type:t,name:r}})}function nat(e){return function(){var t=this.__on;if(t){for(var r=0,a=-1,n=t.length,s;r<n;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++a]=s;++a?t.length=a:delete this.__on}}}function sat(e,t,r){return function(){var a=this.__on,n,s=rat(t);if(a){for(var o=0,l=a.length;o<l;++o)if((n=a[o]).type===e.type&&n.name===e.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=r),n.value=t;return}}this.addEventListener(e.type,s,r),n={type:e.type,name:e.name,value:t,listener:s,options:r},a?a.push(n):this.__on=[n]}}function iat(e,t,r){var a=aat(e+""),n,s=a.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(n=0,d=l[c];n<s;++n)if((o=a[n]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?sat:nat,n=0;n<s;++n)this.each(l(a[n],t,r));return this}function $ue(e,t,r){var a=Uue(e),n=a.CustomEvent;typeof n=="function"?n=new n(t,r):(n=a.document.createEvent("Event"),r?(n.initEvent(t,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function oat(e,t){return function(){return $ue(this,e,t)}}function lat(e,t){return function(){return $ue(this,e,t.apply(this,arguments))}}function cat(e,t){return this.each((typeof t=="function"?lat:oat)(e,t))}function*uat(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],n=0,s=a.length,o;n<s;++n)(o=a[n])&&(yield o)}var Gue=[null];function uu(e,t){this._groups=e,this._parents=t}function eE(){return new uu([[document.documentElement]],Gue)}function dat(){return this}uu.prototype=eE.prototype={constructor:uu,select:Rtt,selectAll:Qtt,selectChild:$tt,selectChildren:Wtt,filter:Xtt,data:rrt,enter:Ytt,exit:nrt,join:srt,merge:irt,selection:dat,order:ort,sort:lrt,call:urt,nodes:drt,node:frt,size:Art,empty:hrt,each:mrt,attr:wrt,style:jrt,property:Brt,classed:Frt,text:Lrt,html:Hrt,raise:Vrt,lower:Grt,append:qrt,insert:Wrt,remove:Yrt,clone:eat,datum:tat,on:iat,dispatch:cat,[Symbol.iterator]:uat};function Wu(e){return typeof e=="string"?new uu([[document.querySelector(e)]],[document.documentElement]):new uu([[e]],Gue)}function fat(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Xf(e,t){if(e=fat(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var a=r.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}if(t.getBoundingClientRect){var n=t.getBoundingClientRect();return[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}}return[e.pageX,e.pageY]}const Aat={passive:!1},tN={capture:!0,passive:!1};function d6(e){e.stopImmediatePropagation()}function lb(e){e.preventDefault(),e.stopImmediatePropagation()}function que(e){var t=e.document.documentElement,r=Wu(e).on("dragstart.drag",lb,tN);"onselectstart"in t?r.on("selectstart.drag",lb,tN):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Kue(e,t){var r=e.document.documentElement,a=Wu(e).on("dragstart.drag",null);t&&(a.on("click.drag",lb,tN),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in r?a.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const JC=e=>()=>e;function CD(e,{sourceEvent:t,subject:r,target:a,identifier:n,active:s,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:n,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}CD.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function hat(e){return!e.ctrlKey&&!e.button}function mat(){return this.parentNode}function pat(e,t){return t??{x:e.x,y:e.y}}function gat(){return navigator.maxTouchPoints||"ontouchstart"in this}function xat(){var e=hat,t=mat,r=pat,a=gat,n={},s=C4("start","drag","end"),o=0,l,c,u,d,f=0;function h(O){O.on("mousedown.drag",m).filter(a).on("touchstart.drag",v).on("touchmove.drag",y,Aat).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(O,B){if(!(d||!e.call(this,O,B))){var T=j(this,t.call(this,O,B),O,B,"mouse");T&&(Wu(O.view).on("mousemove.drag",g,tN).on("mouseup.drag",x,tN),que(O.view),d6(O),u=!1,l=O.clientX,c=O.clientY,T("start",O))}}function g(O){if(lb(O),!u){var B=O.clientX-l,T=O.clientY-c;u=B*B+T*T>f}n.mouse("drag",O)}function x(O){Wu(O.view).on("mousemove.drag mouseup.drag",null),Kue(O.view,u),lb(O),n.mouse("end",O)}function v(O,B){if(e.call(this,O,B)){var T=O.changedTouches,C=t.call(this,O,B),_=T.length,S,L;for(S=0;S<_;++S)(L=j(this,C,O,B,T[S].identifier,T[S]))&&(d6(O),L("start",O,T[S]))}}function y(O){var B=O.changedTouches,T=B.length,C,_;for(C=0;C<T;++C)(_=n[B[C].identifier])&&(lb(O),_("drag",O,B[C]))}function w(O){var B=O.changedTouches,T=B.length,C,_;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<T;++C)(_=n[B[C].identifier])&&(d6(O),_("end",O,B[C]))}function j(O,B,T,C,_,S){var L=s.copy(),P=Xf(S||T,B),k,M,U;if((U=r.call(O,new CD("beforestart",{sourceEvent:T,target:h,identifier:_,active:o,x:P[0],y:P[1],dx:0,dy:0,dispatch:L}),C))!=null)return k=U.x-P[0]||0,M=U.y-P[1]||0,function z(Q,q,V){var Y=P,K;switch(Q){case"start":n[_]=z,K=o++;break;case"end":delete n[_],--o;case"drag":P=Xf(V||q,B),K=o;break}L.call(Q,O,new CD(Q,{sourceEvent:q,subject:U,target:h,identifier:_,active:K,x:P[0]+k,y:P[1]+M,dx:P[0]-Y[0],dy:P[1]-Y[1],dispatch:L}),C)}}return h.filter=function(O){return arguments.length?(e=typeof O=="function"?O:JC(!!O),h):e},h.container=function(O){return arguments.length?(t=typeof O=="function"?O:JC(O),h):t},h.subject=function(O){return arguments.length?(r=typeof O=="function"?O:JC(O),h):r},h.touchable=function(O){return arguments.length?(a=typeof O=="function"?O:JC(!!O),h):a},h.on=function(){var O=s.on.apply(s,arguments);return O===s?h:O},h.clickDistance=function(O){return arguments.length?(f=(O=+O)*O,h):Math.sqrt(f)},h}var Wb=0,b2=0,zy=0,Wue=1e3,s_,y2,i_=0,qg=0,k4=0,rN=typeof performance=="object"&&performance.now?performance:Date,Xue=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function u7(){return qg||(Xue(vat),qg=rN.now()+k4)}function vat(){qg=0}function o_(){this._call=this._time=this._next=null}o_.prototype=Yue.prototype={constructor:o_,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?u7():+r)+(t==null?0:+t),!this._next&&y2!==this&&(y2?y2._next=this:s_=this,y2=this),this._call=e,this._time=r,jD()},stop:function(){this._call&&(this._call=null,this._time=1/0,jD())}};function Yue(e,t,r){var a=new o_;return a.restart(e,t,r),a}function bat(){u7(),++Wb;for(var e=s_,t;e;)(t=qg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wb}function tX(){qg=(i_=rN.now())+k4,Wb=b2=0;try{bat()}finally{Wb=0,wat(),qg=0}}function yat(){var e=rN.now(),t=e-i_;t>Wue&&(k4-=t,i_=e)}function wat(){for(var e,t=s_,r,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:s_=r);y2=e,jD(a)}function jD(e){if(!Wb){b2&&(b2=clearTimeout(b2));var t=e-qg;t>24?(e<1/0&&(b2=setTimeout(tX,e-rN.now()-k4)),zy&&(zy=clearInterval(zy))):(zy||(i_=rN.now(),zy=setInterval(yat,Wue)),Wb=1,Xue(tX))}}function rX(e,t,r){var a=new o_;return t=t==null?0:+t,a.restart(n=>{a.stop(),e(n+t)},t,r),a}var Nat=C4("start","end","cancel","interrupt"),Eat=[],Jue=0,aX=1,kD=2,ej=3,nX=4,_D=5,tj=6;function _4(e,t,r,a,n,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;Cat(e,r,{name:t,index:a,group:n,on:Nat,tween:Eat,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Jue})}function d7(e,t){var r=uf(e,t);if(r.state>Jue)throw new Error("too late; already scheduled");return r}function kA(e,t){var r=uf(e,t);if(r.state>ej)throw new Error("too late; already running");return r}function uf(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Cat(e,t,r){var a=e.__transition,n;a[t]=r,r.timer=Yue(s,0,r.time);function s(u){r.state=aX,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var d,f,h,m;if(r.state!==aX)return c();for(d in a)if(m=a[d],m.name===r.name){if(m.state===ej)return rX(o);m.state===nX?(m.state=tj,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete a[d]):+d<t&&(m.state=tj,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete a[d])}if(rX(function(){r.state===ej&&(r.state=nX,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=kD,r.on.call("start",e,e.__data__,r.index,r.group),r.state===kD){for(r.state=ej,n=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(m=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(n[++f]=m);n.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=_D,1),f=-1,h=n.length;++f<h;)n[f].call(e,d);r.state===_D&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=tj,r.timer.stop(),delete a[t];for(var u in a)return;delete e.__transition}}function rj(e,t){var r=e.__transition,a,n,s=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((a=r[o]).name!==t){s=!1;continue}n=a.state>kD&&a.state<_D,a.state=tj,a.timer.stop(),a.on.call(n?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete r[o]}s&&delete e.__transition}}function jat(e){return this.each(function(){rj(this,e)})}function kat(e,t){var r,a;return function(){var n=kA(this,e),s=n.tween;if(s!==r){a=r=s;for(var o=0,l=a.length;o<l;++o)if(a[o].name===t){a=a.slice(),a.splice(o,1);break}}n.tween=a}}function _at(e,t,r){var a,n;if(typeof r!="function")throw new Error;return function(){var s=kA(this,e),o=s.tween;if(o!==a){n=(a=o).slice();for(var l={name:t,value:r},c=0,u=n.length;c<u;++c)if(n[c].name===t){n[c]=l;break}c===u&&n.push(l)}s.tween=n}}function Sat(e,t){var r=this._id;if(e+="",arguments.length<2){for(var a=uf(this.node(),r).tween,n=0,s=a.length,o;n<s;++n)if((o=a[n]).name===e)return o.value;return null}return this.each((t==null?kat:_at)(r,e,t))}function f7(e,t,r){var a=e._id;return e.each(function(){var n=kA(this,a);(n.value||(n.value={}))[t]=r.apply(this,arguments)}),function(n){return uf(n,a).value[t]}}function Zue(e,t){var r;return(typeof t=="number"?Rd:t instanceof $g?Fk:(r=$g(t))?(t=r,Fk):fie)(e,t)}function Bat(e){return function(){this.removeAttribute(e)}}function Tat(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Iat(e,t,r){var a,n=r+"",s;return function(){var o=this.getAttribute(e);return o===n?null:o===a?s:s=t(a=o,r)}}function Oat(e,t,r){var a,n=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===n?null:o===a?s:s=t(a=o,r)}}function Fat(e,t,r){var a,n,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===a&&c===n?s:(n=c,s=t(a=o,l)))}}function Dat(e,t,r){var a,n,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===a&&c===n?s:(n=c,s=t(a=o,l)))}}function Pat(e,t){var r=j4(e),a=r==="transform"?SMe:Zue;return this.attrTween(e,typeof t=="function"?(r.local?Dat:Fat)(r,a,f7(this,"attr."+e,t)):t==null?(r.local?Tat:Bat)(r):(r.local?Oat:Iat)(r,a,t))}function Rat(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Lat(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Mat(e,t){var r,a;function n(){var s=t.apply(this,arguments);return s!==a&&(r=(a=s)&&Lat(e,s)),r}return n._value=t,n}function Uat(e,t){var r,a;function n(){var s=t.apply(this,arguments);return s!==a&&(r=(a=s)&&Rat(e,s)),r}return n._value=t,n}function Qat(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var a=j4(e);return this.tween(r,(a.local?Mat:Uat)(a,t))}function Hat(e,t){return function(){d7(this,e).delay=+t.apply(this,arguments)}}function zat(e,t){return t=+t,function(){d7(this,e).delay=t}}function Vat(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hat:zat)(t,e)):uf(this.node(),t).delay}function $at(e,t){return function(){kA(this,e).duration=+t.apply(this,arguments)}}function Gat(e,t){return t=+t,function(){kA(this,e).duration=t}}function qat(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$at:Gat)(t,e)):uf(this.node(),t).duration}function Kat(e,t){if(typeof t!="function")throw new Error;return function(){kA(this,e).ease=t}}function Wat(e){var t=this._id;return arguments.length?this.each(Kat(t,e)):uf(this.node(),t).ease}function Xat(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;kA(this,e).ease=r}}function Yat(e){if(typeof e!="function")throw new Error;return this.each(Xat(this._id,e))}function Jat(e){typeof e!="function"&&(e=Rue(e));for(var t=this._groups,r=t.length,a=new Array(r),n=0;n<r;++n)for(var s=t[n],o=s.length,l=a[n]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Zh(a,this._parents,this._name,this._id)}function Zat(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,a=t.length,n=r.length,s=Math.min(a,n),o=new Array(a),l=0;l<s;++l)for(var c=t[l],u=r[l],d=c.length,f=o[l]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(f[m]=h);for(;l<a;++l)o[l]=t[l];return new Zh(o,this._parents,this._name,this._id)}function ent(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function tnt(e,t,r){var a,n,s=ent(t)?d7:kA;return function(){var o=s(this,e),l=o.on;l!==a&&(n=(a=l).copy()).on(t,r),o.on=n}}function rnt(e,t){var r=this._id;return arguments.length<2?uf(this.node(),r).on.on(e):this.each(tnt(r,e,t))}function ant(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function nnt(){return this.on("end.remove",ant(this._id))}function snt(e){var t=this._name,r=this._id;typeof e!="function"&&(e=l7(e));for(var a=this._groups,n=a.length,s=new Array(n),o=0;o<n;++o)for(var l=a[o],c=l.length,u=s[o]=new Array(c),d,f,h=0;h<c;++h)(d=l[h])&&(f=e.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,_4(u[h],t,r,h,u,uf(d,r)));return new Zh(s,this._parents,t,r)}function int(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Pue(e));for(var a=this._groups,n=a.length,s=[],o=[],l=0;l<n;++l)for(var c=a[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),m,g=uf(d,r),x=0,v=h.length;x<v;++x)(m=h[x])&&_4(m,t,r,x,h,g);s.push(h),o.push(d)}return new Zh(s,o,t,r)}var ont=eE.prototype.constructor;function lnt(){return new ont(this._groups,this._parents)}function cnt(e,t){var r,a,n;return function(){var s=Kb(this,e),o=(this.style.removeProperty(e),Kb(this,e));return s===o?null:s===r&&o===a?n:n=t(r=s,a=o)}}function ede(e){return function(){this.style.removeProperty(e)}}function unt(e,t,r){var a,n=r+"",s;return function(){var o=Kb(this,e);return o===n?null:o===a?s:s=t(a=o,r)}}function dnt(e,t,r){var a,n,s;return function(){var o=Kb(this,e),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Kb(this,e))),o===c?null:o===a&&c===n?s:(n=c,s=t(a=o,l))}}function fnt(e,t){var r,a,n,s="style."+t,o="end."+s,l;return function(){var c=kA(this,e),u=c.on,d=c.value[s]==null?l||(l=ede(t)):void 0;(u!==r||n!==d)&&(a=(r=u).copy()).on(o,n=d),c.on=a}}function Ant(e,t,r){var a=(e+="")=="transform"?_Me:Zue;return t==null?this.styleTween(e,cnt(e,a)).on("end.style."+e,ede(e)):typeof t=="function"?this.styleTween(e,dnt(e,a,f7(this,"style."+e,t))).each(fnt(this._id,e)):this.styleTween(e,unt(e,a,t),r).on("end.style."+e,null)}function hnt(e,t,r){return function(a){this.style.setProperty(e,t.call(this,a),r)}}function mnt(e,t,r){var a,n;function s(){var o=t.apply(this,arguments);return o!==n&&(a=(n=o)&&hnt(e,o,r)),a}return s._value=t,s}function pnt(e,t,r){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,mnt(e,t,r??""))}function gnt(e){return function(){this.textContent=e}}function xnt(e){return function(){var t=e(this);this.textContent=t??""}}function vnt(e){return this.tween("text",typeof e=="function"?xnt(f7(this,"text",e)):gnt(e==null?"":e+""))}function bnt(e){return function(t){this.textContent=e.call(this,t)}}function ynt(e){var t,r;function a(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&bnt(n)),t}return a._value=e,a}function wnt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ynt(e))}function Nnt(){for(var e=this._name,t=this._id,r=tde(),a=this._groups,n=a.length,s=0;s<n;++s)for(var o=a[s],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=uf(c,t);_4(c,e,r,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Zh(a,this._parents,e,r)}function Ent(){var e,t,r=this,a=r._id,n=r.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--n===0&&s()}};r.each(function(){var u=kA(this,a),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),n===0&&s()})}var Cnt=0;function Zh(e,t,r,a){this._groups=e,this._parents=t,this._name=r,this._id=a}function tde(){return++Cnt}var ih=eE.prototype;Zh.prototype={constructor:Zh,select:snt,selectAll:int,selectChild:ih.selectChild,selectChildren:ih.selectChildren,filter:Jat,merge:Zat,selection:lnt,transition:Nnt,call:ih.call,nodes:ih.nodes,node:ih.node,size:ih.size,empty:ih.empty,each:ih.each,on:rnt,attr:Pat,attrTween:Qat,style:Ant,styleTween:pnt,text:vnt,textTween:wnt,remove:nnt,tween:Sat,delay:Vat,duration:qat,ease:Wat,easeVarying:Yat,end:Ent,[Symbol.iterator]:ih[Symbol.iterator]};function jnt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var knt={time:null,delay:0,duration:250,ease:jnt};function _nt(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Snt(e){var t,r;e instanceof Zh?(t=e._id,e=e._name):(t=tde(),(r=knt).time=u7(),e=e==null?null:e+"");for(var a=this._groups,n=a.length,s=0;s<n;++s)for(var o=a[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&_4(c,e,t,u,o,r||_nt(c,t));return new Zh(a,this._parents,e,t)}eE.prototype.interrupt=jat;eE.prototype.transition=Snt;const ZC=e=>()=>e;function Bnt(e,{sourceEvent:t,target:r,transform:a,dispatch:n}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:n}})}function Ch(e,t,r){this.k=e,this.x=t,this.y=r}Ch.prototype={constructor:Ch,scale:function(e){return e===1?this:new Ch(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ch(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dm=new Ch(1,0,0);Ch.prototype;function f6(e){e.stopImmediatePropagation()}function Vy(e){e.preventDefault(),e.stopImmediatePropagation()}function Tnt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Int(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function sX(){return this.__zoom||Dm}function Ont(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Fnt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dnt(e,t,r){var a=e.invertX(t[0][0])-r[0][0],n=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(n>a?(a+n)/2:Math.min(0,a)||Math.max(0,n),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Pnt(){var e=Tnt,t=Int,r=Dnt,a=Ont,n=Fnt,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=OMe,u=C4("start","zoom","end"),d,f,h,m=500,g=150,x=0,v=10;function y(U){U.property("__zoom",sX).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",L).filter(n).on("touchstart.zoom",P).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(U,z,Q,q){var V=U.selection?U.selection():U;V.property("__zoom",sX),U!==V?B(U,z,Q,q):V.interrupt().each(function(){T(this,arguments).event(q).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},y.scaleBy=function(U,z,Q,q){y.scaleTo(U,function(){var V=this.__zoom.k,Y=typeof z=="function"?z.apply(this,arguments):z;return V*Y},Q,q)},y.scaleTo=function(U,z,Q,q){y.transform(U,function(){var V=t.apply(this,arguments),Y=this.__zoom,K=Q==null?O(V):typeof Q=="function"?Q.apply(this,arguments):Q,J=Y.invert(K),R=typeof z=="function"?z.apply(this,arguments):z;return r(j(w(Y,R),K,J),V,o)},Q,q)},y.translateBy=function(U,z,Q,q){y.transform(U,function(){return r(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof Q=="function"?Q.apply(this,arguments):Q),t.apply(this,arguments),o)},null,q)},y.translateTo=function(U,z,Q,q,V){y.transform(U,function(){var Y=t.apply(this,arguments),K=this.__zoom,J=q==null?O(Y):typeof q=="function"?q.apply(this,arguments):q;return r(Dm.translate(J[0],J[1]).scale(K.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof Q=="function"?-Q.apply(this,arguments):-Q),Y,o)},q,V)};function w(U,z){return z=Math.max(s[0],Math.min(s[1],z)),z===U.k?U:new Ch(z,U.x,U.y)}function j(U,z,Q){var q=z[0]-Q[0]*U.k,V=z[1]-Q[1]*U.k;return q===U.x&&V===U.y?U:new Ch(U.k,q,V)}function O(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function B(U,z,Q,q){U.on("start.zoom",function(){T(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(q).end()}).tween("zoom",function(){var V=this,Y=arguments,K=T(V,Y).event(q),J=t.apply(V,Y),R=Q==null?O(J):typeof Q=="function"?Q.apply(V,Y):Q,F=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),W=V.__zoom,X=typeof z=="function"?z.apply(V,Y):z,ne=c(W.invert(R).concat(F/W.k),X.invert(R).concat(F/X.k));return function(le){if(le===1)le=X;else{var ie=ne(le),ae=F/ie[2];le=new Ch(ae,R[0]-ie[0]*ae,R[1]-ie[1]*ae)}K.zoom(null,le)}})}function T(U,z,Q){return!Q&&U.__zooming||new C(U,z)}function C(U,z){this.that=U,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(U,z),this.taps=0}C.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,z){return this.mouse&&U!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var z=Wu(this.that).datum();u.call(U,this.that,new Bnt(U,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),z)}};function _(U,...z){if(!e.apply(this,arguments))return;var Q=T(this,z).event(U),q=this.__zoom,V=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,a.apply(this,arguments)))),Y=Xf(U);if(Q.wheel)(Q.mouse[0][0]!==Y[0]||Q.mouse[0][1]!==Y[1])&&(Q.mouse[1]=q.invert(Q.mouse[0]=Y)),clearTimeout(Q.wheel);else{if(q.k===V)return;Q.mouse=[Y,q.invert(Y)],rj(this),Q.start()}Vy(U),Q.wheel=setTimeout(K,g),Q.zoom("mouse",r(j(w(q,V),Q.mouse[0],Q.mouse[1]),Q.extent,o));function K(){Q.wheel=null,Q.end()}}function S(U,...z){if(h||!e.apply(this,arguments))return;var Q=U.currentTarget,q=T(this,z,!0).event(U),V=Wu(U.view).on("mousemove.zoom",R,!0).on("mouseup.zoom",F,!0),Y=Xf(U,Q),K=U.clientX,J=U.clientY;que(U.view),f6(U),q.mouse=[Y,this.__zoom.invert(Y)],rj(this),q.start();function R(W){if(Vy(W),!q.moved){var X=W.clientX-K,ne=W.clientY-J;q.moved=X*X+ne*ne>x}q.event(W).zoom("mouse",r(j(q.that.__zoom,q.mouse[0]=Xf(W,Q),q.mouse[1]),q.extent,o))}function F(W){V.on("mousemove.zoom mouseup.zoom",null),Kue(W.view,q.moved),Vy(W),q.event(W).end()}}function L(U,...z){if(e.apply(this,arguments)){var Q=this.__zoom,q=Xf(U.changedTouches?U.changedTouches[0]:U,this),V=Q.invert(q),Y=Q.k*(U.shiftKey?.5:2),K=r(j(w(Q,Y),q,V),t.apply(this,z),o);Vy(U),l>0?Wu(this).transition().duration(l).call(B,K,q,U):Wu(this).call(y.transform,K,q,U)}}function P(U,...z){if(e.apply(this,arguments)){var Q=U.touches,q=Q.length,V=T(this,z,U.changedTouches.length===q).event(U),Y,K,J,R;for(f6(U),K=0;K<q;++K)J=Q[K],R=Xf(J,this),R=[R,this.__zoom.invert(R),J.identifier],V.touch0?!V.touch1&&V.touch0[2]!==R[2]&&(V.touch1=R,V.taps=0):(V.touch0=R,Y=!0,V.taps=1+!!d);d&&(d=clearTimeout(d)),Y&&(V.taps<2&&(f=R[0],d=setTimeout(function(){d=null},m)),rj(this),V.start())}}function k(U,...z){if(this.__zooming){var Q=T(this,z).event(U),q=U.changedTouches,V=q.length,Y,K,J,R;for(Vy(U),Y=0;Y<V;++Y)K=q[Y],J=Xf(K,this),Q.touch0&&Q.touch0[2]===K.identifier?Q.touch0[0]=J:Q.touch1&&Q.touch1[2]===K.identifier&&(Q.touch1[0]=J);if(K=Q.that.__zoom,Q.touch1){var F=Q.touch0[0],W=Q.touch0[1],X=Q.touch1[0],ne=Q.touch1[1],le=(le=X[0]-F[0])*le+(le=X[1]-F[1])*le,ie=(ie=ne[0]-W[0])*ie+(ie=ne[1]-W[1])*ie;K=w(K,Math.sqrt(le/ie)),J=[(F[0]+X[0])/2,(F[1]+X[1])/2],R=[(W[0]+ne[0])/2,(W[1]+ne[1])/2]}else if(Q.touch0)J=Q.touch0[0],R=Q.touch0[1];else return;Q.zoom("touch",r(j(K,J,R),Q.extent,o))}}function M(U,...z){if(this.__zooming){var Q=T(this,z).event(U),q=U.changedTouches,V=q.length,Y,K;for(f6(U),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),Y=0;Y<V;++Y)K=q[Y],Q.touch0&&Q.touch0[2]===K.identifier?delete Q.touch0:Q.touch1&&Q.touch1[2]===K.identifier&&delete Q.touch1;if(Q.touch1&&!Q.touch0&&(Q.touch0=Q.touch1,delete Q.touch1),Q.touch0)Q.touch0[1]=this.__zoom.invert(Q.touch0[0]);else if(Q.end(),Q.taps===2&&(K=Xf(K,this),Math.hypot(f[0]-K[0],f[1]-K[1])<v)){var J=Wu(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return y.wheelDelta=function(U){return arguments.length?(a=typeof U=="function"?U:ZC(+U),y):a},y.filter=function(U){return arguments.length?(e=typeof U=="function"?U:ZC(!!U),y):e},y.touchable=function(U){return arguments.length?(n=typeof U=="function"?U:ZC(!!U),y):n},y.extent=function(U){return arguments.length?(t=typeof U=="function"?U:ZC([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),y):t},y.scaleExtent=function(U){return arguments.length?(s[0]=+U[0],s[1]=+U[1],y):[s[0],s[1]]},y.translateExtent=function(U){return arguments.length?(o[0][0]=+U[0][0],o[1][0]=+U[1][0],o[0][1]=+U[0][1],o[1][1]=+U[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(U){return arguments.length?(r=U,y):r},y.duration=function(U){return arguments.length?(l=+U,y):l},y.interpolate=function(U){return arguments.length?(c=U,y):c},y.on=function(){var U=u.on.apply(u,arguments);return U===u?y:U},y.clickDistance=function(U){return arguments.length?(x=(U=+U)*U,y):Math.sqrt(x)},y.tapDistance=function(U){return arguments.length?(v=+U,y):v},y}const S4=N.createContext(null),Rnt=S4.Provider,e0={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},rde=e0.error001();function hs(e,t){const r=N.useContext(S4);if(r===null)throw new Error(rde);return Fue(r,e,t)}const oo=()=>{const e=N.useContext(S4);if(e===null)throw new Error(rde);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Lnt=e=>e.userSelectionActive?"none":"all";function ade({position:e,children:t,className:r,style:a,...n}){const s=hs(Lnt),o=`${e}`.split("-");return ct.createElement("div",{className:Pl(["react-flow__panel",r,...o]),style:{...a,pointerEvents:s},...n},t)}function Mnt({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ct.createElement(ade,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ct.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Unt=({x:e,y:t,label:r,labelStyle:a={},labelShowBg:n=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=N.useRef(null),[h,m]=N.useState({x:0,y:0,width:0,height:0}),g=Pl(["react-flow__edge-textwrapper",u]);return N.useEffect(()=>{if(f.current){const x=f.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:ct.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},n&&ct.createElement("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),ct.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:a},r),c)};var Qnt=N.memo(Unt);const A7=e=>({width:e.offsetWidth,height:e.offsetHeight}),Xb=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),h7=(e={x:0,y:0},t)=>({x:Xb(e.x,t[0][0],t[1][0]),y:Xb(e.y,t[0][1],t[1][1])}),iX=(e,t,r)=>e<t?Xb(Math.abs(e-t),1,50)/50:e>r?-Xb(Math.abs(e-r),1,50)/50:0,nde=(e,t)=>{const r=iX(e.x,35,t.width-35)*20,a=iX(e.y,35,t.height-35)*20;return[r,a]},sde=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Hnt=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),m7=({x:e,y:t,width:r,height:a})=>({x:e,y:t,x2:e+r,y2:t+a}),znt=({x:e,y:t,x2:r,y2:a})=>({x:e,y:t,width:r-e,height:a-t}),oX=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),SD=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),a=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*a)},Vnt=e=>Ju(e.width)&&Ju(e.height)&&Ju(e.x)&&Ju(e.y),Ju=e=>!isNaN(e)&&isFinite(e),Is=Symbol.for("internals"),ide=["Enter"," ","Escape"],$nt=(e,t)=>{},Gnt=e=>"nativeEvent"in e;function BD(e){var n,s;const t=Gnt(e)?e.nativeEvent:e,r=((s=(n=t.composedPath)==null?void 0:n.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const ode=e=>"clientX"in e,Pm=(e,t)=>{var s,o;const r=ode(e),a=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,n=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:a-((t==null?void 0:t.left)??0),y:n-((t==null?void 0:t.top)??0)}},l_=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},tE=({id:e,path:t,labelX:r,labelY:a,label:n,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m=20})=>ct.createElement(ct.Fragment,null,ct.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),m&&ct.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),n&&Ju(r)&&Ju(a)?ct.createElement(Qnt,{x:r,y:a,label:n,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);tE.displayName="BaseEdge";function $y(e,t,r){return r===void 0?r:a=>{const n=t().edges.find(s=>s.id===e);n&&r(a,{...n})}}function lde({sourceX:e,sourceY:t,targetX:r,targetY:a}){const n=Math.abs(r-e)/2,s=r<e?r+n:r-n,o=Math.abs(a-t)/2,l=a<t?a+o:a-o;return[s,l,n,o]}function cde({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:n,sourceControlY:s,targetControlX:o,targetControlY:l}){const c=e*.125+n*.375+o*.375+r*.125,u=t*.125+s*.375+l*.375+a*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Kg;(function(e){e.Strict="strict",e.Loose="loose"})(Kg||(Kg={}));var cg;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(cg||(cg={}));var aN;(function(e){e.Partial="partial",e.Full="full"})(aN||(aN={}));var pm;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(pm||(pm={}));var c_;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(c_||(c_={}));var Nr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Nr||(Nr={}));function lX({pos:e,x1:t,y1:r,x2:a,y2:n}){return e===Nr.Left||e===Nr.Right?[.5*(t+a),r]:[t,.5*(r+n)]}function ude({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:a,targetY:n,targetPosition:s=Nr.Top}){const[o,l]=lX({pos:r,x1:e,y1:t,x2:a,y2:n}),[c,u]=lX({pos:s,x1:a,y1:n,x2:e,y2:t}),[d,f,h,m]=cde({sourceX:e,sourceY:t,targetX:a,targetY:n,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${a},${n}`,d,f,h,m]}const p7=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,sourcePosition:n=Nr.Bottom,targetPosition:s=Nr.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,w]=ude({sourceX:e,sourceY:t,sourcePosition:n,targetX:r,targetY:a,targetPosition:s});return ct.createElement(tE,{path:v,labelX:y,labelY:w,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})});p7.displayName="SimpleBezierEdge";const cX={[Nr.Left]:{x:-1,y:0},[Nr.Right]:{x:1,y:0},[Nr.Top]:{x:0,y:-1},[Nr.Bottom]:{x:0,y:1}},qnt=({source:e,sourcePosition:t=Nr.Bottom,target:r})=>t===Nr.Left||t===Nr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},uX=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Knt({source:e,sourcePosition:t=Nr.Bottom,target:r,targetPosition:a=Nr.Top,center:n,offset:s}){const o=cX[t],l=cX[a],c={x:e.x+o.x*s,y:e.y+o.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},d=qnt({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[w,j,O,B]=lde({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*l[f]===-1){g=n.x??w,x=n.y??j;const C=[{x:g,y:c.y},{x:g,y:u.y}],_=[{x:c.x,y:x},{x:u.x,y:x}];o[f]===h?m=f==="x"?C:_:m=f==="x"?_:C}else{const C=[{x:c.x,y:u.y}],_=[{x:u.x,y:c.y}];if(f==="x"?m=o.x===h?_:C:m=o.y===h?C:_,t===a){const M=Math.abs(e[f]-r[f]);if(M<=s){const U=Math.min(s-1,s-M);o[f]===h?v[f]=(c[f]>e[f]?-1:1)*U:y[f]=(u[f]>r[f]?-1:1)*U}}if(t!==a){const M=f==="x"?"y":"x",U=o[f]===l[M],z=c[M]>u[M],Q=c[M]<u[M];(o[f]===1&&(!U&&z||U&&Q)||o[f]!==1&&(!U&&Q||U&&z))&&(m=f==="x"?C:_)}const S={x:c.x+v.x,y:c.y+v.y},L={x:u.x+y.x,y:u.y+y.y},P=Math.max(Math.abs(S.x-m[0].x),Math.abs(L.x-m[0].x)),k=Math.max(Math.abs(S.y-m[0].y),Math.abs(L.y-m[0].y));P>=k?(g=(S.x+L.x)/2,x=m[0].y):(g=m[0].x,x=(S.y+L.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],g,x,O,B]}function Wnt(e,t,r,a){const n=Math.min(uX(e,t)/2,uX(t,r)/2,a),{x:s,y:o}=t;if(e.x===s&&s===r.x||e.y===o&&o===r.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+n*u},${o}Q ${s},${o} ${s},${o+n*d}`}const l=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${o+n*c}Q ${s},${o} ${s+n*l},${o}`}function TD({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:a,targetY:n,targetPosition:s=Nr.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,h,m,g]=Knt({source:{x:e,y:t},sourcePosition:r,target:{x:a,y:n},targetPosition:s,center:{x:l,y:c},offset:u});return[d.reduce((v,y,w)=>{let j="";return w>0&&w<d.length-1?j=Wnt(d[w-1],y,d[w+1],o):j=`${w===0?"M":"L"}${y.x} ${y.y}`,v+=j,v},""),f,h,m,g]}const B4=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,label:n,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Nr.Bottom,targetPosition:h=Nr.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,j]=TD({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:a,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return ct.createElement(tE,{path:y,labelX:w,labelY:j,label:n,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:v})});B4.displayName="SmoothStepEdge";const g7=N.memo(e=>{var t;return ct.createElement(B4,{...e,pathOptions:N.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});g7.displayName="StepEdge";function Xnt({sourceX:e,sourceY:t,targetX:r,targetY:a}){const[n,s,o,l]=lde({sourceX:e,sourceY:t,targetX:r,targetY:a});return[`M ${e},${t}L ${r},${a}`,n,s,o,l]}const x7=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,label:n,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})=>{const[g,x,v]=Xnt({sourceX:e,sourceY:t,targetX:r,targetY:a});return ct.createElement(tE,{path:g,labelX:x,labelY:v,label:n,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})});x7.displayName="StraightEdge";function e5(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function dX({pos:e,x1:t,y1:r,x2:a,y2:n,c:s}){switch(e){case Nr.Left:return[t-e5(t-a,s),r];case Nr.Right:return[t+e5(a-t,s),r];case Nr.Top:return[t,r-e5(r-n,s)];case Nr.Bottom:return[t,r+e5(n-r,s)]}}function dde({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:a,targetY:n,targetPosition:s=Nr.Top,curvature:o=.25}){const[l,c]=dX({pos:r,x1:e,y1:t,x2:a,y2:n,c:o}),[u,d]=dX({pos:s,x1:a,y1:n,x2:e,y2:t,c:o}),[f,h,m,g]=cde({sourceX:e,sourceY:t,targetX:a,targetY:n,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${a},${n}`,f,h,m,g]}const u_=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:a,sourcePosition:n=Nr.Bottom,targetPosition:s=Nr.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,j]=dde({sourceX:e,sourceY:t,sourcePosition:n,targetX:r,targetY:a,targetPosition:s,curvature:x==null?void 0:x.curvature});return ct.createElement(tE,{path:y,labelX:w,labelY:j,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:v})});u_.displayName="BezierEdge";const v7=N.createContext(null),Ynt=v7.Provider;v7.Consumer;const Jnt=()=>N.useContext(v7),Znt=e=>"id"in e&&"source"in e&&"target"in e,est=({source:e,sourceHandle:t,target:r,targetHandle:a})=>`reactflow__edge-${e}${t||""}-${r}${a||""}`,ID=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`,tst=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),rst=(e,t)=>{if(!e.source||!e.target)return t;let r;return Znt(e)?r={...e}:r={...e,id:est(e)},tst(r,t)?t:t.concat(r)},OD=({x:e,y:t},[r,a,n],s,[o,l])=>{const c={x:(e-r)/n,y:(t-a)/n};return s?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},fde=({x:e,y:t},[r,a,n])=>({x:e*n+r,y:t*n+a}),cb=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],a=(e.height??0)*t[1],n={x:e.position.x-r,y:e.position.y-a};return{...n,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-a}:n}},b7=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((a,n)=>{const{x:s,y:o}=cb(n,t).positionAbsolute;return Hnt(a,m7({x:s,y:o,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return znt(r)},Ade=(e,t,[r,a,n]=[0,0,1],s=!1,o=!1,l=[0,0])=>{const c={x:(t.x-r)/n,y:(t.y-a)/n,width:t.width/n,height:t.height/n},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:m=!0,hidden:g=!1}=d;if(o&&!m||g)return!1;const{positionAbsolute:x}=cb(d,l),v={x:x.x,y:x.y,width:f||0,height:h||0},y=SD(c,v),w=typeof f>"u"||typeof h>"u"||f===null||h===null,j=s&&y>0,O=(f||0)*(h||0);(w||j||y>=O||d.dragging)&&u.push(d)}),u},hde=(e,t)=>{const r=e.map(a=>a.id);return t.filter(a=>r.includes(a.source)||r.includes(a.target))},mde=(e,t,r,a,n,s=.1)=>{const o=t/(e.width*(1+s)),l=r/(e.height*(1+s)),c=Math.min(o,l),u=Xb(c,a,n),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,m=r/2-f*u;return{x:h,y:m,zoom:u}},Wp=(e,t=0)=>e.transition().duration(t);function fX(e,t,r,a){return(t[r]||[]).reduce((n,s)=>{var o,l;return`${e.id}-${s.id}-${r}`!==a&&n.push({id:s.id||null,type:r,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),n},[])}function ast(e,t,r,a,n,s){const{x:o,y:l}=Pm(e),u=t.elementsFromPoint(o,l).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=y7(void 0,u),v=u.getAttribute("data-handleid"),y=s({nodeId:g,id:v,type:x});if(y){const w=n.find(j=>j.nodeId===g&&j.type===x&&j.id===v);return{handle:{id:v,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(n.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=a){const v=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:v}]:x===f&&d.push({handle:g,validHandleResult:v}),f=x)}}),!d.length)return{handle:null,validHandleResult:pde()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>m?g.type==="target":h?x.isValid:!0)||d[0]}const nst={source:null,target:null,sourceHandle:null,targetHandle:null},pde=()=>({handleDomNode:null,isValid:!1,connection:nst,endHandle:null});function gde(e,t,r,a,n,s,o){const l=n==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...pde(),handleDomNode:c};if(c){const d=y7(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:l?f:r,sourceHandle:l?h:a,target:l?r:f,targetHandle:l?a:h};u.connection=x,m&&g&&(t===Kg.Strict?l&&d==="source"||!l&&d==="target":f!==r||h!==a)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function sst({nodes:e,nodeId:t,handleId:r,handleType:a}){return e.reduce((n,s)=>{if(s[Is]){const{handleBounds:o}=s[Is];let l=[],c=[];o&&(l=fX(s,o,"source",`${t}-${r}-${a}`),c=fX(s,o,"target",`${t}-${r}-${a}`)),n.push(...l,...c)}return n},[])}function y7(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function A6(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function ist(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function xde({event:e,handleId:t,nodeId:r,onConnect:a,isTarget:n,getState:s,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=sde(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:w}=s();let j=0,O;const{x:B,y:T}=Pm(e),C=d==null?void 0:d.elementFromPoint(B,T),_=y7(c,C),S=h==null?void 0:h.getBoundingClientRect();if(!S||!_)return;let L,P=Pm(e,S),k=!1,M=null,U=!1,z=null;const Q=sst({nodes:y(),nodeId:r,handleId:t,handleType:_}),q=()=>{if(!m)return;const[K,J]=nde(P,S);v({x:K,y:J}),j=requestAnimationFrame(q)};o({connectionPosition:P,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:_,connectionStartHandle:{nodeId:r,handleId:t,type:_},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:_});function V(K){const{transform:J}=s();P=Pm(K,S);const{handle:R,validHandleResult:F}=ast(K,d,OD(P,J,!1,[1,1]),g,Q,W=>gde(W,f,r,t,n?"target":"source",l,d));if(O=R,k||(q(),k=!0),z=F.handleDomNode,M=F.connection,U=F.isValid,o({connectionPosition:O&&U?fde({x:O.x,y:O.y},J):P,connectionStatus:ist(!!O,U),connectionEndHandle:F.endHandle}),!O&&!U&&!z)return A6(L);M.source!==M.target&&z&&(A6(L),L=z,z.classList.add("connecting","react-flow__handle-connecting"),z.classList.toggle("valid",U),z.classList.toggle("react-flow__handle-valid",U))}function Y(K){var J,R;(O||z)&&M&&U&&(a==null||a(M)),(R=(J=s()).onConnectEnd)==null||R.call(J,K),c&&(u==null||u(K)),A6(L),w(),cancelAnimationFrame(j),k=!1,U=!1,M=null,z=null,d.removeEventListener("mousemove",V),d.removeEventListener("mouseup",Y),d.removeEventListener("touchmove",V),d.removeEventListener("touchend",Y)}d.addEventListener("mousemove",V),d.addEventListener("mouseup",Y),d.addEventListener("touchmove",V),d.addEventListener("touchend",Y)}const AX=()=>!0,ost=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),lst=(e,t,r)=>a=>{const{connectionStartHandle:n,connectionEndHandle:s,connectionClickStartHandle:o}=a;return{connecting:(n==null?void 0:n.nodeId)===e&&(n==null?void 0:n.handleId)===t&&(n==null?void 0:n.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===r}},vde=N.forwardRef(({type:e="source",position:t=Nr.Top,isValidConnection:r,isConnectable:a=!0,isConnectableStart:n=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},m)=>{var S,L;const g=o||null,x=e==="target",v=oo(),y=Jnt(),{connectOnClick:w,noPanClassName:j}=hs(ost,hl),{connecting:O,clickConnecting:B}=hs(lst(y,g,e),hl);y||(L=(S=v.getState()).onError)==null||L.call(S,"010",e0.error010());const T=P=>{const{defaultEdgeOptions:k,onConnect:M,hasDefaultEdges:U}=v.getState(),z={...k,...P};if(U){const{edges:Q,setEdges:q}=v.getState();q(rst(z,Q))}M==null||M(z),l==null||l(z)},C=P=>{if(!y)return;const k=ode(P);n&&(k&&P.button===0||!k)&&xde({event:P,handleId:g,nodeId:y,onConnect:T,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||AX}),k?d==null||d(P):f==null||f(P)},_=P=>{const{onClickConnectStart:k,onClickConnectEnd:M,connectionClickStartHandle:U,connectionMode:z,isValidConnection:Q}=v.getState();if(!y||!U&&!n)return;if(!U){k==null||k(P,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const q=sde(P.target),V=r||Q||AX,{connection:Y,isValid:K}=gde({nodeId:y,id:g,type:e},z,U.nodeId,U.handleId||null,U.type,V,q);K&&T(Y),M==null||M(P),v.setState({connectionClickStartHandle:null})};return ct.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:Pl(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",j,u,{source:!x,target:x,connectable:a,connectablestart:n,connectableend:s,connecting:B,connectionindicator:a&&(n&&!O||s&&O)}]),onMouseDown:C,onTouchStart:C,onClick:w?_:void 0,ref:m,...h},c)});vde.displayName="Handle";var Yb=N.memo(vde);const bde=({data:e,isConnectable:t,targetPosition:r=Nr.Top,sourcePosition:a=Nr.Bottom})=>ct.createElement(ct.Fragment,null,ct.createElement(Yb,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,ct.createElement(Yb,{type:"source",position:a,isConnectable:t}));bde.displayName="DefaultNode";var FD=N.memo(bde);const yde=({data:e,isConnectable:t,sourcePosition:r=Nr.Bottom})=>ct.createElement(ct.Fragment,null,e==null?void 0:e.label,ct.createElement(Yb,{type:"source",position:r,isConnectable:t}));yde.displayName="InputNode";var wde=N.memo(yde);const Nde=({data:e,isConnectable:t,targetPosition:r=Nr.Top})=>ct.createElement(ct.Fragment,null,ct.createElement(Yb,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);Nde.displayName="OutputNode";var Ede=N.memo(Nde);const w7=()=>null;w7.displayName="GroupNode";const cst=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),t5=e=>e.id;function ust(e,t){return hl(e.selectedNodes.map(t5),t.selectedNodes.map(t5))&&hl(e.selectedEdges.map(t5),t.selectedEdges.map(t5))}const Cde=N.memo(({onSelectionChange:e})=>{const t=oo(),{selectedNodes:r,selectedEdges:a}=hs(cst,ust);return N.useEffect(()=>{const n={nodes:r,edges:a};e==null||e(n),t.getState().onSelectionChange.forEach(s=>s(n))},[r,a,e]),null});Cde.displayName="SelectionListener";const dst=e=>!!e.onSelectionChange;function fst({onSelectionChange:e}){const t=hs(dst);return e||t?ct.createElement(Cde,{onSelectionChange:e}):null}const Ast=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function nv(e,t){N.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function pa(e,t,r){N.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const hst=({nodes:e,edges:t,defaultNodes:r,defaultEdges:a,onConnect:n,onConnectStart:s,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:w,onEdgesChange:j,elementsSelectable:O,connectionMode:B,snapGrid:T,snapToGrid:C,translateExtent:_,connectOnClick:S,defaultEdgeOptions:L,fitView:P,fitViewOptions:k,onNodesDelete:M,onEdgesDelete:U,onNodeDrag:z,onNodeDragStart:Q,onNodeDragStop:q,onSelectionDrag:V,onSelectionDragStart:Y,onSelectionDragStop:K,noPanClassName:J,nodeOrigin:R,rfId:F,autoPanOnConnect:W,autoPanOnNodeDrag:X,onError:ne,connectionRadius:le,isValidConnection:ie,nodeDragThreshold:ae})=>{const{setNodes:Ae,setEdges:ke,setDefaultNodesAndEdges:re,setMinZoom:Re,setMaxZoom:Le,setTranslateExtent:Te,setNodeExtent:de,reset:Ce}=hs(Ast,hl),me=oo();return N.useEffect(()=>{const ye=a==null?void 0:a.map(oe=>({...oe,...L}));return re(r,ye),()=>{Ce()}},[]),pa("defaultEdgeOptions",L,me.setState),pa("connectionMode",B,me.setState),pa("onConnect",n,me.setState),pa("onConnectStart",s,me.setState),pa("onConnectEnd",o,me.setState),pa("onClickConnectStart",l,me.setState),pa("onClickConnectEnd",c,me.setState),pa("nodesDraggable",u,me.setState),pa("nodesConnectable",d,me.setState),pa("nodesFocusable",f,me.setState),pa("edgesFocusable",h,me.setState),pa("edgesUpdatable",m,me.setState),pa("elementsSelectable",O,me.setState),pa("elevateNodesOnSelect",g,me.setState),pa("snapToGrid",C,me.setState),pa("snapGrid",T,me.setState),pa("onNodesChange",w,me.setState),pa("onEdgesChange",j,me.setState),pa("connectOnClick",S,me.setState),pa("fitViewOnInit",P,me.setState),pa("fitViewOnInitOptions",k,me.setState),pa("onNodesDelete",M,me.setState),pa("onEdgesDelete",U,me.setState),pa("onNodeDrag",z,me.setState),pa("onNodeDragStart",Q,me.setState),pa("onNodeDragStop",q,me.setState),pa("onSelectionDrag",V,me.setState),pa("onSelectionDragStart",Y,me.setState),pa("onSelectionDragStop",K,me.setState),pa("noPanClassName",J,me.setState),pa("nodeOrigin",R,me.setState),pa("rfId",F,me.setState),pa("autoPanOnConnect",W,me.setState),pa("autoPanOnNodeDrag",X,me.setState),pa("onError",ne,me.setState),pa("connectionRadius",le,me.setState),pa("isValidConnection",ie,me.setState),pa("nodeDragThreshold",ae,me.setState),nv(e,Ae),nv(t,ke),nv(x,Re),nv(v,Le),nv(_,Te),nv(y,de),null},hX={display:"none"},mst={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},jde="react-flow__node-desc",kde="react-flow__edge-desc",pst="react-flow__aria-live",gst=e=>e.ariaLiveMessage;function xst({rfId:e}){const t=hs(gst);return ct.createElement("div",{id:`${pst}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:mst},t)}function vst({rfId:e,disableKeyboardA11y:t}){return ct.createElement(ct.Fragment,null,ct.createElement("div",{id:`${jde}-${e}`,style:hX},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ct.createElement("div",{id:`${kde}-${e}`,style:hX},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ct.createElement(xst,{rfId:e}))}var nN=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,a]=N.useState(!1),n=N.useRef(!1),s=N.useRef(new Set([])),[o,l]=N.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return N.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(n.current=m.ctrlKey||m.metaKey||m.shiftKey,(!n.current||n.current&&!t.actInsideInputWithModifier)&&BD(m))return!1;const x=pX(m.code,l);s.current.add(m[x]),mX(o,s.current,!1)&&(m.preventDefault(),a(!0))},f=m=>{if((!n.current||n.current&&!t.actInsideInputWithModifier)&&BD(m))return!1;const x=pX(m.code,l);mX(o,s.current,!0)?(a(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),n.current=!1},h=()=>{s.current.clear(),a(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,a]),r};function mX(e,t,r){return e.filter(a=>r||a.length===t.size).some(a=>a.every(n=>t.has(n)))}function pX(e,t){return t.includes(e)?"code":"key"}function _de(e,t,r,a){var l,c;const n=e.parentNode||e.parentId;if(!n)return r;const s=t.get(n),o=cb(s,a);return _de(s,t,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((l=s[Is])==null?void 0:l.z)??0)>(r.z??0)?((c=s[Is])==null?void 0:c.z)??0:r.z??0},a)}function Sde(e,t,r){e.forEach(a=>{var s;const n=a.parentNode||a.parentId;if(n&&!e.has(n))throw new Error(`Parent node ${n} not found`);if(n||r!=null&&r[a.id]){const{x:o,y:l,z:c}=_de(a,e,{...a.position,z:((s=a[Is])==null?void 0:s.z)??0},t);a.positionAbsolute={x:o,y:l},a[Is].z=c,r!=null&&r[a.id]&&(a[Is].isParent=!0)}})}function h6(e,t,r,a){const n=new Map,s={},o=a?1e3:0;return e.forEach(l=>{var m;const c=(Ju(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,Is,{enumerable:!1,value:{handleBounds:h||(m=u==null?void 0:u[Is])==null?void 0:m.handleBounds,z:c}}),n.set(l.id,d)}),Sde(n,r,s),n}function Bde(e,t={}){const{getNodes:r,width:a,height:n,minZoom:s,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(l&&c&&(h||!t.initial)){const g=r().filter(v=>{var w;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(j=>j.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=b7(g,f),{x:y,y:w,zoom:j}=mde(v,a,n,t.minZoom??s,t.maxZoom??o,t.padding??.1),O=Dm.translate(y,w).scale(j);return typeof t.duration=="number"&&t.duration>0?l.transform(Wp(c,t.duration),O):l.transform(c,O),!0}}return!1}function bst(e,t){return e.forEach(r=>{const a=t.get(r.id);a&&t.set(a.id,{...a,[Is]:a[Is],selected:r.selected})}),new Map(t)}function yst(e,t){return t.map(r=>{const a=e.find(n=>n.id===r.id);return a&&(r.selected=a.selected),r})}function r5({changedNodes:e,changedEdges:t,get:r,set:a}){const{nodeInternals:n,edges:s,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&a({nodeInternals:bst(e,n)}),o==null||o(e)),t!=null&&t.length&&(u&&a({edges:yst(t,s)}),l==null||l(t))}const sv=()=>{},wst={zoomIn:sv,zoomOut:sv,zoomTo:sv,getZoom:()=>1,setViewport:sv,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:sv,fitBounds:sv,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Nst=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Est=()=>{const e=oo(),{d3Zoom:t,d3Selection:r}=hs(Nst,hl);return N.useMemo(()=>r&&t?{zoomIn:n=>t.scaleBy(Wp(r,n==null?void 0:n.duration),1.2),zoomOut:n=>t.scaleBy(Wp(r,n==null?void 0:n.duration),1/1.2),zoomTo:(n,s)=>t.scaleTo(Wp(r,s==null?void 0:s.duration),n),getZoom:()=>e.getState().transform[2],setViewport:(n,s)=>{const[o,l,c]=e.getState().transform,u=Dm.translate(n.x??o,n.y??l).scale(n.zoom??c);t.transform(Wp(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[n,s,o]=e.getState().transform;return{x:n,y:s,zoom:o}},fitView:n=>Bde(e.getState,n),setCenter:(n,s,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=l/2-n*d,h=c/2-s*d,m=Dm.translate(f,h).scale(d);t.transform(Wp(r,o==null?void 0:o.duration),m)},fitBounds:(n,s)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=mde(n,o,l,c,u,(s==null?void 0:s.padding)??.1),m=Dm.translate(d,f).scale(h);t.transform(Wp(r,s==null?void 0:s.duration),m)},project:n=>{const{transform:s,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),OD(n,s,o,l)},screenToFlowPosition:n=>{const{transform:s,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return n;const{x:u,y:d}=c.getBoundingClientRect(),f={x:n.x-u,y:n.y-d};return OD(f,s,o,l)},flowToScreenPosition:n=>{const{transform:s,domNode:o}=e.getState();if(!o)return n;const{x:l,y:c}=o.getBoundingClientRect(),u=fde(n,s);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:wst,[t,r])};function T4(){const e=Est(),t=oo(),r=N.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),a=N.useCallback(x=>t.getState().nodeInternals.get(x),[]),n=N.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),s=N.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),o=N.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:w,onNodesChange:j}=t.getState(),O=v(),B=typeof x=="function"?x(O):x;if(w)y(B);else if(j){const T=B.length===0?O.map(C=>({type:"remove",id:C.id})):B.map(C=>({item:C,type:"reset"}));j(T)}},[]),l=N.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:j}=t.getState(),O=typeof x=="function"?x(v):x;if(w)y(O);else if(j){const B=O.length===0?v.map(T=>({type:"remove",id:T.id})):O.map(T=>({item:T,type:"reset"}));j(B)}},[]),c=N.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:j,onNodesChange:O}=t.getState();if(j){const T=[...y(),...v];w(T)}else if(O){const B=v.map(T=>({item:T,type:"add"}));O(B)}},[]),u=N.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:j,onEdgesChange:O}=t.getState();if(j)w([...y,...v]);else if(O){const B=v.map(T=>({item:T,type:"add"}));O(B)}},[]),d=N.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[w,j,O]=y;return{nodes:x().map(B=>({...B})),edges:v.map(B=>({...B})),viewport:{x:w,y:j,zoom:O}}},[]),f=N.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:w,edges:j,hasDefaultNodes:O,hasDefaultEdges:B,onNodesDelete:T,onEdgesDelete:C,onNodesChange:_,onEdgesChange:S}=t.getState(),L=(x||[]).map(z=>z.id),P=(v||[]).map(z=>z.id),k=w().reduce((z,Q)=>{const q=Q.parentNode||Q.parentId,V=!L.includes(Q.id)&&q&&z.find(K=>K.id===q);return(typeof Q.deletable=="boolean"?Q.deletable:!0)&&(L.includes(Q.id)||V)&&z.push(Q),z},[]),M=j.filter(z=>typeof z.deletable=="boolean"?z.deletable:!0),U=M.filter(z=>P.includes(z.id));if(k||U){const z=hde(k,M),Q=[...U,...z],q=Q.reduce((V,Y)=>(V.includes(Y.id)||V.push(Y.id),V),[]);if((B||O)&&(B&&t.setState({edges:j.filter(V=>!q.includes(V.id))}),O&&(k.forEach(V=>{y.delete(V.id)}),t.setState({nodeInternals:new Map(y)}))),q.length>0&&(C==null||C(Q),S&&S(q.map(V=>({id:V,type:"remove"})))),k.length>0&&(T==null||T(k),_)){const V=k.map(Y=>({id:Y.id,type:"remove"}));_(V)}}},[]),h=N.useCallback(x=>{const v=Vnt(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:oX(y),y,v]},[]),m=N.useCallback((x,v=!0,y)=>{const[w,j,O]=h(x);return w?(y||t.getState().getNodes()).filter(B=>{if(!O&&(B.id===j.id||!B.positionAbsolute))return!1;const T=oX(B),C=SD(T,w);return v&&C>0||C>=w.width*w.height}):[]},[]),g=N.useCallback((x,v,y=!0)=>{const[w]=h(x);if(!w)return!1;const j=SD(w,v);return y&&j>0||j>=w.width*w.height},[]);return N.useMemo(()=>({...e,getNodes:r,getNode:a,getEdges:n,getEdge:s,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,a,n,s,o,l,c,u,d,f,m,g])}const Cst={actInsideInputWithModifier:!1};var jst=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=oo(),{deleteElements:a}=T4(),n=nN(e,Cst),s=nN(t);N.useEffect(()=>{if(n){const{edges:o,getNodes:l}=r.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);a({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[n]),N.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function kst(e){const t=oo();N.useEffect(()=>{let r;const a=()=>{var s,o;if(!e.current)return;const n=A7(e.current);(n.height===0||n.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",e0.error004())),t.setState({width:n.width||500,height:n.height||500})};return a(),window.addEventListener("resize",a),e.current&&(r=new ResizeObserver(()=>a()),r.observe(e.current)),()=>{window.removeEventListener("resize",a),r&&e.current&&r.unobserve(e.current)}},[])}const N7={position:"absolute",width:"100%",height:"100%",top:0,left:0},_st=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,a5=e=>({x:e.x,y:e.y,zoom:e.k}),iv=(e,t)=>e.target.closest(`.${t}`),gX=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),xX=e=>{const t=e.ctrlKey&&l_()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Sst=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Bst=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:a,zoomOnScroll:n=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=cg.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:w,noWheelClassName:j,noPanClassName:O})=>{const B=N.useRef(),T=oo(),C=N.useRef(!1),_=N.useRef(!1),S=N.useRef(null),L=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:k,d3ZoomHandler:M,userSelectionActive:U}=hs(Sst,hl),z=nN(v),Q=N.useRef(0),q=N.useRef(!1),V=N.useRef();return kst(S),N.useEffect(()=>{if(S.current){const Y=S.current.getBoundingClientRect(),K=Pnt().scaleExtent([g,x]).translateExtent(m),J=Wu(S.current).call(K),R=Dm.translate(h.x,h.y).scale(Xb(h.zoom,g,x)),F=[[0,0],[Y.width,Y.height]],W=K.constrain()(R,F,m);K.transform(J,W),K.wheelDelta(xX),T.setState({d3Zoom:K,d3Selection:J,d3ZoomHandler:J.on("wheel.zoom"),transform:[W.x,W.y,W.k],domNode:S.current.closest(".react-flow")})}},[]),N.useEffect(()=>{k&&P&&(o&&!z&&!U?k.on("wheel.zoom",Y=>{if(iv(Y,j))return!1;Y.preventDefault(),Y.stopImmediatePropagation();const K=k.property("__zoom").k||1;if(Y.ctrlKey&&s){const ie=Xf(Y),ae=xX(Y),Ae=K*Math.pow(2,ae);P.scaleTo(k,Ae,ie,Y);return}const J=Y.deltaMode===1?20:1;let R=c===cg.Vertical?0:Y.deltaX*J,F=c===cg.Horizontal?0:Y.deltaY*J;!l_()&&Y.shiftKey&&c!==cg.Vertical&&(R=Y.deltaY*J,F=0),P.translateBy(k,-(R/K)*l,-(F/K)*l,{internal:!0});const W=a5(k.property("__zoom")),{onViewportChangeStart:X,onViewportChange:ne,onViewportChangeEnd:le}=T.getState();clearTimeout(V.current),q.current||(q.current=!0,t==null||t(Y,W),X==null||X(W)),q.current&&(e==null||e(Y,W),ne==null||ne(W),V.current=setTimeout(()=>{r==null||r(Y,W),le==null||le(W),q.current=!1},150))},{passive:!1}):typeof M<"u"&&k.on("wheel.zoom",function(Y,K){if(!y&&Y.type==="wheel"&&!Y.ctrlKey||iv(Y,j))return null;Y.preventDefault(),M.call(this,Y,K)},{passive:!1}))},[U,o,c,k,P,M,z,s,y,j,t,e,r]),N.useEffect(()=>{P&&P.on("start",Y=>{var R,F;if(!Y.sourceEvent||Y.sourceEvent.internal)return null;Q.current=(R=Y.sourceEvent)==null?void 0:R.button;const{onViewportChangeStart:K}=T.getState(),J=a5(Y.transform);C.current=!0,L.current=J,((F=Y.sourceEvent)==null?void 0:F.type)==="mousedown"&&T.setState({paneDragging:!0}),K==null||K(J),t==null||t(Y.sourceEvent,J)})},[P,t]),N.useEffect(()=>{P&&(U&&!C.current?P.on("zoom",null):U||P.on("zoom",Y=>{var J;const{onViewportChange:K}=T.getState();if(T.setState({transform:[Y.transform.x,Y.transform.y,Y.transform.k]}),_.current=!!(a&&gX(f,Q.current??0)),(e||K)&&!((J=Y.sourceEvent)!=null&&J.internal)){const R=a5(Y.transform);K==null||K(R),e==null||e(Y.sourceEvent,R)}}))},[U,P,e,f,a]),N.useEffect(()=>{P&&P.on("end",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;const{onViewportChangeEnd:K}=T.getState();if(C.current=!1,T.setState({paneDragging:!1}),a&&gX(f,Q.current??0)&&!_.current&&a(Y.sourceEvent),_.current=!1,(r||K)&&_st(L.current,Y.transform)){const J=a5(Y.transform);L.current=J,clearTimeout(B.current),B.current=setTimeout(()=>{K==null||K(J),r==null||r(Y.sourceEvent,J)},o?150:0)}})},[P,o,f,r,a]),N.useEffect(()=>{P&&P.filter(Y=>{const K=z||n,J=s&&Y.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&Y.button===1&&Y.type==="mousedown"&&(iv(Y,"react-flow__node")||iv(Y,"react-flow__edge")))return!0;if(!f&&!K&&!o&&!u&&!s||U||!u&&Y.type==="dblclick"||iv(Y,j)&&Y.type==="wheel"||iv(Y,O)&&(Y.type!=="wheel"||o&&Y.type==="wheel"&&!z)||!s&&Y.ctrlKey&&Y.type==="wheel"||!K&&!o&&!J&&Y.type==="wheel"||!f&&(Y.type==="mousedown"||Y.type==="touchstart")||Array.isArray(f)&&!f.includes(Y.button)&&Y.type==="mousedown")return!1;const R=Array.isArray(f)&&f.includes(Y.button)||!Y.button||Y.button<=1;return(!Y.ctrlKey||Y.type==="wheel")&&R})},[U,P,n,s,o,u,f,d,z]),ct.createElement("div",{className:"react-flow__renderer",ref:S,style:N7},w)},Tst=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ist(){const{userSelectionActive:e,userSelectionRect:t}=hs(Tst,hl);return e&&t?ct.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function vX(e,t){const r=t.parentNode||t.parentId,a=e.find(n=>n.id===r);if(a){const n=t.position.x+t.width-a.width,s=t.position.y+t.height-a.height;if(n>0||s>0||t.position.x<0||t.position.y<0){if(a.style={...a.style},a.style.width=a.style.width??a.width,a.style.height=a.style.height??a.height,n>0&&(a.style.width+=n),s>0&&(a.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);a.position.x=a.position.x-o,a.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);a.position.y=a.position.y-o,a.style.height+=o,t.position.y=0}a.width=a.style.width,a.height=a.style.height}}}function Tde(e,t){if(e.some(a=>a.type==="reset"))return e.filter(a=>a.type==="reset").map(a=>a.item);const r=e.filter(a=>a.type==="add").map(a=>a.item);return t.reduce((a,n)=>{const s=e.filter(l=>l.id===n.id);if(s.length===0)return a.push(n),a;const o={...n};for(const l of s)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&vX(a,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&vX(a,o);break}case"remove":return a}return a.push(o),a},r)}function Ide(e,t){return Tde(e,t)}function Ost(e,t){return Tde(e,t)}const om=(e,t)=>({id:e,type:"select",selected:t});function Mv(e,t){return e.reduce((r,a)=>{const n=t.includes(a.id);return!a.selected&&n?(a.selected=!0,r.push(om(a.id,!0))):a.selected&&!n&&(a.selected=!1,r.push(om(a.id,!1))),r},[])}const m6=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},Fst=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ode=N.memo(({isSelecting:e,selectionMode:t=aN.Full,panOnDrag:r,onSelectionStart:a,onSelectionEnd:n,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=N.useRef(null),m=oo(),g=N.useRef(0),x=N.useRef(0),v=N.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:j}=hs(Fst,hl),O=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},B=M=>{s==null||s(M),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},T=M=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){M.preventDefault();return}o==null||o(M)},C=l?M=>l(M):void 0,_=M=>{const{resetSelectedElements:U,domNode:z}=m.getState();if(v.current=z==null?void 0:z.getBoundingClientRect(),!w||!e||M.button!==0||M.target!==h.current||!v.current)return;const{x:Q,y:q}=Pm(M,v.current);U(),m.setState({userSelectionRect:{width:0,height:0,startX:Q,startY:q,x:Q,y:q}}),a==null||a(M)},S=M=>{const{userSelectionRect:U,nodeInternals:z,edges:Q,transform:q,onNodesChange:V,onEdgesChange:Y,nodeOrigin:K,getNodes:J}=m.getState();if(!e||!v.current||!U)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const R=Pm(M,v.current),F=U.startX??0,W=U.startY??0,X={...U,x:R.x<F?R.x:F,y:R.y<W?R.y:W,width:Math.abs(R.x-F),height:Math.abs(R.y-W)},ne=J(),le=Ade(z,X,q,t===aN.Partial,!0,K),ie=hde(le,Q).map(Ae=>Ae.id),ae=le.map(Ae=>Ae.id);if(g.current!==ae.length){g.current=ae.length;const Ae=Mv(ne,ae);Ae.length&&(V==null||V(Ae))}if(x.current!==ie.length){x.current=ie.length;const Ae=Mv(Q,ie);Ae.length&&(Y==null||Y(Ae))}m.setState({userSelectionRect:X})},L=M=>{if(M.button!==0)return;const{userSelectionRect:U}=m.getState();!y&&U&&M.target===h.current&&(B==null||B(M)),m.setState({nodesSelectionActive:g.current>0}),O(),n==null||n(M)},P=M=>{y&&(m.setState({nodesSelectionActive:g.current>0}),n==null||n(M)),O()},k=w&&(e||y);return ct.createElement("div",{className:Pl(["react-flow__pane",{dragging:j,selection:e}]),onClick:k?void 0:m6(B,h),onContextMenu:m6(T,h),onWheel:m6(C,h),onMouseEnter:k?void 0:c,onMouseDown:k?_:void 0,onMouseMove:k?S:u,onMouseUp:k?L:void 0,onMouseLeave:k?P:d,ref:h,style:N7},f,ct.createElement(Ist,null))});Ode.displayName="Pane";function Fde(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const a=t.get(r);return a?a.selected?!0:Fde(a,t):!1}function bX(e,t,r){let a=e;do{if(a!=null&&a.matches(t))return!0;if(a===r.current)return!1;a=a.parentElement}while(a);return!1}function Dst(e,t,r,a){return Array.from(e.values()).filter(n=>(n.selected||n.id===a)&&(!n.parentNode||n.parentId||!Fde(n,e))&&(n.draggable||t&&typeof n.draggable>"u")).map(n=>{var s,o;return{id:n.id,position:n.position||{x:0,y:0},positionAbsolute:n.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=n.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((o=n.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:n.extent,parentNode:n.parentNode||n.parentId,parentId:n.parentNode||n.parentId,width:n.width,height:n.height,expandParent:n.expandParent}})}function Pst(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Dde(e,t,r,a,n=[0,0],s){const o=Pst(e,e.extent||a);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:m}=cb(f,n).positionAbsolute;l=f&&Ju(h)&&Ju(m)&&Ju(f.width)&&Ju(f.height)?[[h+e.width*n[0],m+e.height*n[1]],[h+f.width-e.width+e.width*n[0],m+f.height-e.height+e.height*n[1]]]:l}else s==null||s("005",e0.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:m}=cb(f,n).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=r.get(c);u=cb(f,n).positionAbsolute}const d=l&&l!=="parent"?h7(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function p6({nodeId:e,dragItems:t,nodeInternals:r}){const a=t.map(n=>({...r.get(n.id),position:n.position,positionAbsolute:n.positionAbsolute}));return[e?a.find(n=>n.id===e):a[0],a]}const yX=(e,t,r,a)=>{const n=t.querySelectorAll(e);if(!n||!n.length)return null;const s=Array.from(n),o=t.getBoundingClientRect(),l={x:o.width*a[0],y:o.height*a[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/r,y:(u.top-o.top-l.y)/r,...A7(c)}})};function Gy(e,t,r){return r===void 0?r:a=>{const n=t().nodeInternals.get(e);n&&r(a,{...n})}}function DD({id:e,store:t,unselect:r=!1,nodeRef:a}){const{addSelectedNodes:n,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",e0.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=a==null?void 0:a.current)==null?void 0:d.blur()})):n([e])}function Rst(){const e=oo();return N.useCallback(({sourceEvent:r})=>{const{transform:a,snapGrid:n,snapToGrid:s}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,c={x:(o-a[0])/a[2],y:(l-a[1])/a[2]};return{xSnapped:s?n[0]*Math.round(c.x/n[0]):c.x,ySnapped:s?n[1]*Math.round(c.y/n[1]):c.y,...c}},[])}function g6(e){return(t,r,a)=>e==null?void 0:e(t,a)}function Pde({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:a,nodeId:n,isSelectable:s,selectNodesOnDrag:o}){const l=oo(),[c,u]=N.useState(!1),d=N.useRef([]),f=N.useRef({x:null,y:null}),h=N.useRef(0),m=N.useRef(null),g=N.useRef({x:0,y:0}),x=N.useRef(null),v=N.useRef(!1),y=N.useRef(!1),w=N.useRef(!1),j=Rst();return N.useEffect(()=>{if(e!=null&&e.current){const O=Wu(e.current),B=({x:_,y:S})=>{const{nodeInternals:L,onNodeDrag:P,onSelectionDrag:k,updateNodePositions:M,nodeExtent:U,snapGrid:z,snapToGrid:Q,nodeOrigin:q,onError:V}=l.getState();f.current={x:_,y:S};let Y=!1,K={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&U){const R=b7(d.current,q);K=m7(R)}if(d.current=d.current.map(R=>{const F={x:_-R.distance.x,y:S-R.distance.y};Q&&(F.x=z[0]*Math.round(F.x/z[0]),F.y=z[1]*Math.round(F.y/z[1]));const W=[[U[0][0],U[0][1]],[U[1][0],U[1][1]]];d.current.length>1&&U&&!R.extent&&(W[0][0]=R.positionAbsolute.x-K.x+U[0][0],W[1][0]=R.positionAbsolute.x+(R.width??0)-K.x2+U[1][0],W[0][1]=R.positionAbsolute.y-K.y+U[0][1],W[1][1]=R.positionAbsolute.y+(R.height??0)-K.y2+U[1][1]);const X=Dde(R,F,L,W,q,V);return Y=Y||R.position.x!==X.position.x||R.position.y!==X.position.y,R.position=X.position,R.positionAbsolute=X.positionAbsolute,R}),!Y)return;M(d.current,!0,!0),u(!0);const J=n?P:g6(k);if(J&&x.current){const[R,F]=p6({nodeId:n,dragItems:d.current,nodeInternals:L});J(x.current,R,F)}},T=()=>{if(!m.current)return;const[_,S]=nde(g.current,m.current);if(_!==0||S!==0){const{transform:L,panBy:P}=l.getState();f.current.x=(f.current.x??0)-_/L[2],f.current.y=(f.current.y??0)-S/L[2],P({x:_,y:S})&&B(f.current)}h.current=requestAnimationFrame(T)},C=_=>{var q;const{nodeInternals:S,multiSelectionActive:L,nodesDraggable:P,unselectNodesAndEdges:k,onNodeDragStart:M,onSelectionDragStart:U}=l.getState();y.current=!0;const z=n?M:g6(U);(!o||!s)&&!L&&n&&((q=S.get(n))!=null&&q.selected||k()),n&&s&&o&&DD({id:n,store:l,nodeRef:e});const Q=j(_);if(f.current=Q,d.current=Dst(S,P,Q,n),z&&d.current){const[V,Y]=p6({nodeId:n,dragItems:d.current,nodeInternals:S});z(_.sourceEvent,V,Y)}};if(t)O.on(".drag",null);else{const _=xat().on("start",S=>{const{domNode:L,nodeDragThreshold:P}=l.getState();P===0&&C(S),w.current=!1;const k=j(S);f.current=k,m.current=(L==null?void 0:L.getBoundingClientRect())||null,g.current=Pm(S.sourceEvent,m.current)}).on("drag",S=>{var M,U;const L=j(S),{autoPanOnNodeDrag:P,nodeDragThreshold:k}=l.getState();if(S.sourceEvent.type==="touchmove"&&S.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!v.current&&y.current&&P&&(v.current=!0,T()),!y.current){const z=L.xSnapped-(((M=f==null?void 0:f.current)==null?void 0:M.x)??0),Q=L.ySnapped-(((U=f==null?void 0:f.current)==null?void 0:U.y)??0);Math.sqrt(z*z+Q*Q)>k&&C(S)}(f.current.x!==L.xSnapped||f.current.y!==L.ySnapped)&&d.current&&y.current&&(x.current=S.sourceEvent,g.current=Pm(S.sourceEvent,m.current),B(L))}}).on("end",S=>{if(!(!y.current||w.current)&&(u(!1),v.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:L,nodeInternals:P,onNodeDragStop:k,onSelectionDragStop:M}=l.getState(),U=n?k:g6(M);if(L(d.current,!1,!1),U){const[z,Q]=p6({nodeId:n,dragItems:d.current,nodeInternals:P});U(S.sourceEvent,z,Q)}}}).filter(S=>{const L=S.target;return!S.button&&(!r||!bX(L,`.${r}`,e))&&(!a||bX(L,a,e))});return O.call(_),()=>{O.on(".drag",null)}}}},[e,t,r,a,s,l,n,o,j]),c}function Rde(){const e=oo();return N.useCallback(r=>{const{nodeInternals:a,nodeExtent:n,updateNodePositions:s,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=l?c[0]:5,m=l?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,v=r.y*m*g,y=f.map(w=>{if(w.positionAbsolute){const j={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+v};l&&(j.x=c[0]*Math.round(j.x/c[0]),j.y=c[1]*Math.round(j.y/c[1]));const{positionAbsolute:O,position:B}=Dde(w,j,a,n,void 0,u);w.position=B,w.positionAbsolute=O}return w});s(y,!0,!1)},[])}const ub={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var qy=e=>{const t=({id:r,type:a,data:n,xPos:s,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:w,isSelectable:j,isConnectable:O,isFocusable:B,selectNodesOnDrag:T,sourcePosition:C,targetPosition:_,hidden:S,resizeObserver:L,dragHandle:P,zIndex:k,isParent:M,noDragClassName:U,noPanClassName:z,initialized:Q,disableKeyboardA11y:q,ariaLabel:V,rfId:Y,hasHandleBounds:K})=>{const J=oo(),R=N.useRef(null),F=N.useRef(null),W=N.useRef(C),X=N.useRef(_),ne=N.useRef(a),le=j||w||d||f||h||m,ie=Rde(),ae=Gy(r,J.getState,f),Ae=Gy(r,J.getState,h),ke=Gy(r,J.getState,m),re=Gy(r,J.getState,g),Re=Gy(r,J.getState,x),Le=Ce=>{const{nodeDragThreshold:me}=J.getState();if(j&&(!T||!w||me>0)&&DD({id:r,store:J,nodeRef:R}),d){const ye=J.getState().nodeInternals.get(r);ye&&d(Ce,{...ye})}},Te=Ce=>{if(!BD(Ce)&&!q)if(ide.includes(Ce.key)&&j){const me=Ce.key==="Escape";DD({id:r,store:J,unselect:me,nodeRef:R})}else w&&u&&Object.prototype.hasOwnProperty.call(ub,Ce.key)&&(J.setState({ariaLiveMessage:`Moved selected node ${Ce.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),ie({x:ub[Ce.key].x,y:ub[Ce.key].y,isShiftPressed:Ce.shiftKey}))};N.useEffect(()=>()=>{F.current&&(L==null||L.unobserve(F.current),F.current=null)},[]),N.useEffect(()=>{if(R.current&&!S){const Ce=R.current;(!Q||!K||F.current!==Ce)&&(F.current&&(L==null||L.unobserve(F.current)),L==null||L.observe(Ce),F.current=Ce)}},[S,Q,K]),N.useEffect(()=>{const Ce=ne.current!==a,me=W.current!==C,ye=X.current!==_;R.current&&(Ce||me||ye)&&(Ce&&(ne.current=a),me&&(W.current=C),ye&&(X.current=_),J.getState().updateNodeDimensions([{id:r,nodeElement:R.current,forceUpdate:!0}]))},[r,a,C,_]);const de=Pde({nodeRef:R,disabled:S||!w,noDragClassName:U,handleSelector:P,nodeId:r,isSelectable:j,selectNodesOnDrag:T});return S?null:ct.createElement("div",{className:Pl(["react-flow__node",`react-flow__node-${a}`,{[z]:w},y,{selected:u,selectable:j,parent:M,dragging:de}]),ref:R,style:{zIndex:k,transform:`translate(${l}px,${c}px)`,pointerEvents:le?"all":"none",visibility:Q?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ae,onMouseMove:Ae,onMouseLeave:ke,onContextMenu:re,onClick:Le,onDoubleClick:Re,onKeyDown:B?Te:void 0,tabIndex:B?0:void 0,role:B?"button":void 0,"aria-describedby":q?void 0:`${jde}-${Y}`,"aria-label":V},ct.createElement(Ynt,{value:r},ct.createElement(e,{id:r,data:n,type:a,xPos:s,yPos:o,selected:u,isConnectable:O,sourcePosition:C,targetPosition:_,dragging:de,dragHandle:P,zIndex:k})))};return t.displayName="NodeWrapper",N.memo(t)};const Lst=e=>{const t=e.getNodes().filter(r=>r.selected);return{...b7(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Mst({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const a=oo(),{width:n,height:s,x:o,y:l,transformString:c,userSelectionActive:u}=hs(Lst,hl),d=Rde(),f=N.useRef(null);if(N.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),Pde({nodeRef:f}),u||!n||!s)return null;const h=e?g=>{const x=a.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(ub,g.key)&&d({x:ub[g.key].x,y:ub[g.key].y,isShiftPressed:g.shiftKey})};return ct.createElement("div",{className:Pl(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},ct.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:n,height:s,top:l,left:o}}))}var Ust=N.memo(Mst);const Qst=e=>e.nodesSelectionActive,Lde=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:n,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:j,zoomOnScroll:O,zoomOnPinch:B,panOnScroll:T,panOnScrollSpeed:C,panOnScrollMode:_,zoomOnDoubleClick:S,panOnDrag:L,defaultViewport:P,translateExtent:k,minZoom:M,maxZoom:U,preventScrolling:z,onSelectionContextMenu:Q,noWheelClassName:q,noPanClassName:V,disableKeyboardA11y:Y})=>{const K=hs(Qst),J=nN(f),R=nN(y),F=R||L,W=R||T,X=J||h&&F!==!0;return jst({deleteKeyCode:l,multiSelectionKeyCode:v}),ct.createElement(Bst,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:j,zoomOnScroll:O,zoomOnPinch:B,panOnScroll:W,panOnScrollSpeed:C,panOnScrollMode:_,zoomOnDoubleClick:S,panOnDrag:!J&&F,defaultViewport:P,translateExtent:k,minZoom:M,maxZoom:U,zoomActivationKeyCode:w,preventScrolling:z,noWheelClassName:q,noPanClassName:V},ct.createElement(Ode,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:n,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:F,isSelecting:!!X,selectionMode:m},e,K&&ct.createElement(Ust,{onSelectionContextMenu:Q,noPanClassName:V,disableKeyboardA11y:Y})))};Lde.displayName="FlowRenderer";var Hst=N.memo(Lde);function zst(e){return hs(N.useCallback(r=>e?Ade(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function Vst(e){const t={input:qy(e.input||wde),default:qy(e.default||FD),output:qy(e.output||Ede),group:qy(e.group||w7)},r={},a=Object.keys(e).filter(n=>!["input","default","output","group"].includes(n)).reduce((n,s)=>(n[s]=qy(e[s]||FD),n),r);return{...t,...a}}const $st=({x:e,y:t,width:r,height:a,origin:n})=>!r||!a?{x:e,y:t}:n[0]<0||n[1]<0||n[0]>1||n[1]>1?{x:e,y:t}:{x:e-r*n[0],y:t-a*n[1]},Gst=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Mde=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:a,elementsSelectable:n,updateNodeDimensions:s,onError:o}=hs(Gst,hl),l=zst(e.onlyRenderVisibleElements),c=N.useRef(),u=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return N.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),ct.createElement("div",{className:"react-flow__nodes",style:N7},l.map(d=>{var B,T,C;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",e0.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||n&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),v=!!(d.focusable||a&&typeof d.focusable>"u"),y=e.nodeExtent?h7(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,j=(y==null?void 0:y.y)??0,O=$st({x:w,y:j,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return ct.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||Nr.Bottom,targetPosition:d.targetPosition||Nr.Top,hidden:d.hidden,xPos:w,yPos:j,xPosOrigin:O.x,yPosOrigin:O.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((B=d[Is])==null?void 0:B.z)??0,isParent:!!((T=d[Is])!=null&&T.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[Is])!=null&&C.handleBounds)})}))};Mde.displayName="NodeRenderer";var qst=N.memo(Mde);const Kst=(e,t,r)=>r===Nr.Left?e-t:r===Nr.Right?e+t:e,Wst=(e,t,r)=>r===Nr.Top?e-t:r===Nr.Bottom?e+t:e,wX="react-flow__edgeupdater",NX=({position:e,centerX:t,centerY:r,radius:a=10,onMouseDown:n,onMouseEnter:s,onMouseOut:o,type:l})=>ct.createElement("circle",{onMouseDown:n,onMouseEnter:s,onMouseOut:o,className:Pl([wX,`${wX}-${l}`]),cx:Kst(t,a,e),cy:Wst(r,a,e),r:a,stroke:"transparent",fill:"transparent"}),Xst=()=>!0;var ov=e=>{const t=({id:r,className:a,type:n,data:s,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:w,sourceX:j,sourceY:O,targetX:B,targetY:T,sourcePosition:C,targetPosition:_,elementsSelectable:S,hidden:L,sourceHandleId:P,targetHandleId:k,onContextMenu:M,onMouseEnter:U,onMouseMove:z,onMouseLeave:Q,reconnectRadius:q,onReconnect:V,onReconnectStart:Y,onReconnectEnd:K,markerEnd:J,markerStart:R,rfId:F,ariaLabel:W,isFocusable:X,isReconnectable:ne,pathOptions:le,interactionWidth:ie,disableKeyboardA11y:ae})=>{const Ae=N.useRef(null),[ke,re]=N.useState(!1),[Re,Le]=N.useState(!1),Te=oo(),de=N.useMemo(()=>`url('#${ID(R,F)}')`,[R,F]),Ce=N.useMemo(()=>`url('#${ID(J,F)}')`,[J,F]);if(L)return null;const me=gt=>{var $r;const{edges:Ve,addSelectedEdges:Bt,unselectNodesAndEdges:dr,multiSelectionActive:er}=Te.getState(),Er=Ve.find(br=>br.id===r);Er&&(S&&(Te.setState({nodesSelectionActive:!1}),Er.selected&&er?(dr({nodes:[],edges:[Er]}),($r=Ae.current)==null||$r.blur()):Bt([r])),o&&o(gt,Er))},ye=$y(r,Te.getState,l),oe=$y(r,Te.getState,M),fe=$y(r,Te.getState,U),be=$y(r,Te.getState,z),Pe=$y(r,Te.getState,Q),$e=(gt,Ve)=>{if(gt.button!==0)return;const{edges:Bt,isValidConnection:dr}=Te.getState(),er=Ve?w:y,Er=(Ve?k:P)||null,$r=Ve?"target":"source",br=dr||Xst,kn=Ve,Pr=Bt.find(Rr=>Rr.id===r);Le(!0),Y==null||Y(gt,Pr,$r);const Pa=Rr=>{Le(!1),K==null||K(Rr,Pr,$r)};xde({event:gt,handleId:Er,nodeId:er,onConnect:Rr=>V==null?void 0:V(Pr,Rr),isTarget:kn,getState:Te.getState,setState:Te.setState,isValidConnection:br,edgeUpdaterType:$r,onReconnectEnd:Pa})},Ke=gt=>$e(gt,!0),nt=gt=>$e(gt,!1),He=()=>re(!0),it=()=>re(!1),xt=!S&&!o,Et=gt=>{var Ve;if(!ae&&ide.includes(gt.key)&&S){const{unselectNodesAndEdges:Bt,addSelectedEdges:dr,edges:er}=Te.getState();gt.key==="Escape"?((Ve=Ae.current)==null||Ve.blur(),Bt({edges:[er.find($r=>$r.id===r)]})):dr([r])}};return ct.createElement("g",{className:Pl(["react-flow__edge",`react-flow__edge-${n}`,a,{selected:c,animated:u,inactive:xt,updating:ke}]),onClick:me,onDoubleClick:ye,onContextMenu:oe,onMouseEnter:fe,onMouseMove:be,onMouseLeave:Pe,onKeyDown:X?Et:void 0,tabIndex:X?0:void 0,role:X?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":W===null?void 0:W||`Edge from ${y} to ${w}`,"aria-describedby":X?`${kde}-${F}`:void 0,ref:Ae},!Re&&ct.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:v,sourceX:j,sourceY:O,targetX:B,targetY:T,sourcePosition:C,targetPosition:_,sourceHandleId:P,targetHandleId:k,markerStart:de,markerEnd:Ce,pathOptions:le,interactionWidth:ie}),ne&&ct.createElement(ct.Fragment,null,(ne==="source"||ne===!0)&&ct.createElement(NX,{position:C,centerX:j,centerY:O,radius:q,onMouseDown:Ke,onMouseEnter:He,onMouseOut:it,type:"source"}),(ne==="target"||ne===!0)&&ct.createElement(NX,{position:_,centerX:B,centerY:T,radius:q,onMouseDown:nt,onMouseEnter:He,onMouseOut:it,type:"target"})))};return t.displayName="EdgeWrapper",N.memo(t)};function Yst(e){const t={default:ov(e.default||u_),straight:ov(e.bezier||x7),step:ov(e.step||g7),smoothstep:ov(e.step||B4),simplebezier:ov(e.simplebezier||p7)},r={},a=Object.keys(e).filter(n=>!["default","bezier"].includes(n)).reduce((n,s)=>(n[s]=ov(e[s]||u_),n),r);return{...t,...a}}function EX(e,t,r=null){const a=((r==null?void 0:r.x)||0)+t.x,n=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,o=(r==null?void 0:r.height)||t.height;switch(e){case Nr.Top:return{x:a+s/2,y:n};case Nr.Right:return{x:a+s,y:n+o/2};case Nr.Bottom:return{x:a+s/2,y:n+o};case Nr.Left:return{x:a,y:n+o/2}}}function CX(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const Jst=(e,t,r,a,n,s)=>{const o=EX(r,e,t),l=EX(s,a,n);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function Zst({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:a,targetWidth:n,targetHeight:s,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+n),y2:Math.max(e.y+a,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=m7({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function jX(e){var a,n,s,o,l;const t=((a=e==null?void 0:e[Is])==null?void 0:a.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((n=e==null?void 0:e.positionAbsolute)==null?void 0:n.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const eit=[{level:0,isMaxLevel:!0,edges:[]}];function tit(e,t,r=!1){let a=-1;const n=e.reduce((o,l)=>{var d,f;const c=Ju(l.zIndex);let u=c?l.zIndex:0;if(r){const h=t.get(l.target),m=t.get(l.source),g=l.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[Is])==null?void 0:d.z)||0,((f=h==null?void 0:h[Is])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(g?x:0)}return o[u]?o[u].push(l):o[u]=[l],a=u>a?u:a,o},{}),s=Object.entries(n).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===a}});return s.length===0?eit:s}function rit(e,t,r){const a=hs(N.useCallback(n=>e?n.edges.filter(s=>{const o=t.get(s.source),l=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&Zst({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t]));return tit(a,t,r)}const ait=({color:e="none",strokeWidth:t=1})=>ct.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),nit=({color:e="none",strokeWidth:t=1})=>ct.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),kX={[c_.Arrow]:ait,[c_.ArrowClosed]:nit};function sit(e){const t=oo();return N.useMemo(()=>{var n,s;return Object.prototype.hasOwnProperty.call(kX,e)?kX[e]:((s=(n=t.getState()).onError)==null||s.call(n,"009",e0.error009(e)),null)},[e])}const iit=({id:e,type:t,color:r,width:a=12.5,height:n=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=sit(t);return c?ct.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${n}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},ct.createElement(c,{color:r,strokeWidth:o})):null},oit=({defaultColor:e,rfId:t})=>r=>{const a=[];return r.edges.reduce((n,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=ID(o,t);a.includes(l)||(n.push({id:l,color:o.color||e,...o}),a.push(l))}}),n),[]).sort((n,s)=>n.id.localeCompare(s.id))},Ude=({defaultColor:e,rfId:t})=>{const r=hs(N.useCallback(oit({defaultColor:e,rfId:t}),[e,t]),(a,n)=>!(a.length!==n.length||a.some((s,o)=>s.id!==n[o].id)));return ct.createElement("defs",null,r.map(a=>ct.createElement(iit,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient})))};Ude.displayName="MarkerDefinitions";var lit=N.memo(Ude);const cit=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Qde=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:a,edgeTypes:n,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:j,elementsSelectable:O,width:B,height:T,connectionMode:C,nodeInternals:_,onError:S}=hs(cit,hl),L=rit(t,_,r);return B?ct.createElement(ct.Fragment,null,L.map(({level:P,edges:k,isMaxLevel:M})=>ct.createElement("svg",{key:P,style:{zIndex:P},width:B,height:T,className:"react-flow__edges react-flow__container"},M&&ct.createElement(lit,{defaultColor:e,rfId:a}),ct.createElement("g",null,k.map(U=>{const[z,Q,q]=jX(_.get(U.source)),[V,Y,K]=jX(_.get(U.target));if(!q||!K)return null;let J=U.type||"default";n[J]||(S==null||S("011",e0.error011(J)),J="default");const R=n[J]||n.default,F=C===Kg.Strict?Y.target:(Y.target??[]).concat(Y.source??[]),W=CX(Q.source,U.sourceHandle),X=CX(F,U.targetHandle),ne=(W==null?void 0:W.position)||Nr.Bottom,le=(X==null?void 0:X.position)||Nr.Top,ie=!!(U.focusable||w&&typeof U.focusable>"u"),ae=U.reconnectable||U.updatable,Ae=typeof h<"u"&&(ae||j&&typeof ae>"u");if(!W||!X)return S==null||S("008",e0.error008(W,U)),null;const{sourceX:ke,sourceY:re,targetX:Re,targetY:Le}=Jst(z,W,ne,V,X,le);return ct.createElement(R,{key:U.id,id:U.id,className:Pl([U.className,s]),type:J,data:U.data,selected:!!U.selected,animated:!!U.animated,hidden:!!U.hidden,label:U.label,labelStyle:U.labelStyle,labelShowBg:U.labelShowBg,labelBgStyle:U.labelBgStyle,labelBgPadding:U.labelBgPadding,labelBgBorderRadius:U.labelBgBorderRadius,style:U.style,source:U.source,target:U.target,sourceHandleId:U.sourceHandle,targetHandleId:U.targetHandle,markerEnd:U.markerEnd,markerStart:U.markerStart,sourceX:ke,sourceY:re,targetX:Re,targetY:Le,sourcePosition:ne,targetPosition:le,elementsSelectable:O,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:a,ariaLabel:U.ariaLabel,isFocusable:ie,isReconnectable:Ae,pathOptions:"pathOptions"in U?U.pathOptions:void 0,interactionWidth:U.interactionWidth,disableKeyboardA11y:y})})))),v):null};Qde.displayName="EdgeRenderer";var uit=N.memo(Qde);const dit=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function fit({children:e}){const t=hs(dit);return ct.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Ait(e){const t=T4(),r=N.useRef(!1);N.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const hit={[Nr.Left]:Nr.Right,[Nr.Right]:Nr.Left,[Nr.Top]:Nr.Bottom,[Nr.Bottom]:Nr.Top},Hde=({nodeId:e,handleType:t,style:r,type:a=pm.Bezier,CustomComponent:n,connectionStatus:s})=>{var T,C,_;const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=hs(N.useCallback(S=>({fromNode:S.nodeInternals.get(e),handleId:S.connectionHandleId,toX:(S.connectionPosition.x-S.transform[0])/S.transform[2],toY:(S.connectionPosition.y-S.transform[1])/S.transform[2],connectionMode:S.connectionMode}),[e]),hl),f=(T=o==null?void 0:o[Is])==null?void 0:T.handleBounds;let h=f==null?void 0:f[t];if(d===Kg.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!h)return null;const m=l?h.find(S=>S.id===l):h[0],g=m?m.x+m.width/2:(o.width??0)/2,x=m?m.y+m.height/2:o.height??0,v=(((C=o.positionAbsolute)==null?void 0:C.x)??0)+g,y=(((_=o.positionAbsolute)==null?void 0:_.y)??0)+x,w=m==null?void 0:m.position,j=w?hit[w]:null;if(!w||!j)return null;if(n)return ct.createElement(n,{connectionLineType:a,connectionLineStyle:r,fromNode:o,fromHandle:m,fromX:v,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:j,connectionStatus:s});let O="";const B={sourceX:v,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:j};return a===pm.Bezier?[O]=dde(B):a===pm.Step?[O]=TD({...B,borderRadius:0}):a===pm.SmoothStep?[O]=TD(B):a===pm.SimpleBezier?[O]=ude(B):O=`M${v},${y} ${c},${u}`,ct.createElement("path",{d:O,fill:"none",className:"react-flow__connection-path",style:r})};Hde.displayName="ConnectionLine";const mit=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function pit({containerStyle:e,style:t,type:r,component:a}){const{nodeId:n,handleType:s,nodesConnectable:o,width:l,height:c,connectionStatus:u}=hs(mit,hl);return!(n&&s&&l&&o)?null:ct.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},ct.createElement("g",{className:Pl(["react-flow__connection",u])},ct.createElement(Hde,{nodeId:n,handleType:s,style:t,type:r,CustomComponent:a,connectionStatus:u})))}function _X(e,t){return N.useRef(null),oo(),N.useMemo(()=>t(e),[e])}const zde=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:a,onMoveEnd:n,onInit:s,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:j,connectionLineContainerStyle:O,selectionKeyCode:B,selectionOnDrag:T,selectionMode:C,multiSelectionKeyCode:_,panActivationKeyCode:S,zoomActivationKeyCode:L,deleteKeyCode:P,onlyRenderVisibleElements:k,elementsSelectable:M,selectNodesOnDrag:U,defaultViewport:z,translateExtent:Q,minZoom:q,maxZoom:V,preventScrolling:Y,defaultMarkerColor:K,zoomOnScroll:J,zoomOnPinch:R,panOnScroll:F,panOnScrollSpeed:W,panOnScrollMode:X,zoomOnDoubleClick:ne,panOnDrag:le,onPaneClick:ie,onPaneMouseEnter:ae,onPaneMouseMove:Ae,onPaneMouseLeave:ke,onPaneScroll:re,onPaneContextMenu:Re,onEdgeContextMenu:Le,onEdgeMouseEnter:Te,onEdgeMouseMove:de,onEdgeMouseLeave:Ce,onReconnect:me,onReconnectStart:ye,onReconnectEnd:oe,reconnectRadius:fe,noDragClassName:be,noWheelClassName:Pe,noPanClassName:$e,elevateEdgesOnSelect:Ke,disableKeyboardA11y:nt,nodeOrigin:He,nodeExtent:it,rfId:xt})=>{const Et=_X(e,Vst),gt=_X(t,Yst);return Ait(s),ct.createElement(Hst,{onPaneClick:ie,onPaneMouseEnter:ae,onPaneMouseMove:Ae,onPaneMouseLeave:ke,onPaneContextMenu:Re,onPaneScroll:re,deleteKeyCode:P,selectionKeyCode:B,selectionOnDrag:T,selectionMode:C,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:_,panActivationKeyCode:S,zoomActivationKeyCode:L,elementsSelectable:M,onMove:r,onMoveStart:a,onMoveEnd:n,zoomOnScroll:J,zoomOnPinch:R,zoomOnDoubleClick:ne,panOnScroll:F,panOnScrollSpeed:W,panOnScrollMode:X,panOnDrag:le,defaultViewport:z,translateExtent:Q,minZoom:q,maxZoom:V,onSelectionContextMenu:g,preventScrolling:Y,noDragClassName:be,noWheelClassName:Pe,noPanClassName:$e,disableKeyboardA11y:nt},ct.createElement(fit,null,ct.createElement(uit,{edgeTypes:gt,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:k,onEdgeContextMenu:Le,onEdgeMouseEnter:Te,onEdgeMouseMove:de,onEdgeMouseLeave:Ce,onReconnect:me,onReconnectStart:ye,onReconnectEnd:oe,reconnectRadius:fe,defaultMarkerColor:K,noPanClassName:$e,elevateEdgesOnSelect:!!Ke,disableKeyboardA11y:nt,rfId:xt},ct.createElement(pit,{style:w,type:y,component:j,containerStyle:O})),ct.createElement("div",{className:"react-flow__edgelabel-renderer"}),ct.createElement(qst,{nodeTypes:Et,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:U,onlyRenderVisibleElements:k,noPanClassName:$e,noDragClassName:be,disableKeyboardA11y:nt,nodeOrigin:He,nodeExtent:it,rfId:xt})))};zde.displayName="GraphView";var git=N.memo(zde);const PD=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],em={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:PD,nodeExtent:PD,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Kg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:$nt,isValidConnection:void 0},xit=()=>Btt((e,t)=>({...em,setNodes:r=>{const{nodeInternals:a,nodeOrigin:n,elevateNodesOnSelect:s}=t();e({nodeInternals:h6(r,a,n,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:a={}}=t();e({edges:r.map(n=>({...a,...n}))})},setDefaultNodesAndEdges:(r,a)=>{const n=typeof r<"u",s=typeof a<"u",o=n?h6(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?a:[],hasDefaultNodes:n,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:a,nodeInternals:n,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),m=r.reduce((x,v)=>{const y=n.get(v.id);if(y!=null&&y.hidden)n.set(y.id,{...y,[Is]:{...y[Is],handleBounds:void 0}});else if(y){const w=A7(v.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||v.forceUpdate))&&(n.set(y.id,{...y,[Is]:{...y[Is],handleBounds:{source:yX(".source",v.nodeElement,h,u),target:yX(".target",v.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);Sde(n,u);const g=o||s&&!o&&Bde(t,{initial:!0,...l});e({nodeInternals:new Map(n),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(a==null||a(m))},updateNodePositions:(r,a=!0,n=!1)=>{const{triggerNodeChanges:s}=t(),o=r.map(l=>{const c={id:l.id,type:"position",dragging:n};return a&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});s(o)},triggerNodeChanges:r=>{const{onNodesChange:a,nodeInternals:n,hasDefaultNodes:s,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=Ide(r,l()),d=h6(u,n,o,c);e({nodeInternals:d})}a==null||a(r)}},addSelectedNodes:r=>{const{multiSelectionActive:a,edges:n,getNodes:s}=t();let o,l=null;a?o=r.map(c=>om(c,!0)):(o=Mv(s(),r),l=Mv(n,[])),r5({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:a,edges:n,getNodes:s}=t();let o,l=null;a?o=r.map(c=>om(c,!0)):(o=Mv(n,r),l=Mv(s(),[])),r5({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:a}={})=>{const{edges:n,getNodes:s}=t(),o=r||s(),l=a||n,c=o.map(d=>(d.selected=!1,om(d.id,!1))),u=l.map(d=>om(d.id,!1));r5({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:a,maxZoom:n}=t();a==null||a.scaleExtent([r,n]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:a,minZoom:n}=t();a==null||a.scaleExtent([n,r]),e({maxZoom:r})},setTranslateExtent:r=>{var a;(a=t().d3Zoom)==null||a.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:a}=t(),s=a().filter(l=>l.selected).map(l=>om(l.id,!1)),o=r.filter(l=>l.selected).map(l=>om(l.id,!1));r5({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:a}=t();a.forEach(n=>{n.positionAbsolute=h7(n.position,r)}),e({nodeExtent:r,nodeInternals:new Map(a)})},panBy:r=>{const{transform:a,width:n,height:s,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!r.x&&!r.y)return!1;const u=Dm.translate(a[0]+r.x,a[1]+r.y).scale(a[2]),d=[[0,0],[n,s]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(l,f),a[0]!==f.x||a[1]!==f.y||a[2]!==f.k},cancelConnection:()=>e({connectionNodeId:em.connectionNodeId,connectionHandleId:em.connectionHandleId,connectionHandleType:em.connectionHandleType,connectionStatus:em.connectionStatus,connectionStartHandle:em.connectionStartHandle,connectionEndHandle:em.connectionEndHandle}),reset:()=>e({...em})}),Object.is),E7=({children:e})=>{const t=N.useRef(null);return t.current||(t.current=xit()),ct.createElement(Rnt,{value:t.current},e)};E7.displayName="ReactFlowProvider";const Vde=({children:e})=>N.useContext(S4)?ct.createElement(ct.Fragment,null,e):ct.createElement(E7,null,e);Vde.displayName="ReactFlowWrapper";const vit={input:wde,default:FD,output:Ede,group:w7},bit={default:u_,straight:x7,step:g7,smoothstep:B4,simplebezier:p7},yit=[0,0],wit=[15,15],Nit={x:0,y:0,zoom:1},Eit={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},$de=N.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:a,className:n,nodeTypes:s=vit,edgeTypes:o=bit,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:j,onNodeMouseLeave:O,onNodeContextMenu:B,onNodeDoubleClick:T,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:S,onNodesDelete:L,onEdgesDelete:P,onSelectionChange:k,onSelectionDragStart:M,onSelectionDrag:U,onSelectionDragStop:z,onSelectionContextMenu:Q,onSelectionStart:q,onSelectionEnd:V,connectionMode:Y=Kg.Strict,connectionLineType:K=pm.Bezier,connectionLineStyle:J,connectionLineComponent:R,connectionLineContainerStyle:F,deleteKeyCode:W="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:ne=!1,selectionMode:le=aN.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:ae=l_()?"Meta":"Control",zoomActivationKeyCode:Ae=l_()?"Meta":"Control",snapToGrid:ke=!1,snapGrid:re=wit,onlyRenderVisibleElements:Re=!1,selectNodesOnDrag:Le=!0,nodesDraggable:Te,nodesConnectable:de,nodesFocusable:Ce,nodeOrigin:me=yit,edgesFocusable:ye,edgesUpdatable:oe,elementsSelectable:fe,defaultViewport:be=Nit,minZoom:Pe=.5,maxZoom:$e=2,translateExtent:Ke=PD,preventScrolling:nt=!0,nodeExtent:He,defaultMarkerColor:it="#b1b1b7",zoomOnScroll:xt=!0,zoomOnPinch:Et=!0,panOnScroll:gt=!1,panOnScrollSpeed:Ve=.5,panOnScrollMode:Bt=cg.Free,zoomOnDoubleClick:dr=!0,panOnDrag:er=!0,onPaneClick:Er,onPaneMouseEnter:$r,onPaneMouseMove:br,onPaneMouseLeave:kn,onPaneScroll:Pr,onPaneContextMenu:Pa,children:Fn,onEdgeContextMenu:Rr,onEdgeDoubleClick:mr,onEdgeMouseEnter:Yr,onEdgeMouseMove:ps,onEdgeMouseLeave:Ya,onEdgeUpdate:Dn,onEdgeUpdateStart:Rs,onEdgeUpdateEnd:Zt,onReconnect:xa,onReconnectStart:la,onReconnectEnd:Ia,reconnectRadius:Ka=10,edgeUpdaterRadius:Ja=10,onNodesChange:we,onEdgesChange:Ue,noDragClassName:Oe="nodrag",noWheelClassName:De="nowheel",noPanClassName:ge="nopan",fitView:he=!1,fitViewOptions:Be,connectOnClick:Qe=!0,attributionPosition:Fe,proOptions:qe,defaultEdgeOptions:Xe,elevateNodesOnSelect:yt=!0,elevateEdgesOnSelect:wt=!1,disableKeyboardA11y:Ht=!1,autoPanOnConnect:Tt=!0,autoPanOnNodeDrag:Vt=!0,connectionRadius:jr=20,isValidConnection:ea,onError:ta,style:ia,id:gs,nodeDragThreshold:To,...xs},ii)=>{const Ls=gs||"1";return ct.createElement("div",{...xs,style:{...ia,...Eit},ref:ii,className:Pl(["react-flow",n]),"data-testid":"rf__wrapper",id:gs},ct.createElement(Vde,null,ct.createElement(git,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:j,onNodeMouseLeave:O,onNodeContextMenu:B,onNodeDoubleClick:T,nodeTypes:s,edgeTypes:o,connectionLineType:K,connectionLineStyle:J,connectionLineComponent:R,connectionLineContainerStyle:F,selectionKeyCode:X,selectionOnDrag:ne,selectionMode:le,deleteKeyCode:W,multiSelectionKeyCode:ae,panActivationKeyCode:ie,zoomActivationKeyCode:Ae,onlyRenderVisibleElements:Re,selectNodesOnDrag:Le,defaultViewport:be,translateExtent:Ke,minZoom:Pe,maxZoom:$e,preventScrolling:nt,zoomOnScroll:xt,zoomOnPinch:Et,zoomOnDoubleClick:dr,panOnScroll:gt,panOnScrollSpeed:Ve,panOnScrollMode:Bt,panOnDrag:er,onPaneClick:Er,onPaneMouseEnter:$r,onPaneMouseMove:br,onPaneMouseLeave:kn,onPaneScroll:Pr,onPaneContextMenu:Pa,onSelectionContextMenu:Q,onSelectionStart:q,onSelectionEnd:V,onEdgeContextMenu:Rr,onEdgeDoubleClick:mr,onEdgeMouseEnter:Yr,onEdgeMouseMove:ps,onEdgeMouseLeave:Ya,onReconnect:xa??Dn,onReconnectStart:la??Rs,onReconnectEnd:Ia??Zt,reconnectRadius:Ka??Ja,defaultMarkerColor:it,noDragClassName:Oe,noWheelClassName:De,noPanClassName:ge,elevateEdgesOnSelect:wt,rfId:Ls,disableKeyboardA11y:Ht,nodeOrigin:me,nodeExtent:He}),ct.createElement(hst,{nodes:e,edges:t,defaultNodes:r,defaultEdges:a,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:Te,nodesConnectable:de,nodesFocusable:Ce,edgesFocusable:ye,edgesUpdatable:oe,elementsSelectable:fe,elevateNodesOnSelect:yt,minZoom:Pe,maxZoom:$e,nodeExtent:He,onNodesChange:we,onEdgesChange:Ue,snapToGrid:ke,snapGrid:re,connectionMode:Y,translateExtent:Ke,connectOnClick:Qe,defaultEdgeOptions:Xe,fitView:he,fitViewOptions:Be,onNodesDelete:L,onEdgesDelete:P,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:S,onSelectionDrag:U,onSelectionDragStart:M,onSelectionDragStop:z,noPanClassName:ge,nodeOrigin:me,rfId:Ls,autoPanOnConnect:Tt,autoPanOnNodeDrag:Vt,onError:ta,connectionRadius:jr,isValidConnection:ea,nodeDragThreshold:To}),ct.createElement(fst,{onSelectionChange:k}),Fn,ct.createElement(Mnt,{proOptions:qe,position:Fe}),ct.createElement(vst,{rfId:Ls,disableKeyboardA11y:Ht})))});$de.displayName="ReactFlow";function Gde(e){return t=>{const[r,a]=N.useState(t),n=N.useCallback(s=>a(o=>e(s,o)),[]);return[r,a,n]}}const Cit=Gde(Ide),jit=Gde(Ost);function kit(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ct.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function _it(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ct.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Sit(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ct.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Bit(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ct.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Tit(){return ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ct.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const w2=({children:e,className:t,...r})=>ct.createElement("button",{type:"button",className:Pl(["react-flow__controls-button",t]),...r},e);w2.displayName="ControlButton";const Iit=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),qde=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:a=!0,fitViewOptions:n,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=oo(),[m,g]=N.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=hs(Iit,hl),{zoomIn:w,zoomOut:j,fitView:O}=T4();if(N.useEffect(()=>{g(!0)},[]),!m)return null;const B=()=>{w(),s==null||s()},T=()=>{j(),o==null||o()},C=()=>{O(n),l==null||l()},_=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return ct.createElement(ade,{className:Pl(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&ct.createElement(ct.Fragment,null,ct.createElement(w2,{onClick:B,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},ct.createElement(kit,null)),ct.createElement(w2,{onClick:T,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},ct.createElement(_it,null))),r&&ct.createElement(w2,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},ct.createElement(Sit,null)),a&&ct.createElement(w2,{className:"react-flow__controls-interactive",onClick:_,title:"toggle interactivity","aria-label":"toggle interactivity"},x?ct.createElement(Tit,null):ct.createElement(Bit,null)),d)};qde.displayName="Controls";var Oit=N.memo(qde),Zd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Zd||(Zd={}));function Fit({color:e,dimensions:t,lineWidth:r}){return ct.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Dit({color:e,radius:t}){return ct.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Pit={[Zd.Dots]:"#91919a",[Zd.Lines]:"#eee",[Zd.Cross]:"#e2e2e2"},Rit={[Zd.Dots]:1,[Zd.Lines]:1,[Zd.Cross]:6},Lit=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Kde({id:e,variant:t=Zd.Dots,gap:r=20,size:a,lineWidth:n=1,offset:s=2,color:o,style:l,className:c}){const u=N.useRef(null),{transform:d,patternId:f}=hs(Lit,hl),h=o||Pit[t],m=a||Rit[t],g=t===Zd.Dots,x=t===Zd.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*d[2]||1,v[1]*d[2]||1],w=m*d[2],j=x?[w,w]:y,O=g?[w/s,w/s]:[j[0]/s,j[1]/s];return ct.createElement("svg",{className:Pl(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},ct.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${O[0]},-${O[1]})`},g?ct.createElement(Dit,{color:h,radius:w/s}):ct.createElement(Fit,{dimensions:j,color:h,lineWidth:n})),ct.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Kde.displayName="Background";var Mit=N.memo(Kde);function Uit(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),a=r.createElement("base"),n=r.createElement("a");return r.head.appendChild(a),r.body.appendChild(n),t&&(a.href=t),n.href=e,n.href}const Qit=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Rm(e){const t=[];for(let r=0,a=e.length;r<a;r++)t.push(e[r]);return t}let lv=null;function Wde(e={}){return lv||(e.includeStyleProperties?(lv=e.includeStyleProperties,lv):(lv=Rm(window.getComputedStyle(document.documentElement)),lv))}function d_(e,t){const a=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return a?parseFloat(a.replace("px","")):0}function Hit(e){const t=d_(e,"border-left-width"),r=d_(e,"border-right-width");return e.clientWidth+t+r}function zit(e){const t=d_(e,"border-top-width"),r=d_(e,"border-bottom-width");return e.clientHeight+t+r}function Xde(e,t={}){const r=t.width||Hit(e),a=t.height||zit(e);return{width:r,height:a}}function Vit(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Lc=16384;function $it(e){(e.width>Lc||e.height>Lc)&&(e.width>Lc&&e.height>Lc?e.width>e.height?(e.height*=Lc/e.width,e.width=Lc):(e.width*=Lc/e.height,e.height=Lc):e.width>Lc?(e.height*=Lc/e.width,e.width=Lc):(e.width*=Lc/e.height,e.height=Lc))}function f_(e){return new Promise((t,r)=>{const a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>t(a))})},a.onerror=r,a.crossOrigin="anonymous",a.decoding="async",a.src=e})}async function Git(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function qit(e,t,r){const a="http://www.w3.org/2000/svg",n=document.createElementNS(a,"svg"),s=document.createElementNS(a,"foreignObject");return n.setAttribute("width",`${t}`),n.setAttribute("height",`${r}`),n.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),n.appendChild(s),s.appendChild(e),Git(n)}const mc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||mc(r,t)};function Kit(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Wit(e,t){return Wde(t).map(r=>{const a=e.getPropertyValue(r),n=e.getPropertyPriority(r);return`${r}: ${a}${n?" !important":""};`}).join(" ")}function Xit(e,t,r,a){const n=`.${e}:${t}`,s=r.cssText?Kit(r):Wit(r,a);return document.createTextNode(`${n}{${s}}`)}function SX(e,t,r,a){const n=window.getComputedStyle(e,r),s=n.getPropertyValue("content");if(s===""||s==="none")return;const o=Qit();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(Xit(o,r,n,a)),t.appendChild(l)}function Yit(e,t,r){SX(e,t,":before",r),SX(e,t,":after",r)}const BX="application/font-woff",TX="image/jpeg",Jit={woff:BX,woff2:BX,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:TX,jpeg:TX,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Zit(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function C7(e){const t=Zit(e).toLowerCase();return Jit[t]||""}function eot(e){return e.split(/,/)[1]}function RD(e){return e.search(/^(data:)/)!==-1}function tot(e,t){return`data:${t};base64,${e}`}async function Yde(e,t,r){const a=await fetch(e,t);if(a.status===404)throw new Error(`Resource "${a.url}" not found`);const n=await a.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(r({res:a,result:l.result}))}catch(c){o(c)}},l.readAsDataURL(n)})}const x6={};function rot(e,t,r){let a=e.replace(/\?.*/,"");return r&&(a=e),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),t?`[${t}]${a}`:a}async function j7(e,t,r){const a=rot(e,t,r.includeQueryParams);if(x6[a]!=null)return x6[a];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let n;try{const s=await Yde(e,r.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),eot(l)));n=tot(s,t)}catch(s){n=r.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return x6[a]=n,n}async function aot(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):f_(t)}async function not(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o==null||o.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return f_(l)}const r=e.poster,a=C7(r),n=await j7(r,a,t);return f_(n)}async function sot(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await I4(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function iot(e,t){return mc(e,HTMLCanvasElement)?aot(e):mc(e,HTMLVideoElement)?not(e,t):mc(e,HTMLIFrameElement)?sot(e,t):e.cloneNode(Jde(e))}const oot=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Jde=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function lot(e,t,r){var a,n;if(Jde(t))return t;let s=[];return oot(e)&&e.assignedNodes?s=Rm(e.assignedNodes()):mc(e,HTMLIFrameElement)&&(!((a=e.contentDocument)===null||a===void 0)&&a.body)?s=Rm(e.contentDocument.body.childNodes):s=Rm(((n=e.shadowRoot)!==null&&n!==void 0?n:e).childNodes),s.length===0||mc(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>I4(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function cot(e,t,r){const a=t.style;if(!a)return;const n=window.getComputedStyle(e);n.cssText?(a.cssText=n.cssText,a.transformOrigin=n.transformOrigin):Wde(r).forEach(s=>{let o=n.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),mc(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),a.setProperty(s,o,n.getPropertyPriority(s))})}function uot(e,t){mc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),mc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function dot(e,t){if(mc(e,HTMLSelectElement)){const r=t,a=Array.from(r.children).find(n=>e.value===n.getAttribute("value"));a&&a.setAttribute("selected","")}}function fot(e,t,r){return mc(t,Element)&&(cot(e,t,r),Yit(e,t,r),uot(e,t),dot(e,t)),t}async function Aot(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const a={};for(let s=0;s<r.length;s++){const l=r[s].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!a[l]&&(a[l]=await I4(u,t,!0))}}const n=Object.values(a);if(n.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let c=0;c<n.length;c++)l.appendChild(n[c]);e.appendChild(o)}return e}async function I4(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(a=>iot(a,t)).then(a=>lot(e,a,t)).then(a=>fot(e,a,t)).then(a=>Aot(a,t))}const Zde=/url\((['"]?)([^'"]+?)\1\)/g,hot=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,mot=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function pot(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function got(e){const t=[];return e.replace(Zde,(r,a,n)=>(t.push(n),r)),t.filter(r=>!RD(r))}async function xot(e,t,r,a,n){try{const s=r?Uit(t,r):t,o=C7(t);let l;return n||(l=await j7(s,o,a)),e.replace(pot(t),`$1${l}$3`)}catch{}return e}function vot(e,{preferredFontFormat:t}){return t?e.replace(mot,r=>{for(;;){const[a,,n]=hot.exec(r)||[];if(!n)return"";if(n===t)return`src: ${a};`}}):e}function efe(e){return e.search(Zde)!==-1}async function tfe(e,t,r){if(!efe(e))return e;const a=vot(e,r);return got(a).reduce((s,o)=>s.then(l=>xot(l,o,t,r)),Promise.resolve(a))}async function cv(e,t,r){var a;const n=(a=t.style)===null||a===void 0?void 0:a.getPropertyValue(e);if(n){const s=await tfe(n,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function bot(e,t){await cv("background",e,t)||await cv("background-image",e,t),await cv("mask",e,t)||await cv("-webkit-mask",e,t)||await cv("mask-image",e,t)||await cv("-webkit-mask-image",e,t)}async function yot(e,t){const r=mc(e,HTMLImageElement);if(!(r&&!RD(e.src))&&!(mc(e,SVGImageElement)&&!RD(e.href.baseVal)))return;const a=r?e.src:e.href.baseVal,n=await j7(a,C7(a),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){o(u)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=n):e.href.baseVal=n})}async function wot(e,t){const a=Rm(e.childNodes).map(n=>rfe(n,t));await Promise.all(a).then(()=>e)}async function rfe(e,t){mc(e,Element)&&(await bot(e,t),await yot(e,t),await wot(e,t))}function Not(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const a=t.style;return a!=null&&Object.keys(a).forEach(n=>{r[n]=a[n]}),e}const IX={};async function OX(e){let t=IX[e];if(t!=null)return t;const a=await(await fetch(e)).text();return t={url:e,cssText:a},IX[e]=t,t}async function FX(e,t){let r=e.cssText;const a=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(a,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Yde(l,t.fetchRequestInit,({result:c})=>(r=r.replace(o,`url(${c})`),[o,c]))});return Promise.all(s).then(()=>r)}function DX(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let a=e.replace(r,"");const n=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=n.exec(a);if(c===null)break;t.push(c[0])}a=a.replace(n,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let c=s.exec(a);if(c===null){if(c=l.exec(a),c===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(c[0])}return t}async function Eot(e,t){const r=[],a=[];return e.forEach(n=>{if("cssRules"in n)try{Rm(n.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const c=s.href,u=OX(c).then(d=>FX(d,t)).then(d=>DX(d).forEach(f=>{try{n.insertRule(f,f.startsWith("@import")?l+=1:n.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});a.push(u)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];n.href!=null&&a.push(OX(n.href).then(l=>FX(l,t)).then(l=>DX(l).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(a).then(()=>(e.forEach(n=>{if("cssRules"in n)try{Rm(n.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${n.href}`,s)}}),r))}function Cot(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>efe(t.style.getPropertyValue("src")))}async function jot(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Rm(e.ownerDocument.styleSheets),a=await Eot(r,t);return Cot(a)}function afe(e){return e.trim().replace(/["']/g,"")}function kot(e){const t=new Set;function r(a){(a.style.fontFamily||getComputedStyle(a).fontFamily).split(",").forEach(s=>{t.add(afe(s))}),Array.from(a.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function _ot(e,t){const r=await jot(e,t),a=kot(e);return(await Promise.all(r.filter(s=>a.has(afe(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return tfe(s.cssText,o,t)}))).join(`
`)}async function Sot(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await _ot(e,t);if(r){const a=document.createElement("style"),n=document.createTextNode(r);a.appendChild(n),e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a)}}async function Bot(e,t={}){const{width:r,height:a}=Xde(e,t),n=await I4(e,t,!0);return await Sot(n,t),await rfe(n,t),Not(n,t),await qit(n,r,a)}async function Tot(e,t={}){const{width:r,height:a}=Xde(e,t),n=await Bot(e,t),s=await f_(n),o=document.createElement("canvas"),l=o.getContext("2d"),c=t.pixelRatio||Vit(),u=t.canvasWidth||r,d=t.canvasHeight||a;return o.width=u*c,o.height=d*c,t.skipAutoScale||$it(o),o.style.width=`${u}`,o.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function O4(e,t={}){return(await Tot(e,t)).toDataURL()}const nfe="recursos_crucigramas",k7="recursos_lineas_de_tiempo",_7="recursos_mapas_mentales",sfe="recursos_sopas_de_letras",F4=e=>{var r,a,n,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(n=t.createdAt)==null?void 0:n.toDate)==null?void 0:s.call(n).toISOString())||t.createdAt}},Iot=e=>{const t=Dt(ht(st,nfe),Yt("fechaCreacion","desc"));return nr(t,r=>{const a=r.docs.map(n=>F4(n));e(a)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},Oot=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date)};return(await Zr(ht(st,nfe),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},Fot=e=>{const t=Dt(ht(st,k7),Yt("createdAt","desc"));return nr(t,r=>{const a=r.docs.map(n=>F4(n));e(a)},r=>{console.error("Error al suscribirse a las lneas de tiempo:",r),e([])})},Dot=async(e,t)=>{try{const{id:r,...a}=e,n=Jt(st,k7,r);await ai(n,{...a,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(a.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la lnea de tiempo:",r),new Error("No se pudo guardar la lnea de tiempo.")}},Pot=async e=>{try{const t=Jt(st,k7,e);await xn(t)}catch(t){throw console.error("Error al eliminar la lnea de tiempo:",t),new Error("No se pudo eliminar la lnea de tiempo.")}},Rot=e=>{const t=Dt(ht(st,_7),Yt("createdAt","desc"));return nr(t,r=>{const a=r.docs.map(n=>F4(n));e(a)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},Lot=async(e,t)=>{try{const{id:r,...a}=e,n=Jt(st,_7,r);await ai(n,{...a,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(a.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Mot=async e=>{try{const t=Jt(st,_7,e);await xn(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Uot=e=>{const t=Dt(ht(st,sfe),Yt("createdAt","desc"));return nr(t,r=>{const a=r.docs.map(n=>F4(n));e(a)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Qot=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await Zr(ht(st,sfe),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Hot=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),zot=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),Vot=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),$ot=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Prctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return i.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[i.jsx(Yb,{type:"target",position:Nr.Left,className:"w-2 h-2 !bg-slate-400"}),i.jsx("span",{className:"text-xl",children:e.icon||""}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),i.jsx(Yb,{type:"source",position:Nr.Right,className:"w-2 h-2 !bg-slate-400"})]})},LD=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,a)=>r+LD(a,t),0),PX=(e,t="tree")=>{const r=[],a=[];if(t==="tree"){const o=(l,c,u)=>{r.push({id:l.id,position:{x:c*280,y:u},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"});const d=LD(l,100);let f=u-d/2+100/2;(l.children||[]).forEach(h=>{const m=LD(h,100),g=f+m/2-100/2;a.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep",animated:!0}),o(h,c+1,g),f+=m})};o(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const o=300,l=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:o*Math.cos(d),y:o*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),a.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const m=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:l*Math.cos(m),y:l*Math.sin(m)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),a.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:a}},ife=({node:e,onUpdate:t,onAddChild:r,onDelete:a,level:n=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],o=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return i.jsxs("div",{className:`pl-4 ${n>0?"border-l "+o[n-1%o.length]:""}`,children:[i.jsx("div",{className:`p-2 rounded-lg my-1 ${s[n%s.length]}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:e.label,onChange:l=>t(e.id,l.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),i.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""}),n>0&&i.jsx("button",{onClick:()=>a(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""})]})}),(e.children||[]).map(l=>i.jsx(ife,{node:l,onUpdate:t,onAddChild:r,onDelete:a,level:n+1},l.id))]})},Got={custom:$ot},qot=({mapData:e,onBack:t,onSave:r})=>{const[a,n]=N.useState(e.treeData),[s,o]=N.useState("tree"),[l,c]=N.useState(!1),[u,d,f]=Cit([]),[h,m,g]=jit([]),{fitView:x}=T4();N.useEffect(()=>{const{nodes:B,edges:T}=PX(a,s);d(B),m(T),setTimeout(()=>x({duration:300}),50)},[a,s,d,m,x]);const v=(B,T)=>{const C=JSON.parse(JSON.stringify(a)),_=S=>S.id===B?(S.label=T,!0):(S.children||[]).some(_);_(C),n(C)},y=B=>{const T=JSON.parse(JSON.stringify(a)),C=_=>_.id===B?(_.children||(_.children=[]),_.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(_.children||[]).some(C);C(T),n(T)},w=B=>{const T=JSON.parse(JSON.stringify(a)),C=_=>{const S=(_.children||[]).findIndex(L=>L.id===B);return S!==-1?(_.children.splice(S,1),!0):(_.children||[]).some(C)};C(T),n(T)},j=()=>{c(!0);const{nodes:B,edges:T}=PX(a,s);r({...e,treeData:a,nodes:B,edges:T}),setTimeout(()=>c(!1),1e3)},O=async B=>{const T=document.querySelector(".react-flow");T&&O4(T,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(C=>{{const _=document.createElement("a");_.download=`${e.tema}.png`,_.href=C,_.click()}}).catch(C=>console.error("oops, something went wrong!",C))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),i.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:" Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:i.jsxs($de,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:Got,children:[i.jsx(Oit,{}),i.jsx(Mit,{})]})}),i.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[i.jsxs("button",{onClick:()=>o("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(zot,{})," Vista en rbol"]}),i.jsxs("button",{onClick:()=>o("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(Vot,{})," Vista central"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:i.jsx(ife,{node:a,onUpdate:v,onAddChild:y,onDelete:w})}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>O(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),i.jsx("button",{onClick:j,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:l?"Guardado!":"Guardar"})]})]})]})]})},Kot=({onBack:e,currentUser:t})=>{const[r,a]=N.useState("list"),[n,s]=N.useState([]),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState(!0),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState("");N.useEffect(()=>{f(!0);const C=Rot(_=>{s(_),f(!1)});return()=>C()},[]);const w=async C=>{if(C.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no est configurada."),u(!1);return}},j=async C=>{try{await Lot(C,t)}catch(_){console.error("Error saving mind map:",_),alert("No se pudo guardar el mapa mental.")}},O=C=>{l(C),a("editor")},B=async C=>{if(window.confirm("Eliminar este mapa mental?"))try{await Mot(C)}catch(_){console.error("Error deleting mind map:",_),alert("No se pudo eliminar el mapa mental.")}},T=()=>{switch(r){case"editor":return o?i.jsx(E7,{children:i.jsx(qot,{mapData:o,onBack:()=>a("list"),onSave:j})}):null;case"config":return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),i.jsx("button",{onClick:()=>a("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver"})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:h,onChange:C=>m(C.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),i.jsx("textarea",{id:"contenido",value:v,onChange:C=>y(C.target.value),rows:4,placeholder:"Aade ms detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?i.jsx(Hot,{}):"Generar Mapa con IA"})})]})]});case"list":default:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),i.jsx("button",{onClick:()=>a("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length>0?n.map(C=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[i.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:C.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(C.createdAt).toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsx("button",{onClick:()=>O(C),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),i.jsx("button",{onClick:()=>B(C.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},C.id)):i.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningn mapa mental todava."})})]})}};return d?i.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),T()]})},Wot=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Xot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Yot=({onBack:e,currentUser:t})=>{const[r,a]=N.useState([]),[n,s]=N.useState("Media"),[o,l]=N.useState(10),[c,u]=N.useState(!1),[d,f]=N.useState(Array(10).fill("")),[h,m]=N.useState(""),[g,x]=N.useState(null),[v,y]=N.useState({ai:!1,puzzle:!1,data:!0}),w=N.useRef(null);N.useEffect(()=>{y(P=>({...P,data:!0}));const L=Uot(P=>{a(P),y(k=>({...k,data:!1}))});return()=>L()},[]),N.useEffect(()=>{f(L=>{const P=Array(o).fill("");for(let k=0;k<Math.min(L.length,o);k++)P[k]=L[k];return P})},[o]);const j=(L,P)=>{const k=[...d];k[L]=P,f(k)},O=async()=>{if(h.trim()){y(L=>({...L,ai:!0}));try{alert("La API Key de Gemini no est configurada."),y(J=>({...J,ai:!1}));return}catch(L){console.error("Error generating words with AI:",L),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{y(L=>({...L,ai:!1}))}}},B=(L,P,k,M,U,z)=>{for(let Q=0;Q<L.length;Q++){const q=k+Q*U.y,V=M+Q*U.x;if(q<0||q>=z||V<0||V>=z||P[q][V]&&P[q][V]!==L[Q])return!1}return!0},T=(L,P,k,M,U)=>{for(let z=0;z<L.length;z++)P[k+z*U.y][M+z*U.x]=L[z]},C=async()=>{y(q=>({...q,puzzle:!0})),x(null),await new Promise(q=>setTimeout(q,100));const L=d.map(q=>q.toUpperCase().replace(/[^A-Z]/g,"")).filter(Boolean);if(L.length===0){alert("Por favor, ingrese al menos una palabra vlida."),y(q=>({...q,puzzle:!1}));return}const P=Math.max(...L.map(q=>q.length));let k=Math.max(P,L.length)+2;n==="Media"&&(k+=3),n==="Difcil"&&(k+=5),k=Math.min(Math.max(k,10),25);const M=Array(k).fill(null).map(()=>Array(k).fill(null)),U=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];n!=="Fcil"&&U.push({x:1,y:-1}),n==="Difcil"&&U.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const q of L.sort((V,Y)=>Y.length-V.length)){let V=!1;for(let Y=0;Y<100;Y++){const K=U[Math.floor(Math.random()*U.length)],J=Math.floor(Math.random()*k),R=Math.floor(Math.random()*k);if(B(q,M,J,R,K,k)){T(q,M,J,R,K),V=!0;break}}V||console.warn(`No se pudo colocar la palabra: ${q}`)}const z=M.map(q=>q.map(V=>V||"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*27)])),Q={tema:h||"Personalizado",grid:z.map(q=>q.join("")),words:L.sort()};try{const q=await Qot(Q,t);x({...Q,id:q,createdAt:new Date().toISOString()})}catch(q){console.error("Error saving puzzle:",q),alert("No se pudo guardar la sopa de letras.")}finally{y(q=>({...q,puzzle:!1}))}},_=()=>{w.current&&O4(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(L=>{const P=document.createElement("a");P.download="sopa-de-letras.png",P.href=L,P.click()}).catch(L=>{console.error("oops, something went wrong!",L),alert("No se pudo generar la imagen. Intntelo de nuevo.")})},S=()=>{var k;if(!g)return null;const L=((k=g.grid[0])==null?void 0:k.length)||1,P=g.grid.join("").split("");return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:w,className:"p-6 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${L}, minmax(0, 1fr))`},children:P.map((M,U)=>i.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:M},U))})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),i.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(M=>i.jsx("li",{children:M},M))})]})]})}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),i.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?i.jsx("div",{className:"text-center py-10",children:"Cargando..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),!g&&i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),i.jsxs("select",{value:n,onChange:L=>s(L.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{children:"Fcil"}),i.jsx("option",{children:"Media"}),i.jsx("option",{children:"Difcil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(L=>i.jsx("button",{onClick:()=>{l(L),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&o===L?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:L},L)),i.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&i.jsx("input",{type:"number",value:o,onChange:L=>l(parseInt(L.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:L=>m(L.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:O,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?i.jsx(Wot,{}):i.jsxs(i.Fragment,{children:[i.jsx(Xot,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((L,P)=>i.jsx("input",{type:"text",value:L,onChange:k=>j(P,k.target.value),placeholder:`Palabra ${P+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},P))})]}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:C,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&S()]})},Jot=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Zot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),elt=({timeline:e,onSave:t,onBack:r})=>{const[a,n]=N.useState(e),[s,o]=N.useState(null),l=N.useRef(null),c=(m,g,x)=>{n(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},u=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:""},g=[...a.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));n(x=>({...x,events:g}))},d=m=>{n(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},f=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripcin para que la IA la complete.");return}o(m.id);{alert("La API Key de Gemini no est configurada."),o(null);return}},h=()=>{l.current&&O4(l.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${a.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Intntelo de nuevo.")})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:a.tema}),i.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:i.jsxs("div",{ref:l,className:"relative p-10",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),i.jsx("div",{className:"relative",children:a.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return i.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[i.jsx("div",{className:"w-1/2",children:x&&i.jsx("div",{className:"text-right pr-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),i.jsx("div",{className:"z-10 flex-shrink-0",children:i.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),i.jsx("div",{className:"w-1/2",children:!x&&i.jsx("div",{className:"text-left pl-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:a.events.map(m=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[i.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Ao/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripcin",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),i.jsx("button",{onClick:()=>f(m),disabled:s===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===m.id?i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):i.jsx(Zot,{})})]}),i.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[i.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Aadir Hito"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),i.jsx("button",{onClick:()=>t(a),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},tlt=({onBack:e,currentUser:t})=>{const[r,a]=N.useState("list"),[n,s]=N.useState([]),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState(!0),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState("");N.useEffect(()=>{f(!0);const B=Fot(T=>{s(T),f(!1)});return()=>B()},[]);const w=async B=>{if(B.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no est configurada."),u(!1);return}},j=async B=>{try{await Dot(B,t),a("list"),l(null)}catch(T){console.error("Error saving timeline:",T),alert("No se pudo guardar la lnea de tiempo.")}},O=async B=>{if(window.confirm("Eliminar esta lnea de tiempo?"))try{await Pot(B)}catch(T){console.error("Error deleting timeline:",T),alert("No se pudo eliminar la lnea de tiempo.")}};return r==="editor"&&o?i.jsx(elt,{timeline:o,onSave:j,onBack:()=>a("list")}):d?i.jsx("div",{className:"text-center py-10",children:"Cargando lneas de tiempo..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Lnea de Tiempo"}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:h,onChange:B=>m(B.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),i.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:B=>x(B.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Trmino (Opcional)"}),i.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:B=>y(B.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?i.jsx(Jot,{}):"Generar con IA"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo Guardadas"}),n.length>0?n.map(B=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:B.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(B.createdAt).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{l(B),a("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),i.jsx("button",{onClick:()=>O(B.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},B.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay lneas de tiempo guardadas."})]})]})},rlt=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),RX=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),alt=({onBack:e,currentUser:t})=>{const[r,a]=N.useState([]),[n,s]=N.useState(10),[o,l]=N.useState(!1),[c,u]=N.useState(Array(10).fill("")),[d,f]=N.useState(Array(10).fill("")),[h,m]=N.useState(""),[g,x]=N.useState(null),[v,y]=N.useState(!1),[w,j]=N.useState({ai:!1,puzzle:!1,data:!0}),[O,B]=N.useState(null),T=N.useRef(null);N.useEffect(()=>{j(z=>({...z,data:!0}));const U=Iot(z=>{const Q=z.map(q=>{const{grid_flat:V,grid_width:Y,...K}=q,J=[];if(V&&Y>0)for(let R=0;R<V.length;R+=Y)J.push(V.slice(R,R+Y));return{...K,grid:J}});a(Q),j(q=>({...q,data:!1}))});return()=>U()},[]),N.useEffect(()=>{const U=n;u(z=>Array.from({length:U},(Q,q)=>z[q]||"")),f(z=>Array.from({length:U},(Q,q)=>z[q]||""))},[n]);const C=(U,z)=>{const Q=[...c];Q[U]=z,u(Q)},_=(U,z)=>{const Q=[...d];Q[U]=z,f(Q)},S=async()=>{if(h.trim()){j(U=>({...U,ai:!0}));try{alert("La API Key de Gemini no est configurada."),j(le=>({...le,ai:!1}));return}catch(U){console.error("Error generating words/clues with AI:",U),alert("No se pudieron generar las palabras y pistas. Intntelo de nuevo.")}finally{j(U=>({...U,ai:!1}))}}},L=async U=>{const z=c[U];if(!z||!z.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}B(U);try{alert("La API Key de Gemini no est configurada."),B(null);return}catch(Q){console.error("Error generating clue with AI:",Q),alert("No se pudo generar la pista.")}finally{B(null)}},P=N.useCallback(()=>{try{const U=c.map((Ce,me)=>({word:Ce.toUpperCase().replace(/[^A-Z]/g,""),clue:d[me]})).filter(Ce=>Ce.word.length>0);if(U.length===0)return alert("Por favor, ingrese al menos una palabra vlida."),null;U.sort((Ce,me)=>me.word.length-Ce.word.length);const z=U[0].word.length,Q=Math.max(z,U.length)*2;let q=Array.from({length:Q},()=>Array(Q).fill(null));const V=[],Y=U.shift(),K=Math.floor(Q/2),J=Math.floor((Q-Y.word.length)/2);for(let Ce=0;Ce<Y.word.length;Ce++)q[K][J+Ce]=Y.word[Ce];V.push({word:Y.word,clue:Y.clue,direction:"across",row:K,col:J});for(const Ce of U){let me={score:-1,row:-1,col:-1,direction:"across"};for(const ye of V)for(let oe=0;oe<ye.word.length;oe++)for(let fe=0;fe<Ce.word.length;fe++)if(ye.word[oe]===Ce.word[fe]){let be=0,Pe,$e,Ke;ye.direction==="across"?(Ke="down",Pe=ye.row-fe,$e=ye.col+oe):(Ke="across",Pe=ye.row+oe,$e=ye.col-fe);let nt=!0;for(let He=0;He<Ce.word.length;He++){const it=Pe+(Ke==="down"?He:0),xt=$e+(Ke==="across"?He:0);if(it<0||it>=Q||xt<0||xt>=Q){nt=!1;break}const Et=q[it][xt],gt=it===ye.row+(ye.direction==="down"?oe:0)&&xt===ye.col+(ye.direction==="across"?oe:0);if(Et&&!gt){nt=!1;break}if(Et&&gt&&Et!==Ce.word[fe]){nt=!1;break}if(!gt){if(Ke==="across"&&(it>0&&q[it-1][xt]||it<Q-1&&q[it+1][xt])){nt=!1;break}if(Ke==="down"&&(xt>0&&q[it][xt-1]||xt<Q-1&&q[it][xt+1])){nt=!1;break}}Et&&be++}nt&&be>me.score&&(me={score:be,row:Pe,col:$e,direction:Ke})}if(me.score>-1){for(let ye=0;ye<Ce.word.length;ye++){const oe=me.row+(me.direction==="down"?ye:0),fe=me.col+(me.direction==="across"?ye:0);q[oe][fe]=Ce.word[ye]}V.push({word:Ce.word,clue:Ce.clue,direction:me.direction,row:me.row,col:me.col})}}let R=Q,F=-1,W=Q,X=-1;V.forEach(Ce=>{R=Math.min(R,Ce.row),F=Math.max(F,Ce.row+(Ce.direction==="down"?Ce.word.length-1:0)),W=Math.min(W,Ce.col),X=Math.max(X,Ce.col+(Ce.direction==="across"?Ce.word.length-1:0))}),F===-1&&(R=V[0].row,F=V[0].row,W=V[0].col,X=V[0].col+V[0].word.length-1);const ne=1,le=Math.max(0,R-ne),ie=Math.min(Q,F+1+ne),ae=Math.max(0,W-ne),Ae=Math.min(Q,X+1+ne),ke=q.slice(le,ie).map(Ce=>Ce.slice(ae,Ae)),re=V.map(Ce=>({...Ce,row:Ce.row-le,col:Ce.col-ae})).sort((Ce,me)=>Ce.row-me.row||Ce.col-me.col);let Re=1;const Le=[],Te=new Map;re.forEach(Ce=>{const me=`${Ce.row},${Ce.col}`;Te.has(me)||Te.set(me,Re++),Le.push({...Ce,number:Te.get(me)})});const de=ke.map(Ce=>Ce.map(me=>({char:me,number:null})));return Le.forEach(Ce=>{const me=`${Ce.row},${Ce.col}`;de[Ce.row]&&de[Ce.row][Ce.col]!==void 0&&(de[Ce.row][Ce.col].number=Te.get(me))}),{grid:de,clues:{across:Le.filter(Ce=>Ce.direction==="across").sort((Ce,me)=>Ce.number-me.number),down:Le.filter(Ce=>Ce.direction==="down").sort((Ce,me)=>Ce.number-me.number)}}}catch(U){return console.error("Error generating crossword grid:",U),alert("Ocurri un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),k=async()=>{var z;j(Q=>({...Q,puzzle:!0})),x(null),await new Promise(Q=>setTimeout(Q,100));const U=P();if(U){const Q={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:U.grid,clues:U.clues},{grid:q,...V}=Q,Y={...V,grid_flat:q.flat().map(K=>K.char||""),grid_width:((z=q[0])==null?void 0:z.length)||0};try{const K=await Oot(Y,t);x({...Q,id:K,fechaCreacion:new Date().toISOString()})}catch(K){console.error("Error saving puzzle:",K),alert("No se pudo guardar el crucigrama en la base de datos.")}}j(Q=>({...Q,puzzle:!1}))},M=()=>{T.current&&(y(!1),setTimeout(()=>{O4(T.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(U=>{const z=document.createElement("a");z.download="crucigrama.png",z.href=U,z.click()}).catch(U=>console.error("Error generating image",U))},100))};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),g?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:T,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsx("div",{children:i.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((U,z)=>i.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:U.char?"white":"black"},children:[U.number&&i.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:U.number}),v&&U.char&&i.jsx("span",{children:U.char})]},z))})}),i.jsxs("div",{className:"text-sm",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.across.map(U=>i.jsxs("li",{children:[i.jsxs("strong",{children:[U.number,"."]})," ",U.clue]},`${U.word}-${U.clue}`))}),i.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.down.map(U=>i.jsxs("li",{children:[i.jsxs("strong",{children:[U.number,"."]})," ",U.clue]},`${U.word}-${U.clue}`))})]})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),i.jsx("span",{children:"Mostrar Solucin"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),i.jsx("button",{onClick:M,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(U=>i.jsx("button",{onClick:()=>{s(U),l(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!o&&n===U?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:U},U)),i.jsx("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${o?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),o&&i.jsx("input",{type:"number",value:n,onChange:U=>s(parseInt(U.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:U=>m(U.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:S,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?i.jsx(rlt,{}):i.jsxs(i.Fragment,{children:[i.jsx(RX,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsx("div",{className:"space-y-3",children:Array.from({length:n}).map((U,z)=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx("input",{type:"text",value:c[z],onChange:Q=>C(z,Q.target.value),placeholder:`Palabra ${z+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[i.jsx("textarea",{value:d[z],onChange:Q=>_(z,Q.target.value),placeholder:`Pista ${z+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:()=>L(z),disabled:O===z,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:O===z?i.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):i.jsx(RX,{})})]})]},z))}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:k,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},nlt=[{id:"sopaDeLetras",icon:"",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"",nombre:"Lneas de Tiempo",descripcion:"Construye lneas de tiempo para comprender procesos, hechos histricos o secuencias."}],slt=({recurso:e,onClick:t})=>i.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[i.jsx("div",{className:"text-6xl mb-4",children:e.icon}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),ilt=()=>{const[e,t]=N.useState("menu"),{currentUser:r}=VM(),a=()=>e!=="menu"&&!r?i.jsx("div",{className:"text-center p-8",children:"Cargando informacin de usuario..."}):e==="mapasMentales"?i.jsx(Kot,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?i.jsx(Yot,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?i.jsx(tlt,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?i.jsx(alt,{onBack:()=>t("menu"),currentUser:r}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:nlt.map(n=>i.jsx(slt,{recurso:n,onClick:()=>t(n.id)},n.id))})]});return i.jsx("div",{className:"animate-fade-in space-y-6",children:a()})},olt="evaluaciones_formativas",llt="calificaciones_formativas",ofe="trabajos_grupales_formativos",lfe=e=>{var r,a,n,s;const t=e.data();return{id:e.id,...t,fecha:((a=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(n=t.fechaPresentacion)==null?void 0:n.toDate)==null?void 0:s.call(n).toISOString().split("T")[0])||t.fechaPresentacion}},clt=(e,t)=>{const r=Dt(ht(st,olt),ur("curso","==",e));return nr(r,a=>{t(a.docs.map(n=>lfe(n)))},a=>{console.error("Error subscribing to student evaluations:",a),t([])})},ult=e=>{const t=Dt(ht(st,llt));return nr(t,r=>{const a={};r.forEach(n=>{a[n.id]=n.data()}),e(a)},r=>{console.error("Error subscribing to grades:",r),e({})})},dlt=(e,t)=>{const r=Dt(ht(st,ofe),ur("curso","==",e));return nr(r,a=>{t(a.docs.map(n=>lfe(n)))},a=>{console.error("Error subscribing to group projects:",a),t([])})},flt=async e=>{try{const{id:t,...r}=e,a=Jt(st,ofe,t);await ai(a,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},Alt=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState({}),[s,o]=N.useState([]),[l,c]=N.useState(!0),[u,d]=N.useState(null),[f,h]=N.useState(!1),[m,g]=N.useState(null),x=N.useRef(null);N.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const O=clt(e.curso,r),B=ult(n),T=dlt(e.curso,C=>{o(C),c(!1)});return()=>{O(),B(),T()}},[e.curso]);const v=N.useMemo(()=>{if(!e.curso)return[];const B=t.filter(T=>T.curso===e.curso).reduce((T,C)=>((T[C.asignatura]=T[C.asignatura]||[]).push(C),T),{});return Object.entries(B).map(([T,C])=>{let _=0,S=0;const L=C.map(k=>{var z;const M=(z=a[k.id])==null?void 0:z[e.nombreCompleto];let U="No Trabajado";return M==="trabajado"?(_+=7,S++,U="Trabajado"):M==="no trabajado"&&(_+=2,S++,U="No Trabajado"),{id:k.id,nombreActividad:k.nombreActividad,fecha:k.fecha,estado:U}}).filter(k=>{var M;return(M=a[k.id])==null?void 0:M[e.nombreCompleto]}),P=S>0?(_/S).toFixed(1):"N/A";return{asignatura:T,promedio:P,actividades:L.sort((k,M)=>new Date(M.fecha).getTime()-new Date(k.fecha).getTime())}}).filter(T=>T.actividades.length>0).sort((T,C)=>T.asignatura.localeCompare(C.asignatura))},[t,a,e]);N.useEffect(()=>{if(v.reduce((S,L)=>S+L.actividades.length,0)===0){d(null);return}const B=v.reduce((S,L)=>{const P=parseFloat(L.promedio);return isNaN(P)?S:S+P},0),T=v.length>0?B/v.length:0,C=pC.find(S=>T>=S.promedioMin&&T<=S.promedioMax)||null,_=pC.filter(S=>T>=S.promedioMin);if(d({puntajeTotal:0,promedio:T,rangoActual:C,insigniasGanadas:_}),x.current!==null){const S=pC.find(L=>x.current>=L.promedioMin&&x.current<=L.promedioMax)||null;C&&(!S||C.nombre!==S.nombre)&&g(C)}x.current=T},[v]);const y=N.useMemo(()=>e.curso?s.filter(O=>O.curso===e.curso).map(O=>{const B=O.grupos.find(T=>T.integrantes.some(C=>C.nombre===e.nombreCompleto));return B?{...O,miGrupo:B}:null}).filter(O=>O!==null).sort((O,B)=>new Date(B.fechaPresentacion).getTime()-new Date(O.fechaPresentacion).getTime()):[],[s,e]),w=async(O,B)=>{const T=s.find(_=>_.id===O);if(!T)return;const C={...T,grupos:T.grupos.map(_=>_.integrantes.some(L=>L.nombre===e.nombreCompleto)?{..._,integrantes:_.integrantes.map(L=>L.nombre===e.nombreCompleto?{...L,rol:B||void 0}:L)}:_)};try{await flt(C)}catch(_){console.error("Error updating role:",_),alert("No se pudo actualizar el rol.")}},j=O=>{const B=parseFloat(O);return isNaN(B)?"bg-slate-400":B<4?"bg-red-500":B<5.5?"bg-yellow-500":"bg-green-500"};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:O=>O.stopPropagation(),children:[i.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"Subiste de Rango!"}),i.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),i.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),i.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"Genial!"})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),i.jsx("div",{className:"overflow-y-auto space-y-3",children:pC.map(O=>{const B=u==null?void 0:u.insigniasGanadas.some(T=>T.nombre===O.nombre);return i.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${B?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[i.jsx("div",{className:"text-5xl",children:O.emoji}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-bold ${B?"text-amber-700":"text-slate-600"}`,children:O.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",O.promedioMin," y ",O.promedioMax]})]})]},O.nombre)})})]})}),i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Aqu puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&i.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),i.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),i.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),i.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),i.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(O=>i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:O.asignatura}),i.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${j(O.promedio)}`,children:O.promedio})]}),i.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),O.actividades.map(B=>i.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-700",children:B.nombreActividad}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(B.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),i.jsx("span",{className:`font-semibold ${B.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:B.estado==="Trabajado"?" Trabajado":" No Trabajado"})]},B.id))]})]},O.asignatura))}):i.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"An sin registros"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Todava no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),i.jsx("div",{className:"space-y-4",children:y.map(O=>{const B=O.miGrupo.integrantes.filter(C=>C.nombre!==e.nombreCompleto&&C.rol).map(C=>C.rol),T=Wte.filter(C=>!B.includes(C));return i.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-bold text-slate-800",children:O.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:[O.asignatura," - Presentacin: ",new Date(O.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-3 pt-3 border-t",children:[i.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",O.miGrupo.numero]}),i.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:O.miGrupo.integrantes.map(C=>i.jsxs("li",{className:"grid grid-cols-2 items-center",children:[i.jsx("span",{className:C.nombre===e.nombreCompleto?"font-bold":"",children:C.nombre}),C.nombre===e.nombreCompleto?i.jsxs("select",{value:C.rol||"",onChange:_=>w(O.id,_.target.value),className:"text-sm p-1 border rounded w-full",children:[i.jsx("option",{value:"",children:"-- Seleccionar rol --"}),C.rol&&!T.includes(C.rol)&&i.jsx("option",{value:C.rol,children:C.rol}),T.map(_=>i.jsx("option",{value:_,children:_},_))]}):i.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:C.rol||"Sin rol"})]},C.nombre))})]})]},O.id)})})]})]})},hlt="proyectos_interdisciplinarios",cfe="entregas_interdisciplinarias",ufe=e=>{var r,a,n,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:a.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(n=t.fechaCompletado)==null?void 0:n.toDate)==null?void 0:s.call(n).toISOString())||t.fechaCompletado}},mlt=(e,t)=>{const r=Dt(ht(st,hlt),ur("cursos","array-contains",e));return nr(r,a=>{const n=a.docs.map(s=>ufe(s));t(n)},a=>{console.error("Error al suscribirse a los proyectos:",a),t([])})},plt=(e,t)=>{const r=Dt(ht(st,cfe),ur("estudianteId","==",e));return nr(r,a=>{const n=a.docs.map(s=>ufe(s));t(n)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},glt=async e=>{try{const{id:t,...r}=e,a=Jt(st,cfe,t),n={...r,fechaCompletado:ir.fromDate(new Date(r.fechaCompletado||Date.now()))};await ai(a,n,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},xlt=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState([]),[s,o]=N.useState(null),[l,c]=N.useState(!0);N.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=mlt(e.curso,r),h=plt(e.id,m=>{n(m),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await glt(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const m=N.useMemo(()=>{const B=a.find(T=>T.planificacionId===f.id&&T.tareaId===h.id);return B||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,a]),[g,x]=N.useState(!1),[v,y]=N.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),w=B=>{var C;const T=(C=B.target.files)==null?void 0:C[0];T&&(alert(`Simulacin: Archivo "${T.name}" listo para subir.`),u({...m,archivoAdjunto:{nombre:T.name,url:`simulated/path/${T.name}`},fechaCompletado:new Date().toISOString()}))},j=()=>{u({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},O=()=>{u({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:m.completada,onChange:O,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&i.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),i.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[i.jsx("textarea",{value:v.observaciones,onChange:B=>y({...v,observaciones:B.target.value}),onBlur:j,placeholder:"Aadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"url",value:v.enlace,onChange:B=>y({...v,enlace:B.target.value}),onBlur:j,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"file",onChange:w,className:"text-sm"}),m.archivoAdjunto&&i.jsxs("p",{className:"text-xs text-green-600",children:[" Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentacin del profesor:"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=a.filter(v=>v.planificacionId===f.id).filter(v=>v.completada).length,x=h.length>0?g/h.length*100:0;return i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[i.jsxs("button",{onClick:()=>o(s===f.id?null:f.id),className:"w-full text-left",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[i.jsx("span",{children:"Progreso"}),i.jsxs("span",{children:[Math.round(x),"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&i.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(v=>i.jsx(d,{plan:f,tarea:v},v.id)):i.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto an no tiene tareas asignadas."})})]},f.id)}):i.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Todo al da!"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},vlt=({ciclos:e})=>{var O,B,T,C,_;const[t,r]=N.useState(!1),[a,n]=N.useState(null),[s,o]=N.useState(null),[l,c]=N.useState(null),u=S=>{if(!S)return null;try{let L=S.trim();const P=L.match(/```json([\s\S]*?)```/i)||L.match(/```([\s\S]*?)```/i);P&&P[1]&&(L=P[1]);const k=L.indexOf("{"),M=L.lastIndexOf("}");return k!==-1&&M!==-1&&M>k&&(L=L.slice(k,M+1)),JSON.parse(L)}catch{return null}},d=e.length,f=e.filter(S=>S.videoObservacionUrl&&S.retroalimentacion.exito).length,h=new Set(e.map(S=>S.docenteInfo)).size,m=e.reduce((S,L)=>{if(!L.horaInicio||!L.horaTermino)return S;const P=new Date(`2000/01/01 ${L.horaInicio}`),M=(new Date(`2000/01/01 ${L.horaTermino}`).getTime()-P.getTime())/(1e3*60);return S+M},0)/e.length,g=e.reduce((S,L)=>{const P=new Date(L.fecha).toLocaleDateString("es-ES",{month:"long"});return S[P]=(S[P]||0)+1,S},{}),x=e.reduce((S,L)=>(L.asignaturaInfo&&(S[L.asignaturaInfo]=(S[L.asignaturaInfo]||0)+1),S),{}),v=Object.entries(x).sort(([,S],[,L])=>L-S).slice(0,5),y=N.useMemo(()=>e.map(S=>{var L,P,k;return{fecha:S.fecha,docente:S.docenteInfo,asignatura:S.asignaturaInfo,foco:(L=S.retroalimentacion)==null?void 0:L.foco,exito:(P=S.retroalimentacion)==null?void 0:P.exito,brecha:(k=S.retroalimentacion)==null?void 0:k.brecha}}).filter(S=>S.foco||S.brecha||S.exito),[e]),w=()=>{const S=Object.entries(g).map(([M,U])=>`${M}: ${U}`).join(", "),L=v.map(([M,U])=>`${M} (${U})`).join(", "),P=d?Math.round(f/d*100):0,k=y.slice(0,12).map(M=>`- ${new Date(M.fecha).toLocaleDateString()} | Docente: ${M.docente} | Asig.: ${M.asignatura}
         Exitos: ${M.exito||"-"}
         Foco: ${M.foco||"-"}
         Brecha: ${M.brecha?`min ${M.brecha.minutoInicial||"?"}-${M.brecha.minutoFinal||"?"} | preguntas: ${M.brecha.preguntas||"-"} | indicadores: ${M.brecha.indicadores||"-"}`:"-"}`).join(`
`);return`Eres un asesor pedaggico experto en OPR. Analiza los siguientes datos agregados de ciclos de observacin y retroalimentacin y devuelve un JSON con insights accionables para Subdireccin.

DATOS RESUMEN:
- Total de ciclos: ${d}
- Ciclos completados: ${f} (tasa: ${P}%)
- Docentes nicos observados: ${h}
- Tiempo promedio de observacin (min): ${isFinite(m)?Math.round(m):0}
- Distribucin por mes: ${S||"sin datos"}
- Asignaturas ms observadas (top 5): ${L||"sin datos"}

MUESTRAS DE FOCO/XITO/BRECHAS (mx. 12):
${k||"(no hay muestras)"}

DEVUELVE SOLO JSON (sin comentarios) con este esquema:
{
  "resumenGeneral": "string",
  "tendencias": ["string"],
  "riesgos": ["string"],
  "focosRecomendados": [
    { "foco": "string", "justificativo": "string opcional" }
  ],
  "proximosPasos": ["string"],
  "indicadores": [ { "nombre": "string", "valor": "string|number" } ]
}
`},j=async()=>{if(d){r(!0),n(null),c(null),o(null);try{const S=w(),L=await B8(S,1,!0),P=u(L);P?c(P):o(L)}catch(S){n((S==null?void 0:S.message)||"No se pudo obtener el anlisis con IA.")}finally{r(!1)}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(_l,{className:"w-5 h-5 text-indigo-600"}),"Asistente IA del Ciclo OPR"]}),i.jsx("button",{onClick:j,disabled:t||d===0,className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium border ${t||d===0?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700"} border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200`,title:d===0?"No hay ciclos para analizar":"Generar anlisis con IA",children:t?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600"}),"Generando..."]}):i.jsx(i.Fragment,{children:"Generar anlisis"})})]}),a&&i.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:a}),!a&&(l||s)&&i.jsx("div",{className:"mt-2 grid grid-cols-1 lg:grid-cols-2 gap-4",children:l?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-3",children:[l.resumenGeneral&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Resumen"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:l.resumenGeneral})]}),(O=l.tendencias)!=null&&O.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Tendencias"}),i.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.tendencias.map((S,L)=>i.jsx("li",{children:S},L))})]}):null,(B=l.riesgos)!=null&&B.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Riesgos"}),i.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.riesgos.map((S,L)=>i.jsx("li",{children:S},L))})]}):null]}),i.jsxs("div",{className:"space-y-3",children:[(T=l.focosRecomendados)!=null&&T.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Focos recomendados"}),i.jsx("ul",{className:"space-y-2",children:l.focosRecomendados.map((S,L)=>i.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300",children:[i.jsx("span",{className:"font-medium",children:S.foco}),S.justificativo?i.jsx("span",{className:"block text-slate-600 dark:text-slate-400",children:S.justificativo}):null]},L))})]}):null,(C=l.proximosPasos)!=null&&C.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Prximos pasos"}),i.jsx("ol",{className:"list-decimal pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.proximosPasos.map((S,L)=>i.jsx("li",{children:S},L))})]}):null,(_=l.indicadores)!=null&&_.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.indicadores.map((S,L)=>i.jsxs("div",{className:"px-3 py-2 rounded border dark:border-slate-700 text-sm",children:[i.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:S.nombre}),i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-100",children:String(S.valor)})]},L))})]}):null]})]}):i.jsx("div",{className:"col-span-2 text-sm text-slate-700 dark:text-slate-300",children:i.jsx(WM,{content:s,context:"dashboard-opr-ai"})})}),!a&&!l&&!s&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Genera un anlisis para obtener tendencias, focos y prximos pasos basados en los ciclos registrados."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:i.jsx(_l,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(nn,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Ciclos Completados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:f})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:i.jsx(Fi,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(Wc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Tiempo Promedio"}),i.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[Math.round(m)," min"]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(ul,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),i.jsx("div",{className:"space-y-2",children:Object.entries(g).map(([S,L])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:S}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:L})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${L/d*100}%`}})})]})},S))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(hm,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Ms Observadas"]}),i.jsx("div",{className:"space-y-2",children:v.map(([S,L])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:S}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:L})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${L/Math.max(...Object.values(x))*100}%`}})})]})},S))})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Ac,{className:"w-5 h-5 text-blue-600"}),"Estado de los Ciclos"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),i.jsx("tbody",{children:e.map(S=>i.jsxs("tr",{className:"border-t dark:border-slate-700",children:[i.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:S.docenteInfo}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(S.fecha).toLocaleDateString()}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:S.asignaturaInfo}),i.jsx("td",{className:"py-2 px-3",children:S.videoObservacionUrl&&S.retroalimentacion.exito?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[i.jsx(nn,{className:"w-3 h-3"})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[i.jsx(Ac,{className:"w-3 h-3"})," Pendiente"]})})]},S.id))})]})})]})]})},blt=({acompanamientoId:e,onEdit:t,readOnly:r=!1,allowDelete:a=!0})=>{const[n,s]=N.useState([]),[o,l]=N.useState(!0),[c,u]=N.useState(null);N.useEffect(()=>{l(!0),u(null);let m=null;try{m=Het(e,g=>{s(g),l(!1)},async g=>{console.warn("Suscripcin ciclos fall, usando fetch una vez.",g);try{const x=await yD(e);s(x)}catch(x){u((x==null?void 0:x.message)||"No se pudieron cargar los ciclos OPR.")}finally{l(!1)}})}catch(g){console.warn("Fallo suscripcin, hago fetch nico.",g),(async()=>{try{const x=await yD(e);s(x)}catch(x){u((x==null?void 0:x.message)||"No se pudieron cargar los ciclos OPR.")}finally{l(!1)}})()}return()=>{try{m&&m()}catch{}}},[e]);const d=async m=>{if(confirm("Eliminar este ciclo OPR? Esta accin no se puede deshacer."))try{await wD(m)}catch{alert("No se pudo eliminar el ciclo.")}},[f,h]=N.useState(!1);return o?i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-amber-600"})," Cargando ciclos OPR..."]}):c?i.jsx("div",{className:"p-3 border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/20 rounded",children:i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:c})}):n.length?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Ciclos OPR"}),i.jsx("button",{onClick:()=>h(!f),className:"px-4 py-2 text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 rounded-lg shadow-sm transition-colors",children:f?"Ver Lista":"Ver Dashboard"})]}),f?i.jsx("div",{children:i.jsx(vlt,{ciclos:n})}):i.jsx("div",{className:"space-y-3",children:n.map(m=>{var g;return i.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm",children:i.jsxs("div",{className:"flex justify-between items-start gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yte,{className:"w-4 h-4 text-purple-600"}),i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:m.nombreCiclo||"Ciclo"}),i.jsxs("span",{className:"text-sm text-slate-500",children:[" ",new Date(m.fecha).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-600 dark:text-slate-300",children:[m.videoObservacionUrl&&i.jsxs("a",{className:"flex items-center gap-1 hover:underline text-blue-600 dark:text-blue-400",href:m.videoObservacionUrl,target:"_blank",rel:"noopener noreferrer",title:"Ver video de observacin",children:[i.jsx(CNe,{className:"w-4 h-4"})," Video observacin"]}),((g=m.retroalimentacion)==null?void 0:g.videoModeloUrl)&&i.jsxs("a",{className:"flex items-center gap-1 hover:underline text-blue-600 dark:text-blue-400",href:m.retroalimentacion.videoModeloUrl,target:"_blank",rel:"noopener noreferrer",title:"Ver video modelo",children:[i.jsx(LR,{className:"w-4 h-4"})," Video modelo"]}),m.horaInicio&&m.horaTermino&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Wc,{className:"w-4 h-4"})," ",m.horaInicio,"",m.horaTermino]})]})]}),!r&&i.jsxs("div",{className:"flex items-center gap-2",children:[t&&i.jsx("button",{onClick:()=>t(m),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Editar"}),a&&i.jsx("button",{onClick:()=>d(m.id),title:"Eliminar ciclo",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(sn,{className:"w-4 h-4"})})]})]})},m.id)})})]}):i.jsx("div",{className:"p-6 text-center bg-slate-100 dark:bg-slate-800 rounded",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"No hay ciclos OPR registrados para este acompaamiento."})})},ylt=({data:e})=>i.jsx("div",{className:"space-y-4",children:e.map((r,a)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),i.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+a))}),wlt=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState(null),[u,d]=N.useState(L2),f=N.useCallback(async()=>{n(!0);try{let x;if(e.email)try{x=await zet(e.email.toLowerCase())}catch{x=await KW(e.nombreCompleto)}else x=await KW(e.nombreCompleto);const v=x.sort((y,w)=>{const j=y.fecha?new Date(y.fecha).getTime():0;return(w.fecha?new Date(w.fecha).getTime():0)-j});r(v),o(null)}catch(x){console.error("Error al cargar acompaamientos desde Firestore",x),o("No se pudieron cargar tus acompaamientos desde la nube.")}finally{n(!1)}},[e.nombreCompleto]),h=N.useCallback(async()=>{try{const x=await Vet(e.nombreCompleto);x&&d(x)}catch(x){console.error("Error al cargar rbrica personalizada",x)}},[e.nombreCompleto]);N.useEffect(()=>{f(),h()},[f,h]);const m=N.useMemo(()=>{if(!l)return[];const x={};return u.forEach(v=>{x[v.domain]={total:0,count:0},v.criteria.forEach(y=>{const w=l.rubricaResultados[y.name];w&&(x[v.domain].total+=w,x[v.domain].count++)})}),Object.entries(x).map(([v,y])=>({label:v,value:y.count>0?y.total/y.count:0}))},[l,u]),g=x=>{const v=new pr;v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),v.setFont("helvetica","bold"),v.setFontSize(16),v.setTextColor(40),v.text("Informe de Acompaamiento Docente",v.internal.pageSize.getWidth()/2,25,{align:"center"}),v.setFontSize(12),v.setFont("helvetica","normal"),bi(v,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=v.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const O=[],B=["Dbil","Incipiente","Satisfactorio","Avanzado"];u.forEach(T=>{O.push([{content:T.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),T.criteria.forEach(C=>{const _=x.rubricaResultados[C.name],S=_?B[_-1]:"No evaluado";O.push([C.name,S])})}),bi(v,{startY:y,head:[["Indicador","Nivel de Logro"]],body:O,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=v.lastAutoTable.finalY+15}const w=(O,B)=>{if(!B)return;y>250&&(v.addPage(),y=20,v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),v.setFont("helvetica","bold"),v.setFontSize(14),v.setTextColor(40),v.text(O,14,y),y+=8,v.setFont("helvetica","normal"),v.setFontSize(11),v.setTextColor(60);const T=v.splitTextToSize(B.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);v.text(T,14,y),y+=T.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentacin Consolidada",x.retroalimentacionConsolidada);const j=v.getNumberOfPages();for(let O=1;O<=j;O++)v.setPage(O),v.setFontSize(8),v.setTextColor(128),v.text(`Pgina ${O} de ${j}`,v.internal.pageSize.getWidth()/2,v.internal.pageSize.getHeight()-10,{align:"center"});v.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a mi historial"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompaamiento"}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(l.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",l.curso," - ",l.asignatura]})]}),i.jsxs("button",{onClick:()=>g(l),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[i.jsx(Kte,{})," Exportar PDF"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[i.jsx("h3",{children:"Retroalimentacin Consolidada (IA)"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.retroalimentacionConsolidada||"No se ha generado retroalimentacin."})}),i.jsx("h3",{children:"Observaciones Generales"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.observacionesGenerales||"Sin observaciones."})})]})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeo por Dominio"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx(ylt,{data:m})})]})]}),l.id&&i.jsxs("div",{className:"mt-10",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Mis Ciclos OPR"}),i.jsx("div",{className:"border rounded-lg dark:border-slate-700 p-4 bg-white dark:bg-slate-800",children:i.jsx(blt,{acompanamientoId:l.id,readOnly:!0,allowDelete:!1})})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompaamientos"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aqu encontrars el historial de tus observaciones de clase y la retroalimentacin asociada."}),a&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompaamientos desde la nube..."}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!a&&t.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompaamientos registrados en la nube."}),i.jsx("div",{className:"space-y-4",children:!a&&t.length>0?t.map(x=>i.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),i.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!a&&i.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"An no tienes acompaamientos de clase registrados."})]})})]})},Nlt=e=>{console.log(" Iniciando suscripcin a todas las planificaciones...");try{const t=ht(vr,"planificaciones"),r=Dt(t,Yt("fechaCreacion","desc"));return nr(r,n=>{const s=[];n.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Todas las planificaciones cargadas:",s.length),e(s)},n=>{throw console.error(" Error al cargar todas las planificaciones:",n),n})}catch(t){throw console.error(" Error al configurar suscripcin a todas las planificaciones:",t),t}},Elt=(e,t)=>{if(console.log(" Iniciando suscripcin a planificaciones del usuario:",e),!e)throw console.error(" userId no proporcionado"),new Error("userId es requerido");try{const r=ht(vr,"planificaciones"),a=Dt(r,ur("userId","==",e),Yt("fechaCreacion","desc"));return nr(a,s=>{const o=[];s.forEach(l=>{const c=l.data();o.push({id:l.id,...c})}),console.log(" Planificaciones del usuario cargadas:",o.length),t(o)},s=>{throw console.error(" Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error(" Error al configurar suscripcin a planificaciones del usuario:",r),r}};function Clt(e){for(var t=e.length/6|0,r=new Array(t),a=0;a<t;)r[a]="#"+e.slice(a*6,++a*6);return r}const jlt=Clt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var klt={value:function(){}};function dfe(){for(var e=0,t=arguments.length,r={},a;e<t;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new aj(r)}function aj(e){this._=e}function _lt(e,t){return e.trim().split(/^|\s+/).map(function(r){var a="",n=r.indexOf(".");if(n>=0&&(a=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}aj.prototype=dfe.prototype={constructor:aj,on:function(e,t){var r=this._,a=_lt(e+"",r),n,s=-1,o=a.length;if(arguments.length<2){for(;++s<o;)if((n=(e=a[s]).type)&&(n=Slt(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(n=(e=a[s]).type)r[n]=LX(r[n],e.name,t);else if(t==null)for(n in r)r[n]=LX(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new aj(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),a=0,n,s;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],a=0,n=s.length;a<n;++a)s[a].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],n=0,s=a.length;n<s;++n)a[n].value.apply(t,r)}};function Slt(e,t){for(var r=0,a=e.length,n;r<a;++r)if((n=e[r]).name===t)return n.value}function LX(e,t,r){for(var a=0,n=e.length;a<n;++a)if(e[a].name===t){e[a]=klt,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:t,value:r}),e}const Blt=Object.freeze(Object.defineProperty({__proto__:null,dispatch:dfe},Symbol.toStringTag,{value:"Module"})),Tlt=I0e(Blt);var v6,MX;function Ilt(){if(MX)return v6;MX=1;const e=Tlt.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},a=64,n=2048;v6=function(){var O=[256,256],B=s,T=o,C=c,_=l,S=l,L=u,P=d,k=x,M=[],U=1/0,z=e("word","end"),Q=null,q=Math.random,V={},Y=w;V.canvas=function(R){return arguments.length?(Y=j(R),V):Y},V.start=function(){var R=K(Y()),F=y((O[0]>>5)*O[1]),W=null,X=M.length,ne=-1,le=[],ie=M.map(function(Ae,ke){return Ae.text=B.call(this,Ae,ke),Ae.font=T.call(this,Ae,ke),Ae.style=_.call(this,Ae,ke),Ae.weight=S.call(this,Ae,ke),Ae.rotate=L.call(this,Ae,ke),Ae.size=~~C.call(this,Ae,ke),Ae.padding=P.call(this,Ae,ke),Ae}).sort(function(Ae,ke){return ke.size-Ae.size});return Q&&clearInterval(Q),Q=setInterval(ae,0),ae(),V;function ae(){for(var Ae=Date.now();Date.now()-Ae<U&&++ne<X&&Q;){var ke=ie[ne];ke.x=O[0]*(q()+.5)>>1,ke.y=O[1]*(q()+.5)>>1,f(R,ke,ie,ne),ke.hasText&&J(F,ke,W)&&(le.push(ke),z.call("word",V,ke),W?m(W,ke):W=[{x:ke.x+ke.x0,y:ke.y+ke.y0},{x:ke.x+ke.x1,y:ke.y+ke.y1}],ke.x-=O[0]>>1,ke.y-=O[1]>>1)}ne>=X&&(V.stop(),z.call("end",V,le,W))}},V.stop=function(){Q&&(clearInterval(Q),Q=null);for(const R of M)delete R.sprite;return V};function K(R){const F=R.getContext("2d",{willReadFrequently:!0});R.width=R.height=1;const W=Math.sqrt(F.getImageData(0,0,1,1).data.length>>2);return R.width=(a<<5)/W,R.height=n/W,F.fillStyle=F.strokeStyle="red",{context:F,ratio:W}}function J(R,F,W){O[0],O[1];for(var X=F.x,ne=F.y,le=Math.sqrt(O[0]*O[0]+O[1]*O[1]),ie=k(O),ae=q()<.5?1:-1,Ae=-ae,ke,re,Re;(ke=ie(Ae+=ae))&&(re=~~ke[0],Re=~~ke[1],!(Math.min(Math.abs(re),Math.abs(Re))>=le));)if(F.x=X+re,F.y=ne+Re,!(F.x+F.x0<0||F.y+F.y0<0||F.x+F.x1>O[0]||F.y+F.y1>O[1])&&(!W||g(F,W))&&!h(F,R,O[0])){for(var Le=F.sprite,Te=F.width>>5,de=O[0]>>5,Ce=F.x-(Te<<4),me=Ce&127,ye=32-me,oe=F.y1-F.y0,fe=(F.y+F.y0)*de+(Ce>>5),be,Pe=0;Pe<oe;Pe++){be=0;for(var $e=0;$e<=Te;$e++)R[fe+$e]|=be<<ye|($e<Te?(be=Le[Pe*Te+$e])>>>me:0);fe+=de}return!0}return!1}return V.timeInterval=function(R){return arguments.length?(U=R??1/0,V):U},V.words=function(R){return arguments.length?(M=R,V):M},V.size=function(R){return arguments.length?(O=[+R[0],+R[1]],V):O},V.font=function(R){return arguments.length?(T=j(R),V):T},V.fontStyle=function(R){return arguments.length?(_=j(R),V):_},V.fontWeight=function(R){return arguments.length?(S=j(R),V):S},V.rotate=function(R){return arguments.length?(L=j(R),V):L},V.text=function(R){return arguments.length?(B=j(R),V):B},V.spiral=function(R){return arguments.length?(k=r[R]||R,V):k},V.fontSize=function(R){return arguments.length?(C=j(R),V):C},V.padding=function(R){return arguments.length?(P=j(R),V):P},V.random=function(R){return arguments.length?(q=R,V):q},V.on=function(){var R=z.on.apply(z,arguments);return R===z?V:R},V};function s(O){return O.text}function o(){return"serif"}function l(){return"normal"}function c(O){return Math.sqrt(O.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(O,B,T,C){if(!B.sprite){var _=O.context,S=O.ratio;_.clearRect(0,0,(a<<5)/S,n/S);var L=0,P=0,k=0,M=T.length;for(--C;++C<M;){B=T[C],_.save(),_.font=B.style+" "+B.weight+" "+~~((B.size+1)/S)+"px "+B.font;const ke=_.measureText(B.text),re=-Math.floor(ke.width/2);let Re=(ke.width+1)*S,Le=B.size<<1;if(B.rotate){var U=Math.sin(B.rotate*t),z=Math.cos(B.rotate*t),Q=Re*z,q=Re*U,V=Le*z,Y=Le*U;Re=Math.max(Math.abs(Q+Y),Math.abs(Q-Y))+31>>5<<5,Le=~~Math.max(Math.abs(q+V),Math.abs(q-V))}else Re=Re+31>>5<<5;if(Le>k&&(k=Le),L+Re>=a<<5&&(L=0,P+=k,k=0),P+Le>=n)break;_.translate((L+(Re>>1))/S,(P+(Le>>1))/S),B.rotate&&_.rotate(B.rotate*t),_.fillText(B.text,re,0),B.padding&&(_.lineWidth=2*B.padding,_.strokeText(B.text,re,0)),_.restore(),B.width=Re,B.height=Le,B.xoff=L,B.yoff=P,B.x1=Re>>1,B.y1=Le>>1,B.x0=-B.x1,B.y0=-B.y1,B.hasText=!0,L+=Re}for(var K=_.getImageData(0,0,(a<<5)/S,n/S).data,J=[];--C>=0;)if(B=T[C],!!B.hasText){for(var R=B.width,F=R>>5,W=B.y1-B.y0,X=0;X<W*F;X++)J[X]=0;if(L=B.xoff,L==null)return;P=B.yoff;for(var ne=0,le=-1,ie=0;ie<W;ie++){for(var X=0;X<R;X++){var ae=F*ie+(X>>5),Ae=K[(P+ie)*(a<<5)+(L+X)<<2]?1<<31-X%32:0;J[ae]|=Ae,ne|=Ae}ne?le=ie:(B.y0++,W--,ie--,P++)}B.y1=B.y0+le,B.sprite=J.slice(0,(B.y1-B.y0)*F)}}}function h(O,B,T){T>>=5;for(var C=O.sprite,_=O.width>>5,S=O.x-(_<<4),L=S&127,P=32-L,k=O.y1-O.y0,M=(O.y+O.y0)*T+(S>>5),U,z=0;z<k;z++){U=0;for(var Q=0;Q<=_;Q++)if((U<<P|(Q<_?(U=C[z*_+Q])>>>L:0))&B[M+Q])return!0;M+=T}return!1}function m(O,B){var T=O[0],C=O[1];B.x+B.x0<T.x&&(T.x=B.x+B.x0),B.y+B.y0<T.y&&(T.y=B.y+B.y0),B.x+B.x1>C.x&&(C.x=B.x+B.x1),B.y+B.y1>C.y&&(C.y=B.y+B.y1)}function g(O,B){return O.x+O.x1>B[0].x&&O.x+O.x0<B[1].x&&O.y+O.y1>B[0].y&&O.y+O.y0<B[1].y}function x(O){var B=O[0]/O[1];return function(T){return[B*(T*=.1)*Math.cos(T),T*Math.sin(T)]}}function v(O){var B=4,T=B*O[0]/O[1],C=0,_=0;return function(S){var L=S<0?-1:1;switch(Math.sqrt(1+4*L*S)-L&3){case 0:C+=T;break;case 1:_+=B;break;case 2:C-=T;break;default:_-=B;break}return[C,_]}}function y(O){for(var B=[],T=-1;++T<O;)B[T]=0;return B}function w(){return document.createElement("canvas")}function j(O){return typeof O=="function"?O:function(){return O}}return v6}var Olt=Ilt();const Flt=Dl(Olt),Dlt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),Plt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Rlt=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Llt=e=>{const[t,r]=N.useState([]),[a,n]=N.useState(!0),[s,o]=N.useState(null),l=N.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return N.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){o("Usuario no autenticado"),n(!1);return}try{let c;const u=d=>{r(d),n(!1),o(null)};if(l)c=Nlt(u);else{const d=e.email||e.id||"";c=Elt(u,d)}return c}catch(c){o(c instanceof Error?c.message:"Error al conectar con la base de datos"),n(!1)}},[e,l]),{planificaciones:t,loading:a,error:s,canViewAllPlans:l}},Mlt=({plan:e,onClose:t})=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[i.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),i.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:i.jsx(Plt,{})})]}),i.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{className:"mt-2",children:[i.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),i.jsx("div",{className:"mt-3",children:i.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),i.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,a)=>i.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",a+1,": ",r.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:[i.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},a))}),e.reflexionUnidad&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexin Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?i.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,a)=>i.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[i.jsxs("span",{className:"font-bold text-amber-500",children:[a+1,"."]})," ",r]},r))}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafos"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),UX=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Ult=["1 Medio","2 Medio","3 Medio","4 Medio"],Qlt=({words:e})=>{const t=N.useRef(null);return N.useEffect(()=>{if(!e.length||!t.current)return;const r=Wu(t.current);r.selectAll("*").remove();const a=Flt().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",n);a.start();function n(s){r.attr("width",a.size()[0]).attr("height",a.size()[1]).append("g").attr("transform",`translate(${a.size()[0]/2},${a.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",o=>`${o.size}px`).style("font-family","Impact").style("fill",(o,l)=>zS(jlt)(l.toString())).attr("text-anchor","middle").attr("transform",o=>`translate(${[o.x,o.y]})rotate(${o.rotate})`).text(o=>o.text)}},[e]),i.jsx("svg",{ref:t})},Hlt=({planificaciones:e})=>{const[t,r]=N.useState("todos"),[a,n]=N.useState("todos"),s=N.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),o=N.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(a==="todos"||d.asignatura===a)&&d.reflexionUnidad),[e,t,a]),l=N.useMemo(()=>{const d=UX.reduce((f,h)=>({...f,[h]:0}),{});return o.forEach(f=>{var h,m;return(m=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=UX.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[o]),c=N.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(o.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(d.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(h).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[o]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[i.jsx("option",{value:"todos",children:"Todos los Niveles"}),Ult.map(d=>i.jsx("option",{value:d,children:d},d))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{value:a,onChange:d=>n(d.target.value),className:u,children:s.map(d=>i.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),l.every(d=>d.value===0)?i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):i.jsx("ul",{className:"space-y-3",children:l.map((d,f)=>i.jsxs("li",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(l[0].value||1)*100}%`}})})]})]},d.text))})]}),i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?i.jsx(Qlt,{words:c}):i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},zlt=({currentUser:e})=>{const{planificaciones:t,loading:r,error:a,canViewAllPlans:n}=Llt(e),[s,o]=N.useState("seguimiento"),[l,c]=N.useState("1"),[u,d]=N.useState(null),[f,h]=N.useState(null),m=N.useMemo(()=>{const v={"1":"1 Medio","2":"2 Medio","3":"3 Medio","4":"4 Medio"};return t.filter(y=>y.nivel===v[l]&&y.tipo==="Unidad")},[t,l]),g=[{key:"1",label:"1 Medio"},{key:"2",label:"2 Medio"},{key:"3",label:"3 Medio"},{key:"4",label:"4 Medio"}];if(!(e!=null&&e.id))return i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{children:"Usuario no autenticado."})});if(r)return i.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[i.jsx(Rlt,{}),i.jsx("span",{children:"Cargando planificaciones..."})]});if(a)return i.jsx("div",{className:"text-center py-8",children:i.jsxs("p",{className:"text-red-500",children:["Error: ",a]})});const x=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>i.jsx("button",{onClick:()=>c(v.key),className:`${l===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):i.jsx("div",{className:"space-y-4",children:En.map(v=>{const y=m.filter(j=>j.asignatura===v);if(y.length===0)return null;const w=u===v;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("button",{onClick:()=>d(w?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),i.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),i.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:i.jsx(Dlt,{})})]}),w&&i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:i.jsx("ul",{className:"space-y-3",children:y.map(j=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>h(j),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:j.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",j.autor||"N/A"]})]})},j.id))})})]},v)})})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),n&&i.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Vista administrativa"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>o("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),i.jsx("button",{onClick:()=>o("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Anlisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&i.jsx(Hlt,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),f&&i.jsx(Mlt,{plan:f,onClose:()=>h(null)})]})},D4="analisisTaxonomicos",Vlt=async()=>{try{const e=Dt(ht(vr,D4),Yt("uploadDate","desc"));return(await Ir(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los anlisis:",e),new Error("No se pudieron cargar los anlisis taxonmicos")}},$lt=async e=>{if(!e)return[];try{const t=Dt(ht(vr,D4),ur("userId","==",e),Yt("uploadDate","desc"));return(await Ir(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error al obtener anlisis por usuario:",t),new Error("No se pudieron cargar los anlisis del usuario")}},Glt=async e=>{try{return{id:(await Zr(ht(vr,D4),e)).id,...e}}catch(t){throw console.error("Error al crear anlisis:",t),new Error("No se pudo crear el anlisis taxonmico")}},qlt=async e=>{try{const t=Jt(vr,D4,e);await xn(t)}catch(t){throw console.error("Error al eliminar anlisis:",t,"ID:",e),new Error("No se pudo eliminar el anlisis taxonmico")}},L1="multicopias",S7=e=>{if(e===null||typeof e!="object")return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,a])=>{a!==void 0&&(t[r]=typeof a=="object"&&a!==null?S7(a):a)}),t},QX=e=>{try{if(!e)return;if(typeof e.toDate=="function")return e.toDate().toISOString();if(e.seconds)return new Date(e.seconds*1e3+Math.floor((e.nanoseconds||0)/1e6)).toISOString()}catch{}},B7=e=>{const t=e.data()||{};return{...t,id:e.id,createdAt:QX(t.createdAt)||new Date().toISOString(),updatedAt:QX(t.updatedAt)||void 0}};async function Klt(e,t="multicopias"){const r=Date.now(),a=e.name.replace(/\s+/g,"_"),n=`${t}/${r}/${a}`,s=rx(gS,n);return await AS(s,e),await NN(s)}async function ffe(e){const{id:t,createdAt:r,updatedAt:a,solicitanteEmailLower:n,...s}=e||{},o=s,l=S7({...o,estado:o.estado||"Enviada",solicitanteEmailLower:o.solicitanteEmail?o.solicitanteEmail.toLowerCase():void 0,createdAt:Ga(),updatedAt:Ga()});return(await Zr(ht(st,L1),l)).id}async function Afe(e,t){if(!e)throw new Error("updateSolicitudMulticopia: id requerido");const r=S7({...t,updatedAt:Ga()});await Bo(Jt(st,L1,e),r)}function hfe(e,t){const r=ht(st,L1);let a;return e.emailLower?a=Dt(r,ur("solicitanteEmailLower","==",e.emailLower),Yt("createdAt","desc")):e.solicitanteId?a=Dt(r,ur("solicitanteId","==",e.solicitanteId),Yt("createdAt","desc")):a=Dt(r,Yt("createdAt","desc")),nr(a,n=>t(n.docs.map(B7)),n=>{console.error("subscribeMulticopiasPorSolicitante",n),t([])})}function mfe(e,t){const r=ht(st,L1),a=Dt(r,Yt("createdAt","desc"));return nr(a,n=>{const o=n.docs.map(B7).filter(l=>!(e.nivel&&e.nivel!=="Todos"&&(l.nivel||"")!==e.nivel||e.curso&&e.curso!=="Todos"&&(l.curso||"")!==e.curso||e.asignatura&&e.asignatura!=="Todas"&&(l.asignatura||"")!==e.asignatura||e.docenteNombre&&e.docenteNombre!=="Todos"&&(l.solicitanteNombre||"")!==e.docenteNombre||e.estado&&e.estado!=="Todos"&&(l.estado||"Enviada")!==e.estado));t(o)},n=>{console.error("subscribeMulticopiasAllConFiltros",n),t([])})}async function N2(e,t,r,a){if(!e)throw new Error("cambiarEstadoMulticopia: id requerido");const n={estado:t};t==="Visada"&&(n.visadoPor=r),t==="Aceptada"&&(n.aceptadoPor=r),t==="Rechazada"&&(n.rechazadoPor=r,a!=null&&a.motivoRechazo&&(n.motivoRechazo=a.motivoRechazo)),t==="Completada"&&(n.completadoPor=r),await Afe(e,n)}async function pfe(e){try{if(!e.solicitanteNombre&&!e.solicitanteEmail)return;await nre({docenteNombre:e.solicitanteNombre,docenteEmail:e.solicitanteEmail,tipo:"alerta",titulo:"Multicopia aceptada",mensaje:"Su solicitud fue aceptada. La multicopia estar lista en un plazo mximo de 48 horas.",estudianteNombre:void 0,estudianteId:void 0,accionRequerida:void 0})}catch(t){console.warn("No se pudo crear notificacin de aceptacin:",t)}}async function gfe(e,t){if(!e)throw new Error("eliminarSolicitudMulticopia: id requerido");if(t!=null&&t.adjuntoUrl)try{const r=rx(gS,t.adjuntoUrl);await zte(r)}catch(r){console.warn("No se pudo eliminar adjunto de Storage (continuando con borrado de doc):",r)}await xn(Jt(st,L1,e))}async function xfe(e={}){const{emailLower:t,max:r=200}=e;let a;const n=ht(st,L1);t?a=Dt(n,ur("solicitanteEmailLower","==",t)):a=Dt(n,Yt("createdAt","desc"));let o=(await Ir(a)).docs.map(B7).filter(l=>!!l.adjuntoUrl);return t&&(o=o.sort((l,c)=>(c.createdAt||"").localeCompare(l.createdAt||""))),o.slice(0,r)}const Wlt=Object.freeze(Object.defineProperty({__proto__:null,cambiarEstadoMulticopia:N2,createSolicitudMulticopia:ffe,eliminarSolicitudMulticopia:gfe,listarAdjuntosMulticopias:xfe,notificarAceptacionMulticopia:pfe,subscribeMulticopiasAllConFiltros:mfe,subscribeMulticopiasPorSolicitante:hfe,updateSolicitudMulticopia:Afe,uploadAdjuntoMulticopia:Klt},Symbol.toStringTag,{value:"Module"})),HX=["1 Medio","2 Medio","3 Medio","4 Medio"],tm=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],uv={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},Xlt=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),zX=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState(null),[u,d]=N.useState(""),[f,h]=N.useState(!1),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState([]),[j,O]=N.useState(""),[B,T]=N.useState(""),[C,_]=N.useState(""),[S,L]=N.useState(""),[P,k]=N.useState(""),[M,U]=N.useState("resumen"),z=N.useCallback(async()=>{if(e!=null&&e.id){n(!0);try{const F=e.profile==="SUBDIRECCION"?await Vlt():await $lt(e.id);r(F),o(null)}catch(F){console.error("Error al cargar anlisis:",F),o("No se pudieron cargar los anlisis.")}finally{n(!1)}}},[e]);N.useEffect(()=>{z()},[z]),N.useEffect(()=>{(async()=>{try{const F=(e.email||"").toLowerCase(),X=(await xfe({emailLower:e.profile==="SUBDIRECCION"?void 0:F,max:300})).map(ne=>({id:ne.id,titulo:ne.tituloMaterial,url:ne.adjuntoUrl,createdAt:ne.createdAt,asignatura:ne.asignatura,nivel:ne.nivel}));w(X)}catch(F){console.warn("No se pudieron cargar adjuntos de Multicopias:",F)}})()},[e]);const Q=async F=>{var X;const W=(X=F.target.files)==null?void 0:X[0];if(W){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(W.type)){o("Por favor, suba un archivo PDF o DOCX vlido.");return}g(W),d(W.name),o(null);const le=new FileReader;le.onloadend=()=>{var ae;const ie=(ae=le.result)==null?void 0:ae.split(",")[1];if(!ie){o("No se pudo procesar el archivo. Puede que est vaco o corrupto."),v(null);return}v({mimeType:W.type,data:ie})},le.onerror=()=>o("Error al leer el archivo."),le.readAsDataURL(W)}},q=async()=>{if(!u.trim()||!x&&!j){o("Debe subir un documento o seleccionar uno desde Multicopias, y asignarle un nombre para analizar.");return}if(!B||!C){o("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),o(null);const F=`
            Eres un experto en pedagoga y en la Taxonoma de Bloom. Analiza el siguiente documento de una evaluacin educativa.
            Tu tarea es:
            1. Identificar cada pregunta o tem de evaluacin en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonoma de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser vlido y tener la siguiente estructura:
               {
                 "analysisResults": [
                   { "question": "...", "habilidadBloom": "..." }
                 ],
                 "summary": {
                   "Recordar": 0,
                   "Comprender": 0,
                   "Aplicar": 0,
                   "Analizar": 0,
                   "Evaluar": 0,
                   "Crear": 0
                 }
               }
            Donde "summary" contiene el conteo total de preguntas por cada nivel de Bloom.
        `;tm.reduce((W,X)=>({...W,[X]:{type:"number"}}),{});try{m4("Anlisis Taxonmico",e);const W=so.currentUser;if(!W)throw new Error("Usuario no autenticado.");const X=await W.getIdToken(),ne=await fetch("/api/analisisTaxonomico",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({prompt:F,fileData:x,fileUrl:j||void 0,documentName:u,nivelForm:B,asignaturaForm:C,userId:e.id})});if(!ne.ok){const Ae=await ne.text();throw console.error("Error response from backend:",Ae),new Error(`Error al analizar el documento con IA: ${ne.statusText}`)}const le=await ne.json(),ie={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:le.analysisResults,summary:le.summary,nivel:B,asignatura:C},ae=await Glt(ie);await z(),c(ae),d(""),g(null),v(null),O(""),T(""),_("")}catch(W){console.error(W);const X=W instanceof Error?W.message:"Hubo un error al analizar el documento.";o(X)}finally{h(!1)}},V=async F=>{if(window.confirm("Est seguro de eliminar este anlisis?"))try{await qlt(F),await z(),(l==null?void 0:l.id)===F&&c(null)}catch{o("No se pudo eliminar el anlisis.")}},Y=N.useMemo(()=>t.filter(F=>{const W=S?F.nivel===S:!0,X=P?F.asignatura===P:!0;return W&&X}),[t,S,P]),K=N.useMemo(()=>{const F={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};Y.forEach(X=>{tm.forEach(ne=>{var ie;const le=((ie=X.summary)==null?void 0:ie[ne])||0;F[ne]+=le})});const W=Object.values(F).reduce((X,ne)=>X+ne,0);return{acc:F,total:W}},[Y]),J=N.useMemo(()=>{const F=new Map;Y.forEach(X=>{const ne=X.asignatura||"Sin asignatura";F.has(ne)||F.set(ne,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const le=F.get(ne);tm.forEach(ie=>{var ae;le[ie]+=((ae=X.summary)==null?void 0:ae[ie])||0})});const W=Array.from(F.entries()).map(([X,ne])=>({asignatura:X,counts:ne,total:Object.values(ne).reduce((le,ie)=>le+ie,0)}));return W.sort((X,ne)=>ne.total-X.total),W},[Y]),R=N.useMemo(()=>l?Object.values(l.summary).reduce((W,X)=>W+(X||0),0):0,[l]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Anlisis Taxonomico de Evaluaciones"}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),i.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:i.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),i.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:Q,accept:".pdf,.doc,.docx"}),i.jsx("span",{children:"Cargue un archivo"})]}),i.jsx("p",{className:"pl-1",children:"o arrstrelo aqu"})]}),i.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"O seleccionar desde Multicopias"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:j,onChange:F=>O(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 pl-10",children:[i.jsx("option",{value:"",children:" Seleccione un adjunto "}),y.map(F=>i.jsxs("option",{value:F.url,children:[F.titulo," ",F.nivel?` ${F.nivel}`:""," ",F.asignatura?` ${F.asignatura}`:""]},F.id))]}),i.jsx(f2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se listan adjuntos que hayan sido subidos en Multicopias."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:B,onChange:F=>T(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),HX.map(F=>i.jsx("option",{value:F,children:F},F))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:C,onChange:F=>_(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),En.map(F=>i.jsx("option",{value:F,children:F},F))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),i.jsx("input",{type:"text",id:"documentName",value:u,onChange:F=>d(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("button",{onClick:q,disabled:f||!x&&!j,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?i.jsx(Xlt,{}):"Analizar con IA"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Anlisis"}),a?i.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay anlisis guardados."}):i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(F=>i.jsxs("button",{onClick:()=>c(F),className:`w-full text-left p-3 rounded-md border ${(l==null?void 0:l.id)===F.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[i.jsx("p",{className:"font-semibold truncate",children:F.documentName}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(F.uploadDate).toLocaleString("es-CL")}),(F.nivel||F.asignatura)&&i.jsxs("p",{className:"text-xs text-slate-500",children:[F.nivel||"Nivel s/i","  ",F.asignatura||"Asignatura s/i"]})]},F.id))})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),i.jsxs("select",{value:S,onChange:F=>L(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos"}),HX.map(F=>i.jsx("option",{value:F,children:F},F))]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),i.jsxs("select",{value:P,onChange:F=>k(F.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas"}),En.map(F=>i.jsx("option",{value:F,children:F},F))]})]}),i.jsx("button",{type:"button",onClick:()=>{L(""),k("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>U("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${M==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),i.jsx("button",{onClick:()=>U("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${M==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparacin por Asignatura"})]})}),M==="resumen"?i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Y.length," anlisis considerados"]})]}),i.jsx("div",{className:"space-y-3",children:tm.map(F=>{const W=K.acc[F],X=K.total>0?W/K.total*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:F}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[W," (",X.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${uv[F]} h-4 rounded-full`,style:{width:`${X}%`}})})]},F)})}),i.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:tm.map(F=>i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[i.jsx("span",{className:"text-sm",children:F}),i.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${uv[F]}`,children:K.acc[F]})]},F))})]}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparacin por Asignatura"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[J.length," asignaturas comparadas"]})]}),J.length===0?i.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):i.jsx("div",{className:"space-y-5",children:J.map(F=>{const W=F.total||1;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:F.asignatura}),i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[F.total," tems"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:tm.map(X=>{const ne=F.counts[X]||0,le=ne/W*100;return i.jsx("div",{className:`${uv[X]} h-5`,style:{width:`${le}%`},title:`${X}: ${ne} (${le.toFixed(0)}%)`},X)})}),i.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:tm.map(X=>i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("span",{className:`inline-block w-3 h-3 rounded ${uv[X]}`}),i.jsx("span",{children:X})]},X))})]},F.asignatura)})})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:l?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.documentName}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(l.uploadDate).toLocaleString("es-CL"),(l.nivel||l.asignatura)&&i.jsxs(i.Fragment,{children:[" "," ",l.nivel||"Nivel s/i","  ",l.asignatura||"Asignatura s/i"]})]})]}),i.jsx("button",{onClick:()=>V(l.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",R," preguntas)"]}),i.jsx("div",{className:"space-y-3",children:tm.map(F=>{const W=l.summary[F]||0,X=R>0?W/R*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:F}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[W," (",X.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${uv[F]} h-4 rounded-full`,style:{width:`${X}%`}})})]},F)})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Anlisis"}),i.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / tem"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l.analysisResults.map((F,W)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:F.question}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${uv[F.habilidadBloom]}`,children:F.habilidadBloom})})]},W))})]})})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Anlisis"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo anlisis o seleccione uno del historial para ver los resultados aqu."})]})})]})]})]})},A_="empresas_practicas",Ylt="usuarios",T7="rutas_supervision",I7=e=>{const t=e.data();return{id:e.id,...t}};async function Jlt(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg&region=CL`;try{const n=await(await fetch(r)).json();return n.status==="OK"&&n.results[0]?n.results[0].geometry.location:null}catch(a){return console.error("Error en la llamada a la API de Geocodificacin:",a),null}}const Zlt=e=>{const t=Dt(ht(st,A_),Yt("nombre","asc"));return nr(t,r=>{const a=r.docs.map(n=>I7(n));e(a)},r=>console.error("Error al suscribirse a empresas:",r))},ect=async e=>{const t=e.calificaciones.reduce((a,n)=>a+(n.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const a=await Jlt(e.direccion);a&&(r.coordenadas=a)}if("id"in e&&e.id){const{id:a,...n}=r,s=Jt(st,A_,a);return await ai(s,n,{merge:!0}),a}else return(await Zr(ht(st,A_),{...r,createdAt:Ga()})).id},tct=async e=>{const t=Jt(st,A_,e);await xn(t)},rct=e=>{const t=Dt(ht(st,Ylt),ur("profile","==","PROFESORADO"),Yt("nombreCompleto","asc"));return nr(t,r=>{const a=r.docs.map(n=>I7(n));e(a)},r=>console.error("Error al suscribirse a profesores:",r))},act=async e=>(await Zr(ht(st,T7),{...e,createdAt:Ga()})).id,nct=e=>{const t=Dt(ht(st,T7),Yt("createdAt","desc"));return nr(t,r=>{const a=r.docs.map(n=>I7(n));e(a)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},sct=async e=>{const t=Jt(st,T7,e);await xn(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Eg=function(){return Eg=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Eg.apply(this,arguments)};function ict(e,t,r,a){return new(r||(r=Promise))(function(n,s){function o(u){try{c(a.next(u))}catch(d){s(d)}}function l(u){try{c(a.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?n(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(o,l)}c((a=a.apply(e,[])).next())})}function oct(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&d[0]?a.return:d[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,d[1])).done)return n;switch(a=0,n&&(d=[2&d[0],n.value]),d[0]){case 0:case 1:n=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,a=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!((n=n.length>0&&n[n.length-1])||d[0]!==6&&d[0]!==2)){o=0;continue}if(d[0]===3&&(!n||d[1]>n[0]&&d[1]<n[3])){o.label=d[1];break}if(d[0]===6&&o.label<n[1]){o.label=n[1],n=d;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(d);break}n[2]&&o.ops.pop(),o.trys.pop();continue}d=t.call(e,o)}catch(f){d=[6,f],a=0}finally{r=n=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Fr(){return Fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Fr.apply(this,arguments)}function Cg(e){return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function vfe(e){var t=function(r,a){if(Cg(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var s=n.call(r,a);if(Cg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)}(e,"string");return Cg(t)==="symbol"?t:String(t)}function Uv(e,t,r){return(t=vfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VX(Object(r),!0).forEach(function(a){Uv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VX(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $X(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vfe(a.key),a)}}function MD(e,t){return MD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},MD(e,t)}function h_(e){return h_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h_(e)}function lct(e,t){if(t&&(Cg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function cct(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,a=h_(e);if(t){var n=h_(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return lct(this,r)}}function UD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function bfe(e,t){if(e){if(typeof e=="string")return UD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?UD(e,t):void 0}}function O7(e){return function(t){if(Array.isArray(t))return UD(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||bfe(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var uct=function(){function e(r){var a=this;this._insertTag=function(n){var s;s=a.tags.length===0?a.insertionPoint?a.insertionPoint.nextSibling:a.prepend?a.container.firstChild:a.before:a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(n,s),a.tags.push(n)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var o=document.createElement("style");return o.setAttribute("data-emotion",s.key),s.nonce!==void 0&&o.setAttribute("nonce",s.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(s){if(s.sheet)return s.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===s)return document.styleSheets[o]}(a);try{n.insertRule(r,n.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Mu="-ms-",GX="-moz-",Wa="-webkit-",F7="decl",yfe="@keyframes",dct=Math.abs,P4=String.fromCharCode,fct=Object.assign;function wfe(e){return e.trim()}function an(e,t,r){return e.replace(t,r)}function QD(e,t){return e.indexOf(t)}function bo(e,t){return 0|e.charCodeAt(t)}function sN(e,t,r){return e.slice(t,r)}function Jf(e){return e.length}function D7(e){return e.length}function n5(e,t){return t.push(e),e}var R4=1,Jb=1,Nfe=0,gc=0,gi=0,M1="";function L4(e,t,r,a,n,s,o){return{value:e,root:t,parent:r,type:a,props:n,children:s,line:R4,column:Jb,length:o,return:""}}function Ky(e,t){return fct(L4("",null,null,"",null,null,0),e,{length:-e.length},t)}function nu(){return gi=gc<Nfe?bo(M1,gc++):0,Jb++,gi===10&&(Jb=1,R4++),gi}function bA(){return bo(M1,gc)}function nj(){return gc}function rE(e,t){return sN(M1,e,t)}function iN(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Efe(e){return R4=Jb=1,Nfe=Jf(M1=e),gc=0,[]}function Cfe(e){return M1="",e}function sj(e){return wfe(rE(gc-1,HD(e===91?e+2:e===40?e+1:e)))}function Act(e){for(;(gi=bA())&&gi<33;)nu();return iN(e)>2||iN(gi)>3?"":" "}function hct(e,t){for(;--t&&nu()&&!(gi<48||gi>102||gi>57&&gi<65||gi>70&&gi<97););return rE(e,nj()+(t<6&&bA()==32&&nu()==32))}function HD(e){for(;nu();)switch(gi){case e:return gc;case 34:case 39:e!==34&&e!==39&&HD(gi);break;case 40:e===41&&HD(e);break;case 92:nu()}return gc}function mct(e,t){for(;nu()&&e+gi!==57&&(e+gi!==84||bA()!==47););return"/*"+rE(t,gc-1)+"*"+P4(e===47?e:nu())}function pct(e){for(;!iN(bA());)nu();return rE(e,gc)}function qX(e){return Cfe(ij("",null,null,null,[""],e=Efe(e),0,[0],e))}function ij(e,t,r,a,n,s,o,l,c){for(var u=0,d=0,f=o,h=0,m=0,g=0,x=1,v=1,y=1,w=0,j="",O=n,B=s,T=a,C=j;v;)switch(g=w,w=nu()){case 40:if(g!=108&&bo(C,f-1)==58){QD(C+=an(sj(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:C+=sj(w);break;case 9:case 10:case 13:case 32:C+=Act(g);break;case 92:C+=hct(nj()-1,7);continue;case 47:switch(bA()){case 42:case 47:n5(gct(mct(nu(),nj()),t,r),c);break;default:C+="/"}break;case 123*x:l[u++]=Jf(C)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+d:m>0&&Jf(C)-f&&n5(m>32?WX(C+";",a,r,f-1):WX(an(C," ","")+";",a,r,f-2),c);break;case 59:C+=";";default:if(n5(T=KX(C,t,r,u,d,n,l,j,O=[],B=[],f),s),w===123)if(d===0)ij(C,t,T,T,O,s,f,l,B);else switch(h===99&&bo(C,3)===110?100:h){case 100:case 109:case 115:ij(e,T,T,a&&n5(KX(e,T,T,0,0,n,l,j,n,O=[],f),B),n,B,f,l,a?O:B);break;default:ij(C,T,T,T,[""],B,0,l,B)}}u=d=m=0,x=y=1,j=C="",f=o;break;case 58:f=1+Jf(C),m=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(gi=gc>0?bo(M1,--gc):0,Jb--,gi===10&&(Jb=1,R4--),gi==125))continue}switch(C+=P4(w),w*x){case 38:y=d>0?1:(C+="\f",-1);break;case 44:l[u++]=(Jf(C)-1)*y,y=1;break;case 64:bA()===45&&(C+=sj(nu())),h=bA(),d=f=Jf(j=C+=pct(nj())),w++;break;case 45:g===45&&Jf(C)==2&&(x=0)}}return s}function KX(e,t,r,a,n,s,o,l,c,u,d){for(var f=n-1,h=n===0?s:[""],m=D7(h),g=0,x=0,v=0;g<a;++g)for(var y=0,w=sN(e,f+1,f=dct(x=o[g])),j=e;y<m;++y)(j=wfe(x>0?h[y]+" "+w:an(w,/&\f/g,h[y])))&&(c[v++]=j);return L4(e,t,r,n===0?"rule":l,c,u,d)}function gct(e,t,r){return L4(e,t,r,"comm",P4(gi),sN(e,2,-2),0)}function WX(e,t,r,a){return L4(e,t,r,F7,sN(e,0,a),sN(e,a+1,-1),a)}function jg(e,t){for(var r="",a=D7(e),n=0;n<a;n++)r+=t(e[n],n,e,t)||"";return r}function XX(e,t,r,a){switch(e.type){case"@import":case F7:return e.return=e.return||e.value;case"comm":return"";case yfe:return e.return=e.value+"{"+jg(e.children,a)+"}";case"rule":e.value=e.props.join(",")}return Jf(r=jg(e.children,a))?e.return=e.value+"{"+r+"}":""}function YX(e){var t=D7(e);return function(r,a,n,s){for(var o="",l=0;l<t;l++)o+=e[l](r,a,n,s)||"";return o}}function xct(e){return function(t){t.root||(t=t.return)&&e(t)}}function jfe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var vct=function(e,t,r){for(var a=0,n=0;a=n,n=bA(),a===38&&n===12&&(t[r]=1),!iN(n);)nu();return rE(e,gc)},bct=function(e,t){return Cfe(function(r,a){var n=-1,s=44;do switch(iN(s)){case 0:s===38&&bA()===12&&(a[n]=1),r[n]+=vct(gc-1,a,n);break;case 2:r[n]+=sj(s);break;case 4:if(s===44){r[++n]=bA()===58?"&\f":"",a[n]=r[n].length;break}default:r[n]+=P4(s)}while(s=nu());return r}(Efe(e),t))},JX=new WeakMap,yct=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,a=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||JX.get(r))&&!a){JX.set(e,!0);for(var n=[],s=bct(t,n),o=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=n[l]?s[l].replace(/&\f/g,o[u]):o[u]+" "+s[l]}}},wct=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function kfe(e,t){switch(function(r,a){return 45^bo(r,0)?(((a<<2^bo(r,0))<<2^bo(r,1))<<2^bo(r,2))<<2^bo(r,3):0}(e,t)){case 5103:return Wa+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Wa+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Wa+e+GX+e+Mu+e+e;case 6828:case 4268:return Wa+e+Mu+e+e;case 6165:return Wa+e+Mu+"flex-"+e+e;case 5187:return Wa+e+an(e,/(\w+).+(:[^]+)/,Wa+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Wa+e+Mu+"flex-item-"+an(e,/flex-|-self/,"")+e;case 4675:return Wa+e+Mu+"flex-line-pack"+an(e,/align-content|flex-|-self/,"")+e;case 5548:return Wa+e+Mu+an(e,"shrink","negative")+e;case 5292:return Wa+e+Mu+an(e,"basis","preferred-size")+e;case 6060:return Wa+"box-"+an(e,"-grow","")+Wa+e+Mu+an(e,"grow","positive")+e;case 4554:return Wa+an(e,/([^-])(transform)/g,"$1"+Wa+"$2")+e;case 6187:return an(an(an(e,/(zoom-|grab)/,Wa+"$1"),/(image-set)/,Wa+"$1"),e,"")+e;case 5495:case 3959:return an(e,/(image-set\([^]*)/,Wa+"$1$`$1");case 4968:return an(an(e,/(.+:)(flex-)?(.*)/,Wa+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Wa+e+e;case 4095:case 3583:case 4068:case 2532:return an(e,/(.+)-inline(.+)/,Wa+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Jf(e)-1-t>6)switch(bo(e,t+1)){case 109:if(bo(e,t+4)!==45)break;case 102:return an(e,/(.+:)(.+)-([^]+)/,"$1"+Wa+"$2-$3$1"+GX+(bo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~QD(e,"stretch")?kfe(an(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(bo(e,t+1)!==115)break;case 6444:switch(bo(e,Jf(e)-3-(~QD(e,"!important")&&10))){case 107:return an(e,":",":"+Wa)+e;case 101:return an(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Wa+(bo(e,14)===45?"inline-":"")+"box$3$1"+Wa+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(bo(e,t+11)){case 114:return Wa+e+Mu+an(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Wa+e+Mu+an(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Wa+e+Mu+an(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Wa+e+Mu+e+e}return e}var ZX,s5,oj=typeof document<"u",Nct=oj?void 0:(ZX=function(){return jfe(function(){var e={};return function(t){return e[t]}})},s5=new WeakMap,function(e){if(s5.has(e))return s5.get(e);var t=ZX(e);return s5.set(e,t),t}),Ect=[function(e,t,r,a){if(e.length>-1&&!e.return)switch(e.type){case F7:e.return=kfe(e.value,e.length);break;case yfe:return jg([Ky(e,{value:an(e.value,"@","@"+Wa)})],a);case"rule":if(e.length)return function(n,s){return n.map(s).join("")}(e.props,function(n){switch(function(s,o){return(s=o.exec(s))?s[0]:s}(n,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return jg([Ky(e,{props:[an(n,/:(read-\w+)/,":-moz-$1")]})],a);case"::placeholder":return jg([Ky(e,{props:[an(n,/:(plac\w+)/,":"+Wa+"input-$1")]}),Ky(e,{props:[an(n,/:(plac\w+)/,":-moz-$1")]}),Ky(e,{props:[an(n,/:(plac\w+)/,"-ms-input-$1")]})],a)}return""})}}],_fe=function(e){var t=e.key;if(oj&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var a=e.stylisPlugins||Ect,n,s,o={},l=[];oj&&(n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),j=1;j<w.length;j++)o[w[j]]=!0;l.push(y)}));var c=[yct,wct];if(oj){var u,d=[XX,xct(function(y){u.insert(y)})],f=YX(c.concat(a,d));s=function(y,w,j,O){u=j,jg(qX(y?y+"{"+w.styles+"}":w.styles),f),O&&(v.inserted[w.name]=!0)}}else{var h=[XX],m=YX(c.concat(a,h)),g=Nct(a)(t),x=function(y,w){var j=w.name;return g[j]===void 0&&(g[j]=jg(qX(y?y+"{"+w.styles+"}":w.styles),m)),g[j]};s=function(y,w,j,O){var B=w.name,T=x(y,w);return v.compat===void 0?(O&&(v.inserted[B]=!0),T):O?void(v.inserted[B]=T):T}}var v={key:t,sheet:new uct({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return v.sheet.hydrate(l),v};function ln(e,t,r){return e(r={path:t,exports:{},require:function(a,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(n==null&&r.path)}},r.exports),r.exports}var lo=typeof Symbol=="function"&&Symbol.for,zD=lo?Symbol.for("react.element"):60103,VD=lo?Symbol.for("react.portal"):60106,lj=lo?Symbol.for("react.fragment"):60107,cj=lo?Symbol.for("react.strict_mode"):60108,uj=lo?Symbol.for("react.profiler"):60114,dj=lo?Symbol.for("react.provider"):60109,fj=lo?Symbol.for("react.context"):60110,$D=lo?Symbol.for("react.async_mode"):60111,m_=lo?Symbol.for("react.concurrent_mode"):60111,Aj=lo?Symbol.for("react.forward_ref"):60112,hj=lo?Symbol.for("react.suspense"):60113,Cct=lo?Symbol.for("react.suspense_list"):60120,mj=lo?Symbol.for("react.memo"):60115,pj=lo?Symbol.for("react.lazy"):60116,jct=lo?Symbol.for("react.block"):60121,kct=lo?Symbol.for("react.fundamental"):60117,_ct=lo?Symbol.for("react.responder"):60118,Sct=lo?Symbol.for("react.scope"):60119;function Mc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zD:switch(e=e.type){case $D:case m_:case lj:case uj:case cj:case hj:return e;default:switch(e=e&&e.$$typeof){case fj:case Aj:case pj:case mj:case dj:return e;default:return t}}case VD:return t}}}function eY(e){return Mc(e)===m_}var Bct={AsyncMode:$D,ConcurrentMode:m_,ContextConsumer:fj,ContextProvider:dj,Element:zD,ForwardRef:Aj,Fragment:lj,Lazy:pj,Memo:mj,Portal:VD,Profiler:uj,StrictMode:cj,Suspense:hj,isAsyncMode:function(e){return eY(e)||Mc(e)===$D},isConcurrentMode:eY,isContextConsumer:function(e){return Mc(e)===fj},isContextProvider:function(e){return Mc(e)===dj},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zD},isForwardRef:function(e){return Mc(e)===Aj},isFragment:function(e){return Mc(e)===lj},isLazy:function(e){return Mc(e)===pj},isMemo:function(e){return Mc(e)===mj},isPortal:function(e){return Mc(e)===VD},isProfiler:function(e){return Mc(e)===uj},isStrictMode:function(e){return Mc(e)===cj},isSuspense:function(e){return Mc(e)===hj},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===lj||e===m_||e===uj||e===cj||e===hj||e===Cct||typeof e=="object"&&e!==null&&(e.$$typeof===pj||e.$$typeof===mj||e.$$typeof===dj||e.$$typeof===fj||e.$$typeof===Aj||e.$$typeof===kct||e.$$typeof===_ct||e.$$typeof===Sct||e.$$typeof===jct)},typeOf:Mc};ln(function(e,t){});var tY=ln(function(e){e.exports=Bct}),rY={};rY[tY.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},rY[tY.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var GD=typeof document<"u";function Sfe(e,t,r){var a="";return r.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):a+=n+" "}),a}var P7=function(e,t,r){var a=e.key+"-"+t.name;(r===!1||GD===!1&&e.compat!==void 0)&&e.registered[a]===void 0&&(e.registered[a]=t.styles)},R7=function(e,t,r){P7(e,t,r);var a=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var n="",s=t;do{var o=e.insert(t===s?"."+a:"",s,e.sheet,!0);GD||o===void 0||(n+=o),s=s.next}while(s!==void 0);if(!GD&&n.length!==0)return n}},Tct={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ict=/[A-Z]|^ms/g,Oct=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Bfe=function(e){return e.charCodeAt(1)===45},aY=function(e){return e!=null&&typeof e!="boolean"},b6=jfe(function(e){return Bfe(e)?e:e.replace(Ict,"-$&").toLowerCase()}),nY=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Oct,function(r,a,n){return Zf={name:a,styles:n,next:Zf},a})}return Tct[e]===1||Bfe(e)||typeof t!="number"||t===0?t:t+"px"};function nw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return Zf={name:r.name,styles:r.styles,next:Zf},r.name;if(r.styles!==void 0){var a=r.next;if(a!==void 0)for(;a!==void 0;)Zf={name:a.name,styles:a.styles,next:Zf},a=a.next;var n=r.styles+";";return n}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=nw(c,u,d[h])+";";else for(var m in d){var g=d[m];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=m+"{"+u[g]+"}":aY(g)&&(f+=b6(m)+":"+nY(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=nw(c,u,g);switch(m){case"animation":case"animationName":f+=b6(m)+":"+x+";";break;default:f+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)aY(g[v])&&(f+=b6(m)+":"+nY(m,g[v])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=Zf,o=r(e);return Zf=s,nw(e,t,o)}break}if(t==null)return r;var l=t[r];return l!==void 0?l:r}var Zf,sY=/label:\s*([^\s;\n{]+)\s*(;|$)/g,M4=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,n="";Zf=void 0;var s=e[0];s==null||s.raw===void 0?(a=!1,n+=nw(r,t,s)):n+=s[0];for(var o=1;o<e.length;o++)n+=nw(r,t,e[o]),a&&(n+=s[o]);sY.lastIndex=0;for(var l,c="";(l=sY.exec(n))!==null;)c+="-"+l[1];var u=function(d){for(var f,h=0,m=0,g=d.length;g>=4;++m,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(m+2))<<16;case 2:h^=(255&d.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(m)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(n)+c;return{name:u,styles:n,next:Zf}},Fct=typeof document<"u",Dct=function(e){return e()},Tfe=!!N.useInsertionEffect&&N.useInsertionEffect,Ife=Fct&&Tfe||Dct,iY=Tfe||N.useLayoutEffect,db=typeof document<"u",L7={}.hasOwnProperty,p_=N.createContext(typeof HTMLElement<"u"?_fe({key:"css"}):null);p_.Provider;var U4=function(e){return N.forwardRef(function(t,r){var a=N.useContext(p_);return e(t,a,r)})};db||(U4=function(e){return function(t){var r=N.useContext(p_);return r===null?(r=_fe({key:"css"}),N.createElement(p_.Provider,{value:r},e(t,r))):e(t,r)}});var M7=N.createContext({}),qD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Pct=function(e,t){var r={};for(var a in t)L7.call(t,a)&&(r[a]=t[a]);return r[qD]=e,r},Rct=function(e){var t=e.cache,r=e.serialized,a=e.isStringTag;P7(t,r,a);var n=Ife(function(){return R7(t,r,a)});if(!db&&n!==void 0){for(var s,o=r.name,l=r.next;l!==void 0;)o+=" "+l.name,l=l.next;return N.createElement("style",((s={})["data-emotion"]=t.key+" "+o,s.dangerouslySetInnerHTML={__html:n},s.nonce=t.sheet.nonce,s))}return null},Lct=U4(function(e,t,r){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var n=e[qD],s=[a],o="";typeof e.className=="string"?o=Sfe(t.registered,s,e.className):e.className!=null&&(o=e.className+" ");var l=M4(s,void 0,N.useContext(M7));o+=t.key+"-"+l.name;var c={};for(var u in e)!L7.call(e,u)||u==="css"||u===qD||(c[u]=e[u]);return c.ref=r,c.className=o,N.createElement(N.Fragment,null,N.createElement(Rct,{cache:t,serialized:l,isStringTag:typeof n=="string"}),N.createElement(n,c))});ln(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var _r=function(e,t){var r=arguments;if(t==null||!L7.call(t,"css"))return N.createElement.apply(void 0,r);var a=r.length,n=new Array(a);n[0]=Lct,n[1]=Pct(e,t);for(var s=2;s<a;s++)n[s]=r[s];return N.createElement.apply(null,n)};U4(function(e,t){var r=e.styles,a=M4([r],void 0,N.useContext(M7));if(!db){for(var n,s=a.name,o=a.styles,l=a.next;l!==void 0;)s+=" "+l.name,o+=l.styles,l=l.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:o},t.sheet,c);return c?null:N.createElement("style",((n={})["data-emotion"]=t.key+"-global "+s,n.dangerouslySetInnerHTML={__html:u},n.nonce=t.sheet.nonce,n))}var d=N.useRef();return iY(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+f+" "+a.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,m],function(){h.flush()}},[t]),iY(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(a.next!==void 0&&R7(t,a.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",a,h,!1)}},[t,a.name]),null});function U7(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return M4(t)}var Mct=function e(t){for(var r=t.length,a=0,n="";a<r;a++){var s=t[a];if(s!=null){var o=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))o=e(s);else for(var l in o="",s)s[l]&&l&&(o&&(o+=" "),o+=l);break;default:o=s}o&&(n&&(n+=" "),n+=o)}}return n};function Uct(e,t,r){var a=[],n=Sfe(e,a,r);return a.length<2?r:n+t(a)}var Qct=function(e){var t,r=e.cache,a=e.serializedArr,n=Ife(function(){for(var s="",o=0;o<a.length;o++){var l=R7(r,a[o],!1);db||l===void 0||(s+=l)}if(!db)return s});return db||n.length===0?null:N.createElement("style",((t={})["data-emotion"]=r.key+" "+a.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:n},t.nonce=r.sheet.nonce,t))};U4(function(e,t){var r=[],a=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=M4(l,t.registered);return r.push(u),P7(t,u,!1),t.key+"-"+u.name},n={css:a,cx:function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return Uct(t.registered,a,Mct(l))},theme:N.useContext(M7)},s=e.children(n);return N.createElement(N.Fragment,null,N.createElement(Qct,{cache:t,serializedArr:r}),s)});function Wi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,a){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var s,o,l,c,u=[],d=!0,f=!1;try{if(l=(n=n.call(r)).next,a===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(s=l.call(n)).done)&&(u.push(s.value),u.length!==a);d=!0);}catch(h){f=!0,o=h}finally{try{if(!d&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(f)throw o}}return u}}(e,t)||bfe(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function aA(e,t){if(e==null)return{};var r,a,n=function(o,l){if(o==null)return{};var c,u,d={},f=Object.keys(o);for(u=0;u<f.length;u++)c=f[u],l.indexOf(c)>=0||(d[c]=o[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Oh(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ofe(e){return Oh(e).getComputedStyle(e)}const i5=Math.round;function Ffe(e){return Pfe(e)?(e.nodeName||"").toLowerCase():""}let o5;function Dfe(e){return e instanceof Oh(e).HTMLElement}function gj(e){return e instanceof Oh(e).Element}function Pfe(e){return e instanceof Oh(e).Node}function oY(e){return typeof ShadowRoot>"u"?!1:e instanceof Oh(e).ShadowRoot||e instanceof ShadowRoot}function Rfe(e){const{overflow:t,overflowX:r,overflowY:a,display:n}=Ofe(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!["inline","contents"].includes(n)}function Hct(){return/^((?!chrome|android).)*safari/i.test(function(){if(o5)return o5;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(o5=e.brands.map(t=>t.brand+"/"+t.version).join(" "),o5):navigator.userAgent}())}function Lfe(e){return gj(e)?e:e.contextElement}const Mfe={x:1,y:1};function lY(e){const t=Lfe(e);if(!Dfe(t))return Mfe;const r=t.getBoundingClientRect(),{width:a,height:n,fallback:s}=function(c){const u=Ofe(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,m=c.offsetHeight,g=i5(d)!==h||i5(f)!==m;return g&&(d=h,f=m),{width:d,height:f,fallback:g}}(t);let o=(s?i5(r.width):r.width)/a,l=(s?i5(r.height):r.height)/n;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}function cY(e,t,r,a){var n,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),l=Lfe(e);let c=Mfe;t&&(c=lY(e));const u=l?Oh(l):window,d=Hct()&&r;let f=(o.left+(d&&((n=u.visualViewport)==null?void 0:n.offsetLeft)||0))/c.x,h=(o.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=o.width/c.x,g=o.height/c.y;if(l){const x=Oh(l),v=a;let y=x.frameElement;for(;y&&a&&v!==x;){const w=lY(y),j=y.getBoundingClientRect(),O=getComputedStyle(y);j.x+=(y.clientLeft+parseFloat(O.paddingLeft))*w.x,j.y+=(y.clientTop+parseFloat(O.paddingTop))*w.y,f*=w.x,h*=w.y,m*=w.x,g*=w.y,f+=j.x,h+=j.y,y=Oh(y).frameElement}}return{width:m,height:g,top:h,right:f+m,bottom:h+g,left:f,x:f,y:h}}function zct(e){if(Ffe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||oY(e)&&e.host||function(r){return((Pfe(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return oY(t)?t.host:t}function Ufe(e){const t=zct(e);return function(r){return["html","body","#document"].includes(Ffe(r))}(t)?t.ownerDocument.body:Dfe(t)&&Rfe(t)?t:Ufe(t)}function xj(e,t){var r;t===void 0&&(t=[]);const a=Ufe(e),n=a===((r=e.ownerDocument)==null?void 0:r.body),s=Oh(a);return n?t.concat(s,s.visualViewport||[],Rfe(a)?a:[]):t.concat(a,xj(a))}var KD=typeof document<"u"?N.useLayoutEffect:N.useEffect,Vct=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],g_=function(){};function $ct(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Gct(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];var s=[].concat(a);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat($ct(e,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var uY=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Cg(e)==="object"&&e!==null?[e]:[];var t},dY=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,wr({},aA(e,Vct))},js=function(e,t,r){var a=e.cx,n=e.getStyles,s=e.getClassNames,o=e.className;return{css:n(t,e),className:a(r??{},s(t,e),o)}};function Q4(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Qfe(e){return Q4(e)?window.pageYOffset:e.scrollTop}function x_(e,t){Q4(e)?window.scrollTo(0,t):e.scrollTop=t}function qct(e,t,r,a){return r*((e=e/a-1)*e*e+1)+t}function l5(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:g_,n=Qfe(e),s=t-n,o=10,l=0;function c(){var u=qct(l+=o,n,s,r);x_(e,u),l<r?window.requestAnimationFrame(c):a(e)}c()}function fY(e,t){var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),n=t.offsetHeight/3;a.bottom+n>r.bottom?x_(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+n,e.scrollHeight)):a.top-n<r.top&&x_(e,Math.max(t.offsetTop-n,0))}function AY(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Hfe=!1,Kct={get passive(){return Hfe=!0}},c5=typeof window<"u"?window:{};c5.addEventListener&&c5.removeEventListener&&(c5.addEventListener("p",g_,Kct),c5.removeEventListener("p",g_,!1));var Wct=Hfe;function Xct(e){return e!=null}function u5(e,t,r){return e?t:r}var Yct=["children","innerProps"],Jct=["children","innerProps"];function Zct(e){var t=e.maxHeight,r=e.menuEl,a=e.minHeight,n=e.placement,s=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=function(z){var Q=getComputedStyle(z),q=Q.position==="absolute",V=/(auto|scroll)/;if(Q.position==="fixed")return document.documentElement;for(var Y=z;Y=Y.parentElement;)if(Q=getComputedStyle(Y),(!q||Q.position!=="static")&&V.test(Q.overflow+Q.overflowY+Q.overflowX))return Y;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),m=h.bottom,g=h.height,x=h.top,v=r.offsetParent.getBoundingClientRect().top,y=o||Q4(d=c)?window.innerHeight:d.clientHeight,w=Qfe(c),j=parseInt(getComputedStyle(r).marginBottom,10),O=parseInt(getComputedStyle(r).marginTop,10),B=v-O,T=y-x,C=B+w,_=f-w-x,S=m-y+w+j,L=w+x-O,P=160;switch(n){case"auto":case"bottom":if(T>=g)return{placement:"bottom",maxHeight:t};if(_>=g&&!o)return s&&l5(c,S,P),{placement:"bottom",maxHeight:t};if(!o&&_>=a||o&&T>=a)return s&&l5(c,S,P),{placement:"bottom",maxHeight:o?T-j:_-j};if(n==="auto"||o){var k=t,M=o?B:C;return M>=a&&(k=Math.min(M-j-l,t)),{placement:"top",maxHeight:k}}if(n==="bottom")return s&&x_(c,S),{placement:"bottom",maxHeight:t};break;case"top":if(B>=g)return{placement:"top",maxHeight:t};if(C>=g&&!o)return s&&l5(c,L,P),{placement:"top",maxHeight:t};if(!o&&C>=a||o&&B>=a){var U=t;return(!o&&C>=a||o&&B>=a)&&(U=o?B-O:C-O),s&&l5(c,L,P),{placement:"top",maxHeight:U}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(n,'".'))}return u}var hY,zfe=function(e){return e==="auto"?"bottom":e},Vfe=N.createContext(null),eut=function(e){var t=e.children,r=e.minMenuHeight,a=e.maxMenuHeight,n=e.menuPlacement,s=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=(N.useContext(Vfe)||{}).setPortalPlacement,u=N.useRef(null),d=Wi(N.useState(a),2),f=d[0],h=d[1],m=Wi(N.useState(null),2),g=m[0],x=m[1],v=l.spacing.controlHeight;return KD(function(){var y=u.current;if(y){var w=s==="fixed",j=Zct({maxHeight:a,menuEl:y,minHeight:r,placement:n,shouldScroll:o&&!w,isFixedPosition:w,controlHeight:v});h(j.maxHeight),x(j.placement),c==null||c(j.placement)}},[a,n,s,o,r,c,v]),t({ref:u,placerProps:wr(wr({},e),{},{placement:g||zfe(n),maxHeight:f})})},tut=function(e){var t=e.children,r=e.innerRef,a=e.innerProps;return _r("div",Fr({},js(e,"menu",{menu:!0}),{ref:r},a),t)},$fe=function(e,t){var r=e.theme,a=r.spacing.baseUnit,n=r.colors;return wr({textAlign:"center"},t?{}:{color:n.neutral40,padding:"".concat(2*a,"px ").concat(3*a,"px")})},rut=$fe,aut=$fe,nut=["size"],sut=["innerProps","isRtl","size"],y6,w6,iut={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Gfe=function(e){var t=e.size,r=aA(e,nut);return _r("svg",Fr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:iut},r))},N6=function(e){return _r(Gfe,Fr({size:20},e),_r("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},mY=function(e){return _r(Gfe,Fr({size:20},e),_r("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},qfe=function(e,t){var r=e.isFocused,a=e.theme,n=a.spacing.baseUnit,s=a.colors;return wr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*n,":hover":{color:r?s.neutral80:s.neutral40}})},out=qfe,lut=qfe,cut=function(){var e=U7.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(hY||(y6=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],w6||(w6=y6.slice(0)),hY=Object.freeze(Object.defineProperties(y6,{raw:{value:Object.freeze(w6)}})))),E6=function(e){var t=e.delay,r=e.offset;return _r("span",{css:U7({animation:"".concat(cut," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},uut=function(e){var t=e.children,r=e.isDisabled,a=e.isFocused,n=e.innerRef,s=e.innerProps,o=e.menuIsOpen;return _r("div",Fr({ref:n},js(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":a,"control--menu-is-open":o}),s,{"aria-disabled":r||void 0}),t)},dut=["data"],fut=function(e){var t=e.children,r=e.cx,a=e.getStyles,n=e.getClassNames,s=e.Heading,o=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return _r("div",Fr({},js(e,"group",{group:!0}),l),_r(s,Fr({},o,{selectProps:d,theme:u,getStyles:a,getClassNames:n,cx:r}),c),_r("div",null,t))},Aut=["innerRef","isDisabled","isHidden","inputClassName"],Kfe={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},hut={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":wr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Kfe)},mut=function(e){return wr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Kfe)},pY=function(e){var t=e.children,r=e.innerProps;return _r("div",r,t)},put=function(e){var t=e.children,r=e.components,a=e.data,n=e.innerProps,s=e.isDisabled,o=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return _r(c,{data:a,innerProps:wr(wr({},js(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),n),selectProps:l},_r(u,{data:a,innerProps:wr({},js(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),_r(d,{data:a,innerProps:wr(wr({},js(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:l}))},gut={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return _r("div",Fr({},js(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||_r(N6,null))},Control:uut,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return _r("div",Fr({},js(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||_r(mY,null))},DownChevron:mY,CrossIcon:N6,Group:fut,GroupHeading:function(e){var t=dY(e);t.data;var r=aA(t,dut);return _r("div",Fr({},js(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return _r("div",Fr({},js(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return _r("span",Fr({},t,js(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,a=dY(e),n=a.innerRef,s=a.isDisabled,o=a.isHidden,l=a.inputClassName,c=aA(a,Aut);return _r("div",Fr({},js(e,"input",{"input-container":!0}),{"data-value":r||""}),_r("input",Fr({className:t({input:!0},l),ref:n,style:mut(o),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,a=e.size,n=a===void 0?4:a,s=aA(e,sut);return _r("div",Fr({},js(wr(wr({},s),{},{innerProps:t,isRtl:r,size:n}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),_r(E6,{delay:0,offset:r}),_r(E6,{delay:160,offset:!0}),_r(E6,{delay:320,offset:!r}))},Menu:tut,MenuList:function(e){var t=e.children,r=e.innerProps,a=e.innerRef,n=e.isMulti;return _r("div",Fr({},js(e,"menuList",{"menu-list":!0,"menu-list--is-multi":n}),{ref:a},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,a=e.controlElement,n=e.innerProps,s=e.menuPlacement,o=e.menuPosition,l=N.useRef(null),c=N.useRef(null),u=Wi(N.useState(zfe(s)),2),d=u[0],f=u[1],h=N.useMemo(function(){return{setPortalPlacement:f}},[]),m=Wi(N.useState(null),2),g=m[0],x=m[1],v=N.useCallback(function(){if(a){var O=function(C){var _=C.getBoundingClientRect();return{bottom:_.bottom,height:_.height,left:_.left,right:_.right,top:_.top,width:_.width}}(a),B=o==="fixed"?0:window.pageYOffset,T=O[d]+B;T===(g==null?void 0:g.offset)&&O.left===(g==null?void 0:g.rect.left)&&O.width===(g==null?void 0:g.rect.width)||x({offset:T,rect:O})}},[a,o,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);KD(function(){v()},[v]);var y=N.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),a&&l.current&&(c.current=function(O,B,T,C){C===void 0&&(C={});const{ancestorScroll:_=!0,ancestorResize:S=!0,elementResize:L=!0,animationFrame:P=!1}=C,k=_&&!P,M=k||S?[...gj(O)?xj(O):O.contextElement?xj(O.contextElement):[],...xj(B)]:[];M.forEach(q=>{k&&q.addEventListener("scroll",T,{passive:!0}),S&&q.addEventListener("resize",T)});let U,z=null;if(L){let q=!0;z=new ResizeObserver(()=>{q||T(),q=!1}),gj(O)&&!P&&z.observe(O),gj(O)||!O.contextElement||P||z.observe(O.contextElement),z.observe(B)}let Q=P?cY(O):null;return P&&function q(){const V=cY(O);!Q||V.x===Q.x&&V.y===Q.y&&V.width===Q.width&&V.height===Q.height||T(),Q=V,U=requestAnimationFrame(q)}(),T(),()=>{var q;M.forEach(V=>{k&&V.removeEventListener("scroll",T),S&&V.removeEventListener("resize",T)}),(q=z)==null||q.disconnect(),z=null,P&&cancelAnimationFrame(U)}}(a,l.current,v,{elementResize:"ResizeObserver"in window}))},[a,v]);KD(function(){y()},[y]);var w=N.useCallback(function(O){l.current=O,y()},[y]);if(!t&&o!=="fixed"||!g)return null;var j=_r("div",Fr({ref:w},js(wr(wr({},e),{},{offset:g.offset,position:o,rect:g.rect}),"menuPortal",{"menu-portal":!0}),n),r);return _r(Vfe.Provider,{value:h},t?R8.createPortal(j,t):j)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,a=e.innerProps,n=aA(e,Jct);return _r("div",Fr({},js(wr(wr({},n),{},{children:r,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,a=e.innerProps,n=aA(e,Yct);return _r("div",Fr({},js(wr(wr({},n),{},{children:r,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),r)},MultiValue:put,MultiValueContainer:pY,MultiValueLabel:pY,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return _r("div",Fr({role:"button"},r),t||_r(N6,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,a=e.isFocused,n=e.isSelected,s=e.innerRef,o=e.innerProps;return _r("div",Fr({},js(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":a,"option--is-selected":n}),{ref:s,"aria-disabled":r},o),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return _r("div",Fr({},js(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,a=e.isDisabled,n=e.isRtl;return _r("div",Fr({},js(e,"container",{"--is-disabled":a,"--is-rtl":n}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,a=e.innerProps;return _r("div",Fr({},js(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),a),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,a=e.isMulti,n=e.hasValue;return _r("div",Fr({},js(e,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":n}),r),t)}},gY=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function xut(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(a=e[r],n=t[r],!(a===n||gY(a)&&gY(n)))return!1;var a,n;return!0}for(var vut={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},xY=function(e){return _r("span",Fr({css:vut},e))},but={guidance:function(e){var t=e.isSearchable,r=e.isMulti,a=e.tabSelectsValue,n=e.context,s=e.isInitialFocus;switch(n){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,a=r===void 0?"":r,n=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(n.length>1?"s":""," ").concat(n.join(","),", selected.");case"select-option":return"option ".concat(a,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,a=e.options,n=e.label,s=n===void 0?"":n,o=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&o)return"value ".concat(s," focused, ").concat(d(o,r),".");if(t==="menu"&&u){var f=l?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(a,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},yut=function(e){var t=e.ariaSelection,r=e.focusedOption,a=e.focusedValue,n=e.focusableOptions,s=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,f=l.getOptionLabel,h=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,x=l.isSearchable,v=l.menuIsOpen,y=l.options,w=l.screenReaderStatus,j=l.tabSelectsValue,O=l.isLoading,B=l["aria-label"],T=l["aria-live"],C=N.useMemo(function(){return wr(wr({},but),d||{})},[d]),_=N.useMemo(function(){var U,z="";if(t&&C.onChange){var Q=t.option,q=t.options,V=t.removedValue,Y=t.removedValues,K=t.value,J=V||Q||(U=K,Array.isArray(U)?null:U),R=J?f(J):"",F=q||Y||void 0,W=F?F.map(f):[],X=wr({isDisabled:J&&g(J,o),label:R,labels:W},t);z=C.onChange(X)}return z},[t,C,g,o,f]),S=N.useMemo(function(){var U="",z=r||a,Q=!!(r&&o&&o.includes(r));if(z&&C.onFocus){var q={focused:z,label:f(z),isDisabled:g(z,o),isSelected:Q,options:n,context:z===r?"menu":"value",selectValue:o,isAppleDevice:u};U=C.onFocus(q)}return U},[r,a,f,g,C,n,o,u]),L=N.useMemo(function(){var U="";if(v&&y.length&&!O&&C.onFilter){var z=w({count:n.length});U=C.onFilter({inputValue:h,resultsMessage:z})}return U},[n,h,v,C,y,w,O]),P=(t==null?void 0:t.action)==="initial-input-focus",k=N.useMemo(function(){var U="";if(C.guidance){var z=a?"value":v?"menu":"input";U=C.guidance({"aria-label":B,context:z,isDisabled:r&&g(r,o),isMulti:m,isSearchable:x,tabSelectsValue:j,isInitialFocus:P})}return U},[B,r,a,m,g,x,v,C,o,j,P]),M=_r(N.Fragment,null,_r("span",{id:"aria-selection"},_),_r("span",{id:"aria-focused"},S),_r("span",{id:"aria-results"},L),_r("span",{id:"aria-guidance"},k));return _r(N.Fragment,null,_r(xY,{id:c},P&&M),_r(xY,{"aria-live":T,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!P&&M))},C6=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],wut=new RegExp("["+C6.map(function(e){return e.letters}).join("")+"]","g"),Wfe={},j6=0;j6<C6.length;j6++)for(var k6=C6[j6],_6=0;_6<k6.letters.length;_6++)Wfe[k6.letters[_6]]=k6.base;var Xfe=function(e){return e.replace(wut,function(t){return Wfe[t]})},Nut=function(e,t){t===void 0&&(t=xut);var r=null;function a(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var o=e.apply(this,n);return r={lastResult:o,lastArgs:n,lastThis:this},o}return a.clear=function(){r=null},a}(Xfe),vY=function(e){return e.replace(/^\s+|\s+$/g,"")},Eut=function(e){return"".concat(e.label," ").concat(e.value)},Cut=["innerRef"];function jut(e){var t=e.innerRef,r=function(a){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];var l=Object.entries(a).filter(function(c){var u=Wi(c,1)[0];return!s.includes(u)});return l.reduce(function(c,u){var d=Wi(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(aA(e,Cut),"onExited","in","enter","exit","appear");return _r("input",Fr({ref:t},r,{css:U7({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var bY=["boxSizing","height","overflow","paddingRight","position"],yY={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function wY(e){e.preventDefault()}function NY(e){e.stopPropagation()}function EY(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function CY(){return"ontouchstart"in window||navigator.maxTouchPoints}var jY=!(typeof window>"u"||!window.document||!window.document.createElement),Wy=0,dv={capture:!1,passive:!1},kut=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},_ut={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Sut(e){var t=e.children,r=e.lockEnabled,a=e.captureEnabled,n=function(o){var l=o.isEnabled,c=o.onBottomArrive,u=o.onBottomLeave,d=o.onTopArrive,f=o.onTopLeave,h=N.useRef(!1),m=N.useRef(!1),g=N.useRef(0),x=N.useRef(null),v=N.useCallback(function(T,C){if(x.current!==null){var _=x.current,S=_.scrollTop,L=_.scrollHeight,P=_.clientHeight,k=x.current,M=C>0,U=L-P-S,z=!1;U>C&&h.current&&(u&&u(T),h.current=!1),M&&m.current&&(f&&f(T),m.current=!1),M&&C>U?(c&&!h.current&&c(T),k.scrollTop=L,z=!0,h.current=!0):!M&&-C>S&&(d&&!m.current&&d(T),k.scrollTop=0,z=!0,m.current=!0),z&&function(Q){Q.cancelable&&Q.preventDefault(),Q.stopPropagation()}(T)}},[c,u,d,f]),y=N.useCallback(function(T){v(T,T.deltaY)},[v]),w=N.useCallback(function(T){g.current=T.changedTouches[0].clientY},[]),j=N.useCallback(function(T){var C=g.current-T.changedTouches[0].clientY;v(T,C)},[v]),O=N.useCallback(function(T){if(T){var C=!!Wct&&{passive:!1};T.addEventListener("wheel",y,C),T.addEventListener("touchstart",w,C),T.addEventListener("touchmove",j,C)}},[j,w,y]),B=N.useCallback(function(T){T&&(T.removeEventListener("wheel",y,!1),T.removeEventListener("touchstart",w,!1),T.removeEventListener("touchmove",j,!1))},[j,w,y]);return N.useEffect(function(){if(l){var T=x.current;return O(T),function(){B(T)}}},[l,O,B]),function(T){x.current=T}}({isEnabled:a===void 0||a,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(o){var l=o.isEnabled,c=o.accountForScrollbars,u=c===void 0||c,d=N.useRef({}),f=N.useRef(null),h=N.useCallback(function(g){if(jY){var x=document.body,v=x&&x.style;if(u&&bY.forEach(function(O){var B=v&&v[O];d.current[O]=B}),u&&Wy<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,j=window.innerWidth-w+y||0;Object.keys(yY).forEach(function(O){var B=yY[O];v&&(v[O]=B)}),v&&(v.paddingRight="".concat(j,"px"))}x&&CY()&&(x.addEventListener("touchmove",wY,dv),g&&(g.addEventListener("touchstart",EY,dv),g.addEventListener("touchmove",NY,dv))),Wy+=1}},[u]),m=N.useCallback(function(g){if(jY){var x=document.body,v=x&&x.style;Wy=Math.max(Wy-1,0),u&&Wy<1&&bY.forEach(function(y){var w=d.current[y];v&&(v[y]=w)}),x&&CY()&&(x.removeEventListener("touchmove",wY,dv),g&&(g.removeEventListener("touchstart",EY,dv),g.removeEventListener("touchmove",NY,dv)))}},[u]);return N.useEffect(function(){if(l){var g=f.current;return h(g),function(){m(g)}}},[l,h,m]),function(g){f.current=g}}({isEnabled:r});return _r(N.Fragment,null,r&&_r("div",{onClick:kut,css:_ut}),t(function(o){n(o),s(o)}))}var But={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Tut=function(e){var t=e.name,r=e.onFocus;return _r("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:But,value:"",onChange:function(){}})};function WD(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function Yfe(){return WD(/^Mac/i)}function Iut(){return WD(/^iPhone/i)||WD(/^iPad/i)||Yfe()&&navigator.maxTouchPoints>1}var Out,Fut={clearIndicator:lut,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,a=e.isFocused,n=e.theme,s=n.colors,o=n.borderRadius;return wr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:n.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:a?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:a?s.primary:s.neutral30}})},dropdownIndicator:out,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,a=r.colors,n=r.spacing;return wr({label:"group",cursor:"default",display:"block"},t?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*n.baseUnit,paddingRight:3*n.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,a=e.theme,n=a.spacing.baseUnit,s=a.colors;return wr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*n,marginTop:2*n})},input:function(e,t){var r=e.isDisabled,a=e.value,n=e.theme,s=n.spacing,o=n.colors;return wr(wr({visibility:r?"hidden":"visible",transform:a?"translateZ(0)":""},hut),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,a=e.size,n=e.theme,s=n.colors,o=n.spacing.baseUnit;return wr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*o})},loadingMessage:aut,menu:function(e,t){var r,a=e.placement,n=e.theme,s=n.borderRadius,o=n.spacing,l=n.colors;return wr((Uv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(a),"100%"),Uv(r,"position","absolute"),Uv(r,"width","100%"),Uv(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var r=e.maxHeight,a=e.theme.spacing.baseUnit;return wr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:a,paddingTop:a})},menuPortal:function(e){var t=e.rect,r=e.offset,a=e.position;return{left:t.left,position:a,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,a=r.spacing,n=r.borderRadius,s=r.colors;return wr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:n/2,margin:a.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,a=r.borderRadius,n=r.colors,s=e.cropWithEllipsis;return wr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:a/2,color:n.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,a=r.spacing,n=r.borderRadius,s=r.colors,o=e.isFocused;return wr({alignItems:"center",display:"flex"},t?{}:{borderRadius:n/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:rut,option:function(e,t){var r=e.isDisabled,a=e.isFocused,n=e.isSelected,s=e.theme,o=s.spacing,l=s.colors;return wr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:n?l.primary:a?l.primary25:"transparent",color:r?l.neutral20:n?l.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:r?void 0:n?l.primary:l.primary50}})},placeholder:function(e,t){var r=e.theme,a=r.spacing,n=r.colors;return wr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:n.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,a=e.theme,n=a.spacing,s=a.colors;return wr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,a=e.isMulti,n=e.hasValue,s=e.selectProps.controlShouldRenderValue;return wr({alignItems:"center",display:a&&n&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},S6={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Dut={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:AY(),captureMenuScroll:!AY(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=wr({ignoreCase:!0,ignoreAccents:!0,stringify:Eut,trim:!0,matchFrom:"any"},Out),a=r.ignoreCase,n=r.ignoreAccents,s=r.stringify,o=r.trim,l=r.matchFrom,c=o?vY(t):t,u=o?vY(s(e)):s(e);return a&&(c=c.toLowerCase(),u=u.toLowerCase()),n&&(c=Nut(c),u=Xfe(u)),l==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function kY(e,t,r,a){return{type:"option",data:t,isDisabled:Zfe(e,t,r),isSelected:eAe(e,t,r),label:Jfe(e,t),value:v_(e,t),index:a}}function d5(e,t){return e.options.map(function(r,a){if("options"in r){var n=r.options.map(function(o,l){return kY(e,o,t,l)}).filter(function(o){return BY(e,o)});return n.length>0?{type:"group",data:r,options:n,index:a}:void 0}var s=kY(e,r,t,a);return BY(e,s)?s:void 0}).filter(Xct)}function _Y(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,O7(r.options.map(function(a){return a.data}))):t.push(r.data),t},[])}function SY(e,t){return e.reduce(function(r,a){return a.type==="group"?r.push.apply(r,O7(a.options.map(function(n){return{data:n.data,id:"".concat(t,"-").concat(a.index,"-").concat(n.index)}}))):r.push({data:a.data,id:"".concat(t,"-").concat(a.index)}),r},[])}function BY(e,t){var r=e.inputValue,a=r===void 0?"":r,n=t.data,s=t.isSelected,o=t.label,l=t.value;return(!rAe(e)||!s)&&tAe(e,{label:o,value:l,data:n},a)}var B6=function(e,t){var r;return((r=e.find(function(a){return a.data===t}))===null||r===void 0?void 0:r.id)||null},Jfe=function(e,t){return e.getOptionLabel(t)},v_=function(e,t){return e.getOptionValue(t)};function Zfe(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function eAe(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var a=v_(e,t);return r.some(function(n){return v_(e,n)===a})}function tAe(e,t,r){return!e.filterOption||e.filterOption(t,r)}var rAe=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Put=1,aAe=function(e){(function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),l&&MD(o,l)})(s,N.Component);var t,r,a,n=cct(s);function s(o){var l;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(l=n.call(this,o)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},l.blockOptionHover=!1,l.isComposing=!1,l.commonProps=void 0,l.initialTouchX=0,l.initialTouchY=0,l.openAfterFocus=!1,l.scrollToFocusedOptionOnUpdate=!1,l.userIsDragging=void 0,l.isAppleDevice=Yfe()||Iut(),l.controlRef=null,l.getControlRef=function(f){l.controlRef=f},l.focusedOptionRef=null,l.getFocusedOptionRef=function(f){l.focusedOptionRef=f},l.menuListRef=null,l.getMenuListRef=function(f){l.menuListRef=f},l.inputRef=null,l.getInputRef=function(f){l.inputRef=f},l.focus=l.focusInput,l.blur=l.blurInput,l.onChange=function(f,h){var m=l.props,g=m.onChange,x=m.name;h.name=x,l.ariaOnChange(f,h),g(f,h)},l.setValue=function(f,h,m){var g=l.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;l.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(l.setState({inputIsHiddenAfterUpdate:!v}),l.onMenuClose()),l.setState({clearFocusValueOnUpdate:!0}),l.onChange(f,{action:h,option:m})},l.selectOption=function(f){var h=l.props,m=h.blurInputOnSelect,g=h.isMulti,x=h.name,v=l.state.selectValue,y=g&&l.isOptionSelected(f,v),w=l.isOptionDisabled(f,v);if(y){var j=l.getOptionValue(f);l.setValue(v.filter(function(O){return l.getOptionValue(O)!==j}),"deselect-option",f)}else{if(w)return void l.ariaOnChange(f,{action:"select-option",option:f,name:x});g?l.setValue([].concat(O7(v),[f]),"select-option",f):l.setValue(f,"select-option")}m&&l.blurInput()},l.removeValue=function(f){var h=l.props.isMulti,m=l.state.selectValue,g=l.getOptionValue(f),x=m.filter(function(y){return l.getOptionValue(y)!==g}),v=u5(h,x,x[0]||null);l.onChange(v,{action:"remove-value",removedValue:f}),l.focusInput()},l.clearValue=function(){var f=l.state.selectValue;l.onChange(u5(l.props.isMulti,[],null),{action:"clear",removedValues:f})},l.popValue=function(){var f=l.props.isMulti,h=l.state.selectValue,m=h[h.length-1],g=h.slice(0,h.length-1),x=u5(f,g,g[0]||null);l.onChange(x,{action:"pop-value",removedValue:m})},l.getFocusedOptionId=function(f){return B6(l.state.focusableOptionsWithIds,f)},l.getFocusableOptionsWithIds=function(){return SY(d5(l.props,l.state.selectValue),l.getElementId("option"))},l.getValue=function(){return l.state.selectValue},l.cx=function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];return Gct.apply(void 0,[l.props.classNamePrefix].concat(h))},l.getOptionLabel=function(f){return Jfe(l.props,f)},l.getOptionValue=function(f){return v_(l.props,f)},l.getStyles=function(f,h){var m=l.props.unstyled,g=Fut[f](h,m);g.boxSizing="border-box";var x=l.props.styles[f];return x?x(g,h):g},l.getClassNames=function(f,h){var m,g;return(m=(g=l.props.classNames)[f])===null||m===void 0?void 0:m.call(g,h)},l.getElementId=function(f){return"".concat(l.state.instancePrefix,"-").concat(f)},l.getComponents=function(){return f=l.props,wr(wr({},gut),f.components);var f},l.buildCategorizedOptions=function(){return d5(l.props,l.state.selectValue)},l.getCategorizedOptions=function(){return l.props.menuIsOpen?l.buildCategorizedOptions():[]},l.buildFocusableOptions=function(){return _Y(l.buildCategorizedOptions())},l.getFocusableOptions=function(){return l.props.menuIsOpen?l.buildFocusableOptions():[]},l.ariaOnChange=function(f,h){l.setState({ariaSelection:wr({value:f},h)})},l.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),l.focusInput())},l.onMenuMouseMove=function(f){l.blockOptionHover=!1},l.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=l.props.openMenuOnClick;l.state.isFocused?l.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&l.onMenuClose():h&&l.openMenu("first"):(h&&(l.openAfterFocus=!0),l.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},l.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||l.props.isDisabled)){var h=l.props,m=h.isMulti,g=h.menuIsOpen;l.focusInput(),g?(l.setState({inputIsHiddenAfterUpdate:!m}),l.onMenuClose()):l.openMenu("first"),f.preventDefault()}},l.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(l.clearValue(),f.preventDefault(),l.openAfterFocus=!1,f.type==="touchend"?l.focusInput():setTimeout(function(){return l.focusInput()}))},l.onScroll=function(f){typeof l.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&Q4(f.target)&&l.props.onMenuClose():typeof l.props.closeMenuOnScroll=="function"&&l.props.closeMenuOnScroll(f)&&l.props.onMenuClose()},l.onCompositionStart=function(){l.isComposing=!0},l.onCompositionEnd=function(){l.isComposing=!1},l.onTouchStart=function(f){var h=f.touches,m=h&&h.item(0);m&&(l.initialTouchX=m.clientX,l.initialTouchY=m.clientY,l.userIsDragging=!1)},l.onTouchMove=function(f){var h=f.touches,m=h&&h.item(0);if(m){var g=Math.abs(m.clientX-l.initialTouchX),x=Math.abs(m.clientY-l.initialTouchY);l.userIsDragging=g>5||x>5}},l.onTouchEnd=function(f){l.userIsDragging||(l.controlRef&&!l.controlRef.contains(f.target)&&l.menuListRef&&!l.menuListRef.contains(f.target)&&l.blurInput(),l.initialTouchX=0,l.initialTouchY=0)},l.onControlTouchEnd=function(f){l.userIsDragging||l.onControlMouseDown(f)},l.onClearIndicatorTouchEnd=function(f){l.userIsDragging||l.onClearIndicatorMouseDown(f)},l.onDropdownIndicatorTouchEnd=function(f){l.userIsDragging||l.onDropdownIndicatorMouseDown(f)},l.handleInputChange=function(f){var h=l.props.inputValue,m=f.currentTarget.value;l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange(m,{action:"input-change",prevInputValue:h}),l.props.menuIsOpen||l.onMenuOpen()},l.onInputFocus=function(f){l.props.onFocus&&l.props.onFocus(f),l.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(l.openAfterFocus||l.props.openMenuOnFocus)&&l.openMenu("first"),l.openAfterFocus=!1},l.onInputBlur=function(f){var h=l.props.inputValue;l.menuListRef&&l.menuListRef.contains(document.activeElement)?l.inputRef.focus():(l.props.onBlur&&l.props.onBlur(f),l.onInputChange("",{action:"input-blur",prevInputValue:h}),l.onMenuClose(),l.setState({focusedValue:null,isFocused:!1}))},l.onOptionHover=function(f){if(!l.blockOptionHover&&l.state.focusedOption!==f){var h=l.getFocusableOptions().indexOf(f);l.setState({focusedOption:f,focusedOptionId:h>-1?l.getFocusedOptionId(f):null})}},l.shouldHideSelectedOptions=function(){return rAe(l.props)},l.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),l.focus()},l.onKeyDown=function(f){var h=l.props,m=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,v=h.inputValue,y=h.isClearable,w=h.isDisabled,j=h.menuIsOpen,O=h.onKeyDown,B=h.tabSelectsValue,T=h.openMenuOnFocus,C=l.state,_=C.focusedOption,S=C.focusedValue,L=C.selectValue;if(!(w||typeof O=="function"&&(O(f),f.defaultPrevented))){switch(l.blockOptionHover=!0,f.key){case"ArrowLeft":if(!m||v)return;l.focusValue("previous");break;case"ArrowRight":if(!m||v)return;l.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(S)l.removeValue(S);else{if(!g)return;m?l.popValue():y&&l.clearValue()}break;case"Tab":if(l.isComposing||f.shiftKey||!j||!B||!_||T&&l.isOptionSelected(_,L))return;l.selectOption(_);break;case"Enter":if(f.keyCode===229)break;if(j){if(!_||l.isComposing)return;l.selectOption(_);break}return;case"Escape":j?(l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange("",{action:"menu-close",prevInputValue:v}),l.onMenuClose()):y&&x&&l.clearValue();break;case" ":if(v)return;if(!j){l.openMenu("first");break}if(!_)return;l.selectOption(_);break;case"ArrowUp":j?l.focusOption("up"):l.openMenu("last");break;case"ArrowDown":j?l.focusOption("down"):l.openMenu("first");break;case"PageUp":if(!j)return;l.focusOption("pageup");break;case"PageDown":if(!j)return;l.focusOption("pagedown");break;case"Home":if(!j)return;l.focusOption("first");break;case"End":if(!j)return;l.focusOption("last");break;default:return}f.preventDefault()}},l.state.instancePrefix="react-select-"+(l.props.instanceId||++Put),l.state.selectValue=uY(o.value),o.menuIsOpen&&l.state.selectValue.length){var c=l.getFocusableOptionsWithIds(),u=l.buildFocusableOptions(),d=u.indexOf(l.state.selectValue[0]);l.state.focusableOptionsWithIds=c,l.state.focusedOption=u[d],l.state.focusedOptionId=B6(c,u[d])}return l}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&fY(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var l=this.props,c=l.isDisabled,u=l.menuIsOpen,d=this.state.isFocused;(d&&!c&&o.isDisabled||d&&u&&!o.menuIsOpen)&&this.focusInput(),d&&c&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!o.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(fY(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,l){this.props.onInputChange(o,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var l=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=o==="first"?0:f.length-1;if(!this.props.isMulti){var m=f.indexOf(u[0]);m>-1&&(h=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(o){var l=this.state,c=l.selectValue,u=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(o){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),o==="up"?d=f>0?f-1:u.length-1:o==="down"?d=(f+1)%u.length:o==="pageup"?(d=f-l)<0&&(d=0):o==="pagedown"?(d=f+l)>u.length-1&&(d=u.length-1):o==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(S6):wr(wr({},S6),this.props.theme):S6}},{key:"getCommonProps",value:function(){var o=this.clearValue,l=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:o,cx:l,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:f,selectProps:m,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,l=o.isClearable,c=o.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(o,l){return Zfe(this.props,o,l)}},{key:"isOptionSelected",value:function(o,l){return eAe(this.props,o,l)}},{key:"filterOption",value:function(o,l){return tAe(this.props,o,l)}},{key:"formatOptionLabel",value:function(o,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(o,{context:l,inputValue:c,selectValue:u})}return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,l=o.isDisabled,c=o.isSearchable,u=o.inputId,d=o.inputValue,f=o.tabIndex,h=o.form,m=o.menuIsOpen,g=o.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,w=v.ariaSelection,j=this.commonProps,O=u||this.getElementId("input"),B=wr(wr(wr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?N.createElement(x,Fr({},j,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:O,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},B)):N.createElement(jut,Fr({id:O,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:g_,onFocus:this.onInputFocus,disabled:l,tabIndex:f,inputMode:"none",form:h,value:""},B))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,l=this.getComponents(),c=l.MultiValue,u=l.MultiValueContainer,d=l.MultiValueLabel,f=l.MultiValueRemove,h=l.SingleValue,m=l.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,j=x.inputValue,O=x.placeholder,B=this.state,T=B.selectValue,C=B.focusedValue,_=B.isFocused;if(!this.hasValue()||!v)return j?null:N.createElement(m,Fr({},g,{key:"placeholder",isDisabled:y,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),O);if(w)return T.map(function(L,P){var k=L===C,M="".concat(o.getOptionLabel(L),"-").concat(o.getOptionValue(L));return N.createElement(c,Fr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:k,isDisabled:y,key:M,index:P,removeProps:{onClick:function(){return o.removeValue(L)},onTouchEnd:function(){return o.removeValue(L)},onMouseDown:function(U){U.preventDefault()}},data:L}),o.formatOptionLabel(L,"value"))});if(j)return null;var S=T[0];return N.createElement(h,Fr({},g,{data:S,isDisabled:y}),this.formatOptionLabel(S,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents().ClearIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!o||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return N.createElement(o,Fr({},l,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents().LoadingIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return o&&d?N.createElement(o,Fr({},l,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),l=o.DropdownIndicator,c=o.IndicatorSeparator;if(!l||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return N.createElement(c,Fr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents().DropdownIndicator;if(!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return N.createElement(o,Fr({},l,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var o=this,l=this.getComponents(),c=l.Group,u=l.GroupHeading,d=l.Menu,f=l.MenuList,h=l.MenuPortal,m=l.LoadingMessage,g=l.NoOptionsMessage,x=l.Option,v=this.commonProps,y=this.state.focusedOption,w=this.props,j=w.captureMenuScroll,O=w.inputValue,B=w.isLoading,T=w.loadingMessage,C=w.minMenuHeight,_=w.maxMenuHeight,S=w.menuIsOpen,L=w.menuPlacement,P=w.menuPosition,k=w.menuPortalTarget,M=w.menuShouldBlockScroll,U=w.menuShouldScrollIntoView,z=w.noOptionsMessage,Q=w.onMenuScrollToTop,q=w.onMenuScrollToBottom;if(!S)return null;var V,Y=function(W,X){var ne=W.type,le=W.data,ie=W.isDisabled,ae=W.isSelected,Ae=W.label,ke=W.value,re=y===le,Re=ie?void 0:function(){return o.onOptionHover(le)},Le=ie?void 0:function(){return o.selectOption(le)},Te="".concat(o.getElementId("option"),"-").concat(X),de={id:Te,onClick:Le,onMouseMove:Re,onMouseOver:Re,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:ae};return N.createElement(x,Fr({},v,{innerProps:de,data:le,isDisabled:ie,isSelected:ae,key:Te,label:Ae,type:ne,value:ke,isFocused:re,innerRef:re?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(W.data,"menu"))};if(this.hasOptions())V=this.getCategorizedOptions().map(function(W){if(W.type==="group"){var X=W.data,ne=W.options,le=W.index,ie="".concat(o.getElementId("group"),"-").concat(le),ae="".concat(ie,"-heading");return N.createElement(c,Fr({},v,{key:ie,data:X,options:ne,Heading:u,headingProps:{id:ae,data:W.data},label:o.formatGroupLabel(W.data)}),W.options.map(function(Ae){return Y(Ae,"".concat(le,"-").concat(Ae.index))}))}if(W.type==="option")return Y(W,"".concat(W.index))});else if(B){var K=T({inputValue:O});if(K===null)return null;V=N.createElement(m,v,K)}else{var J=z({inputValue:O});if(J===null)return null;V=N.createElement(g,v,J)}var R={minMenuHeight:C,maxMenuHeight:_,menuPlacement:L,menuPosition:P,menuShouldScrollIntoView:U},F=N.createElement(eut,Fr({},v,R),function(W){var X=W.ref,ne=W.placerProps,le=ne.placement,ie=ne.maxHeight;return N.createElement(d,Fr({},v,R,{innerRef:X,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:B,placement:le}),N.createElement(Sut,{captureEnabled:j,onTopArrive:Q,onBottomArrive:q,lockEnabled:M},function(ae){return N.createElement(f,Fr({},v,{innerRef:function(Ae){o.getMenuListRef(Ae),ae(Ae)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:o.getElementId("listbox")},isLoading:B,maxHeight:ie,focusedOption:y}),V)}))});return k||P==="fixed"?N.createElement(h,Fr({},v,{appendTo:k,controlElement:this.controlRef,menuPlacement:L,menuPosition:P}),F):F}},{key:"renderFormField",value:function(){var o=this,l=this.props,c=l.delimiter,u=l.isDisabled,d=l.isMulti,f=l.name,h=l.required,m=this.state.selectValue;if(h&&!this.hasValue()&&!u)return N.createElement(Tut,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=m.map(function(y){return o.getOptionValue(y)}).join(c);return N.createElement("input",{name:f,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,w){return N.createElement("input",{key:"i-".concat(w),name:f,type:"hidden",value:o.getOptionValue(y)})}):N.createElement("input",{name:f,type:"hidden",value:""});return N.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return N.createElement("input",{name:f,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,l=this.state,c=l.ariaSelection,u=l.focusedOption,d=l.focusedValue,f=l.isFocused,h=l.selectValue,m=this.getFocusableOptions();return N.createElement(yut,Fr({},o,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),l=o.Control,c=o.IndicatorsContainer,u=o.SelectContainer,d=o.ValueContainer,f=this.props,h=f.className,m=f.id,g=f.isDisabled,x=f.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return N.createElement(u,Fr({},y,{className:h,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),N.createElement(l,Fr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),N.createElement(d,Fr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),N.createElement(c,Fr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],a=[{key:"getDerivedStateFromProps",value:function(o,l){var c=l.prevProps,u=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,f=l.ariaSelection,h=l.isFocused,m=l.prevWasFocused,g=l.instancePrefix,x=o.options,v=o.value,y=o.menuIsOpen,w=o.inputValue,j=o.isMulti,O=uY(v),B={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var T=y?function(M,U){return _Y(d5(M,U))}(o,O):[],C=y?SY(d5(o,O),"".concat(g,"-option")):[],_=u?function(M,U){var z=M.focusedValue,Q=M.selectValue.indexOf(z);if(Q>-1){if(U.indexOf(z)>-1)return z;if(Q<U.length)return U[Q]}return null}(l,O):null,S=function(M,U){var z=M.focusedOption;return z&&U.indexOf(z)>-1?z:U[0]}(l,T);B={selectValue:O,focusedOption:S,focusedOptionId:B6(C,S),focusableOptionsWithIds:C,focusedValue:_,clearFocusValueOnUpdate:!1}}var L=d!=null&&o!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},P=f,k=h&&m;return h&&!k&&(P={value:u5(j,O,O[0]||null),options:O,action:"initial-input-focus"},k=!m),(f==null?void 0:f.action)==="initial-input-focus"&&(P=null),wr(wr(wr({},B),L),{},{prevProps:o,ariaSelection:P,prevWasFocused:k})}}],r&&$X(t.prototype,r),a&&$X(t,a),Object.defineProperty(t,"prototype",{writable:!1}),s}();aAe.defaultProps=Dut;var Rut=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],Lut=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],Q7=ln(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Mut=ln(function(e){var t=Q7.default;e.exports=function(r,a){if(t(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var s=n.call(r,a||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),nAe=ln(function(e){var t=Q7.default;e.exports=function(r){var a=Mut(r,"string");return t(a)==="symbol"?a:String(a)},e.exports.__esModule=!0,e.exports.default=e.exports}),Uut=ln(function(e){e.exports=function(t,r,a){return(r=nAe(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t},e.exports.__esModule=!0,e.exports.default=e.exports});ln(function(e){function t(r,a){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);a&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,s)}return n}e.exports=function(r){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?t(Object(n),!0).forEach(function(s){Uut(r,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(n,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),ln(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),ln(function(e){function t(r,a){for(var n=0;n<a.length;n++){var s=a[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,nAe(s.key),s)}}e.exports=function(r,a,n){return a&&t(r.prototype,a),n&&t(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var Qut=ln(function(e){function t(r,a){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});ln(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Qut(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var TY=ln(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Hut=ln(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),zut=ln(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Vut=ln(function(e){var t=Q7.default;e.exports=function(r,a){if(a&&(t(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zut(r)},e.exports.__esModule=!0,e.exports.default=e.exports});ln(function(e){e.exports=function(t){var r=Hut();return function(){var a,n=TY(t);if(r){var s=TY(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Vut(this,a)}},e.exports.__esModule=!0,e.exports.default=e.exports});var XD=ln(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n},e.exports.__esModule=!0,e.exports.default=e.exports}),$ut=ln(function(e){e.exports=function(t){if(Array.isArray(t))return XD(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Gut=ln(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),sAe=ln(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return XD(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?XD(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),qut=ln(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ln(function(e){e.exports=function(t){return $ut(t)||Gut(t)||sAe(t)||qut()},e.exports.__esModule=!0,e.exports.default=e.exports});var Kut=ln(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Wut=ln(function(e){e.exports=function(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],u=!0,d=!1;try{if(o=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;u=!1}else for(;!(u=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),Xut=ln(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ln(function(e){e.exports=function(t,r){return Kut(t)||Wut(t,r)||sAe(t,r)||Xut()},e.exports.__esModule=!0,e.exports.default=e.exports});var Yut=ln(function(e){e.exports=function(t,r){if(t==null)return{};var a,n,s={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||(s[a]=t[a]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});ln(function(e){e.exports=function(t,r){if(t==null)return{};var a,n,s=Yut(t,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(s[a]=t[a])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),ln(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var Jut=N.forwardRef(function(e,t){var r=function(n){var s=n.defaultOptions,o=s!==void 0&&s,l=n.cacheOptions,c=l!==void 0&&l,u=n.loadOptions;n.options;var d=n.isLoading,f=d!==void 0&&d,h=n.onInputChange,m=n.filterOption,g=m===void 0?null:m,x=aA(n,Lut),v=x.inputValue,y=N.useRef(void 0),w=N.useRef(!1),j=Wi(N.useState(Array.isArray(o)?o:void 0),2),O=j[0],B=j[1],T=Wi(N.useState(v!==void 0?v:""),2),C=T[0],_=T[1],S=Wi(N.useState(o===!0),2),L=S[0],P=S[1],k=Wi(N.useState(void 0),2),M=k[0],U=k[1],z=Wi(N.useState([]),2),Q=z[0],q=z[1],V=Wi(N.useState(!1),2),Y=V[0],K=V[1],J=Wi(N.useState({}),2),R=J[0],F=J[1],W=Wi(N.useState(void 0),2),X=W[0],ne=W[1],le=Wi(N.useState(void 0),2),ie=le[0],ae=le[1];c!==ie&&(F({}),ae(c)),o!==X&&(B(Array.isArray(o)?o:void 0),ne(o)),N.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var Ae=N.useCallback(function(Re,Le){if(!u)return Le();var Te=u(Re,Le);Te&&typeof Te.then=="function"&&Te.then(Le,function(){return Le()})},[u]);N.useEffect(function(){o===!0&&Ae(C,function(Re){w.current&&(B(Re||[]),P(!!y.current))})},[]);var ke=N.useCallback(function(Re,Le){var Te=function(Ce,me,ye){if(ye){var oe=ye(Ce,me);if(typeof oe=="string")return oe}return Ce}(Re,Le,h);if(!Te)return y.current=void 0,_(""),U(""),q([]),P(!1),void K(!1);if(c&&R[Te])_(Te),U(Te),q(R[Te]),P(!1),K(!1);else{var de=y.current={};_(Te),P(!0),K(!M),Ae(Te,function(Ce){w&&de===y.current&&(y.current=void 0,P(!1),U(Te),q(Ce||[]),K(!1),F(Ce?wr(wr({},R),{},Uv({},Te,Ce)):R))})}},[c,Ae,M,R,h]),re=Y?[]:C&&M?Q:O||[];return wr(wr({},x),{},{options:re,isLoading:L||f,onInputChange:ke,filterOption:g})}(e),a=function(n){var s=n.defaultInputValue,o=s===void 0?"":s,l=n.defaultMenuIsOpen,c=l!==void 0&&l,u=n.defaultValue,d=u===void 0?null:u,f=n.inputValue,h=n.menuIsOpen,m=n.onChange,g=n.onInputChange,x=n.onMenuClose,v=n.onMenuOpen,y=n.value,w=aA(n,Rut),j=Wi(N.useState(f!==void 0?f:o),2),O=j[0],B=j[1],T=Wi(N.useState(h!==void 0?h:c),2),C=T[0],_=T[1],S=Wi(N.useState(y!==void 0?y:d),2),L=S[0],P=S[1],k=N.useCallback(function(Y,K){typeof m=="function"&&m(Y,K),P(Y)},[m]),M=N.useCallback(function(Y,K){var J;typeof g=="function"&&(J=g(Y,K)),B(J!==void 0?J:Y)},[g]),U=N.useCallback(function(){typeof v=="function"&&v(),_(!0)},[v]),z=N.useCallback(function(){typeof x=="function"&&x(),_(!1)},[x]),Q=f!==void 0?f:O,q=h!==void 0?h:C,V=y!==void 0?y:L;return wr(wr({},w),{},{inputValue:Q,menuIsOpen:q,onChange:k,onInputChange:M,onMenuClose:z,onMenuOpen:U,value:V})}(r);return N.createElement(aAe,Fr({ref:t},a))}),Zut=Jut,edt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var a,n,s;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(n=a;n--!=0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=a;n--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=a;n--!=0;){var o=s[n];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r},Qv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Qv||(Qv={}));class eg{constructor({apiKey:t,authReferrerPolicy:r,channel:a,client:n,id:s="__googleMapsScriptId",language:o,libraries:l=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=a,this.client=n,this.id=s||"__googleMapsScriptId",this.language=o,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=m,eg.instance){if(!edt(this.options,eg.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(eg.instance.options)}`);return eg.instance}eg.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Qv.FAILURE:this.done?Qv.SUCCESS:this.loading?Qv.LOADING:Qv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(a=>{a?r(a.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var tdt=function(e,t,r){var a,n=e.bounds,s=e.location,o=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),l=Eg({input:t},o);return r&&(l.sessionToken=r),n&&(l.bounds=new((a=google.maps.LatLngBounds).bind.apply(a,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var m=arguments[u],g=0,x=m.length;g<x;g++,h++)f[h]=m[g];return f}([void 0],n)))),s&&(l.location=new google.maps.LatLng(s)),l},rdt=function(e){var t=e.autocompletionRequest,r=e.debounce,a=e.minLengthAutocomplete,n=e.placesService,s=e.sessionToken,o=e.withSessionToken,l=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=N.useRef(null),m=N.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,v=N.useRef(!1),y=N.useRef(null),w=N.useRef(!1),j=N.useRef(c);j.current=c;var O=N.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,m.current=[],y.current=null,v.current=!1},[]);N.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var B=N.useCallback(function(){for(var C=[],_=0;_<arguments.length;_++)C[_]=arguments[_];m.current=C,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(j.current.apply(j,C),v.current=!0),y.current=setTimeout(function(){var S=!0;g&&v.current&&(S=!1),O(),!w.current&&x&&S&&j.current.apply(j,C)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var S=m.current;O(),w.current||j.current.apply(null,S)},f))},[f,u,O,g,x]),T=N.useCallback(function(){y.current&&(j.current.apply(null,m.current),O())},[O]);return[B,O,T]}(function(c,u){if(!n)return u([]);if(c.length<a)return u([]);var d=Eg({},t);n.getPlacePredictions(tdt(d,c,o&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return l},IY=N.forwardRef(function(e,t){var r,a,n,s,o,l,c,u,d=function(x){var v=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,j=N.useState(void 0),O=j[0],B=j[1],T=N.useState(void 0),C=T[0],_=T[1],S=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");B(new window.google.maps.places.AutocompleteService),_(new google.maps.places.AutocompleteSessionToken)};return N.useEffect(function(){v?ict(void 0,void 0,void 0,function(){var L;return oct(this,function(P){switch(P.label){case 0:if(!v)return[2];P.label=1;case 1:return P.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new eg(Eg({apiKey:v},Eg({libraries:["places"]},y))).load()];case 2:P.sent(),P.label=3;case 3:return S(),[3,5];case 4:return L=P.sent(),typeof w=="function"&&w(L),[3,5];case 5:return[2]}})}):S()},[]),{placesService:O,sessionToken:C,setSessionToken:_}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(a=e.apiOptions)!==null&&a!==void 0?a:{},onLoadFailed:(n=e.onLoadFailed)!==null&&n!==void 0?n:console.error}),f=d.placesService,h=d.sessionToken,m=d.setSessionToken,g=rdt({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(o=e.debounce)!==null&&o!==void 0?o:300,minLengthAutocomplete:(l=e.minLengthAutocomplete)!==null&&l!==void 0?l:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return N.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[h]),ct.createElement(Zut,Eg({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var YD=function(e,t){return YD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])},YD(e,t)};function df(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");YD(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var JD=function(){return JD=Object.assign||function(t){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},JD.apply(this,arguments)};function wl(e,t,r,a){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(a.next(d))}catch(f){o(f)}}function c(d){try{u(a.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):n(d.value).then(l,c)}u((a=a.apply(e,[])).next())})}function Xo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,n,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(s=u[0]&2?n.return:u[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,u[1])).done)return s;switch(n=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],n=0}finally{a=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function f5(e,t,r){if(arguments.length===2)for(var a=0,n=t.length,s;a<n;a++)(s||!(a in t))&&(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||t)}var t0=function(){function e(t,r,a,n){this.left=t,this.top=r,this.width=a,this.height=n}return e.prototype.add=function(t,r,a,n){return new e(this.left+t,this.top+r,this.width+a,this.height+n)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var a=Array.from(r).find(function(n){return n.width!==0});return a?new e(a.left+t.windowBounds.left,a.top+t.windowBounds.top,a.width,a.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),H4=function(e,t){return t0.fromClientRect(e,t.getBoundingClientRect())},adt=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var a=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),n=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new t0(0,0,a,n)},z4=function(e){for(var t=[],r=0,a=e.length;r<a;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((n&1023)<<10)+(s&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},Ks=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var a=[],n=-1,s="";++n<r;){var o=e[n];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(n+1===r||a.length>16384)&&(s+=String.fromCharCode.apply(String,a),a.length=0)}return s},OY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ndt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var A5=0;A5<OY.length;A5++)ndt[OY.charCodeAt(A5)]=A5;var FY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var h5=0;h5<FY.length;h5++)E2[FY.charCodeAt(h5)]=h5;var sdt=function(e){var t=e.length*.75,r=e.length,a,n=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(a=0;a<r;a+=4)s=E2[e.charCodeAt(a)],o=E2[e.charCodeAt(a+1)],l=E2[e.charCodeAt(a+2)],c=E2[e.charCodeAt(a+3)],d[n++]=s<<2|o>>4,d[n++]=(o&15)<<4|l>>2,d[n++]=(l&3)<<6|c&63;return u},idt=function(e){for(var t=e.length,r=[],a=0;a<t;a+=2)r.push(e[a+1]<<8|e[a]);return r},odt=function(e){for(var t=e.length,r=[],a=0;a<t;a+=4)r.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return r},kg=5,H7=11,T6=2,ldt=H7-kg,iAe=65536>>kg,cdt=1<<kg,I6=cdt-1,udt=1024>>kg,ddt=iAe+udt,fdt=ddt,Adt=32,hdt=fdt+Adt,mdt=65536>>H7,pdt=1<<ldt,gdt=pdt-1,DY=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},xdt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},vdt=function(e,t){var r=sdt(e),a=Array.isArray(r)?odt(r):new Uint32Array(r),n=Array.isArray(r)?idt(r):new Uint16Array(r),s=24,o=DY(n,s/2,a[4]/2),l=a[5]===2?DY(n,(s+a[4])/2):xdt(a,Math.ceil((s+a[4])/4));return new bdt(a[0],a[1],a[2],a[3],o,l)},bdt=function(){function e(t,r,a,n,s,o){this.initialValue=t,this.errorValue=r,this.highStart=a,this.highValueIndex=n,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>kg],r=(r<<T6)+(t&I6),this.data[r];if(t<=65535)return r=this.index[iAe+(t-55296>>kg)],r=(r<<T6)+(t&I6),this.data[r];if(t<this.highStart)return r=hdt-mdt+(t>>H7),r=this.index[r],r+=t>>kg&gdt,r=this.index[r],r=(r<<T6)+(t&I6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),PY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ydt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var m5=0;m5<PY.length;m5++)ydt[PY.charCodeAt(m5)]=m5;var wdt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",RY=50,Ndt=1,oAe=2,lAe=3,Edt=4,Cdt=5,LY=7,cAe=8,MY=9,Nm=10,ZD=11,UY=12,eP=13,jdt=14,C2=15,tP=16,p5=17,Xy=18,kdt=19,QY=20,rP=21,Yy=22,O6=23,fv=24,Uc=25,j2=26,k2=27,Av=28,_dt=29,tg=30,Sdt=31,g5=32,x5=33,aP=34,nP=35,sP=36,oN=37,iP=38,vj=39,bj=40,F6=41,uAe=42,Bdt=43,Tdt=[9001,65288],dAe="!",ya="",v5="",oP=vdt(wdt),oh=[tg,sP],lP=[Ndt,oAe,lAe,Cdt],fAe=[Nm,cAe],HY=[k2,j2],Idt=lP.concat(fAe),zY=[iP,vj,bj,aP,nP],Odt=[C2,eP],Fdt=function(e,t){t===void 0&&(t="strict");var r=[],a=[],n=[];return e.forEach(function(s,o){var l=oP.get(s);if(l>RY?(n.push(!0),l-=RY):n.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return a.push(o),r.push(tP);if(l===Edt||l===ZD){if(o===0)return a.push(o),r.push(tg);var c=r[o-1];return Idt.indexOf(c)===-1?(a.push(a[o-1]),r.push(c)):(a.push(o),r.push(tg))}if(a.push(o),l===Sdt)return r.push(t==="strict"?rP:oN);if(l===uAe||l===_dt)return r.push(tg);if(l===Bdt)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(oN):r.push(tg);r.push(l)}),[a,r,n]},D6=function(e,t,r,a){var n=a[r];if(Array.isArray(e)?e.indexOf(n)!==-1:e===n)for(var s=r;s<=a.length;){s++;var o=a[s];if(o===t)return!0;if(o!==Nm)break}if(n===Nm)for(var s=r;s>0;){s--;var l=a[s];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=a.length;){c++;var o=a[c];if(o===t)return!0;if(o!==Nm)break}if(l!==Nm)break}return!1},VY=function(e,t){for(var r=e;r>=0;){var a=t[r];if(a===Nm)r--;else return a}return 0},Ddt=function(e,t,r,a,n){if(r[a]===0)return ya;var s=a-1;if(Array.isArray(n)&&n[s]===!0)return ya;var o=s-1,l=s+1,c=t[s],u=o>=0?t[o]:0,d=t[l];if(c===oAe&&d===lAe)return ya;if(lP.indexOf(c)!==-1)return dAe;if(lP.indexOf(d)!==-1||fAe.indexOf(d)!==-1)return ya;if(VY(s,t)===cAe)return v5;if(oP.get(e[s])===ZD||(c===g5||c===x5)&&oP.get(e[l])===ZD||c===LY||d===LY||c===MY||[Nm,eP,C2].indexOf(c)===-1&&d===MY||[p5,Xy,kdt,fv,Av].indexOf(d)!==-1||VY(s,t)===Yy||D6(O6,Yy,s,t)||D6([p5,Xy],rP,s,t)||D6(UY,UY,s,t))return ya;if(c===Nm)return v5;if(c===O6||d===O6)return ya;if(d===tP||c===tP)return v5;if([eP,C2,rP].indexOf(d)!==-1||c===jdt||u===sP&&Odt.indexOf(c)!==-1||c===Av&&d===sP||d===QY||oh.indexOf(d)!==-1&&c===Uc||oh.indexOf(c)!==-1&&d===Uc||c===k2&&[oN,g5,x5].indexOf(d)!==-1||[oN,g5,x5].indexOf(c)!==-1&&d===j2||oh.indexOf(c)!==-1&&HY.indexOf(d)!==-1||HY.indexOf(c)!==-1&&oh.indexOf(d)!==-1||[k2,j2].indexOf(c)!==-1&&(d===Uc||[Yy,C2].indexOf(d)!==-1&&t[l+1]===Uc)||[Yy,C2].indexOf(c)!==-1&&d===Uc||c===Uc&&[Uc,Av,fv].indexOf(d)!==-1)return ya;if([Uc,Av,fv,p5,Xy].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===Uc)return ya;if([Av,fv].indexOf(h)!==-1)f--;else break}if([k2,j2].indexOf(d)!==-1)for(var f=[p5,Xy].indexOf(c)!==-1?o:s;f>=0;){var h=t[f];if(h===Uc)return ya;if([Av,fv].indexOf(h)!==-1)f--;else break}if(iP===c&&[iP,vj,aP,nP].indexOf(d)!==-1||[vj,aP].indexOf(c)!==-1&&[vj,bj].indexOf(d)!==-1||[bj,nP].indexOf(c)!==-1&&d===bj||zY.indexOf(c)!==-1&&[QY,j2].indexOf(d)!==-1||zY.indexOf(d)!==-1&&c===k2||oh.indexOf(c)!==-1&&oh.indexOf(d)!==-1||c===fv&&oh.indexOf(d)!==-1||oh.concat(Uc).indexOf(c)!==-1&&d===Yy&&Tdt.indexOf(e[l])===-1||oh.concat(Uc).indexOf(d)!==-1&&c===Xy)return ya;if(c===F6&&d===F6){for(var m=r[s],g=1;m>0&&(m--,t[m]===F6);)g++;if(g%2!==0)return ya}return c===g5&&d===x5?ya:v5},Pdt=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Fdt(e,t.lineBreak),a=r[0],n=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(n=n.map(function(l){return[Uc,tg,uAe].indexOf(l)!==-1?oN:l}));var o=t.wordBreak==="keep-all"?s.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[a,n,o]},Rdt=function(){function e(t,r,a,n){this.codePoints=t,this.required=r===dAe,this.start=a,this.end=n}return e.prototype.slice=function(){return Ks.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Ldt=function(e,t){var r=z4(e),a=Pdt(r,t),n=a[0],s=a[1],o=a[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=ya;u<l&&(d=Ddt(r,s,n,++u,o))===ya;);if(d!==ya||u===l){var f=new Rdt(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Mdt=1,Udt=2,aE=4,$Y=8,b_=10,GY=47,sw=92,Qdt=9,Hdt=32,b5=34,Jy=61,zdt=35,Vdt=36,$dt=37,y5=39,w5=40,Zy=41,Gdt=95,sc=45,qdt=33,Kdt=60,Wdt=62,Xdt=64,Ydt=91,Jdt=93,Zdt=61,eft=123,N5=63,tft=125,qY=124,rft=126,aft=128,KY=65533,P6=42,ug=43,nft=44,sft=58,ift=59,lN=46,oft=0,lft=8,cft=11,uft=14,dft=31,fft=127,Vf=-1,AAe=48,hAe=97,mAe=101,Aft=102,hft=117,mft=122,pAe=65,gAe=69,xAe=70,pft=85,gft=90,tl=function(e){return e>=AAe&&e<=57},xft=function(e){return e>=55296&&e<=57343},hv=function(e){return tl(e)||e>=pAe&&e<=xAe||e>=hAe&&e<=Aft},vft=function(e){return e>=hAe&&e<=mft},bft=function(e){return e>=pAe&&e<=gft},yft=function(e){return vft(e)||bft(e)},wft=function(e){return e>=aft},E5=function(e){return e===b_||e===Qdt||e===Hdt},y_=function(e){return yft(e)||wft(e)||e===Gdt},WY=function(e){return y_(e)||tl(e)||e===sc},Nft=function(e){return e>=oft&&e<=lft||e===cft||e>=uft&&e<=dft||e===fft},lm=function(e,t){return e!==sw?!1:t!==b_},C5=function(e,t,r){return e===sc?y_(t)||lm(t,r):y_(e)?!0:!!(e===sw&&lm(e,t))},R6=function(e,t,r){return e===ug||e===sc?tl(t)?!0:t===lN&&tl(r):tl(e===lN?t:e)},Eft=function(e){var t=0,r=1;(e[t]===ug||e[t]===sc)&&(e[t]===sc&&(r=-1),t++);for(var a=[];tl(e[t]);)a.push(e[t++]);var n=a.length?parseInt(Ks.apply(void 0,a),10):0;e[t]===lN&&t++;for(var s=[];tl(e[t]);)s.push(e[t++]);var o=s.length,l=o?parseInt(Ks.apply(void 0,s),10):0;(e[t]===gAe||e[t]===mAe)&&t++;var c=1;(e[t]===ug||e[t]===sc)&&(e[t]===sc&&(c=-1),t++);for(var u=[];tl(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Ks.apply(void 0,u),10):0;return r*(n+l*Math.pow(10,-o))*Math.pow(10,c*d)},Cft={type:2},jft={type:3},kft={type:4},_ft={type:13},Sft={type:8},Bft={type:21},Tft={type:9},Ift={type:10},Oft={type:11},Fft={type:12},Dft={type:14},j5={type:23},Pft={type:1},Rft={type:25},Lft={type:24},Mft={type:26},Uft={type:27},Qft={type:28},Hft={type:29},zft={type:31},cP={type:32},vAe=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(z4(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==cP;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case b5:return this.consumeStringToken(b5);case zdt:var r=this.peekCodePoint(0),a=this.peekCodePoint(1),n=this.peekCodePoint(2);if(WY(r)||lm(a,n)){var s=C5(r,a,n)?Udt:Mdt,o=this.consumeName();return{type:5,value:o,flags:s}}break;case Vdt:if(this.peekCodePoint(0)===Jy)return this.consumeCodePoint(),_ft;break;case y5:return this.consumeStringToken(y5);case w5:return Cft;case Zy:return jft;case P6:if(this.peekCodePoint(0)===Jy)return this.consumeCodePoint(),Dft;break;case ug:if(R6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case nft:return kft;case sc:var l=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(R6(l,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(C5(l,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===sc&&u===Wdt)return this.consumeCodePoint(),this.consumeCodePoint(),Lft;break;case lN:if(R6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case GY:if(this.peekCodePoint(0)===P6)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===P6&&(d=this.consumeCodePoint(),d===GY))return this.consumeToken();if(d===Vf)return this.consumeToken()}break;case sft:return Mft;case ift:return Uft;case Kdt:if(this.peekCodePoint(0)===qdt&&this.peekCodePoint(1)===sc&&this.peekCodePoint(2)===sc)return this.consumeCodePoint(),this.consumeCodePoint(),Rft;break;case Xdt:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),m=this.peekCodePoint(2);if(C5(f,h,m)){var o=this.consumeName();return{type:7,value:o}}break;case Ydt:return Qft;case sw:if(lm(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Jdt:return Hft;case Zdt:if(this.peekCodePoint(0)===Jy)return this.consumeCodePoint(),Sft;break;case eft:return Oft;case tft:return Fft;case hft:case pft:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===ug&&(hv(x)||x===N5)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case qY:if(this.peekCodePoint(0)===Jy)return this.consumeCodePoint(),Tft;if(this.peekCodePoint(0)===qY)return this.consumeCodePoint(),Bft;break;case rft:if(this.peekCodePoint(0)===Jy)return this.consumeCodePoint(),Ift;break;case Vf:return cP}return E5(t)?(this.consumeWhiteSpace(),zft):tl(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):y_(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Ks(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();hv(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var a=!1;r===N5&&t.length<6;)t.push(r),r=this.consumeCodePoint(),a=!0;if(a){var n=parseInt(Ks.apply(void 0,t.map(function(c){return c===N5?AAe:c})),16),s=parseInt(Ks.apply(void 0,t.map(function(c){return c===N5?xAe:c})),16);return{type:30,start:n,end:s}}var o=parseInt(Ks.apply(void 0,t),16);if(this.peekCodePoint(0)===sc&&hv(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];hv(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Ks.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===w5?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===w5?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Vf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===y5||r===b5){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Vf||this.peekCodePoint(0)===Zy)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),j5)}for(;;){var n=this.consumeCodePoint();if(n===Vf||n===Zy)return{type:22,value:Ks.apply(void 0,t)};if(E5(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Vf||this.peekCodePoint(0)===Zy?(this.consumeCodePoint(),{type:22,value:Ks.apply(void 0,t)}):(this.consumeBadUrlRemnants(),j5);if(n===b5||n===y5||n===w5||Nft(n))return this.consumeBadUrlRemnants(),j5;if(n===sw)if(lm(n,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),j5;else t.push(n)}},e.prototype.consumeWhiteSpace=function(){for(;E5(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Zy||t===Vf)return;lm(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,a="";t>0;){var n=Math.min(r,t);a+=Ks.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),a},e.prototype.consumeStringToken=function(t){var r="",a=0;do{var n=this._value[a];if(n===Vf||n===void 0||n===t)return r+=this.consumeStringSlice(a),{type:0,value:r};if(n===b_)return this._value.splice(0,a),Pft;if(n===sw){var s=this._value[a+1];s!==Vf&&s!==void 0&&(s===b_?(r+=this.consumeStringSlice(a),a=-1,this._value.shift()):lm(n,s)&&(r+=this.consumeStringSlice(a),r+=Ks(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=aE,a=this.peekCodePoint(0);for((a===ug||a===sc)&&t.push(this.consumeCodePoint());tl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(a===lN&&tl(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=$Y;tl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((a===gAe||a===mAe)&&((n===ug||n===sc)&&tl(s)||tl(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=$Y;tl(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Eft(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],a=t[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(C5(n,s,o)){var l=this.consumeName();return{type:15,number:r,flags:a,unit:l}}return n===$dt?(this.consumeCodePoint(),{type:16,number:r,flags:a}):{type:17,number:r,flags:a}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(hv(t)){for(var r=Ks(t);hv(this.peekCodePoint(0))&&r.length<6;)r+=Ks(this.consumeCodePoint());E5(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(r,16);return a===0||xft(a)||a>1114111?KY:a}return t===Vf?KY:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(WY(r))t+=Ks(r);else if(lm(r,this.peekCodePoint(0)))t+=Ks(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),bAe=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new vAe;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},a=this.consumeToken();;){if(a.type===32||$ft(a,t))return r;this.reconsumeToken(a),r.values.push(this.consumeComponentValue()),a=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return r;this.reconsumeToken(a),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?cP:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),nE=function(e){return e.type===15},U1=function(e){return e.type===17},Cn=function(e){return e.type===20},Vft=function(e){return e.type===0},uP=function(e,t){return Cn(e)&&e.value===t},yAe=function(e){return e.type!==31},Zb=function(e){return e.type!==31&&e.type!==4},_A=function(e){var t=[],r=[];return e.forEach(function(a){if(a.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}a.type!==31&&r.push(a)}),r.length&&t.push(r),t},$ft=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},rp=function(e){return e.type===17||e.type===15},xi=function(e){return e.type===16||rp(e)},wAe=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},_o={type:17,number:0,flags:aE},z7={type:16,number:50,flags:aE},Em={type:16,number:100,flags:aE},_2=function(e,t,r){var a=e[0],n=e[1];return[Un(a,t),Un(typeof n<"u"?n:a,r)]},Un=function(e,t){if(e.type===16)return e.number/100*t;if(nE(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},NAe="deg",EAe="grad",CAe="rad",jAe="turn",V4={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case NAe:return Math.PI*t.number/180;case EAe:return Math.PI/200*t.number;case CAe:return t.number;case jAe:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},kAe=function(e){return e.type===15&&(e.unit===NAe||e.unit===EAe||e.unit===CAe||e.unit===jAe)},_Ae=function(e){var t=e.filter(Cn).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[_o,_o];case"to top":case"bottom":return Zu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[_o,Em];case"to right":case"left":return Zu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Em,Em];case"to bottom":case"top":return Zu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Em,_o];case"to left":case"right":return Zu(270)}return 0},Zu=function(e){return Math.PI*e/180},Lm={name:"color",parse:function(e,t){if(t.type===18){var r=Gft[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var a=t.value.substring(0,1),n=t.value.substring(1,2),s=t.value.substring(2,3);return Cm(parseInt(a+a,16),parseInt(n+n,16),parseInt(s+s,16),1)}if(t.value.length===4){var a=t.value.substring(0,1),n=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return Cm(parseInt(a+a,16),parseInt(n+n,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var a=t.value.substring(0,2),n=t.value.substring(2,4),s=t.value.substring(4,6);return Cm(parseInt(a,16),parseInt(n,16),parseInt(s,16),1)}if(t.value.length===8){var a=t.value.substring(0,2),n=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return Cm(parseInt(a,16),parseInt(n,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var l=Fh[t.value.toUpperCase()];if(typeof l<"u")return l}return Fh.TRANSPARENT}},Mm=function(e){return(255&e)===0},Ki=function(e){var t=255&e,r=255&e>>8,a=255&e>>16,n=255&e>>24;return t<255?"rgba("+n+","+a+","+r+","+t/255+")":"rgb("+n+","+a+","+r+")"},Cm=function(e,t,r,a){return(e<<24|t<<16|r<<8|Math.round(a*255)<<0)>>>0},XY=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},YY=function(e,t){var r=t.filter(Zb);if(r.length===3){var a=r.map(XY),n=a[0],s=a[1],o=a[2];return Cm(n,s,o,1)}if(r.length===4){var l=r.map(XY),n=l[0],s=l[1],o=l[2],c=l[3];return Cm(n,s,o,c)}return 0};function L6(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var JY=function(e,t){var r=t.filter(Zb),a=r[0],n=r[1],s=r[2],o=r[3],l=(a.type===17?Zu(a.number):V4.parse(e,a))/(Math.PI*2),c=xi(n)?n.number/100:0,u=xi(s)?s.number/100:0,d=typeof o<"u"&&xi(o)?Un(o,1):1;if(c===0)return Cm(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,m=L6(h,f,l+1/3),g=L6(h,f,l),x=L6(h,f,l-1/3);return Cm(m*255,g*255,x*255,d)},Gft={hsl:JY,hsla:JY,rgb:YY,rgba:YY},iw=function(e,t){return Lm.parse(e,bAe.create(t).parseComponentValue())},Fh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},qft={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Cn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Kft={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$4=function(e,t){var r=Lm.parse(e,t[0]),a=t[1];return a&&xi(a)?{color:r,stop:a}:{color:r,stop:null}},ZY=function(e,t){var r=e[0],a=e[e.length-1];r.stop===null&&(r.stop=_o),a.stop===null&&(a.stop=Em);for(var n=[],s=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=Un(l,t);c>s?n.push(c):n.push(s),s=c}else n.push(null)}for(var u=null,o=0;o<n.length;o++){var d=n[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,h=n[u-1],m=(d-h)/(f+1),g=1;g<=f;g++)n[u+g-1]=m*g;u=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,n[v]/t),0)}})},Wft=function(e,t,r){var a=t/2,n=r/2,s=Un(e[0],t)-a,o=n-Un(e[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},Xft=function(e,t,r){var a=typeof e=="number"?e:Wft(e,t,r),n=Math.abs(t*Math.sin(a))+Math.abs(r*Math.cos(a)),s=t/2,o=r/2,l=n/2,c=Math.sin(a-Math.PI/2)*l,u=Math.cos(a-Math.PI/2)*l;return[n,s-u,s+u,o-c,o+c]},Dd=function(e,t){return Math.sqrt(e*e+t*t)},eJ=function(e,t,r,a,n){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=Dd(r-c,a-u);return(n?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},Yft=function(e,t,r,a,n){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-a),Math.abs(r),Math.abs(r-n)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-a)),o=Math.min(Math.abs(r),Math.abs(r-n)));break;case 2:if(e.shape===0)s=o=Math.min(Dd(t,r),Dd(t,r-n),Dd(t-a,r),Dd(t-a,r-n));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-n))/Math.min(Math.abs(t),Math.abs(t-a)),c=eJ(a,n,t,r,!0),u=c[0],d=c[1];s=Dd(u-t,(d-r)/l),o=l*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-a),Math.abs(r),Math.abs(r-n)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-a)),o=Math.max(Math.abs(r),Math.abs(r-n)));break;case 3:if(e.shape===0)s=o=Math.max(Dd(t,r),Dd(t,r-n),Dd(t-a,r),Dd(t-a,r-n));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-n))/Math.max(Math.abs(t),Math.abs(t-a)),f=eJ(a,n,t,r,!1),u=f[0],d=f[1];s=Dd(u-t,(d-r)/l),o=l*s}break}return Array.isArray(e.size)&&(s=Un(e.size[0],a),o=e.size.length===2?Un(e.size[1],n):s),[s,o]},Jft=function(e,t){var r=Zu(180),a=[];return _A(t).forEach(function(n,s){if(s===0){var o=n[0];if(o.type===20&&o.value==="to"){r=_Ae(n);return}else if(kAe(o)){r=V4.parse(e,o);return}}var l=$4(e,n);a.push(l)}),{angle:r,stops:a,type:1}},k5=function(e,t){var r=Zu(180),a=[];return _A(t).forEach(function(n,s){if(s===0){var o=n[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=_Ae(n);return}else if(kAe(o)){r=(V4.parse(e,o)+Zu(270))%Zu(360);return}}var l=$4(e,n);a.push(l)}),{angle:r,stops:a,type:1}},Zft=function(e,t){var r=Zu(180),a=[],n=1,s=0,o=3,l=[];return _A(t).forEach(function(c,u){var d=c[0];if(u===0){if(Cn(d)&&d.value==="linear"){n=1;return}else if(Cn(d)&&d.value==="radial"){n=2;return}}if(d.type===18){if(d.name==="from"){var f=Lm.parse(e,d.values[0]);a.push({stop:_o,color:f})}else if(d.name==="to"){var f=Lm.parse(e,d.values[0]);a.push({stop:Em,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(Zb);if(h.length===2){var f=Lm.parse(e,h[1]),m=h[0];U1(m)&&a.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),n===1?{angle:(r+Zu(180))%Zu(360),stops:a,type:n}:{size:o,shape:s,stops:a,position:l,type:n}},SAe="closest-side",BAe="farthest-side",TAe="closest-corner",IAe="farthest-corner",OAe="circle",FAe="ellipse",DAe="cover",PAe="contain",eAt=function(e,t){var r=0,a=3,n=[],s=[];return _A(t).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,h){if(u)if(Cn(h))switch(h.value){case"center":return s.push(z7),f;case"top":case"left":return s.push(_o),f;case"right":case"bottom":return s.push(Em),f}else(xi(h)||rp(h))&&s.push(h);else if(Cn(h))switch(h.value){case OAe:return r=0,!1;case FAe:return r=1,!1;case"at":return u=!0,!1;case SAe:return a=0,!1;case DAe:case BAe:return a=1,!1;case PAe:case TAe:return a=2,!1;case IAe:return a=3,!1}else if(rp(h)||xi(h))return Array.isArray(a)||(a=[]),a.push(h),!1;return f},c)}if(c){var d=$4(e,o);n.push(d)}}),{size:a,shape:r,stops:n,position:s,type:2}},_5=function(e,t){var r=0,a=3,n=[],s=[];return _A(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(Cn(f))switch(f.value){case"center":return s.push(z7),!1;case"top":case"left":return s.push(_o),!1;case"right":case"bottom":return s.push(Em),!1}else if(xi(f)||rp(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(Cn(f))switch(f.value){case OAe:return r=0,!1;case FAe:return r=1,!1;case PAe:case SAe:return a=0,!1;case BAe:return a=1,!1;case TAe:return a=2,!1;case DAe:case IAe:return a=3,!1}else if(rp(f)||xi(f))return Array.isArray(a)||(a=[]),a.push(f),!1;return d},c)),c){var u=$4(e,o);n.push(u)}}),{size:a,shape:r,stops:n,position:s,type:2}},tAt=function(e){return e.type===1},rAt=function(e){return e.type===2},V7={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var a=RAe[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return a(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function aAt(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!RAe[e.name])}var RAe={"linear-gradient":Jft,"-moz-linear-gradient":k5,"-ms-linear-gradient":k5,"-o-linear-gradient":k5,"-webkit-linear-gradient":k5,"radial-gradient":eAt,"-moz-radial-gradient":_5,"-ms-radial-gradient":_5,"-o-radial-gradient":_5,"-webkit-radial-gradient":_5,"-webkit-gradient":Zft},nAt={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(a){return Zb(a)&&aAt(a)}).map(function(a){return V7.parse(e,a)})}},sAt={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Cn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},iAt={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return _A(t).map(function(r){return r.filter(xi)}).map(wAe)}},oAt={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return _A(t).map(function(r){return r.filter(Cn).map(function(a){return a.value}).join(" ")}).map(lAt)}},lAt=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},fb;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(fb||(fb={}));var cAt={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return _A(t).map(function(r){return r.filter(uAt)})}},uAt=function(e){return Cn(e)||xi(e)},G4=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},dAt=G4("top"),fAt=G4("right"),AAt=G4("bottom"),hAt=G4("left"),q4=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return wAe(r.filter(xi))}}},mAt=q4("top-left"),pAt=q4("top-right"),gAt=q4("bottom-right"),xAt=q4("bottom-left"),K4=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},vAt=K4("top"),bAt=K4("right"),yAt=K4("bottom"),wAt=K4("left"),W4=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return nE(r)?r.number:0}}},NAt=W4("top"),EAt=W4("right"),CAt=W4("bottom"),jAt=W4("left"),kAt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_At={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},SAt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Cn).reduce(function(r,a){return r|BAt(a.value)},0)}},BAt=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},TAt={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},IAt={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},w_;(function(e){e.NORMAL="normal",e.STRICT="strict"})(w_||(w_={}));var OAt={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return w_.STRICT;case"normal":default:return w_.NORMAL}}},FAt={name:"line-height",initialValue:"normal",prefix:!1,type:4},tJ=function(e,t){return Cn(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:xi(e)?Un(e,t):t},DAt={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:V7.parse(e,t)}},PAt={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},dP={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},X4=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},RAt=X4("top"),LAt=X4("right"),MAt=X4("bottom"),UAt=X4("left"),QAt={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Cn).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},HAt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Y4=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},zAt=Y4("top"),VAt=Y4("right"),$At=Y4("bottom"),GAt=Y4("left"),qAt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},KAt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},WAt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&uP(t[0],"none")?[]:_A(t).map(function(r){for(var a={color:Fh.TRANSPARENT,offsetX:_o,offsetY:_o,blur:_o},n=0,s=0;s<r.length;s++){var o=r[s];rp(o)?(n===0?a.offsetX=o:n===1?a.offsetY=o:a.blur=o,n++):a.color=Lm.parse(e,o)}return a})}},XAt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},YAt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=eht[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},JAt=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},ZAt=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],a=t[1];t[2],t[3];var n=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,a,n,s,o,l]:null},eht={matrix:JAt,matrix3d:ZAt},rJ={type:16,number:50,flags:aE},tht=[rJ,rJ],rht={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(xi);return r.length!==2?tht:[r[0],r[1]]}},aht={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ow;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(ow||(ow={}));var nht={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return ow.BREAK_ALL;case"keep-all":return ow.KEEP_ALL;case"normal":default:return ow.NORMAL}}},sht={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(U1(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},LAe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},iht={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return U1(t)?t.number:1}},oht={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lht={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Cn).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},cht={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],a=[];return t.forEach(function(n){switch(n.type){case 20:case 0:r.push(n.value);break;case 17:r.push(n.number.toString());break;case 4:a.push(r.join(" ")),r.length=0;break}}),r.length&&a.push(r.join(" ")),a.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},uht={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},dht={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(U1(t))return t.number;if(Cn(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},fht={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Cn).map(function(r){return r.value})}},Aht={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ti=function(e,t){return(e&t)!==0},hht={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},mht={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var a=[],n=t.filter(yAe),s=0;s<n.length;s++){var o=n[s],l=n[s+1];if(o.type===20){var c=l&&U1(l)?l.number:1;a.push({counter:o.value,increment:c})}}return a}},pht={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],a=t.filter(yAe),n=0;n<a.length;n++){var s=a[n],o=a[n+1];if(Cn(s)&&s.value!=="none"){var l=o&&U1(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},ght={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(nE).map(function(r){return LAe.parse(e,r)})}},xht={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var a=[],n=t.filter(Vft);if(n.length%2!==0)return null;for(var s=0;s<n.length;s+=2){var o=n[s].value,l=n[s+1].value;a.push({open:o,close:l})}return a}},aJ=function(e,t,r){if(!e)return"";var a=e[Math.min(t,e.length-1)];return a?r?a.open:a.close:""},vht={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&uP(t[0],"none")?[]:_A(t).map(function(r){for(var a={color:255,offsetX:_o,offsetY:_o,blur:_o,spread:_o,inset:!1},n=0,s=0;s<r.length;s++){var o=r[s];uP(o,"inset")?a.inset=!0:rp(o)?(n===0?a.offsetX=o:n===1?a.offsetY=o:n===2?a.blur=o:a.spread=o,n++):a.color=Lm.parse(e,o)}return a})}},bht={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],a=[];return t.filter(Cn).forEach(function(n){switch(n.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),r.forEach(function(n){a.indexOf(n)===-1&&a.push(n)}),a}},yht={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},wht={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return nE(t)?t.number:0}},Nht=function(){function e(t,r){var a,n;this.animationDuration=sr(t,ght,r.animationDuration),this.backgroundClip=sr(t,qft,r.backgroundClip),this.backgroundColor=sr(t,Kft,r.backgroundColor),this.backgroundImage=sr(t,nAt,r.backgroundImage),this.backgroundOrigin=sr(t,sAt,r.backgroundOrigin),this.backgroundPosition=sr(t,iAt,r.backgroundPosition),this.backgroundRepeat=sr(t,oAt,r.backgroundRepeat),this.backgroundSize=sr(t,cAt,r.backgroundSize),this.borderTopColor=sr(t,dAt,r.borderTopColor),this.borderRightColor=sr(t,fAt,r.borderRightColor),this.borderBottomColor=sr(t,AAt,r.borderBottomColor),this.borderLeftColor=sr(t,hAt,r.borderLeftColor),this.borderTopLeftRadius=sr(t,mAt,r.borderTopLeftRadius),this.borderTopRightRadius=sr(t,pAt,r.borderTopRightRadius),this.borderBottomRightRadius=sr(t,gAt,r.borderBottomRightRadius),this.borderBottomLeftRadius=sr(t,xAt,r.borderBottomLeftRadius),this.borderTopStyle=sr(t,vAt,r.borderTopStyle),this.borderRightStyle=sr(t,bAt,r.borderRightStyle),this.borderBottomStyle=sr(t,yAt,r.borderBottomStyle),this.borderLeftStyle=sr(t,wAt,r.borderLeftStyle),this.borderTopWidth=sr(t,NAt,r.borderTopWidth),this.borderRightWidth=sr(t,EAt,r.borderRightWidth),this.borderBottomWidth=sr(t,CAt,r.borderBottomWidth),this.borderLeftWidth=sr(t,jAt,r.borderLeftWidth),this.boxShadow=sr(t,vht,r.boxShadow),this.color=sr(t,kAt,r.color),this.direction=sr(t,_At,r.direction),this.display=sr(t,SAt,r.display),this.float=sr(t,TAt,r.cssFloat),this.fontFamily=sr(t,cht,r.fontFamily),this.fontSize=sr(t,uht,r.fontSize),this.fontStyle=sr(t,Aht,r.fontStyle),this.fontVariant=sr(t,fht,r.fontVariant),this.fontWeight=sr(t,dht,r.fontWeight),this.letterSpacing=sr(t,IAt,r.letterSpacing),this.lineBreak=sr(t,OAt,r.lineBreak),this.lineHeight=sr(t,FAt,r.lineHeight),this.listStyleImage=sr(t,DAt,r.listStyleImage),this.listStylePosition=sr(t,PAt,r.listStylePosition),this.listStyleType=sr(t,dP,r.listStyleType),this.marginTop=sr(t,RAt,r.marginTop),this.marginRight=sr(t,LAt,r.marginRight),this.marginBottom=sr(t,MAt,r.marginBottom),this.marginLeft=sr(t,UAt,r.marginLeft),this.opacity=sr(t,iht,r.opacity);var s=sr(t,QAt,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=sr(t,HAt,r.overflowWrap),this.paddingTop=sr(t,zAt,r.paddingTop),this.paddingRight=sr(t,VAt,r.paddingRight),this.paddingBottom=sr(t,$At,r.paddingBottom),this.paddingLeft=sr(t,GAt,r.paddingLeft),this.paintOrder=sr(t,bht,r.paintOrder),this.position=sr(t,KAt,r.position),this.textAlign=sr(t,qAt,r.textAlign),this.textDecorationColor=sr(t,oht,(a=r.textDecorationColor)!==null&&a!==void 0?a:r.color),this.textDecorationLine=sr(t,lht,(n=r.textDecorationLine)!==null&&n!==void 0?n:r.textDecoration),this.textShadow=sr(t,WAt,r.textShadow),this.textTransform=sr(t,XAt,r.textTransform),this.transform=sr(t,YAt,r.transform),this.transformOrigin=sr(t,rht,r.transformOrigin),this.visibility=sr(t,aht,r.visibility),this.webkitTextStrokeColor=sr(t,yht,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=sr(t,wht,r.webkitTextStrokeWidth),this.wordBreak=sr(t,nht,r.wordBreak),this.zIndex=sr(t,sht,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Mm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Ti(this.display,4)||Ti(this.display,33554432)||Ti(this.display,268435456)||Ti(this.display,536870912)||Ti(this.display,67108864)||Ti(this.display,134217728)},e}(),Eht=function(){function e(t,r){this.content=sr(t,hht,r.content),this.quotes=sr(t,xht,r.quotes)}return e}(),nJ=function(){function e(t,r){this.counterIncrement=sr(t,mht,r.counterIncrement),this.counterReset=sr(t,pht,r.counterReset)}return e}(),sr=function(e,t,r){var a=new vAe,n=r!==null&&typeof r<"u"?r.toString():t.initialValue;a.write(n);var s=new bAe(a.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,Cn(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return V4.parse(e,s.parseComponentValue());case"color":return Lm.parse(e,s.parseComponentValue());case"image":return V7.parse(e,s.parseComponentValue());case"length":var l=s.parseComponentValue();return rp(l)?l:_o;case"length-percentage":var c=s.parseComponentValue();return xi(c)?c:_o;case"time":return LAe.parse(e,s.parseComponentValue())}break}},Cht="data-html2canvas-debug",jht=function(e){var t=e.getAttribute(Cht);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},fP=function(e,t){var r=jht(e);return r===1||t===r},SA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,fP(r,3))debugger;this.styles=new Nht(t,window.getComputedStyle(r,null)),mP(r)&&(this.styles.animationDuration.some(function(a){return a>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=H4(this.context,r),fP(r,4)&&(this.flags|=16)}return e}(),kht="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",sJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var S5=0;S5<sJ.length;S5++)S2[sJ.charCodeAt(S5)]=S5;var _ht=function(e){var t=e.length*.75,r=e.length,a,n=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(a=0;a<r;a+=4)s=S2[e.charCodeAt(a)],o=S2[e.charCodeAt(a+1)],l=S2[e.charCodeAt(a+2)],c=S2[e.charCodeAt(a+3)],d[n++]=s<<2|o>>4,d[n++]=(o&15)<<4|l>>2,d[n++]=(l&3)<<6|c&63;return u},Sht=function(e){for(var t=e.length,r=[],a=0;a<t;a+=2)r.push(e[a+1]<<8|e[a]);return r},Bht=function(e){for(var t=e.length,r=[],a=0;a<t;a+=4)r.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return r},_g=5,$7=11,M6=2,Tht=$7-_g,MAe=65536>>_g,Iht=1<<_g,U6=Iht-1,Oht=1024>>_g,Fht=MAe+Oht,Dht=Fht,Pht=32,Rht=Dht+Pht,Lht=65536>>$7,Mht=1<<Tht,Uht=Mht-1,iJ=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Qht=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Hht=function(e,t){var r=_ht(e),a=Array.isArray(r)?Bht(r):new Uint32Array(r),n=Array.isArray(r)?Sht(r):new Uint16Array(r),s=24,o=iJ(n,s/2,a[4]/2),l=a[5]===2?iJ(n,(s+a[4])/2):Qht(a,Math.ceil((s+a[4])/4));return new zht(a[0],a[1],a[2],a[3],o,l)},zht=function(){function e(t,r,a,n,s,o){this.initialValue=t,this.errorValue=r,this.highStart=a,this.highValueIndex=n,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>_g],r=(r<<M6)+(t&U6),this.data[r];if(t<=65535)return r=this.index[MAe+(t-55296>>_g)],r=(r<<M6)+(t&U6),this.data[r];if(t<this.highStart)return r=Rht-Lht+(t>>$7),r=this.index[r],r+=t>>_g&Uht,r=this.index[r],r=(r<<M6)+(t&U6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),oJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vht=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var B5=0;B5<oJ.length;B5++)Vht[oJ.charCodeAt(B5)]=B5;var $ht=1,Q6=2,H6=3,lJ=4,cJ=5,Ght=7,uJ=8,z6=9,V6=10,dJ=11,fJ=12,AJ=13,hJ=14,$6=15,qht=function(e){for(var t=[],r=0,a=e.length;r<a;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((n&1023)<<10)+(s&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},Kht=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var a=[],n=-1,s="";++n<r;){var o=e[n];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(n+1===r||a.length>16384)&&(s+=String.fromCharCode.apply(String,a),a.length=0)}return s},Wht=Hht(kht),$u="",G6="",Xht=function(e){return Wht.get(e)},Yht=function(e,t,r){var a=r-2,n=t[a],s=t[r-1],o=t[r];if(s===Q6&&o===H6)return $u;if(s===Q6||s===H6||s===lJ||o===Q6||o===H6||o===lJ)return G6;if(s===uJ&&[uJ,z6,dJ,fJ].indexOf(o)!==-1||(s===dJ||s===z6)&&(o===z6||o===V6)||(s===fJ||s===V6)&&o===V6||o===AJ||o===cJ||o===Ght||s===$ht)return $u;if(s===AJ&&o===hJ){for(;n===cJ;)n=t[--a];if(n===hJ)return $u}if(s===$6&&o===$6){for(var l=0;n===$6;)l++,n=t[--a];if(l%2===0)return $u}return G6},Jht=function(e){var t=qht(e),r=t.length,a=0,n=0,s=t.map(Xht);return{next:function(){if(a>=r)return{done:!0,value:null};for(var o=$u;a<r&&(o=Yht(t,s,++a))===$u;);if(o!==$u||a===r){var l=Kht.apply(null,t.slice(n,a));return n=a,{value:l,done:!1}}return{done:!0,value:null}}}},Zht=function(e){for(var t=Jht(e),r=[],a;!(a=t.next()).done;)a.value&&r.push(a.value.slice());return r},e0t=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var a=e.createElement("boundtest");a.style.height=t+"px",a.style.display="block",e.body.appendChild(a),r.selectNode(a);var n=r.getBoundingClientRect(),s=Math.round(n.height);if(e.body.removeChild(a),s===t)return!0}}return!1},t0t=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=t.firstChild,n=z4(a.data).map(function(c){return Ks(c)}),s=0,o={},l=n.every(function(c,u){r.setStart(a,s),r.setEnd(a,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return e.body.removeChild(t),l},r0t=function(){return typeof new Image().crossOrigin<"u"},a0t=function(){return typeof new XMLHttpRequest().responseType=="string"},n0t=function(e){var t=new Image,r=e.createElement("canvas"),a=r.getContext("2d");if(!a)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},mJ=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},s0t=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var a=t.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,r,r);var n=new Image,s=t.toDataURL();n.src=s;var o=AP(r,r,0,0,n);return a.fillStyle="red",a.fillRect(0,0,r,r),pJ(o).then(function(l){a.drawImage(l,0,0);var c=a.getImageData(0,0,r,r).data;a.fillStyle="red",a.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",mJ(c)?pJ(AP(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return a.drawImage(l,0,0),mJ(a.getImageData(0,0,r,r).data)}).catch(function(){return!1})},AP=function(e,t,r,a,n){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",a.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(n),o},pJ=function(e){return new Promise(function(t,r){var a=new Image;a.onload=function(){return t(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},yo={get SUPPORT_RANGE_BOUNDS(){var e=e0t(document);return Object.defineProperty(yo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=yo.SUPPORT_RANGE_BOUNDS&&t0t(document);return Object.defineProperty(yo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=n0t(document);return Object.defineProperty(yo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?s0t(document):Promise.resolve(!1);return Object.defineProperty(yo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=r0t();return Object.defineProperty(yo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=a0t();return Object.defineProperty(yo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(yo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(yo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},lw=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),i0t=function(e,t,r,a){var n=c0t(t,r),s=[],o=0;return n.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(yo.SUPPORT_RANGE_BOUNDS){var c=gJ(a,o,l.length).getClientRects();if(c.length>1){var u=G7(l),d=0;u.forEach(function(h){s.push(new lw(h,t0.fromDOMRectList(e,gJ(a,d+o,h.length).getClientRects()))),d+=h.length})}else s.push(new lw(l,t0.fromDOMRectList(e,c)))}else{var f=a.splitText(l.length);s.push(new lw(l,o0t(e,a))),a=f}else yo.SUPPORT_RANGE_BOUNDS||(a=a.splitText(l.length));o+=l.length}),s},o0t=function(e,t){var r=t.ownerDocument;if(r){var a=r.createElement("html2canvaswrapper");a.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(a,t);var s=H4(e,a);return a.firstChild&&n.replaceChild(a.firstChild,a),s}}return t0.EMPTY},gJ=function(e,t,r){var a=e.ownerDocument;if(!a)throw new Error("Node has no owner document");var n=a.createRange();return n.setStart(e,t),n.setEnd(e,t+r),n},G7=function(e){if(yo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return Zht(e)},l0t=function(e,t){if(yo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(a){return a.segment})}return d0t(e,t)},c0t=function(e,t){return t.letterSpacing!==0?G7(e):l0t(e,t)},u0t=[32,160,4961,65792,65793,4153,4241],d0t=function(e,t){for(var r=Ldt(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),a=[],n,s=function(){if(n.value){var o=n.value.slice(),l=z4(o),c="";l.forEach(function(u){u0t.indexOf(u)===-1?c+=Ks(u):(c.length&&a.push(c),a.push(Ks(u)),c="")}),c.length&&a.push(c)}};!(n=r.next()).done;)s();return a},f0t=function(){function e(t,r,a){this.text=A0t(r.data,a.textTransform),this.textBounds=i0t(t,this.text,a,r)}return e}(),A0t=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(h0t,m0t);case 2:return e.toUpperCase();default:return e}},h0t=/(^|\s|:|-|\(|\))([a-z])/g,m0t=function(e,t,r){return e.length>0?t+r.toUpperCase():e},UAe=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.src=a.currentSrc||a.src,n.intrinsicWidth=a.naturalWidth,n.intrinsicHeight=a.naturalHeight,n.context.cache.addImage(n.src),n}return t}(SA),QAe=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.canvas=a,n.intrinsicWidth=a.width,n.intrinsicHeight=a.height,n}return t}(SA),HAe=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this,s=new XMLSerializer,o=H4(r,a);return a.setAttribute("width",o.width+"px"),a.setAttribute("height",o.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(a)),n.intrinsicWidth=a.width.baseVal.value,n.intrinsicHeight=a.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t}(SA),zAe=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.value=a.value,n}return t}(SA),hP=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.start=a.start,n.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,n}return t}(SA),p0t=[{type:15,flags:0,unit:"px",number:3}],g0t=[{type:16,flags:0,number:50}],x0t=function(e){return e.width>e.height?new t0(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new t0(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},v0t=function(e){var t=e.type===b0t?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},N_="checkbox",E_="radio",b0t="password",xJ=707406591,q7=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this;switch(n.type=a.type.toLowerCase(),n.checked=a.checked,n.value=v0t(a),(n.type===N_||n.type===E_)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=x0t(n.bounds)),n.type){case N_:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=p0t;break;case E_:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=g0t;break}return n}return t}(SA),VAe=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this,s=a.options[a.selectedIndex||0];return n.value=s&&s.text||"",n}return t}(SA),$Ae=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.value=a.value,n}return t}(SA),GAe=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this;n.src=a.src,n.width=parseInt(a.width,10)||0,n.height=parseInt(a.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){n.tree=KAe(r,a.contentWindow.document.documentElement);var s=a.contentWindow.document.documentElement?iw(r,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):Fh.TRANSPARENT,o=a.contentWindow.document.body?iw(r,getComputedStyle(a.contentWindow.document.body).backgroundColor):Fh.TRANSPARENT;n.backgroundColor=Mm(s)?Mm(o)?n.styles.backgroundColor:o:s}}catch{}return n}return t}(SA),y0t=["OL","UL","MENU"],yj=function(e,t,r,a){for(var n=t.firstChild,s=void 0;n;n=s)if(s=n.nextSibling,WAe(n)&&n.data.trim().length>0)r.textNodes.push(new f0t(e,n,r.styles));else if(Hv(n))if(ZAe(n)&&n.assignedNodes)n.assignedNodes().forEach(function(l){return yj(e,l,r,a)});else{var o=qAe(e,n);o.styles.isVisible()&&(w0t(n,o,a)?o.flags|=4:N0t(o.styles)&&(o.flags|=2),y0t.indexOf(n.tagName)!==-1&&(o.flags|=8),r.elements.push(o),n.slot,n.shadowRoot?yj(e,n.shadowRoot,o,a):!C_(n)&&!XAe(n)&&!j_(n)&&yj(e,n,o,a))}},qAe=function(e,t){return pP(t)?new UAe(e,t):YAe(t)?new QAe(e,t):XAe(t)?new HAe(e,t):E0t(t)?new zAe(e,t):C0t(t)?new hP(e,t):j0t(t)?new q7(e,t):j_(t)?new VAe(e,t):C_(t)?new $Ae(e,t):JAe(t)?new GAe(e,t):new SA(e,t)},KAe=function(e,t){var r=qAe(e,t);return r.flags|=4,yj(e,t,r,r),r},w0t=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||K7(e)&&r.styles.isTransparent()},N0t=function(e){return e.isPositioned()||e.isFloating()},WAe=function(e){return e.nodeType===Node.TEXT_NODE},Hv=function(e){return e.nodeType===Node.ELEMENT_NODE},mP=function(e){return Hv(e)&&typeof e.style<"u"&&!wj(e)},wj=function(e){return typeof e.className=="object"},E0t=function(e){return e.tagName==="LI"},C0t=function(e){return e.tagName==="OL"},j0t=function(e){return e.tagName==="INPUT"},k0t=function(e){return e.tagName==="HTML"},XAe=function(e){return e.tagName==="svg"},K7=function(e){return e.tagName==="BODY"},YAe=function(e){return e.tagName==="CANVAS"},vJ=function(e){return e.tagName==="VIDEO"},pP=function(e){return e.tagName==="IMG"},JAe=function(e){return e.tagName==="IFRAME"},bJ=function(e){return e.tagName==="STYLE"},_0t=function(e){return e.tagName==="SCRIPT"},C_=function(e){return e.tagName==="TEXTAREA"},j_=function(e){return e.tagName==="SELECT"},ZAe=function(e){return e.tagName==="SLOT"},yJ=function(e){return e.tagName.indexOf("-")>0},S0t=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(a){return r.counters[a].pop()})},e.prototype.parse=function(t){var r=this,a=t.counterIncrement,n=t.counterReset,s=!0;a!==null&&a.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&n.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},e}(),wJ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},NJ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},B0t={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},T0t={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},mv=function(e,t,r,a,n,s){return e<t||e>r?cN(e,n,s.length>0):a.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=a.values[c];return o},"")+s},ehe=function(e,t,r,a){var n="";do r||e--,n=a(e)+n,e/=t;while(e*t>=t);return n},$s=function(e,t,r,a,n){var s=r-t+1;return(e<0?"-":"")+(ehe(Math.abs(e),s,a,function(o){return Ks(Math.floor(o%s)+t)})+n)},Qp=function(e,t,r){r===void 0&&(r=". ");var a=t.length;return ehe(Math.abs(e),a,!1,function(n){return t[Math.floor(n%a)]})+r},_v=1,am=2,nm=4,B2=8,lh=function(e,t,r,a,n,s){if(e<-9999||e>9999)return cN(e,4,n.length>0);var o=Math.abs(e),l=n;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&Ti(s,_v)&&l!==""?l=t[u]+l:u>1||u===1&&c===0||u===1&&c===1&&Ti(s,am)||u===1&&c===1&&Ti(s,nm)&&e>100||u===1&&c>1&&Ti(s,B2)?l=t[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(e<0?a:"")+l},EJ="",CJ="",jJ="",q6="",cN=function(e,t,r){var a=r?". ":"",n=r?"":"",s=r?", ":"",o=r?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=$s(e,48,57,!0,a);return l.length<4?"0"+l:l;case 4:return Qp(e,"",n);case 6:return mv(e,1,3999,wJ,3,a).toLowerCase();case 7:return mv(e,1,3999,wJ,3,a);case 8:return $s(e,945,969,!1,a);case 9:return $s(e,97,122,!1,a);case 10:return $s(e,65,90,!1,a);case 11:return $s(e,1632,1641,!0,a);case 12:case 49:return mv(e,1,9999,NJ,3,a);case 35:return mv(e,1,9999,NJ,3,a).toLowerCase();case 13:return $s(e,2534,2543,!0,a);case 14:case 30:return $s(e,6112,6121,!0,a);case 15:return Qp(e,"",n);case 16:return Qp(e,"",n);case 17:case 48:return lh(e,"",EJ,"",n,am|nm|B2);case 47:return lh(e,"",CJ,"",n,_v|am|nm|B2);case 42:return lh(e,"",EJ,"",n,am|nm|B2);case 41:return lh(e,"",CJ,"",n,_v|am|nm|B2);case 26:return lh(e,"","",jJ,n,0);case 25:return lh(e,"","",jJ,n,_v|am|nm);case 31:return lh(e,"","",q6,s,_v|am|nm);case 33:return lh(e,"","",q6,s,0);case 32:return lh(e,"","",q6,s,_v|am|nm);case 18:return $s(e,2406,2415,!0,a);case 20:return mv(e,1,19999,T0t,3,a);case 21:return $s(e,2790,2799,!0,a);case 22:return $s(e,2662,2671,!0,a);case 22:return mv(e,1,10999,B0t,3,a);case 23:return Qp(e,"");case 24:return Qp(e,"");case 27:return $s(e,3302,3311,!0,a);case 28:return Qp(e,"",n);case 29:return Qp(e,"",n);case 34:return $s(e,3792,3801,!0,a);case 37:return $s(e,6160,6169,!0,a);case 38:return $s(e,4160,4169,!0,a);case 39:return $s(e,2918,2927,!0,a);case 40:return $s(e,1776,1785,!0,a);case 43:return $s(e,3046,3055,!0,a);case 44:return $s(e,3174,3183,!0,a);case 45:return $s(e,3664,3673,!0,a);case 46:return $s(e,3872,3881,!0,a);case 3:default:return $s(e,48,57,!0,a)}},the="data-html2canvas-ignore",kJ=function(){function e(t,r,a){if(this.context=t,this.options=a,this.scrolledElements=[],this.referenceElement=r,this.counters=new S0t,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var a=this,n=I0t(t,r);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=n.contentWindow,c=l.document,u=D0t(n).then(function(){return wl(a,void 0,void 0,function(){var d,f;return Xo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(M0t),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,F0t(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return n})]:[2,n]}})})});return c.open(),c.write(R0t(document.doctype)+"<html></html>"),L0t(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(fP(t,2))debugger;if(YAe(t))return this.createCanvasClone(t);if(vJ(t))return this.createVideoClone(t);if(bJ(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return pP(r)&&(pP(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),yJ(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return K6(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var a=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),n=t.cloneNode(!1);return n.textContent=a,n}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var a=t.ownerDocument.createElement("img");try{return a.src=t.toDataURL(),a}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var s=t.getContext("2d"),o=n.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var a=r.getContext("2d");try{return a&&(a.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||a.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},e.prototype.appendChildNode=function(t,r,a){(!Hv(r)||!_0t(r)&&!r.hasAttribute(the)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Hv(r)||!bJ(r))&&t.appendChild(this.cloneNode(r,a))},e.prototype.cloneChildNodes=function(t,r,a){for(var n=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Hv(s)&&ZAe(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return n.appendChildNode(r,l,a)})}else this.appendChildNode(r,s,a)},e.prototype.cloneNode=function(t,r){if(WAe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var a=t.ownerDocument.defaultView;if(a&&Hv(t)&&(mP(t)||wj(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var s=a.getComputedStyle(t),o=a.getComputedStyle(t,":before"),l=a.getComputedStyle(t,":after");this.referenceElement===t&&mP(n)&&(this.clonedReferenceElement=n),K7(n)&&H0t(n);var c=this.counters.parse(new nJ(this.context,s)),u=this.resolvePseudoContent(t,n,o,cw.BEFORE);yJ(t)&&(r=!0),vJ(t)||this.cloneChildNodes(t,n,r),u&&n.insertBefore(u,n.firstChild);var d=this.resolvePseudoContent(t,n,l,cw.AFTER);return d&&n.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||wj(t))&&!JAe(t)||r)&&K6(s,n),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(C_(t)||j_(t))&&(C_(n)||j_(n))&&(n.value=t.value),n}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,a,n){var s=this;if(a){var o=a.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||a.display==="none")){this.counters.parse(new nJ(this.context,a));var c=new Eht(this.context,a),u=l.createElement("html2canvaspseudoelement");K6(a,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var h=l.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(Cn);m.length&&u.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(Zb),x=g[0],v=g[1];if(x&&Cn(x)){var y=s.counters.getCounterValue(x.value),w=v&&Cn(v)?dP.parse(s.context,v.value):3;u.appendChild(l.createTextNode(cN(y,w,!1)))}}else if(f.name==="counters"){var j=f.values.filter(Zb),x=j[0],O=j[1],v=j[2];if(x&&Cn(x)){var B=s.counters.getCounterValues(x.value),T=v&&Cn(v)?dP.parse(s.context,v.value):3,C=O&&O.type===0?O.value:"",_=B.map(function(P){return cN(P,T,!1)}).join(C);u.appendChild(l.createTextNode(_))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(aJ(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(aJ(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=gP+" "+xP;var d=n===cw.BEFORE?" "+gP:" "+xP;return wj(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),cw;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(cw||(cw={}));var I0t=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(the,"true"),e.body.appendChild(r),r},O0t=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},F0t=function(e){return Promise.all([].slice.call(e.images,0).map(O0t))},D0t=function(e){return new Promise(function(t,r){var a=e.contentWindow;if(!a)return r("No window assigned for iframe");var n=a.document;a.onload=e.onload=function(){a.onload=e.onload=null;var s=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},P0t=["all","d","content"],K6=function(e,t){for(var r=e.length-1;r>=0;r--){var a=e.item(r);P0t.indexOf(a)===-1&&t.style.setProperty(a,e.getPropertyValue(a))}return t},R0t=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},L0t=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},M0t=function(e){var t=e[0],r=e[1],a=e[2];t.scrollLeft=r,t.scrollTop=a},U0t=":before",Q0t=":after",gP="___html2canvas___pseudoelement_before",xP="___html2canvas___pseudoelement_after",_J=`{
    content: "" !important;
    display: none !important;
}`,H0t=function(e){z0t(e,"."+gP+U0t+_J+`
         .`+xP+Q0t+_J)},z0t=function(e,t){var r=e.ownerDocument;if(r){var a=r.createElement("style");a.textContent=t,e.appendChild(a)}},rhe=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),V0t=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(X6(t)||K0t(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return wl(this,void 0,void 0,function(){var r,a,n,s,o=this;return Xo(this,function(l){switch(l.label){case 0:return r=rhe.isSameOrigin(t),a=!W6(t)&&this._options.useCORS===!0&&yo.SUPPORT_CORS_IMAGES&&!r,n=!W6(t)&&!r&&!X6(t)&&typeof this._options.proxy=="string"&&yo.SUPPORT_CORS_XHR&&!a,!r&&this._options.allowTaint===!1&&!W6(t)&&!X6(t)&&!n&&!a?[2]:(s=t,n?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(W0t(s)||a)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise(function(s,o){var l=yo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return o(h)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+n+" with status code "+c.status)},c.onerror=o;var u=a.indexOf("?")>-1?"&":"?";if(c.open("GET",""+a+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+n)}}c.send()})},e}(),$0t=/^data:image\/svg\+xml/i,G0t=/^data:image\/.*;base64,/i,q0t=/^data:image\/.*/i,K0t=function(e){return yo.SUPPORT_SVG_DRAWING||!X0t(e)},W6=function(e){return q0t.test(e)},W0t=function(e){return G0t.test(e)},X6=function(e){return e.substr(0,4)==="blob"},X0t=function(e){return e.substr(-3).toLowerCase()==="svg"||$0t.test(e)},rr=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),pv=function(e,t,r){return new rr(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},T5=function(){function e(t,r,a,n){this.type=1,this.start=t,this.startControl=r,this.endControl=a,this.end=n}return e.prototype.subdivide=function(t,r){var a=pv(this.start,this.startControl,t),n=pv(this.startControl,this.endControl,t),s=pv(this.endControl,this.end,t),o=pv(a,n,t),l=pv(n,s,t),c=pv(o,l,t);return r?new e(this.start,a,o,c):new e(c,l,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Ku=function(e){return e.type===1},Y0t=function(){function e(t){var r=t.styles,a=t.bounds,n=_2(r.borderTopLeftRadius,a.width,a.height),s=n[0],o=n[1],l=_2(r.borderTopRightRadius,a.width,a.height),c=l[0],u=l[1],d=_2(r.borderBottomRightRadius,a.width,a.height),f=d[0],h=d[1],m=_2(r.borderBottomLeftRadius,a.width,a.height),g=m[0],x=m[1],v=[];v.push((s+c)/a.width),v.push((g+f)/a.width),v.push((o+x)/a.height),v.push((u+h)/a.height);var y=Math.max.apply(Math,v);y>1&&(s/=y,o/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var w=a.width-c,j=a.height-h,O=a.width-f,B=a.height-x,T=r.borderTopWidth,C=r.borderRightWidth,_=r.borderBottomWidth,S=r.borderLeftWidth,L=Un(r.paddingTop,t.bounds.width),P=Un(r.paddingRight,t.bounds.width),k=Un(r.paddingBottom,t.bounds.width),M=Un(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?es(a.left+S/3,a.top+T/3,s-S/3,o-T/3,rn.TOP_LEFT):new rr(a.left+S/3,a.top+T/3),this.topRightBorderDoubleOuterBox=s>0||o>0?es(a.left+w,a.top+T/3,c-C/3,u-T/3,rn.TOP_RIGHT):new rr(a.left+a.width-C/3,a.top+T/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?es(a.left+O,a.top+j,f-C/3,h-_/3,rn.BOTTOM_RIGHT):new rr(a.left+a.width-C/3,a.top+a.height-_/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?es(a.left+S/3,a.top+B,g-S/3,x-_/3,rn.BOTTOM_LEFT):new rr(a.left+S/3,a.top+a.height-_/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?es(a.left+S*2/3,a.top+T*2/3,s-S*2/3,o-T*2/3,rn.TOP_LEFT):new rr(a.left+S*2/3,a.top+T*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?es(a.left+w,a.top+T*2/3,c-C*2/3,u-T*2/3,rn.TOP_RIGHT):new rr(a.left+a.width-C*2/3,a.top+T*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?es(a.left+O,a.top+j,f-C*2/3,h-_*2/3,rn.BOTTOM_RIGHT):new rr(a.left+a.width-C*2/3,a.top+a.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?es(a.left+S*2/3,a.top+B,g-S*2/3,x-_*2/3,rn.BOTTOM_LEFT):new rr(a.left+S*2/3,a.top+a.height-_*2/3),this.topLeftBorderStroke=s>0||o>0?es(a.left+S/2,a.top+T/2,s-S/2,o-T/2,rn.TOP_LEFT):new rr(a.left+S/2,a.top+T/2),this.topRightBorderStroke=s>0||o>0?es(a.left+w,a.top+T/2,c-C/2,u-T/2,rn.TOP_RIGHT):new rr(a.left+a.width-C/2,a.top+T/2),this.bottomRightBorderStroke=f>0||h>0?es(a.left+O,a.top+j,f-C/2,h-_/2,rn.BOTTOM_RIGHT):new rr(a.left+a.width-C/2,a.top+a.height-_/2),this.bottomLeftBorderStroke=g>0||x>0?es(a.left+S/2,a.top+B,g-S/2,x-_/2,rn.BOTTOM_LEFT):new rr(a.left+S/2,a.top+a.height-_/2),this.topLeftBorderBox=s>0||o>0?es(a.left,a.top,s,o,rn.TOP_LEFT):new rr(a.left,a.top),this.topRightBorderBox=c>0||u>0?es(a.left+w,a.top,c,u,rn.TOP_RIGHT):new rr(a.left+a.width,a.top),this.bottomRightBorderBox=f>0||h>0?es(a.left+O,a.top+j,f,h,rn.BOTTOM_RIGHT):new rr(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=g>0||x>0?es(a.left,a.top+B,g,x,rn.BOTTOM_LEFT):new rr(a.left,a.top+a.height),this.topLeftPaddingBox=s>0||o>0?es(a.left+S,a.top+T,Math.max(0,s-S),Math.max(0,o-T),rn.TOP_LEFT):new rr(a.left+S,a.top+T),this.topRightPaddingBox=c>0||u>0?es(a.left+Math.min(w,a.width-C),a.top+T,w>a.width+C?0:Math.max(0,c-C),Math.max(0,u-T),rn.TOP_RIGHT):new rr(a.left+a.width-C,a.top+T),this.bottomRightPaddingBox=f>0||h>0?es(a.left+Math.min(O,a.width-S),a.top+Math.min(j,a.height-_),Math.max(0,f-C),Math.max(0,h-_),rn.BOTTOM_RIGHT):new rr(a.left+a.width-C,a.top+a.height-_),this.bottomLeftPaddingBox=g>0||x>0?es(a.left+S,a.top+Math.min(B,a.height-_),Math.max(0,g-S),Math.max(0,x-_),rn.BOTTOM_LEFT):new rr(a.left+S,a.top+a.height-_),this.topLeftContentBox=s>0||o>0?es(a.left+S+M,a.top+T+L,Math.max(0,s-(S+M)),Math.max(0,o-(T+L)),rn.TOP_LEFT):new rr(a.left+S+M,a.top+T+L),this.topRightContentBox=c>0||u>0?es(a.left+Math.min(w,a.width+S+M),a.top+T+L,w>a.width+S+M?0:c-S+M,u-(T+L),rn.TOP_RIGHT):new rr(a.left+a.width-(C+P),a.top+T+L),this.bottomRightContentBox=f>0||h>0?es(a.left+Math.min(O,a.width-(S+M)),a.top+Math.min(j,a.height+T+L),Math.max(0,f-(C+P)),h-(_+k),rn.BOTTOM_RIGHT):new rr(a.left+a.width-(C+P),a.top+a.height-(_+k)),this.bottomLeftContentBox=g>0||x>0?es(a.left+S+M,a.top+B,Math.max(0,g-(S+M)),x-(_+k),rn.BOTTOM_LEFT):new rr(a.left+S+M,a.top+a.height-(_+k))}return e}(),rn;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(rn||(rn={}));var es=function(e,t,r,a,n){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=a*s,c=e+r,u=t+a;switch(n){case rn.TOP_LEFT:return new T5(new rr(e,u),new rr(e,u-l),new rr(c-o,t),new rr(c,t));case rn.TOP_RIGHT:return new T5(new rr(e,t),new rr(e+o,t),new rr(c,u-l),new rr(c,u));case rn.BOTTOM_RIGHT:return new T5(new rr(c,t),new rr(c,t+l),new rr(e+o,u),new rr(e,u));case rn.BOTTOM_LEFT:default:return new T5(new rr(c,u),new rr(c-o,u),new rr(e,t+l),new rr(e,t))}},k_=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},J0t=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},__=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Z0t=function(){function e(t,r,a){this.offsetX=t,this.offsetY=r,this.matrix=a,this.type=0,this.target=6}return e}(),I5=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),emt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),tmt=function(e){return e.type===0},ahe=function(e){return e.type===1},rmt=function(e){return e.type===2},SJ=function(e,t){return e.length===t.length?e.some(function(r,a){return r===t[a]}):!1},amt=function(e,t,r,a,n){return e.map(function(s,o){switch(o){case 0:return s.add(t,r);case 1:return s.add(t+a,r);case 2:return s.add(t+a,r+n);case 3:return s.add(t,r+n)}return s})},nhe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),she=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new Y0t(this.container),this.container.styles.opacity<1&&this.effects.push(new emt(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Z0t(a,n,s))}if(this.container.styles.overflowX!==0){var o=k_(this.curves),l=__(this.curves);SJ(o,l)?this.effects.push(new I5(o,6)):(this.effects.push(new I5(o,2)),this.effects.push(new I5(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,n=this.effects.slice(0);a;){var s=a.effects.filter(function(c){return!ahe(c)});if(r||a.container.styles.position!==0||!a.parent){if(n.unshift.apply(n,s),r=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var o=k_(a.curves),l=__(a.curves);SJ(o,l)||n.unshift(new I5(l,6))}}else n.unshift.apply(n,s);a=a.parent}return n.filter(function(c){return Ti(c.target,t)})},e}(),vP=function(e,t,r,a){e.container.elements.forEach(function(n){var s=Ti(n.flags,4),o=Ti(n.flags,2),l=new she(n,e);Ti(n.styles.display,2048)&&a.push(l);var c=Ti(n.flags,8)?[]:a;if(s||o){var u=s||n.styles.isPositioned()?r:t,d=new nhe(l);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var f=n.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else n.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);vP(l,d,s?d:r,c)}else n.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),vP(l,t,r,c);Ti(n.flags,8)&&ihe(n,c)})},ihe=function(e,t){for(var r=e instanceof hP?e.start:1,a=e instanceof hP?e.reversed:!1,n=0;n<t.length;n++){var s=t[n];s.container instanceof zAe&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=cN(r,s.container.styles.listStyleType,!0),r+=a?-1:1}},nmt=function(e){var t=new she(e,null),r=new nhe(t),a=[];return vP(t,r,r,a),ihe(t.container,a),r},BJ=function(e,t){switch(t){case 0:return ed(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return ed(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return ed(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return ed(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},smt=function(e,t){switch(t){case 0:return ed(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return ed(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return ed(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return ed(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},imt=function(e,t){switch(t){case 0:return ed(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return ed(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return ed(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return ed(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},omt=function(e,t){switch(t){case 0:return O5(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return O5(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return O5(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return O5(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},O5=function(e,t){var r=[];return Ku(e)?r.push(e.subdivide(.5,!1)):r.push(e),Ku(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},ed=function(e,t,r,a){var n=[];return Ku(e)?n.push(e.subdivide(.5,!1)):n.push(e),Ku(r)?n.push(r.subdivide(.5,!0)):n.push(r),Ku(a)?n.push(a.subdivide(.5,!0).reverse()):n.push(a),Ku(t)?n.push(t.subdivide(.5,!1).reverse()):n.push(t),n},ohe=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},S_=function(e){var t=e.styles,r=e.bounds,a=Un(t.paddingLeft,r.width),n=Un(t.paddingRight,r.width),s=Un(t.paddingTop,r.width),o=Un(t.paddingBottom,r.width);return r.add(a+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+a+n),-(t.borderTopWidth+t.borderBottomWidth+s+o))},lmt=function(e,t){return e===0?t.bounds:e===2?S_(t):ohe(t)},cmt=function(e,t){return e===0?t.bounds:e===2?S_(t):ohe(t)},Y6=function(e,t,r){var a=lmt(Sv(e.styles.backgroundOrigin,t),e),n=cmt(Sv(e.styles.backgroundClip,t),e),s=umt(Sv(e.styles.backgroundSize,t),r,a),o=s[0],l=s[1],c=_2(Sv(e.styles.backgroundPosition,t),a.width-o,a.height-l),u=dmt(Sv(e.styles.backgroundRepeat,t),c,s,a,n),d=Math.round(a.left+c[0]),f=Math.round(a.top+c[1]);return[u,d,f,o,l]},gv=function(e){return Cn(e)&&e.value===fb.AUTO},F5=function(e){return typeof e=="number"},umt=function(e,t,r){var a=t[0],n=t[1],s=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(xi(o)&&l&&xi(l))return[Un(o,r.width),Un(l,r.height)];var c=F5(s);if(Cn(o)&&(o.value===fb.CONTAIN||o.value===fb.COVER)){if(F5(s)){var u=r.width/r.height;return u<s!=(o.value===fb.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=F5(a),f=F5(n),h=d||f;if(gv(o)&&(!l||gv(l))){if(d&&f)return[a,n];if(!c&&!h)return[r.width,r.height];if(h&&c){var m=d?a:n*s,g=f?n:a/s;return[m,g]}var x=d?a:r.width,v=f?n:r.height;return[x,v]}if(c){var y=0,w=0;return xi(o)?y=Un(o,r.width):xi(l)&&(w=Un(l,r.height)),gv(o)?y=w*s:(!l||gv(l))&&(w=y/s),[y,w]}var j=null,O=null;if(xi(o)?j=Un(o,r.width):l&&xi(l)&&(O=Un(l,r.height)),j!==null&&(!l||gv(l))&&(O=d&&f?j/a*n:r.height),O!==null&&gv(o)&&(j=d&&f?O/n*a:r.width),j!==null&&O!==null)return[j,O];throw new Error("Unable to calculate background-size for element")},Sv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},dmt=function(e,t,r,a,n){var s=t[0],o=t[1],l=r[0],c=r[1];switch(e){case 2:return[new rr(Math.round(a.left),Math.round(a.top+o)),new rr(Math.round(a.left+a.width),Math.round(a.top+o)),new rr(Math.round(a.left+a.width),Math.round(c+a.top+o)),new rr(Math.round(a.left),Math.round(c+a.top+o))];case 3:return[new rr(Math.round(a.left+s),Math.round(a.top)),new rr(Math.round(a.left+s+l),Math.round(a.top)),new rr(Math.round(a.left+s+l),Math.round(a.height+a.top)),new rr(Math.round(a.left+s),Math.round(a.height+a.top))];case 1:return[new rr(Math.round(a.left+s),Math.round(a.top+o)),new rr(Math.round(a.left+s+l),Math.round(a.top+o)),new rr(Math.round(a.left+s+l),Math.round(a.top+o+c)),new rr(Math.round(a.left+s),Math.round(a.top+o+c))];default:return[new rr(Math.round(n.left),Math.round(n.top)),new rr(Math.round(n.left+n.width),Math.round(n.top)),new rr(Math.round(n.left+n.width),Math.round(n.height+n.top)),new rr(Math.round(n.left),Math.round(n.height+n.top))]}},fmt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",TJ="Hidden Text",Amt=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var a=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",o.appendChild(a),n.src=fmt,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(TJ)),a.appendChild(s),a.appendChild(n);var l=n.offsetTop-s.offsetTop+2;a.removeChild(s),a.appendChild(this._document.createTextNode(TJ)),a.style.lineHeight="normal",n.style.verticalAlign="super";var c=n.offsetTop-a.offsetTop+2;return o.removeChild(a),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var a=t+" "+r;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(t,r)),this._data[a]},e}(),lhe=function(){function e(t,r){this.context=t,this.options=r}return e}(),hmt=1e4,mmt=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n._activeEffects=[],n.canvas=a.canvas?a.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),a.canvas||(n.canvas.width=Math.floor(a.width*a.scale),n.canvas.height=Math.floor(a.height*a.scale),n.canvas.style.width=a.width+"px",n.canvas.style.height=a.height+"px"),n.fontMetrics=new Amt(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-a.x,-a.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),n}return t.prototype.applyEffects=function(r){for(var a=this;this._activeEffects.length;)this.popEffect();r.forEach(function(n){return a.applyEffect(n)})},t.prototype.applyEffect=function(r){this.ctx.save(),rmt(r)&&(this.ctx.globalAlpha=r.opacity),tmt(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),ahe(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return wl(this,void 0,void 0,function(){var a;return Xo(this,function(n){switch(n.label){case 0:return a=r.element.container.styles,a.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return wl(this,void 0,void 0,function(){return Xo(this,function(a){switch(a.label){case 0:if(Ti(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(r)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,a,n){var s=this;if(a===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+n);else{var o=G7(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+n),l+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var a=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),n=bmt(r.fontFamily).join(", "),s=nE(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,a,r.fontWeight,s,n].join(" "),n,s]},t.prototype.renderTextNode=function(r,a){return wl(this,void 0,void 0,function(){var n,s,o,l,c,u,d,f,h=this;return Xo(this,function(m){return n=this.createFontStyle(a),s=n[0],o=n[1],l=n[2],this.ctx.font=s,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=a.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Ki(a.color),h.renderTextWithLetterSpacing(g,a.letterSpacing,u);var v=a.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Ki(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,a.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),a.textDecorationLine.length&&(h.ctx.fillStyle=Ki(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Ki(a.webkitTextStrokeColor),h.ctx.lineWidth=a.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,a,n){if(n&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=S_(r),o=__(a);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return wl(this,void 0,void 0,function(){var a,n,s,o,l,c,w,w,u,d,f,h,O,m,g,B,x,v,y,w,j,O,B;return Xo(this,function(T){switch(T.label){case 0:this.applyEffects(r.getEffects(4)),a=r.container,n=r.curves,s=a.styles,o=0,l=a.textNodes,T.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:T.sent(),T.label=3;case 3:return o++,[3,1];case 4:if(!(a instanceof UAe))return[3,8];T.label=5;case 5:return T.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return w=T.sent(),this.renderReplacedElement(a,n,w),[3,8];case 7:return T.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof QAe&&this.renderReplacedElement(a,n,a.canvas),!(a instanceof HAe))return[3,12];T.label=9;case 9:return T.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return w=T.sent(),this.renderReplacedElement(a,n,w),[3,12];case 11:return T.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof GAe&&a.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,u.render(a.tree)]):[3,14];case 13:d=T.sent(),a.width&&a.height&&this.ctx.drawImage(d,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),T.label=14;case 14:if(a instanceof q7&&(f=Math.min(a.bounds.width,a.bounds.height),a.type===N_?a.checked&&(this.ctx.save(),this.path([new rr(a.bounds.left+f*.39363,a.bounds.top+f*.79),new rr(a.bounds.left+f*.16,a.bounds.top+f*.5549),new rr(a.bounds.left+f*.27347,a.bounds.top+f*.44071),new rr(a.bounds.left+f*.39694,a.bounds.top+f*.5649),new rr(a.bounds.left+f*.72983,a.bounds.top+f*.23),new rr(a.bounds.left+f*.84,a.bounds.top+f*.34085),new rr(a.bounds.left+f*.39363,a.bounds.top+f*.79)]),this.ctx.fillStyle=Ki(xJ),this.ctx.fill(),this.ctx.restore()):a.type===E_&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+f/2,a.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ki(xJ),this.ctx.fill(),this.ctx.restore())),pmt(a)&&a.value.length){switch(h=this.createFontStyle(s),O=h[0],m=h[1],g=this.fontMetrics.getMetrics(O,m).baseline,this.ctx.font=O,this.ctx.fillStyle=Ki(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=xmt(a.styles.textAlign),B=S_(a),x=0,a.styles.textAlign){case 1:x+=B.width/2;break;case 2:x+=B.width;break}v=B.add(x,0,0,-B.height/2+1),this.ctx.save(),this.path([new rr(B.left,B.top),new rr(B.left+B.width,B.top),new rr(B.left+B.width,B.top+B.height),new rr(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new lw(a.value,v),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ti(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(y=a.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,j=y.url,T.label=15;case 15:return T.trys.push([15,17,,18]),[4,this.context.cache.match(j)];case 16:return w=T.sent(),this.ctx.drawImage(w,a.bounds.left-(w.width+10),a.bounds.top),[3,18];case 17:return T.sent(),this.context.logger.error("Error loading list-style-image "+j),[3,18];case 18:return[3,20];case 19:r.listValue&&a.styles.listStyleType!==-1&&(O=this.createFontStyle(s)[0],this.ctx.font=O,this.ctx.fillStyle=Ki(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new t0(a.bounds.left,a.bounds.top+Un(a.styles.paddingTop,a.bounds.width),a.bounds.width,tJ(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new lw(r.listValue,B),s.letterSpacing,tJ(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),T.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return wl(this,void 0,void 0,function(){var a,n,y,s,o,y,l,c,y,u,d,y,f,h,y,m,g,y,x,v,y;return Xo(this,function(w){switch(w.label){case 0:if(Ti(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),a=0,n=r.negativeZIndex,w.label=2;case 2:return a<n.length?(y=n[a],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,o=r.nonInlineLevel,w.label=7;case 7:return s<o.length?(y=o[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,w.label=11;case 11:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,w.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,w.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var a=this;r.forEach(function(n,s){var o=Ku(n)?n.start:n;s===0?a.ctx.moveTo(o.x,o.y):a.ctx.lineTo(o.x,o.y),Ku(n)&&a.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},t.prototype.renderRepeat=function(r,a,n,s){this.path(r),this.ctx.fillStyle=a,this.ctx.translate(n,s),this.ctx.fill(),this.ctx.translate(-n,-s)},t.prototype.resizeImage=function(r,a,n){var s;if(r.width===a&&r.height===n)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,a),l.height=Math.max(1,n);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,a,n),l},t.prototype.renderBackgroundImage=function(r){return wl(this,void 0,void 0,function(){var a,n,s,o,l,c;return Xo(this,function(u){switch(u.label){case 0:a=r.styles.backgroundImage.length-1,n=function(d){var f,h,m,L,Q,q,M,U,_,g,L,Q,q,M,U,x,v,y,w,j,O,B,T,C,_,S,L,P,k,M,U,z,Q,q,V,Y,K,J,R,F,W,X;return Xo(this,function(ne){switch(ne.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ne.label=1;case 1:return ne.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=ne.sent(),[3,4];case 3:return ne.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(m=Y6(r,a,[f.width,f.height,f.width/f.height]),L=m[0],Q=m[1],q=m[2],M=m[3],U=m[4],_=s.ctx.createPattern(s.resizeImage(f,M,U),"repeat"),s.renderRepeat(L,_,Q,q)),[3,6];case 5:tAt(d)?(g=Y6(r,a,[null,null,null]),L=g[0],Q=g[1],q=g[2],M=g[3],U=g[4],x=Xft(d.angle,M,U),v=x[0],y=x[1],w=x[2],j=x[3],O=x[4],B=document.createElement("canvas"),B.width=M,B.height=U,T=B.getContext("2d"),C=T.createLinearGradient(y,j,w,O),ZY(d.stops,v).forEach(function(le){return C.addColorStop(le.stop,Ki(le.color))}),T.fillStyle=C,T.fillRect(0,0,M,U),M>0&&U>0&&(_=s.ctx.createPattern(B,"repeat"),s.renderRepeat(L,_,Q,q))):rAt(d)&&(S=Y6(r,a,[null,null,null]),L=S[0],P=S[1],k=S[2],M=S[3],U=S[4],z=d.position.length===0?[z7]:d.position,Q=Un(z[0],M),q=Un(z[z.length-1],U),V=Yft(d,Q,q,M,U),Y=V[0],K=V[1],Y>0&&K>0&&(J=s.ctx.createRadialGradient(P+Q,k+q,0,P+Q,k+q,Y),ZY(d.stops,Y*2).forEach(function(le){return J.addColorStop(le.stop,Ki(le.color))}),s.path(L),s.ctx.fillStyle=J,Y!==K?(R=r.bounds.left+.5*r.bounds.width,F=r.bounds.top+.5*r.bounds.height,W=K/Y,X=1/W,s.ctx.save(),s.ctx.translate(R,F),s.ctx.transform(1,0,0,W,0,0),s.ctx.translate(-R,-F),s.ctx.fillRect(P,X*(k-F)+F,M,U*X),s.ctx.restore()):s.ctx.fill())),ne.label=6;case 6:return a--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,n(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,a,n){return wl(this,void 0,void 0,function(){return Xo(this,function(s){return this.path(BJ(n,a)),this.ctx.fillStyle=Ki(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,a,n,s){return wl(this,void 0,void 0,function(){var o,l;return Xo(this,function(c){switch(c.label){case 0:return a<3?[4,this.renderSolidBorder(r,n,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=smt(s,n),this.path(o),this.ctx.fillStyle=Ki(r),this.ctx.fill(),l=imt(s,n),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return wl(this,void 0,void 0,function(){var a,n,s,o,l,c,u,d,f=this;return Xo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),a=r.container.styles,n=!Mm(a.backgroundColor)||a.backgroundImage.length,s=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],o=gmt(Sv(a.backgroundClip,0),r.curves),n||a.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Mm(a.backgroundColor)||(this.ctx.fillStyle=Ki(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=k_(r.curves),x=m.inset?0:hmt,v=amt(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+x,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=Ki(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?Ki(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!Mm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,a,n,s,o){return wl(this,void 0,void 0,function(){var l,c,u,d,f,h,m,g,x,v,y,w,j,O,B,T,B,T;return Xo(this,function(C){return this.ctx.save(),l=omt(s,n),c=BJ(s,n),o===2&&(this.path(c),this.ctx.clip()),Ku(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Ku(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),n===0||n===2?m=Math.abs(u-f):m=Math.abs(d-h),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=a<3?a*3:a*2,x=a<3?a*2:a,o===3&&(g=a,x=a),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(w=Math.floor((m+x)/(g+x)),j=(m-w*g)/(w-1),O=(m-(w+1)*g)/w,x=O<=0||Math.abs(x-j)<Math.abs(x-O)?j:O),v&&(o===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=Ki(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Ku(c[0])&&(B=c[3],T=c[0],this.ctx.beginPath(),this.formatPath([new rr(B.end.x,B.end.y),new rr(T.start.x,T.start.y)]),this.ctx.stroke()),Ku(c[1])&&(B=c[1],T=c[2],this.ctx.beginPath(),this.formatPath([new rr(B.end.x,B.end.y),new rr(T.start.x,T.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return wl(this,void 0,void 0,function(){var a;return Xo(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ki(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=nmt(r),[4,this.renderStack(a)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(lhe),pmt=function(e){return e instanceof $Ae||e instanceof VAe?!0:e instanceof q7&&e.type!==E_&&e.type!==N_},gmt=function(e,t){switch(e){case 0:return k_(t);case 2:return J0t(t);case 1:default:return __(t)}},xmt=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},vmt=["-apple-system","system-ui"],bmt=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return vmt.indexOf(t)===-1}):e},ymt=function(e){df(t,e);function t(r,a){var n=e.call(this,r,a)||this;return n.canvas=a.canvas?a.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=a,n.canvas.width=Math.floor(a.width*a.scale),n.canvas.height=Math.floor(a.height*a.scale),n.canvas.style.width=a.width+"px",n.canvas.style.height=a.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-a.x,-a.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),n}return t.prototype.render=function(r){return wl(this,void 0,void 0,function(){var a,n;return Xo(this,function(s){switch(s.label){case 0:return a=AP(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,wmt(a)];case 1:return n=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ki(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(lhe),wmt=function(e){return new Promise(function(t,r){var a=new Image;a.onload=function(){t(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Nmt=function(){function e(t){var r=t.id,a=t.enabled;this.id=r,this.enabled=a,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,f5([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,f5([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,f5([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,f5([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),Emt=function(){function e(t,r){var a;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new Nmt({id:this.instanceName,enabled:t.logging}),this.cache=(a=t.cache)!==null&&a!==void 0?a:new V0t(this,t)}return e.instanceCount=1,e}(),bP=function(e,t){return t===void 0&&(t={}),Cmt(e,t)};typeof window<"u"&&rhe.setContext(window);var Cmt=function(e,t){return wl(void 0,void 0,void 0,function(){var r,a,n,s,o,l,c,u,d,f,h,m,g,x,v,y,w,j,O,B,C,T,C,_,S,L,P,k,M,U,z,Q,q,V,Y,K,J,R,F,W;return Xo(this,function(X){switch(X.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(a=r.defaultView,!a)throw new Error("Document is not attached to a Window");return n={allowTaint:(_=t.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(S=t.imageTimeout)!==null&&S!==void 0?S:15e3,proxy:t.proxy,useCORS:(L=t.useCORS)!==null&&L!==void 0?L:!1},s=JD({logging:(P=t.logging)!==null&&P!==void 0?P:!0,cache:t.cache},n),o={windowWidth:(k=t.windowWidth)!==null&&k!==void 0?k:a.innerWidth,windowHeight:(M=t.windowHeight)!==null&&M!==void 0?M:a.innerHeight,scrollX:(U=t.scrollX)!==null&&U!==void 0?U:a.pageXOffset,scrollY:(z=t.scrollY)!==null&&z!==void 0?z:a.pageYOffset},l=new t0(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new Emt(s,l),u=(Q=t.foreignObjectRendering)!==null&&Q!==void 0?Q:!1,d={allowTaint:(q=t.allowTaint)!==null&&q!==void 0?q:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new kJ(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=X.sent(),g=K7(h)||k0t(h)?adt(h.ownerDocument):H4(c,h),x=g.width,v=g.height,y=g.left,w=g.top,j=jmt(c,h,t.backgroundColor),O={canvas:t.canvas,backgroundColor:j,scale:(Y=(V=t.scale)!==null&&V!==void 0?V:a.devicePixelRatio)!==null&&Y!==void 0?Y:1,x:((K=t.x)!==null&&K!==void 0?K:0)+y,y:((J=t.y)!==null&&J!==void 0?J:0)+w,width:(R=t.width)!==null&&R!==void 0?R:Math.ceil(x),height:(F=t.height)!==null&&F!==void 0?F:Math.ceil(v)},u?(c.logger.debug("Document cloned, using foreign object rendering"),C=new ymt(c,O),[4,C.render(h)]):[3,3];case 2:return B=X.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),T=KAe(c,h),j===T.styles.backgroundColor&&(T.styles.backgroundColor=Fh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+O.x+","+O.y+" with size "+O.width+"x"+O.height),C=new mmt(c,O),[4,C.render(T)];case 4:B=X.sent(),X.label=5;case 5:return(!((W=t.removeContainer)!==null&&W!==void 0)||W)&&(kJ.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,B]}})})},jmt=function(e,t,r){var a=t.ownerDocument,n=a.documentElement?iw(e,getComputedStyle(a.documentElement).backgroundColor):Fh.TRANSPARENT,s=a.body?iw(e,getComputedStyle(a.body).backgroundColor):Fh.TRANSPARENT,o=typeof r=="string"?iw(e,r):r===null?Fh.TRANSPARENT:4294967295;return t===a.documentElement?Mm(n)?Mm(s)?o:s:n:o};const kmt=Object.freeze(Object.defineProperty({__proto__:null,default:bP},Symbol.toStringTag,{value:"Module"})),_mt=e=>{const[t,r]=N.useState(!1),[a,n]=N.useState(null);return N.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const o=document.createElement("script");o.id=s,o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,o.async=!0,o.defer=!0,o.onload=()=>r(!0),o.onerror=()=>n(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(o)},[e]),{isLoaded:t,error:a}},che=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de prctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisin y mentora"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicacin interna"}],Smt=["Mecnica Industrial","Mecnica Automotriz"],Bmt=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:che.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),IJ=({empresas:e,isLoaded:t,route:r})=>{const a=N.useRef(null),n=N.useRef(null),s=N.useRef([]),o=N.useRef(null),l=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return N.useEffect(()=>{!t||!a.current||!window.google||(n.current||(n.current=new window.google.maps.Map(a.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),o.current||(o.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],o.current.setMap(null),r?(o.current.setMap(n.current),o.current.setDirections(r)):l.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:n.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(n.current,u)}),s.current.push(u)}))},[l,t,r]),i.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[i.jsx("div",{ref:a,className:"h-[600px] w-full rounded-lg border"}),!r&&l.length===0&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:i.jsx("div",{className:"text-center p-6",children:i.jsx("p",{className:"text-gray-600 text-lg",children:" No hay empresas geo-localizadas"})})})]})},Tmt=({route:e,travelMode:t})=>{const n=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.duration)==null?void 0:m.value)||0)},0),l=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*n*60,c=s+l,u=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.distance)==null?void 0:m.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return i.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[i.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),i.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var m,g,x;return i.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0],"  ",f.end_address.split(",")[0]]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[(m=f.duration)==null?void 0:m.text,"  ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&i.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((v,y)=>v.transit&&i.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{dangerouslySetInnerHTML:{__html:v.instructions}})]},y))})]},h)})}),i.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[i.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),i.jsxs("p",{children:["Tiempo en paradas: ",Math.round(l/60)," min"]}),i.jsxs("p",{className:"text-lg",children:["Duracin Total Estimada: ",Math.round(c/60)," min"]}),i.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&i.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},OJ=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(a,n)=>{var s;n===window.google.maps.places.PlacesServiceStatus.OK&&((s=a==null?void 0:a.geometry)!=null&&s.location)?t({lat:a.geometry.location.lat(),lng:a.geometry.location.lng()}):t(null)})}):null,Imt=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),i.jsx(cc,{width:"100%",height:300,children:i.jsxs(d4,{children:[i.jsx(WN,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,a)=>i.jsx(qh,{fill:t[a%t.length]},`cell-${a}`))}),i.jsx(lc,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),i.jsx(cc,{width:"100%",height:300,children:i.jsxs(Nh,{data:e.porSupervisor,layout:"vertical",children:[i.jsx(wh,{strokeDasharray:"3 3"}),i.jsx(Vd,{type:"number"}),i.jsx($d,{type:"category",dataKey:"name",width:150}),i.jsx(lc,{}),i.jsx(lA,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Distribucin por Comuna"}),i.jsx(cc,{width:"100%",height:300,children:i.jsxs(Nh,{data:e.porComuna,children:[i.jsx(wh,{strokeDasharray:"3 3"}),i.jsx(Vd,{dataKey:"name"}),i.jsx($d,{}),i.jsx(lc,{}),i.jsx(lA,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Calificacin por mbito"}),i.jsx(cc,{width:"100%",height:300,children:i.jsxs(VWe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[i.jsx(Nle,{}),i.jsx(u4,{dataKey:"subject"}),i.jsx(l4,{angle:30,domain:[0,5]}),i.jsx(IM,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),i.jsx(lc,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),i.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:i.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,a)=>i.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[i.jsxs("span",{className:"font-semibold",children:[a+1,". ",r.nombre]}),i.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," "]})]},r.id))})})]})]})},Omt=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[n,s]=N.useState("list"),[o,l]=N.useState(null),[c,u]=N.useState(!0),[d,f]=N.useState(null),[h,m]=N.useState(null),[g,x]=N.useState(null),[v,y]=N.useState([]),[w,j]=N.useState(null),[O,B]=N.useState(!1),[T,C]=N.useState("DRIVING"),[_,S]=N.useState(""),[L,P]=N.useState([]),k="AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg",{isLoaded:M,error:U}=_mt(k);N.useEffect(()=>{u(!0);const ae=Zlt(t),Ae=rct(a),ke=nct(P);return u(!1),()=>{ae(),Ae(),ke()}},[]);const z=N.useMemo(()=>{const ae=e.reduce((Le,Te)=>{const de=Te.area||"Sin especificar";return Le[de]=(Le[de]||0)+1,Le},{}),Ae=e.reduce((Le,Te)=>{var Ce;const de=((Ce=Te.docenteSupervisor)==null?void 0:Ce.nombreCompleto)||"Sin asignar";return Le[de]=(Le[de]||0)+1,Le},{}),ke=e.reduce((Le,Te)=>{const de=Te.direccion.split(",").map(me=>me.trim()),Ce=de.length>1?de[1]:"Desconocida";return Le[Ce]=(Le[Ce]||0)+1,Le},{}),re=che.map(Le=>{const Te=e.flatMap(Ce=>{var me;return(me=Ce.calificaciones.find(ye=>ye.elemento===Le.elemento))==null?void 0:me.score}).filter(Ce=>Ce!=null),de=Te.length>0?Te.reduce((Ce,me)=>Ce+me,0)/Te.length:0;return{subject:Le.elemento.split(" ")[0],A:de,fullMark:5}}),Re=e.map(Le=>{const Te=Le.calificaciones.map(Ce=>Ce.score).filter(Ce=>Ce!=null),de=Te.length>0?Te.reduce((Ce,me)=>Ce+me,0)/Te.length:0;return{...Le,promedio:de}}).filter(Le=>Le.promedio>0).sort((Le,Te)=>Te.promedio-Le.promedio);return{porEspecialidad:Object.entries(ae).map(([Le,Te])=>({name:Le,value:Te})),porSupervisor:Object.entries(Ae).map(([Le,Te])=>({name:Le,value:Te})),porComuna:Object.entries(ke).map(([Le,Te])=>({name:Le,value:Te})),calificacionPorAmbito:re,ranking:Re}},[e]),Q=async()=>{if(o)try{await ect(o),s("list"),l(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},q=async ae=>{window.confirm("Est seguro de eliminar esta empresa?")&&await tct(ae)},V=(ae,Ae)=>{l(ke=>ke?{...ke,[ae]:Ae}:null)},Y=async ae=>{var Ae;if(f(ae),(Ae=ae==null?void 0:ae.value)!=null&&Ae.place_id&&M){const ke=await OJ(ae.value.place_id);V("direccion",ae.label||""),V("coordenadas",ke)}else V("direccion",(ae==null?void 0:ae.label)||"")},K=ae=>{l(JSON.parse(JSON.stringify(ae))),ae.direccion&&f({label:ae.direccion,value:{description:ae.direccion}}),s("form")},J=async ae=>{var Ae;if(m(ae),(Ae=ae==null?void 0:ae.value)!=null&&Ae.place_id&&M){const ke=await OJ(ae.value.place_id);x(ke)}},R=ae=>{y(Ae=>Ae.some(ke=>ke.id===ae.id)?Ae.filter(ke=>ke.id!==ae.id):[...Ae,ae])},F=()=>{if(!g||v.length===0||!M)return;B(!0);const ae=new window.google.maps.DirectionsService,Ae=v.filter(ke=>ke.coordenadas).map(ke=>({location:ke.coordenadas,stopover:!0}));ae.route({origin:g,destination:g,waypoints:Ae,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[T]},(ke,re)=>{B(!1),re===window.google.maps.DirectionsStatus.OK&&ke?j(ke):alert("No se pudo calcular la ruta: "+re)})},W=()=>{j(null),m(null),x(null),y([]),S("")},X=async()=>{if(!_||!h||!g||v.length===0){alert("Por favor, asigna un nombre a la ruta y asegrate de tener un punto de partida y empresas seleccionadas.");return}const ae={nombre:_,startPoint:{label:h.label,coords:g},empresas:v.map(Ae=>({id:Ae.id,nombre:Ae.nombre,coordenadas:Ae.coordenadas})),travelMode:T};try{await act(ae),alert("Ruta guardada con xito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},ne=async()=>{const ae=document.getElementById("map-container-for-pdf"),Ae=document.getElementById("route-details-for-pdf");if(!ae||!Ae)return;const ke=new pr("p","mm","a4"),re=ke.internal.pageSize.getWidth();ke.text(`Ruta de Supervisin: ${_||"Sin nombre"}`,10,15),ke.setFontSize(10),ke.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const Le=(await bP(ae,{useCORS:!0})).toDataURL("image/png");ke.addImage(Le,"PNG",10,30,re-20,100);const de=(await bP(Ae)).toDataURL("image/png"),Ce=ke.getImageProperties(de),me=Ce.height*(re-20)/Ce.width;ke.addImage(de,"PNG",10,135,re-20,me),ke.save(`ruta-${_||"supervision"}.pdf`)},le=ae=>{m({label:ae.startPoint.label,value:null}),x(ae.startPoint.coords),y(ae.empresas),C(ae.travelMode),S(ae.nombre),s("route")},ie=async ae=>{window.confirm("Ests seguro de que quieres eliminar esta ruta guardada?")&&(await sct(ae),alert("Ruta eliminada."))};return c?i.jsx("div",{className:"text-center p-8",children:"Cargando..."}):U?i.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-6 rounded-xl shadow-md",role:"alert",children:[i.jsx("p",{className:"font-bold text-lg",children:"Error de Configuracin de Google Maps"}),i.jsx("p",{className:"mt-2",children:U.message}),i.jsxs("p",{className:"mt-4 text-sm",children:["Para solucionar este problema, por favor crea un archivo llamado ",i.jsx("code",{children:".env.local"})," en la raz del proyecto y aade la siguiente lnea:"]}),i.jsx("pre",{className:"bg-gray-800 text-white p-3 rounded-md mt-2 text-sm",children:"VITE_GOOGLE_MAPS_API_KEY=TU_API_KEY_DE_GOOGLE_MAPS"}),i.jsxs("p",{className:"mt-2 text-sm",children:["Reemplaza ",i.jsx("code",{children:"TU_API_KEY_DE_GOOGLE_MAPS"}),' con tu clave real. Asegrate de que la clave tenga habilitada la "Maps JavaScript API" y la "Places API" en tu consola de Google Cloud.']})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Gestin de Empresas"}),i.jsxs("div",{className:"flex items-center gap-4",children:[n!=="list"&&i.jsx("button",{onClick:()=>{s("list"),f(null),l(null),W()},className:"font-semibold hover:text-blue-600",children:" Volver al listado"}),n==="list"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[i.jsx(rre,{size:18})," Dashboard"]}),i.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),i.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisin",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisin"}),i.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:()=>{l(Bmt()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),n==="dashboard"&&i.jsx(Imt,{data:z}),n==="saved-routes"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisin Guardadas"}),i.jsx("div",{className:"space-y-3",children:L.length===0?i.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):L.map(ae=>i.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:ae.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[ae.empresas.length," paradas"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>le(ae),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),i.jsx("button",{onClick:()=>ie(ae.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},ae.id))})]}),n==="route"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisin"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),i.jsx("input",{type:"text",value:_,onChange:ae=>S(ae.target.value),placeholder:"Ej: Supervisin Zona Norte",className:"input-style w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),i.jsx(IY,{apiKey:k,selectProps:{value:h,onChange:J,placeholder:"Buscar direccin de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),i.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[i.jsx("button",{onClick:()=>C("DRIVING"),className:`w-full py-2 rounded-md transition ${T==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automvil"}),i.jsx("button",{onClick:()=>C("TRANSIT"),className:`w-full py-2 rounded-md transition ${T==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Pblico"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),i.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(ae=>ae.coordenadas).map(ae=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`route-${ae.id}`,checked:v.some(Ae=>Ae.id===ae.id),onChange:()=>R(ae),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:`route-${ae.id}`,className:"ml-3 text-sm text-gray-700",children:ae.nombre})]},ae.id))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("button",{onClick:F,disabled:!g||v.length===0||O,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:O?"Calculando...":"Visualizar Ruta"}),i.jsx("button",{onClick:X,disabled:!_||!g||v.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),i.jsx("button",{onClick:ne,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),i.jsx("button",{onClick:W,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),i.jsx("div",{children:i.jsx(IJ,{empresas:v,isLoaded:M,route:w})})]}),w&&i.jsx(Tmt,{route:w,travelMode:T})]}),n==="map"&&i.jsx(IJ,{empresas:e,isLoaded:M}),n==="list"&&i.jsx("div",{className:"space-y-3",children:e.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(ae=>{var Ae;return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:ae.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[ae.rut," | ",ae.direccion]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["rea: ",ae.area||"No especificada"," | Cupos: ",ae.cupos," | Supervisor: ",((Ae=ae.docenteSupervisor)==null?void 0:Ae.nombreCompleto)||"Ninguno"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>K(ae),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),i.jsx("button",{onClick:()=>q(ae.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ae.id)})}),n==="form"&&o&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"id"in o?"Editando Empresa":"Nueva Empresa"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(Rwe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.nombre,onChange:ae=>V("nombre",ae.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(ONe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.rut,onChange:ae=>V("rut",ae.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(Kj,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),i.jsx("div",{className:"w-full pl-10",children:i.jsx(IY,{apiKey:k,selectProps:{value:d,onChange:Y,placeholder:"Buscar direccin..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(jb,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.contacto,onChange:ae=>V("contacto",ae.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(XNe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"email",value:o.email||"",onChange:ae=>V("email",ae.target.value),placeholder:"Correo electrnico",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(Fi,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"number",value:o.cupos,onChange:ae=>V("cupos",parseInt(ae.target.value)||1),placeholder:"N de cupos",className:"input-style pl-10",min:"1"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(ww,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:o.area||"",onChange:ae=>V("area",ae.target.value),className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",disabled:!0,children:"Seleccione un rea"}),Smt.map(ae=>i.jsx("option",{value:ae,children:ae},ae))]})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(jb,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:o.docenteSupervisor?JSON.stringify(o.docenteSupervisor):"",onChange:ae=>{const Ae=ae.target.value;V("docenteSupervisor",Ae?JSON.parse(Ae):void 0)},className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(ae=>i.jsx("option",{value:JSON.stringify({id:ae.id,nombre:ae.nombreCompleto}),children:ae.nombreCompleto},ae.id))]})]})]}),i.jsxs("div",{className:"space-y-4 pt-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Evaluacin de la Empresa"}),o.calificaciones.map((ae,Ae)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[i.jsx(FEe,{className:"w-5 h-5 text-slate-400"}),i.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:ae.elemento}),i.jsxs("select",{value:ae.score||"",onChange:ke=>{const re=[...o.calificaciones];re[Ae].score=ke.target.value?parseInt(ke.target.value):null,V("calificaciones",re)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[i.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(ke=>i.jsx("option",{value:ke,children:ke},ke))]})]},Ae))]}),i.jsx("div",{className:"pt-6",children:i.jsx("button",{onClick:Q,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!o.nombre||!o.rut,children:"Guardar Empresa"})})]})]})},W7="dpd_actividades",uhe="dpd_respuestas",Fmt="usuarios";function Dmt(e,{includeArchived:t=!1}={}){const r=ht(st,W7),a=t?Dt(r,Yt("createdAt","desc")):Dt(r,ur("isArchived","==",!1),Yt("createdAt","desc"));return nr(a,n=>{const s=n.docs.map(o=>({id:o.id,...o.data()}));e(s)})}async function Pmt(e){const t=ht(st,W7);return(await Zr(t,{...e,isArchived:!1,createdAt:Ga(),updatedAt:Ga()})).id}async function Rmt(e){const t=Jt(st,W7,e);await xn(t)}function Lmt(e,t){const r=ht(st,uhe),a=Dt(r,ur("activityId","==",e),Yt("createdAt","desc"));return nr(a,n=>{const s=n.docs.map(o=>({id:o.id,...o.data()}));t(s)})}async function Mmt(e){const t=ht(st,uhe);return(await Zr(t,{...e,createdAt:Ga()})).id}function Umt(e,t){const r=ht(st,Fmt),a=Dt(r,ur("profile","in",e));return nr(a,n=>{const s=n.docs.map(o=>{const l=o.data();return{id:o.id,nombre:(l==null?void 0:l.displayName)||(l==null?void 0:l.name)||(l==null?void 0:l.email)||"Sin nombre",profile:l==null?void 0:l.profile,email:l==null?void 0:l.email}});t(s)})}function dhe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const B_=500,FJ=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificacin y organizacin del currculo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),e2=ct.memo(({title:e,icon:t,right:r,children:a})=>i.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[i.jsxs("header",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),a]})),Qmt=ct.memo(({value:e,onChange:t,canCreate:r})=>{const a=(n,s)=>i.jsx("button",{onClick:()=>t(n),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===n?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:n==="crear"&&!r,title:n==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},n);return i.jsxs("div",{className:"flex items-center gap-2",children:[a("responder","Responder"),a("dashboard","Dashboard"),a("crear","Nueva actividad")]})}),Hmt=ct.memo(({items:e,selectedId:t,onSelect:r,canDelete:a,onDelete:n})=>e.length?i.jsx("ul",{className:"space-y-2",children:e.map(s=>{const o=s.id===t;return i.jsxs("li",{children:[i.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${o?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo}  ${s.dimension} / ${s.subdimension}`,children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Fg,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:s.titulo})]}),i.jsx(PR,{className:"w-4 h-4 opacity-70"})]}),a(s)&&i.jsx("button",{onClick:()=>n(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):i.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(kNe,{className:"w-4 h-4"})," An no hay actividades creadas."]})),J6=ct.memo(({label:e,value:t,pill:r})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?i.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):i.jsx("span",{className:"font-medium",children:t})]})),zmt=ct.memo(({label:e,value:t,total:r=0})=>{const a=r>0?t/r*100:t>0?100:0,n=a>=75?"from-emerald-500":a>=50?"from-blue-500":a>=25?"from-amber-500":"from-rose-500";return i.jsxs("div",{className:"relative mt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),i.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),i.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:i.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${n} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,a)}%`}})})]})}),Vmt=ct.memo(({option:e,options:t,onChangeText:r,onDelete:a})=>{const n=N.useCallback(o=>r(e.id,o.target.value),[e.id,r]),s=N.useCallback(()=>a(e.id),[e.id,a]);return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{value:e.text,onChange:n,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opcin ${t.findIndex(o=>o.id===e.id)+1}`}),i.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opcin",children:i.jsx(sn,{className:"w-4 h-4"})})]})}),$mt=ct.memo(({q:e,index:t,onRemove:r,onPatch:a})=>{const n=N.useCallback(f=>a(e.id,{enunciado:f.target.value}),[e.id,a]),s=N.useCallback(f=>a(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,a]),o=N.useCallback(f=>a(e.id,{multiple:f.target.checked}),[e.id,a]),l=N.useCallback(()=>a(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,a]),c=N.useCallback((f,h)=>{a(e.id,{opciones:e.opciones.map(m=>m.id===f?{...m,text:h}:m)})},[e.id,e.opciones,a]),u=N.useCallback(f=>a(e.id,{opciones:e.opciones.filter(h=>h.id!==f)}),[e.id,e.opciones,a]),d=N.useCallback(()=>r(e.id),[e.id,r]);return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1,"  ",e.tipo==="abierta"?"Abierta":"Seleccin mltiple"]}),i.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:i.jsx(sn,{className:"w-4 h-4"})})]}),i.jsx("input",{value:e.enunciado,onChange:n,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("label",{className:"text-sm",children:"Mx. palabras"}),i.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||B_,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:o})," Permitir seleccin mltiple"]}),e.opciones.map(f=>i.jsx(Vmt,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),i.jsx("button",{onClick:l,className:"text-sm text-sky-700 hover:underline",children:"+ Aadir opcin"})]})]})}),Gmt=ct.memo(({q:e,respuestas:t,onChange:r})=>{var o,l;const a=N.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((o=t[e.id])==null?void 0:o.valorTexto)||"";return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("textarea",{rows:5,value:c,onChange:a,placeholder:`Mximo ${e.maxPalabras||B_} palabras`,className:"w-full border rounded-lg px-3 py-2"}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[dhe(c)," / ",e.maxPalabras||B_," palabras"]})]})}const n=((l=t[e.id])==null?void 0:l.seleccionados)||[],s=c=>{let u=new Set(n);n.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=n.includes(c);return i.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),i.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),qmt=({currentUser:e})=>{var R;const[t,r]=N.useState("responder"),[a,n]=N.useState([]),[s,o]=N.useState(""),[l,c]=N.useState(""),[u,d]=N.useState(FJ()),f=N.useCallback(F=>d(W=>({...W,...F})),[]),[h,m]=N.useState([]),[g,x]=N.useState({}),[v,y]=N.useState([]),w=WH.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);N.useEffect(()=>{const F=Dmt(W=>{n(W),o(X=>{var ne;return X||(((ne=W[0])==null?void 0:ne.id)??"")})});return()=>F()},[]),N.useEffect(()=>{const F=Umt(["PROFESORADO","SUBDIRECCION"],W=>{m(W),d(X=>{if(X.creadorId)return X;const ne=W.find(le=>le.id===(e==null?void 0:e.uid));return ne?{...X,creadorId:ne.id,creadorNombre:ne.nombre,creadorPerfil:ne.profile||X.creadorPerfil}:X})});return()=>F()},[e]),N.useEffect(()=>{if(!s)return;const F=Lmt(s,y);return()=>F()},[s]);const j=N.useMemo(()=>a.find(F=>F.id===s),[a,s]);N.useMemo(()=>Ah[u.dimension]||[],[u.dimension]),N.useEffect(()=>{d(F=>{const W=Ah[F.dimension]||[],X=W.includes(F.subdimension)?F.subdimension:W[0]||"";return X===F.subdimension?F:{...F,subdimension:X}})},[u.dimension]);const O=N.useCallback(()=>{const F={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aqu tu pregunta abierta",maxPalabras:B_};d(W=>({...W,preguntas:[...W.preguntas,F]}))},[]),B=N.useCallback(()=>{const F={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opcin(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opcin 1"},{id:crypto.randomUUID(),text:"Opcin 2"},{id:crypto.randomUUID(),text:"Opcin 3"},{id:crypto.randomUUID(),text:"Opcin 4"}],multiple:!0};d(W=>({...W,preguntas:[...W.preguntas,F]}))},[]),T=N.useCallback((F,W)=>{d(X=>({...X,preguntas:X.preguntas.map(ne=>ne.id===F?{...ne,...W}:ne)}))},[]),C=N.useCallback(F=>{d(W=>({...W,preguntas:W.preguntas.filter(X=>X.id!==F)}))},[]),[_,S]=N.useState(!1),L=N.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){S(!0);try{const W=(await AFe(u.aiTema,u.aiCantidad)).map(X=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:X.enunciado,opciones:X.opciones.slice(0,5).map(ne=>({id:crypto.randomUUID(),text:ne})),multiple:!0}));d(X=>({...X,preguntas:[...X.preguntas,...W]}))}finally{S(!1)}}},[u.aiTema,u.aiCantidad]),[P,k]=N.useState([]);N.useEffect(()=>{(async()=>{var X;if(!j)return;const W=[];for(const ne of v)if(ne.respuestas)for(const[le,ie]of Object.entries(ne.respuestas)){const ae=j.preguntas.find(ke=>ke.id===le);if(!ae||ae.tipo!=="abierta")continue;const Ae=ie;Ae.tipo==="abierta"&&((X=Ae.valorTexto)!=null&&X.trim())&&W.push(Ae.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",W.length),W.length>0)try{const ne=await hFe(W,30);console.log("Keywords generadas:",ne),k(ne)}catch(ne){console.error("Error al extraer keywords:",ne),k([])}else k([])})()},[j,v]);const M=N.useMemo(()=>{if(!j)return{};const F={};for(const W of j.preguntas)W.tipo==="seleccion_multiple"&&(F[W.id]={},(W.opciones||[]).forEach(X=>F[W.id][X]=0));for(const W of v)for(const[X,ne]of Object.entries(W.respuestas||{})){const le=ne;if((le==null?void 0:le.tipo)==="seleccion_multiple")for(const ie of le.seleccionados||[])F[X]||(F[X]={}),F[X][ie]=(F[X][ie]||0)+1}return F},[j,v]),U=N.useCallback(F=>F.map(W=>W.tipo==="abierta"?W:{...W,opciones:W.opciones.map(X=>X.text)}),[]),z=N.useCallback(()=>d(FJ()),[]),Q=N.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un ttulo");if(!u.creadorId)return alert("Debes seleccionar un creador");const F={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:U(u.preguntas)},W=await Pmt(F);z(),o(W),r("responder")},[u,U,z]),q=N.useCallback(async(F,W)=>{var ne;if(window.confirm(`Eliminar "${W}"?
Se eliminarn la actividad, sus preguntas y respuestas. Esta accin no se puede deshacer.`)){if(await Rmt(F),s===F){const le=a.filter(ie=>ie.id!==F);o(((ne=le[0])==null?void 0:ne.id)||""),le.length||r("crear")}alert("Actividad eliminada.")}},[s,a]),V=N.useCallback(async()=>{if(!j||!v.length)return;const F=new pr("p","mm","a4"),W=20;let X=W;F.setFontSize(20),F.text(`Informe: ${j.titulo}`,W,X),X+=10,F.setFontSize(12),F.text(`Dimensin: ${j.dimension}`,W,X+=10),F.text(`Subdimensin: ${j.subdimension}`,W,X+=7),F.text(`Creador: ${j.creadorNombre} (${j.creadorPerfil})`,W,X+=7),F.text(`Total de respuestas: ${v.length}`,W,X+=7),X+=10;for(const ne of j.preguntas){if(X>250&&(F.addPage(),X=W),F.setFontSize(14),F.text(`Pregunta: ${ne.enunciado}`,W,X+=10),X+=5,F.setFontSize(12),ne.tipo==="seleccion_multiple"){const le=M[ne.id]||{},ie=v.length;Object.entries(le).forEach(([ae,Ae])=>{const ke=ie>0?Math.round(Ae/ie*100):0;F.text(`${ae}: ${Ae} respuestas (${ke}%)`,W+5,X+=7)})}else{F.text("Respuestas:",W,X+=7);for(const le of v){const ie=le.respuestas[ne.id];if((ie==null?void 0:ie.tipo)==="abierta"&&ie.valorTexto){X>250&&(F.addPage(),X=W),F.text(`${le.userNombre}:`,W+5,X+=7);const ae=F.splitTextToSize(ie.valorTexto,170);F.text(ae,W+10,X+=7),X+=ae.length*7}}}X+=10}if(P.length>0){X>250&&(F.addPage(),X=W),F.setFontSize(14),F.text("Conceptos clave detectados:",W,X+=10),F.setFontSize(12);const ne=P.map(ie=>`${ie.keyword} (${Math.round(ie.score*100)}%)`).join(", "),le=F.splitTextToSize(ne,170);F.text(le,W,X+=7)}F.save(`informe_${j.titulo.replace(/\s+/g,"_")}.pdf`)},[j,v,M,P]),Y=N.useCallback(F=>{const W=e==null?void 0:e.isAdmin,X=F.creadorId===(e==null?void 0:e.uid);return w&&(W||X)},[e,w]),K=N.useCallback((F,W)=>{x(X=>({...X,[F.id]:F.tipo==="abierta"?{tipo:"abierta",valorTexto:W}:{tipo:"seleccion_multiple",seleccionados:W}}))},[]),J=N.useCallback(async()=>{if(j){for(const F of j.preguntas){const W=g[F.id];if(W&&F.tipo==="abierta"&&F.maxPalabras){const X=dhe(W.valorTexto||"");if(X>F.maxPalabras)return alert(`La respuesta a "${F.enunciado}" supera el mximo de ${F.maxPalabras} palabras (${X}).`)}}await Mmt({activityId:j.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Annimo",respuestas:g}),x({}),alert("Respuestas enviadas!")}},[j,g,e]);return i.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(pS,{className:"w-7 h-7 text-indigo-600"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),i.jsx(Qmt,{value:t,onChange:r,canCreate:w})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[i.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:i.jsx(e2,{title:"Actividades",icon:i.jsx(Fg,{className:"w-5 h-5 text-indigo-600"}),children:i.jsx(Hmt,{items:a,selectedId:s,onSelect:F=>{o(F),r("responder")},canDelete:Y,onDelete:q})})}),i.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&w&&i.jsxs(e2,{title:"Nueva actividad / sesin",icon:i.jsx(az,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:Q,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Fl,{className:"w-4 h-4"}),"Guardar"]}),children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Ttulo"}),i.jsx("input",{value:u.titulo,onChange:F=>f({titulo:F.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"rea de trabajo (Dimensin PME)"}),i.jsx("select",{value:u.dimension,onChange:F=>f({dimension:F.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(Ah).map(F=>i.jsx("option",{value:F,children:F},F))}),i.jsx("select",{value:u.subdimension,onChange:F=>f({subdimension:F.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(Ah[u.dimension]||[]).map(F=>i.jsx("option",{value:F,children:F},F))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador  Perfil"}),i.jsx("select",{value:u.creadorPerfil,onChange:F=>f({creadorPerfil:F.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:WH.map(F=>i.jsx("option",{value:F,children:F},F))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador  Usuario"}),i.jsxs("select",{value:u.creadorId,onChange:F=>{const W=F.target.value,X=h.find(ne=>ne.id===W);f({creadorId:W,creadorNombre:(X==null?void 0:X.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[i.jsx("option",{value:"",children:"Seleccione"}),h.filter(F=>F.profile===u.creadorPerfil).map(F=>i.jsx("option",{value:F.id,children:F.nombre},F.id))]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[i.jsx(LR,{className:"w-4 h-4"})," Preguntas"]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsxs("button",{onClick:O,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(So,{className:"w-4 h-4"})," Abierta"]}),i.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(So,{className:"w-4 h-4"})," Seleccin mltiple"]}),i.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[i.jsx(XEe,{className:"w-4 h-4"})," IA"]}),i.jsx("input",{value:u.aiTema,onChange:F=>f({aiTema:F.target.value}),placeholder:"Tema para IA (p. ej., evaluacin formativa)",className:"border rounded-lg px-3 py-1.5"}),i.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:F=>f({aiCantidad:parseInt(F.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),i.jsxs("button",{onClick:L,disabled:_||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[i.jsx(hg,{className:"w-4 h-4"}),_?"Generando":"Generar con IA"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((F,W)=>i.jsx($mt,{q:F,index:W,onRemove:C,onPatch:T},F.id)),u.preguntas.length===0&&i.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(nn,{className:"w-4 h-4"}),"Aade preguntas abiertas o de seleccin mltiple (o usa IA)."]})]})]})]}),t==="responder"&&j&&i.jsx(e2,{title:`Responder: ${j.titulo}`,icon:i.jsx(Fi,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:J,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Fl,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[i.jsx(J6,{pill:!0,label:"Dimensin",value:j.dimension}),i.jsx(J6,{pill:!0,label:"Subdimensin",value:j.subdimension}),i.jsx(J6,{pill:!0,label:"Creador",value:`${j.creadorNombre}  ${j.creadorPerfil}`})]}),j.preguntas.map(F=>i.jsx(Gmt,{q:F,respuestas:g,onChange:K},F.id))]})}),t==="respuestas_individuales"&&j&&i.jsx(e2,{title:`Respuestas individuales: ${j.titulo}`,icon:i.jsx(Fi,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:V,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(Qh,{className:"w-4 h-4"}),"Descargar informe"]}),i.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(_l,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:i.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[i.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:i.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[i.jsx(Ev,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(F=>{var W;return i.jsxs("button",{onClick:()=>c(F.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l===F.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:i.jsx(Ev,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("span",{className:"font-medium",children:F.userNombre})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[i.jsx(ul,{className:"w-3.5 h-3.5"}),new Date(((W=F.createdAt)==null?void 0:W.seconds)*1e3).toLocaleDateString()]})]},F.userId)}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Ev,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay respuestas todava"})]})})]})}),i.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:l?i.jsxs(i.Fragment,{children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[i.jsx(az,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",i.jsx("span",{className:"text-indigo-600",children:(R=v.find(F=>F.userId===l))==null?void 0:R.userNombre})]}),i.jsx("div",{className:"space-y-6",children:j.preguntas.map(F=>{var ne;const W=v.find(le=>le.userId===l),X=(ne=W==null?void 0:W.respuestas)==null?void 0:ne[F.id];return console.log("Respuesta encontrada:",{preguntaId:F.id,tipo:F.tipo,respuesta:X}),i.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:F.tipo==="abierta"?i.jsx(nz,{className:"w-5 h-5 text-indigo-600"}):i.jsx(Xv,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900",children:F.enunciado}),i.jsx("p",{className:"text-sm text-slate-500 mt-1",children:F.tipo==="abierta"?"Respuesta abierta":"Seleccin mltiple"})]})]}),F.tipo==="abierta"?(X==null?void 0:X.tipo)==="abierta"&&X.valorTexto?i.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:X.valorTexto})}):i.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):i.jsxs("div",{className:"space-y-2 mt-3",children:[(F.opciones||[]).map(le=>{const ae=((X==null?void 0:X.tipo)==="seleccion_multiple"?X.seleccionados||[]:[]).includes(le.text);return i.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${ae?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[i.jsx("div",{className:"flex-shrink-0",children:ae?i.jsx(nn,{className:"w-4 h-4 text-indigo-600"}):i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),i.jsx("span",{className:"text-sm",children:typeof le=="string"?le:le.text})]},typeof le=="string"?le:le.id)}),!X&&i.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},F.id)})})]}):i.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&j&&i.jsxs(e2,{title:`Dashboard: ${j.titulo}`,icon:i.jsx(yw,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx(Ev,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),Y(j)&&i.jsxs("button",{onClick:()=>q(j.id,j.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[i.jsx(sn,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[i.jsx("div",{className:"mb-6",children:i.jsxs("button",{onClick:V,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(Qh,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(Ev,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),i.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:i.jsx(Xv,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),i.jsx("p",{className:"text-xl font-semibold",children:j.preguntas.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(Dg,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),i.jsx("p",{className:"text-sm font-medium truncate",children:j.creadorNombre})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:i.jsx(ul,{className:"w-5 h-5 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),i.jsx("p",{className:"text-sm font-medium",children:(()=>{const F=j.createdAt,W=F!=null&&F.toDate?F.toDate():F!=null&&F.seconds?new Date(F.seconds*1e3):F?new Date(F):null;return W?W.toLocaleDateString():"No disponible"})()})]})]})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(U2,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Resultados de seleccin mltiple"})]}),i.jsxs("div",{className:"space-y-4",children:[j.preguntas.filter(F=>F.tipo==="seleccion_multiple").map(F=>i.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[i.jsx("p",{className:"font-medium mb-3 text-slate-700",children:F.enunciado}),Object.entries(M[F.id]||{}).map(([W,X])=>i.jsx(zmt,{label:W,value:X},W)),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[i.jsx(Cb,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},F.id)),j.preguntas.filter(F=>F.tipo==="seleccion_multiple").length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Xv,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay preguntas de seleccin mltiple en esta actividad."})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Iwe,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),P.length?i.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(F=>i.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(F.score*18)}px`},children:F.keyword},F.keyword))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(nz,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"An no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var sE=e=>e.type==="checkbox",dg=e=>e instanceof Date,jl=e=>e==null;const fhe=e=>typeof e=="object";var ri=e=>!jl(e)&&!Array.isArray(e)&&fhe(e)&&!dg(e),Kmt=e=>ri(e)&&e.target?sE(e.target)?e.target.checked:e.target.value:e,Wmt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Xmt=(e,t)=>e.has(Wmt(t)),Ymt=e=>{const t=e.constructor&&e.constructor.prototype;return ri(t)&&t.hasOwnProperty("isPrototypeOf")},X7=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ts(e){let t;const r=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(X7&&(e instanceof Blob||a))&&(r||ri(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!Ymt(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=ts(e[n]));else return e;return t}var J4=e=>/^\w*$/.test(e),rs=e=>e===void 0,Z4=e=>Array.isArray(e)?e.filter(Boolean):[],Y7=e=>Z4(e.replace(/["|']|\]/g,"").split(/\.|\[/)),or=(e,t,r)=>{if(!t||!ri(e))return r;const a=(J4(t)?[t]:Y7(t)).reduce((n,s)=>jl(n)?n:n[s],e);return rs(a)||a===e?rs(e[t])?r:e[t]:a},Yf=e=>typeof e=="boolean",Ln=(e,t,r)=>{let a=-1;const n=J4(t)?[t]:Y7(t),s=n.length,o=s-1;for(;++a<s;){const l=n[a];let c=r;if(a!==o){const u=e[l];c=ri(u)||Array.isArray(u)?u:isNaN(+n[a+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const DJ={BLUR:"blur",FOCUS_OUT:"focusout"},Xu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ch={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ahe=ct.createContext(null);Ahe.displayName="HookFormContext";const Jmt=()=>ct.useContext(Ahe);var Zmt=(e,t,r,a=!0)=>{const n={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(n,s,{get:()=>{const o=s;return t._proxyFormState[o]!==Xu.all&&(t._proxyFormState[o]=!a||Xu.all),e[o]}});return n};const hhe=typeof window<"u"?ct.useLayoutEffect:ct.useEffect;var uA=e=>typeof e=="string",ept=(e,t,r,a,n)=>uA(e)?(a&&t.watch.add(e),or(r,e,n)):Array.isArray(e)?e.map(s=>(a&&t.watch.add(s),or(r,s))):(a&&(t.watchAll=!0),r),yP=e=>jl(e)||!fhe(e);function gm(e,t,r=new WeakSet){if(yP(e)||yP(t))return e===t;if(dg(e)&&dg(t))return e.getTime()===t.getTime();const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of a){const o=e[s];if(!n.includes(s))return!1;if(s!=="ref"){const l=t[s];if(dg(o)&&dg(l)||ri(o)&&ri(l)||Array.isArray(o)&&Array.isArray(l)?!gm(o,l,r):o!==l)return!1}}return!0}var tpt=(e,t,r,a,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[a]:n||!0}}:{},fc=e=>Array.isArray(e)?e:[e],PJ=()=>{let e=[];return{get observers(){return e},next:n=>{for(const s of e)s.next&&s.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(s=>s!==n)}}),unsubscribe:()=>{e=[]}}},Nl=e=>ri(e)&&!Object.keys(e).length,J7=e=>e.type==="file",Ud=e=>typeof e=="function",T_=e=>{if(!X7)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},mhe=e=>e.type==="select-multiple",Z7=e=>e.type==="radio",rpt=e=>Z7(e)||sE(e),Z6=e=>T_(e)&&e.isConnected;function apt(e,t){const r=t.slice(0,-1).length;let a=0;for(;a<r;)e=rs(e)?a++:e[t[a++]];return e}function npt(e){for(const t in e)if(e.hasOwnProperty(t)&&!rs(e[t]))return!1;return!0}function qs(e,t){const r=Array.isArray(t)?t:J4(t)?[t]:Y7(t),a=r.length===1?e:apt(e,r),n=r.length-1,s=r[n];return a&&delete a[s],n!==0&&(ri(a)&&Nl(a)||Array.isArray(a)&&npt(a))&&qs(e,r.slice(0,-1)),e}var phe=e=>{for(const t in e)if(Ud(e[t]))return!0;return!1};function I_(e,t={}){const r=Array.isArray(e);if(ri(e)||r)for(const a in e)Array.isArray(e[a])||ri(e[a])&&!phe(e[a])?(t[a]=Array.isArray(e[a])?[]:{},I_(e[a],t[a])):jl(e[a])||(t[a]=!0);return t}function ghe(e,t,r){const a=Array.isArray(e);if(ri(e)||a)for(const n in e)Array.isArray(e[n])||ri(e[n])&&!phe(e[n])?rs(t)||yP(r[n])?r[n]=Array.isArray(e[n])?I_(e[n],[]):{...I_(e[n])}:ghe(e[n],jl(t)?{}:t[n],r[n]):r[n]=!gm(e[n],t[n]);return r}var t2=(e,t)=>ghe(e,t,I_(t));const RJ={value:!1,isValid:!1},LJ={value:!0,isValid:!0};var xhe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!rs(e[0].attributes.value)?rs(e[0].value)||e[0].value===""?LJ:{value:e[0].value,isValid:!0}:LJ:RJ}return RJ},vhe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:a})=>rs(e)?e:t?e===""?NaN:e&&+e:r&&uA(e)?new Date(e):a?a(e):e;const MJ={isValid:!1,value:null};var bhe=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,MJ):MJ;function UJ(e){const t=e.ref;return J7(t)?t.files:Z7(t)?bhe(e.refs).value:mhe(t)?[...t.selectedOptions].map(({value:r})=>r):sE(t)?xhe(e.refs).value:vhe(rs(t.value)?e.ref.value:t.value,e)}var spt=(e,t,r,a)=>{const n={};for(const s of e){const o=or(t,s);o&&Ln(n,s,o._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:a}},O_=e=>e instanceof RegExp,r2=e=>rs(e)?e:O_(e)?e.source:ri(e)?O_(e.value)?e.value.source:e.value:e,zv=e=>({isOnSubmit:!e||e===Xu.onSubmit,isOnBlur:e===Xu.onBlur,isOnChange:e===Xu.onChange,isOnAll:e===Xu.all,isOnTouch:e===Xu.onTouched});const QJ="AsyncFunction";var ipt=e=>!!e&&!!e.validate&&!!(Ud(e.validate)&&e.validate.constructor.name===QJ||ri(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===QJ)),opt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),wP=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const Ab=(e,t,r,a)=>{for(const n of r||Object.keys(e)){const s=or(e,n);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],n)&&!a)return!0;if(o.ref&&t(o.ref,o.name)&&!a)return!0;if(Ab(l,t))break}else if(ri(l)&&Ab(l,t))break}}};function HJ(e,t,r){const a=or(e,r);if(a||J4(r))return{error:a,name:r};const n=r.split(".");for(;n.length;){const s=n.join("."),o=or(t,s),l=or(e,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};n.pop()}return{name:r}}var lpt=(e,t,r,a)=>{r(e);const{name:n,...s}=e;return Nl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(o=>t[o]===(!a||Xu.all))},cpt=(e,t,r)=>!e||!t||e===t||fc(e).some(a=>a&&(r?a===t:a.startsWith(t)||t.startsWith(a))),upt=(e,t,r,a,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?a.isOnBlur:n.isOnBlur)?!e:(r?a.isOnChange:n.isOnChange)?e:!0,dpt=(e,t)=>!Z4(or(e,t)).length&&qs(e,t),yhe=(e,t,r)=>{const a=fc(or(e,r));return Ln(a,"root",t[r]),Ln(e,r,a),e},Nj=e=>uA(e);function zJ(e,t,r="validate"){if(Nj(e)||Array.isArray(e)&&e.every(Nj)||Yf(e)&&!e)return{type:r,message:Nj(e)?e:"",ref:t}}var xv=e=>ri(e)&&!O_(e)?e:{value:e,message:""},NP=async(e,t,r,a,n,s)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,w=or(r,x);if(!y||t.has(x))return{};const j=l?l[0]:o,O=k=>{n&&j.reportValidity&&(j.setCustomValidity(Yf(k)?"":k||""),j.reportValidity())},B={},T=Z7(o),C=sE(o),_=T||C,S=(v||J7(o))&&rs(o.value)&&rs(w)||T_(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,L=tpt.bind(null,x,a,B),P=(k,M,U,z=ch.maxLength,Q=ch.minLength)=>{const q=k?M:U;B[x]={type:k?z:Q,message:q,ref:o,...L(k?z:Q,q)}};if(s?!Array.isArray(w)||!w.length:c&&(!_&&(S||jl(w))||Yf(w)&&!w||C&&!xhe(l).isValid||T&&!bhe(l).isValid)){const{value:k,message:M}=Nj(c)?{value:!!c,message:c}:xv(c);if(k&&(B[x]={type:ch.required,message:M,ref:j,...L(ch.required,M)},!a))return O(M),B}if(!S&&(!jl(f)||!jl(h))){let k,M;const U=xv(h),z=xv(f);if(!jl(w)&&!isNaN(w)){const Q=o.valueAsNumber||w&&+w;jl(U.value)||(k=Q>U.value),jl(z.value)||(M=Q<z.value)}else{const Q=o.valueAsDate||new Date(w),q=K=>new Date(new Date().toDateString()+" "+K),V=o.type=="time",Y=o.type=="week";uA(U.value)&&w&&(k=V?q(w)>q(U.value):Y?w>U.value:Q>new Date(U.value)),uA(z.value)&&w&&(M=V?q(w)<q(z.value):Y?w<z.value:Q<new Date(z.value))}if((k||M)&&(P(!!k,U.message,z.message,ch.max,ch.min),!a))return O(B[x].message),B}if((u||d)&&!S&&(uA(w)||s&&Array.isArray(w))){const k=xv(u),M=xv(d),U=!jl(k.value)&&w.length>+k.value,z=!jl(M.value)&&w.length<+M.value;if((U||z)&&(P(U,k.message,M.message),!a))return O(B[x].message),B}if(m&&!S&&uA(w)){const{value:k,message:M}=xv(m);if(O_(k)&&!w.match(k)&&(B[x]={type:ch.pattern,message:M,ref:o,...L(ch.pattern,M)},!a))return O(M),B}if(g){if(Ud(g)){const k=await g(w,r),M=zJ(k,j);if(M&&(B[x]={...M,...L(ch.validate,M.message)},!a))return O(M.message),B}else if(ri(g)){let k={};for(const M in g){if(!Nl(k)&&!a)break;const U=zJ(await g[M](w,r),j,M);U&&(k={...U,...L(M,U.message)},O(U.message),a&&(B[x]=k))}if(!Nl(k)&&(B[x]={ref:j,...k},!a))return B}}return O(!0),B};const fpt={mode:Xu.onSubmit,reValidateMode:Xu.onChange,shouldFocusError:!0};function Apt(e={}){let t={...fpt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ud(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},a={},n=ri(t.defaultValues)||ri(t.values)?ts(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:ts(n),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:PJ(),state:PJ()},m=t.criteriaMode===Xu.all,g=oe=>fe=>{clearTimeout(u),u=setTimeout(oe,fe)},x=async oe=>{if(!t.disabled&&(d.isValid||f.isValid||oe)){const fe=t.resolver?Nl((await C()).errors):await S(a,!0);fe!==r.isValid&&h.state.next({isValid:fe})}},v=(oe,fe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((oe||Array.from(l.mount)).forEach(be=>{be&&(fe?Ln(r.validatingFields,be,fe):qs(r.validatingFields,be))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Nl(r.validatingFields)}))},y=(oe,fe=[],be,Pe,$e=!0,Ke=!0)=>{if(Pe&&be&&!t.disabled){if(o.action=!0,Ke&&Array.isArray(or(a,oe))){const nt=be(or(a,oe),Pe.argA,Pe.argB);$e&&Ln(a,oe,nt)}if(Ke&&Array.isArray(or(r.errors,oe))){const nt=be(or(r.errors,oe),Pe.argA,Pe.argB);$e&&Ln(r.errors,oe,nt),dpt(r.errors,oe)}if((d.touchedFields||f.touchedFields)&&Ke&&Array.isArray(or(r.touchedFields,oe))){const nt=be(or(r.touchedFields,oe),Pe.argA,Pe.argB);$e&&Ln(r.touchedFields,oe,nt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=t2(n,s)),h.state.next({name:oe,isDirty:P(oe,fe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ln(s,oe,fe)},w=(oe,fe)=>{Ln(r.errors,oe,fe),h.state.next({errors:r.errors})},j=oe=>{r.errors=oe,h.state.next({errors:r.errors,isValid:!1})},O=(oe,fe,be,Pe)=>{const $e=or(a,oe);if($e){const Ke=or(s,oe,rs(be)?or(n,oe):be);rs(Ke)||Pe&&Pe.defaultChecked||fe?Ln(s,oe,fe?Ke:UJ($e._f)):U(oe,Ke),o.mount&&x()}},B=(oe,fe,be,Pe,$e)=>{let Ke=!1,nt=!1;const He={name:oe};if(!t.disabled){if(!be||Pe){(d.isDirty||f.isDirty)&&(nt=r.isDirty,r.isDirty=He.isDirty=P(),Ke=nt!==He.isDirty);const it=gm(or(n,oe),fe);nt=!!or(r.dirtyFields,oe),it?qs(r.dirtyFields,oe):Ln(r.dirtyFields,oe,!0),He.dirtyFields=r.dirtyFields,Ke=Ke||(d.dirtyFields||f.dirtyFields)&&nt!==!it}if(be){const it=or(r.touchedFields,oe);it||(Ln(r.touchedFields,oe,be),He.touchedFields=r.touchedFields,Ke=Ke||(d.touchedFields||f.touchedFields)&&it!==be)}Ke&&$e&&h.state.next(He)}return Ke?He:{}},T=(oe,fe,be,Pe)=>{const $e=or(r.errors,oe),Ke=(d.isValid||f.isValid)&&Yf(fe)&&r.isValid!==fe;if(t.delayError&&be?(c=g(()=>w(oe,be)),c(t.delayError)):(clearTimeout(u),c=null,be?Ln(r.errors,oe,be):qs(r.errors,oe)),(be?!gm($e,be):$e)||!Nl(Pe)||Ke){const nt={...Pe,...Ke&&Yf(fe)?{isValid:fe}:{},errors:r.errors,name:oe};r={...r,...nt},h.state.next(nt)}},C=async oe=>{v(oe,!0);const fe=await t.resolver(s,t.context,spt(oe||l.mount,a,t.criteriaMode,t.shouldUseNativeValidation));return v(oe),fe},_=async oe=>{const{errors:fe}=await C(oe);if(oe)for(const be of oe){const Pe=or(fe,be);Pe?Ln(r.errors,be,Pe):qs(r.errors,be)}else r.errors=fe;return fe},S=async(oe,fe,be={valid:!0})=>{for(const Pe in oe){const $e=oe[Pe];if($e){const{_f:Ke,...nt}=$e;if(Ke){const He=l.array.has(Ke.name),it=$e._f&&ipt($e._f);it&&d.validatingFields&&v([Pe],!0);const xt=await NP($e,l.disabled,s,m,t.shouldUseNativeValidation&&!fe,He);if(it&&d.validatingFields&&v([Pe]),xt[Ke.name]&&(be.valid=!1,fe))break;!fe&&(or(xt,Ke.name)?He?yhe(r.errors,xt,Ke.name):Ln(r.errors,Ke.name,xt[Ke.name]):qs(r.errors,Ke.name))}!Nl(nt)&&await S(nt,fe,be)}}return be.valid},L=()=>{for(const oe of l.unMount){const fe=or(a,oe);fe&&(fe._f.refs?fe._f.refs.every(be=>!Z6(be)):!Z6(fe._f.ref))&&le(oe)}l.unMount=new Set},P=(oe,fe)=>!t.disabled&&(oe&&fe&&Ln(s,oe,fe),!gm(K(),n)),k=(oe,fe,be)=>ept(oe,l,{...o.mount?s:rs(fe)?n:uA(oe)?{[oe]:fe}:fe},be,fe),M=oe=>Z4(or(o.mount?s:n,oe,t.shouldUnregister?or(n,oe,[]):[])),U=(oe,fe,be={})=>{const Pe=or(a,oe);let $e=fe;if(Pe){const Ke=Pe._f;Ke&&(!Ke.disabled&&Ln(s,oe,vhe(fe,Ke)),$e=T_(Ke.ref)&&jl(fe)?"":fe,mhe(Ke.ref)?[...Ke.ref.options].forEach(nt=>nt.selected=$e.includes(nt.value)):Ke.refs?sE(Ke.ref)?Ke.refs.forEach(nt=>{(!nt.defaultChecked||!nt.disabled)&&(Array.isArray($e)?nt.checked=!!$e.find(He=>He===nt.value):nt.checked=$e===nt.value||!!$e)}):Ke.refs.forEach(nt=>nt.checked=nt.value===$e):J7(Ke.ref)?Ke.ref.value="":(Ke.ref.value=$e,Ke.ref.type||h.state.next({name:oe,values:ts(s)})))}(be.shouldDirty||be.shouldTouch)&&B(oe,$e,be.shouldTouch,be.shouldDirty,!0),be.shouldValidate&&Y(oe)},z=(oe,fe,be)=>{for(const Pe in fe){if(!fe.hasOwnProperty(Pe))return;const $e=fe[Pe],Ke=oe+"."+Pe,nt=or(a,Ke);(l.array.has(oe)||ri($e)||nt&&!nt._f)&&!dg($e)?z(Ke,$e,be):U(Ke,$e,be)}},Q=(oe,fe,be={})=>{const Pe=or(a,oe),$e=l.array.has(oe),Ke=ts(fe);Ln(s,oe,Ke),$e?(h.array.next({name:oe,values:ts(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&be.shouldDirty&&h.state.next({name:oe,dirtyFields:t2(n,s),isDirty:P(oe,Ke)})):Pe&&!Pe._f&&!jl(Ke)?z(oe,Ke,be):U(oe,Ke,be),wP(oe,l)&&h.state.next({...r,name:oe}),h.state.next({name:o.mount?oe:void 0,values:ts(s)})},q=async oe=>{o.mount=!0;const fe=oe.target;let be=fe.name,Pe=!0;const $e=or(a,be),Ke=it=>{Pe=Number.isNaN(it)||dg(it)&&isNaN(it.getTime())||gm(it,or(s,be,it))},nt=zv(t.mode),He=zv(t.reValidateMode);if($e){let it,xt;const Et=fe.type?UJ($e._f):Kmt(oe),gt=oe.type===DJ.BLUR||oe.type===DJ.FOCUS_OUT,Ve=!opt($e._f)&&!t.resolver&&!or(r.errors,be)&&!$e._f.deps||upt(gt,or(r.touchedFields,be),r.isSubmitted,He,nt),Bt=wP(be,l,gt);Ln(s,be,Et),gt?(!fe||!fe.readOnly)&&($e._f.onBlur&&$e._f.onBlur(oe),c&&c(0)):$e._f.onChange&&$e._f.onChange(oe);const dr=B(be,Et,gt),er=!Nl(dr)||Bt;if(!gt&&h.state.next({name:be,type:oe.type,values:ts(s)}),Ve)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?gt&&x():gt||x()),er&&h.state.next({name:be,...Bt?{}:dr});if(!gt&&Bt&&h.state.next({...r}),t.resolver){const{errors:Er}=await C([be]);if(Ke(Et),Pe){const $r=HJ(r.errors,a,be),br=HJ(Er,a,$r.name||be);it=br.error,be=br.name,xt=Nl(Er)}}else v([be],!0),it=(await NP($e,l.disabled,s,m,t.shouldUseNativeValidation))[be],v([be]),Ke(Et),Pe&&(it?xt=!1:(d.isValid||f.isValid)&&(xt=await S(a,!0)));Pe&&($e._f.deps&&Y($e._f.deps),T(be,xt,it,dr))}},V=(oe,fe)=>{if(or(r.errors,fe)&&oe.focus)return oe.focus(),1},Y=async(oe,fe={})=>{let be,Pe;const $e=fc(oe);if(t.resolver){const Ke=await _(rs(oe)?oe:$e);be=Nl(Ke),Pe=oe?!$e.some(nt=>or(Ke,nt)):be}else oe?(Pe=(await Promise.all($e.map(async Ke=>{const nt=or(a,Ke);return await S(nt&&nt._f?{[Ke]:nt}:nt)}))).every(Boolean),!(!Pe&&!r.isValid)&&x()):Pe=be=await S(a);return h.state.next({...!uA(oe)||(d.isValid||f.isValid)&&be!==r.isValid?{}:{name:oe},...t.resolver||!oe?{isValid:be}:{},errors:r.errors}),fe.shouldFocus&&!Pe&&Ab(a,V,oe?$e:l.mount),Pe},K=oe=>{const fe={...o.mount?s:n};return rs(oe)?fe:uA(oe)?or(fe,oe):oe.map(be=>or(fe,be))},J=(oe,fe)=>({invalid:!!or((fe||r).errors,oe),isDirty:!!or((fe||r).dirtyFields,oe),error:or((fe||r).errors,oe),isValidating:!!or(r.validatingFields,oe),isTouched:!!or((fe||r).touchedFields,oe)}),R=oe=>{oe&&fc(oe).forEach(fe=>qs(r.errors,fe)),h.state.next({errors:oe?r.errors:{}})},F=(oe,fe,be)=>{const Pe=(or(a,oe,{_f:{}})._f||{}).ref,$e=or(r.errors,oe)||{},{ref:Ke,message:nt,type:He,...it}=$e;Ln(r.errors,oe,{...it,...fe,ref:Pe}),h.state.next({name:oe,errors:r.errors,isValid:!1}),be&&be.shouldFocus&&Pe&&Pe.focus&&Pe.focus()},W=(oe,fe)=>Ud(oe)?h.state.subscribe({next:be=>"values"in be&&oe(k(void 0,fe),be)}):k(oe,fe,!0),X=oe=>h.state.subscribe({next:fe=>{cpt(oe.name,fe.name,oe.exact)&&lpt(fe,oe.formState||d,Ce,oe.reRenderRoot)&&oe.callback({values:{...s},...r,...fe,defaultValues:n})}}).unsubscribe,ne=oe=>(o.mount=!0,f={...f,...oe.formState},X({...oe,formState:f})),le=(oe,fe={})=>{for(const be of oe?fc(oe):l.mount)l.mount.delete(be),l.array.delete(be),fe.keepValue||(qs(a,be),qs(s,be)),!fe.keepError&&qs(r.errors,be),!fe.keepDirty&&qs(r.dirtyFields,be),!fe.keepTouched&&qs(r.touchedFields,be),!fe.keepIsValidating&&qs(r.validatingFields,be),!t.shouldUnregister&&!fe.keepDefaultValue&&qs(n,be);h.state.next({values:ts(s)}),h.state.next({...r,...fe.keepDirty?{isDirty:P()}:{}}),!fe.keepIsValid&&x()},ie=({disabled:oe,name:fe})=>{(Yf(oe)&&o.mount||oe||l.disabled.has(fe))&&(oe?l.disabled.add(fe):l.disabled.delete(fe))},ae=(oe,fe={})=>{let be=or(a,oe);const Pe=Yf(fe.disabled)||Yf(t.disabled);return Ln(a,oe,{...be||{},_f:{...be&&be._f?be._f:{ref:{name:oe}},name:oe,mount:!0,...fe}}),l.mount.add(oe),be?ie({disabled:Yf(fe.disabled)?fe.disabled:t.disabled,name:oe}):O(oe,!0,fe.value),{...Pe?{disabled:fe.disabled||t.disabled}:{},...t.progressive?{required:!!fe.required,min:r2(fe.min),max:r2(fe.max),minLength:r2(fe.minLength),maxLength:r2(fe.maxLength),pattern:r2(fe.pattern)}:{},name:oe,onChange:q,onBlur:q,ref:$e=>{if($e){ae(oe,fe),be=or(a,oe);const Ke=rs($e.value)&&$e.querySelectorAll&&$e.querySelectorAll("input,select,textarea")[0]||$e,nt=rpt(Ke),He=be._f.refs||[];if(nt?He.find(it=>it===Ke):Ke===be._f.ref)return;Ln(a,oe,{_f:{...be._f,...nt?{refs:[...He.filter(Z6),Ke,...Array.isArray(or(n,oe))?[{}]:[]],ref:{type:Ke.type,name:oe}}:{ref:Ke}}}),O(oe,!1,void 0,Ke)}else be=or(a,oe,{}),be._f&&(be._f.mount=!1),(t.shouldUnregister||fe.shouldUnregister)&&!(Xmt(l.array,oe)&&o.action)&&l.unMount.add(oe)}}},Ae=()=>t.shouldFocusError&&Ab(a,V,l.mount),ke=oe=>{Yf(oe)&&(h.state.next({disabled:oe}),Ab(a,(fe,be)=>{const Pe=or(a,be);Pe&&(fe.disabled=Pe._f.disabled||oe,Array.isArray(Pe._f.refs)&&Pe._f.refs.forEach($e=>{$e.disabled=Pe._f.disabled||oe}))},0,!1))},re=(oe,fe)=>async be=>{let Pe;be&&(be.preventDefault&&be.preventDefault(),be.persist&&be.persist());let $e=ts(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:Ke,values:nt}=await C();r.errors=Ke,$e=ts(nt)}else await S(a);if(l.disabled.size)for(const Ke of l.disabled)qs($e,Ke);if(qs(r.errors,"root"),Nl(r.errors)){h.state.next({errors:{}});try{await oe($e,be)}catch(Ke){Pe=Ke}}else fe&&await fe({...r.errors},be),Ae(),setTimeout(Ae);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Nl(r.errors)&&!Pe,submitCount:r.submitCount+1,errors:r.errors}),Pe)throw Pe},Re=(oe,fe={})=>{or(a,oe)&&(rs(fe.defaultValue)?Q(oe,ts(or(n,oe))):(Q(oe,fe.defaultValue),Ln(n,oe,ts(fe.defaultValue))),fe.keepTouched||qs(r.touchedFields,oe),fe.keepDirty||(qs(r.dirtyFields,oe),r.isDirty=fe.defaultValue?P(oe,ts(or(n,oe))):P()),fe.keepError||(qs(r.errors,oe),d.isValid&&x()),h.state.next({...r}))},Le=(oe,fe={})=>{const be=oe?ts(oe):n,Pe=ts(be),$e=Nl(oe),Ke=$e?n:Pe;if(fe.keepDefaultValues||(n=be),!fe.keepValues){if(fe.keepDirtyValues){const nt=new Set([...l.mount,...Object.keys(t2(n,s))]);for(const He of Array.from(nt))or(r.dirtyFields,He)?Ln(Ke,He,or(s,He)):Q(He,or(Ke,He))}else{if(X7&&rs(oe))for(const nt of l.mount){const He=or(a,nt);if(He&&He._f){const it=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(T_(it)){const xt=it.closest("form");if(xt){xt.reset();break}}}}if(fe.keepFieldsRef)for(const nt of l.mount)Q(nt,or(Ke,nt));else a={}}s=t.shouldUnregister?fe.keepDefaultValues?ts(n):{}:ts(Ke),h.array.next({values:{...Ke}}),h.state.next({values:{...Ke}})}l={mount:fe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!fe.keepIsValid||!!fe.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:fe.keepSubmitCount?r.submitCount:0,isDirty:$e?!1:fe.keepDirty?r.isDirty:!!(fe.keepDefaultValues&&!gm(oe,n)),isSubmitted:fe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:$e?{}:fe.keepDirtyValues?fe.keepDefaultValues&&s?t2(n,s):r.dirtyFields:fe.keepDefaultValues&&oe?t2(n,oe):fe.keepDirty?r.dirtyFields:{},touchedFields:fe.keepTouched?r.touchedFields:{},errors:fe.keepErrors?r.errors:{},isSubmitSuccessful:fe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Te=(oe,fe)=>Le(Ud(oe)?oe(s):oe,fe),de=(oe,fe={})=>{const be=or(a,oe),Pe=be&&be._f;if(Pe){const $e=Pe.refs?Pe.refs[0]:Pe.ref;$e.focus&&($e.focus(),fe.shouldSelect&&Ud($e.select)&&$e.select())}},Ce=oe=>{r={...r,...oe}},ye={control:{register:ae,unregister:le,getFieldState:J,handleSubmit:re,setError:F,_subscribe:X,_runSchema:C,_focusError:Ae,_getWatch:k,_getDirty:P,_setValid:x,_setFieldArray:y,_setDisabledField:ie,_setErrors:j,_getFieldArray:M,_reset:Le,_resetDefaultValues:()=>Ud(t.defaultValues)&&t.defaultValues().then(oe=>{Te(oe,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:ke,_subjects:h,_proxyFormState:d,get _fields(){return a},get _formValues(){return s},get _state(){return o},set _state(oe){o=oe},get _defaultValues(){return n},get _names(){return l},set _names(oe){l=oe},get _formState(){return r},get _options(){return t},set _options(oe){t={...t,...oe}}},subscribe:ne,trigger:Y,register:ae,handleSubmit:re,watch:W,setValue:Q,getValues:K,reset:Te,resetField:Re,clearErrors:R,unregister:le,setError:F,setFocus:de,getFieldState:J};return{...ye,formControl:ye}}var rm=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},eO=(e,t,r={})=>r.shouldFocus||rs(r.shouldFocus)?r.focusName||`${e}.${rs(r.focusIndex)?t:r.focusIndex}.`:"",tO=(e,t)=>[...e,...fc(t)],rO=e=>Array.isArray(e)?e.map(()=>{}):void 0;function aO(e,t,r){return[...e.slice(0,t),...fc(r),...e.slice(t)]}var nO=(e,t,r)=>Array.isArray(e)?(rs(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],sO=(e,t)=>[...fc(t),...fc(e)];function hpt(e,t){let r=0;const a=[...e];for(const n of t)a.splice(n-r,1),r++;return Z4(a).length?a:[]}var iO=(e,t)=>rs(t)?[]:hpt(e,fc(t).sort((r,a)=>r-a)),oO=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},VJ=(e,t,r)=>(e[t]=r,e);function mpt(e){const t=Jmt(),{control:r=t.control,name:a,keyName:n="id",shouldUnregister:s,rules:o}=e,[l,c]=ct.useState(r._getFieldArray(a)),u=ct.useRef(r._getFieldArray(a).map(rm)),d=ct.useRef(l),f=ct.useRef(!1);d.current=l,r._names.array.add(a),ct.useMemo(()=>o&&r.register(a,o),[r,o,a]),hhe(()=>r._subjects.array.subscribe({next:({values:B,name:T})=>{if(T===a||!T){const C=or(B,a);Array.isArray(C)&&(c(C),u.current=C.map(rm))}}}).unsubscribe,[r,a]);const h=ct.useCallback(B=>{f.current=!0,r._setFieldArray(a,B)},[r,a]),m=(B,T)=>{const C=fc(ts(B)),_=tO(r._getFieldArray(a),C);r._names.focus=eO(a,_.length-1,T),u.current=tO(u.current,C.map(rm)),h(_),c(_),r._setFieldArray(a,_,tO,{argA:rO(B)})},g=(B,T)=>{const C=fc(ts(B)),_=sO(r._getFieldArray(a),C);r._names.focus=eO(a,0,T),u.current=sO(u.current,C.map(rm)),h(_),c(_),r._setFieldArray(a,_,sO,{argA:rO(B)})},x=B=>{const T=iO(r._getFieldArray(a),B);u.current=iO(u.current,B),h(T),c(T),!Array.isArray(or(r._fields,a))&&Ln(r._fields,a,void 0),r._setFieldArray(a,T,iO,{argA:B})},v=(B,T,C)=>{const _=fc(ts(T)),S=aO(r._getFieldArray(a),B,_);r._names.focus=eO(a,B,C),u.current=aO(u.current,B,_.map(rm)),h(S),c(S),r._setFieldArray(a,S,aO,{argA:B,argB:rO(T)})},y=(B,T)=>{const C=r._getFieldArray(a);oO(C,B,T),oO(u.current,B,T),h(C),c(C),r._setFieldArray(a,C,oO,{argA:B,argB:T},!1)},w=(B,T)=>{const C=r._getFieldArray(a);nO(C,B,T),nO(u.current,B,T),h(C),c(C),r._setFieldArray(a,C,nO,{argA:B,argB:T},!1)},j=(B,T)=>{const C=ts(T),_=VJ(r._getFieldArray(a),B,C);u.current=[..._].map((S,L)=>!S||L===B?rm():u.current[L]),h(_),c([..._]),r._setFieldArray(a,_,VJ,{argA:B,argB:C},!0,!1)},O=B=>{const T=fc(ts(B));u.current=T.map(rm),h([...T]),c([...T]),r._setFieldArray(a,[...T],C=>C,{},!0,!1)};return ct.useEffect(()=>{if(r._state.action=!1,wP(a,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!zv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!zv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([a]).then(B=>{const T=or(B.errors,a),C=or(r._formState.errors,a);(C?!T&&C.type||T&&(C.type!==T.type||C.message!==T.message):T&&T.type)&&(T?Ln(r._formState.errors,a,T):qs(r._formState.errors,a),r._subjects.state.next({errors:r._formState.errors}))});else{const B=or(r._fields,a);B&&B._f&&!(zv(r._options.reValidateMode).isOnSubmit&&zv(r._options.mode).isOnSubmit)&&NP(B,r._names.disabled,r._formValues,r._options.criteriaMode===Xu.all,r._options.shouldUseNativeValidation,!0).then(T=>!Nl(T)&&r._subjects.state.next({errors:yhe(r._formState.errors,T,a)}))}r._subjects.state.next({name:a,values:ts(r._formValues)}),r._names.focus&&Ab(r._fields,(B,T)=>{if(r._names.focus&&T.startsWith(r._names.focus)&&B.focus)return B.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[l,a,r]),ct.useEffect(()=>(!or(r._formValues,a)&&r._setFieldArray(a),()=>{const B=(T,C)=>{const _=or(r._fields,T);_&&_._f&&(_._f.mount=C)};r._options.shouldUnregister||s?r.unregister(a):B(a,!1)}),[a,r,n,s]),{swap:ct.useCallback(y,[h,a,r]),move:ct.useCallback(w,[h,a,r]),prepend:ct.useCallback(g,[h,a,r]),append:ct.useCallback(m,[h,a,r]),remove:ct.useCallback(x,[h,a,r]),insert:ct.useCallback(v,[h,a,r]),update:ct.useCallback(j,[h,a,r]),replace:ct.useCallback(O,[h,a,r]),fields:ct.useMemo(()=>l.map((B,T)=>({...B,[n]:u.current[T]||rm()})),[l,n])}}function ppt(e={}){const t=ct.useRef(void 0),r=ct.useRef(void 0),[a,n]=ct.useState({isDirty:!1,isValidating:!1,isLoading:Ud(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ud(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!Ud(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=Apt(e);t.current={...l,formState:a}}const s=t.current.control;return s._options=e,hhe(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>n({...s._formState}),reRenderRoot:!0});return n(l=>({...l,isReady:!0})),s._formState.isReady=!0,o},[s]),ct.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),ct.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),ct.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),ct.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),ct.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==a.isDirty&&s._subjects.state.next({isDirty:o})}},[s,a.isDirty]),ct.useEffect(()=>{e.values&&!gm(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,n(o=>({...o}))):s._resetDefaultValues()},[s,e.values]),ct.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=Zmt(a,s),t.current}const EP=ht(vr,"alternancias");async function gpt(e){return(await Zr(EP,{...e,createdAt:Ga(),updatedAt:Ga()})).id}async function xpt({especialidad:e,pageSize:t=10,lastDoc:r}){let a=Dt(EP,Yt("createdAt","desc"),Wd(t));e&&(a=Dt(EP,ur("especialidad","==",e),Yt("createdAt","desc"),Wd(t))),r&&(a=Dt(a,xte(r)));const n=await Ir(a);return{items:n.docs.map(o=>({id:o.id,...o.data()})),lastDoc:n.docs[n.docs.length-1]}}async function vpt(e,t){const r=Jt(vr,"alternancias",e);await Bo(r,{...t,updatedAt:Ga()})}async function bpt(e){const t=Jt(vr,"alternancias",e);await xn(t)}async function ypt(e,t,r){const a=ht(vr,"alternancias",e,t);await Zr(a,{...r,createdAt:Ga()})}async function wpt(e,t){const r=ht(vr,"alternancias",e,t);return(await Ir(r)).docs.map(n=>({id:n.id,...n.data()}))}async function Npt(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,a=rx(OR,r);await AS(a,t);const n=await NN(a);return await ypt(e,"evidencias",{url:n,path:r,nombre:t.name}),{url:n,path:r}}const Hp=({title:e,icon:t,children:r,accent:a="indigo"})=>{const n={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return i.jsxs("div",{className:`rounded-2xl border ${n[a]} p-4 md:p-5 shadow-sm`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),i.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},Wo=({children:e,hint:t})=>i.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&i.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),zp=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return i.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},uh=({title:e,onClick:t,tone:r="neutral",children:a,type:n="button",disabled:s})=>{const o={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return i.jsx("button",{type:n,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${o[r]} disabled:opacity-60`,children:a})},Ept=({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Cpt=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState(null),[s,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),[f,h]=N.useState([]),[m,g]=N.useState(!1),{register:x,control:v,handleSubmit:y,reset:w,watch:j,setValue:O,formState:{isSubmitting:B}}=ppt({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),T=mpt({control:v,name:"actividades"}),C=["COORDINACION_TP","SUBDIRECCION"],_=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!_||C.some(F=>_.includes(F))))return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[i.jsx(SEe,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const L=F=>(F||"").replace(/\s*[-]\s*\d+\s*horas?$/i,"").trim(),P=(F,W)=>{var X;return!F||!W?[]:((X=owe[F])==null?void 0:X[W])??[]},k=j("especialidad"),M=j("modulos")||[],U=N.useMemo(()=>k?nwe[k]??[]:[],[k]),z=N.useMemo(()=>k?iwe[k]??[]:[],[k]);N.useEffect(()=>{O("curso",[]),O("modulos",[]);const F=[...j("actividades")||[]].map(W=>({...W,modulo:"",oa:""}));O("actividades",F)},[k]),N.useEffect(()=>{const F=[...j("actividades")||[]].map(W=>W.modulo&&!M.includes(W.modulo)?{...W,modulo:"",oa:""}:W);O("actividades",F)},[M]);const Q=async()=>{o(!0);const{items:F}=await xpt({});r(F),o(!1)};N.useEffect(()=>{Q()},[]);const q=async F=>{a?await vpt(a,{...F}):await gpt({...F,createdBy:(e==null?void 0:e.email)||"desconocido"}),w(),n(null),await Q()},V=F=>{const W=Array.isArray(F.curso)?F.curso:F.curso?[F.curso]:[],X=Array.isArray(F.modulos)?F.modulos.map(le=>L(le)):[],ne=Array.isArray(F.actividades)?F.actividades.map(le=>({...le,modulo:le!=null&&le.modulo?L(le.modulo):"",oa:(le==null?void 0:le.oa)||""})):[];w({...F,curso:W,modulos:X,actividades:ne}),n(F.id),window.scrollTo({top:0,behavior:"smooth"})},Y=async F=>{confirm("Eliminar esta alternancia?")&&(await bpt(F),await Q())},K=async(F,W)=>{await Npt(F,W),alert("Evidencia subida correctamente")},J=async F=>{g(!0);const W=Array.isArray(F.curso)?F.curso:F.curso?[F.curso]:[],X=Array.isArray(F.modulos)?F.modulos:[],ne=Array.isArray(F.actividades)?F.actividades.map(ie=>({fecha:(ie==null?void 0:ie.fecha)||"",tipo:(ie==null?void 0:ie.tipo)||"",actividad:(ie==null?void 0:ie.actividad)||"",lugar:(ie==null?void 0:ie.lugar)||"",evidencias:(ie==null?void 0:ie.evidencias)||"",modulo:(ie==null?void 0:ie.modulo)||"",oa:(ie==null?void 0:ie.oa)||""})):[],le={...F,curso:W,modulos:X,actividades:ne};d(le);try{const ie=await wpt(F.id,"evidencias");h(ie)}catch{h([])}c(!0),g(!1)},R=F=>{const W=Array.from(F.currentTarget.selectedOptions).map(X=>X.value);O("curso",W,{shouldDirty:!0})};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:i.jsx(ww,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formacin por Alternancia"}),i.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con conos."})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(uh,{title:"Nuevo plan",onClick:()=>{w(),n(null)},tone:"neutral",children:[i.jsx(Xd,{className:"w-4 h-4"}),"Limpiar"]}),i.jsxs(uh,{title:"Guardar",type:"submit",tone:"success",disabled:B,children:[B?i.jsx(Co,{className:"w-4 h-4 animate-spin"}):i.jsx(Fl,{className:"w-4 h-4"}),"Guardar"]})]})]})}),i.jsx(Hp,{title:"Planes guardados",icon:i.jsx(Fg,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(Co,{className:"w-4 h-4 animate-spin"})," Cargando"]}):t.length===0?i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(F=>i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[i.jsx(vm,{className:"w-4 h-4 text-indigo-600"}),F.especialidad]}),i.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[i.jsx(zp,{tone:"indigo",children:Array.isArray(F.curso)?F.curso.join(", "):F.curso}),i.jsx(zp,{tone:"sky",children:F.institucion}),(Array.isArray(F.tipoAlternancia)?F.tipoAlternancia:[]).slice(0,2).map(W=>i.jsx(zp,{tone:"emerald",children:W},W))]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(uh,{title:"Ver",onClick:()=>J(F),children:[i.jsx(Ept,{className:"w-4 h-4"})," Ver"]}),i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[i.jsx(m1,{className:"w-4 h-4"}),i.jsx("input",{type:"file",className:"hidden",onChange:W=>W.target.files&&K(F.id,W.target.files[0])}),"Evidencia"]}),i.jsxs(uh,{title:"Editar",onClick:()=>V(F),children:[i.jsx(Wj,{className:"w-4 h-4"})," Editar"]}),i.jsxs(uh,{title:"Eliminar",onClick:()=>Y(F.id),tone:"danger",children:[i.jsx(sn,{className:"w-4 h-4"})," Eliminar"]})]})]})},F.id))})}),l&&u&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>c(!1)}),i.jsxs("div",{className:"relative z-10 w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-5 py-3 border-b bg-white/90 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-9 h-9 rounded-xl bg-indigo-50 border border-indigo-100 flex items-center justify-center",children:i.jsx(ww,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Plan de Alternancia"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Visualizacin detallada"})]})]}),i.jsxs(uh,{title:"Cerrar",onClick:()=>c(!1),children:[i.jsx(Xd,{className:"w-4 h-4"})," Cerrar"]})]}),i.jsxs("div",{className:"p-5 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Wo,{children:"Especialidad"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[i.jsx(vm,{className:"w-4 h-4 text-indigo-600"})," ",u.especialidad||"-"]})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Wo,{children:"Institucin"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[i.jsx(M2,{className:"w-4 h-4 text-sky-600"})," ",u.institucion||"-"]})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Wo,{children:"Cursos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.curso||[]).map(F=>i.jsx(zp,{tone:"sky",children:F},F))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Wo,{children:"Tipos de Alternancia"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.tipoAlternancia||[]).map(F=>i.jsx(zp,{tone:"emerald",children:F},F))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Wo,{children:"Mdulos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.modulos||[]).map(F=>i.jsx(zp,{tone:"indigo",children:F},F))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Wo,{children:"Creado por"}),i.jsx("div",{className:"text-slate-700 text-sm",children:u.createdBy||"-"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Fundamentacin tcnicopedaggica"}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.fundamentacion||""})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[i.jsx("div",{className:"px-4 py-3 border-b bg-slate-50/50",children:i.jsx("h4",{className:"font-semibold text-slate-800",children:"Plan de actividades"})}),u.actividades&&u.actividades.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 text-left",children:"Actividad"}),i.jsx("th",{className:"p-2 text-left",children:"Lugar"}),i.jsx("th",{className:"p-2 text-left",children:"Mdulo"}),i.jsx("th",{className:"p-2 text-left",children:"OA"}),i.jsx("th",{className:"p-2 text-left",children:"Evidencias"})]})}),i.jsx("tbody",{className:"divide-y",children:u.actividades.map((F,W)=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 text-slate-700",children:F.fecha||""}),i.jsx("td",{className:"p-2 text-slate-700",children:F.tipo||""}),i.jsx("td",{className:"p-2 text-slate-700",children:F.actividad||""}),i.jsx("td",{className:"p-2 text-slate-700",children:F.lugar||""}),i.jsx("td",{className:"p-2 text-slate-700",children:F.modulo||""}),i.jsx("td",{className:"p-2 text-slate-700",children:F.oa||""}),i.jsx("td",{className:"p-2 text-slate-700",children:F.evidencias||""})]},W))})]})}):i.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Sin actividades registradas"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Equipo"}),(u.equipo||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.equipo.map((F,W)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:F.nombre||""}),i.jsx("span",{className:"text-slate-500",children:F.rol||""})]},W))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin equipo registrado"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Contrapartes"}),(u.contrapartes||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.contrapartes.map((F,W)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:F.nombre||""}),i.jsx("span",{className:"text-slate-500",children:F.rol||""})]},W))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin contrapartes"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Tutores"}),(u.tutores||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.tutores.map((F,W)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:F.nombre||""}),i.jsx("span",{className:"text-slate-500",children:F.rol||""})]},W))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin tutores"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Anlisis Curricular"}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.analisisCurricular||""})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[i.jsxs("div",{className:"px-4 py-3 border-b bg-slate-50/50 flex items-center justify-between",children:[i.jsx("h4",{className:"font-semibold text-slate-800",children:"Evidencias subidas"}),m&&i.jsx("span",{className:"text-sm text-slate-500",children:"Cargando"})]}),(f||[]).length>0?i.jsx("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:f.map(F=>i.jsxs("a",{href:F.url,target:"_blank",rel:"noreferrer",className:"group rounded-xl border border-slate-200 p-3 hover:shadow-sm transition bg-white flex items-center gap-3",children:[i.jsx(QO,{className:"w-5 h-5 text-emerald-600"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm text-slate-800 truncate group-hover:underline",children:F.nombre||"archivo"}),i.jsx("div",{className:"text-xs text-slate-500 truncate",children:F.path||""})]})]},F.id))}):i.jsx("div",{className:"p-4 text-sm text-slate-500",children:"No hay evidencias adjuntas"})]})]})]})]}),i.jsxs("form",{onSubmit:y(q),className:"mt-6 space-y-5",children:[i.jsx(Hp,{title:"Contexto de la Alternancia",icon:i.jsx(M2,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(Wo,{children:"Especialidad"}),i.jsxs("div",{className:"relative",children:[i.jsx(vm,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...x("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[i.jsx("option",{value:"",children:"Selecciona"}),rwe.map(F=>i.jsx("option",{value:F,children:F},F))]})]})]}),i.jsxs("div",{children:[i.jsx(Wo,{children:"Institucin"}),i.jsxs("div",{className:"relative",children:[i.jsx(M2,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...x("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[i.jsx("option",{value:"",children:"Selecciona"}),awe.map(F=>i.jsx("option",{value:F,children:F},F))]})]})]}),i.jsxs("div",{children:[i.jsx(Wo,{hint:"Ctrl/Cmd + clic para seleccionar mltiples cursos.",children:"Cursos"}),i.jsxs("div",{className:"relative",children:[i.jsx(Fi,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsx("select",{multiple:!0,size:4,...x("curso"),onChange:R,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!k,children:k?U.map(F=>i.jsx("option",{value:F,children:F},F)):i.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(j("curso")||[]).map(F=>i.jsx(zp,{tone:"sky",children:F},F))})]})]})}),i.jsx(Hp,{title:"Mdulos implicados",icon:i.jsx(pS,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:k?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:z.map(F=>i.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:F,className:"mt-1 accent-emerald-600",...x("modulos")}),i.jsx("span",{className:"text-sm text-slate-700",children:F})]},F))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los mdulos."})}),i.jsx(Hp,{title:"Tipo de Alternancia",icon:i.jsx(Xv,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:i.jsx("div",{className:"flex gap-3 flex-wrap",children:swe.map(F=>i.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:F,className:"accent-amber-600",...x("tipoAlternancia")}),i.jsx("span",{className:"text-slate-700",children:F})]},F))})}),i.jsx(Hp,{title:"Fundamentacin tcnicopedaggica",icon:i.jsx(_we,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...x("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedaggica, vnculos curriculares y el aporte para los estudiantes."})}),i.jsx(Hp,{title:"Plan de actividades",icon:i.jsx(Fg,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"space-y-3",children:[T.fields.map((F,W)=>{const X=j(`actividades.${W}.modulo`)||"",ne=P(k,X);return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Wo,{children:"Fecha"}),i.jsx(ul,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{type:"date",placeholder:"Fecha",...x(`actividades.${W}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx(Wo,{children:"Tipo"}),i.jsx("input",{placeholder:"Pasanta, visita, taller...",...x(`actividades.${W}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx(Wo,{children:"Actividad"}),i.jsx("input",{placeholder:"Descripcin breve",...x(`actividades.${W}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Wo,{children:"Lugar"}),i.jsx(Kj,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...x(`actividades.${W}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Wo,{children:"Evidencias"}),i.jsx(QO,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...x(`actividades.${W}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx(Wo,{children:"Mdulo"}),i.jsxs("select",{...x(`actividades.${W}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!k||M.length===0,children:[i.jsx("option",{value:"",children:!k&&"Elige especialidad arriba"||M.length===0&&"Selecciona mdulos arriba"||"Selecciona"}),M.map(le=>i.jsx("option",{value:le,children:le},le))]})]}),i.jsxs("div",{children:[i.jsx(Wo,{children:"Objetivo de Aprendizaje (OA)"}),i.jsxs("select",{...x(`actividades.${W}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!X||ne.length===0,children:[i.jsx("option",{value:"",children:X?ne.length===0?"Sin OA definidos para este mdulo":"Selecciona":"Selecciona mdulo primero"}),ne.map(le=>i.jsx("option",{value:le,children:le},le))]})]})]}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsxs(uh,{title:"Eliminar fila",onClick:()=>T.remove(W),tone:"danger",children:[i.jsx(sn,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},F.id)}),i.jsxs(uh,{title:"Agregar actividad",onClick:()=>T.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[i.jsx(So,{className:"w-4 h-4"})," Agregar actividad"]})]})}),i.jsx(Hp,{title:"Anlisis Curricular",icon:i.jsx(vm,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...x("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Mdulos implicados + OA/AE asociados + distribucin de horas (liceo/otro lugar)."})}),i.jsx("div",{className:"flex items-center justify-end gap-2",children:i.jsxs(uh,{title:"Guardar",type:"submit",tone:"success",disabled:B,children:[B?i.jsx(Co,{className:"w-4 h-4 animate-spin"}):i.jsx(nn,{className:"w-4 h-4"}),"Guardar"]})})]})]})},CP=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],jpt={INCIPIENTE:25},kpt=["AULA","TALLER","EMPRESA"],$J={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},_pt="tp_especialidades",Spt="tp_modulos",Bpt="tp_resultados_aprendizaje",Tpt="tp_criterios_evaluacion",jP="tp_rubricas",whe="tp_evidencias",Nhe="tp_evaluaciones_comp",kP="config_evaluacion/competencias",GJ=()=>Date.now(),Ehe=async()=>{const e=await Uh(Jt(vr,kP));return e.exists()?e.data():(await ai(Jt(vr,kP),$J),$J)},Ipt=(e,t)=>{const{escalaMin:r,escalaMax:a,porcentajeAprobacion:n,notaAprobacion:s}=t;if(e<=n){const o=(s-r)/(n-0||1);return Number((r+o*(e-0)).toFixed(1))}else{const o=(a-s)/(100-n||1);return Number((s+o*(e-n)).toFixed(1))}},Opt=async(e,t)=>{const r=await Ehe();let a=0,n=0;Object.entries(t).forEach(([l,c])=>{n+=c;const u=e[l],d=(u==null?void 0:u.puntaje)??jpt.INCIPIENTE;a+=d*c/100});const s=n?a/n*100:0,o=Ipt(s,r);return{puntajeTotal:a,porcentaje:s,nota:o}},Fpt=e=>{const t=Dt(ht(vr,_pt),Yt("nombre"));return nr(t,r=>{e(r.docs.map(a=>({id:a.id,...a.data()})))})},Dpt=async e=>{const t=Dt(ht(vr,Spt),ur("especialidadId","==",e),Yt("nombre"));return(await Ir(t)).docs.map(a=>({id:a.id,...a.data()}))},Ppt=async e=>{const t=Dt(ht(vr,Bpt),ur("moduloId","==",e),Yt("codigo"));return(await Ir(t)).docs.map(a=>({id:a.id,...a.data()}))},Rpt=async e=>{const t=Dt(ht(vr,Tpt),ur("raId","==",e),Yt("codigo"));return(await Ir(t)).docs.map(a=>({id:a.id,...a.data()}))},Lpt=async e=>e.id?(await Bo(Jt(vr,jP,e.id),{...e,updatedAt:GJ()}),e.id):(await Zr(ht(vr,jP),{...e,updatedAt:GJ()})).id,Che=async e=>{const t=Dt(ht(vr,jP),ur("raId","==",e)),a=(await Ir(t)).docs[0];return a?{id:a.id,...a.data()}:null},Mpt=async(e,t)=>{const r=rx(OR,t),a=await AS(r,e);return{url:await NN(a.ref),path:a.ref.fullPath}},Upt=e=>Zr(ht(vr,whe),e),Qpt=(e,t)=>{const r=Dt(ht(vr,whe),ur("raId","==",e),Yt("fecha","desc"));return nr(r,a=>{t(a.docs.map(n=>({id:n.id,...n.data()})))})},Hpt=async e=>{const t=await Che(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:a,porcentaje:n,nota:s}=await Opt(e.ceIdScores,r);return Zr(ht(vr,Nhe),{...e,puntajeTotal:a,porcentaje:n,nota:s})},zpt=(e,t)=>{const r=Dt(ht(vr,Nhe),ur("raId","==",e),Yt("fecha","desc"));return nr(r,a=>{t(a.docs.map(n=>({id:n.id,...n.data()})))})},Vpt=async e=>{const t=await Ehe();await ai(Jt(vr,kP),{...t,...e},{merge:!0})},$pt=({raId:e,ces:t,rubrica:r,onSaved:a,currentUserId:n})=>{const[s,o]=N.useState(null);if(N.useEffect(()=>{o(e?r??{id:"",raId:e,niveles:CP,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:n}:null)},[e,r,t,n]),!e)return i.jsx("div",{children:"Selecciona un RA para editar su rbrica."});if(!s)return null;const l=(f,h)=>{o(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[f]:h}})},c=(f,h,m)=>{o(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===f&&v.nivel===h));return{...g,descriptores:[...x,{ceId:f,nivel:h,descriptor:m,puntaje:h==="SOBRESALIENTE"?100:h==="LOGRADO"?75:h==="EN_DESARROLLO"?50:25}]}})},u=N.useMemo(()=>Object.values(s.ponderacionCE).reduce((f,h)=>f+(Number(h)||0),0),[s.ponderacionCE]),d=async()=>{const f=await Lpt(s);a==null||a(f)};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rbrica por CE (debe sumar 100%)"}),i.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),i.jsx("div",{className:"space-y-4",children:t.map(f=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo,"  ",f.descriptor]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||""]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),i.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:s.ponderacionCE[f.id]??0,onChange:h=>l(f.id,Number(h.target.value))}),i.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:CP.map(h=>{const m=s.descriptores.find(g=>g.ceId===f.id&&g.nivel===h);return i.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[i.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:h.replace("_"," ")}),i.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(f.id,h,g.target.value),placeholder:"Descriptor observable y medible"})]},h)})})]},f.id))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[i.jsx(Fl,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar rbrica"})]})})]})},Gpt=({raId:e,currentUser:t,evidencias:r})=>{const[a,n]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState("AULA"),[u,d]=N.useState(null),[f,h]=N.useState(""),[m,g]=N.useState(!1);if(!e)return i.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!a)){g(!0);try{const v=u.name.split(".").pop(),y=`evidencias/${e}/${a}/${Date.now()}.${v}`,{url:w,path:j}=await Mpt(u,y);await Upt({estudianteId:a,raId:e,ceId:s||void 0,url:w,tipo:qpt(u.name),fecha:Date.now(),autorId:t.id,contexto:l,observaciones:f,storagePath:j}),d(null),h(""),n(""),o("")}finally{g(!1)}}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:a,onChange:v=>n(v.target.value)}),i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:s,onChange:v=>o(v.target.value)}),i.jsxs("select",{className:"border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:[i.jsx("option",{value:"AULA",children:"AULA"}),i.jsx("option",{value:"TALLER",children:"TALLER"}),i.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),i.jsx("input",{type:"file",onChange:v=>{var y;return d(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),i.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones",value:f,onChange:v=>h(v.target.value)}),i.jsxs("button",{onClick:x,disabled:m||!u||!a,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!u||!a?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[i.jsx(m1,{className:"w-4 h-4"}),i.jsx("span",{children:"Subir evidencia"})]}),i.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>i.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[Kpt(v.tipo),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),i.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto,"  Est.: ",v.estudianteId]})]})]}),v.observaciones&&i.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},qpt=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},Kpt=e=>{switch(e){case"imagen":return i.jsx(PNe,{className:"w-5 h-5 text-rose-600"});case"video":return i.jsx(bNe,{className:"w-5 h-5 text-indigo-600"});case"documento":return i.jsx(ru,{className:"w-5 h-5 text-emerald-600"});default:return i.jsx(m1,{className:"w-5 h-5 text-slate-500"})}},qJ=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],Wpt=({raId:e})=>{const[t,r]=N.useState([]);if(N.useEffect(()=>{if(!e){r([]);return}const o=zpt(e,r);return()=>o()},[e]),!e)return i.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const a=N.useMemo(()=>{const o={};return t.forEach(l=>{const c=l.curso||"";o[c]||(o[c]={curso:c,promedio:0,n:0}),o[c].promedio+=l.nota,o[c].n+=1}),Object.values(o).map(l=>({curso:l.curso,promedio:Number((l.promedio/(l.n||1)).toFixed(2)),n:l.n}))},[t]),n=N.useMemo(()=>{const o={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(l=>{l.nota<4?o["1.0-3.9"]++:l.nota<5?o["4.0-4.9"]++:l.nota<6?o["5.0-5.9"]++:o["6.0-7.0"]++}),Object.entries(o).map(([l,c])=>({rango:l,value:c}))},[t]),s=()=>{const o=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),l=Ts.book_new(),c=Ts.json_to_sheet(o);Ts.book_append_sheet(l,c,"Evaluaciones_RA"),b1(l,`evaluaciones_${e}.xlsx`)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[i.jsx(_l,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),i.jsxs("button",{onClick:s,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[i.jsx(Qh,{className:"w-4 h-4"}),i.jsx("span",{children:"Descargar CSV"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx(cc,{width:"100%",height:"100%",children:i.jsxs(Nh,{data:a,children:[i.jsx(Vd,{dataKey:"curso"}),i.jsx($d,{domain:[1,7]}),i.jsx(lc,{}),i.jsx(lA,{dataKey:"promedio"})]})})}),i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx(cc,{width:"100%",height:"100%",children:i.jsxs(d4,{children:[i.jsx(WN,{data:n,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:n.map((o,l)=>i.jsx(qh,{fill:qJ[l%qJ.length]},`c-${l}`))}),i.jsx(lc,{}),i.jsx(ux,{})]})})})]}),i.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversin lineal configurable (Decreto 67)."})]})},a2=({active:e,onClick:t,icon:r,label:a})=>i.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,i.jsx("span",{className:"font-medium",children:a})]}),vv=({children:e,className:t})=>i.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),Xpt=({currentUser:e})=>{const[t,r]=N.useState("planificacion"),[a,n]=N.useState([]),[s,o]=N.useState([]),[l,c]=N.useState([]),[u,d]=N.useState([]),[f,h]=N.useState({}),[m,g]=N.useState(null),[x,v]=N.useState([]);N.useEffect(()=>{const w=Fpt(n);return()=>w()},[]),N.useEffect(()=>{f.especialidadId?Dpt(f.especialidadId).then(o):o([]),h(w=>({...w,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[f.especialidadId]),N.useEffect(()=>{f.moduloId?Ppt(f.moduloId).then(c):c([]),h(w=>({...w,raId:void 0})),d([]),g(null)},[f.moduloId]),N.useEffect(()=>{if(f.raId){Rpt(f.raId).then(d),Che(f.raId).then(g);const w=Qpt(f.raId,v);return()=>w()}else d([]),g(null),v([])},[f.raId]);const y=f.raId&&u.length>0;return i.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(pS,{className:"w-6 h-6 text-indigo-600"}),i.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluacin por Competencias EMTP"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(a2,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:i.jsx(Fg,{className:"w-4 h-4"}),label:"Planificar"}),i.jsx(a2,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:i.jsx(bEe,{className:"w-4 h-4"}),label:"Evaluar"}),i.jsx(a2,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:i.jsx(m1,{className:"w-4 h-4"}),label:"Evidencias"}),i.jsx(a2,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:i.jsx(_l,{className:"w-4 h-4"}),label:"Dashboard"}),i.jsx(a2,{active:t==="config",onClick:()=>r("config"),icon:i.jsx(kEe,{className:"w-4 h-4"}),label:"Config"})]})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[i.jsx(vv,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:w=>h({especialidadId:w.target.value}),children:[i.jsx("option",{value:"",children:" Selecciona "}),a.map(w=>i.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Mdulo"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:w=>h(j=>({...j,moduloId:w.target.value})),children:[i.jsx("option",{value:"",children:" Selecciona "}),s.map(w=>i.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:w=>h(j=>({...j,raId:w.target.value})),children:[i.jsx("option",{value:"",children:" Selecciona "}),l.map(w=>i.jsxs("option",{value:w.id,children:[w.codigo,"  ",w.enunciado.slice(0,60),w.enunciado.length>60?"":""]},w.id))]})]})]})}),t==="planificacion"&&i.jsx(vv,{children:i.jsx($pt,{raId:f.raId,ces:u,rubrica:m,onSaved:w=>{},currentUserId:e.id})}),t==="evaluar"&&i.jsxs(vv,{children:[!y&&i.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),y&&i.jsx(Ypt,{raId:f.raId,ces:u,currentUser:e})]}),t==="evidencias"&&i.jsx(vv,{children:i.jsx(Gpt,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&i.jsx(vv,{children:i.jsx(Wpt,{raId:f.raId})}),t==="config"&&i.jsx(vv,{children:i.jsx(Jpt,{})})]})]})},Ypt=({raId:e,ces:t,currentUser:r})=>{const[a,n]=N.useState(""),[s,o]=N.useState(r.curso||""),[l,c]=N.useState("AULA"),[u,d]=N.useState(""),[f,h]=N.useState({}),m=(v,y,w)=>{h(j=>({...j,[v]:{nivel:y,puntaje:w}}))},g=a&&Object.keys(f).length===t.length,x=async()=>{const v={estudianteId:a,curso:s,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:l,retroalimentacion:u};await Hpt(v),d(""),h({}),n("")};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:a,onChange:v=>n(v.target.value),placeholder:"rut_o_uid"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:s,onChange:v=>o(v.target.value),placeholder:"p.ej. 3B"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),i.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:kpt.map(v=>i.jsx("option",{value:v,children:v},v))})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[i.jsx(nn,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar evaluacin"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo,"  ",v.descriptor]}),i.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:CP.map(y=>{var w;return i.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((w=f[v.id])==null?void 0:w.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentacin formativa"}),i.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias especficas para mejorar..."})]})]})},Jpt=()=>{const[e,t]=N.useState(60),[r,a]=N.useState(4),n=async()=>{await Vpt({porcentajeAprobacion:e,notaAprobacion:r})};return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobacin (%)"}),i.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:s=>t(Number(s.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobacin"}),i.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:s=>a(Number(s.target.value))})]}),i.jsx("button",{onClick:n,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})};function Zpt(e){for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null}function egt(e){if(e.asignatura!=="Lectura")return e;const t={...e};let r=Zpt(t.preguntas||[]);return!r&&t.descripcion&&t.descripcion.length>100&&(r=t.descripcion,t.preguntas&&t.preguntas.length>0&&(t.preguntas[0]={...t.preguntas[0],textoBase:r})),r&&(t.textoBase=r),t}const tgt=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState(null),[s,o]=N.useState({}),[l,c]=N.useState(!0),[u,d]=N.useState(!1),[f,h]=N.useState(!1),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(null),[j,O]=N.useState([]),[B,T]=N.useState(null),C=z=>{if(!z)return"";let Q=z.trim().toLowerCase();return Q=Q.replace(//g,""),Q=Q.replace(/\s+(medio|bsico|basico)/g,""),Q=Q.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),Q=Q.replace(/^(\d)(?![])/,"$1"),Q=Q.replace(/\s+/g,"").toUpperCase(),Q};N.useEffect(()=>{(async()=>{if(e.id)try{c(!0);const Q=C(e.curso||"");console.log(`[DEBUG] SimceEvaluacionEstudiante - Cargando evaluaciones para estudiante: ${e.id}, curso: ${e.curso} (normalizado: ${Q})`);const[q,V]=await Promise.all([ei(()=>Promise.resolve().then(()=>xD),void 0).then(J=>J.obtenerSetsPreguntasPorCurso(Q)),ei(()=>Promise.resolve().then(()=>xD),void 0).then(J=>J.obtenerSetsPreguntasPorEstudiante(e.id))]),Y=new Map;[...q,...V].forEach(J=>Y.set(J.id,J));const K=Array.from(Y.values());r(K),S({porCurso:q.length,porEstudiante:V.length,total:K.length}),console.log(`[DEBUG] SimceEvaluacionEstudiante - Evaluaciones por curso: ${q.length}, por estudiante: ${V.length}, total: ${K.length}`)}catch(Q){console.error("Error al cargar evaluaciones:",Q),v("No se pudieron cargar las evaluaciones disponibles")}finally{c(!1)}})()},[e]);const[_,S]=N.useState(null),L=async z=>{var Q,q;try{c(!0),o({}),v(null),g(null),h(!1),console.log(`[DEBUG] Seleccionando evaluacin con ID: ${z}`);let V=await rw(z);if(console.log("[DEBUG] Evaluacin completa obtenida:",V),console.log("[DEBUG] Preguntas en la evaluacin:",((Q=V==null?void 0:V.preguntas)==null?void 0:Q.length)||0),V&&(V=egt(V),console.log("[DEBUG] Evaluacin procesada con texto base asegurado"),n(V)),V!=null&&V.preguntas){const K=V.preguntas.some(J=>J.textoBase)||V.textoBase;if(console.log("[DEBUG] La evaluacin tiene texto base?",K),K){const J=V.textoBase||((q=V.preguntas.find(R=>R.textoBase))==null?void 0:q.textoBase);console.log("[DEBUG] Texto base encontrado:",(J==null?void 0:J.substring(0,50))+"...")}}const Y=await pue(e.id||"",z);if(console.log(`[DEBUG] Intentos existentes para esta evaluacin: ${Y.length}`),O(Y),Y.length>0){T(Y[0]),h(!0);const K=await rw(z);if(K){n(K);const J=Y[0],R=K.preguntas.map(F=>{var X;const W=((X=J.respuestas.find(ne=>ne.preguntaId===F.id))==null?void 0:X.alternativaSeleccionada)||"";return{preguntaId:F.id,pregunta:F,respuestaSeleccionada:W,esCorrecta:W===F.respuestaCorrecta}});g({porcentajeLogro:J.porcentajeLogro,nivelLogro:J.nivelLogro,respuestasCorrectas:R.filter(F=>F.esCorrecta).length,totalPreguntas:K.preguntas.length,detalle:R})}}else{const K=await rw(z);if(K){const J=[...K.preguntas].sort(()=>Math.random()-.5);J.forEach(R=>{R.alternativas=[...R.alternativas].sort(()=>Math.random()-.5)}),n({...K,preguntas:J}),w(Date.now())}}}catch(V){console.error("Error al seleccionar evaluacin:",V),v("No se pudo cargar la evaluacin seleccionada")}finally{c(!1)}},P=(z,Q)=>{o({...s,[z]:Q})},k=async()=>{if(a)try{const z=a.preguntas.map(X=>X.id),Q=Object.keys(s);if(Q.length<z.length){v(`Debe responder todas las preguntas antes de enviar (faltan ${z.length-Q.length})`);return}d(!0);let q=0;const V=a.preguntas.map(X=>{const ne=s[X.id],le=ne===X.respuestaCorrecta;return le&&q++,{preguntaId:X.id,pregunta:X,respuestaSeleccionada:ne,esCorrecta:le}}),Y=a.preguntas.length,K=q/Y*100;let J;K>=80?J="Adecuado":K>=50?J="Elemental":J="Insuficiente";const R=Date.now(),F=y?Math.floor((R-y)/1e3):0,W={setId:a.id,estudianteId:e.id||"",estudianteNombre:e.nombreCompleto||"",respuestas:Object.entries(s).map(([X,ne])=>{const le=a.preguntas.find(ae=>ae.id===X),ie=le==null?void 0:le.respuestaCorrecta;return{preguntaId:X,alternativaSeleccionadaId:String(ne),esCorrecta:String(ne)===ie}}),porcentajeAciertos:K,nivelLogro:J,fechaEnvio:new Date().toISOString()};await mue(W),g({porcentajeLogro:K,nivelLogro:J,respuestasCorrectas:q,totalPreguntas:Y,detalle:V}),h(!0)}catch(z){console.error("Error al enviar respuestas:",z),v("Ocurri un error al enviar sus respuestas. Intente nuevamente.")}finally{d(!1)}},M=z=>{const Q=Math.floor(z/60),q=z%60;return`${Q}:${q<10?"0":""}${q}`},U=z=>{switch(z){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}};return l?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(gA,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsx("div",{className:"space-y-6",children:a?f?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Resultados: ",a.titulo]}),i.jsx("button",{onClick:()=>{n(null),g(null),h(!1)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Volver a evaluaciones"})]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-6 rounded-lg mb-6",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tu nivel de logro"}),i.jsx("div",{className:`text-lg font-bold px-4 py-1 rounded-md ${U((m==null?void 0:m.nivelLogro)||"")}`,children:m==null?void 0:m.nivelLogro}),i.jsxs("div",{className:"mt-4",children:[i.jsx($we,{className:"w-16 h-16 mx-auto text-indigo-500 mb-2"}),i.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:[m==null?void 0:m.porcentajeLogro.toFixed(1),"%"]}),i.jsxs("div",{className:"text-slate-600 dark:text-slate-400",children:[m==null?void 0:m.respuestasCorrectas," de ",m==null?void 0:m.totalPreguntas," correctas"]})]})]}),i.jsx("div",{className:"w-full max-w-md h-6 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden mt-4",children:i.jsx("div",{className:`h-full ${(m==null?void 0:m.nivelLogro)==="Adecuado"?"bg-green-500":(m==null?void 0:m.nivelLogro)==="Elemental"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${(m==null?void 0:m.porcentajeLogro)||0}%`}})}),i.jsxs("div",{className:"flex justify-between w-full max-w-md text-xs mt-1",children:[i.jsx("span",{children:"0%"}),i.jsx("span",{children:"50%"}),i.jsx("span",{children:"100%"})]})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detalle de respuestas"}),i.jsx("div",{className:"space-y-6",children:m==null?void 0:m.detalle.map((z,Q)=>i.jsxs("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),z.pregunta.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:z.pregunta.alternativas.map(q=>i.jsxs("div",{className:`flex items-start ${q.id===z.respuestaSeleccionada?q.id===z.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":"text-red-700 dark:text-red-400 font-semibold":q.id===z.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":""}`,children:[i.jsxs("div",{className:"font-bold mr-2 min-w-[20px]",children:[q.id,")"]}),i.jsx("div",{children:q.texto}),q.id===z.respuestaSeleccionada&&q.id===z.pregunta.respuestaCorrecta&&i.jsx(nn,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"}),q.id===z.respuestaSeleccionada&&q.id!==z.pregunta.respuestaCorrecta&&i.jsx(eA,{className:"w-4 h-4 ml-1 text-red-600 dark:text-red-400"}),q.id!==z.respuestaSeleccionada&&q.id===z.pregunta.respuestaCorrecta&&i.jsx(nn,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"})]},q.id))}),i.jsx("div",{className:"mt-4 text-sm",children:i.jsxs("div",{className:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300 p-2 rounded-md",children:[i.jsx("span",{className:"font-semibold",children:"Explicacin:"})," ",z.pregunta.explicacion]})})]},z.preguntaId))}),i.jsx("div",{className:"mt-6 flex justify-center",children:i.jsx("button",{onClick:()=>{n(null),g(null),h(!1)},className:"py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Volver a evaluaciones"})})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:a.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[a.asignatura," - ",a.preguntas.length," preguntas"]})]}),i.jsx("button",{onClick:()=>{window.confirm("Est seguro que desea salir? Se perdern todas las respuestas.")&&n(null)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Cancelar"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800 mb-6 flex items-start",children:[i.jsx(Ew,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400",children:"Instrucciones"}),i.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 list-disc pl-5",children:[i.jsx("li",{children:"Responde todas las preguntas antes de enviar."}),i.jsx("li",{children:"Solo tienes un intento para responder."}),i.jsx("li",{children:"Una vez enviado, podrs ver tu resultado y las respuestas correctas."}),i.jsx("li",{children:"No refresques ni cierres la pgina durante la evaluacin."})]})]})]}),x&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(eA,{className:"w-4 h-4 mr-2"}),x]}),(a.asignatura==="Lectura"||a.asignatura==="Competencia Lectora")&&(()=>{var Q,q;console.log("[DEBUG] Asignatura de Lectura detectada, buscando texto base");let z=a.textoBase||((Q=a.preguntas.find(V=>V.textoBase))==null?void 0:Q.textoBase)||((q=a.preguntas[0])==null?void 0:q.textoBase);return console.log("[DEBUG] Texto base encontrado:",z?"S":"NO"),z||(console.log("[WARNING] Es una evaluacin de Lectura pero no tiene texto base"),a.descripcion&&a.descripcion.length>50&&(z=` NOTA: El texto de comprensin no est disponible. La evaluacin podra estar incompleta. Comuncate con tu profesor.

`+a.descripcion,console.log("[DEBUG] Usando descripcin como texto base alternativo"))),z?i.jsxs("div",{className:"mb-8 p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(wi,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:" Texto de Comprensin Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:i.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:i.jsx(WM,{content:z,context:"simce-texto-base"})})})]}):null})(),i.jsx("div",{className:"space-y-6",children:a.preguntas.map((z,Q)=>i.jsxs("div",{className:`p-4 rounded-lg border ${s[z.id]?"border-green-200 dark:border-green-700/50":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),z.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:z.alternativas.map(q=>i.jsxs("div",{className:`flex items-center p-2 rounded-md cursor-pointer ${s[z.id]===q.id?"bg-indigo-100 dark:bg-indigo-900/50":"hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,onClick:()=>P(z.id,q.id),children:[i.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center mr-3 ${s[z.id]===q.id?"border-indigo-600 dark:border-indigo-400":"border-slate-400 dark:border-slate-500"}`,children:s[z.id]===q.id&&i.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-600 dark:bg-indigo-400"})}),i.jsxs("div",{className:"font-bold mr-2",children:[q.id,")"]}),i.jsx("div",{children:q.texto})]},q.id))}),!s[z.id]&&i.jsx("div",{className:"mt-2 text-amber-600 dark:text-amber-400 text-sm",children:"Por favor selecciona una respuesta"})]},z.id))}),i.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[i.jsxs("div",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:[i.jsx(Wc,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"text-sm",children:y&&i.jsxs(i.Fragment,{children:["Tiempo transcurrido: ",M(Math.floor((Date.now()-y)/1e3))]})})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[Object.keys(s).length," de ",a.preguntas.length," respondidas"]}),i.jsx("button",{onClick:k,disabled:u||Object.keys(s).length!==a.preguntas.length,className:"py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:u?i.jsxs(i.Fragment,{children:[i.jsx(gA,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Enviando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(are,{className:"w-4 h-4"}),i.jsx("span",{children:"Enviar respuestas"})]})})]})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones disponibles"}),_&&i.jsxs("div",{className:"mb-4 p-3 rounded-md bg-slate-50 dark:bg-slate-900/20 border border-slate-200 dark:border-slate-700 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("strong",{children:"Debug:"})," Detectadas ",i.jsx("b",{children:_.porCurso})," por curso, ",i.jsx("b",{children:_.porEstudiante})," por asignacin directa, ",i.jsx("b",{children:_.total})," total."]}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(QO,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones asignadas para tu curso en este momento."})]}):i.jsx("div",{className:"space-y-4",children:t.map(z=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>L(z.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${z.asignatura==="Lectura"||z.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:z.asignatura==="Lectura"||z.asignatura==="Competencia Lectora"?i.jsx(wi,{className:"w-6 h-6"}):i.jsx(DR,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:z.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:z.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:z.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[z.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(z.fechaAsignacion).toLocaleDateString()})]})]})]})},z.id))})]})})},rgt=({currentUser:e})=>{const[t,r]=N.useState([]),[a,n]=N.useState(null),[s,o]=N.useState([]),[l,c]=N.useState([]),[u,d]=N.useState(null),[f,h]=N.useState(!0),[m,g]=N.useState(null),[x,v]=N.useState("general"),[y,w]=N.useState("todos"),j=z=>typeof(z==null?void 0:z.porcentajeAciertos)=="number"?z.porcentajeAciertos:typeof(z==null?void 0:z.porcentajeLogro)=="number"?z.porcentajeLogro:0,O=z=>{const Q=z&&(z.fechaEnvio||z.fechaRealizacion)||null;return Q?new Date(Q).toLocaleDateString():"-"},B=z=>Array.isArray(z==null?void 0:z.respuestas)?z.respuestas.filter(Q=>Q==null?void 0:Q.esCorrecta).length:typeof(z==null?void 0:z.respuestasCorrectas)=="number"?z.respuestasCorrectas:"-",T=z=>{const Q=z&&(z.tiempoRealizacion??z.duracionSegundos);if(typeof Q=="number"&&Q>0){const q=Math.floor(Q/60),V=(Q%60).toString().padStart(2,"0");return`${q}:${V}`}return"-"};N.useEffect(()=>{(async()=>{try{h(!0);const Q=await gue(e.id||"");r(Q)}catch(Q){console.error("Error al cargar evaluaciones:",Q),g("No se pudieron cargar las evaluaciones")}finally{h(!1)}})()},[e]);const C=async z=>{try{h(!0),g(null);const Q=await rw(z);if(Q){n(Q);const q=Array.isArray(Q.cursosAsignados)?Q.cursosAsignados:[];if(q.length>0){const V=await P1(),Y=X=>{if(!X)return"";let ne=X.trim().toLowerCase();return ne=ne.replace(//g,""),ne=ne.replace(/\s+(medio|bsico|basico)/g,""),ne=ne.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),ne=ne.replace(/^(\d)(?![])/,"$1"),ne=ne.replace(/\s+/g,"").toUpperCase(),ne},K=Y(q[0]),J=V.filter(X=>X.profile==="ESTUDIANTE"&&Y(X.curso||"")===K);c(J);const R=J.map(X=>X.id);let F=[];if(R.length>0){const{obtenerResultadosPorCurso:X}=await ei(async()=>{const{obtenerResultadosPorCurso:ne}=await Promise.resolve().then(()=>xD);return{obtenerResultadosPorCurso:ne}},void 0);F=await X(z,R)}else F=await gD(z);o(F);const W=await xue(z,q[0]);W&&d(W)}else{const V=await gD(z);o(V),c([]),d(null)}}}catch(Q){console.error("Error al seleccionar evaluacin:",Q),g("No se pudo cargar la informacin de la evaluacin seleccionada")}finally{h(!1)}},_=async()=>{console.log("Generando Excel...")},S=z=>{switch(z){case"Adecuado":return"text-green-600 dark:text-green-400";case"Elemental":return"text-yellow-600 dark:text-yellow-400";case"Insuficiente":return"text-red-600 dark:text-red-400";default:return"text-slate-600 dark:text-slate-400"}},L=z=>{switch(z){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}},P=()=>{if(!u)return null;const{porcentajeAdecuado:z,porcentajeElemental:Q,porcentajeInsuficiente:q}=u;return i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Distribucin por niveles de logro"}),i.jsxs("div",{className:"w-full h-8 rounded-md overflow-hidden flex mb-2",children:[i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 transition-all",style:{width:`${z}%`}}),i.jsx("div",{className:"h-full bg-yellow-500 dark:bg-yellow-600 transition-all",style:{width:`${Q}%`}}),i.jsx("div",{className:"h-full bg-red-500 dark:bg-red-600 transition-all",style:{width:`${q}%`}})]}),i.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 dark:bg-green-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Adecuado: ",z.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-500 dark:bg-yellow-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Elemental: ",Q.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 dark:bg-red-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Insuficiente: ",q.toFixed(1),"%"]})]})]})]})},k=()=>u?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/50",children:i.jsx(Fi,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estudiantes evaluados"}),i.jsx("div",{className:"text-2xl font-bold",children:u.totalEstudiantes})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-indigo-100 dark:bg-indigo-900/50",children:i.jsx(Jte,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Promedio de logro"}),i.jsxs("div",{className:"text-2xl font-bold",children:[u.promedioLogro.toFixed(1),"%"]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/50",children:i.jsx(wwe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Nivel predominante"}),i.jsx("div",{className:`text-2xl font-bold ${S(u.nivelPredominante)}`,children:u.nivelPredominante})]})]})})]}),P(),i.jsxs("div",{className:"mt-8",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estadsticas por eje temtico"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"space-y-4",children:u.porEjeTematico.map((z,Q)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-medium",children:z.eje}),i.jsxs("span",{className:"text-sm",children:[z.promedio.toFixed(1),"%"]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full",children:i.jsx("div",{className:`h-full rounded-full ${z.promedio>=80?"bg-green-500":z.promedio>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${z.promedio}%`}})})]},Q))})})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(gA,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}),M=()=>{const Q=(l.length>0?l:[]).map(q=>({est:q,intento:s.find(V=>V.estudianteId===q.id)})).filter(({intento:q})=>y==="todos"?!0:q&&typeof q.nivelLogro=="string"&&q.nivelLogro.toLowerCase()===y);return i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Resultados por estudiante"}),i.jsx("div",{className:"flex space-x-2",children:i.jsxs("select",{className:"text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 px-2 py-1",value:y,onChange:q=>w(q.target.value),children:[i.jsx("option",{value:"todos",children:"Todos los niveles"}),i.jsx("option",{value:"adecuado",children:"Adecuado"}),i.jsx("option",{value:"elemental",children:"Elemental"}),i.jsx("option",{value:"insuficiente",children:"Insuficiente"})]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Curso"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"% Logro"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Nivel"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Correctas"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Tiempo"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Fecha"})]})}),i.jsx("tbody",{children:Q.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-slate-600 dark:text-slate-400",children:l.length===0?"No hay estudiantes detectados para el curso asignado o no hay intentos registrados.":"No hay datos para mostrar con los filtros seleccionados"})}):Q.map(({est:q,intento:V})=>i.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-3",children:(V==null?void 0:V.estudianteNombre)||q.nombreCompleto||""}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:q.curso||(V==null?void 0:V.curso)||"-"}),i.jsx("td",{className:"px-4 py-3 font-semibold",children:V?j(V).toFixed(1)+"%":""}),i.jsx("td",{className:"px-4 py-3",children:V?i.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${L(V.nivelLogro)}`,children:V.nivelLogro}):i.jsx("span",{className:"text-slate-400",children:""})}),i.jsx("td",{className:"px-4 py-3",children:V?`${B(V)}/${(a==null?void 0:a.preguntas.length)||"-"}`:""}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:V?T(V):""}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:V?O(V):""})]},q.id))})]})})})]})},U=()=>!a||!(u!=null&&u.porPregunta)||!u.porPregunta.length?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(gA,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}):i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Anlisis por pregunta"}),i.jsx("div",{className:"space-y-6",children:u.porPregunta.map((z,Q)=>{var V;const q=a.preguntas.find(Y=>Y.id===z.preguntaId);return q?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",Q+1]}),q.enunciado]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:"Eje temtico:"})," ",q.ejeTematico||"No especificado"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Porcentaje de acierto"}),i.jsxs("div",{className:`text-xl font-bold ${z.porcentajeAcierto>=80?"text-green-600 dark:text-green-400":z.porcentajeAcierto>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[z.porcentajeAcierto.toFixed(1),"%"]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full mb-2",children:i.jsx("div",{className:`h-full rounded-full ${z.porcentajeAcierto>=80?"bg-green-500":z.porcentajeAcierto>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${z.porcentajeAcierto}%`}})})}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Distribucin de respuestas"}),i.jsx("div",{className:"space-y-2",children:z.distribucionRespuestas.map(Y=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs ${Y.alternativaId===q.respuestaCorrecta?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"} mr-2`,children:Y.alternativaId}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-sm overflow-hidden",children:i.jsx("div",{className:`h-full ${Y.alternativaId===q.respuestaCorrecta?"bg-green-500 dark:bg-green-600":"bg-red-500 dark:bg-red-600"}`,style:{width:`${Y.porcentaje}%`}})})}),i.jsxs("div",{className:"ml-2 w-10 text-right text-sm",children:[Y.porcentaje.toFixed(0),"%"]})]},Y.alternativaId))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Alternativa correcta"}),i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300",children:i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"font-bold mr-2",children:[q.respuestaCorrecta,")"]}),i.jsx("div",{children:(V=q.alternativas.find(Y=>Y.id===q.respuestaCorrecta))==null?void 0:V.texto})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h5",{className:"text-sm font-semibold mb-1",children:"Dificultad"}),i.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm ${z.porcentajeAcierto>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":z.porcentajeAcierto>=50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:z.porcentajeAcierto>=80?"Baja":z.porcentajeAcierto>=50?"Media":"Alta"})]})]})]})]},z.preguntaId):null})})]});return f?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(gA,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando informacin..."})]}):i.jsx("div",{className:"space-y-6",children:a?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-200 dark:border-slate-700 pb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:a.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[a.asignatura,"  ",s.length," estudiantes evaluados"]}),Array.isArray(a.cursosAsignados)&&a.cursosAsignados.length>0&&i.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[i.jsx("span",{className:"font-semibold text-xs text-indigo-700 dark:text-indigo-300",children:"Cursos asignados:"}),a.cursosAsignados.map((z,Q)=>i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-0.5 px-2 rounded-full text-xs",children:z},z+Q))]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:_,className:"py-2 px-3 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 text-sm",children:[i.jsx(Qh,{className:"w-4 h-4"}),i.jsx("span",{children:"Exportar"})]}),i.jsx("button",{onClick:()=>n(null),className:"py-2 px-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 text-sm",children:"Volver"})]})]}),m&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(eA,{className:"w-4 h-4 mr-2"}),m]}),i.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-6",children:[i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="general"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("general"),children:"Vista general"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="porEstudiante"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("porEstudiante"),children:"Por estudiante"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="porPregunta"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("porPregunta"),children:"Por pregunta"})]}),x==="general"&&k(),x==="porEstudiante"&&M(),x==="porPregunta"&&U()]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones para analizar"}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(vm,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones SIMCE creadas an."})]}):i.jsx("div",{className:"space-y-4",children:t.map(z=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>C(z.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${z.asignatura==="Lectura"||z.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:z.asignatura==="Lectura"||z.asignatura==="Competencia Lectora"?i.jsx(wi,{className:"w-6 h-6"}):i.jsx(DR,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:z.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:z.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:z.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[z.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:(()=>{try{const Q=z.fechaCreacion,q=typeof(Q==null?void 0:Q.toDate)=="function"?Q.toDate():new Date(Q);return isNaN(q.getTime())?"-":q.toLocaleDateString()}catch{return"-"}})()})]})]})]})},z.id))})]})})},D5=({currentUser:e})=>{const[t,r]=N.useState("generador"),a=(e==null?void 0:e.profile)===zt.PROFESORADO||(e==null?void 0:e.profile)===zt.SUBDIRECCION||(e==null?void 0:e.profile)===zt.COORDINACION_TP,n=(e==null?void 0:e.profile)===zt.ESTUDIANTE;return N.useEffect(()=>{n&&r("evaluacion")},[n]),i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluacin SIMCE"})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex",children:[a&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>r("generador"),className:`flex items-center gap-2 px-4 py-3 ${t==="generador"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(Wj,{className:"w-4 h-4"}),i.jsx("span",{children:"Generador de Preguntas"})]}),i.jsxs("button",{onClick:()=>r("resultados"),className:`flex items-center gap-2 px-4 py-3 ${t==="resultados"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(_l,{className:"w-4 h-4"}),i.jsx("span",{children:"Resultados"})]})]}),n&&i.jsxs("button",{onClick:()=>r("evaluacion"),className:`flex items-center gap-2 px-4 py-3 ${t==="evaluacion"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(Xv,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Evaluaciones"})]})]})}),i.jsxs("div",{className:"p-6",children:[a&&t==="generador"&&i.jsx(QJe,{currentUser:e}),a&&t==="resultados"&&i.jsx(rgt,{currentUser:e}),n&&t==="evaluacion"&&i.jsx(tgt,{currentUser:e}),!a&&!n&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"No tienes permisos para acceder a este mdulo."})})]})]})]})},agt=["Enviada","Visada","Aceptada","Rechazada","Completada"],lO=({currentUser:e})=>{const t=e.profile===zt.SUBDIRECCION,r=e.profile===zt.COORDINACION_TP,[a,n]=N.useState(""),[s,o]=N.useState(En[0]),[l,c]=N.useState(gh[0]),[u,d]=N.useState(""),[f,h]=N.useState(30),[m,g]=N.useState(new Date().toISOString().split("T")[0]),[x,v]=N.useState(""),[y,w]=N.useState(null),[j,O]=N.useState(""),[B,T]=N.useState(null),[C,_]=N.useState(!1),[S,L]=N.useState([]),[P,k]=N.useState([]),[M,U]=N.useState("Todos"),[z,Q]=N.useState("Todas"),[q,V]=N.useState("Todos"),[Y,K]=N.useState("Todos"),[J,R]=N.useState("Todos"),[F,W]=N.useState(null),[X,ne]=N.useState(""),[le,ie]=N.useState(!1),[ae,Ae]=N.useState(null),[ke,re]=N.useState(!1),[Re,Le]=N.useState(!0),Te=N.useMemo(()=>{const Ve=new Set;return P.forEach(Bt=>Bt.solicitanteNombre&&Ve.add(Bt.solicitanteNombre)),["Todos",...Array.from(Ve).sort()]},[P]),de=N.useMemo(()=>{const Ve=new Set;return P.forEach(Bt=>Bt.asignatura&&Ve.add(Bt.asignatura)),["Todas",...Array.from(Ve).sort()]},[P]),Ce=N.useMemo(()=>{const Ve=new Set;return P.forEach(Bt=>Bt.curso&&Ve.add(Bt.curso)),["Todos",...Array.from(Ve).sort()]},[P]),me=N.useMemo(()=>P.length,[P]),ye=N.useMemo(()=>P.reduce((Ve,Bt)=>Ve+(Number(Bt.cantidadCopias)||0),0),[P]),oe=Ve=>{const Bt=new Map;for(const dr of P){const er=(Ve(dr)||"").trim()||"";Bt.set(er,(Bt.get(er)||0)+1)}return Array.from(Bt.entries()).map(([dr,er])=>({name:dr,value:er})).sort((dr,er)=>er.value-dr.value)},fe=N.useMemo(()=>oe(Ve=>Ve.estado||"Enviada"),[P]),be=N.useMemo(()=>oe(Ve=>Ve.nivel||""),[P]),Pe=N.useMemo(()=>oe(Ve=>Ve.asignatura||"").slice(0,10),[P]),$e=N.useMemo(()=>oe(Ve=>Ve.solicitanteNombre||"").slice(0,10),[P]),Ke=N.useMemo(()=>oe(Ve=>Ve.curso||"").slice(0,10),[P]),nt={Enviada:"#f59e0b",Visada:"#3b82f6",Aceptada:"#10b981",Rechazada:"#ef4444",Completada:"#059669"},He=["#0ea5e9","#22c55e","#f97316","#6366f1","#14b8a6","#eab308","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f43f5e"];N.useEffect(()=>{var Bt;const Ve=hfe({emailLower:(Bt=e.email)==null?void 0:Bt.toLowerCase()},L);if(t||r){const dr=mfe({nivel:J,curso:M,asignatura:z,docenteNombre:q,estado:Y},k);return()=>{Ve(),dr()}}return()=>{Ve()}},[e.email,t,r,J,M,z,q,Y]);const it=async Ve=>{if(Ve.preventDefault(),!a.trim()){T("Debe indicar un ttulo o descripcin del material.");return}try{_(!0),T(null);let Bt;if(y)try{const{uploadAdjuntoMulticopia:er}=await ei(async()=>{const{uploadAdjuntoMulticopia:Er}=await Promise.resolve().then(()=>Wlt);return{uploadAdjuntoMulticopia:Er}},void 0);Bt=await er(y,"multicopias")}catch(er){console.warn("No se pudo subir el adjunto:",er)}const dr={solicitanteId:e.id,solicitanteNombre:e.nombreCompleto,solicitanteEmail:e.email,tituloMaterial:a,asignatura:s,nivel:l,curso:u||void 0,cantidadCopias:Math.max(1,Number(f)||1),fechaEntregaDeseada:m,enlaceUrl:x||void 0,adjuntoUrl:Bt,comentarios:j||void 0,estado:"Enviada"};await ffe(dr),n(""),c(gh[0]),d(""),h(30),v(""),w(null),O("")}catch(Bt){T((Bt==null?void 0:Bt.message)||"No se pudo crear la solicitud.")}finally{_(!1)}},xt=()=>i.jsxs("form",{onSubmit:it,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Ttulo o descripcin del material"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{value:a,onChange:Ve=>n(Ve.target.value),className:"w-full border rounded-md px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Ej: Prueba de ecuaciones lineales Unidad 2"}),i.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Asignatura"}),i.jsx("select",{value:s,onChange:Ve=>o(Ve.target.value),className:"w-full border rounded-md px-3 py-2",children:En.map(Ve=>i.jsx("option",{value:Ve,children:Ve},Ve))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Nivel"}),i.jsx("select",{required:!0,value:l,onChange:Ve=>c(Ve.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:gh.map(Ve=>i.jsx("option",{value:Ve,children:Ve},Ve))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Curso (opcional)"}),i.jsxs("select",{value:u,onChange:Ve=>d(Ve.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[i.jsx("option",{value:"",children:""}),Nn.map(Ve=>i.jsx("option",{value:Ve,children:Ve},Ve))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Cantidad de copias"}),i.jsx("input",{type:"number",min:1,value:f,onChange:Ve=>h(parseInt(Ve.target.value)||1),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Fecha de entrega deseada"}),i.jsx("input",{type:"date",value:m,onChange:Ve=>g(Ve.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Enlace al material (Drive, etc.)"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{value:x,onChange:Ve=>v(Ve.target.value),className:"w-full border rounded-md px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"https://..."}),i.jsx(HO,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"O subir archivo (opcional)"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"file",onChange:Ve=>{var Bt;return w(((Bt=Ve.target.files)==null?void 0:Bt[0])||null)},className:"block w-full text-sm text-slate-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"}),i.jsx(f2,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se guardar en Storage y se adjuntar a la solicitud."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Comentarios"}),i.jsx("textarea",{value:j,onChange:Ve=>O(Ve.target.value),rows:3,className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Indicaciones adicionales"})]}),B&&i.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:B}),i.jsx("div",{className:"text-right",children:i.jsxs("button",{type:"submit",disabled:C,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400 shadow-sm",children:[i.jsx(are,{className:"h-4 w-4"})," ",C?"Enviando":"Enviar solicitud"]})})]}),Et=()=>i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Ttulo"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Nivel"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Cantidad"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha deseada"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Material"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Estado"}),i.jsx("th",{className:"px-4 py-2"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:S.map(Ve=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-2 text-sm",children:Ve.createdAt?new Date(Ve.createdAt).toLocaleString("es-CL"):""}),i.jsx("td",{className:"px-4 py-2 text-sm font-medium text-slate-800",children:Ve.tituloMaterial}),i.jsx("td",{className:"px-4 py-2 text-sm",children:Ve.asignatura}),i.jsx("td",{className:"px-4 py-2 text-sm",children:Ve.nivel}),i.jsx("td",{className:"px-4 py-2 text-sm",children:Ve.curso||""}),i.jsx("td",{className:"px-4 py-2 text-sm",children:Ve.cantidadCopias}),i.jsx("td",{className:"px-4 py-2 text-sm",children:Ve.fechaEntregaDeseada}),i.jsxs("td",{className:"px-4 py-2 text-sm",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[Ve.enlaceUrl&&i.jsx("a",{href:Ve.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Enlace"}),Ve.adjuntoUrl&&i.jsx("a",{href:Ve.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:underline",children:"Archivo"}),!Ve.enlaceUrl&&!Ve.adjuntoUrl&&i.jsx("span",{className:"text-slate-400",children:""})]}),Ve.estado==="Rechazada"&&Ve.motivoRechazo&&i.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Motivo: ",Ve.motivoRechazo]})]}),i.jsx("td",{className:"px-4 py-2 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${Ve.estado==="Aceptada"?"bg-green-100 text-green-800":Ve.estado==="Rechazada"?"bg-red-100 text-red-700":Ve.estado==="Visada"?"bg-blue-100 text-blue-800":Ve.estado==="Completada"?"bg-emerald-100 text-emerald-800":"bg-yellow-100 text-yellow-800"}`,children:[Ve.estado==="Aceptada"&&i.jsx(nn,{className:"h-3 w-3"}),Ve.estado==="Rechazada"&&i.jsx(eA,{className:"h-3 w-3"}),Ve.estado==="Visada"&&i.jsx(Q2,{className:"h-3 w-3"}),Ve.estado==="Completada"&&i.jsx(d2,{className:"h-3 w-3"}),Ve.estado==="Enviada"&&i.jsx(f2,{className:"h-3 w-3"}),Ve.estado]})}),i.jsx("td",{className:"px-4 py-2 text-sm text-right",children:(Ve.estado==="Enviada"||Ve.estado==="Rechazada")&&i.jsx("button",{title:"Eliminar",onClick:()=>Ae(Ve),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 text-slate-800 hover:bg-slate-300",children:i.jsx(sn,{className:"h-4 w-4"})})})]},Ve.id))})]})}),gt=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 w-full md:w-auto",children:[i.jsx(EN,{className:"h-4 w-4"})," ",i.jsx("span",{className:"text-sm",children:"Filtros"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),i.jsx("select",{value:J,onChange:Ve=>R(Ve.target.value),className:"border rounded-md px-3 py-1.5",children:["Todos",...gh].map(Ve=>i.jsx("option",{value:Ve,children:Ve},Ve))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Docente"}),i.jsx("select",{value:q,onChange:Ve=>V(Ve.target.value),className:"border rounded-md px-3 py-1.5",children:Te.map(Ve=>i.jsx("option",{value:Ve,children:Ve},Ve))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),i.jsx("select",{value:z,onChange:Ve=>Q(Ve.target.value),className:"border rounded-md px-3 py-1.5",children:de.map(Ve=>i.jsx("option",{value:Ve,children:Ve},Ve))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Curso"}),i.jsx("select",{value:M,onChange:Ve=>U(Ve.target.value),className:"border rounded-md px-3 py-1.5",children:Ce.map(Ve=>i.jsx("option",{value:Ve,children:Ve},Ve))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Estado"}),i.jsx("select",{value:Y,onChange:Ve=>K(Ve.target.value),className:"border rounded-md px-3 py-1.5",children:["Todos",...agt].map(Ve=>i.jsx("option",{value:Ve,children:Ve},Ve))})]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700",children:"Resumen grfico"}),i.jsxs("button",{onClick:()=>Le(Ve=>!Ve),className:"text-xs px-3 py-1.5 rounded border bg-white hover:bg-slate-50",children:[Re?"Ocultar":"Ver"," grficos"]})]}),Re&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"col-span-1 lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Total solicitudes"}),i.jsx("div",{className:"text-2xl font-bold",children:me})]}),i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Total copias pedidas"}),i.jsx("div",{className:"text-2xl font-bold",children:ye})]}),i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Docentes nicos"}),i.jsx("div",{className:"text-2xl font-bold",children:new Set(P.map(Ve=>Ve.solicitanteNombre||"")).size})]}),i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Asignaturas nicas"}),i.jsx("div",{className:"text-2xl font-bold",children:new Set(P.map(Ve=>Ve.asignatura||"")).size})]})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por estado"}),i.jsx("div",{className:"h-[240px]",children:i.jsx(cc,{width:"100%",height:"100%",children:i.jsxs(d4,{children:[i.jsx(WN,{data:fe,dataKey:"value",nameKey:"name",outerRadius:80,children:fe.map((Ve,Bt)=>i.jsx(qh,{fill:nt[Ve.name]||He[Bt%He.length]},`estado-${Bt}`))}),i.jsx(lc,{}),i.jsx(ux,{})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por nivel"}),i.jsx("div",{className:"h-[240px]",children:i.jsx(cc,{width:"100%",height:"100%",children:i.jsxs(Nh,{data:be,margin:{left:8,right:8,bottom:8},children:[i.jsx(wh,{strokeDasharray:"3 3"}),i.jsx(Vd,{dataKey:"name",tick:{fontSize:12},interval:0,angle:-20,height:50,textAnchor:"end"}),i.jsx($d,{allowDecimals:!1}),i.jsx(lc,{}),i.jsx(lA,{dataKey:"value",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por asignatura (Top 10)"}),i.jsx("div",{className:"h-[240px]",children:i.jsx(cc,{width:"100%",height:"100%",children:i.jsxs(Nh,{data:Pe,margin:{left:8,right:8,bottom:8},children:[i.jsx(wh,{strokeDasharray:"3 3"}),i.jsx(Vd,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),i.jsx($d,{allowDecimals:!1}),i.jsx(lc,{}),i.jsx(lA,{dataKey:"value",fill:"#10b981",radius:[4,4,0,0]})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por docente (Top 10)"}),i.jsx("div",{className:"h-[260px]",children:i.jsx(cc,{width:"100%",height:"100%",children:i.jsxs(Nh,{data:$e,margin:{left:8,right:8,bottom:8},children:[i.jsx(wh,{strokeDasharray:"3 3"}),i.jsx(Vd,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),i.jsx($d,{allowDecimals:!1}),i.jsx(lc,{}),i.jsx(lA,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por curso (Top 10)"}),i.jsx("div",{className:"h-[240px]",children:i.jsx(cc,{width:"100%",height:"100%",children:i.jsxs(Nh,{data:Ke,margin:{left:8,right:8,bottom:8},children:[i.jsx(wh,{strokeDasharray:"3 3"}),i.jsx(Vd,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),i.jsx($d,{allowDecimals:!1}),i.jsx(lc,{}),i.jsx(lA,{dataKey:"value",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Docente"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Ttulo"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Nivel"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Cantidad"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha deseada"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Material"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Estado"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Motivo"}),i.jsx("th",{className:"px-3 py-2"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:P.map(Ve=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-3 py-2 text-sm",children:Ve.createdAt?new Date(Ve.createdAt).toLocaleString("es-CL"):""}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Ve.solicitanteNombre}),i.jsx("td",{className:"px-3 py-2 text-sm font-medium text-slate-800",children:Ve.tituloMaterial}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Ve.asignatura}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Ve.nivel}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Ve.curso||""}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Ve.cantidadCopias}),i.jsx("td",{className:"px-3 py-2 text-sm",children:Ve.fechaEntregaDeseada}),i.jsx("td",{className:"px-3 py-2 text-sm",children:i.jsxs("div",{className:"flex gap-2 items-center",children:[Ve.enlaceUrl&&i.jsxs("a",{href:Ve.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline",children:[i.jsx(HO,{className:"h-4 w-4"})," Enlace"]}),Ve.adjuntoUrl&&i.jsxs("a",{href:Ve.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-emerald-600 hover:underline",children:[i.jsx(f2,{className:"h-4 w-4"})," Archivo"]}),!Ve.enlaceUrl&&!Ve.adjuntoUrl&&i.jsx("span",{className:"text-slate-400",children:""})]})}),i.jsx("td",{className:"px-3 py-2 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${Ve.estado==="Aceptada"?"bg-green-100 text-green-800":Ve.estado==="Rechazada"?"bg-red-100 text-red-700":Ve.estado==="Visada"?"bg-blue-100 text-blue-800":Ve.estado==="Completada"?"bg-emerald-100 text-emerald-800":"bg-yellow-100 text-yellow-800"}`,children:[Ve.estado==="Aceptada"&&i.jsx(nn,{className:"h-3 w-3"}),Ve.estado==="Rechazada"&&i.jsx(eA,{className:"h-3 w-3"}),Ve.estado==="Visada"&&i.jsx(Q2,{className:"h-3 w-3"}),Ve.estado==="Completada"&&i.jsx(d2,{className:"h-3 w-3"}),Ve.estado==="Enviada"&&i.jsx(f2,{className:"h-3 w-3"}),Ve.estado]})}),i.jsx("td",{className:"px-3 py-2 text-sm max-w-[240px] truncate",title:Ve.motivoRechazo||"",children:Ve.motivoRechazo||""}),i.jsxs("td",{className:"px-3 py-2 text-sm text-right space-x-2",children:[Ve.estado==="Enviada"&&i.jsxs("button",{onClick:async()=>await N2(Ve.id,"Visada",e.nombreCompleto),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:[i.jsx(Q2,{className:"h-4 w-4"})," Visar"]}),(Ve.estado==="Enviada"||Ve.estado==="Visada")&&i.jsxs("button",{onClick:async()=>{await N2(Ve.id,"Aceptada",e.nombreCompleto),await pfe(Ve)},className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700",children:[i.jsx(nn,{className:"h-4 w-4"})," Aceptar"]}),Ve.estado!=="Rechazada"&&Ve.estado!=="Completada"&&i.jsxs("button",{onClick:()=>{W(Ve),ne("")},className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:[i.jsx(eA,{className:"h-4 w-4"})," Rechazar"]}),Ve.estado==="Aceptada"&&i.jsxs("button",{onClick:async()=>await N2(Ve.id,"Completada",e.nombreCompleto),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-emerald-600 text-white hover:bg-emerald-700",children:[i.jsx(d2,{className:"h-4 w-4"})," Completada"]}),e.id===Ve.solicitanteId&&(Ve.estado==="Enviada"||Ve.estado==="Rechazada")&&i.jsxs("button",{title:"Eliminar",onClick:()=>Ae(Ve),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 text-slate-800 hover:bg-slate-300",children:[i.jsx(sn,{className:"h-4 w-4"})," Eliminar"]})]})]},Ve.id))})]})}),F&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl p-6 shadow-xl",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Motivo de rechazo"}),i.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Indica brevemente el motivo del rechazo para que el docente pueda corregir o reenviar."}),i.jsx("textarea",{rows:4,value:X,onChange:Ve=>ne(Ve.target.value),className:"w-full border-slate-300 rounded-md",placeholder:"Ej: El material no es legible o falta la portada."}),i.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[i.jsxs("button",{onClick:()=>{W(null),ne("")},className:"inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:[i.jsx(eA,{className:"h-4 w-4"})," Cancelar"]}),i.jsx("button",{disabled:le,onClick:async()=>{if(F)try{ie(!0),await N2(F.id,"Rechazada",e.nombreCompleto,{motivoRechazo:X||void 0}),W(null),ne("")}finally{ie(!1)}},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400",children:le?"Guardando":i.jsxs(i.Fragment,{children:[i.jsx(eA,{className:"h-4 w-4"})," Confirmar rechazo"]})})]})]})}),ae&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl p-6 shadow-xl",children:[i.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2 text-red-700",children:[i.jsx(sn,{className:"h-5 w-5"})," Eliminar solicitud"]}),i.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:["Esta accin eliminar la solicitud ",ae.tituloMaterial,". Si tiene un archivo adjunto, tambin se intentar borrar del almacenamiento."]}),i.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Deseas continuar?"}),i.jsxs("div",{className:"mt-1 flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>Ae(null),className:"inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{disabled:ke,onClick:async()=>{try{re(!0),await gfe(ae.id,{adjuntoUrl:ae.adjuntoUrl}),Ae(null)}catch{alert("No se pudo eliminar.")}finally{re(!1)}},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400",children:ke?"Eliminando":i.jsxs(i.Fragment,{children:[i.jsx(sn,{className:"h-4 w-4"})," Eliminar"]})})]})]})})]});return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(pS,{className:"h-6 w-6 text-amber-600"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Multicopias"})]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Gestiona solicitudes de copias de material evaluativo y pedaggico."}),(e.profile===zt.PROFESORADO||r)&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[i.jsx(ru,{className:"h-5 w-5 text-amber-600"})," Nueva solicitud"]}),xt()]}),(e.profile===zt.PROFESORADO||r)&&i.jsxs("div",{className:"mb-10",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[i.jsx(Ev,{className:"h-5 w-5 text-amber-600"})," Mis solicitudes"]}),Et()]}),t&&i.jsxs("div",{children:[i.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[i.jsx(d2,{className:"h-5 w-5 text-amber-600"})," Panel de Subdireccin"]}),gt()]})]})};async function ngt(e){const t=ht(st,"ensayo_evaluaciones"),r={...e,createdAt:Ga(),tipo:"evaluacion_ensayo",indicadores:10};return(await Zr(t,r)).id}const cO=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},$f=[1,2,3,4,5,6,7,8,9,10],KJ={1:"Llega puntualmente a la evaluacin.",2:"Sigue las instrucciones dadas por el/la docente respecto a su ubicacin en la sala de clases.",3:"Sigue las instrucciones dadas por el/la docente respecto al inicio de la evaluacin.",4:"Se mantiene en silencio mientras desarrolla la evaluacin.",5:"Mantiene su celular o cualquier equipo tecnolgico en silencio y guardado.",6:"Levanta la mano si requiere consultar alguna duda.",7:"Espera en silencio mientras es atendido por el/la docente para resolver sus dudas.",8:"Se observa que el/la estudiante realiza el esfuerzo por llevar a trmino satisfactorio su evaluacin.",9:"Respeta los tiempos considerados para realizar la evaluacin y se mantiene en silencio una vez finalizada.",10:"Entrega el instrumento de evaluacin cuando se le solicita."},uO=({currentUser:e})=>{const[t,r]=N.useState(""),[a,n]=N.useState("Lengua y Literatura"),[s,o]=N.useState(""),[l,c]=N.useState([]),[u,d]=N.useState(!1),[f,h]=N.useState(!1),[m,g]=N.useState([]),[x,v]=N.useState({}),[y,w]=N.useState({});N.useEffect(()=>{d(!0),P1().then(_=>c(_)).finally(()=>d(!1))},[]);const j=N.useMemo(()=>l.filter(_=>_.profile==="PROFESORADO"||_.profile==="PROFESORADO"),[l]);N.useEffect(()=>{const _=cO(t),S=l.filter(P=>P.profile==="ESTUDIANTE"&&cO(P.curso||"")===_).map(P=>({id:P.id,nombre:P.nombreCompleto}));g(S);const L={};S.forEach(P=>{L[P.id]={},$f.forEach(k=>{L[P.id][k]=!0})}),v(L),w({})},[t,l]);const O=(_,S)=>{v(L=>{var P;return{...L,[_]:{...L[_],[S]:!((P=L[_])!=null&&P[S])}}})},B=_=>{if(y[_])return 0;const S=x[_];if(!S)return 0;const P=$f.map(k=>S[k]?7:2).reduce((k,M)=>k+M,0)/$f.length;return Math.round(P*10)/10},T=N.useMemo(()=>{if(m.length===0)return $f.map(S=>({indicador:S,porcentajeOn:0,promedio:0}));const _=m.filter(S=>!y[S.id]);return _.length===0?$f.map(S=>({indicador:S,porcentajeOn:0,promedio:0})):$f.map(S=>{const L=_.reduce((M,U)=>{var z;return M+((z=x[U.id])!=null&&z[S]?1:0)},0),P=Math.round(L/_.length*100),k=_.reduce((M,U)=>{var z;return M+((z=x[U.id])!=null&&z[S]?7:2)},0)/_.length;return{indicador:S,porcentajeOn:P,promedio:Math.round(k*10)/10}})},[m,x,y]),C=async()=>{var _;if(!(!t||!a||!s||m.length===0)){h(!0);try{await ngt({curso:cO(t),asignatura:a,profesorId:s,profesorNombre:((_=l.find(S=>S.id===s))==null?void 0:_.nombreCompleto)||"",creadorId:e.id,creadorNombre:e.nombreCompleto,fecha:new Date().toISOString(),resultados:m.map(S=>{const L=!!y[S.id];return{estudianteId:S.id,estudianteNombre:S.nombre,indicadores:$f.map(P=>{var k;return(k=x[S.id])!=null&&k[P]?7:2}),promedio:L?null:B(S.id),ausente:L}})}),alert("Evaluacin guardada")}catch(S){console.error("Error guardando evaluacin de ensayo",S),alert("No se pudo guardar. Reintenta.")}finally{h(!1)}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Indicadores evaluados"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:$f.map(_=>i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 text-xs font-bold shrink-0",children:_}),i.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:KJ[_]})]},_))})]}),m.length>0&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Desempeo del curso por indicador"}),i.jsx("div",{className:"space-y-2",children:T.map(_=>i.jsxs("div",{className:"grid grid-cols-12 items-center gap-2",children:[i.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-2 text-xs text-slate-600 dark:text-slate-300",children:[_.indicador,". ",KJ[_.indicador]]}),i.jsx("div",{className:"col-span-12 md:col-span-6 lg:col-span-7",children:i.jsx("div",{className:"w-full h-3 rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-3 bg-emerald-500",style:{width:`${_.porcentajeOn}%`}})})}),i.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-3 flex justify-between text-xs text-slate-700 dark:text-slate-200",children:[i.jsxs("span",{className:"font-medium",children:[_.porcentajeOn,"% con 7.0"]}),i.jsxs("span",{children:["Prom: ",_.promedio.toFixed(1)]})]})]},_.indicador))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Curso"}),i.jsxs("select",{value:t,onChange:_=>r(_.target.value),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"Seleccione"}),Nn.map(_=>i.jsx("option",{value:_,children:_},_))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Asignatura"}),i.jsx("select",{value:a,onChange:_=>n(_.target.value),className:"w-full border rounded-md px-3 py-2",children:En.map(_=>i.jsx("option",{value:_,children:_},_))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Profesor responsable"}),i.jsxs("select",{value:s,onChange:_=>o(_.target.value),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"Seleccione"}),j.map(_=>i.jsx("option",{value:_.id,children:_.nombreCompleto},_.id))]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{onClick:C,disabled:!t||!a||!s||f,className:"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[f?i.jsx(Co,{className:"w-4 h-4 animate-spin"}):i.jsx(Fl,{className:"w-4 h-4"})," Guardar"]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/40",children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Estudiante"}),$f.map(_=>i.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-slate-500",children:_},_)),i.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-slate-500",children:"Prom."})]})}),i.jsxs("tbody",{children:[u&&i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"px-4 py-6 text-center text-slate-500",children:"Cargando estudiantes"})}),!u&&m.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"px-4 py-6 text-center text-slate-500",children:"Seleccione curso para listar estudiantes."})}),m.map(_=>i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/50 hover:bg-slate-50/50",children:[i.jsx("td",{className:"px-4 py-2 text-sm whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(jb,{className:"w-4 h-4 text-slate-400"})," ",_.nombre]}),i.jsxs("label",{className:"inline-flex items-center gap-1 text-xs text-slate-600",children:[i.jsx("input",{type:"checkbox",checked:!!y[_.id],onChange:S=>w(L=>({...L,[_.id]:S.target.checked}))}),"Ausente"]})]})}),$f.map(S=>{var P;const L=((P=x[_.id])==null?void 0:P[S])??!0;return i.jsx("td",{className:"px-2 py-2 text-center",children:i.jsx("button",{type:"button",onClick:()=>!y[_.id]&&O(_.id,S),disabled:!!y[_.id],className:`inline-flex items-center justify-center w-7 h-7 rounded-full border transition ${y[_.id]?"opacity-40 cursor-not-allowed bg-slate-50 border-slate-200":L?"bg-green-100 border-green-300 text-green-700":"bg-red-50 border-red-300 text-red-600"}`,title:y[_.id]?"Ausente":L?"7.0":"2.0",children:L?i.jsx(mS,{className:"w-4 h-4"}):i.jsx(sNe,{className:"w-4 h-4"})})},S)}),i.jsx("td",{className:"px-3 py-2 text-center font-semibold text-slate-700",children:y[_.id]?"":B(_.id).toFixed(1)})]},_.id))]})]})})]})},sgt={"1 Medio":"1","2 Medio":"2","3 Medio":"3","4 Medio":"4"};function igt(e){const t=sgt[e]||"";return Nn.filter(r=>r.startsWith(t))}function ogt(){const[e,t]=N.useState({}),[r,a]=N.useState(!0);N.useEffect(()=>{const s=xne(o=>{t(o||{}),a(!1)});return()=>s&&s()},[]);const n=N.useMemo(()=>gh.map(s=>({nivel:s,cursos:igt(s)})).filter(s=>s.cursos.length>0),[]);return i.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-semibold",children:"Horario semanal del liceo"}),r&&i.jsx("span",{className:"text-sm text-gray-500",children:"Cargando"})]}),i.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:pA.map(s=>i.jsxs("section",{className:"rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-slate-900 shadow-sm overflow-hidden",children:[i.jsx("header",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-slate-800/40",children:i.jsx("h2",{className:"text-lg font-semibold",children:s})}),i.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:n.map(({nivel:o,cursos:l})=>i.jsxs("div",{className:"p-3 md:p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"h-5 w-1.5 rounded bg-amber-500"}),i.jsx("h3",{className:"text-base md:text-lg font-medium",children:o}),i.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[l.length," curso(s)"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left text-gray-600 dark:text-gray-300",children:[i.jsx("th",{className:"px-2 py-2 font-semibold sticky left-0 bg-white dark:bg-slate-900 z-10",children:"BLOQUE"}),i.jsx("th",{className:"px-2 py-2 font-semibold",children:"INICIO"}),i.jsx("th",{className:"px-2 py-2 font-semibold",children:"FINAL"}),l.map(c=>i.jsx("th",{className:"px-2 py-2 font-semibold whitespace-nowrap",children:c},c))]})}),i.jsx("tbody",{children:Ws.map(c=>{const u=String(c.bloque);return i.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-800 align-top",children:[i.jsx("td",{className:"px-2 py-2 font-medium sticky left-0 bg-white dark:bg-slate-900 z-10",children:c.bloque}),i.jsx("td",{className:"px-2 py-2 text-gray-600 dark:text-gray-300",children:c.inicio}),i.jsx("td",{className:"px-2 py-2 text-gray-600 dark:text-gray-300",children:c.fin}),l.map(d=>{var x,v;const f=(v=(x=e==null?void 0:e[s])==null?void 0:x[u])==null?void 0:v[d],h=(f==null?void 0:f.asignatura)||"",m=(f==null?void 0:f.profesor)||"",g=!!(h||m);return i.jsx("td",{className:`px-2 py-2 ${g?"bg-white dark:bg-slate-900":"bg-gray-50 dark:bg-slate-800/30"}`,children:i.jsxs("div",{className:"min-w-[9rem] md:min-w-[12rem] lg:min-w-[14rem] xl:min-w-[16rem]",children:[i.jsx("div",{className:"font-medium leading-5 truncate",title:h,children:h||""}),i.jsx("div",{className:"text-xs text-gray-500 truncate",title:m,children:m})]})},d)})]},c.bloque)})})]})})]},o))})]},s))})]})}const lgt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},cgt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:a,canChangeProfile:n,unreadMessagesCount:s,refreshUnreadCount:o})=>{const l=e.profile,c=N.useMemo(()=>{const T=Z2e[l]||[];return l!==zt.ESTUDIANTE?T:T.filter(C=>{if(C.name==="Asistencia a Empresa"){const _=lgt(e.curso||"");return _.startsWith("3")||_.startsWith("4")}return!0})},[l,e.curso]),[u,d]=N.useState(null),[f,h]=N.useState(!1),[m,g]=N.useState(!1),[x,v]=N.useState({planificacion:!0,evaluacion:!0,reflexion:!0,herramientas:!0,sd_gestion:!0,sd_planificacion:!0,sd_reflexion:!0,sd_herramientas:!0}),y=N.useRef([]);N.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[l,c]);const w=N.useCallback(T=>{d(T),window.innerWidth<768&&h(!1)},[]),j=N.useCallback(T=>{const C=c.find(_=>_.name===T);C&&w(C)},[c,w]),O=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:i.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:i.jsx(R2e,{className:"w-5 h-5"})})}),!m&&i.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestin LIR"})]}),i.jsx("button",{type:"button",onClick:()=>g(T=>!T),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:m?"Expandir":"Colapsar",children:m?i.jsx(PR,{className:"w-5 h-5 text-slate-200"}):i.jsx(Nw,{className:"w-5 h-5 text-slate-200"})})]}),i.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",children:l===zt.PROFESORADO&&!m?i.jsxs("div",{className:"space-y-3",children:[[{id:"planificacion",title:"Planificacin",items:["Planificacin","Recursos de Aprendizaje","Interdisciplinario","Inclusin"]},{id:"evaluacion",title:"Evaluacin",items:["Evaluacin de Ensayo","Evaluacin de Aprendizajes","Evaluaciones Formativas","Evaluacin de Competencias","Actividades Remotas","SIMCE"]},{id:"reflexion",title:"Reflexin",items:["Anlisis Taxonmico","Mis Acompaamientos","Desarrollo Profesional"]},{id:"herramientas",title:"Herramientas",items:["Muro de Anuncios","Mensajera Interna","Generador de Actas"]}].map(T=>{const C=!!x[T.id],_=T.items.map(S=>c.find(L=>L.name===S)).filter(Boolean);return _.length===0?null:i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(S=>({...S,[T.id]:!S[T.id]})),"aria-expanded":C,children:[i.jsx("span",{className:"text-sm font-semibold text-white/90",children:T.title}),i.jsx(ez,{className:`w-4 h-4 text-white/70 transition-transform ${C?"rotate-180":""}`})]}),C&&i.jsx("div",{className:"px-2 pb-2",children:_.map(S=>{const L=(u==null?void 0:u.name)===S.name;return i.jsxs("button",{onClick:()=>w(S),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:S.name,children:[i.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:S.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:S.name})]},S.name)})})]},T.id)}),c.filter(T=>!["Planificacin","Recursos de Aprendizaje","Interdisciplinario","Inclusin","Evaluacin de Aprendizajes","Evaluaciones Formativas","Evaluacin de Competencias","Actividades Remotas","SIMCE","Anlisis Taxonmico","Mis Acompaamientos","Desarrollo Profesional","Muro de Anuncios","Mensajera Interna","Generador de Actas"].includes(T.name)).length>0&&i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-white/90",children:"Otros"}),i.jsx("div",{className:"px-2 pb-2",children:c.filter(T=>!["Planificacin","Recursos de Aprendizaje","Interdisciplinario","Inclusin","Evaluacin de Aprendizajes","Evaluaciones Formativas","Evaluacin de Competencias","Actividades Remotas","SIMCE","Anlisis Taxonmico","Mis Acompaamientos","Desarrollo Profesional","Muro de Anuncios","Mensajera Interna","Generador de Actas"].includes(T.name)).map(T=>{const C=(u==null?void 0:u.name)===T.name;return i.jsxs("button",{onClick:()=>w(T),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                            ${C?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:T.name,children:[i.jsx("span",{className:`shrink-0 ${C?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:T.name})]},T.name)})})]})]}):l===zt.SUBDIRECCION&&!m?i.jsxs("div",{className:"space-y-3",children:[[{id:"sd_gestion",title:"Gestin",items:["Administracin","Horario del liceo","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedaggicas"]},{id:"sd_planificacion",title:"Planificacin",items:["Seguimiento Curricular","Interdisciplinario","Inclusin"]},{id:"sd_reflexion",title:"Reflexin",items:["Acompaamiento docente","Anlisis Taxonmico","Dashboard"]},{id:"sd_herramientas",title:"Herramientas",items:["Calendario Acadmico","Muro de Anuncios","Mensajera Interna","Generador de Actas"]}].map(T=>{const C=!!x[T.id],_=T.items.map(S=>c.find(L=>L.name===S)).filter(Boolean);return _.length===0?null:i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(S=>({...S,[T.id]:!S[T.id]})),"aria-expanded":C,children:[i.jsx("span",{className:"text-sm font-semibold text-white/90",children:T.title}),i.jsx(ez,{className:`w-4 h-4 text-white/70 transition-transform ${C?"rotate-180":""}`})]}),C&&i.jsx("div",{className:"px-2 pb-2",children:_.map(S=>{const L=(u==null?void 0:u.name)===S.name;return i.jsxs("button",{onClick:()=>w(S),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:S.name,children:[i.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:S.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:S.name})]},S.name)})})]},T.id)}),c.filter(T=>!["Administracin","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedaggicas","Seguimiento Curricular","Interdisciplinario","Inclusin","Acompaamiento docente","Anlisis Taxonmico","Dashboard","Calendario Acadmico","Muro de Anuncios","Mensajera Interna","Generador de Actas"].includes(T.name)).length>0&&i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-white/90",children:"Otros"}),i.jsx("div",{className:"px-2 pb-2",children:c.filter(T=>!["Administracin","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedaggicas","Seguimiento Curricular","Interdisciplinario","Inclusin","Acompaamiento docente","Anlisis Taxonmico","Dashboard","Calendario Acadmico","Muro de Anuncios","Mensajera Interna","Generador de Actas"].includes(T.name)).map(T=>{const C=(u==null?void 0:u.name)===T.name;return i.jsxs("button",{onClick:()=>w(T),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                            ${C?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:T.name,children:[i.jsx("span",{className:`shrink-0 ${C?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:T.name})]},T.name)})})]})]}):i.jsx("div",{className:"space-y-1",onKeyDown:T=>{var _,S,L;const C=y.current.findIndex(P=>P===document.activeElement);if(T.key==="ArrowDown"){T.preventDefault();const P=Math.min(C===-1?0:C+1,y.current.length-1);(_=y.current[P])==null||_.focus()}else if(T.key==="ArrowUp"){T.preventDefault();const P=Math.max(C===-1?0:C-1,0);(S=y.current[P])==null||S.focus()}else T.key==="Enter"&&C>=0&&((L=y.current[C])==null||L.click())},children:c.map((T,C)=>{const _=(u==null?void 0:u.name)===T.name;return i.jsxs("button",{ref:S=>y.current[C]=S,onClick:()=>w(T),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                    ${_?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:m?T.name:void 0,children:[i.jsx("span",{className:`shrink-0 ${_?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),!m&&i.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:T.name})]},T.name)})})})]}),B=()=>{if(!u)return i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un mdulo del men para comenzar."})});if(u.name==="Calendario Acadmico")return i.jsx(yXe,{profile:l});if(u.name==="Muro de Anuncios")return i.jsx(jXe,{currentUser:e});if(u.name==="Mensajera Interna")return i.jsx(rtt,{currentUser:e,refreshUnreadCount:o});if(u.name==="Generador de Actas")return i.jsx(FXe,{});if(u.name==="Desarrollo Profesional")return i.jsx(qmt,{currentUser:e});if(l===zt.SUBDIRECCION){if(u.name==="Dashboard")return i.jsx(jOe,{currentUser:e});if(u.name==="Administracin")return i.jsx(ZJe,{});if(u.name==="Horario del liceo")return i.jsx(ogt,{});if(u.name==="Multicopias")return i.jsx(lO,{currentUser:e});if(u.name==="Evaluacin de Ensayo")return i.jsx(uO,{currentUser:e});if(u.name==="Seguimiento Curricular")return i.jsx(zlt,{currentUser:e});if(u.name==="Acompaamiento docente")return i.jsx(Ket,{currentUser:e});if(u.name==="Anlisis Taxonmico")return i.jsx(zX,{currentUser:e});if(u.name==="SIMCE")return i.jsx(D5,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(XW,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return i.jsx(yOe,{currentUser:e});if(u.name==="Crear horarios")return i.jsx(yFe,{});if(u.name==="Seguimiento de acciones pedaggicas")return i.jsx(XWe,{});if(u.name==="Inclusin")return i.jsx(GW,{currentUser:e})}if(l===zt.PROFESORADO){if(u.name==="Planificacin")return i.jsx(AXe,{currentUser:e});if(u.name==="Mis Acompaamientos")return i.jsx(wlt,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return i.jsx(ilt,{});if(u.name==="Multicopias")return i.jsx(lO,{currentUser:e});if(u.name==="Anlisis Taxonmico")return i.jsx(zX,{currentUser:e});if(u.name==="SIMCE")return i.jsx(D5,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(XW,{});if(u.name==="Inclusin")return i.jsx(GW,{currentUser:e});if(u.name==="Actividades Remotas")return i.jsx(SZe,{});if(u.name==="Evaluacin de Ensayo")return i.jsx(uO,{currentUser:e});if(u.name==="Evaluacin de Aprendizajes")return i.jsx(XJe,{});if(u.name==="Evaluaciones Formativas")return i.jsx(_et,{currentUser:e});if(u.name==="Evaluacin de Competencias")return i.jsx(Xpt,{currentUser:e})}if(l===zt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return i.jsx(cZe,{});if(u.name==="Asistencia Dual")return i.jsx(fet,{});if(u.name==="Paol")return i.jsx(Ett,{});if(u.name==="Multicopias")return i.jsx(lO,{currentUser:e});if(u.name==="Evaluacin de Ensayo")return i.jsx(uO,{currentUser:e});if(u.name==="SIMCE")return i.jsx(D5,{currentUser:e});if(u.name==="Gestin de Empresas")return i.jsx(Omt,{});if(u.name==="Alternancia TP")return i.jsx(Cpt,{})}if(l===zt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return i.jsx(HZe,{currentUser:e});if(u.name==="Evaluacin Formativa")return i.jsx(Alt,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return i.jsx(xlt,{currentUser:e});if(u.name==="SIMCE")return i.jsx(D5,{currentUser:e});if(u.name==="Asistencia a Empresa")return i.jsx(aet,{currentUser:e})}return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),i.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aqu ir la funcionalidad de ",i.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return i.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[i.jsx(aCe,{currentUser:e,onLogout:t,onNavigate:j,onUserUpdate:r,onChangeProfile:a,canChangeProfile:n,toggleSidebar:()=>h(T=>!T),unreadMessagesCount:s,refreshUnreadCount:o}),i.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&i.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),i.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:i.jsx(O,{})}),i.jsx("main",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir men",children:i.jsx(tEe,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&i.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),i.jsx("div",{className:"min-h-[60vh]",children:B()})]})})]})]})},ugt=({onSelectProfile:e,isAdminView:t=!1})=>i.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[i.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),i.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),i.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(FR,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestin Pedaggica LIR"}),i.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:J2e.map(r=>i.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[i.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),i.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),i.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),dgt=()=>{const[e,t]=N.useState(null),[r,a]=N.useState(null),[n,s]=N.useState(!0),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState(null),[h,m]=N.useState(null);N.useEffect(()=>{const O=new URLSearchParams(window.location.search),B=O.get("auth"),T=O.get("userId");O.get("module"),B==="success"&&T&&(m("Autorizacin de Google Slides completada exitosamente!"),setTimeout(()=>{const C=window.location.pathname;window.history.replaceState({},document.title,C),m(null)},3e3))},[]),N.useEffect(()=>{const O=BZ(so,async B=>{if(t(B),B)try{const T=await qte(B.email);T?(a(T),T.profile===zt.SUBDIRECCION&&u(!0)):(l("Usuario no encontrado en la base de datos. Contacte al administrador."),await _B())}catch{l("Error al conectar con la base de datos."),await _B()}else a(null),f(null),u(!1),l(null);s(!1)});return()=>O()},[]);const g=async(O,B)=>{if(l(null),!O.trim()||!B.trim()){l("Por favor ingrese email y contrasea");return}try{await O2e(O.trim(),B)}catch(T){switch(T.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Credenciales invlidas. Verifique su email y contrasea.");break;case"auth/too-many-requests":l("Demasiados intentos fallidos. Intente ms tarde.");break;case"auth/network-request-failed":l("Error de conexin. Verifique su internet.");break;default:l("Ocurri un error al intentar iniciar sesin.")}}},x=async O=>{try{await F2e(O)}catch(B){console.error("Error al enviar email de recuperacin:",B)}},v=O=>{f(O),u(!1)},y=()=>{u(!0),f(null)},w=async()=>{try{await _B()}catch(O){console.error("Error al cerrar sesin:",O)}};if(n)return i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(FR,{})}),i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicacin..."})]})});if(!e||!r)return i.jsx(lwe,{onLoginAttempt:g,onForgotPasswordRequest:x,error:o});if(c&&r.profile===zt.SUBDIRECCION)return i.jsx(ugt,{onSelectProfile:v,isAdminView:!0});const j=d||r.profile;return i.jsxs(i.Fragment,{children:[h&&i.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white p-4 rounded-lg shadow-lg flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{children:h})]}),i.jsx(cgt,{currentUser:{...r,profile:j},onLogout:w,onChangeProfile:r.profile===zt.SUBDIRECCION?y:void 0,canChangeProfile:r.profile===zt.SUBDIRECCION})]})},jhe=document.getElementById("root");if(!jhe)throw new Error("Could not find root element to mount to");const fgt=z0e.createRoot(jhe);fgt.render(i.jsx(ct.StrictMode,{children:i.jsx(dgt,{})}));export{gn as _,hgt as c,Dl as g};
