var Hhe=Object.defineProperty;var Vhe=(e,t,r)=>t in e?Hhe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var L3=(e,t,r)=>Vhe(e,typeof t!="symbol"?t+"":t,r);function zhe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var hpt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $he(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var M3={exports:{}},cy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g9;function Ghe(){if(g9)return cy;g9=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:s}}return cy.Fragment=t,cy.jsx=r,cy.jsxs=r,cy}var x9;function qhe(){return x9||(x9=1,M3.exports=Ghe()),M3.exports}var i=qhe(),U3={exports:{}},un={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v9;function Khe(){if(v9)return un;v9=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(ee){return ee===null||typeof ee!="object"?null:(ee=f&&ee[f]||ee["@@iterator"],typeof ee=="function"?ee:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(ee,X,O){this.props=ee,this.context=X,this.refs=x,this.updater=O||m}v.prototype.isReactComponent={},v.prototype.setState=function(ee,X){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,X,"setState")},v.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function y(){}y.prototype=v.prototype;function w(ee,X,O){this.props=ee,this.context=X,this.refs=x,this.updater=O||m}var _=w.prototype=new y;_.constructor=w,g(_,v.prototype),_.isPureReactComponent=!0;var F=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},T=Object.prototype.hasOwnProperty;function C(ee,X,O,R,G,Y){return O=Y.ref,{$$typeof:e,type:ee,key:X,ref:O!==void 0?O:null,props:Y}}function S(ee,X){return C(ee.type,X,void 0,void 0,void 0,ee.props)}function j(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===e}function L(ee){var X={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(O){return X[O]})}var P=/\/+/g;function k(ee,X){return typeof ee=="object"&&ee!==null&&ee.key!=null?L(""+ee.key):X.toString(36)}function U(){}function Q(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(U,U):(ee.status="pending",ee.then(function(X){ee.status==="pending"&&(ee.status="fulfilled",ee.value=X)},function(X){ee.status==="pending"&&(ee.status="rejected",ee.reason=X)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function K(ee,X,O,R,G){var Y=typeof ee;(Y==="undefined"||Y==="boolean")&&(ee=null);var te=!1;if(ee===null)te=!0;else switch(Y){case"bigint":case"string":case"number":te=!0;break;case"object":switch(ee.$$typeof){case e:case t:te=!0;break;case d:return te=ee._init,K(te(ee._payload),X,O,R,G)}}if(te)return G=G(ee),te=R===""?"."+k(ee,0):R,F(G)?(O="",te!=null&&(O=te.replace(P,"$&/")+"/"),K(G,X,O,"",function(ie){return ie})):G!=null&&(j(G)&&(G=S(G,O+(G.key==null||ee&&ee.key===G.key?"":(""+G.key).replace(P,"$&/")+"/")+te)),X.push(G)),1;te=0;var ae=R===""?".":R+":";if(F(ee))for(var oe=0;oe<ee.length;oe++)R=ee[oe],Y=ae+k(R,oe),te+=K(R,X,O,Y,G);else if(oe=h(ee),typeof oe=="function")for(ee=oe.call(ee),oe=0;!(R=ee.next()).done;)R=R.value,Y=ae+k(R,oe++),te+=K(R,X,O,Y,G);else if(Y==="object"){if(typeof ee.then=="function")return K(Q(ee),X,O,R,G);throw X=String(ee),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return te}function H(ee,X,O){if(ee==null)return ee;var R=[],G=0;return K(ee,R,"","",function(Y){return X.call(O,Y,G++)}),R}function q(ee){if(ee._status===-1){var X=ee._result;X=X(),X.then(function(O){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=O)},function(O){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=O)}),ee._status===-1&&(ee._status=0,ee._result=X)}if(ee._status===1)return ee._result.default;throw ee._result}var z=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)};function W(){}return un.Children={map:H,forEach:function(ee,X,O){H(ee,function(){X.apply(this,arguments)},O)},count:function(ee){var X=0;return H(ee,function(){X++}),X},toArray:function(ee){return H(ee,function(X){return X})||[]},only:function(ee){if(!j(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},un.Component=v,un.Fragment=r,un.Profiler=a,un.PureComponent=w,un.StrictMode=n,un.Suspense=c,un.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,un.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return B.H.useMemoCache(ee)}},un.cache=function(ee){return function(){return ee.apply(null,arguments)}},un.cloneElement=function(ee,X,O){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var R=g({},ee.props),G=ee.key,Y=void 0;if(X!=null)for(te in X.ref!==void 0&&(Y=void 0),X.key!==void 0&&(G=""+X.key),X)!T.call(X,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&X.ref===void 0||(R[te]=X[te]);var te=arguments.length-2;if(te===1)R.children=O;else if(1<te){for(var ae=Array(te),oe=0;oe<te;oe++)ae[oe]=arguments[oe+2];R.children=ae}return C(ee.type,G,void 0,void 0,Y,R)},un.createContext=function(ee){return ee={$$typeof:o,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:s,_context:ee},ee},un.createElement=function(ee,X,O){var R,G={},Y=null;if(X!=null)for(R in X.key!==void 0&&(Y=""+X.key),X)T.call(X,R)&&R!=="key"&&R!=="__self"&&R!=="__source"&&(G[R]=X[R]);var te=arguments.length-2;if(te===1)G.children=O;else if(1<te){for(var ae=Array(te),oe=0;oe<te;oe++)ae[oe]=arguments[oe+2];G.children=ae}if(ee&&ee.defaultProps)for(R in te=ee.defaultProps,te)G[R]===void 0&&(G[R]=te[R]);return C(ee,Y,void 0,void 0,null,G)},un.createRef=function(){return{current:null}},un.forwardRef=function(ee){return{$$typeof:l,render:ee}},un.isValidElement=j,un.lazy=function(ee){return{$$typeof:d,_payload:{_status:-1,_result:ee},_init:q}},un.memo=function(ee,X){return{$$typeof:u,type:ee,compare:X===void 0?null:X}},un.startTransition=function(ee){var X=B.T,O={};B.T=O;try{var R=ee(),G=B.S;G!==null&&G(O,R),typeof R=="object"&&R!==null&&typeof R.then=="function"&&R.then(W,z)}catch(Y){z(Y)}finally{B.T=X}},un.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},un.use=function(ee){return B.H.use(ee)},un.useActionState=function(ee,X,O){return B.H.useActionState(ee,X,O)},un.useCallback=function(ee,X){return B.H.useCallback(ee,X)},un.useContext=function(ee){return B.H.useContext(ee)},un.useDebugValue=function(){},un.useDeferredValue=function(ee,X){return B.H.useDeferredValue(ee,X)},un.useEffect=function(ee,X,O){var R=B.H;if(typeof O=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return R.useEffect(ee,X)},un.useId=function(){return B.H.useId()},un.useImperativeHandle=function(ee,X,O){return B.H.useImperativeHandle(ee,X,O)},un.useInsertionEffect=function(ee,X){return B.H.useInsertionEffect(ee,X)},un.useLayoutEffect=function(ee,X){return B.H.useLayoutEffect(ee,X)},un.useMemo=function(ee,X){return B.H.useMemo(ee,X)},un.useOptimistic=function(ee,X){return B.H.useOptimistic(ee,X)},un.useReducer=function(ee,X,O){return B.H.useReducer(ee,X,O)},un.useRef=function(ee){return B.H.useRef(ee)},un.useState=function(ee){return B.H.useState(ee)},un.useSyncExternalStore=function(ee,X,O){return B.H.useSyncExternalStore(ee,X,O)},un.useTransition=function(){return B.H.useTransition()},un.version="19.1.1",un}var b9;function Ub(){return b9||(b9=1,U3.exports=Khe()),U3.exports}var N=Ub();const st=Bl(N),Whe=zhe({__proto__:null,default:st},[N]);var Q3={exports:{}},uy={},H3={exports:{}},V3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y9;function Xhe(){return y9||(y9=1,function(e){function t(H,q){var z=H.length;H.push(q);e:for(;0<z;){var W=z-1>>>1,ee=H[W];if(0<a(ee,q))H[W]=q,H[z]=ee,z=W;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var q=H[0],z=H.pop();if(z!==q){H[0]=z;e:for(var W=0,ee=H.length,X=ee>>>1;W<X;){var O=2*(W+1)-1,R=H[O],G=O+1,Y=H[G];if(0>a(R,z))G<ee&&0>a(Y,R)?(H[W]=Y,H[G]=z,W=G):(H[W]=R,H[O]=z,W=O);else if(G<ee&&0>a(Y,z))H[W]=Y,H[G]=z,W=G;else break e}}return q}function a(H,q){var z=H.sortIndex-q.sortIndex;return z!==0?z:H.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function F(H){for(var q=r(u);q!==null;){if(q.callback===null)n(u);else if(q.startTime<=H)n(u),q.sortIndex=q.expirationTime,t(c,q);else break;q=r(u)}}function B(H){if(x=!1,F(H),!g)if(r(c)!==null)g=!0,T||(T=!0,k());else{var q=r(u);q!==null&&K(B,q.startTime-H)}}var T=!1,C=-1,S=5,j=-1;function L(){return v?!0:!(e.unstable_now()-j<S)}function P(){if(v=!1,T){var H=e.unstable_now();j=H;var q=!0;try{e:{g=!1,x&&(x=!1,w(C),C=-1),m=!0;var z=h;try{t:{for(F(H),f=r(c);f!==null&&!(f.expirationTime>H&&L());){var W=f.callback;if(typeof W=="function"){f.callback=null,h=f.priorityLevel;var ee=W(f.expirationTime<=H);if(H=e.unstable_now(),typeof ee=="function"){f.callback=ee,F(H),q=!0;break t}f===r(c)&&n(c),F(H)}else n(c);f=r(c)}if(f!==null)q=!0;else{var X=r(u);X!==null&&K(B,X.startTime-H),q=!1}}break e}finally{f=null,h=z,m=!1}q=void 0}}finally{q?k():T=!1}}}var k;if(typeof _=="function")k=function(){_(P)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Q=U.port2;U.port1.onmessage=P,k=function(){Q.postMessage(null)}}else k=function(){y(P,0)};function K(H,q){C=y(function(){H(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(H){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var z=h;h=q;try{return H()}finally{h=z}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var z=h;h=H;try{return q()}finally{h=z}},e.unstable_scheduleCallback=function(H,q,z){var W=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,H){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=z+ee,H={id:d++,callback:q,priorityLevel:H,startTime:z,expirationTime:ee,sortIndex:-1},z>W?(H.sortIndex=z,t(u,H),r(c)===null&&H===r(u)&&(x?(w(C),C=-1):x=!0,K(B,z-W))):(H.sortIndex=ee,t(c,H),g||m||(g=!0,T||(T=!0,k()))),H},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(H){var q=h;return function(){var z=h;h=q;try{return H.apply(this,arguments)}finally{h=z}}}}(V3)),V3}var w9;function Yhe(){return w9||(w9=1,H3.exports=Xhe()),H3.exports}var z3={exports:{}},Lo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E9;function Jhe(){if(E9)return Lo;E9=1;var e=Ub();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Lo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Lo.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Lo.flushSync=function(c){var u=o.T,d=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=u,n.p=d,n.d.f()}},Lo.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},Lo.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Lo.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:m}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Lo.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},Lo.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Lo.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},Lo.requestFormReset=function(c){n.d.r(c)},Lo.unstable_batchedUpdates=function(c,u){return c(u)},Lo.useFormState=function(c,u,d){return o.H.useFormState(c,u,d)},Lo.useFormStatus=function(){return o.H.useHostTransitionStatus()},Lo.version="19.1.1",Lo}var N9;function hJ(){if(N9)return z3.exports;N9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),z3.exports=Jhe(),z3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C9;function Zhe(){if(C9)return uy;C9=1;var e=Yhe(),t=Ub(),r=hJ();function n(A){var p="https://react.dev/errors/"+A;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+A+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var p=A,b=A;if(A.alternate)for(;p.return;)p=p.return;else{A=p;do p=A,(p.flags&4098)!==0&&(b=p.return),A=p.return;while(A)}return p.tag===3?b:null}function o(A){if(A.tag===13){var p=A.memoizedState;if(p===null&&(A=A.alternate,A!==null&&(p=A.memoizedState)),p!==null)return p.dehydrated}return null}function l(A){if(s(A)!==A)throw Error(n(188))}function c(A){var p=A.alternate;if(!p){if(p=s(A),p===null)throw Error(n(188));return p!==A?null:A}for(var b=A,E=p;;){var M=b.return;if(M===null)break;var J=M.alternate;if(J===null){if(E=M.return,E!==null){b=E;continue}break}if(M.child===J.child){for(J=M.child;J;){if(J===b)return l(M),A;if(J===E)return l(M),p;J=J.sibling}throw Error(n(188))}if(b.return!==E.return)b=M,E=J;else{for(var fe=!1,Ee=M.child;Ee;){if(Ee===b){fe=!0,b=M,E=J;break}if(Ee===E){fe=!0,E=M,b=J;break}Ee=Ee.sibling}if(!fe){for(Ee=J.child;Ee;){if(Ee===b){fe=!0,b=J,E=M;break}if(Ee===E){fe=!0,E=J,b=M;break}Ee=Ee.sibling}if(!fe)throw Error(n(189))}}if(b.alternate!==E)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?A:p}function u(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A;for(A=A.child;A!==null;){if(p=u(A),p!==null)return p;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function k(A){return A===null||typeof A!="object"?null:(A=P&&A[P]||A["@@iterator"],typeof A=="function"?A:null)}var U=Symbol.for("react.client.reference");function Q(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===U?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case B:return"Suspense";case T:return"SuspenseList";case j:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case m:return"Portal";case _:return(A.displayName||"Context")+".Provider";case w:return(A._context.displayName||"Context")+".Consumer";case F:var p=A.render;return A=A.displayName,A||(A=p.displayName||p.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case C:return p=A.displayName||null,p!==null?p:Q(A.type)||"Memo";case S:p=A._payload,A=A._init;try{return Q(A(p))}catch{}}return null}var K=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},W=[],ee=-1;function X(A){return{current:A}}function O(A){0>ee||(A.current=W[ee],W[ee]=null,ee--)}function R(A,p){ee++,W[ee]=A.current,A.current=p}var G=X(null),Y=X(null),te=X(null),ae=X(null);function oe(A,p){switch(R(te,p),R(Y,A),R(G,null),p.nodeType){case 9:case 11:A=(A=p.documentElement)&&(A=A.namespaceURI)?$7(A):0;break;default:if(A=p.tagName,p=p.namespaceURI)p=$7(p),A=G7(p,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}O(G),R(G,A)}function ie(){O(G),O(Y),O(te)}function ue(A){A.memoizedState!==null&&R(ae,A);var p=G.current,b=G7(p,A.type);p!==b&&(R(Y,A),R(G,b))}function Ce(A){Y.current===A&&(O(G),O(Y)),ae.current===A&&(O(ae),ay._currentValue=z)}var ne=Object.prototype.hasOwnProperty,Be=e.unstable_scheduleCallback,je=e.unstable_cancelCallback,_e=e.unstable_shouldYield,Ae=e.unstable_requestPaint,ve=e.unstable_now,Pe=e.unstable_getCurrentPriorityLevel,Ue=e.unstable_ImmediatePriority,de=e.unstable_UserBlockingPriority,be=e.unstable_NormalPriority,De=e.unstable_LowPriority,Ve=e.unstable_IdlePriority,We=e.log,Je=e.unstable_setDisableYieldValue,At=null,vt=null;function wt(A){if(typeof We=="function"&&Je(A),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(At,A)}catch{}}var Tt=Math.clz32?Math.clz32:_r,Lt=Math.log,Et=Math.LN2;function _r(A){return A>>>=0,A===0?32:31-(Lt(A)/Et|0)|0}var qt=256,tn=4194304;function Br(A){var p=A&42;if(p!==0)return p;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Kr(A,p,b){var E=A.pendingLanes;if(E===0)return 0;var M=0,J=A.suspendedLanes,fe=A.pingedLanes;A=A.warmLanes;var Ee=E&134217727;return Ee!==0?(E=Ee&~J,E!==0?M=Br(E):(fe&=Ee,fe!==0?M=Br(fe):b||(b=Ee&~A,b!==0&&(M=Br(b))))):(Ee=E&~J,Ee!==0?M=Br(Ee):fe!==0?M=Br(fe):b||(b=E&~A,b!==0&&(M=Br(b)))),M===0?0:p!==0&&p!==M&&(p&J)===0&&(J=M&-M,b=p&-p,J>=b||J===32&&(b&4194048)!==0)?p:M}function Fn(A,p){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&p)===0}function Lr(A,p){switch(A){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ps(){var A=qt;return qt<<=1,(qt&4194048)===0&&(qt=256),A}function pn(){var A=tn;return tn<<=1,(tn&62914560)===0&&(tn=4194304),A}function la(A){for(var p=[],b=0;31>b;b++)p.push(A);return p}function Ta(A,p){A.pendingLanes|=p,p!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function an(A,p,b,E,M,J){var fe=A.pendingLanes;A.pendingLanes=b,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=b,A.entangledLanes&=b,A.errorRecoveryDisabledLanes&=b,A.shellSuspendCounter=0;var Ee=A.entanglements,Le=A.expirationTimes,ut=A.hiddenUpdates;for(b=fe&~b;0<b;){var jt=31-Tt(b),Pt=1<<jt;Ee[jt]=0,Le[jt]=-1;var ht=ut[jt];if(ht!==null)for(ut[jt]=null,jt=0;jt<ht.length;jt++){var pt=ht[jt];pt!==null&&(pt.lane&=-536870913)}b&=~Pt}E!==0&&vr(A,E,0),J!==0&&M===0&&A.tag!==0&&(A.suspendedLanes|=J&~(fe&~p))}function vr(A,p,b){A.pendingLanes|=p,A.suspendedLanes&=~p;var E=31-Tt(p);A.entangledLanes|=p,A.entanglements[E]=A.entanglements[E]|1073741824|b&4194090}function rt(A,p){var b=A.entangledLanes|=p;for(A=A.entanglements;b;){var E=31-Tt(b),M=1<<E;M&p|A[E]&p&&(A[E]|=p),b&=~M}}function gt(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Ze(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function bt(){var A=q.p;return A!==0?A:(A=window.event,A===void 0?32:d9(A.type))}function Nt(A,p){var b=q.p;try{return q.p=A,p()}finally{q.p=b}}var yt=Math.random().toString(36).slice(2),rr="__reactFiber$"+yt,br="__reactProps$"+yt,ur="__reactContainer$"+yt,Or="__reactEvents$"+yt,Yr="__reactListeners$"+yt,pe="__reactHandles$"+yt,Fe="__reactResources$"+yt,Se="__reactMarker$"+yt;function ke(A){delete A[rr],delete A[br],delete A[Or],delete A[Yr],delete A[pe]}function Te(A){var p=A[rr];if(p)return p;for(var b=A.parentNode;b;){if(p=b[ur]||b[rr]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(A=X7(A);A!==null;){if(b=A[rr])return b;A=X7(A)}return p}A=b,b=A.parentNode}return null}function Oe(A){if(A=A[rr]||A[ur]){var p=A.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return A}return null}function et(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A.stateNode;throw Error(n(33))}function ft(A){var p=A[Fe];return p||(p=A[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function qe(A){A[Se]=!0}var at=new Set,lt={};function Dt(A,p){$t(A,p),$t(A+"Capture",p)}function $t(A,p){for(lt[A]=p,A=0;A<p.length;A++)at.add(p[A])}var Zt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zt={},Kt={};function Tr(A){return ne.call(Kt,A)?!0:ne.call(zt,A)?!1:Zt.test(A)?Kt[A]=!0:(zt[A]=!0,!1)}function on(A,p,b){if(Tr(p))if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":A.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){A.removeAttribute(p);return}}A.setAttribute(p,""+b)}}function ln(A,p,b){if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttribute(p,""+b)}}function An(A,p,b,E){if(E===null)A.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(b);return}A.setAttributeNS(p,b,""+E)}}var gs,So;function xs(A){if(gs===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);gs=p&&p[1]||"",So=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gs+A+So}var ni=!1;function Ls(A,p){if(!A||ni)return"";ni=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var Pt=function(){throw Error()};if(Object.defineProperty(Pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pt,[])}catch(pt){var ht=pt}Reflect.construct(A,[],Pt)}else{try{Pt.call()}catch(pt){ht=pt}A.call(Pt.prototype)}}else{try{throw Error()}catch(pt){ht=pt}(Pt=A())&&typeof Pt.catch=="function"&&Pt.catch(function(){})}}catch(pt){if(pt&&ht&&typeof pt.stack=="string")return[pt.stack,ht.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var J=E.DetermineComponentFrameRoot(),fe=J[0],Ee=J[1];if(fe&&Ee){var Le=fe.split(`
`),ut=Ee.split(`
`);for(M=E=0;E<Le.length&&!Le[E].includes("DetermineComponentFrameRoot");)E++;for(;M<ut.length&&!ut[M].includes("DetermineComponentFrameRoot");)M++;if(E===Le.length||M===ut.length)for(E=Le.length-1,M=ut.length-1;1<=E&&0<=M&&Le[E]!==ut[M];)M--;for(;1<=E&&0<=M;E--,M--)if(Le[E]!==ut[M]){if(E!==1||M!==1)do if(E--,M--,0>M||Le[E]!==ut[M]){var jt=`
`+Le[E].replace(" at new "," at ");return A.displayName&&jt.includes("<anonymous>")&&(jt=jt.replace("<anonymous>",A.displayName)),jt}while(1<=E&&0<=M);break}}}finally{ni=!1,Error.prepareStackTrace=b}return(b=A?A.displayName||A.name:"")?xs(b):""}function wi(A){switch(A.tag){case 26:case 27:case 5:return xs(A.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 15:return Ls(A.type,!1);case 11:return Ls(A.type.render,!1);case 1:return Ls(A.type,!0);case 31:return xs("Activity");default:return""}}function xa(A){try{var p="";do p+=wi(A),A=A.return;while(A);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function ai(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function nf(A){var p=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Jh(A){var p=nf(A)?"checked":"value",b=Object.getOwnPropertyDescriptor(A.constructor.prototype,p),E=""+A[p];if(!A.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var M=b.get,J=b.set;return Object.defineProperty(A,p,{configurable:!0,get:function(){return M.call(this)},set:function(fe){E=""+fe,J.call(this,fe)}}),Object.defineProperty(A,p,{enumerable:b.enumerable}),{getValue:function(){return E},setValue:function(fe){E=""+fe},stopTracking:function(){A._valueTracker=null,delete A[p]}}}}function su(A){A._valueTracker||(A._valueTracker=Jh(A))}function vA(A){if(!A)return!1;var p=A._valueTracker;if(!p)return!0;var b=p.getValue(),E="";return A&&(E=nf(A)?A.checked?"true":"false":A.value),A=E,A!==b?(p.setValue(A),!0):!1}function Ei(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var af=/[\n"\\]/g;function On(A){return A.replace(af,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Ni(A,p,b,E,M,J,fe,Ee){A.name="",fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?A.type=fe:A.removeAttribute("type"),p!=null?fe==="number"?(p===0&&A.value===""||A.value!=p)&&(A.value=""+ai(p)):A.value!==""+ai(p)&&(A.value=""+ai(p)):fe!=="submit"&&fe!=="reset"||A.removeAttribute("value"),p!=null?ou(A,fe,ai(p)):b!=null?ou(A,fe,ai(b)):E!=null&&A.removeAttribute("value"),M==null&&J!=null&&(A.defaultChecked=!!J),M!=null&&(A.checked=M&&typeof M!="function"&&typeof M!="symbol"),Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"&&typeof Ee!="boolean"?A.name=""+ai(Ee):A.removeAttribute("name")}function iu(A,p,b,E,M,J,fe,Ee){if(J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(A.type=J),p!=null||b!=null){if(!(J!=="submit"&&J!=="reset"||p!=null))return;b=b!=null?""+ai(b):"",p=p!=null?""+ai(p):b,Ee||p===A.value||(A.value=p),A.defaultValue=p}E=E??M,E=typeof E!="function"&&typeof E!="symbol"&&!!E,A.checked=Ee?A.checked:!!E,A.defaultChecked=!!E,fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"&&(A.name=fe)}function ou(A,p,b){p==="number"&&Ei(A.ownerDocument)===A||A.defaultValue===""+b||(A.defaultValue=""+b)}function Fl(A,p,b,E){if(A=A.options,p){p={};for(var M=0;M<b.length;M++)p["$"+b[M]]=!0;for(b=0;b<A.length;b++)M=p.hasOwnProperty("$"+A[b].value),A[b].selected!==M&&(A[b].selected=M),M&&E&&(A[b].defaultSelected=!0)}else{for(b=""+ai(b),p=null,M=0;M<A.length;M++){if(A[M].value===b){A[M].selected=!0,E&&(A[M].defaultSelected=!0);return}p!==null||A[M].disabled||(p=A[M])}p!==null&&(p.selected=!0)}}function Vn(A,p,b){if(p!=null&&(p=""+ai(p),p!==A.value&&(A.value=p),b==null)){A.defaultValue!==p&&(A.defaultValue=p);return}A.defaultValue=b!=null?""+ai(b):""}function lu(A,p,b,E){if(p==null){if(E!=null){if(b!=null)throw Error(n(92));if(K(E)){if(1<E.length)throw Error(n(93));E=E[0]}b=E}b==null&&(b=""),p=b}b=ai(p),A.defaultValue=b,E=A.textContent,E===b&&E!==""&&E!==null&&(A.value=E)}function ko(A,p){if(p){var b=A.firstChild;if(b&&b===A.lastChild&&b.nodeType===3){b.nodeValue=p;return}}A.textContent=p}var hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zh(A,p,b){var E=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?A.setProperty(p,""):p==="float"?A.cssFloat="":A[p]="":E?A.setProperty(p,b):typeof b!="number"||b===0||hc.has(p)?p==="float"?A.cssFloat=b:A[p]=(""+b).trim():A[p]=b+"px"}function bA(A,p,b){if(p!=null&&typeof p!="object")throw Error(n(62));if(A=A.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?A.setProperty(E,""):E==="float"?A.cssFloat="":A[E]="");for(var M in p)E=p[M],p.hasOwnProperty(M)&&b[M]!==E&&Zh(A,M,E)}else for(var J in p)p.hasOwnProperty(J)&&Zh(A,J,p[J])}function yA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pc(A){return sf.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Ol=null;function ca(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var gc=null,Dl=null;function Dr(A){var p=Oe(A);if(p&&(A=p.stateNode)){var b=A[br]||null;e:switch(A=p.stateNode,p.type){case"input":if(Ni(A,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=A;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+On(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var E=b[p];if(E!==A&&E.form===A.form){var M=E[br]||null;if(!M)throw Error(n(90));Ni(E,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(p=0;p<b.length;p++)E=b[p],E.form===A.form&&vA(E)}break e;case"textarea":Vn(A,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Fl(A,!!b.multiple,p,!1)}}}var Pl=!1;function e0(A,p,b){if(Pl)return A(p,b);Pl=!0;try{var E=A(p);return E}finally{if(Pl=!1,(gc!==null||Dl!==null)&&(gN(),gc&&(p=gc,A=Dl,Dl=gc=null,Dr(p),A)))for(p=0;p<A.length;p++)Dr(A[p])}}function Li(A,p){var b=A.stateNode;if(b===null)return null;var E=b[br]||null;if(E===null)return null;b=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(A=A.type,E=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!E;break e;default:A=!1}if(A)return null;if(b&&typeof b!="function")throw Error(n(231,p,typeof b));return b}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oo=!1;if(jo)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){oo=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{oo=!1}var Bo=null,cu=null,xc=null;function wA(){if(xc)return xc;var A,p=cu,b=p.length,E,M="value"in Bo?Bo.value:Bo.textContent,J=M.length;for(A=0;A<b&&p[A]===M[A];A++);var fe=b-A;for(E=1;E<=fe&&p[b-E]===M[J-E];E++);return xc=M.slice(A,1<E?1-E:void 0)}function To(A){var p=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&p===13&&(A=13)):A=p,A===10&&(A=13),32<=A||A===13?A:0}function Mi(){return!0}function Ll(){return!1}function vs(A){function p(b,E,M,J,fe){this._reactName=b,this._targetInst=M,this.type=E,this.nativeEvent=J,this.target=fe,this.currentTarget=null;for(var Ee in A)A.hasOwnProperty(Ee)&&(b=A[Ee],this[Ee]=b?b(J):J[Ee]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?Mi:Ll,this.isPropagationStopped=Ll,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),p}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uu=vs(yn),Ml=d({},yn,{view:0,detail:0}),EA=vs(Ml),ad,sd,Al,Ui=d({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hu,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==Al&&(Al&&A.type==="mousemove"?(ad=A.screenX-Al.screenX,sd=A.screenY-Al.screenY):sd=ad=0,Al=A),ad)},movementY:function(A){return"movementY"in A?A.movementY:sd}}),bs=vs(Ui),t0=d({},Ui,{dataTransfer:0}),du=vs(t0),Ci=d({},Ml,{relatedTarget:0}),fu=vs(Ci),vc=d({},yn,{animationName:0,elapsedTime:0,pseudoElement:0}),of=vs(vc),id=d({},yn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),lf=vs(id),NA=d({},yn,{data:0}),od=vs(NA),Au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ld={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cd(A){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(A):(A=cf[A])?!!p[A]:!1}function hu(){return cd}var r0=d({},Ml,{key:function(A){if(A.key){var p=Au[A.key]||A.key;if(p!=="Unidentified")return p}return A.type==="keypress"?(A=To(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?ld[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hu,charCode:function(A){return A.type==="keypress"?To(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?To(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),bc=vs(r0),mu=d({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ud=vs(mu),Qi=d({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hu}),uf=vs(Qi),Z=d({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),me=vs(Z),Re=d({},Ui,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=vs(Re),Ke=d({},yn,{newState:0,oldState:0}),Ct=vs(Ke),Qt=[9,13,27,32],er=jo&&"CompositionEvent"in window,D=null;jo&&"documentMode"in document&&(D=document.documentMode);var se=jo&&"TextEvent"in window&&!D,ce=jo&&(!er||D&&8<D&&11>=D),we=" ",Ge=!1;function ct(A,p){switch(A){case"keyup":return Qt.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vt(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Pr=!1;function wn(A,p){switch(A){case"compositionend":return Vt(p);case"keypress":return p.which!==32?null:(Ge=!0,we);case"textInput":return A=p.data,A===we&&Ge?null:A;default:return null}}function Jr(A,p){if(Pr)return A==="compositionend"||!er&&ct(A,p)?(A=wA(),xc=cu=Bo=null,Pr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return ce&&p.locale!=="ko"?null:p.data;default:return null}}var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ta(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p==="input"?!!zn[A.type]:p==="textarea"}function Ul(A,p,b,E){gc?Dl?Dl.push(E):Dl=[E]:gc=E,p=EN(p,"onChange"),0<p.length&&(b=new uu("onChange","change",null,b,E),A.push({event:b,listeners:p}))}var ns=null,Io=null;function pu(A){U7(A,0)}function df(A){var p=et(A);if(vA(p))return A}function n0(A,p){if(A==="change")return p}var CA=!1;if(jo){var Ms;if(jo){var ff="oninput"in document;if(!ff){var _A=document.createElement("div");_A.setAttribute("oninput","return;"),ff=typeof _A.oninput=="function"}Ms=ff}else Ms=!1;CA=Ms&&(!document.documentMode||9<document.documentMode)}function SA(){ns&&(ns.detachEvent("onpropertychange",a0),Io=ns=null)}function a0(A){if(A.propertyName==="value"&&df(Io)){var p=[];Ul(p,Io,A,ca(A)),e0(pu,p)}}function Fo(A,p,b){A==="focusin"?(SA(),ns=p,Io=b,ns.attachEvent("onpropertychange",a0)):A==="focusout"&&SA()}function C1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return df(Io)}function ip(A,p){if(A==="click")return df(p)}function sx(A,p){if(A==="input"||A==="change")return df(p)}function Ql(A,p){return A===p&&(A!==0||1/A===1/p)||A!==A&&p!==p}var si=typeof Object.is=="function"?Object.is:Ql;function Af(A,p){if(si(A,p))return!0;if(typeof A!="object"||A===null||typeof p!="object"||p===null)return!1;var b=Object.keys(A),E=Object.keys(p);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var M=b[E];if(!ne.call(p,M)||!si(A[M],p[M]))return!1}return!0}function op(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function dd(A,p){var b=op(A);A=0;for(var E;b;){if(b.nodeType===3){if(E=A+b.textContent.length,A<=p&&E>=p)return{node:b,offset:p-A};A=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=op(b)}}function hf(A,p){return A&&p?A===p?!0:A&&A.nodeType===3?!1:p&&p.nodeType===3?hf(A,p.parentNode):"contains"in A?A.contains(p):A.compareDocumentPosition?!!(A.compareDocumentPosition(p)&16):!1:!1}function lo(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var p=Ei(A.document);p instanceof A.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)A=p.contentWindow;else break;p=Ei(A.document)}return p}function _i(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p&&(p==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||p==="textarea"||A.contentEditable==="true")}var mf=jo&&"documentMode"in document&&11>=document.documentMode,Oo=null,yc=null,gu=null,wc=!1;function Ka(A,p,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;wc||Oo==null||Oo!==Ei(E)||(E=Oo,"selectionStart"in E&&_i(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),gu&&Af(gu,E)||(gu=E,E=EN(yc,"onSelect"),0<E.length&&(p=new uu("onSelect","select",null,p,b),A.push({event:p,listeners:E}),p.target=Oo)))}function Ec(A,p){var b={};return b[A.toLowerCase()]=p.toLowerCase(),b["Webkit"+A]="webkit"+p,b["Moz"+A]="moz"+p,b}var ys={animationend:Ec("Animation","AnimationEnd"),animationiteration:Ec("Animation","AnimationIteration"),animationstart:Ec("Animation","AnimationStart"),transitionrun:Ec("Transition","TransitionRun"),transitionstart:Ec("Transition","TransitionStart"),transitioncancel:Ec("Transition","TransitionCancel"),transitionend:Ec("Transition","TransitionEnd")},Do={},kA={};jo&&(kA=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function xu(A){if(Do[A])return Do[A];if(!ys[A])return A;var p=ys[A],b;for(b in p)if(p.hasOwnProperty(b)&&b in kA)return Do[A]=p[b];return A}var s0=xu("animationend"),pf=xu("animationiteration"),gf=xu("animationstart"),xf=xu("transitionrun"),jA=xu("transitionstart"),i0=xu("transitioncancel"),vf=xu("transitionend"),fd=new Map,BA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");BA.push("scrollEnd");function Wa(A,p){fd.set(A,p),Dt(p,[A])}var hl=new WeakMap;function gn(A,p){if(typeof A=="object"&&A!==null){var b=hl.get(A);return b!==void 0?b:(p={value:A,source:p,stack:xa(p)},hl.set(A,p),p)}return{value:A,source:p,stack:xa(p)}}var xn=[],va=0,as=0;function Hl(){for(var A=va,p=as=va=0;p<A;){var b=xn[p];xn[p++]=null;var E=xn[p];xn[p++]=null;var M=xn[p];xn[p++]=null;var J=xn[p];if(xn[p++]=null,E!==null&&M!==null){var fe=E.pending;fe===null?M.next=M:(M.next=fe.next,fe.next=M),E.pending=M}J!==0&&ix(b,M,J)}}function bf(A,p,b,E){xn[va++]=A,xn[va++]=p,xn[va++]=b,xn[va++]=E,as|=E,A.lanes|=E,A=A.alternate,A!==null&&(A.lanes|=E)}function yf(A,p,b,E){return bf(A,p,b,E),TA(A)}function Ad(A,p){return bf(A,null,null,p),TA(A)}function ix(A,p,b){A.lanes|=b;var E=A.alternate;E!==null&&(E.lanes|=b);for(var M=!1,J=A.return;J!==null;)J.childLanes|=b,E=J.alternate,E!==null&&(E.childLanes|=b),J.tag===22&&(A=J.stateNode,A===null||A._visibility&1||(M=!0)),A=J,J=J.return;return A.tag===3?(J=A.stateNode,M&&p!==null&&(M=31-Tt(b),A=J.hiddenUpdates,E=A[M],E===null?A[M]=[p]:E.push(p),p.lane=b|536870912),J):null}function TA(A){if(50<X1)throw X1=0,l3=null,Error(n(185));for(var p=A.return;p!==null;)A=p,p=A.return;return A.tag===3?A.stateNode:null}var ii={};function Vl(A,p,b,E){this.tag=A,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(A,p,b,E){return new Vl(A,p,b,E)}function o0(A){return A=A.prototype,!(!A||!A.isReactComponent)}function vu(A,p){var b=A.alternate;return b===null?(b=Hi(A.tag,p,A.key,A.mode),b.elementType=A.elementType,b.type=A.type,b.stateNode=A.stateNode,b.alternate=A,A.alternate=b):(b.pendingProps=p,b.type=A.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=A.flags&65011712,b.childLanes=A.childLanes,b.lanes=A.lanes,b.child=A.child,b.memoizedProps=A.memoizedProps,b.memoizedState=A.memoizedState,b.updateQueue=A.updateQueue,p=A.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=A.sibling,b.index=A.index,b.ref=A.ref,b.refCleanup=A.refCleanup,b}function lp(A,p){A.flags&=65011714;var b=A.alternate;return b===null?(A.childLanes=0,A.lanes=p,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=b.childLanes,A.lanes=b.lanes,A.child=b.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=b.memoizedProps,A.memoizedState=b.memoizedState,A.updateQueue=b.updateQueue,A.type=b.type,p=b.dependencies,A.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),A}function IA(A,p,b,E,M,J){var fe=0;if(E=A,typeof A=="function")o0(A)&&(fe=1);else if(typeof A=="string")fe=jhe(A,b,G.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case j:return A=Hi(31,b,p,M),A.elementType=j,A.lanes=J,A;case g:return hd(b.children,M,J,p);case x:fe=8,M|=24;break;case v:return A=Hi(12,b,p,M|2),A.elementType=v,A.lanes=J,A;case B:return A=Hi(13,b,p,M),A.elementType=B,A.lanes=J,A;case T:return A=Hi(19,b,p,M),A.elementType=T,A.lanes=J,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case _:fe=10;break e;case w:fe=9;break e;case F:fe=11;break e;case C:fe=14;break e;case S:fe=16,E=null;break e}fe=29,b=Error(n(130,A===null?"null":typeof A,"")),E=null}return p=Hi(fe,b,p,M),p.elementType=A,p.type=E,p.lanes=J,p}function hd(A,p,b,E){return A=Hi(7,A,E,p),A.lanes=b,A}function ox(A,p,b){return A=Hi(6,A,null,p),A.lanes=b,A}function cp(A,p,b){return p=Hi(4,A.children!==null?A.children:[],A.key,p),p.lanes=b,p.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},p}var wf=[],md=0,l0=null,lx=0,zl=[],ml=0,FA=null,pd=1,gd="";function OA(A,p){wf[md++]=lx,wf[md++]=l0,l0=A,lx=p}function QE(A,p,b){zl[ml++]=pd,zl[ml++]=gd,zl[ml++]=FA,FA=A;var E=pd;A=gd;var M=32-Tt(E)-1;E&=~(1<<M),b+=1;var J=32-Tt(p)+M;if(30<J){var fe=M-M%5;J=(E&(1<<fe)-1).toString(32),E>>=fe,M-=fe,pd=1<<32-Tt(p)+M|b<<M|E,gd=J+A}else pd=1<<J|b<<M|E,gd=A}function up(A){A.return!==null&&(OA(A,1),QE(A,1,0))}function dp(A){for(;A===l0;)l0=wf[--md],wf[md]=null,lx=wf[--md],wf[md]=null;for(;A===FA;)FA=zl[--ml],zl[ml]=null,gd=zl[--ml],zl[ml]=null,pd=zl[--ml],zl[ml]=null}var Us=null,Xa=null,Un=!1,Ef=null,bu=!1,_1=Error(n(519));function DA(A){var p=Error(n(418,""));throw c0(gn(p,A)),_1}function HE(A){var p=A.stateNode,b=A.type,E=A.memoizedProps;switch(p[rr]=A,p[br]=E,b){case"dialog":Sn("cancel",p),Sn("close",p);break;case"iframe":case"object":case"embed":Sn("load",p);break;case"video":case"audio":for(b=0;b<J1.length;b++)Sn(J1[b],p);break;case"source":Sn("error",p);break;case"img":case"image":case"link":Sn("error",p),Sn("load",p);break;case"details":Sn("toggle",p);break;case"input":Sn("invalid",p),iu(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),su(p);break;case"select":Sn("invalid",p);break;case"textarea":Sn("invalid",p),lu(p,E.value,E.defaultValue,E.children),su(p)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||E.suppressHydrationWarning===!0||z7(p.textContent,b)?(E.popover!=null&&(Sn("beforetoggle",p),Sn("toggle",p)),E.onScroll!=null&&Sn("scroll",p),E.onScrollEnd!=null&&Sn("scrollend",p),E.onClick!=null&&(p.onclick=NN),p=!0):p=!1,p||DA(A)}function xd(A){for(Us=A.return;Us;)switch(Us.tag){case 5:case 13:bu=!1;return;case 27:case 3:bu=!0;return;default:Us=Us.return}}function co(A){if(A!==Us)return!1;if(!Un)return xd(A),Un=!0,!1;var p=A.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=A.type,b=!(b!=="form"&&b!=="button")||N3(A.type,A.memoizedProps)),b=!b),b&&Xa&&DA(A),xd(A),p===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,p=0;A;){if(A.nodeType===8)if(b=A.data,b==="/$"){if(p===0){Xa=_d(A.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;A=A.nextSibling}Xa=null}}else p===27?(p=Xa,_0(A.type)?(A=k3,k3=null,Xa=A):Xa=p):Xa=Us?_d(A.stateNode.nextSibling):null;return!0}function pl(){Xa=Us=null,Un=!1}function VE(){var A=Ef;return A!==null&&(ql===null?ql=A:ql.push.apply(ql,A),Ef=null),A}function c0(A){Ef===null?Ef=[A]:Ef.push(A)}var yu=X(null),oi=null,vd=null;function Nf(A,p,b){R(yu,p._currentValue),p._currentValue=b}function wu(A){A._currentValue=yu.current,O(yu)}function cx(A,p,b){for(;A!==null;){var E=A.alternate;if((A.childLanes&p)!==p?(A.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),A===b)break;A=A.return}}function ux(A,p,b,E){var M=A.child;for(M!==null&&(M.return=A);M!==null;){var J=M.dependencies;if(J!==null){var fe=M.child;J=J.firstContext;e:for(;J!==null;){var Ee=J;J=M;for(var Le=0;Le<p.length;Le++)if(Ee.context===p[Le]){J.lanes|=b,Ee=J.alternate,Ee!==null&&(Ee.lanes|=b),cx(J.return,b,A),E||(fe=null);break e}J=Ee.next}}else if(M.tag===18){if(fe=M.return,fe===null)throw Error(n(341));fe.lanes|=b,J=fe.alternate,J!==null&&(J.lanes|=b),cx(fe,b,A),fe=null}else fe=M.child;if(fe!==null)fe.return=M;else for(fe=M;fe!==null;){if(fe===A){fe=null;break}if(M=fe.sibling,M!==null){M.return=fe.return,fe=M;break}fe=fe.return}M=fe}}function u0(A,p,b,E){A=null;for(var M=p,J=!1;M!==null;){if(!J){if((M.flags&524288)!==0)J=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var fe=M.alternate;if(fe===null)throw Error(n(387));if(fe=fe.memoizedProps,fe!==null){var Ee=M.type;si(M.pendingProps.value,fe.value)||(A!==null?A.push(Ee):A=[Ee])}}else if(M===ae.current){if(fe=M.alternate,fe===null)throw Error(n(387));fe.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(A!==null?A.push(ay):A=[ay])}M=M.return}A!==null&&ux(p,A,b,E),p.flags|=262144}function dx(A){for(A=A.firstContext;A!==null;){if(!si(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Eu(A){oi=A,vd=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Qs(A){return fx(oi,A)}function Cf(A,p){return oi===null&&Eu(A),fx(A,p)}function fx(A,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},vd===null){if(A===null)throw Error(n(308));vd=p,A.dependencies={lanes:0,firstContext:p},A.flags|=524288}else vd=vd.next=p;return b}var Fj=typeof AbortController<"u"?AbortController:function(){var A=[],p=this.signal={aborted:!1,addEventListener:function(b,E){A.push(E)}};this.abort=function(){p.aborted=!0,A.forEach(function(b){return b()})}},zE=e.unstable_scheduleCallback,Oj=e.unstable_NormalPriority,Hs={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function S1(){return{controller:new Fj,data:new Map,refCount:0}}function fp(A){A.refCount--,A.refCount===0&&zE(Oj,function(){A.controller.abort()})}var Ap=null,k1=0,PA=0,bd=null;function Dj(A,p){if(Ap===null){var b=Ap=[];k1=0,PA=m3(),bd={status:"pending",value:void 0,then:function(E){b.push(E)}}}return k1++,p.then($E,$E),p}function $E(){if(--k1===0&&Ap!==null){bd!==null&&(bd.status="fulfilled");var A=Ap;Ap=null,PA=0,bd=null;for(var p=0;p<A.length;p++)(0,A[p])()}}function GE(A,p){var b=[],E={status:"pending",value:null,reason:null,then:function(M){b.push(M)}};return A.then(function(){E.status="fulfilled",E.value=p;for(var M=0;M<b.length;M++)(0,b[M])(p)},function(M){for(E.status="rejected",E.reason=M,M=0;M<b.length;M++)(0,b[M])(void 0)}),E}var I=H.S;H.S=function(A,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Dj(A,p),I!==null&&I(A,p)};var V=X(null);function re(){var A=V.current;return A!==null?A:Fa.pooledCache}function le(A,p){p===null?R(V,V.current):R(V,p.pool)}function he(){var A=re();return A===null?null:{parent:Hs._currentValue,pool:A}}var ge=Error(n(460)),xe=Error(n(474)),ye=Error(n(542)),Ne={then:function(){}};function Ie(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Qe(){}function ot(A,p,b){switch(b=A[b],b===void 0?A.push(p):b!==p&&(p.then(Qe,Qe),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Ft(A),A;default:if(typeof p.status=="string")p.then(Qe,Qe);else{if(A=Fa,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=p,A.status="pending",A.then(function(E){if(p.status==="pending"){var M=p;M.status="fulfilled",M.value=E}},function(E){if(p.status==="pending"){var M=p;M.status="rejected",M.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Ft(A),A}throw nt=p,ge}}var nt=null;function Xe(){if(nt===null)throw Error(n(459));var A=nt;return nt=null,A}function Ft(A){if(A===ge||A===ye)throw Error(n(483))}var xt=!1;function He(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $e(A,p){A=A.updateQueue,p.updateQueue===A&&(p.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function kt(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Ot(A,p,b){var E=A.updateQueue;if(E===null)return null;if(E=E.shared,(da&2)!==0){var M=E.pending;return M===null?p.next=p:(p.next=M.next,M.next=p),E.pending=p,p=TA(A),ix(A,null,b),p}return bf(A,E,p,b),TA(A)}function Bt(A,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var E=p.lanes;E&=A.pendingLanes,b|=E,p.lanes=b,rt(A,b)}}function sr(A,p){var b=A.updateQueue,E=A.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var M=null,J=null;if(b=b.firstBaseUpdate,b!==null){do{var fe={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};J===null?M=J=fe:J=J.next=fe,b=b.next}while(b!==null);J===null?M=J=p:J=J.next=p}else M=J=p;b={baseState:E.baseState,firstBaseUpdate:M,lastBaseUpdate:J,shared:E.shared,callbacks:E.callbacks},A.updateQueue=b;return}A=b.lastBaseUpdate,A===null?b.firstBaseUpdate=p:A.next=p,b.lastBaseUpdate=p}var Jt=!1;function wr(){if(Jt){var A=bd;if(A!==null)throw A}}function tr(A,p,b,E){Jt=!1;var M=A.updateQueue;xt=!1;var J=M.firstBaseUpdate,fe=M.lastBaseUpdate,Ee=M.shared.pending;if(Ee!==null){M.shared.pending=null;var Le=Ee,ut=Le.next;Le.next=null,fe===null?J=ut:fe.next=ut,fe=Le;var jt=A.alternate;jt!==null&&(jt=jt.updateQueue,Ee=jt.lastBaseUpdate,Ee!==fe&&(Ee===null?jt.firstBaseUpdate=ut:Ee.next=ut,jt.lastBaseUpdate=Le))}if(J!==null){var Pt=M.baseState;fe=0,jt=ut=Le=null,Ee=J;do{var ht=Ee.lane&-536870913,pt=ht!==Ee.lane;if(pt?(Ln&ht)===ht:(E&ht)===ht){ht!==0&&ht===PA&&(Jt=!0),jt!==null&&(jt=jt.next={lane:0,tag:Ee.tag,payload:Ee.payload,callback:null,next:null});e:{var Wr=A,Rr=Ee;ht=p;var ya=b;switch(Rr.tag){case 1:if(Wr=Rr.payload,typeof Wr=="function"){Pt=Wr.call(ya,Pt,ht);break e}Pt=Wr;break e;case 3:Wr.flags=Wr.flags&-65537|128;case 0:if(Wr=Rr.payload,ht=typeof Wr=="function"?Wr.call(ya,Pt,ht):Wr,ht==null)break e;Pt=d({},Pt,ht);break e;case 2:xt=!0}}ht=Ee.callback,ht!==null&&(A.flags|=64,pt&&(A.flags|=8192),pt=M.callbacks,pt===null?M.callbacks=[ht]:pt.push(ht))}else pt={lane:ht,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},jt===null?(ut=jt=pt,Le=Pt):jt=jt.next=pt,fe|=ht;if(Ee=Ee.next,Ee===null){if(Ee=M.shared.pending,Ee===null)break;pt=Ee,Ee=pt.next,pt.next=null,M.lastBaseUpdate=pt,M.shared.pending=null}}while(!0);jt===null&&(Le=Pt),M.baseState=Le,M.firstBaseUpdate=ut,M.lastBaseUpdate=jt,J===null&&(M.shared.lanes=0),w0|=fe,A.lanes=fe,A.memoizedState=Pt}}function Pn(A,p){if(typeof A!="function")throw Error(n(191,A));A.call(p)}function $n(A,p){var b=A.callbacks;if(b!==null)for(A.callbacks=null,A=0;A<b.length;A++)Pn(b[A],p)}var hn=X(null),cn=X(0);function ra(A,p){A=GA,R(cn,A),R(hn,p),GA=A|p.baseLanes}function Gn(){R(cn,GA),R(hn,hn.current)}function Zr(){GA=cn.current,O(hn),O(cn)}var ua=0,Ir=null,Hr=null,Dn=null,Rn=!1,li=!1,Vs=!1,ss=0,is=0,ws=null,$l=0;function qn(){throw Error(n(321))}function Es(A,p){if(p===null)return!1;for(var b=0;b<p.length&&b<A.length;b++)if(!si(A[b],p[b]))return!1;return!0}function Nc(A,p,b,E,M,J){return ua=J,Ir=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,H.H=A===null||A.memoizedState===null?NU:CU,Vs=!1,J=b(E,M),Vs=!1,li&&(J=RA(p,b,E,M)),_f(A),J}function _f(A){H.H=aN;var p=Hr!==null&&Hr.next!==null;if(ua=0,Dn=Hr=Ir=null,Rn=!1,is=0,ws=null,p)throw Error(n(300));A===null||Vi||(A=A.dependencies,A!==null&&dx(A)&&(Vi=!0))}function RA(A,p,b,E){Ir=A;var M=0;do{if(li&&(ws=null),is=0,li=!1,25<=M)throw Error(n(301));if(M+=1,Dn=Hr=null,A.updateQueue!=null){var J=A.updateQueue;J.lastEffect=null,J.events=null,J.stores=null,J.memoCache!=null&&(J.memoCache.index=0)}H.H=UAe,J=p(b,E)}while(li);return J}function Sf(){var A=H.H,p=A.useState()[0];return p=typeof p.then=="function"?kf(p):p,A=A.useState()[0],(Hr!==null?Hr.memoizedState:null)!==A&&(Ir.flags|=1024),p}function Ia(){var A=ss!==0;return ss=0,A}function hp(A,p,b){p.updateQueue=A.updateQueue,p.flags&=-2053,A.lanes&=~b}function Ax(A){if(Rn){for(A=A.memoizedState;A!==null;){var p=A.queue;p!==null&&(p.pending=null),A=A.next}Rn=!1}ua=0,Dn=Hr=Ir=null,li=!1,is=ss=0,ws=null}function uo(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Ir.memoizedState=Dn=A:Dn=Dn.next=A,Dn}function Ma(){if(Hr===null){var A=Ir.alternate;A=A!==null?A.memoizedState:null}else A=Hr.next;var p=Dn===null?Ir.memoizedState:Dn.next;if(p!==null)Dn=p,Hr=A;else{if(A===null)throw Ir.alternate===null?Error(n(467)):Error(n(310));Hr=A,A={memoizedState:Hr.memoizedState,baseState:Hr.baseState,baseQueue:Hr.baseQueue,queue:Hr.queue,next:null},Dn===null?Ir.memoizedState=Dn=A:Dn=Dn.next=A}return Dn}function LA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kf(A){var p=is;return is+=1,ws===null&&(ws=[]),A=ot(ws,A,p),p=Ir,(Dn===null?p.memoizedState:Dn.next)===null&&(p=p.alternate,H.H=p===null||p.memoizedState===null?NU:CU),A}function Po(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return kf(A);if(A.$$typeof===_)return Qs(A)}throw Error(n(438,String(A)))}function jf(A){var p=null,b=Ir.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var E=Ir.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(M){return M.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=LA(),Ir.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(A),E=0;E<A;E++)b[E]=L;return p.index++,b}function Ro(A,p){return typeof p=="function"?p(A):p}function mp(A){var p=Ma();return d0(p,Hr,A)}function d0(A,p,b){var E=A.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=b;var M=A.baseQueue,J=E.pending;if(J!==null){if(M!==null){var fe=M.next;M.next=J.next,J.next=fe}p.baseQueue=M=J,E.pending=null}if(J=A.baseState,M===null)A.memoizedState=J;else{p=M.next;var Ee=fe=null,Le=null,ut=p,jt=!1;do{var Pt=ut.lane&-536870913;if(Pt!==ut.lane?(Ln&Pt)===Pt:(ua&Pt)===Pt){var ht=ut.revertLane;if(ht===0)Le!==null&&(Le=Le.next={lane:0,revertLane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),Pt===PA&&(jt=!0);else if((ua&ht)===ht){ut=ut.next,ht===PA&&(jt=!0);continue}else Pt={lane:0,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},Le===null?(Ee=Le=Pt,fe=J):Le=Le.next=Pt,Ir.lanes|=ht,w0|=ht;Pt=ut.action,Vs&&b(J,Pt),J=ut.hasEagerState?ut.eagerState:b(J,Pt)}else ht={lane:Pt,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},Le===null?(Ee=Le=ht,fe=J):Le=Le.next=ht,Ir.lanes|=Pt,w0|=Pt;ut=ut.next}while(ut!==null&&ut!==p);if(Le===null?fe=J:Le.next=Ee,!si(J,A.memoizedState)&&(Vi=!0,jt&&(b=bd,b!==null)))throw b;A.memoizedState=J,A.baseState=fe,A.baseQueue=Le,E.lastRenderedState=J}return M===null&&(E.lanes=0),[A.memoizedState,E.dispatch]}function hx(A){var p=Ma(),b=p.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=A;var E=b.dispatch,M=b.pending,J=p.memoizedState;if(M!==null){b.pending=null;var fe=M=M.next;do J=A(J,fe.action),fe=fe.next;while(fe!==M);si(J,p.memoizedState)||(Vi=!0),p.memoizedState=J,p.baseQueue===null&&(p.baseState=J),b.lastRenderedState=J}return[J,E]}function pp(A,p,b){var E=Ir,M=Ma(),J=Un;if(J){if(b===void 0)throw Error(n(407));b=b()}else b=p();var fe=!si((Hr||M).memoizedState,b);fe&&(M.memoizedState=b,Vi=!0),M=M.queue;var Ee=f0.bind(null,E,M,A);if(m0(2048,8,Ee,[A]),M.getSnapshot!==p||fe||Dn!==null&&Dn.memoizedState.tag&1){if(E.flags|=2048,wd(9,bp(),gp.bind(null,E,M,b,p),null),Fa===null)throw Error(n(349));J||(ua&124)!==0||mx(E,p,b)}return b}function mx(A,p,b){A.flags|=16384,A={getSnapshot:p,value:b},p=Ir.updateQueue,p===null?(p=LA(),Ir.updateQueue=p,p.stores=[A]):(b=p.stores,b===null?p.stores=[A]:b.push(A))}function gp(A,p,b,E){p.value=b,p.getSnapshot=E,qE(p)&&KE(A)}function f0(A,p,b){return b(function(){qE(p)&&KE(A)})}function qE(A){var p=A.getSnapshot;A=A.value;try{var b=p();return!si(A,b)}catch{return!0}}function KE(A){var p=Ad(A,2);p!==null&&Bc(p,A,2)}function xp(A){var p=uo();if(typeof A=="function"){var b=A;if(A=b(),Vs){wt(!0);try{b()}finally{wt(!1)}}}return p.memoizedState=p.baseState=A,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:A},p}function yd(A,p,b,E){return A.baseState=b,d0(A,Hr,typeof E=="function"?E:Ro)}function Pj(A,p,b,E,M){if(nN(A))throw Error(n(485));if(A=p.action,A!==null){var J={payload:M,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(fe){J.listeners.push(fe)}};H.T!==null?b(!0):J.isTransition=!1,E(J),b=p.pending,b===null?(J.next=p.pending=J,WE(p,J)):(J.next=b.next,p.pending=b.next=J)}}function WE(A,p){var b=p.action,E=p.payload,M=A.state;if(p.isTransition){var J=H.T,fe={};H.T=fe;try{var Ee=b(M,E),Le=H.S;Le!==null&&Le(fe,Ee),XE(A,p,Ee)}catch(ut){A0(A,p,ut)}finally{H.T=J}}else try{J=b(M,E),XE(A,p,J)}catch(ut){A0(A,p,ut)}}function XE(A,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){j1(A,p,E)},function(E){return A0(A,p,E)}):j1(A,p,b)}function j1(A,p,b){p.status="fulfilled",p.value=b,B1(p),A.state=b,p=A.pending,p!==null&&(b=p.next,b===p?A.pending=null:(b=b.next,p.next=b,WE(A,b)))}function A0(A,p,b){var E=A.pending;if(A.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=b,B1(p),p=p.next;while(p!==E)}A.action=null}function B1(A){A=A.listeners;for(var p=0;p<A.length;p++)(0,A[p])()}function T1(A,p){return p}function vp(A,p){if(Un){var b=Fa.formState;if(b!==null){e:{var E=Ir;if(Un){if(Xa){t:{for(var M=Xa,J=bu;M.nodeType!==8;){if(!J){M=null;break t}if(M=_d(M.nextSibling),M===null){M=null;break t}}J=M.data,M=J==="F!"||J==="F"?M:null}if(M){Xa=_d(M.nextSibling),E=M.data==="F!";break e}}DA(E)}E=!1}E&&(p=b[0])}}return b=uo(),b.memoizedState=b.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T1,lastRenderedState:p},b.queue=E,b=yU.bind(null,Ir,E),E.dispatch=b,E=xp(!1),J=Rj.bind(null,Ir,!1,E.queue),E=uo(),M={state:p,dispatch:null,action:A,pending:null},E.queue=M,b=Pj.bind(null,Ir,M,J,b),M.dispatch=b,E.memoizedState=A,[p,b,!1]}function px(A){var p=Ma();return h0(p,Hr,A)}function h0(A,p,b){if(p=d0(A,p,T1)[0],A=mp(Ro)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=kf(p)}catch(fe){throw fe===ge?ye:fe}else E=p;p=Ma();var M=p.queue,J=M.dispatch;return b!==p.memoizedState&&(Ir.flags|=2048,wd(9,bp(),YE.bind(null,M,b),null)),[E,J,A]}function YE(A,p){A.action=p}function JE(A){var p=Ma(),b=Hr;if(b!==null)return h0(p,b,A);Ma(),p=p.memoizedState,b=Ma();var E=b.queue.dispatch;return b.memoizedState=A,[p,E,!1]}function wd(A,p,b,E){return A={tag:A,create:b,deps:E,inst:p,next:null},p=Ir.updateQueue,p===null&&(p=LA(),Ir.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=A.next=A:(E=b.next,b.next=A,A.next=E,p.lastEffect=A),A}function bp(){return{destroy:void 0,resource:void 0}}function gx(){return Ma().memoizedState}function Cc(A,p,b,E){var M=uo();E=E===void 0?null:E,Ir.flags|=A,M.memoizedState=wd(1|p,bp(),b,E)}function m0(A,p,b,E){var M=Ma();E=E===void 0?null:E;var J=M.memoizedState.inst;Hr!==null&&E!==null&&Es(E,Hr.memoizedState.deps)?M.memoizedState=wd(p,J,b,E):(Ir.flags|=A,M.memoizedState=wd(1|p,J,b,E))}function I1(A,p){Cc(8390656,8,A,p)}function ZE(A,p){m0(2048,8,A,p)}function F1(A,p){return m0(4,2,A,p)}function MA(A,p){return m0(4,4,A,p)}function eN(A,p){if(typeof p=="function"){A=A();var b=p(A);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return A=A(),p.current=A,function(){p.current=null}}function O1(A,p,b){b=b!=null?b.concat([A]):null,m0(4,4,eN.bind(null,p,A),b)}function D1(){}function P1(A,p){var b=Ma();p=p===void 0?null:p;var E=b.memoizedState;return p!==null&&Es(p,E[1])?E[0]:(b.memoizedState=[A,p],A)}function tN(A,p){var b=Ma();p=p===void 0?null:p;var E=b.memoizedState;if(p!==null&&Es(p,E[1]))return E[0];if(E=A(),Vs){wt(!0);try{A()}finally{wt(!1)}}return b.memoizedState=[E,p],E}function UA(A,p,b){return b===void 0||(ua&1073741824)!==0?A.memoizedState=p:(A.memoizedState=b,A=g7(),Ir.lanes|=A,w0|=A,b)}function xx(A,p,b,E){return si(b,p)?b:hn.current!==null?(A=UA(A,b,E),si(A,p)||(Vi=!0),A):(ua&42)===0?(Vi=!0,A.memoizedState=b):(A=g7(),Ir.lanes|=A,w0|=A,p)}function yp(A,p,b,E,M){var J=q.p;q.p=J!==0&&8>J?J:8;var fe=H.T,Ee={};H.T=Ee,Rj(A,!1,p,b);try{var Le=M(),ut=H.S;if(ut!==null&&ut(Ee,Le),Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var jt=GE(Le,E);U1(A,p,jt,jc(A))}else U1(A,p,E,jc(A))}catch(Pt){U1(A,p,{then:function(){},status:"rejected",reason:Pt},jc())}finally{q.p=J,H.T=fe}}function Ed(){}function Nu(A,p,b,E){if(A.tag!==5)throw Error(n(476));var M=Nd(A).queue;yp(A,M,p,z,b===null?Ed:function(){return wp(A),b(E)})}function Nd(A){var p=A.memoizedState;if(p!==null)return p;p={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:z},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:b},next:null},A.memoizedState=p,A=A.alternate,A!==null&&(A.memoizedState=p),p}function wp(A){var p=Nd(A).next.queue;U1(A,p,{},jc())}function Ep(){return Qs(ay)}function R1(){return Ma().memoizedState}function rN(){return Ma().memoizedState}function L1(A){for(var p=A.return;p!==null;){switch(p.tag){case 24:case 3:var b=jc();A=kt(b);var E=Ot(p,A,b);E!==null&&(Bc(E,p,b),Bt(E,p,b)),p={cache:S1()},A.payload=p;return}p=p.return}}function M1(A,p,b){var E=jc();b={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},nN(A)?wU(p,b):(b=yf(A,p,b,E),b!==null&&(Bc(b,A,E),EU(b,p,E)))}function yU(A,p,b){var E=jc();U1(A,p,b,E)}function U1(A,p,b,E){var M={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(nN(A))wU(p,M);else{var J=A.alternate;if(A.lanes===0&&(J===null||J.lanes===0)&&(J=p.lastRenderedReducer,J!==null))try{var fe=p.lastRenderedState,Ee=J(fe,b);if(M.hasEagerState=!0,M.eagerState=Ee,si(Ee,fe))return bf(A,p,M,0),Fa===null&&Hl(),!1}catch{}finally{}if(b=yf(A,p,M,E),b!==null)return Bc(b,A,E),EU(b,p,E),!0}return!1}function Rj(A,p,b,E){if(E={lane:2,revertLane:m3(),action:E,hasEagerState:!1,eagerState:null,next:null},nN(A)){if(p)throw Error(n(479))}else p=yf(A,b,E,2),p!==null&&Bc(p,A,2)}function nN(A){var p=A.alternate;return A===Ir||p!==null&&p===Ir}function wU(A,p){li=Rn=!0;var b=A.pending;b===null?p.next=p:(p.next=b.next,b.next=p),A.pending=p}function EU(A,p,b){if((b&4194048)!==0){var E=p.lanes;E&=A.pendingLanes,b|=E,p.lanes=b,rt(A,b)}}var aN={readContext:Qs,use:Po,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useLayoutEffect:qn,useInsertionEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useSyncExternalStore:qn,useId:qn,useHostTransitionStatus:qn,useFormState:qn,useActionState:qn,useOptimistic:qn,useMemoCache:qn,useCacheRefresh:qn},NU={readContext:Qs,use:Po,useCallback:function(A,p){return uo().memoizedState=[A,p===void 0?null:p],A},useContext:Qs,useEffect:I1,useImperativeHandle:function(A,p,b){b=b!=null?b.concat([A]):null,Cc(4194308,4,eN.bind(null,p,A),b)},useLayoutEffect:function(A,p){return Cc(4194308,4,A,p)},useInsertionEffect:function(A,p){Cc(4,2,A,p)},useMemo:function(A,p){var b=uo();p=p===void 0?null:p;var E=A();if(Vs){wt(!0);try{A()}finally{wt(!1)}}return b.memoizedState=[E,p],E},useReducer:function(A,p,b){var E=uo();if(b!==void 0){var M=b(p);if(Vs){wt(!0);try{b(p)}finally{wt(!1)}}}else M=p;return E.memoizedState=E.baseState=M,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:M},E.queue=A,A=A.dispatch=M1.bind(null,Ir,A),[E.memoizedState,A]},useRef:function(A){var p=uo();return A={current:A},p.memoizedState=A},useState:function(A){A=xp(A);var p=A.queue,b=yU.bind(null,Ir,p);return p.dispatch=b,[A.memoizedState,b]},useDebugValue:D1,useDeferredValue:function(A,p){var b=uo();return UA(b,A,p)},useTransition:function(){var A=xp(!1);return A=yp.bind(null,Ir,A.queue,!0,!1),uo().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,p,b){var E=Ir,M=uo();if(Un){if(b===void 0)throw Error(n(407));b=b()}else{if(b=p(),Fa===null)throw Error(n(349));(Ln&124)!==0||mx(E,p,b)}M.memoizedState=b;var J={value:b,getSnapshot:p};return M.queue=J,I1(f0.bind(null,E,J,A),[A]),E.flags|=2048,wd(9,bp(),gp.bind(null,E,J,b,p),null),b},useId:function(){var A=uo(),p=Fa.identifierPrefix;if(Un){var b=gd,E=pd;b=(E&~(1<<32-Tt(E)-1)).toString(32)+b,p="«"+p+"R"+b,b=ss++,0<b&&(p+="H"+b.toString(32)),p+="»"}else b=$l++,p="«"+p+"r"+b.toString(32)+"»";return A.memoizedState=p},useHostTransitionStatus:Ep,useFormState:vp,useActionState:vp,useOptimistic:function(A){var p=uo();p.memoizedState=p.baseState=A;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=Rj.bind(null,Ir,!0,b),b.dispatch=p,[A,p]},useMemoCache:jf,useCacheRefresh:function(){return uo().memoizedState=L1.bind(null,Ir)}},CU={readContext:Qs,use:Po,useCallback:P1,useContext:Qs,useEffect:ZE,useImperativeHandle:O1,useInsertionEffect:F1,useLayoutEffect:MA,useMemo:tN,useReducer:mp,useRef:gx,useState:function(){return mp(Ro)},useDebugValue:D1,useDeferredValue:function(A,p){var b=Ma();return xx(b,Hr.memoizedState,A,p)},useTransition:function(){var A=mp(Ro)[0],p=Ma().memoizedState;return[typeof A=="boolean"?A:kf(A),p]},useSyncExternalStore:pp,useId:R1,useHostTransitionStatus:Ep,useFormState:px,useActionState:px,useOptimistic:function(A,p){var b=Ma();return yd(b,Hr,A,p)},useMemoCache:jf,useCacheRefresh:rN},UAe={readContext:Qs,use:Po,useCallback:P1,useContext:Qs,useEffect:ZE,useImperativeHandle:O1,useInsertionEffect:F1,useLayoutEffect:MA,useMemo:tN,useReducer:hx,useRef:gx,useState:function(){return hx(Ro)},useDebugValue:D1,useDeferredValue:function(A,p){var b=Ma();return Hr===null?UA(b,A,p):xx(b,Hr.memoizedState,A,p)},useTransition:function(){var A=hx(Ro)[0],p=Ma().memoizedState;return[typeof A=="boolean"?A:kf(A),p]},useSyncExternalStore:pp,useId:R1,useHostTransitionStatus:Ep,useFormState:JE,useActionState:JE,useOptimistic:function(A,p){var b=Ma();return Hr!==null?yd(b,Hr,A,p):(b.baseState=A,[A,b.queue.dispatch])},useMemoCache:jf,useCacheRefresh:rN},vx=null,Q1=0;function sN(A){var p=Q1;return Q1+=1,vx===null&&(vx=[]),ot(vx,A,p)}function H1(A,p){p=p.props.ref,A.ref=p!==void 0?p:null}function iN(A,p){throw p.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(p),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":A)))}function _U(A){var p=A._init;return p(A._payload)}function SU(A){function p(Ye,ze){if(A){var it=Ye.deletions;it===null?(Ye.deletions=[ze],Ye.flags|=16):it.push(ze)}}function b(Ye,ze){if(!A)return null;for(;ze!==null;)p(Ye,ze),ze=ze.sibling;return null}function E(Ye){for(var ze=new Map;Ye!==null;)Ye.key!==null?ze.set(Ye.key,Ye):ze.set(Ye.index,Ye),Ye=Ye.sibling;return ze}function M(Ye,ze){return Ye=vu(Ye,ze),Ye.index=0,Ye.sibling=null,Ye}function J(Ye,ze,it){return Ye.index=it,A?(it=Ye.alternate,it!==null?(it=it.index,it<ze?(Ye.flags|=67108866,ze):it):(Ye.flags|=67108866,ze)):(Ye.flags|=1048576,ze)}function fe(Ye){return A&&Ye.alternate===null&&(Ye.flags|=67108866),Ye}function Ee(Ye,ze,it,It){return ze===null||ze.tag!==6?(ze=ox(it,Ye.mode,It),ze.return=Ye,ze):(ze=M(ze,it),ze.return=Ye,ze)}function Le(Ye,ze,it,It){var pr=it.type;return pr===g?jt(Ye,ze,it.props.children,It,it.key):ze!==null&&(ze.elementType===pr||typeof pr=="object"&&pr!==null&&pr.$$typeof===S&&_U(pr)===ze.type)?(ze=M(ze,it.props),H1(ze,it),ze.return=Ye,ze):(ze=IA(it.type,it.key,it.props,null,Ye.mode,It),H1(ze,it),ze.return=Ye,ze)}function ut(Ye,ze,it,It){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==it.containerInfo||ze.stateNode.implementation!==it.implementation?(ze=cp(it,Ye.mode,It),ze.return=Ye,ze):(ze=M(ze,it.children||[]),ze.return=Ye,ze)}function jt(Ye,ze,it,It,pr){return ze===null||ze.tag!==7?(ze=hd(it,Ye.mode,It,pr),ze.return=Ye,ze):(ze=M(ze,it),ze.return=Ye,ze)}function Pt(Ye,ze,it){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ze=ox(""+ze,Ye.mode,it),ze.return=Ye,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case h:return it=IA(ze.type,ze.key,ze.props,null,Ye.mode,it),H1(it,ze),it.return=Ye,it;case m:return ze=cp(ze,Ye.mode,it),ze.return=Ye,ze;case S:var It=ze._init;return ze=It(ze._payload),Pt(Ye,ze,it)}if(K(ze)||k(ze))return ze=hd(ze,Ye.mode,it,null),ze.return=Ye,ze;if(typeof ze.then=="function")return Pt(Ye,sN(ze),it);if(ze.$$typeof===_)return Pt(Ye,Cf(Ye,ze),it);iN(Ye,ze)}return null}function ht(Ye,ze,it,It){var pr=ze!==null?ze.key:null;if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return pr!==null?null:Ee(Ye,ze,""+it,It);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case h:return it.key===pr?Le(Ye,ze,it,It):null;case m:return it.key===pr?ut(Ye,ze,it,It):null;case S:return pr=it._init,it=pr(it._payload),ht(Ye,ze,it,It)}if(K(it)||k(it))return pr!==null?null:jt(Ye,ze,it,It,null);if(typeof it.then=="function")return ht(Ye,ze,sN(it),It);if(it.$$typeof===_)return ht(Ye,ze,Cf(Ye,it),It);iN(Ye,it)}return null}function pt(Ye,ze,it,It,pr){if(typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint")return Ye=Ye.get(it)||null,Ee(ze,Ye,""+It,pr);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case h:return Ye=Ye.get(It.key===null?it:It.key)||null,Le(ze,Ye,It,pr);case m:return Ye=Ye.get(It.key===null?it:It.key)||null,ut(ze,Ye,It,pr);case S:var En=It._init;return It=En(It._payload),pt(Ye,ze,it,It,pr)}if(K(It)||k(It))return Ye=Ye.get(it)||null,jt(ze,Ye,It,pr,null);if(typeof It.then=="function")return pt(Ye,ze,it,sN(It),pr);if(It.$$typeof===_)return pt(Ye,ze,it,Cf(ze,It),pr);iN(ze,It)}return null}function Wr(Ye,ze,it,It){for(var pr=null,En=null,Cr=ze,Mr=ze=0,$i=null;Cr!==null&&Mr<it.length;Mr++){Cr.index>Mr?($i=Cr,Cr=null):$i=Cr.sibling;var Kn=ht(Ye,Cr,it[Mr],It);if(Kn===null){Cr===null&&(Cr=$i);break}A&&Cr&&Kn.alternate===null&&p(Ye,Cr),ze=J(Kn,ze,Mr),En===null?pr=Kn:En.sibling=Kn,En=Kn,Cr=$i}if(Mr===it.length)return b(Ye,Cr),Un&&OA(Ye,Mr),pr;if(Cr===null){for(;Mr<it.length;Mr++)Cr=Pt(Ye,it[Mr],It),Cr!==null&&(ze=J(Cr,ze,Mr),En===null?pr=Cr:En.sibling=Cr,En=Cr);return Un&&OA(Ye,Mr),pr}for(Cr=E(Cr);Mr<it.length;Mr++)$i=pt(Cr,Ye,Mr,it[Mr],It),$i!==null&&(A&&$i.alternate!==null&&Cr.delete($i.key===null?Mr:$i.key),ze=J($i,ze,Mr),En===null?pr=$i:En.sibling=$i,En=$i);return A&&Cr.forEach(function(T0){return p(Ye,T0)}),Un&&OA(Ye,Mr),pr}function Rr(Ye,ze,it,It){if(it==null)throw Error(n(151));for(var pr=null,En=null,Cr=ze,Mr=ze=0,$i=null,Kn=it.next();Cr!==null&&!Kn.done;Mr++,Kn=it.next()){Cr.index>Mr?($i=Cr,Cr=null):$i=Cr.sibling;var T0=ht(Ye,Cr,Kn.value,It);if(T0===null){Cr===null&&(Cr=$i);break}A&&Cr&&T0.alternate===null&&p(Ye,Cr),ze=J(T0,ze,Mr),En===null?pr=T0:En.sibling=T0,En=T0,Cr=$i}if(Kn.done)return b(Ye,Cr),Un&&OA(Ye,Mr),pr;if(Cr===null){for(;!Kn.done;Mr++,Kn=it.next())Kn=Pt(Ye,Kn.value,It),Kn!==null&&(ze=J(Kn,ze,Mr),En===null?pr=Kn:En.sibling=Kn,En=Kn);return Un&&OA(Ye,Mr),pr}for(Cr=E(Cr);!Kn.done;Mr++,Kn=it.next())Kn=pt(Cr,Ye,Mr,Kn.value,It),Kn!==null&&(A&&Kn.alternate!==null&&Cr.delete(Kn.key===null?Mr:Kn.key),ze=J(Kn,ze,Mr),En===null?pr=Kn:En.sibling=Kn,En=Kn);return A&&Cr.forEach(function(Qhe){return p(Ye,Qhe)}),Un&&OA(Ye,Mr),pr}function ya(Ye,ze,it,It){if(typeof it=="object"&&it!==null&&it.type===g&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case h:e:{for(var pr=it.key;ze!==null;){if(ze.key===pr){if(pr=it.type,pr===g){if(ze.tag===7){b(Ye,ze.sibling),It=M(ze,it.props.children),It.return=Ye,Ye=It;break e}}else if(ze.elementType===pr||typeof pr=="object"&&pr!==null&&pr.$$typeof===S&&_U(pr)===ze.type){b(Ye,ze.sibling),It=M(ze,it.props),H1(It,it),It.return=Ye,Ye=It;break e}b(Ye,ze);break}else p(Ye,ze);ze=ze.sibling}it.type===g?(It=hd(it.props.children,Ye.mode,It,it.key),It.return=Ye,Ye=It):(It=IA(it.type,it.key,it.props,null,Ye.mode,It),H1(It,it),It.return=Ye,Ye=It)}return fe(Ye);case m:e:{for(pr=it.key;ze!==null;){if(ze.key===pr)if(ze.tag===4&&ze.stateNode.containerInfo===it.containerInfo&&ze.stateNode.implementation===it.implementation){b(Ye,ze.sibling),It=M(ze,it.children||[]),It.return=Ye,Ye=It;break e}else{b(Ye,ze);break}else p(Ye,ze);ze=ze.sibling}It=cp(it,Ye.mode,It),It.return=Ye,Ye=It}return fe(Ye);case S:return pr=it._init,it=pr(it._payload),ya(Ye,ze,it,It)}if(K(it))return Wr(Ye,ze,it,It);if(k(it)){if(pr=k(it),typeof pr!="function")throw Error(n(150));return it=pr.call(it),Rr(Ye,ze,it,It)}if(typeof it.then=="function")return ya(Ye,ze,sN(it),It);if(it.$$typeof===_)return ya(Ye,ze,Cf(Ye,it),It);iN(Ye,it)}return typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint"?(it=""+it,ze!==null&&ze.tag===6?(b(Ye,ze.sibling),It=M(ze,it),It.return=Ye,Ye=It):(b(Ye,ze),It=ox(it,Ye.mode,It),It.return=Ye,Ye=It),fe(Ye)):b(Ye,ze)}return function(Ye,ze,it,It){try{Q1=0;var pr=ya(Ye,ze,it,It);return vx=null,pr}catch(Cr){if(Cr===ge||Cr===ye)throw Cr;var En=Hi(29,Cr,null,Ye.mode);return En.lanes=It,En.return=Ye,En}finally{}}}var bx=SU(!0),kU=SU(!1),Cu=X(null),Bf=null;function p0(A){var p=A.alternate;R(Si,Si.current&1),R(Cu,A),Bf===null&&(p===null||hn.current!==null||p.memoizedState!==null)&&(Bf=A)}function jU(A){if(A.tag===22){if(R(Si,Si.current),R(Cu,A),Bf===null){var p=A.alternate;p!==null&&p.memoizedState!==null&&(Bf=A)}}else g0()}function g0(){R(Si,Si.current),R(Cu,Cu.current)}function QA(A){O(Cu),Bf===A&&(Bf=null),O(Si)}var Si=X(0);function oN(A){for(var p=A;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||S3(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function Lj(A,p,b,E){p=A.memoizedState,b=b(E,p),b=b==null?p:d({},p,b),A.memoizedState=b,A.lanes===0&&(A.updateQueue.baseState=b)}var Mj={enqueueSetState:function(A,p,b){A=A._reactInternals;var E=jc(),M=kt(E);M.payload=p,b!=null&&(M.callback=b),p=Ot(A,M,E),p!==null&&(Bc(p,A,E),Bt(p,A,E))},enqueueReplaceState:function(A,p,b){A=A._reactInternals;var E=jc(),M=kt(E);M.tag=1,M.payload=p,b!=null&&(M.callback=b),p=Ot(A,M,E),p!==null&&(Bc(p,A,E),Bt(p,A,E))},enqueueForceUpdate:function(A,p){A=A._reactInternals;var b=jc(),E=kt(b);E.tag=2,p!=null&&(E.callback=p),p=Ot(A,E,b),p!==null&&(Bc(p,A,b),Bt(p,A,b))}};function BU(A,p,b,E,M,J,fe){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(E,J,fe):p.prototype&&p.prototype.isPureReactComponent?!Af(b,E)||!Af(M,J):!0}function TU(A,p,b,E){A=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,E),p.state!==A&&Mj.enqueueReplaceState(p,p.state,null)}function Np(A,p){var b=p;if("ref"in p){b={};for(var E in p)E!=="ref"&&(b[E]=p[E])}if(A=A.defaultProps){b===p&&(b=d({},b));for(var M in A)b[M]===void 0&&(b[M]=A[M])}return b}var lN=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function IU(A){lN(A)}function FU(A){console.error(A)}function OU(A){lN(A)}function cN(A,p){try{var b=A.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function DU(A,p,b){try{var E=A.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function Uj(A,p,b){return b=kt(b),b.tag=3,b.payload={element:null},b.callback=function(){cN(A,p)},b}function PU(A){return A=kt(A),A.tag=3,A}function RU(A,p,b,E){var M=b.type.getDerivedStateFromError;if(typeof M=="function"){var J=E.value;A.payload=function(){return M(J)},A.callback=function(){DU(p,b,E)}}var fe=b.stateNode;fe!==null&&typeof fe.componentDidCatch=="function"&&(A.callback=function(){DU(p,b,E),typeof M!="function"&&(E0===null?E0=new Set([this]):E0.add(this));var Ee=E.stack;this.componentDidCatch(E.value,{componentStack:Ee!==null?Ee:""})})}function QAe(A,p,b,E,M){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=b.alternate,p!==null&&u0(p,b,M,!0),b=Cu.current,b!==null){switch(b.tag){case 13:return Bf===null?u3():b.alternate===null&&Ns===0&&(Ns=3),b.flags&=-257,b.flags|=65536,b.lanes=M,E===Ne?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([E]):p.add(E),f3(A,E,M)),!1;case 22:return b.flags|=65536,E===Ne?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([E]):b.add(E)),f3(A,E,M)),!1}throw Error(n(435,b.tag))}return f3(A,E,M),u3(),!1}if(Un)return p=Cu.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=M,E!==_1&&(A=Error(n(422),{cause:E}),c0(gn(A,b)))):(E!==_1&&(p=Error(n(423),{cause:E}),c0(gn(p,b))),A=A.current.alternate,A.flags|=65536,M&=-M,A.lanes|=M,E=gn(E,b),M=Uj(A.stateNode,E,M),sr(A,M),Ns!==4&&(Ns=2)),!1;var J=Error(n(520),{cause:E});if(J=gn(J,b),W1===null?W1=[J]:W1.push(J),Ns!==4&&(Ns=2),p===null)return!0;E=gn(E,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,A=M&-M,b.lanes|=A,A=Uj(b.stateNode,E,A),sr(b,A),!1;case 1:if(p=b.type,J=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(E0===null||!E0.has(J))))return b.flags|=65536,M&=-M,b.lanes|=M,M=PU(M),RU(M,A,b,E),sr(b,M),!1}b=b.return}while(b!==null);return!1}var LU=Error(n(461)),Vi=!1;function fo(A,p,b,E){p.child=A===null?kU(p,null,b,E):bx(p,A.child,b,E)}function MU(A,p,b,E,M){b=b.render;var J=p.ref;if("ref"in E){var fe={};for(var Ee in E)Ee!=="ref"&&(fe[Ee]=E[Ee])}else fe=E;return Eu(p),E=Nc(A,p,b,fe,J,M),Ee=Ia(),A!==null&&!Vi?(hp(A,p,M),HA(A,p,M)):(Un&&Ee&&up(p),p.flags|=1,fo(A,p,E,M),p.child)}function UU(A,p,b,E,M){if(A===null){var J=b.type;return typeof J=="function"&&!o0(J)&&J.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=J,QU(A,p,J,E,M)):(A=IA(b.type,null,E,p,p.mode,M),A.ref=p.ref,A.return=p,p.child=A)}if(J=A.child,!Kj(A,M)){var fe=J.memoizedProps;if(b=b.compare,b=b!==null?b:Af,b(fe,E)&&A.ref===p.ref)return HA(A,p,M)}return p.flags|=1,A=vu(J,E),A.ref=p.ref,A.return=p,p.child=A}function QU(A,p,b,E,M){if(A!==null){var J=A.memoizedProps;if(Af(J,E)&&A.ref===p.ref)if(Vi=!1,p.pendingProps=E=J,Kj(A,M))(A.flags&131072)!==0&&(Vi=!0);else return p.lanes=A.lanes,HA(A,p,M)}return Qj(A,p,b,E,M)}function HU(A,p,b){var E=p.pendingProps,M=E.children,J=A!==null?A.memoizedState:null;if(E.mode==="hidden"){if((p.flags&128)!==0){if(E=J!==null?J.baseLanes|b:b,A!==null){for(M=p.child=A.child,J=0;M!==null;)J=J|M.lanes|M.childLanes,M=M.sibling;p.childLanes=J&~E}else p.childLanes=0,p.child=null;return VU(A,p,E,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},A!==null&&le(p,J!==null?J.cachePool:null),J!==null?ra(p,J):Gn(),jU(p);else return p.lanes=p.childLanes=536870912,VU(A,p,J!==null?J.baseLanes|b:b,b)}else J!==null?(le(p,J.cachePool),ra(p,J),g0(),p.memoizedState=null):(A!==null&&le(p,null),Gn(),g0());return fo(A,p,M,b),p.child}function VU(A,p,b,E){var M=re();return M=M===null?null:{parent:Hs._currentValue,pool:M},p.memoizedState={baseLanes:b,cachePool:M},A!==null&&le(p,null),Gn(),jU(p),A!==null&&u0(A,p,E,!0),null}function uN(A,p){var b=p.ref;if(b===null)A!==null&&A.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(A===null||A.ref!==b)&&(p.flags|=4194816)}}function Qj(A,p,b,E,M){return Eu(p),b=Nc(A,p,b,E,void 0,M),E=Ia(),A!==null&&!Vi?(hp(A,p,M),HA(A,p,M)):(Un&&E&&up(p),p.flags|=1,fo(A,p,b,M),p.child)}function zU(A,p,b,E,M,J){return Eu(p),p.updateQueue=null,b=RA(p,E,b,M),_f(A),E=Ia(),A!==null&&!Vi?(hp(A,p,J),HA(A,p,J)):(Un&&E&&up(p),p.flags|=1,fo(A,p,b,J),p.child)}function $U(A,p,b,E,M){if(Eu(p),p.stateNode===null){var J=ii,fe=b.contextType;typeof fe=="object"&&fe!==null&&(J=Qs(fe)),J=new b(E,J),p.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,J.updater=Mj,p.stateNode=J,J._reactInternals=p,J=p.stateNode,J.props=E,J.state=p.memoizedState,J.refs={},He(p),fe=b.contextType,J.context=typeof fe=="object"&&fe!==null?Qs(fe):ii,J.state=p.memoizedState,fe=b.getDerivedStateFromProps,typeof fe=="function"&&(Lj(p,b,fe,E),J.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(fe=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),fe!==J.state&&Mj.enqueueReplaceState(J,J.state,null),tr(p,E,J,M),wr(),J.state=p.memoizedState),typeof J.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(A===null){J=p.stateNode;var Ee=p.memoizedProps,Le=Np(b,Ee);J.props=Le;var ut=J.context,jt=b.contextType;fe=ii,typeof jt=="object"&&jt!==null&&(fe=Qs(jt));var Pt=b.getDerivedStateFromProps;jt=typeof Pt=="function"||typeof J.getSnapshotBeforeUpdate=="function",Ee=p.pendingProps!==Ee,jt||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(Ee||ut!==fe)&&TU(p,J,E,fe),xt=!1;var ht=p.memoizedState;J.state=ht,tr(p,E,J,M),wr(),ut=p.memoizedState,Ee||ht!==ut||xt?(typeof Pt=="function"&&(Lj(p,b,Pt,E),ut=p.memoizedState),(Le=xt||BU(p,b,Le,E,ht,ut,fe))?(jt||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(p.flags|=4194308)):(typeof J.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=ut),J.props=E,J.state=ut,J.context=fe,E=Le):(typeof J.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{J=p.stateNode,$e(A,p),fe=p.memoizedProps,jt=Np(b,fe),J.props=jt,Pt=p.pendingProps,ht=J.context,ut=b.contextType,Le=ii,typeof ut=="object"&&ut!==null&&(Le=Qs(ut)),Ee=b.getDerivedStateFromProps,(ut=typeof Ee=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(fe!==Pt||ht!==Le)&&TU(p,J,E,Le),xt=!1,ht=p.memoizedState,J.state=ht,tr(p,E,J,M),wr();var pt=p.memoizedState;fe!==Pt||ht!==pt||xt||A!==null&&A.dependencies!==null&&dx(A.dependencies)?(typeof Ee=="function"&&(Lj(p,b,Ee,E),pt=p.memoizedState),(jt=xt||BU(p,b,jt,E,ht,pt,Le)||A!==null&&A.dependencies!==null&&dx(A.dependencies))?(ut||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(E,pt,Le),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(E,pt,Le)),typeof J.componentDidUpdate=="function"&&(p.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof J.componentDidUpdate!="function"||fe===A.memoizedProps&&ht===A.memoizedState||(p.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||fe===A.memoizedProps&&ht===A.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=pt),J.props=E,J.state=pt,J.context=Le,E=jt):(typeof J.componentDidUpdate!="function"||fe===A.memoizedProps&&ht===A.memoizedState||(p.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||fe===A.memoizedProps&&ht===A.memoizedState||(p.flags|=1024),E=!1)}return J=E,uN(A,p),E=(p.flags&128)!==0,J||E?(J=p.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:J.render(),p.flags|=1,A!==null&&E?(p.child=bx(p,A.child,null,M),p.child=bx(p,null,b,M)):fo(A,p,b,M),p.memoizedState=J.state,A=p.child):A=HA(A,p,M),A}function GU(A,p,b,E){return pl(),p.flags|=256,fo(A,p,b,E),p.child}var Hj={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vj(A){return{baseLanes:A,cachePool:he()}}function zj(A,p,b){return A=A!==null?A.childLanes&~b:0,p&&(A|=_u),A}function qU(A,p,b){var E=p.pendingProps,M=!1,J=(p.flags&128)!==0,fe;if((fe=J)||(fe=A!==null&&A.memoizedState===null?!1:(Si.current&2)!==0),fe&&(M=!0,p.flags&=-129),fe=(p.flags&32)!==0,p.flags&=-33,A===null){if(Un){if(M?p0(p):g0(),Un){var Ee=Xa,Le;if(Le=Ee){e:{for(Le=Ee,Ee=bu;Le.nodeType!==8;){if(!Ee){Ee=null;break e}if(Le=_d(Le.nextSibling),Le===null){Ee=null;break e}}Ee=Le}Ee!==null?(p.memoizedState={dehydrated:Ee,treeContext:FA!==null?{id:pd,overflow:gd}:null,retryLane:536870912,hydrationErrors:null},Le=Hi(18,null,null,0),Le.stateNode=Ee,Le.return=p,p.child=Le,Us=p,Xa=null,Le=!0):Le=!1}Le||DA(p)}if(Ee=p.memoizedState,Ee!==null&&(Ee=Ee.dehydrated,Ee!==null))return S3(Ee)?p.lanes=32:p.lanes=536870912,null;QA(p)}return Ee=E.children,E=E.fallback,M?(g0(),M=p.mode,Ee=dN({mode:"hidden",children:Ee},M),E=hd(E,M,b,null),Ee.return=p,E.return=p,Ee.sibling=E,p.child=Ee,M=p.child,M.memoizedState=Vj(b),M.childLanes=zj(A,fe,b),p.memoizedState=Hj,E):(p0(p),$j(p,Ee))}if(Le=A.memoizedState,Le!==null&&(Ee=Le.dehydrated,Ee!==null)){if(J)p.flags&256?(p0(p),p.flags&=-257,p=Gj(A,p,b)):p.memoizedState!==null?(g0(),p.child=A.child,p.flags|=128,p=null):(g0(),M=E.fallback,Ee=p.mode,E=dN({mode:"visible",children:E.children},Ee),M=hd(M,Ee,b,null),M.flags|=2,E.return=p,M.return=p,E.sibling=M,p.child=E,bx(p,A.child,null,b),E=p.child,E.memoizedState=Vj(b),E.childLanes=zj(A,fe,b),p.memoizedState=Hj,p=M);else if(p0(p),S3(Ee)){if(fe=Ee.nextSibling&&Ee.nextSibling.dataset,fe)var ut=fe.dgst;fe=ut,E=Error(n(419)),E.stack="",E.digest=fe,c0({value:E,source:null,stack:null}),p=Gj(A,p,b)}else if(Vi||u0(A,p,b,!1),fe=(b&A.childLanes)!==0,Vi||fe){if(fe=Fa,fe!==null&&(E=b&-b,E=(E&42)!==0?1:gt(E),E=(E&(fe.suspendedLanes|b))!==0?0:E,E!==0&&E!==Le.retryLane))throw Le.retryLane=E,Ad(A,E),Bc(fe,A,E),LU;Ee.data==="$?"||u3(),p=Gj(A,p,b)}else Ee.data==="$?"?(p.flags|=192,p.child=A.child,p=null):(A=Le.treeContext,Xa=_d(Ee.nextSibling),Us=p,Un=!0,Ef=null,bu=!1,A!==null&&(zl[ml++]=pd,zl[ml++]=gd,zl[ml++]=FA,pd=A.id,gd=A.overflow,FA=p),p=$j(p,E.children),p.flags|=4096);return p}return M?(g0(),M=E.fallback,Ee=p.mode,Le=A.child,ut=Le.sibling,E=vu(Le,{mode:"hidden",children:E.children}),E.subtreeFlags=Le.subtreeFlags&65011712,ut!==null?M=vu(ut,M):(M=hd(M,Ee,b,null),M.flags|=2),M.return=p,E.return=p,E.sibling=M,p.child=E,E=M,M=p.child,Ee=A.child.memoizedState,Ee===null?Ee=Vj(b):(Le=Ee.cachePool,Le!==null?(ut=Hs._currentValue,Le=Le.parent!==ut?{parent:ut,pool:ut}:Le):Le=he(),Ee={baseLanes:Ee.baseLanes|b,cachePool:Le}),M.memoizedState=Ee,M.childLanes=zj(A,fe,b),p.memoizedState=Hj,E):(p0(p),b=A.child,A=b.sibling,b=vu(b,{mode:"visible",children:E.children}),b.return=p,b.sibling=null,A!==null&&(fe=p.deletions,fe===null?(p.deletions=[A],p.flags|=16):fe.push(A)),p.child=b,p.memoizedState=null,b)}function $j(A,p){return p=dN({mode:"visible",children:p},A.mode),p.return=A,A.child=p}function dN(A,p){return A=Hi(22,A,null,p),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function Gj(A,p,b){return bx(p,A.child,null,b),A=$j(p,p.pendingProps.children),A.flags|=2,p.memoizedState=null,A}function KU(A,p,b){A.lanes|=p;var E=A.alternate;E!==null&&(E.lanes|=p),cx(A.return,p,b)}function qj(A,p,b,E,M){var J=A.memoizedState;J===null?A.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:M}:(J.isBackwards=p,J.rendering=null,J.renderingStartTime=0,J.last=E,J.tail=b,J.tailMode=M)}function WU(A,p,b){var E=p.pendingProps,M=E.revealOrder,J=E.tail;if(fo(A,p,E.children,b),E=Si.current,(E&2)!==0)E=E&1|2,p.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=p.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&KU(A,b,p);else if(A.tag===19)KU(A,b,p);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break e;for(;A.sibling===null;){if(A.return===null||A.return===p)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}E&=1}switch(R(Si,E),M){case"forwards":for(b=p.child,M=null;b!==null;)A=b.alternate,A!==null&&oN(A)===null&&(M=b),b=b.sibling;b=M,b===null?(M=p.child,p.child=null):(M=b.sibling,b.sibling=null),qj(p,!1,M,b,J);break;case"backwards":for(b=null,M=p.child,p.child=null;M!==null;){if(A=M.alternate,A!==null&&oN(A)===null){p.child=M;break}A=M.sibling,M.sibling=b,b=M,M=A}qj(p,!0,b,null,J);break;case"together":qj(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function HA(A,p,b){if(A!==null&&(p.dependencies=A.dependencies),w0|=p.lanes,(b&p.childLanes)===0)if(A!==null){if(u0(A,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(A!==null&&p.child!==A.child)throw Error(n(153));if(p.child!==null){for(A=p.child,b=vu(A,A.pendingProps),p.child=b,b.return=p;A.sibling!==null;)A=A.sibling,b=b.sibling=vu(A,A.pendingProps),b.return=p;b.sibling=null}return p.child}function Kj(A,p){return(A.lanes&p)!==0?!0:(A=A.dependencies,!!(A!==null&&dx(A)))}function HAe(A,p,b){switch(p.tag){case 3:oe(p,p.stateNode.containerInfo),Nf(p,Hs,A.memoizedState.cache),pl();break;case 27:case 5:ue(p);break;case 4:oe(p,p.stateNode.containerInfo);break;case 10:Nf(p,p.type,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(p0(p),p.flags|=128,null):(b&p.child.childLanes)!==0?qU(A,p,b):(p0(p),A=HA(A,p,b),A!==null?A.sibling:null);p0(p);break;case 19:var M=(A.flags&128)!==0;if(E=(b&p.childLanes)!==0,E||(u0(A,p,b,!1),E=(b&p.childLanes)!==0),M){if(E)return WU(A,p,b);p.flags|=128}if(M=p.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),R(Si,Si.current),E)break;return null;case 22:case 23:return p.lanes=0,HU(A,p,b);case 24:Nf(p,Hs,A.memoizedState.cache)}return HA(A,p,b)}function XU(A,p,b){if(A!==null)if(A.memoizedProps!==p.pendingProps)Vi=!0;else{if(!Kj(A,b)&&(p.flags&128)===0)return Vi=!1,HAe(A,p,b);Vi=(A.flags&131072)!==0}else Vi=!1,Un&&(p.flags&1048576)!==0&&QE(p,lx,p.index);switch(p.lanes=0,p.tag){case 16:e:{A=p.pendingProps;var E=p.elementType,M=E._init;if(E=M(E._payload),p.type=E,typeof E=="function")o0(E)?(A=Np(E,A),p.tag=1,p=$U(null,p,E,A,b)):(p.tag=0,p=Qj(null,p,E,A,b));else{if(E!=null){if(M=E.$$typeof,M===F){p.tag=11,p=MU(null,p,E,A,b);break e}else if(M===C){p.tag=14,p=UU(null,p,E,A,b);break e}}throw p=Q(E)||E,Error(n(306,p,""))}}return p;case 0:return Qj(A,p,p.type,p.pendingProps,b);case 1:return E=p.type,M=Np(E,p.pendingProps),$U(A,p,E,M,b);case 3:e:{if(oe(p,p.stateNode.containerInfo),A===null)throw Error(n(387));E=p.pendingProps;var J=p.memoizedState;M=J.element,$e(A,p),tr(p,E,null,b);var fe=p.memoizedState;if(E=fe.cache,Nf(p,Hs,E),E!==J.cache&&ux(p,[Hs],b,!0),wr(),E=fe.element,J.isDehydrated)if(J={element:E,isDehydrated:!1,cache:fe.cache},p.updateQueue.baseState=J,p.memoizedState=J,p.flags&256){p=GU(A,p,E,b);break e}else if(E!==M){M=gn(Error(n(424)),p),c0(M),p=GU(A,p,E,b);break e}else{switch(A=p.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Xa=_d(A.firstChild),Us=p,Un=!0,Ef=null,bu=!0,b=kU(p,null,E,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(pl(),E===M){p=HA(A,p,b);break e}fo(A,p,E,b)}p=p.child}return p;case 26:return uN(A,p),A===null?(b=e9(p.type,null,p.pendingProps,null))?p.memoizedState=b:Un||(b=p.type,A=p.pendingProps,E=CN(te.current).createElement(b),E[rr]=p,E[br]=A,ho(E,b,A),qe(E),p.stateNode=E):p.memoizedState=e9(p.type,A.memoizedProps,p.pendingProps,A.memoizedState),null;case 27:return ue(p),A===null&&Un&&(E=p.stateNode=Y7(p.type,p.pendingProps,te.current),Us=p,bu=!0,M=Xa,_0(p.type)?(k3=M,Xa=_d(E.firstChild)):Xa=M),fo(A,p,p.pendingProps.children,b),uN(A,p),A===null&&(p.flags|=4194304),p.child;case 5:return A===null&&Un&&((M=E=Xa)&&(E=phe(E,p.type,p.pendingProps,bu),E!==null?(p.stateNode=E,Us=p,Xa=_d(E.firstChild),bu=!1,M=!0):M=!1),M||DA(p)),ue(p),M=p.type,J=p.pendingProps,fe=A!==null?A.memoizedProps:null,E=J.children,N3(M,J)?E=null:fe!==null&&N3(M,fe)&&(p.flags|=32),p.memoizedState!==null&&(M=Nc(A,p,Sf,null,null,b),ay._currentValue=M),uN(A,p),fo(A,p,E,b),p.child;case 6:return A===null&&Un&&((A=b=Xa)&&(b=ghe(b,p.pendingProps,bu),b!==null?(p.stateNode=b,Us=p,Xa=null,A=!0):A=!1),A||DA(p)),null;case 13:return qU(A,p,b);case 4:return oe(p,p.stateNode.containerInfo),E=p.pendingProps,A===null?p.child=bx(p,null,E,b):fo(A,p,E,b),p.child;case 11:return MU(A,p,p.type,p.pendingProps,b);case 7:return fo(A,p,p.pendingProps,b),p.child;case 8:return fo(A,p,p.pendingProps.children,b),p.child;case 12:return fo(A,p,p.pendingProps.children,b),p.child;case 10:return E=p.pendingProps,Nf(p,p.type,E.value),fo(A,p,E.children,b),p.child;case 9:return M=p.type._context,E=p.pendingProps.children,Eu(p),M=Qs(M),E=E(M),p.flags|=1,fo(A,p,E,b),p.child;case 14:return UU(A,p,p.type,p.pendingProps,b);case 15:return QU(A,p,p.type,p.pendingProps,b);case 19:return WU(A,p,b);case 31:return E=p.pendingProps,b=p.mode,E={mode:E.mode,children:E.children},A===null?(b=dN(E,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=vu(A.child,E),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return HU(A,p,b);case 24:return Eu(p),E=Qs(Hs),A===null?(M=re(),M===null&&(M=Fa,J=S1(),M.pooledCache=J,J.refCount++,J!==null&&(M.pooledCacheLanes|=b),M=J),p.memoizedState={parent:E,cache:M},He(p),Nf(p,Hs,M)):((A.lanes&b)!==0&&($e(A,p),tr(p,null,null,b),wr()),M=A.memoizedState,J=p.memoizedState,M.parent!==E?(M={parent:E,cache:E},p.memoizedState=M,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=M),Nf(p,Hs,E)):(E=J.cache,Nf(p,Hs,E),E!==M.cache&&ux(p,[Hs],b,!0))),fo(A,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function VA(A){A.flags|=4}function YU(A,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!s9(p)){if(p=Cu.current,p!==null&&((Ln&4194048)===Ln?Bf!==null:(Ln&62914560)!==Ln&&(Ln&536870912)===0||p!==Bf))throw nt=Ne,xe;A.flags|=8192}}function fN(A,p){p!==null&&(A.flags|=4),A.flags&16384&&(p=A.tag!==22?pn():536870912,A.lanes|=p,Nx|=p)}function V1(A,p){if(!Un)switch(A.tailMode){case"hidden":p=A.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?A.tail=null:b.sibling=null;break;case"collapsed":b=A.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?p||A.tail===null?A.tail=null:A.tail.sibling=null:E.sibling=null}}function os(A){var p=A.alternate!==null&&A.alternate.child===A.child,b=0,E=0;if(p)for(var M=A.child;M!==null;)b|=M.lanes|M.childLanes,E|=M.subtreeFlags&65011712,E|=M.flags&65011712,M.return=A,M=M.sibling;else for(M=A.child;M!==null;)b|=M.lanes|M.childLanes,E|=M.subtreeFlags,E|=M.flags,M.return=A,M=M.sibling;return A.subtreeFlags|=E,A.childLanes=b,p}function VAe(A,p,b){var E=p.pendingProps;switch(dp(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(p),null;case 1:return os(p),null;case 3:return b=p.stateNode,E=null,A!==null&&(E=A.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),wu(Hs),ie(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(A===null||A.child===null)&&(co(p)?VA(p):A===null||A.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,VE())),os(p),null;case 26:return b=p.memoizedState,A===null?(VA(p),b!==null?(os(p),YU(p,b)):(os(p),p.flags&=-16777217)):b?b!==A.memoizedState?(VA(p),os(p),YU(p,b)):(os(p),p.flags&=-16777217):(A.memoizedProps!==E&&VA(p),os(p),p.flags&=-16777217),null;case 27:Ce(p),b=te.current;var M=p.type;if(A!==null&&p.stateNode!=null)A.memoizedProps!==E&&VA(p);else{if(!E){if(p.stateNode===null)throw Error(n(166));return os(p),null}A=G.current,co(p)?HE(p):(A=Y7(M,E,b),p.stateNode=A,VA(p))}return os(p),null;case 5:if(Ce(p),b=p.type,A!==null&&p.stateNode!=null)A.memoizedProps!==E&&VA(p);else{if(!E){if(p.stateNode===null)throw Error(n(166));return os(p),null}if(A=G.current,co(p))HE(p);else{switch(M=CN(te.current),A){case 1:A=M.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:A=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":A=M.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":A=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":A=M.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof E.is=="string"?M.createElement("select",{is:E.is}):M.createElement("select"),E.multiple?A.multiple=!0:E.size&&(A.size=E.size);break;default:A=typeof E.is=="string"?M.createElement(b,{is:E.is}):M.createElement(b)}}A[rr]=p,A[br]=E;e:for(M=p.child;M!==null;){if(M.tag===5||M.tag===6)A.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===p)break e;for(;M.sibling===null;){if(M.return===null||M.return===p)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}p.stateNode=A;e:switch(ho(A,b,E),b){case"button":case"input":case"select":case"textarea":A=!!E.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&VA(p)}}return os(p),p.flags&=-16777217,null;case 6:if(A&&p.stateNode!=null)A.memoizedProps!==E&&VA(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(n(166));if(A=te.current,co(p)){if(A=p.stateNode,b=p.memoizedProps,E=null,M=Us,M!==null)switch(M.tag){case 27:case 5:E=M.memoizedProps}A[rr]=p,A=!!(A.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||z7(A.nodeValue,b)),A||DA(p)}else A=CN(A).createTextNode(E),A[rr]=p,p.stateNode=A}return os(p),null;case 13:if(E=p.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(M=co(p),E!==null&&E.dehydrated!==null){if(A===null){if(!M)throw Error(n(318));if(M=p.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[rr]=p}else pl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;os(p),M=!1}else M=VE(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=M),M=!0;if(!M)return p.flags&256?(QA(p),p):(QA(p),null)}if(QA(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=E!==null,A=A!==null&&A.memoizedState!==null,b){E=p.child,M=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(M=E.alternate.memoizedState.cachePool.pool);var J=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(J=E.memoizedState.cachePool.pool),J!==M&&(E.flags|=2048)}return b!==A&&b&&(p.child.flags|=8192),fN(p,p.updateQueue),os(p),null;case 4:return ie(),A===null&&v3(p.stateNode.containerInfo),os(p),null;case 10:return wu(p.type),os(p),null;case 19:if(O(Si),M=p.memoizedState,M===null)return os(p),null;if(E=(p.flags&128)!==0,J=M.rendering,J===null)if(E)V1(M,!1);else{if(Ns!==0||A!==null&&(A.flags&128)!==0)for(A=p.child;A!==null;){if(J=oN(A),J!==null){for(p.flags|=128,V1(M,!1),A=J.updateQueue,p.updateQueue=A,fN(p,A),p.subtreeFlags=0,A=b,b=p.child;b!==null;)lp(b,A),b=b.sibling;return R(Si,Si.current&1|2),p.child}A=A.sibling}M.tail!==null&&ve()>mN&&(p.flags|=128,E=!0,V1(M,!1),p.lanes=4194304)}else{if(!E)if(A=oN(J),A!==null){if(p.flags|=128,E=!0,A=A.updateQueue,p.updateQueue=A,fN(p,A),V1(M,!0),M.tail===null&&M.tailMode==="hidden"&&!J.alternate&&!Un)return os(p),null}else 2*ve()-M.renderingStartTime>mN&&b!==536870912&&(p.flags|=128,E=!0,V1(M,!1),p.lanes=4194304);M.isBackwards?(J.sibling=p.child,p.child=J):(A=M.last,A!==null?A.sibling=J:p.child=J,M.last=J)}return M.tail!==null?(p=M.tail,M.rendering=p,M.tail=p.sibling,M.renderingStartTime=ve(),p.sibling=null,A=Si.current,R(Si,E?A&1|2:A&1),p):(os(p),null);case 22:case 23:return QA(p),Zr(),E=p.memoizedState!==null,A!==null?A.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(b&536870912)!==0&&(p.flags&128)===0&&(os(p),p.subtreeFlags&6&&(p.flags|=8192)):os(p),b=p.updateQueue,b!==null&&fN(p,b.retryQueue),b=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048),A!==null&&O(V),null;case 24:return b=null,A!==null&&(b=A.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),wu(Hs),os(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function zAe(A,p){switch(dp(p),p.tag){case 1:return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 3:return wu(Hs),ie(),A=p.flags,(A&65536)!==0&&(A&128)===0?(p.flags=A&-65537|128,p):null;case 26:case 27:case 5:return Ce(p),null;case 13:if(QA(p),A=p.memoizedState,A!==null&&A.dehydrated!==null){if(p.alternate===null)throw Error(n(340));pl()}return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 19:return O(Si),null;case 4:return ie(),null;case 10:return wu(p.type),null;case 22:case 23:return QA(p),Zr(),A!==null&&O(V),A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 24:return wu(Hs),null;case 25:return null;default:return null}}function JU(A,p){switch(dp(p),p.tag){case 3:wu(Hs),ie();break;case 26:case 27:case 5:Ce(p);break;case 4:ie();break;case 13:QA(p);break;case 19:O(Si);break;case 10:wu(p.type);break;case 22:case 23:QA(p),Zr(),A!==null&&O(V);break;case 24:wu(Hs)}}function z1(A,p){try{var b=p.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var M=E.next;b=M;do{if((b.tag&A)===A){E=void 0;var J=b.create,fe=b.inst;E=J(),fe.destroy=E}b=b.next}while(b!==M)}}catch(Ee){_a(p,p.return,Ee)}}function x0(A,p,b){try{var E=p.updateQueue,M=E!==null?E.lastEffect:null;if(M!==null){var J=M.next;E=J;do{if((E.tag&A)===A){var fe=E.inst,Ee=fe.destroy;if(Ee!==void 0){fe.destroy=void 0,M=p;var Le=b,ut=Ee;try{ut()}catch(jt){_a(M,Le,jt)}}}E=E.next}while(E!==J)}}catch(jt){_a(p,p.return,jt)}}function ZU(A){var p=A.updateQueue;if(p!==null){var b=A.stateNode;try{$n(p,b)}catch(E){_a(A,A.return,E)}}}function e7(A,p,b){b.props=Np(A.type,A.memoizedProps),b.state=A.memoizedState;try{b.componentWillUnmount()}catch(E){_a(A,p,E)}}function $1(A,p){try{var b=A.ref;if(b!==null){switch(A.tag){case 26:case 27:case 5:var E=A.stateNode;break;case 30:E=A.stateNode;break;default:E=A.stateNode}typeof b=="function"?A.refCleanup=b(E):b.current=E}}catch(M){_a(A,p,M)}}function Tf(A,p){var b=A.ref,E=A.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(M){_a(A,p,M)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(M){_a(A,p,M)}else b.current=null}function t7(A){var p=A.type,b=A.memoizedProps,E=A.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(M){_a(A,A.return,M)}}function Wj(A,p,b){try{var E=A.stateNode;dhe(E,A.type,b,p),E[br]=p}catch(M){_a(A,A.return,M)}}function r7(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&_0(A.type)||A.tag===4}function Xj(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||r7(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&_0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Yj(A,p,b){var E=A.tag;if(E===5||E===6)A=A.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(A,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(A),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=NN));else if(E!==4&&(E===27&&_0(A.type)&&(b=A.stateNode,p=null),A=A.child,A!==null))for(Yj(A,p,b),A=A.sibling;A!==null;)Yj(A,p,b),A=A.sibling}function AN(A,p,b){var E=A.tag;if(E===5||E===6)A=A.stateNode,p?b.insertBefore(A,p):b.appendChild(A);else if(E!==4&&(E===27&&_0(A.type)&&(b=A.stateNode),A=A.child,A!==null))for(AN(A,p,b),A=A.sibling;A!==null;)AN(A,p,b),A=A.sibling}function n7(A){var p=A.stateNode,b=A.memoizedProps;try{for(var E=A.type,M=p.attributes;M.length;)p.removeAttributeNode(M[0]);ho(p,E,b),p[rr]=A,p[br]=b}catch(J){_a(A,A.return,J)}}var zA=!1,zs=!1,Jj=!1,a7=typeof WeakSet=="function"?WeakSet:Set,zi=null;function $Ae(A,p){if(A=A.containerInfo,w3=TN,A=lo(A),_i(A)){if("selectionStart"in A)var b={start:A.selectionStart,end:A.selectionEnd};else e:{b=(b=A.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var M=E.anchorOffset,J=E.focusNode;E=E.focusOffset;try{b.nodeType,J.nodeType}catch{b=null;break e}var fe=0,Ee=-1,Le=-1,ut=0,jt=0,Pt=A,ht=null;t:for(;;){for(var pt;Pt!==b||M!==0&&Pt.nodeType!==3||(Ee=fe+M),Pt!==J||E!==0&&Pt.nodeType!==3||(Le=fe+E),Pt.nodeType===3&&(fe+=Pt.nodeValue.length),(pt=Pt.firstChild)!==null;)ht=Pt,Pt=pt;for(;;){if(Pt===A)break t;if(ht===b&&++ut===M&&(Ee=fe),ht===J&&++jt===E&&(Le=fe),(pt=Pt.nextSibling)!==null)break;Pt=ht,ht=Pt.parentNode}Pt=pt}b=Ee===-1||Le===-1?null:{start:Ee,end:Le}}else b=null}b=b||{start:0,end:0}}else b=null;for(E3={focusedElem:A,selectionRange:b},TN=!1,zi=p;zi!==null;)if(p=zi,A=p.child,(p.subtreeFlags&1024)!==0&&A!==null)A.return=p,zi=A;else for(;zi!==null;){switch(p=zi,J=p.alternate,A=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&J!==null){A=void 0,b=p,M=J.memoizedProps,J=J.memoizedState,E=b.stateNode;try{var Wr=Np(b.type,M,b.elementType===b.type);A=E.getSnapshotBeforeUpdate(Wr,J),E.__reactInternalSnapshotBeforeUpdate=A}catch(Rr){_a(b,b.return,Rr)}}break;case 3:if((A&1024)!==0){if(A=p.stateNode.containerInfo,b=A.nodeType,b===9)_3(A);else if(b===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":_3(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=p.sibling,A!==null){A.return=p.return,zi=A;break}zi=p.return}}function s7(A,p,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:v0(A,b),E&4&&z1(5,b);break;case 1:if(v0(A,b),E&4)if(A=b.stateNode,p===null)try{A.componentDidMount()}catch(fe){_a(b,b.return,fe)}else{var M=Np(b.type,p.memoizedProps);p=p.memoizedState;try{A.componentDidUpdate(M,p,A.__reactInternalSnapshotBeforeUpdate)}catch(fe){_a(b,b.return,fe)}}E&64&&ZU(b),E&512&&$1(b,b.return);break;case 3:if(v0(A,b),E&64&&(A=b.updateQueue,A!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{$n(A,p)}catch(fe){_a(b,b.return,fe)}}break;case 27:p===null&&E&4&&n7(b);case 26:case 5:v0(A,b),p===null&&E&4&&t7(b),E&512&&$1(b,b.return);break;case 12:v0(A,b);break;case 13:v0(A,b),E&4&&l7(A,b),E&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=ehe.bind(null,b),xhe(A,b))));break;case 22:if(E=b.memoizedState!==null||zA,!E){p=p!==null&&p.memoizedState!==null||zs,M=zA;var J=zs;zA=E,(zs=p)&&!J?b0(A,b,(b.subtreeFlags&8772)!==0):v0(A,b),zA=M,zs=J}break;case 30:break;default:v0(A,b)}}function i7(A){var p=A.alternate;p!==null&&(A.alternate=null,i7(p)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(p=A.stateNode,p!==null&&ke(p)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Ya=null,Gl=!1;function $A(A,p,b){for(b=b.child;b!==null;)o7(A,p,b),b=b.sibling}function o7(A,p,b){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(At,b)}catch{}switch(b.tag){case 26:zs||Tf(b,p),$A(A,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:zs||Tf(b,p);var E=Ya,M=Gl;_0(b.type)&&(Ya=b.stateNode,Gl=!1),$A(A,p,b),ey(b.stateNode),Ya=E,Gl=M;break;case 5:zs||Tf(b,p);case 6:if(E=Ya,M=Gl,Ya=null,$A(A,p,b),Ya=E,Gl=M,Ya!==null)if(Gl)try{(Ya.nodeType===9?Ya.body:Ya.nodeName==="HTML"?Ya.ownerDocument.body:Ya).removeChild(b.stateNode)}catch(J){_a(b,p,J)}else try{Ya.removeChild(b.stateNode)}catch(J){_a(b,p,J)}break;case 18:Ya!==null&&(Gl?(A=Ya,W7(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,b.stateNode),ly(A)):W7(Ya,b.stateNode));break;case 4:E=Ya,M=Gl,Ya=b.stateNode.containerInfo,Gl=!0,$A(A,p,b),Ya=E,Gl=M;break;case 0:case 11:case 14:case 15:zs||x0(2,b,p),zs||x0(4,b,p),$A(A,p,b);break;case 1:zs||(Tf(b,p),E=b.stateNode,typeof E.componentWillUnmount=="function"&&e7(b,p,E)),$A(A,p,b);break;case 21:$A(A,p,b);break;case 22:zs=(E=zs)||b.memoizedState!==null,$A(A,p,b),zs=E;break;default:$A(A,p,b)}}function l7(A,p){if(p.memoizedState===null&&(A=p.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{ly(A)}catch(b){_a(p,p.return,b)}}function GAe(A){switch(A.tag){case 13:case 19:var p=A.stateNode;return p===null&&(p=A.stateNode=new a7),p;case 22:return A=A.stateNode,p=A._retryCache,p===null&&(p=A._retryCache=new a7),p;default:throw Error(n(435,A.tag))}}function Zj(A,p){var b=GAe(A);p.forEach(function(E){var M=the.bind(null,A,E);b.has(E)||(b.add(E),E.then(M,M))})}function _c(A,p){var b=p.deletions;if(b!==null)for(var E=0;E<b.length;E++){var M=b[E],J=A,fe=p,Ee=fe;e:for(;Ee!==null;){switch(Ee.tag){case 27:if(_0(Ee.type)){Ya=Ee.stateNode,Gl=!1;break e}break;case 5:Ya=Ee.stateNode,Gl=!1;break e;case 3:case 4:Ya=Ee.stateNode.containerInfo,Gl=!0;break e}Ee=Ee.return}if(Ya===null)throw Error(n(160));o7(J,fe,M),Ya=null,Gl=!1,J=M.alternate,J!==null&&(J.return=null),M.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)c7(p,A),p=p.sibling}var Cd=null;function c7(A,p){var b=A.alternate,E=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:_c(p,A),Sc(A),E&4&&(x0(3,A,A.return),z1(3,A),x0(5,A,A.return));break;case 1:_c(p,A),Sc(A),E&512&&(zs||b===null||Tf(b,b.return)),E&64&&zA&&(A=A.updateQueue,A!==null&&(E=A.callbacks,E!==null&&(b=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var M=Cd;if(_c(p,A),Sc(A),E&512&&(zs||b===null||Tf(b,b.return)),E&4){var J=b!==null?b.memoizedState:null;if(E=A.memoizedState,b===null)if(E===null)if(A.stateNode===null){e:{E=A.type,b=A.memoizedProps,M=M.ownerDocument||M;t:switch(E){case"title":J=M.getElementsByTagName("title")[0],(!J||J[Se]||J[rr]||J.namespaceURI==="http://www.w3.org/2000/svg"||J.hasAttribute("itemprop"))&&(J=M.createElement(E),M.head.insertBefore(J,M.querySelector("head > title"))),ho(J,E,b),J[rr]=A,qe(J),E=J;break e;case"link":var fe=n9("link","href",M).get(E+(b.href||""));if(fe){for(var Ee=0;Ee<fe.length;Ee++)if(J=fe[Ee],J.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&J.getAttribute("rel")===(b.rel==null?null:b.rel)&&J.getAttribute("title")===(b.title==null?null:b.title)&&J.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){fe.splice(Ee,1);break t}}J=M.createElement(E),ho(J,E,b),M.head.appendChild(J);break;case"meta":if(fe=n9("meta","content",M).get(E+(b.content||""))){for(Ee=0;Ee<fe.length;Ee++)if(J=fe[Ee],J.getAttribute("content")===(b.content==null?null:""+b.content)&&J.getAttribute("name")===(b.name==null?null:b.name)&&J.getAttribute("property")===(b.property==null?null:b.property)&&J.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&J.getAttribute("charset")===(b.charSet==null?null:b.charSet)){fe.splice(Ee,1);break t}}J=M.createElement(E),ho(J,E,b),M.head.appendChild(J);break;default:throw Error(n(468,E))}J[rr]=A,qe(J),E=J}A.stateNode=E}else a9(M,A.type,A.stateNode);else A.stateNode=r9(M,E,A.memoizedProps);else J!==E?(J===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):J.count--,E===null?a9(M,A.type,A.stateNode):r9(M,E,A.memoizedProps)):E===null&&A.stateNode!==null&&Wj(A,A.memoizedProps,b.memoizedProps)}break;case 27:_c(p,A),Sc(A),E&512&&(zs||b===null||Tf(b,b.return)),b!==null&&E&4&&Wj(A,A.memoizedProps,b.memoizedProps);break;case 5:if(_c(p,A),Sc(A),E&512&&(zs||b===null||Tf(b,b.return)),A.flags&32){M=A.stateNode;try{ko(M,"")}catch(pt){_a(A,A.return,pt)}}E&4&&A.stateNode!=null&&(M=A.memoizedProps,Wj(A,M,b!==null?b.memoizedProps:M)),E&1024&&(Jj=!0);break;case 6:if(_c(p,A),Sc(A),E&4){if(A.stateNode===null)throw Error(n(162));E=A.memoizedProps,b=A.stateNode;try{b.nodeValue=E}catch(pt){_a(A,A.return,pt)}}break;case 3:if(kN=null,M=Cd,Cd=_N(p.containerInfo),_c(p,A),Cd=M,Sc(A),E&4&&b!==null&&b.memoizedState.isDehydrated)try{ly(p.containerInfo)}catch(pt){_a(A,A.return,pt)}Jj&&(Jj=!1,u7(A));break;case 4:E=Cd,Cd=_N(A.stateNode.containerInfo),_c(p,A),Sc(A),Cd=E;break;case 12:_c(p,A),Sc(A);break;case 13:_c(p,A),Sc(A),A.child.flags&8192&&A.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(s3=ve()),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,Zj(A,E)));break;case 22:M=A.memoizedState!==null;var Le=b!==null&&b.memoizedState!==null,ut=zA,jt=zs;if(zA=ut||M,zs=jt||Le,_c(p,A),zs=jt,zA=ut,Sc(A),E&8192)e:for(p=A.stateNode,p._visibility=M?p._visibility&-2:p._visibility|1,M&&(b===null||Le||zA||zs||Cp(A)),b=null,p=A;;){if(p.tag===5||p.tag===26){if(b===null){Le=b=p;try{if(J=Le.stateNode,M)fe=J.style,typeof fe.setProperty=="function"?fe.setProperty("display","none","important"):fe.display="none";else{Ee=Le.stateNode;var Pt=Le.memoizedProps.style,ht=Pt!=null&&Pt.hasOwnProperty("display")?Pt.display:null;Ee.style.display=ht==null||typeof ht=="boolean"?"":(""+ht).trim()}}catch(pt){_a(Le,Le.return,pt)}}}else if(p.tag===6){if(b===null){Le=p;try{Le.stateNode.nodeValue=M?"":Le.memoizedProps}catch(pt){_a(Le,Le.return,pt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===A)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break e;for(;p.sibling===null;){if(p.return===null||p.return===A)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=A.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,Zj(A,b))));break;case 19:_c(p,A),Sc(A),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,Zj(A,E)));break;case 30:break;case 21:break;default:_c(p,A),Sc(A)}}function Sc(A){var p=A.flags;if(p&2){try{for(var b,E=A.return;E!==null;){if(r7(E)){b=E;break}E=E.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var M=b.stateNode,J=Xj(A);AN(A,J,M);break;case 5:var fe=b.stateNode;b.flags&32&&(ko(fe,""),b.flags&=-33);var Ee=Xj(A);AN(A,Ee,fe);break;case 3:case 4:var Le=b.stateNode.containerInfo,ut=Xj(A);Yj(A,ut,Le);break;default:throw Error(n(161))}}catch(jt){_a(A,A.return,jt)}A.flags&=-3}p&4096&&(A.flags&=-4097)}function u7(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var p=A;u7(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),A=A.sibling}}function v0(A,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)s7(A,p.alternate,p),p=p.sibling}function Cp(A){for(A=A.child;A!==null;){var p=A;switch(p.tag){case 0:case 11:case 14:case 15:x0(4,p,p.return),Cp(p);break;case 1:Tf(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&e7(p,p.return,b),Cp(p);break;case 27:ey(p.stateNode);case 26:case 5:Tf(p,p.return),Cp(p);break;case 22:p.memoizedState===null&&Cp(p);break;case 30:Cp(p);break;default:Cp(p)}A=A.sibling}}function b0(A,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,M=A,J=p,fe=J.flags;switch(J.tag){case 0:case 11:case 15:b0(M,J,b),z1(4,J);break;case 1:if(b0(M,J,b),E=J,M=E.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(ut){_a(E,E.return,ut)}if(E=J,M=E.updateQueue,M!==null){var Ee=E.stateNode;try{var Le=M.shared.hiddenCallbacks;if(Le!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Le.length;M++)Pn(Le[M],Ee)}catch(ut){_a(E,E.return,ut)}}b&&fe&64&&ZU(J),$1(J,J.return);break;case 27:n7(J);case 26:case 5:b0(M,J,b),b&&E===null&&fe&4&&t7(J),$1(J,J.return);break;case 12:b0(M,J,b);break;case 13:b0(M,J,b),b&&fe&4&&l7(M,J);break;case 22:J.memoizedState===null&&b0(M,J,b),$1(J,J.return);break;case 30:break;default:b0(M,J,b)}p=p.sibling}}function e3(A,p){var b=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),A=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==b&&(A!=null&&A.refCount++,b!=null&&fp(b))}function t3(A,p){A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&fp(A))}function If(A,p,b,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)d7(A,p,b,E),p=p.sibling}function d7(A,p,b,E){var M=p.flags;switch(p.tag){case 0:case 11:case 15:If(A,p,b,E),M&2048&&z1(9,p);break;case 1:If(A,p,b,E);break;case 3:If(A,p,b,E),M&2048&&(A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&fp(A)));break;case 12:if(M&2048){If(A,p,b,E),A=p.stateNode;try{var J=p.memoizedProps,fe=J.id,Ee=J.onPostCommit;typeof Ee=="function"&&Ee(fe,p.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Le){_a(p,p.return,Le)}}else If(A,p,b,E);break;case 13:If(A,p,b,E);break;case 23:break;case 22:J=p.stateNode,fe=p.alternate,p.memoizedState!==null?J._visibility&2?If(A,p,b,E):G1(A,p):J._visibility&2?If(A,p,b,E):(J._visibility|=2,yx(A,p,b,E,(p.subtreeFlags&10256)!==0)),M&2048&&e3(fe,p);break;case 24:If(A,p,b,E),M&2048&&t3(p.alternate,p);break;default:If(A,p,b,E)}}function yx(A,p,b,E,M){for(M=M&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var J=A,fe=p,Ee=b,Le=E,ut=fe.flags;switch(fe.tag){case 0:case 11:case 15:yx(J,fe,Ee,Le,M),z1(8,fe);break;case 23:break;case 22:var jt=fe.stateNode;fe.memoizedState!==null?jt._visibility&2?yx(J,fe,Ee,Le,M):G1(J,fe):(jt._visibility|=2,yx(J,fe,Ee,Le,M)),M&&ut&2048&&e3(fe.alternate,fe);break;case 24:yx(J,fe,Ee,Le,M),M&&ut&2048&&t3(fe.alternate,fe);break;default:yx(J,fe,Ee,Le,M)}p=p.sibling}}function G1(A,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=A,E=p,M=E.flags;switch(E.tag){case 22:G1(b,E),M&2048&&e3(E.alternate,E);break;case 24:G1(b,E),M&2048&&t3(E.alternate,E);break;default:G1(b,E)}p=p.sibling}}var q1=8192;function wx(A){if(A.subtreeFlags&q1)for(A=A.child;A!==null;)f7(A),A=A.sibling}function f7(A){switch(A.tag){case 26:wx(A),A.flags&q1&&A.memoizedState!==null&&The(Cd,A.memoizedState,A.memoizedProps);break;case 5:wx(A);break;case 3:case 4:var p=Cd;Cd=_N(A.stateNode.containerInfo),wx(A),Cd=p;break;case 22:A.memoizedState===null&&(p=A.alternate,p!==null&&p.memoizedState!==null?(p=q1,q1=16777216,wx(A),q1=p):wx(A));break;default:wx(A)}}function A7(A){var p=A.alternate;if(p!==null&&(A=p.child,A!==null)){p.child=null;do p=A.sibling,A.sibling=null,A=p;while(A!==null)}}function K1(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];zi=E,m7(E,A)}A7(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)h7(A),A=A.sibling}function h7(A){switch(A.tag){case 0:case 11:case 15:K1(A),A.flags&2048&&x0(9,A,A.return);break;case 3:K1(A);break;case 12:K1(A);break;case 22:var p=A.stateNode;A.memoizedState!==null&&p._visibility&2&&(A.return===null||A.return.tag!==13)?(p._visibility&=-3,hN(A)):K1(A);break;default:K1(A)}}function hN(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];zi=E,m7(E,A)}A7(A)}for(A=A.child;A!==null;){switch(p=A,p.tag){case 0:case 11:case 15:x0(8,p,p.return),hN(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,hN(p));break;default:hN(p)}A=A.sibling}}function m7(A,p){for(;zi!==null;){var b=zi;switch(b.tag){case 0:case 11:case 15:x0(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:fp(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,zi=E;else e:for(b=A;zi!==null;){E=zi;var M=E.sibling,J=E.return;if(i7(E),E===b){zi=null;break e}if(M!==null){M.return=J,zi=M;break e}zi=J}}}var qAe={getCacheForType:function(A){var p=Qs(Hs),b=p.data.get(A);return b===void 0&&(b=A(),p.data.set(A,b)),b}},KAe=typeof WeakMap=="function"?WeakMap:Map,da=0,Fa=null,_n=null,Ln=0,fa=0,kc=null,y0=!1,Ex=!1,r3=!1,GA=0,Ns=0,w0=0,_p=0,n3=0,_u=0,Nx=0,W1=null,ql=null,a3=!1,s3=0,mN=1/0,pN=null,E0=null,Ao=0,N0=null,Cx=null,_x=0,i3=0,o3=null,p7=null,X1=0,l3=null;function jc(){if((da&2)!==0&&Ln!==0)return Ln&-Ln;if(H.T!==null){var A=PA;return A!==0?A:m3()}return bt()}function g7(){_u===0&&(_u=(Ln&536870912)===0||Un?ps():536870912);var A=Cu.current;return A!==null&&(A.flags|=32),_u}function Bc(A,p,b){(A===Fa&&(fa===2||fa===9)||A.cancelPendingCommit!==null)&&(Sx(A,0),C0(A,Ln,_u,!1)),Ta(A,b),((da&2)===0||A!==Fa)&&(A===Fa&&((da&2)===0&&(_p|=b),Ns===4&&C0(A,Ln,_u,!1)),Ff(A))}function x7(A,p,b){if((da&6)!==0)throw Error(n(327));var E=!b&&(p&124)===0&&(p&A.expiredLanes)===0||Fn(A,p),M=E?YAe(A,p):d3(A,p,!0),J=E;do{if(M===0){Ex&&!E&&C0(A,p,0,!1);break}else{if(b=A.current.alternate,J&&!WAe(b)){M=d3(A,p,!1),J=!1;continue}if(M===2){if(J=p,A.errorRecoveryDisabledLanes&J)var fe=0;else fe=A.pendingLanes&-536870913,fe=fe!==0?fe:fe&536870912?536870912:0;if(fe!==0){p=fe;e:{var Ee=A;M=W1;var Le=Ee.current.memoizedState.isDehydrated;if(Le&&(Sx(Ee,fe).flags|=256),fe=d3(Ee,fe,!1),fe!==2){if(r3&&!Le){Ee.errorRecoveryDisabledLanes|=J,_p|=J,M=4;break e}J=ql,ql=M,J!==null&&(ql===null?ql=J:ql.push.apply(ql,J))}M=fe}if(J=!1,M!==2)continue}}if(M===1){Sx(A,0),C0(A,p,0,!0);break}e:{switch(E=A,J=M,J){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:C0(E,p,_u,!y0);break e;case 2:ql=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(M=s3+300-ve(),10<M)){if(C0(E,p,_u,!y0),Kr(E,0,!0)!==0)break e;E.timeoutHandle=q7(v7.bind(null,E,b,ql,pN,a3,p,_u,_p,Nx,y0,J,2,-0,0),M);break e}v7(E,b,ql,pN,a3,p,_u,_p,Nx,y0,J,0,-0,0)}}break}while(!0);Ff(A)}function v7(A,p,b,E,M,J,fe,Ee,Le,ut,jt,Pt,ht,pt){if(A.timeoutHandle=-1,Pt=p.subtreeFlags,(Pt&8192||(Pt&16785408)===16785408)&&(ny={stylesheets:null,count:0,unsuspend:Bhe},f7(p),Pt=Ihe(),Pt!==null)){A.cancelPendingCommit=Pt(_7.bind(null,A,p,J,b,E,M,fe,Ee,Le,jt,1,ht,pt)),C0(A,J,fe,!ut);return}_7(A,p,J,b,E,M,fe,Ee,Le)}function WAe(A){for(var p=A;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var M=b[E],J=M.getSnapshot;M=M.value;try{if(!si(J(),M))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function C0(A,p,b,E){p&=~n3,p&=~_p,A.suspendedLanes|=p,A.pingedLanes&=~p,E&&(A.warmLanes|=p),E=A.expirationTimes;for(var M=p;0<M;){var J=31-Tt(M),fe=1<<J;E[J]=-1,M&=~fe}b!==0&&vr(A,b,p)}function gN(){return(da&6)===0?(Y1(0),!1):!0}function c3(){if(_n!==null){if(fa===0)var A=_n.return;else A=_n,vd=oi=null,Ax(A),vx=null,Q1=0,A=_n;for(;A!==null;)JU(A.alternate,A),A=A.return;_n=null}}function Sx(A,p){var b=A.timeoutHandle;b!==-1&&(A.timeoutHandle=-1,Ahe(b)),b=A.cancelPendingCommit,b!==null&&(A.cancelPendingCommit=null,b()),c3(),Fa=A,_n=b=vu(A.current,null),Ln=p,fa=0,kc=null,y0=!1,Ex=Fn(A,p),r3=!1,Nx=_u=n3=_p=w0=Ns=0,ql=W1=null,a3=!1,(p&8)!==0&&(p|=p&32);var E=A.entangledLanes;if(E!==0)for(A=A.entanglements,E&=p;0<E;){var M=31-Tt(E),J=1<<M;p|=A[M],E&=~J}return GA=p,Hl(),b}function b7(A,p){Ir=null,H.H=aN,p===ge||p===ye?(p=Xe(),fa=3):p===xe?(p=Xe(),fa=4):fa=p===LU?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,kc=p,_n===null&&(Ns=1,cN(A,gn(p,A.current)))}function y7(){var A=H.H;return H.H=aN,A===null?aN:A}function w7(){var A=H.A;return H.A=qAe,A}function u3(){Ns=4,y0||(Ln&4194048)!==Ln&&Cu.current!==null||(Ex=!0),(w0&134217727)===0&&(_p&134217727)===0||Fa===null||C0(Fa,Ln,_u,!1)}function d3(A,p,b){var E=da;da|=2;var M=y7(),J=w7();(Fa!==A||Ln!==p)&&(pN=null,Sx(A,p)),p=!1;var fe=Ns;e:do try{if(fa!==0&&_n!==null){var Ee=_n,Le=kc;switch(fa){case 8:c3(),fe=6;break e;case 3:case 2:case 9:case 6:Cu.current===null&&(p=!0);var ut=fa;if(fa=0,kc=null,kx(A,Ee,Le,ut),b&&Ex){fe=0;break e}break;default:ut=fa,fa=0,kc=null,kx(A,Ee,Le,ut)}}XAe(),fe=Ns;break}catch(jt){b7(A,jt)}while(!0);return p&&A.shellSuspendCounter++,vd=oi=null,da=E,H.H=M,H.A=J,_n===null&&(Fa=null,Ln=0,Hl()),fe}function XAe(){for(;_n!==null;)E7(_n)}function YAe(A,p){var b=da;da|=2;var E=y7(),M=w7();Fa!==A||Ln!==p?(pN=null,mN=ve()+500,Sx(A,p)):Ex=Fn(A,p);e:do try{if(fa!==0&&_n!==null){p=_n;var J=kc;t:switch(fa){case 1:fa=0,kc=null,kx(A,p,J,1);break;case 2:case 9:if(Ie(J)){fa=0,kc=null,N7(p);break}p=function(){fa!==2&&fa!==9||Fa!==A||(fa=7),Ff(A)},J.then(p,p);break e;case 3:fa=7;break e;case 4:fa=5;break e;case 7:Ie(J)?(fa=0,kc=null,N7(p)):(fa=0,kc=null,kx(A,p,J,7));break;case 5:var fe=null;switch(_n.tag){case 26:fe=_n.memoizedState;case 5:case 27:var Ee=_n;if(!fe||s9(fe)){fa=0,kc=null;var Le=Ee.sibling;if(Le!==null)_n=Le;else{var ut=Ee.return;ut!==null?(_n=ut,xN(ut)):_n=null}break t}}fa=0,kc=null,kx(A,p,J,5);break;case 6:fa=0,kc=null,kx(A,p,J,6);break;case 8:c3(),Ns=6;break e;default:throw Error(n(462))}}JAe();break}catch(jt){b7(A,jt)}while(!0);return vd=oi=null,H.H=E,H.A=M,da=b,_n!==null?0:(Fa=null,Ln=0,Hl(),Ns)}function JAe(){for(;_n!==null&&!_e();)E7(_n)}function E7(A){var p=XU(A.alternate,A,GA);A.memoizedProps=A.pendingProps,p===null?xN(A):_n=p}function N7(A){var p=A,b=p.alternate;switch(p.tag){case 15:case 0:p=zU(b,p,p.pendingProps,p.type,void 0,Ln);break;case 11:p=zU(b,p,p.pendingProps,p.type.render,p.ref,Ln);break;case 5:Ax(p);default:JU(b,p),p=_n=lp(p,GA),p=XU(b,p,GA)}A.memoizedProps=A.pendingProps,p===null?xN(A):_n=p}function kx(A,p,b,E){vd=oi=null,Ax(p),vx=null,Q1=0;var M=p.return;try{if(QAe(A,M,p,b,Ln)){Ns=1,cN(A,gn(b,A.current)),_n=null;return}}catch(J){if(M!==null)throw _n=M,J;Ns=1,cN(A,gn(b,A.current)),_n=null;return}p.flags&32768?(Un||E===1?A=!0:Ex||(Ln&536870912)!==0?A=!1:(y0=A=!0,(E===2||E===9||E===3||E===6)&&(E=Cu.current,E!==null&&E.tag===13&&(E.flags|=16384))),C7(p,A)):xN(p)}function xN(A){var p=A;do{if((p.flags&32768)!==0){C7(p,y0);return}A=p.return;var b=VAe(p.alternate,p,GA);if(b!==null){_n=b;return}if(p=p.sibling,p!==null){_n=p;return}_n=p=A}while(p!==null);Ns===0&&(Ns=5)}function C7(A,p){do{var b=zAe(A.alternate,A);if(b!==null){b.flags&=32767,_n=b;return}if(b=A.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(A=A.sibling,A!==null)){_n=A;return}_n=A=b}while(A!==null);Ns=6,_n=null}function _7(A,p,b,E,M,J,fe,Ee,Le){A.cancelPendingCommit=null;do vN();while(Ao!==0);if((da&6)!==0)throw Error(n(327));if(p!==null){if(p===A.current)throw Error(n(177));if(J=p.lanes|p.childLanes,J|=as,an(A,b,J,fe,Ee,Le),A===Fa&&(_n=Fa=null,Ln=0),Cx=p,N0=A,_x=b,i3=J,o3=M,p7=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,rhe(be,function(){return T7(),null})):(A.callbackNode=null,A.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=H.T,H.T=null,M=q.p,q.p=2,fe=da,da|=4;try{$Ae(A,p,b)}finally{da=fe,q.p=M,H.T=E}}Ao=1,S7(),k7(),j7()}}function S7(){if(Ao===1){Ao=0;var A=N0,p=Cx,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=H.T,H.T=null;var E=q.p;q.p=2;var M=da;da|=4;try{c7(p,A);var J=E3,fe=lo(A.containerInfo),Ee=J.focusedElem,Le=J.selectionRange;if(fe!==Ee&&Ee&&Ee.ownerDocument&&hf(Ee.ownerDocument.documentElement,Ee)){if(Le!==null&&_i(Ee)){var ut=Le.start,jt=Le.end;if(jt===void 0&&(jt=ut),"selectionStart"in Ee)Ee.selectionStart=ut,Ee.selectionEnd=Math.min(jt,Ee.value.length);else{var Pt=Ee.ownerDocument||document,ht=Pt&&Pt.defaultView||window;if(ht.getSelection){var pt=ht.getSelection(),Wr=Ee.textContent.length,Rr=Math.min(Le.start,Wr),ya=Le.end===void 0?Rr:Math.min(Le.end,Wr);!pt.extend&&Rr>ya&&(fe=ya,ya=Rr,Rr=fe);var Ye=dd(Ee,Rr),ze=dd(Ee,ya);if(Ye&&ze&&(pt.rangeCount!==1||pt.anchorNode!==Ye.node||pt.anchorOffset!==Ye.offset||pt.focusNode!==ze.node||pt.focusOffset!==ze.offset)){var it=Pt.createRange();it.setStart(Ye.node,Ye.offset),pt.removeAllRanges(),Rr>ya?(pt.addRange(it),pt.extend(ze.node,ze.offset)):(it.setEnd(ze.node,ze.offset),pt.addRange(it))}}}}for(Pt=[],pt=Ee;pt=pt.parentNode;)pt.nodeType===1&&Pt.push({element:pt,left:pt.scrollLeft,top:pt.scrollTop});for(typeof Ee.focus=="function"&&Ee.focus(),Ee=0;Ee<Pt.length;Ee++){var It=Pt[Ee];It.element.scrollLeft=It.left,It.element.scrollTop=It.top}}TN=!!w3,E3=w3=null}finally{da=M,q.p=E,H.T=b}}A.current=p,Ao=2}}function k7(){if(Ao===2){Ao=0;var A=N0,p=Cx,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=H.T,H.T=null;var E=q.p;q.p=2;var M=da;da|=4;try{s7(A,p.alternate,p)}finally{da=M,q.p=E,H.T=b}}Ao=3}}function j7(){if(Ao===4||Ao===3){Ao=0,Ae();var A=N0,p=Cx,b=_x,E=p7;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Ao=5:(Ao=0,Cx=N0=null,B7(A,A.pendingLanes));var M=A.pendingLanes;if(M===0&&(E0=null),Ze(b),p=p.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(At,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=H.T,M=q.p,q.p=2,H.T=null;try{for(var J=A.onRecoverableError,fe=0;fe<E.length;fe++){var Ee=E[fe];J(Ee.value,{componentStack:Ee.stack})}}finally{H.T=p,q.p=M}}(_x&3)!==0&&vN(),Ff(A),M=A.pendingLanes,(b&4194090)!==0&&(M&42)!==0?A===l3?X1++:(X1=0,l3=A):X1=0,Y1(0)}}function B7(A,p){(A.pooledCacheLanes&=p)===0&&(p=A.pooledCache,p!=null&&(A.pooledCache=null,fp(p)))}function vN(A){return S7(),k7(),j7(),T7()}function T7(){if(Ao!==5)return!1;var A=N0,p=i3;i3=0;var b=Ze(_x),E=H.T,M=q.p;try{q.p=32>b?32:b,H.T=null,b=o3,o3=null;var J=N0,fe=_x;if(Ao=0,Cx=N0=null,_x=0,(da&6)!==0)throw Error(n(331));var Ee=da;if(da|=4,h7(J.current),d7(J,J.current,fe,b),da=Ee,Y1(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(At,J)}catch{}return!0}finally{q.p=M,H.T=E,B7(A,p)}}function I7(A,p,b){p=gn(b,p),p=Uj(A.stateNode,p,2),A=Ot(A,p,2),A!==null&&(Ta(A,2),Ff(A))}function _a(A,p,b){if(A.tag===3)I7(A,A,b);else for(;p!==null;){if(p.tag===3){I7(p,A,b);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(E0===null||!E0.has(E))){A=gn(b,A),b=PU(2),E=Ot(p,b,2),E!==null&&(RU(b,E,p,A),Ta(E,2),Ff(E));break}}p=p.return}}function f3(A,p,b){var E=A.pingCache;if(E===null){E=A.pingCache=new KAe;var M=new Set;E.set(p,M)}else M=E.get(p),M===void 0&&(M=new Set,E.set(p,M));M.has(b)||(r3=!0,M.add(b),A=ZAe.bind(null,A,p,b),p.then(A,A))}function ZAe(A,p,b){var E=A.pingCache;E!==null&&E.delete(p),A.pingedLanes|=A.suspendedLanes&b,A.warmLanes&=~b,Fa===A&&(Ln&b)===b&&(Ns===4||Ns===3&&(Ln&62914560)===Ln&&300>ve()-s3?(da&2)===0&&Sx(A,0):n3|=b,Nx===Ln&&(Nx=0)),Ff(A)}function F7(A,p){p===0&&(p=pn()),A=Ad(A,p),A!==null&&(Ta(A,p),Ff(A))}function ehe(A){var p=A.memoizedState,b=0;p!==null&&(b=p.retryLane),F7(A,b)}function the(A,p){var b=0;switch(A.tag){case 13:var E=A.stateNode,M=A.memoizedState;M!==null&&(b=M.retryLane);break;case 19:E=A.stateNode;break;case 22:E=A.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(p),F7(A,b)}function rhe(A,p){return Be(A,p)}var bN=null,jx=null,A3=!1,yN=!1,h3=!1,Sp=0;function Ff(A){A!==jx&&A.next===null&&(jx===null?bN=jx=A:jx=jx.next=A),yN=!0,A3||(A3=!0,ahe())}function Y1(A,p){if(!h3&&yN){h3=!0;do for(var b=!1,E=bN;E!==null;){if(A!==0){var M=E.pendingLanes;if(M===0)var J=0;else{var fe=E.suspendedLanes,Ee=E.pingedLanes;J=(1<<31-Tt(42|A)+1)-1,J&=M&~(fe&~Ee),J=J&201326741?J&201326741|1:J?J|2:0}J!==0&&(b=!0,R7(E,J))}else J=Ln,J=Kr(E,E===Fa?J:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(J&3)===0||Fn(E,J)||(b=!0,R7(E,J));E=E.next}while(b);h3=!1}}function nhe(){O7()}function O7(){yN=A3=!1;var A=0;Sp!==0&&(fhe()&&(A=Sp),Sp=0);for(var p=ve(),b=null,E=bN;E!==null;){var M=E.next,J=D7(E,p);J===0?(E.next=null,b===null?bN=M:b.next=M,M===null&&(jx=b)):(b=E,(A!==0||(J&3)!==0)&&(yN=!0)),E=M}Y1(A)}function D7(A,p){for(var b=A.suspendedLanes,E=A.pingedLanes,M=A.expirationTimes,J=A.pendingLanes&-62914561;0<J;){var fe=31-Tt(J),Ee=1<<fe,Le=M[fe];Le===-1?((Ee&b)===0||(Ee&E)!==0)&&(M[fe]=Lr(Ee,p)):Le<=p&&(A.expiredLanes|=Ee),J&=~Ee}if(p=Fa,b=Ln,b=Kr(A,A===p?b:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E=A.callbackNode,b===0||A===p&&(fa===2||fa===9)||A.cancelPendingCommit!==null)return E!==null&&E!==null&&je(E),A.callbackNode=null,A.callbackPriority=0;if((b&3)===0||Fn(A,b)){if(p=b&-b,p===A.callbackPriority)return p;switch(E!==null&&je(E),Ze(b)){case 2:case 8:b=de;break;case 32:b=be;break;case 268435456:b=Ve;break;default:b=be}return E=P7.bind(null,A),b=Be(b,E),A.callbackPriority=p,A.callbackNode=b,p}return E!==null&&E!==null&&je(E),A.callbackPriority=2,A.callbackNode=null,2}function P7(A,p){if(Ao!==0&&Ao!==5)return A.callbackNode=null,A.callbackPriority=0,null;var b=A.callbackNode;if(vN()&&A.callbackNode!==b)return null;var E=Ln;return E=Kr(A,A===Fa?E:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E===0?null:(x7(A,E,p),D7(A,ve()),A.callbackNode!=null&&A.callbackNode===b?P7.bind(null,A):null)}function R7(A,p){if(vN())return null;x7(A,p,!0)}function ahe(){hhe(function(){(da&6)!==0?Be(Ue,nhe):O7()})}function m3(){return Sp===0&&(Sp=ps()),Sp}function L7(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:pc(""+A)}function M7(A,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,A.id&&b.setAttribute("form",A.id),p.parentNode.insertBefore(b,p),A=new FormData(A),b.parentNode.removeChild(b),A}function she(A,p,b,E,M){if(p==="submit"&&b&&b.stateNode===M){var J=L7((M[br]||null).action),fe=E.submitter;fe&&(p=(p=fe[br]||null)?L7(p.formAction):fe.getAttribute("formAction"),p!==null&&(J=p,fe=null));var Ee=new uu("action","action",null,E,M);A.push({event:Ee,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Sp!==0){var Le=fe?M7(M,fe):new FormData(M);Nu(b,{pending:!0,data:Le,method:M.method,action:J},null,Le)}}else typeof J=="function"&&(Ee.preventDefault(),Le=fe?M7(M,fe):new FormData(M),Nu(b,{pending:!0,data:Le,method:M.method,action:J},J,Le))},currentTarget:M}]})}}for(var p3=0;p3<BA.length;p3++){var g3=BA[p3],ihe=g3.toLowerCase(),ohe=g3[0].toUpperCase()+g3.slice(1);Wa(ihe,"on"+ohe)}Wa(s0,"onAnimationEnd"),Wa(pf,"onAnimationIteration"),Wa(gf,"onAnimationStart"),Wa("dblclick","onDoubleClick"),Wa("focusin","onFocus"),Wa("focusout","onBlur"),Wa(xf,"onTransitionRun"),Wa(jA,"onTransitionStart"),Wa(i0,"onTransitionCancel"),Wa(vf,"onTransitionEnd"),$t("onMouseEnter",["mouseout","mouseover"]),$t("onMouseLeave",["mouseout","mouseover"]),$t("onPointerEnter",["pointerout","pointerover"]),$t("onPointerLeave",["pointerout","pointerover"]),Dt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var J1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lhe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(J1));function U7(A,p){p=(p&4)!==0;for(var b=0;b<A.length;b++){var E=A[b],M=E.event;E=E.listeners;e:{var J=void 0;if(p)for(var fe=E.length-1;0<=fe;fe--){var Ee=E[fe],Le=Ee.instance,ut=Ee.currentTarget;if(Ee=Ee.listener,Le!==J&&M.isPropagationStopped())break e;J=Ee,M.currentTarget=ut;try{J(M)}catch(jt){lN(jt)}M.currentTarget=null,J=Le}else for(fe=0;fe<E.length;fe++){if(Ee=E[fe],Le=Ee.instance,ut=Ee.currentTarget,Ee=Ee.listener,Le!==J&&M.isPropagationStopped())break e;J=Ee,M.currentTarget=ut;try{J(M)}catch(jt){lN(jt)}M.currentTarget=null,J=Le}}}}function Sn(A,p){var b=p[Or];b===void 0&&(b=p[Or]=new Set);var E=A+"__bubble";b.has(E)||(Q7(p,A,2,!1),b.add(E))}function x3(A,p,b){var E=0;p&&(E|=4),Q7(b,A,E,p)}var wN="_reactListening"+Math.random().toString(36).slice(2);function v3(A){if(!A[wN]){A[wN]=!0,at.forEach(function(b){b!=="selectionchange"&&(lhe.has(b)||x3(b,!1,A),x3(b,!0,A))});var p=A.nodeType===9?A:A.ownerDocument;p===null||p[wN]||(p[wN]=!0,x3("selectionchange",!1,p))}}function Q7(A,p,b,E){switch(d9(p)){case 2:var M=Dhe;break;case 8:M=Phe;break;default:M=F3}b=M.bind(null,p,b,A),M=void 0,!oo||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(M=!0),E?M!==void 0?A.addEventListener(p,b,{capture:!0,passive:M}):A.addEventListener(p,b,!0):M!==void 0?A.addEventListener(p,b,{passive:M}):A.addEventListener(p,b,!1)}function b3(A,p,b,E,M){var J=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var fe=E.tag;if(fe===3||fe===4){var Ee=E.stateNode.containerInfo;if(Ee===M)break;if(fe===4)for(fe=E.return;fe!==null;){var Le=fe.tag;if((Le===3||Le===4)&&fe.stateNode.containerInfo===M)return;fe=fe.return}for(;Ee!==null;){if(fe=Te(Ee),fe===null)return;if(Le=fe.tag,Le===5||Le===6||Le===26||Le===27){E=J=fe;continue e}Ee=Ee.parentNode}}E=E.return}e0(function(){var ut=J,jt=ca(b),Pt=[];e:{var ht=fd.get(A);if(ht!==void 0){var pt=uu,Wr=A;switch(A){case"keypress":if(To(b)===0)break e;case"keydown":case"keyup":pt=bc;break;case"focusin":Wr="focus",pt=fu;break;case"focusout":Wr="blur",pt=fu;break;case"beforeblur":case"afterblur":pt=fu;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=uf;break;case s0:case pf:case gf:pt=of;break;case vf:pt=me;break;case"scroll":case"scrollend":pt=EA;break;case"wheel":pt=Me;break;case"copy":case"cut":case"paste":pt=lf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=ud;break;case"toggle":case"beforetoggle":pt=Ct}var Rr=(p&4)!==0,ya=!Rr&&(A==="scroll"||A==="scrollend"),Ye=Rr?ht!==null?ht+"Capture":null:ht;Rr=[];for(var ze=ut,it;ze!==null;){var It=ze;if(it=It.stateNode,It=It.tag,It!==5&&It!==26&&It!==27||it===null||Ye===null||(It=Li(ze,Ye),It!=null&&Rr.push(Z1(ze,It,it))),ya)break;ze=ze.return}0<Rr.length&&(ht=new pt(ht,Wr,null,b,jt),Pt.push({event:ht,listeners:Rr}))}}if((p&7)===0){e:{if(ht=A==="mouseover"||A==="pointerover",pt=A==="mouseout"||A==="pointerout",ht&&b!==Ol&&(Wr=b.relatedTarget||b.fromElement)&&(Te(Wr)||Wr[ur]))break e;if((pt||ht)&&(ht=jt.window===jt?jt:(ht=jt.ownerDocument)?ht.defaultView||ht.parentWindow:window,pt?(Wr=b.relatedTarget||b.toElement,pt=ut,Wr=Wr?Te(Wr):null,Wr!==null&&(ya=s(Wr),Rr=Wr.tag,Wr!==ya||Rr!==5&&Rr!==27&&Rr!==6)&&(Wr=null)):(pt=null,Wr=ut),pt!==Wr)){if(Rr=bs,It="onMouseLeave",Ye="onMouseEnter",ze="mouse",(A==="pointerout"||A==="pointerover")&&(Rr=ud,It="onPointerLeave",Ye="onPointerEnter",ze="pointer"),ya=pt==null?ht:et(pt),it=Wr==null?ht:et(Wr),ht=new Rr(It,ze+"leave",pt,b,jt),ht.target=ya,ht.relatedTarget=it,It=null,Te(jt)===ut&&(Rr=new Rr(Ye,ze+"enter",Wr,b,jt),Rr.target=it,Rr.relatedTarget=ya,It=Rr),ya=It,pt&&Wr)t:{for(Rr=pt,Ye=Wr,ze=0,it=Rr;it;it=Bx(it))ze++;for(it=0,It=Ye;It;It=Bx(It))it++;for(;0<ze-it;)Rr=Bx(Rr),ze--;for(;0<it-ze;)Ye=Bx(Ye),it--;for(;ze--;){if(Rr===Ye||Ye!==null&&Rr===Ye.alternate)break t;Rr=Bx(Rr),Ye=Bx(Ye)}Rr=null}else Rr=null;pt!==null&&H7(Pt,ht,pt,Rr,!1),Wr!==null&&ya!==null&&H7(Pt,ya,Wr,Rr,!0)}}e:{if(ht=ut?et(ut):window,pt=ht.nodeName&&ht.nodeName.toLowerCase(),pt==="select"||pt==="input"&&ht.type==="file")var pr=n0;else if(ta(ht))if(CA)pr=sx;else{pr=C1;var En=Fo}else pt=ht.nodeName,!pt||pt.toLowerCase()!=="input"||ht.type!=="checkbox"&&ht.type!=="radio"?ut&&yA(ut.elementType)&&(pr=n0):pr=ip;if(pr&&(pr=pr(A,ut))){Ul(Pt,pr,b,jt);break e}En&&En(A,ht,ut),A==="focusout"&&ut&&ht.type==="number"&&ut.memoizedProps.value!=null&&ou(ht,"number",ht.value)}switch(En=ut?et(ut):window,A){case"focusin":(ta(En)||En.contentEditable==="true")&&(Oo=En,yc=ut,gu=null);break;case"focusout":gu=yc=Oo=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,Ka(Pt,b,jt);break;case"selectionchange":if(mf)break;case"keydown":case"keyup":Ka(Pt,b,jt)}var Cr;if(er)e:{switch(A){case"compositionstart":var Mr="onCompositionStart";break e;case"compositionend":Mr="onCompositionEnd";break e;case"compositionupdate":Mr="onCompositionUpdate";break e}Mr=void 0}else Pr?ct(A,b)&&(Mr="onCompositionEnd"):A==="keydown"&&b.keyCode===229&&(Mr="onCompositionStart");Mr&&(ce&&b.locale!=="ko"&&(Pr||Mr!=="onCompositionStart"?Mr==="onCompositionEnd"&&Pr&&(Cr=wA()):(Bo=jt,cu="value"in Bo?Bo.value:Bo.textContent,Pr=!0)),En=EN(ut,Mr),0<En.length&&(Mr=new od(Mr,A,null,b,jt),Pt.push({event:Mr,listeners:En}),Cr?Mr.data=Cr:(Cr=Vt(b),Cr!==null&&(Mr.data=Cr)))),(Cr=se?wn(A,b):Jr(A,b))&&(Mr=EN(ut,"onBeforeInput"),0<Mr.length&&(En=new od("onBeforeInput","beforeinput",null,b,jt),Pt.push({event:En,listeners:Mr}),En.data=Cr)),she(Pt,A,ut,b,jt)}U7(Pt,p)})}function Z1(A,p,b){return{instance:A,listener:p,currentTarget:b}}function EN(A,p){for(var b=p+"Capture",E=[];A!==null;){var M=A,J=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||J===null||(M=Li(A,b),M!=null&&E.unshift(Z1(A,M,J)),M=Li(A,p),M!=null&&E.push(Z1(A,M,J))),A.tag===3)return E;A=A.return}return[]}function Bx(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function H7(A,p,b,E,M){for(var J=p._reactName,fe=[];b!==null&&b!==E;){var Ee=b,Le=Ee.alternate,ut=Ee.stateNode;if(Ee=Ee.tag,Le!==null&&Le===E)break;Ee!==5&&Ee!==26&&Ee!==27||ut===null||(Le=ut,M?(ut=Li(b,J),ut!=null&&fe.unshift(Z1(b,ut,Le))):M||(ut=Li(b,J),ut!=null&&fe.push(Z1(b,ut,Le)))),b=b.return}fe.length!==0&&A.push({event:p,listeners:fe})}var che=/\r\n?/g,uhe=/\u0000|\uFFFD/g;function V7(A){return(typeof A=="string"?A:""+A).replace(che,`
`).replace(uhe,"")}function z7(A,p){return p=V7(p),V7(A)===p}function NN(){}function ba(A,p,b,E,M,J){switch(b){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||ko(A,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&ko(A,""+E);break;case"className":ln(A,"class",E);break;case"tabIndex":ln(A,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ln(A,b,E);break;case"style":bA(A,E,J);break;case"data":if(p!=="object"){ln(A,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||b!=="href")){A.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(b);break}E=pc(""+E),A.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){A.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof J=="function"&&(b==="formAction"?(p!=="input"&&ba(A,p,"name",M.name,M,null),ba(A,p,"formEncType",M.formEncType,M,null),ba(A,p,"formMethod",M.formMethod,M,null),ba(A,p,"formTarget",M.formTarget,M,null)):(ba(A,p,"encType",M.encType,M,null),ba(A,p,"method",M.method,M,null),ba(A,p,"target",M.target,M,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(b);break}E=pc(""+E),A.setAttribute(b,E);break;case"onClick":E!=null&&(A.onclick=NN);break;case"onScroll":E!=null&&Sn("scroll",A);break;case"onScrollEnd":E!=null&&Sn("scrollend",A);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(b=E.__html,b!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=b}}break;case"multiple":A.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":A.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){A.removeAttribute("xlink:href");break}b=pc(""+E),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,""+E):A.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,""):A.removeAttribute(b);break;case"capture":case"download":E===!0?A.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,E):A.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?A.setAttribute(b,E):A.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?A.removeAttribute(b):A.setAttribute(b,E);break;case"popover":Sn("beforetoggle",A),Sn("toggle",A),on(A,"popover",E);break;case"xlinkActuate":An(A,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":An(A,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":An(A,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":An(A,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":An(A,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":An(A,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":An(A,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":An(A,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":An(A,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":on(A,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=mc.get(b)||b,on(A,b,E))}}function y3(A,p,b,E,M,J){switch(b){case"style":bA(A,E,J);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(b=E.__html,b!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=b}}break;case"children":typeof E=="string"?ko(A,E):(typeof E=="number"||typeof E=="bigint")&&ko(A,""+E);break;case"onScroll":E!=null&&Sn("scroll",A);break;case"onScrollEnd":E!=null&&Sn("scrollend",A);break;case"onClick":E!=null&&(A.onclick=NN);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lt.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(M=b.endsWith("Capture"),p=b.slice(2,M?b.length-7:void 0),J=A[br]||null,J=J!=null?J[b]:null,typeof J=="function"&&A.removeEventListener(p,J,M),typeof E=="function")){typeof J!="function"&&J!==null&&(b in A?A[b]=null:A.hasAttribute(b)&&A.removeAttribute(b)),A.addEventListener(p,E,M);break e}b in A?A[b]=E:E===!0?A.setAttribute(b,""):on(A,b,E)}}}function ho(A,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Sn("error",A),Sn("load",A);var E=!1,M=!1,J;for(J in b)if(b.hasOwnProperty(J)){var fe=b[J];if(fe!=null)switch(J){case"src":E=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ba(A,p,J,fe,b,null)}}M&&ba(A,p,"srcSet",b.srcSet,b,null),E&&ba(A,p,"src",b.src,b,null);return;case"input":Sn("invalid",A);var Ee=J=fe=M=null,Le=null,ut=null;for(E in b)if(b.hasOwnProperty(E)){var jt=b[E];if(jt!=null)switch(E){case"name":M=jt;break;case"type":fe=jt;break;case"checked":Le=jt;break;case"defaultChecked":ut=jt;break;case"value":J=jt;break;case"defaultValue":Ee=jt;break;case"children":case"dangerouslySetInnerHTML":if(jt!=null)throw Error(n(137,p));break;default:ba(A,p,E,jt,b,null)}}iu(A,J,Ee,Le,ut,fe,M,!1),su(A);return;case"select":Sn("invalid",A),E=fe=J=null;for(M in b)if(b.hasOwnProperty(M)&&(Ee=b[M],Ee!=null))switch(M){case"value":J=Ee;break;case"defaultValue":fe=Ee;break;case"multiple":E=Ee;default:ba(A,p,M,Ee,b,null)}p=J,b=fe,A.multiple=!!E,p!=null?Fl(A,!!E,p,!1):b!=null&&Fl(A,!!E,b,!0);return;case"textarea":Sn("invalid",A),J=M=E=null;for(fe in b)if(b.hasOwnProperty(fe)&&(Ee=b[fe],Ee!=null))switch(fe){case"value":E=Ee;break;case"defaultValue":M=Ee;break;case"children":J=Ee;break;case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(n(91));break;default:ba(A,p,fe,Ee,b,null)}lu(A,E,M,J),su(A);return;case"option":for(Le in b)if(b.hasOwnProperty(Le)&&(E=b[Le],E!=null))switch(Le){case"selected":A.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:ba(A,p,Le,E,b,null)}return;case"dialog":Sn("beforetoggle",A),Sn("toggle",A),Sn("cancel",A),Sn("close",A);break;case"iframe":case"object":Sn("load",A);break;case"video":case"audio":for(E=0;E<J1.length;E++)Sn(J1[E],A);break;case"image":Sn("error",A),Sn("load",A);break;case"details":Sn("toggle",A);break;case"embed":case"source":case"link":Sn("error",A),Sn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in b)if(b.hasOwnProperty(ut)&&(E=b[ut],E!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ba(A,p,ut,E,b,null)}return;default:if(yA(p)){for(jt in b)b.hasOwnProperty(jt)&&(E=b[jt],E!==void 0&&y3(A,p,jt,E,b,void 0));return}}for(Ee in b)b.hasOwnProperty(Ee)&&(E=b[Ee],E!=null&&ba(A,p,Ee,E,b,null))}function dhe(A,p,b,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,J=null,fe=null,Ee=null,Le=null,ut=null,jt=null;for(pt in b){var Pt=b[pt];if(b.hasOwnProperty(pt)&&Pt!=null)switch(pt){case"checked":break;case"value":break;case"defaultValue":Le=Pt;default:E.hasOwnProperty(pt)||ba(A,p,pt,null,E,Pt)}}for(var ht in E){var pt=E[ht];if(Pt=b[ht],E.hasOwnProperty(ht)&&(pt!=null||Pt!=null))switch(ht){case"type":J=pt;break;case"name":M=pt;break;case"checked":ut=pt;break;case"defaultChecked":jt=pt;break;case"value":fe=pt;break;case"defaultValue":Ee=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(n(137,p));break;default:pt!==Pt&&ba(A,p,ht,pt,E,Pt)}}Ni(A,fe,Ee,Le,ut,jt,J,M);return;case"select":pt=fe=Ee=ht=null;for(J in b)if(Le=b[J],b.hasOwnProperty(J)&&Le!=null)switch(J){case"value":break;case"multiple":pt=Le;default:E.hasOwnProperty(J)||ba(A,p,J,null,E,Le)}for(M in E)if(J=E[M],Le=b[M],E.hasOwnProperty(M)&&(J!=null||Le!=null))switch(M){case"value":ht=J;break;case"defaultValue":Ee=J;break;case"multiple":fe=J;default:J!==Le&&ba(A,p,M,J,E,Le)}p=Ee,b=fe,E=pt,ht!=null?Fl(A,!!b,ht,!1):!!E!=!!b&&(p!=null?Fl(A,!!b,p,!0):Fl(A,!!b,b?[]:"",!1));return;case"textarea":pt=ht=null;for(Ee in b)if(M=b[Ee],b.hasOwnProperty(Ee)&&M!=null&&!E.hasOwnProperty(Ee))switch(Ee){case"value":break;case"children":break;default:ba(A,p,Ee,null,E,M)}for(fe in E)if(M=E[fe],J=b[fe],E.hasOwnProperty(fe)&&(M!=null||J!=null))switch(fe){case"value":ht=M;break;case"defaultValue":pt=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==J&&ba(A,p,fe,M,E,J)}Vn(A,ht,pt);return;case"option":for(var Wr in b)if(ht=b[Wr],b.hasOwnProperty(Wr)&&ht!=null&&!E.hasOwnProperty(Wr))switch(Wr){case"selected":A.selected=!1;break;default:ba(A,p,Wr,null,E,ht)}for(Le in E)if(ht=E[Le],pt=b[Le],E.hasOwnProperty(Le)&&ht!==pt&&(ht!=null||pt!=null))switch(Le){case"selected":A.selected=ht&&typeof ht!="function"&&typeof ht!="symbol";break;default:ba(A,p,Le,ht,E,pt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rr in b)ht=b[Rr],b.hasOwnProperty(Rr)&&ht!=null&&!E.hasOwnProperty(Rr)&&ba(A,p,Rr,null,E,ht);for(ut in E)if(ht=E[ut],pt=b[ut],E.hasOwnProperty(ut)&&ht!==pt&&(ht!=null||pt!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(n(137,p));break;default:ba(A,p,ut,ht,E,pt)}return;default:if(yA(p)){for(var ya in b)ht=b[ya],b.hasOwnProperty(ya)&&ht!==void 0&&!E.hasOwnProperty(ya)&&y3(A,p,ya,void 0,E,ht);for(jt in E)ht=E[jt],pt=b[jt],!E.hasOwnProperty(jt)||ht===pt||ht===void 0&&pt===void 0||y3(A,p,jt,ht,E,pt);return}}for(var Ye in b)ht=b[Ye],b.hasOwnProperty(Ye)&&ht!=null&&!E.hasOwnProperty(Ye)&&ba(A,p,Ye,null,E,ht);for(Pt in E)ht=E[Pt],pt=b[Pt],!E.hasOwnProperty(Pt)||ht===pt||ht==null&&pt==null||ba(A,p,Pt,ht,E,pt)}var w3=null,E3=null;function CN(A){return A.nodeType===9?A:A.ownerDocument}function $7(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function G7(A,p){if(A===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&p==="foreignObject"?0:A}function N3(A,p){return A==="textarea"||A==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var C3=null;function fhe(){var A=window.event;return A&&A.type==="popstate"?A===C3?!1:(C3=A,!0):(C3=null,!1)}var q7=typeof setTimeout=="function"?setTimeout:void 0,Ahe=typeof clearTimeout=="function"?clearTimeout:void 0,K7=typeof Promise=="function"?Promise:void 0,hhe=typeof queueMicrotask=="function"?queueMicrotask:typeof K7<"u"?function(A){return K7.resolve(null).then(A).catch(mhe)}:q7;function mhe(A){setTimeout(function(){throw A})}function _0(A){return A==="head"}function W7(A,p){var b=p,E=0,M=0;do{var J=b.nextSibling;if(A.removeChild(b),J&&J.nodeType===8)if(b=J.data,b==="/$"){if(0<E&&8>E){b=E;var fe=A.ownerDocument;if(b&1&&ey(fe.documentElement),b&2&&ey(fe.body),b&4)for(b=fe.head,ey(b),fe=b.firstChild;fe;){var Ee=fe.nextSibling,Le=fe.nodeName;fe[Se]||Le==="SCRIPT"||Le==="STYLE"||Le==="LINK"&&fe.rel.toLowerCase()==="stylesheet"||b.removeChild(fe),fe=Ee}}if(M===0){A.removeChild(J),ly(p);return}M--}else b==="$"||b==="$?"||b==="$!"?M++:E=b.charCodeAt(0)-48;else E=0;b=J}while(b);ly(p)}function _3(A){var p=A.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":_3(b),ke(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}A.removeChild(b)}}function phe(A,p,b,E){for(;A.nodeType===1;){var M=b;if(A.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(E){if(!A[Se])switch(p){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(J=A.getAttribute("rel"),J==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(J!==M.rel||A.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||A.getAttribute("title")!==(M.title==null?null:M.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(J=A.getAttribute("src"),(J!==(M.src==null?null:M.src)||A.getAttribute("type")!==(M.type==null?null:M.type)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&J&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(p==="input"&&A.type==="hidden"){var J=M.name==null?null:""+M.name;if(M.type==="hidden"&&A.getAttribute("name")===J)return A}else return A;if(A=_d(A.nextSibling),A===null)break}return null}function ghe(A,p,b){if(p==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!b||(A=_d(A.nextSibling),A===null))return null;return A}function S3(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function xhe(A,p){var b=A.ownerDocument;if(A.data!=="$?"||b.readyState==="complete")p();else{var E=function(){p(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),A._reactRetry=E}}function _d(A){for(;A!=null;A=A.nextSibling){var p=A.nodeType;if(p===1||p===3)break;if(p===8){if(p=A.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return A}var k3=null;function X7(A){A=A.previousSibling;for(var p=0;A;){if(A.nodeType===8){var b=A.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return A;p--}else b==="/$"&&p++}A=A.previousSibling}return null}function Y7(A,p,b){switch(p=CN(b),A){case"html":if(A=p.documentElement,!A)throw Error(n(452));return A;case"head":if(A=p.head,!A)throw Error(n(453));return A;case"body":if(A=p.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function ey(A){for(var p=A.attributes;p.length;)A.removeAttributeNode(p[0]);ke(A)}var Su=new Map,J7=new Set;function _N(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var qA=q.d;q.d={f:vhe,r:bhe,D:yhe,C:whe,L:Ehe,m:Nhe,X:_he,S:Che,M:She};function vhe(){var A=qA.f(),p=gN();return A||p}function bhe(A){var p=Oe(A);p!==null&&p.tag===5&&p.type==="form"?wp(p):qA.r(A)}var Tx=typeof document>"u"?null:document;function Z7(A,p,b){var E=Tx;if(E&&typeof p=="string"&&p){var M=On(p);M='link[rel="'+A+'"][href="'+M+'"]',typeof b=="string"&&(M+='[crossorigin="'+b+'"]'),J7.has(M)||(J7.add(M),A={rel:A,crossOrigin:b,href:p},E.querySelector(M)===null&&(p=E.createElement("link"),ho(p,"link",A),qe(p),E.head.appendChild(p)))}}function yhe(A){qA.D(A),Z7("dns-prefetch",A,null)}function whe(A,p){qA.C(A,p),Z7("preconnect",A,p)}function Ehe(A,p,b){qA.L(A,p,b);var E=Tx;if(E&&A&&p){var M='link[rel="preload"][as="'+On(p)+'"]';p==="image"&&b&&b.imageSrcSet?(M+='[imagesrcset="'+On(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(M+='[imagesizes="'+On(b.imageSizes)+'"]')):M+='[href="'+On(A)+'"]';var J=M;switch(p){case"style":J=Ix(A);break;case"script":J=Fx(A)}Su.has(J)||(A=d({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:A,as:p},b),Su.set(J,A),E.querySelector(M)!==null||p==="style"&&E.querySelector(ty(J))||p==="script"&&E.querySelector(ry(J))||(p=E.createElement("link"),ho(p,"link",A),qe(p),E.head.appendChild(p)))}}function Nhe(A,p){qA.m(A,p);var b=Tx;if(b&&A){var E=p&&typeof p.as=="string"?p.as:"script",M='link[rel="modulepreload"][as="'+On(E)+'"][href="'+On(A)+'"]',J=M;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":J=Fx(A)}if(!Su.has(J)&&(A=d({rel:"modulepreload",href:A},p),Su.set(J,A),b.querySelector(M)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(ry(J)))return}E=b.createElement("link"),ho(E,"link",A),qe(E),b.head.appendChild(E)}}}function Che(A,p,b){qA.S(A,p,b);var E=Tx;if(E&&A){var M=ft(E).hoistableStyles,J=Ix(A);p=p||"default";var fe=M.get(J);if(!fe){var Ee={loading:0,preload:null};if(fe=E.querySelector(ty(J)))Ee.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":p},b),(b=Su.get(J))&&j3(A,b);var Le=fe=E.createElement("link");qe(Le),ho(Le,"link",A),Le._p=new Promise(function(ut,jt){Le.onload=ut,Le.onerror=jt}),Le.addEventListener("load",function(){Ee.loading|=1}),Le.addEventListener("error",function(){Ee.loading|=2}),Ee.loading|=4,SN(fe,p,E)}fe={type:"stylesheet",instance:fe,count:1,state:Ee},M.set(J,fe)}}}function _he(A,p){qA.X(A,p);var b=Tx;if(b&&A){var E=ft(b).hoistableScripts,M=Fx(A),J=E.get(M);J||(J=b.querySelector(ry(M)),J||(A=d({src:A,async:!0},p),(p=Su.get(M))&&B3(A,p),J=b.createElement("script"),qe(J),ho(J,"link",A),b.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},E.set(M,J))}}function She(A,p){qA.M(A,p);var b=Tx;if(b&&A){var E=ft(b).hoistableScripts,M=Fx(A),J=E.get(M);J||(J=b.querySelector(ry(M)),J||(A=d({src:A,async:!0,type:"module"},p),(p=Su.get(M))&&B3(A,p),J=b.createElement("script"),qe(J),ho(J,"link",A),b.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},E.set(M,J))}}function e9(A,p,b,E){var M=(M=te.current)?_N(M):null;if(!M)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=Ix(b.href),b=ft(M).hoistableStyles,E=b.get(p),E||(E={type:"style",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){A=Ix(b.href);var J=ft(M).hoistableStyles,fe=J.get(A);if(fe||(M=M.ownerDocument||M,fe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},J.set(A,fe),(J=M.querySelector(ty(A)))&&!J._p&&(fe.instance=J,fe.state.loading=5),Su.has(A)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Su.set(A,b),J||khe(M,A,b,fe.state))),p&&E===null)throw Error(n(528,""));return fe}if(p&&E!==null)throw Error(n(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Fx(b),b=ft(M).hoistableScripts,E=b.get(p),E||(E={type:"script",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function Ix(A){return'href="'+On(A)+'"'}function ty(A){return'link[rel="stylesheet"]['+A+"]"}function t9(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function khe(A,p,b,E){A.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=A.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),ho(p,"link",b),qe(p),A.head.appendChild(p))}function Fx(A){return'[src="'+On(A)+'"]'}function ry(A){return"script[async]"+A}function r9(A,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var E=A.querySelector('style[data-href~="'+On(b.href)+'"]');if(E)return p.instance=E,qe(E),E;var M=d({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(A.ownerDocument||A).createElement("style"),qe(E),ho(E,"style",M),SN(E,b.precedence,A),p.instance=E;case"stylesheet":M=Ix(b.href);var J=A.querySelector(ty(M));if(J)return p.state.loading|=4,p.instance=J,qe(J),J;E=t9(b),(M=Su.get(M))&&j3(E,M),J=(A.ownerDocument||A).createElement("link"),qe(J);var fe=J;return fe._p=new Promise(function(Ee,Le){fe.onload=Ee,fe.onerror=Le}),ho(J,"link",E),p.state.loading|=4,SN(J,b.precedence,A),p.instance=J;case"script":return J=Fx(b.src),(M=A.querySelector(ry(J)))?(p.instance=M,qe(M),M):(E=b,(M=Su.get(J))&&(E=d({},b),B3(E,M)),A=A.ownerDocument||A,M=A.createElement("script"),qe(M),ho(M,"link",E),A.head.appendChild(M),p.instance=M);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,SN(E,b.precedence,A));return p.instance}function SN(A,p,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=E.length?E[E.length-1]:null,J=M,fe=0;fe<E.length;fe++){var Ee=E[fe];if(Ee.dataset.precedence===p)J=Ee;else if(J!==M)break}J?J.parentNode.insertBefore(A,J.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(A,p.firstChild))}function j3(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.title==null&&(A.title=p.title)}function B3(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.integrity==null&&(A.integrity=p.integrity)}var kN=null;function n9(A,p,b){if(kN===null){var E=new Map,M=kN=new Map;M.set(b,E)}else M=kN,E=M.get(b),E||(E=new Map,M.set(b,E));if(E.has(A))return E;for(E.set(A,null),b=b.getElementsByTagName(A),M=0;M<b.length;M++){var J=b[M];if(!(J[Se]||J[rr]||A==="link"&&J.getAttribute("rel")==="stylesheet")&&J.namespaceURI!=="http://www.w3.org/2000/svg"){var fe=J.getAttribute(p)||"";fe=A+fe;var Ee=E.get(fe);Ee?Ee.push(J):E.set(fe,[J])}}return E}function a9(A,p,b){A=A.ownerDocument||A,A.head.insertBefore(b,p==="title"?A.querySelector("head > title"):null)}function jhe(A,p,b){if(b===1||p.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return A=p.disabled,typeof p.precedence=="string"&&A==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function s9(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var ny=null;function Bhe(){}function The(A,p,b){if(ny===null)throw Error(n(475));var E=ny;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var M=Ix(b.href),J=A.querySelector(ty(M));if(J){A=J._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(E.count++,E=jN.bind(E),A.then(E,E)),p.state.loading|=4,p.instance=J,qe(J);return}J=A.ownerDocument||A,b=t9(b),(M=Su.get(M))&&j3(b,M),J=J.createElement("link"),qe(J);var fe=J;fe._p=new Promise(function(Ee,Le){fe.onload=Ee,fe.onerror=Le}),ho(J,"link",b),p.instance=J}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(p,A),(A=p.state.preload)&&(p.state.loading&3)===0&&(E.count++,p=jN.bind(E),A.addEventListener("load",p),A.addEventListener("error",p))}}function Ihe(){if(ny===null)throw Error(n(475));var A=ny;return A.stylesheets&&A.count===0&&T3(A,A.stylesheets),0<A.count?function(p){var b=setTimeout(function(){if(A.stylesheets&&T3(A,A.stylesheets),A.unsuspend){var E=A.unsuspend;A.unsuspend=null,E()}},6e4);return A.unsuspend=p,function(){A.unsuspend=null,clearTimeout(b)}}:null}function jN(){if(this.count--,this.count===0){if(this.stylesheets)T3(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var BN=null;function T3(A,p){A.stylesheets=null,A.unsuspend!==null&&(A.count++,BN=new Map,p.forEach(Fhe,A),BN=null,jN.call(A))}function Fhe(A,p){if(!(p.state.loading&4)){var b=BN.get(A);if(b)var E=b.get(null);else{b=new Map,BN.set(A,b);for(var M=A.querySelectorAll("link[data-precedence],style[data-precedence]"),J=0;J<M.length;J++){var fe=M[J];(fe.nodeName==="LINK"||fe.getAttribute("media")!=="not all")&&(b.set(fe.dataset.precedence,fe),E=fe)}E&&b.set(null,E)}M=p.instance,fe=M.getAttribute("data-precedence"),J=b.get(fe)||E,J===E&&b.set(null,M),b.set(fe,M),this.count++,E=jN.bind(this),M.addEventListener("load",E),M.addEventListener("error",E),J?J.parentNode.insertBefore(M,J.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(M,A.firstChild)),p.state.loading|=4}}var ay={$$typeof:_,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Ohe(A,p,b,E,M,J,fe,Ee){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=la(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.hiddenUpdates=la(null),this.identifierPrefix=E,this.onUncaughtError=M,this.onCaughtError=J,this.onRecoverableError=fe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function i9(A,p,b,E,M,J,fe,Ee,Le,ut,jt,Pt){return A=new Ohe(A,p,b,fe,Ee,Le,ut,Pt),p=1,J===!0&&(p|=24),J=Hi(3,null,null,p),A.current=J,J.stateNode=A,p=S1(),p.refCount++,A.pooledCache=p,p.refCount++,J.memoizedState={element:E,isDehydrated:b,cache:p},He(J),A}function o9(A){return A?(A=ii,A):ii}function l9(A,p,b,E,M,J){M=o9(M),E.context===null?E.context=M:E.pendingContext=M,E=kt(p),E.payload={element:b},J=J===void 0?null:J,J!==null&&(E.callback=J),b=Ot(A,E,p),b!==null&&(Bc(b,A,p),Bt(b,A,p))}function c9(A,p){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var b=A.retryLane;A.retryLane=b!==0&&b<p?b:p}}function I3(A,p){c9(A,p),(A=A.alternate)&&c9(A,p)}function u9(A){if(A.tag===13){var p=Ad(A,67108864);p!==null&&Bc(p,A,67108864),I3(A,67108864)}}var TN=!0;function Dhe(A,p,b,E){var M=H.T;H.T=null;var J=q.p;try{q.p=2,F3(A,p,b,E)}finally{q.p=J,H.T=M}}function Phe(A,p,b,E){var M=H.T;H.T=null;var J=q.p;try{q.p=8,F3(A,p,b,E)}finally{q.p=J,H.T=M}}function F3(A,p,b,E){if(TN){var M=O3(E);if(M===null)b3(A,p,E,IN,b),f9(A,E);else if(Lhe(M,A,p,b,E))E.stopPropagation();else if(f9(A,E),p&4&&-1<Rhe.indexOf(A)){for(;M!==null;){var J=Oe(M);if(J!==null)switch(J.tag){case 3:if(J=J.stateNode,J.current.memoizedState.isDehydrated){var fe=Br(J.pendingLanes);if(fe!==0){var Ee=J;for(Ee.pendingLanes|=2,Ee.entangledLanes|=2;fe;){var Le=1<<31-Tt(fe);Ee.entanglements[1]|=Le,fe&=~Le}Ff(J),(da&6)===0&&(mN=ve()+500,Y1(0))}}break;case 13:Ee=Ad(J,2),Ee!==null&&Bc(Ee,J,2),gN(),I3(J,2)}if(J=O3(E),J===null&&b3(A,p,E,IN,b),J===M)break;M=J}M!==null&&E.stopPropagation()}else b3(A,p,E,null,b)}}function O3(A){return A=ca(A),D3(A)}var IN=null;function D3(A){if(IN=null,A=Te(A),A!==null){var p=s(A);if(p===null)A=null;else{var b=p.tag;if(b===13){if(A=o(p),A!==null)return A;A=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;A=null}else p!==A&&(A=null)}}return IN=A,null}function d9(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pe()){case Ue:return 2;case de:return 8;case be:case De:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var P3=!1,S0=null,k0=null,j0=null,sy=new Map,iy=new Map,B0=[],Rhe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f9(A,p){switch(A){case"focusin":case"focusout":S0=null;break;case"dragenter":case"dragleave":k0=null;break;case"mouseover":case"mouseout":j0=null;break;case"pointerover":case"pointerout":sy.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":iy.delete(p.pointerId)}}function oy(A,p,b,E,M,J){return A===null||A.nativeEvent!==J?(A={blockedOn:p,domEventName:b,eventSystemFlags:E,nativeEvent:J,targetContainers:[M]},p!==null&&(p=Oe(p),p!==null&&u9(p)),A):(A.eventSystemFlags|=E,p=A.targetContainers,M!==null&&p.indexOf(M)===-1&&p.push(M),A)}function Lhe(A,p,b,E,M){switch(p){case"focusin":return S0=oy(S0,A,p,b,E,M),!0;case"dragenter":return k0=oy(k0,A,p,b,E,M),!0;case"mouseover":return j0=oy(j0,A,p,b,E,M),!0;case"pointerover":var J=M.pointerId;return sy.set(J,oy(sy.get(J)||null,A,p,b,E,M)),!0;case"gotpointercapture":return J=M.pointerId,iy.set(J,oy(iy.get(J)||null,A,p,b,E,M)),!0}return!1}function A9(A){var p=Te(A.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=o(b),p!==null){A.blockedOn=p,Nt(A.priority,function(){if(b.tag===13){var E=jc();E=gt(E);var M=Ad(b,E);M!==null&&Bc(M,b,E),I3(b,E)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){A.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}A.blockedOn=null}function FN(A){if(A.blockedOn!==null)return!1;for(var p=A.targetContainers;0<p.length;){var b=O3(A.nativeEvent);if(b===null){b=A.nativeEvent;var E=new b.constructor(b.type,b);Ol=E,b.target.dispatchEvent(E),Ol=null}else return p=Oe(b),p!==null&&u9(p),A.blockedOn=b,!1;p.shift()}return!0}function h9(A,p,b){FN(A)&&b.delete(p)}function Mhe(){P3=!1,S0!==null&&FN(S0)&&(S0=null),k0!==null&&FN(k0)&&(k0=null),j0!==null&&FN(j0)&&(j0=null),sy.forEach(h9),iy.forEach(h9)}function ON(A,p){A.blockedOn===p&&(A.blockedOn=null,P3||(P3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Mhe)))}var DN=null;function m9(A){DN!==A&&(DN=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){DN===A&&(DN=null);for(var p=0;p<A.length;p+=3){var b=A[p],E=A[p+1],M=A[p+2];if(typeof E!="function"){if(D3(E||b)===null)continue;break}var J=Oe(b);J!==null&&(A.splice(p,3),p-=3,Nu(J,{pending:!0,data:M,method:b.method,action:E},E,M))}}))}function ly(A){function p(Le){return ON(Le,A)}S0!==null&&ON(S0,A),k0!==null&&ON(k0,A),j0!==null&&ON(j0,A),sy.forEach(p),iy.forEach(p);for(var b=0;b<B0.length;b++){var E=B0[b];E.blockedOn===A&&(E.blockedOn=null)}for(;0<B0.length&&(b=B0[0],b.blockedOn===null);)A9(b),b.blockedOn===null&&B0.shift();if(b=(A.ownerDocument||A).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var M=b[E],J=b[E+1],fe=M[br]||null;if(typeof J=="function")fe||m9(b);else if(fe){var Ee=null;if(J&&J.hasAttribute("formAction")){if(M=J,fe=J[br]||null)Ee=fe.formAction;else if(D3(M)!==null)continue}else Ee=fe.action;typeof Ee=="function"?b[E+1]=Ee:(b.splice(E,3),E-=3),m9(b)}}}function R3(A){this._internalRoot=A}PN.prototype.render=R3.prototype.render=function(A){var p=this._internalRoot;if(p===null)throw Error(n(409));var b=p.current,E=jc();l9(b,E,A,p,null,null)},PN.prototype.unmount=R3.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var p=A.containerInfo;l9(A.current,2,null,A,null,null),gN(),p[ur]=null}};function PN(A){this._internalRoot=A}PN.prototype.unstable_scheduleHydration=function(A){if(A){var p=bt();A={blockedOn:null,target:A,priority:p};for(var b=0;b<B0.length&&p!==0&&p<B0[b].priority;b++);B0.splice(b,0,A),b===0&&A9(A)}};var p9=t.version;if(p9!=="19.1.1")throw Error(n(527,p9,"19.1.1"));q.findDOMNode=function(A){var p=A._reactInternals;if(p===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(p),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var Uhe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var RN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!RN.isDisabled&&RN.supportsFiber)try{At=RN.inject(Uhe),vt=RN}catch{}}return uy.createRoot=function(A,p){if(!a(A))throw Error(n(299));var b=!1,E="",M=IU,J=FU,fe=OU,Ee=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(M=p.onUncaughtError),p.onCaughtError!==void 0&&(J=p.onCaughtError),p.onRecoverableError!==void 0&&(fe=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Ee=p.unstable_transitionCallbacks)),p=i9(A,1,!1,null,null,b,E,M,J,fe,Ee,null),A[ur]=p.current,v3(A),new R3(p)},uy.hydrateRoot=function(A,p,b){if(!a(A))throw Error(n(299));var E=!1,M="",J=IU,fe=FU,Ee=OU,Le=null,ut=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(M=b.identifierPrefix),b.onUncaughtError!==void 0&&(J=b.onUncaughtError),b.onCaughtError!==void 0&&(fe=b.onCaughtError),b.onRecoverableError!==void 0&&(Ee=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Le=b.unstable_transitionCallbacks),b.formState!==void 0&&(ut=b.formState)),p=i9(A,1,!0,p,b??null,E,M,J,fe,Ee,Le,ut),p.context=o9(null),b=p.current,E=jc(),E=gt(E),M=kt(E),M.callback=null,Ot(b,M,E),b=E,p.current.lanes=b,Ta(p,b),Ff(p),A[ur]=p.current,v3(A),new PN(p)},uy.version="19.1.1",uy}var _9;function e0e(){if(_9)return Q3.exports;_9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Q3.exports=Zhe(),Q3.exports}var t0e=e0e();const r0e=Bl(t0e),n0e=()=>{};var S9={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mJ=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},a0e=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],o=e[r++],l=e[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],o=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return t.join("")},pJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],o=a+1<e.length,l=o?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(h=64)),n.push(r[d],r[f],r[h],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(mJ(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):a0e(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],l=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new s0e;const h=s<<2|l>>4;if(n.push(h),u!==64){const m=l<<4&240|u>>2;if(n.push(m),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s0e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i0e=function(e){const t=mJ(e);return pJ.encodeByteArray(t,!0)},a_=function(e){return i0e(e).replace(/\./g,"")},gJ=function(e){try{return pJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0e=()=>o0e().__FIREBASE_DEFAULTS__,c0e=()=>{if(typeof process>"u"||typeof S9>"u")return;const e=S9.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},u0e=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&gJ(e[1]);return t&&JSON.parse(t)},hk=()=>{try{return n0e()||l0e()||c0e()||u0e()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},xJ=e=>{var t,r;return(r=(t=hk())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},JD=e=>{const t=xJ(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},vJ=()=>{var e;return(e=hk())==null?void 0:e.config},bJ=e=>{var t;return(t=hk())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mk(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yJ(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[a_(JSON.stringify(r)),a_(JSON.stringify(o)),""].join(".")}const dw={};function f0e(){const e={prod:[],emulator:[]};for(const t of Object.keys(dw))dw[t]?e.emulator.push(t):e.prod.push(t);return e}function A0e(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let k9=!1;function pk(e,t){if(typeof window>"u"||typeof document>"u"||!Hh(window.location.host)||dw[e]===t||dw[e]||k9)return;dw[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=f0e().prod.length>0;function o(){const h=document.getElementById(n);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{k9=!0,o()},h}function d(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=A0e(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const _=h.element;l(_),d(v,x);const F=u();c(w,y),_.append(w,g,v,F),document.body.appendChild(_)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function h0e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ol())}function m0e(){var t;const e=(t=hk())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function p0e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function g0e(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function x0e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v0e(){const e=ol();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function b0e(){return!m0e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function y0e(){try{return typeof indexedDB=="object"}catch{return!1}}function w0e(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0e="FirebaseError";class Xd extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=E0e,Object.setPrototypeOf(this,Xd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,G2.prototype.create)}}class G2{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],o=s?N0e(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new Xd(a,l,n)}}function N0e(e,t){return e.replace(C0e,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const C0e=/\{\$([^}]+)}/g;function _0e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _m(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],o=t[a];if(j9(s)&&j9(o)){if(!_m(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function j9(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Hy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function Vy(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function S0e(e,t){const r=new k0e(e,t);return r.subscribe.bind(r)}class k0e{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");j0e(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=$3),a.error===void 0&&(a.error=$3),a.complete===void 0&&(a.complete=$3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j0e(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function $3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(e){return e&&e._delegate?e._delegate:e}class Eh{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B0e=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new d0e;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(I0e(t))try{this.getOrInitializeService({instanceIdentifier:Fp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=Fp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Fp){return this.instances.has(t)}getOptions(t=Fp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:T0e(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Fp){return this.component?this.component.multipleInstances?t:Fp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function T0e(e){return e===Fp?void 0:e}function I0e(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0e{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new B0e(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(jn||(jn={}));const O0e={debug:jn.DEBUG,verbose:jn.VERBOSE,info:jn.INFO,warn:jn.WARN,error:jn.ERROR,silent:jn.SILENT},D0e=jn.INFO,P0e={[jn.DEBUG]:"log",[jn.VERBOSE]:"log",[jn.INFO]:"info",[jn.WARN]:"warn",[jn.ERROR]:"error"},R0e=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=P0e[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let ZD=class{constructor(t){this.name=t,this._logLevel=D0e,this._logHandler=R0e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in jn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?O0e[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,jn.DEBUG,...t),this._logHandler(this,jn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,jn.VERBOSE,...t),this._logHandler(this,jn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,jn.INFO,...t),this._logHandler(this,jn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,jn.WARN,...t),this._logHandler(this,jn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,jn.ERROR,...t),this._logHandler(this,jn.ERROR,...t)}};const L0e=(e,t)=>t.some(r=>e instanceof r);let B9,T9;function M0e(){return B9||(B9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U0e(){return T9||(T9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wJ=new WeakMap,H6=new WeakMap,EJ=new WeakMap,G3=new WeakMap,eP=new WeakMap;function Q0e(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r(dm(e.result)),a()},o=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&wJ.set(r,e)}).catch(()=>{}),eP.set(t,e),t}function H0e(e){if(H6.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});H6.set(e,t)}let V6={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return H6.get(e);if(t==="objectStoreNames")return e.objectStoreNames||EJ.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return dm(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function V0e(e){V6=e(V6)}function z0e(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(q3(this),t,...r);return EJ.set(n,t.sort?t.sort():[t]),dm(n)}:U0e().includes(e)?function(...t){return e.apply(q3(this),t),dm(wJ.get(this))}:function(...t){return dm(e.apply(q3(this),t))}}function $0e(e){return typeof e=="function"?z0e(e):(e instanceof IDBTransaction&&H0e(e),L0e(e,M0e())?new Proxy(e,V6):e)}function dm(e){if(e instanceof IDBRequest)return Q0e(e);if(G3.has(e))return G3.get(e);const t=$0e(e);return t!==e&&(G3.set(e,t),eP.set(t,e)),t}const q3=e=>eP.get(e);function G0e(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(e,t),l=dm(o);return n&&o.addEventListener("upgradeneeded",c=>{n(dm(o.result),c.oldVersion,c.newVersion,dm(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const q0e=["get","getKey","getAll","getAllKeys","count"],K0e=["put","add","delete","clear"],K3=new Map;function I9(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(K3.get(t))return K3.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=K0e.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||q0e.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return K3.set(t,s),s}V0e(e=>({...e,get:(t,r,n)=>I9(t,r)||e.get(t,r,n),has:(t,r)=>!!I9(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0e{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(X0e(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function X0e(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const z6="@firebase/app",F9="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new ZD("@firebase/app"),Y0e="@firebase/app-compat",J0e="@firebase/analytics-compat",Z0e="@firebase/analytics",eme="@firebase/app-check-compat",tme="@firebase/app-check",rme="@firebase/auth",nme="@firebase/auth-compat",ame="@firebase/database",sme="@firebase/data-connect",ime="@firebase/database-compat",ome="@firebase/functions",lme="@firebase/functions-compat",cme="@firebase/installations",ume="@firebase/installations-compat",dme="@firebase/messaging",fme="@firebase/messaging-compat",Ame="@firebase/performance",hme="@firebase/performance-compat",mme="@firebase/remote-config",pme="@firebase/remote-config-compat",gme="@firebase/storage",xme="@firebase/storage-compat",vme="@firebase/firestore",bme="@firebase/ai",yme="@firebase/firestore-compat",wme="firebase",Eme="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="[DEFAULT]",Nme={[z6]:"fire-core",[Y0e]:"fire-core-compat",[Z0e]:"fire-analytics",[J0e]:"fire-analytics-compat",[tme]:"fire-app-check",[eme]:"fire-app-check-compat",[rme]:"fire-auth",[nme]:"fire-auth-compat",[ame]:"fire-rtdb",[sme]:"fire-data-connect",[ime]:"fire-rtdb-compat",[ome]:"fire-fn",[lme]:"fire-fn-compat",[cme]:"fire-iid",[ume]:"fire-iid-compat",[dme]:"fire-fcm",[fme]:"fire-fcm-compat",[Ame]:"fire-perf",[hme]:"fire-perf-compat",[mme]:"fire-rc",[pme]:"fire-rc-compat",[gme]:"fire-gcs",[xme]:"fire-gcs-compat",[vme]:"fire-fst",[yme]:"fire-fst-compat",[bme]:"fire-vertex","fire-js":"fire-js",[wme]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=new Map,Cme=new Map,G6=new Map;function O9(e,t){try{e.container.addComponent(t)}catch(r){Nh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Sm(e){const t=e.name;if(G6.has(t))return Nh.debug(`There were multiple attempts to register component ${t}.`),!1;G6.set(t,e);for(const r of Vw.values())O9(r,e);for(const r of Cme.values())O9(r,e);return!0}function K2(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Uc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _me={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fm=new G2("app","Firebase",_me);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sme{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Eh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw fm.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=Eme;function tP(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:$6,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw fm.create("bad-app-name",{appName:String(a)});if(r||(r=vJ()),!r)throw fm.create("no-options");const s=Vw.get(a);if(s){if(_m(r,s.options)&&_m(n,s.config))return s;throw fm.create("duplicate-app",{appName:a})}const o=new F0e(a);for(const c of G6.values())o.addComponent(c);const l=new Sme(r,n,o);return Vw.set(a,l),l}function gk(e=$6){const t=Vw.get(e);if(!t&&e===$6&&vJ())return tP();if(!t)throw fm.create("no-app",{appName:e});return t}function D9(){return Array.from(Vw.values())}function Wu(e,t,r){let n=Nme[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const o=[`Unable to register library "${n}" with version "${t}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Nh.warn(o.join(" "));return}Sm(new Eh(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kme="firebase-heartbeat-database",jme=1,zw="firebase-heartbeat-store";let W3=null;function NJ(){return W3||(W3=G0e(kme,jme,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(zw)}catch(r){console.warn(r)}}}}).catch(e=>{throw fm.create("idb-open",{originalErrorMessage:e.message})})),W3}async function Bme(e){try{const r=(await NJ()).transaction(zw),n=await r.objectStore(zw).get(CJ(e));return await r.done,n}catch(t){if(t instanceof Xd)Nh.warn(t.message);else{const r=fm.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Nh.warn(r.message)}}}async function P9(e,t){try{const n=(await NJ()).transaction(zw,"readwrite");await n.objectStore(zw).put(t,CJ(e)),await n.done}catch(r){if(r instanceof Xd)Nh.warn(r.message);else{const n=fm.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Nh.warn(n.message)}}}function CJ(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tme=1024,Ime=30;class Fme{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Dme(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=R9();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>Ime){const o=Pme(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Nh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=R9(),{heartbeatsToSend:n,unsentEntries:a}=Ome(this._heartbeatsCache.heartbeats),s=a_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Nh.warn(r),""}}}function R9(){return new Date().toISOString().substring(0,10)}function Ome(e,t=Tme){const r=[];let n=e.slice();for(const a of e){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),L9(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),L9(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Dme{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return y0e()?w0e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Bme(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return P9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return P9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function L9(e){return a_(JSON.stringify({version:2,heartbeats:e})).length}function Pme(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rme(e){Sm(new Eh("platform-logger",t=>new W0e(t),"PRIVATE")),Sm(new Eh("heartbeat",t=>new Fme(t),"PRIVATE")),Wu(z6,F9,e),Wu(z6,F9,"esm2020"),Wu("fire-js","")}Rme("");function _J(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lme=_J,SJ=new G2("auth","Firebase",_J());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new ZD("@firebase/auth");function Mme(e,...t){s_.logLevel<=jn.WARN&&s_.warn(`Auth (${Ug}): ${e}`,...t)}function p5(e,...t){s_.logLevel<=jn.ERROR&&s_.error(`Auth (${Ug}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(e,...t){throw rP(e,...t)}function tA(e,...t){return rP(e,...t)}function kJ(e,t,r){const n={...Lme(),[t]:r};return new G2("auth","Firebase",n).create(t,{appName:e.name})}function Am(e){return kJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rP(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return SJ.create(e,...t)}function $r(e,t,...r){if(!e)throw rP(t,...r)}function ah(e){const t="INTERNAL ASSERTION FAILED: "+e;throw p5(t),new Error(t)}function Ch(e,t){e||ah(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Ume(){return M9()==="http:"||M9()==="https:"}function M9(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ume()||g0e()||"connection"in navigator)?navigator.onLine:!0}function Hme(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(t,r){this.shortDelay=t,this.longDelay=r,Ch(r>t,"Short delay should be less than long delay!"),this.isMobile=h0e()||x0e()}get(){return Qme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(e,t){Ch(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ah("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ah("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ah("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zme=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$me=new W2(3e4,6e4);function Gm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Vh(e,t,r,n,a={}){return BJ(e,a,async()=>{let s={},o={};n&&(t==="GET"?o=n:s={body:JSON.stringify(n)});const l=q2({key:e.config.apiKey,...o}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return p0e()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Hh(e.emulatorConfig.host)&&(u.credentials="include"),jJ.fetch()(await TJ(e,e.config.apiHost,r,l),u)})}async function BJ(e,t,r){e._canInitEmulator=!1;const n={...Vme,...t};try{const a=new qme(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw LN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw LN(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw LN(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw LN(e,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw kJ(e,d,u);qd(e,d)}}catch(a){if(a instanceof Xd)throw a;qd(e,"network-request-failed",{message:String(a)})}}async function xk(e,t,r,n,a={}){const s=await Vh(e,t,r,n,a);return"mfaPendingCredential"in s&&qd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function TJ(e,t,r,n){const a=`${t}${r}?${n}`,s=e,o=s.config.emulator?nP(e.config,a):`${e.config.apiScheme}://${a}`;return zme.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Gme(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qme{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(tA(this.auth,"network-request-failed")),$me.get())})}}function LN(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=tA(e,t,n);return a.customData._tokenResponse=r,a}function U9(e){return e!==void 0&&e.enterprise!==void 0}class Kme{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Gme(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Wme(e,t){return Vh(e,"GET","/v2/recaptchaConfig",Gm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xme(e,t){return Vh(e,"POST","/v1/accounts:delete",t)}async function i_(e,t){return Vh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Yme(e,t=!1){const r=Yn(e),n=await r.getIdToken(t),a=aP(n);$r(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:fw(X3(a.auth_time)),issuedAtTime:fw(X3(a.iat)),expirationTime:fw(X3(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function X3(e){return Number(e)*1e3}function aP(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return p5("JWT malformed, contained fewer than 3 sections"),null;try{const a=gJ(r);return a?JSON.parse(a):(p5("Failed to decode base64 JWT payload"),null)}catch(a){return p5("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Q9(e){const t=aP(e);return $r(t,"internal-error"),$r(typeof t.exp<"u","internal-error"),$r(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $w(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Xd&&Jme(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function Jme({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zme{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=fw(this.lastLoginAt),this.creationTime=fw(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o_(e){var f;const t=e.auth,r=await e.getIdToken(),n=await $w(e,i_(t,{idToken:r}));$r(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?IJ(a.providerUserInfo):[],o=tpe(e.providerData,s),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new K6(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function epe(e){const t=Yn(e);await o_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function tpe(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function IJ(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rpe(e,t){const r=await BJ(e,{},async()=>{const n=q2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,o=await TJ(e,a,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return e.emulatorConfig&&Hh(e.emulatorConfig.host)&&(c.credentials="include"),jJ.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function npe(e,t){return Vh(e,"POST","/v2/accounts:revokeToken",Gm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){$r(t.idToken,"internal-error"),$r(typeof t.idToken<"u","internal-error"),$r(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Q9(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){$r(t.length!==0,"internal-error");const r=Q9(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:($r(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await rpe(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new Tv;return n&&($r(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),a&&($r(typeof a=="string","internal-error",{appName:t}),o.accessToken=a),s&&($r(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Tv,this.toJSON())}_performRefresh(){return ah("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(e,t){$r(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Pd{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new Zme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new K6(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await $w(this,this.stsTokenManager.getToken(this.auth,t));return $r(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Yme(this,t)}reload(){return epe(this)}_assign(t){this!==t&&($r(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Pd({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){$r(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await o_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Uc(this.auth.app))return Promise.reject(Am(this.auth));const t=await this.getIdToken();return await $w(this,Xme(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:m,providerData:g,stsTokenManager:x}=r;$r(f&&x,t,"internal-error");const v=Tv.fromJSON(this.name,x);$r(typeof f=="string",t,"internal-error"),I0(n,t.name),I0(a,t.name),$r(typeof h=="boolean",t,"internal-error"),$r(typeof m=="boolean",t,"internal-error"),I0(s,t.name),I0(o,t.name),I0(l,t.name),I0(c,t.name),I0(u,t.name),I0(d,t.name);const y=new Pd({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:v,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new Tv;a.updateFromServerResponse(r);const s=new Pd({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await o_(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];$r(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?IJ(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Tv;l.updateFromIdToken(n);const c=new Pd({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new K6(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=new Map;function sh(e){Ch(e instanceof Function,"Expected a class definition");let t=H9.get(e);return t?(Ch(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,H9.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}FJ.type="NONE";const V9=FJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(e,t,r){return`firebase:${e}:${t}:${r}`}class Iv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=g5(this.userKey,a.apiKey,s),this.fullPersistenceKey=g5("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await i_(this.auth,{idToken:t}).catch(()=>{});return r?Pd._fromGetAccountInfoResponse(this.auth,r,t):null}return Pd._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Iv(sh(V9),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||sh(V9);const o=g5(n,t.config.apiKey,t.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const h=await i_(t,{idToken:d}).catch(()=>{});if(!h)break;f=await Pd._fromGetAccountInfoResponse(t,h,d)}else f=Pd._fromJSON(t,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Iv(s,t,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Iv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(RJ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(OJ(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(MJ(t))return"Blackberry";if(UJ(t))return"Webos";if(DJ(t))return"Safari";if((t.includes("chrome/")||PJ(t))&&!t.includes("edge/"))return"Chrome";if(LJ(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function OJ(e=ol()){return/firefox\//i.test(e)}function DJ(e=ol()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function PJ(e=ol()){return/crios\//i.test(e)}function RJ(e=ol()){return/iemobile/i.test(e)}function LJ(e=ol()){return/android/i.test(e)}function MJ(e=ol()){return/blackberry/i.test(e)}function UJ(e=ol()){return/webos/i.test(e)}function sP(e=ol()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ape(e=ol()){var t;return sP(e)&&!!((t=window.navigator)!=null&&t.standalone)}function spe(){return v0e()&&document.documentMode===10}function QJ(e=ol()){return sP(e)||LJ(e)||UJ(e)||MJ(e)||/windows phone/i.test(e)||RJ(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HJ(e,t=[]){let r;switch(e){case"Browser":r=z9(ol());break;case"Worker":r=`${z9(ol())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ug}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ipe{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((o,l)=>{try{const c=t(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ope(e,t={}){return Vh(e,"GET","/v2/passwordPolicy",Gm(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lpe=6;class cpe{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??lpe,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class upe{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $9(this),this.idTokenSubscription=new $9(this),this.beforeStateQueue=new ipe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SJ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=sh(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await Iv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await i_(this,{idToken:t}),n=await Pd._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Uc(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return $r(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await o_(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Hme()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Uc(this.app))return Promise.reject(Am(this));const r=t?Yn(t):null;return r&&$r(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&$r(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Uc(this.app)?Promise.reject(Am(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Uc(this.app)?Promise.reject(Am(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await ope(this),r=new cpe(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new G2("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await npe(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&sh(t)||this._popupRedirectResolver;$r(r,this,"argument-error"),this.redirectPersistenceManager=await Iv.create(this,[sh(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if($r(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=t.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return $r(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=HJ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Uc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&Mme(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Qg(e){return Yn(e)}class $9{constructor(t){this.auth=t,this.observer=null,this.addObserver=S0e(r=>this.observer=r)}get next(){return $r(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vk={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dpe(e){vk=e}function VJ(e){return vk.loadJS(e)}function fpe(){return vk.recaptchaEnterpriseScript}function Ape(){return vk.gapiScript}function hpe(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class mpe{constructor(){this.enterprise=new ppe}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class ppe{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const gpe="recaptcha-enterprise",zJ="NO_RECAPTCHA";class xpe{constructor(t){this.type=gpe,this.auth=Qg(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Wme(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Kme(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;U9(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{o(u)}).catch(()=>{o(zJ)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mpe().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&U9(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=fpe();c.length!==0&&(c+=l),VJ(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function G9(e,t,r,n=!1,a=!1){const s=new xpe(e);let o;if(a)o=zJ;else try{o=await s.verify(r)}catch{o=await s.verify(r,!0)}const l={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function W6(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await G9(e,t,r,r==="getOobCode");return n(e,o)}else return n(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await G9(e,t,r,r==="getOobCode");return n(e,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vpe(e,t){const r=K2(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(_m(s,t??{}))return a;qd(a,"already-initialized")}return r.initialize({options:t})}function bpe(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(sh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function ype(e,t,r){const n=Qg(e);$r(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=$J(t),{host:o,port:l}=wpe(t),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){$r(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),$r(_m(u,n.config.emulator)&&_m(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Hh(o)?(mk(`${s}//${o}${c}`),pk("Auth",!0)):Epe()}function $J(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wpe(e){const t=$J(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:q9(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:q9(o)}}}function q9(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Epe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return ah("not implemented")}_getIdTokenResponse(t){return ah("not implemented")}_linkToIdToken(t,r){return ah("not implemented")}_getReauthenticationResolver(t){return ah("not implemented")}}async function Npe(e,t){return Vh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cpe(e,t){return xk(e,"POST","/v1/accounts:signInWithPassword",Gm(e,t))}async function _pe(e,t){return Vh(e,"POST","/v1/accounts:sendOobCode",Gm(e,t))}async function Spe(e,t){return _pe(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kpe(e,t){return xk(e,"POST","/v1/accounts:signInWithEmailLink",Gm(e,t))}async function jpe(e,t){return xk(e,"POST","/v1/accounts:signInWithEmailLink",Gm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends iP{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new Gw(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new Gw(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W6(t,r,"signInWithPassword",Cpe);case"emailLink":return kpe(t,{email:this._email,oobCode:this._password});default:qd(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W6(t,n,"signUpPassword",Npe);case"emailLink":return jpe(t,{idToken:r,email:this._email,oobCode:this._password});default:qd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fv(e,t){return xk(e,"POST","/v1/accounts:signInWithIdp",Gm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bpe="http://localhost";class xg extends iP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new xg(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):qd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const o=new xg(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return Fv(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Fv(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Fv(t,r)}buildRequest(){const t={requestUri:Bpe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=q2(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tpe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ipe(e){const t=Hy(Vy(e)).link,r=t?Hy(Vy(t)).deep_link_id:null,n=Hy(Vy(e)).deep_link_id;return(n?Hy(Vy(n)).link:null)||n||r||t||e}class oP{constructor(t){const r=Hy(Vy(t)),n=r.apiKey??null,a=r.oobCode??null,s=Tpe(r.mode??null);$r(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=Ipe(t);try{return new oP(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.providerId=Qb.PROVIDER_ID}static credential(t,r){return Gw._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=oP.parseLink(r);return $r(n,"argument-error"),Gw._fromEmailAndCode(t,n.code,n.tenantId)}}Qb.PROVIDER_ID="password";Qb.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qb.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2 extends GJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0 extends X2{constructor(){super("facebook.com")}static credential(t){return xg._fromParams({providerId:W0.PROVIDER_ID,signInMethod:W0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return W0.credentialFromTaggedObject(t)}static credentialFromError(t){return W0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return W0.credential(t.oauthAccessToken)}catch{return null}}}W0.FACEBOOK_SIGN_IN_METHOD="facebook.com";W0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends X2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return xg._fromParams({providerId:X0.PROVIDER_ID,signInMethod:X0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return X0.credentialFromTaggedObject(t)}static credentialFromError(t){return X0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return X0.credential(r,n)}catch{return null}}}X0.GOOGLE_SIGN_IN_METHOD="google.com";X0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0 extends X2{constructor(){super("github.com")}static credential(t){return xg._fromParams({providerId:Y0.PROVIDER_ID,signInMethod:Y0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Y0.credentialFromTaggedObject(t)}static credentialFromError(t){return Y0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Y0.credential(t.oauthAccessToken)}catch{return null}}}Y0.GITHUB_SIGN_IN_METHOD="github.com";Y0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0 extends X2{constructor(){super("twitter.com")}static credential(t,r){return xg._fromParams({providerId:J0.PROVIDER_ID,signInMethod:J0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return J0.credentialFromTaggedObject(t)}static credentialFromError(t){return J0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return J0.credential(r,n)}catch{return null}}}J0.TWITTER_SIGN_IN_METHOD="twitter.com";J0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await Pd._fromIdTokenResponse(t,n,a),o=K9(n);return new tb({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=K9(n);return new tb({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function K9(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends Xd{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,l_.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new l_(t,r,n,a)}}function qJ(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?l_._fromErrorAndOperation(e,s,t,n):s})}async function Fpe(e,t,r=!1){const n=await $w(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return tb._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ope(e,t,r=!1){const{auth:n}=e;if(Uc(n.app))return Promise.reject(Am(n));const a="reauthenticate";try{const s=await $w(e,qJ(n,a,t,e),r);$r(s.idToken,n,"internal-error");const o=aP(s.idToken);$r(o,n,"internal-error");const{sub:l}=o;return $r(e.uid===l,n,"user-mismatch"),tb._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KJ(e,t,r=!1){if(Uc(e.app))return Promise.reject(Am(e));const n="signIn",a=await qJ(e,n,t),s=await tb._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function Dpe(e,t){return KJ(Qg(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ppe(e){const t=Qg(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Rpe(e,t,r){const n=Qg(e);await W6(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Spe)}function Lpe(e,t,r){return Uc(e.app)?Promise.reject(Am(e)):Dpe(Yn(e),Qb.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Ppe(e),n})}function Mpe(e,t,r,n){return Yn(e).onIdTokenChanged(t,r,n)}function Upe(e,t,r){return Yn(e).beforeAuthStateChanged(t,r)}function WJ(e,t,r,n){return Yn(e).onAuthStateChanged(t,r,n)}function Qpe(e){return Yn(e).signOut()}const c_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(c_,"1"),this.storage.removeItem(c_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hpe=1e3,Vpe=10;class YJ extends XJ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QJ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);spe()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,Vpe):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},Hpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}YJ.type="LOCAL";const zpe=YJ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ extends XJ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}JJ.type="SESSION";const ZJ=JJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $pe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new bk(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await $pe(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bk.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gpe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=lP("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){return window}function qpe(e){rA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eZ(){return typeof rA().WorkerGlobalScope<"u"&&typeof rA().importScripts=="function"}async function Kpe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Wpe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Xpe(){return eZ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tZ="firebaseLocalStorageDb",Ype=1,u_="firebaseLocalStorage",rZ="fbase_key";class Y2{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function yk(e,t){return e.transaction([u_],t?"readwrite":"readonly").objectStore(u_)}function Jpe(){const e=indexedDB.deleteDatabase(tZ);return new Y2(e).toPromise()}function X6(){const e=indexedDB.open(tZ,Ype);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(u_,{keyPath:rZ})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(u_)?t(n):(n.close(),await Jpe(),t(await X6()))})})}async function W9(e,t,r){const n=yk(e,!0).put({[rZ]:t,value:r});return new Y2(n).toPromise()}async function Zpe(e,t){const r=yk(e,!1).get(t),n=await new Y2(r).toPromise();return n===void 0?null:n.value}function X9(e,t){const r=yk(e,!0).delete(t);return new Y2(r).toPromise()}const ege=800,tge=3;class nZ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await X6(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>tge)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eZ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bk._getInstance(Xpe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Kpe(),!this.activeServiceWorker)return;this.sender=new Gpe(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Wpe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await X6();return await W9(t,c_,"1"),await X9(t,c_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>W9(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>Zpe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>X9(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=yk(a,!1).getAll();return new Y2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ege)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nZ.type="LOCAL";const rge=nZ;new W2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nge(e,t){return t?sh(t):($r(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP extends iP{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Fv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Fv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Fv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function age(e){return KJ(e.auth,new cP(e),e.bypassAuthState)}function sge(e){const{auth:t,user:r}=e;return $r(r,t,"internal-error"),Ope(r,new cP(e),e.bypassAuthState)}async function ige(e){const{auth:t,user:r}=e;return $r(r,t,"internal-error"),Fpe(r,new cP(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return age;case"linkViaPopup":case"linkViaRedirect":return ige;case"reauthViaPopup":case"reauthViaRedirect":return sge;default:qd(this.auth,"internal-error")}}resolve(t){Ch(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ch(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oge=new W2(2e3,1e4);class gv extends aZ{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,gv.currentPopupAction&&gv.currentPopupAction.cancel(),gv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return $r(t,this.auth,"internal-error"),t}async onExecution(){Ch(this.filter.length===1,"Popup operations only handle one event");const t=lP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(tA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(tA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,oge.get())};t()}}gv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lge="pendingRedirect",x5=new Map;class cge extends aZ{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=x5.get(this.auth._key());if(!t){try{const n=await uge(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}x5.set(this.auth._key(),t)}return this.bypassAuthState||x5.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uge(e,t){const r=Age(t),n=fge(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function dge(e,t){x5.set(e._key(),t)}function fge(e){return sh(e._redirectPersistence)}function Age(e){return g5(lge,e.config.apiKey,e.name)}async function hge(e,t,r=!1){if(Uc(e.app))return Promise.reject(Am(e));const n=Qg(e),a=nge(n,t),o=await new cge(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mge=600*1e3;class pge{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!gge(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!sZ(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(tA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=mge&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y9(t))}saveEventToCache(t){this.cachedEventUids.add(Y9(t)),this.lastProcessedEventTime=Date.now()}}function Y9(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function sZ({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function gge(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sZ(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xge(e,t={}){return Vh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bge=/^https?/;async function yge(e){if(e.config.emulator)return;const{authorizedDomains:t}=await xge(e);for(const r of t)try{if(wge(r))return}catch{}qd(e,"unauthorized-domain")}function wge(e){const t=q6(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!bge.test(r))return!1;if(vge.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ege=new W2(3e4,6e4);function J9(){const e=rA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function Nge(e){return new Promise((t,r)=>{var a,s,o;function n(){J9(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{J9(),r(tA(e,"network-request-failed"))},timeout:Ege.get()})}if((s=(a=rA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((o=rA().gapi)!=null&&o.load)n();else{const l=hpe("iframefcb");return rA()[l]=()=>{gapi.load?n():r(tA(e,"network-request-failed"))},VJ(`${Ape()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw v5=null,t})}let v5=null;function Cge(e){return v5=v5||Nge(e),v5}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ge=new W2(5e3,15e3),Sge="__/auth/iframe",kge="emulator/auth/iframe",jge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tge(e){const t=e.config;$r(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?nP(t,kge):`https://${e.config.authDomain}/${Sge}`,n={apiKey:t.apiKey,appName:e.name,v:Ug},a=Bge.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${q2(n).slice(1)}`}async function Ige(e){const t=await Cge(e),r=rA().gapi;return $r(r,e,"internal-error"),t.open({where:document.body,url:Tge(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jge,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=tA(e,"network-request-failed"),l=rA().setTimeout(()=>{s(o)},_ge.get());function c(){rA().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Oge=500,Dge=600,Pge="_blank",Rge="http://localhost";class Z9{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lge(e,t,r,n=Oge,a=Dge){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...Fge,width:n.toString(),height:a.toString(),top:s,left:o},u=ol().toLowerCase();r&&(l=PJ(u)?Pge:r),OJ(u)&&(t=t||Rge,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(ape(u)&&l!=="_self")return Mge(t||"",l),new Z9(null);const f=window.open(t||"",l,d);$r(f,e,"popup-blocked");try{f.focus()}catch{}return new Z9(f)}function Mge(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uge="__/auth/handler",Qge="emulator/auth/handler",Hge=encodeURIComponent("fac");async function eQ(e,t,r,n,a,s){$r(e.config.authDomain,e,"auth-domain-config-required"),$r(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Ug,eventId:a};if(t instanceof GJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",_0e(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(t instanceof X2){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),u=c?`#${Hge}=${encodeURIComponent(c)}`:"";return`${Vge(e)}?${q2(l).slice(1)}${u}`}function Vge({config:e}){return e.emulator?nP(e,Qge):`https://${e.authDomain}/${Uge}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="webStorageSupport";class zge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZJ,this._completeRedirectFn=hge,this._overrideRedirectResult=dge}async _openPopup(t,r,n,a){var o;Ch((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await eQ(t,r,n,q6(),a);return Lge(t,s,lP())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await eQ(t,r,n,q6(),a);return qpe(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(Ch(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await Ige(t),n=new pge(t);return r.register("authEvent",a=>($r(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(Y3,{type:Y3},a=>{var o;const s=(o=a==null?void 0:a[0])==null?void 0:o[Y3];s!==void 0&&r(!!s),qd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=yge(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return QJ()||DJ()||sP()}}const $ge=zge;var tQ="@firebase/auth",rQ="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gge{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){$r(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qge(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kge(e){Sm(new Eh("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;$r(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HJ(e)},u=new upe(n,a,s,c);return bpe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),Sm(new Eh("auth-internal",t=>{const r=Qg(t.getProvider("auth").getImmediate());return(n=>new Gge(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wu(tQ,rQ,qge(e)),Wu(tQ,rQ,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wge=300,Xge=bJ("authIdTokenMaxAge")||Wge;let nQ=null;const Yge=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Xge)return;const a=r==null?void 0:r.token;nQ!==a&&(nQ=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function iZ(e=gk()){const t=K2(e,"auth");if(t.isInitialized())return t.getImmediate();const r=vpe(e,{popupRedirectResolver:$ge,persistence:[rge,zpe,ZJ]}),n=bJ("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=Yge(s.toString());Upe(r,o,()=>o(r.currentUser)),Mpe(r,l=>o(l))}}const a=xJ("auth");return a&&ype(r,`http://${a}`),r}function Jge(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}dpe({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=tA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Jge().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kge("Browser");var Zge="firebase",exe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wu(Zge,exe,"app");var aQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hm,oZ;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,S){function j(){}j.prototype=S.prototype,C.D=S.prototype,C.prototype=new j,C.prototype.constructor=C,C.C=function(L,P,k){for(var U=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)U[Q-2]=arguments[Q];return S.prototype[P].apply(L,U)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,S,j){j||(j=0);var L=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)L[P]=S.charCodeAt(j++)|S.charCodeAt(j++)<<8|S.charCodeAt(j++)<<16|S.charCodeAt(j++)<<24;else for(P=0;16>P;++P)L[P]=S[j++]|S[j++]<<8|S[j++]<<16|S[j++]<<24;S=C.g[0],j=C.g[1],P=C.g[2];var k=C.g[3],U=S+(k^j&(P^k))+L[0]+3614090360&4294967295;S=j+(U<<7&4294967295|U>>>25),U=k+(P^S&(j^P))+L[1]+3905402710&4294967295,k=S+(U<<12&4294967295|U>>>20),U=P+(j^k&(S^j))+L[2]+606105819&4294967295,P=k+(U<<17&4294967295|U>>>15),U=j+(S^P&(k^S))+L[3]+3250441966&4294967295,j=P+(U<<22&4294967295|U>>>10),U=S+(k^j&(P^k))+L[4]+4118548399&4294967295,S=j+(U<<7&4294967295|U>>>25),U=k+(P^S&(j^P))+L[5]+1200080426&4294967295,k=S+(U<<12&4294967295|U>>>20),U=P+(j^k&(S^j))+L[6]+2821735955&4294967295,P=k+(U<<17&4294967295|U>>>15),U=j+(S^P&(k^S))+L[7]+4249261313&4294967295,j=P+(U<<22&4294967295|U>>>10),U=S+(k^j&(P^k))+L[8]+1770035416&4294967295,S=j+(U<<7&4294967295|U>>>25),U=k+(P^S&(j^P))+L[9]+2336552879&4294967295,k=S+(U<<12&4294967295|U>>>20),U=P+(j^k&(S^j))+L[10]+4294925233&4294967295,P=k+(U<<17&4294967295|U>>>15),U=j+(S^P&(k^S))+L[11]+2304563134&4294967295,j=P+(U<<22&4294967295|U>>>10),U=S+(k^j&(P^k))+L[12]+1804603682&4294967295,S=j+(U<<7&4294967295|U>>>25),U=k+(P^S&(j^P))+L[13]+4254626195&4294967295,k=S+(U<<12&4294967295|U>>>20),U=P+(j^k&(S^j))+L[14]+2792965006&4294967295,P=k+(U<<17&4294967295|U>>>15),U=j+(S^P&(k^S))+L[15]+1236535329&4294967295,j=P+(U<<22&4294967295|U>>>10),U=S+(P^k&(j^P))+L[1]+4129170786&4294967295,S=j+(U<<5&4294967295|U>>>27),U=k+(j^P&(S^j))+L[6]+3225465664&4294967295,k=S+(U<<9&4294967295|U>>>23),U=P+(S^j&(k^S))+L[11]+643717713&4294967295,P=k+(U<<14&4294967295|U>>>18),U=j+(k^S&(P^k))+L[0]+3921069994&4294967295,j=P+(U<<20&4294967295|U>>>12),U=S+(P^k&(j^P))+L[5]+3593408605&4294967295,S=j+(U<<5&4294967295|U>>>27),U=k+(j^P&(S^j))+L[10]+38016083&4294967295,k=S+(U<<9&4294967295|U>>>23),U=P+(S^j&(k^S))+L[15]+3634488961&4294967295,P=k+(U<<14&4294967295|U>>>18),U=j+(k^S&(P^k))+L[4]+3889429448&4294967295,j=P+(U<<20&4294967295|U>>>12),U=S+(P^k&(j^P))+L[9]+568446438&4294967295,S=j+(U<<5&4294967295|U>>>27),U=k+(j^P&(S^j))+L[14]+3275163606&4294967295,k=S+(U<<9&4294967295|U>>>23),U=P+(S^j&(k^S))+L[3]+4107603335&4294967295,P=k+(U<<14&4294967295|U>>>18),U=j+(k^S&(P^k))+L[8]+1163531501&4294967295,j=P+(U<<20&4294967295|U>>>12),U=S+(P^k&(j^P))+L[13]+2850285829&4294967295,S=j+(U<<5&4294967295|U>>>27),U=k+(j^P&(S^j))+L[2]+4243563512&4294967295,k=S+(U<<9&4294967295|U>>>23),U=P+(S^j&(k^S))+L[7]+1735328473&4294967295,P=k+(U<<14&4294967295|U>>>18),U=j+(k^S&(P^k))+L[12]+2368359562&4294967295,j=P+(U<<20&4294967295|U>>>12),U=S+(j^P^k)+L[5]+4294588738&4294967295,S=j+(U<<4&4294967295|U>>>28),U=k+(S^j^P)+L[8]+2272392833&4294967295,k=S+(U<<11&4294967295|U>>>21),U=P+(k^S^j)+L[11]+1839030562&4294967295,P=k+(U<<16&4294967295|U>>>16),U=j+(P^k^S)+L[14]+4259657740&4294967295,j=P+(U<<23&4294967295|U>>>9),U=S+(j^P^k)+L[1]+2763975236&4294967295,S=j+(U<<4&4294967295|U>>>28),U=k+(S^j^P)+L[4]+1272893353&4294967295,k=S+(U<<11&4294967295|U>>>21),U=P+(k^S^j)+L[7]+4139469664&4294967295,P=k+(U<<16&4294967295|U>>>16),U=j+(P^k^S)+L[10]+3200236656&4294967295,j=P+(U<<23&4294967295|U>>>9),U=S+(j^P^k)+L[13]+681279174&4294967295,S=j+(U<<4&4294967295|U>>>28),U=k+(S^j^P)+L[0]+3936430074&4294967295,k=S+(U<<11&4294967295|U>>>21),U=P+(k^S^j)+L[3]+3572445317&4294967295,P=k+(U<<16&4294967295|U>>>16),U=j+(P^k^S)+L[6]+76029189&4294967295,j=P+(U<<23&4294967295|U>>>9),U=S+(j^P^k)+L[9]+3654602809&4294967295,S=j+(U<<4&4294967295|U>>>28),U=k+(S^j^P)+L[12]+3873151461&4294967295,k=S+(U<<11&4294967295|U>>>21),U=P+(k^S^j)+L[15]+530742520&4294967295,P=k+(U<<16&4294967295|U>>>16),U=j+(P^k^S)+L[2]+3299628645&4294967295,j=P+(U<<23&4294967295|U>>>9),U=S+(P^(j|~k))+L[0]+4096336452&4294967295,S=j+(U<<6&4294967295|U>>>26),U=k+(j^(S|~P))+L[7]+1126891415&4294967295,k=S+(U<<10&4294967295|U>>>22),U=P+(S^(k|~j))+L[14]+2878612391&4294967295,P=k+(U<<15&4294967295|U>>>17),U=j+(k^(P|~S))+L[5]+4237533241&4294967295,j=P+(U<<21&4294967295|U>>>11),U=S+(P^(j|~k))+L[12]+1700485571&4294967295,S=j+(U<<6&4294967295|U>>>26),U=k+(j^(S|~P))+L[3]+2399980690&4294967295,k=S+(U<<10&4294967295|U>>>22),U=P+(S^(k|~j))+L[10]+4293915773&4294967295,P=k+(U<<15&4294967295|U>>>17),U=j+(k^(P|~S))+L[1]+2240044497&4294967295,j=P+(U<<21&4294967295|U>>>11),U=S+(P^(j|~k))+L[8]+1873313359&4294967295,S=j+(U<<6&4294967295|U>>>26),U=k+(j^(S|~P))+L[15]+4264355552&4294967295,k=S+(U<<10&4294967295|U>>>22),U=P+(S^(k|~j))+L[6]+2734768916&4294967295,P=k+(U<<15&4294967295|U>>>17),U=j+(k^(P|~S))+L[13]+1309151649&4294967295,j=P+(U<<21&4294967295|U>>>11),U=S+(P^(j|~k))+L[4]+4149444226&4294967295,S=j+(U<<6&4294967295|U>>>26),U=k+(j^(S|~P))+L[11]+3174756917&4294967295,k=S+(U<<10&4294967295|U>>>22),U=P+(S^(k|~j))+L[2]+718787259&4294967295,P=k+(U<<15&4294967295|U>>>17),U=j+(k^(P|~S))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(P+(U<<21&4294967295|U>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+k&4294967295}n.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var j=S-this.blockSize,L=this.B,P=this.h,k=0;k<S;){if(P==0)for(;k<=j;)a(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<S;)if(L[P++]=C.charCodeAt(k++),P==this.blockSize){a(this,L),P=0;break}}else for(;k<S;)if(L[P++]=C[k++],P==this.blockSize){a(this,L),P=0;break}}this.h=P,this.o+=S},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var j=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=j&255,j/=256;for(this.u(C),C=Array(16),S=j=0;4>S;++S)for(var L=0;32>L;L+=8)C[j++]=this.g[S]>>>L&255;return C};function s(C,S){var j=l;return Object.prototype.hasOwnProperty.call(j,C)?j[C]:j[C]=S(C)}function o(C,S){this.h=S;for(var j=[],L=!0,P=C.length-1;0<=P;P--){var k=C[P]|0;L&&k==S||(j[P]=k,L=!1)}this.g=j}var l={};function c(C){return-128<=C&&128>C?s(C,function(S){return new o([S|0],0>S?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return v(u(-C));for(var S=[],j=1,L=0;C>=j;L++)S[L]=C/j|0,j*=4294967296;return new o(S,0)}function d(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return v(d(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=u(Math.pow(S,8)),L=f,P=0;P<C.length;P+=8){var k=Math.min(8,C.length-P),U=parseInt(C.substring(P,P+k),S);8>k?(k=u(Math.pow(S,k)),L=L.j(k).add(u(U))):(L=L.j(j),L=L.add(u(U)))}return L}var f=c(0),h=c(1),m=c(16777216);e=o.prototype,e.m=function(){if(x(this))return-v(this).m();for(var C=0,S=1,j=0;j<this.g.length;j++){var L=this.i(j);C+=(0<=L?L:4294967296+L)*S,S*=4294967296}return C},e.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(g(this))return"0";if(x(this))return"-"+v(this).toString(C);for(var S=u(Math.pow(C,6)),j=this,L="";;){var P=F(j,S).g;j=y(j,P.j(S));var k=((0<j.g.length?j.g[0]:j.h)>>>0).toString(C);if(j=P,g(j))return k+L;for(;6>k.length;)k="0"+k;L=k+L}},e.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function g(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function x(C){return C.h==-1}e.l=function(C){return C=y(this,C),x(C)?-1:g(C)?0:1};function v(C){for(var S=C.g.length,j=[],L=0;L<S;L++)j[L]=~C.g[L];return new o(j,~C.h).add(h)}e.abs=function(){return x(this)?v(this):this},e.add=function(C){for(var S=Math.max(this.g.length,C.g.length),j=[],L=0,P=0;P<=S;P++){var k=L+(this.i(P)&65535)+(C.i(P)&65535),U=(k>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);L=U>>>16,k&=65535,U&=65535,j[P]=U<<16|k}return new o(j,j[j.length-1]&-2147483648?-1:0)};function y(C,S){return C.add(v(S))}e.j=function(C){if(g(this)||g(C))return f;if(x(this))return x(C)?v(this).j(v(C)):v(v(this).j(C));if(x(C))return v(this.j(v(C)));if(0>this.l(m)&&0>C.l(m))return u(this.m()*C.m());for(var S=this.g.length+C.g.length,j=[],L=0;L<2*S;L++)j[L]=0;for(L=0;L<this.g.length;L++)for(var P=0;P<C.g.length;P++){var k=this.i(L)>>>16,U=this.i(L)&65535,Q=C.i(P)>>>16,K=C.i(P)&65535;j[2*L+2*P]+=U*K,w(j,2*L+2*P),j[2*L+2*P+1]+=k*K,w(j,2*L+2*P+1),j[2*L+2*P+1]+=U*Q,w(j,2*L+2*P+1),j[2*L+2*P+2]+=k*Q,w(j,2*L+2*P+2)}for(L=0;L<S;L++)j[L]=j[2*L+1]<<16|j[2*L];for(L=S;L<2*S;L++)j[L]=0;return new o(j,0)};function w(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function _(C,S){this.g=C,this.h=S}function F(C,S){if(g(S))throw Error("division by zero");if(g(C))return new _(f,f);if(x(C))return S=F(v(C),S),new _(v(S.g),v(S.h));if(x(S))return S=F(C,v(S)),new _(v(S.g),S.h);if(30<C.g.length){if(x(C)||x(S))throw Error("slowDivide_ only works with positive integers.");for(var j=h,L=S;0>=L.l(C);)j=B(j),L=B(L);var P=T(j,1),k=T(L,1);for(L=T(L,2),j=T(j,2);!g(L);){var U=k.add(L);0>=U.l(C)&&(P=P.add(j),k=U),L=T(L,1),j=T(j,1)}return S=y(C,P.j(S)),new _(P,S)}for(P=f;0<=C.l(S);){for(j=Math.max(1,Math.floor(C.m()/S.m())),L=Math.ceil(Math.log(j)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),k=u(j),U=k.j(S);x(U)||0<U.l(C);)j-=L,k=u(j),U=k.j(S);g(k)&&(k=h),P=P.add(k),C=y(C,U)}return new _(P,C)}e.A=function(C){return F(this,C).h},e.and=function(C){for(var S=Math.max(this.g.length,C.g.length),j=[],L=0;L<S;L++)j[L]=this.i(L)&C.i(L);return new o(j,this.h&C.h)},e.or=function(C){for(var S=Math.max(this.g.length,C.g.length),j=[],L=0;L<S;L++)j[L]=this.i(L)|C.i(L);return new o(j,this.h|C.h)},e.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),j=[],L=0;L<S;L++)j[L]=this.i(L)^C.i(L);return new o(j,this.h^C.h)};function B(C){for(var S=C.g.length+1,j=[],L=0;L<S;L++)j[L]=C.i(L)<<1|C.i(L-1)>>>31;return new o(j,C.h)}function T(C,S){var j=S>>5;S%=32;for(var L=C.g.length-j,P=[],k=0;k<L;k++)P[k]=0<S?C.i(k+j)>>>S|C.i(k+j+1)<<32-S:C.i(k+j);return new o(P,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,oZ=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,hm=o}).apply(typeof aQ<"u"?aQ:typeof self<"u"?self:typeof window<"u"?window:{});var MN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lZ,zy,cZ,b5,Y6,uZ,dZ,fZ;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(D,se,ce){return D==Array.prototype||D==Object.prototype||(D[se]=ce.value),D};function r(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof MN=="object"&&MN];for(var se=0;se<D.length;++se){var ce=D[se];if(ce&&ce.Math==Math)return ce}throw Error("Cannot find global object")}var n=r(this);function a(D,se){if(se)e:{var ce=n;D=D.split(".");for(var we=0;we<D.length-1;we++){var Ge=D[we];if(!(Ge in ce))break e;ce=ce[Ge]}D=D[D.length-1],we=ce[D],se=se(we),se!=we&&se!=null&&t(ce,D,{configurable:!0,writable:!0,value:se})}}function s(D,se){D instanceof String&&(D+="");var ce=0,we=!1,Ge={next:function(){if(!we&&ce<D.length){var ct=ce++;return{value:se(ct,D[ct]),done:!1}}return we=!0,{done:!0,value:void 0}}};return Ge[Symbol.iterator]=function(){return Ge},Ge}a("Array.prototype.values",function(D){return D||function(){return s(this,function(se,ce){return ce})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(D){var se=typeof D;return se=se!="object"?se:D?Array.isArray(D)?"array":se:"null",se=="array"||se=="object"&&typeof D.length=="number"}function u(D){var se=typeof D;return se=="object"&&D!=null||se=="function"}function d(D,se,ce){return D.call.apply(D.bind,arguments)}function f(D,se,ce){if(!D)throw Error();if(2<arguments.length){var we=Array.prototype.slice.call(arguments,2);return function(){var Ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ge,we),D.apply(se,Ge)}}return function(){return D.apply(se,arguments)}}function h(D,se,ce){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function m(D,se){var ce=Array.prototype.slice.call(arguments,1);return function(){var we=ce.slice();return we.push.apply(we,arguments),D.apply(this,we)}}function g(D,se){function ce(){}ce.prototype=se.prototype,D.aa=se.prototype,D.prototype=new ce,D.prototype.constructor=D,D.Qb=function(we,Ge,ct){for(var Vt=Array(arguments.length-2),Pr=2;Pr<arguments.length;Pr++)Vt[Pr-2]=arguments[Pr];return se.prototype[Ge].apply(we,Vt)}}function x(D){const se=D.length;if(0<se){const ce=Array(se);for(let we=0;we<se;we++)ce[we]=D[we];return ce}return[]}function v(D,se){for(let ce=1;ce<arguments.length;ce++){const we=arguments[ce];if(c(we)){const Ge=D.length||0,ct=we.length||0;D.length=Ge+ct;for(let Vt=0;Vt<ct;Vt++)D[Ge+Vt]=we[Vt]}else D.push(we)}}class y{constructor(se,ce){this.i=se,this.j=ce,this.h=0,this.g=null}get(){let se;return 0<this.h?(this.h--,se=this.g,this.g=se.next,se.next=null):se=this.i(),se}}function w(D){return/^[\s\xa0]*$/.test(D)}function _(){var D=l.navigator;return D&&(D=D.userAgent)?D:""}function F(D){return F[" "](D),D}F[" "]=function(){};var B=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function T(D,se,ce){for(const we in D)se.call(ce,D[we],we,D)}function C(D,se){for(const ce in D)se.call(void 0,D[ce],ce,D)}function S(D){const se={};for(const ce in D)se[ce]=D[ce];return se}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(D,se){let ce,we;for(let Ge=1;Ge<arguments.length;Ge++){we=arguments[Ge];for(ce in we)D[ce]=we[ce];for(let ct=0;ct<j.length;ct++)ce=j[ct],Object.prototype.hasOwnProperty.call(we,ce)&&(D[ce]=we[ce])}}function P(D){var se=1;D=D.split(":");const ce=[];for(;0<se&&D.length;)ce.push(D.shift()),se--;return D.length&&ce.push(D.join(":")),ce}function k(D){l.setTimeout(()=>{throw D},0)}function U(){var D=W;let se=null;return D.g&&(se=D.g,D.g=D.g.next,D.g||(D.h=null),se.next=null),se}class Q{constructor(){this.h=this.g=null}add(se,ce){const we=K.get();we.set(se,ce),this.h?this.h.next=we:this.g=we,this.h=we}}var K=new y(()=>new H,D=>D.reset());class H{constructor(){this.next=this.g=this.h=null}set(se,ce){this.h=se,this.g=ce,this.next=null}reset(){this.next=this.g=this.h=null}}let q,z=!1,W=new Q,ee=()=>{const D=l.Promise.resolve(void 0);q=()=>{D.then(X)}};var X=()=>{for(var D;D=U();){try{D.h.call(D.g)}catch(ce){k(ce)}var se=K;se.j(D),100>se.h&&(se.h++,D.next=se.g,se.g=D)}z=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(D,se){this.type=D,this.g=this.target=se,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var D=!1,se=Object.defineProperty({},"passive",{get:function(){D=!0}});try{const ce=()=>{};l.addEventListener("test",ce,se),l.removeEventListener("test",ce,se)}catch{}return D}();function Y(D,se){if(R.call(this,D?D.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,D){var ce=this.type=D.type,we=D.changedTouches&&D.changedTouches.length?D.changedTouches[0]:null;if(this.target=D.target||D.srcElement,this.g=se,se=D.relatedTarget){if(B){e:{try{F(se.nodeName);var Ge=!0;break e}catch{}Ge=!1}Ge||(se=null)}}else ce=="mouseover"?se=D.fromElement:ce=="mouseout"&&(se=D.toElement);this.relatedTarget=se,we?(this.clientX=we.clientX!==void 0?we.clientX:we.pageX,this.clientY=we.clientY!==void 0?we.clientY:we.pageY,this.screenX=we.screenX||0,this.screenY=we.screenY||0):(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0),this.button=D.button,this.key=D.key||"",this.ctrlKey=D.ctrlKey,this.altKey=D.altKey,this.shiftKey=D.shiftKey,this.metaKey=D.metaKey,this.pointerId=D.pointerId||0,this.pointerType=typeof D.pointerType=="string"?D.pointerType:te[D.pointerType]||"",this.state=D.state,this.i=D,D.defaultPrevented&&Y.aa.h.call(this)}}g(Y,R);var te={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var D=this.i;D.preventDefault?D.preventDefault():D.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ie(D,se,ce,we,Ge){this.listener=D,this.proxy=null,this.src=se,this.type=ce,this.capture=!!we,this.ha=Ge,this.key=++oe,this.da=this.fa=!1}function ue(D){D.da=!0,D.listener=null,D.proxy=null,D.src=null,D.ha=null}function Ce(D){this.src=D,this.g={},this.h=0}Ce.prototype.add=function(D,se,ce,we,Ge){var ct=D.toString();D=this.g[ct],D||(D=this.g[ct]=[],this.h++);var Vt=Be(D,se,we,Ge);return-1<Vt?(se=D[Vt],ce||(se.fa=!1)):(se=new ie(se,this.src,ct,!!we,Ge),se.fa=ce,D.push(se)),se};function ne(D,se){var ce=se.type;if(ce in D.g){var we=D.g[ce],Ge=Array.prototype.indexOf.call(we,se,void 0),ct;(ct=0<=Ge)&&Array.prototype.splice.call(we,Ge,1),ct&&(ue(se),D.g[ce].length==0&&(delete D.g[ce],D.h--))}}function Be(D,se,ce,we){for(var Ge=0;Ge<D.length;++Ge){var ct=D[Ge];if(!ct.da&&ct.listener==se&&ct.capture==!!ce&&ct.ha==we)return Ge}return-1}var je="closure_lm_"+(1e6*Math.random()|0),_e={};function Ae(D,se,ce,we,Ge){if(Array.isArray(se)){for(var ct=0;ct<se.length;ct++)Ae(D,se[ct],ce,we,Ge);return null}return ce=Je(ce),D&&D[ae]?D.K(se,ce,u(we)?!!we.capture:!1,Ge):ve(D,se,ce,!1,we,Ge)}function ve(D,se,ce,we,Ge,ct){if(!se)throw Error("Invalid event type");var Vt=u(Ge)?!!Ge.capture:!!Ge,Pr=Ve(D);if(Pr||(D[je]=Pr=new Ce(D)),ce=Pr.add(se,ce,we,Vt,ct),ce.proxy)return ce;if(we=Pe(),ce.proxy=we,we.src=D,we.listener=ce,D.addEventListener)G||(Ge=Vt),Ge===void 0&&(Ge=!1),D.addEventListener(se.toString(),we,Ge);else if(D.attachEvent)D.attachEvent(be(se.toString()),we);else if(D.addListener&&D.removeListener)D.addListener(we);else throw Error("addEventListener and attachEvent are unavailable.");return ce}function Pe(){function D(ce){return se.call(D.src,D.listener,ce)}const se=De;return D}function Ue(D,se,ce,we,Ge){if(Array.isArray(se))for(var ct=0;ct<se.length;ct++)Ue(D,se[ct],ce,we,Ge);else we=u(we)?!!we.capture:!!we,ce=Je(ce),D&&D[ae]?(D=D.i,se=String(se).toString(),se in D.g&&(ct=D.g[se],ce=Be(ct,ce,we,Ge),-1<ce&&(ue(ct[ce]),Array.prototype.splice.call(ct,ce,1),ct.length==0&&(delete D.g[se],D.h--)))):D&&(D=Ve(D))&&(se=D.g[se.toString()],D=-1,se&&(D=Be(se,ce,we,Ge)),(ce=-1<D?se[D]:null)&&de(ce))}function de(D){if(typeof D!="number"&&D&&!D.da){var se=D.src;if(se&&se[ae])ne(se.i,D);else{var ce=D.type,we=D.proxy;se.removeEventListener?se.removeEventListener(ce,we,D.capture):se.detachEvent?se.detachEvent(be(ce),we):se.addListener&&se.removeListener&&se.removeListener(we),(ce=Ve(se))?(ne(ce,D),ce.h==0&&(ce.src=null,se[je]=null)):ue(D)}}}function be(D){return D in _e?_e[D]:_e[D]="on"+D}function De(D,se){if(D.da)D=!0;else{se=new Y(se,this);var ce=D.listener,we=D.ha||D.src;D.fa&&de(D),D=ce.call(we,se)}return D}function Ve(D){return D=D[je],D instanceof Ce?D:null}var We="__closure_events_fn_"+(1e9*Math.random()>>>0);function Je(D){return typeof D=="function"?D:(D[We]||(D[We]=function(se){return D.handleEvent(se)}),D[We])}function At(){O.call(this),this.i=new Ce(this),this.M=this,this.F=null}g(At,O),At.prototype[ae]=!0,At.prototype.removeEventListener=function(D,se,ce,we){Ue(this,D,se,ce,we)};function vt(D,se){var ce,we=D.F;if(we)for(ce=[];we;we=we.F)ce.push(we);if(D=D.M,we=se.type||se,typeof se=="string")se=new R(se,D);else if(se instanceof R)se.target=se.target||D;else{var Ge=se;se=new R(we,D),L(se,Ge)}if(Ge=!0,ce)for(var ct=ce.length-1;0<=ct;ct--){var Vt=se.g=ce[ct];Ge=wt(Vt,we,!0,se)&&Ge}if(Vt=se.g=D,Ge=wt(Vt,we,!0,se)&&Ge,Ge=wt(Vt,we,!1,se)&&Ge,ce)for(ct=0;ct<ce.length;ct++)Vt=se.g=ce[ct],Ge=wt(Vt,we,!1,se)&&Ge}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var D=this.i,se;for(se in D.g){for(var ce=D.g[se],we=0;we<ce.length;we++)ue(ce[we]);delete D.g[se],D.h--}}this.F=null},At.prototype.K=function(D,se,ce,we){return this.i.add(String(D),se,!1,ce,we)},At.prototype.L=function(D,se,ce,we){return this.i.add(String(D),se,!0,ce,we)};function wt(D,se,ce,we){if(se=D.i.g[String(se)],!se)return!0;se=se.concat();for(var Ge=!0,ct=0;ct<se.length;++ct){var Vt=se[ct];if(Vt&&!Vt.da&&Vt.capture==ce){var Pr=Vt.listener,wn=Vt.ha||Vt.src;Vt.fa&&ne(D.i,Vt),Ge=Pr.call(wn,we)!==!1&&Ge}}return Ge&&!we.defaultPrevented}function Tt(D,se,ce){if(typeof D=="function")ce&&(D=h(D,ce));else if(D&&typeof D.handleEvent=="function")D=h(D.handleEvent,D);else throw Error("Invalid listener argument");return 2147483647<Number(se)?-1:l.setTimeout(D,se||0)}function Lt(D){D.g=Tt(()=>{D.g=null,D.i&&(D.i=!1,Lt(D))},D.l);const se=D.h;D.h=null,D.m.apply(null,se)}class Et extends O{constructor(se,ce){super(),this.m=se,this.l=ce,this.h=null,this.i=!1,this.g=null}j(se){this.h=arguments,this.g?this.i=!0:Lt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(D){O.call(this),this.h=D,this.g={}}g(_r,O);var qt=[];function tn(D){T(D.g,function(se,ce){this.g.hasOwnProperty(ce)&&de(se)},D),D.g={}}_r.prototype.N=function(){_r.aa.N.call(this),tn(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Br=l.JSON.stringify,Kr=l.JSON.parse,Fn=class{stringify(D){return l.JSON.stringify(D,void 0)}parse(D){return l.JSON.parse(D,void 0)}};function Lr(){}Lr.prototype.h=null;function ps(D){return D.h||(D.h=D.i())}function pn(){}var la={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ta(){R.call(this,"d")}g(Ta,R);function an(){R.call(this,"c")}g(an,R);var vr={},rt=null;function gt(){return rt=rt||new At}vr.La="serverreachability";function Ze(D){R.call(this,vr.La,D)}g(Ze,R);function bt(D){const se=gt();vt(se,new Ze(se))}vr.STAT_EVENT="statevent";function Nt(D,se){R.call(this,vr.STAT_EVENT,D),this.stat=se}g(Nt,R);function yt(D){const se=gt();vt(se,new Nt(se,D))}vr.Ma="timingevent";function rr(D,se){R.call(this,vr.Ma,D),this.size=se}g(rr,R);function br(D,se){if(typeof D!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){D()},se)}function ur(){this.g=!0}ur.prototype.xa=function(){this.g=!1};function Or(D,se,ce,we,Ge,ct){D.info(function(){if(D.g)if(ct)for(var Vt="",Pr=ct.split("&"),wn=0;wn<Pr.length;wn++){var Jr=Pr[wn].split("=");if(1<Jr.length){var zn=Jr[0];Jr=Jr[1];var ta=zn.split("_");Vt=2<=ta.length&&ta[1]=="type"?Vt+(zn+"="+Jr+"&"):Vt+(zn+"=redacted&")}}else Vt=null;else Vt=ct;return"XMLHTTP REQ ("+we+") [attempt "+Ge+"]: "+se+`
`+ce+`
`+Vt})}function Yr(D,se,ce,we,Ge,ct,Vt){D.info(function(){return"XMLHTTP RESP ("+we+") [ attempt "+Ge+"]: "+se+`
`+ce+`
`+ct+" "+Vt})}function pe(D,se,ce,we){D.info(function(){return"XMLHTTP TEXT ("+se+"): "+Se(D,ce)+(we?" "+we:"")})}function Fe(D,se){D.info(function(){return"TIMEOUT: "+se})}ur.prototype.info=function(){};function Se(D,se){if(!D.g)return se;if(!se)return null;try{var ce=JSON.parse(se);if(ce){for(D=0;D<ce.length;D++)if(Array.isArray(ce[D])){var we=ce[D];if(!(2>we.length)){var Ge=we[1];if(Array.isArray(Ge)&&!(1>Ge.length)){var ct=Ge[0];if(ct!="noop"&&ct!="stop"&&ct!="close")for(var Vt=1;Vt<Ge.length;Vt++)Ge[Vt]=""}}}}return Br(ce)}catch{return se}}var ke={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oe;function et(){}g(et,Lr),et.prototype.g=function(){return new XMLHttpRequest},et.prototype.i=function(){return{}},Oe=new et;function ft(D,se,ce,we){this.j=D,this.i=se,this.l=ce,this.R=we||1,this.U=new _r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qe}function qe(){this.i=null,this.g="",this.h=!1}var at={},lt={};function Dt(D,se,ce){D.L=1,D.v=lu(Ni(se)),D.m=ce,D.P=!0,$t(D,null)}function $t(D,se){D.F=Date.now(),Kt(D),D.A=Ni(D.v);var ce=D.A,we=D.R;Array.isArray(we)||(we=[String(we)]),Dr(ce.i,"t",we),D.C=0,ce=D.j.J,D.h=new qe,D.g=me(D.j,ce?se:null,!D.m),0<D.O&&(D.M=new Et(h(D.Y,D,D.g),D.O)),se=D.U,ce=D.g,we=D.ca;var Ge="readystatechange";Array.isArray(Ge)||(Ge&&(qt[0]=Ge.toString()),Ge=qt);for(var ct=0;ct<Ge.length;ct++){var Vt=Ae(ce,Ge[ct],we||se.handleEvent,!1,se.h||se);if(!Vt)break;se.g[Vt.key]=Vt}se=D.H?S(D.H):{},D.m?(D.u||(D.u="POST"),se["Content-Type"]="application/x-www-form-urlencoded",D.g.ea(D.A,D.u,D.m,se)):(D.u="GET",D.g.ea(D.A,D.u,null,se)),bt(),Or(D.i,D.u,D.A,D.l,D.R,D.m)}ft.prototype.ca=function(D){D=D.target;const se=this.M;se&&bs(D)==3?se.j():this.Y(D)},ft.prototype.Y=function(D){try{if(D==this.g)e:{const ta=bs(this.g);var se=this.g.Ba();const Ul=this.g.Z();if(!(3>ta)&&(ta!=3||this.g&&(this.h.h||this.g.oa()||t0(this.g)))){this.J||ta!=4||se==7||(se==8||0>=Ul?bt(3):bt(2)),on(this);var ce=this.g.Z();this.X=ce;t:if(Zt(this)){var we=t0(this.g);D="";var Ge=we.length,ct=bs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),ln(this);var Vt="";break t}this.h.i=new l.TextDecoder}for(se=0;se<Ge;se++)this.h.h=!0,D+=this.h.i.decode(we[se],{stream:!(ct&&se==Ge-1)});we.length=0,this.h.g+=D,this.C=0,Vt=this.h.g}else Vt=this.g.oa();if(this.o=ce==200,Yr(this.i,this.u,this.A,this.l,this.R,ta,ce),this.o){if(this.T&&!this.K){t:{if(this.g){var Pr,wn=this.g;if((Pr=wn.g?wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Pr)){var Jr=Pr;break t}}Jr=null}if(ce=Jr)pe(this.i,this.l,ce,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gs(this,ce);else{this.o=!1,this.s=3,yt(12),An(this),ln(this);break e}}if(this.P){ce=!0;let ns;for(;!this.J&&this.C<Vt.length;)if(ns=zt(this,Vt),ns==lt){ta==4&&(this.s=4,yt(14),ce=!1),pe(this.i,this.l,null,"[Incomplete Response]");break}else if(ns==at){this.s=4,yt(15),pe(this.i,this.l,Vt,"[Invalid Chunk]"),ce=!1;break}else pe(this.i,this.l,ns,null),gs(this,ns);if(Zt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ta!=4||Vt.length!=0||this.h.h||(this.s=1,yt(16),ce=!1),this.o=this.o&&ce,!ce)pe(this.i,this.l,Vt,"[Invalid Chunked Response]"),An(this),ln(this);else if(0<Vt.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+Vt.length),hu(zn),zn.M=!0,yt(11))}}else pe(this.i,this.l,Vt,null),gs(this,Vt);ta==4&&An(this),this.o&&!this.J&&(ta==4?mu(this.j,this):(this.o=!1,Kt(this)))}else du(this.g),ce==400&&0<Vt.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),An(this),ln(this)}}}catch{}finally{}};function Zt(D){return D.g?D.u=="GET"&&D.L!=2&&D.j.Ca:!1}function zt(D,se){var ce=D.C,we=se.indexOf(`
`,ce);return we==-1?lt:(ce=Number(se.substring(ce,we)),isNaN(ce)?at:(we+=1,we+ce>se.length?lt:(se=se.slice(we,we+ce),D.C=we+ce,se)))}ft.prototype.cancel=function(){this.J=!0,An(this)};function Kt(D){D.S=Date.now()+D.I,Tr(D,D.I)}function Tr(D,se){if(D.B!=null)throw Error("WatchDog timer not null");D.B=br(h(D.ba,D),se)}function on(D){D.B&&(l.clearTimeout(D.B),D.B=null)}ft.prototype.ba=function(){this.B=null;const D=Date.now();0<=D-this.S?(Fe(this.i,this.A),this.L!=2&&(bt(),yt(17)),An(this),this.s=2,ln(this)):Tr(this,this.S-D)};function ln(D){D.j.G==0||D.J||mu(D.j,D)}function An(D){on(D);var se=D.M;se&&typeof se.ma=="function"&&se.ma(),D.M=null,tn(D.U),D.g&&(se=D.g,D.g=null,se.abort(),se.ma())}function gs(D,se){try{var ce=D.j;if(ce.G!=0&&(ce.g==D||wi(ce.h,D))){if(!D.K&&wi(ce.h,D)&&ce.G==3){try{var we=ce.Da.g.parse(se)}catch{we=null}if(Array.isArray(we)&&we.length==3){var Ge=we;if(Ge[0]==0){e:if(!ce.u){if(ce.g)if(ce.g.F+3e3<D.F)bc(ce),of(ce);else break e;cd(ce),yt(18)}}else ce.za=Ge[1],0<ce.za-ce.T&&37500>Ge[2]&&ce.F&&ce.v==0&&!ce.C&&(ce.C=br(h(ce.Za,ce),6e3));if(1>=Ls(ce.h)&&ce.ca){try{ce.ca()}catch{}ce.ca=void 0}}else Qi(ce,11)}else if((D.K||ce.g==D)&&bc(ce),!w(se))for(Ge=ce.Da.g.parse(se),se=0;se<Ge.length;se++){let Jr=Ge[se];if(ce.T=Jr[0],Jr=Jr[1],ce.G==2)if(Jr[0]=="c"){ce.K=Jr[1],ce.ia=Jr[2];const zn=Jr[3];zn!=null&&(ce.la=zn,ce.j.info("VER="+ce.la));const ta=Jr[4];ta!=null&&(ce.Aa=ta,ce.j.info("SVER="+ce.Aa));const Ul=Jr[5];Ul!=null&&typeof Ul=="number"&&0<Ul&&(we=1.5*Ul,ce.L=we,ce.j.info("backChannelRequestTimeoutMs_="+we)),we=ce;const ns=D.g;if(ns){const Io=ns.g?ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var ct=we.h;ct.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(ct.j=ct.l,ct.g=new Set,ct.h&&(xa(ct,ct.h),ct.h=null))}if(we.D){const pu=ns.g?ns.g.getResponseHeader("X-HTTP-Session-Id"):null;pu&&(we.ya=pu,Vn(we.I,we.D,pu))}}ce.G=3,ce.l&&ce.l.ua(),ce.ba&&(ce.R=Date.now()-D.F,ce.j.info("Handshake RTT: "+ce.R+"ms")),we=ce;var Vt=D;if(we.qa=Z(we,we.J?we.ia:null,we.W),Vt.K){ai(we.h,Vt);var Pr=Vt,wn=we.L;wn&&(Pr.I=wn),Pr.B&&(on(Pr),Kt(Pr)),we.g=Vt}else cf(we);0<ce.i.length&&lf(ce)}else Jr[0]!="stop"&&Jr[0]!="close"||Qi(ce,7);else ce.G==3&&(Jr[0]=="stop"||Jr[0]=="close"?Jr[0]=="stop"?Qi(ce,7):vc(ce):Jr[0]!="noop"&&ce.l&&ce.l.ta(Jr),ce.v=0)}}bt(4)}catch{}}var So=class{constructor(D,se){this.g=D,this.map=se}};function xs(D){this.l=D||10,l.PerformanceNavigationTiming?(D=l.performance.getEntriesByType("navigation"),D=0<D.length&&(D[0].nextHopProtocol=="hq"||D[0].nextHopProtocol=="h2")):D=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=D?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ni(D){return D.h?!0:D.g?D.g.size>=D.j:!1}function Ls(D){return D.h?1:D.g?D.g.size:0}function wi(D,se){return D.h?D.h==se:D.g?D.g.has(se):!1}function xa(D,se){D.g?D.g.add(se):D.h=se}function ai(D,se){D.h&&D.h==se?D.h=null:D.g&&D.g.has(se)&&D.g.delete(se)}xs.prototype.cancel=function(){if(this.i=nf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const D of this.g.values())D.cancel();this.g.clear()}};function nf(D){if(D.h!=null)return D.i.concat(D.h.D);if(D.g!=null&&D.g.size!==0){let se=D.i;for(const ce of D.g.values())se=se.concat(ce.D);return se}return x(D.i)}function Jh(D){if(D.V&&typeof D.V=="function")return D.V();if(typeof Map<"u"&&D instanceof Map||typeof Set<"u"&&D instanceof Set)return Array.from(D.values());if(typeof D=="string")return D.split("");if(c(D)){for(var se=[],ce=D.length,we=0;we<ce;we++)se.push(D[we]);return se}se=[],ce=0;for(we in D)se[ce++]=D[we];return se}function su(D){if(D.na&&typeof D.na=="function")return D.na();if(!D.V||typeof D.V!="function"){if(typeof Map<"u"&&D instanceof Map)return Array.from(D.keys());if(!(typeof Set<"u"&&D instanceof Set)){if(c(D)||typeof D=="string"){var se=[];D=D.length;for(var ce=0;ce<D;ce++)se.push(ce);return se}se=[],ce=0;for(const we in D)se[ce++]=we;return se}}}function vA(D,se){if(D.forEach&&typeof D.forEach=="function")D.forEach(se,void 0);else if(c(D)||typeof D=="string")Array.prototype.forEach.call(D,se,void 0);else for(var ce=su(D),we=Jh(D),Ge=we.length,ct=0;ct<Ge;ct++)se.call(void 0,we[ct],ce&&ce[ct],D)}var Ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function af(D,se){if(D){D=D.split("&");for(var ce=0;ce<D.length;ce++){var we=D[ce].indexOf("="),Ge=null;if(0<=we){var ct=D[ce].substring(0,we);Ge=D[ce].substring(we+1)}else ct=D[ce];se(ct,Ge?decodeURIComponent(Ge.replace(/\+/g," ")):"")}}}function On(D){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,D instanceof On){this.h=D.h,iu(this,D.j),this.o=D.o,this.g=D.g,ou(this,D.s),this.l=D.l;var se=D.i,ce=new Ol;ce.i=se.i,se.g&&(ce.g=new Map(se.g),ce.h=se.h),Fl(this,ce),this.m=D.m}else D&&(se=String(D).match(Ei))?(this.h=!1,iu(this,se[1]||"",!0),this.o=ko(se[2]||""),this.g=ko(se[3]||"",!0),ou(this,se[4]),this.l=ko(se[5]||"",!0),Fl(this,se[6]||"",!0),this.m=ko(se[7]||"")):(this.h=!1,this.i=new Ol(null,this.h))}On.prototype.toString=function(){var D=[],se=this.j;se&&D.push(hc(se,bA,!0),":");var ce=this.g;return(ce||se=="file")&&(D.push("//"),(se=this.o)&&D.push(hc(se,bA,!0),"@"),D.push(encodeURIComponent(String(ce)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ce=this.s,ce!=null&&D.push(":",String(ce))),(ce=this.l)&&(this.g&&ce.charAt(0)!="/"&&D.push("/"),D.push(hc(ce,ce.charAt(0)=="/"?mc:yA,!0))),(ce=this.i.toString())&&D.push("?",ce),(ce=this.m)&&D.push("#",hc(ce,pc)),D.join("")};function Ni(D){return new On(D)}function iu(D,se,ce){D.j=ce?ko(se,!0):se,D.j&&(D.j=D.j.replace(/:$/,""))}function ou(D,se){if(se){if(se=Number(se),isNaN(se)||0>se)throw Error("Bad port number "+se);D.s=se}else D.s=null}function Fl(D,se,ce){se instanceof Ol?(D.i=se,e0(D.i,D.h)):(ce||(se=hc(se,sf)),D.i=new Ol(se,D.h))}function Vn(D,se,ce){D.i.set(se,ce)}function lu(D){return Vn(D,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),D}function ko(D,se){return D?se?decodeURI(D.replace(/%25/g,"%2525")):decodeURIComponent(D):""}function hc(D,se,ce){return typeof D=="string"?(D=encodeURI(D).replace(se,Zh),ce&&(D=D.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D):null}function Zh(D){return D=D.charCodeAt(0),"%"+(D>>4&15).toString(16)+(D&15).toString(16)}var bA=/[#\/\?@]/g,yA=/[#\?:]/g,mc=/[#\?]/g,sf=/[#\?@]/g,pc=/#/g;function Ol(D,se){this.h=this.g=null,this.i=D||null,this.j=!!se}function ca(D){D.g||(D.g=new Map,D.h=0,D.i&&af(D.i,function(se,ce){D.add(decodeURIComponent(se.replace(/\+/g," ")),ce)}))}e=Ol.prototype,e.add=function(D,se){ca(this),this.i=null,D=Pl(this,D);var ce=this.g.get(D);return ce||this.g.set(D,ce=[]),ce.push(se),this.h+=1,this};function gc(D,se){ca(D),se=Pl(D,se),D.g.has(se)&&(D.i=null,D.h-=D.g.get(se).length,D.g.delete(se))}function Dl(D,se){return ca(D),se=Pl(D,se),D.g.has(se)}e.forEach=function(D,se){ca(this),this.g.forEach(function(ce,we){ce.forEach(function(Ge){D.call(se,Ge,we,this)},this)},this)},e.na=function(){ca(this);const D=Array.from(this.g.values()),se=Array.from(this.g.keys()),ce=[];for(let we=0;we<se.length;we++){const Ge=D[we];for(let ct=0;ct<Ge.length;ct++)ce.push(se[we])}return ce},e.V=function(D){ca(this);let se=[];if(typeof D=="string")Dl(this,D)&&(se=se.concat(this.g.get(Pl(this,D))));else{D=Array.from(this.g.values());for(let ce=0;ce<D.length;ce++)se=se.concat(D[ce])}return se},e.set=function(D,se){return ca(this),this.i=null,D=Pl(this,D),Dl(this,D)&&(this.h-=this.g.get(D).length),this.g.set(D,[se]),this.h+=1,this},e.get=function(D,se){return D?(D=this.V(D),0<D.length?String(D[0]):se):se};function Dr(D,se,ce){gc(D,se),0<ce.length&&(D.i=null,D.g.set(Pl(D,se),x(ce)),D.h+=ce.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const D=[],se=Array.from(this.g.keys());for(var ce=0;ce<se.length;ce++){var we=se[ce];const ct=encodeURIComponent(String(we)),Vt=this.V(we);for(we=0;we<Vt.length;we++){var Ge=ct;Vt[we]!==""&&(Ge+="="+encodeURIComponent(String(Vt[we]))),D.push(Ge)}}return this.i=D.join("&")};function Pl(D,se){return se=String(se),D.j&&(se=se.toLowerCase()),se}function e0(D,se){se&&!D.j&&(ca(D),D.i=null,D.g.forEach(function(ce,we){var Ge=we.toLowerCase();we!=Ge&&(gc(this,we),Dr(this,Ge,ce))},D)),D.j=se}function Li(D,se){const ce=new ur;if(l.Image){const we=new Image;we.onload=m(oo,ce,"TestLoadImage: loaded",!0,se,we),we.onerror=m(oo,ce,"TestLoadImage: error",!1,se,we),we.onabort=m(oo,ce,"TestLoadImage: abort",!1,se,we),we.ontimeout=m(oo,ce,"TestLoadImage: timeout",!1,se,we),l.setTimeout(function(){we.ontimeout&&we.ontimeout()},1e4),we.src=D}else se(!1)}function jo(D,se){const ce=new ur,we=new AbortController,Ge=setTimeout(()=>{we.abort(),oo(ce,"TestPingServer: timeout",!1,se)},1e4);fetch(D,{signal:we.signal}).then(ct=>{clearTimeout(Ge),ct.ok?oo(ce,"TestPingServer: ok",!0,se):oo(ce,"TestPingServer: server error",!1,se)}).catch(()=>{clearTimeout(Ge),oo(ce,"TestPingServer: error",!1,se)})}function oo(D,se,ce,we,Ge){try{Ge&&(Ge.onload=null,Ge.onerror=null,Ge.onabort=null,Ge.ontimeout=null),we(ce)}catch{}}function Rl(){this.g=new Fn}function Bo(D,se,ce){const we=ce||"";try{vA(D,function(Ge,ct){let Vt=Ge;u(Ge)&&(Vt=Br(Ge)),se.push(we+ct+"="+encodeURIComponent(Vt))})}catch(Ge){throw se.push(we+"type="+encodeURIComponent("_badmap")),Ge}}function cu(D){this.l=D.Ub||null,this.j=D.eb||!1}g(cu,Lr),cu.prototype.g=function(){return new xc(this.l,this.j)},cu.prototype.i=function(D){return function(){return D}}({});function xc(D,se){At.call(this),this.D=D,this.o=se,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(xc,At),e=xc.prototype,e.open=function(D,se){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=D,this.A=se,this.readyState=1,Mi(this)},e.send=function(D){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const se={headers:this.u,method:this.B,credentials:this.m,cache:void 0};D&&(se.body=D),(this.D||l).fetch(new Request(this.A,se)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,To(this)),this.readyState=0},e.Sa=function(D){if(this.g&&(this.l=D,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=D.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if(this.responseType==="arraybuffer")D.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in D){if(this.j=D.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wA(this)}else D.text().then(this.Ra.bind(this),this.ga.bind(this))};function wA(D){D.j.read().then(D.Pa.bind(D)).catch(D.ga.bind(D))}e.Pa=function(D){if(this.g){if(this.o&&D.value)this.response.push(D.value);else if(!this.o){var se=D.value?D.value:new Uint8Array(0);(se=this.v.decode(se,{stream:!D.done}))&&(this.response=this.responseText+=se)}D.done?To(this):Mi(this),this.readyState==3&&wA(this)}},e.Ra=function(D){this.g&&(this.response=this.responseText=D,To(this))},e.Qa=function(D){this.g&&(this.response=D,To(this))},e.ga=function(){this.g&&To(this)};function To(D){D.readyState=4,D.l=null,D.j=null,D.v=null,Mi(D)}e.setRequestHeader=function(D,se){this.u.append(D,se)},e.getResponseHeader=function(D){return this.h&&this.h.get(D.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const D=[],se=this.h.entries();for(var ce=se.next();!ce.done;)ce=ce.value,D.push(ce[0]+": "+ce[1]),ce=se.next();return D.join(`\r
`)};function Mi(D){D.onreadystatechange&&D.onreadystatechange.call(D)}Object.defineProperty(xc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(D){this.m=D?"include":"same-origin"}});function Ll(D){let se="";return T(D,function(ce,we){se+=we,se+=":",se+=ce,se+=`\r
`}),se}function vs(D,se,ce){e:{for(we in ce){var we=!1;break e}we=!0}we||(ce=Ll(ce),typeof D=="string"?ce!=null&&encodeURIComponent(String(ce)):Vn(D,se,ce))}function yn(D){At.call(this),this.headers=new Map,this.o=D||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(yn,At);var uu=/^https?$/i,Ml=["POST","PUT"];e=yn.prototype,e.Ha=function(D){this.J=D},e.ea=function(D,se,ce,we){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+D);se=se?se.toUpperCase():"GET",this.D=D,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?ps(this.o):ps(Oe),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(se,String(D),!0),this.B=!1}catch(ct){EA(this,ct);return}if(D=ce||"",ce=new Map(this.headers),we)if(Object.getPrototypeOf(we)===Object.prototype)for(var Ge in we)ce.set(Ge,we[Ge]);else if(typeof we.keys=="function"&&typeof we.get=="function")for(const ct of we.keys())ce.set(ct,we.get(ct));else throw Error("Unknown input type for opt_headers: "+String(we));we=Array.from(ce.keys()).find(ct=>ct.toLowerCase()=="content-type"),Ge=l.FormData&&D instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ml,se,void 0))||we||Ge||ce.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ct,Vt]of ce)this.g.setRequestHeader(ct,Vt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ui(this),this.u=!0,this.g.send(D),this.u=!1}catch(ct){EA(this,ct)}};function EA(D,se){D.h=!1,D.g&&(D.j=!0,D.g.abort(),D.j=!1),D.l=se,D.m=5,ad(D),Al(D)}function ad(D){D.A||(D.A=!0,vt(D,"complete"),vt(D,"error"))}e.abort=function(D){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=D||7,vt(this,"complete"),vt(this,"abort"),Al(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Al(this,!0)),yn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?sd(this):this.bb())},e.bb=function(){sd(this)};function sd(D){if(D.h&&typeof o<"u"&&(!D.v[1]||bs(D)!=4||D.Z()!=2)){if(D.u&&bs(D)==4)Tt(D.Ea,0,D);else if(vt(D,"readystatechange"),bs(D)==4){D.h=!1;try{const Vt=D.Z();e:switch(Vt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var se=!0;break e;default:se=!1}var ce;if(!(ce=se)){var we;if(we=Vt===0){var Ge=String(D.D).match(Ei)[1]||null;!Ge&&l.self&&l.self.location&&(Ge=l.self.location.protocol.slice(0,-1)),we=!uu.test(Ge?Ge.toLowerCase():"")}ce=we}if(ce)vt(D,"complete"),vt(D,"success");else{D.m=6;try{var ct=2<bs(D)?D.g.statusText:""}catch{ct=""}D.l=ct+" ["+D.Z()+"]",ad(D)}}finally{Al(D)}}}}function Al(D,se){if(D.g){Ui(D);const ce=D.g,we=D.v[0]?()=>{}:null;D.g=null,D.v=null,se||vt(D,"ready");try{ce.onreadystatechange=we}catch{}}}function Ui(D){D.I&&(l.clearTimeout(D.I),D.I=null)}e.isActive=function(){return!!this.g};function bs(D){return D.g?D.g.readyState:0}e.Z=function(){try{return 2<bs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(D){if(this.g){var se=this.g.responseText;return D&&se.indexOf(D)==0&&(se=se.substring(D.length)),Kr(se)}};function t0(D){try{if(!D.g)return null;if("response"in D.g)return D.g.response;switch(D.H){case"":case"text":return D.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in D.g)return D.g.mozResponseArrayBuffer}return null}catch{return null}}function du(D){const se={};D=(D.g&&2<=bs(D)&&D.g.getAllResponseHeaders()||"").split(`\r
`);for(let we=0;we<D.length;we++){if(w(D[we]))continue;var ce=P(D[we]);const Ge=ce[0];if(ce=ce[1],typeof ce!="string")continue;ce=ce.trim();const ct=se[Ge]||[];se[Ge]=ct,ct.push(ce)}C(se,function(we){return we.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(D,se,ce){return ce&&ce.internalChannelParams&&ce.internalChannelParams[D]||se}function fu(D){this.Aa=0,this.i=[],this.j=new ur,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,D),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,D),this.cb=Ci("retryDelaySeedMs",1e4,D),this.Wa=Ci("forwardChannelMaxRetries",2,D),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,D),this.pa=D&&D.xmlHttpFactory||void 0,this.Xa=D&&D.Tb||void 0,this.Ca=D&&D.useFetchStreams||!1,this.L=void 0,this.J=D&&D.supportsCrossDomainXhr||!1,this.K="",this.h=new xs(D&&D.concurrentRequestLimit),this.Da=new Rl,this.P=D&&D.fastHandshake||!1,this.O=D&&D.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=D&&D.Rb||!1,D&&D.xa&&this.j.xa(),D&&D.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&D&&D.detectBufferingProxy||!1,this.ja=void 0,D&&D.longPollingTimeout&&0<D.longPollingTimeout&&(this.ja=D.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=fu.prototype,e.la=8,e.G=1,e.connect=function(D,se,ce,we){yt(0),this.W=D,this.H=se||{},ce&&we!==void 0&&(this.H.OSID=ce,this.H.OAID=we),this.F=this.X,this.I=Z(this,null,this.W),lf(this)};function vc(D){if(id(D),D.G==3){var se=D.U++,ce=Ni(D.I);if(Vn(ce,"SID",D.K),Vn(ce,"RID",se),Vn(ce,"TYPE","terminate"),Au(D,ce),se=new ft(D,D.j,se),se.L=2,se.v=lu(Ni(ce)),ce=!1,l.navigator&&l.navigator.sendBeacon)try{ce=l.navigator.sendBeacon(se.v.toString(),"")}catch{}!ce&&l.Image&&(new Image().src=se.v,ce=!0),ce||(se.g=me(se.j,null),se.g.ea(se.v)),se.F=Date.now(),Kt(se)}uf(D)}function of(D){D.g&&(hu(D),D.g.cancel(),D.g=null)}function id(D){of(D),D.u&&(l.clearTimeout(D.u),D.u=null),bc(D),D.h.cancel(),D.s&&(typeof D.s=="number"&&l.clearTimeout(D.s),D.s=null)}function lf(D){if(!ni(D.h)&&!D.s){D.s=!0;var se=D.Ga;q||ee(),z||(q(),z=!0),W.add(se,D),D.B=0}}function NA(D,se){return Ls(D.h)>=D.h.j-(D.s?1:0)?!1:D.s?(D.i=se.D.concat(D.i),!0):D.G==1||D.G==2||D.B>=(D.Va?0:D.Wa)?!1:(D.s=br(h(D.Ga,D,se),ud(D,D.B)),D.B++,!0)}e.Ga=function(D){if(this.s)if(this.s=null,this.G==1){if(!D){this.U=Math.floor(1e5*Math.random()),D=this.U++;const Ge=new ft(this,this.j,D);let ct=this.o;if(this.S&&(ct?(ct=S(ct),L(ct,this.S)):ct=this.S),this.m!==null||this.O||(Ge.H=ct,ct=null),this.P)e:{for(var se=0,ce=0;ce<this.i.length;ce++){t:{var we=this.i[ce];if("__data__"in we.map&&(we=we.map.__data__,typeof we=="string")){we=we.length;break t}we=void 0}if(we===void 0)break;if(se+=we,4096<se){se=ce;break e}if(se===4096||ce===this.i.length-1){se=ce+1;break e}}se=1e3}else se=1e3;se=ld(this,Ge,se),ce=Ni(this.I),Vn(ce,"RID",D),Vn(ce,"CVER",22),this.D&&Vn(ce,"X-HTTP-Session-Id",this.D),Au(this,ce),ct&&(this.O?se="headers="+encodeURIComponent(String(Ll(ct)))+"&"+se:this.m&&vs(ce,this.m,ct)),xa(this.h,Ge),this.Ua&&Vn(ce,"TYPE","init"),this.P?(Vn(ce,"$req",se),Vn(ce,"SID","null"),Ge.T=!0,Dt(Ge,ce,null)):Dt(Ge,ce,se),this.G=2}}else this.G==3&&(D?od(this,D):this.i.length==0||ni(this.h)||od(this))};function od(D,se){var ce;se?ce=se.l:ce=D.U++;const we=Ni(D.I);Vn(we,"SID",D.K),Vn(we,"RID",ce),Vn(we,"AID",D.T),Au(D,we),D.m&&D.o&&vs(we,D.m,D.o),ce=new ft(D,D.j,ce,D.B+1),D.m===null&&(ce.H=D.o),se&&(D.i=se.D.concat(D.i)),se=ld(D,ce,1e3),ce.I=Math.round(.5*D.wa)+Math.round(.5*D.wa*Math.random()),xa(D.h,ce),Dt(ce,we,se)}function Au(D,se){D.H&&T(D.H,function(ce,we){Vn(se,we,ce)}),D.l&&vA({},function(ce,we){Vn(se,we,ce)})}function ld(D,se,ce){ce=Math.min(D.i.length,ce);var we=D.l?h(D.l.Na,D.l,D):null;e:{var Ge=D.i;let ct=-1;for(;;){const Vt=["count="+ce];ct==-1?0<ce?(ct=Ge[0].g,Vt.push("ofs="+ct)):ct=0:Vt.push("ofs="+ct);let Pr=!0;for(let wn=0;wn<ce;wn++){let Jr=Ge[wn].g;const zn=Ge[wn].map;if(Jr-=ct,0>Jr)ct=Math.max(0,Ge[wn].g-100),Pr=!1;else try{Bo(zn,Vt,"req"+Jr+"_")}catch{we&&we(zn)}}if(Pr){we=Vt.join("&");break e}}}return D=D.i.splice(0,ce),se.D=D,we}function cf(D){if(!D.g&&!D.u){D.Y=1;var se=D.Fa;q||ee(),z||(q(),z=!0),W.add(se,D),D.v=0}}function cd(D){return D.g||D.u||3<=D.v?!1:(D.Y++,D.u=br(h(D.Fa,D),ud(D,D.v)),D.v++,!0)}e.Fa=function(){if(this.u=null,r0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var D=2*this.R;this.j.info("BP detection timer enabled: "+D),this.A=br(h(this.ab,this),D)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),of(this),r0(this))};function hu(D){D.A!=null&&(l.clearTimeout(D.A),D.A=null)}function r0(D){D.g=new ft(D,D.j,"rpc",D.Y),D.m===null&&(D.g.H=D.o),D.g.O=0;var se=Ni(D.qa);Vn(se,"RID","rpc"),Vn(se,"SID",D.K),Vn(se,"AID",D.T),Vn(se,"CI",D.F?"0":"1"),!D.F&&D.ja&&Vn(se,"TO",D.ja),Vn(se,"TYPE","xmlhttp"),Au(D,se),D.m&&D.o&&vs(se,D.m,D.o),D.L&&(D.g.I=D.L);var ce=D.g;D=D.ia,ce.L=1,ce.v=lu(Ni(se)),ce.m=null,ce.P=!0,$t(ce,D)}e.Za=function(){this.C!=null&&(this.C=null,of(this),cd(this),yt(19))};function bc(D){D.C!=null&&(l.clearTimeout(D.C),D.C=null)}function mu(D,se){var ce=null;if(D.g==se){bc(D),hu(D),D.g=null;var we=2}else if(wi(D.h,se))ce=se.D,ai(D.h,se),we=1;else return;if(D.G!=0){if(se.o)if(we==1){ce=se.m?se.m.length:0,se=Date.now()-se.F;var Ge=D.B;we=gt(),vt(we,new rr(we,ce)),lf(D)}else cf(D);else if(Ge=se.s,Ge==3||Ge==0&&0<se.X||!(we==1&&NA(D,se)||we==2&&cd(D)))switch(ce&&0<ce.length&&(se=D.h,se.i=se.i.concat(ce)),Ge){case 1:Qi(D,5);break;case 4:Qi(D,10);break;case 3:Qi(D,6);break;default:Qi(D,2)}}}function ud(D,se){let ce=D.Ta+Math.floor(Math.random()*D.cb);return D.isActive()||(ce*=2),ce*se}function Qi(D,se){if(D.j.info("Error code "+se),se==2){var ce=h(D.fb,D),we=D.Xa;const Ge=!we;we=new On(we||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||iu(we,"https"),lu(we),Ge?Li(we.toString(),ce):jo(we.toString(),ce)}else yt(2);D.G=0,D.l&&D.l.sa(se),uf(D),id(D)}e.fb=function(D){D?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function uf(D){if(D.G=0,D.ka=[],D.l){const se=nf(D.h);(se.length!=0||D.i.length!=0)&&(v(D.ka,se),v(D.ka,D.i),D.h.i.length=0,x(D.i),D.i.length=0),D.l.ra()}}function Z(D,se,ce){var we=ce instanceof On?Ni(ce):new On(ce);if(we.g!="")se&&(we.g=se+"."+we.g),ou(we,we.s);else{var Ge=l.location;we=Ge.protocol,se=se?se+"."+Ge.hostname:Ge.hostname,Ge=+Ge.port;var ct=new On(null);we&&iu(ct,we),se&&(ct.g=se),Ge&&ou(ct,Ge),ce&&(ct.l=ce),we=ct}return ce=D.D,se=D.ya,ce&&se&&Vn(we,ce,se),Vn(we,"VER",D.la),Au(D,we),we}function me(D,se,ce){if(se&&!D.J)throw Error("Can't create secondary domain capable XhrIo object.");return se=D.Ca&&!D.pa?new yn(new cu({eb:ce})):new yn(D.pa),se.Ha(D.J),se}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Re(){}e=Re.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Me(){}Me.prototype.g=function(D,se){return new Ke(D,se)};function Ke(D,se){At.call(this),this.g=new fu(se),this.l=D,this.h=se&&se.messageUrlParams||null,D=se&&se.messageHeaders||null,se&&se.clientProtocolHeaderRequired&&(D?D["X-Client-Protocol"]="webchannel":D={"X-Client-Protocol":"webchannel"}),this.g.o=D,D=se&&se.initMessageHeaders||null,se&&se.messageContentType&&(D?D["X-WebChannel-Content-Type"]=se.messageContentType:D={"X-WebChannel-Content-Type":se.messageContentType}),se&&se.va&&(D?D["X-WebChannel-Client-Profile"]=se.va:D={"X-WebChannel-Client-Profile":se.va}),this.g.S=D,(D=se&&se.Sb)&&!w(D)&&(this.g.m=D),this.v=se&&se.supportsCrossDomainXhr||!1,this.u=se&&se.sendRawJson||!1,(se=se&&se.httpSessionIdParam)&&!w(se)&&(this.g.D=se,D=this.h,D!==null&&se in D&&(D=this.h,se in D&&delete D[se])),this.j=new er(this)}g(Ke,At),Ke.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){vc(this.g)},Ke.prototype.o=function(D){var se=this.g;if(typeof D=="string"){var ce={};ce.__data__=D,D=ce}else this.u&&(ce={},ce.__data__=Br(D),D=ce);se.i.push(new So(se.Ya++,D)),se.G==3&&lf(se)},Ke.prototype.N=function(){this.g.l=null,delete this.j,vc(this.g),delete this.g,Ke.aa.N.call(this)};function Ct(D){Ta.call(this),D.__headers__&&(this.headers=D.__headers__,this.statusCode=D.__status__,delete D.__headers__,delete D.__status__);var se=D.__sm__;if(se){e:{for(const ce in se){D=ce;break e}D=void 0}(this.i=D)&&(D=this.i,se=se!==null&&D in se?se[D]:void 0),this.data=se}else this.data=D}g(Ct,Ta);function Qt(){an.call(this),this.status=1}g(Qt,an);function er(D){this.g=D}g(er,Re),er.prototype.ua=function(){vt(this.g,"a")},er.prototype.ta=function(D){vt(this.g,new Ct(D))},er.prototype.sa=function(D){vt(this.g,new Qt)},er.prototype.ra=function(){vt(this.g,"b")},Me.prototype.createWebChannel=Me.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,fZ=function(){return new Me},dZ=function(){return gt()},uZ=vr,Y6={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,b5=ke,Te.COMPLETE="complete",cZ=Te,pn.EventType=la,la.OPEN="a",la.CLOSE="b",la.ERROR="c",la.MESSAGE="d",At.prototype.listen=At.prototype.K,zy=pn,yn.prototype.listenOnce=yn.prototype.L,yn.prototype.getLastError=yn.prototype.Ka,yn.prototype.getLastErrorCode=yn.prototype.Ba,yn.prototype.getStatus=yn.prototype.Z,yn.prototype.getResponseJson=yn.prototype.Oa,yn.prototype.getResponseText=yn.prototype.oa,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Ha,lZ=yn}).apply(typeof MN<"u"?MN:typeof self<"u"?self:typeof window<"u"?window:{});const sQ="@firebase/firestore",iQ="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Ko.UNAUTHENTICATED=new Ko(null),Ko.GOOGLE_CREDENTIALS=new Ko("google-credentials-uid"),Ko.FIRST_PARTY=new Ko("first-party-uid"),Ko.MOCK_USER=new Ko("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hb="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=new ZD("@firebase/firestore");function lv(){return vg.logLevel}function fr(e,...t){if(vg.logLevel<=jn.DEBUG){const r=t.map(uP);vg.debug(`Firestore (${Hb}): ${e}`,...r)}}function _h(e,...t){if(vg.logLevel<=jn.ERROR){const r=t.map(uP);vg.error(`Firestore (${Hb}): ${e}`,...r)}}function bg(e,...t){if(vg.logLevel<=jn.WARN){const r=t.map(uP);vg.warn(`Firestore (${Hb}): ${e}`,...r)}}function uP(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,AZ(e,n,r)}function AZ(e,t,r){let n=`FIRESTORE (${Hb}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw _h(n),new Error(n)}function ia(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||AZ(t,a,n)}function nn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yt extends Xd{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class mZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Ko.UNAUTHENTICATED))}shutdown(){}}class txe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class rxe{constructor(t){this.t=t,this.currentUser=Ko.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){ia(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new hh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hh,t.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{fr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(fr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hh)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(fr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ia(typeof n.accessToken=="string",31837,{l:n}),new hZ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ia(t===null||typeof t=="string",2055,{h:t}),new Ko(t)}}class nxe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Ko.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class axe{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new nxe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Ko.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oQ{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sxe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Uc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){ia(this.o===void 0,3512);const n=s=>{s.error!=null&&fr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,fr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{fr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):fr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oQ(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ia(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new oQ(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ixe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=ixe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function Bn(e,t){return e<t?-1:e>t?1:0}function J6(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return J3(a)===J3(s)?Bn(a,s):J3(a)?1:-1}return Bn(e.length,t.length)}const oxe=55296,lxe=57343;function J3(e){const t=e.charCodeAt(0);return t>=oxe&&t<=lxe}function rb(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lQ="__name__";class Uf{constructor(t,r,n){r===void 0?r=0:r>t.length&&Gr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Gr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return Uf.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Uf?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=Uf.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return Bn(t.length,r.length)}static compareSegments(t,r){const n=Uf.isNumericId(t),a=Uf.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Uf.extractNumericId(t).compare(Uf.extractNumericId(r)):J6(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return hm.fromString(t.substring(4,t.length-2))}}class ka extends Uf{construct(t,r,n){return new ka(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Yt(St.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new ka(r)}static emptyPath(){return new ka([])}}const cxe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ji extends Uf{construct(t,r,n){return new Ji(t,r,n)}static isValidIdentifier(t){return cxe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ji.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lQ}static keyField(){return new Ji([lQ])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Yt(St.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<t.length;){const l=t[a];if(l==="\\"){if(a+1===t.length)throw new Yt(St.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Yt(St.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new Yt(St.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ji(r)}static emptyPath(){return new Ji([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t){this.path=t}static fromPath(t){return new Er(ka.fromString(t))}static fromName(t){return new Er(ka.fromString(t).popFirst(5))}static empty(){return new Er(ka.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ka.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return ka.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Er(new ka(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pZ(e,t,r){if(!r)throw new Yt(St.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gZ(e,t,r,n){if(t===!0&&n===!0)throw new Yt(St.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function cQ(e){if(!Er.isDocumentKey(e))throw new Yt(St.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function uQ(e){if(Er.isDocumentKey(e))throw new Yt(St.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function xZ(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Ek(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Gr(12329,{type:typeof e})}function sl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Yt(St.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Ek(e);throw new Yt(St.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function uxe(e,t){if(t<=0)throw new Yt(St.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(e,t){const r={typeString:e};return t&&(r.value=t),r}function J2(e,t){if(!xZ(e))throw new Yt(St.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const o=e[n];if(a&&typeof o!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&o!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Yt(St.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ=-62135596800,fQ=1e6;class cr{static now(){return cr.fromMillis(Date.now())}static fromDate(t){return cr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*fQ);return new cr(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Yt(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Yt(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<dQ)throw new Yt(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Yt(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fQ}_compareTo(t){return this.seconds===t.seconds?Bn(this.nanoseconds,t.nanoseconds):Bn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:cr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(J2(t,cr._jsonSchema))return new cr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-dQ;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}cr._jsonSchemaVersion="firestore/timestamp/1.0",cr._jsonSchema={type:xi("string",cr._jsonSchemaVersion),seconds:xi("number"),nanoseconds:xi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{static fromTimestamp(t){return new en(t)}static min(){return new en(new cr(0,0))}static max(){return new en(new cr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=-1;function dxe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=en.fromTimestamp(n===1e9?new cr(r+1,0):new cr(r,n));return new km(a,Er.empty(),t)}function fxe(e){return new km(e.readTime,e.key,qw)}class km{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new km(en.min(),Er.empty(),qw)}static max(){return new km(en.max(),Er.empty(),qw)}}function Axe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=Er.comparator(e.documentKey,t.documentKey),r!==0?r:Bn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hxe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mxe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(e){if(e.code!==St.FAILED_PRECONDITION||e.message!==hxe)throw e;fr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Gr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Rt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Rt?r:Rt.resolve(r)}catch(r){return Rt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Rt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Rt.reject(r)}static resolve(t){return new Rt((r,n)=>{r(t)})}static reject(t){return new Rt((r,n)=>{n(t)})}static waitFor(t){return new Rt((r,n)=>{let a=0,s=0,o=!1;t.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(t){let r=Rt.resolve(!1);for(const n of t)r=r.next(a=>a?Rt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Rt((n,a)=>{const s=t.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(t,r){return new Rt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function pxe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function zb(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Nk.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=-1;function Ck(e){return e==null}function d_(e){return e===0&&1/e==-1/0}function gxe(e){return typeof e=="number"&&Number.isInteger(e)&&!d_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vZ="";function xxe(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=AQ(t)),t=vxe(e.get(r),t);return AQ(t)}function vxe(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case vZ:r+="";break;default:r+=s}}return r}function AQ(e){return e+vZ+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hQ(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function qm(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function bZ(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(t,r){this.comparator=t,this.root=r||bo.EMPTY}insert(t,r){return new fs(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,bo.BLACK,null,null))}remove(t){return new fs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new UN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new UN(this.root,t,this.comparator,!1)}getReverseIterator(){return new UN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new UN(this.root,t,this.comparator,!0)}}class UN{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bo{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??bo.RED,this.left=a??bo.EMPTY,this.right=s??bo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new bo(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return bo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return bo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Gr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Gr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Gr(27949);return t+(this.isRed()?0:1)}}bo.EMPTY=null,bo.RED=!0,bo.BLACK=!1;bo.EMPTY=new class{constructor(){this.size=0}get key(){throw Gr(57766)}get value(){throw Gr(16141)}get color(){throw Gr(16727)}get left(){throw Gr(29726)}get right(){throw Gr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new bo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t){this.comparator=t,this.data=new fs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new mQ(this.data.getIterator())}getIteratorFrom(t){return new mQ(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Ii)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Ii(this.comparator);return r.data=t,r}}class mQ{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t){this.fields=t,t.sort(Ji.comparator)}static empty(){return new Gc([])}unionWith(t){let r=new Ii(Ji.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Gc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return rb(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yZ("Invalid base64 string: "+s):s}}(t);return new no(r)}static fromUint8Array(t){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(t);return new no(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}no.EMPTY_BYTE_STRING=new no("");const bxe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jm(e){if(ia(!!e,39018),typeof e=="string"){let t=0;const r=bxe.exec(e);if(ia(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ws(e.seconds),nanos:Ws(e.nanos)}}function Ws(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Bm(e){return typeof e=="string"?no.fromBase64String(e):no.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wZ="server_timestamp",EZ="__type__",NZ="__previous_value__",CZ="__local_write_time__";function _k(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[EZ])==null?void 0:n.stringValue)===wZ}function Sk(e){const t=e.mapValue.fields[NZ];return _k(t)?Sk(t):t}function Kw(e){const t=jm(e.mapValue.fields[CZ].timestampValue);return new cr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yxe{constructor(t,r,n,a,s,o,l,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const f_="(default)";class nb{constructor(t,r){this.projectId=t,this.database=r||f_}static empty(){return new nb("","")}get isDefaultDatabase(){return this.database===f_}isEqual(t){return t instanceof nb&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Z="__type__",wxe="__max__",QN={mapValue:{}},SZ="__vector__",A_="value";function Tm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_k(e)?4:Nxe(e)?9007199254740991:Exe(e)?10:11:Gr(28295,{value:e})}function cA(e,t){if(e===t)return!0;const r=Tm(e);if(r!==Tm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kw(e).isEqual(Kw(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=jm(a.timestampValue),l=jm(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return Bm(a.bytesValue).isEqual(Bm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Ws(a.geoPointValue.latitude)===Ws(s.geoPointValue.latitude)&&Ws(a.geoPointValue.longitude)===Ws(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Ws(a.integerValue)===Ws(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=Ws(a.doubleValue),l=Ws(s.doubleValue);return o===l?d_(o)===d_(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return rb(e.arrayValue.values||[],t.arrayValue.values||[],cA);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(hQ(o)!==hQ(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!cA(o[c],l[c])))return!1;return!0}(e,t);default:return Gr(52216,{left:e})}}function Ww(e,t){return(e.values||[]).find(r=>cA(r,t))!==void 0}function ab(e,t){if(e===t)return 0;const r=Tm(e),n=Tm(t);if(r!==n)return Bn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Bn(e.booleanValue,t.booleanValue);case 2:return function(s,o){const l=Ws(s.integerValue||s.doubleValue),c=Ws(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return pQ(e.timestampValue,t.timestampValue);case 4:return pQ(Kw(e),Kw(t));case 5:return J6(e.stringValue,t.stringValue);case 6:return function(s,o){const l=Bm(s),c=Bm(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Bn(l[u],c[u]);if(d!==0)return d}return Bn(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const l=Bn(Ws(s.latitude),Ws(o.latitude));return l!==0?l:Bn(Ws(s.longitude),Ws(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return gQ(e.arrayValue,t.arrayValue);case 10:return function(s,o){var h,m,g,x;const l=s.fields||{},c=o.fields||{},u=(h=l[A_])==null?void 0:h.arrayValue,d=(m=c[A_])==null?void 0:m.arrayValue,f=Bn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:gQ(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===QN.mapValue&&o===QN.mapValue)return 0;if(s===QN.mapValue)return 1;if(o===QN.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=J6(c[f],d[f]);if(h!==0)return h;const m=ab(l[c[f]],u[d[f]]);if(m!==0)return m}return Bn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Gr(23264,{he:r})}}function pQ(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Bn(e,t);const r=jm(e),n=jm(t),a=Bn(r.seconds,n.seconds);return a!==0?a:Bn(r.nanos,n.nanos)}function gQ(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=ab(r[a],n[a]);if(s)return s}return Bn(r.length,n.length)}function sb(e){return Z6(e)}function Z6(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=jm(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return Bm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return Er.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=Z6(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${Z6(r.fields[o])}`;return a+"}"}(e.mapValue):Gr(61005,{value:e})}function y5(e){switch(Tm(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Sk(e);return t?16+y5(t):16;case 5:return 2*e.stringValue.length;case 6:return Bm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+y5(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return qm(n.fields,(s,o)=>{a+=s.length+y5(o)}),a}(e.mapValue);default:throw Gr(13486,{value:e})}}function h_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function eF(e){return!!e&&"integerValue"in e}function fP(e){return!!e&&"arrayValue"in e}function xQ(e){return!!e&&"nullValue"in e}function vQ(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function w5(e){return!!e&&"mapValue"in e}function Exe(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[_Z])==null?void 0:n.stringValue)===SZ}function Aw(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return qm(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Aw(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Aw(e.arrayValue.values[r]);return t}return{...e}}function Nxe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===wxe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t){this.value=t}static empty(){return new nc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!w5(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Aw(r)}setAll(t){let r=Ji.emptyPath(),n={},a=[];t.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=Aw(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());w5(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return cA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];w5(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){qm(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new nc(Aw(this.value))}}function kZ(e){const t=[];return qm(e.fields,(r,n)=>{const a=new Ji([r]);if(w5(n)){const s=kZ(n.mapValue).fields;if(s.length===0)t.push(a);else for(const o of s)t.push(a.child(o))}else t.push(a)}),new Gc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(t,r,n,a,s,o,l){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Jo(t,0,en.min(),en.min(),en.min(),nc.empty(),0)}static newFoundDocument(t,r,n,a){return new Jo(t,1,r,en.min(),n,a,0)}static newNoDocument(t,r){return new Jo(t,2,r,en.min(),en.min(),nc.empty(),0)}static newUnknownDocument(t,r){return new Jo(t,3,r,en.min(),en.min(),nc.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(en.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=nc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=nc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Jo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Jo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(t,r){this.position=t,this.inclusive=r}}function bQ(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],o=e.position[a];if(s.field.isKeyField()?n=Er.comparator(Er.fromName(o.referenceValue),r.key):n=ab(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function yQ(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!cA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(t,r="asc"){this.field=t,this.dir=r}}function Cxe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZ{}class pi extends jZ{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new Sxe(t,r,n):r==="array-contains"?new Bxe(t,n):r==="in"?new Txe(t,n):r==="not-in"?new Ixe(t,n):r==="array-contains-any"?new Fxe(t,n):new pi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new kxe(t,n):new jxe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(ab(r,this.value)):r!==null&&Tm(this.value)===Tm(r)&&this.matchesComparison(ab(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Gr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kd extends jZ{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Kd(t,r)}matches(t){return BZ(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function BZ(e){return e.op==="and"}function TZ(e){return _xe(e)&&BZ(e)}function _xe(e){for(const t of e.filters)if(t instanceof Kd)return!1;return!0}function tF(e){if(e instanceof pi)return e.field.canonicalString()+e.op.toString()+sb(e.value);if(TZ(e))return e.filters.map(t=>tF(t)).join(",");{const t=e.filters.map(r=>tF(r)).join(",");return`${e.op}(${t})`}}function IZ(e,t){return e instanceof pi?function(n,a){return a instanceof pi&&n.op===a.op&&n.field.isEqual(a.field)&&cA(n.value,a.value)}(e,t):e instanceof Kd?function(n,a){return a instanceof Kd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&IZ(o,a.filters[l]),!0):!1}(e,t):void Gr(19439)}function FZ(e){return e instanceof pi?function(r){return`${r.field.canonicalString()} ${r.op} ${sb(r.value)}`}(e):e instanceof Kd?function(r){return r.op.toString()+" {"+r.getFilters().map(FZ).join(" ,")+"}"}(e):"Filter"}class Sxe extends pi{constructor(t,r,n){super(t,r,n),this.key=Er.fromName(n.referenceValue)}matches(t){const r=Er.comparator(t.key,this.key);return this.matchesComparison(r)}}class kxe extends pi{constructor(t,r){super(t,"in",r),this.keys=OZ("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class jxe extends pi{constructor(t,r){super(t,"not-in",r),this.keys=OZ("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function OZ(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>Er.fromName(n.referenceValue))}class Bxe extends pi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return fP(r)&&Ww(r.arrayValue,this.value)}}class Txe extends pi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Ww(this.value.arrayValue,r)}}class Ixe extends pi{constructor(t,r){super(t,"not-in",r)}matches(t){if(Ww(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Ww(this.value.arrayValue,r)}}class Fxe extends pi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!fP(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ww(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oxe{constructor(t,r=null,n=[],a=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function wQ(e,t=null,r=[],n=[],a=null,s=null,o=null){return new Oxe(e,t,r,n,a,s,o)}function AP(e){const t=nn(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>tF(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Ck(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>sb(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>sb(n)).join(",")),t.Te=r}return t.Te}function hP(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!Cxe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!IZ(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yQ(e.startAt,t.startAt)&&yQ(e.endAt,t.endAt)}function rF(e){return Er.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Dxe(e,t,r,n,a,s,o,l){return new Hg(e,t,r,n,a,s,o,l)}function kk(e){return new Hg(e)}function EQ(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function mP(e){return e.collectionGroup!==null}function Ov(e){const t=nn(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ii(Ji.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Xw(s,n))}),r.has(Ji.keyField().canonicalString())||t.Ie.push(new Xw(Ji.keyField(),n))}return t.Ie}function nA(e){const t=nn(e);return t.Ee||(t.Ee=Pxe(t,Ov(e))),t.Ee}function Pxe(e,t){if(e.limitType==="F")return wQ(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Xw(a.field,s)});const r=e.endAt?new ib(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new ib(e.startAt.position,e.startAt.inclusive):null;return wQ(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function nF(e,t){const r=e.filters.concat([t]);return new Hg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function m_(e,t,r){return new Hg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function jk(e,t){return hP(nA(e),nA(t))&&e.limitType===t.limitType}function DZ(e){return`${AP(nA(e))}|lt:${e.limitType}`}function cv(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>FZ(a)).join(", ")}]`),Ck(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>sb(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>sb(a)).join(",")),`Target(${n})`}(nA(e))}; limitType=${e.limitType})`}function Bk(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Er.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of Ov(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=bQ(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,Ov(n),a)||n.endAt&&!function(o,l,c){const u=bQ(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,Ov(n),a))}(e,t)}function Rxe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function PZ(e){return(t,r)=>{let n=!1;for(const a of Ov(e)){const s=Lxe(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Lxe(e,t,r){const n=e.field.isKeyField()?Er.comparator(t.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?ab(c,u):Gr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Gr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){qm(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return bZ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mxe=new fs(Er.comparator);function Sh(){return Mxe}const RZ=new fs(Er.comparator);function $y(...e){let t=RZ;for(const r of e)t=t.insert(r.key,r);return t}function LZ(e){let t=RZ;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function $p(){return hw()}function MZ(){return hw()}function hw(){return new Vg(e=>e.toString(),(e,t)=>e.isEqual(t))}const Uxe=new fs(Er.comparator),Qxe=new Ii(Er.comparator);function Tn(...e){let t=Qxe;for(const r of e)t=t.add(r);return t}const Hxe=new Ii(Bn);function Vxe(){return Hxe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:d_(t)?"-0":t}}function UZ(e){return{integerValue:""+e}}function zxe(e,t){return gxe(t)?UZ(t):pP(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this._=void 0}}function $xe(e,t,r){return e instanceof Yw?function(a,s){const o={fields:{[EZ]:{stringValue:wZ},[CZ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&_k(s)&&(s=Sk(s)),s&&(o.fields[NZ]=s),{mapValue:o}}(r,t):e instanceof ob?HZ(e,t):e instanceof Jw?VZ(e,t):function(a,s){const o=QZ(a,s),l=NQ(o)+NQ(a.Ae);return eF(o)&&eF(a.Ae)?UZ(l):pP(a.serializer,l)}(e,t)}function Gxe(e,t,r){return e instanceof ob?HZ(e,t):e instanceof Jw?VZ(e,t):r}function QZ(e,t){return e instanceof p_?function(n){return eF(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Yw extends Tk{}class ob extends Tk{constructor(t){super(),this.elements=t}}function HZ(e,t){const r=zZ(t);for(const n of e.elements)r.some(a=>cA(a,n))||r.push(n);return{arrayValue:{values:r}}}class Jw extends Tk{constructor(t){super(),this.elements=t}}function VZ(e,t){let r=zZ(t);for(const n of e.elements)r=r.filter(a=>!cA(a,n));return{arrayValue:{values:r}}}class p_ extends Tk{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function NQ(e){return Ws(e.integerValue||e.doubleValue)}function zZ(e){return fP(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Z{constructor(t,r){this.field=t,this.transform=r}}function qxe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof ob&&a instanceof ob||n instanceof Jw&&a instanceof Jw?rb(n.elements,a.elements,cA):n instanceof p_&&a instanceof p_?cA(n.Ae,a.Ae):n instanceof Yw&&a instanceof Yw}(e.transform,t.transform)}class Kxe{constructor(t,r){this.version=t,this.transformResults=r}}class Sl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Sl}static exists(t){return new Sl(void 0,t)}static updateTime(t){return new Sl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function E5(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ik{}function GZ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Fk(e.key,Sl.none()):new Z2(e.key,e.data,Sl.none());{const r=e.data,n=nc.empty();let a=new Ii(Ji.comparator);for(let s of t.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new Km(e.key,n,new Gc(a.toArray()),Sl.none())}}function Wxe(e,t,r){e instanceof Z2?function(a,s,o){const l=a.value.clone(),c=_Q(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,r):e instanceof Km?function(a,s,o){if(!E5(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=_Q(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(qZ(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function mw(e,t,r,n){return e instanceof Z2?function(s,o,l,c){if(!E5(s.precondition,o))return l;const u=s.value.clone(),d=SQ(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Km?function(s,o,l,c){if(!E5(s.precondition,o))return l;const u=SQ(s.fieldTransforms,c,o),d=o.data;return d.setAll(qZ(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,o,l){return E5(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,r)}function Xxe(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=QZ(n.transform,a||null);s!=null&&(r===null&&(r=nc.empty()),r.set(n.field,s))}return r||null}function CQ(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&rb(n,a,(s,o)=>qxe(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Z2 extends Ik{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Km extends Ik{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qZ(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function _Q(e,t,r){const n=new Map;ia(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],o=s.transform,l=t.data.field(s.field);n.set(s.field,Gxe(o,l,r[a]))}return n}function SQ(e,t,r){const n=new Map;for(const a of e){const s=a.transform,o=r.data.field(a.field);n.set(a.field,$xe(s,o,t))}return n}class Fk extends Ik{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yxe extends Ik{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&Wxe(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=mw(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=mw(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=MZ();return this.mutations.forEach(a=>{const s=t.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=GZ(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(en.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Tn())}isEqual(t){return this.batchId===t.batchId&&rb(this.mutations,t.mutations,(r,n)=>CQ(r,n))&&rb(this.baseMutations,t.baseMutations,(r,n)=>CQ(r,n))}}class gP{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){ia(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return Uxe}();const s=t.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new gP(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zxe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eve{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui,Mn;function tve(e){switch(e){case St.OK:return Gr(64938);case St.CANCELLED:case St.UNKNOWN:case St.DEADLINE_EXCEEDED:case St.RESOURCE_EXHAUSTED:case St.INTERNAL:case St.UNAVAILABLE:case St.UNAUTHENTICATED:return!1;case St.INVALID_ARGUMENT:case St.NOT_FOUND:case St.ALREADY_EXISTS:case St.PERMISSION_DENIED:case St.FAILED_PRECONDITION:case St.ABORTED:case St.OUT_OF_RANGE:case St.UNIMPLEMENTED:case St.DATA_LOSS:return!0;default:return Gr(15467,{code:e})}}function KZ(e){if(e===void 0)return _h("GRPC error has no .code"),St.UNKNOWN;switch(e){case ui.OK:return St.OK;case ui.CANCELLED:return St.CANCELLED;case ui.UNKNOWN:return St.UNKNOWN;case ui.DEADLINE_EXCEEDED:return St.DEADLINE_EXCEEDED;case ui.RESOURCE_EXHAUSTED:return St.RESOURCE_EXHAUSTED;case ui.INTERNAL:return St.INTERNAL;case ui.UNAVAILABLE:return St.UNAVAILABLE;case ui.UNAUTHENTICATED:return St.UNAUTHENTICATED;case ui.INVALID_ARGUMENT:return St.INVALID_ARGUMENT;case ui.NOT_FOUND:return St.NOT_FOUND;case ui.ALREADY_EXISTS:return St.ALREADY_EXISTS;case ui.PERMISSION_DENIED:return St.PERMISSION_DENIED;case ui.FAILED_PRECONDITION:return St.FAILED_PRECONDITION;case ui.ABORTED:return St.ABORTED;case ui.OUT_OF_RANGE:return St.OUT_OF_RANGE;case ui.UNIMPLEMENTED:return St.UNIMPLEMENTED;case ui.DATA_LOSS:return St.DATA_LOSS;default:return Gr(39323,{code:e})}}(Mn=ui||(ui={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rve(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nve=new hm([4294967295,4294967295],0);function kQ(e){const t=rve().encode(e),r=new oZ;return r.update(t),new Uint8Array(r.digest())}function jQ(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new hm([r,n],0),new hm([a,s],0)]}class xP{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Gy(`Invalid padding: ${r}`);if(n<0)throw new Gy(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Gy(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Gy(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=hm.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(hm.fromNumber(n)));return a.compare(nve)===1&&(a=new hm([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=kQ(t),[n,a]=jQ(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);if(!this.we(o))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new xP(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const r=kQ(t),[n,a]=jQ(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);this.Se(o)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Gy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,eE.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new Ok(en.min(),a,new fs(Bn),Sh(),Tn())}}class eE{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new eE(n,r,Tn(),Tn(),Tn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class WZ{constructor(t,r){this.targetId=t,this.Ce=r}}class XZ{constructor(t,r,n=no.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class BQ{constructor(){this.ve=0,this.Fe=TQ(),this.Me=no.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Tn(),r=Tn(),n=Tn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Gr(38017,{changeType:s})}}),new eE(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=TQ()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ia(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ave{constructor(t){this.Ge=t,this.ze=new Map,this.je=Sh(),this.Je=HN(),this.He=HN(),this.Ye=new fs(Bn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Gr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(rF(s))if(n===0){const o=new Er(s.path);this.et(r,o,Jo.newNoDocument(o,en.min()))}else ia(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=Bm(n).toUint8Array()}catch(c){if(c instanceof yZ)return bg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new xP(o,a,s)}catch(c){return bg(c instanceof Gy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&rF(l.target)){const c=new Er(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Jo.newNoDocument(c,t))}s.Be&&(r.set(o,s.ke()),s.qe())}});let n=Tn();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,o)=>o.setReadTime(t));const a=new Ok(t,r,this.Ye,this.je,n);return this.je=Sh(),this.Je=HN(),this.He=HN(),this.Ye=new fs(Bn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new BQ,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Ii(Bn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Ii(Bn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||fr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new BQ),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function HN(){return new fs(Er.comparator)}function TQ(){return new fs(Er.comparator)}const sve={asc:"ASCENDING",desc:"DESCENDING"},ive={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ove={and:"AND",or:"OR"};class lve{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function aF(e,t){return e.useProto3Json||Ck(t)?t:{value:t}}function g_(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function YZ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function cve(e,t){return g_(e,t.toTimestamp())}function aA(e){return ia(!!e,49232),en.fromTimestamp(function(r){const n=jm(r);return new cr(n.seconds,n.nanos)}(e))}function vP(e,t){return sF(e,t).canonicalString()}function sF(e,t){const r=function(a){return new ka(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function JZ(e){const t=ka.fromString(e);return ia(nee(t),10190,{key:t.toString()}),t}function iF(e,t){return vP(e.databaseId,t.path)}function Z3(e,t){const r=JZ(t);if(r.get(1)!==e.databaseId.projectId)throw new Yt(St.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Yt(St.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new Er(eee(r))}function ZZ(e,t){return vP(e.databaseId,t)}function uve(e){const t=JZ(e);return t.length===4?ka.emptyPath():eee(t)}function oF(e){return new ka(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function eee(e){return ia(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function IQ(e,t,r){return{name:iF(e,t),fields:r.value.mapValue.fields}}function dve(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Gr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ia(d===void 0||typeof d=="string",58123),no.fromBase64String(d||"")):(ia(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),no.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const d=u.code===void 0?St.UNKNOWN:KZ(u.code);return new Yt(d,u.message||"")}(o);r=new XZ(n,a,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=Z3(e,n.document.name),s=aA(n.document.updateTime),o=n.document.createTime?aA(n.document.createTime):en.min(),l=new nc({mapValue:{fields:n.document.fields}}),c=Jo.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new N5(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=Z3(e,n.document),s=n.readTime?aA(n.readTime):en.min(),o=Jo.newNoDocument(a,s),l=n.removedTargetIds||[];r=new N5([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=Z3(e,n.document),s=n.removedTargetIds||[];r=new N5([],s,a,null)}else{if(!("filter"in t))return Gr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new eve(a,s),l=n.targetId;r=new WZ(l,o)}}return r}function fve(e,t){let r;if(t instanceof Z2)r={update:IQ(e,t.key,t.value)};else if(t instanceof Fk)r={delete:iF(e,t.key)};else if(t instanceof Km)r={update:IQ(e,t.key,t.data),updateMask:yve(t.fieldMask)};else{if(!(t instanceof Yxe))return Gr(16599,{Vt:t.type});r={verify:iF(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof Yw)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ob)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Jw)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof p_)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Gr(20930,{transform:o.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:cve(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Gr(27497)}(e,t.precondition)),r}function Ave(e,t){return e&&e.length>0?(ia(t!==void 0,14353),e.map(r=>function(a,s){let o=a.updateTime?aA(a.updateTime):aA(s);return o.isEqual(en.min())&&(o=aA(s)),new Kxe(o,a.transformResults||[])}(r,t))):[]}function hve(e,t){return{documents:[ZZ(e,t.path)]}}function mve(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=ZZ(e,a);const s=function(u){if(u.length!==0)return ree(Kd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:uv(h.field),direction:xve(h.dir)}}(d))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const l=aF(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function pve(e){let t=uve(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){ia(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=tee(f);return h instanceof Kd&&TZ(h)?h.getFilters():[h]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(h=>function(g){return new Xw(dv(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,Ck(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,m=f.values||[];return new ib(m,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,m=f.values||[];return new ib(m,h)}(r.endAt)),Dxe(t,a,o,s,l,"F",c,u)}function gve(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function tee(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=dv(r.unaryFilter.field);return pi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=dv(r.unaryFilter.field);return pi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=dv(r.unaryFilter.field);return pi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dv(r.unaryFilter.field);return pi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Gr(61313);default:return Gr(60726)}}(e):e.fieldFilter!==void 0?function(r){return pi.create(dv(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Gr(58110);default:return Gr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Kd.create(r.compositeFilter.filters.map(n=>tee(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Gr(1026)}}(r.compositeFilter.op))}(e):Gr(30097,{filter:e})}function xve(e){return sve[e]}function vve(e){return ive[e]}function bve(e){return ove[e]}function uv(e){return{fieldPath:e.canonicalString()}}function dv(e){return Ji.fromServerFormat(e.fieldPath)}function ree(e){return e instanceof pi?function(r){if(r.op==="=="){if(vQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NAN"}};if(xQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(vQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NOT_NAN"}};if(xQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uv(r.field),op:vve(r.op),value:r.value}}}(e):e instanceof Kd?function(r){const n=r.getFilters().map(a=>ree(a));return n.length===1?n[0]:{compositeFilter:{op:bve(r.op),filters:n}}}(e):Gr(54877,{filter:e})}function yve(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function nee(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t,r,n,a,s=en.min(),o=en.min(),l=no.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new nm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new nm(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new nm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new nm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wve{constructor(t){this.yt=t}}function Eve(e){const t=pve({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?m_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nve{constructor(){this.Cn=new Cve}addToCollectionParentIndex(t,r){return this.Cn.add(r),Rt.resolve()}getCollectionParents(t,r){return Rt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Rt.resolve()}deleteFieldIndex(t,r){return Rt.resolve()}deleteAllFieldIndexes(t){return Rt.resolve()}createTargetIndexes(t,r){return Rt.resolve()}getDocumentsMatchingTarget(t,r){return Rt.resolve(null)}getIndexType(t,r){return Rt.resolve(0)}getFieldIndexes(t,r){return Rt.resolve([])}getNextCollectionGroupToUpdate(t){return Rt.resolve(null)}getMinOffset(t,r){return Rt.resolve(km.min())}getMinOffsetFromCollectionGroup(t,r){return Rt.resolve(km.min())}updateCollectionGroup(t,r,n){return Rt.resolve()}updateIndexEntries(t,r){return Rt.resolve()}}class Cve{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Ii(ka.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Ii(ka.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FQ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aee=41943040;class Yl{static withCacheSize(t){return new Yl(t,Yl.DEFAULT_COLLECTION_PERCENTILE,Yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yl.DEFAULT_COLLECTION_PERCENTILE=10,Yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yl.DEFAULT=new Yl(aee,Yl.DEFAULT_COLLECTION_PERCENTILE,Yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yl.DISABLED=new Yl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new lb(0)}static cr(){return new lb(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OQ="LruGarbageCollector",_ve=1048576;function DQ([e,t],[r,n]){const a=Bn(e,r);return a===0?Bn(t,n):a}class Sve{constructor(t){this.Ir=t,this.buffer=new Ii(DQ),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();DQ(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class kve{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){fr(OQ,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){zb(r)?fr(OQ,"Ignoring IndexedDB error during garbage collection: ",r):await Vb(r)}await this.Vr(3e5)})}}class jve{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Rt.resolve(Nk.ce);const n=new Sve(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(fr("LruGarbageCollector","Garbage collection skipped; disabled"),Rt.resolve(FQ)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(fr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FQ):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(fr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),lv()<=jn.DEBUG&&fr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Rt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function Bve(e,t){return new jve(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tve{constructor(){this.changes=new Vg(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Jo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Rt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ive{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fve{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&mw(n.mutation,a,Gc.empty(),cr.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Tn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Tn()){const a=$p();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let o=$y();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const n=$p();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Tn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(t,r,n,a){let s=Sh();const o=hw(),l=function(){return hw()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Km)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),mw(d.mutation,u,d.mutation.getFieldMask(),cr.now())):o.set(u.key,Gc.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new Ive(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(t,r){const n=hw();let a=new fs((o,l)=>o-l),s=Tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Gc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||Tn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=MZ();d.forEach(h=>{if(!s.has(h)){const m=GZ(r.get(h),n.get(h));m!==null&&f.set(h,m),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Rt.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(o){return Er.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):mP(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Rt.resolve($p());let l=qw,c=s;return o.next(u=>Rt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Rt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Tn())).next(d=>({batchId:l,changes:LZ(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Er(r)).next(n=>{let a=$y();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let o=$y();return this.indexManager.getCollectionParents(t,s).next(l=>Rt.forEach(l,c=>{const u=function(f,h){return new Hg(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{o=o.insert(f,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Jo.newInvalidDocument(d)))});let l=$y();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&mw(d.mutation,u,Gc.empty(),cr.now()),Bk(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ove{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Rt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:aA(a.createTime)}}(r)),Rt.resolve()}getNamedQuery(t,r){return Rt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Eve(a.bundledQuery),readTime:aA(a.readTime)}}(r)),Rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dve{constructor(){this.overlays=new fs(Er.comparator),this.qr=new Map}getOverlay(t,r){return Rt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=$p();return Rt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Rt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Rt.resolve()}getOverlaysForCollection(t,r,n){const a=$p(),s=r.length+1,o=new Er(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Rt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new fs((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=$p(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=$p(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Rt.resolve(l)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new Zxe(r,n));let s=this.qr.get(r);s===void 0&&(s=Tn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pve{constructor(){this.sessionToken=no.EMPTY_BYTE_STRING}getSessionToken(t){return Rt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.Qr=new Ii(Ki.$r),this.Ur=new Ii(Ki.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Ki(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Ki(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new Er(new ka([])),n=new Ki(r,t),a=new Ki(r,t+1),s=[];return this.Ur.forEachInRange([n,a],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new Er(new ka([])),n=new Ki(r,t),a=new Ki(r,t+1);let s=Tn();return this.Ur.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(t){const r=new Ki(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Ki{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return Er.comparator(t.key,r.key)||Bn(t.Yr,r.Yr)}static Kr(t,r){return Bn(t.Yr,r.Yr)||Er.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rve{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ii(Ki.$r)}checkEmpty(t){return Rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Jxe(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.Zr=this.Zr.add(new Ki(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Rt.resolve(o)}lookupMutationBatch(t,r){return Rt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Rt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(this.mutationQueue.length===0?dP:this.tr-1)}getAllMutationBatches(t){return Rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Ki(r,0),a=new Ki(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],o=>{const l=this.Xr(o.Yr);s.push(l)}),Rt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Ii(Bn);return r.forEach(a=>{const s=new Ki(a,0),o=new Ki(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{n=n.add(l.Yr)})}),Rt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;Er.isDocumentKey(s)||(s=s.child(""));const o=new Ki(new Er(s),0);let l=new Ii(Bn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Yr)),!0)},o),Rt.resolve(this.ti(l))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){ia(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Rt.forEach(r.mutations,a=>{const s=new Ki(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Ki(r,0),a=this.Zr.firstAfterOrEqual(n);return Rt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Rt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lve{constructor(t){this.ri=t,this.docs=function(){return new fs(Er.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Rt.resolve(n?n.document.mutableCopy():Jo.newInvalidDocument(r))}getEntries(t,r){let n=Sh();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Jo.newInvalidDocument(a))}),Rt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=Sh();const o=r.path,l=new Er(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Axe(fxe(d),n)<=0||(a.has(d.key)||Bk(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Rt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Gr(9500)}ii(t,r){return Rt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new Mve(this)}getSize(t){return Rt.resolve(this.size)}}class Mve extends Tve{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Rt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{constructor(t){this.persistence=t,this.si=new Vg(r=>AP(r),hP),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.oi=0,this._i=new bP,this.targetCount=0,this.ai=lb.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Rt.resolve()}getLastRemoteSnapshotVersion(t){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Rt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new lb(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Rt.resolve()}updateTargetData(t,r){return this.Pr(r),Rt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),a++)}),Rt.waitFor(s).next(()=>a)}getTargetCount(t){return Rt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Rt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Rt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(t,o))}),Rt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Rt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Rt.resolve(n)}containsKey(t,r){return Rt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class see{constructor(t,r){this.ui={},this.overlays={},this.ci=new Nk(0),this.li=!1,this.li=!0,this.hi=new Pve,this.referenceDelegate=t(this),this.Pi=new Uve(this),this.indexManager=new Nve,this.remoteDocumentCache=function(a){return new Lve(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new wve(r),this.Ii=new Ove(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Dve,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new Rve(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){fr("MemoryPersistence","Starting transaction:",t);const a=new Qve(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Rt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class Qve extends mxe{constructor(t){super(),this.currentSequenceNumber=t}}class yP{constructor(t){this.persistence=t,this.Ri=new bP,this.Vi=null}static mi(t){return new yP(t)}get fi(){if(this.Vi)return this.Vi;throw Gr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Rt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Rt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Rt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.fi,n=>{const a=Er.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,en.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Rt.or([()=>Rt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class x_{constructor(t,r){this.persistence=t,this.pi=new Vg(n=>xxe(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=Bve(this,r)}static mi(t,r){return new x_(t,r)}Ei(){}di(t){return Rt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Rt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Rt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,o=>this.br(t,o,r).next(l=>{l||(n++,s.removeEntry(o,en.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Rt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Rt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Rt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Rt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=y5(t.data.value)),r}br(t,r,n){return Rt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Rt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Tn(),a=Tn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new wP(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hve{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vve{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return b0e()?8:pxe(ol())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Hve;return this.Ss(t,r,o).next(l=>{if(s.result=l,this.Vs)return this.bs(t,r,o,l.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(lv()<=jn.DEBUG&&fr("QueryEngine","SDK will not create cache indexes for query:",cv(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Rt.resolve()):(lv()<=jn.DEBUG&&fr("QueryEngine","Query:",cv(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(lv()<=jn.DEBUG&&fr("QueryEngine","The SDK decides to create cache indexes for query:",cv(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,nA(r))):Rt.resolve())}ys(t,r){if(EQ(r))return Rt.resolve(null);let n=nA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=m_(r,null,"F"),n=nA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=Tn(...s);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,o,c.readTime)?this.ys(t,m_(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return EQ(r)||a.isEqual(en.min())?Rt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const o=this.Ds(r,s);return this.Cs(r,o,n,a)?Rt.resolve(null):(lv()<=jn.DEBUG&&fr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),cv(r)),this.vs(t,o,r,dxe(a,qw)).next(l=>l))})}Ds(t,r){let n=new Ii(PZ(t));return r.forEach((a,s)=>{Bk(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return lv()<=jn.DEBUG&&fr("QueryEngine","Using full collection scan to execute query:",cv(r)),this.ps.getDocumentsMatchingQuery(t,r,km.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="LocalStore",zve=3e8;class $ve{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new fs(Bn),this.xs=new Vg(s=>AP(s),hP),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Fve(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Gve(e,t,r,n){return new $ve(e,t,r,n)}async function iee(e,t){const r=nn(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=Tn();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function qve(e,t){const r=nn(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let m=Rt.resolve();return h.forEach(g=>{m=m.next(()=>d.getEntry(c,g)).next(x=>{const v=u.docVersions.get(g);ia(v!==null,48541),x.version.compareTo(v)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Tn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function oee(e){const t=nn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Kve(e,t){const r=nn(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const l=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;l.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let m=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(no.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),a=a.insert(f,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=zve?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,m,d)&&l.push(r.Pi.updateTargetData(s,m))});let c=Sh(),u=Tn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Wve(s,o,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(en.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Rt.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function Wve(e,t,r){let n=Tn(),a=Tn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let o=Sh();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(en.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):fr(EP,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:a}})}function Xve(e,t){const r=nn(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=dP),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Yve(e,t){const r=nn(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Rt.resolve(a)):r.Pi.allocateTargetId(n).next(o=>(a=new nm(t,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function lF(e,t,r){const n=nn(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!zb(o))throw o;fr(EP,`Failed to update sequence numbers for target ${t}: ${o}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function PQ(e,t,r){const n=nn(e);let a=en.min(),s=Tn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=nn(c),h=f.xs.get(d);return h!==void 0?Rt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,o,nA(t)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,t,r?a:en.min(),r?s:Tn())).next(l=>(Jve(n,Rxe(t),l),{documents:l,Qs:s})))}function Jve(e,t,r){let n=e.Os.get(t)||en.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class RQ{constructor(){this.activeTargetIds=Vxe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Zve{constructor(){this.Mo=new RQ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new RQ,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ebe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LQ="ConnectivityMonitor";class MQ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fr(LQ,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){fr(LQ,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VN=null;function cF(){return VN===null?VN=function(){return 268435456+Math.round(2147483648*Math.random())}():VN++,"0x"+VN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB="RestConnection",tbe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rbe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===f_?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const o=cF(),l=this.zo(t,r.toUriEncodedString());fr(eB,`Sending RPC '${t}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(l),d=Hh(u);return this.Jo(t,l,c,n,d).then(f=>(fr(eB,`Received RPC '${t}' ${o}: `,f),f),f=>{throw bg(eB,`RPC '${t}' ${o} failed with error: `,f,"url: ",l,"request:",n),f})}Ho(t,r,n,a,s,o){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hb}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=tbe[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nbe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="WebChannelConnection";class abe extends rbe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const o=cF();return new Promise((l,c)=>{const u=new lZ;u.setWithCredentials(!0),u.listenOnce(cZ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case b5.NO_ERROR:const f=u.getResponseJson();fr(Mo,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),l(f);break;case b5.TIMEOUT:fr(Mo,`RPC '${t}' ${o} timed out`),c(new Yt(St.DEADLINE_EXCEEDED,"Request time out"));break;case b5.HTTP_ERROR:const h=u.getStatus();if(fr(Mo,`RPC '${t}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(St).indexOf(w)>=0?w:St.UNKNOWN}(g.status);c(new Yt(x,g.message))}else c(new Yt(St.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Yt(St.UNAVAILABLE,"Connection failed."));break;default:Gr(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{fr(Mo,`RPC '${t}' ${o} completed.`)}});const d=JSON.stringify(a);fr(Mo,`RPC '${t}' ${o} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=cF(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=fZ(),l=dZ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");fr(Mo,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let h=!1,m=!1;const g=new nbe({Yo:v=>{m?fr(Mo,`Not sending because RPC '${t}' stream ${a} is closed:`,v):(h||(fr(Mo,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),fr(Mo,`RPC '${t}' stream ${a} sending:`,v),f.send(v))},Zo:()=>f.close()}),x=(v,y,w)=>{v.listen(y,_=>{try{w(_)}catch(F){setTimeout(()=>{throw F},0)}})};return x(f,zy.EventType.OPEN,()=>{m||(fr(Mo,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,zy.EventType.CLOSE,()=>{m||(m=!0,fr(Mo,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,zy.EventType.ERROR,v=>{m||(m=!0,bg(Mo,`RPC '${t}' stream ${a} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new Yt(St.UNAVAILABLE,"The operation could not be completed")))}),x(f,zy.EventType.MESSAGE,v=>{var y;if(!m){const w=v.data[0];ia(!!w,16349);const _=w,F=(_==null?void 0:_.error)||((y=_[0])==null?void 0:y.error);if(F){fr(Mo,`RPC '${t}' stream ${a} received error:`,F);const B=F.status;let T=function(j){const L=ui[j];if(L!==void 0)return KZ(L)}(B),C=F.message;T===void 0&&(T=St.INTERNAL,C="Unknown error status: "+B+" with message "+F.message),m=!0,g.a_(new Yt(T,C)),f.close()}else fr(Mo,`RPC '${t}' stream ${a} received:`,w),g.u_(w)}}),x(l,uZ.STAT_EVENT,v=>{v.stat===Y6.PROXY?fr(Mo,`RPC '${t}' stream ${a} detected buffering proxy`):v.stat===Y6.NOPROXY&&fr(Mo,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function tB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(e){return new lve(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lee{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&fr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UQ="PersistentStream";class cee{constructor(t,r,n,a,s,o,l,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lee(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===St.RESOURCE_EXHAUSTED?(_h(r.toString()),_h("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===St.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Yt(St.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return fr(UQ,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(fr(UQ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sbe extends cee{constructor(t,r,n,a,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=dve(this.serializer,t),n=function(s){if(!("targetChange"in s))return en.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?en.min():o.readTime?aA(o.readTime):en.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=oF(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=rF(c)?{documents:hve(s,c)}:{query:mve(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=YZ(s,o.resumeToken);const u=aF(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(en.min())>0){l.readTime=g_(s,o.snapshotVersion.toTimestamp());const u=aF(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const n=gve(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=oF(this.serializer),r.removeTarget=t,this.q_(r)}}class ibe extends cee{constructor(t,r,n,a,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return ia(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ia(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ia(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Ave(t.writeResults,t.commitTime),n=aA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=oF(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>fve(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class obe{}class lbe extends obe{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Yt(St.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(t,sF(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Yt(St.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,sF(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Yt(St.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class cbe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_h(r),this.aa=!1):fr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="RemoteStore";class ube{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{zg(this)&&(fr(yg,"Restarting streams for network reachability change."),await async function(c){const u=nn(c);u.Ea.add(4),await tE(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Pk(u)}(this))})}),this.Ra=new cbe(n,a)}}async function Pk(e){if(zg(e))for(const t of e.da)await t(!0)}async function tE(e){for(const t of e.da)await t(!1)}function uee(e,t){const r=nn(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),SP(r)?_P(r):$b(r).O_()&&CP(r,t))}function NP(e,t){const r=nn(e),n=$b(r);r.Ia.delete(t),n.O_()&&dee(r,t),r.Ia.size===0&&(n.O_()?n.L_():zg(r)&&r.Ra.set("Unknown"))}function CP(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(en.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}$b(e).Y_(t)}function dee(e,t){e.Va.Ue(t),$b(e).Z_(t)}function _P(e){e.Va=new ave({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),$b(e).start(),e.Ra.ua()}function SP(e){return zg(e)&&!$b(e).x_()&&e.Ia.size>0}function zg(e){return nn(e).Ea.size===0}function fee(e){e.Va=void 0}async function dbe(e){e.Ra.set("Online")}async function fbe(e){e.Ia.forEach((t,r)=>{CP(e,t)})}async function Abe(e,t){fee(e),SP(e)?(e.Ra.ha(t),_P(e)):e.Ra.set("Unknown")}async function hbe(e,t,r){if(e.Ra.set("Online"),t instanceof XZ&&t.state===2&&t.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.Va.removeTarget(l))}(e,t)}catch(n){fr(yg,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await v_(e,n)}else if(t instanceof N5?e.Va.Ze(t):t instanceof WZ?e.Va.st(t):e.Va.tt(t),!r.isEqual(en.min()))try{const n=await oee(e.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(no.EMPTY_BYTE_STRING,d.snapshotVersion)),dee(s,c);const f=new nm(d.target,c,u,d.sequenceNumber);CP(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(n){fr(yg,"Failed to raise snapshot:",n),await v_(e,n)}}async function v_(e,t,r){if(!zb(t))throw t;e.Ea.add(1),await tE(e),e.Ra.set("Offline"),r||(r=()=>oee(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{fr(yg,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await Pk(e)})}function Aee(e,t){return t().catch(r=>v_(e,r,t))}async function Rk(e){const t=nn(e),r=Im(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:dP;for(;mbe(t);)try{const a=await Xve(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,pbe(t,a)}catch(a){await v_(t,a)}hee(t)&&mee(t)}function mbe(e){return zg(e)&&e.Ta.length<10}function pbe(e,t){e.Ta.push(t);const r=Im(e);r.O_()&&r.X_&&r.ea(t.mutations)}function hee(e){return zg(e)&&!Im(e).x_()&&e.Ta.length>0}function mee(e){Im(e).start()}async function gbe(e){Im(e).ra()}async function xbe(e){const t=Im(e);for(const r of e.Ta)t.ea(r.mutations)}async function vbe(e,t,r){const n=e.Ta.shift(),a=gP.from(n,t,r);await Aee(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await Rk(e)}async function bbe(e,t){t&&Im(e).X_&&await async function(n,a){if(function(o){return tve(o)&&o!==St.ABORTED}(a.code)){const s=n.Ta.shift();Im(n).B_(),await Aee(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Rk(n)}}(e,t),hee(e)&&mee(e)}async function QQ(e,t){const r=nn(e);r.asyncQueue.verifyOperationInProgress(),fr(yg,"RemoteStore received new credentials");const n=zg(r);r.Ea.add(3),await tE(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await Pk(r)}async function ybe(e,t){const r=nn(e);t?(r.Ea.delete(2),await Pk(r)):t||(r.Ea.add(2),await tE(r),r.Ra.set("Unknown"))}function $b(e){return e.ma||(e.ma=function(r,n,a){const s=nn(r);return s.sa(),new sbe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:dbe.bind(null,e),t_:fbe.bind(null,e),r_:Abe.bind(null,e),H_:hbe.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),SP(e)?_P(e):e.Ra.set("Unknown")):(await e.ma.stop(),fee(e))})),e.ma}function Im(e){return e.fa||(e.fa=function(r,n,a){const s=nn(r);return s.sa(),new ibe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:gbe.bind(null,e),r_:bbe.bind(null,e),ta:xbe.bind(null,e),na:vbe.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Rk(e)):(await e.fa.stop(),e.Ta.length>0&&(fr(yg,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new hh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const o=Date.now()+n,l=new kP(t,r,o,a,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Yt(St.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jP(e,t){if(_h("AsyncQueue",`${t}: ${e}`),zb(e))return new Yt(St.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{static emptySet(t){return new Dv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||Er.comparator(r.key,n.key):(r,n)=>Er.comparator(r.key,n.key),this.keyedMap=$y(),this.sortedSet=new fs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Dv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Dv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(){this.ga=new fs(Er.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Gr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class cb{constructor(t,r,n,a,s,o,l,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new cb(t,r,Dv.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&jk(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wbe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Ebe{constructor(){this.queries=VQ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=nn(r),s=a.queries;a.queries=VQ(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new Yt(St.ABORTED,"Firestore shutting down"))}}function VQ(){return new Vg(e=>DZ(e),jk)}async function BP(e,t){const r=nn(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new wbe,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=jP(o,`Initialization of query '${cv(t.query)}' failed`);return void t.onError(l)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&IP(r)}async function TP(e,t){const r=nn(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const o=s.Sa.indexOf(t);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Nbe(e,t){const r=nn(e);let n=!1;for(const a of t){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.Sa)l.Fa(a)&&(n=!0);o.wa=a}}n&&IP(r)}function Cbe(e,t,r){const n=nn(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function IP(e){e.Ca.forEach(t=>{t.next()})}var uF,zQ;(zQ=uF||(uF={})).Ma="default",zQ.Cache="cache";class FP{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new cb(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=cb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==uF.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pee{constructor(t){this.key=t}}class gee{constructor(t){this.key=t}}class _be{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Tn(),this.mutatedKeys=Tn(),this.eu=PZ(t),this.tu=new Dv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new HQ,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),m=Bk(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;h&&m?h.data.isEqual(m.data)?g!==x&&(n.track({type:3,doc:m}),v=!0):this.su(h,m)||(n.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!h&&m?(n.track({type:0,doc:m}),v=!0):h&&!m&&(n.track({type:1,doc:h}),v=!0,(c||u)&&(l=!0)),v&&(m?(o=o.add(m),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:l,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((d,f)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gr(20277,{Rt:v})}};return x(m)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new cb(this.query,t.tu,s,o,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new HQ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Tn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new gee(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new pee(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Tn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return cb.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const OP="SyncEngine";class Sbe{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class kbe{constructor(t){this.key=t,this.hu=!1}}class jbe{constructor(t,r,n,a,s,o){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Vg(l=>DZ(l),jk),this.Iu=new Map,this.Eu=new Set,this.du=new fs(Er.comparator),this.Au=new Map,this.Ru=new bP,this.Vu={},this.mu=new Map,this.fu=lb.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Bbe(e,t,r=!0){const n=Eee(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await xee(n,t,r,!0),a}async function Tbe(e,t){const r=Eee(e);await xee(r,t,!0,!1)}async function xee(e,t,r,n){const a=await Yve(e.localStore,nA(t)),s=a.targetId,o=e.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await Ibe(e,t,s,o==="current",a.resumeToken)),e.isPrimaryClient&&r&&uee(e.remoteStore,a),l}async function Ibe(e,t,r,n,a){e.pu=(f,h,m)=>async function(x,v,y,w){let _=v.view.ru(y);_.Cs&&(_=await PQ(x.localStore,v.query,!1).then(({documents:C})=>v.view.ru(C,_)));const F=w&&w.targetChanges.get(v.targetId),B=w&&w.targetMismatches.get(v.targetId)!=null,T=v.view.applyChanges(_,x.isPrimaryClient,F,B);return GQ(x,v.targetId,T.au),T.snapshot}(e,f,h,m);const s=await PQ(e.localStore,t,!0),o=new _be(t,s.Qs),l=o.ru(s.documents),c=eE.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=o.applyChanges(l,e.isPrimaryClient,c);GQ(e,r,u.au);const d=new Sbe(t,r,o);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function Fbe(e,t,r){const n=nn(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(o=>!jk(o,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await lF(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&NP(n.remoteStore,a.targetId),dF(n,a.targetId)}).catch(Vb)):(dF(n,a.targetId),await lF(n.localStore,a.targetId,!0))}async function Obe(e,t){const r=nn(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),NP(r.remoteStore,n.targetId))}async function Dbe(e,t,r){const n=Hbe(e);try{const a=await function(o,l){const c=nn(o),u=cr.now(),d=l.reduce((m,g)=>m.add(g.key),Tn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=Sh(),x=Tn();return c.Ns.getEntries(m,d).next(v=>{g=v,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{f=v;const y=[];for(const w of l){const _=Xxe(w,f.get(w.key).overlayedDocument);_!=null&&y.push(new Km(w.key,_,kZ(_.value.mapValue),Sl.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,l)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:LZ(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new fs(Bn)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(n,a.batchId,r),await rE(n,a.changes),await Rk(n.remoteStore)}catch(a){const s=jP(a,"Failed to persist write");r.reject(s)}}async function vee(e,t){const r=nn(e);try{const n=await Kve(r.localStore,t);t.targetChanges.forEach((a,s)=>{const o=r.Au.get(s);o&&(ia(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?ia(o.hu,14607):a.removedDocuments.size>0&&(ia(o.hu,42227),o.hu=!1))}),await rE(r,n,t)}catch(n){await Vb(n)}}function $Q(e,t,r){const n=nn(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,o)=>{const l=o.view.va(t);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=nn(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(l)&&(u=!0)}),u&&IP(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Pbe(e,t,r){const n=nn(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let o=new fs(Er.comparator);o=o.insert(s,Jo.newNoDocument(s,en.min()));const l=Tn().add(s),c=new Ok(en.min(),new Map,new fs(Bn),o,l);await vee(n,c),n.du=n.du.remove(s),n.Au.delete(t),DP(n)}else await lF(n.localStore,t,!1).then(()=>dF(n,t,r)).catch(Vb)}async function Rbe(e,t){const r=nn(e),n=t.batch.batchId;try{const a=await qve(r.localStore,t);yee(r,n,null),bee(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await rE(r,a)}catch(a){await Vb(a)}}async function Lbe(e,t,r){const n=nn(e);try{const a=await function(o,l){const c=nn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(ia(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);yee(n,t,r),bee(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await rE(n,a)}catch(a){await Vb(a)}}function bee(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function yee(e,t,r){const n=nn(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function dF(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||wee(e,n)})}function wee(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(NP(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),DP(e))}function GQ(e,t,r){for(const n of r)n instanceof pee?(e.Ru.addReference(n.key,t),Mbe(e,n)):n instanceof gee?(fr(OP,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||wee(e,n.key)):Gr(19791,{wu:n})}function Mbe(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(fr(OP,"New document in limbo: "+r),e.Eu.add(n),DP(e))}function DP(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new Er(ka.fromString(t)),n=e.fu.next();e.Au.set(n,new kbe(r)),e.du=e.du.insert(r,n),uee(e.remoteStore,new nm(nA(kk(r.path)),n,"TargetPurposeLimboResolution",Nk.ce))}}async function rE(e,t,r){const n=nn(e),a=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=wP.As(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Pu.H_(a),await async function(c,u){const d=nn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Rt.forEach(u,h=>Rt.forEach(h.Es,m=>d.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>Rt.forEach(h.ds,m=>d.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!zb(f))throw f;fr(EP,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const m=d.Ms.get(h),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(n.localStore,s))}async function Ube(e,t){const r=nn(e);if(!r.currentUser.isEqual(t)){fr(OP,"User change. New user:",t.toKey());const n=await iee(r.localStore,t);r.currentUser=t,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new Yt(St.CANCELLED,o))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await rE(r,n.Ls)}}function Qbe(e,t){const r=nn(e),n=r.Au.get(t);if(n&&n.hu)return Tn().add(n.key);{let a=Tn();const s=r.Iu.get(t);if(!s)return a;for(const o of s){const l=r.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function Eee(e){const t=nn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vee.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qbe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Pbe.bind(null,t),t.Pu.H_=Nbe.bind(null,t.eventManager),t.Pu.yu=Cbe.bind(null,t.eventManager),t}function Hbe(e){const t=nn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rbe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Lbe.bind(null,t),t}class b_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Dk(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Gve(this.persistence,new Vve,t.initialUser,this.serializer)}Cu(t){return new see(yP.mi,this.serializer)}Du(t){return new Zve}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}b_.provider={build:()=>new b_};class Vbe extends b_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){ia(this.persistence.referenceDelegate instanceof x_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new kve(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Yl.withCacheSize(this.cacheSizeBytes):Yl.DEFAULT;return new see(n=>x_.mi(n,r),this.serializer)}}class fF{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>$Q(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ube.bind(null,this.syncEngine),await ybe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Ebe}()}createDatastore(t){const r=Dk(t.databaseInfo.databaseId),n=function(s){return new abe(s)}(t.databaseInfo);return function(s,o,l,c){return new lbe(s,o,l,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,o,l){return new ube(n,a,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,r=>$Q(this.syncEngine,r,0),function(){return MQ.v()?new MQ:new ebe}())}createSyncEngine(t,r){return function(a,s,o,l,c,u,d){const f=new jbe(a,s,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=nn(a);fr(yg,"RemoteStore shutting down."),s.Ea.add(5),await tE(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}fF.provider={build:()=>new fF};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):_h("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="FirestoreClient";class zbe{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Ko.UNAUTHENTICATED,this.clientId=wk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{fr(Fm,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(fr(Fm,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new hh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=jP(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function rB(e,t){e.asyncQueue.verifyOperationInProgress(),fr(Fm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await iee(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function qQ(e,t){e.asyncQueue.verifyOperationInProgress();const r=await $be(e);fr(Fm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>QQ(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>QQ(t.remoteStore,a)),e._onlineComponents=t}async function $be(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){fr(Fm,"Using user provided OfflineComponentProvider");try{await rB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===St.FAILED_PRECONDITION||a.code===St.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;bg("Error using user provided cache. Falling back to memory cache: "+r),await rB(e,new b_)}}else fr(Fm,"Using default OfflineComponentProvider"),await rB(e,new Vbe(void 0));return e._offlineComponents}async function Nee(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(fr(Fm,"Using user provided OnlineComponentProvider"),await qQ(e,e._uninitializedComponentsProvider._online)):(fr(Fm,"Using default OnlineComponentProvider"),await qQ(e,new fF))),e._onlineComponents}function Gbe(e){return Nee(e).then(t=>t.syncEngine)}async function y_(e){const t=await Nee(e),r=t.eventManager;return r.onListen=Bbe.bind(null,t.syncEngine),r.onUnlisten=Fbe.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=Tbe.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Obe.bind(null,t.syncEngine),r}function qbe(e,t,r={}){const n=new hh;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new PP({next:h=>{d.Nu(),o.enqueueAndForget(()=>TP(s,f));const m=h.docs.has(l);!m&&h.fromCache?u.reject(new Yt(St.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?u.reject(new Yt(St.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new FP(kk(l.path),d,{includeMetadataChanges:!0,qa:!0});return BP(s,f)}(await y_(e),e.asyncQueue,t,r,n)),n.promise}function Kbe(e,t,r={}){const n=new hh;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new PP({next:h=>{d.Nu(),o.enqueueAndForget(()=>TP(s,f)),h.fromCache&&c.source==="server"?u.reject(new Yt(St.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new FP(l,d,{includeMetadataChanges:!0,qa:!0});return BP(s,f)}(await y_(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cee(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KQ=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ee="firestore.googleapis.com",WQ=!0;class XQ{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Yt(St.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_ee,this.ssl=WQ}else this.host=t.host,this.ssl=t.ssl??WQ;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=aee;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<_ve)throw new Yt(St.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}gZ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cee(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Yt(St.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Yt(St.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Yt(St.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Lk{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XQ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Yt(St.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Yt(St.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XQ(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new mZ;switch(n.type){case"firstParty":return new axe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Yt(St.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=KQ.get(r);n&&(fr("ComponentProvider","Removing Datastore"),KQ.delete(r),n.terminate())}(this),Promise.resolve()}}function See(e,t,r,n={}){var u;e=sl(e,Lk);const a=Hh(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${r}`;a&&(mk(`https://${l}`),pk("Firestore",!0)),s.host!==_ee&&s.host!==l&&bg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:a,emulatorOptions:n};if(!_m(c,o)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=Ko.MOCK_USER;else{d=yJ(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Yt(St.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ko(h)}e._authCredentials=new txe(new hZ(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Yd(this.firestore,t,this._query)}}class cs{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new cs(this.firestore,t,this._key)}toJSON(){return{type:cs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(J2(r,cs._jsonSchema))return new cs(t,n||null,new Er(ka.fromString(r.referencePath)))}}cs._jsonSchemaVersion="firestore/documentReference/1.0",cs._jsonSchema={type:xi("string",cs._jsonSchemaVersion),referencePath:xi("string")};class mh extends Yd{constructor(t,r,n){super(t,r,kk(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new cs(this.firestore,null,new Er(t))}withConverter(t){return new mh(this.firestore,t,this._path)}}function mt(e,t,...r){if(e=Yn(e),pZ("collection","path",t),e instanceof Lk){const n=ka.fromString(t,...r);return uQ(n),new mh(e,null,n)}{if(!(e instanceof cs||e instanceof mh))throw new Yt(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ka.fromString(t,...r));return uQ(n),new mh(e.firestore,null,n)}}function nr(e,t,...r){if(e=Yn(e),arguments.length===1&&(t=wk.newId()),pZ("doc","path",t),e instanceof Lk){const n=ka.fromString(t,...r);return cQ(n),new cs(e,null,new Er(n))}{if(!(e instanceof cs||e instanceof mh))throw new Yt(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ka.fromString(t,...r));return cQ(n),new cs(e.firestore,e instanceof mh?e.converter:null,new Er(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ="AsyncQueue";class JQ{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lee(this,"async_queue_retry"),this._c=()=>{const n=tB();n&&fr(YQ,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=tB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=tB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new hh;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!zb(t))throw t;fr(YQ,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,_h("INTERNAL UNHANDLED ERROR: ",ZQ(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=kP.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Gr(47125,{Pc:ZQ(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function ZQ(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Wd extends Lk{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new JQ,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new JQ(t),this._firestoreClient=void 0,await t}}}function RP(e,t){const r=typeof e=="object"?e:gk(),n=typeof e=="string"?e:f_,a=K2(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=JD("firestore");s&&See(a,...s)}return a}function Gb(e){if(e._terminated)throw new Yt(St.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Wbe(e),e._firestoreClient}function Wbe(e){var n,a,s;const t=e._freezeSettings(),r=function(l,c,u,d){return new yxe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Cee(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new zbe(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qc(no.fromBase64String(t))}catch(r){throw new Yt(St.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Qc(no.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Qc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(J2(t,Qc._jsonSchema))return Qc.fromBase64String(t.bytes)}}Qc._jsonSchemaVersion="firestore/bytes/1.0",Qc._jsonSchema={type:xi("string",Qc._jsonSchemaVersion),bytes:xi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Yt(St.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ji(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Yt(St.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Yt(St.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Bn(this._lat,t._lat)||Bn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ud._jsonSchemaVersion}}static fromJSON(t){if(J2(t,Ud._jsonSchema))return new Ud(t.latitude,t.longitude)}}Ud._jsonSchemaVersion="firestore/geoPoint/1.0",Ud._jsonSchema={type:xi("string",Ud._jsonSchemaVersion),latitude:xi("number"),longitude:xi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Qd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(J2(t,Qd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Qd(t.vectorValues);throw new Yt(St.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qd._jsonSchemaVersion="firestore/vectorValue/1.0",Qd._jsonSchema={type:xi("string",Qd._jsonSchemaVersion),vectorValues:xi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xbe=/^__.*__$/;class Ybe{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Km(t,this.data,this.fieldMask,r,this.fieldTransforms):new Z2(t,this.data,r,this.fieldTransforms)}}class kee{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Km(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function jee(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gr(40011,{Ac:e})}}class Mk{constructor(t,r,n,a,s,o){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Mk({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return w_(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(jee(this.Ac)&&Xbe.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Jbe{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||Dk(t)}Cc(t,r,n,a=!1){return new Mk({Ac:t,methodName:r,Dc:n,path:Ji.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wb(e){const t=e._freezeSettings(),r=Dk(e._databaseId);return new Jbe(e._databaseId,!!t.ignoreUndefinedProperties,r)}function LP(e,t,r,n,a,s={}){const o=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);QP("Data must be an object, but it was:",o,n);const l=Fee(n,o);let c,u;if(s.merge)c=new Gc(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=AF(t,f,r);if(!o.contains(h))throw new Yt(St.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Dee(d,h)||d.push(h)}c=new Gc(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Ybe(new nc(l),c,u)}class Uk extends Kb{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Uk}}function Zbe(e,t,r){return new Mk({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class MP extends Kb{_toFieldTransform(t){return new $Z(t.path,new Yw)}isEqual(t){return t instanceof MP}}class UP extends Kb{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=Zbe(this,t,!0),n=this.vc.map(s=>Xb(s,r)),a=new ob(n);return new $Z(t.path,a)}isEqual(t){return t instanceof UP&&_m(this.vc,t.vc)}}function Bee(e,t,r,n){const a=e.Cc(1,t,r);QP("Data must be an object, but it was:",a,n);const s=[],o=nc.empty();qm(n,(c,u)=>{const d=HP(t,c,r);u=Yn(u);const f=a.yc(d);if(u instanceof Uk)s.push(d);else{const h=Xb(u,f);h!=null&&(s.push(d),o.set(d,h))}});const l=new Gc(s);return new kee(o,l,a.fieldTransforms)}function Tee(e,t,r,n,a,s){const o=e.Cc(1,t,r),l=[AF(t,n,r)],c=[a];if(s.length%2!=0)throw new Yt(St.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(AF(t,s[h])),c.push(s[h+1]);const u=[],d=nc.empty();for(let h=l.length-1;h>=0;--h)if(!Dee(u,l[h])){const m=l[h];let g=c[h];g=Yn(g);const x=o.yc(m);if(g instanceof Uk)u.push(m);else{const v=Xb(g,x);v!=null&&(u.push(m),d.set(m,v))}}const f=new Gc(u);return new kee(d,f,o.fieldTransforms)}function Iee(e,t,r,n=!1){return Xb(r,e.Cc(n?4:3,t))}function Xb(e,t){if(Oee(e=Yn(e)))return QP("Unsupported field value:",t,e),Fee(e,t);if(e instanceof Kb)return function(n,a){if(!jee(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=Xb(l,a.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Yn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return zxe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=cr.fromDate(n);return{timestampValue:g_(a.serializer,s)}}if(n instanceof cr){const s=new cr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:g_(a.serializer,s)}}if(n instanceof Ud)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Qc)return{bytesValue:YZ(a.serializer,n._byteString)};if(n instanceof cs){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vP(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Qd)return function(o,l){return{mapValue:{fields:{[_Z]:{stringValue:SZ},[A_]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return pP(l.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${Ek(n)}`)}(e,t)}function Fee(e,t){const r={};return bZ(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qm(e,(n,a)=>{const s=Xb(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function Oee(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof cr||e instanceof Ud||e instanceof Qc||e instanceof cs||e instanceof Kb||e instanceof Qd)}function QP(e,t,r){if(!Oee(r)||!xZ(r)){const n=Ek(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function AF(e,t,r){if((t=Yn(t))instanceof qb)return t._internalPath;if(typeof t=="string")return HP(e,t);throw w_("Field path arguments must be of type string or ",e,!1,void 0,r)}const e1e=new RegExp("[~\\*/\\[\\]]");function HP(e,t,r){if(t.search(e1e)>=0)throw w_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new qb(...t.split("."))._internalPath}catch{throw w_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function w_(e,t,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new Yt(St.INVALID_ARGUMENT,l+e+c)}function Dee(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new cs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new t1e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Qk("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class t1e extends VP{data(){return super.data()}}function Qk(e,t){return typeof t=="string"?HP(e,t):t instanceof qb?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pee(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Yt(St.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zP{}class nE extends zP{}function Ht(e,t,...r){let n=[];t instanceof zP&&n.push(t),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof Hk).length,l=s.filter(c=>c instanceof aE).length;if(o>1||o>0&&l>0)throw new Yt(St.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class aE extends nE{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new aE(t,r,n)}_apply(t){const r=this._parse(t);return Lee(t._query,r),new Yd(t.firestore,t.converter,nF(t._query,r))}_parse(t){const r=Wb(t.firestore);return function(s,o,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Yt(St.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){rH(f,d);const g=[];for(const x of f)g.push(tH(c,s,x));h={arrayValue:{values:g}}}else h=tH(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||rH(f,d),h=Iee(l,o,f,d==="in"||d==="not-in");return pi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function xr(e,t,r){const n=t,a=Qk("where",e);return aE._create(a,n,r)}class Hk extends zP{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Hk(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Kd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)Lee(o,c),o=nF(o,c)}(t._query,r),new Yd(t.firestore,t.converter,nF(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vk extends nE{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new Vk(t,r)}_apply(t){const r=function(a,s,o){if(a.startAt!==null)throw new Yt(St.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Yt(St.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xw(s,o)}(t._query,this._field,this._direction);return new Yd(t.firestore,t.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new Hg(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function ar(e,t="asc"){const r=t,n=Qk("orderBy",e);return Vk._create(n,r)}class zk extends nE{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new zk(t,r,n)}_apply(t){return new Yd(t.firestore,t.converter,m_(t._query,this._limit,this._limitType))}}function Hd(e){return uxe("limit",e),zk._create("limit",e,"F")}class $k extends nE{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new $k(t,r,n)}_apply(t){const r=r1e(t,this.type,this._docOrFields,this._inclusive);return new Yd(t.firestore,t.converter,function(a,s){return new Hg(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function Ree(...e){return $k._create("startAfter",e,!1)}function r1e(e,t,r,n){if(r[0]=Yn(r[0]),r[0]instanceof VP)return function(s,o,l,c,u){if(!c)throw new Yt(St.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const f of Ov(s))if(f.field.isKeyField())d.push(h_(o,c.key));else{const h=c.data.field(f.field);if(_k(h))throw new Yt(St.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const m=f.field.canonicalString();throw new Yt(St.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(h)}return new ib(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=Wb(e.firestore);return function(o,l,c,u,d,f){const h=o.explicitOrderBy;if(d.length>h.length)throw new Yt(St.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new Yt(St.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!mP(o)&&x.indexOf("/")!==-1)throw new Yt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const v=o.path.child(ka.fromString(x));if(!Er.isDocumentKey(v))throw new Yt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new Er(v);m.push(h_(l,y))}else{const v=Iee(c,u,x);m.push(v)}}return new ib(m,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function tH(e,t,r){if(typeof(r=Yn(r))=="string"){if(r==="")throw new Yt(St.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mP(t)&&r.indexOf("/")!==-1)throw new Yt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(ka.fromString(r));if(!Er.isDocumentKey(n))throw new Yt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return h_(e,new Er(n))}if(r instanceof cs)return h_(e,r._key);throw new Yt(St.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ek(r)}.`)}function rH(e,t){if(!Array.isArray(e)||e.length===0)throw new Yt(St.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Lee(e,t){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Yt(St.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Yt(St.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Mee{convertValue(t,r="none"){switch(Tm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ws(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Bm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Gr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return qm(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[A_].arrayValue)==null?void 0:a.values)==null?void 0:s.map(o=>Ws(o.doubleValue));return new Qd(r)}convertGeoPoint(t){return new Ud(Ws(t.latitude),Ws(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=Sk(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Kw(t));default:return null}}convertTimestamp(t){const r=jm(t);return new cr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=ka.fromString(t);ia(nee(n),9688,{name:t});const a=new nb(n.get(1),n.get(3)),s=new Er(n.popFirst(5));return a.isEqual(r)||_h(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class xv{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class mm extends VP{constructor(t,r,n,a,s,o){super(t,r,n,a,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new pw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(Qk("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Yt(St.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=mm._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}mm._jsonSchemaVersion="firestore/documentSnapshot/1.0",mm._jsonSchema={type:xi("string",mm._jsonSchemaVersion),bundleSource:xi("string","DocumentSnapshot"),bundleName:xi("string"),bundle:xi("string")};class pw extends mm{data(t={}){return super.data(t)}}class pm{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new xv(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new pw(this._firestore,this._userDataWriter,n.key,n,new xv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Yt(St.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new pw(a._firestore,a._userDataWriter,l.doc.key,l.doc,new xv(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new pw(a._firestore,a._userDataWriter,l.doc.key,l.doc,new xv(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:n1e(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Yt(St.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=pm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=wk.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function n1e(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(e){e=sl(e,cs);const t=sl(e.firestore,Wd);return qbe(Gb(t),e._key).then(r=>Uee(t,e,r))}pm._jsonSchemaVersion="firestore/querySnapshot/1.0",pm._jsonSchema={type:xi("string",pm._jsonSchemaVersion),bundleSource:xi("string","QuerySnapshot"),bundleName:xi("string"),bundle:xi("string")};class GP extends Mee{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new cs(this.firestore,null,r)}}function qr(e){e=sl(e,Yd);const t=sl(e.firestore,Wd),r=Gb(t),n=new GP(t);return Pee(e._query),Kbe(r,e._query).then(a=>new pm(t,n,e,a))}function yi(e,t,r){e=sl(e,cs);const n=sl(e.firestore,Wd),a=$P(e.converter,t,r);return Yb(n,[LP(Wb(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,Sl.none())])}function Tl(e,t,r,...n){e=sl(e,cs);const a=sl(e.firestore,Wd),s=Wb(a);let o;return o=typeof(t=Yn(t))=="string"||t instanceof qb?Tee(s,"updateDoc",e._key,t,r,n):Bee(s,"updateDoc",e._key,t),Yb(a,[o.toMutation(e._key,Sl.exists(!0))])}function Ca(e){return Yb(sl(e.firestore,Wd),[new Fk(e._key,Sl.none())])}function mn(e,t){const r=sl(e.firestore,Wd),n=nr(e),a=$P(e.converter,t);return Yb(r,[LP(Wb(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,Sl.exists(!1))]).then(()=>n)}function mr(e,...t){var c,u,d;e=Yn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||eH(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(eH(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,o,l;if(e instanceof cs)o=sl(e.firestore,Wd),l=kk(e._key.path),s={next:f=>{t[n]&&t[n](Uee(o,e,f))},error:t[n+1],complete:t[n+2]};else{const f=sl(e,Yd);o=sl(f.firestore,Wd),l=f._query;const h=new GP(o);s={next:m=>{t[n]&&t[n](new pm(o,h,f,m))},error:t[n+1],complete:t[n+2]},Pee(e._query)}return function(h,m,g,x){const v=new PP(x),y=new FP(m,v,g);return h.asyncQueue.enqueueAndForget(async()=>BP(await y_(h),y)),()=>{v.Nu(),h.asyncQueue.enqueueAndForget(async()=>TP(await y_(h),y))}}(Gb(o),l,a,s)}function Yb(e,t){return function(n,a){const s=new hh;return n.asyncQueue.enqueueAndForget(async()=>Dbe(await Gbe(n),a,s)),s.promise}(Gb(e),t)}function Uee(e,t,r){const n=r.docs.get(t._key),a=new GP(e);return new mm(e,a,t._key,n,new xv(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qee{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Wb(t)}set(t,r,n){this._verifyNotCommitted();const a=nB(t,this._firestore),s=$P(a.converter,r,n),o=LP(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,Sl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=nB(t,this._firestore);let o;return o=typeof(r=Yn(r))=="string"||r instanceof qb?Tee(this._dataReader,"WriteBatch.update",s._key,r,n,a):Bee(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,Sl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=nB(t,this._firestore);return this._mutations=this._mutations.concat(new Fk(r._key,Sl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Yt(St.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nB(e,t){if((e=Yn(e)).firestore!==t)throw new Yt(St.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Na(){return new MP("serverTimestamp")}function Hee(...e){return new UP("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(e){return Gb(e=sl(e,Wd)),new Qee(e,t=>Yb(e,t))}(function(t,r=!0){(function(a){Hb=a})(Ug),Sm(new Eh("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Wd(new rxe(n.getProvider("auth-internal")),new sxe(o,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Yt(St.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nb(u.options.projectId,d)}(o,a),o);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Wu(sQ,iQ,t),Wu(sQ,iQ,"esm2020")})();const ub=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Mee,Bytes:Qc,CollectionReference:mh,DocumentReference:cs,DocumentSnapshot:mm,FieldPath:qb,FieldValue:Kb,Firestore:Wd,FirestoreError:Yt,GeoPoint:Ud,Query:Yd,QueryCompositeFilterConstraint:Hk,QueryConstraint:nE,QueryDocumentSnapshot:pw,QueryFieldFilterConstraint:aE,QueryLimitConstraint:zk,QueryOrderByConstraint:Vk,QuerySnapshot:pm,QueryStartAtConstraint:$k,SnapshotMetadata:xv,Timestamp:cr,VectorValue:Qd,WriteBatch:Qee,_AutoId:wk,_ByteString:no,_DatabaseId:nb,_DocumentKey:Er,_EmptyAuthCredentialsProvider:mZ,_FieldPath:Ji,_cast:sl,_logWarn:bg,_validateIsNotUsedTogether:gZ,addDoc:mn,arrayUnion:Hee,collection:mt,connectFirestoreEmulator:See,deleteDoc:Ca,doc:nr,ensureFirestoreConfigured:Gb,executeWrite:Yb,getDoc:kh,getDocs:qr,getFirestore:RP,limit:Hd,onSnapshot:mr,orderBy:ar,query:Ht,serverTimestamp:Na,setDoc:yi,startAfter:Ree,updateDoc:Tl,where:xr,writeBatch:$g},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vee="firebasestorage.googleapis.com",zee="storageBucket",a1e=120*1e3,s1e=600*1e3,i1e=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Xd{constructor(t,r,n=0){super(aB(t),`Firebase Storage: ${r} (${aB(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ms.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return aB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ga;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ga||(Ga={}));function aB(e){return"storage/"+e}function qP(){const e="An unknown error occurred, please check the error payload for server response.";return new ms(Ga.UNKNOWN,e)}function o1e(e){return new ms(Ga.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function l1e(e){return new ms(Ga.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function c1e(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ms(Ga.UNAUTHENTICATED,e)}function u1e(){return new ms(Ga.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function d1e(e){return new ms(Ga.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function $ee(){return new ms(Ga.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Gee(){return new ms(Ga.CANCELED,"User canceled the upload/download.")}function f1e(e){return new ms(Ga.INVALID_URL,"Invalid URL '"+e+"'.")}function A1e(e){return new ms(Ga.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function h1e(){return new ms(Ga.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zee+"' property when initializing the app?")}function qee(){return new ms(Ga.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function m1e(){return new ms(Ga.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function p1e(){return new ms(Ga.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function g1e(e){return new ms(Ga.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hF(e){return new ms(Ga.INVALID_ARGUMENT,e)}function Kee(){return new ms(Ga.APP_DELETED,"The Firebase app was deleted.")}function x1e(e){return new ms(Ga.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gw(e,t){return new ms(Ga.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function dy(e){throw new ms(Ga.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=Nl.makeFromUrl(t,r)}catch{return new Nl(t,"")}if(n.path==="")return n;throw A1e(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),c={bucket:1,path:3};function u(F){F.path_=decodeURIComponent(F.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},x=r===Vee?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${v}`,"i"),_=[{regex:l,indices:c,postModify:s},{regex:m,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let F=0;F<_.length;F++){const B=_[F],T=B.regex.exec(t);if(T){const C=T[B.indices.bucket];let S=T[B.indices.path];S||(S=""),n=new Nl(C,S),B.postModify(n);break}}if(n==null)throw f1e(t);return n}}class v1e{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1e(e,t,r){let n=1,a=null,s=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...v){u||(u=!0,t.apply(null,v))}function f(v){a=setTimeout(()=>{a=null,e(m,c())},v)}function h(){s&&clearTimeout(s)}function m(v,...y){if(u){h();return}if(v){h(),d.call(null,v,...y);return}if(c()||o){h(),d.call(null,v,...y);return}n<64&&(n*=2);let _;l===1?(l=2,_=0):_=(n+Math.random())*1e3,f(_)}let g=!1;function x(v){g||(g=!0,h(),!u&&(a!==null?(v||(l=2),clearTimeout(a),f(0)):v||(l=1)))}return f(0),s=setTimeout(()=>{o=!0,x(!0)},r),x}function y1e(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1e(e){return e!==void 0}function E1e(e){return typeof e=="function"}function N1e(e){return typeof e=="object"&&!Array.isArray(e)}function Gk(e){return typeof e=="string"||e instanceof String}function nH(e){return KP()&&e instanceof Blob}function KP(){return typeof Blob<"u"}function mF(e,t,r,n){if(n<t)throw hF(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw hF(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function Wee(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var tg;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(tg||(tg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xee(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1e{constructor(t,r,n,a,s,o,l,c,u,d,f,h=!0,m=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new zN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===tg.NO_ERROR,c=s.getStatus();if(!l||Xee(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===tg.ABORT;n(!1,new zN(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new zN(u,s))})},r=(n,a)=>{const s=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());w1e(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=qP();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(a.canceled){const c=this.appDelete_?Kee():Gee();o(c)}else{const c=$ee();o(c)}};this.canceled_?r(!1,new zN(!1,null,!0)):this.backoffId_=b1e(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&y1e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zN{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function _1e(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function S1e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function k1e(e,t){t&&(e["X-Firebase-GMPID"]=t)}function j1e(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function B1e(e,t,r,n,a,s,o=!0,l=!1){const c=Wee(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return k1e(d,t),_1e(d,r),S1e(d,s),j1e(d,n),new C1e(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function I1e(...e){const t=T1e();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(KP())return new Blob(e);throw new ms(Ga.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function F1e(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1e(e){if(typeof atob>"u")throw g1e("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sB{constructor(t,r){this.data=t,this.contentType=r||null}}function D1e(e,t){switch(e){case Kf.RAW:return new sB(Yee(t));case Kf.BASE64:case Kf.BASE64URL:return new sB(Jee(e,t));case Kf.DATA_URL:return new sB(R1e(t),L1e(t))}throw qP()}function Yee(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,o=e.charCodeAt(++r);n=65536|(s&1023)<<10|o&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function P1e(e){let t;try{t=decodeURIComponent(e)}catch{throw gw(Kf.DATA_URL,"Malformed data URL.")}return Yee(t)}function Jee(e,t){switch(e){case Kf.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw gw(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Kf.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw gw(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=O1e(t)}catch(a){throw a.message.includes("polyfill")?a:gw(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class Zee{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw gw(Kf.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=M1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function R1e(e){const t=new Zee(e);return t.base64?Jee(Kf.BASE64,t.rest):P1e(t.rest)}function L1e(e){return new Zee(e).contentType}function M1e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t,r){let n=0,a="";nH(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(nH(this.data_)){const n=this.data_,a=F1e(n,t,r);return a===null?null:new eh(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new eh(n,!0)}}static getBlob(...t){if(KP()){const r=t.map(n=>n instanceof eh?n.data_:n);return new eh(I1e.apply(null,r))}else{const r=t.map(o=>Gk(o)?D1e(Kf.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)a[s++]=o[l]}),new eh(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(e){let t;try{t=JSON.parse(e)}catch{return null}return N1e(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1e(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Q1e(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function ete(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1e(e,t){return t}class gl{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||H1e}}let $N=null;function V1e(e){return!Gk(e)||e.length<2?e:ete(e)}function XP(){if($N)return $N;const e=[];e.push(new gl("bucket")),e.push(new gl("generation")),e.push(new gl("metageneration")),e.push(new gl("name","fullPath",!0));function t(s,o){return V1e(o)}const r=new gl("name");r.xform=t,e.push(r);function n(s,o){return o!==void 0?Number(o):o}const a=new gl("size");return a.xform=n,e.push(a),e.push(new gl("timeCreated")),e.push(new gl("updated")),e.push(new gl("md5Hash",null,!0)),e.push(new gl("cacheControl",null,!0)),e.push(new gl("contentDisposition",null,!0)),e.push(new gl("contentEncoding",null,!0)),e.push(new gl("contentLanguage",null,!0)),e.push(new gl("contentType",null,!0)),e.push(new gl("metadata","customMetadata",!0)),$N=e,$N}function z1e(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new Nl(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function $1e(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const o=r[s];n[o.local]=o.xform(n,t[o.server])}return z1e(n,e),n}function tte(e,t,r){const n=WP(t);return n===null?null:$1e(e,n,r)}function G1e(e,t,r,n){const a=WP(t);if(a===null||!Gk(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+o(d)+"/o/"+o(f),m=Gg(h,r,n),g=Wee({alt:"media",token:u});return m+g})[0]}function rte(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH="prefixes",sH="items";function q1e(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[aH])for(const a of r[aH]){const s=a.replace(/\/$/,""),o=e._makeStorageReference(new Nl(t,s));n.prefixes.push(o)}if(r[sH])for(const a of r[sH]){const s=e._makeStorageReference(new Nl(t,a.name));n.items.push(s)}return n}function K1e(e,t,r){const n=WP(r);return n===null?null:q1e(e,t,n)}class Wm{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(e){if(!e)throw qP()}function YP(e,t){function r(n,a){const s=tte(e,a,t);return sA(s!==null),s}return r}function W1e(e,t){function r(n,a){const s=K1e(e,t,a);return sA(s!==null),s}return r}function X1e(e,t){function r(n,a){const s=tte(e,a,t);return sA(s!==null),G1e(s,a,e.host,e._protocol)}return r}function Jb(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=u1e():a=c1e():r.getStatus()===402?a=l1e(e.bucket):r.getStatus()===403?a=d1e(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function JP(e){const t=Jb(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=o1e(e.path)),s.serverResponse=a.serverResponse,s}return r}function Y1e(e,t,r){const n=t.fullServerUrl(),a=Gg(n,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new Wm(a,s,YP(e,r),o);return l.errorHandler=JP(t),l}function J1e(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const o=t.bucketOnlyServerUrl(),l=Gg(o,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new Wm(l,c,W1e(e,t.bucket),u);return d.urlParams=s,d.errorHandler=Jb(t),d}function Z1e(e,t,r){const n=t.fullServerUrl(),a=Gg(n,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new Wm(a,s,X1e(e,r),o);return l.errorHandler=JP(t),l}function eye(e,t){const r=t.fullServerUrl(),n=Gg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function o(c,u){}const l=new Wm(n,a,o,s);return l.successCodes=[200,204],l.errorHandler=JP(t),l}function tye(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function nte(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=tye(null,t)),n}function ate(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let F=0;F<2;F++)_=_+Math.random().toString().slice(2);return _}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=nte(t,n,a),d=rte(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=eh.getBlob(f,n,h);if(m===null)throw qee();const g={name:u.fullPath},x=Gg(s,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,w=new Wm(x,v,YP(e,r),y);return w.urlParams=g,w.headers=o,w.body=m.uploadData(),w.errorHandler=Jb(t),w}class E_{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function ZP(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{sA(!1)}return sA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function rye(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),o=nte(t,n,a),l={name:o.fullPath},c=Gg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=rte(o,r),h=e.maxUploadRetryTime;function m(x){ZP(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{sA(!1)}return sA(Gk(v)),v}const g=new Wm(c,u,m,h);return g.urlParams=l,g.headers=d,g.body=f,g.errorHandler=Jb(t),g}function nye(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=ZP(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{sA(!1)}f||sA(!1);const h=Number(f);return sA(!isNaN(h)),new E_(h,n.size(),d==="final")}const o="POST",l=e.maxUploadRetryTime,c=new Wm(r,o,s,l);return c.headers=a,c.errorHandler=Jb(t),c}const iH=256*1024;function aye(e,t,r,n,a,s,o,l){const c=new E_(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw m1e();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,h=f+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,h);if(x===null)throw qee();function v(F,B){const T=ZP(F,["active","final"]),C=c.current+d,S=n.size();let j;return T==="final"?j=YP(t,s)(F,B):j=null,new E_(C,S,T==="final",j)}const y="POST",w=t.maxUploadRetryTime,_=new Wm(r,y,v,w);return _.headers=g,_.body=x.uploadData(),_.progressCallback=l||null,_.errorHandler=Jb(e),_}const Jl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function iB(e){switch(e){case"running":case"pausing":case"canceling":return Jl.RUNNING;case"paused":return Jl.PAUSED;case"success":return Jl.SUCCESS;case"canceled":return Jl.CANCELED;case"error":return Jl.ERROR;default:return Jl.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sye{constructor(t,r,n){if(E1e(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class iye{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tg.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=tg.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=tg.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw dy("cannot .send() more than once");if(Hh(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dy("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class oye extends iye{initXhr(){this.xhr_.responseType="text"}}function th(){return new oye}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lye{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=XP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Ga.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Xee(a.status,[]))if(s)a=$ee();else{this.sleepTime=Math.max(this.sleepTime*2,i1e),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Ga.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=rye(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,th,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=nye(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,th,r,n);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=iH*this._chunkMultiplier,r=new E_(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let o;try{o=aye(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,th,a,s,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){iH*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=Y1e(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,th,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=ate(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,th,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Gee(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=iB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new sye(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(iB(this._state)){case Jl.SUCCESS:Ox(this._resolve.bind(null,this.snapshot))();break;case Jl.CANCELED:case Jl.ERROR:const r=this._reject;Ox(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(iB(this._state)){case Jl.RUNNING:case Jl.PAUSED:t.next&&Ox(t.next.bind(t,this.snapshot))();break;case Jl.SUCCESS:t.complete&&Ox(t.complete.bind(t))();break;case Jl.CANCELED:case Jl.ERROR:t.error&&Ox(t.error.bind(t,this._error))();break;default:t.error&&Ox(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(t,r){this._service=t,r instanceof Nl?this._location=r:this._location=Nl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new wg(t,r)}get root(){const t=new Nl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ete(this._location.path)}get storage(){return this._service}get parent(){const t=U1e(this._location.path);if(t===null)return null;const r=new Nl(this._location.bucket,t);return new wg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw x1e(t)}}function cye(e,t,r){e._throwIfRoot("uploadBytes");const n=ate(e.storage,e._location,XP(),new eh(t,!0),r);return e.storage.makeRequestWithTokens(n,th).then(a=>({metadata:a,ref:e}))}function uye(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new lye(e,new eh(t),r)}function dye(e){const t={prefixes:[],items:[]};return ste(e,t).then(()=>t)}async function ste(e,t,r){const a=await fye(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await ste(e,t,a.nextPageToken)}function fye(e,t){t!=null&&typeof t.maxResults=="number"&&mF("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=J1e(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,th)}function Aye(e){e._throwIfRoot("getDownloadURL");const t=Z1e(e.storage,e._location,XP());return e.storage.makeRequestWithTokens(t,th).then(r=>{if(r===null)throw p1e();return r})}function hye(e){e._throwIfRoot("deleteObject");const t=eye(e.storage,e._location);return e.storage.makeRequestWithTokens(t,th)}function mye(e,t){const r=Q1e(e._location.path,t),n=new Nl(e._location.bucket,r);return new wg(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pye(e){return/^[A-Za-z]+:\/\//.test(e)}function gye(e,t){return new wg(e,t)}function ite(e,t){if(e instanceof eR){const r=e;if(r._bucket==null)throw h1e();const n=new wg(r,r._bucket);return t!=null?ite(n,t):n}else return t!==void 0?mye(e,t):e}function xye(e,t){if(t&&pye(t)){if(e instanceof eR)return gye(e,t);throw hF("To use ref(service, url), the first argument must be a Storage instance.")}else return ite(e,t)}function oH(e,t){const r=t==null?void 0:t[zee];return r==null?null:Nl.makeFromBucketSpec(r,e)}function vye(e,t,r,n={}){e.host=`${t}:${r}`;const a=Hh(t);a&&(mk(`https://${e.host}/b`),pk("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:yJ(s,e.app.options.projectId))}class eR{constructor(t,r,n,a,s,o=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Vee,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a1e,this._maxUploadRetryTime=s1e,this._requests=new Set,a!=null?this._bucket=Nl.makeFromBucketSpec(a,this._host):this._bucket=oH(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Nl.makeFromBucketSpec(this._url,t):this._bucket=oH(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){mF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){mF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Uc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new wg(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new v1e(Kee());{const o=B1e(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const lH="@firebase/storage",cH="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ote="storage";function tR(e,t,r){return e=Yn(e),cye(e,t,r)}function bye(e,t,r){return e=Yn(e),uye(e,t,r)}function yye(e){return e=Yn(e),dye(e)}function qk(e){return e=Yn(e),Aye(e)}function wye(e){return e=Yn(e),hye(e)}function sE(e,t){return e=Yn(e),xye(e,t)}function rR(e=gk(),t){e=Yn(e);const n=K2(e,ote).getImmediate({identifier:t}),a=JD("storage");return a&&Eye(n,...a),n}function Eye(e,t,r,n={}){vye(e,t,r,n)}function Nye(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new eR(r,n,a,t,Ug)}function Cye(){Sm(new Eh(ote,Nye,"PUBLIC").setMultipleInstances(!0)),Wu(lH,cH,""),Wu(lH,cH,"esm2020")}Cye();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ye="type.googleapis.com/google.protobuf.Int64Value",Sye="type.googleapis.com/google.protobuf.UInt64Value";function lte(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function N_(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>N_(t));if(typeof e=="function"||typeof e=="object")return lte(e,t=>N_(t));throw new Error("Data cannot be encoded in JSON: "+e)}function db(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case _ye:case Sye:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>db(t)):typeof e=="function"||typeof e=="object"?lte(e,t=>db(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ac extends Xd{constructor(t,r,n){super(`${nR}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,ac.prototype)}}function kye(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function C_(e,t){let r=kye(e),n=r,a;try{const s=t&&t.error;if(s){const o=s.status;if(typeof o=="string"){if(!uH[o])return new ac("internal","internal");r=uH[o],n=o}const l=s.message;typeof l=="string"&&(n=l),a=s.details,a!==void 0&&(a=db(a))}}catch{}return r==="ok"?null:new ac(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jye{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Uc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="us-central1",Bye=/^data: (.*?)(?:\n|$)/;function Tye(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new ac("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class Iye{constructor(t,r,n,a,s=pF,o=(...l)=>fetch(...l)){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new jye(t,r,n,a),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=pF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function Fye(e,t,r){const n=Hh(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(mk(e.emulatorOrigin),pk("Functions",!0))}function Oye(e,t,r){const n=a=>Pye(e,t,a,{});return n.stream=(a,s)=>Lye(e,t,a,s),n}async function Dye(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function cte(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function Pye(e,t,r,n){const a=e._url(t);return Rye(e,a,r,n)}async function Rye(e,t,r,n){r=N_(r);const a={data:r},s=await cte(e,n),o=n.timeout||7e4,l=Tye(o),c=await Promise.race([Dye(t,a,s,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new ac("cancelled","Firebase Functions instance was deleted.");const u=C_(c.status,c.json);if(u)throw u;if(!c.json)throw new ac("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new ac("internal","Response is missing data field.");return{data:db(d)}}function Lye(e,t,r,n){const a=e._url(t);return Mye(e,a,r,n||{})}async function Mye(e,t,r,n){var h;r=N_(r);const a={data:r},s=await cte(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new ac("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=C_(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const u=new Promise((m,g)=>{l=m,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const m=new ac("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),f=Uye(d,l,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function Uye(e,t,r,n){const a=(o,l)=>{const c=o.match(Bye);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(db(d.result));return}if("message"in d){l.enqueue(db(d.message));return}if("error"in d){const f=C_(0,d);l.error(f),r(f);return}}catch(d){if(d instanceof ac){l.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(n!=null&&n.aborted){const u=new ac("cancelled","Request was cancelled");return o.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){l.trim()&&a(l.trim(),o),o.close();return}if(n!=null&&n.aborted){const h=new ac("cancelled","Request was cancelled");o.error(h),r(h),await e.cancel();return}l+=s.decode(u,{stream:!0});const f=l.split(`
`);l=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),o);return c()}catch(u){const d=u instanceof ac?u:C_(0,null);o.error(d),r(d)}}},cancel(){return e.cancel()}})}const dH="@firebase/functions",fH="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qye="auth-internal",Hye="app-check-internal",Vye="messaging-internal";function zye(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(Qye),o=r.getProvider(Vye),l=r.getProvider(Hye);return new Iye(a,s,o,l,n)};Sm(new Eh(nR,t,"PUBLIC").setMultipleInstances(!0)),Wu(dH,fH,e),Wu(dH,fH,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(e=gk(),t=pF){const n=K2(Yn(e),nR).getImmediate({identifier:t}),a=JD("functions");return a&&$ye(n,...a),n}function $ye(e,t,r){Fye(Yn(e),t,r)}function Uu(e,t,r){return Oye(Yn(e),t)}zye();const Gye={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.appspot.com",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604"},Zb=tP(Gye),ll=iZ(Zb),Nr=RP(Zb),aR=rR(Zb),sR=Z0(Zb,"us-central1"),ute=Object.freeze(Object.defineProperty({__proto__:null,app:Zb,auth:ll,db:Nr,functions:sR,storage:aR},Symbol.toStringTag,{value:"Module"})),qye=async(e,t)=>{try{return(await Lpe(ll,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},oB=async()=>{try{await Qpe(ll)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},Kye=async e=>{try{await Rpe(ll,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},dte=async e=>{try{const t=nr(Nr,"usuarios",e),r=await kh(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Gt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Gt||{}),fn=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(fn||{}),Mp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Mp||{});const Wye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),Xye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),Rs="w-6 h-6",Kk="w-24 h-24",iR=()=>i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),Yye=()=>i.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M9 18h6"}),i.jsx("path",{d:"M10 22h4"}),i.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),Jye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Zye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),qy=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Ky=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),fte=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),ewe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Kk,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),twe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Kk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),rwe=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Kk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),nwe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Kk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),awe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),AH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),GN=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),lB=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),qN=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),cB=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),hH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),swe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),iwe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),owe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),lwe=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),KN=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),cwe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),uB=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),uwe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Rs,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),dwe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),mH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Rs,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),WN=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Rs,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),fwe=[{id:Gt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:i.jsx(ewe,{})},{id:Gt.PROFESORADO,label:"Profesorado",icon:i.jsx(twe,{})},{id:Gt.COORDINACION_TP,label:"Coordinación TP",icon:i.jsx(rwe,{})},{id:Gt.ESTUDIANTE,label:"Estudiantes",icon:i.jsx(nwe,{})}],Awe={[Gt.SUBDIRECCION]:[{name:"Dashboard",icon:i.jsx(awe,{})},{name:"Administración",icon:i.jsx(lwe,{})},{name:"Seguimiento Curricular",icon:i.jsx(dwe,{})},{name:"Acompañamiento docente",icon:i.jsx(owe,{})},{name:"Análisis Taxonómico",icon:i.jsx(mH,{})},{name:"SIMCE",icon:i.jsx(WN,{})},{name:"Interdisciplinario",icon:i.jsx(uB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:i.jsx(AH,{})},{name:"Crear horarios",icon:i.jsx(lB,{})},{name:"Seguimiento de acciones pedagógicas",icon:i.jsx(qN,{})},{name:"Inclusión",icon:i.jsx(KN,{})},{name:"Calendario Académico",icon:i.jsx(GN,{})},{name:"Muro de Anuncios",icon:i.jsx(qy,{})},{name:"Mensajería Interna",icon:i.jsx(Ky,{})},{name:"Generador de Actas",icon:i.jsx(cB,{})}],[Gt.PROFESORADO]:[{name:"Planificación",icon:i.jsx(hH,{})},{name:"Mis Acompañamientos",icon:i.jsx(cwe,{})},{name:"Recursos de Aprendizaje",icon:i.jsx(swe,{})},{name:"Análisis Taxonómico",icon:i.jsx(mH,{})},{name:"SIMCE",icon:i.jsx(WN,{})},{name:"Interdisciplinario",icon:i.jsx(uB,{})},{name:"Inclusión",icon:i.jsx(KN,{})},{name:"Actividades Remotas",icon:i.jsx(iwe,{})},{name:"Evaluación de Aprendizajes",icon:i.jsx(cB,{})},{name:"Evaluaciones Formativas",icon:i.jsx(qN,{})},{name:"Desarrollo Profesional",icon:i.jsx(KN,{})},{name:"Evaluación de Competencias",icon:i.jsx(Xye,{})},{name:"Calendario Académico",icon:i.jsx(GN,{})},{name:"Muro de Anuncios",icon:i.jsx(qy,{})},{name:"Mensajería Interna",icon:i.jsx(Ky,{})},{name:"Generador de Actas",icon:i.jsx(AH,{})}],[Gt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:i.jsx(qN,{})},{name:"Asistencia Dual",icon:i.jsx(lB,{})},{name:"Pañol",icon:i.jsx(uwe,{})},{name:"SIMCE",icon:i.jsx(WN,{})},{name:"Gestión de Empresas",icon:i.jsx(Wye,{})},{name:"Calendario Académico",icon:i.jsx(GN,{})},{name:"Muro de Anuncios",icon:i.jsx(qy,{})},{name:"Mensajería Interna",icon:i.jsx(Ky,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Desarrollo Profesional",icon:i.jsx(KN,{})},{name:"Generador de Actas",icon:i.jsx(cB,{})}],[Gt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:i.jsx(hH,{})},{name:"Evaluación Formativa",icon:i.jsx(qN,{})},{name:"SIMCE",icon:i.jsx(WN,{})},{name:"Tareas Interdisciplinarias",icon:i.jsx(uB,{})},{name:"Asistencia a Empresa",icon:i.jsx(lB,{})},{name:"Calendario Académico",icon:i.jsx(GN,{})},{name:"Muro de Anuncios",icon:i.jsx(qy,{})},{name:"Mensajería Interna",icon:i.jsx(Ky,{})}]},pH=["1º Medio","2º Medio","3º Medio","4º Medio"],ls=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],js=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],gF=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Pv={[fn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[fn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[fn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[fn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},hwe=Object.values(Mp),dB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],fB=["Vinculado","Desvinculado","En proceso","Empresa"],rg=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Ate=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],__=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],xw=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],hte=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],XN=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],mwe=["Mecánica Industrial","Mecánica Automotriz"],pwe=["INACAP","UNAB","DUOC","Universidad de Las Américas"],gwe={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},xwe=["Pasantía","Visita","Certificación","Formación en empresa"],vwe={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},bwe={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},rh={"Liderazgo Curricular":["Planificación y organización del currículo","Asegurar la cobertura y secuenciación de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prácticas Pedagógicas en el Aula":["Estrategias de enseñanza y metodologías activas","Evaluación de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologías para apoyar la enseñanza"],"Acompañamiento y Desarrollo Profesional Docente":["Observación de clases y retroalimentación","Planes de formación continua y actualización pedagógica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluación de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedagógicas","Evaluaciones internas y externas","Ajuste de estrategias según resultados y metas de aprendizaje"]},gH=["Pendiente","En Proceso","Cumplida"],xH=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],ywe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},f=()=>l==="forgot"?i.jsxs("form",{onSubmit:d,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):l==="forgot_sent"?i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),i.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",i.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),i.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>o(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:i.jsx("p",{children:r})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(iR,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:l==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),i.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},YN=({trigger:e,children:t,onOpen:r})=>{const[n,a]=N.useState(!1),s=N.useRef(null),o=()=>{const c=!n;a(c),c&&r&&r()},l=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return N.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),i.jsxs("div",{className:"relative",ref:s,children:[i.jsx("div",{onClick:o,children:e}),n&&i.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},vH="usuariosLiceo",wwe=({user:e,onClose:t,onSave:r})=>{const[n,a]=N.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=l=>{a({...n,[l.target.name]:l.target.value})},o=l=>{l.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(vH);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(vH,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:l=>l.stopPropagation(),children:i.jsxs("form",{onSubmit:o,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),i.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),i.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},bH="usuariosLiceo",Ewe=({user:e,onClose:t,onSave:r})=>{const[n,a]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(bH);let m=h?JSON.parse(h):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=f:m.push(f),localStorage.setItem(bH,JSON.stringify(m)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>o(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:i.jsx("p",{children:l})})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nwe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cwe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),yH=e=>{const t=Cwe(e);return t.charAt(0).toUpperCase()+t.slice(1)},mte=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),_we=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Swe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kwe=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...Swe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:mte("lucide",a),...!s&&!_we(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>N.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=(e,t)=>{const r=N.forwardRef(({className:n,...a},s)=>N.createElement(kwe,{ref:s,iconNode:t,className:mte(`lucide-${Nwe(yH(e))}`,`lucide-${e}`,n),...a}));return r.displayName=yH(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jwe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Bwe=Ut("activity",jwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Twe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],JN=Ut("arrow-left",Twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iwe=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Fwe=Ut("arrow-up-down",Iwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Owe=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Dwe=Ut("award",Owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pwe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],Rwe=Ut("bell-ring",Pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lwe=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Mwe=Ut("book-marked",Lwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uwe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],Qwe=Ut("book-open-check",Uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hwe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],vi=Ut("book-open",Hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vwe=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],wH=Ut("book",Vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zwe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],$we=Ut("brain-circuit",zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gwe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Zw=Ut("brain",Gwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qwe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],e2=Ut("briefcase",qwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kwe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],vw=Ut("building-2",Kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wwe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Xwe=Ut("building",Wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ywe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],oR=Ut("calculator",Ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jwe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Zwe=Ut("calendar-check",Jwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],oc=Ut("calendar",e2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],qc=Ut("chart-column",t2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],n2e=Ut("chart-line",r2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2e=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],s2e=Ut("chart-no-axes-column-increasing",a2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2e=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],pte=Ut("chart-no-axes-column",i2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2e=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],bw=Ut("chart-pie",o2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gte=Ut("check",l2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],EH=Ut("chevron-down",c2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],t2=Ut("chevron-left",u2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],lR=Ut("chevron-right",d2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xu=Ut("circle-alert",f2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],cR=Ut("circle-check-big",A2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ts=Ut("circle-check",h2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ZN=Ut("circle-plus",m2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xte=Ut("circle-question-mark",p2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],r2=Ut("circle-x",g2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],v2e=Ut("clipboard-check",x2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Eg=Ut("clipboard-list",b2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wf=Ut("clock",y2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],jh=Ut("download",w2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],AB=Ut("external-link",E2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vte=Ut("eye",N2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2e=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],_2e=Ut("factory",C2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],xF=Ut("file-check",S2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],j2e=Ut("file-down",k2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2e=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],T2e=Ut("file-pen",B2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2e=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],F2e=Ut("file-play",I2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],uR=Ut("file-spreadsheet",O2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Vd=Ut("file-text",D2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2e=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],hB=Ut("files",P2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],L2e=Ut("folder-closed",R2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2e=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],NH=Ut("folder-open",M2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Wk=Ut("funnel",U2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2e=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],S_=Ut("gauge",Q2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2e=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Ng=Ut("graduation-cap",H2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2e=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],z2e=Ut("hash",V2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2e=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],bte=Ut("hourglass",$2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],q2e=Ut("image",G2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],W2e=Ut("info",K2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2e=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],yte=Ut("layout-dashboard",X2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2e=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],dR=Ut("layers",Y2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Z2e=Ut("layout-grid",J2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eEe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],tEe=Ut("layout-list",eEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rEe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],CH=Ut("link-2",rEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nEe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],aEe=Ut("link",nEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sEe=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Rv=Ut("list-checks",sEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iEe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],El=Ut("loader-circle",iEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oEe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],lEe=Ut("mail",oEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cEe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],k_=Ut("map-pin",cEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uEe=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],dEe=Ut("megaphone",uEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fEe=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],AEe=Ut("menu",fEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hEe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],wte=Ut("message-square",hEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mEe=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],_H=Ut("notebook-pen",mEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pEe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],gEe=Ut("palette",pEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xEe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],j_=Ut("pen-line",xEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vEe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],fR=Ut("pencil",vEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bEe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],yEe=Ut("percent",bEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wEe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_o=Ut("plus",wEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EEe=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],vF=Ut("presentation",EEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NEe=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],CEe=Ut("puzzle",NEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ee=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],bF=Ut("refresh-ccw",_Ee);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SEe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gm=Ut("refresh-cw",SEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kEe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],jEe=Ut("route",kEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BEe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],TEe=Ut("ruler",BEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IEe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Yc=Ut("save",IEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FEe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],am=Ut("school",FEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OEe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],SH=Ut("scroll-text",OEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DEe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],e1=Ut("search",DEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PEe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],REe=Ut("send",PEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LEe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MEe=Ut("settings",LEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UEe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],QEe=Ut("shield-check",UEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HEe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ng=Ut("sparkles",HEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VEe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ih=Ut("square-pen",VEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zEe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],yF=Ut("square-plus",zEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ee=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],GEe=Ut("star",$Ee);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],fb=Ut("target",qEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KEe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Va=Ut("trash-2",KEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WEe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],B_=Ut("trending-up",WEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XEe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],n2=Ut("triangle-alert",XEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YEe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],JEe=Ut("university",YEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZEe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],t1=Ut("upload",ZEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eNe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kH=Ut("user-cog",eNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tNe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],jH=Ut("user-minus",tNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rNe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],T_=Ut("user-plus",rNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nNe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],a2=Ut("user",nNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aNe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],fy=Ut("users-round",aNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sNe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ro=Ut("users",sNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iNe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Up=Ut("video",iNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oNe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],lNe=Ut("wand-sparkles",oNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cNe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],C5=Ut("wrench",cNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uNe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uA=Ut("x",uNe);async function dNe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Na()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await mn(mt(Nr,"notificaciones"),t)).id}function fNe(e,t){const r=[];let n=[],a=[];const s=()=>{const o=new Map;[...n,...a].forEach(c=>{c.id&&(o.has(c.id)||o.set(c.id,c))});const l=Array.from(o.values()).sort((c,u)=>{var h,m;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((m=u.createdAt)!=null&&m.toDate?u.createdAt.toDate().getTime():0)-d});t(l)};if(e.email){const o=Ht(mt(Nr,"notificaciones"),xr("docenteEmailLower","==",e.email.toLowerCase()),ar("createdAt","desc"));r.push(mr(o,l=>{n=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const o=Ht(mt(Nr,"notificaciones"),xr("docenteNombre","==",e.nombreCompleto),ar("createdAt","desc"));r.push(mr(o,l=>{a=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(o=>o())}async function ANe(e){const t=nr(Nr,"notificaciones",e);await Tl(t,{leida:!0})}async function hNe(e){const t=nr(Nr,"notificaciones",e);await Ca(t)}const BH="anunciosMuro",TH="mensajesInternos",IH="lir-read-status",mNe=({user:e})=>{if(e.fotoUrl)return i.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return i.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},pNe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:o,unreadMessagesCount:l,refreshUnreadCount:c})=>{const[u,d]=N.useState([]),[f,h]=N.useState([]),[m,g]=N.useState(!1),[x,v]=N.useState(!1),[y,w]=N.useState([]),_=N.useCallback(()=>{try{const j=localStorage.getItem(`${IH}-${e.id}`);return j?JSON.parse(j):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),F=N.useCallback(j=>{try{localStorage.setItem(`${IH}-${e.id}`,JSON.stringify(j))}catch(L){console.error("Failed to set read status:",L)}},[e.id]);N.useEffect(()=>{const j=JSON.parse(localStorage.getItem(BH)||"[]"),L=_();d(j.filter(k=>!L.announcements.includes(k.id)));const P=JSON.parse(localStorage.getItem(TH)||"[]");h(P.filter(k=>k.para===e.email).sort((k,U)=>new Date(U.fecha).getTime()-new Date(k.fecha).getTime()).slice(0,5))},[e.id,_,l]),N.useEffect(()=>{if(!(e!=null&&e.email))return;const j=fNe({email:e.email,nombreCompleto:e.nombreCompleto},L=>{const P=L.filter(k=>k.tipo&&(k.tipo.toLowerCase()==="pie"||k.tipo==="nueva_intervencion"));w(P)});return()=>j()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const B=()=>{const j=_(),L=JSON.parse(localStorage.getItem(BH)||"[]").map(P=>P.id);j.announcements=L,F(j),d([])},T=()=>{const j=_(),P=JSON.parse(localStorage.getItem(TH)||"[]").filter(k=>k.para===e.email).map(k=>k.id);j.messages=[...new Set([...j.messages,...P])],F(j),c()},C=y.filter(j=>!j.leida).length,S=j=>{var L;try{const P=(L=j.createdAt)!=null&&L.toDate?j.createdAt.toDate():new Date(j.createdAt);return P?P.toLocaleString("es-CL"):""}catch{return""}};return i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:i.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:o,children:i.jsx(Jye,{})}),i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),i.jsx("div",{className:"flex-1 flex justify-center",children:i.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:i.jsx(Zye,{})})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(YN,{onOpen:B,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[i.jsx(qy,{}),u.length>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),i.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(j=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsx("p",{className:"font-bold dark:text-slate-200",children:j.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:j.mensaje})]},j.id)),u.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),i.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),i.jsx(YN,{trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[i.jsx(CEe,{className:"w-5 h-5"}),C>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:C})]}),children:i.jsxs("div",{className:"p-2 w-80",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),i.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&i.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(j=>i.jsx("li",{className:"p-2 text-sm",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:j.titulo}),i.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:j.mensaje}),j.estudianteNombre&&i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",i.jsx("b",{children:j.estudianteNombre})]}),i.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:S(j)})]}),i.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!j.leida&&i.jsx("button",{onClick:()=>j.id&&ANe(j.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),i.jsx("button",{onClick:()=>j.id&&hNe(j.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},j.id))]})]})}),i.jsx(YN,{onOpen:T,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[i.jsx(Ky,{}),l>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),i.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(j=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",j.de]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:j.asunto})]},j.id)),f.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),i.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),i.jsx(YN,{trigger:i.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(mNe,{user:e})}),children:i.jsxs("div",{className:"p-2",children:[i.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),i.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&i.jsx("li",{children:i.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),i.jsx("li",{children:i.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&i.jsx(wwe,{user:e,onClose:()=>g(!1),onSave:n}),x&&i.jsx(Ewe,{user:e,onClose:()=>v(!1),onSave:n})]})},gNe={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604",measurementId:void 0},AR=D9().length?D9()[0]:tP(gNe),tt=RP(AR),I_=iZ(AR),Ete=rR(AR),hR=Object.freeze(Object.defineProperty({__proto__:null,auth:I_,db:tt,storage:Ete},Symbol.toStringTag,{value:"Module"})),Xk="reemplazos_docentes",xNe="usuarios",Nte=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},vNe=e=>{const t=e.data();return{id:e.id,...t}},bNe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:cr.fromDate(new Date),fechaActualizacion:cr.fromDate(new Date)};return(await mn(mt(tt,Xk),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},yNe=async(e,t)=>{try{const r=nr(tt,Xk,e),n=await kh(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await Ca(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},wNe=(e,t,r=50)=>{try{const n=Ht(mt(tt,Xk),xr("userId","==",e),ar("diaAusencia","desc"),Hd(r));return mr(n,a=>{const s=a.docs.map(Nte);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},ENe=e=>{try{const t=Ht(mt(tt,xNe),xr("profile","==",Gt.PROFESORADO));return mr(t,n=>{const a=n.docs.map(vNe);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},NNe=async(e,t)=>{try{if(!t.trim())return[];const r=Ht(mt(tt,Xk),xr("userId","==",e),ar("diaAusencia","desc"),Hd(100)),a=(await qr(r)).docs.map(Nte),s=t.toLowerCase();return a.filter(o=>o.docenteAusente.toLowerCase().includes(s)||o.docenteReemplazante.toLowerCase().includes(s)||o.curso.toLowerCase().includes(s)||o.diaAusencia.includes(s)||o.asignaturaAusente.toLowerCase().includes(s)||o.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var F_={};F_.version="0.18.5";var Cte=1252,CNe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],mR={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},pR=function(e){CNe.indexOf(e)!=-1&&(Cte=mR[0]=e)};function _Ne(){pR(1252)}var Rd=function(e){pR(e)};function gR(){Rd(1200),_Ne()}function FH(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function SNe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function _te(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Wy=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?SNe(e.slice(2)):t==254&&r==255?_te(e.slice(2)):t==65279?e.slice(1):e},eC=function(t){return String.fromCharCode(t)},OH=function(t){return String.fromCharCode(t)},s2,sm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i2(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=sm.charAt(s)+sm.charAt(o)+sm.charAt(l)+sm.charAt(c);return t}function Jc(e){var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=sm.indexOf(e.charAt(u++)),o=sm.indexOf(e.charAt(u++)),r=s<<2|o>>4,t+=String.fromCharCode(r),l=sm.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=sm.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var vn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),zh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Om(e){return vn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function DH(e){return vn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Hc=function(t){return vn?zh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Yk(e){if(typeof ArrayBuffer>"u")return Hc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Xm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function kNe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function xR(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return xR(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Zi=vn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:zh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function jNe(e){for(var t=[],r=0,n=e.length+250,a=Om(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=Om(65535),n=65530)}return t.push(a.slice(0,r)),Zi(t)}var kl=/\u0000/g,Xy=/[\u0001-\u0006]/g;function Lv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ld(e,t){var r=""+e;return r.length>=t?r:Bs("0",t-r.length)+r}function vR(e,t){var r=""+e;return r.length>=t?r:Bs(" ",t-r.length)+r}function O_(e,t){var r=""+e;return r.length>=t?r:r+Bs(" ",t-r.length)}function BNe(e,t){var r=""+Math.round(e);return r.length>=t?r:Bs("0",t-r.length)+r}function TNe(e,t){var r=""+e;return r.length>=t?r:Bs("0",t-r.length)+r}var PH=Math.pow(2,32);function Dx(e,t){if(e>PH||e<-PH)return BNe(e,t);var r=Math.round(e);return TNe(r,t)}function D_(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var RH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],mB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function INe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Qr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},LH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},FNe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function P_(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function Gp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,o=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=MNe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var Ste=new Date(1899,11,31,0,0,0),ONe=Ste.getTime(),DNe=new Date(1900,2,1,0,0,0);function kte(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=DNe&&(r+=1440*60*1e3),(r-(ONe+(e.getTimezoneOffset()-Ste.getTimezoneOffset())*6e4))/(1440*60*1e3)}function bR(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function PNe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function RNe(e){var t=e<0?12:11,r=bR(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function LNe(e){var t=bR(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function o2(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=RNe(e):t===10?r=e.toFixed(10).substr(0,12):r=LNe(e),bR(PNe(r.toUpperCase()))}function Cg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):o2(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Ju(14,kte(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function MNe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function UNe(e,t,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return mB[r.m-1][1];case 5:return mB[r.m-1][0];default:return mB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return RH[r.q][0];default:return RH[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ld(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(a=Ld(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Ld(c,u):"";return d}function im(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var jte=/%/g;function QNe(e,t,r){var n=t.replace(jte,""),a=t.length-n.length;return ph(e,n,r*Math.pow(10,2*a))+Bs("%",a)}function HNe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ph(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Bte(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Bte(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Tte=/# (\?+)( ?)\/( ?)(\d+)/;function VNe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?Bs(" ",e[1].length+1+e[4].length):vR(o,e[1].length)+e[2]+"/"+e[3]+Ld(l,e[4].length))}function zNe(e,t,r){return r+(t===0?"":""+t)+Bs(" ",e[1].length+2+e[4].length)}var Ite=/^#*0*\.([0#]+)/,Fte=/\).*[0#]/,Ote=/\(###\) ###\\?-####/;function bl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function MH(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function UH(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function $Ne(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function GNe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Fu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Fte)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Fu("n",n,r):"("+Fu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return HNe(e,t,r);if(t.indexOf("%")!==-1)return QNe(e,t,r);if(t.indexOf("E")!==-1)return Bte(t,r);if(t.charCodeAt(0)===36)return"$"+Fu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Dx(c,t.length);if(t.match(/^[#?]+$/))return a=Dx(r,0),a==="0"&&(a=""),a.length>t.length?a:bl(t.substr(0,t.length-a.length))+a;if(s=t.match(Tte))return VNe(s,c,u);if(t.match(/^#+0+$/))return u+Dx(c,t.length-t.indexOf("0"));if(s=t.match(Ite))return a=MH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+bl(s[1])).replace(/\.$/,"."+bl(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Bs("0",bl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+MH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+im(Dx(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Fu(e,t,-r):im(""+(Math.floor(r)+$Ne(r,s[1].length)))+"."+Ld(UH(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Fu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Lv(Fu(e,t.replace(/[\\-]/g,""),r)),o=0,Lv(Lv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(Ote))return a=Fu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=P_(c,Math.pow(10,o)-1,!1),a=""+u,d=ph("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=O_(l[2],o),d.length<s[4].length&&(d=bl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=P_(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?vR(l[1],o)+s[2]+"/"+s[3]+O_(l[2],o):Bs(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Dx(r,0),t.length<=a.length?a:bl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return bl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=UH(r,s[1].length),r<0?"-"+Fu(e,t,-r):im(GNe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ld(0,3-g.length):"")+g})+"."+Ld(o,s[1].length);switch(t){case"###,##0.00":return Fu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=im(Dx(c,0));return m!=="0"?u+m:"";case"###,###.00":return Fu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Fu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function qNe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ph(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function KNe(e,t,r){var n=t.replace(jte,""),a=t.length-n.length;return ph(e,n,r*Math.pow(10,2*a))+Bs("%",a)}function Dte(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Dte(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Rf(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Fte)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Rf("n",n,r):"("+Rf("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return qNe(e,t,r);if(t.indexOf("%")!==-1)return KNe(e,t,r);if(t.indexOf("E")!==-1)return Dte(t,r);if(t.charCodeAt(0)===36)return"$"+Rf(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ld(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:bl(t.substr(0,t.length-a.length))+a;if(s=t.match(Tte))return zNe(s,c,u);if(t.match(/^#+0+$/))return u+Ld(c,t.length-t.indexOf("0"));if(s=t.match(Ite))return a=(""+r).replace(/^([^\.]+)$/,"$1."+bl(s[1])).replace(/\.$/,"."+bl(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+Bs("0",bl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+im(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Rf(e,t,-r):im(""+r)+"."+Bs("0",s[1].length);if(s=t.match(/^#,#*,#0/))return Rf(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Lv(Rf(e,t.replace(/[\\-]/g,""),r)),o=0,Lv(Lv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(Ote))return a=Rf(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=P_(c,Math.pow(10,o)-1,!1),a=""+u,d=ph("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=O_(l[2],o),d.length<s[4].length&&(d=bl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=P_(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?vR(l[1],o)+s[2]+"/"+s[3]+O_(l[2],o):Bs(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:bl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return bl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Rf(e,t,-r):im(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ld(0,3-g.length):"")+g})+"."+Ld(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=im(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return Rf(e,t.slice(0,t.lastIndexOf(".")),r)+bl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ph(e,t,r){return(r|0)===r?Rf(e,t,r):Fu(e,t,r)}function WNe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Pte=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function r1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":D_(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Pte))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function XNe(e,t,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,h="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!D_(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var m=e.charAt(++o),g=m==="("||m===")"?m:"t";a[a.length]={t:g,v:m},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=Gp(t,r,e.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Gp(t,r),u==null))return"";for(s=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"上":var x={t:l,v:l};if(u==null&&(u=Gp(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",o+=5,h="h"):e.substr(o,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",o+=5,h="h"):(x.t="t",++o),u==null&&x.t==="T")return"";a[a.length]=x,c=l;break;case"[":for(s=l;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Pte)){if(u==null&&(u=Gp(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",r1(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<e.length&&(l=e.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var v=0,y=0,w;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=h,c="h",v<1&&(v=1);break;case"s":(w=a[o].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&a[o].v.match(/[Hh]/)&&(v=1),v<2&&a[o].v.match(/[Mm]/)&&(v=2),v<3&&a[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var _="",F;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=UNe(a[o].t.charCodeAt(0),a[o].v,u,y),a[o].t="t";break;case"n":case"?":for(F=o+1;a[F]!=null&&((l=a[F].t)==="?"||l==="D"||(l===" "||l==="t")&&a[F+1]!=null&&(a[F+1].t==="?"||a[F+1].t==="t"&&a[F+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[F].v==="/"||a[F].v===" "&&a[F+1]!=null&&a[F+1].t=="?"));)a[o].v+=a[F].v,a[F]={v:"",t:";"},++F;_+=a[o].v,o=F-1;break;case"G":a[o].t="t",a[o].v=Cg(t,r);break}var B="",T,C;if(_.length>0){_.charCodeAt(0)==40?(T=t<0&&_.charCodeAt(0)===45?-t:t,C=ph("n",_,T)):(T=t<0&&n>1?-t:t,C=ph("n",_,T),T<0&&a[0]&&a[0].t=="t"&&(C=C.substr(1),a[0].v="-"+a[0].v)),F=C.length-1;var S=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){S=o;break}var j=a.length;if(S===a.length&&C.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(F>=a[o].v.length-1?(F-=a[o].v.length,a[o].v=C.substr(F+1,a[o].v.length)):F<0?a[o].v="":(a[o].v=C.substr(0,F+1),F=-1),a[o].t="t",j=o);F>=0&&j<a.length&&(a[j].v=C.substr(0,F+1)+a[j].v)}else if(S!==a.length&&C.indexOf("E")===-1){for(F=C.indexOf(".")-1,o=S;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")-1:a[o].v.length-1,B=a[o].v.substr(d+1);d>=0;--d)F>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(B=C.charAt(F--)+B);a[o].v=B,a[o].t="t",j=o}for(F>=0&&j<a.length&&(a[j].v=C.substr(0,F+1)+a[j].v),F=C.indexOf(".")+1,o=S;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==S)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")+1:0,B=a[o].v.substr(0,d);d<a[o].v.length;++d)F<C.length&&(B+=C.charAt(F++));a[o].v=B,a[o].t="t",j=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(T=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=ph(a[o].t,a[o].v,T),a[o].t="t");var L="";for(o=0;o!==a.length;++o)a[o]!=null&&(L+=a[o].v);return L}var QH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function HH(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function YNe(e,t){var r=WNe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(QH),l=r[1].match(QH);return HH(t,o)?[n,r[0]]:HH(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function Ju(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Qr)[e],n==null&&(n=r.table&&r.table[LH[e]]||Qr[LH[e]]),n==null&&(n=FNe[e]||"General");break}if(D_(n,0))return Cg(t,r);t instanceof Date&&(t=kte(t,r.date1904));var a=YNe(n,t);if(D_(a[1]))return Cg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return XNe(a[1],t,r,a[0])}function gh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Qr[r]==null){t<0&&(t=r);continue}if(Qr[r]==e){t=r;break}}t<0&&(t=391)}return Qr[t]=e,t}function Jk(e){for(var t=0;t!=392;++t)e[t]!==void 0&&gh(e[t],t)}function n1(){Qr=INe()}var JNe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Rte=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function ZNe(e){var t=typeof e=="number"?Qr[e]:e;return t=t.replace(Rte,"(\\d+)"),new RegExp("^"+t+"$")}function eCe(e,t,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(t.match(Rte)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:a=m;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var tCe=function(){var e={};e.version="1.2.0";function t(){for(var C=0,S=new Array(256),j=0;j!=256;++j)C=j,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,S[j]=C;return typeof Int32Array<"u"?new Int32Array(S):S}var r=t();function n(C){var S=0,j=0,L=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)P[L]=C[L];for(L=0;L!=256;++L)for(j=C[L],S=256+L;S<4096;S+=256)j=P[S]=j>>>8^C[j&255];var k=[];for(L=1;L!=16;++L)k[L-1]=typeof Int32Array<"u"?P.subarray(L*256,L*256+256):P.slice(L*256,L*256+256);return k}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],m=a[8],g=a[9],x=a[10],v=a[11],y=a[12],w=a[13],_=a[14];function F(C,S){for(var j=S^-1,L=0,P=C.length;L<P;)j=j>>>8^r[(j^C.charCodeAt(L++))&255];return~j}function B(C,S){for(var j=S^-1,L=C.length-15,P=0;P<L;)j=_[C[P++]^j&255]^w[C[P++]^j>>8&255]^y[C[P++]^j>>16&255]^v[C[P++]^j>>>24]^x[C[P++]]^g[C[P++]]^m[C[P++]]^h[C[P++]]^f[C[P++]]^d[C[P++]]^u[C[P++]]^c[C[P++]]^l[C[P++]]^o[C[P++]]^s[C[P++]]^r[C[P++]];for(L+=15;P<L;)j=j>>>8^r[(j^C[P++])&255];return~j}function T(C,S){for(var j=S^-1,L=0,P=C.length,k=0,U=0;L<P;)k=C.charCodeAt(L++),k<128?j=j>>>8^r[(j^k)&255]:k<2048?(j=j>>>8^r[(j^(192|k>>6&31))&255],j=j>>>8^r[(j^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,U=C.charCodeAt(L++)&1023,j=j>>>8^r[(j^(240|k>>8&7))&255],j=j>>>8^r[(j^(128|k>>2&63))&255],j=j>>>8^r[(j^(128|U>>6&15|(k&3)<<4))&255],j=j>>>8^r[(j^(128|U&63))&255]):(j=j>>>8^r[(j^(224|k>>12&15))&255],j=j>>>8^r[(j^(128|k>>6&63))&255],j=j>>>8^r[(j^(128|k&63))&255]);return~j}return e.table=r,e.bstr=F,e.buf=B,e.str=T,e}(),jr=function(){var t={};t.version="1.2.1";function r(pe,Fe){for(var Se=pe.split("/"),ke=Fe.split("/"),Te=0,Oe=0,et=Math.min(Se.length,ke.length);Te<et;++Te){if(Oe=Se[Te].length-ke[Te].length)return Oe;if(Se[Te]!=ke[Te])return Se[Te]<ke[Te]?-1:1}return Se.length-ke.length}function n(pe){if(pe.charAt(pe.length-1)=="/")return pe.slice(0,-1).indexOf("/")===-1?pe:n(pe.slice(0,-1));var Fe=pe.lastIndexOf("/");return Fe===-1?pe:pe.slice(0,Fe+1)}function a(pe){if(pe.charAt(pe.length-1)=="/")return a(pe.slice(0,-1));var Fe=pe.lastIndexOf("/");return Fe===-1?pe:pe.slice(Fe+1)}function s(pe,Fe){typeof Fe=="string"&&(Fe=new Date(Fe));var Se=Fe.getHours();Se=Se<<6|Fe.getMinutes(),Se=Se<<5|Fe.getSeconds()>>>1,pe.write_shift(2,Se);var ke=Fe.getFullYear()-1980;ke=ke<<4|Fe.getMonth()+1,ke=ke<<5|Fe.getDate(),pe.write_shift(2,ke)}function o(pe){var Fe=pe.read_shift(2)&65535,Se=pe.read_shift(2)&65535,ke=new Date,Te=Se&31;Se>>>=5;var Oe=Se&15;Se>>>=4,ke.setMilliseconds(0),ke.setFullYear(Se+1980),ke.setMonth(Oe-1),ke.setDate(Te);var et=Fe&31;Fe>>>=5;var ft=Fe&63;return Fe>>>=6,ke.setHours(Fe),ke.setMinutes(ft),ke.setSeconds(et<<1),ke}function l(pe){wo(pe,0);for(var Fe={},Se=0;pe.l<=pe.length-4;){var ke=pe.read_shift(2),Te=pe.read_shift(2),Oe=pe.l+Te,et={};switch(ke){case 21589:Se=pe.read_shift(1),Se&1&&(et.mtime=pe.read_shift(4)),Te>5&&(Se&2&&(et.atime=pe.read_shift(4)),Se&4&&(et.ctime=pe.read_shift(4))),et.mtime&&(et.mt=new Date(et.mtime*1e3));break}pe.l=Oe,Fe[ke]=et}return Fe}var c;function u(){return c||(c={})}function d(pe,Fe){if(pe[0]==80&&pe[1]==75)return pn(pe,Fe);if((pe[0]|32)==109&&(pe[1]|32)==105)return Nt(pe,Fe);if(pe.length<512)throw new Error("CFB file size "+pe.length+" < 512");var Se=3,ke=512,Te=0,Oe=0,et=0,ft=0,qe=0,at=[],lt=pe.slice(0,512);wo(lt,0);var Dt=f(lt);switch(Se=Dt[0],Se){case 3:ke=512;break;case 4:ke=4096;break;case 0:if(Dt[1]==0)return pn(pe,Fe);default:throw new Error("Major Version: Expected 3 or 4 saw "+Se)}ke!==512&&(lt=pe.slice(0,ke),wo(lt,28));var $t=pe.slice(0,ke);h(lt,Se);var Zt=lt.read_shift(4,"i");if(Se===3&&Zt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Zt);lt.l+=4,et=lt.read_shift(4,"i"),lt.l+=4,lt.chk("00100000","Mini Stream Cutoff Size: "),ft=lt.read_shift(4,"i"),Te=lt.read_shift(4,"i"),qe=lt.read_shift(4,"i"),Oe=lt.read_shift(4,"i");for(var zt=-1,Kt=0;Kt<109&&(zt=lt.read_shift(4,"i"),!(zt<0));++Kt)at[Kt]=zt;var Tr=m(pe,ke);v(qe,Oe,Tr,ke,at);var on=w(Tr,et,at,ke);on[et].name="!Directory",Te>0&&ft!==U&&(on[ft].name="!MiniFAT"),on[at[0]].name="!FAT",on.fat_addrs=at,on.ssz=ke;var ln={},An=[],gs=[],So=[];_(et,on,Tr,An,Te,ln,gs,ft),g(gs,So,An),An.shift();var xs={FileIndex:gs,FullPaths:So};return Fe&&Fe.raw&&(xs.raw={header:$t,sectors:Tr}),xs}function f(pe){if(pe[pe.l]==80&&pe[pe.l+1]==75)return[0,0];pe.chk(Q,"Header Signature: "),pe.l+=16;var Fe=pe.read_shift(2,"u");return[pe.read_shift(2,"u"),Fe]}function h(pe,Fe){var Se=9;switch(pe.l+=2,Se=pe.read_shift(2)){case 9:if(Fe!=3)throw new Error("Sector Shift: Expected 9 saw "+Se);break;case 12:if(Fe!=4)throw new Error("Sector Shift: Expected 12 saw "+Se);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Se)}pe.chk("0600","Mini Sector Shift: "),pe.chk("000000000000","Reserved: ")}function m(pe,Fe){for(var Se=Math.ceil(pe.length/Fe)-1,ke=[],Te=1;Te<Se;++Te)ke[Te-1]=pe.slice(Te*Fe,(Te+1)*Fe);return ke[Se-1]=pe.slice(Se*Fe),ke}function g(pe,Fe,Se){for(var ke=0,Te=0,Oe=0,et=0,ft=0,qe=Se.length,at=[],lt=[];ke<qe;++ke)at[ke]=lt[ke]=ke,Fe[ke]=Se[ke];for(;ft<lt.length;++ft)ke=lt[ft],Te=pe[ke].L,Oe=pe[ke].R,et=pe[ke].C,at[ke]===ke&&(Te!==-1&&at[Te]!==Te&&(at[ke]=at[Te]),Oe!==-1&&at[Oe]!==Oe&&(at[ke]=at[Oe])),et!==-1&&(at[et]=ke),Te!==-1&&ke!=at[ke]&&(at[Te]=at[ke],lt.lastIndexOf(Te)<ft&&lt.push(Te)),Oe!==-1&&ke!=at[ke]&&(at[Oe]=at[ke],lt.lastIndexOf(Oe)<ft&&lt.push(Oe));for(ke=1;ke<qe;++ke)at[ke]===ke&&(Oe!==-1&&at[Oe]!==Oe?at[ke]=at[Oe]:Te!==-1&&at[Te]!==Te&&(at[ke]=at[Te]));for(ke=1;ke<qe;++ke)if(pe[ke].type!==0){if(ft=ke,ft!=at[ft])do ft=at[ft],Fe[ke]=Fe[ft]+"/"+Fe[ke];while(ft!==0&&at[ft]!==-1&&ft!=at[ft]);at[ke]=-1}for(Fe[0]+="/",ke=1;ke<qe;++ke)pe[ke].type!==2&&(Fe[ke]+="/")}function x(pe,Fe,Se){for(var ke=pe.start,Te=pe.size,Oe=[],et=ke;Se&&Te>0&&et>=0;)Oe.push(Fe.slice(et*k,et*k+k)),Te-=k,et=Qp(Se,et*4);return Oe.length===0?_t(0):Zi(Oe).slice(0,pe.size)}function v(pe,Fe,Se,ke,Te){var Oe=U;if(pe===U){if(Fe!==0)throw new Error("DIFAT chain shorter than expected")}else if(pe!==-1){var et=Se[pe],ft=(ke>>>2)-1;if(!et)return;for(var qe=0;qe<ft&&(Oe=Qp(et,qe*4))!==U;++qe)Te.push(Oe);v(Qp(et,ke-4),Fe-1,Se,ke,Te)}}function y(pe,Fe,Se,ke,Te){var Oe=[],et=[];Te||(Te=[]);var ft=ke-1,qe=0,at=0;for(qe=Fe;qe>=0;){Te[qe]=!0,Oe[Oe.length]=qe,et.push(pe[qe]);var lt=Se[Math.floor(qe*4/ke)];if(at=qe*4&ft,ke<4+at)throw new Error("FAT boundary crossed: "+qe+" 4 "+ke);if(!pe[lt])break;qe=Qp(pe[lt],at)}return{nodes:Oe,data:eV([et])}}function w(pe,Fe,Se,ke){var Te=pe.length,Oe=[],et=[],ft=[],qe=[],at=ke-1,lt=0,Dt=0,$t=0,Zt=0;for(lt=0;lt<Te;++lt)if(ft=[],$t=lt+Fe,$t>=Te&&($t-=Te),!et[$t]){qe=[];var zt=[];for(Dt=$t;Dt>=0;){zt[Dt]=!0,et[Dt]=!0,ft[ft.length]=Dt,qe.push(pe[Dt]);var Kt=Se[Math.floor(Dt*4/ke)];if(Zt=Dt*4&at,ke<4+Zt)throw new Error("FAT boundary crossed: "+Dt+" 4 "+ke);if(!pe[Kt]||(Dt=Qp(pe[Kt],Zt),zt[Dt]))break}Oe[$t]={nodes:ft,data:eV([qe])}}return Oe}function _(pe,Fe,Se,ke,Te,Oe,et,ft){for(var qe=0,at=ke.length?2:0,lt=Fe[pe].data,Dt=0,$t=0,Zt;Dt<lt.length;Dt+=128){var zt=lt.slice(Dt,Dt+128);wo(zt,64),$t=zt.read_shift(2),Zt=SR(zt,0,$t-at),ke.push(Zt);var Kt={name:Zt,type:zt.read_shift(1),color:zt.read_shift(1),L:zt.read_shift(4,"i"),R:zt.read_shift(4,"i"),C:zt.read_shift(4,"i"),clsid:zt.read_shift(16),state:zt.read_shift(4,"i"),start:0,size:0},Tr=zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2);Tr!==0&&(Kt.ct=F(zt,zt.l-8));var on=zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2);on!==0&&(Kt.mt=F(zt,zt.l-8)),Kt.start=zt.read_shift(4,"i"),Kt.size=zt.read_shift(4,"i"),Kt.size<0&&Kt.start<0&&(Kt.size=Kt.type=0,Kt.start=U,Kt.name=""),Kt.type===5?(qe=Kt.start,Te>0&&qe!==U&&(Fe[qe].name="!StreamData")):Kt.size>=4096?(Kt.storage="fat",Fe[Kt.start]===void 0&&(Fe[Kt.start]=y(Se,Kt.start,Fe.fat_addrs,Fe.ssz)),Fe[Kt.start].name=Kt.name,Kt.content=Fe[Kt.start].data.slice(0,Kt.size)):(Kt.storage="minifat",Kt.size<0?Kt.size=0:qe!==U&&Kt.start!==U&&Fe[qe]&&(Kt.content=x(Kt,Fe[qe].data,(Fe[ft]||{}).data))),Kt.content&&wo(Kt.content,0),Oe[Zt]=Kt,et.push(Kt)}}function F(pe,Fe){return new Date((Mc(pe,Fe+4)/1e7*Math.pow(2,32)+Mc(pe,Fe)/1e7-11644473600)*1e3)}function B(pe,Fe){return u(),d(c.readFileSync(pe),Fe)}function T(pe,Fe){var Se=Fe&&Fe.type;switch(Se||vn&&Buffer.isBuffer(pe)&&(Se="buffer"),Se||"base64"){case"file":return B(pe,Fe);case"base64":return d(Hc(Jc(pe)),Fe);case"binary":return d(Hc(pe),Fe)}return d(pe,Fe)}function C(pe,Fe){var Se=Fe||{},ke=Se.root||"Root Entry";if(pe.FullPaths||(pe.FullPaths=[]),pe.FileIndex||(pe.FileIndex=[]),pe.FullPaths.length!==pe.FileIndex.length)throw new Error("inconsistent CFB structure");pe.FullPaths.length===0&&(pe.FullPaths[0]=ke+"/",pe.FileIndex[0]={name:ke,type:5}),Se.CLSID&&(pe.FileIndex[0].clsid=Se.CLSID),S(pe)}function S(pe){var Fe="Sh33tJ5";if(!jr.find(pe,"/"+Fe)){var Se=_t(4);Se[0]=55,Se[1]=Se[3]=50,Se[2]=54,pe.FileIndex.push({name:Fe,type:2,content:Se,size:4,L:69,R:69,C:69}),pe.FullPaths.push(pe.FullPaths[0]+Fe),j(pe)}}function j(pe,Fe){C(pe);for(var Se=!1,ke=!1,Te=pe.FullPaths.length-1;Te>=0;--Te){var Oe=pe.FileIndex[Te];switch(Oe.type){case 0:ke?Se=!0:(pe.FileIndex.pop(),pe.FullPaths.pop());break;case 1:case 2:case 5:ke=!0,isNaN(Oe.R*Oe.L*Oe.C)&&(Se=!0),Oe.R>-1&&Oe.L>-1&&Oe.R==Oe.L&&(Se=!0);break;default:Se=!0;break}}if(!(!Se&&!Fe)){var et=new Date(1987,1,19),ft=0,qe=Object.create?Object.create(null):{},at=[];for(Te=0;Te<pe.FullPaths.length;++Te)qe[pe.FullPaths[Te]]=!0,pe.FileIndex[Te].type!==0&&at.push([pe.FullPaths[Te],pe.FileIndex[Te]]);for(Te=0;Te<at.length;++Te){var lt=n(at[Te][0]);ke=qe[lt],ke||(at.push([lt,{name:a(lt).replace("/",""),type:1,clsid:H,ct:et,mt:et,content:null}]),qe[lt]=!0)}for(at.sort(function(Zt,zt){return r(Zt[0],zt[0])}),pe.FullPaths=[],pe.FileIndex=[],Te=0;Te<at.length;++Te)pe.FullPaths[Te]=at[Te][0],pe.FileIndex[Te]=at[Te][1];for(Te=0;Te<at.length;++Te){var Dt=pe.FileIndex[Te],$t=pe.FullPaths[Te];if(Dt.name=a($t).replace("/",""),Dt.L=Dt.R=Dt.C=-(Dt.color=1),Dt.size=Dt.content?Dt.content.length:0,Dt.start=0,Dt.clsid=Dt.clsid||H,Te===0)Dt.C=at.length>1?1:-1,Dt.size=0,Dt.type=5;else if($t.slice(-1)=="/"){for(ft=Te+1;ft<at.length&&n(pe.FullPaths[ft])!=$t;++ft);for(Dt.C=ft>=at.length?-1:ft,ft=Te+1;ft<at.length&&n(pe.FullPaths[ft])!=n($t);++ft);Dt.R=ft>=at.length?-1:ft,Dt.type=1}else n(pe.FullPaths[Te+1]||"")==n($t)&&(Dt.R=Te+1),Dt.type=2}}}function L(pe,Fe){var Se=Fe||{};if(Se.fileType=="mad")return yt(pe,Se);switch(j(pe),Se.fileType){case"zip":return Ta(pe,Se)}var ke=function(Zt){for(var zt=0,Kt=0,Tr=0;Tr<Zt.FileIndex.length;++Tr){var on=Zt.FileIndex[Tr];if(on.content){var ln=on.content.length;ln>0&&(ln<4096?zt+=ln+63>>6:Kt+=ln+511>>9)}}for(var An=Zt.FullPaths.length+3>>2,gs=zt+7>>3,So=zt+127>>7,xs=gs+Kt+An+So,ni=xs+127>>7,Ls=ni<=109?0:Math.ceil((ni-109)/127);xs+ni+Ls+127>>7>ni;)Ls=++ni<=109?0:Math.ceil((ni-109)/127);var wi=[1,Ls,ni,So,An,Kt,zt,0];return Zt.FileIndex[0].size=zt<<6,wi[7]=(Zt.FileIndex[0].start=wi[0]+wi[1]+wi[2]+wi[3]+wi[4]+wi[5])+(wi[6]+7>>3),wi}(pe),Te=_t(ke[7]<<9),Oe=0,et=0;{for(Oe=0;Oe<8;++Oe)Te.write_shift(1,K[Oe]);for(Oe=0;Oe<8;++Oe)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),Oe=0;Oe<3;++Oe)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,ke[2]),Te.write_shift(4,ke[0]+ke[1]+ke[2]+ke[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,ke[3]?ke[0]+ke[1]+ke[2]-1:U),Te.write_shift(4,ke[3]),Te.write_shift(-4,ke[1]?ke[0]-1:U),Te.write_shift(4,ke[1]),Oe=0;Oe<109;++Oe)Te.write_shift(-4,Oe<ke[2]?ke[1]+Oe:-1)}if(ke[1])for(et=0;et<ke[1];++et){for(;Oe<236+et*127;++Oe)Te.write_shift(-4,Oe<ke[2]?ke[1]+Oe:-1);Te.write_shift(-4,et===ke[1]-1?U:et+1)}var ft=function(Zt){for(et+=Zt;Oe<et-1;++Oe)Te.write_shift(-4,Oe+1);Zt&&(++Oe,Te.write_shift(-4,U))};for(et=Oe=0,et+=ke[1];Oe<et;++Oe)Te.write_shift(-4,q.DIFSECT);for(et+=ke[2];Oe<et;++Oe)Te.write_shift(-4,q.FATSECT);ft(ke[3]),ft(ke[4]);for(var qe=0,at=0,lt=pe.FileIndex[0];qe<pe.FileIndex.length;++qe)lt=pe.FileIndex[qe],lt.content&&(at=lt.content.length,!(at<4096)&&(lt.start=et,ft(at+511>>9)));for(ft(ke[6]+7>>3);Te.l&511;)Te.write_shift(-4,q.ENDOFCHAIN);for(et=Oe=0,qe=0;qe<pe.FileIndex.length;++qe)lt=pe.FileIndex[qe],lt.content&&(at=lt.content.length,!(!at||at>=4096)&&(lt.start=et,ft(at+63>>6)));for(;Te.l&511;)Te.write_shift(-4,q.ENDOFCHAIN);for(Oe=0;Oe<ke[4]<<2;++Oe){var Dt=pe.FullPaths[Oe];if(!Dt||Dt.length===0){for(qe=0;qe<17;++qe)Te.write_shift(4,0);for(qe=0;qe<3;++qe)Te.write_shift(4,-1);for(qe=0;qe<12;++qe)Te.write_shift(4,0);continue}lt=pe.FileIndex[Oe],Oe===0&&(lt.start=lt.size?lt.start-1:U);var $t=Oe===0&&Se.root||lt.name;if(at=2*($t.length+1),Te.write_shift(64,$t,"utf16le"),Te.write_shift(2,at),Te.write_shift(1,lt.type),Te.write_shift(1,lt.color),Te.write_shift(-4,lt.L),Te.write_shift(-4,lt.R),Te.write_shift(-4,lt.C),lt.clsid)Te.write_shift(16,lt.clsid,"hex");else for(qe=0;qe<4;++qe)Te.write_shift(4,0);Te.write_shift(4,lt.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,lt.start),Te.write_shift(4,lt.size),Te.write_shift(4,0)}for(Oe=1;Oe<pe.FileIndex.length;++Oe)if(lt=pe.FileIndex[Oe],lt.size>=4096)if(Te.l=lt.start+1<<9,vn&&Buffer.isBuffer(lt.content))lt.content.copy(Te,Te.l,0,lt.size),Te.l+=lt.size+511&-512;else{for(qe=0;qe<lt.size;++qe)Te.write_shift(1,lt.content[qe]);for(;qe&511;++qe)Te.write_shift(1,0)}for(Oe=1;Oe<pe.FileIndex.length;++Oe)if(lt=pe.FileIndex[Oe],lt.size>0&&lt.size<4096)if(vn&&Buffer.isBuffer(lt.content))lt.content.copy(Te,Te.l,0,lt.size),Te.l+=lt.size+63&-64;else{for(qe=0;qe<lt.size;++qe)Te.write_shift(1,lt.content[qe]);for(;qe&63;++qe)Te.write_shift(1,0)}if(vn)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function P(pe,Fe){var Se=pe.FullPaths.map(function(qe){return qe.toUpperCase()}),ke=Se.map(function(qe){var at=qe.split("/");return at[at.length-(qe.slice(-1)=="/"?2:1)]}),Te=!1;Fe.charCodeAt(0)===47?(Te=!0,Fe=Se[0].slice(0,-1)+Fe):Te=Fe.indexOf("/")!==-1;var Oe=Fe.toUpperCase(),et=Te===!0?Se.indexOf(Oe):ke.indexOf(Oe);if(et!==-1)return pe.FileIndex[et];var ft=!Oe.match(Xy);for(Oe=Oe.replace(kl,""),ft&&(Oe=Oe.replace(Xy,"!")),et=0;et<Se.length;++et)if((ft?Se[et].replace(Xy,"!"):Se[et]).replace(kl,"")==Oe||(ft?ke[et].replace(Xy,"!"):ke[et]).replace(kl,"")==Oe)return pe.FileIndex[et];return null}var k=64,U=-2,Q="d0cf11e0a1b11ae1",K=[208,207,17,224,161,177,26,225],H="00000000000000000000000000000000",q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:Q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:H,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function z(pe,Fe,Se){u();var ke=L(pe,Se);c.writeFileSync(Fe,ke)}function W(pe){for(var Fe=new Array(pe.length),Se=0;Se<pe.length;++Se)Fe[Se]=String.fromCharCode(pe[Se]);return Fe.join("")}function ee(pe,Fe){var Se=L(pe,Fe);switch(Fe&&Fe.type||"buffer"){case"file":return u(),c.writeFileSync(Fe.filename,Se),Se;case"binary":return typeof Se=="string"?Se:W(Se);case"base64":return i2(typeof Se=="string"?Se:W(Se));case"buffer":if(vn)return Buffer.isBuffer(Se)?Se:zh(Se);case"array":return typeof Se=="string"?Hc(Se):Se}return Se}var X;function O(pe){try{var Fe=pe.InflateRaw,Se=new Fe;if(Se._processChunk(new Uint8Array([3,0]),Se._finishFlushFlag),Se.bytesRead)X=pe;else throw new Error("zlib does not expose bytesRead")}catch(ke){console.error("cannot use native zlib: "+(ke.message||ke))}}function R(pe,Fe){if(!X)return Lr(pe,Fe);var Se=X.InflateRaw,ke=new Se,Te=ke._processChunk(pe.slice(pe.l),ke._finishFlushFlag);return pe.l+=ke.bytesRead,Te}function G(pe){return X?X.deflateRawSync(pe):Lt(pe)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function oe(pe){var Fe=(pe<<1|pe<<11)&139536|(pe<<5|pe<<15)&558144;return(Fe>>16|Fe>>8|Fe)&255}for(var ie=typeof Uint8Array<"u",ue=ie?new Uint8Array(256):[],Ce=0;Ce<256;++Ce)ue[Ce]=oe(Ce);function ne(pe,Fe){var Se=ue[pe&255];return Fe<=8?Se>>>8-Fe:(Se=Se<<8|ue[pe>>8&255],Fe<=16?Se>>>16-Fe:(Se=Se<<8|ue[pe>>16&255],Se>>>24-Fe))}function Be(pe,Fe){var Se=Fe&7,ke=Fe>>>3;return(pe[ke]|(Se<=6?0:pe[ke+1]<<8))>>>Se&3}function je(pe,Fe){var Se=Fe&7,ke=Fe>>>3;return(pe[ke]|(Se<=5?0:pe[ke+1]<<8))>>>Se&7}function _e(pe,Fe){var Se=Fe&7,ke=Fe>>>3;return(pe[ke]|(Se<=4?0:pe[ke+1]<<8))>>>Se&15}function Ae(pe,Fe){var Se=Fe&7,ke=Fe>>>3;return(pe[ke]|(Se<=3?0:pe[ke+1]<<8))>>>Se&31}function ve(pe,Fe){var Se=Fe&7,ke=Fe>>>3;return(pe[ke]|(Se<=1?0:pe[ke+1]<<8))>>>Se&127}function Pe(pe,Fe,Se){var ke=Fe&7,Te=Fe>>>3,Oe=(1<<Se)-1,et=pe[Te]>>>ke;return Se<8-ke||(et|=pe[Te+1]<<8-ke,Se<16-ke)||(et|=pe[Te+2]<<16-ke,Se<24-ke)||(et|=pe[Te+3]<<24-ke),et&Oe}function Ue(pe,Fe,Se){var ke=Fe&7,Te=Fe>>>3;return ke<=5?pe[Te]|=(Se&7)<<ke:(pe[Te]|=Se<<ke&255,pe[Te+1]=(Se&7)>>8-ke),Fe+3}function de(pe,Fe,Se){var ke=Fe&7,Te=Fe>>>3;return Se=(Se&1)<<ke,pe[Te]|=Se,Fe+1}function be(pe,Fe,Se){var ke=Fe&7,Te=Fe>>>3;return Se<<=ke,pe[Te]|=Se&255,Se>>>=8,pe[Te+1]=Se,Fe+8}function De(pe,Fe,Se){var ke=Fe&7,Te=Fe>>>3;return Se<<=ke,pe[Te]|=Se&255,Se>>>=8,pe[Te+1]=Se&255,pe[Te+2]=Se>>>8,Fe+16}function Ve(pe,Fe){var Se=pe.length,ke=2*Se>Fe?2*Se:Fe+5,Te=0;if(Se>=Fe)return pe;if(vn){var Oe=DH(ke);if(pe.copy)pe.copy(Oe);else for(;Te<pe.length;++Te)Oe[Te]=pe[Te];return Oe}else if(ie){var et=new Uint8Array(ke);if(et.set)et.set(pe);else for(;Te<Se;++Te)et[Te]=pe[Te];return et}return pe.length=ke,pe}function We(pe){for(var Fe=new Array(pe),Se=0;Se<pe;++Se)Fe[Se]=0;return Fe}function Je(pe,Fe,Se){var ke=1,Te=0,Oe=0,et=0,ft=0,qe=pe.length,at=ie?new Uint16Array(32):We(32);for(Oe=0;Oe<32;++Oe)at[Oe]=0;for(Oe=qe;Oe<Se;++Oe)pe[Oe]=0;qe=pe.length;var lt=ie?new Uint16Array(qe):We(qe);for(Oe=0;Oe<qe;++Oe)at[Te=pe[Oe]]++,ke<Te&&(ke=Te),lt[Oe]=0;for(at[0]=0,Oe=1;Oe<=ke;++Oe)at[Oe+16]=ft=ft+at[Oe-1]<<1;for(Oe=0;Oe<qe;++Oe)ft=pe[Oe],ft!=0&&(lt[Oe]=at[ft+16]++);var Dt=0;for(Oe=0;Oe<qe;++Oe)if(Dt=pe[Oe],Dt!=0)for(ft=ne(lt[Oe],ke)>>ke-Dt,et=(1<<ke+4-Dt)-1;et>=0;--et)Fe[ft|et<<Dt]=Dt&15|Oe<<4;return ke}var At=ie?new Uint16Array(512):We(512),vt=ie?new Uint16Array(32):We(32);if(!ie){for(var wt=0;wt<512;++wt)At[wt]=0;for(wt=0;wt<32;++wt)vt[wt]=0}(function(){for(var pe=[],Fe=0;Fe<32;Fe++)pe.push(5);Je(pe,vt,32);var Se=[];for(Fe=0;Fe<=143;Fe++)Se.push(8);for(;Fe<=255;Fe++)Se.push(9);for(;Fe<=279;Fe++)Se.push(7);for(;Fe<=287;Fe++)Se.push(8);Je(Se,At,288)})();var Tt=function(){for(var Fe=ie?new Uint8Array(32768):[],Se=0,ke=0;Se<ae.length-1;++Se)for(;ke<ae[Se+1];++ke)Fe[ke]=Se;for(;ke<32768;++ke)Fe[ke]=29;var Te=ie?new Uint8Array(259):[];for(Se=0,ke=0;Se<te.length-1;++Se)for(;ke<te[Se+1];++ke)Te[ke]=Se;function Oe(ft,qe){for(var at=0;at<ft.length;){var lt=Math.min(65535,ft.length-at),Dt=at+lt==ft.length;for(qe.write_shift(1,+Dt),qe.write_shift(2,lt),qe.write_shift(2,~lt&65535);lt-- >0;)qe[qe.l++]=ft[at++]}return qe.l}function et(ft,qe){for(var at=0,lt=0,Dt=ie?new Uint16Array(32768):[];lt<ft.length;){var $t=Math.min(65535,ft.length-lt);if($t<10){for(at=Ue(qe,at,+(lt+$t==ft.length)),at&7&&(at+=8-(at&7)),qe.l=at/8|0,qe.write_shift(2,$t),qe.write_shift(2,~$t&65535);$t-- >0;)qe[qe.l++]=ft[lt++];at=qe.l*8;continue}at=Ue(qe,at,+(lt+$t==ft.length)+2);for(var Zt=0;$t-- >0;){var zt=ft[lt];Zt=(Zt<<5^zt)&32767;var Kt=-1,Tr=0;if((Kt=Dt[Zt])&&(Kt|=lt&-32768,Kt>lt&&(Kt-=32768),Kt<lt))for(;ft[Kt+Tr]==ft[lt+Tr]&&Tr<250;)++Tr;if(Tr>2){zt=Te[Tr],zt<=22?at=be(qe,at,ue[zt+1]>>1)-1:(be(qe,at,3),at+=5,be(qe,at,ue[zt-23]>>5),at+=3);var on=zt<8?0:zt-4>>2;on>0&&(De(qe,at,Tr-te[zt]),at+=on),zt=Fe[lt-Kt],at=be(qe,at,ue[zt]>>3),at-=3;var ln=zt<4?0:zt-2>>1;ln>0&&(De(qe,at,lt-Kt-ae[zt]),at+=ln);for(var An=0;An<Tr;++An)Dt[Zt]=lt&32767,Zt=(Zt<<5^ft[lt])&32767,++lt;$t-=Tr-1}else zt<=143?zt=zt+48:at=de(qe,at,1),at=be(qe,at,ue[zt]),Dt[Zt]=lt&32767,++lt}at=be(qe,at,0)-1}return qe.l=(at+7)/8|0,qe.l}return function(qe,at){return qe.length<8?Oe(qe,at):et(qe,at)}}();function Lt(pe){var Fe=_t(50+Math.floor(pe.length*1.1)),Se=Tt(pe,Fe);return Fe.slice(0,Se)}var Et=ie?new Uint16Array(32768):We(32768),_r=ie?new Uint16Array(32768):We(32768),qt=ie?new Uint16Array(128):We(128),tn=1,Br=1;function Kr(pe,Fe){var Se=Ae(pe,Fe)+257;Fe+=5;var ke=Ae(pe,Fe)+1;Fe+=5;var Te=_e(pe,Fe)+4;Fe+=4;for(var Oe=0,et=ie?new Uint8Array(19):We(19),ft=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],qe=1,at=ie?new Uint8Array(8):We(8),lt=ie?new Uint8Array(8):We(8),Dt=et.length,$t=0;$t<Te;++$t)et[Y[$t]]=Oe=je(pe,Fe),qe<Oe&&(qe=Oe),at[Oe]++,Fe+=3;var Zt=0;for(at[0]=0,$t=1;$t<=qe;++$t)lt[$t]=Zt=Zt+at[$t-1]<<1;for($t=0;$t<Dt;++$t)(Zt=et[$t])!=0&&(ft[$t]=lt[Zt]++);var zt=0;for($t=0;$t<Dt;++$t)if(zt=et[$t],zt!=0){Zt=ue[ft[$t]]>>8-zt;for(var Kt=(1<<7-zt)-1;Kt>=0;--Kt)qt[Zt|Kt<<zt]=zt&7|$t<<3}var Tr=[];for(qe=1;Tr.length<Se+ke;)switch(Zt=qt[ve(pe,Fe)],Fe+=Zt&7,Zt>>>=3){case 16:for(Oe=3+Be(pe,Fe),Fe+=2,Zt=Tr[Tr.length-1];Oe-- >0;)Tr.push(Zt);break;case 17:for(Oe=3+je(pe,Fe),Fe+=3;Oe-- >0;)Tr.push(0);break;case 18:for(Oe=11+ve(pe,Fe),Fe+=7;Oe-- >0;)Tr.push(0);break;default:Tr.push(Zt),qe<Zt&&(qe=Zt);break}var on=Tr.slice(0,Se),ln=Tr.slice(Se);for($t=Se;$t<286;++$t)on[$t]=0;for($t=ke;$t<30;++$t)ln[$t]=0;return tn=Je(on,Et,286),Br=Je(ln,_r,30),Fe}function Fn(pe,Fe){if(pe[0]==3&&!(pe[1]&3))return[Om(Fe),2];for(var Se=0,ke=0,Te=DH(Fe||1<<18),Oe=0,et=Te.length>>>0,ft=0,qe=0;(ke&1)==0;){if(ke=je(pe,Se),Se+=3,ke>>>1)ke>>1==1?(ft=9,qe=5):(Se=Kr(pe,Se),ft=tn,qe=Br);else{Se&7&&(Se+=8-(Se&7));var at=pe[Se>>>3]|pe[(Se>>>3)+1]<<8;if(Se+=32,at>0)for(!Fe&&et<Oe+at&&(Te=Ve(Te,Oe+at),et=Te.length);at-- >0;)Te[Oe++]=pe[Se>>>3],Se+=8;continue}for(;;){!Fe&&et<Oe+32767&&(Te=Ve(Te,Oe+32767),et=Te.length);var lt=Pe(pe,Se,ft),Dt=ke>>>1==1?At[lt]:Et[lt];if(Se+=Dt&15,Dt>>>=4,(Dt>>>8&255)===0)Te[Oe++]=Dt;else{if(Dt==256)break;Dt-=257;var $t=Dt<8?0:Dt-4>>2;$t>5&&($t=0);var Zt=Oe+te[Dt];$t>0&&(Zt+=Pe(pe,Se,$t),Se+=$t),lt=Pe(pe,Se,qe),Dt=ke>>>1==1?vt[lt]:_r[lt],Se+=Dt&15,Dt>>>=4;var zt=Dt<4?0:Dt-2>>1,Kt=ae[Dt];for(zt>0&&(Kt+=Pe(pe,Se,zt),Se+=zt),!Fe&&et<Zt&&(Te=Ve(Te,Zt+100),et=Te.length);Oe<Zt;)Te[Oe]=Te[Oe-Kt],++Oe}}}return Fe?[Te,Se+7>>>3]:[Te.slice(0,Oe),Se+7>>>3]}function Lr(pe,Fe){var Se=pe.slice(pe.l||0),ke=Fn(Se,Fe);return pe.l+=ke[1],ke[0]}function ps(pe,Fe){if(pe)typeof console<"u"&&console.error(Fe);else throw new Error(Fe)}function pn(pe,Fe){var Se=pe;wo(Se,0);var ke=[],Te=[],Oe={FileIndex:ke,FullPaths:Te};C(Oe,{root:Fe.root});for(var et=Se.length-4;(Se[et]!=80||Se[et+1]!=75||Se[et+2]!=5||Se[et+3]!=6)&&et>=0;)--et;Se.l=et+4,Se.l+=4;var ft=Se.read_shift(2);Se.l+=6;var qe=Se.read_shift(4);for(Se.l=qe,et=0;et<ft;++et){Se.l+=20;var at=Se.read_shift(4),lt=Se.read_shift(4),Dt=Se.read_shift(2),$t=Se.read_shift(2),Zt=Se.read_shift(2);Se.l+=8;var zt=Se.read_shift(4),Kt=l(Se.slice(Se.l+Dt,Se.l+Dt+$t));Se.l+=Dt+$t+Zt;var Tr=Se.l;Se.l=zt+4,la(Se,at,lt,Oe,Kt),Se.l=Tr}return Oe}function la(pe,Fe,Se,ke,Te){pe.l+=2;var Oe=pe.read_shift(2),et=pe.read_shift(2),ft=o(pe);if(Oe&8257)throw new Error("Unsupported ZIP encryption");for(var qe=pe.read_shift(4),at=pe.read_shift(4),lt=pe.read_shift(4),Dt=pe.read_shift(2),$t=pe.read_shift(2),Zt="",zt=0;zt<Dt;++zt)Zt+=String.fromCharCode(pe[pe.l++]);if($t){var Kt=l(pe.slice(pe.l,pe.l+$t));(Kt[21589]||{}).mt&&(ft=Kt[21589].mt),((Te||{})[21589]||{}).mt&&(ft=Te[21589].mt)}pe.l+=$t;var Tr=pe.slice(pe.l,pe.l+at);switch(et){case 8:Tr=R(pe,lt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+et)}var on=!1;Oe&8&&(qe=pe.read_shift(4),qe==134695760&&(qe=pe.read_shift(4),on=!0),at=pe.read_shift(4),lt=pe.read_shift(4)),at!=Fe&&ps(on,"Bad compressed size: "+Fe+" != "+at),lt!=Se&&ps(on,"Bad uncompressed size: "+Se+" != "+lt),br(ke,Zt,Tr,{unsafe:!0,mt:ft})}function Ta(pe,Fe){var Se=Fe||{},ke=[],Te=[],Oe=_t(1),et=Se.compression?8:0,ft=0,qe=0,at=0,lt=0,Dt=0,$t=pe.FullPaths[0],Zt=$t,zt=pe.FileIndex[0],Kt=[],Tr=0;for(qe=1;qe<pe.FullPaths.length;++qe)if(Zt=pe.FullPaths[qe].slice($t.length),zt=pe.FileIndex[qe],!(!zt.size||!zt.content||Zt=="Sh33tJ5")){var on=lt,ln=_t(Zt.length);for(at=0;at<Zt.length;++at)ln.write_shift(1,Zt.charCodeAt(at)&127);ln=ln.slice(0,ln.l),Kt[Dt]=tCe.buf(zt.content,0);var An=zt.content;et==8&&(An=G(An)),Oe=_t(30),Oe.write_shift(4,67324752),Oe.write_shift(2,20),Oe.write_shift(2,ft),Oe.write_shift(2,et),zt.mt?s(Oe,zt.mt):Oe.write_shift(4,0),Oe.write_shift(-4,Kt[Dt]),Oe.write_shift(4,An.length),Oe.write_shift(4,zt.content.length),Oe.write_shift(2,ln.length),Oe.write_shift(2,0),lt+=Oe.length,ke.push(Oe),lt+=ln.length,ke.push(ln),lt+=An.length,ke.push(An),Oe=_t(46),Oe.write_shift(4,33639248),Oe.write_shift(2,0),Oe.write_shift(2,20),Oe.write_shift(2,ft),Oe.write_shift(2,et),Oe.write_shift(4,0),Oe.write_shift(-4,Kt[Dt]),Oe.write_shift(4,An.length),Oe.write_shift(4,zt.content.length),Oe.write_shift(2,ln.length),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(4,0),Oe.write_shift(4,on),Tr+=Oe.l,Te.push(Oe),Tr+=ln.length,Te.push(ln),++Dt}return Oe=_t(22),Oe.write_shift(4,101010256),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,Dt),Oe.write_shift(2,Dt),Oe.write_shift(4,Tr),Oe.write_shift(4,lt),Oe.write_shift(2,0),Zi([Zi(ke),Zi(Te),Oe])}var an={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function vr(pe,Fe){if(pe.ctype)return pe.ctype;var Se=pe.name||"",ke=Se.match(/\.([^\.]+)$/);return ke&&an[ke[1]]||Fe&&(ke=(Se=Fe).match(/[\.\\]([^\.\\])+$/),ke&&an[ke[1]])?an[ke[1]]:"application/octet-stream"}function rt(pe){for(var Fe=i2(pe),Se=[],ke=0;ke<Fe.length;ke+=76)Se.push(Fe.slice(ke,ke+76));return Se.join(`\r
`)+`\r
`}function gt(pe){var Fe=pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(at){var lt=at.charCodeAt(0).toString(16).toUpperCase();return"="+(lt.length==1?"0"+lt:lt)});Fe=Fe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Fe.charAt(0)==`
`&&(Fe="=0D"+Fe.slice(1)),Fe=Fe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Se=[],ke=Fe.split(`\r
`),Te=0;Te<ke.length;++Te){var Oe=ke[Te];if(Oe.length==0){Se.push("");continue}for(var et=0;et<Oe.length;){var ft=76,qe=Oe.slice(et,et+ft);qe.charAt(ft-1)=="="?ft--:qe.charAt(ft-2)=="="?ft-=2:qe.charAt(ft-3)=="="&&(ft-=3),qe=Oe.slice(et,et+ft),et+=ft,et<Oe.length&&(qe+="="),Se.push(qe)}}return Se.join(`\r
`)}function Ze(pe){for(var Fe=[],Se=0;Se<pe.length;++Se){for(var ke=pe[Se];Se<=pe.length&&ke.charAt(ke.length-1)=="=";)ke=ke.slice(0,ke.length-1)+pe[++Se];Fe.push(ke)}for(var Te=0;Te<Fe.length;++Te)Fe[Te]=Fe[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(Oe){return String.fromCharCode(parseInt(Oe.slice(1),16))});return Hc(Fe.join(`\r
`))}function bt(pe,Fe,Se){for(var ke="",Te="",Oe="",et,ft=0;ft<10;++ft){var qe=Fe[ft];if(!qe||qe.match(/^\s*$/))break;var at=qe.match(/^(.*?):\s*([^\s].*)$/);if(at)switch(at[1].toLowerCase()){case"content-location":ke=at[2].trim();break;case"content-type":Oe=at[2].trim();break;case"content-transfer-encoding":Te=at[2].trim();break}}switch(++ft,Te.toLowerCase()){case"base64":et=Hc(Jc(Fe.slice(ft).join("")));break;case"quoted-printable":et=Ze(Fe.slice(ft));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var lt=br(pe,ke.slice(Se.length),et,{unsafe:!0});Oe&&(lt.ctype=Oe)}function Nt(pe,Fe){if(W(pe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Se=Fe&&Fe.root||"",ke=(vn&&Buffer.isBuffer(pe)?pe.toString("binary"):W(pe)).split(`\r
`),Te=0,Oe="";for(Te=0;Te<ke.length;++Te)if(Oe=ke[Te],!!/^Content-Location:/i.test(Oe)&&(Oe=Oe.slice(Oe.indexOf("file")),Se||(Se=Oe.slice(0,Oe.lastIndexOf("/")+1)),Oe.slice(0,Se.length)!=Se))for(;Se.length>0&&(Se=Se.slice(0,Se.length-1),Se=Se.slice(0,Se.lastIndexOf("/")+1),Oe.slice(0,Se.length)!=Se););var et=(ke[1]||"").match(/boundary="(.*?)"/);if(!et)throw new Error("MAD cannot find boundary");var ft="--"+(et[1]||""),qe=[],at=[],lt={FileIndex:qe,FullPaths:at};C(lt);var Dt,$t=0;for(Te=0;Te<ke.length;++Te){var Zt=ke[Te];Zt!==ft&&Zt!==ft+"--"||($t++&&bt(lt,ke.slice(Dt,Te),Se),Dt=Te)}return lt}function yt(pe,Fe){var Se=Fe||{},ke=Se.boundary||"SheetJS";ke="------="+ke;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ke.slice(2)+'"',"","",""],Oe=pe.FullPaths[0],et=Oe,ft=pe.FileIndex[0],qe=1;qe<pe.FullPaths.length;++qe)if(et=pe.FullPaths[qe].slice(Oe.length),ft=pe.FileIndex[qe],!(!ft.size||!ft.content||et=="Sh33tJ5")){et=et.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Tr){return"_x"+Tr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Tr){return"_u"+Tr.charCodeAt(0).toString(16)+"_"});for(var at=ft.content,lt=vn&&Buffer.isBuffer(at)?at.toString("binary"):W(at),Dt=0,$t=Math.min(1024,lt.length),Zt=0,zt=0;zt<=$t;++zt)(Zt=lt.charCodeAt(zt))>=32&&Zt<128&&++Dt;var Kt=Dt>=$t*4/5;Te.push(ke),Te.push("Content-Location: "+(Se.root||"file:///C:/SheetJS/")+et),Te.push("Content-Transfer-Encoding: "+(Kt?"quoted-printable":"base64")),Te.push("Content-Type: "+vr(ft,et)),Te.push(""),Te.push(Kt?gt(lt):rt(lt))}return Te.push(ke+`--\r
`),Te.join(`\r
`)}function rr(pe){var Fe={};return C(Fe,pe),Fe}function br(pe,Fe,Se,ke){var Te=ke&&ke.unsafe;Te||C(pe);var Oe=!Te&&jr.find(pe,Fe);if(!Oe){var et=pe.FullPaths[0];Fe.slice(0,et.length)==et?et=Fe:(et.slice(-1)!="/"&&(et+="/"),et=(et+Fe).replace("//","/")),Oe={name:a(Fe),type:2},pe.FileIndex.push(Oe),pe.FullPaths.push(et),Te||jr.utils.cfb_gc(pe)}return Oe.content=Se,Oe.size=Se?Se.length:0,ke&&(ke.CLSID&&(Oe.clsid=ke.CLSID),ke.mt&&(Oe.mt=ke.mt),ke.ct&&(Oe.ct=ke.ct)),Oe}function ur(pe,Fe){C(pe);var Se=jr.find(pe,Fe);if(Se){for(var ke=0;ke<pe.FileIndex.length;++ke)if(pe.FileIndex[ke]==Se)return pe.FileIndex.splice(ke,1),pe.FullPaths.splice(ke,1),!0}return!1}function Or(pe,Fe,Se){C(pe);var ke=jr.find(pe,Fe);if(ke){for(var Te=0;Te<pe.FileIndex.length;++Te)if(pe.FileIndex[Te]==ke)return pe.FileIndex[Te].name=a(Se),pe.FullPaths[Te]=Se,!0}return!1}function Yr(pe){j(pe,!0)}return t.find=P,t.read=T,t.parse=d,t.write=ee,t.writeFile=z,t.utils={cfb_new:rr,cfb_add:br,cfb_del:ur,cfb_mov:Or,cfb_gc:Yr,ReadShift:yw,CheckField:sre,prep_blob:wo,bconcat:Zi,use_zlib:O,_deflateRaw:Lt,_inflateRaw:Lr,consts:q},t}();function rCe(e){return typeof e=="string"?Yk(e):Array.isArray(e)?kNe(e):e}function iE(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Yk(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Xf(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([rCe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Xm(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function nCe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ps(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function VH(e,t){for(var r=[],n=Ps(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function Zk(e){for(var t=[],r=Ps(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function e4(e){for(var t=[],r=Ps(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function aCe(e){for(var t=[],r=Ps(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var R_=new Date(1899,11,30,0,0,0);function Fi(e,t){var r=e.getTime(),n=R_.getTime()+(e.getTimezoneOffset()-R_.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var Lte=new Date,sCe=R_.getTime()+(Lte.getTimezoneOffset()-R_.getTimezoneOffset())*6e4,zH=Lte.getTimezoneOffset();function t4(e){var t=new Date;return t.setTime(e*24*60*60*1e3+sCe),t.getTimezoneOffset()!==zH&&t.setTime(t.getTime()+(t.getTimezoneOffset()-zH)*6e4),t}function iCe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var $H=new Date("2017-02-19T19:06:09.000Z"),Mte=isNaN($H.getFullYear())?new Date("2/19/17"):$H,oCe=Mte.getFullYear()==2017;function za(e,t){var r=new Date(e);if(oCe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Mte.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function _g(e,t){if(vn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Xf(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Xf(_te(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Xf(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Xf(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function $a(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=$a(e[r]));return t}function Bs(e,t){for(var r="";r.length<t;)r+=e;return r}function zd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var lCe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ab(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&lCe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var cCe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function Ute(e){return e?e.content&&e.type?_g(e.content,!0):e.data?Wy(e.data):e.asNodeBuffer&&vn?Wy(e.asNodeBuffer().toString("binary")):e.asBinary?Wy(e.asBinary()):e._data&&e._data.getContent?Wy(_g(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Qte(e){if(!e)return null;if(e.data)return FH(e.data);if(e.asNodeBuffer&&vn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?FH(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function uCe(e){return e&&e.name.slice(-4)===".bin"?Qte(e):Ute(e)}function Ru(e,t){for(var r=e.FullPaths||Ps(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function yR(e,t){var r=Ru(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function fi(e,t,r){if(!r)return uCe(yR(e,t));if(!t)return null;try{return fi(e,t)}catch{return null}}function Vc(e,t,r){if(!r)return Ute(yR(e,t));if(!t)return null;try{return Vc(e,t)}catch{return null}}function dCe(e,t,r){return Qte(yR(e,t))}function GH(e){for(var t=e.FullPaths||Ps(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function dn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return vn?n=zh(r):n=jNe(r),jr.utils.cfb_add(e,t,n)}jr.utils.cfb_add(e,t,r)}else e.file(t,r)}function wR(){return jr.utils.cfb_new()}function Hte(e,t){switch(t.type){case"base64":return jr.read(e,{type:"base64"});case"binary":return jr.read(e,{type:"binary"});case"buffer":case"array":return jr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Yy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ti=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,fCe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,qH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,ACe=/<[^>]*>/g,dl=ti.match(qH)?qH:ACe,hCe=/<\w*:/,mCe=/<(\/?)\w+:/;function Xr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var o=e.match(fCe),l=0,c="",u=0,d="",f="",h=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var m=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[m]&&d.slice(l-3,l)=="ext")continue;n[m]=c,n[m.toLowerCase()]=c}}return n}function AA(e){return e.replace(mCe,"<$1")}var Vte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},ER=Zk(Vte),Qn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(l,c){return Vte[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),NR=/[&<>'"]/g,pCe=/[\u0000-\u0008\u000b-\u001f]/g;function pa(e){var t=e+"";return t.replace(NR,function(r){return ER[r]}).replace(pCe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function KH(e){return pa(e).replace(/ /g,"_x0020_")}var zte=/[\u0000-\u001f]/g;function CR(e){var t=e+"";return t.replace(NR,function(r){return ER[r]}).replace(/\n/g,"<br/>").replace(zte,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function gCe(e){var t=e+"";return t.replace(NR,function(r){return ER[r]}).replace(zte,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var WH=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function xCe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Qa(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function pB(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function XH(e){var t=Om(2*e.length),r,n,a=1,s=0,o=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function YH(e){return zh(e,"binary").toString("utf8")}var tC="foo bar bazâð£",Ea=vn&&(YH(tC)==pB(tC)&&YH||XH(tC)==pB(tC)&&XH)||pB,Xf=vn?function(e){return zh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},l2=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),$te=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),vCe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),bCe=/<\/?(?:vt:)?variant>/g,yCe=/<(?:vt:)([^>]*)>([\s\S]*)</;function JH(e,t){var r=Xr(e),n=e.match(vCe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(bCe,"").match(yCe);o&&a.push({v:Ea(o[2]),t:o[1]})}),a}var Gte=/(^\s|\s$|\n)/;function Eo(e,t){return"<"+e+(t.match(Gte)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function c2(e){return Ps(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Wt(e,t,r){return"<"+e+(r!=null?c2(r):"")+(t!=null?(t.match(Gte)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function wF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function wCe(e,t){switch(typeof e){case"string":var r=Wt("vt:lpwstr",pa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Wt((e|0)==e?"vt:i4":"vt:r8",pa(String(e)));case"boolean":return Wt("vt:bool",e?"true":"false")}if(e instanceof Date)return Wt("vt:filetime",wF(e));throw new Error("Unable to serialize "+e)}function _R(e){if(vn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ea(Xm(xR(e)));throw new Error("Bad input format: expected Buffer or string")}var u2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Bi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},qg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Lc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function ECe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function NCe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,o=n?-t:t;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[r+l]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var ZH=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},eV=vn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:zh(t)})):ZH(e)}:ZH,tV=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(oh(e,a)));return n.join("").replace(kl,"")},SR=vn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(kl,""):tV(e,t,r)}:tV,rV=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},qte=vn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):rV(e,t,r)}:rV,nV=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(fv(e,a)));return n.join("")},oE=vn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):nV(t,r,n)}:nV,Kte=function(e,t){var r=Mc(e,t);return r>0?oE(e,t+4,t+4+r-1):""},Wte=Kte,Xte=function(e,t){var r=Mc(e,t);return r>0?oE(e,t+4,t+4+r-1):""},Yte=Xte,Jte=function(e,t){var r=2*Mc(e,t);return r>0?oE(e,t+4,t+4+r-1):""},Zte=Jte,ere=function(t,r){var n=Mc(t,r);return n>0?SR(t,r+4,r+4+n):""},tre=ere,rre=function(e,t){var r=Mc(e,t);return r>0?oE(e,t+4,t+4+r):""},nre=rre,are=function(e,t){return ECe(e,t)},L_=are,kR=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};vn&&(Wte=function(t,r){if(!Buffer.isBuffer(t))return Kte(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Yte=function(t,r){if(!Buffer.isBuffer(t))return Xte(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Zte=function(t,r){if(!Buffer.isBuffer(t))return Jte(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},tre=function(t,r){if(!Buffer.isBuffer(t))return ere(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},nre=function(t,r){if(!Buffer.isBuffer(t))return rre(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},L_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):are(t,r)},kR=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var fv=function(e,t){return e[t]},oh=function(e,t){return e[t+1]*256+e[t]},CCe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Mc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Qp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},_Ce=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function yw(e,t){var r="",n,a,s=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,vn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(oh(this,u)),u+=2;e*=2;break;case"utf8":r=oE(this,this.l,this.l+e);break;case"utf16le":e*=2,r=SR(this,this.l,this.l+e);break;case"wstr":return yw.call(this,e,"dbcs");case"lpstr-ansi":r=Wte(this,this.l),e=4+Mc(this,this.l);break;case"lpstr-cp":r=Yte(this,this.l),e=4+Mc(this,this.l);break;case"lpwstr":r=Zte(this,this.l),e=4+2*Mc(this,this.l);break;case"lpp4":e=4+Mc(this,this.l),r=tre(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Mc(this,this.l),r=nre(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=fv(this,this.l+e++))!==0;)s.push(eC(o));r=s.join("");break;case"_wstr":for(e=0,r="";(o=oh(this,this.l+e))!==0;)s.push(eC(o)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=fv(this,u),this.l=u+1,l=yw.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(eC(oh(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=fv(this,u),this.l=u+1,l=yw.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(eC(fv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=fv(this,this.l),this.l++,n;case 2:return n=(t==="i"?CCe:oh)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Qp:_Ce)(this,this.l),this.l+=4,n):(a=Mc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=L_(this,this.l):a=L_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=qte(this,this.l,e);break}}return this.l+=e,r}var SCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},kCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},jCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function BCe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)jCe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,SCe(this,t,this.l);break;case 8:if(n=8,r==="f"){NCe(this,t,this.l);break}case 16:break;case-4:n=4,kCe(this,t,this.l);break}return this.l+=n,this}function sre(e,t){var r=qte(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function wo(e,t){e.l=t,e.read_shift=yw,e.chk=sre,e.write_shift=BCe}function cl(e,t){e.l+=t}function _t(e){var t=Om(e);return wo(t,0),t}function $h(e,t,r){if(e){var n,a,s;wo(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=p2[l]||p2[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,l))return}}}function lc(){var e=[],t=vn?256:2048,r=function(u){var d=_t(u);return wo(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},o=function(){return a(),Zi(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:l,end:o,_bufs:e}}function Mt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=p2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=e.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&kR(r)&&e.push(r)}}function ww(e,t,r){var n=$a(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function aV(e,t,r){var n=$a(e);return n.s=ww(n.s,t.s,r),n.e=ww(n.e,t.s,r),n}function Ew(e,t){if(e.cRel&&e.c<0)for(e=$a(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=$a(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=zr(e);return!e.cRel&&e.cRel!=null&&(r=FCe(r)),!e.rRel&&e.rRel!=null&&(r=TCe(r)),r}function gB(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+us(e.s.c)+":"+(e.e.cRel?"":"$")+us(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Zs(e.s.r)+":"+(e.e.rRel?"":"$")+Zs(e.e.r):Ew(e.s,t.biff)+":"+Ew(e.e,t.biff)}function jR(e){return parseInt(ICe(e),10)-1}function Zs(e){return""+(e+1)}function TCe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function ICe(e){return e.replace(/\$(\d+)$/,"$1")}function BR(e){for(var t=OCe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function us(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function FCe(e){return e.replace(/^([A-Z])/,"$$$1")}function OCe(e){return e.replace(/^\$([A-Z])/,"$1")}function DCe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ds(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function zr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function uc(e){var t=e.indexOf(":");return t==-1?{s:ds(e),e:ds(e)}:{s:ds(e.slice(0,t)),e:ds(e.slice(t+1))}}function sn(e,t){return typeof t>"u"||typeof t=="number"?sn(e.s,e.e):(typeof e!="string"&&(e=zr(e)),typeof t!="string"&&(t=zr(t)),e==t?e:e+":"+t)}function Hn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function sV(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Ju(e.z,r?Fi(t):t)}catch{}try{return e.w=Ju((e.XF||{}).numFmtId||(r?14:0),r?Fi(t):t)}catch{return""+t}}function Bh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Gh[e.v]||e.v:t==null?sV(e,e.v):sV(e,t))}function Ym(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function ire(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ds(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Hn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var m={v:t[f][h]},g=o+f,x=l+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))m=t[f][h];else if(Array.isArray(m.v)&&(m.f=t[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Qr[14],n.cellDates?(m.t="d",m.w=Ju(m.z,Fi(m.v))):(m.t="n",m.v=Fi(m.v),m.w=Ju(m.z,m.v))):m.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(m.z=s[g][x].z),s[g][x]=m;else{var v=zr({c:x,r:g});s[v]&&s[v].z&&(m.z=s[v].z),s[v]=m}}}return u.s.c<1e7&&(s["!ref"]=sn(u)),s}function a1(e,t){return ire(null,e,t)}function PCe(e){return e.read_shift(4,"i")}function $d(e,t){return t||(t=_t(4)),t.write_shift(4,e),t}function il(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function eo(e,t){var r=!1;return t==null&&(r=!0,t=_t(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function RCe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function LCe(e,t){return t||(t=_t(4)),t.write_shift(2,0),t.write_shift(2,0),t}function TR(e,t){var r=e.l,n=e.read_shift(1),a=il(e),s=[],o={t:a,h:a};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(RCe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function MCe(e,t){var r=!1;return t==null&&(r=!0,t=_t(15+4*e.t.length)),t.write_shift(1,0),eo(e.t,t),r?t.slice(0,t.l):t}var UCe=TR;function QCe(e,t){var r=!1;return t==null&&(r=!0,t=_t(23+4*e.t.length)),t.write_shift(1,1),eo(e.t,t),t.write_shift(4,1),LCe({},t),r?t.slice(0,t.l):t}function td(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Kg(e,t){return t==null&&(t=_t(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Wg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Xg(e,t){return t==null&&(t=_t(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var HCe=il,ore=eo;function IR(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function M_(e,t){var r=!1;return t==null&&(r=!0,t=_t(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var VCe=il,EF=IR,FR=M_;function OR(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?L_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Qp(t,0)>>2;return r?a/100:a}function lre(e,t){t==null&&(t=_t(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function cre(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function zCe(e,t){return t||(t=_t(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Yg=cre,s1=zCe;function rl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Sg(e,t){return(t||_t(8)).write_shift(8,e,"f")}function $Ce(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=ag[a];u&&(t.rgb=f2(u));break;case 2:t.rgb=f2([o,l,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function U_(e,t){if(t||(t=_t(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function GCe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function qCe(e,t){t||(t=_t(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function ure(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function KCe(e){return ure(e,1)}function WCe(e){return ure(e,2)}var DR=2,Wl=3,rC=11,iV=12,Q_=19,nC=64,XCe=65,YCe=71,JCe=4108,ZCe=4126,Wi=80,dre=81,e5e=[Wi,dre],NF={1:{n:"CodePage",t:DR},2:{n:"Category",t:Wi},3:{n:"PresentationFormat",t:Wi},4:{n:"ByteCount",t:Wl},5:{n:"LineCount",t:Wl},6:{n:"ParagraphCount",t:Wl},7:{n:"SlideCount",t:Wl},8:{n:"NoteCount",t:Wl},9:{n:"HiddenCount",t:Wl},10:{n:"MultimediaClipCount",t:Wl},11:{n:"ScaleCrop",t:rC},12:{n:"HeadingPairs",t:JCe},13:{n:"TitlesOfParts",t:ZCe},14:{n:"Manager",t:Wi},15:{n:"Company",t:Wi},16:{n:"LinksUpToDate",t:rC},17:{n:"CharacterCount",t:Wl},19:{n:"SharedDoc",t:rC},22:{n:"HyperlinksChanged",t:rC},23:{n:"AppVersion",t:Wl,p:"version"},24:{n:"DigSig",t:XCe},26:{n:"ContentType",t:Wi},27:{n:"ContentStatus",t:Wi},28:{n:"Language",t:Wi},29:{n:"Version",t:Wi},255:{},2147483648:{n:"Locale",t:Q_},2147483651:{n:"Behavior",t:Q_},1919054434:{}},CF={1:{n:"CodePage",t:DR},2:{n:"Title",t:Wi},3:{n:"Subject",t:Wi},4:{n:"Author",t:Wi},5:{n:"Keywords",t:Wi},6:{n:"Comments",t:Wi},7:{n:"Template",t:Wi},8:{n:"LastAuthor",t:Wi},9:{n:"RevNumber",t:Wi},10:{n:"EditTime",t:nC},11:{n:"LastPrinted",t:nC},12:{n:"CreatedDate",t:nC},13:{n:"ModifiedDate",t:nC},14:{n:"PageCount",t:Wl},15:{n:"WordCount",t:Wl},16:{n:"CharCount",t:Wl},17:{n:"Thumbnail",t:YCe},18:{n:"Application",t:Wi},19:{n:"DocSecurity",t:Wl},255:{},2147483648:{n:"Locale",t:Q_},2147483651:{n:"Behavior",t:Q_},1919054434:{}},oV={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},t5e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function r5e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var n5e=r5e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ag=$a(n5e),Gh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},fre={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},_F={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},aC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function PR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function a5e(e){var t=PR();if(!e||!e.match)return t;var r={};if((e.match(dl)||[]).forEach(function(n){var a=Xr(n);switch(a[0].replace(hCe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[_F[a.ContentType]]!==void 0&&t[_F[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Bi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Are(e,t){var r=aCe(_F),n=[],a;n[n.length]=ti,n[n.length]=Wt("Types",null,{xmlns:Bi.CT,"xmlns:xsd":Bi.xsd,"xmlns:xsi":Bi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Wt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Wt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:aC[c][t.bookType]||aC[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Wt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:aC[c][t.bookType]||aC[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Wt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Cn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function d2(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Nw(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(dl)||[]).forEach(function(a){var s=Xr(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Yy(s.Target,t);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function Mv(e){var t=[ti,Wt("Relationships",null,{xmlns:Bi.RELS})];return Ps(e["!id"]).forEach(function(r){t[t.length]=Wt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ha(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Cn.HLINK,Cn.XPATH,Cn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var s5e="application/vnd.oasis.opendocument.spreadsheet";function i5e(e,t){for(var r=_R(e),n,a;n=u2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Xr(n[0],!1),a.path=="/"&&a.type!==s5e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function o5e(e){var t=[ti];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function lV(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function l5e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function c5e(e){var t=[ti];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(lV(e[r][0],e[r][1])),t.push(l5e("",e[r][0]));return t.push(lV("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function hre(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+F_.version+"</meta:generator></office:meta></office:document-meta>"}var Yu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],u5e=function(){for(var e=new Array(Yu.length),t=0;t<Yu.length;++t){var r=Yu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function mre(e){var t={};e=Ea(e);for(var r=0;r<Yu.length;++r){var n=Yu[r],a=e.match(u5e[r]);a!=null&&a.length>0&&(t[n[1]]=Qn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=za(t[n[1]]))}return t}function xB(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=pa(t),n[n.length]=r?Wt(e,t,r):Eo(e,t))}function pre(e,t){var r=t||{},n=[ti,Wt("cp:coreProperties",null,{"xmlns:cp":Bi.CORE_PROPS,"xmlns:dc":Bi.dc,"xmlns:dcterms":Bi.dcterms,"xmlns:dcmitype":Bi.dcmitype,"xmlns:xsi":Bi.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&xB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:wF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&xB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:wF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Yu.length;++s){var o=Yu[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&xB(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var sg=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],gre=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function xre(e,t,r,n){var a=[];if(typeof e=="string")a=JH(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?JH(t,n).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function d5e(e,t,r){var n={};return t||(t={}),e=Ea(e),sg.forEach(function(a){var s=(e.match(l2(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Qn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&xre(n.HeadingPairs,n.TitlesOfParts,t,r),t}function vre(e){var t=[],r=Wt;return e||(e={}),e.Application="SheetJS",t[t.length]=ti,t[t.length]=Wt("Properties",null,{xmlns:Bi.EXT_PROPS,"xmlns:vt":Bi.vt}),sg.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=pa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+pa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var f5e=/<[^>]+>[^<]*/g;function A5e(e,t){var r={},n="",a=e.match(f5e);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=Xr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Qn(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Qn(d);break;case"bool":r[n]=Qa(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=za(d);break;case"cy":case"error":r[n]=Qn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function bre(e){var t=[ti,Wt("Properties",null,{xmlns:Bi.CUST_PROPS,"xmlns:vt":Bi.vt})];if(!e)return t.join("");var r=1;return Ps(e).forEach(function(a){++r,t[t.length]=Wt("property",wCe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:pa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var SF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},vB;function h5e(e,t,r){vB||(vB=Zk(SF)),t=vB[t]||t,e[t]=r}function m5e(e,t){var r=[];return Ps(SF).map(function(n){for(var a=0;a<Yu.length;++a)if(Yu[a][1]==n)return Yu[a];for(a=0;a<sg.length;++a)if(sg[a][1]==n)return sg[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Eo(SF[n[1]]||n[1],a))}}),Wt("DocumentProperties",r.join(""),{xmlns:Lc.o})}function p5e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Ps(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var o=0;o<Yu.length;++o)if(s==Yu[o][1])return;for(o=0;o<sg.length;++o)if(s==sg[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=e[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Wt(KH(s),l,{"dt:dt":c}))}}),t&&Ps(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(Wt(KH(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Lc.o+'">'+a.join("")+"</"+n+">"}function RR(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function g5e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=_t(8);return o.write_shift(4,n),o.write_shift(4,a),o}function yre(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function wre(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Ere(e,t,r){return t===31?wre(e):yre(e,t,r)}function kF(e,t,r){return Ere(e,t,r===!1?0:4)}function x5e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Ere(e,t,0)}function v5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(kl,""),e.l-a&2&&(e.l+=2)}return r}function b5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(kl,"");return r}function y5e(e){var t=e.l,r=H_(e,dre);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=H_(e,Wl);return[r,n]}function w5e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(y5e(e));return r}function cV(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),o=e.read_shift(4);n[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(kl,"").replace(Xy,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function Nre(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function E5e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function H_(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==iV&&n!==t&&e5e.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===iV?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return yre(e,n,4).replace(kl,"");case 31:return wre(e);case 64:return RR(e);case 65:return Nre(e);case 71:return E5e(e);case 80:return kF(e,n,!s.raw).replace(kl,"");case 81:return x5e(e,n).replace(kl,"");case 4108:return w5e(e);case 4126:case 4127:return n==4127?v5e(e):b5e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function uV(e,t){var r=_t(4),n=_t(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=_t(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=g5e(t);break;case 31:case 80:for(n=_t(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Zi([r,n])}function dV(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=e.read_shift(4),f=e.read_shift(4);s[o]=[d,f+r]}s.sort(function(w,_){return w[1]-_[1]});var h={};for(o=0;o!=a;++o){if(e.l!==s[o][1]){var m=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(m=!1,e.l=s[o][1]),m)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var g=t[s[o][0]];if(h[g.n]=H_(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Rd(l=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[o][0]===1){if(l=h.CodePage=H_(e,DR),Rd(l),c!==-1){var x=e.l;e.l=s[c][1],u=cV(e,l),e.l=x}}else if(s[o][0]===0){if(l===0){c=o,e.l=s[o+1][1];continue}u=cV(e,l)}else{var v=u[s[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=Nre(e);break;case 30:e.l+=4,y=kF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=kF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Gs(e,4);break;case 64:e.l+=4,y=za(RR(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=y}}return e.l=r+n,h}var Cre=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function N5e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function fV(e,t,r){var n=_t(8),a=[],s=[],o=8,l=0,c=_t(8),u=_t(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!t){u=_t(8),u.write_shift(4,0),a.unshift(u);var d=[_t(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=_t(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Zi(d),s.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(Cre.indexOf(e[l][0])>-1||gre.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=uV(g.t,h)}else{var v=N5e(h);v==-1&&(v=31,h=String(h)),c=uV(v,h)}s.push(c),u=_t(8),u.write_shift(4,t?m:2+l),a.push(u),o+=8+c.length}var y=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,y),y+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),Zi([n].concat(a).concat(s))}function AV(e,t,r){var n=e.content;if(!n)return{};wo(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==jr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=dV(n,t),h={SystemIdentifier:u};for(var m in f)h[m]=f[m];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=dV(n,null)}catch{}for(m in g)h[m]=g[m];return h.FMTID=[s,o],h}function hV(e,t,r,n,a,s){var o=_t(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,jr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var c=fV(e,r,n);if(l.push(c),a){var u=fV(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Zi(l)}function F0(e,t){return e.read_shift(t),null}function C5e(e,t){t||(t=_t(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function _5e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Gs(e,t){return e.read_shift(t)===1}function yl(e,t){return t||(t=_t(2)),t.write_shift(2,+!!e),t}function Ai(e){return e.read_shift(2,"u")}function Mu(e,t){return t||(t=_t(2)),t.write_shift(2,e),t}function _re(e,t){return _5e(e,t,Ai)}function S5e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Sre(e,t,r){return r||(r=_t(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function lE(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function k5e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*o),n&&(e.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function j5e(e){var t=e.t||"",r=_t(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=_t(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Zi(a)}function kg(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function cE(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):kg(e,n,r)}function Jg(e,t,r){if(r.biff>5)return cE(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function kre(e,t,r){return r||(r=_t(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function B5e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function T5e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(kl,"");return n&&(e.l+=24),a}function I5e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(kl,"");return r+o}function F5e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return T5e(e);case"0303000000000000c000000000000046":return I5e(e);default:throw new Error("Unsupported Moniker "+r)}}function sC(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(kl,""):"";return r}function mV(e,t){t||(t=_t(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function O5e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=sC(e,r-e.l)),a&128&&(o=sC(e,r-e.l)),(a&257)===257&&(l=sC(e,r-e.l)),(a&257)===1&&(c=F5e(e,r-e.l)),a&8&&(u=sC(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=RR(e)),e.l=r;var h=o||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return d&&(m.guid=d),f&&(m.time=f),s&&(m.Tooltip=s),m}function D5e(e){var t=_t(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(s==28)n=n.slice(1),mV(n,t);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),s&8&&mV(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function jre(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function Bre(e,t){var r=jre(e);return r[3]=0,r}function hA(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function jg(e,t,r,n){return n||(n=_t(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function P5e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function R5e(e,t,r){return t===0?"":Jg(e,t,r)}function L5e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,s,o]}function Tre(e){var t=e.read_shift(2),r=OR(e);return[t,r]}function M5e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=lE(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function r4(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function Ire(e,t){return t||(t=_t(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Fre(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var U5e=Fre;function Ore(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Q5e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function H5e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Uo(e){e.l+=2,e.l+=e.read_shift(2)}var V5e={0:Uo,4:Uo,5:Uo,6:Uo,7:H5e,8:Uo,9:Uo,10:Uo,11:Uo,12:Uo,13:Q5e,14:Uo,15:Uo,16:Uo,17:Uo,18:Uo,19:Uo,20:Uo,21:Ore};function z5e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(V5e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function iC(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function LR(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=_t(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function $5e(e,t){return t===0||e.read_shift(2),1200}function G5e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=Jg(e,0,r);return e.read_shift(t+n-e.l),a}function q5e(e,t){var r=!t||t.biff==8,n=_t(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function K5e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function W5e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=lE(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function X5e(e,t){var r=!t||t.biff>=8?2:1,n=_t(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function Y5e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0;o!=a&&e.l<r;++o)s.push(k5e(e));return s.Count=n,s.Unique=a,s}function J5e(e,t){var r=_t(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=j5e(e[a]);var s=Zi([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function Z5e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function e_e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function t_e(e){var t=P5e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function r_e(e){return e.read_shift(2),e.read_shift(4)}function pV(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function n_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function a_e(){var e=_t(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function s_e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function i_e(e){var t=_t(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function o_e(){}function l_e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=lE(e,0,r),n}function c_e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=_t(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function u_e(e){var t=hA(e);return t.isst=e.read_shift(4),t}function d_e(e,t,r,n){var a=_t(10);return jg(e,t,n,a),a.write_shift(4,r),a}function f_e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=hA(e);r.biff==2&&e.l++;var s=cE(e,n-e.l,r);return a.val=s,a}function A_e(e,t,r,n,a){var s=!a||a.biff==8,o=_t(8+ +s+(1+s)*r.length);return jg(e,t,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function h_e(e,t,r){var n=e.read_shift(2),a=Jg(e,0,r);return[n,a]}function m_e(e,t,r,n){var a=r&&r.biff==5;n||(n=_t(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var p_e=Jg;function gV(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:l},e:{r:o,c}}}function g_e(e,t){var r=t.biff==8||!t.biff?4:2,n=_t(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function x_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=Tre(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function v_e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(Tre(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function b_e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function y_e(e,t,r,n){var a={},s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return a.patternType=t5e[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function w_e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=y_e(e,t,n.fStyle,r),n}function xV(e,t,r,n){var a=r&&r.biff==5;n||(n=_t(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function E_e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function N_e(e){var t=_t(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function vV(e,t,r){var n=hA(e);(r.biff==2||t==9)&&++e.l;var a=S5e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function C_e(e,t,r,n,a,s){var o=_t(8);return jg(e,t,n,o),Sre(r,s,o),o}function __e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=hA(e),a=rl(e);return n.val=a,n}function S_e(e,t,r,n){var a=_t(14);return jg(e,t,n,a),Sg(r,a),a}var bV=R5e;function k_e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=kg(e,s),l=[];n>e.l;)l.push(cE(e));return[s,a,o,l]}function yV(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=M5e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var j_e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function wV(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=kg(e,o,r);a&32&&(u=j_e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||l===0||!(d>0)?[]:zje(e,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function Dre(e,t,r){if(r.biff<8)return B_e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(L5e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function B_e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=lE(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function T_e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=kg(e,n,r),o=kg(e,a,r);return[s,o]}function I_e(e,t,r){var n=Fre(e);e.l++;var a=e.read_shift(1);return t-=8,[$je(e,t,r),a,n]}function EV(e,t,r){var n=U5e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Hje(e,t,r)]}function F_e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function O_e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=Jg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},l,o,s]}}function D_e(e,t,r){return O_e(e,t,r)}function P_e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(r4(e));return r}function R_e(e){var t=_t(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Ire(e[r],t);return t}function L_e(e,t,r){if(r&&r.biff<8)return U_e(e,t,r);var n=Ore(e),a=z5e(e,t-22,n[1]);return{cmo:n,ft:a}}var M_e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function U_e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((M_e[n]||cl)(e,t,r)),{cmo:[a,n,s],ft:o}}function Q_e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=B5e(e,6,r);var l=e.read_shift(2);e.read_shift(2),Ai(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=kg(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function H_e(e,t){var r=r4(e);e.l+=16;var n=O5e(e,t-24);return[r,n]}function V_e(e){var t=_t(24),r=ds(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Zi([t,D5e(e[1])])}function z_e(e,t){e.read_shift(2);var r=r4(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(kl,""),[r,n]}function $_e(e){var t=e[1].Tooltip,r=_t(10+2*(t.length+1));r.write_shift(2,2048);var n=ds(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function G_e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=oV[r]||r,r=e.read_shift(2),t[1]=oV[r]||r,t}function q_e(e){return e||(e=_t(4)),e.write_shift(2,1),e.write_shift(2,1),e}function K_e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Bre(e));return r}function W_e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Bre(e));return r}function X_e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Pre(e,t,r){if(!r.cellStyles)return cl(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function Y_e(e,t){var r=_t(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function J_e(e,t){var r={};return t<32||(e.l+=16,r.header=rl(e),r.footer=rl(e),e.l+=2),r}function Z_e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function eSe(e){for(var t=_t(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var tSe=hA,rSe=_re,nSe=cE;function aSe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function sSe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=hA(e);++e.l;var a=Jg(e,t-7,r);return n.t="str",n.val=a,n}function iSe(e){var t=hA(e);++e.l;var r=rl(e);return t.t="n",t.val=r,t}function oSe(e,t,r){var n=_t(15);return AE(n,e,t),n.write_shift(8,r,"f"),n}function lSe(e){var t=hA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function cSe(e,t,r){var n=_t(9);return AE(n,e,t),n.write_shift(2,r),n}function uSe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function dSe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function fSe(e,t,r){var n=e.l+t,a=hA(e),s=e.read_shift(2),o=kg(e,s,r);return e.l=n,a.t="str",a.val=o,a}var ASe=[2,3,48,49,131,139,140,245],jF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Zk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Om(1);switch(c.type){case"base64":d=Hc(Jc(l));break;case"binary":d=Hc(l);break;case"buffer":case"array":d=l;break}wo(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,v=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(v=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var _=[],F={},B=Math.min(d.length,f==2?521:v-10-(m?264:0)),T=g?32:11;d.l<B&&d[d.l]!=13;)switch(F={},F.name=s2.utils.decode(w,d.slice(d.l,d.l+T)).replace(/[\u0000\r\n].*$/g,""),d.l+=T,F.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(F.offset=d.read_shift(4)),F.len=d.read_shift(1),f==2&&(F.offset=d.read_shift(2)),F.dec=d.read_shift(1),F.name.length&&_.push(F),f!=2&&(d.l+=g?13:14),F.type){case"B":(!m||F.len!=8)&&c.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+F.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var C=0,S=0;for(u[0]=[],S=0;S!=_.length;++S)u[0][S]=_[S].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++C]=[],S=0,S=0;S!=_.length;++S){var j=d.slice(d.l,d.l+_[S].len);d.l+=_[S].len,wo(j,0);var L=s2.utils.decode(w,j);switch(_[S].type){case"C":L.trim().length&&(u[C][S]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[C][S]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[C][S]=L;break;case"F":u[C][S]=parseFloat(L.trim());break;case"+":case"I":u[C][S]=g?j.read_shift(-4,"i")^2147483648:j.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[C][S]=!0;break;case"N":case"F":u[C][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[C][S]="##MEMO##"+(g?parseInt(L.trim(),10):j.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[C][S]=+L||0);break;case"@":u[C][S]=new Date(j.read_shift(-8,"f")-621356832e5);break;case"T":u[C][S]=new Date((j.read_shift(4)-2440588)*864e5+j.read_shift(4));break;case"Y":u[C][S]=j.read_shift(4,"i")/1e4+j.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[C][S]=-j.read_shift(-8,"f");break;case"B":if(m&&_[S].len==8){u[C][S]=j.read_shift(8,"f");break}case"G":case"P":j.l+=_[S].len;break;case"0":if(_[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[S].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=_,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=a1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return Ym(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Rd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=lc(),f=$_(l,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),g=l["!cols"]||[],x=0,v=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(v=0;v<1024;++v)if(h.indexOf(h[x]+"_"+v)==-1){h[x]+="_"+v;break}}}}var _=Hn(l["!ref"]),F=[],B=[],T=[];for(x=0;x<=_.e.c-_.s.c;++x){var C="",S="",j=0,L=[];for(v=0;v<m.length;++v)m[v][x]!=null&&L.push(m[v][x]);if(L.length==0||h[x]==null){F[x]="?";continue}for(v=0;v<L.length;++v){switch(typeof L[v]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=L[v]instanceof Date?"D":"C";break;default:S="C"}j=Math.max(j,String(L[v]).length),C=C&&C!=S?"C":S}j>250&&(j=250),S=((g[x]||{}).DBF||{}).type,S=="C"&&g[x].DBF.len>j&&(j=g[x].DBF.len),C=="B"&&S=="N"&&(C="N",T[x]=g[x].DBF.dec,j=g[x].DBF.len),B[x]=C=="C"||S=="N"?j:s[C]||0,w+=B[x],F[x]=C}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,m.length),P.write_shift(2,296+32*y),P.write_shift(2,w),x=0;x<4;++x)P.write_shift(4,0);for(P.write_shift(4,0|(+t[Cte]||3)<<8),x=0,v=0;x<h.length;++x)if(h[x]!=null){var k=d.next(32),U=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,U,"sbcs"),k.write_shift(1,F[x]=="?"?"C":F[x],"sbcs"),k.write_shift(4,v),k.write_shift(1,B[x]||s[F[x]]||0),k.write_shift(1,T[x]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),v+=B[x]||s[F[x]]||0}var Q=d.next(264);for(Q.write_shift(4,13),x=0;x<65;++x)Q.write_shift(4,0);for(x=0;x<m.length;++x){var K=d.next(w);for(K.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(F[v]){case"L":K.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":K.write_shift(8,m[x][v]||0,"f");break;case"N":var H="0";for(typeof m[x][v]=="number"&&(H=m[x][v].toFixed(T[v]||0)),y=0;y<B[v]-H.length;++y)K.write_shift(1,32);K.write_shift(1,H,"sbcs");break;case"D":m[x][v]?(K.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),K.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),K.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):K.write_shift(8,"00000000","sbcs");break;case"C":var q=String(m[x][v]!=null?m[x][v]:"").slice(0,B[v]);for(K.write_shift(1,q,"sbcs"),y=0;y<B[v]-q.length;++y)K.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),Rre=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ps(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var g=e[m];return typeof g=="number"?OH(g):g},n=function(h,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:OH(x)};e["|"]=254;function a(h,m){switch(m.type){case"base64":return s(Jc(h),m);case"binary":return s(h,m);case"buffer":return s(vn&&Buffer.isBuffer(h)?h.toString("binary"):Xm(h),m);case"array":return s(_g(h),m)}throw new Error("Unrecognized type "+m.type)}function s(h,m){var g=h.split(/[\n\r]+/),x=-1,v=-1,y=0,w=0,_=[],F=[],B=null,T={},C=[],S=[],j=[],L=0,P;for(+m.codepage>=0&&Rd(+m.codepage);y!==g.length;++y){L=0;var k=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),U=k.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),Q=U[0],K;if(k.length>0)switch(Q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&F.push(k.slice(3).replace(/;;/g,";"));break;case"C":var H=!1,q=!1,z=!1,W=!1,ee=-1,X=-1;for(w=1;w<U.length;++w)switch(U[w].charAt(0)){case"A":break;case"X":v=parseInt(U[w].slice(1))-1,q=!0;break;case"Y":for(x=parseInt(U[w].slice(1))-1,q||(v=0),P=_.length;P<=x;++P)_[P]=[];break;case"K":K=U[w].slice(1),K.charAt(0)==='"'?K=K.slice(1,K.length-1):K==="TRUE"?K=!0:K==="FALSE"?K=!1:isNaN(zd(K))?isNaN(Ab(K).getDate())||(K=za(K)):(K=zd(K),B!==null&&r1(B)&&(K=t4(K))),H=!0;break;case"E":W=!0;var O=Uv(U[w].slice(1),{r:x,c:v});_[x][v]=[_[x][v],O];break;case"S":z=!0,_[x][v]=[_[x][v],"S5S"];break;case"G":break;case"R":ee=parseInt(U[w].slice(1))-1;break;case"C":X=parseInt(U[w].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}if(H&&(_[x][v]&&_[x][v].length==2?_[x][v][0]=K:_[x][v]=K,B=null),z){if(W)throw new Error("SYLK shared formula cannot have own formula");var R=ee>-1&&_[ee][X];if(!R||!R[1])throw new Error("SYLK shared formula cannot find base");_[x][v][1]=tne(R[1],{r:x-ee,c:v-X})}break;case"F":var G=0;for(w=1;w<U.length;++w)switch(U[w].charAt(0)){case"X":v=parseInt(U[w].slice(1))-1,++G;break;case"Y":for(x=parseInt(U[w].slice(1))-1,P=_.length;P<=x;++P)_[P]=[];break;case"M":L=parseInt(U[w].slice(1))/20;break;case"F":break;case"G":break;case"P":B=F[parseInt(U[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(j=U[w].slice(1).split(" "),P=parseInt(j[0],10);P<=parseInt(j[1],10);++P)L=parseInt(j[2],10),S[P-1]=L===0?{hidden:!0}:{wch:L},Dm(S[P-1]);break;case"C":v=parseInt(U[w].slice(1))-1,S[v]||(S[v]={});break;case"R":x=parseInt(U[w].slice(1))-1,C[x]||(C[x]={}),L>0?(C[x].hpt=L,C[x].hpx=mb(L)):L===0&&(C[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}G<1&&(B=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}}return C.length>0&&(T["!rows"]=C),S.length>0&&(T["!cols"]=S),m&&m.sheetRows&&(_=_.slice(0,m.sheetRows)),[_,T]}function o(h,m){var g=a(h,m),x=g[0],v=g[1],y=a1(x,m);return Ps(v).forEach(function(w){y[w]=v[w]}),y}function l(h,m){return Ym(o(h,m),m)}function c(h,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+zR(h.f,{r:g,c:x}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=A2(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=h2(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*m2(g.hpx)+";"),v.length>2&&h.push(v+"R"+(x+1))})}function f(h,m){var g=["ID;PWXL;N;E"],x=[],v=Hn(h["!ref"]),y,w=Array.isArray(h),_=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var F=v.s.r;F<=v.e.r;++F)for(var B=v.s.c;B<=v.e.c;++B){var T=zr({r:F,c:B});y=w?(h[F]||[])[B]:h[T],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,F,B))}return g.join(_)+_+x.join(_)+_+"E"+_}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),Lre=function(){function e(s,o){switch(o.type){case"base64":return t(Jc(s),o);case"binary":return t(s,o);case"buffer":return t(vn&&Buffer.isBuffer(s)?s.toString("binary"):Xm(s),o);case"array":return t(_g(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),m=h[0],g=h[1];++d;for(var x=l[d]||"";(x.match(/["]/g)||[]).length&1&&d<l.length-1;)x+=`
`+l[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(zd(g))?isNaN(Ab(g).getDate())?f[c][u]=g:f[c][u]=za(g):f[c][u]=zd(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return a1(e(s,o),o)}function n(s,o){return Ym(r(s,o),o)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Hn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=zr({r:m,c:g});if(f=h?(c[m]||[])[g]:c[x],!f){o(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,v,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Ju(f.z||Qr[14],Fi(za(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Mre=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var w=m[v].trim().split(":");if(w[0]==="cell"){var _=ds(w[1]);if(y.length<=_.r)for(g=y.length;g<=_.r;++g)y[g]||(y[g]=[]);switch(g=_.r,x=_.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var F=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],F])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return a1(r(f,h),h)}function a(f,h){return Ym(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],g,x="",v=uc(f["!ref"]),y=Array.isArray(f),w=v.s.r;w<=v.e.r;++w)for(var _=v.s.c;_<=v.e.c;++_)if(x=zr({r:w,c:_}),g=y?(f[w]||[])[_]:f[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var F=Fi(za(g.v));m[2]="vtc",m[3]="nd",m[4]=""+F,m[5]=g.w||Ju(g.z||Qr[14],F);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),hb=function(){function e(d,f,h,m,g){g.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN(zd(d))?isNaN(Ab(d).getDate())?f[h][m]=d:f[h][m]=za(d):f[h][m]=zd(d))}function t(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,v=Math.max(v,y);for(w=0;w<=x;++w){m[w]=[];var _=0;for(e(g[w].slice(0,v).trim(),m,w,_,h),_=1;_<=(g[w].length-v)/10+1;++_)e(g[w].slice(v+(_-1)*10,v+_*10).trim(),m,w,_,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(x,v){return x[0]-v[0]||n[x[1]]-n[v[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},m="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):h&&h.FS?m=h.FS:m=a(d.slice(0,1024));var v=0,y=0,w=0,_=0,F=0,B=m.charCodeAt(0),T=!1,C=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var j=h.dateNF!=null?ZNe(h.dateNF):null;function L(){var P=d.slice(_,F),k={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)k.t="z";else if(h.raw)k.t="s",k.v=P;else if(P.trim().length===0)k.t="s",k.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(k.t="s",k.v=P.slice(2,-1).replace(/""/g,'"')):k4e(P)?(k.t="n",k.f=P.slice(1)):(k.t="s",k.v=P);else if(P=="TRUE")k.t="b",k.v=!0;else if(P=="FALSE")k.t="b",k.v=!1;else if(!isNaN(w=zd(P)))k.t="n",h.cellText!==!1&&(k.w=P),k.v=w;else if(!isNaN(Ab(P).getDate())||j&&P.match(j)){k.z=h.dateNF||Qr[14];var U=0;j&&P.match(j)&&(P=eCe(P,h.dateNF,P.match(j)||[]),U=1),h.cellDates?(k.t="d",k.v=za(P,U)):(k.t="n",k.v=Fi(za(P,U))),h.cellText!==!1&&(k.w=Ju(k.z,k.v instanceof Date?Fi(k.v):k.v)),h.cellNF||delete k.z}else k.t="s",k.v=P;if(k.t=="z"||(h.dense?(g[v]||(g[v]=[]),g[v][y]=k):g[zr({c:y,r:v})]=k),_=F+1,S=d.charCodeAt(_),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),C==B)++y;else if(y=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;F<d.length;++F)switch(C=d.charCodeAt(F)){case 34:S===34&&(T=!T);break;case B:case 10:case 13:if(!T&&L())break e;break}return F-_>0&&L(),g["!ref"]=sn(x),g}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):a1(t(d,f),f)}function l(d,f){var h="",m=f.type=="string"?[0,0,0,0]:JR(d,f);switch(f.type){case"base64":h=Jc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof s2<"u"||(h=vn&&Buffer.isBuffer(d)?d.toString("binary"):Xm(d));break;case"array":h=_g(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=Ea(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ea(h):f.type=="binary"&&typeof s2<"u",h.slice(0,19)=="socialcalc:version:"?Mre.to_sheet(f.type=="string"?h:Ea(h),f):o(h,f)}function c(d,f){return Ym(l(d,f),f)}function u(d){for(var f=[],h=Hn(d["!ref"]),m,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var v=[],y=h.s.c;y<=h.e.c;++y){var w=zr({r:x,c:y});if(m=g?(d[x]||[])[y]:d[w],!m||m.v==null){v.push("          ");continue}for(var _=(m.w||(Bh(m),m.w)||"").slice(0,10);_.length<10;)_+=" ";v.push(_+(y===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function hSe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=Rre.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return hb.to_workbook(e,t)}}var ig=function(){function e(O,R,G){if(O){wo(O,O.l||0);for(var Y=G.Enum||ee;O.l<O.length;){var te=O.read_shift(2),ae=Y[te]||Y[65535],oe=O.read_shift(2),ie=O.l+oe,ue=ae.f&&ae.f(O,oe,G);if(O.l=ie,R(ue,ae,te))return}}}function t(O,R){switch(R.type){case"base64":return r(Hc(Jc(O)),R);case"binary":return r(Hc(O),R);case"buffer":case"array":return r(O,R)}throw"Unsupported type "+R.type}function r(O,R){if(!O)return O;var G=R||{},Y=G.dense?[]:{},te="Sheet1",ae="",oe=0,ie={},ue=[],Ce=[],ne={s:{r:0,c:0},e:{r:0,c:0}},Be=G.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)G.Enum=ee,e(O,function(ve,Pe,Ue){switch(Ue){case 0:G.vers=ve,ve>=4096&&(G.qpro=!0);break;case 6:ne=ve;break;case 204:ve&&(ae=ve);break;case 222:ae=ve;break;case 15:case 51:G.qpro||(ve[1].v=ve[1].v.slice(1));case 13:case 14:case 16:Ue==14&&(ve[2]&112)==112&&(ve[2]&15)>1&&(ve[2]&15)<15&&(ve[1].z=G.dateNF||Qr[14],G.cellDates&&(ve[1].t="d",ve[1].v=t4(ve[1].v))),G.qpro&&ve[3]>oe&&(Y["!ref"]=sn(ne),ie[te]=Y,ue.push(te),Y=G.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},oe=ve[3],te=ae||"Sheet"+(oe+1),ae="");var de=G.dense?(Y[ve[0].r]||[])[ve[0].c]:Y[zr(ve[0])];if(de){de.t=ve[1].t,de.v=ve[1].v,ve[1].z!=null&&(de.z=ve[1].z),ve[1].f!=null&&(de.f=ve[1].f);break}G.dense?(Y[ve[0].r]||(Y[ve[0].r]=[]),Y[ve[0].r][ve[0].c]=ve[1]):Y[zr(ve[0])]=ve[1];break}},G);else if(O[2]==26||O[2]==14)G.Enum=X,O[2]==14&&(G.qpro=!0,O.l=0),e(O,function(ve,Pe,Ue){switch(Ue){case 204:te=ve;break;case 22:ve[1].v=ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ve[3]>oe&&(Y["!ref"]=sn(ne),ie[te]=Y,ue.push(te),Y=G.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},oe=ve[3],te="Sheet"+(oe+1)),Be>0&&ve[0].r>=Be)break;G.dense?(Y[ve[0].r]||(Y[ve[0].r]=[]),Y[ve[0].r][ve[0].c]=ve[1]):Y[zr(ve[0])]=ve[1],ne.e.c<ve[0].c&&(ne.e.c=ve[0].c),ne.e.r<ve[0].r&&(ne.e.r=ve[0].r);break;case 27:ve[14e3]&&(Ce[ve[14e3][0]]=ve[14e3][1]);break;case 1537:Ce[ve[0]]=ve[1],ve[0]==oe&&(te=ve[1]);break}},G);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(Y["!ref"]=sn(ne),ie[ae||te]=Y,ue.push(ae||te),!Ce.length)return{SheetNames:ue,Sheets:ie};for(var je={},_e=[],Ae=0;Ae<Ce.length;++Ae)ie[ue[Ae]]?(_e.push(Ce[Ae]||ue[Ae]),je[Ce[Ae]]=ie[Ce[Ae]]||ie[ue[Ae]]):(_e.push(Ce[Ae]),je[Ce[Ae]]={"!ref":"A1"});return{SheetNames:_e,Sheets:je}}function n(O,R){var G=R||{};if(+G.codepage>=0&&Rd(+G.codepage),G.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=lc(),te=Hn(O["!ref"]),ae=Array.isArray(O),oe=[];Xt(Y,0,s(1030)),Xt(Y,6,c(te));for(var ie=Math.min(te.e.r,8191),ue=te.s.r;ue<=ie;++ue)for(var Ce=Zs(ue),ne=te.s.c;ne<=te.e.c;++ne){ue===te.s.r&&(oe[ne]=us(ne));var Be=oe[ne]+Ce,je=ae?(O[ue]||[])[ne]:O[Be];if(!(!je||je.t=="z"))if(je.t=="n")(je.v|0)==je.v&&je.v>=-32768&&je.v<=32767?Xt(Y,13,m(ue,ne,je.v)):Xt(Y,14,x(ue,ne,je.v));else{var _e=Bh(je);Xt(Y,15,f(ue,ne,_e.slice(0,239)))}}return Xt(Y,1),Y.end()}function a(O,R){var G=R||{};if(+G.codepage>=0&&Rd(+G.codepage),G.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=lc();Xt(Y,0,o(O));for(var te=0,ae=0;te<O.SheetNames.length;++te)(O.Sheets[O.SheetNames[te]]||{})["!ref"]&&Xt(Y,27,W(O.SheetNames[te],ae++));var oe=0;for(te=0;te<O.SheetNames.length;++te){var ie=O.Sheets[O.SheetNames[te]];if(!(!ie||!ie["!ref"])){for(var ue=Hn(ie["!ref"]),Ce=Array.isArray(ie),ne=[],Be=Math.min(ue.e.r,8191),je=ue.s.r;je<=Be;++je)for(var _e=Zs(je),Ae=ue.s.c;Ae<=ue.e.c;++Ae){je===ue.s.r&&(ne[Ae]=us(Ae));var ve=ne[Ae]+_e,Pe=Ce?(ie[je]||[])[Ae]:ie[ve];if(!(!Pe||Pe.t=="z"))if(Pe.t=="n")Xt(Y,23,L(je,Ae,oe,Pe.v));else{var Ue=Bh(Pe);Xt(Y,22,C(je,Ae,oe,Ue.slice(0,239)))}}++oe}}return Xt(Y,1),Y.end()}function s(O){var R=_t(2);return R.write_shift(2,O),R}function o(O){var R=_t(26);R.write_shift(2,4096),R.write_shift(2,4),R.write_shift(4,0);for(var G=0,Y=0,te=0,ae=0;ae<O.SheetNames.length;++ae){var oe=O.SheetNames[ae],ie=O.Sheets[oe];if(!(!ie||!ie["!ref"])){++te;var ue=uc(ie["!ref"]);G<ue.e.r&&(G=ue.e.r),Y<ue.e.c&&(Y=ue.e.c)}}return G>8191&&(G=8191),R.write_shift(2,G),R.write_shift(1,te),R.write_shift(1,Y),R.write_shift(2,0),R.write_shift(2,0),R.write_shift(1,1),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(4,0),R}function l(O,R,G){var Y={s:{c:0,r:0},e:{c:0,r:0}};return R==8&&G.qpro?(Y.s.c=O.read_shift(1),O.l++,Y.s.r=O.read_shift(2),Y.e.c=O.read_shift(1),O.l++,Y.e.r=O.read_shift(2),Y):(Y.s.c=O.read_shift(2),Y.s.r=O.read_shift(2),R==12&&G.qpro&&(O.l+=2),Y.e.c=O.read_shift(2),Y.e.r=O.read_shift(2),R==12&&G.qpro&&(O.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function c(O){var R=_t(8);return R.write_shift(2,O.s.c),R.write_shift(2,O.s.r),R.write_shift(2,O.e.c),R.write_shift(2,O.e.r),R}function u(O,R,G){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return G.qpro&&G.vers!=20768?(Y[0].c=O.read_shift(1),Y[3]=O.read_shift(1),Y[0].r=O.read_shift(2),O.l+=2):(Y[2]=O.read_shift(1),Y[0].c=O.read_shift(2),Y[0].r=O.read_shift(2)),Y}function d(O,R,G){var Y=O.l+R,te=u(O,R,G);if(te[1].t="s",G.vers==20768){O.l++;var ae=O.read_shift(1);return te[1].v=O.read_shift(ae,"utf8"),te}return G.qpro&&O.l++,te[1].v=O.read_shift(Y-O.l,"cstr"),te}function f(O,R,G){var Y=_t(7+G.length);Y.write_shift(1,255),Y.write_shift(2,R),Y.write_shift(2,O),Y.write_shift(1,39);for(var te=0;te<Y.length;++te){var ae=G.charCodeAt(te);Y.write_shift(1,ae>=128?95:ae)}return Y.write_shift(1,0),Y}function h(O,R,G){var Y=u(O,R,G);return Y[1].v=O.read_shift(2,"i"),Y}function m(O,R,G){var Y=_t(7);return Y.write_shift(1,255),Y.write_shift(2,R),Y.write_shift(2,O),Y.write_shift(2,G,"i"),Y}function g(O,R,G){var Y=u(O,R,G);return Y[1].v=O.read_shift(8,"f"),Y}function x(O,R,G){var Y=_t(13);return Y.write_shift(1,255),Y.write_shift(2,R),Y.write_shift(2,O),Y.write_shift(8,G,"f"),Y}function v(O,R,G){var Y=O.l+R,te=u(O,R,G);if(te[1].v=O.read_shift(8,"f"),G.qpro)O.l=Y;else{var ae=O.read_shift(2);F(O.slice(O.l,O.l+ae),te),O.l+=ae}return te}function y(O,R,G){var Y=R&32768;return R&=-32769,R=(Y?O:0)+(R>=8192?R-16384:R),(Y?"":"$")+(G?us(R):Zs(R))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function F(O,R){wo(O,0);for(var G=[],Y=0,te="",ae="",oe="",ie="";O.l<O.length;){var ue=O[O.l++];switch(ue){case 0:G.push(O.read_shift(8,"f"));break;case 1:ae=y(R[0].c,O.read_shift(2),!0),te=y(R[0].r,O.read_shift(2),!1),G.push(ae+te);break;case 2:{var Ce=y(R[0].c,O.read_shift(2),!0),ne=y(R[0].r,O.read_shift(2),!1);ae=y(R[0].c,O.read_shift(2),!0),te=y(R[0].r,O.read_shift(2),!1),G.push(Ce+ne+":"+ae+te)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:G.push("("+G.pop()+")");break;case 5:G.push(O.read_shift(2));break;case 6:{for(var Be="";ue=O[O.l++];)Be+=String.fromCharCode(ue);G.push('"'+Be.replace(/"/g,'""')+'"')}break;case 8:G.push("-"+G.pop());break;case 23:G.push("+"+G.pop());break;case 22:G.push("NOT("+G.pop()+")");break;case 20:case 21:ie=G.pop(),oe=G.pop(),G.push(["AND","OR"][ue-20]+"("+oe+","+ie+")");break;default:if(ue<32&&_[ue])ie=G.pop(),oe=G.pop(),G.push(oe+_[ue]+ie);else if(w[ue]){if(Y=w[ue][1],Y==69&&(Y=O[O.l++]),Y>G.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+G.join("|")+"|");return}var je=G.slice(-Y);G.length-=Y,G.push(w[ue][0]+"("+je.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}G.length==1?R[1].f=""+G[0]:console.error("WK1 bad formula parse |"+G.join("|")+"|")}function B(O){var R=[{c:0,r:0},{t:"n",v:0},0];return R[0].r=O.read_shift(2),R[3]=O[O.l++],R[0].c=O[O.l++],R}function T(O,R){var G=B(O);return G[1].t="s",G[1].v=O.read_shift(R-4,"cstr"),G}function C(O,R,G,Y){var te=_t(6+Y.length);te.write_shift(2,O),te.write_shift(1,G),te.write_shift(1,R),te.write_shift(1,39);for(var ae=0;ae<Y.length;++ae){var oe=Y.charCodeAt(ae);te.write_shift(1,oe>=128?95:oe)}return te.write_shift(1,0),te}function S(O,R){var G=B(O);G[1].v=O.read_shift(2);var Y=G[1].v>>1;if(G[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return G[1].v=Y,G}function j(O,R){var G=B(O),Y=O.read_shift(4),te=O.read_shift(4),ae=O.read_shift(2);if(ae==65535)return Y===0&&te===3221225472?(G[1].t="e",G[1].v=15):Y===0&&te===3489660928?(G[1].t="e",G[1].v=42):G[1].v=0,G;var oe=ae&32768;return ae=(ae&32767)-16446,G[1].v=(1-oe*2)*(te*Math.pow(2,ae+32)+Y*Math.pow(2,ae)),G}function L(O,R,G,Y){var te=_t(14);if(te.write_shift(2,O),te.write_shift(1,G),te.write_shift(1,R),Y==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var ae=0,oe=0,ie=0,ue=0;return Y<0&&(ae=1,Y=-Y),oe=Math.log2(Y)|0,Y/=Math.pow(2,oe-31),ue=Y>>>0,(ue&2147483648)==0&&(Y/=2,++oe,ue=Y>>>0),Y-=ue,ue|=2147483648,ue>>>=0,Y*=Math.pow(2,32),ie=Y>>>0,te.write_shift(4,ie),te.write_shift(4,ue),oe+=16383+(ae?32768:0),te.write_shift(2,oe),te}function P(O,R){var G=j(O);return O.l+=R-14,G}function k(O,R){var G=B(O),Y=O.read_shift(4);return G[1].v=Y>>6,G}function U(O,R){var G=B(O),Y=O.read_shift(8,"f");return G[1].v=Y,G}function Q(O,R){var G=U(O);return O.l+=R-10,G}function K(O,R){return O[O.l+R-1]==0?O.read_shift(R,"cstr"):""}function H(O,R){var G=O[O.l++];G>R-1&&(G=R-1);for(var Y="";Y.length<G;)Y+=String.fromCharCode(O[O.l++]);return Y}function q(O,R,G){if(!(!G.qpro||R<21)){var Y=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var te=O.read_shift(R-21,"cstr");return[Y,te]}}function z(O,R){for(var G={},Y=O.l+R;O.l<Y;){var te=O.read_shift(2);if(te==14e3){for(G[te]=[0,""],G[te][0]=O.read_shift(2);O[O.l];)G[te][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return G}function W(O,R){var G=_t(5+O.length);G.write_shift(2,14e3),G.write_shift(2,R);for(var Y=0;Y<O.length;++Y){var te=O.charCodeAt(Y);G[G.l++]=te>127?95:te}return G[G.l++]=0,G}var ee={0:{n:"BOF",f:Ai},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:K},222:{n:"SHEETNAMELP",f:H},65535:{n:""}},X={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:T},23:{n:"NUMBER17",f:j},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:z},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:Q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:K},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function mSe(e){var t={},r=e.match(dl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Xr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=mR[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var pSe=function(){var e=l2("t"),t=l2("rPr");function r(s){var o=s.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Qn(o[1])},c=s.match(t);return c&&(l.s=mSe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),gSe=function(){var t=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),xSe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,vSe=/<(?:\w+:)?r>/,bSe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function MR(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Qn(Ea(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ea(e),r&&(n.h=CR(n.t))):e.match(vSe)&&(n.r=Ea(e),n.t=Qn(Ea((e.replace(bSe,"").match(xSe)||[]).join("").replace(dl,""))),r&&(n.h=gSe(pSe(n.r)))),n):{t:""}}var ySe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,wSe=/<(?:\w+:)?(?:si|sstItem)>/g,ESe=/<\/(?:\w+:)?(?:si|sstItem)>/;function NSe(e,t){var r=[],n="";if(!e)return r;var a=e.match(ySe);if(a){n=a[2].replace(wSe,"").split(ESe);for(var s=0;s!=n.length;++s){var o=MR(n[s].trim(),t);o!=null&&(r[r.length]=o)}a=Xr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var CSe=/^\s|\s$|[\t\n\r]/;function Ure(e,t){if(!t.bookSST)return"";var r=[ti];r[r.length]=Wt("sst",null,{xmlns:qg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(CSe)&&(s+=' xml:space="preserve"'),s+=">"+pa(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function _Se(e){return[e.read_shift(4),e.read_shift(4)]}function SSe(e,t){var r=[],n=!1;return $h(e,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function kSe(e,t){return t||(t=_t(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var jSe=MCe;function BSe(e){var t=lc();Mt(t,159,kSe(e));for(var r=0;r<e.length;++r)Mt(t,19,jSe(e[r]));return Mt(t,160),t.end()}function Qre(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function xh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function TSe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=xh(e,4),t.U=xh(e,4),t.W=xh(e,4),t}function ISe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function FSe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(ISe(e));return t}function OSe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function DSe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=xh(e,4),t.U=xh(e,4),t.W=xh(e,4),t}function PSe(e){var t=DSe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Hre(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function Vre(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function RSe(e){var t=xh(e);switch(t.Minor){case 2:return[t.Minor,LSe(e)];case 3:return[t.Minor,MSe()];case 4:return[t.Minor,USe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function LSe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=Hre(e,r),a=Vre(e,e.length-e.l);return{t:"Std",h:n,v:a}}function MSe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function USe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(dl,function(s){var o=Xr(s);switch(AA(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function QSe(e,t){var r={},n=r.EncryptionVersionInfo=xh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=Hre(e,a),t-=a,r.EncryptionVerifier=Vre(e,t),r}function HSe(e){var t={},r=t.EncryptionVersionInfo=xh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function UR(e){var t=0,r,n=Qre(e),a=n.length+1,s,o,l,c,u;for(r=Om(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var zre=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=Qre(o),c=s(l),u=l.length,d=Om(16),f=0;f!=16;++f)d[f]=0;var h,m,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,m=l[l.length-1],d[u]=a(m,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,g=15-l.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(l[u],h),--u,--g;return d}}(),VSe=function(e,t,r,n,a){a||(a=t),n||(n=zre(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},zSe=function(e){var t=0,r=zre(e);return function(n){var a=VSe("",n,t,r);return t=a[1],a[0]}};function $Se(e,t,r,n){var a={key:Ai(e),verificationBytes:Ai(e)};return r.password&&(a.verifier=UR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=zSe(r.password)),a}function GSe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=HSe(e):n.Data=QSe(e,t),n}function qSe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?GSe(e,t-2,n):$Se(e,r.biff>=8?t:t-2,r,n),n}var $re=function(){function e(a,s){switch(s.type){case"base64":return t(Jc(a),s);case"binary":return t(a,s);case"buffer":return t(vn&&Buffer.isBuffer(a)?a.toString("binary"):Xm(a),s);case"array":return t(_g(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,m=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(m,h.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(l)?l[f][x]=y:l[zr({r:f,c:x})]=y}break}m=h.lastIndex}x>u.e.c&&(u.e.c=x)}),l["!ref"]=sn(u),l}function r(a,s){return Ym(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=Hn(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=zr({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Bh(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function KSe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function f2(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function WSe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),o=a-s;if(o===0)return[0,0,t];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,u/2]}function XSe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function V_(e,t){if(t===0)return e;var r=WSe(KSe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),f2(XSe(r))}var Gre=6,YSe=15,JSe=1,Zo=Gre;function A2(e){return Math.floor((e+Math.round(128/Zo)/256)*Zo)}function h2(e){return Math.floor((e-5)/Zo*100+.5)/100}function z_(e){return Math.round((e*Zo+5)/Zo*256)/256}function bB(e){return z_(h2(A2(e)))}function QR(e){var t=Math.abs(e-bB(e)),r=Zo;if(t>.005)for(Zo=JSe;Zo<YSe;++Zo)Math.abs(e-bB(e))<=t&&(t=Math.abs(e-bB(e)),r=Zo);Zo=r}function Dm(e){e.width?(e.wpx=A2(e.width),e.wch=h2(e.wpx),e.MDW=Zo):e.wpx?(e.wch=h2(e.wpx),e.width=z_(e.wch),e.MDW=Zo):typeof e.wch=="number"&&(e.width=z_(e.wch),e.wpx=A2(e.width),e.MDW=Zo),e.customWidth&&delete e.customWidth}var ZSe=96,qre=ZSe;function m2(e){return e*96/qre}function mb(e){return e*qre/96}var eke={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function tke(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(dl)||[]).forEach(function(o){var l=Xr(o);switch(AA(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Qa(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Qa(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function rke(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(dl)||[]).forEach(function(o){var l=Xr(o);switch(AA(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function nke(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(dl)||[]).forEach(function(o){var l=Xr(o);switch(AA(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Ea(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Qa(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Qa(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Qa(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Qa(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Qa(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Qa(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Qa(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=mR[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Qa(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=ag[a.color.index];a.color.index==81&&(c=ag[1]),c||(c=ag[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=V_(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function ake(e,t,r){t.NumberFmt=[];for(var n=Ps(Qr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Qr[n[a]];var s=e[0].match(dl);if(s)for(a=0;a<s.length;++a){var o=Xr(s[a]);switch(AA(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Qn(Ea(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}gh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function ske(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Wt("numFmt",null,{numFmtId:n,formatCode:pa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Wt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var oC=["numFmtId","fillId","fontId","borderId","xfId"],lC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function ike(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(dl)||[]).forEach(function(s){var o=Xr(s),l=0;switch(AA(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<oC.length;++l)n[oC[l]]&&(n[oC[l]]=parseInt(n[oC[l]],10));for(l=0;l<lC.length;++l)n[lC[l]]&&(n[lC[l]]=Qa(n[lC[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Qa(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function oke(e){var t=[];return t[t.length]=Wt("cellXfs",null),e.forEach(function(r){t[t.length]=Wt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Wt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var lke=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&ake(f,d,u),(f=l.match(a))&&nke(f,d,c,u),(f=l.match(n))&&rke(f,d,c,u),(f=l.match(s))&&tke(f,d,c,u),(f=l.match(r))&&ike(f,d,u),d}}();function Kre(e,t){var r=[ti,Wt("styleSheet",null,{xmlns:qg[0],"xmlns:vt":Bi.vt})],n;return e.SSF&&(n=ske(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=oke(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function cke(e,t){var r=e.read_shift(2),n=il(e);return[r,n]}function uke(e,t,r){r||(r=_t(6+4*t.length)),r.write_shift(2,e),eo(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function dke(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=GCe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=$Ce(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=il(e),n}function fke(e,t){t||(t=_t(153)),t.write_shift(2,e.sz*20),qCe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),U_(e.color,t);var n=0;return n=2,t.write_shift(1,n),eo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Ake=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],yB,hke=cl;function NV(e,t){t||(t=_t(84)),yB||(yB=Zk(Ake));var r=yB[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(U_({auto:1},t),U_({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function mke(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Wre(e,t,r){r||(r=_t(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Ay(e,t){return t||(t=_t(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var pke=cl;function gke(e,t){return t||(t=_t(51)),t.write_shift(1,0),Ay(null,t),Ay(null,t),Ay(null,t),Ay(null,t),Ay(null,t),t.length>t.l?t.slice(0,t.l):t}function xke(e,t){return t||(t=_t(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),M_(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function vke(e,t,r){var n=_t(2052);return n.write_shift(4,e),M_(t,n),M_(r,n),n.length>n.l?n.slice(0,n.l):n}function bke(e,t,r){var n={};n.NumberFmt=[];for(var a in Qr)n.NumberFmt[a]=Qr[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return $h(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],gh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=V_(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function yke(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Mt(e,615,$d(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Mt(e,44,uke(a,t[a]))}),Mt(e,616))}}function wke(e){var t=1;Mt(e,611,$d(t)),Mt(e,43,fke({sz:12,color:{theme:1},name:"Calibri",family:2})),Mt(e,612)}function Eke(e){var t=2;Mt(e,603,$d(t)),Mt(e,45,NV({patternType:"none"})),Mt(e,45,NV({patternType:"gray125"})),Mt(e,604)}function Nke(e){var t=1;Mt(e,613,$d(t)),Mt(e,46,gke()),Mt(e,614)}function Cke(e){var t=1;Mt(e,626,$d(t)),Mt(e,47,Wre({numFmtId:0},65535)),Mt(e,627)}function _ke(e,t){Mt(e,617,$d(t.length)),t.forEach(function(r){Mt(e,47,Wre(r,0))}),Mt(e,618)}function Ske(e){var t=1;Mt(e,619,$d(t)),Mt(e,48,xke({xfId:0,name:"Normal"})),Mt(e,620)}function kke(e){var t=0;Mt(e,505,$d(t)),Mt(e,506)}function jke(e){var t=0;Mt(e,508,vke(t,"TableStyleMedium9","PivotStyleMedium4")),Mt(e,509)}function Bke(e,t){var r=lc();return Mt(r,278),yke(r,e.SSF),wke(r),Eke(r),Nke(r),Cke(r),_ke(r,t.cellXfs),Ske(r),kke(r),jke(r),Mt(r,279),r.end()}var Tke=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Ike(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(dl)||[]).forEach(function(a){var s=Xr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[Tke.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Fke(){}function Oke(){}var Dke=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Pke=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Rke=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Lke(e,t,r){t.themeElements={};var n;[["clrScheme",Dke,Ike],["fontScheme",Pke,Fke],["fmtScheme",Rke,Oke]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var Mke=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Xre(e,t){(!e||e.length===0)&&(e=HR());var r,n={};if(!(r=e.match(Mke)))throw new Error("themeElements not found in theme");return Lke(r[0],n,t),n.raw=e,n}function HR(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ti];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Uke(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var o;try{o=Hte(s,{type:"array"})}catch{return}var l=Vc(o,"theme/theme/theme1.xml",!0);if(l)return Xre(l,r)}}function Qke(e){return e.read_shift(4)}function Hke(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Vke(e,4);break;case 2:t.xclrValue=jre(e);break;case 3:t.xclrValue=Qke(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Vke(e,t){return cl(e,t)}function zke(e,t){return cl(e,t)}function $ke(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Hke(e);break;case 6:n[1]=zke(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Gke(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push($ke(e,r-e.l));return{ixfe:n,ext:s}}function qke(e,t){t.forEach(function(r){r[0]})}function Kke(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:il(e)}}function Wke(e){var t=_t(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),eo(e.name,t),t.slice(0,t.l)}function Xke(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Yke(e){var t=_t(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Jke(e,t){var r=_t(8+2*t.length);return r.write_shift(4,e),eo(t,r),r.slice(0,r.l)}function Zke(e){return e.l+=4,e.read_shift(4)!=0}function e4e(e,t){var r=_t(8);return r.write_shift(4,e),r.write_shift(4,1),r}function t4e(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return $h(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function r4e(){var e=lc();return Mt(e,332),Mt(e,334,$d(1)),Mt(e,335,Wke({name:"XLDAPR",version:12e4,flags:3496657072})),Mt(e,336),Mt(e,339,Jke(1,"XLDAPR")),Mt(e,52),Mt(e,35,$d(514)),Mt(e,4096,$d(0)),Mt(e,4097,Mu(1)),Mt(e,36),Mt(e,53),Mt(e,340),Mt(e,337,e4e(1)),Mt(e,51,Yke([[1,0]])),Mt(e,338),Mt(e,333),e.end()}function n4e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,o;return e.replace(dl,function(l){var c=Xr(l);switch(AA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Yre(){var e=[ti];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function a4e(e){var t=[];if(!e)return t;var r=1;return(e.match(dl)||[]).forEach(function(n){var a=Xr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function s4e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=zr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function i4e(e,t,r){var n=[];return $h(e,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function o4e(e,t,r,n){if(!e)return e;var a=n||{},s=!1;$h(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function l4e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var vv=1024;function Jre(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Wt("xml",null,{"xmlns:v":Lc.v,"xmlns:o":Lc.o,"xmlns:x":Lc.x,"xmlns:mv":Lc.mv}).replace(/\/>/,">"),Wt("o:shapelayout",Wt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Wt("v:shapetype",[Wt("v:stroke",null,{joinstyle:"miter"}),Wt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];vv<e*1e3;)vv+=1e3;return t.forEach(function(s){var o=ds(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Wt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Wt("v:fill",c,l),d={on:"t",obscured:"t"};++vv,a=a.concat(["<v:shape"+c2({id:"_x0000_s"+vv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Wt("v:shadow",null,d),Wt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Eo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Eo("x:AutoFill","False"),Eo("x:Row",String(o.r)),Eo("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function CV(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(o){var l=ds(o.ref);if(a?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[o.ref],!s){s={t:"z"},a?e[l.r][l.c]=s:e[o.ref]=s;var c=Hn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=sn(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function c4e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Xr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=ds(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&MR(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Zre(e){var t=[ti,Wt("comments",null,{xmlns:qg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=pa(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(pa(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(Eo("t",pa(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;t.push(Eo("t",pa(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function u4e(e,t){var r=[],n=!1,a={},s=0;return e.replace(dl,function(l,c){var u=Xr(l);switch(AA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function d4e(e,t,r){var n=[ti,Wt("ThreadedComments",null,{xmlns:Bi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(Wt("threadedComment",Eo("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function f4e(e,t){var r=[],n=!1;return e.replace(dl,function(s){var o=Xr(s);switch(AA(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function A4e(e){var t=[ti,Wt("personList",null,{xmlns:Bi.TCMNT,"xmlns:x":qg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Wt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function h4e(e){var t={};t.iauthor=e.read_shift(4);var r=Yg(e);return t.rfx=r.s,t.ref=zr(r.s),e.l+=16,t}function m4e(e,t){return t==null&&(t=_t(36)),t.write_shift(4,e[1].iauthor),s1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var p4e=il;function g4e(e){return eo(e.slice(0,54))}function x4e(e,t){var r=[],n=[],a={},s=!1;return $h(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function v4e(e){var t=lc(),r=[];return Mt(t,628),Mt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Mt(t,632,g4e(a.a)))})}),Mt(t,631),Mt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:ds(n[0]),e:ds(n[0])};Mt(t,635,m4e([s,a])),a.t&&a.t.length>0&&Mt(t,637,QCe(a)),Mt(t,636),delete a.iauthor})}),Mt(t,634),Mt(t,629),t.end()}var b4e="application/vnd.ms-office.vbaProject";function y4e(e){var t=jr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");jr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),jr.write(t)}function w4e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&jr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var ene=["xlsb","xlsm","xlam","biff8","xla"];function E4e(){return{"!type":"dialog"}}function N4e(){return{"!type":"dialog"}}function C4e(){return{"!type":"macro"}}function _4e(){return{"!type":"macro"}}var Uv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+us(d)+(c?"":"$")+Zs(u)}return function(a,s){return t=s,a.replace(e,r)}}(),VR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,zR=function(){return function(t,r){return t.replace(VR,function(n,a,s,o,l,c){var u=BR(o)-(s?0:r.c),d=jR(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function tne(e,t){return e.replace(VR,function(r,n,a,s,o,l){return n+(a=="$"?a+s:us(BR(s)+t.c))+(o=="$"?o+l:Zs(jR(l)+t.r))})}function S4e(e,t,r){var n=uc(t),a=n.s,s=ds(r),o={r:s.r-a.r,c:s.c-a.c};return tne(e,o)}function k4e(e){return e.length!=1}function _V(e){return e.replace(/_xlfn\./g,"")}function ci(e){e.l+=1}function Pm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function rne(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return nne(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),o=Pm(e),l=Pm(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function nne(e){var t=Pm(e),r=Pm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function j4e(e,t,r){if(r.biff<8)return nne(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=Pm(e),o=Pm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function ane(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return B4e(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Pm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function B4e(e){var t=Pm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function T4e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function I4e(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return F4e(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function F4e(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function O4e(e,t,r){var n=(e[e.l++]&96)>>5,a=rne(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function D4e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=rne(e,s,r);return[n,a,o]}function P4e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function R4e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function L4e(e,t,r){var n=(e[e.l++]&96)>>5,a=j4e(e,t-1,r);return[n,a]}function M4e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function SV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function U4e(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function Q4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function H4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function V4e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function z4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function sne(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function $4e(e){return e.read_shift(2),sne(e)}function G4e(e){return e.read_shift(2),sne(e)}function q4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=ane(e,0,r);return[n,a]}function K4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=I4e(e,0,r);return[n,a]}function W4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=ane(e,0,r);return[n,a,s]}function X4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[Zje[a],lne[a],n]}function Y4e(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:J4e(e);return[a,(s[0]===0?lne:Jje)[s[1]]]}function J4e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Z4e(e,t,r){e.l+=r&&r.biff==2?3:4}function eje(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function tje(e){return e.l++,Gh[e.read_shift(1)]}function rje(e){return e.l++,e.read_shift(2)}function nje(e){return e.l++,e.read_shift(1)!==0}function aje(e){return e.l++,rl(e)}function sje(e,t,r){return e.l++,lE(e,t-1,r)}function ije(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Gs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Gh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=rl(e);break;case 2:r[1]=Jg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function oje(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Yg:r4)(e));return a}function lje(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=ije(e,r.biff);return o}function cje(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function uje(e,t,r){if(r.biff==5)return dje(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function dje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function fje(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Aje(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function hje(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function mje(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var pje=cl,gje=cl,xje=cl;function uE(e,t,r){return e.l+=2,[T4e(e)]}function $R(e){return e.l+=6,[]}var vje=uE,bje=$R,yje=$R,wje=uE;function ine(e){return e.l+=2,[Ai(e),e.read_shift(2)&1]}var Eje=uE,Nje=ine,Cje=$R,_je=uE,Sje=uE,kje=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function jje(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),o=kje[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:s}}function Bje(e){return e.l+=2,[e.read_shift(4)]}function Tje(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Ije(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Fje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Oje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Dje(e){return e.l+=4,[0,0]}var kV={1:{n:"PtgExp",f:eje},2:{n:"PtgTbl",f:xje},3:{n:"PtgAdd",f:ci},4:{n:"PtgSub",f:ci},5:{n:"PtgMul",f:ci},6:{n:"PtgDiv",f:ci},7:{n:"PtgPower",f:ci},8:{n:"PtgConcat",f:ci},9:{n:"PtgLt",f:ci},10:{n:"PtgLe",f:ci},11:{n:"PtgEq",f:ci},12:{n:"PtgGe",f:ci},13:{n:"PtgGt",f:ci},14:{n:"PtgNe",f:ci},15:{n:"PtgIsect",f:ci},16:{n:"PtgUnion",f:ci},17:{n:"PtgRange",f:ci},18:{n:"PtgUplus",f:ci},19:{n:"PtgUminus",f:ci},20:{n:"PtgPercent",f:ci},21:{n:"PtgParen",f:ci},22:{n:"PtgMissArg",f:ci},23:{n:"PtgStr",f:sje},26:{n:"PtgSheet",f:Tje},27:{n:"PtgEndSheet",f:Ije},28:{n:"PtgErr",f:tje},29:{n:"PtgBool",f:nje},30:{n:"PtgInt",f:rje},31:{n:"PtgNum",f:aje},32:{n:"PtgArray",f:M4e},33:{n:"PtgFunc",f:X4e},34:{n:"PtgFuncVar",f:Y4e},35:{n:"PtgName",f:cje},36:{n:"PtgRef",f:q4e},37:{n:"PtgArea",f:O4e},38:{n:"PtgMemArea",f:fje},39:{n:"PtgMemErr",f:pje},40:{n:"PtgMemNoMem",f:gje},41:{n:"PtgMemFunc",f:Aje},42:{n:"PtgRefErr",f:hje},43:{n:"PtgAreaErr",f:P4e},44:{n:"PtgRefN",f:K4e},45:{n:"PtgAreaN",f:L4e},46:{n:"PtgMemAreaN",f:Fje},47:{n:"PtgMemNoMemN",f:Oje},57:{n:"PtgNameX",f:uje},58:{n:"PtgRef3d",f:W4e},59:{n:"PtgArea3d",f:D4e},60:{n:"PtgRefErr3d",f:mje},61:{n:"PtgAreaErr3d",f:R4e},255:{}},Pje={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Rje={1:{n:"PtgElfLel",f:ine},2:{n:"PtgElfRw",f:_je},3:{n:"PtgElfCol",f:vje},6:{n:"PtgElfRwV",f:Sje},7:{n:"PtgElfColV",f:wje},10:{n:"PtgElfRadical",f:Eje},11:{n:"PtgElfRadicalS",f:Cje},13:{n:"PtgElfColS",f:bje},15:{n:"PtgElfColSV",f:yje},16:{n:"PtgElfRadicalLel",f:Nje},25:{n:"PtgList",f:jje},29:{n:"PtgSxName",f:Bje},255:{}},Lje={0:{n:"PtgAttrNoop",f:Dje},1:{n:"PtgAttrSemi",f:z4e},2:{n:"PtgAttrIf",f:H4e},4:{n:"PtgAttrChoose",f:U4e},8:{n:"PtgAttrGoto",f:Q4e},16:{n:"PtgAttrSum",f:Z4e},32:{n:"PtgAttrBaxcel",f:SV},33:{n:"PtgAttrBaxcel",f:SV},64:{n:"PtgAttrSpace",f:$4e},65:{n:"PtgAttrSpaceSemi",f:G4e},128:{n:"PtgAttrIfError",f:V4e},255:{}};function dE(e,t,r,n){if(n.biff<8)return cl(e,t);for(var a=e.l+t,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=lje(e,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=oje(e,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&s.push(cl(e,t)),s}function fE(e,t,r){for(var n=e.l+t,a,s,o=[];n!=e.l;)t=n-e.l,s=e[e.l],a=kV[s]||kV[Pje[s]],(s===24||s===25)&&(a=(s===24?Rje:Lje)[e[e.l+1]]),!a||!a.f?cl(e,t):o.push([a.n,a.f(e,t,r)]);return o}function Mje(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Uje={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Qje(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function one(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function jV(e,t,r){var n=one(e,t,r);return n=="#REF"?n:Qje(n,r)}function Xo(e,t,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,w=e[0].length;y<w;++y){var _=e[0][y];switch(_[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=Bs(" ",e[0][x][1][1]);break;case 1:v=Bs("\r",e[0][x][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+v,x=-1}l.push(u+Uje[_[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=ww(_[1][1],o,a),l.push(Ew(d,s));break;case"PtgRefN":d=r?ww(_[1][1],r,a):_[1][1],l.push(Ew(d,s));break;case"PtgRef3d":f=_[1][1],d=ww(_[1][2],o,a),g=jV(n,f,a),l.push(g+"!"+Ew(d,s));break;case"PtgFunc":case"PtgFuncVar":var F=_[1][0],B=_[1][1];F||(F=0),F&=127;var T=F==0?[]:l.slice(-F);l.length-=F,B==="User"&&(B=T.shift()),l.push(B+"("+T.join(",")+")");break;case"PtgBool":l.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(_[1]);break;case"PtgNum":l.push(String(_[1]));break;case"PtgStr":l.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(_[1]);break;case"PtgAreaN":m=aV(_[1][1],r?{s:r}:o,a),l.push(gB(m,a));break;case"PtgArea":m=aV(_[1][1],o,a),l.push(gB(m,a));break;case"PtgArea3d":f=_[1][1],m=_[1][2],g=jV(n,f,a),l.push(g+"!"+gB(m,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var C=(n.names||[])[h-1]||(n[0]||[])[h],S=C?C.Name:"SH33TJSNAME"+String(h);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var j=_[1][1];h=_[1][2];var L;if(a.biff<=5)j<0&&(j=-j),n[j]&&(L=n[j][h]);else{var P="";if(((n[j]||[])[0]||[])[0]==14849||(((n[j]||[])[0]||[])[0]==1025?n[j][h]&&n[j][h].itab>0&&(P=n.SheetNames[n[j][h].itab-1]+"!"):P=n.SheetNames[h-1]+"!"),n[j]&&n[j][h])P+=n[j][h].Name;else if(n[0]&&n[0][h])P+=n[0][h].Name;else{var k=(one(n,j,a)||"").split(";;");k[h-1]?P=k[h-1]:P+="SH33TJSERRX"}l.push(P);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var U="(",Q=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:U=Bs(" ",e[0][x][1][1])+U;break;case 3:U=Bs("\r",e[0][x][1][1])+U;break;case 4:Q=Bs(" ",e[0][x][1][1])+Q;break;case 5:Q=Bs("\r",e[0][x][1][1])+Q;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(U+l.pop()+Q);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:_[1][1],r:_[1][0]};var K={c:r.c,r:r.r};if(n.sharedf[zr(d)]){var H=n.sharedf[zr(d)];l.push(Xo(H,o,K,n,a))}else{var q=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Xo(u[1],o,K,n,a)),q=!0;break}q||l.push(_[1])}break;case"PtgArray":l.push("{"+Mje(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var z=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&z.indexOf(e[0][y][0])==-1){_=e[0][x];var W=!0;switch(_[1][0]){case 4:W=!1;case 0:v=Bs(" ",_[1][1]);break;case 5:W=!1;case 1:v=Bs("\r",_[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}l.push((W?v:"")+l.pop()+(W?"":v)),x=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function Hje(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],cl(e,t-2)];var l=fE(e,o,r);return t!==o+a&&(s=dE(e,t-o-a,l,r)),e.l=n,[l,s]}function Vje(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],cl(e,t-2)];var l=fE(e,o,r);return t!==o+a&&(s=dE(e,t-o-a,l,r)),e.l=n,[l,s]}function zje(e,t,r,n){var a=e.l+t,s=fE(e,n,r),o;return a!==e.l&&(o=dE(e,a-e.l,s,r)),[s,o]}function $je(e,t,r){var n=e.l+t,a,s=e.read_shift(2),o=fE(e,s,r);return s==65535?[[],cl(e,t-2)]:(t!==s+2&&(a=dE(e,n-s-2,o,r)),[o,a])}function Gje(e){var t;if(oh(e,e.l+6)!==65535)return[rl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function qje(e){if(e==null){var t=_t(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Sg(e);return Sg(0)}function wB(e,t,r){var n=e.l+t,a=hA(e);r.biff==2&&++e.l;var s=Gje(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Vje(e,n-e.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function Kje(e,t,r,n,a){var s=jg(t,r,a),o=qje(e.v),l=_t(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=_t(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Zi([s,o,l,u]);return f}function n4(e,t,r){var n=e.read_shift(4),a=fE(e,n,r),s=e.read_shift(4),o=s>0?dE(e,s,a,r):null;return[a,o]}var Wje=n4,a4=n4,Xje=n4,Yje=n4,Jje={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},lne={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Zje={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function BV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function e3e(e){var t="of:="+e.replace(VR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function EB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function t3e(e){return e.replace(/\./,"!")}var Cw={},Qv={},_w=typeof Map<"u";function GR(e,t,r){var n=0,a=e.length;if(r){if(_w?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=_w?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(_w?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function s4(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Zo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=h2(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=z_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function og(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Jm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){gh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function cne(e,t,r,n,a,s){try{n.cellNF&&(e.z=Qr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=za(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Qr[t]==null&&gh(JNe[t]||"General",t),e.t==="e")e.w=e.w||Gh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=o2(e.v);else if(e.t==="d"){var o=Fi(e.v);(o|0)===o?e.w=o.toString(10):e.w=o2(o)}else{if(e.v===void 0)return"";e.w=Cg(e.v,Qv)}else e.t==="d"?e.w=Ju(t,Fi(e.v),Qv):e.w=Ju(t,e.v,Qv)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=V_(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=V_(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function r3e(e,t,r){if(e&&e["!ref"]){var n=Hn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function n3e(e,t){var r=Hn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=sn(r))}var a3e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,s3e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,i3e=/<(?:\w:)?hyperlink [^>]*>/mg,o3e=/"(\w*:\w*)"/,l3e=/<(?:\w:)?col\b[^>]*[\/]?>/g,c3e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,u3e=/<(?:\w:)?pageMargins[^>]*\/>/g,une=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,d3e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,f3e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function A3e(e,t,r,n,a,s,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(s3e);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(une);h?qR(h[0],l,a,r):(h=u.match(d3e))&&m3e(h[0],h[1]||"",l,a,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=u.slice(m,m+50).match(o3e);g&&n3e(l,g[1])}var x=u.match(f3e);x&&x[1]&&k3e(x[1],a);var v=[];if(t.cellStyles){var y=u.match(l3e);y&&E3e(v,y)}f&&T3e(f[1],l,t,c,s,o);var w=d.match(c3e);w&&(l["!autofilter"]=C3e(w[0]));var _=[],F=d.match(a3e);if(F)for(m=0;m!=F.length;++m)_[m]=Hn(F[m].slice(F[m].indexOf('"')+1));var B=d.match(i3e);B&&b3e(l,B,n);var T=d.match(u3e);if(T&&(l["!margins"]=y3e(Xr(T[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=sn(c)),t.sheetRows>0&&l["!ref"]){var C=Hn(l["!ref"]);t.sheetRows<=+C.e.r&&(C.e.r=t.sheetRows-1,C.e.r>c.e.r&&(C.e.r=c.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>c.e.c&&(C.e.c=c.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),l["!fullref"]=l["!ref"],l["!ref"]=sn(C))}return v.length>0&&(l["!cols"]=v),_.length>0&&(l["!merges"]=_),l}function h3e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+sn(e[r])+'"/>';return t+"</mergeCells>"}function qR(e,t,r,n){var a=Xr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Qn(Ea(a.codeName)))}function m3e(e,t,r,n,a){qR(e.slice(0,e.indexOf(">")),r,n,a)}function p3e(e,t,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=Xf(pa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+Wt("outlinePr",null,u)}!s&&!l||(a[a.length]=Wt("sheetPr",l,o))}var g3e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],x3e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function v3e(e){var t={sheet:1};return g3e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),x3e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=UR(e.password).toString(16).toUpperCase()),Wt("sheetProtection",null,t)}function b3e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Xr(Ea(t[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+Qn(s.location))):(s.Target="#"+Qn(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Hn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=zr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function y3e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function w3e(e){return og(e),Wt("pageMargins",null,e)}function E3e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Xr(t[n],!0);a.hidden&&(a.hidden=Qa(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,QR(a.width)),Dm(a);s<=o;)e[s++]=$a(a)}}function N3e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Wt("col",null,s4(a,n)));return r[r.length]="</cols>",r.join("")}function C3e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function _3e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:sn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=uc(a);o.s.r==o.e.r&&(o.e.r=uc(t["!ref"]).e.r,a=sn(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Wt("autoFilter",null,{ref:a})}var S3e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function k3e(e,t){t.Views||(t.Views=[{}]),(e.match(S3e)||[]).forEach(function(r,n){var a=Xr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Qa(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function j3e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Wt("sheetViews",Wt("sheetView",null,a),{})}function B3e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Gh[e.v];break;case"d":n&&n.cellDates?a=za(e.v,-1).toISOString():(e=$a(e),e.t="n",a=""+(e.v=Fi(za(e.v)))),typeof e.z>"u"&&(e.z=Qr[14]);break;default:a=e.v;break}var l=Eo("v",pa(a)),c={r:t},u=Jm(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Eo("v",""+GR(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Wt("f",pa(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Wt("c",l,c)}var T3e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=l2("v"),o=l2("f");return function(c,u,d,f,h,m){for(var g=0,x="",v=[],y=[],w=0,_=0,F=0,B="",T,C,S=0,j=0,L,P,k=0,U=0,Q=Array.isArray(m.CellXf),K,H=[],q=[],z=Array.isArray(u),W=[],ee={},X=!1,O=!!d.sheetStubs,R=c.split(t),G=0,Y=R.length;G!=Y;++G){x=R[G].trim();var te=x.length;if(te!==0){var ae=0;e:for(g=0;g<te;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(C=Xr(x.slice(ae,g),!0),S=C.r!=null?parseInt(C.r,10):S+1,j=-1,d.sheetRows&&d.sheetRows<S)continue;ee={},X=!1,C.ht&&(X=!0,ee.hpt=parseFloat(C.ht),ee.hpx=mb(ee.hpt)),C.hidden=="1"&&(X=!0,ee.hidden=!0),C.outlineLevel!=null&&(X=!0,ee.level=+C.outlineLevel),X&&(W[S-1]=ee)}break;case"<":ae=g;break}if(ae>=g)break;if(C=Xr(x.slice(ae,g),!0),S=C.r!=null?parseInt(C.r,10):S+1,j=-1,!(d.sheetRows&&d.sheetRows<S)){f.s.r>S-1&&(f.s.r=S-1),f.e.r<S-1&&(f.e.r=S-1),d&&d.cellStyles&&(ee={},X=!1,C.ht&&(X=!0,ee.hpt=parseFloat(C.ht),ee.hpx=mb(ee.hpt)),C.hidden=="1"&&(X=!0,ee.hidden=!0),C.outlineLevel!=null&&(X=!0,ee.level=+C.outlineLevel),X&&(W[S-1]=ee)),v=x.slice(g).split(e);for(var oe=0;oe!=v.length&&v[oe].trim().charAt(0)=="<";++oe);for(v=v.slice(oe),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),w=g,_=0,F=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,B=y[1],_=0;_!=B.length&&!((F=B.charCodeAt(_)-64)<1||F>26);++_)w=26*w+F;--w,j=w}else++j;for(_=0;_!=x.length&&x.charCodeAt(_)!==62;++_);if(++_,C=Xr(x.slice(0,_),!0),C.r||(C.r=zr({r:S-1,c:j})),B=x.slice(_),T={t:""},(y=B.match(s))!=null&&y[1]!==""&&(T.v=Qn(y[1])),d.cellFormula){if((y=B.match(o))!=null&&y[1]!==""){if(T.f=Qn(Ea(y[1])).replace(/\r\n/g,`
`),d.xlfn||(T.f=_V(T.f)),y[0].indexOf('t="array"')>-1)T.F=(B.match(a)||[])[1],T.F.indexOf(":")>-1&&H.push([Hn(T.F),T.F]);else if(y[0].indexOf('t="shared"')>-1){P=Xr(y[0]);var ie=Qn(Ea(y[1]));d.xlfn||(ie=_V(ie)),q[parseInt(P.si,10)]=[P,ie,C.r]}}else(y=B.match(/<f[^>]*\/>/))&&(P=Xr(y[0]),q[P.si]&&(T.f=S4e(q[P.si][1],q[P.si][2],C.r)));var ue=ds(C.r);for(_=0;_<H.length;++_)ue.r>=H[_][0].s.r&&ue.r<=H[_][0].e.r&&ue.c>=H[_][0].s.c&&ue.c<=H[_][0].e.c&&(T.F=H[_][1])}if(C.t==null&&T.v===void 0)if(T.f||T.F)T.v=0,T.t="n";else if(O)T.t="z";else continue;else T.t=C.t||"n";switch(f.s.c>j&&(f.s.c=j),f.e.c<j&&(f.e.c=j),T.t){case"n":if(T.v==""||T.v==null){if(!O)continue;T.t="z"}else T.v=parseFloat(T.v);break;case"s":if(typeof T.v>"u"){if(!O)continue;T.t="z"}else L=Cw[parseInt(T.v,10)],T.v=L.t,T.r=L.r,d.cellHTML&&(T.h=L.h);break;case"str":T.t="s",T.v=T.v!=null?Ea(T.v):"",d.cellHTML&&(T.h=CR(T.v));break;case"inlineStr":y=B.match(n),T.t="s",y!=null&&(L=MR(y[1]))?(T.v=L.t,d.cellHTML&&(T.h=L.h)):T.v="";break;case"b":T.v=Qa(T.v);break;case"d":d.cellDates?T.v=za(T.v,1):(T.v=Fi(za(T.v,1)),T.t="n");break;case"e":(!d||d.cellText!==!1)&&(T.w=T.v),T.v=fre[T.v];break}if(k=U=0,K=null,Q&&C.s!==void 0&&(K=m.CellXf[C.s],K!=null&&(K.numFmtId!=null&&(k=K.numFmtId),d.cellStyles&&K.fillId!=null&&(U=K.fillId))),cne(T,k,U,d,h,m),d.cellDates&&Q&&T.t=="n"&&r1(Qr[k])&&(T.t="d",T.v=t4(T.v)),C.cm&&d.xlmeta){var Ce=(d.xlmeta.Cell||[])[+C.cm-1];Ce&&Ce.type=="XLDAPR"&&(T.D=!0)}if(z){var ne=ds(C.r);u[ne.r]||(u[ne.r]=[]),u[ne.r][ne.c]=T}else u[C.r]=T}}}}W.length>0&&(u["!rows"]=W)}}();function I3e(e,t,r,n){var a=[],s=[],o=Hn(e["!ref"]),l="",c,u="",d=[],f=0,h=0,m=e["!rows"],g=Array.isArray(e),x={r:u},v,y=-1;for(h=o.s.c;h<=o.e.c;++h)d[h]=us(h);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=Zs(f),h=o.s.c;h<=o.e.c;++h){c=d[h]+u;var w=g?(e[f]||[])[h]:e[c];w!==void 0&&(l=B3e(w,c,e,t))!=null&&s.push(l)}(s.length>0||m&&m[f])&&(x={r:u},m&&m[f]&&(v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=m2(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),a[a.length]=Wt("row",s.join(""),x))}if(m)for(;f<m.length;++f)m&&m[f]&&(x={r:f+1},v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=m2(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),a[a.length]=Wt("row","",x));return a.join("")}function dne(e,t,r,n){var a=[ti,Wt("worksheet",null,{xmlns:qg[0],"xmlns:r":Bi.r})],s=r.SheetNames[e],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Hn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=sn(d)}n||(n={}),c["!comments"]=[];var f=[];p3e(c,r,e,t,a),a[a.length]=Wt("dimension",null,{ref:u}),a[a.length]=j3e(c,t,e,r),t.sheetFormat&&(a[a.length]=Wt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=N3e(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=I3e(c,t),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=v3e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=_3e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=h3e(c["!merges"]));var h=-1,m,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=ha(n,-1,pa(x[1].Target).replace(/#.*$/,""),Cn.HLINK),m["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(m.location=pa(x[1].Target.slice(h+1))),x[1].Tooltip&&(m.tooltip=pa(x[1].Tooltip)),a[a.length]=Wt("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=w3e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Eo("ignoredErrors",Wt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=ha(n,-1,"../drawings/drawing"+(e+1)+".xml",Cn.DRAW),a[a.length]=Wt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=ha(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Cn.VML),a[a.length]=Wt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function F3e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function O3e(e,t,r){var n=_t(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=m2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[zr(u)];g&&(f<0&&(f=m),h=m)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var x=n.l;return n.l=c,n.write_shift(4,l),n.l=x,n.length>n.l?n.slice(0,n.l):n}function D3e(e,t,r,n){var a=O3e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Mt(e,0,a)}var P3e=Yg,R3e=s1;function L3e(){}function M3e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=HCe(e),r}function U3e(e,t,r){r==null&&(r=_t(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return U_({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),ore(e,r),r.slice(0,r.l)}function Q3e(e){var t=td(e);return[t]}function H3e(e,t,r){return r==null&&(r=_t(8)),Kg(t,r)}function V3e(e){var t=Wg(e);return[t]}function z3e(e,t,r){return r==null&&(r=_t(4)),Xg(t,r)}function $3e(e){var t=td(e),r=e.read_shift(1);return[t,r,"b"]}function G3e(e,t,r){return r==null&&(r=_t(9)),Kg(t,r),r.write_shift(1,e.v?1:0),r}function q3e(e){var t=Wg(e),r=e.read_shift(1);return[t,r,"b"]}function K3e(e,t,r){return r==null&&(r=_t(5)),Xg(t,r),r.write_shift(1,e.v?1:0),r}function W3e(e){var t=td(e),r=e.read_shift(1);return[t,r,"e"]}function X3e(e,t,r){return r==null&&(r=_t(9)),Kg(t,r),r.write_shift(1,e.v),r}function Y3e(e){var t=Wg(e),r=e.read_shift(1);return[t,r,"e"]}function J3e(e,t,r){return r==null&&(r=_t(8)),Xg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Z3e(e){var t=td(e),r=e.read_shift(4);return[t,r,"s"]}function eBe(e,t,r){return r==null&&(r=_t(12)),Kg(t,r),r.write_shift(4,t.v),r}function tBe(e){var t=Wg(e),r=e.read_shift(4);return[t,r,"s"]}function rBe(e,t,r){return r==null&&(r=_t(8)),Xg(t,r),r.write_shift(4,t.v),r}function nBe(e){var t=td(e),r=rl(e);return[t,r,"n"]}function aBe(e,t,r){return r==null&&(r=_t(16)),Kg(t,r),Sg(e.v,r),r}function fne(e){var t=Wg(e),r=rl(e);return[t,r,"n"]}function sBe(e,t,r){return r==null&&(r=_t(12)),Xg(t,r),Sg(e.v,r),r}function iBe(e){var t=td(e),r=OR(e);return[t,r,"n"]}function oBe(e,t,r){return r==null&&(r=_t(12)),Kg(t,r),lre(e.v,r),r}function lBe(e){var t=Wg(e),r=OR(e);return[t,r,"n"]}function cBe(e,t,r){return r==null&&(r=_t(8)),Xg(t,r),lre(e.v,r),r}function uBe(e){var t=td(e),r=TR(e);return[t,r,"is"]}function dBe(e){var t=td(e),r=il(e);return[t,r,"str"]}function fBe(e,t,r){return r==null&&(r=_t(12+4*e.v.length)),Kg(t,r),eo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function ABe(e){var t=Wg(e),r=il(e);return[t,r,"str"]}function hBe(e,t,r){return r==null&&(r=_t(8+4*e.v.length)),Xg(t,r),eo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function mBe(e,t,r){var n=e.l+t,a=td(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"b"];if(r.cellFormula){e.l+=2;var l=a4(e,n-e.l,r);o[3]=Xo(l,null,a,r.supbooks,r)}else e.l=n;return o}function pBe(e,t,r){var n=e.l+t,a=td(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"e"];if(r.cellFormula){e.l+=2;var l=a4(e,n-e.l,r);o[3]=Xo(l,null,a,r.supbooks,r)}else e.l=n;return o}function gBe(e,t,r){var n=e.l+t,a=td(e);a.r=r["!row"];var s=rl(e),o=[a,s,"n"];if(r.cellFormula){e.l+=2;var l=a4(e,n-e.l,r);o[3]=Xo(l,null,a,r.supbooks,r)}else e.l=n;return o}function xBe(e,t,r){var n=e.l+t,a=td(e);a.r=r["!row"];var s=il(e),o=[a,s,"str"];if(r.cellFormula){e.l+=2;var l=a4(e,n-e.l,r);o[3]=Xo(l,null,a,r.supbooks,r)}else e.l=n;return o}var vBe=Yg,bBe=s1;function yBe(e,t){return t==null&&(t=_t(4)),t.write_shift(4,e),t}function wBe(e,t){var r=e.l+t,n=Yg(e),a=IR(e),s=il(e),o=il(e),l=il(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function EBe(e,t){var r=_t(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));s1({s:ds(e[0]),e:ds(e[0])},r),FR("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return eo(a||"",r),eo(e[1].Tooltip||"",r),eo("",r),r.slice(0,r.l)}function NBe(){}function CBe(e,t,r){var n=e.l+t,a=cre(e),s=e.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=Wje(e,n-e.l,r);o[1]=l}else e.l=n;return o}function _Be(e,t,r){var n=e.l+t,a=Yg(e),s=[a];if(r.cellFormula){var o=Yje(e,n-e.l,r);s[1]=o,e.l=n}else e.l=n;return s}function SBe(e,t,r){r==null&&(r=_t(18));var n=s4(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var Ane=["left","right","top","bottom","header","footer"];function kBe(e){var t={};return Ane.forEach(function(r){t[r]=rl(e)}),t}function jBe(e,t){return t==null&&(t=_t(48)),og(e),Ane.forEach(function(r){Sg(e[r],t)}),t}function BBe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function TBe(e,t,r){r==null&&(r=_t(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function IBe(e){var t=_t(24);return t.write_shift(4,4),t.write_shift(4,1),s1(e,t),t}function FBe(e,t){return t==null&&(t=_t(66)),t.write_shift(2,e.password?UR(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function OBe(){}function DBe(){}function PBe(e,t,r,n,a,s,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,m,g,x,v,y,w,_,F,B,T=[];l.biff=12,l["!row"]=0;var C=0,S=!1,j=[],L={},P=l.supbooks||a.supbooks||[[]];if(P.sharedf=L,P.arrayf=j,P.SheetNames=a.SheetNames||a.Sheets.map(function(z){return z.name}),!l.supbooks&&(l.supbooks=P,a.Names))for(var k=0;k<a.Names.length;++k)P[0][k+1]=a.Names[k];var U=[],Q=[],K=!1;p2[16]={n:"BrtShortReal",f:fne};var H;if($h(e,function(W,ee,X){if(!h)switch(X){case 148:u=W;break;case 0:m=W,l.sheetRows&&l.sheetRows<=m.r&&(h=!0),F=Zs(v=m.r),l["!row"]=m.r,(W.hidden||W.hpt||W.level!=null)&&(W.hpt&&(W.hpx=mb(W.hpt)),Q[W.r]=W);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:W[2]},W[2]){case"n":g.v=W[1];break;case"s":_=Cw[W[1]],g.v=_.t,g.r=_.r;break;case"b":g.v=!!W[1];break;case"e":g.v=W[1],l.cellText!==!1&&(g.w=Gh[g.v]);break;case"str":g.t="s",g.v=W[1];break;case"is":g.t="s",g.v=W[1].t;break}if((x=o.CellXf[W[0].iStyleRef])&&cne(g,x.numFmtId,null,l,s,o),y=W[0].c==-1?y+1:W[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[us(y)+F]=g,l.cellFormula){for(S=!1,C=0;C<j.length;++C){var O=j[C];m.r>=O[0].s.r&&m.r<=O[0].e.r&&y>=O[0].s.c&&y<=O[0].e.c&&(g.F=sn(O[0]),S=!0)}!S&&W.length>3&&(g.f=W[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),l.cellDates&&x&&g.t=="n"&&r1(Qr[x.numFmtId])){var R=Gp(g.v);R&&(g.t="d",g.v=new Date(R.y,R.m-1,R.d,R.H,R.M,R.S,R.u))}H&&(H.type=="XLDAPR"&&(g.D=!0),H=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;g={t:"z",v:void 0},y=W[0].c==-1?y+1:W[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[us(y)+F]=g,d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),H&&(H.type=="XLDAPR"&&(g.D=!0),H=void 0);break;case 176:T.push(W);break;case 49:H=((l.xlmeta||{}).Cell||[])[W-1];break;case 494:var G=n["!id"][W.relId];for(G?(W.Target=G.Target,W.loc&&(W.Target+="#"+W.loc),W.Rel=G):W.relId==""&&(W.Target="#"+W.loc),v=W.rfx.s.r;v<=W.rfx.e.r;++v)for(y=W.rfx.s.c;y<=W.rfx.e.c;++y)l.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=W):(w=zr({c:y,r:v}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=W);break;case 426:if(!l.cellFormula)break;j.push(W),B=l.dense?c[v][y]:c[us(y)+F],B.f=Xo(W[1],d,{r:m.r,c:y},P,l),B.F=sn(W[0]);break;case 427:if(!l.cellFormula)break;L[zr(W[0].s)]=W[1],B=l.dense?c[v][y]:c[us(y)+F],B.f=Xo(W[1],d,{r:m.r,c:y},P,l);break;case 60:if(!l.cellStyles)break;for(;W.e>=W.s;)U[W.e--]={width:W.w/256,hidden:!!(W.flags&1),level:W.level},K||(K=!0,QR(W.w/256)),Dm(U[W.e+1]);break;case 161:c["!autofilter"]={ref:sn(W)};break;case 476:c["!margins"]=W;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),W.name&&(a.Sheets[r].CodeName=W.name),(W.above||W.left)&&(c["!outline"]={above:W.above,left:W.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),W.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ee.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+X.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=sn(u||d)),l.sheetRows&&c["!ref"]){var q=Hn(c["!ref"]);l.sheetRows<=+q.e.r&&(q.e.r=l.sheetRows-1,q.e.r>d.e.r&&(q.e.r=d.e.r),q.e.r<q.s.r&&(q.s.r=q.e.r),q.e.c>d.e.c&&(q.e.c=d.e.c),q.e.c<q.s.c&&(q.s.c=q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=sn(q))}return T.length>0&&(c["!merges"]=T),U.length>0&&(c["!cols"]=U),Q.length>0&&(c["!rows"]=Q),c}function RBe(e,t,r,n,a,s,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=$a(t),t.z=t.z||Qr[14],t.v=Fi(za(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=Jm(a.cellXfs,t,a),t.l&&s["!links"].push([zr(c),t.l]),t.c&&s["!comments"].push([zr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=GR(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,o?Mt(e,18,rBe(t,c)):Mt(e,7,eBe(t,c))):(c.t="str",o?Mt(e,17,hBe(t,c)):Mt(e,6,fBe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Mt(e,13,cBe(t,c)):Mt(e,2,oBe(t,c)):o?Mt(e,16,sBe(t,c)):Mt(e,5,aBe(t,c)),!0;case"b":return c.t="b",o?Mt(e,15,K3e(t,c)):Mt(e,4,G3e(t,c)),!0;case"e":return c.t="e",o?Mt(e,14,J3e(t,c)):Mt(e,3,X3e(t,c)),!0}return o?Mt(e,12,z3e(t,c)):Mt(e,1,H3e(t,c)),!0}function LBe(e,t,r,n){var a=Hn(t["!ref"]||"A1"),s,o="",l=[];Mt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=Zs(d),D3e(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=us(h)),s=l[h]+o;var m=c?(t[d]||[])[h]:t[s];if(!m){f=!1;continue}f=RBe(e,m,d,h,n,t,f)}}Mt(e,146)}function MBe(e,t){!t||!t["!merges"]||(Mt(e,177,yBe(t["!merges"].length)),t["!merges"].forEach(function(r){Mt(e,176,bBe(r))}),Mt(e,178))}function UBe(e,t){!t||!t["!cols"]||(Mt(e,390),t["!cols"].forEach(function(r,n){r&&Mt(e,60,SBe(n,r))}),Mt(e,391))}function QBe(e,t){!t||!t["!ref"]||(Mt(e,648),Mt(e,649,IBe(Hn(t["!ref"]))),Mt(e,650))}function HBe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ha(r,-1,n[1].Target.replace(/#.*$/,""),Cn.HLINK);Mt(e,494,EBe(n,a))}}),delete t["!links"]}function VBe(e,t,r,n){if(t["!comments"].length>0){var a=ha(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Cn.VML);Mt(e,551,FR("rId"+a)),t["!legacy"]=a}}function zBe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:sn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=uc(s);l.s.r==l.e.r&&(l.e.r=uc(t["!ref"]).e.r,s=sn(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Mt(e,161,s1(Hn(s))),Mt(e,162)}}function $Be(e,t,r){Mt(e,133),Mt(e,137,TBe(t,r)),Mt(e,138),Mt(e,134)}function GBe(e,t){t["!protect"]&&Mt(e,535,FBe(t["!protect"]))}function qBe(e,t,r,n){var a=lc(),s=r.SheetNames[e],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Hn(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Mt(a,129),(r.vbaraw||o["!outline"])&&Mt(a,147,U3e(l,o["!outline"])),Mt(a,148,R3e(c)),$Be(a,o,r.Workbook),UBe(a,o),LBe(a,o,e,t),GBe(a,o),zBe(a,o,r,e),MBe(a,o),HBe(a,o,n),o["!margins"]&&Mt(a,476,jBe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&QBe(a,o),VBe(a,o,e,n),Mt(a,130),a.end()}function KBe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var a=Qn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function WBe(e,t,r,n,a,s){var o=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=KBe(f);d.s.r=d.s.c=0,d.e.c=l,u=us(l),h[0].forEach(function(m,g){o[u+Zs(g)]={t:"n",v:m,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=sn(d)),o}function XBe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(une);return l&&qR(l[0],s,a,r),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function YBe(e,t){e.l+=10;var r=il(e);return{name:r}}function JBe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return $h(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var KR=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],ZBe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],eTe=[],tTe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function TV(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Qa(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function IV(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Qa(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function hne(e){IV(e.WBProps,KR),IV(e.CalcPr,tTe),TV(e.WBView,ZBe),TV(e.Sheets,eTe),Qv.date1904=Qa(e.WBProps.date1904)}function rTe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Qa(e.Workbook.WBProps.date1904)?"true":"false"}var nTe="][*?/\\".split("");function mne(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return nTe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function aTe(e,t,r){e.forEach(function(n,a){mne(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[a]&&t[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function sTe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];aTe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)r3e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var iTe=/<\w+:workbook/;function oTe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(e.replace(dl,function(c,u){var d=Xr(c);switch(AA(d[0])){case"<?xml":break;case"<workbook":c.match(iTe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":KR.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Qa(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ea(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Qn(Ea(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ea(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Qa(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=Qn(Ea(e.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),qg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return hne(r),r}function pne(e){var t=[ti];t[t.length]=Wt("workbook",null,{xmlns:qg[0],"xmlns:r":Bi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(KR.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Wt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:pa(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Wt("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Wt("definedName",pa(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function lTe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=EF(e),r.name=il(e),r}function cTe(e,t){return t||(t=_t(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),FR(e.strRelID,t),eo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function uTe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?il(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function dTe(e,t){t||(t=_t(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),ore(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function fTe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function ATe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=VCe(e),o=Xje(e,0,r),l=IR(e);e.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function hTe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],p2[16]={n:"BrtFRTArchID$",f:fTe},$h(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Xo(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),hne(r),r.Names=s,r.supbooks=o,r}function mTe(e,t){Mt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Mt(e,156,cTe(a))}Mt(e,144)}function pTe(e,t){t||(t=_t(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return eo("SheetJS",t),eo(F_.version,t),eo(F_.version,t),eo("7262",t),t.length>t.l?t.slice(0,t.l):t}function gTe(e,t){t||(t=_t(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function xTe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Mt(e,135),Mt(e,158,gTe(a)),Mt(e,136))}}function vTe(e,t){var r=lc();return Mt(r,131),Mt(r,128,pTe()),Mt(r,153,dTe(e.Workbook&&e.Workbook.WBProps||null)),xTe(r,e),mTe(r,e),Mt(r,132),r.end()}function bTe(e,t,r){return t.slice(-4)===".bin"?hTe(e,r):oTe(e,r)}function yTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?PBe(e,n,r,a,s,o,l):A3e(e,n,r,a,s,o,l)}function wTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?JBe(e,n,r,a,s):XBe(e,n,r,a,s)}function ETe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?C4e():_4e()}function NTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?E4e():N4e()}function CTe(e,t,r,n){return t.slice(-4)===".bin"?bke(e,r,n):lke(e,r,n)}function _Te(e,t,r){return Xre(e,r)}function STe(e,t,r){return t.slice(-4)===".bin"?SSe(e,r):NSe(e,r)}function kTe(e,t,r){return t.slice(-4)===".bin"?x4e(e,r):c4e(e,r)}function jTe(e,t,r){return t.slice(-4)===".bin"?i4e(e):a4e(e)}function BTe(e,t,r,n){return r.slice(-4)===".bin"?o4e(e,t,r,n):void 0}function TTe(e,t,r){return t.slice(-4)===".bin"?t4e(e,t,r):n4e(e,t,r)}function ITe(e,t,r){return(t.slice(-4)===".bin"?vTe:pne)(e)}function FTe(e,t,r,n,a){return(t.slice(-4)===".bin"?qBe:dne)(e,r,n,a)}function OTe(e,t,r){return(t.slice(-4)===".bin"?Bke:Kre)(e,r)}function DTe(e,t,r){return(t.slice(-4)===".bin"?BSe:Ure)(e,r)}function PTe(e,t,r){return(t.slice(-4)===".bin"?v4e:Zre)(e)}function RTe(e){return(e.slice(-4)===".bin"?r4e:Yre)()}var gne=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,xne=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Sd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(gne),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(xne),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function LTe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(gne),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(xne),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var Sw;function MTe(e,t){var r=Sw[e]||Qn(e);return r==="General"?Cg(t):Ju(r,t)}function UTe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Qa(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=za(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Qn(t)]=a}function QTe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Gh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=o2(e.v):e.w=Cg(e.v):e.w=MTe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=Sw[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&r1(n)){var a=Gp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function HTe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=eke[n.Pattern]||n.Pattern)}e[t.ID]=t}function VTe(e,t,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,h={};u=u||{};var m=[],g=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&m.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Qa(e);break;case"String":n.t="s",n.r=WH(Qn(e)),n.v=e.indexOf("<")>-1?Qn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(za(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Qn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=fre[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=WH(t||e));break}if(QTe(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Qn(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=Uv(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Uv("RC:RC",a):n.ArrayRange&&(n.F=Uv(n.ArrayRange,a),c.push([Hn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(m.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function zTe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function NB(e,t){var r=t||{};n1();var n=Wy(_R(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ea(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=$a(r);return o.type="string",hb.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Pe){a.indexOf("<"+Pe)>=0&&(s=!0)}),s)return jIe(n,r);Sw={"General Number":"General","General Date":Qr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Qr[15],"Short Date":Qr[14],"Long Time":Qr[19],"Medium Time":Qr[18],"Short Time":Qr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Qr[2],Standard:Qr[4],Percent:Qr[10],Scientific:Qr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},m="",g={},x={},v=Sd('<Data ss:Type="String">'),y=0,w=0,_=0,F={s:{r:2e6,c:2e6},e:{r:0,c:0}},B={},T={},C="",S=0,j=[],L={},P={},k=0,U=[],Q=[],K={},H=[],q,z=!1,W=[],ee=[],X={},O=0,R=0,G={Sheets:[],WBProps:{date1904:!1}},Y={};u2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";l=u2.exec(n);)switch(l[3]=(te=l[3]).toLowerCase()){case"data":if(te=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?VTe(n.slice(y,l.index),C,v,c[c.length-1][0]=="comment"?K:g,{c:w,r:_},B,H[w],x,W,r):(C="",v=Sd(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(Q.length>0&&(g.c=Q),(!r.sheetRows||r.sheetRows>_)&&g.v!==void 0&&(r.dense?(h[_]||(h[_]=[]),h[_][w]=g):h[us(w)+Zs(_)]=g),g.HRef&&(g.l={Target:Qn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(O=w+(parseInt(g.MergeAcross,10)|0),R=_+(parseInt(g.MergeDown,10)|0),j.push({s:{c:w,r:_},e:{c:O,r:R}})),!r.sheetStubs)g.MergeAcross?w=O+1:++w;else if(g.MergeAcross||g.MergeDown){for(var ae=w;ae<=O;++ae)for(var oe=_;oe<=R;++oe)(ae>w||oe>_)&&(r.dense?(h[oe]||(h[oe]=[]),h[oe][ae]={t:"z"}):h[us(ae)+Zs(oe)]={t:"z"});w=O+1}else++w;else g=LTe(l[0]),g.Index&&(w=+g.Index-1),w<F.s.c&&(F.s.c=w),w>F.e.c&&(F.e.c=w),l[0].slice(-2)==="/>"&&++w,Q=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(_<F.s.r&&(F.s.r=_),_>F.e.r&&(F.e.r=_),l[0].slice(-2)==="/>"&&(x=Sd(l[0]),x.Index&&(_=+x.Index-1)),w=0,++_):(x=Sd(l[0]),x.Index&&(_=+x.Index-1),X={},(x.AutoFitHeight=="0"||x.Height)&&(X.hpx=parseInt(x.Height,10),X.hpt=m2(X.hpx),ee[_]=X),x.Hidden=="1"&&(X.hidden=!0,ee[_]=X));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(m),F.s.r<=F.e.r&&F.s.c<=F.e.c&&(h["!ref"]=sn(F),r.sheetRows&&r.sheetRows<=F.e.r&&(h["!fullref"]=h["!ref"],F.e.r=r.sheetRows-1,h["!ref"]=sn(F))),j.length&&(h["!merges"]=j),H.length>0&&(h["!cols"]=H),ee.length>0&&(h["!rows"]=ee),d[m]=h}else F={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=w=0,c.push([l[3],!1]),u=Sd(l[0]),m=Qn(u.Name),h=r.dense?[]:{},j=[],W=[],ee=[],Y={name:m,Hidden:0},G.Sheets.push(Y);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),H=[],z=!1}break;case"style":l[1]==="/"?HTe(B,T,r):T=Sd(l[0]);break;case"numberformat":T.nf=Qn(Sd(l[0]).Format||"General"),Sw[T.nf]&&(T.nf=Sw[T.nf]);for(var ie=0;ie!=392&&Qr[ie]!=T.nf;++ie);if(ie==392){for(ie=57;ie!=392;++ie)if(Qr[ie]==null){gh(T.nf,ie);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(q=Sd(l[0]),q.Hidden&&(q.hidden=!0,delete q.Hidden),q.Width&&(q.wpx=parseInt(q.Width,10)),!z&&q.wpx>10){z=!0,Zo=Gre;for(var ue=0;ue<H.length;++ue)H[ue]&&Dm(H[ue])}z&&Dm(q),H[q.Index-1||H.length]=q;for(var Ce=0;Ce<+q.Span;++Ce)H[H.length]=$a(q);break;case"namedrange":if(l[1]==="/")break;G.Names||(G.Names=[]);var ne=Xr(l[0]),Be={Name:ne.Name,Ref:Uv(ne.RefersTo.slice(1),{r:0,c:0})};G.Sheets.length>0&&(Be.Sheet=G.Sheets.length-1),G.Names.push(Be);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?C+=n.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;T.Interior=Sd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?h5e(L,te,n.slice(k,l.index)):k=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));zTe(K),Q.push(K)}else c.push([l[3],!1]),u=Sd(l[0]),K={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var je=Sd(l[0]);h["!autofilter"]={ref:Uv(je.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return RV(n,r);var _e=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:_e=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:_e=!1}break;case"excelworkbook":switch(l[3]){case"date1904":G.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:_e=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:_e=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(k,l.index)){case"SheetHidden":Y.Hidden=1;break;case"SheetVeryHidden":Y.Hidden=2;break}else k=l.index+l[0].length;break;case"header":h["!margins"]||og(h["!margins"]={},"xlml"),isNaN(+Xr(l[0]).Margin)||(h["!margins"].header=+Xr(l[0]).Margin);break;case"footer":h["!margins"]||og(h["!margins"]={},"xlml"),isNaN(+Xr(l[0]).Margin)||(h["!margins"].footer=+Xr(l[0]).Margin);break;case"pagemargins":var Ae=Xr(l[0]);h["!margins"]||og(h["!margins"]={},"xlml"),isNaN(+Ae.Top)||(h["!margins"].top=+Ae.Top),isNaN(+Ae.Left)||(h["!margins"].left=+Ae.Left),isNaN(+Ae.Right)||(h["!margins"].right=+Ae.Right),isNaN(+Ae.Bottom)||(h["!margins"].bottom=+Ae.Bottom);break;case"displayrighttoleft":G.Views||(G.Views=[]),G.Views[0]||(G.Views[0]={}),G.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:_e=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:_e=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:_e=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:_e=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:_e=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:_e=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:_e=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:_e=!1}break;case"smarttags":break;default:_e=!1;break}if(_e||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?UTe(P,te,U,n.slice(k,l.index)):(U=l,k=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ve={};return!r.bookSheets&&!r.bookProps&&(ve.Sheets=d),ve.SheetNames=f,ve.Workbook=G,ve.SSF=$a(Qr),ve.Props=L,ve.Custprops=P,ve}function BF(e,t){switch(XR(t=t||{}),t.type||"base64"){case"base64":return NB(Jc(e),t);case"binary":case"buffer":case"file":return NB(e,t);case"array":return NB(Xm(e),t)}}function $Te(e,t){var r=[];return e.Props&&r.push(m5e(e.Props,t)),e.Custprops&&r.push(p5e(e.Props,e.Custprops)),r.join("")}function GTe(){return""}function qTe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Wt("NumberFormat",null,{"ss:Format":pa(Qr[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(Wt("Style",s.join(""),o))}),Wt("Styles",r.join(""))}function vne(e){return Wt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+zR(e.Ref,{r:0,c:0})})}function KTe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(vne(a)))}return Wt("Names",r.join(""))}function WTe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(vne(l)))}return s.join("")}function XTe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Wt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Wt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Wt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Wt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Eo("ProtectContents","True")),e["!protect"].objects&&a.push(Eo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Eo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Eo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Eo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":Wt("WorksheetOptions",a.join(""),{xmlns:Lc.x})}function YTe(e){return e.map(function(t){var r=xCe(t.t||""),n=Wt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Wt("Comment",n,{"ss:Author":t.a})}).join("")}function JTe(e,t,r,n,a,s,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+pa(zR(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=ds(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=pa(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=pa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=Gh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Qr[14]);break;case"s":f="String",h=gCe(e.v||"");break}var m=Jm(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=YTe(e.c)),Wt("Cell",x,l)}function ZTe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=mb(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function eIe(e,t,r,n){if(!e["!ref"])return"";var a=Hn(e["!ref"]),s=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,y){Dm(v);var w=!!v.width,_=s4(y,v),F={"ss:Index":y+1};w&&(F["ss:Width"]=A2(_.width)),v.hidden&&(F["ss:Hidden"]="1"),l.push(Wt("Column",null,F))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[ZTe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},g=zr(m),x=c?(e[u]||[])[f]:e[g];d.push(JTe(x,g,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function tIe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],o=s?WTe(s,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?eIe(s,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(XTe(s,t,e,r)),n.join("")}function rIe(e,t){t||(t={}),e.SSF||(e.SSF=$a(Qr)),e.SSF&&(n1(),Jk(e.SSF),t.revssf=e4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Jm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push($Te(e,t)),r.push(GTe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Wt("Worksheet",tIe(n,t,e),{"ss:Name":pa(e.SheetNames[n])}));return r[2]=qTe(e,t),r[3]=KTe(e),ti+Wt("Workbook",r.join(""),{xmlns:Lc.ss,"xmlns:o":Lc.o,"xmlns:x":Lc.x,"xmlns:ss":Lc.ss,"xmlns:dt":Lc.dt,"xmlns:html":Lc.html})}function nIe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=KCe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=WCe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var aIe=[60,1084,2066,2165,2175];function sIe(e,t,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=oh(r,r.l),u=TF[c],d=0;u!=null&&aIe.indexOf(c)>-1;)s=oh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=TF[c=oh(r,r.l)];var f=Zi(o);wo(f,0);var h=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(h),h+=o[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function Of(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Qr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Gh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=o2(e.v):e.w=Cg(e.v):e.w=Ju(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&r1(Qr[n]||String(n))){var a=Gp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function cC(e,t,r){return{v:e,ixfe:t,t:r}}function iIe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,h="",m,g,x,v,y={},w=[],_,F,B=[],T=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},j=function(Lt){return Lt<8?ag[Lt]:Lt<64&&T[Lt-8]||ag[Lt]},L=function(Lt,Et,_r){var qt=Et.XF.data;if(!(!qt||!qt.patternType||!_r||!_r.cellStyles)){Et.s={},Et.s.patternType=qt.patternType;var tn;(tn=f2(j(qt.icvFore)))&&(Et.s.fgColor={rgb:tn}),(tn=f2(j(qt.icvBack)))&&(Et.s.bgColor={rgb:tn})}},P=function(Lt,Et,_r){if(!(X>1)&&!(_r.sheetRows&&Lt.r>=_r.sheetRows)){if(_r.cellStyles&&Et.XF&&Et.XF.data&&L(Lt,Et,_r),delete Et.ixfe,delete Et.XF,f=Lt,h=zr(Lt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Lt.r<o.s.r&&(o.s.r=Lt.r),Lt.c<o.s.c&&(o.s.c=Lt.c),Lt.r+1>o.e.r&&(o.e.r=Lt.r+1),Lt.c+1>o.e.c&&(o.e.c=Lt.c+1),_r.cellFormula&&Et.f){for(var qt=0;qt<w.length;++qt)if(!(w[qt][0].s.c>Lt.c||w[qt][0].s.r>Lt.r)&&!(w[qt][0].e.c<Lt.c||w[qt][0].e.r<Lt.r)){Et.F=sn(w[qt][0]),(w[qt][0].s.c!=Lt.c||w[qt][0].s.r!=Lt.r)&&delete Et.f,Et.f&&(Et.f=""+Xo(w[qt][1],o,Lt,W,k));break}}_r.dense?(a[Lt.r]||(a[Lt.r]=[]),a[Lt.r][Lt.c]=Et):a[h]=Et}},k={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(k.password=t.password);var U,Q=[],K=[],H=[],q=[],z=!1,W=[];W.SheetNames=k.snames,W.sharedf=k.sharedf,W.arrayf=k.arrayf,W.names=[],W.XTI=[];var ee=0,X=0,O=0,R=[],G=[],Y;k.codepage=1200,Rd(1200);for(var te=!1;e.l<e.length-1;){var ae=e.l,oe=e.read_shift(2);if(oe===0&&ee===10)break;var ie=e.l===e.length?0:e.read_shift(2),ue=TF[oe];if(ue&&ue.f){if(t.bookSheets&&ee===133&&oe!==133)break;if(ee=oe,ue.r===2||ue.r==12){var Ce=e.read_shift(2);if(ie-=2,!k.enc&&Ce!==oe&&((Ce&255)<<8|Ce>>8)!==oe)throw new Error("rt mismatch: "+Ce+"!="+oe);ue.r==12&&(e.l+=10,ie-=10)}var ne={};if(oe===10?ne=ue.f(e,ie,k):ne=sIe(oe,ue,e,ie,k),X==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(oe){case 34:r.opts.Date1904=C.WBProps.date1904=ne;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(e.l=0),k.enc=ne,!t.password)throw new Error("File is password-protected");if(ne.valid==null)throw new Error("Encryption scheme unsupported");if(!ne.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=ne;break;case 66:var Be=Number(ne);switch(Be){case 21010:Be=1200;break;case 32768:Be=1e4;break;case 32769:Be=1252;break}Rd(k.codepage=Be),te=!0;break;case 317:k.rrtabid=ne;break;case 25:k.winlocked=ne;break;case 439:r.opts.RefreshAll=ne;break;case 12:r.opts.CalcCount=ne;break;case 16:r.opts.CalcDelta=ne;break;case 17:r.opts.CalcIter=ne;break;case 13:r.opts.CalcMode=ne;break;case 14:r.opts.CalcPrecision=ne;break;case 95:r.opts.CalcSaveRecalc=ne;break;case 15:k.CalcRefMode=ne;break;case 2211:r.opts.FullCalc=ne;break;case 129:ne.fDialog&&(a["!type"]="dialog"),ne.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ne.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:B.push(ne);break;case 430:W.push([ne]),W[W.length-1].XTI=[];break;case 35:case 547:W[W.length-1].push(ne);break;case 24:case 536:Y={Name:ne.Name,Ref:Xo(ne.rgce,o,null,W,k)},ne.itab>0&&(Y.Sheet=ne.itab-1),W.names.push(Y),W[0]||(W[0]=[],W[0].XTI=[]),W[W.length-1].push(ne),ne.Name=="_xlnm._FilterDatabase"&&ne.itab>0&&ne.rgce&&ne.rgce[0]&&ne.rgce[0][0]&&ne.rgce[0][0][0]=="PtgArea3d"&&(G[ne.itab-1]={ref:sn(ne.rgce[0][0][1][2])});break;case 22:k.ExternCount=ne;break;case 23:W.length==0&&(W[0]=[],W[0].XTI=[]),W[W.length-1].XTI=W[W.length-1].XTI.concat(ne),W.XTI=W.XTI.concat(ne);break;case 2196:if(k.biff<8)break;Y!=null&&(Y.Comment=ne[1]);break;case 18:a["!protect"]=ne;break;case 19:ne!==0&&k.WTF&&console.error("Password verifier: "+ne);break;case 133:s[ne.pos]=ne,k.snames.push(ne.name);break;case 10:{if(--X)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=sn(o),t.sheetRows&&t.sheetRows<=o.e.r){var je=o.e.r;o.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=sn(o),o.e.r=je}o.e.r++,o.e.c++}Q.length>0&&(a["!merges"]=Q),K.length>0&&(a["!objects"]=K),H.length>0&&(a["!cols"]=H),q.length>0&&(a["!rows"]=q),C.Sheets.push(S)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[oe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ne.BIFFVer]||8),k.biffguess=ne.BIFFVer==0,ne.BIFFVer==0&&ne.dt==4096&&(k.biff=5,te=!0,Rd(k.codepage=28591)),k.biff==8&&ne.BIFFVer==0&&ne.dt==16&&(k.biff=2),X++)break;if(a=t.dense?[]:{},k.biff<8&&!te&&(te=!0,Rd(k.codepage=t.codepage||1252)),k.biff<5||ne.BIFFVer==0&&ne.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var _e={pos:e.l-ie,name:u};s[_e.pos]=_e,k.snames.push(u)}else u=(s[ae]||{name:""}).name;ne.dt==32&&(a["!type"]="chart"),ne.dt==64&&(a["!type"]="macro"),Q=[],K=[],k.arrayf=w=[],H=[],q=[],z=!1,S={Hidden:(s[ae]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ne.r]||[])[ne.c]:a[zr({c:ne.c,r:ne.r})])&&++ne.c,_={ixfe:ne.ixfe,XF:B[ne.ixfe]||{},v:ne.val,t:"n"},O>0&&(_.z=R[_.ixfe>>8&63]),Of(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t);break;case 5:case 517:_={ixfe:ne.ixfe,XF:B[ne.ixfe],v:ne.val,t:ne.t},O>0&&(_.z=R[_.ixfe>>8&63]),Of(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t);break;case 638:_={ixfe:ne.ixfe,XF:B[ne.ixfe],v:ne.rknum,t:"n"},O>0&&(_.z=R[_.ixfe>>8&63]),Of(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t);break;case 189:for(var Ae=ne.c;Ae<=ne.C;++Ae){var ve=ne.rkrec[Ae-ne.c][0];_={ixfe:ve,XF:B[ve],v:ne.rkrec[Ae-ne.c][1],t:"n"},O>0&&(_.z=R[_.ixfe>>8&63]),Of(_,t,r.opts.Date1904),P({c:Ae,r:ne.r},_,t)}break;case 6:case 518:case 1030:{if(ne.val=="String"){l=ne;break}if(_=cC(ne.val,ne.cell.ixfe,ne.tt),_.XF=B[_.ixfe],t.cellFormula){var Pe=ne.formula;if(Pe&&Pe[0]&&Pe[0][0]&&Pe[0][0][0]=="PtgExp"){var Ue=Pe[0][0][1][0],de=Pe[0][0][1][1],be=zr({r:Ue,c:de});y[be]?_.f=""+Xo(ne.formula,o,ne.cell,W,k):_.F=((t.dense?(a[Ue]||[])[de]:a[be])||{}).F}else _.f=""+Xo(ne.formula,o,ne.cell,W,k)}O>0&&(_.z=R[_.ixfe>>8&63]),Of(_,t,r.opts.Date1904),P(ne.cell,_,t),l=ne}break;case 7:case 519:if(l)l.val=ne,_=cC(ne,l.cell.ixfe,"s"),_.XF=B[_.ixfe],t.cellFormula&&(_.f=""+Xo(l.formula,o,l.cell,W,k)),O>0&&(_.z=R[_.ixfe>>8&63]),Of(_,t,r.opts.Date1904),P(l.cell,_,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(ne);var De=zr(ne[0].s);if(m=t.dense?(a[ne[0].s.r]||[])[ne[0].s.c]:a[De],t.cellFormula&&m){if(!l||!De||!m)break;m.f=""+Xo(ne[1],o,ne[0],W,k),m.F=sn(ne[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!l)break;y[zr(l.cell)]=ne[0],m=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[zr(l.cell)],(m||{}).f=""+Xo(ne[0],o,f,W,k)}}break;case 253:_=cC(c[ne.isst].t,ne.ixfe,"s"),c[ne.isst].h&&(_.h=c[ne.isst].h),_.XF=B[_.ixfe],O>0&&(_.z=R[_.ixfe>>8&63]),Of(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t);break;case 513:t.sheetStubs&&(_={ixfe:ne.ixfe,XF:B[ne.ixfe],t:"z"},O>0&&(_.z=R[_.ixfe>>8&63]),Of(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t));break;case 190:if(t.sheetStubs)for(var Ve=ne.c;Ve<=ne.C;++Ve){var We=ne.ixfe[Ve-ne.c];_={ixfe:We,XF:B[We],t:"z"},O>0&&(_.z=R[_.ixfe>>8&63]),Of(_,t,r.opts.Date1904),P({c:Ve,r:ne.r},_,t)}break;case 214:case 516:case 4:_=cC(ne.val,ne.ixfe,"s"),_.XF=B[_.ixfe],O>0&&(_.z=R[_.ixfe>>8&63]),Of(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t);break;case 0:case 512:X===1&&(o=ne);break;case 252:c=ne;break;case 1054:if(k.biff==4){R[O++]=ne[1];for(var Je=0;Je<O+163&&Qr[Je]!=ne[1];++Je);Je>=163&&gh(ne[1],O+163)}else gh(ne[1],ne[0]);break;case 30:{R[O++]=ne;for(var At=0;At<O+163&&Qr[At]!=ne;++At);At>=163&&gh(ne,O+163)}break;case 229:Q=Q.concat(ne);break;case 93:K[ne.cmo[0]]=k.lastobj=ne;break;case 438:k.lastobj.TxO=ne;break;case 127:k.lastobj.ImData=ne;break;case 440:for(v=ne[0].s.r;v<=ne[0].e.r;++v)for(x=ne[0].s.c;x<=ne[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[zr({c:x,r:v})],m&&(m.l=ne[1]);break;case 2048:for(v=ne[0].s.r;v<=ne[0].e.r;++v)for(x=ne[0].s.c;x<=ne[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[zr({c:x,r:v})],m&&m.l&&(m.l.Tooltip=ne[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;m=t.dense?(a[ne[0].r]||[])[ne[0].c]:a[zr(ne[0])];var vt=K[ne[2]];m||(t.dense?(a[ne[0].r]||(a[ne[0].r]=[]),m=a[ne[0].r][ne[0].c]={t:"z"}):m=a[zr(ne[0])]={t:"z"},o.e.r=Math.max(o.e.r,ne[0].r),o.s.r=Math.min(o.s.r,ne[0].r),o.e.c=Math.max(o.e.c,ne[0].c),o.s.c=Math.min(o.s.c,ne[0].c)),m.c||(m.c=[]),g={a:ne[1],t:vt.TxO.t},m.c.push(g)}break;case 2173:qke(B[ne.ixfe],ne.ext);break;case 125:{if(!k.cellStyles)break;for(;ne.e>=ne.s;)H[ne.e--]={width:ne.w/256,level:ne.level||0,hidden:!!(ne.flags&1)},z||(z=!0,QR(ne.w/256)),Dm(H[ne.e+1])}break;case 520:{var wt={};ne.level!=null&&(q[ne.r]=wt,wt.level=ne.level),ne.hidden&&(q[ne.r]=wt,wt.hidden=!0),ne.hpt&&(q[ne.r]=wt,wt.hpt=ne.hpt,wt.hpx=mb(ne.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||og(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[oe]]=ne;break;case 161:a["!margins"]||og(a["!margins"]={}),a["!margins"].header=ne.header,a["!margins"].footer=ne.footer;break;case 574:ne.RTL&&(C.Views[0].RTL=!0);break;case 146:T=ne;break;case 2198:U=ne;break;case 140:F=ne;break;case 442:u?S.CodeName=ne||S.name:C.WBProps.CodeName=ne||"ThisWorkbook";break}}else ue||console.error("Missing Info for XLS Record 0x"+oe.toString(16)),e.l+=ie}return r.SheetNames=Ps(s).sort(function(Tt,Lt){return Number(Tt)-Number(Lt)}).map(function(Tt){return s[Tt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&G.forEach(function(Tt,Lt){r.Sheets[r.SheetNames[Lt]]["!autofilter"]=Tt}),r.Strings=c,r.SSF=$a(Qr),k.enc&&(r.Encryption=k.enc),U&&(r.Themes=U),r.Metadata={},F!==void 0&&(r.Metadata.Country=F),W.names.length>0&&(C.Names=W.names),r.Workbook=C,r}var kw={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function oIe(e,t,r){var n=jr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=AV(n,NF,kw.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var o=jr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=AV(o,CF,kw.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(xre(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function lIe(e,t){var r=[],n=[],a=[],s=0,o,l=VH(NF,"n"),c=VH(CF,"n");if(e.Props)for(o=Ps(e.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Props[o[s]]]);if(e.Custprops)for(o=Ps(e.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)Cre.indexOf(a[s][0])>-1||gre.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&jr.utils.cfb_add(t,"/SummaryInformation",hV(n,kw.SI,c,CF)),(r.length||u.length)&&jr.utils.cfb_add(t,"/DocumentSummaryInformation",hV(r,kw.DSI,l,NF,u.length?u:null,kw.UDI))}function bne(e,t){t||(t={}),XR(t),gR(),t.codepage&&pR(t.codepage);var r,n;if(e.FullPaths){if(jr.find(e,"/encryption"))throw new Error("File is password-protected");r=jr.find(e,"!CompObj"),n=jr.find(e,"/Workbook")||jr.find(e,"/Book")}else{switch(t.type){case"base64":e=Hc(Jc(e));break;case"binary":e=Hc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}wo(e,0),n={content:e}}var a,s;if(r&&nIe(r),t.bookProps&&!t.bookSheets)a={};else{var o=vn?"buffer":"array";if(n&&n.content)a=iIe(n.content,t);else if((s=jr.find(e,"PerfectOffice_MAIN"))&&s.content)a=ig.to_workbook(s.content,(t.type=o,t));else if((s=jr.find(e,"NativeContent_MAIN"))&&s.content)a=ig.to_workbook(s.content,(t.type=o,t));else throw(s=jr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&jr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=y4e(e))}var l={};return e.FullPaths&&oIe(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}function cIe(e,t){var r=t||{},n=jr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return jr.utils.cfb_add(n,a,yne(e,r)),r.biff==8&&(e.Props||e.Custprops)&&lIe(e,n),r.biff==8&&e.vbaraw&&w4e(n,jr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var p2={0:{f:F3e},1:{f:Q3e},2:{f:iBe},3:{f:W3e},4:{f:$3e},5:{f:nBe},6:{f:dBe},7:{f:Z3e},8:{f:xBe},9:{f:gBe},10:{f:mBe},11:{f:pBe},12:{f:V3e},13:{f:lBe},14:{f:Y3e},15:{f:q3e},16:{f:fne},17:{f:ABe},18:{f:tBe},19:{f:TR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:ATe},40:{},42:{},43:{f:dke},44:{f:cke},45:{f:hke},46:{f:pke},47:{f:mke},48:{},49:{f:PCe},50:{},51:{f:Xke},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Pre},62:{f:uBe},63:{f:s4e},64:{f:OBe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:cl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:BBe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:M3e},148:{f:P3e,p:16},151:{f:NBe},152:{},153:{f:uTe},154:{},155:{},156:{f:lTe},157:{},158:{},159:{T:1,f:_Se},160:{T:-1},161:{T:1,f:Yg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:vBe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Kke},336:{T:-1},337:{f:Zke,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:EF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Dre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:CBe},427:{f:_Be},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:kBe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:L3e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:wBe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:EF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:p4e},633:{T:1},634:{T:-1},635:{T:1,f:h4e},636:{T:-1},637:{f:UCe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:YBe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:DBe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},TF={6:{f:wB},10:{f:F0},12:{f:Ai},13:{f:Ai},14:{f:Gs},15:{f:Gs},16:{f:rl},17:{f:Gs},18:{f:Gs},19:{f:Ai},20:{f:bV},21:{f:bV},23:{f:Dre},24:{f:wV},25:{f:Gs},26:{},27:{},28:{f:D_e},29:{},34:{f:Gs},35:{f:yV},38:{f:rl},39:{f:rl},40:{f:rl},41:{f:rl},42:{f:Gs},43:{f:Gs},47:{f:qSe},49:{f:l_e},51:{f:Ai},60:{},61:{f:n_e},64:{f:Gs},65:{f:o_e},66:{f:Ai},77:{},80:{},81:{},82:{},85:{f:Ai},89:{},90:{},91:{},92:{f:G5e},93:{f:L_e},94:{},95:{f:Gs},96:{},97:{},99:{f:Gs},125:{f:Pre},128:{f:E_e},129:{f:K5e},130:{f:Ai},131:{f:Gs},132:{f:Gs},133:{f:W5e},134:{},140:{f:G_e},141:{f:Ai},144:{},146:{f:W_e},151:{},152:{},153:{},154:{},155:{},156:{f:Ai},157:{},158:{},160:{f:rSe},161:{f:J_e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:v_e},190:{f:b_e},193:{f:F0},197:{},198:{},199:{},200:{},201:{},202:{f:Gs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ai},220:{},221:{f:Gs},222:{},224:{f:w_e},225:{f:$5e},226:{f:F0},227:{},229:{f:P_e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Y5e},253:{f:u_e},255:{f:Z5e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:_re},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Gs},353:{f:F0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:k_e},431:{f:Gs},432:{},433:{},434:{},437:{},438:{f:Q_e},439:{f:Gs},440:{f:H_e},441:{},442:{f:cE},443:{},444:{f:Ai},445:{},446:{},448:{f:F0},449:{f:r_e,r:2},450:{f:F0},512:{f:gV},513:{f:tSe},515:{f:__e},516:{f:f_e},517:{f:vV},519:{f:nSe},520:{f:e_e},523:{},545:{f:EV},549:{f:pV},566:{},574:{f:s_e},638:{f:x_e},659:{},1048:{},1054:{f:h_e},1084:{},1212:{f:I_e},2048:{f:z_e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:iC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:F0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:X_e,r:12},2173:{f:Gke,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Gs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:T_e,r:12},2197:{},2198:{f:Uke,r:12},2199:{},2200:{},2201:{},2202:{f:F_e,r:12},2203:{f:F0},2204:{},2205:{},2206:{},2207:{},2211:{f:t_e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ai},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Z_e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:K_e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:gV},1:{},2:{f:lSe},3:{f:iSe},4:{f:sSe},5:{f:vV},7:{f:uSe},8:{},9:{f:iC},11:{},22:{f:Ai},30:{f:p_e},31:{},32:{},33:{f:EV},36:{},37:{f:pV},50:{f:dSe},62:{},52:{},67:{},68:{f:Ai},69:{},86:{},126:{},127:{f:aSe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:fSe},223:{},234:{},354:{},421:{},518:{f:wB},521:{f:iC},536:{f:wV},547:{f:yV},561:{},579:{},1030:{f:wB},1033:{f:iC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Xt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&kR(r)&&e.push(r)}}function uIe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Xt(e,t,r,a);var s=t;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function AE(e,t,r){return e||(e=_t(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function dIe(e,t,r,n){var a=_t(9);return AE(a,e,t),Sre(r,n||"b",a),a}function fIe(e,t,r){var n=_t(8+2*r.length);return AE(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function AIe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Fi(za(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Xt(e,2,cSe(r,n,a)):Xt(e,3,oSe(r,n,a));return;case"b":case"e":Xt(e,5,dIe(r,n,t.v,t.t));return;case"s":case"str":Xt(e,4,fIe(r,n,(t.v||"").slice(0,255)));return}Xt(e,1,AE(null,r,n))}function hIe(e,t,r,n){var a=Array.isArray(t),s=Hn(t["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=sn(s)}for(var u=s.s.r;u<=s.e.r;++u){l=Zs(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=us(d)),o=c[d]+l;var f=a?(t[u]||[])[d]:t[o];f&&AIe(e,f,u,d)}}}function mIe(e,t){for(var r=t||{},n=lc(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Xt(n,r.biff==4?1033:r.biff==3?521:9,LR(e,16,r)),hIe(n,e.Sheets[e.SheetNames[a]],a,r),Xt(n,10),n.end()}function pIe(e,t,r){Xt(e,49,c_e({sz:12,name:"Arial"},r))}function gIe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Xt(e,1054,m_e(a,t[a],r))})}function xIe(e,t){var r=_t(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Xt(e,2151,r),r=_t(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Ire(Hn(t["!ref"]||"A1"),r),r.write_shift(4,4),Xt(e,2152,r)}function vIe(e,t){for(var r=0;r<16;++r)Xt(e,224,xV({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Xt(e,224,xV(n,0,t))})}function bIe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Xt(e,440,V_e(n)),n[1].Tooltip&&Xt(e,2048,$_e(n))}delete t["!links"]}function yIe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Xt(e,125,Y_e(s4(a,n),a))})}}function wIe(e,t,r,n,a){var s=16+Jm(a.cellXfs,t,a);if(t.v==null&&!t.bf){Xt(e,513,jg(r,n,s));return}if(t.bf)Xt(e,6,Kje(t,r,n,a,s));else switch(t.t){case"d":case"n":var o=t.t=="d"?Fi(za(t.v)):t.v;Xt(e,515,S_e(r,n,o,s));break;case"b":case"e":Xt(e,517,C_e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var l=GR(a.Strings,t.v,a.revStrings);Xt(e,253,d_e(r,n,l,s))}else Xt(e,516,A_e(r,n,(t.v||"").slice(0,255),s,a));break;default:Xt(e,513,jg(r,n,s))}}function EIe(e,t,r){var n=lc(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],m=Hn(s["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}Xt(n,2057,LR(r,16,t)),Xt(n,13,Mu(1)),Xt(n,12,Mu(100)),Xt(n,15,yl(!0)),Xt(n,17,yl(!1)),Xt(n,16,Sg(.001)),Xt(n,95,yl(!0)),Xt(n,42,yl(!1)),Xt(n,43,yl(!1)),Xt(n,130,Mu(1)),Xt(n,128,N_e()),Xt(n,131,yl(!1)),Xt(n,132,yl(!1)),u&&yIe(n,s["!cols"]),Xt(n,512,g_e(m,t)),u&&(s["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){f=Zs(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(h[v]=us(v)),d=h[v]+f;var y=c?(s[x]||[])[v]:s[d];y&&(wIe(n,y,x,v,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=l.CodeName||l.name||a;return u&&Xt(n,574,i_e((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&Xt(n,229,R_e(s["!merges"])),u&&bIe(n,s),Xt(n,442,kre(w)),u&&xIe(n,s),Xt(n,10),n.end()}function NIe(e,t,r){var n=lc(),a=(e||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(Xt(n,2057,LR(e,5,r)),r.bookType=="xla"&&Xt(n,135),Xt(n,225,l?Mu(1200):null),Xt(n,193,C5e(2)),c&&Xt(n,191),c&&Xt(n,192),Xt(n,226),Xt(n,92,q5e("SheetJS",r)),Xt(n,66,Mu(l?1200:1252)),l&&Xt(n,353,Mu(0)),l&&Xt(n,448),Xt(n,317,eSe(e.SheetNames.length)),l&&e.vbaraw&&Xt(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";Xt(n,442,kre(u))}Xt(n,156,Mu(17)),Xt(n,25,yl(!1)),Xt(n,18,yl(!1)),Xt(n,19,Mu(0)),l&&Xt(n,431,yl(!1)),l&&Xt(n,444,Mu(0)),Xt(n,61,a_e()),Xt(n,64,yl(!1)),Xt(n,141,Mu(0)),Xt(n,34,yl(rTe(e)=="true")),Xt(n,14,yl(!0)),l&&Xt(n,439,yl(!1)),Xt(n,218,Mu(0)),pIe(n,e,r),gIe(n,e.SSF,r),vIe(n,r),l&&Xt(n,352,yl(!1));var d=n.end(),f=lc();l&&Xt(f,140,q_e()),l&&r.Strings&&uIe(f,252,J5e(r.Strings)),Xt(f,10);var h=f.end(),m=lc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var v=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};Xt(m,133,X5e({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var w=m.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var _=[];return d.length&&_.push(d),w.length&&_.push(w),h.length&&_.push(h),Zi(_)}function CIe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=$a(Qr)),e&&e.SSF&&(n1(),Jk(e.SSF),r.revssf=e4(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,YR(r),r.cellXfs=[],Jm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=EIe(a,r,e);return n.unshift(NIe(e,n,r)),Zi(n)}function yne(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=uc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return CIe(e,t);case 4:case 3:case 2:return mIe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function FV(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=a.index,l=s&&s.index||e.length,c=cCe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var x=c[o].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var w=y[l].trim();if(w.match(/<t[dh]/i)){for(var _=w,F=0;_.charAt(0)=="<"&&(F=_.indexOf(">"))>-1;)_=_.slice(F+1);for(var B=0;B<g.length;++B){var T=g[B];T.s.c==d&&T.s.r<u&&u<=T.e.r&&(d=T.e.c+1,B=-1)}var C=Xr(w.slice(0,w.indexOf(">")));h=C.colspan?+C.colspan:1,((f=+C.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var S=C.t||C["data-t"]||"";if(!_.length){d+=h;continue}if(_=$te(_),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!_.length){d+=h;continue}var j={t:"s",v:_};r.raw||!_.trim().length||S=="s"||(_==="TRUE"?j={t:"b",v:!0}:_==="FALSE"?j={t:"b",v:!1}:isNaN(zd(_))?isNaN(Ab(_).getDate())||(j={t:"d",v:za(_)},r.cellDates||(j={t:"n",v:Fi(j.v)}),j.z=r.dateNF||Qr[14]):j={t:"n",v:zd(_)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=j):n[zr({r:u,c:d})]=j,d+=h}}}}return n["!ref"]=sn(m),g.length&&(n["!merges"]=g),n}function _Ie(e,t,r,n){for(var a=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=zr({r,c:o}),f=n.dense?(e[r]||[])[o]:e[d],h=f&&f.v!=null&&(f.h||CR(f.w||(Bh(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(Wt("td",h,m))}}var g="<tr>";return g+s.join("")+"</tr>"}var SIe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',kIe="</body></html>";function jIe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Ym(FV(r[0],t),t);var n=e8();return r.forEach(function(a,s){t8(n,FV(a,t),"Sheet"+(s+1))}),n}function BIe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function wne(e,t){var r=t||{},n=r.header!=null?r.header:SIe,a=r.footer!=null?r.footer:kIe,s=[n],o=uc(e["!ref"]);r.dense=Array.isArray(e),s.push(BIe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(_Ie(e,o,l,r));return s.push("</table>"+a),s.join("")}function Ene(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?ds(n.origin):n.origin;a=o.r,s=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=uc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,w=0,_=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var F=l[g];if(OV(F)){if(n.display)continue;m[x]={hidden:!0}}var B=F.children;for(v=y=0;v<B.length;++v){var T=B[v];if(!(n.display&&OV(T))){var C=T.hasAttribute("data-v")?T.getAttribute("data-v"):T.hasAttribute("v")?T.getAttribute("v"):$te(T.innerHTML),S=T.getAttribute("data-z")||T.getAttribute("z");for(h=0;h<f.length;++h){var j=f[h];j.s.c==y+s&&j.s.r<x+a&&x+a<=j.e.r&&(y=j.e.c+1-s,h=-1)}_=+T.getAttribute("colspan")||1,((w=+T.getAttribute("rowspan")||1)>1||_>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(w||1)-1,c:y+s+(_||1)-1}});var L={t:"s",v:C},P=T.getAttribute("data-t")||T.getAttribute("t")||"";C!=null&&(C.length==0?L.t=P||"z":n.raw||C.trim().length==0||P=="s"||(C==="TRUE"?L={t:"b",v:!0}:C==="FALSE"?L={t:"b",v:!1}:isNaN(zd(C))?isNaN(Ab(C).getDate())||(L={t:"d",v:za(C)},n.cellDates||(L={t:"n",v:Fi(L.v)}),L.z=n.dateNF||Qr[14]):L={t:"n",v:zd(C)})),L.z===void 0&&S!=null&&(L.z=S);var k="",U=T.getElementsByTagName("A");if(U&&U.length)for(var Q=0;Q<U.length&&!(U[Q].hasAttribute("href")&&(k=U[Q].getAttribute("href"),k.charAt(0)!="#"));++Q);k&&k.charAt(0)!="#"&&(L.l={Target:k}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=L):e[zr({c:y+s,r:x+a})]=L,u.e.c<y+s&&(u.e.c=y+s),y+=_}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=sn(u),x>=c&&(e["!fullref"]=sn((u.e.r=l.length-g+x-1+a,u))),e}function Nne(e,t){var r=t||{},n=r.dense?[]:{};return Ene(n,e,t)}function TIe(e,t){return Ym(Nne(e,t),t)}function OV(e){var t="",r=IIe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function IIe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function FIe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Qn(t.replace(/<[^>]*>/g,""));return[r]}var DV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Cne(e,t){var r=t||{},n=_R(e),a=[],s,o,l={name:""},c="",u=0,d,f,h={},m=[],g=r.dense?[]:{},x,v,y={value:""},w="",_=0,F=[],B=-1,T=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,j={},L=[],P={},k=0,U=0,Q=[],K=1,H=1,q=[],z={Names:[]},W={},ee=["",""],X=[],O={},R="",G=0,Y=!1,te=!1,ae=0;for(u2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=u2.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?g["!ref"]=sn(C):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(g["!fullref"]=g["!ref"],C.e.r=r.sheetRows-1,g["!ref"]=sn(C)),L.length&&(g["!merges"]=L),Q.length&&(g["!rows"]=Q),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),h[d.name]=g,te=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Xr(x[0],!1),B=T=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,g=r.dense?[]:{},L=[],Q=[],te=!0);break;case"table-row-group":x[1]==="/"?--S:++S;break;case"table-row":case"行":if(x[1]==="/"){B+=K,K=1;break}if(f=Xr(x[0],!1),f.行号?B=f.行号-1:B==-1&&(B=0),K=+f["number-rows-repeated"]||1,K<10)for(ae=0;ae<K;++ae)S>0&&(Q[B+ae]={level:S});T=-1;break;case"covered-table-cell":x[1]!=="/"&&++T,r.sheetStubs&&(r.dense?(g[B]||(g[B]=[]),g[B][T]={t:"z"}):g[zr({r:B,c:T})]={t:"z"}),w="",F=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++T,y=Xr(x[0],!1),H=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=BV(Qn(y.formula))),(y.数据类型||y["value-type"])=="string"&&(v.t="s",v.v=Qn(y["string-value"]||""),r.dense?(g[B]||(g[B]=[]),g[B][T]=v):g[zr({r:B,c:T})]=v),T+=H-1;else if(x[1]!=="/"){++T,w="",_=0,F=[],H=1;var oe=K?B+K-1:B;if(T>C.e.c&&(C.e.c=T),T<C.s.c&&(C.s.c=T),B<C.s.r&&(C.s.r=B),oe>C.e.r&&(C.e.r=oe),y=Xr(x[0],!1),X=[],O={},v={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Qn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(k=parseInt(y["number-matrix-rows-spanned"],10)||0,U=parseInt(y["number-matrix-columns-spanned"],10)||0,P={s:{r:B,c:T},e:{r:B+k-1,c:T+U-1}},v.F=sn(P),q.push([P,v.F])),y.formula)v.f=BV(y.formula);else for(ae=0;ae<q.length;++ae)B>=q[ae][0].s.r&&B<=q[ae][0].e.r&&T>=q[ae][0].s.c&&T<=q[ae][0].e.c&&(v.F=q[ae][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(k=parseInt(y["number-rows-spanned"],10)||0,U=parseInt(y["number-columns-spanned"],10)||0,P={s:{r:B,c:T},e:{r:B+k-1,c:T+U-1}},L.push(P)),y["number-columns-repeated"]&&(H=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Qa(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=za(y["date-value"]),r.cellDates||(v.t="n",v.v=Fi(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=iCe(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=t4(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.数据数值);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(w=Qn(y["string-value"]),F=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(Y=!1,v.t==="s"&&(v.v=w||"",F.length&&(v.R=F),Y=_==0),W.Target&&(v.l=W),X.length>0&&(v.c=X,X=[]),w&&r.cellText!==!1&&(v.w=w),Y&&(v.t="z",delete v.v),(!Y||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=B))for(var ie=0;ie<K;++ie){if(H=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[B+ie]||(g[B+ie]=[]),g[B+ie][T]=ie==0?v:$a(v);--H>0;)g[B+ie][T+H]=$a(v);else for(g[zr({r:B+ie,c:T})]=v;--H>0;)g[zr({r:B+ie,c:T+H})]=$a(v);C.e.c<=T&&(C.e.c=T)}H=parseInt(y["number-columns-repeated"]||"1",10),T+=H-1,H=0,v={},w="",F=[]}W={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;O.t=w,F.length&&(O.R=F),O.a=R,X.push(O)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);R="",G=0,w="",_=0,F=[];break;case"creator":x[1]==="/"?R=n.slice(G,x.index):G=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);w="",_=0,F=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(j[l.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=Xr(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Xr(x[0],!1),c+=DV[x[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Xr(x[0],!1),c+=DV[x[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":o=Xr(x[0],!1),ee=EB(o["cell-range-address"]);var ue={Name:o.name,Ref:ee[0]+"!"+ee[1]};te&&(ue.Sheet=m.length),z.Names.push(ue);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var Ce=FIe(n.slice(_,x.index));w=(w.length>0?w+`
`:"")+Ce[0]}else Xr(x[0],!1),_=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{ee=EB(Xr(x[0])["target-range-address"]),h[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(W=Xr(x[0],!1),!W.href)break;W.Target=Qn(W.href),delete W.href,W.Target.charAt(0)=="#"&&W.Target.indexOf(".")>-1?(ee=EB(W.Target.slice(1)),W.Target="#"+ee[0]+"!"+ee[1]):W.Target.match(/^\.\.[\\\/]/)&&(W.Target=W.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var ne={Sheets:h,SheetNames:m,Workbook:z};return r.bookSheets&&delete ne.Sheets,ne}function PV(e,t){t=t||{},Ru(e,"META-INF/manifest.xml")&&i5e(fi(e,"META-INF/manifest.xml"),t);var r=Vc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Cne(Ea(r),t);return Ru(e,"meta.xml")&&(n.Props=mre(fi(e,"meta.xml"))),n}function RV(e,t){return Cne(e,t)}var OIe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+c2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ti+t}}(),LV=function(){var e=function(s){return pa(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+pa(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=uc(s["!ref"]||"A1"),h=s["!merges"]||[],m=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,w={},_="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,w["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(y){c.push(r);continue}var F=zr({r:u,c:d}),B=g?(s[u]||[])[d]:s[F];if(B&&B.f&&(w["table:formula"]=pa(e3e(B.f)),B.F&&B.F.slice(0,F.length)==F)){var T=uc(B.F);w["table:number-matrix-columns-spanned"]=T.e.c-T.s.c+1,w["table:number-matrix-rows-spanned"]=T.e.r-T.s.r+1}if(!B){c.push(t);continue}switch(B.t){case"b":_=B.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=B.v?"true":"false";break;case"n":_=B.w||String(B.v||0),w["office:value-type"]="float",w["office:value"]=B.v||0;break;case"s":case"str":_=B.v==null?"":B.v,w["office:value-type"]="string";break;case"d":_=B.w||za(B.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=za(B.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var C=e(_);if(B.l&&B.l.Target){var S=B.l.Target;S=S.charAt(0)=="#"?"#"+t3e(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),C=Wt("text:a",C,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+Wt("table:table-cell",Wt("text:p",C,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Dm(f),f.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[ti],u=c2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=c2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(hre().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function _ne(e,t){if(t.bookType=="fods")return LV(e,t);var r=wR(),n="",a=[],s=[];return n="mimetype",dn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",dn(r,n,LV(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",dn(r,n,OIe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",dn(r,n,ti+hre()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",dn(r,n,c5e(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",dn(r,n,o5e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Bg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function IF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ea(Xm(e))}function DIe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Hc(Xf(e))}function PIe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Rm(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function MV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function RIe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function LIe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function g2(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Aa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Os(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Wn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=g2(e,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=g2(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function po(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Aa(n*8+a.type)),a.type==2&&t.push(Aa(a.data.length)),t.push(a.data))})}),Rm(t)}function WR(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Ou(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=g2(e,n),s=Wn(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:Os(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Wn(l.data),u=Os(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(o.merge=Os(s[3][0].data)>>>0>0),r.push(o)}return r}function Px(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Aa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Aa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:Aa(o.data.length)}],n[2].push({data:po(o.meta),type:2})});var s=po(n);t.push(Aa(s.length)),t.push(s),a.forEach(function(o){return t.push(o)})}),Rm(t)}function MIe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=g2(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Rm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Rm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Du(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(MIe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Rm(t)}function Rx(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=Aa(n),o=s.length;t.push(s),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return Rm(t)}function UIe(e,t,r,n){var a=Bg(e),s=a.getUint32(4,!0),o=(n>1?12:8)+MV(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=MV(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function QIe(e,t,r){var n=Bg(e),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=RIe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function CB(e,t){var r=new Uint8Array(32),n=Bg(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,LIe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function _B(e,t){var r=new Uint8Array(32),n=Bg(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function HIe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return UIe(e,t,r,e[0]);case 5:return QIe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Wo(e){var t=Wn(e);return g2(t[1][0].data)}function UV(e,t){var r=Wn(t.data),n=Os(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=Wn(o.data),c=Os(l[1][0].data)>>>0;switch(n){case 1:s[c]=IF(l[3][0].data);break;case 8:{var u=e[Wo(l[9][0].data)][0],d=Wn(u.data),f=e[Wo(d[1][0].data)][0],h=Os(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=Wn(f.data);s[c]=m[3].map(function(g){return IF(g.data)}).join("")}break}}),s}function VIe(e,t){var r,n,a,s,o,l,c,u,d,f,h,m,g,x,v=Wn(e),y=Os(v[1][0].data)>>>0,w=Os(v[2][0].data)>>>0,_=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&Os(v[8][0].data)>0||!1,F,B;if((s=(a=v[7])==null?void 0:a[0])!=null&&s.data&&t!=0)F=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,B=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)F=(m=(h=v[4])==null?void 0:h[0])==null?void 0:m.data,B=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var T=_?4:1,C=Bg(F),S=[],j=0;j<F.length/2;++j){var L=C.getUint16(j*2,!0);L<65535&&S.push([j,L])}if(S.length!=w)throw"Expected ".concat(w," cells, found ").concat(S.length);var P=[];for(j=0;j<S.length-1;++j)P[S[j][0]]=B.subarray(S[j][1]*T,S[j+1][1]*T);return S.length>=1&&(P[S[S.length-1][0]]=B.subarray(S[S.length-1][1]*T)),{R:y,cells:P}}function zIe(e,t){var r,n=Wn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Os(n[7][0].data)>>>0>0?1:0:-1,s=WR(n[5],function(o){return VIe(o,a)});return{nrows:Os(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function $Ie(e,t,r){var n,a=Wn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Os(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Os(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=sn(s);var o=Wn(a[4][0].data),l=UV(e,e[Wo(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?UV(e,e[Wo(o[17][0].data)][0]):[],u=Wn(o[3][0].data),d=0;u[1].forEach(function(f){var h=Wn(f.data),m=e[Wo(h[2][0].data)][0],g=Os(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=zIe(e,m);x.data.forEach(function(v,y){v.forEach(function(w,_){var F=zr({r:d+y,c:_}),B=HIe(w,l,c);B&&(r[F]=B)})}),d+=x.nrows})}function GIe(e,t){var r=Wn(t.data),n={"!ref":"A1"},a=e[Wo(r[2][0].data)],s=Os(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return $Ie(e,a[0],n),n}function qIe(e,t){var r,n=Wn(t.data),a={name:(r=n[1])!=null&&r[0]?IF(n[1][0].data):"",sheets:[]},s=WR(n[2],Wo);return s.forEach(function(o){e[o].forEach(function(l){var c=Os(l.meta[1][0].data);c==6e3&&a.sheets.push(GIe(e,l))})}),a}function KIe(e,t){var r=e8(),n=Wn(t.data),a=WR(n[1],Wo);if(a.forEach(function(s){e[s].forEach(function(o){var l=Os(o.meta[1][0].data);if(l==2){var c=qIe(e,o);c.sheets.forEach(function(u,d){t8(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function SB(e){var t,r,n,a,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Du(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Ou(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Os(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=Os(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return KIe(s,l)}function WIe(e,t,r){var n,a,s,o;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=e[8])==null?void 0:s[0])==null?void 0:o.data)&&Os(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Bg(e[7][0].data),d=0,f=[],h=Bg(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=CB({t:"s",v:t[x]},r),y=_B({t:"s",v:t[x]},r);break;case"number":v=CB({t:"n",v:t[x]},r),y=_B({t:"n",v:t[x]},r);break;case"boolean":v=CB({t:"b",v:t[x]},r),y=_B({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(v),d+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=Aa(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=Rm(f),e[3][0].data=Rm(g),c}function XIe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=uc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(sn(n)));var s=$_(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(R){return R.forEach(function(G){typeof G=="string"&&o.push(G)})});var l={},c=[],u=jr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(R,G){return[R,u.FullPaths[G]]}).forEach(function(R){var G=R[0],Y=R[1];if(G.type==2&&G.name.match(/\.iwa/)){var te=G.content,ae=Du(te),oe=Ou(ae);oe.forEach(function(ie){c.push(ie.id),l[ie.id]={deps:[],location:Y,type:Os(ie.messages[0].meta[1][0].data)}})}}),c.sort(function(R,G){return R-G});var d=c.filter(function(R){return R>1}).map(function(R){return[R,Aa(R)]});u.FileIndex.map(function(R,G){return[R,u.FullPaths[G]]}).forEach(function(R){var G=R[0];if(R[1],!!G.name.match(/\.iwa/)){var Y=Ou(Du(G.content));Y.forEach(function(te){te.messages.forEach(function(ae){d.forEach(function(oe){te.messages.some(function(ie){return Os(ie.meta[1][0].data)!=11006&&PIe(ie.data,oe[1])})&&l[oe[0]].deps.push(te.id)})})})}});for(var f=jr.find(u,l[1].location),h=Ou(Du(f.content)),m,g=0;g<h.length;++g){var x=h[g];x.id==1&&(m=x)}var v=Wo(Wn(m.messages[0].data)[1][0].data);for(f=jr.find(u,l[v].location),h=Ou(Du(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Wo(Wn(m.messages[0].data)[2][0].data),f=jr.find(u,l[v].location),h=Ou(Du(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Wo(Wn(m.messages[0].data)[2][0].data),f=jr.find(u,l[v].location),h=Ou(Du(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);var y=Wn(m.messages[0].data);{y[6][0].data=Aa(n.e.r+1),y[7][0].data=Aa(n.e.c+1);var w=Wo(y[46][0].data),_=jr.find(u,l[w].location),F=Ou(Du(_.content));{for(var B=0;B<F.length&&F[B].id!=w;++B);if(F[B].id!=w)throw"Bad ColumnRowUIDMapArchive";var T=Wn(F[B].messages[0].data);T[1]=[],T[2]=[],T[3]=[];for(var C=0;C<=n.e.c;++C){var S=[];S[1]=S[2]=[{type:0,data:Aa(C+420690)}],T[1].push({type:2,data:po(S)}),T[2].push({type:0,data:Aa(C)}),T[3].push({type:0,data:Aa(C)})}T[4]=[],T[5]=[],T[6]=[];for(var j=0;j<=n.e.r;++j)S=[],S[1]=S[2]=[{type:0,data:Aa(j+726270)}],T[4].push({type:2,data:po(S)}),T[5].push({type:0,data:Aa(j)}),T[6].push({type:0,data:Aa(j)});F[B].messages[0].data=po(T)}_.content=Rx(Px(F)),_.size=_.content.length,delete y[46];var L=Wn(y[4][0].data);{L[7][0].data=Aa(n.e.r+1);var P=Wn(L[1][0].data),k=Wo(P[2][0].data);_=jr.find(u,l[k].location),F=Ou(Du(_.content));{if(F[0].id!=k)throw"Bad HeaderStorageBucket";var U=Wn(F[0].messages[0].data);for(j=0;j<s.length;++j){var Q=Wn(U[2][0].data);Q[1][0].data=Aa(j),Q[4][0].data=Aa(s[j].length),U[2][j]={type:U[2][0].type,data:po(Q)}}F[0].messages[0].data=po(U)}_.content=Rx(Px(F)),_.size=_.content.length;var K=Wo(L[2][0].data);_=jr.find(u,l[K].location),F=Ou(Du(_.content));{if(F[0].id!=K)throw"Bad HeaderStorageBucket";for(U=Wn(F[0].messages[0].data),C=0;C<=n.e.c;++C)Q=Wn(U[2][0].data),Q[1][0].data=Aa(C),Q[4][0].data=Aa(n.e.r+1),U[2][C]={type:U[2][0].type,data:po(Q)};F[0].messages[0].data=po(U)}_.content=Rx(Px(F)),_.size=_.content.length;var H=Wo(L[4][0].data);(function(){for(var R=jr.find(u,l[H].location),G=Ou(Du(R.content)),Y,te=0;te<G.length;++te){var ae=G[te];ae.id==H&&(Y=ae)}var oe=Wn(Y.messages[0].data);{oe[3]=[];var ie=[];o.forEach(function(ne,Be){ie[1]=[{type:0,data:Aa(Be)}],ie[2]=[{type:0,data:Aa(1)}],ie[3]=[{type:2,data:DIe(ne)}],oe[3].push({type:2,data:po(ie)})})}Y.messages[0].data=po(oe);var ue=Px(G),Ce=Rx(ue);R.content=Ce,R.size=R.content.length})();var q=Wn(L[3][0].data);{var z=q[1][0];delete q[2];var W=Wn(z.data);{var ee=Wo(W[2][0].data);(function(){for(var R=jr.find(u,l[ee].location),G=Ou(Du(R.content)),Y,te=0;te<G.length;++te){var ae=G[te];ae.id==ee&&(Y=ae)}var oe=Wn(Y.messages[0].data);{delete oe[6],delete q[7];var ie=new Uint8Array(oe[5][0].data);oe[5]=[];for(var ue=0,Ce=0;Ce<=n.e.r;++Ce){var ne=Wn(ie);ue+=WIe(ne,s[Ce],o),ne[1][0].data=Aa(Ce),oe[5].push({data:po(ne),type:2})}oe[1]=[{type:0,data:Aa(n.e.c+1)}],oe[2]=[{type:0,data:Aa(n.e.r+1)}],oe[3]=[{type:0,data:Aa(ue)}],oe[4]=[{type:0,data:Aa(n.e.r+1)}]}Y.messages[0].data=po(oe);var Be=Px(G),je=Rx(Be);R.content=je,R.size=R.content.length})()}z.data=po(W)}L[3][0].data=po(q)}y[4][0].data=po(L)}m.messages[0].data=po(y);var X=Px(h),O=Rx(X);return f.content=O,f.size=f.content.length,u}function Sne(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function XR(e){Sne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function YR(e){Sne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function YIe(e){return Cn.WS.indexOf(e)>-1?"sheet":e==Cn.CS?"chart":e==Cn.DS?"dialog":e==Cn.MS?"macro":e&&e.length?e:"sheet"}function JIe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,YIe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function ZIe(e,t,r,n,a,s,o,l,c,u,d,f){try{s[n]=Nw(Vc(e,r,!0),t);var h=fi(e,t),m;switch(l){case"sheet":m=yTe(h,t,a,c,s[n],u,d,f);break;case"chart":if(m=wTe(h,t,a,c,s[n],u,d,f),!m||!m["!drawel"])break;var g=Yy(m["!drawel"].Target,t),x=d2(g),v=l4e(Vc(e,g,!0),Nw(Vc(e,x,!0),g)),y=Yy(v,g),w=d2(y);m=WBe(Vc(e,y,!0),y,c,Nw(Vc(e,w,!0),y),u,m);break;case"macro":m=ETe(h,t,a,c,s[n],u,d,f);break;case"dialog":m=NTe(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=m;var _=[];s&&s[n]&&Ps(s[n]).forEach(function(F){var B="";if(s[n][F].Type==Cn.CMNT){B=Yy(s[n][F].Target,t);var T=kTe(fi(e,B,!0),B,c);if(!T||!T.length)return;CV(m,T,!1)}s[n][F].Type==Cn.TCMNT&&(B=Yy(s[n][F].Target,t),_=_.concat(u4e(fi(e,B,!0),c)))}),_&&_.length&&CV(m,_,!0,c.people||[])}catch(F){if(c.WTF)throw F}}function ku(e){return e.charAt(0)=="/"?e.slice(1):e}function e6e(e,t){if(n1(),t=t||{},XR(t),Ru(e,"META-INF/manifest.xml")||Ru(e,"objectdata.xml"))return PV(e,t);if(Ru(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof SB<"u"){if(e.FileIndex)return SB(e);var r=jr.utils.cfb_new();return GH(e).forEach(function(Q){dn(r,Q,dCe(e,Q))}),SB(r)}throw new Error("Unsupported NUMBERS file")}if(!Ru(e,"[Content_Types].xml"))throw Ru(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ru(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=GH(e),a=a5e(Vc(e,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",fi(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!fi(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(Cw=[],a.sst)try{Cw=STe(fi(e,ku(a.sst)),a.sst,t)}catch(Q){if(t.WTF)throw Q}t.cellStyles&&a.themes.length&&(c=_Te(Vc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=CTe(fi(e,ku(a.style)),a.style,c,t))}a.links.map(function(Q){try{var K=Nw(Vc(e,d2(ku(Q))),Q);return BTe(fi(e,ku(Q)),K,Q,t)}catch{}});var d=bTe(fi(e,ku(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=fi(e,ku(a.coreprops[0]),!0),h&&(f=mre(h)),a.extprops.length!==0&&(h=fi(e,ku(a.extprops[0]),!0),h&&d5e(h,f,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Vc(e,ku(a.custprops[0]),!0),h&&(m=A5e(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(K){return K.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=m),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var x={};t.bookDeps&&a.calcchain&&(x=jTe(fi(e,ku(a.calcchain)),a.calcchain));var v=0,y={},w,_;{var F=d.Sheets;f.Worksheets=F.length,f.SheetNames=[];for(var B=0;B!=F.length;++B)f.SheetNames[B]=F[B].name}var T=s?"bin":"xml",C=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,C+1)+"_rels/"+a.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");Ru(e,S)||(S="xl/_rels/workbook."+T+".rels");var j=Nw(Vc(e,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=TTe(fi(e,ku(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=f4e(fi(e,ku(a.people[0])),t)),j&&(j=JIe(j,d.Sheets));var L=fi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var P="sheet";if(j&&j[v]?(w="xl/"+j[v][1].replace(/[\/]?xl\//,""),Ru(e,w)||(w=j[v][1]),Ru(e,w)||(w=S.replace(/_rels\/.*$/,"")+j[v][1]),P=j[v][2]):(w="xl/worksheets/sheet"+(v+1-L)+"."+T,w=w.replace(/sheet0\./,"sheet.")),_=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var k=!1,U=0;U!=t.sheets.length;++U)typeof t.sheets[U]=="number"&&t.sheets[U]==v&&(k=1),typeof t.sheets[U]=="string"&&t.sheets[U].toLowerCase()==f.SheetNames[v].toLowerCase()&&(k=1);if(!k)continue e}}ZIe(e,w,_,f.SheetNames[v],v,y,o,P,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:m,Deps:x,Sheets:o,SheetNames:f.SheetNames,Strings:Cw,Styles:u,Themes:c,SSF:$a(Qr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(Q,K){Q=Q.replace(/^Root Entry[\/]/,""),g.keys.push(Q),g.files[Q]=e.FileIndex[K]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=fi(e,ku(a.vba[0]),!0):a.defaults&&a.defaults.bin===b4e&&(g.vbaraw=fi(e,"xl/vbaProject.bin",!0))),g}function t6e(e,t){var r=t||{},n="Workbook",a=jr.find(e,n);try{if(n="/!DataSpaces/Version",a=jr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(TSe(a.content),n="/!DataSpaces/DataSpaceMap",a=jr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=FSe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=jr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=OSe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=jr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);PSe(a.content)}catch{}if(n="/EncryptionInfo",a=jr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=RSe(a.content);if(n="/EncryptedPackage",a=jr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function r6e(e,t){return t.bookType=="ods"?_ne(e,t):t.bookType=="numbers"?XIe(e,t):t.bookType=="xlsb"?n6e(e,t):a6e(e,t)}function n6e(e,t){vv=1024,e&&!e.SSF&&(e.SSF=$a(Qr)),e&&e.SSF&&(n1(),Jk(e.SSF),t.revssf=e4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,_w?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=ene.indexOf(t.bookType)>-1,a=PR();YR(t=t||{});var s=wR(),o="",l=0;if(t.cellXfs=[],Jm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",dn(s,o,pre(e.Props,t)),a.coreprops.push(o),ha(t.rels,2,o,Cn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,dn(s,o,vre(e.Props)),a.extprops.push(o),ha(t.rels,3,o,Cn.EXT_PROPS),e.Custprops!==e.Props&&Ps(e.Custprops||{}).length>0&&(o="docProps/custom.xml",dn(s,o,bre(e.Custprops)),a.custprops.push(o),ha(t.rels,4,o,Cn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,dn(s,o,FTe(l-1,o,t,e,d)),a.sheets.push(o),ha(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Cn.WS[0])}if(f){var m=f["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+r,dn(s,x,PTe(m,x)),a.comments.push(x),ha(d,-1,"../comments"+l+"."+r,Cn.CMNT),g=!0),f["!legacy"]&&g&&dn(s,"xl/drawings/vmlDrawing"+l+".vml",Jre(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&dn(s,d2(o),Mv(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,dn(s,o,DTe(t.Strings,o,t)),a.strs.push(o),ha(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),o="xl/workbook."+r,dn(s,o,ITe(e,o)),a.workbooks.push(o),ha(t.rels,1,o,Cn.WB),o="xl/theme/theme1.xml",dn(s,o,HR(e.Themes,t)),a.themes.push(o),ha(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),o="xl/styles."+r,dn(s,o,OTe(e,o,t)),a.styles.push(o),ha(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",dn(s,o,e.vbaraw),a.vba.push(o),ha(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),o="xl/metadata."+r,dn(s,o,RTe(o)),a.metadata.push(o),ha(t.wbrels,-1,"metadata."+r,Cn.XLMETA),dn(s,"[Content_Types].xml",Are(a,t)),dn(s,"_rels/.rels",Mv(t.rels)),dn(s,"xl/_rels/workbook."+r+".rels",Mv(t.wbrels)),delete t.revssf,delete t.ssf,s}function a6e(e,t){vv=1024,e&&!e.SSF&&(e.SSF=$a(Qr)),e&&e.SSF&&(n1(),Jk(e.SSF),t.revssf=e4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,_w?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=ene.indexOf(t.bookType)>-1,a=PR();YR(t=t||{});var s=wR(),o="",l=0;if(t.cellXfs=[],Jm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",dn(s,o,pre(e.Props,t)),a.coreprops.push(o),ha(t.rels,2,o,Cn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,dn(s,o,vre(e.Props)),a.extprops.push(o),ha(t.rels,3,o,Cn.EXT_PROPS),e.Custprops!==e.Props&&Ps(e.Custprops||{}).length>0&&(o="docProps/custom.xml",dn(s,o,bre(e.Custprops)),a.custprops.push(o),ha(t.rels,4,o,Cn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,dn(s,o,dne(l-1,t,e,f)),a.sheets.push(o),ha(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Cn.WS[0])}if(h){var g=h["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(_){_.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+l+"."+r,dn(s,v,d4e(g,d,t)),a.threadedcomments.push(v),ha(f,-1,"../threadedComments/threadedComment"+l+"."+r,Cn.TCMNT)),v="xl/comments"+l+"."+r,dn(s,v,Zre(g)),a.comments.push(v),ha(f,-1,"../comments"+l+"."+r,Cn.CMNT),x=!0}h["!legacy"]&&x&&dn(s,"xl/drawings/vmlDrawing"+l+".vml",Jre(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&dn(s,d2(o),Mv(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,dn(s,o,Ure(t.Strings,t)),a.strs.push(o),ha(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),o="xl/workbook."+r,dn(s,o,pne(e)),a.workbooks.push(o),ha(t.rels,1,o,Cn.WB),o="xl/theme/theme1.xml",dn(s,o,HR(e.Themes,t)),a.themes.push(o),ha(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),o="xl/styles."+r,dn(s,o,Kre(e,t)),a.styles.push(o),ha(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",dn(s,o,e.vbaraw),a.vba.push(o),ha(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),o="xl/metadata."+r,dn(s,o,Yre()),a.metadata.push(o),ha(t.wbrels,-1,"metadata."+r,Cn.XLMETA),d.length>1&&(o="xl/persons/person.xml",dn(s,o,A4e(d)),a.people.push(o),ha(t.wbrels,-1,"persons/person.xml",Cn.PEOPLE)),dn(s,"[Content_Types].xml",Are(a,t)),dn(s,"_rels/.rels",Mv(t.rels)),dn(s,"xl/_rels/workbook."+r+".rels",Mv(t.wbrels)),delete t.revssf,delete t.ssf,s}function JR(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Jc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function s6e(e,t){return jr.find(e,"EncryptedPackage")?t6e(e,t):bne(e,t)}function i6e(e,t){var r,n=e,a=t||{};return a.type||(a.type=vn&&Buffer.isBuffer(e)?"buffer":"base64"),r=Hte(n,a),e6e(r,a)}function kne(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return BF(e.slice(r),t);default:break e}return hb.to_workbook(e,t)}function o6e(e,t){var r="",n=JR(e,t);switch(t.type){case"base64":r=Jc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=_g(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ea(r)),t.type="binary",kne(r,t)}function l6e(e,t){var r=e;return t.type=="base64"&&(r=Jc(r)),r=s2.utils.decode(1200,r.slice(2),"str"),t.type="binary",kne(r,t)}function c6e(e){return e.match(/[^\x00-\x7F]/)?Xf(e):e}function kB(e,t,r,n){return n?(r.type="string",hb.to_workbook(e,r)):hb.to_workbook(t,r)}function pb(e,t){gR();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return pb(new Uint8Array(e),(r=$a(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Qv={},r.dateNF&&(Qv.dateNF=r.dateNF),r.type||(r.type=vn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=vn?"buffer":"binary",n=nCe(e),typeof Uint8Array<"u"&&!vn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=c6e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=$a(r),r.type="array",pb(xR(n),r)}switch((a=JR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return s6e(jr.read(n,r),r);break;case 9:if(a[1]<=8)return bne(n,r);break;case 60:return BF(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return hSe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Lre.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?i6e(n,r):kB(e,n,r,s);case 239:return a[3]===60?BF(n,r):kB(e,n,r,s);case 255:if(a[1]===254)return l6e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return ig.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return ig.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return jF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return $re.to_workbook(n,r);break;case 10:case 13:case 32:return o6e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return ASe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?jF.to_workbook(n,r):kB(e,n,r,s)}function jne(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return iE(t.file,jr.write(e,{type:vn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return jr.write(e,t)}function u6e(e,t){var r=$a(t||{}),n=r6e(e,r);return d6e(n,r)}function d6e(e,t){var r={},n=vn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?jr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(Yk(a))}return t.password&&typeof encrypt_agile<"u"?jne(encrypt_agile(a,t.password),t):t.type==="file"?iE(t.file,a):t.type=="string"?Ea(a):a}function f6e(e,t){var r=t||{},n=cIe(e,r);return jne(n,r)}function Lf(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return i2(Xf(n));case"binary":return Xf(n);case"string":return e;case"file":return iE(t.file,n,"utf8");case"buffer":return vn?zh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Lf(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function A6e(e,t){switch(t.type){case"base64":return i2(e);case"binary":return e;case"string":return e;case"file":return iE(t.file,e,"binary");case"buffer":return vn?zh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function uC(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?i2(r):t.type=="string"?Ea(r):r;case"file":return iE(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Bne(e,t){gR(),sTe(e);var r=$a(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Bne(e,r);return r.type="array",Yk(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Lf(rIe(e,r),r);case"slk":case"sylk":return Lf(Rre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Lf(wne(e.Sheets[e.SheetNames[a]],r),r);case"txt":return A6e(Tne(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Lf(ZR(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Lf(Lre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return uC(jF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Lf(hb.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Lf($re.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Lf(Mre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Lf(_ne(e,r),r);case"wk1":return uC(ig.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return uC(ig.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),uC(yne(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),f6e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return u6e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function h6e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function i1(e,t,r){var n={};return n.type="file",n.file=t,h6e(n),Bne(e,n)}function m6e(e,t,r,n,a,s,o,l){var c=Zs(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=o?e[r][m]:e[n[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[m]!=null&&(h[s[m]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[m]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[m]]=null;else if(u!==void 0)h[s[m]]=u;else if(d&&x===null)h[s[m]]=null;else continue;else h[s[m]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:Bh(g,x,l);x!=null&&(f=!1)}}return{row:h,isempty:f}}function $_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Hn(d);break;case"number":c=Hn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Zs(c.s.r),h=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,w=0,_={};v&&!e[y]&&(e[y]=[]);var F=u.skipHidden&&e["!cols"]||[],B=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(F[w]||{}).hidden)switch(h[w]=us(w),r=v?e[y][w]:e[h[w]+f],n){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Bh(r,null,u),x=_[o]||0,!x)_[o]=1;else{do l=o+"_"+x++;while(_[l]);_[o]=x,_[l]=1}s[w]=l}for(y=c.s.r+a;y<=c.e.r;++y)if(!(B[y]||{}).hidden){var T=m6e(e,c,y,h,n,s,v,u);(T.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=T.row)}return m.length=g,m}var QV=/"/g;function p6e(e,t,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=Zs(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=l.dense?(e[r]||[])[h]:e[n[h]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:Bh(m,null,l));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||l.forceQuotes){d='"'+d.replace(QV,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(QV,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function ZR(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Hn(e["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=us(g));for(var x=0,v=a.s.r;v<=a.e.r;++v)(m[v]||{}).hidden||(d=p6e(e,a,v,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?l:"")+d)));return delete n.dense,r.join("")}function Tne(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=ZR(e,t);return r}function g6e(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Hn(e["!ref"]),s="",o=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=us(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=Zs(d),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+s,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function Ine(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ds(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(s["!ref"]){var f=Hn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+a)}else o==-1&&(o=0,d.e.r=t.length-1+a);var h=n.header||[],m=0;t.forEach(function(x,v){Ps(x).forEach(function(y){(m=h.indexOf(y))==-1&&(h[m=h.length]=y);var w=x[y],_="z",F="",B=zr({c:l+m,r:o+v+a});u=x2(s,B),w&&typeof w=="object"&&!(w instanceof Date)?s[B]=w:(typeof w=="number"?_="n":typeof w=="boolean"?_="b":typeof w=="string"?_="s":w instanceof Date?(_="d",n.cellDates||(_="n",w=Fi(w)),F=n.dateNF||Qr[14]):w===null&&n.nullError&&(_="e",w=0),u?(u.t=_,u.v=w,delete u.w,delete u.R,F&&(u.z=F)):s[B]=u={t:_,v:w},F&&(u.z=F))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=Zs(o);if(a)for(m=0;m<h.length;++m)s[us(m+l)+g]={t:"s",v:h[m]};return s["!ref"]=sn(d),s}function x6e(e,t){return Ine(null,e,t)}function x2(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ds(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?x2(e,zr(t)):x2(e,zr({r:t,c:r||0}))}function v6e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function e8(){return{SheetNames:[],Sheets:{}}}function t8(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(mne(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function b6e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=v6e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function y6e(e,t){return e.z=t,e}function Fne(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function w6e(e,t,r){return Fne(e,"#"+t,r)}function E6e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function N6e(e,t,r,n){for(var a=typeof t!="string"?t:Hn(t),s=typeof t=="string"?t:sn(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=x2(e,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Is={encode_col:us,encode_row:Zs,encode_cell:zr,encode_range:sn,decode_col:BR,decode_row:jR,split_cell:DCe,decode_cell:ds,decode_range:uc,format_cell:Bh,sheet_add_aoa:ire,sheet_add_json:Ine,sheet_add_dom:Ene,aoa_to_sheet:a1,json_to_sheet:x6e,table_to_sheet:Nne,table_to_book:TIe,sheet_to_csv:ZR,sheet_to_txt:Tne,sheet_to_json:$_,sheet_to_html:wne,sheet_to_formulae:g6e,sheet_to_row_object_array:$_,sheet_get_cell:x2,book_new:e8,book_append_sheet:t8,book_set_sheet_visibility:b6e,cell_set_number_format:y6e,cell_set_hyperlink:Fne,cell_set_internal_link:w6e,cell_add_comment:E6e,sheet_set_array_formula:N6e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function C6e({data:e,fileName:t,sheetName:r="Sheet 1"}){try{const n=Is.book_new(),a=Is.json_to_sheet(e);Is.book_append_sheet(n,a,r),i1(n,`${t}.xlsx`)}catch(n){console.error("Error exporting to Excel:",n),alert("Hubo un error al generar el archivo de Excel. Por favor, intente de nuevo.")}}const _6e=Array.from({length:12},(e,t)=>t+1),HV={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},S6e=e=>{const[t,r]=N.useState([]),[n,a]=N.useState(!0),[s,o]=N.useState(null);N.useEffect(()=>e?wNe(e,f=>{r(f),a(!1)}):void 0,[e]);const l=N.useCallback(async d=>{try{return o(null),await bNe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=N.useCallback(async d=>{try{o(null),await yNe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=N.useCallback(async d=>{try{return o(null),d.trim()?await NNe(e,d):t}catch(f){return o(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:l,remove:c,search:u}},k6e=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!0);N.useEffect(()=>ENe(o=>{t(o),n(!1)}),[]);const a=N.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},Lx=({label:e,icon:t,children:r})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),i.jsxs("div",{className:"relative",children:[t&&i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),j6e="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",B6e="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",T6e="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",O0=({title:e,value:t,icon:r})=>i.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),i.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),I6e=({data:e,title:t,period:r})=>{const n=Math.max(1,...e.map(s=>s.value)),a=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[i.jsx(qc,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:t||`Reemplazos / Inasistencias por curso (${r==="month"?"mes":"total"})`})]}),e.length===0?i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["No hay registros ",r==="month"?"este mes":"en el período seleccionado","."]}):i.jsx("div",{className:"grid gap-3",children:e.map((s,o)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:s.label}),i.jsx("span",{children:s.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${a[o%a.length]}`,style:{width:`${s.value/n*100}%`}})})]},s.label))})]})},jB=({title:e,data:t,icon:r})=>{const n=Math.max(1,...t.map(s=>s.value)),a=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[r,i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:e})]}),t.length===0?i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros para mostrar."}):i.jsx("div",{className:"grid gap-3",children:t.slice(0,5).map((s,o)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:s.label}),i.jsx("span",{children:s.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${a[o%a.length]}`,style:{width:`${s.value/n*100}%`}})})]},s.label))})]})},F6e=({reemplazos:e,period:t})=>{const r=N.useMemo(()=>{if(t==="month"){const a=new Date,s=a.getMonth(),o=a.getFullYear();return(e||[]).filter(l=>{if(!l.diaAusencia)return!1;const c=new Date(l.diaAusencia+"T00:00:00");return c.getMonth()===s&&c.getFullYear()===o})}return e},[e,t]),n=N.useMemo(()=>{const a=r.length,s=r.filter(u=>u.resultado==="Hora realizada").length,o=a-s,l=a>0?s/a*100:0,c=u=>Object.entries(r.reduce((d,f)=>{const h=f[u];return h&&(d[h]=(d[h]||0)+1),d},{})).map(([d,f])=>({label:d,value:f})).sort((d,f)=>f.value-d.value);return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:o,porcentajeRealizadas:l,setAusentes:new Set(r.map(u=>u.docenteAusente).filter(Boolean)),setReemplazan:new Set(r.map(u=>u.docenteReemplazante).filter(Boolean)),setCursos:new Set(r.map(u=>u.curso).filter(Boolean)),setAsigAusentes:new Set(r.map(u=>u.asignaturaAusente).filter(Boolean)),ausenciasPorProfesor:c("docenteAusente"),reemplazosPorProfesor:c("docenteReemplazante"),ausenciasPorAsignatura:c("asignaturaAusente")}},[r]);return n?i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(O0,{title:"Total Reemplazos",value:n.totalReemplazos,icon:i.jsx(Rwe,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Horas Realizadas",value:n.horasRealizadas,icon:i.jsx(ts,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Horas Cubiertas",value:n.horasCubiertas,icon:i.jsx(v2e,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Efectividad",value:`${n.porcentajeRealizadas.toFixed(1)}%`,icon:i.jsx(yEe,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(O0,{title:"Profesores ausentes (únicos)",value:n.setAusentes.size,icon:i.jsx(jH,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Reemplazantes (únicos)",value:n.setReemplazan.size,icon:i.jsx(T_,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Cursos (únicos)",value:n.setCursos.size,icon:i.jsx(ro,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Asignaturas ausentes (únicas)",value:n.setAsigAusentes.size,icon:i.jsx(vi,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsx(jB,{title:`Profesores con más ausencias (${t==="month"?"mes":"total"})`,data:n.ausenciasPorProfesor,icon:i.jsx(jH,{className:"h-5 w-5 text-slate-400"})}),i.jsx(jB,{title:`Profesores que más reemplazan (${t==="month"?"mes":"total"})`,data:n.reemplazosPorProfesor,icon:i.jsx(T_,{className:"h-5 w-5 text-slate-400"})})]}),i.jsx("div",{className:"grid gap-4",children:i.jsx(jB,{title:`Asignaturas con más ausencias (${t==="month"?"mes":"total"})`,data:n.ausenciasPorAsignatura,icon:i.jsx(vi,{className:"h-5 w-5 text-slate-400"})})})]}):i.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[i.jsx(El,{className:"h-5 w-5 animate-spin"}),"Calculando estadísticas…"]})})},O6e=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:o,error:l}=S6e(t),{profesorNames:c,loading:u}=k6e(),[d,f]=N.useState(HV),[h,m]=N.useState(""),[g,x]=N.useState([]),[v,y]=N.useState(null),[w,_]=N.useState(!1),[F,B]=N.useState(!1),[T,C]=N.useState("month"),[S,j]=N.useState(null);N.useEffect(()=>{(async()=>{if(!h.trim()){x(r);return}B(!0);try{const W=await s(h);x(W)}finally{B(!1)}})()},[r,h,s]);const L=N.useMemo(()=>{let z=[...g];return S!==null&&z.sort((W,ee)=>{const X=S.key,O=W[X],R=ee[X];if(O==null)return 1;if(R==null)return-1;let G=0;if(X==="bloquesAfectados"){const Y=O,te=R;Y.length<te.length?G=-1:Y.length>te.length&&(G=1)}else{const Y=String(O),te=String(R);G=Y.localeCompare(te,"es",{numeric:!0})}return S.direction==="ascending"?G:-G}),z},[g,S]),P=z=>{let W="ascending";S&&S.key===z&&S.direction==="ascending"&&(W="descending"),j({key:z,direction:W})},k=N.useCallback(z=>{const{name:W,value:ee}=z.target;f(X=>({...X,[W]:ee}))},[]),U=N.useCallback(z=>{f(W=>{const X=W.bloquesAfectados.includes(z)?W.bloquesAfectados.filter(O=>O!==z):[...W.bloquesAfectados,z].sort((O,R)=>O-R);return{...W,bloquesAfectados:X}})},[]),Q=N.useCallback(async z=>{z.preventDefault(),y(null),_(!0);const{docenteAusente:W,asignaturaAusente:ee,curso:X,diaAusencia:O,bloquesAfectados:R,docenteReemplazante:G,asignaturaReemplazante:Y}=d;if(!W||!ee||!X||!O||!G||!Y||R.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),_(!1);return}if(W===G){y("El docente ausente y el reemplazante no pueden ser la misma persona."),_(!1);return}try{const te=ee.trim().toLowerCase()===Y.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",ae={...d,resultado:te};await n(ae),f(HV);const oe=document.createElement("div");oe.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",oe.textContent=te==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(oe),setTimeout(()=>{document.body.contains(oe)&&document.body.removeChild(oe)},2500)}catch(te){console.error(te),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{_(!1)}},[d,n]),K=N.useCallback(async z=>{if(window.confirm("¿Eliminar este registro?"))try{await a(z)}catch(W){console.error(W),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),H=N.useMemo(()=>{const z=T==="month"?r.filter(ee=>{if(!ee.diaAusencia)return!1;const X=new Date(ee.diaAusencia+"T00:00:00"),O=new Date;return X.getMonth()===O.getMonth()&&X.getFullYear()===O.getFullYear()}):r,W={};for(const ee of z){const X=ee.curso||"Sin curso";W[X]=(W[X]||0)+1}return Object.entries(W).sort(([ee],[X])=>ee.localeCompare(X,"es")).map(([ee,X])=>({label:ee,value:X}))},[r,T]),q="w-full rounded-lg border bg-white pl-10 pr-4 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!(e!=null&&e.id)&&!(e!=null&&e.email)?i.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando datos para: ",T==="month"?"Mes Actual":"Total"]})]}),i.jsxs("div",{className:"flex items-center rounded-lg bg-slate-100 p-1 dark:bg-slate-700",children:[i.jsx("button",{onClick:()=>C("month"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${T==="month"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Mes"}),i.jsx("button",{onClick:()=>C("total"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${T==="total"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Total"})]})]}),i.jsx(F6e,{reemplazos:r,period:T})]}),i.jsx(I6e,{data:H,title:`Reemplazos / Inasistencias por curso (${T==="month"?"mes":"total"})`,period:T}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[i.jsx(El,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):i.jsxs("form",{onSubmit:Q,className:"space-y-8",children:[i.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ro,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),i.jsx(Lx,{label:"Nombre",icon:i.jsx(Ng,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:k,className:q,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(z=>i.jsx("option",{value:z,children:z},z))]})}),i.jsx(Lx,{label:"Asignatura",icon:i.jsx(vi,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:k,className:q,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),ls.map(z=>i.jsx("option",{value:z,children:z},z))]})}),i.jsx(Lx,{label:"Curso",icon:i.jsx(ro,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"curso",value:d.curso,onChange:k,className:q,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),js.map(z=>i.jsx("option",{value:z,children:z},z))]})}),i.jsx(Lx,{label:"Día de ausencia",icon:i.jsx(oc,{className:"h-5 w-5"}),children:i.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:k,className:q,required:!0,disabled:w})}),i.jsxs("div",{children:[i.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[i.jsx(Wf,{className:"h-5 w-5 text-slate-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),i.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:_6e.map(z=>{const W=d.bloquesAfectados.includes(z);return i.jsx("button",{type:"button",onClick:()=>U(z),disabled:w,className:`${j6e} ${W?B6e:T6e}`,"aria-pressed":W,children:z},z)})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ro,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),i.jsx(Lx,{label:"Nombre",icon:i.jsx(Ng,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:k,className:q,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(z=>i.jsx("option",{value:z,children:z},z))]})}),i.jsx(Lx,{label:"Asignatura",icon:i.jsx(vi,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:k,className:q,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),ls.map(z=>i.jsx("option",{value:z,children:z},z))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&i.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[i.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(ts,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||l)&&i.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||l}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?i.jsxs(i.Fragment,{children:[i.jsx(El,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):i.jsxs(i.Fragment,{children:[i.jsx(Yc,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando ",L.length," de ",r.length," registros."]})]}),i.jsxs("div",{className:"flex w-full sm:w-auto items-center gap-2",children:[i.jsxs("div",{className:"relative w-full max-w-md",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:F?i.jsx(El,{className:"h-5 w-5 animate-spin"}):i.jsx(e1,{className:"h-5 w-5"})}),i.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:z=>m(z.target.value),className:q+" pl-10",disabled:F})]}),i.jsxs("button",{onClick:()=>C6e({data:L.map(z=>({Fecha:z.diaAusencia,Curso:z.curso,"Docente Ausente":z.docenteAusente,"Asignatura Ausente":z.asignaturaAusente,"Docente Reemplazante":z.docenteReemplazante,"Asignatura Reemplazante":z.asignaturaReemplazante,"Bloques Afectados":z.bloquesAfectados.join(", "),Resultado:z.resultado})),fileName:`Historial_Reemplazos_${new Date().toISOString().split("T")[0]}`,sheetName:"Reemplazos"}),disabled:L.length===0,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-50",title:"Descargar datos filtrados a Excel",children:[i.jsx(j2e,{className:"h-4 w-4"}),i.jsx("span",{children:"Excel"})]})]})]}),o?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[i.jsx(El,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[[{label:"Fecha",key:"diaAusencia"},{label:"Curso",key:"curso"},{label:"Docente Ausente",key:"docenteAusente"},{label:"Docente Reemplazante",key:"docenteReemplazante"},{label:"Bloques",key:"bloquesAfectados"},{label:"Resultado",key:"resultado"}].map(z=>i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:i.jsxs("button",{onClick:()=>P(z.key),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-200",children:[z.label,i.jsx(Fwe,{className:"h-3 w-3"})]})},z.key)),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:L.length>0?L.map(z=>i.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(z.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:z.curso}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[z.docenteAusente,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:z.asignaturaAusente})]}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[z.docenteReemplazante,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:z.asignaturaReemplazante})]}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:z.bloquesAfectados.join(", ")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${z.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(ts,{className:"h-4 w-4"}),z.resultado]})}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsx("button",{onClick:()=>K(z.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:i.jsx(Va,{className:"h-4 w-4"})})})]},z.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),L.length>0&&!h&&i.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",L.length," registros"]})]})]})]})},D6e=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=mt(Nr,"reemplazos"),r=Ht(t,ar("fecha","desc"));return mr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},P6e=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=mt(Nr,"acompanamientos"),r=Ht(t,ar("fecha","desc"));return mr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},R6e=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=mt(Nr,"calendar_events"),r=Ht(t,ar("date","asc"));return mr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},Df=({title:e,value:t,description:r,isLoading:n=!1})=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),kp=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=N.useMemo(()=>t.map(l=>typeof l.value=="number"?l.value:parseFloat(String(l.value))||0),[t]),o=N.useMemo(()=>Math.max(...s,1),[s]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):i.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((l,c)=>(typeof c.value=="number"?c.value:0)-(typeof l.value=="number"?l.value:0)).map((l,c)=>{const u=typeof l.value=="number"?l.value:parseFloat(String(l.value))||0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:l.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(l.value)})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/o*100}%`}})})]},l.label+c)}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},L6e=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState([]),[o,l]=N.useState(!0),[c,u]=N.useState(null);return N.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(l(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const m=D6e(v=>{t(v),h()}),g=P6e(v=>{n(v),h()}),x=R6e(v=>{s(v),h()});return()=>{m(),g(),x()}}catch(m){console.error("❌ Error al configurar suscripciones del dashboard:",m),u(m instanceof Error?m.message:"Error al cargar datos del dashboard"),l(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:o,error:c}},M6e=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=L6e(),[o,l]=N.useState(xw);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),N.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");l(m?JSON.parse(m):xw)}catch(m){console.error("Error al leer rúbrica personalizada",m),l(xw)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),i.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[i.jsx("p",{children:i.jsx("strong",{children:"Debug Info:"})}),i.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),i.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),i.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),i.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=N.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(B=>B.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(B,T)=>B.reduce((C,S)=>{const j=S[T];return typeof j=="string"&&(C[j]=(C[j]||0)+1),C},{}),w=y(t,"docenteAusente"),_=y(t,"docenteReemplazante"),F=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(w).map(([B,T])=>({label:B,value:T})),reemplazosPorDocente:Object.entries(_).map(([B,T])=>({label:B,value:T})),inasistenciasPorCurso:Object.entries(F).map(([B,T])=>({label:B,value:T})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=N.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;o.forEach(T=>{T.criteria.forEach(C=>{g.set(C.name,T.domain)})});let x=0,v=0;const y={},w={};r.forEach(T=>{y[T.docente]||(y[T.docente]={total:0,count:0}),Object.entries(T.rubricaResultados).forEach(([C,S])=>{x+=S,v++,y[T.docente].total+=S,y[T.docente].count++;const j=g.get(C);j&&(w[j]||(w[j]={total:0,count:0}),w[j].total+=S,w[j].count++)})});const _=v>0?(x/v).toFixed(2):"N/A",F=Object.entries(y).map(([T,C])=>({label:T,value:C.count>0?(C.total/C.count).toFixed(2):0})),B=Object.entries(w).map(([T,C])=>({label:T,value:C.count>0?(C.total/C.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:_,desempenoPorDocente:F,desempenoPorDominio:B}},[r,o]),d=N.useMemo(()=>{const m={[fn.EVALUACION]:0,[fn.ACTO]:0,[fn.ACTIVIDAD_FOCALIZADA]:0,[fn.SALIDA_PEDAGOGICA]:0};for(const x of n)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:Pv[x].label,value:v}));return{totalEvaluaciones:m[fn.EVALUACION],totalActos:m[fn.ACTO],totalActividadesFocalizadas:m[fn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[fn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:"📊"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),i.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[i.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),i.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),i.jsx("p",{children:"• Calendario Académico"})]})]}):i.jsxs("div",{className:"space-y-12 animate-fade-in",children:[i.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),i.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),i.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Df,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),i.jsx(Df,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),i.jsx(Df,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),i.jsx(Df,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(kp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),i.jsx(kp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),i.jsx(kp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),i.jsx(kp,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Df,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),i.jsx(Df,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(kp,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a}),i.jsx(kp,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a})]})]}),n.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Df,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),i.jsx(Df,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),i.jsx(Df,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),i.jsx(Df,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(kp,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return i.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin título"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&i.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",m.ubicacion]})]}),i.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=Pv[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=Pv[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),n.filter(m=>new Date(m.date)>=new Date).length===0&&i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),i.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[i.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),i.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},FF="carga_horaria_asignaciones",One="usuarios",U6e=e=>{const t=e.data();return{id:e.id,...t}},Q6e=e=>{const t=Ht(mt(tt,One),xr("profile","in",["PROFESORADO","SUBDIRECCION","COORDINACION_TP"]),ar("nombreCompleto","asc"));return mr(t,n=>{const a=n.docs.map(s=>{const o=s.data();return{id:s.id,nombre:o.nombreCompleto||o.nombre||o.email||"Sin nombre",departamento:o.departamento||"General",horasContrato:o.horasContrato||44,perfil:o.profile||"PROFESORADO",email:o.email}});e(a)},n=>{console.error("Error al suscribirse a los docentes:",n),e([])})},H6e=async e=>{try{return(await mn(mt(tt,One),{nombreCompleto:e.nombre,email:e.email,departamento:e.departamento||"General",horasContrato:e.horasContrato,profile:e.perfil,createdAt:Na()})).id}catch(t){throw console.error("Error al crear nuevo docente:",t),new Error("No se pudo crear el docente.")}},V6e=e=>{const t=Ht(mt(tt,FF),ar("docenteNombre","asc"));return mr(t,n=>{const a=n.docs.map(s=>U6e(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},z6e=async(e,t=!1)=>{try{if(t){const a=(await qr(mt(tt,FF))).docs.map(s=>Ca(s.ref));await Promise.all(a),console.log(`Se eliminaron ${a.length} asignaciones existentes`)}const r=e.map(n=>mn(mt(tt,FF),{...n,createdAt:Na(),updatedAt:Na()}));await Promise.all(r),console.log(`Se guardaron ${r.length} asignaciones`)}catch(r){throw console.error("Error al guardar asignaciones en batch:",r),new Error("No se pudieron guardar todas las asignaciones.")}},G_=e=>{const t={44:38,43:37,42:36,41:35,40:35,39:34,38:33,37:32,36:31,35:30,34:29,33:29,32:28,31:27,30:26,29:25,28:24,27:23,26:22,25:22,24:21,23:20,22:19,21:18,20:17,19:16,18:16,17:15,16:14,15:13,14:12,13:11,12:10,11:10,10:9,9:8,8:7,7:6,6:5,5:4,4:3,3:2,2:1,1:1};return t[e]!==void 0?t[e]:Math.round(e*.65)},Jy=e=>{const t=G_(e);return e-t},_5=e=>Object.values(e).reduce((t,r)=>t+(r||0),0),Dne=(e,t)=>{const r=G_(e.horasContrato),n=Jy(e.horasContrato),a=t.filter(m=>m.docenteId===e.id),s=a.reduce((m,g)=>m+_5(g.horasPorCurso),0),o=a.reduce((m,g)=>{if(g.funcionesLectivas&&g.funcionesLectivas.length>0)return m+g.funcionesLectivas.reduce((x,v)=>x+v.horas,0);if(g.funcionesNoLectivas&&g.funcionesNoLectivas.length>0)return m+g.funcionesNoLectivas.reduce((x,v)=>x+v.horas,0);{const x=g.otraFuncion&&parseInt(g.otraFuncion)||0;return m+x}},0),l=s+o,c=0,u=r-l,d=n-c,f=[],h=[];return l>r&&f.push(`Excede horas lectivas: ${l}/${r}`),c>n&&f.push(`Excede horas no lectivas: ${c}/${n}`),l<r&&l>0&&h.push(`Faltan ${u} horas lectivas`),{HA:r,HB:n,sumCursos:s,sumFunciones:c,sumFuncionesLectivas:o,totalHorasLectivas:l,restantesHA:u,restantesHB:d,horasContrato:e.horasContrato,valido:f.length===0,warnings:h,errors:f}},$6e=(e,t)=>{const r=Dne(e,t),n=[];return r.errors.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"error",mensaje:`${e.nombre}: ${a}`})}),r.warnings.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"warning",mensaje:`${e.nombre}: ${a}`})}),n},G6e=e=>{const t=e.match(/^(\d+)([A-E])$/i);return t?`${t[1]}º${t[2].toUpperCase()}`:e},q6e=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes slideInFromBottom {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scaleIn {
    animation: scaleIn 0.3s ease-out forwards;
  }

  .animate-slideIn {
    animation: slideInFromBottom 0.3s ease-out forwards;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0,0,0,0.25);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
  }
`,K6e=()=>{N.useEffect(()=>{const X=document.createElement("style");return X.innerHTML=q6e,document.head.appendChild(X),()=>{document.head.removeChild(X)}},[]);const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState({busqueda:"",curso:"",asignatura:"",departamento:""}),[o,l]=N.useState(!1),[c,u]=N.useState("docentes"),[d,f]=N.useState([]),[h,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),[w,_]=N.useState("");N.useEffect(()=>Q6e(O=>t(O)),[]),N.useEffect(()=>V6e(O=>{const R=O.map(G=>{let Y=G.funcionesLectivas||[];!Y.length&&G.funcionesNoLectivas&&G.funcionesNoLectivas.length?Y=G.funcionesNoLectivas:!Y.length&&G.otraFuncion&&(Y=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:G.otraFuncion,horas:parseInt(G.otraFuncion)||0}]);const{funcionesNoLectivas:te,otraFuncion:ae,...oe}=G;return{...oe,funcionesLectivas:Y}});n(R)}),[]);const F=N.useMemo(()=>{const X={};return e.forEach(O=>{const R=r.filter(G=>G.docenteId===O.id);X[O.id]=Dne(O,R)}),X},[e,r]);N.useEffect(()=>{const X=[];e.forEach(O=>X.push(...$6e(O,r))),f(X)},[e,r]);const B=N.useMemo(()=>w?e.filter(X=>{var O;return X.nombre.toLowerCase().includes(w.toLowerCase())||((O=X.email)==null?void 0:O.toLowerCase().includes(w.toLowerCase()))}):e,[e,w]),T=N.useMemo(()=>r.filter(O=>{const R=e.find(G=>G.id===O.docenteId);return!(!R||a.busqueda&&!R.nombre.toLowerCase().includes(a.busqueda.toLowerCase())||a.asignatura&&O.asignaturaOModulo!==a.asignatura||a.departamento&&R.departamento!==a.departamento||a.curso&&!Object.keys(O.horasPorCurso).includes(a.curso))}).sort((O,R)=>O.docenteId!==R.docenteId?O.docenteId.localeCompare(R.docenteId):(O.asignaturaOModulo||"").localeCompare(R.asignaturaOModulo||"")),[r,e,a]),C=async()=>{try{if(m(!0),!v.nombre||!v.email){alert("El nombre y email son obligatorios"),m(!1);return}await H6e(v),x(!1),y({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),alert("Docente creado exitosamente")}catch(X){console.error(X),alert("Error al crear docente")}finally{m(!1)}},S=N.useCallback(()=>{if(e.length===0)return;const X={id:`asig_${Date.now()}`,docenteId:e[0].id,docenteNombre:e[0].nombre,asignaturaOModulo:ls[0],funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(O=>[...O,X])},[e]),j=N.useCallback((X,O)=>{const R=r.filter(te=>te.docenteId===X).map(te=>te.asignaturaOModulo);let G=ls[0];for(const te of ls)if(!R.includes(te)){G=te;break}const Y={id:`asig_${Date.now()}`,docenteId:X,docenteNombre:O,asignaturaOModulo:G,funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(te=>[...te,Y])},[r]),L=N.useCallback(X=>n(O=>O.filter(R=>R.id!==X)),[]),P=N.useCallback(X=>{n(O=>O.map(R=>{if(R.id!==X)return R;const G={id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:"",horas:0};return{...R,funcionesLectivas:[...R.funcionesLectivas||[],G]}}))},[]),k=N.useCallback((X,O,R,G)=>{n(Y=>Y.map(te=>{if(te.id!==X)return te;const ae=(te.funcionesLectivas||[]).map(oe=>oe.id===O?{...oe,[R]:G}:oe);return{...te,funcionesLectivas:ae}}))},[]),U=N.useCallback((X,O)=>{n(R=>R.map(G=>{if(G.id!==X)return G;const Y=(G.funcionesLectivas||[]).filter(te=>te.id!==O);return{...G,funcionesLectivas:Y}}))},[]),Q=N.useCallback((X,O,R)=>{n(G=>G.map(Y=>{if(Y.id!==X)return Y;const te={...Y,[O]:R};if(O==="docenteId"){const ae=e.find(oe=>oe.id===R);ae&&(te.docenteNombre=ae.nombre)}return O==="horasPorCurso"&&(te.horasXAsig=_5(R)),te}))},[e]),K=N.useCallback((X,O,R)=>{n(G=>G.map(Y=>{if(Y.id!==X)return Y;const te={...Y.horasPorCurso};return R===0?delete te[O]:te[O]=R,{...Y,horasPorCurso:te,horasXAsig:_5(te)}}))},[]),H=N.useCallback(X=>{m(!0);const O=new FileReader;O.onload=R=>{var G;try{const Y=new Uint8Array((G=R.target)==null?void 0:G.result),te=pb(Y,{type:"array"}),ae=te.Sheets["Docentes 2025"]||te.Sheets[te.SheetNames[0]],oe=Is.sheet_to_json(ae,{header:1});let ie=-1;for(let ne=0;ne<oe.length;ne++){const Be=oe[ne];if(Be&&Be.some(je=>typeof je=="string"&&(je.includes("Docente")||je.includes("ASIGNATURA")||js.some(_e=>je.includes(_e.replace("º","")))))){ie=ne;break}}if(ie===-1){alert("No se encontró la fila de encabezado en el archivo");return}const ue=oe[ie],Ce=[];for(let ne=ie+1;ne<oe.length;ne++){const Be=oe[ne];if(!Be||Be.length===0)continue;const je=Be[ue.indexOf("Docente")]||"";if(!je)continue;const _e=e.find(de=>de.nombre.toLowerCase().includes(je.toLowerCase()));if(!_e)continue;const Ae={};ue.forEach((de,be)=>{if(typeof de=="string"){const De=G6e(de.trim());if(js.includes(De)){const Ve=parseInt(Be[be])||0;Ve>0&&(Ae[De]=Ve)}}});let ve=[];const Pe=Be[ue.indexOf("FUNCIONES LECTIVAS")]||Be[ue.indexOf("FUNCIONES NO LECTIVAS")]||Be[ue.indexOf("OTRA FUNCIÓN")]||"";typeof Pe=="string"&&Pe.includes(":")?ve=Pe.split(",").map(de=>{const[be,De]=de.split(":").map(Ve=>Ve.trim());return{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:be,horas:parseInt(De)||0}}):Pe&&(ve=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Pe,horas:0}]);const Ue={id:`import_${Date.now()}_${ne}`,docenteId:_e.id,docenteNombre:_e.nombre,asignaturaOModulo:Be[ue.indexOf("ASIGNATURA O MÓDULO")]||"",funcionesLectivas:ve,horasPorCurso:Ae,horasXAsig:_5(Ae)};Ce.push(Ue)}n(Ce),alert(`Se importaron ${Ce.length} asignaciones exitosamente`)}catch(Y){console.error("Error al importar:",Y),alert("Error al procesar el archivo. Verifique el formato.")}finally{m(!1)}},O.readAsArrayBuffer(X)},[e]),q=N.useCallback(()=>{const X=r.map(G=>{const Y=e.find(ie=>ie.id===G.docenteId),te=F[G.docenteId];let ae="";G.funcionesLectivas&&G.funcionesLectivas.length>0?ae=G.funcionesLectivas.map(ie=>`${ie.nombre}: ${ie.horas}h`).join(", "):G.funcionesNoLectivas&&G.funcionesNoLectivas.length>0?ae=G.funcionesNoLectivas.map(ie=>`${ie.nombre}: ${ie.horas}h`).join(", "):G.otraFuncion&&(ae=G.otraFuncion);const oe={Docente:G.docenteNombre,"ASIGNATURA O MÓDULO":G.asignaturaOModulo||"","FUNCIONES LECTIVAS":ae,"HORAS X ASIG.":G.horasXAsig||0};return js.forEach(ie=>oe[ie]=G.horasPorCurso[ie]||0),te&&(oe["HORAS LECTIVAS (HA)"]=te.HA,oe["HORAS NO LECTIVAS (HB)"]=te.HB,oe["HORAS CONTRATO"]=(Y==null?void 0:Y.horasContrato)||0),oe}),O=Is.json_to_sheet(X),R=Is.book_new();Is.book_append_sheet(R,O,"Horarios"),i1(R,`horarios_${new Date().toISOString().split("T")[0]}.xlsx`)},[r,e,F]),z=N.useCallback(async()=>{if(d.filter(O=>O.tipo==="error").length>0){alert("No se puede guardar. Hay errores que deben corregirse primero.");return}try{m(!0);const O=[],R=[];r.forEach(Y=>{let te=Y.funcionesLectivas||[];Y.funcionesNoLectivas&&Y.funcionesNoLectivas.length>0&&te.length===0?te=Y.funcionesNoLectivas.map(Ce=>({id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Ce.nombre,horas:Ce.horas})):Y.otraFuncion&&te.length===0&&(te=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Y.otraFuncion,horas:parseInt(Y.otraFuncion)||0}]);const{funcionesNoLectivas:ae,otraFuncion:oe,...ie}=Y,ue={...ie,funcionesLectivas:te};if(Y.id.startsWith("asig_")||Y.id.startsWith("import_")){const{id:Ce,...ne}=ue;R.push(ne)}else O.push(ue)});const G=[...O.map(({id:Y,...te})=>te),...R];await z6e(G,!0),alert("Horarios guardados exitosamente")}catch(O){console.error("Error al guardar horarios:",O),alert("Error al guardar los horarios")}finally{m(!1)}},[d,r]),W=X=>{const O=F[X];return O?O.errors.length>0?"red":O.warnings.length>0?"yellow":"green":"gray"},ee=()=>g?i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-full overflow-hidden animate-scaleIn",children:[i.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[i.jsx(T_,{className:"w-5 h-5"}),"Añadir Nuevo Docente"]}),i.jsx("button",{onClick:()=>x(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",disabled:h,children:i.jsx(uA,{className:"w-5 h-5"})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Nombre Completo"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:v.nombre,onChange:X=>y({...v,nombre:X.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Nombre Apellido",required:!0})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Email"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"email",value:v.email,onChange:X=>y({...v,email:X.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"correo@ejemplo.com",required:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Departamento"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:v.departamento,onChange:X=>y({...v,departamento:X.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Ej: Matemáticas, Lenguaje, etc."})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Horas Contrato"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",value:v.horasContrato,onChange:X=>y({...v,horasContrato:parseInt(X.target.value)||0}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",min:1,max:44}),i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"horas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Perfil"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:v.perfil,onChange:X=>y({...v,perfil:X.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 appearance-none",children:[i.jsx("option",{value:"PROFESORADO",children:"Profesorado"}),i.jsx("option",{value:"SUBDIRECCION",children:"Subdirección"}),i.jsx("option",{value:"COORDINACION_TP",children:"Coordinación TP"})]}),i.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:i.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),i.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",disabled:h,children:"Cancelar"}),i.jsx("button",{onClick:C,className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-sm disabled:opacity-50 transition-all duration-200 flex items-center gap-2",disabled:h||!v.nombre||!v.email,children:h?i.jsxs(i.Fragment,{children:[i.jsx(El,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Guardando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(gte,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar"})]})})]})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(xte,{className:"w-3.5 h-3.5"}),i.jsxs("span",{children:["Los campos marcados con ",i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 inline-block"})," son obligatorios"]})]})})]})}):null;return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-800 dark:to-indigo-900 rounded-xl p-6 shadow-lg relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-gray-900 opacity-5",children:[i.jsx("div",{className:"w-96 h-96 rounded-full bg-white dark:bg-blue-600 absolute -top-20 -right-20 opacity-20"}),i.jsx("div",{className:"w-64 h-64 rounded-full bg-white dark:bg-indigo-600 absolute -bottom-10 -left-10 opacity-20"})]}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[i.jsx(oc,{className:"mr-3 h-8 w-8"}),"Crear Horarios"]}),i.jsx("p",{className:"text-blue-100 dark:text-blue-200 max-w-2xl",children:"Sistema de gestión de carga horaria docente con validación 65%/35% y visualización en tiempo real"})]}),i.jsxs("div",{className:"mt-4 md:mt-0 flex gap-3",children:[i.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-sm rounded-lg transition-all duration-200 border border-white border-opacity-30",children:[i.jsx(bw,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver estadísticas"})]}),i.jsxs("button",{onClick:z,disabled:d.some(X=>X.tipo==="error")||h,className:"flex items-center justify-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:[i.jsx(Yc,{className:"w-4 h-4"}),i.jsx("span",{children:h?"Guardando...":"Guardar cambios"})]})]})]})})]}),i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center",children:[i.jsx(Wk,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Filtros y acciones"})]}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[i.jsx("div",{className:"flex-1 md:max-w-xs",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(e1,{className:"text-gray-400 w-4 h-4"})}),i.jsx("input",{type:"text",placeholder:"Buscar docente...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",value:w,onChange:X=>_(X.target.value)})]})}),i.jsxs("div",{className:"flex gap-3 flex-wrap",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(am,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[150px]",value:a.curso,onChange:X=>s(O=>({...O,curso:X.target.value})),children:[i.jsx("option",{value:"",children:"Todos los cursos"}),js.map(X=>i.jsx("option",{value:X,children:X},X))]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(vi,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[180px]",value:a.asignatura,onChange:X=>s(O=>({...O,asignatura:X.target.value})),children:[i.jsx("option",{value:"",children:"Todas las asignaturas"}),ls.map(X=>i.jsx("option",{value:X,children:X},X))]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[i.jsxs("button",{onClick:()=>x(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(T_,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Nuevo Docente"})]}),i.jsxs("button",{onClick:S,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(_o,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Agregar Asignatura"})]}),i.jsxs("label",{className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white rounded-lg transition-all duration-200 shadow-sm cursor-pointer group",children:[i.jsx(t1,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Importar Excel"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:X=>{var O;return((O=X.target.files)==null?void 0:O[0])&&H(X.target.files[0])}})]}),i.jsxs("button",{onClick:q,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(uR,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Exportar Excel"})]}),i.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(qc,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Abrir Resumen"})]}),i.jsxs("button",{onClick:z,disabled:d.some(X=>X.tipo==="error")||h,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-amber-500 disabled:hover:to-orange-600 group",children:[h?i.jsx(El,{className:"w-5 h-5 animate-spin"}):i.jsx(Yc,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:h?"Guardando...":"Guardar"})]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800/30 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xu,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),i.jsxs("h3",{className:"font-medium text-red-700 dark:text-red-300",children:["Validaciones y Alertas (",d.length,")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(r2,{className:"w-3 h-3"})," ",d.filter(X=>X.tipo==="error").length," Errores"]}),i.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-800/30 text-yellow-700 dark:text-yellow-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(n2,{className:"w-3 h-3"})," ",d.filter(X=>X.tipo==="warning").length," Advertencias"]})]})]}),i.jsx("div",{className:"p-5",children:i.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map((X,O)=>i.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm ${X.tipo==="error"?"bg-red-50 dark:bg-red-900/10 text-red-700 dark:text-red-300 border-l-4 border-red-500 dark:border-red-600":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-500 dark:border-yellow-600"}`,children:[X.tipo==="error"?i.jsx(r2,{className:"w-5 h-5 shrink-0"}):i.jsx(n2,{className:"w-5 h-5 shrink-0"}),i.jsx("span",{className:"text-sm",children:X.mensaje})]},O))})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(e2,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asignaciones de Carga Horaria"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Correcto"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advertencia"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Error"})]})]})]}),i.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:i.jsxs("table",{className:"w-full min-w-[1000px]",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 dark:bg-blue-500"}),i.jsx("span",{children:"Estado"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-14 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(ro,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Docente"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(vi,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Asignatura"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(kH,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Func. Lectivas"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(Wf,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Hrs"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",colSpan:js.length,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5",children:[i.jsx(am,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Cursos"}),i.jsx("span",{className:"ml-1 text-xs text-gray-400 font-normal",children:"(horas por curso)"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(bw,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"HA/HB"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky right-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsx("div",{className:"flex items-center justify-center gap-1.5",children:i.jsx("span",{children:"Acciones"})})})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:T.map((X,O)=>{const R=F[X.docenteId],G=W(X.docenteId),Y=O===0||T[O-1].docenteId!==X.docenteId,te=O===T.length-1||T[O+1].docenteId!==X.docenteId,ae=T.filter(ue=>ue.docenteId===X.docenteId),oe=ae.length>1;let ie="hover:bg-gray-50 dark:hover:bg-gray-750 ";return oe&&(Y?ie+="border-t-2 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 ":ie+="bg-blue-50 dark:bg-blue-900/10 ",te&&(ie+="border-b-2 border-blue-200 dark:border-blue-800 mb-1 ")),i.jsxs("tr",{className:ie,children:[i.jsx("td",{className:"px-1 py-2 sticky left-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${G==="green"?"bg-green-500":G==="yellow"?"bg-yellow-500":G==="red"?"bg-red-500":"bg-gray-500"}`}),oe&&Y&&i.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:ae.length})]})}),i.jsx("td",{className:"px-1 py-2 sticky left-10 z-10 bg-inherit",children:!oe||Y?i.jsxs("div",{children:[i.jsx("select",{value:X.docenteId,onChange:ue=>Q(X.id,"docenteId",ue.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${oe?"font-medium":""}`,children:(B.length>0?B:e).map(ue=>i.jsx("option",{value:ue.id,children:ue.nombre},ue.id))}),oe&&i.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[ae.length," asig."]})]}):i.jsx("div",{className:"pl-1 italic text-gray-500 dark:text-gray-400 text-xs whitespace-nowrap",children:"↳ Mismo"})}),i.jsxs("td",{className:"px-1 py-2",children:[i.jsxs("select",{value:X.asignaturaOModulo||"",onChange:ue=>Q(X.id,"asignaturaOModulo",ue.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${oe?"border-blue-300 dark:border-blue-700":""}`,children:[i.jsx("option",{value:"",children:"Seleccionar..."}),ls.map(ue=>i.jsx("option",{value:ue,children:ue},ue))]}),oe&&!Y&&i.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Adicional"})]}),i.jsx("td",{className:"px-1 py-2",children:i.jsxs("div",{className:"space-y-1 w-full min-w-[200px]",children:[(X.funcionesLectivas||[]).map(ue=>i.jsxs("div",{className:"flex gap-1 items-center",children:[i.jsx("input",{type:"text",value:ue.nombre,onChange:Ce=>k(X.id,ue.id,"nombre",Ce.target.value),placeholder:"Nombre",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),i.jsx("input",{type:"number",value:ue.horas,onChange:Ce=>k(X.id,ue.id,"horas",parseInt(Ce.target.value)||0),min:0,max:44,className:"w-10 px-1 py-1 border-y border-r border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"}),i.jsx("button",{onClick:()=>U(X.id,ue.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-r",title:"Eliminar función",children:i.jsx(Va,{className:"w-3 h-3"})})]},ue.id)),!X.funcionesLectivas&&i.jsx("div",{className:"flex gap-1 items-center",children:i.jsx("input",{type:"text",value:X.otraFuncion||"",onChange:ue=>Q(X.id,"otraFuncion",ue.target.value),placeholder:"Ej: Coordinador",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"})}),i.jsxs("button",{onClick:()=>P(X.id),className:"flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:[i.jsx(_o,{className:"w-3 h-3"})," ",i.jsx("span",{className:"text-xs",children:"Agregar"})]})]})}),i.jsx("td",{className:"px-1 py-2 text-center",children:i.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:X.horasXAsig||0})}),i.jsx("td",{className:"px-1 py-2",children:i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1",children:js.map(ue=>i.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-gray-750 p-1 rounded",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:ue}),i.jsx("input",{type:"number",min:0,value:X.horasPorCurso[ue]||"",onChange:Ce=>K(X.id,ue,parseInt(Ce.target.value)||0),className:"w-10 h-7 px-1 py-0 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"})]},ue))})}),i.jsx("td",{className:"px-1 py-2 text-center whitespace-nowrap",children:R&&i.jsxs("div",{className:"space-y-0",children:[i.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["HA: ",R.HA," (",R.restantesHA>=0?"+":"",R.restantesHA,")"]}),i.jsxs("div",{className:"text-green-600 dark:text-green-400 text-xs",children:["HB: ",R.HB," (",R.restantesHB>=0?"+":"",R.restantesHB,")"]})]})}),i.jsx("td",{className:"px-1 py-2 text-center sticky right-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("button",{onClick:()=>j(X.docenteId,X.docenteNombre),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Agregar otra asignatura a este docente",children:i.jsx(_o,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>L(X.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Eliminar esta asignación",children:i.jsx(Va,{className:"w-3.5 h-3.5"})})]})})]},X.id)})})]})})]}),o&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Panel de Resumen"}),i.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(uA,{})})]}),i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"flex -mb-px px-6",children:[i.jsx("button",{onClick:()=>u("docentes"),className:`px-6 py-3 font-medium text-sm ${c==="docentes"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Docente"}),i.jsx("button",{onClick:()=>u("cursos"),className:`px-6 py-3 font-medium text-sm ${c==="cursos"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Curso"}),i.jsx("button",{onClick:()=>u("funciones"),className:`px-6 py-3 font-medium text-sm ${c==="funciones"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Función"}),i.jsx("button",{onClick:()=>u("totales"),className:`px-6 py-3 font-medium text-sm ${c==="totales"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Totales Generales"})]})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[c==="docentes"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Docente"}),i.jsx("div",{className:"grid gap-4",children:e.map(X=>{const O=F[X.id],R=r.filter(G=>G.docenteId===X.id);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:X.nombre}),i.jsx("div",{className:`w-3 h-3 rounded-full ${W(X.id)==="green"?"bg-green-500":W(X.id)==="yellow"?"bg-yellow-500":W(X.id)==="red"?"bg-red-500":"bg-gray-500"}`})]}),O&&i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contrato:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[X.horasContrato,"h"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HA:"}),i.jsxs("span",{className:"ml-1 font-medium text-blue-600 dark:text-blue-400",children:[O.sumCursos,"/",O.HA]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HB:"}),i.jsxs("span",{className:"ml-1 font-medium text-green-600 dark:text-green-400",children:[O.sumFunciones,"/",O.HB]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Asignaciones:"}),i.jsx("span",{className:"ml-1 font-medium",children:R.length})]})]}),R.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Asignaturas asignadas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:R.map(G=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:G.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[G.horasXAsig||0,"h"]})]},G.id))})]}),i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Distribución por curso:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:js.filter(G=>R.some(Y=>Y.horasPorCurso[G])).map(G=>{const Y=R.reduce((te,ae)=>te+(ae.horasPorCurso[G]||0),0);return i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:G}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[Y,"h"]})]},G)})})]})]}),R.some(G=>(G.funcionesLectivas||[]).length>0)&&i.jsxs("div",{className:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Funciones lectivas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:R.flatMap(G=>(G.funcionesLectivas||[]).map(Y=>({id:`${G.id}_${Y.id}`,nombre:Y.nombre,horas:Y.horas}))).map(G=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:G.nombre||"Sin nombre"}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[G.horas,"h"]})]},G.id))})]})]})]},X.id)})})]}),c==="cursos"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Curso"}),i.jsx("div",{className:"grid gap-4",children:js.filter(X=>r.some(O=>O.horasPorCurso[X])).map(X=>{const O=r.filter(Y=>Y.horasPorCurso[X]),R=[];O.forEach(Y=>{const te=R.findIndex(ae=>ae.id===Y.docenteId);te===-1?R.push({id:Y.docenteId,nombre:Y.docenteNombre,asignaciones:[Y]}):R[te].asignaciones.push(Y)});const G=O.reduce((Y,te)=>Y+(te.horasPorCurso[X]||0),0);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:X}),i.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-md",children:["Total: ",G,"h"]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("div",{className:"grid gap-2",children:R.map(Y=>i.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:Y.nombre}),i.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[Y.asignaciones.reduce((te,ae)=>te+(ae.horasPorCurso[X]||0),0),"h"]})]}),i.jsx("ul",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-2",children:Y.asignaciones.filter(te=>te.horasPorCurso[X]).map(te=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:te.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{children:[te.horasPorCurso[X],"h"]})]},te.id))})]},Y.id))})]})]},X)})})]}),c==="funciones"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Funciones Lectivas"}),(()=>{const X=[];return r.forEach(O=>{(O.funcionesLectivas||[]).forEach(R=>{if(!R.nombre)return;const G=X.find(Y=>Y.nombre===R.nombre);if(!G)X.push({nombre:R.nombre,docentes:[{id:O.docenteId,nombre:O.docenteNombre,horas:R.horas}],totalHoras:R.horas});else{const Y=G.docentes.find(te=>te.id===O.docenteId);Y?Y.horas+=R.horas:G.docentes.push({id:O.docenteId,nombre:O.docenteNombre,horas:R.horas}),G.totalHoras+=R.horas}})}),X.sort((O,R)=>R.totalHoras-O.totalHoras),X.length===0?i.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-750",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No hay funciones lectivas asignadas."})}):i.jsx("div",{className:"grid gap-4",children:X.map((O,R)=>i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:O.nombre}),i.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-md",children:["Total: ",O.totalHoras,"h"]})]}),i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:O.docentes.sort((G,Y)=>Y.horas-G.horas).map(G=>i.jsxs("li",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[i.jsx("span",{children:G.nombre}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[G.horas,"h"]})]},G.id))})]},R))})})()]}),c==="totales"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Resumen de Totales Generales"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Total de Horas Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:(()=>{let X=0;return r.forEach(O=>{O.horasPorCurso&&Object.values(O.horasPorCurso).forEach(R=>typeof R=="number"&&(X+=R)),(O.funcionesLectivas||[]).forEach(R=>typeof R.horas=="number"&&(X+=R.horas))}),X})()}),i.jsx("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400",children:"Total de horas lectivas asignadas (HA)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"Total de Horas No Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:(()=>{let X=0;return e.forEach(O=>{const R=typeof O.horasContrato=="number"?O.horasContrato:0;X+=Jy(R)}),X})()}),i.jsx("span",{className:"text-sm text-green-500 dark:text-green-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:"Total de horas no lectivas (HB)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-2",children:"Total de Horas Contrato"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:e.reduce((O,R)=>{const G=typeof R.horasContrato=="number"?R.horasContrato:0;return O+G},0)}),i.jsx("span",{className:"text-sm text-amber-500 dark:text-amber-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-amber-600 dark:text-amber-400",children:"Total de horas contratadas (Lectivas + No lectivas)"})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md",children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Distribución de Horas"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distribución Porcentual"}),(()=>{let X=0,O=0;r.forEach(te=>{te.horasPorCurso&&Object.values(te.horasPorCurso).forEach(ae=>typeof ae=="number"&&(X+=ae)),(te.funcionesLectivas||[]).forEach(ae=>typeof ae.horas=="number"&&(X+=ae.horas))}),e.forEach(te=>{const ae=typeof te.horasContrato=="number"?te.horasContrato:0;O+=Jy(ae)});const R=X+O,G=R>0?Math.round(X/R*100):0,Y=R>0?Math.round(O/R*100):0;return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Horas Lectivas (HA)"}),i.jsxs("span",{className:"font-bold",children:[G,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 rounded-full",style:{width:`${G}%`}})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Horas No Lectivas (HB)"}),i.jsxs("span",{className:"font-bold",children:[Y,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 rounded-full",style:{width:`${Y}%`}})})]}),i.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-750 rounded-lg text-xs text-gray-700 dark:text-gray-300",children:[i.jsx("p",{children:i.jsx("strong",{children:"Distribución Objetivo:"})}),i.jsx("p",{children:"• Horas Lectivas (HA): 65% del contrato"}),i.jsx("p",{children:"• Horas No Lectivas (HB): 35% del contrato"}),i.jsx("p",{children:"• Horas Contrato Total = Horas Lectivas + Horas No Lectivas"}),i.jsx("div",{className:"mt-2",children:Math.abs(G-65)<=5?i.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:"✓ La distribución está dentro de los parámetros recomendados"}):i.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:"⚠️ La distribución difiere de los parámetros recomendados"})})]})]})})()]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estadísticas Generales"}),i.jsxs("ul",{className:"space-y-3 text-sm",children:[i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de docentes:"}),i.jsx("span",{className:"font-semibold",children:e.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de asignaciones:"}),i.jsx("span",{className:"font-semibold",children:r.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Promedio horas contrato:"}),i.jsxs("span",{className:"font-semibold",children:[e.length>0?(e.reduce((X,O)=>X+(typeof O.horasContrato=="number"?O.horasContrato:0),0)/e.length).toFixed(1):"0"," horas"]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("h5",{className:"text-md font-medium text-red-700 dark:text-red-300 mb-2",children:["Advertencias (",d.length,")"]}),i.jsx("div",{className:"max-h-32 overflow-y-auto p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("ul",{className:"text-xs space-y-1 text-red-600 dark:text-red-400",children:[d.slice(0,5).map((X,O)=>i.jsxs("li",{className:"flex items-center gap-1",children:[X.tipo==="error"?"❌":"⚠️",i.jsx("span",{children:X.mensaje})]},O)),d.length>5&&i.jsxs("li",{className:"italic",children:["Y ",d.length-5," más..."]})]})})]})]})]})]})]})]})]})}),i.jsxs("div",{className:"mt-8 p-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 dark:from-blue-900/10 dark:to-indigo-900/10 rounded-xl overflow-hidden border border-blue-200 dark:border-blue-800 shadow-sm",children:[i.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(bw,{className:"w-5 h-5"}),i.jsx("h4",{className:"font-medium",children:"Información sobre Distribución de Horas"})]})}),i.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-700 dark:text-blue-300 shrink-0",children:i.jsx(am,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Horas Lectivas (HA)"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Según tabla oficial (ej: 44h → ",G_(44),"h, 30h → ",G_(30),"h)"]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-700 dark:text-green-300 shrink-0",children:i.jsx(e2,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Funciones Lectivas"}),i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Las horas de las funciones se suman a las horas lectivas (HA)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-700 dark:text-amber-300 shrink-0",children:i.jsx(kH,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Horas No Lectivas (HB)"}),i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["El resto del contrato (ej: 44h → ",Jy(44),"h, 30h → ",Jy(30),"h)"]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 mb-4",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Fórmulas de cálculo"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-mono",children:"HA"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Lectivas = 65% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded text-xs font-mono",children:"HB"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas No Lectivas = 35% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-mono",children:"HC"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Contrato = HA + HB"})]})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Guía de semáforos"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Completo"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Faltan horas"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Excede límites"})]})]})]})]})]})]}),i.jsx(ee,{}),h&&i.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col items-center animate-pulse",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 border-solid rounded-full"}),i.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 dark:border-blue-400 border-t-transparent animate-spin rounded-full absolute top-0 left-0"})]}),i.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300",children:"Procesando solicitud..."}),i.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Por favor, espere un momento"})]})})]})},i4="acciones_pedagogicas",W6e=(e,t)=>{var a,s,o,l;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((l=(o=r.creadoTs)==null?void 0:o.toMillis)==null?void 0:l.call(o))??Date.now()}};async function X6e(){const e=[];try{const t=Ht(mt(tt,i4),ar("creadoTs","desc"));(await qr(t)).docs.forEach(n=>e.push(W6e(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function Y6e(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:cr.now()};await mn(mt(tt,i4),t)}async function J6e(e,t){const r=nr(mt(tt,i4),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await Tl(r,n)}async function Z6e(e){const t=nr(mt(tt,i4),e);await Ca(t)}function Pne(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Pne(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function bn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Pne(e))&&(n&&(n+=" "),n+=t);return n}var BB={},TB={},VV;function eFe(){return VV||(VV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(TB)),TB}var IB={},zV;function Rne(){return zV||(zV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(IB)),IB}var FB={},$V;function Lne(){return $V||($V=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(FB)),FB}var OB={},GV;function r8(){return GV||(GV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];l?u==="\\"&&s+1<a?(s++,o+=r[s]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,s++}return o&&n.push(o),n}e.toPath=t}(OB)),OB}var qV;function n8(){return qV||(qV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eFe(),r=Rne(),n=Lne(),a=r8();function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(BB)),BB}var DB,KV;function tFe(){return KV||(KV=1,DB=n8().get),DB}var rFe=tFe();const Lm=Bl(rFe);var PB={exports:{}},na={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WV;function nFe(){if(WV)return na;WV=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function _(B){if(typeof B=="object"&&B!==null){var T=B.$$typeof;switch(T){case t:switch(B=B.type,B){case c:case u:case n:case s:case a:case f:return B;default:switch(B=B&&B.$$typeof,B){case l:case d:case g:case m:case o:return B;default:return T}}case r:return T}}}function F(B){return _(B)===u}return na.AsyncMode=c,na.ConcurrentMode=u,na.ContextConsumer=l,na.ContextProvider=o,na.Element=t,na.ForwardRef=d,na.Fragment=n,na.Lazy=g,na.Memo=m,na.Portal=r,na.Profiler=s,na.StrictMode=a,na.Suspense=f,na.isAsyncMode=function(B){return F(B)||_(B)===c},na.isConcurrentMode=F,na.isContextConsumer=function(B){return _(B)===l},na.isContextProvider=function(B){return _(B)===o},na.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===t},na.isForwardRef=function(B){return _(B)===d},na.isFragment=function(B){return _(B)===n},na.isLazy=function(B){return _(B)===g},na.isMemo=function(B){return _(B)===m},na.isPortal=function(B){return _(B)===r},na.isProfiler=function(B){return _(B)===s},na.isStrictMode=function(B){return _(B)===a},na.isSuspense=function(B){return _(B)===f},na.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===n||B===u||B===s||B===a||B===f||B===h||typeof B=="object"&&B!==null&&(B.$$typeof===g||B.$$typeof===m||B.$$typeof===o||B.$$typeof===l||B.$$typeof===d||B.$$typeof===v||B.$$typeof===y||B.$$typeof===w||B.$$typeof===x)},na.typeOf=_,na}var XV;function aFe(){return XV||(XV=1,PB.exports=nFe()),PB.exports}var sFe=aFe(),to=e=>e===0?0:e>0?1:-1,Zc=e=>typeof e=="number"&&e!=+e,qp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ar=e=>(typeof e=="number"||e instanceof Number)&&!Zc(e),dA=e=>Ar(e)||typeof e=="string",iFe=0,v2=e=>{var t=++iFe;return"".concat(e||"").concat(t)},jl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ar(t)&&typeof t!="string")return n;var s;if(qp(t)){if(r==null)return n;var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return Zc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Mne=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},bv=(e,t)=>Ar(e)&&Ar(t)?r=>e+r*(t-e):()=>t;function Mx(e,t,r){return Ar(e)&&Ar(t)?e+r*(t-e):t}function oFe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Lm(n,t))===r)}var Ds=e=>e===null||typeof e>"u",hE=e=>Ds(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),lFe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function a8(e){if(typeof e!="string")return!1;var t=lFe;return t.includes(e)}var cFe=["viewBox","children"],YV=["points","pathLength"],RB={svg:cFe,polygon:YV,polyline:YV},s8=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{a8(a)&&(n[a]=s=>r[a](r,s))}),n},uFe=(e,t,r)=>n=>(e(t,r,n),null),Zg=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];a8(a)&&typeof s=="function"&&(n||(n={}),n[a]=uFe(s,t,r))}),n},dFe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Une(e){if(typeof e!="string")return!1;var t=dFe;return t.includes(e)}function fl(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Une(n)});return Object.fromEntries(t)}var JV=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",ZV=null,LB=null,Qne=e=>{if(e===ZV&&Array.isArray(LB))return LB;var t=[];return N.Children.forEach(e,r=>{Ds(r)||(sFe.isFragment(r)?t=t.concat(Qne(r.props.children)):t.push(r))}),LB=t,ZV=e,t};function mE(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>JV(a)):n=[JV(t)],Qne(e).forEach(a=>{var s=Lm(a,"type.displayName")||Lm(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var fFe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(RB==null?void 0:RB[n]))!==null&&a!==void 0?a:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!n&&s.includes(t)||Une(t)),c=!!r&&a8(t);return o||l||c},Xn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(N.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var o;fFe((o=n)===null||o===void 0?void 0:o[s],s,t,r)&&(a[s]=n[s])}),a},AFe=["children","width","height","viewBox","className","style","title","desc"];function OF(){return OF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OF.apply(null,arguments)}function hFe(e,t){if(e==null)return{};var r,n,a=mFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var i8=N.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=e,d=hFe(e,AFe),f=s||{width:n,height:a,x:0,y:0},h=bn("recharts-surface",o);return N.createElement("svg",OF({},Xn(d,!0,"svg"),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),N.createElement("title",null,c),N.createElement("desc",null,u),r)}),pFe=["children","className"];function DF(){return DF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DF.apply(null,arguments)}function gFe(e,t){if(e==null)return{};var r,n,a=xFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var As=N.forwardRef((e,t)=>{var{children:r,className:n}=e,a=gFe(e,pFe),s=bn("recharts-layer",n);return N.createElement("g",DF({className:s},Xn(a,!0),{ref:t}),r)}),o8=hJ(),Hne=N.createContext(null),vFe=()=>N.useContext(Hne);function Pa(e){return function(){return e}}const Vne=Math.cos,q_=Math.sin,Jd=Math.sqrt,K_=Math.PI,o4=2*K_,PF=Math.PI,RF=2*PF,Op=1e-6,bFe=RF-Op;function zne(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function yFe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zne;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class wFe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zne:yFe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Op)if(!(Math.abs(f*c-u*d)>Op)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=a-l,x=c*c+u*u,v=m*m+g*g,y=Math.sqrt(x),w=Math.sqrt(h),_=s*Math.tan((PF-Math.acos((x+h-v)/(2*y*w)))/2),F=_/w,B=_/y;Math.abs(F-1)>Op&&this._append`L${t+F*d},${r+F*f}`,this._append`A${s},${s},0,0,${+(f*m>d*g)},${this._x1=t+B*c},${this._y1=r+B*u}`}}arc(t,r,n,a,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Op||Math.abs(this._y1-d)>Op)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%RF+RF),h>bFe?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Op&&this._append`A${n},${n},0,${+(h>=PF)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function l8(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new wFe(t)}function c8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $ne(e){this._context=e}$ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function l4(e){return new $ne(e)}function Gne(e){return e[0]}function qne(e){return e[1]}function Kne(e,t){var r=Pa(!0),n=null,a=l4,s=null,o=l8(l);e=typeof e=="function"?e:e===void 0?Gne:Pa(e),t=typeof t=="function"?t:t===void 0?qne:Pa(t);function l(c){var u,d=(c=c8(c)).length,f,h=!1,m;for(n==null&&(s=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Pa(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Pa(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Pa(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function dC(e,t,r){var n=null,a=Pa(!0),s=null,o=l4,l=null,c=l8(u);e=typeof e=="function"?e:e===void 0?Gne:Pa(+e),t=typeof t=="function"?t:Pa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?qne:Pa(+r);function u(f){var h,m,g,x=(f=c8(f)).length,v,y=!1,w,_=new Array(x),F=new Array(x);for(s==null&&(l=o(w=c())),h=0;h<=x;++h){if(!(h<x&&a(v=f[h],h,f))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(_[g],F[g]);l.lineEnd(),l.areaEnd()}y&&(_[h]=+e(v,h,f),F[h]=+t(v,h,f),l.point(n?+n(v,h,f):_[h],r?+r(v,h,f):F[h]))}if(w)return l=null,w+""||null}function d(){return Kne().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Pa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Pa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Pa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Pa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Pa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Pa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Pa(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class Wne{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function EFe(e){return new Wne(e,!0)}function NFe(e){return new Wne(e,!1)}const u8={draw(e,t){const r=Jd(t/K_);e.moveTo(r,0),e.arc(0,0,r,0,o4)}},CFe={draw(e,t){const r=Jd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Xne=Jd(1/3),_Fe=Xne*2,SFe={draw(e,t){const r=Jd(t/_Fe),n=r*Xne;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},kFe={draw(e,t){const r=Jd(t),n=-r/2;e.rect(n,n,r,r)}},jFe=.8908130915292852,Yne=q_(K_/10)/q_(7*K_/10),BFe=q_(o4/10)*Yne,TFe=-Vne(o4/10)*Yne,IFe={draw(e,t){const r=Jd(t*jFe),n=BFe*r,a=TFe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const o=o4*s/5,l=Vne(o),c=q_(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},MB=Jd(3),FFe={draw(e,t){const r=-Jd(t/(MB*3));e.moveTo(0,r*2),e.lineTo(-MB*r,-r),e.lineTo(MB*r,-r),e.closePath()}},ju=-.5,Bu=Jd(3)/2,LF=1/Jd(12),OFe=(LF/2+1)*3,DFe={draw(e,t){const r=Jd(t/OFe),n=r/2,a=r*LF,s=n,o=r*LF+r,l=-s,c=o;e.moveTo(n,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(ju*n-Bu*a,Bu*n+ju*a),e.lineTo(ju*s-Bu*o,Bu*s+ju*o),e.lineTo(ju*l-Bu*c,Bu*l+ju*c),e.lineTo(ju*n+Bu*a,ju*a-Bu*n),e.lineTo(ju*s+Bu*o,ju*o-Bu*s),e.lineTo(ju*l+Bu*c,ju*c-Bu*l),e.closePath()}};function PFe(e,t){let r=null,n=l8(a);e=typeof e=="function"?e:Pa(e||u8),t=typeof t=="function"?t:Pa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Pa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Pa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function W_(){}function X_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Jne(e){this._context=e}Jne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:X_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:X_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function RFe(e){return new Jne(e)}function Zne(e){this._context=e}Zne.prototype={areaStart:W_,areaEnd:W_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:X_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LFe(e){return new Zne(e)}function eae(e){this._context=e}eae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:X_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function MFe(e){return new eae(e)}function tae(e){this._context=e}tae.prototype={areaStart:W_,areaEnd:W_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function UFe(e){return new tae(e)}function ez(e){return e<0?-1:1}function tz(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(ez(s)+ez(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function rz(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function UB(e,t,r){var n=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,a+l*t,s-l,o-l*r,s,o)}function Y_(e){this._context=e}Y_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:UB(this,this._t0,rz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,UB(this,rz(this,r=tz(this,e,t)),r);break;default:UB(this,this._t0,r=tz(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function rae(e){this._context=new nae(e)}(rae.prototype=Object.create(Y_.prototype)).point=function(e,t){Y_.prototype.point.call(this,t,e)};function nae(e){this._context=e}nae.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function QFe(e){return new Y_(e)}function HFe(e){return new rae(e)}function aae(e){this._context=e}aae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=nz(e),a=nz(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function nz(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function VFe(e){return new aae(e)}function c4(e,t){this._context=e,this._t=t}c4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function zFe(e){return new c4(e,.5)}function $Fe(e){return new c4(e,0)}function GFe(e){return new c4(e,1)}function gb(e,t){if((o=e.length)>1)for(var r=1,n,a,s=e[t[0]],o,l=s.length;r<o;++r)for(a=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function MF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function qFe(e,t){return e[t]}function KFe(e){const t=[];return t.key=e,t}function WFe(){var e=Pa([]),t=MF,r=gb,n=qFe;function a(s){var o=Array.from(e.apply(this,arguments),KFe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=c8(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Pa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Pa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?MF:typeof s=="function"?s:Pa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??gb,a):r},a}function XFe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}gb(e,t)}}function YFe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}gb(e,t)}}function JFe(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var x=e[t[g]],v=x[n][1]||0,y=x[n-1][1]||0;m+=v-y}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,gb(e,t)}}var ZFe=["type","size","sizeType"];function UF(){return UF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UF.apply(null,arguments)}function az(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?az(Object(r),!0).forEach(function(n){eOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):az(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eOe(e,t,r){return(t=tOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tOe(e){var t=rOe(e,"string");return typeof t=="symbol"?t:t+""}function rOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nOe(e,t){if(e==null)return{};var r,n,a=aOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sae={symbolCircle:u8,symbolCross:CFe,symbolDiamond:SFe,symbolSquare:kFe,symbolStar:IFe,symbolTriangle:FFe,symbolWye:DFe},sOe=Math.PI/180,iOe=e=>{var t="symbol".concat(hE(e));return sae[t]||u8},oOe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*sOe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},lOe=(e,t)=>{sae["symbol".concat(hE(e))]=t},d8=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=nOe(e,ZFe),s=sz(sz({},a),{},{type:t,size:r,sizeType:n}),o=()=>{var f=iOe(t),h=PFe().type(f).size(oOe(r,n,t));return h()},{className:l,cx:c,cy:u}=s,d=Xn(s,!0);return c===+c&&u===+u&&r===+r?N.createElement("path",UF({},d,{className:bn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};d8.registerSymbol=lOe;function QF(){return QF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QF.apply(null,arguments)}function iz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cOe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iz(Object(r),!0).forEach(function(n){f8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f8(e,t,r){return(t=uOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uOe(e){var t=dOe(e,"string");return typeof t=="symbol"?t:t+""}function dOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tu=32;class A8 extends N.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=Tu/2,s=Tu/6,o=Tu/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return N.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:Tu,y2:a,className:"recharts-legend-icon"});if(c==="line")return N.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Tu,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return N.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Tu/8,"h").concat(Tu,"v").concat(Tu*3/4,"h").concat(-Tu,"z"),className:"recharts-legend-icon"});if(N.isValidElement(t.legendIcon)){var u=cOe({},t);return delete u.legendIcon,N.cloneElement(t.legendIcon,u)}return N.createElement(d8,{fill:l,cx:a,cy:a,size:Tu,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=this.props,l={x:0,y:0,width:Tu,height:Tu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,m=bn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,f):d.value;return N.createElement("li",QF({className:m,style:c,key:"legend-item-".concat(f)},Zg(this.props,d,f)),N.createElement(i8,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,o)),N.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return N.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}f8(A8,"displayName","Legend");f8(A8,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var QB={},HB={},oz;function fOe(){return oz||(oz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t}(HB)),HB}var VB={},lz;function u4(){return lz||(lz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(VB)),VB}var zB={},$B={},GB={},cz;function AOe(){return cz||(cz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(GB)),GB}var uz;function h8(){return uz||(uz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AOe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}($B)),$B}var qB={},dz;function hOe(){return dz||(dz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(qB)),qB}var fz;function mOe(){return fz||(fz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h8(),r=hOe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(zB)),zB}var KB={},WB={},Az;function pOe(){return Az||(Az=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n8();function r(n){return function(a){return t.get(a,n)}}e.property=r}(WB)),WB}var XB={},YB={},JB={},ZB={},hz;function iae(){return hz||(hz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(ZB)),ZB}var eT={},mz;function oae(){return mz||(mz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(eT)),eT}var tT={},pz;function m8(){return pz||(pz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(tT)),tT}var gz;function gOe(){return gz||(gz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p8(),r=iae(),n=oae(),a=m8();function s(f,h,m){return typeof m!="function"?t.isMatch(f,h):o(f,h,function g(x,v,y,w,_,F){const B=m(x,v,y,w,_,F);return B!==void 0?!!B:o(x,v,g,F)},new Map)}function o(f,h,m,g){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,m,g);case"function":return Object.keys(h).length>0?o(f,{...h},m,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function l(f,h,m,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,m,g);if(h instanceof Map)return c(f,h,m,g);if(h instanceof Set)return d(f,h,m,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let v=0;v<x.length;v++){const y=x[v];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!m(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,m,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,v]of h.entries()){const y=f.get(x);if(m(y,v,x,f,h,g)===!1)return!1}return!0}function u(f,h,m,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let v=0;v<h.length;v++){const y=h[v];let w=!1;for(let _=0;_<f.length;_++){if(x.has(_))continue;const F=f[_];let B=!1;if(m(F,y,v,f,h,g)&&(B=!0),B){x.add(_),w=!0;break}}if(!w)return!1}return!0}function d(f,h,m,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],m,g):!1}e.isMatchWith=s,e.isSetMatch=d}(JB)),JB}var xz;function p8(){return xz||(xz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gOe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(YB)),YB}var rT={},nT={},aT={},vz;function lae(){return vz||(vz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(aT)),aT}var sT={},bz;function g8(){return bz||(bz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(sT)),sT}var iT={},yz;function x8(){return yz||(yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",F="[object BigUint64Array]",B="[object Int8Array]",T="[object Int16Array]",C="[object Int32Array]",S="[object BigInt64Array]",j="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=S,e.bigUint64ArrayTag=F,e.booleanTag=a,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=j,e.float64ArrayTag=L,e.functionTag=f,e.int16ArrayTag=T,e.int32ArrayTag=C,e.int8ArrayTag=B,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(iT)),iT}var oT={},wz;function xOe(){return wz||(wz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(oT)),oT}var Ez;function cae(){return Ez||(Ez=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lae(),r=g8(),n=x8(),a=oae(),s=xOe();function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,m=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,m);if(x!=null)return x;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[y,w]of d)v.set(y,l(w,y,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const y of d)v.add(l(y,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,f,h=d,m,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<x.length;v++){const y=x[v],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=l(f[y],y,h,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(nT)),nT}var Nz;function vOe(){return Nz||(Nz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cae();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(rT)),rT}var Cz;function bOe(){return Cz||(Cz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p8(),r=vOe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(XB)),XB}var lT={},cT={},uT={},_z;function yOe(){return _z||(_z=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cae(),r=x8();function n(a,s){return t.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(uT)),uT}var Sz;function wOe(){return Sz||(Sz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yOe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(cT)),cT}var dT={},fT={},kz;function uae(){return kz||(kz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(fT)),fT}var AT={},jz;function EOe(){return jz||(jz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g8();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(AT)),AT}var Bz;function NOe(){return Bz||(Bz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rne(),r=uae(),n=EOe(),a=r8();function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(dT)),dT}var Tz;function COe(){return Tz||(Tz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p8(),r=Lne(),n=wOe(),a=n8(),s=NOe();function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o}(lT)),lT}var Iz;function v8(){return Iz||(Iz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u4(),r=pOe(),n=bOe(),a=COe();function s(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=s}(KB)),KB}var Fz;function _Oe(){return Fz||(Fz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fOe(),r=u4(),n=mOe(),a=v8();function s(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=s}(QB)),QB}var hT,Oz;function SOe(){return Oz||(Oz=1,hT=_Oe().uniqBy),hT}var kOe=SOe();const Dz=Bl(kOe);function dae(e,t,r){return t===!0?Dz(e,r):typeof t=="function"?Dz(e,t):e}var mT={exports:{}},pT={},gT={exports:{}},xT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pz;function jOe(){if(Pz)return xT;Pz=1;var e=Ub();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(f,h){var m=h(),g=n({inst:{value:m,getSnapshot:h}}),x=g[0].inst,v=g[1];return s(function(){x.value=m,x.getSnapshot=h,c(x)&&v({inst:x})},[f,m,h]),a(function(){return c(x)&&v({inst:x}),f(function(){c(x)&&v({inst:x})})},[f]),o(m),m}function c(f){var h=f.getSnapshot;f=f.value;try{var m=h();return!r(f,m)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return xT.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,xT}var Rz;function BOe(){return Rz||(Rz=1,gT.exports=jOe()),gT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lz;function TOe(){if(Lz)return pT;Lz=1;var e=Ub(),t=BOe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return pT.useSyncExternalStoreWithSelector=function(u,d,f,h,m){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(T){if(!w){if(w=!0,_=T,T=h(T),m!==void 0&&x.hasValue){var C=x.value;if(m(C,T))return F=C}return F=T}if(C=F,n(_,T))return C;var S=h(T);return m!==void 0&&m(C,S)?(_=T,C):(_=T,F=S)}var w=!1,_,F,B=f===void 0?null:f;return[function(){return y(d())},B===null?void 0:function(){return y(B())}]},[d,f,h,m]);var v=a(u,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},pT}var Mz;function IOe(){return Mz||(Mz=1,mT.exports=TOe()),mT.exports}var fae=IOe();const FOe=Bl(fae);var b8=N.createContext(null),OOe=e=>e,qa=()=>{var e=N.useContext(b8);return e?e.store.dispatch:OOe},S5=()=>{},DOe=()=>S5,POe=(e,t)=>e===t;function or(e){var t=N.useContext(b8);return fae.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:DOe,t?t.store.getState:S5,t?t.store.getState:S5,t?e:S5,POe)}function ROe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function LOe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function MOe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Uz=e=>Array.isArray(e)?e:[e];function UOe(e){const t=Array.isArray(e[0])?e[0]:e;return MOe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function QOe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var HOe=class{constructor(e){this.value=e}deref(){return this.value}},VOe=typeof WeakRef<"u"?WeakRef:HOe,zOe=0,Qz=1;function fC(){return{s:zOe,v:void 0,o:null,p:null}}function Aae(e,t={}){let r=fC();const{resultEqualityCheck:n}=t;let a,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const v=x.get(g);v===void 0?(l=fC(),x.set(g,l)):l=v}else{let x=l.p;x===null&&(l.p=x=new Map);const v=x.get(g);v===void 0?(l=fC(),x.set(g,l)):l=v}}const u=l;let d;if(l.s===Qz)d=l.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new VOe(d):d}return u.s=Qz,u.v=d,d}return o.clearCache=()=>{r=fC(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function $Oe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),ROe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=Aae,argsMemoizeOptions:g=[]}=d,x=Uz(h),v=Uz(g),y=UOe(a),w=f(function(){return s++,u.apply(null,arguments)},...x),_=m(function(){o++;const B=QOe(y,arguments);return l=w.apply(null,B),l},...v);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var dt=$Oe(Aae),GOe=Object.assign((e,t=dt)=>{LOe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>GOe}),vT={},bT={},yT={},Hz;function qOe(){return Hz||(Hz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};e.compareValues=r}(yT)),yT}var wT={},ET={},Vz;function hae(){return Vz||(Vz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(ET)),ET}var zz;function KOe(){return zz||(zz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hae(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}e.isKey=a}(wT)),wT}var $z;function WOe(){return $z||($z=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qOe(),r=KOe(),n=r8();function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let x=0;x<f.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],l[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a}(bT)),bT}var NT={},Gz;function XOe(){return Gz||(Gz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}e.flatten=t}(NT)),NT}var CT={},qz;function mae(){return qz||(qz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uae(),r=h8(),n=iae(),a=m8();function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}e.isIterateeCall=s}(CT)),CT}var Kz;function YOe(){return Kz||(Kz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WOe(),r=XOe(),n=mae();function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(s,r.flatten(o),["asc"])}e.sortBy=a}(vT)),vT}var _T,Wz;function JOe(){return Wz||(Wz=1,_T=YOe().sortBy),_T}var ZOe=JOe();const d4=Bl(ZOe);var pae=e=>e.legend.settings,eDe=e=>e.legend.size,tDe=e=>e.legend.payload,rDe=dt([tDe,pae],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?d4(n,r):n});function nDe(){return or(rDe)}var AC=1;function gae(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=N.useState({height:0,left:0,top:0,width:0}),n=N.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-t.height)>AC||Math.abs(o.left-t.left)>AC||Math.abs(o.top-t.top)>AC||Math.abs(o.width-t.width)>AC)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function go(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var aDe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Xz=aDe,ST=()=>Math.random().toString(36).substring(7).split("").join("."),sDe={INIT:`@@redux/INIT${ST()}`,REPLACE:`@@redux/REPLACE${ST()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ST()}`},J_=sDe;function y8(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function xae(e,t,r){if(typeof e!="function")throw new Error(go(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(go(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(go(1));return r(xae)(e,t)}let n=e,a=t,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((v,y)=>{o.set(y,v)}))}function d(){if(c)throw new Error(go(3));return a}function f(v){if(typeof v!="function")throw new Error(go(4));if(c)throw new Error(go(5));let y=!0;u();const w=l++;return o.set(w,v),function(){if(y){if(c)throw new Error(go(6));y=!1,u(),o.delete(w),s=null}}}function h(v){if(!y8(v))throw new Error(go(7));if(typeof v.type>"u")throw new Error(go(8));if(typeof v.type!="string")throw new Error(go(17));if(c)throw new Error(go(9));try{c=!0,a=n(a,v)}finally{c=!1}return(s=o).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(go(10));n=v,h({type:J_.REPLACE})}function g(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(go(11));function w(){const F=y;F.next&&F.next(d())}return w(),{unsubscribe:v(w)}},[Xz](){return this}}}return h({type:J_.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[Xz]:g}}function iDe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:J_.INIT})>"u")throw new Error(go(12));if(typeof r(void 0,{type:J_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(go(13))})}function vae(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{iDe(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],m=o[f],g=h(m,l);if(typeof g>"u")throw l&&l.type,new Error(go(14));u[f]=g,c=c||g!==m}return c=c||n.length!==Object.keys(o).length,c?u:o}}function Z_(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function oDe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(go(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=e.map(c=>c(o));return s=Z_(...l)(a.dispatch),{...a,dispatch:s}}}function bae(e){return y8(e)&&"type"in e&&typeof e.type=="string"}var yae=Symbol.for("immer-nothing"),Yz=Symbol.for("immer-draftable"),eu=Symbol.for("immer-state");function Fd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var xb=Object.getPrototypeOf;function Tg(e){return!!e&&!!e[eu]}function Th(e){var t;return e?wae(e)||Array.isArray(e)||!!e[Yz]||!!((t=e.constructor)!=null&&t[Yz])||A4(e)||h4(e):!1}var lDe=Object.prototype.constructor.toString();function wae(e){if(!e||typeof e!="object")return!1;const t=xb(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===lDe}function eS(e,t){f4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function f4(e){const t=e[eu];return t?t.type_:Array.isArray(e)?1:A4(e)?2:h4(e)?3:0}function HF(e,t){return f4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Eae(e,t,r){const n=f4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function cDe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function A4(e){return e instanceof Map}function h4(e){return e instanceof Set}function Dp(e){return e.copy_||e.base_}function VF(e,t){if(A4(e))return new Map(e);if(h4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=wae(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[eu];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(xb(e),n)}else{const n=xb(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function w8(e,t=!1){return m4(e)||Tg(e)||!Th(e)||(f4(e)>1&&(e.set=e.add=e.clear=e.delete=uDe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>w8(n,!0))),e}function uDe(){Fd(2)}function m4(e){return Object.isFrozen(e)}var dDe={};function Ig(e){const t=dDe[e];return t||Fd(0,e),t}var b2;function Nae(){return b2}function fDe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Jz(e,t){t&&(Ig("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function zF(e){$F(e),e.drafts_.forEach(ADe),e.drafts_=null}function $F(e){e===b2&&(b2=e.parent_)}function Zz(e){return b2=fDe(b2,e)}function ADe(e){const t=e[eu];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function e$(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[eu].modified_&&(zF(t),Fd(4)),Th(e)&&(e=tS(t,e),t.parent_||rS(t,e)),t.patches_&&Ig("Patches").generateReplacementPatches_(r[eu].base_,e,t.patches_,t.inversePatches_)):e=tS(t,r,[]),zF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==yae?e:void 0}function tS(e,t,r){if(m4(t))return t;const n=t[eu];if(!n)return eS(t,(a,s)=>t$(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return rS(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),eS(s,(l,c)=>t$(e,n,a,l,c,r,o)),rS(e,a,!1),r&&e.patches_&&Ig("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function t$(e,t,r,n,a,s,o){if(Tg(a)){const l=s&&t&&t.type_!==3&&!HF(t.assigned_,n)?s.concat(n):void 0,c=tS(e,a,l);if(Eae(r,n,c),Tg(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(Th(a)&&!m4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;tS(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&rS(e,a)}}function rS(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&w8(t,r)}function hDe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Nae(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=E8;r&&(a=[n],s=y2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var E8={get(e,t){if(t===eu)return e;const r=Dp(e);if(!HF(r,t))return mDe(e,r,t);const n=r[t];return e.finalized_||!Th(n)?n:n===kT(e.base_,t)?(jT(e),e.copy_[t]=qF(n,e)):n},has(e,t){return t in Dp(e)},ownKeys(e){return Reflect.ownKeys(Dp(e))},set(e,t,r){const n=Cae(Dp(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=kT(Dp(e),t),s=a==null?void 0:a[eu];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(cDe(r,a)&&(r!==void 0||HF(e.base_,t)))return!0;jT(e),GF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return kT(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,jT(e),GF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Dp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Fd(11)},getPrototypeOf(e){return xb(e.base_)},setPrototypeOf(){Fd(12)}},y2={};eS(E8,(e,t)=>{y2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});y2.deleteProperty=function(e,t){return y2.set.call(this,e,t,void 0)};y2.set=function(e,t,r){return E8.set.call(this,e[0],t,r,e[0])};function kT(e,t){const r=e[eu];return(r?Dp(r):e)[t]}function mDe(e,t,r){var a;const n=Cae(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Cae(e,t){if(!(t in e))return;let r=xb(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=xb(r)}}function GF(e){e.modified_||(e.modified_=!0,e.parent_&&GF(e.parent_))}function jT(e){e.copy_||(e.copy_=VF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var pDe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Fd(6),n!==void 0&&typeof n!="function"&&Fd(7);let a;if(Th(t)){const s=Zz(this),o=qF(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?zF(s):$F(s)}return Jz(s,n),e$(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===yae&&(a=void 0),this.autoFreeze_&&w8(a,!0),n){const s=[],o=[];Ig("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else Fd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Th(e)||Fd(8),Tg(e)&&(e=vh(e));const t=Zz(this),r=qF(e,void 0);return r[eu].isManual_=!0,$F(t),r}finishDraft(e,t){const r=e&&e[eu];(!r||!r.isManual_)&&Fd(9);const{scope_:n}=r;return Jz(n,t),e$(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Ig("Patches").applyPatches_;return Tg(e)?n(e,t):this.produce(e,a=>n(a,t))}};function qF(e,t){const r=A4(e)?Ig("MapSet").proxyMap_(e,t):h4(e)?Ig("MapSet").proxySet_(e,t):hDe(e,t);return(t?t.scope_:Nae()).drafts_.push(r),r}function vh(e){return Tg(e)||Fd(10,e),_ae(e)}function _ae(e){if(!Th(e)||m4(e))return e;const t=e[eu];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=VF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=VF(e,!0);return eS(r,(n,a)=>{Eae(r,n,_ae(a))}),t&&(t.finalized_=!1),r}var tu=new pDe,Sae=tu.produce;tu.produceWithPatches.bind(tu);tu.setAutoFreeze.bind(tu);tu.setUseStrictShallowCopy.bind(tu);tu.applyPatches.bind(tu);tu.createDraft.bind(tu);tu.finishDraft.bind(tu);function kae(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var gDe=kae(),xDe=kae,vDe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Z_:Z_.apply(null,arguments)};function Zu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Wc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>bae(n)&&n.type===e,r}var jae=class Zy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Zy.prototype)}static get[Symbol.species](){return Zy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Zy(...t[0].concat(this)):new Zy(...t.concat(this))}};function r$(e){return Th(e)?Sae(e,()=>{}):e}function hC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function bDe(e){return typeof e=="boolean"}var yDe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new jae;return r&&(bDe(r)?o.push(gDe):o.push(xDe(r.extraArgument))),o},wDe="RTK_autoBatch",n$=e=>t=>{setTimeout(t,e)},EDe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:n$(10):e.type==="callback"?e.queueNotification:n$(e.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[wDe]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},NDe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new jae(e);return n&&a.push(EDe(typeof n=="object"?n:void 0)),a};function CDe(e){const t=yDe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(y8(r))l=vae(r);else throw new Error(Wc(1));let c;typeof n=="function"?c=n(t):c=t();let u=Z_;a&&(u=vDe({trace:!1,...typeof a=="object"&&a}));const d=oDe(...c),f=NDe(d);let h=typeof o=="function"?o(f):f();const m=u(...h);return xae(l,s,m)}function Bae(e){const t={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Wc(28));if(l in t)throw new Error(Wc(29));return t[l]=o,a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function _De(e){return typeof e=="function"}function SDe(e,t){let[r,n,a]=Bae(t),s;if(_De(e))s=()=>r$(e());else{const l=r$(e);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(Tg(d)){const m=f(d,c);return m===void 0?d:m}else{if(Th(d))return Sae(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return o.getInitialState=s,o}var kDe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",jDe=(e=21)=>{let t="",r=e;for(;r--;)t+=kDe[Math.random()*64|0];return t},BDe=Symbol.for("rtk-slice-createasyncthunk");function TDe(e,t){return`${e}/${t}`}function IDe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[BDe];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(Wc(11));const l=(typeof a.reducers=="function"?a.reducers(ODe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(F,B){const T=typeof F=="string"?F:F.type;if(!T)throw new Error(Wc(12));if(T in u.sliceCaseReducersByType)throw new Error(Wc(13));return u.sliceCaseReducersByType[T]=B,d},addMatcher(F,B){return u.sliceMatchers.push({matcher:F,reducer:B}),d},exposeAction(F,B){return u.actionCreators[F]=B,d},exposeCaseReducer(F,B){return u.sliceCaseReducersByName[F]=B,d}};c.forEach(F=>{const B=l[F],T={reducerName:F,type:TDe(s,F),createNotation:typeof a.reducers=="function"};PDe(B)?LDe(T,B,d,t):DDe(T,B,d)});function f(){const[F={},B=[],T=void 0]=typeof a.extraReducers=="function"?Bae(a.extraReducers):[a.extraReducers],C={...F,...u.sliceCaseReducersByType};return SDe(a.initialState,S=>{for(let j in C)S.addCase(j,C[j]);for(let j of u.sliceMatchers)S.addMatcher(j.matcher,j.reducer);for(let j of B)S.addMatcher(j.matcher,j.reducer);T&&S.addDefaultCase(T)})}const h=F=>F,m=new Map,g=new WeakMap;let x;function v(F,B){return x||(x=f()),x(F,B)}function y(){return x||(x=f()),x.getInitialState()}function w(F,B=!1){function T(S){let j=S[F];return typeof j>"u"&&B&&(j=hC(g,T,y)),j}function C(S=h){const j=hC(m,B,()=>new WeakMap);return hC(j,S,()=>{const L={};for(const[P,k]of Object.entries(a.selectors??{}))L[P]=FDe(k,S,()=>hC(g,S,y),B);return L})}return{reducerPath:F,getSelectors:C,get selectors(){return C(T)},selectSlice:T}}const _={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(o),injectInto(F,{reducerPath:B,...T}={}){const C=B??o;return F.inject({reducerPath:C,reducer:v},T),{..._,...w(C,!0)}}};return _}}function FDe(e,t,r,n){function a(s,...o){let l=t(s);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var au=IDe();function ODe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function DDe({type:e,reducerName:t,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!RDe(n))throw new Error(Wc(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Zu(e,o):Zu(e))}function PDe(e){return e._reducerDefinitionType==="asyncThunk"}function RDe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function LDe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Wc(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||mC,pending:l||mC,rejected:c||mC,settled:u||mC})}function mC(){}var MDe="task",Tae="listener",Iae="completed",N8="cancelled",UDe=`task-${N8}`,QDe=`task-${Iae}`,KF=`${Tae}-${N8}`,HDe=`${Tae}-${Iae}`,p4=class{constructor(e){L3(this,"name","TaskAbortError");L3(this,"message");this.code=e,this.message=`${MDe} ${N8} (reason: ${e})`}},C8=(e,t)=>{if(typeof e!="function")throw new TypeError(Wc(32))},nS=()=>{},Fae=(e,t=nS)=>(e.catch(t),e),Oae=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),lg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},cg=e=>{if(e.aborted){const{reason:t}=e;throw new p4(t)}};function Dae(e,t){let r=nS;return new Promise((n,a)=>{const s=()=>a(new p4(e.reason));if(e.aborted){s();return}r=Oae(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=nS})}var VDe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof p4?"cancelled":"rejected",error:r}}finally{t==null||t()}},aS=e=>t=>Fae(Dae(e,t).then(r=>(cg(e),r))),Pae=e=>{const t=aS(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Hv}=Object,a$={},g4="listenerMiddleware",zDe=(e,t)=>{const r=n=>Oae(e,()=>lg(n,e.reason));return(n,a)=>{C8(n);const s=new AbortController;r(s);const o=VDe(async()=>{cg(e),cg(s.signal);const l=await n({pause:aS(s.signal),delay:Pae(s.signal),signal:s.signal});return cg(s.signal),l},()=>lg(s,QDe));return a!=null&&a.autoJoin&&t.push(o.catch(nS)),{result:aS(e)(o),cancel(){lg(s,UDe)}}}},$De=(e,t)=>{const r=async(n,a)=>{cg(t);let s=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Dae(t,Promise.race(l));return cg(t),c}finally{s()}};return(n,a)=>Fae(r(n,a))},Rae=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Zu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Wc(21));return C8(s),{predicate:a,type:t,effect:s}},Lae=Hv(e=>{const{type:t,predicate:r,effect:n}=Rae(e);return{id:jDe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Wc(22))}}},{withTypes:()=>Lae}),s$=(e,t)=>{const{type:r,effect:n,predicate:a}=Rae(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},WF=e=>{e.pending.forEach(t=>{lg(t,KF)})},GDe=e=>()=>{e.forEach(WF),e.clear()},i$=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Mae=Hv(Zu(`${g4}/add`),{withTypes:()=>Mae}),qDe=Zu(`${g4}/removeAll`),Uae=Hv(Zu(`${g4}/remove`),{withTypes:()=>Uae}),KDe=(...e)=>{console.error(`${g4}/error`,...e)},pE=(e={})=>{const t=new Map,{extra:r,onError:n=KDe}=e;C8(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&WF(d)}),s=d=>{const f=s$(t,d)??Lae(d);return a(f)};Hv(s,{withTypes:()=>s});const o=d=>{const f=s$(t,d);return f&&(f.unsubscribe(),d.cancelActive&&WF(f)),!!f};Hv(o,{withTypes:()=>o});const l=async(d,f,h,m)=>{const g=new AbortController,x=$De(s,g.signal),v=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,Hv({},h,{getOriginalState:m,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:Pae(g.signal),pause:aS(g.signal),extra:r,signal:g.signal,fork:zDe(g.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,_)=>{y!==g&&(lg(y,KF),_.delete(y))})},cancel:()=>{lg(g,KF),d.pending.delete(g)},throwIfCancelled:()=>{cg(g.signal)}})))}catch(y){y instanceof p4||i$(n,y,{raisedBy:"effect"})}finally{await Promise.all(v),lg(g,HDe),d.pending.delete(g)}},c=GDe(t);return{middleware:d=>f=>h=>{if(!bae(h))return f(h);if(Mae.match(h))return s(h.payload);if(qDe.match(h)){c();return}if(Uae.match(h))return o(h.payload);let m=d.getState();const g=()=>{if(m===a$)throw new Error(Wc(23));return m};let x;try{if(x=f(h),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const w of y){let _=!1;try{_=w.predicate(h,v,m)}catch(F){_=!1,i$(n,F,{raisedBy:"predicate"})}_&&l(w,h,d,g)}}}finally{m=a$}return x},startListening:s,stopListening:o,clearListeners:c}};function Wc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var WDe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Qae=au({name:"chartLayout",initialState:WDe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:XDe,setLayout:YDe,setChartSize:JDe,setScale:ZDe}=Qae.actions,ePe=Qae.reducer;function o$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function l$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o$(Object(r),!0).forEach(function(n){tPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tPe(e,t,r){return(t=rPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rPe(e){var t=nPe(e,"string");return typeof t=="symbol"?t:t+""}function nPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sS=Math.PI/180,aPe=e=>e*180/Math.PI,ea=(e,t,r,n)=>({x:e+Math.cos(-sS*n)*r,y:t+Math.sin(-sS*n)*r}),Hae=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},sPe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},iPe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,o=sPe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:aPe(c),angleInRadian:c}},oPe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},lPe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return e+o*360},cPe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=iPe({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=oPe(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?l$(l$({},t),{},{radius:a,angle:lPe(d,t)}):null},Vae=e=>!N.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function zae(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function c$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c$(Object(r),!0).forEach(function(n){uPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uPe(e,t,r){return(t=dPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dPe(e){var t=fPe(e,"string");return typeof t=="symbol"?t:t+""}function fPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function La(e,t,r){return Ds(e)||Ds(t)?r:dA(t)?Lm(e,t,r):typeof t=="function"?t(e):r}var APe=(e,t,r,n,a)=>{var s,o=-1,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(to(d-u)!==to(f-d)){var m=[];if(to(f-d)===to(a[1]-a[0])){h=f;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+a[1]-a[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){({index:o}=r[c]);break}}}else if(t){for(var _=0;_<l;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<l-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===l-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:o}=t[_]);break}}return o},hPe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&Ar(e[s]))return Qu(Qu({},e),{},{[s]:e[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&Ar(e[o]))return Qu(Qu({},e),{},{[o]:e[o]+(a||0)})}return e},Zm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",$ae=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,s,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate));return a||o.push(t),s||o.push(r),o},Gae=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=a==="category"&&o.bandwidth?o.bandwidth()/g:0;if(x=m==="angleAxis"&&s&&s.length>=2?to(s[0]-s[1])*2*x:x,f||h){var v=(f||h||[]).map((y,w)=>{var _=n?n.indexOf(y):y;return{coordinate:o(_)+x,value:y,offset:x,index:w}});return v.filter(y=>!Zc(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:o(y)+x,value:y,index:w,offset:x})):o.ticks&&d!=null?o.ticks(d).map((y,w)=>({coordinate:o(y)+x,value:y,offset:x,index:w})):o.domain().map((y,w)=>({coordinate:o(y)+x,value:n?n[y]:y,index:w,offset:x}))},u$=1e-4,mPe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-u$,s=Math.max(n[0],n[1])+u$,o=e(t[0]),l=e(t[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([t[0],t[r-1]])}},pPe=(e,t)=>{if(!t||t.length!==2||!Ar(t[0])||!Ar(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Ar(e[0])||e[0]<r)&&(a[0]=r),(!Ar(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},gPe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,o=0;o<t;++o){var l=Zc(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},xPe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var o=Zc(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},vPe={sign:gPe,expand:XFe,none:gb,silhouette:YFe,wiggle:JFe,positive:xPe},bPe=(e,t,r)=>{var n=vPe[r],a=WFe().keys(t).value((s,o)=>+La(s,o,0)).order(MF).offset(n);return a(e)};function yPe(e){return e==null?void 0:String(e)}var d$=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=La(s,t.dataKey,t.scale.domain()[o]);return Ds(l)?null:t.scale(l)-a/2+n},wPe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},EPe=e=>{var t=e.flat(2).filter(Ar);return[Math.min(...t),Math.max(...t)]},NPe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],CPe=(e,t,r)=>{if(e!=null)return NPe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:o}=s,l=o.reduce((c,u)=>{var d=zae(u,t,r),f=EPe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},f$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,A$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,w2=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=d4(t,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function h$(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Qu(Qu({},t),{},{dataKey:r,payload:n,value:a,name:s})}function o1(e,t){if(e)return String(e);if(typeof t=="string")return t}function _Pe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?cPe({x:e,y:t},n):null}var SPe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:o}=n;return Qu(Qu(Qu({},n),ea(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return Qu(Qu(Qu({},n),ea(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},kPe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,qh=e=>e.layout.width,Kh=e=>e.layout.height,jPe=e=>e.layout.scale,qae=e=>e.layout.margin,_8=dt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),S8=dt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Kae="data-recharts-item-index",Wae="data-recharts-item-data-key",x4=60;function m$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function D0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m$(Object(r),!0).forEach(function(n){BPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BPe(e,t,r){return(t=TPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TPe(e){var t=IPe(e,"string");return typeof t=="symbol"?t:t+""}function IPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FPe=e=>e.brush.height,Oi=dt([qh,Kh,qae,FPe,_8,S8,pae,eDe],(e,t,r,n,a,s,o,l)=>{var c=s.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:x4;return D0(D0({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?D0(D0({},g),{},{[v]:Lm(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=D0(D0({},u),c),f=d.bottom;d.bottom+=n,d=hPe(d,o,l);var h=e-d.left-d.right,m=t-d.top-d.bottom;return D0(D0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),OPe=dt(Oi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Xae=dt(qh,Kh,(e,t)=>({x:0,y:0,width:e,height:t})),DPe=N.createContext(null),fc=()=>N.useContext(DPe)!=null,v4=e=>e.brush,b4=dt([v4,Oi,qae],(e,t,r)=>({height:e.height,x:Ar(e.x)?e.x:t.left,y:Ar(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Ar(e.width)?e.width:t.width})),k8=()=>{var e,t=fc(),r=or(OPe),n=or(b4),a=(e=or(v4))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},PPe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Yae=()=>{var e;return(e=or(Oi))!==null&&e!==void 0?e:PPe},j8=()=>or(qh),B8=()=>or(Kh),RPe={top:0,right:0,bottom:0,left:0},LPe=()=>{var e;return(e=or(t=>t.layout.margin))!==null&&e!==void 0?e:RPe},In=e=>e.layout.layoutType,T8=()=>or(In),MPe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Jae=au({name:"legend",initialState:MPe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=vh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:p$,setLegendSettings:UPe,addLegendPayload:Zae,removeLegendPayload:ese}=Jae.actions,QPe=Jae.reducer,HPe=["contextPayload"];function XF(){return XF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XF.apply(null,arguments)}function g$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g$(Object(r),!0).forEach(function(n){I8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I8(e,t,r){return(t=VPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VPe(e){var t=zPe(e,"string");return typeof t=="symbol"?t:t+""}function zPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Pe(e,t){if(e==null)return{};var r,n,a=GPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function GPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qPe(e){return e.value}function KPe(e){var{contextPayload:t}=e,r=$Pe(e,HPe),n=dae(t,e.payloadUniqBy,qPe),a=vb(vb({},r),{},{payload:n});return N.isValidElement(e.content)?N.cloneElement(e.content,a):typeof e.content=="function"?N.createElement(e.content,a):N.createElement(A8,a)}function WPe(e,t,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),vb(vb({},u),d)}function XPe(e){var t=qa();return N.useEffect(()=>{t(UPe(e))},[t,e]),null}function YPe(e){var t=qa();return N.useEffect(()=>(t(p$(e)),()=>{t(p$({width:0,height:0}))}),[t,e]),null}function JPe(e){var t=nDe(),r=vFe(),n=LPe(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[c,u]=gae([t]),d=j8(),f=B8(),h=d-(n.left||0)-(n.right||0),m=l1.getWidthOrHeight(e.layout,s,a,h),g=l?o:vb(vb({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||s||"auto"},WPe(o,e,n,d,f,c)),o),x=l??r;if(x==null)return null;var v=N.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},N.createElement(XPe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),N.createElement(YPe,{width:c.width,height:c.height}),N.createElement(KPe,XF({},e,m,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return o8.createPortal(v,x)}class l1 extends N.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&Ar(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return N.createElement(JPe,this.props)}}I8(l1,"displayName","Legend");I8(l1,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function YF(){return YF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YF.apply(null,arguments)}function x$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x$(Object(r),!0).forEach(function(n){ZPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZPe(e,t,r){return(t=eRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eRe(e){var t=tRe(e,"string");return typeof t=="symbol"?t:t+""}function tRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rRe(e){return Array.isArray(e)&&dA(e[0])&&dA(e[1])?e.join(" ~ "):e}var nRe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(s&&s.length){var B={padding:0,margin:0},T=(l?d4(s,l):s).map((C,S)=>{if(C.type==="none")return null;var j=C.formatter||o||rRe,{value:L,name:P}=C,k=L,U=P;if(j){var Q=j(L,P,C,S,s);if(Array.isArray(Q))[k,U]=Q;else if(Q!=null)k=Q;else return null}var K=BT({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return N.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:K},dA(U)?N.createElement("span",{className:"recharts-tooltip-item-name"},U):null,dA(U)?N.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,N.createElement("span",{className:"recharts-tooltip-item-value"},k),N.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return N.createElement("ul",{className:"recharts-tooltip-item-list",style:B},T)}return null},g=BT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=BT({margin:0},a),v=!Ds(d),y=v?d:"",w=bn("recharts-default-tooltip",c),_=bn("recharts-tooltip-label",u);v&&f&&s!==void 0&&s!==null&&(y=f(d,s));var F=h?{role:"status","aria-live":"assertive"}:{};return N.createElement("div",YF({className:w,style:g},F),N.createElement("p",{className:_,style:x},N.isValidElement(y)?y:"".concat(y)),m())},hy="recharts-tooltip-wrapper",aRe={visibility:"hidden"};function sRe(e){var{coordinate:t,translateX:r,translateY:n}=e;return bn(hy,{["".concat(hy,"-right")]:Ar(r)&&t&&Ar(t.x)&&r>=t.x,["".concat(hy,"-left")]:Ar(r)&&t&&Ar(t.x)&&r<t.x,["".concat(hy,"-bottom")]:Ar(n)&&t&&Ar(t.y)&&n>=t.y,["".concat(hy,"-top")]:Ar(n)&&t&&Ar(t.y)&&n<t.y})}function v$(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(s&&Ar(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?d:f;var h=c[n];if(h==null)return 0;if(o[n]){var m=d,g=h;return m<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+l,v=h+u;return x>v?Math.max(d,h):Math.max(f,h)}function iRe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function oRe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=v$({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=v$({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=iRe({translateX:d,translateY:f,useTranslate3d:l})):u=aRe,{cssProperties:u,cssClasses:sRe({translateX:d,translateY:f,coordinate:r})}}function b$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b$(Object(r),!0).forEach(function(n){JF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JF(e,t,r){return(t=lRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lRe(e){var t=cRe(e,"string");return typeof t=="symbol"?t:t+""}function cRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class uRe extends N.PureComponent{constructor(){super(...arguments),JF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),JF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:_}=oRe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),F=y?{}:pC(pC({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),B=pC(pC({},F),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return N.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:B,ref:v},s)}}var dRe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ex={isSsr:dRe()},tse=()=>or(e=>e.rootProps.accessibilityLayer);function ru(e){return Number.isFinite(e)}function bb(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function ZF(){return ZF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZF.apply(null,arguments)}function y$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y$(Object(r),!0).forEach(function(n){fRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fRe(e,t,r){return(t=ARe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ARe(e){var t=hRe(e,"string");return typeof t=="symbol"?t:t+""}function hRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E$={curveBasisClosed:LFe,curveBasisOpen:MFe,curveBasis:RFe,curveBumpX:EFe,curveBumpY:NFe,curveLinearClosed:UFe,curveLinear:l4,curveMonotoneX:QFe,curveMonotoneY:HFe,curveNatural:VFe,curveStep:zFe,curveStepAfter:GFe,curveStepBefore:$Fe},gC=e=>ru(e.x)&&ru(e.y),my=e=>e.x,py=e=>e.y,mRe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(hE(e));return(r==="curveMonotone"||r==="curveBump")&&t?E$["".concat(r).concat(t==="vertical"?"Y":"X")]:E$[r]||l4},pRe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,o=mRe(t,a),l=s?r.filter(gC):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>gC(f)):n,d=l.map((f,h)=>w$(w$({},f),{},{base:u[h]}));return a==="vertical"?c=dC().y(py).x1(my).x0(f=>f.base.x):c=dC().x(my).y1(py).y0(f=>f.base.y),c.defined(gC).curve(o),c(d)}return a==="vertical"&&Ar(n)?c=dC().y(py).x1(my).x0(n):Ar(n)?c=dC().x(my).y1(py).y0(n):c=Kne().x(my).y(py),c.defined(gC).curve(o),c(l)},rse=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?pRe(e):n;return N.createElement("path",ZF({},fl(e),s8(e),{className:bn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},gRe=["x","y","top","left","width","height","className"];function eO(){return eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eO.apply(null,arguments)}function N$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N$(Object(r),!0).forEach(function(n){vRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vRe(e,t,r){return(t=bRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bRe(e){var t=yRe(e,"string");return typeof t=="symbol"?t:t+""}function yRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wRe(e,t){if(e==null)return{};var r,n,a=ERe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ERe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var NRe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),CRe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=e,c=wRe(e,gRe),u=xRe({x:t,y:r,top:n,left:a,width:s,height:o},c);return!Ar(t)||!Ar(r)||!Ar(s)||!Ar(o)||!Ar(n)||!Ar(a)?null:N.createElement("path",eO({},Xn(u,!0),{className:bn("recharts-cross",l),d:NRe(t,r,s,o,n,a)}))};function _Re(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function C$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C$(Object(r),!0).forEach(function(n){kRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kRe(e,t,r){return(t=jRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jRe(e){var t=BRe(e,"string");return typeof t=="symbol"?t:t+""}function BRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rd(e,t){var r=SRe({},e),n=t,a=Object.keys(t),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}var TT={},IT={},FT={},_$;function TRe(){return _$||(_$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(FT)),FT}var S$;function IRe(){return S$||(S$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TRe(),r=lae(),n=g8(),a=x8(),s=m8();function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,h,m,g,x){const v=x(u,d,f,h,m,g);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let m=n.getTag(u),g=n.getTag(d);if(m===a.argumentsTag&&(m=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),m!==g)return!1;switch(m){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),v=f.get(d);if(x!=null&&v!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!l(w,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let _=0;_<y.length;_++){const F=y[_],B=w.findIndex(T=>l(F,T,void 0,u,d,f,h));if(B===-1)return!1;w.splice(B,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!l(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],_=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==_.length)return!1;for(let F=0;F<w.length;F++){const B=w[F],T=u[B];if(!Object.hasOwn(d,B))return!1;const C=d[B];if(!l(T,C,B,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o}(IT)),IT}var OT={},k$;function FRe(){return k$||(k$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(OT)),OT}var j$;function ORe(){return j$||(j$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IRe(),r=FRe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(TT)),TT}var DT,B$;function DRe(){return B$||(B$=1,DT=ORe().isEqual),DT}var PRe=DRe();const RRe=Bl(PRe);var iS=1e-4,nse=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],ase=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),T$=(e,t)=>r=>{var n=nse(e,t);return ase(n,r)},LRe=(e,t)=>r=>{var n=nse(e,t),a=[...n.map((s,o)=>s*o).slice(1),0];return ase(a,r)},I$=function(){for(var t,r,n,a,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else o.length===4&&([t,n,r,a]=o);var u=T$(t,r),d=T$(n,a),f=LRe(t,r),h=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var w=u(v)-x,_=f(v);if(Math.abs(w-x)<iS||_<iS)return d(v);v=h(v-w/_)}return d(v)};return m.isStepper=!1,m},MRe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+o;return Math.abs(h-l)<iS&&Math.abs(f)<iS?[l,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},sse=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return I$(e);case"spring":return MRe();default:if(e.split("(")[0]==="cubic-bezier")return I$(e)}return typeof e=="function"?e:null};function F$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function O$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F$(Object(r),!0).forEach(function(n){URe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function URe(e,t,r){return(t=QRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QRe(e){var t=HRe(e,"string");return typeof t=="symbol"?t:t+""}function HRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VRe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),zRe=(e,t,r)=>e.map(n=>"".concat(VRe(n)," ").concat(t,"ms ").concat(r)).join(","),$Re=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),E2=(e,t)=>Object.keys(t).reduce((r,n)=>O$(O$({},r),{},{[n]:e(n,t[n])}),{});function D$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D$(Object(r),!0).forEach(function(n){GRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GRe(e,t,r){return(t=qRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qRe(e){var t=KRe(e,"string");return typeof t=="symbol"?t:t+""}function KRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oS=(e,t,r)=>e+(t-e)*r,tO=e=>{var{from:t,to:r}=e;return t!==r},ise=(e,t,r)=>{var n=E2((a,s)=>{if(tO(s)){var[o,l]=e(s.from,s.to,s.velocity);return yo(yo({},s),{},{from:o,velocity:l})}return s},t);return r<1?E2((a,s)=>tO(s)?yo(yo({},s),{},{velocity:oS(s.velocity,n[a].velocity,r),from:oS(s.from,n[a].from,r)}):s,t):ise(e,n,r-1)};function WRe(e,t,r,n,a,s){var o,l=n.reduce((h,m)=>yo(yo({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>E2((h,m)=>m.from,l),u=()=>!Object.values(l).filter(tO).length,d=null,f=h=>{o||(o=h);var m=h-o,g=m/r.dt;l=ise(r,l,g),a(yo(yo(yo({},e),t),c())),o=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function XRe(e,t,r,n,a,s,o){var l=null,c=a.reduce((f,h)=>yo(yo({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,m=E2((x,v)=>oS(...v,r(h)),c);if(s(yo(yo(yo({},e),t),m)),h<1)l=o.setTimeout(d);else{var g=E2((x,v)=>oS(...v,r(1)),c);s(yo(yo(yo({},e),t),g))}};return()=>(l=o.setTimeout(d),()=>{l()})}const ose=(e,t,r,n,a,s)=>{var o=$Re(e,t);return r.isStepper===!0?WRe(e,t,r,o,a,s):XRe(e,t,r,n,o,a,s)};function YRe(e){var t,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class JRe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function ZRe(){return YRe(new JRe)}var e8e=N.createContext(ZRe);function lse(e,t){var r=N.useContext(e8e);return N.useMemo(()=>t??r(e),[e,t,r])}var t8e=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function rO(){return rO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rO.apply(null,arguments)}function r8e(e,t){if(e==null)return{};var r,n,a=n8e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function n8e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function P$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function P0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P$(Object(r),!0).forEach(function(n){Kp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kp(e,t,r){return(t=a8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a8e(e){var t=s8e(e,"string");return typeof t=="symbol"?t:t+""}function s8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class F8 extends N.PureComponent{constructor(t,r){super(t,r),Kp(this,"mounted",!1),Kp(this,"manager",void 0),Kp(this,"stopJSAnimation",null),Kp(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:o}:o};this.state&&c&&(a&&c[a]!==o||!a&&c!==o)&&this.setState(u);return}if(!(RRe(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?l:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(P0(P0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=ose(r,n,sse(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,a,l])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=zRe(Object.keys(d),n,o);this.manager.start([l,r,P0(P0({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:g}=t,x=r8e(t,t8e),v=N.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||v===0||a<=0)return r;var w=_=>{var{style:F={},className:B}=_.props,T=N.cloneElement(_,P0(P0({},x),{},{style:P0(P0({},F),y),className:B}));return T};return v===1?w(N.Children.only(r)):N.createElement("div",null,N.Children.map(r,_=>w(_)))}}Kp(F8,"displayName","Animate");Kp(F8,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function lS(e){var t,r=lse((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return N.createElement(F8,rO({},e,{animationManager:r}))}function cS(){return cS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cS.apply(null,arguments)}var R$=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);u="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},i8e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cse=e=>{var t=rd(e,i8e),r=N.useRef(null),[n,a]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var v=bn("recharts-rectangle",d);return x?N.createElement(lS,{canBegin:n>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:h,animationEasing:f,isActive:x},y=>{var{width:w,height:_,x:F,y:B}=y;return N.createElement(lS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:g,easing:f},N.createElement("path",cS({},Xn(t,!0),{className:v,d:R$(F,B,w,_,u),ref:r})))}):N.createElement("path",cS({},Xn(t,!0),{className:v,d:R$(s,o,l,c,u)}))};function use(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,o=ea(t,r,n,a),l=ea(t,r,n,s);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function nO(){return nO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nO.apply(null,arguments)}var o8e=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},xC=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/sS,f=c?a:a+s*d,h=ea(t,r,u,f),m=ea(t,r,n,f),g=c?a-s*d:a,x=ea(t,r,u*Math.cos(d*sS),g);return{center:h,circleTangency:m,lineTangency:x,theta:d}},dse=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=e,l=o8e(s,o),c=s+l,u=ea(t,r,a,s),d=ea(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=ea(t,r,n,s),m=ea(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},l8e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=to(u-c),{circleTangency:f,lineTangency:h,theta:m}=xC({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:v}=xC({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),y=l?Math.abs(c-u):Math.abs(c-u)-m-v;if(y<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):dse({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:F,theta:B}=xC({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:T,lineTangency:C,theta:S}=xC({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),j=l?Math.abs(c-u):Math.abs(c-u)-B-S;if(j<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(j>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(F.x,",").concat(F.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},c8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},fse=e=>{var t=rd(e,c8e),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=bn("recharts-sector",f),m=s-a,g=jl(o,m,0,!0),x;return g>0&&Math.abs(u-d)<360?x=l8e({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=dse({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),N.createElement("path",nO({},Xn(t,!0),{className:h,d:x}))};function u8e(e,t,r){var n,a,s,o;if(e==="horizontal")n=t.x,s=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=ea(l,c,u,f),m=ea(l,c,d,f);n=h.x,a=h.y,s=m.x,o=m.y}else return use(t);return[{x:n,y:a},{x:s,y:o}]}var PT={},RT={},LT={},L$;function d8e(){return L$||(L$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hae();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(LT)),LT}var M$;function f8e(){return M$||(M$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d8e();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(RT)),RT}var U$;function A8e(){return U$||(U$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mae(),r=f8e();function n(a,s,o){o&&typeof o!="number"&&t.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}e.range=n}(PT)),PT}var MT,Q$;function h8e(){return Q$||(Q$=1,MT=A8e().range),MT}var m8e=h8e();const Ase=Bl(m8e);function xm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function p8e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function O8(e){let t,r,n;e.length!==2?(t=xm,r=(l,c)=>xm(e(l),c),n=(l,c)=>e(l)-c):(t=e===xm||e===p8e?e:g8e,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function g8e(){return 0}function hse(e){return e===null?NaN:+e}function*x8e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const v8e=O8(xm),gE=v8e.right;O8(hse).center;class H$ extends Map{constructor(t,r=w8e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(V$(this,t))}has(t){return super.has(V$(this,t))}set(t,r){return super.set(b8e(this,t),r)}delete(t){return super.delete(y8e(this,t))}}function V$({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function b8e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function y8e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function w8e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function E8e(e=xm){if(e===xm)return mse;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function mse(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const N8e=Math.sqrt(50),C8e=Math.sqrt(10),_8e=Math.sqrt(2);function uS(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=N8e?10:s>=C8e?5:s>=_8e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?uS(e,t,r*2):[l,c,u]}function aO(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,o]=n?uS(t,e,r):uS(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function sO(e,t,r){return t=+t,e=+e,r=+r,uS(e,t,r)[2]}function iO(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?sO(t,e,r):sO(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function z$(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function $$(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function pse(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?mse:E8e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));pse(e,t,m,g,a)}const s=e[t];let o=r,l=n;for(gy(e,r,t),a(e[n],s)>0&&gy(e,r,n);o<l;){for(gy(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?gy(e,r,l):(++l,gy(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function gy(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function S8e(e,t,r){if(e=Float64Array.from(x8e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return $$(e);if(t>=1)return z$(e);var n,a=(n-1)*t,s=Math.floor(a),o=z$(pse(e,s).subarray(0,s+1)),l=$$(e.subarray(s+1));return o+(l-o)*(a-s)}}function k8e(e,t,r=hse){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function j8e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function nd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const oO=Symbol("implicit");function y4(){var e=new H$,t=[],r=[],n=oO;function a(s){let o=e.get(s);if(o===void 0){if(n!==oO)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new H$;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return y4(t,r).unknown(n)},nd.apply(a,arguments),a}function D8(){var e=y4().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,x=m?n:a;s=(x-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=j8e(h).map(function(y){return g+s*y});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return D8(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},nd.apply(f(),arguments)}function gse(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gse(t())},e}function B8e(){return gse(D8.apply(null,arguments).paddingInner(1))}function P8(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function xse(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function xE(){}var N2=.7,dS=1/N2,Vv="\\s*([+-]?\\d+)\\s*",C2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",iA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",T8e=/^#([0-9a-f]{3,8})$/,I8e=new RegExp(`^rgb\\(${Vv},${Vv},${Vv}\\)$`),F8e=new RegExp(`^rgb\\(${iA},${iA},${iA}\\)$`),O8e=new RegExp(`^rgba\\(${Vv},${Vv},${Vv},${C2}\\)$`),D8e=new RegExp(`^rgba\\(${iA},${iA},${iA},${C2}\\)$`),P8e=new RegExp(`^hsl\\(${C2},${iA},${iA}\\)$`),R8e=new RegExp(`^hsla\\(${C2},${iA},${iA},${C2}\\)$`),G$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};P8(xE,Fg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:q$,formatHex:q$,formatHex8:L8e,formatHsl:M8e,formatRgb:K$,toString:K$});function q$(){return this.rgb().formatHex()}function L8e(){return this.rgb().formatHex8()}function M8e(){return vse(this).formatHsl()}function K$(){return this.rgb().formatRgb()}function Fg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=T8e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?W$(t):r===3?new sc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?vC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?vC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=I8e.exec(e))?new sc(t[1],t[2],t[3],1):(t=F8e.exec(e))?new sc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=O8e.exec(e))?vC(t[1],t[2],t[3],t[4]):(t=D8e.exec(e))?vC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=P8e.exec(e))?J$(t[1],t[2]/100,t[3]/100,1):(t=R8e.exec(e))?J$(t[1],t[2]/100,t[3]/100,t[4]):G$.hasOwnProperty(e)?W$(G$[e]):e==="transparent"?new sc(NaN,NaN,NaN,0):null}function W$(e){return new sc(e>>16&255,e>>8&255,e&255,1)}function vC(e,t,r,n){return n<=0&&(e=t=r=NaN),new sc(e,t,r,n)}function U8e(e){return e instanceof xE||(e=Fg(e)),e?(e=e.rgb(),new sc(e.r,e.g,e.b,e.opacity)):new sc}function lO(e,t,r,n){return arguments.length===1?U8e(e):new sc(e,t,r,n??1)}function sc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}P8(sc,lO,xse(xE,{brighter(e){return e=e==null?dS:Math.pow(dS,e),new sc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?N2:Math.pow(N2,e),new sc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sc(ug(this.r),ug(this.g),ug(this.b),fS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:X$,formatHex:X$,formatHex8:Q8e,formatRgb:Y$,toString:Y$}));function X$(){return`#${Wp(this.r)}${Wp(this.g)}${Wp(this.b)}`}function Q8e(){return`#${Wp(this.r)}${Wp(this.g)}${Wp(this.b)}${Wp((isNaN(this.opacity)?1:this.opacity)*255)}`}function Y$(){const e=fS(this.opacity);return`${e===1?"rgb(":"rgba("}${ug(this.r)}, ${ug(this.g)}, ${ug(this.b)}${e===1?")":`, ${e})`}`}function fS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ug(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wp(e){return e=ug(e),(e<16?"0":"")+e.toString(16)}function J$(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Od(e,t,r,n)}function vse(e){if(e instanceof Od)return new Od(e.h,e.s,e.l,e.opacity);if(e instanceof xE||(e=Fg(e)),!e)return new Od;if(e instanceof Od)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Od(o,l,c,e.opacity)}function H8e(e,t,r,n){return arguments.length===1?vse(e):new Od(e,t,r,n??1)}function Od(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}P8(Od,H8e,xse(xE,{brighter(e){return e=e==null?dS:Math.pow(dS,e),new Od(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?N2:Math.pow(N2,e),new Od(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new sc(UT(e>=240?e-240:e+120,a,n),UT(e,a,n),UT(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Od(Z$(this.h),bC(this.s),bC(this.l),fS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fS(this.opacity);return`${e===1?"hsl(":"hsla("}${Z$(this.h)}, ${bC(this.s)*100}%, ${bC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Z$(e){return e=(e||0)%360,e<0?e+360:e}function bC(e){return Math.max(0,Math.min(1,e||0))}function UT(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const R8=e=>()=>e;function V8e(e,t){return function(r){return e+r*t}}function z8e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function $8e(e){return(e=+e)==1?bse:function(t,r){return r-t?z8e(t,r,e):R8(isNaN(t)?r:t)}}function bse(e,t){var r=t-e;return r?V8e(e,r):R8(isNaN(e)?t:e)}const AS=function e(t){var r=$8e(t);function n(a,s){var o=r((a=lO(a)).r,(s=lO(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=bse(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function G8e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function q8e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function K8e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=c1(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function W8e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Id(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function X8e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=c1(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var cO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QT=new RegExp(cO.source,"g");function Y8e(e){return function(){return e}}function J8e(e){return function(t){return e(t)+""}}function yse(e,t){var r=cO.lastIndex=QT.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=cO.exec(e))&&(a=QT.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Id(n,a)})),r=QT.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?J8e(c[0].x):Y8e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function c1(e,t){var r=typeof t,n;return t==null||r==="boolean"?R8(t):(r==="number"?Id:r==="string"?(n=Fg(t))?(t=n,AS):yse:t instanceof Fg?AS:t instanceof Date?W8e:q8e(t)?G8e:Array.isArray(t)?K8e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?X8e:Id)(e,t)}function L8(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var eG=180/Math.PI,uO={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wse(e,t,r,n,a,s){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,c/=l),e*n<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*eG,skewX:Math.atan(c)*eG,scaleX:o,scaleY:l}}var yC;function Z8e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?uO:wse(t.a,t.b,t.c,t.d,t.e,t.f)}function eLe(e){return e==null||(yC||(yC=document.createElementNS("http://www.w3.org/2000/svg","g")),yC.setAttribute("transform",e),!(e=yC.transform.baseVal.consolidate()))?uO:(e=e.matrix,wse(e.a,e.b,e.c,e.d,e.e,e.f))}function Ese(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:Id(u,f)},{i:x-2,x:Id(d,h)})}else(f||h)&&m.push("translate("+f+t+h+r)}function o(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:Id(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function l(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:Id(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push(a(m)+"scale(",null,",",null,")");g.push({i:x-4,x:Id(u,f)},{i:x-2,x:Id(d,h)})}else(f!==1||h!==1)&&m.push(a(m)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),o(u.rotate,d.rotate,f,h),l(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(m){for(var g=-1,x=h.length,v;++g<x;)f[(v=h[g]).i]=v.x(m);return f.join("")}}}var tLe=Ese(Z8e,"px, ","px)","deg)"),rLe=Ese(eLe,", ",")",")"),nLe=1e-12;function tG(e){return((e=Math.exp(e))+1/e)/2}function aLe(e){return((e=Math.exp(e))-1/e)/2}function sLe(e){return((e=Math.exp(2*e))-1)/(e+1)}const iLe=function e(t,r,n){function a(s,o){var l=s[0],c=s[1],u=s[2],d=o[0],f=o[1],h=o[2],m=d-l,g=f-c,x=m*m+g*g,v,y;if(x<nLe)y=Math.log(h/u)/t,v=function(C){return[l+C*m,c+C*g,u*Math.exp(t*C*y)]};else{var w=Math.sqrt(x),_=(h*h-u*u+n*x)/(2*u*r*w),F=(h*h-u*u-n*x)/(2*h*r*w),B=Math.log(Math.sqrt(_*_+1)-_),T=Math.log(Math.sqrt(F*F+1)-F);y=(T-B)/t,v=function(C){var S=C*y,j=tG(B),L=u/(r*w)*(j*sLe(t*S+B)-aLe(B));return[l+L*m,c+L*g,u*j/tG(t*S+B)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return a.rho=function(s){var o=Math.max(.001,+s),l=o*o,c=l*l;return e(o,l,c)},a}(Math.SQRT2,2,4);function oLe(e,t){t===void 0&&(t=e,e=c1);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function lLe(e){return function(){return e}}function hS(e){return+e}var rG=[0,1];function Cl(e){return e}function dO(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:lLe(isNaN(t)?NaN:.5)}function cLe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function uLe(e,t,r){var n=e[0],a=e[1],s=t[0],o=t[1];return a<n?(n=dO(a,n),s=r(o,s)):(n=dO(n,a),s=r(s,o)),function(l){return s(n(l))}}function dLe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=dO(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=gE(e,l,1,n)-1;return s[c](a[c](l))}}function vE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function w4(){var e=rG,t=rG,r=c1,n,a,s,o=Cl,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Cl&&(o=cLe(e[0],e[h-1])),l=h>2?dLe:uLe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),Id)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,hS),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=L8,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Cl,d()):o!==Cl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,m){return n=h,a=m,d()}}function M8(){return w4()(Cl,Cl)}function fLe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function mS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function yb(e){return e=mS(Math.abs(e)),e?e[1]:NaN}function ALe(e,t){return function(r,n){for(var a=r.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function hLe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var mLe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _2(e){if(!(t=mLe.exec(e)))throw new Error("invalid format: "+e);var t;return new U8({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_2.prototype=U8.prototype;function U8(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}U8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pLe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var Nse;function gLe(e,t){var r=mS(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(Nse=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+mS(e,Math.max(0,t+s-1))[0]}function nG(e,t){var r=mS(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const aG={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:fLe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>nG(e*100,t),r:nG,s:gLe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sG(e){return e}var iG=Array.prototype.map,oG=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function xLe(e){var t=e.grouping===void 0||e.thousands===void 0?sG:ALe(iG.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?sG:hLe(iG.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=_2(f);var h=f.fill,m=f.align,g=f.sign,x=f.symbol,v=f.zero,y=f.width,w=f.comma,_=f.precision,F=f.trim,B=f.type;B==="n"?(w=!0,B="g"):aG[B]||(_===void 0&&(_=12),F=!0,B="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var T=x==="$"?r:x==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",C=x==="$"?n:/[%p]/.test(B)?o:"",S=aG[B],j=/[defgprs%]/.test(B);_=_===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function L(P){var k=T,U=C,Q,K,H;if(B==="c")U=S(P)+U,P="";else{P=+P;var q=P<0||1/P<0;if(P=isNaN(P)?c:S(Math.abs(P),_),F&&(P=pLe(P)),q&&+P==0&&g!=="+"&&(q=!1),k=(q?g==="("?g:l:g==="-"||g==="("?"":g)+k,U=(B==="s"?oG[8+Nse/3]:"")+U+(q&&g==="("?")":""),j){for(Q=-1,K=P.length;++Q<K;)if(H=P.charCodeAt(Q),48>H||H>57){U=(H===46?a+P.slice(Q+1):P.slice(Q))+U,P=P.slice(0,Q);break}}}w&&!v&&(P=t(P,1/0));var z=k.length+P.length+U.length,W=z<y?new Array(y-z+1).join(h):"";switch(w&&v&&(P=t(W+P,W.length?y-U.length:1/0),W=""),m){case"<":P=k+P+U+W;break;case"=":P=k+W+P+U;break;case"^":P=W.slice(0,z=W.length>>1)+k+P+U+W.slice(z);break;default:P=W+k+P+U;break}return s(P)}return L.toString=function(){return f+""},L}function d(f,h){var m=u((f=_2(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(yb(h)/3)))*3,x=Math.pow(10,-g),v=oG[8+g/3];return function(y){return m(x*y)+v}}return{format:u,formatPrefix:d}}var wC,Q8,Cse;vLe({thousands:",",grouping:[3],currency:["$",""]});function vLe(e){return wC=xLe(e),Q8=wC.format,Cse=wC.formatPrefix,wC}function bLe(e){return Math.max(0,-yb(Math.abs(e)))}function yLe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yb(t)/3)))*3-yb(Math.abs(e)))}function wLe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yb(t)-yb(e))+1}function _se(e,t,r,n){var a=iO(e,t,r),s;switch(n=_2(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=yLe(a,o))&&(n.precision=s),Cse(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=wLe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=bLe(a))&&(n.precision=s-(n.type==="%")*2);break}}return Q8(n)}function ep(e){var t=e.domain;return e.ticks=function(r){var n=t();return aO(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return _se(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=sO(o,l,r),u===c)return n[a]=o,n[s]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Sse(){var e=M8();return e.copy=function(){return vE(e,Sse())},nd.apply(e,arguments),ep(e)}function kse(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,hS),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return kse(e).unknown(t)},e=arguments.length?Array.from(e,hS):[0,1],ep(r)}function jse(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),e[r]=t.floor(a),e[n]=t.ceil(s),e}function lG(e){return Math.log(e)}function cG(e){return Math.exp(e)}function ELe(e){return-Math.log(-e)}function NLe(e){return-Math.exp(-e)}function CLe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function _Le(e){return e===10?CLe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function SLe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function uG(e){return(t,r)=>-e(-t,r)}function H8(e){const t=e(lG,cG),r=t.domain;let n=10,a,s;function o(){return a=SLe(n),s=_Le(n),r()[0]<0?(a=uG(a),s=uG(s),e(ELe,NLe)):e(lG,cG),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,x;const v=l==null?10:+l;let y=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<v&&(y=aO(u,d,v))}else y=aO(h,m,Math.min(m-h,v)).map(s);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=_2(c)).precision==null&&(c.trim=!0),c=Q8(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(jse(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function Bse(){const e=H8(w4()).domain([1,10]);return e.copy=()=>vE(e,Bse()).base(e.base()),nd.apply(e,arguments),e}function dG(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function fG(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function V8(e){var t=1,r=e(dG(t),fG(t));return r.constant=function(n){return arguments.length?e(dG(t=+n),fG(t)):t},ep(r)}function Tse(){var e=V8(w4());return e.copy=function(){return vE(e,Tse()).constant(e.constant())},nd.apply(e,arguments)}function AG(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function kLe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function jLe(e){return e<0?-e*e:e*e}function z8(e){var t=e(Cl,Cl),r=1;function n(){return r===1?e(Cl,Cl):r===.5?e(kLe,jLe):e(AG(r),AG(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},ep(t)}function $8(){var e=z8(w4());return e.copy=function(){return vE(e,$8()).exponent(e.exponent())},nd.apply(e,arguments),e}function BLe(){return $8.apply(null,arguments).exponent(.5)}function hG(e){return Math.sign(e)*e*e}function TLe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Ise(){var e=M8(),t=[0,1],r=!1,n;function a(s){var o=TLe(e(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return e.invert(hG(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,hS)).map(hG)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Ise(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},nd.apply(a,arguments),ep(a)}function Fse(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=k8e(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:t[gE(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(xm),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Fse().domain(e).range(t).unknown(n)},nd.apply(s,arguments)}function Ose(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[gE(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Ose().domain([e,t]).range(a).unknown(s)},nd.apply(ep(o),arguments)}function Dse(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[gE(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Dse().domain(e).range(t).unknown(r)},nd.apply(a,arguments)}const HT=new Date,VT=new Date;function Di(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>Di(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(a.count=(s,o)=>(HT.setTime(+s),VT.setTime(+o),e(HT),e(VT),Math.floor(r(HT,VT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const pS=Di(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Di(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):pS);pS.range;const lh=1e3,$u=lh*60,ch=$u*60,Ih=ch*24,G8=Ih*7,mG=Ih*30,zT=Ih*365,Xp=Di(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*lh)},(e,t)=>(t-e)/lh,e=>e.getUTCSeconds());Xp.range;const q8=Di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lh)},(e,t)=>{e.setTime(+e+t*$u)},(e,t)=>(t-e)/$u,e=>e.getMinutes());q8.range;const K8=Di(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*$u)},(e,t)=>(t-e)/$u,e=>e.getUTCMinutes());K8.range;const W8=Di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lh-e.getMinutes()*$u)},(e,t)=>{e.setTime(+e+t*ch)},(e,t)=>(t-e)/ch,e=>e.getHours());W8.range;const X8=Di(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ch)},(e,t)=>(t-e)/ch,e=>e.getUTCHours());X8.range;const bE=Di(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*$u)/Ih,e=>e.getDate()-1);bE.range;const E4=Di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ih,e=>e.getUTCDate()-1);E4.range;const Pse=Di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ih,e=>Math.floor(e/Ih));Pse.range;function tx(e){return Di(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*$u)/G8)}const N4=tx(0),gS=tx(1),ILe=tx(2),FLe=tx(3),wb=tx(4),OLe=tx(5),DLe=tx(6);N4.range;gS.range;ILe.range;FLe.range;wb.range;OLe.range;DLe.range;function rx(e){return Di(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/G8)}const C4=rx(0),xS=rx(1),PLe=rx(2),RLe=rx(3),Eb=rx(4),LLe=rx(5),MLe=rx(6);C4.range;xS.range;PLe.range;RLe.range;Eb.range;LLe.range;MLe.range;const Y8=Di(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Y8.range;const J8=Di(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());J8.range;const Fh=Di(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Di(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Fh.range;const Oh=Di(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Oh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Di(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Oh.range;function Rse(e,t,r,n,a,s){const o=[[Xp,1,lh],[Xp,5,5*lh],[Xp,15,15*lh],[Xp,30,30*lh],[s,1,$u],[s,5,5*$u],[s,15,15*$u],[s,30,30*$u],[a,1,ch],[a,3,3*ch],[a,6,6*ch],[a,12,12*ch],[n,1,Ih],[n,2,2*Ih],[r,1,G8],[t,1,mG],[t,3,3*mG],[e,1,zT]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=O8(([,,v])=>v).right(o,h);if(m===o.length)return e.every(iO(u/zT,d/zT,f));if(m===0)return pS.every(Math.max(iO(u,d,f),1));const[g,x]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(x)}return[l,c]}const[ULe,QLe]=Rse(Oh,J8,C4,Pse,X8,K8),[HLe,VLe]=Rse(Fh,Y8,N4,bE,W8,q8);function $T(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function GT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function zLe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=vy(a),d=by(a),f=vy(s),h=by(s),m=vy(o),g=by(o),x=vy(l),v=by(l),y=vy(c),w=by(c),_={a:q,A:z,b:W,B:ee,c:null,d:yG,e:yG,f:AMe,g:EMe,G:CMe,H:uMe,I:dMe,j:fMe,L:Lse,m:hMe,M:mMe,p:X,q:O,Q:NG,s:CG,S:pMe,u:gMe,U:xMe,V:vMe,w:bMe,W:yMe,x:null,X:null,y:wMe,Y:NMe,Z:_Me,"%":EG},F={a:R,A:G,b:Y,B:te,c:null,d:wG,e:wG,f:BMe,g:UMe,G:HMe,H:SMe,I:kMe,j:jMe,L:Use,m:TMe,M:IMe,p:ae,q:oe,Q:NG,s:CG,S:FMe,u:OMe,U:DMe,V:PMe,w:RMe,W:LMe,x:null,X:null,y:MMe,Y:QMe,Z:VMe,"%":EG},B={a:L,A:P,b:k,B:U,c:Q,d:vG,e:vG,f:iMe,g:xG,G:gG,H:bG,I:bG,j:rMe,L:sMe,m:tMe,M:nMe,p:j,q:eMe,Q:lMe,s:cMe,S:aMe,u:WLe,U:XLe,V:YLe,w:KLe,W:JLe,x:K,X:H,y:xG,Y:gG,Z:ZLe,"%":oMe};_.x=T(r,_),_.X=T(n,_),_.c=T(t,_),F.x=T(r,F),F.X=T(n,F),F.c=T(t,F);function T(ie,ue){return function(Ce){var ne=[],Be=-1,je=0,_e=ie.length,Ae,ve,Pe;for(Ce instanceof Date||(Ce=new Date(+Ce));++Be<_e;)ie.charCodeAt(Be)===37&&(ne.push(ie.slice(je,Be)),(ve=pG[Ae=ie.charAt(++Be)])!=null?Ae=ie.charAt(++Be):ve=Ae==="e"?" ":"0",(Pe=ue[Ae])&&(Ae=Pe(Ce,ve)),ne.push(Ae),je=Be+1);return ne.push(ie.slice(je,Be)),ne.join("")}}function C(ie,ue){return function(Ce){var ne=xy(1900,void 0,1),Be=S(ne,ie,Ce+="",0),je,_e;if(Be!=Ce.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(ue&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(je=GT(xy(ne.y,0,1)),_e=je.getUTCDay(),je=_e>4||_e===0?xS.ceil(je):xS(je),je=E4.offset(je,(ne.V-1)*7),ne.y=je.getUTCFullYear(),ne.m=je.getUTCMonth(),ne.d=je.getUTCDate()+(ne.w+6)%7):(je=$T(xy(ne.y,0,1)),_e=je.getDay(),je=_e>4||_e===0?gS.ceil(je):gS(je),je=bE.offset(je,(ne.V-1)*7),ne.y=je.getFullYear(),ne.m=je.getMonth(),ne.d=je.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),_e="Z"in ne?GT(xy(ne.y,0,1)).getUTCDay():$T(xy(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(_e+5)%7:ne.w+ne.U*7-(_e+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,GT(ne)):$T(ne)}}function S(ie,ue,Ce,ne){for(var Be=0,je=ue.length,_e=Ce.length,Ae,ve;Be<je;){if(ne>=_e)return-1;if(Ae=ue.charCodeAt(Be++),Ae===37){if(Ae=ue.charAt(Be++),ve=B[Ae in pG?ue.charAt(Be++):Ae],!ve||(ne=ve(ie,Ce,ne))<0)return-1}else if(Ae!=Ce.charCodeAt(ne++))return-1}return ne}function j(ie,ue,Ce){var ne=u.exec(ue.slice(Ce));return ne?(ie.p=d.get(ne[0].toLowerCase()),Ce+ne[0].length):-1}function L(ie,ue,Ce){var ne=m.exec(ue.slice(Ce));return ne?(ie.w=g.get(ne[0].toLowerCase()),Ce+ne[0].length):-1}function P(ie,ue,Ce){var ne=f.exec(ue.slice(Ce));return ne?(ie.w=h.get(ne[0].toLowerCase()),Ce+ne[0].length):-1}function k(ie,ue,Ce){var ne=y.exec(ue.slice(Ce));return ne?(ie.m=w.get(ne[0].toLowerCase()),Ce+ne[0].length):-1}function U(ie,ue,Ce){var ne=x.exec(ue.slice(Ce));return ne?(ie.m=v.get(ne[0].toLowerCase()),Ce+ne[0].length):-1}function Q(ie,ue,Ce){return S(ie,t,ue,Ce)}function K(ie,ue,Ce){return S(ie,r,ue,Ce)}function H(ie,ue,Ce){return S(ie,n,ue,Ce)}function q(ie){return o[ie.getDay()]}function z(ie){return s[ie.getDay()]}function W(ie){return c[ie.getMonth()]}function ee(ie){return l[ie.getMonth()]}function X(ie){return a[+(ie.getHours()>=12)]}function O(ie){return 1+~~(ie.getMonth()/3)}function R(ie){return o[ie.getUTCDay()]}function G(ie){return s[ie.getUTCDay()]}function Y(ie){return c[ie.getUTCMonth()]}function te(ie){return l[ie.getUTCMonth()]}function ae(ie){return a[+(ie.getUTCHours()>=12)]}function oe(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var ue=T(ie+="",_);return ue.toString=function(){return ie},ue},parse:function(ie){var ue=C(ie+="",!1);return ue.toString=function(){return ie},ue},utcFormat:function(ie){var ue=T(ie+="",F);return ue.toString=function(){return ie},ue},utcParse:function(ie){var ue=C(ie+="",!0);return ue.toString=function(){return ie},ue}}}var pG={"-":"",_:" ",0:"0"},ao=/^\s*\d+/,$Le=/^%/,GLe=/[\\^$*+?|[\]().{}]/g;function Jn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function qLe(e){return e.replace(GLe,"\\$&")}function vy(e){return new RegExp("^(?:"+e.map(qLe).join("|")+")","i")}function by(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function KLe(e,t,r){var n=ao.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function WLe(e,t,r){var n=ao.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function XLe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function YLe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function JLe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function gG(e,t,r){var n=ao.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function xG(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ZLe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function eMe(e,t,r){var n=ao.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function tMe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function vG(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function rMe(e,t,r){var n=ao.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function bG(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function nMe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function aMe(e,t,r){var n=ao.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function sMe(e,t,r){var n=ao.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function iMe(e,t,r){var n=ao.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function oMe(e,t,r){var n=$Le.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function lMe(e,t,r){var n=ao.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function cMe(e,t,r){var n=ao.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function yG(e,t){return Jn(e.getDate(),t,2)}function uMe(e,t){return Jn(e.getHours(),t,2)}function dMe(e,t){return Jn(e.getHours()%12||12,t,2)}function fMe(e,t){return Jn(1+bE.count(Fh(e),e),t,3)}function Lse(e,t){return Jn(e.getMilliseconds(),t,3)}function AMe(e,t){return Lse(e,t)+"000"}function hMe(e,t){return Jn(e.getMonth()+1,t,2)}function mMe(e,t){return Jn(e.getMinutes(),t,2)}function pMe(e,t){return Jn(e.getSeconds(),t,2)}function gMe(e){var t=e.getDay();return t===0?7:t}function xMe(e,t){return Jn(N4.count(Fh(e)-1,e),t,2)}function Mse(e){var t=e.getDay();return t>=4||t===0?wb(e):wb.ceil(e)}function vMe(e,t){return e=Mse(e),Jn(wb.count(Fh(e),e)+(Fh(e).getDay()===4),t,2)}function bMe(e){return e.getDay()}function yMe(e,t){return Jn(gS.count(Fh(e)-1,e),t,2)}function wMe(e,t){return Jn(e.getFullYear()%100,t,2)}function EMe(e,t){return e=Mse(e),Jn(e.getFullYear()%100,t,2)}function NMe(e,t){return Jn(e.getFullYear()%1e4,t,4)}function CMe(e,t){var r=e.getDay();return e=r>=4||r===0?wb(e):wb.ceil(e),Jn(e.getFullYear()%1e4,t,4)}function _Me(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jn(t/60|0,"0",2)+Jn(t%60,"0",2)}function wG(e,t){return Jn(e.getUTCDate(),t,2)}function SMe(e,t){return Jn(e.getUTCHours(),t,2)}function kMe(e,t){return Jn(e.getUTCHours()%12||12,t,2)}function jMe(e,t){return Jn(1+E4.count(Oh(e),e),t,3)}function Use(e,t){return Jn(e.getUTCMilliseconds(),t,3)}function BMe(e,t){return Use(e,t)+"000"}function TMe(e,t){return Jn(e.getUTCMonth()+1,t,2)}function IMe(e,t){return Jn(e.getUTCMinutes(),t,2)}function FMe(e,t){return Jn(e.getUTCSeconds(),t,2)}function OMe(e){var t=e.getUTCDay();return t===0?7:t}function DMe(e,t){return Jn(C4.count(Oh(e)-1,e),t,2)}function Qse(e){var t=e.getUTCDay();return t>=4||t===0?Eb(e):Eb.ceil(e)}function PMe(e,t){return e=Qse(e),Jn(Eb.count(Oh(e),e)+(Oh(e).getUTCDay()===4),t,2)}function RMe(e){return e.getUTCDay()}function LMe(e,t){return Jn(xS.count(Oh(e)-1,e),t,2)}function MMe(e,t){return Jn(e.getUTCFullYear()%100,t,2)}function UMe(e,t){return e=Qse(e),Jn(e.getUTCFullYear()%100,t,2)}function QMe(e,t){return Jn(e.getUTCFullYear()%1e4,t,4)}function HMe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Eb(e):Eb.ceil(e),Jn(e.getUTCFullYear()%1e4,t,4)}function VMe(){return"+0000"}function EG(){return"%"}function NG(e){return+e}function CG(e){return Math.floor(+e/1e3)}var Ux,Hse,Vse;zMe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zMe(e){return Ux=zLe(e),Hse=Ux.format,Ux.parse,Vse=Ux.utcFormat,Ux.utcParse,Ux}function $Me(e){return new Date(e)}function GMe(e){return e instanceof Date?+e:+new Date(+e)}function Z8(e,t,r,n,a,s,o,l,c,u){var d=M8(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),x=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),w=u("%b %d"),_=u("%B"),F=u("%Y");function B(T){return(c(T)<T?m:l(T)<T?g:o(T)<T?x:s(T)<T?v:n(T)<T?a(T)<T?y:w:r(T)<T?_:F)(T)}return d.invert=function(T){return new Date(f(T))},d.domain=function(T){return arguments.length?h(Array.from(T,GMe)):h().map($Me)},d.ticks=function(T){var C=h();return e(C[0],C[C.length-1],T??10)},d.tickFormat=function(T,C){return C==null?B:u(C)},d.nice=function(T){var C=h();return(!T||typeof T.range!="function")&&(T=t(C[0],C[C.length-1],T??10)),T?h(jse(C,T)):d},d.copy=function(){return vE(d,Z8(e,t,r,n,a,s,o,l,c,u))},d}function qMe(){return nd.apply(Z8(HLe,VLe,Fh,Y8,N4,bE,W8,q8,Xp,Hse).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function KMe(){return nd.apply(Z8(ULe,QLe,Oh,J8,C4,E4,X8,K8,Xp,Vse).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _4(){var e=0,t=1,r,n,a,s,o=Cl,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(c1),u.rangeRound=d(L8),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function tp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function zse(){var e=ep(_4()(Cl));return e.copy=function(){return tp(e,zse())},Wh.apply(e,arguments)}function $se(){var e=H8(_4()).domain([1,10]);return e.copy=function(){return tp(e,$se()).base(e.base())},Wh.apply(e,arguments)}function Gse(){var e=V8(_4());return e.copy=function(){return tp(e,Gse()).constant(e.constant())},Wh.apply(e,arguments)}function eL(){var e=z8(_4());return e.copy=function(){return tp(e,eL()).exponent(e.exponent())},Wh.apply(e,arguments)}function WMe(){return eL.apply(null,arguments).exponent(.5)}function qse(){var e=[],t=Cl;function r(n){if(n!=null&&!isNaN(n=+n))return t((gE(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(xm),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>S8e(e,s/n))},r.copy=function(){return qse(t).domain(e)},Wh.apply(r,arguments)}function S4(){var e=0,t=.5,r=1,n=1,a,s,o,l,c,u=Cl,d,f=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(n*x<n*s?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function g(x){return function(v){var y,w,_;return arguments.length?([y,w,_]=v,u=oLe(x,[y,w,_]),m):[u(0),u(.5),u(1)]}}return m.range=g(c1),m.rangeRound=g(L8),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return d=x,a=x(e),s=x(t),o=x(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m}}function Kse(){var e=ep(S4()(Cl));return e.copy=function(){return tp(e,Kse())},Wh.apply(e,arguments)}function Wse(){var e=H8(S4()).domain([.1,1,10]);return e.copy=function(){return tp(e,Wse()).base(e.base())},Wh.apply(e,arguments)}function Xse(){var e=V8(S4());return e.copy=function(){return tp(e,Xse()).constant(e.constant())},Wh.apply(e,arguments)}function tL(){var e=z8(S4());return e.copy=function(){return tp(e,tL()).exponent(e.exponent())},Wh.apply(e,arguments)}function XMe(){return tL.apply(null,arguments).exponent(.5)}const ew=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:D8,scaleDiverging:Kse,scaleDivergingLog:Wse,scaleDivergingPow:tL,scaleDivergingSqrt:XMe,scaleDivergingSymlog:Xse,scaleIdentity:kse,scaleImplicit:oO,scaleLinear:Sse,scaleLog:Bse,scaleOrdinal:y4,scalePoint:B8e,scalePow:$8,scaleQuantile:Fse,scaleQuantize:Ose,scaleRadial:Ise,scaleSequential:zse,scaleSequentialLog:$se,scaleSequentialPow:eL,scaleSequentialQuantile:qse,scaleSequentialSqrt:WMe,scaleSequentialSymlog:Gse,scaleSqrt:BLe,scaleSymlog:Tse,scaleThreshold:Dse,scaleTime:qMe,scaleUtc:KMe,tickFormat:_se},Symbol.toStringTag,{value:"Module"}));var rp=e=>e.chartData,k4=dt([rp],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),rL=(e,t,r,n)=>n?k4(e):rp(e);function Nb(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(ru(t)&&ru(r))return!0}return!1}function _G(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function YMe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(ru(r))a=r;else if(typeof r=="function")return;if(ru(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(Nb(o))return o}}function JMe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Nb(n))return _G(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(Ar(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&f$.test(a)){var c=f$.exec(a);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(s==="auto")t!=null&&(l=Math.max(...t));else if(Ar(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&A$.test(s)){var d=A$.exec(s);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[o,l];if(Nb(h))return t==null?h:_G(h,t,r)}}}var u1=1e9,ZMe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},aL,rs=!0,ed="[DecimalError] ",dg=ed+"Invalid argument: ",nL=ed+"Exponent out of range: ",d1=Math.floor,Pp=Math.pow,eUe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,zc,Xi=1e7,Ua=7,Yse=9007199254740991,vS=d1(Yse/Ua),hr={};hr.absoluteValue=hr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};hr.comparedTo=hr.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};hr.decimalPlaces=hr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ua;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};hr.dividedBy=hr.div=function(e){return bh(this,new this.constructor(e))};hr.dividedToIntegerBy=hr.idiv=function(e){var t=this,r=t.constructor;return ja(bh(t,new r(e),0,1),r.precision)};hr.equals=hr.eq=function(e){return!this.cmp(e)};hr.exponent=function(){return bi(this)};hr.greaterThan=hr.gt=function(e){return this.cmp(e)>0};hr.greaterThanOrEqualTo=hr.gte=function(e){return this.cmp(e)>=0};hr.isInteger=hr.isint=function(){return this.e>this.d.length-2};hr.isNegative=hr.isneg=function(){return this.s<0};hr.isPositive=hr.ispos=function(){return this.s>0};hr.isZero=function(){return this.s===0};hr.lessThan=hr.lt=function(e){return this.cmp(e)<0};hr.lessThanOrEqualTo=hr.lte=function(e){return this.cmp(e)<1};hr.logarithm=hr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(zc))throw Error(ed+"NaN");if(r.s<1)throw Error(ed+(r.s?"NaN":"-Infinity"));return r.eq(zc)?new n(0):(rs=!1,t=bh(S2(r,s),S2(e,s),s),rs=!0,ja(t,a))};hr.minus=hr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?eie(t,e):Jse(t,(e.s=-e.s,e))};hr.modulo=hr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ed+"NaN");return r.s?(rs=!1,t=bh(r,e,0,1).times(e),rs=!0,r.minus(t)):ja(new n(r),a)};hr.naturalExponential=hr.exp=function(){return Zse(this)};hr.naturalLogarithm=hr.ln=function(){return S2(this)};hr.negated=hr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};hr.plus=hr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Jse(t,e):eie(t,(e.s=-e.s,e))};hr.precision=hr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(dg+e);if(t=bi(a)+1,n=a.d.length-1,r=n*Ua+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};hr.squareRoot=hr.sqrt=function(){var e,t,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ed+"NaN")}for(e=bi(l),rs=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Yf(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=d1((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(bh(l,s,o+2)).times(.5),Yf(s.d).slice(0,o)===(t=Yf(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(ja(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;o+=4}return rs=!0,ja(n,r)};hr.times=hr.mul=function(e){var t,r,n,a,s,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+m[n]*h[a-n-1]+t,s[a--]=l%Xi|0,t=l/Xi|0;s[a]=(s[a]+t)%Xi|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,rs?ja(e,f.precision):e};hr.toDecimalPlaces=hr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(fA(e,0,u1),t===void 0?t=n.rounding:fA(t,0,8),ja(r,e+bi(r)+1,t))};hr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Og(n,!0):(fA(e,0,u1),t===void 0?t=a.rounding:fA(t,0,8),n=ja(new a(n),e+1,t),r=Og(n,!0,e+1)),r};hr.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?Og(a):(fA(e,0,u1),t===void 0?t=s.rounding:fA(t,0,8),n=ja(new s(a),e+bi(a)+1,t),r=Og(n.abs(),!1,e+bi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};hr.toInteger=hr.toint=function(){var e=this,t=e.constructor;return ja(new t(e),bi(e)+1,t.rounding)};hr.toNumber=function(){return+this};hr.toPower=hr.pow=function(e){var t,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(zc);if(l=new c(l),!l.s){if(e.s<1)throw Error(ed+"Infinity");return l}if(l.eq(zc))return l;if(n=c.precision,e.eq(zc))return ja(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=d<0?-d:d)<=Yse){for(a=new c(zc),t=Math.ceil(n/Ua+4),rs=!1;r%2&&(a=a.times(l),kG(a.d,t)),r=d1(r/2),r!==0;)l=l.times(l),kG(l.d,t);return rs=!0,e.s<0?new c(zc).div(a):ja(a,n)}}else if(s<0)throw Error(ed+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,rs=!1,a=e.times(S2(l,n+u)),rs=!0,a=Zse(a),a.s=s,a};hr.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=bi(a),n=Og(a,r<=s.toExpNeg||r>=s.toExpPos)):(fA(e,1,u1),t===void 0?t=s.rounding:fA(t,0,8),a=ja(new s(a),e,t),r=bi(a),n=Og(a,e<=r||r<=s.toExpNeg,e)),n};hr.toSignificantDigits=hr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(fA(e,1,u1),t===void 0?t=n.rounding:fA(t,0,8)),ja(new n(r),e,t)};hr.toString=hr.valueOf=hr.val=hr.toJSON=hr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=bi(e),r=e.constructor;return Og(e,t<=r.toExpNeg||t>=r.toExpPos)};function Jse(e,t){var r,n,a,s,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),rs?ja(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Ua),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Xi|0,c[s]%=Xi;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,rs?ja(t,f):t}function fA(e,t,r){if(e!==~~e||e<t||e>r)throw Error(dg+e)}function Yf(e){var t,r,n,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)n=e[t]+"",r=Ua-n.length,r&&(s+=$0(r)),s+=n;o=e[t],n=o+"",r=Ua-n.length,r&&(s+=$0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var bh=function(){function e(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%Xi|0,o=s/Xi|0;return o&&n.unshift(o),n}function t(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Xi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,h,m,g,x,v,y,w,_,F,B,T,C,S,j=n.constructor,L=n.s==a.s?1:-1,P=n.d,k=a.d;if(!n.s)return new j(n);if(!a.s)throw Error(ed+"Division by zero");for(c=n.e-a.e,C=k.length,B=P.length,m=new j(L),g=m.d=[],u=0;k[u]==(P[u]||0);)++u;if(k[u]>(P[u]||0)&&--c,s==null?w=s=j.precision:o?w=s+(bi(n)-bi(a))+1:w=s,w<0)return new j(0);if(w=w/Ua+2|0,u=0,C==1)for(d=0,k=k[0],w++;(u<B||d)&&w--;u++)_=d*Xi+(P[u]||0),g[u]=_/k|0,d=_%k|0;else{for(d=Xi/(k[0]+1)|0,d>1&&(k=e(k,d),P=e(P,d),C=k.length,B=P.length),F=C,x=P.slice(0,C),v=x.length;v<C;)x[v++]=0;S=k.slice(),S.unshift(0),T=k[0],k[1]>=Xi/2&&++T;do d=0,l=t(k,x,C,v),l<0?(y=x[0],C!=v&&(y=y*Xi+(x[1]||0)),d=y/T|0,d>1?(d>=Xi&&(d=Xi-1),f=e(k,d),h=f.length,v=x.length,l=t(f,x,h,v),l==1&&(d--,r(f,C<h?S:k,h))):(d==0&&(l=d=1),f=k.slice()),h=f.length,h<v&&f.unshift(0),r(x,f,v),l==-1&&(v=x.length,l=t(k,x,C,v),l<1&&(d++,r(x,C<v?S:k,v))),v=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[v++]=P[F]||0:(x=[P[F]],v=1);while((F++<B||x[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,ja(m,o?s+bi(m)+1:s)}}();function Zse(e,t){var r,n,a,s,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(bi(e)>16)throw Error(nL+bi(e));if(!e.s)return new d(zc);for(rs=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Pp(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(zc),d.precision=l;;){if(a=ja(a.times(e),l),r=r.times(++c),o=s.plus(bh(a,r,l)),Yf(o.d).slice(0,l)===Yf(s.d).slice(0,l)){for(;u--;)s=ja(s.times(s),l);return d.precision=f,t==null?(rs=!0,ja(s,f)):s}s=o}}function bi(e){for(var t=e.e*Ua,r=e.d[0];r>=10;r/=10)t++;return t}function qT(e,t,r){if(t>e.LN10.sd())throw rs=!0,r&&(e.precision=r),Error(ed+"LN10 precision limit exceeded");return ja(new e(e.LN10),t)}function $0(e){for(var t="";e--;)t+="0";return t}function S2(e,t){var r,n,a,s,o,l,c,u,d,f=1,h=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(ed+(m.s?"NaN":"-Infinity"));if(m.eq(zc))return new x(0);if(t==null?(rs=!1,u=v):u=t,m.eq(10))return t==null&&(rs=!0),qT(x,u);if(u+=h,x.precision=u,r=Yf(g),n=r.charAt(0),s=bi(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Yf(m.d),n=r.charAt(0),f++;s=bi(m),n>1?(m=new x("0."+r),s++):m=new x(n+"."+r.slice(1))}else return c=qT(x,u+2,v).times(s+""),m=S2(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=v,t==null?(rs=!0,ja(m,v)):m;for(l=o=m=bh(m.minus(zc),m.plus(zc),u),d=ja(m.times(m),u),a=3;;){if(o=ja(o.times(d),u),c=l.plus(bh(o,new x(a),u)),Yf(c.d).slice(0,u)===Yf(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(qT(x,u+2,v).times(s+""))),l=bh(l,new x(f),u),x.precision=v,t==null?(rs=!0,ja(l,v)):l;l=c,a+=2}}function SG(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=d1(r/Ua),e.d=[],n=(r+1)%Ua,r<0&&(n+=Ua),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ua;n<a;)e.d.push(+t.slice(n,n+=Ua));t=t.slice(n),n=Ua-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),rs&&(e.e>vS||e.e<-vS))throw Error(nL+r)}else e.s=0,e.e=0,e.d=[0];return e}function ja(e,t,r){var n,a,s,o,l,c,u,d,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=Ua,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ua),s=f.length,d>=s)return e;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=Ua,a=n-Ua+o}if(r!==void 0&&(s=Pp(10,o-a-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Pp(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=bi(e),f.length=1,t=t-s-1,f[0]=Pp(10,(Ua-t%Ua)%Ua),e.e=d1(-t/Ua)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Pp(10,Ua-n),f[d]=a>0?(u/Pp(10,o-a)%Pp(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Xi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Xi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(rs&&(e.e>vS||e.e<-vS))throw Error(nL+bi(e));return e}function eie(e,t){var r,n,a,s,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),rs?ja(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/Ua),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Xi-1;--c[s],c[a]+=Xi}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,rs?ja(t,m):t):new h(0)}function Og(e,t,r){var n,a=bi(e),s=Yf(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+$0(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+$0(-a-1)+s,r&&(n=r-o)>0&&(s+=$0(n))):a>=o?(s+=$0(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+$0(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=$0(n))),e.s<0?"-"+s:s}function kG(e,t){if(e.length>t)return e.length=t,!0}function tie(e){var t,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(dg+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return SG(o,s.toString())}else if(typeof s!="string")throw Error(dg+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,eUe.test(s))SG(o,s);else throw Error(dg+s)}if(a.prototype=hr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=tie,a.config=a.set=tUe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function tUe(e){if(!e||typeof e!="object")throw Error(ed+"Object expected");var t,r,n,a=["precision",1,u1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(d1(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(dg+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(dg+r+": "+n);return this}var aL=tie(ZMe);zc=new aL(1);const ma=aL;var rUe=e=>e,rie={},nie=e=>e===rie,jG=e=>function t(){return arguments.length===0||arguments.length===1&&nie(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},aie=(e,t)=>e===1?t:jG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==rie).length;return s>=e?t(...n):aie(e-s,jG(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>nie(d)?l.shift():d);return t(...u,...l)}))}),j4=e=>aie(e.length,e),fO=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},nUe=j4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),aUe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return rUe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}},AO=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),sie=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=a,r=e(...a)),r}};function iie(e){var t;return e===0?t=1:t=Math.floor(new ma(e).abs().log(10).toNumber())+1,t}function oie(e,t,r){for(var n=new ma(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}j4((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});j4((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});j4((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var lie=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},cie=(e,t,r)=>{if(e.lte(0))return new ma(0);var n=iie(e.toNumber()),a=new ma(10).pow(n),s=e.div(a),o=n!==1?.05:.1,l=new ma(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?new ma(c.toNumber()):new ma(Math.ceil(c.toNumber()))},sUe=(e,t,r)=>{var n=new ma(1),a=new ma(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ma(10).pow(iie(e)-1),a=new ma(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ma(Math.floor(e)))}else e===0?a=new ma(Math.floor((t-1)/2)):r||(a=new ma(Math.floor(e)));var o=Math.floor((t-1)/2),l=aUe(nUe(c=>a.add(new ma(c-o).mul(n)).toNumber()),fO);return l(0,t)},uie=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ma(0),tickMin:new ma(0),tickMax:new ma(0)};var o=cie(new ma(r).sub(t).div(n-1),a,s),l;t<=0&&r>=0?l=new ma(0):(l=new ma(t).add(r).div(2),l=l.sub(new ma(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new ma(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?uie(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new ma(c).mul(o)),tickMax:l.add(new ma(u).mul(o))})};function iUe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[o,l]=lie([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...fO(0,n-1).map(()=>1/0)]:[...fO(0,n-1).map(()=>-1/0),l];return t>r?AO(c):c}if(o===l)return sUe(o,n,a);var{step:u,tickMin:d,tickMax:f}=uie(o,l,s,a,0),h=oie(d,f.add(new ma(.1).mul(u)),u);return t>r?AO(h):h}function oUe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=lie([r,n]);if(s===-1/0||o===1/0)return[r,n];if(s===o)return[s];var l=Math.max(t,2),c=cie(new ma(o).sub(s).div(l-1),a,0),u=[...oie(new ma(s),new ma(o),c),o];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?AO(u):u}var lUe=sie(iUe),cUe=sie(oUe),die=e=>e.rootProps.maxBarSize,uUe=e=>e.rootProps.barGap,fie=e=>e.rootProps.barCategoryGap,dUe=e=>e.rootProps.barSize,yE=e=>e.rootProps.stackOffset,sL=e=>e.options.chartName,iL=e=>e.rootProps.syncId,Aie=e=>e.rootProps.syncMethod,oL=e=>e.options.eventEmitter,$f={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},ec={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},B4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},fUe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:$f.angleAxisId,includeHidden:!1,name:void 0,reversed:$f.reversed,scale:$f.scale,tick:$f.tick,tickCount:void 0,ticks:void 0,type:$f.type,unit:void 0},AUe={allowDataOverflow:ec.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ec.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ec.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ec.scale,tick:ec.tick,tickCount:ec.tickCount,ticks:void 0,type:ec.type,unit:void 0},hUe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:$f.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$f.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$f.scale,tick:$f.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},mUe={allowDataOverflow:ec.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ec.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ec.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ec.scale,tick:ec.tick,tickCount:ec.tickCount,ticks:void 0,type:"category",unit:void 0},f1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?hUe:fUe,wE=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?mUe:AUe,T4=e=>e.polarOptions,lL=dt([qh,Kh,Oi],Hae),hie=dt([T4,lL],(e,t)=>{if(e!=null)return jl(e.innerRadius,t,0)}),mie=dt([T4,lL],(e,t)=>{if(e!=null)return jl(e.outerRadius,t,t*.8)}),pUe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},pie=dt([T4],pUe),gUe=dt([f1,pie],B4),gie=dt([lL,hie,mie],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),xUe=dt([wE,gie],B4),A1=dt([In,T4,hie,mie,qh,Kh],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:jl(o,a,a/2),cy:jl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Ba=(e,t)=>t,EE=(e,t,r)=>r;function cL(e){return e==null?void 0:e.id}var Pi=e=>{var t=In(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},h1=e=>e.tooltip.settings.axisId,Ri=e=>{var t=Pi(e),r=h1(e);return m1(e,t,r)};function xie(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var u=cL(o);c.forEach((d,f)=>{var h=a==null?f:String(La(d,a,null)),m=La(d,o.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:m}),s.set(h,g)})}}),Array.from(s.values())}function I4(e){return e.stackId!=null&&e.dataKey!=null}function BG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BG(Object(r),!0).forEach(function(n){vUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vUe(e,t,r){return(t=bUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bUe(e){var t=yUe(e,"string");return typeof t=="symbol"?t:t+""}function yUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hO=[0,"auto"],Dc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Xh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Dc},Pc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:hO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:x4},np=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Pc},wUe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},uL=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??wUe},ri=(e,t,r)=>{switch(t){case"xAxis":return Xh(e,r);case"yAxis":return np(e,r);case"zAxis":return uL(e,r);case"angleAxis":return f1(e,r);case"radiusAxis":return wE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},EUe=(e,t,r)=>{switch(t){case"xAxis":return Xh(e,r);case"yAxis":return np(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},m1=(e,t,r)=>{switch(t){case"xAxis":return Xh(e,r);case"yAxis":return np(e,r);case"angleAxis":return f1(e,r);case"radiusAxis":return wE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},vie=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function dL(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var fL=e=>e.graphicalItems.cartesianItems,NUe=dt([Ba,EE],dL),AL=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),NE=dt([fL,ri,NUe],AL),bie=dt([NE],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(I4)),yie=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),wie=dt([NE],yie),hL=e=>e.map(t=>t.data).filter(Boolean).flat(1),CUe=dt([NE],hL),mL=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},pL=dt([CUe,rL],mL),gL=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:La(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:La(a,n)}))):e.map(n=>({value:n})),F4=dt([pL,ri,NE],gL);function Eie(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function nx(e){return e.filter(t=>dA(t)||t instanceof Date).map(Number).filter(t=>Zc(t)===!1)}function _Ue(e,t,r){return!r||typeof t!="number"||Zc(t)?[]:r.length?nx(r.flatMap(n=>{var a=La(e,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!ru(s)||!ru(o)))return[t-s,t+o]})):[]}var SUe=dt([bie,rL,Ri],xie),Nie=(e,t,r)=>{var n={},a=t.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=l.map(cL);return[o,{stackedData:bPe(e,c,r),graphicalItems:l}]}))},mO=dt([SUe,bie,yE],Nie),Cie=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=CPe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},kUe=dt([mO,rp,Ba],Cie),_ie=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(o=>{var l,c,u=(l=n[o.id])===null||l===void 0?void 0:l.filter(f=>Eie(a,f)),d=La(s,(c=t.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:_Ue(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:La(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),O4=e=>e.errorBars,Sie=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Eie(r,n));dt([wie,O4,Ba],Sie);var jUe=dt([pL,ri,wie,O4,Ba],_ie);function BUe(e){var{value:t}=e;if(dA(t)||t instanceof Date)return t}var TG=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=nx(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},TUe=(e,t,r)=>{var n=e.map(BUe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Mne(n))?Ase(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},xL=e=>{var t;if(e==null||!("domain"in e))return hO;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=nx(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:hO},yS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},kie=e=>e.referenceElements.dots,p1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),IUe=dt([kie,Ba,EE],p1),jie=e=>e.referenceElements.areas,FUe=dt([jie,Ba,EE],p1),Bie=e=>e.referenceElements.lines,OUe=dt([Bie,Ba,EE],p1),Tie=(e,t)=>{var r=nx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},DUe=dt(IUe,Ba,Tie),Iie=(e,t)=>{var r=nx(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},PUe=dt([FUe,Ba],Iie),Fie=(e,t)=>{var r=nx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},RUe=dt(OUe,Ba,Fie),LUe=dt(DUe,RUe,PUe,(e,t,r)=>yS(e,r,t)),Oie=dt([ri],xL),vL=(e,t,r,n,a,s,o)=>{var l=YMe(t,e.allowDataOverflow);if(l!=null)return l;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?yS(r,a,TG(n)):yS(a,TG(n));return JMe(t,u,e.allowDataOverflow)},MUe=dt([ri,Oie,kUe,jUe,LUe,In,Ba],vL),UUe=[0,1],bL=(e,t,r,n,a,s,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=Zm(t,s);return u&&l==null?Ase(0,r.length):c==="category"?TUe(n,e,u):a==="expand"?UUe:o}},yL=dt([ri,In,pL,F4,yE,Ba,MUe],bL),Die=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:o}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(hE(s));return l in ew?l:"point"}}},ap=dt([ri,In,vie,sL,Ba],Die);function QUe(e){if(e!=null){if(e in ew)return ew[e]();var t="scale".concat(hE(e));if(t in ew)return ew[t]()}}function D4(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=QUe(t);if(a!=null){var s=a.domain(r).range(n);return mPe(s),s}}}var wL=(e,t,r)=>{var n=xL(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Nb(e))return lUe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Nb(e))return cUe(e,t.tickCount,t.allowDecimals)}},EL=dt([yL,m1,ap],wL),NL=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Nb(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return t},HUe=dt([ri,yL,EL,Ba],NL),VUe=dt(F4,ri,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(nx(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var o=n[s+1]-n[s];r=Math.min(r,o)}return r/a}}),Pie=dt(VUe,In,fie,Oi,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!ru(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var o=jl(r,e*s),l=e*s/2;return l-o-(l-o)/s*o}return 0}),zUe=(e,t)=>{var r=Xh(e,t);return r==null||typeof r.padding!="string"?0:Pie(e,"xAxis",t,r.padding)},$Ue=(e,t)=>{var r=np(e,t);return r==null||typeof r.padding!="string"?0:Pie(e,"yAxis",t,r.padding)},GUe=dt(Xh,zUe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),qUe=dt(np,$Ue,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),KUe=dt([Oi,GUe,b4,v4,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),WUe=dt([Oi,In,qUe,b4,v4,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),CE=(e,t,r,n)=>{var a;switch(t){case"xAxis":return KUe(e,r,n);case"yAxis":return WUe(e,r,n);case"zAxis":return(a=uL(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return pie(e);case"radiusAxis":return gie(e,r);default:return}},Rie=dt([ri,CE],B4),g1=dt([ri,ap,HUe,Rie],D4);dt([NE,O4,Ba],Sie);function Lie(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var P4=(e,t)=>t,R4=(e,t,r)=>r,XUe=dt(_8,P4,R4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Lie)),YUe=dt(S8,P4,R4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Lie)),Mie=(e,t)=>({width:e.width,height:t.height}),JUe=(e,t)=>{var r=typeof t.width=="number"?t.width:x4;return{width:r,height:e.height}},Uie=dt(Oi,Xh,Mie),ZUe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},e7e=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},t7e=dt(Kh,Oi,XUe,P4,R4,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=Mie(t,l);o==null&&(o=ZUe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),r7e=dt(qh,Oi,YUe,P4,R4,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=JUe(t,l);o==null&&(o=e7e(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),n7e=(e,t)=>{var r=Oi(e),n=Xh(e,t);if(n!=null){var a=t7e(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},a7e=(e,t)=>{var r=Oi(e),n=np(e,t);if(n!=null){var a=r7e(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Qie=dt(Oi,np,(e,t)=>{var r=typeof t.width=="number"?t.width:x4;return{width:r,height:e.height}}),IG=(e,t,r)=>{switch(t){case"xAxis":return Uie(e,r).width;case"yAxis":return Qie(e,r).height;default:return}},Hie=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=Zm(e,n),c=t.map(u=>u.value);if(o&&l&&s==="category"&&a&&Mne(c))return c}},_E=dt([In,F4,ri,Ba],Hie),CL=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=Zm(e,n);if(o&&(a==="number"||s!=="auto"))return t.map(l=>l.value)}},_L=dt([In,F4,m1,Ba],CL),FG=dt([In,EUe,ap,g1,_E,_L,CE,EL,Ba],(e,t,r,n,a,s,o,l,c)=>{if(t==null)return null;var u=Zm(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),Vie=(e,t,r,n,a,s,o,l,c)=>{if(!(t==null||n==null)){var u=Zm(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&s!=null&&s.length>=2?to(s[0]-s[1])*2*g:g;var x=f||a;if(x){var v=x.map((y,w)=>{var _=o?o.indexOf(y):y;return{index:w,coordinate:n(_)+g,value:y,offset:g}});return v.filter(y=>!Zc(y.coordinate))}return u&&l?l.map((y,w)=>({coordinate:n(y)+g,value:y,index:w,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,w)=>({coordinate:n(y)+g,value:o?o[y]:y,index:w,offset:g}))}},zie=dt([In,m1,ap,g1,EL,CE,_E,_L,Ba],Vie),$ie=(e,t,r,n,a,s,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=Zm(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?to(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Cb=dt([In,m1,g1,CE,_E,_L,Ba],$ie),_b=dt(ri,g1,(e,t)=>{if(!(e==null||t==null))return bS(bS({},e),{},{scale:t})}),s7e=dt([ri,ap,yL,Rie],D4);dt((e,t,r)=>uL(e,r),s7e,(e,t)=>{if(!(e==null||t==null))return bS(bS({},e),{},{scale:t})});var i7e=dt([In,_8,S8],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Gie=e=>e.options.defaultTooltipEventType,qie=e=>e.options.validateTooltipEventTypes;function Kie(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function SL(e,t){var r=Gie(e),n=qie(e);return Kie(t,r,n)}function o7e(e){return or(t=>SL(t,e))}var Wie=(e,t)=>{var r,n=Number(t);if(!(Zc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},l7e=e=>e.tooltip.settings,em={active:!1,index:null,dataKey:void 0,coordinate:void 0},c7e={itemInteraction:{click:em,hover:em},axisInteraction:{click:em,hover:em},keyboardInteraction:em,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Xie=au({name:"tooltip",initialState:c7e,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=vh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:u7e,removeTooltipEntrySettings:d7e,setTooltipSettingsState:f7e,setActiveMouseOverItemIndex:Yie,mouseLeaveItem:A7e,mouseLeaveChart:Jie,setActiveClickItemIndex:h7e,setMouseOverAxisIndex:Zie,setMouseClickAxisIndex:m7e,setSyncInteraction:pO,setKeyboardInteraction:gO}=Xie.actions,p7e=Xie.reducer;function OG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OG(Object(r),!0).forEach(function(n){g7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g7e(e,t,r){return(t=x7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x7e(e){var t=v7e(e,"string");return typeof t=="symbol"?t:t+""}function v7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b7e(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function y7e(e){return e.index!=null}var eoe=(e,t,r,n)=>{if(t==null)return em;var a=b7e(e,t,r);if(a==null)return em;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(y7e(a)){if(s)return EC(EC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return EC(EC({},em),{},{coordinate:a.coordinate})},kL=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!ru(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},toe=(e,t,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},roe=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===a})},SE=e=>e.options.tooltipPayloadSearcher,x1=e=>e.tooltip;function DG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DG(Object(r),!0).forEach(function(n){w7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w7e(e,t,r){return(t=E7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E7e(e){var t=N7e(e,"string");return typeof t=="symbol"?t:t+""}function N7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C7e(e,t){return e??t}var noe=(e,t,r,n,a,s,o)=>{if(!(t==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=C7e(x,l),w=Array.isArray(y)?zae(y,u,d):y,_=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,F=v==null?void 0:v.nameKey,B;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?B=oFe(w,n.dataKey,a):B=s(w,t,c,F),Array.isArray(B))B.forEach(C=>{var S=PG(PG({},v),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});h.push(h$({tooltipEntrySettings:S,dataKey:C.dataKey,payload:C.payload,value:La(C.payload,C.dataKey),name:C.name}))});else{var T;h.push(h$({tooltipEntrySettings:v,dataKey:_,payload:B,value:La(B,_),name:(T=La(B,F))!==null&&T!==void 0?T:v==null?void 0:v.name}))}return h},f)}},jL=dt([Ri,In,vie,sL,Pi],Die),_7e=dt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),S7e=dt([Pi,h1],dL),kE=dt([_7e,Ri,S7e],AL),k7e=dt([kE],e=>e.filter(I4)),j7e=dt([kE],hL),v1=dt([j7e,rp],mL),B7e=dt([k7e,rp,Ri],xie),BL=dt([v1,Ri,kE],gL),T7e=dt([Ri],xL),I7e=dt([kE],e=>e.filter(I4)),F7e=dt([B7e,I7e,yE],Nie),O7e=dt([F7e,rp,Pi],Cie),D7e=dt([kE],yie),P7e=dt([v1,Ri,D7e,O4,Pi],_ie),R7e=dt([kie,Pi,h1],p1),L7e=dt([R7e,Pi],Tie),M7e=dt([jie,Pi,h1],p1),U7e=dt([M7e,Pi],Iie),Q7e=dt([Bie,Pi,h1],p1),H7e=dt([Q7e,Pi],Fie),V7e=dt([L7e,H7e,U7e],yS),z7e=dt([Ri,T7e,O7e,P7e,V7e,In,Pi],vL),aoe=dt([Ri,In,v1,BL,yE,Pi,z7e],bL),$7e=dt([aoe,Ri,jL],wL),G7e=dt([Ri,aoe,$7e,Pi],NL),soe=e=>{var t=Pi(e),r=h1(e),n=!1;return CE(e,t,r,n)},ioe=dt([Ri,soe],B4),ooe=dt([Ri,jL,G7e,ioe],D4),q7e=dt([In,BL,Ri,Pi],Hie),K7e=dt([In,BL,Ri,Pi],CL),W7e=(e,t,r,n,a,s,o,l)=>{if(t){var{type:c}=t,u=Zm(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?to(a[0]-a[1])*2*f:f,u&&o?o.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:s?s[h]:h,index:m,offset:f}))}}},Yh=dt([In,Ri,jL,ooe,soe,q7e,K7e,Pi],W7e),TL=dt([Gie,qie,l7e],(e,t,r)=>Kie(r.shared,e,t)),loe=e=>e.tooltip.settings.trigger,IL=e=>e.tooltip.settings.defaultIndex,L4=dt([x1,TL,loe,IL],eoe),Mm=dt([L4,v1],kL),coe=dt([Yh,Mm],Wie),uoe=dt([L4],e=>{if(e)return e.dataKey}),doe=dt([x1,TL,loe,IL],roe),X7e=dt([qh,Kh,In,Oi,Yh,IL,doe,SE],toe),Y7e=dt([L4,X7e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),J7e=dt([L4],e=>e.active),Z7e=dt([doe,Mm,rp,Ri,coe,SE,TL],noe),e9e=dt([Z7e],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function RG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RG(Object(r),!0).forEach(function(n){t9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t9e(e,t,r){return(t=r9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r9e(e){var t=n9e(e,"string");return typeof t=="symbol"?t:t+""}function n9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a9e=()=>or(Ri),s9e=()=>{var e=a9e(),t=or(Yh),r=or(ooe);return w2(LG(LG({},e),{},{scale:r}),t)},i9e=()=>or(sL),FL=(e,t)=>t,foe=(e,t,r)=>r,OL=(e,t,r,n)=>n,o9e=dt(Yh,e=>d4(e,t=>t.coordinate)),DL=dt([x1,FL,foe,OL],eoe),Aoe=dt([DL,v1],kL),l9e=(e,t,r)=>{if(t!=null){var n=x1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},hoe=dt([x1,FL,foe,OL],roe),wS=dt([qh,Kh,In,Oi,Yh,OL,hoe,SE],toe),c9e=dt([DL,wS],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),moe=dt(Yh,Aoe,Wie),u9e=dt([hoe,Aoe,rp,Ri,moe,SE,FL],noe),d9e=dt([DL],e=>({isActive:e.active,activeIndex:e.index})),f9e=(e,t,r,n,a,s,o,l)=>{if(!(!e||!t||!n||!a||!s)){var c=_Pe(e.chartX,e.chartY,t,r,l);if(c){var u=kPe(c,t),d=APe(u,o,s,n,a),f=SPe(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function xO(){return xO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xO.apply(null,arguments)}function MG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MG(Object(r),!0).forEach(function(n){A9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A9e(e,t,r){return(t=h9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h9e(e){var t=m9e(e,"string");return typeof t=="symbol"?t:t+""}function m9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p9e(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,g;if(u==="ScatterChart")m=d,g=CRe;else if(u==="BarChart")m=_Re(o,d,a,s),g=cse;else if(o==="radial"){var{cx:x,cy:v,radius:y,startAngle:w,endAngle:_}=use(d);m={cx:x,cy:v,startAngle:w,endAngle:_,innerRadius:y,outerRadius:y},g=fse}else m={points:u8e(o,d,a)},g=rse;var F=typeof l=="object"&&"className"in l?l.className:void 0,B=NC(NC(NC(NC({stroke:"#ccc",pointerEvents:"none"},a),m),Xn(l,!1)),{},{payload:f,payloadIndex:h,className:bn("recharts-tooltip-cursor",F)});return N.isValidElement(l)?N.cloneElement(l,B):N.createElement(g,B)}function g9e(e){var t=s9e(),r=Yae(),n=T8(),a=i9e();return N.createElement(p9e,xO({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var poe=N.createContext(null),x9e=()=>N.useContext(poe),KT={exports:{}},UG;function v9e(){return UG||(UG=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var x=r?r+u:u;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,w,_;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];v.fn.apply(v.context,w)}else{var F=v.length,B;for(_=0;_<F;_++)switch(v[_].once&&this.removeListener(u,v[_].fn,void 0,!0),y){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,d);break;case 3:v[_].fn.call(v[_].context,d,f);break;case 4:v[_].fn.call(v[_].context,d,f,h);break;default:if(!w)for(B=1,w=new Array(y-1);B<y;B++)w[B-1]=arguments[B];v[_].fn.apply(v[_].context,w)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(KT)),KT.exports}var b9e=v9e();const y9e=Bl(b9e);var k2=new y9e,vO="recharts.syncEvent.tooltip",QG="recharts.syncEvent.brush";function PL(e,t){if(t){var r=Number.parseInt(t,10);if(!Zc(r))return e==null?void 0:e[r]}}var w9e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},goe=au({name:"options",initialState:w9e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),E9e=goe.reducer,{createEventEmitter:N9e}=goe.actions;function C9e(e){return e.tooltip.syncInteraction}var _9e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},xoe=au({name:"chartData",initialState:_9e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:HG,setDataStartEndIndexes:S9e,setComputedData:vpt}=xoe.actions,k9e=xoe.reducer,voe=()=>{};function j9e(){var e=or(iL),t=or(oL),r=qa(),n=or(Aie),a=or(Yh),s=T8(),o=k8(),l=or(c=>c.rootProps.className);N.useEffect(()=>{if(e==null)return voe;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,m);h=a[g]}else n==="value"&&(h=a.find(T=>String(T.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||o==null){r(pO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,w=Math.min(v,o.x+o.width),_=Math.min(y,o.y+o.height),F={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?_:h.coordinate},B=pO({active:d.payload.active,coordinate:F,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(B)}}};return k2.on(vO,c),()=>{k2.off(vO,c)}},[l,r,t,e,n,a,s,o])}function B9e(){var e=or(iL),t=or(oL),r=qa();N.useEffect(()=>{if(e==null)return voe;var n=(a,s,o)=>{t!==o&&e===a&&r(S9e(s))};return k2.on(QG,n),()=>{k2.off(QG,n)}},[r,t,e])}function T9e(){var e=qa();N.useEffect(()=>{e(N9e())},[e]),j9e(),B9e()}function I9e(e,t,r,n,a,s){var o=or(h=>l9e(h,e,t)),l=or(oL),c=or(iL),u=or(Aie),d=or(C9e),f=d==null?void 0:d.active;N.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=pO({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});k2.emit(vO,c,h,l)}},[f,r,o,a,n,l,c,u,s])}function VG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VG(Object(r),!0).forEach(function(n){F9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F9e(e,t,r){return(t=O9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O9e(e){var t=D9e(e,"string");return typeof t=="symbol"?t:t+""}function D9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P9e(e){return e.dataKey}function R9e(e,t){return N.isValidElement(e)?N.cloneElement(e,t):typeof e=="function"?N.createElement(e,t):N.createElement(nRe,t)}var $G=[],L9e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!ex.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function uh(e){var t=rd(e,L9e),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:w,portal:_,axisId:F}=t,B=qa(),T=typeof w=="number"?String(w):w;N.useEffect(()=>{B(f7e({shared:v,trigger:y,axisId:F,active:r,defaultIndex:T}))},[B,v,y,F,r,T]);var C=k8(),S=tse(),j=o7e(v),{activeIndex:L,isActive:P}=or(Y=>d9e(Y,j,y,T)),k=or(Y=>u9e(Y,j,y,T)),U=or(Y=>moe(Y,j,y,T)),Q=or(Y=>c9e(Y,j,y,T)),K=k,H=x9e(),q=r??P,[z,W]=gae([K,q]),ee=j==="axis"?U:void 0;I9e(j,y,Q,ee,L,q);var X=_??H;if(X==null)return null;var O=K??$G;q||(O=$G),l&&O.length&&(O=dae(K.filter(Y=>Y.value!=null&&(Y.hide!==!0||t.includeHidden)),d,P9e));var R=O.length>0,G=N.createElement(uRe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:q,coordinate:Q,hasPayload:R,offset:u,position:f,reverseDirection:h,useTranslate3d:m,viewBox:C,wrapperStyle:g,lastBoundingBox:z,innerRef:W,hasPortalFromProps:!!_},R9e(o,zG(zG({},t),{},{payload:O,label:ee,active:q,coordinate:Q,accessibilityLayer:S})));return N.createElement(N.Fragment,null,o8.createPortal(G,X),q&&N.createElement(g9e,{cursor:x,tooltipEventType:j,coordinate:Q,payload:K,index:L}))}var WT={},XT={},YT={},GG;function M9e(){return GG||(GG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),x()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),o=void 0,l=null},v=()=>{d()},y=function(...w){if(a!=null&&a.aborted)return;o=this,l=w;const _=h==null;m(),c&&_&&d()};return y.schedule=m,y.cancel=x,y.flush=v,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(YT)),YT}var qG;function U9e(){return qG||(qG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M9e();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r}(XT)),XT}var KG;function Q9e(){return KG||(KG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U9e();function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r}(WT)),WT}var JT,WG;function H9e(){return WG||(WG=1,JT=Q9e().throttle),JT}var V9e=H9e();const z9e=Bl(V9e);var jw=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function XG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ZT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XG(Object(r),!0).forEach(function(n){$9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $9e(e,t,r){return(t=G9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G9e(e){var t=q9e(e,"string");return typeof t=="symbol"?t:t+""}function q9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dh=N.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:g={}}=e,x=N.useRef(null),v=N.useRef();v.current=m,N.useImperativeHandle(t,()=>x.current);var[y,w]=N.useState({containerWidth:n.width,containerHeight:n.height}),_=N.useCallback((B,T)=>{w(C=>{var S=Math.round(B),j=Math.round(T);return C.containerWidth===S&&C.containerHeight===j?C:{containerWidth:S,containerHeight:j}})},[]);N.useEffect(()=>{var B=j=>{var L,{width:P,height:k}=j[0].contentRect;_(P,k),(L=v.current)===null||L===void 0||L.call(v,P,k)};d>0&&(B=z9e(B,d,{trailing:!0,leading:!1}));var T=new ResizeObserver(B),{width:C,height:S}=x.current.getBoundingClientRect();return _(C,S),T.observe(x.current),()=>{T.disconnect()}},[_,d]);var F=N.useMemo(()=>{var{containerWidth:B,containerHeight:T}=y;if(B<0||T<0)return null;jw(qp(a)||qp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),jw(!r||r>0,"The aspect(%s) must be greater than zero.",r);var C=qp(a)?B:a,S=qp(s)?T:s;return r&&r>0&&(C?S=C/r:S&&(C=S*r),c&&S>c&&(S=c)),jw(C>0||S>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,S,a,s,o,l,r),N.Children.map(u,j=>N.cloneElement(j,{width:C,height:S,style:ZT({width:C,height:S},j.props.style)}))},[r,u,s,c,l,o,y,a]);return N.createElement("div",{id:f?"".concat(f):void 0,className:bn("recharts-responsive-container",h),style:ZT(ZT({},g),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:x},N.createElement("div",{style:{width:0,height:0,overflow:"visible"}},F))}),Um=e=>null;Um.displayName="Cell";function K9e(e,t,r){return(t=W9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W9e(e){var t=X9e(e,"string");return typeof t=="symbol"?t:t+""}function X9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Y9e{constructor(t){K9e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function YG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function J9e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YG(Object(r),!0).forEach(function(n){Z9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z9e(e,t,r){return(t=eQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eQe(e){var t=tQe(e,"string");return typeof t=="symbol"?t:t+""}function tQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rQe={cacheSize:2e3,enableCache:!0},boe=J9e({},rQe),JG=new Y9e(boe.cacheSize),nQe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ZG="recharts_measurement_span";function aQe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var eq=(e,t)=>{try{var r=document.getElementById(ZG);r||(r=document.createElement("span"),r.setAttribute("id",ZG),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,nQe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Bw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ex.isSsr)return{width:0,height:0};if(!boe.enableCache)return eq(t,r);var n=aQe(t,r),a=JG.get(n);if(a)return a;var s=eq(t,r);return JG.set(n,s),s},tq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sQe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,iQe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,yoe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},oQe=Object.keys(yoe),yv="NaN";function lQe(e,t){return e*yoe[t]}class Xl{static parse(t){var r,[,n,a]=(r=iQe.exec(t))!==null&&r!==void 0?r:[];return new Xl(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Zc(t)&&(this.unit=""),r!==""&&!sQe.test(r)&&(this.num=NaN,this.unit=""),oQe.includes(r)&&(this.num=lQe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Xl(NaN,""):new Xl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Xl(NaN,""):new Xl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Xl(NaN,""):new Xl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Xl(NaN,""):new Xl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Zc(this.num)}}function woe(e){if(e.includes(yv))return yv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=tq.exec(t))!==null&&r!==void 0?r:[],o=Xl.parse(n??""),l=Xl.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return yv;t=t.replace(tq,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=rq.exec(t))!==null&&u!==void 0?u:[],m=Xl.parse(d??""),g=Xl.parse(h??""),x=f==="+"?m.add(g):m.subtract(g);if(x.isNaN())return yv;t=t.replace(rq,x.toString())}return t}var nq=/\(([^()]*)\)/;function cQe(e){for(var t=e,r;(r=nq.exec(t))!=null;){var[,n]=r;t=t.replace(nq,woe(n))}return t}function uQe(e){var t=e.replace(/\s+/g,"");return t=cQe(t),t=woe(t),t}function dQe(e){try{return uQe(e)}catch{return yv}}function eI(e){var t=dQe(e.slice(5,-1));return t===yv?"":t}var fQe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],AQe=["dx","dy","angle","className","breakAll"];function bO(){return bO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bO.apply(null,arguments)}function aq(e,t){if(e==null)return{};var r,n,a=hQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Eoe=/[ \f\n\r\t\v\u2028\u2029]+/,Noe=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Ds(t)||(r?a=t.toString().split(""):a=t.toString().split(Eoe));var s=a.map(l=>({word:l,width:Bw(l,n).width})),o=r?0:Bw(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},mQe=(e,t,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=e,u=Ar(s),d=o,f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((k,U)=>{var{word:Q,width:K}=U,H=k[k.length-1];if(H&&(n==null||a||H.width+K+r<Number(n)))H.words.push(Q),H.width+=K+r;else{var q={words:[Q],width:K};k.push(q)}return k},[])},h=f(t),m=L=>L.reduce((P,k)=>P.width>k.width?P:k);if(!u||a)return h;var g=h.length>s||m(h).width>Number(n);if(!g)return h;for(var x="…",v=L=>{var P=d.slice(0,L),k=Noe({breakAll:c,style:l,children:P+x}).wordsWithComputedWidth,U=f(k),Q=U.length>s||m(U).width>Number(n);return[Q,U]},y=0,w=d.length-1,_=0,F;y<=w&&_<=d.length-1;){var B=Math.floor((y+w)/2),T=B-1,[C,S]=v(T),[j]=v(B);if(!C&&!j&&(y=B+1),C&&j&&(w=B-1),!C&&j){F=S;break}_++}return F||h},sq=e=>{var t=Ds(e)?[]:e.toString().split(Eoe);return[{words:t}]},pQe=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=e;if((t||r)&&!ex.isSsr){var l,c,u=Noe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return sq(n);return mQe({breakAll:s,children:n,maxLines:o,style:a},l,c,t,r)}return sq(n)},iq="#808080",b1=N.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=iq}=e,d=aq(e,fQe),f=N.useMemo(()=>pQe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:h,dy:m,angle:g,className:x,breakAll:v}=d,y=aq(d,AQe);if(!dA(r)||!dA(n))return null;var w=r+(Ar(h)?h:0),_=n+(Ar(m)?m:0),F;switch(c){case"start":F=eI("calc(".concat(s,")"));break;case"middle":F=eI("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:F=eI("calc(".concat(f.length-1," * -").concat(a,")"));break}var B=[];if(o){var T=f[0].width,{width:C}=d;B.push("scale(".concat(Ar(C)?C/T:1,")"))}return g&&B.push("rotate(".concat(g,", ").concat(w,", ").concat(_,")")),B.length&&(y.transform=B.join(" ")),N.createElement("text",bO({},Xn(y,!0),{ref:t,x:w,y:_,className:bn("recharts-text",x),textAnchor:l,fill:u.includes("url")?iq:u}),f.map((S,j)=>{var L=S.words.join(v?"":" ");return N.createElement("tspan",{x:w,dy:j===0?F:a,key:"".concat(L,"-").concat(j)},L)}))});b1.displayName="Text";var gQe=["offset"],xQe=["labelRef"];function oq(e,t){if(e==null)return{};var r,n,a=vQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lq(Object(r),!0).forEach(function(n){bQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bQe(e,t,r){return(t=yQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yQe(e){var t=wQe(e,"string");return typeof t=="symbol"?t:t+""}function wQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nh.apply(null,arguments)}var EQe=e=>{var{value:t,formatter:r}=e,n=Ds(e.children)?t:e.children;return typeof r=="function"?r(n):n},RL=e=>e!=null&&typeof e=="function",NQe=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),360);return r*n},CQe=(e,t,r,n)=>{var{position:a,offset:s,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=n,g=(u+d)/2,x=NQe(f,h),v=x>=0?1:-1,y,w;a==="insideStart"?(y=f+v*s,w=m):a==="insideEnd"?(y=h-v*s,w=!m):a==="end"&&(y=h+v*s,w=m),w=x<=0?w:!w;var _=ea(l,c,g,y),F=ea(l,c,g,y+(w?1:-1)*359),B="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(F.x,",").concat(F.y),T=Ds(e.id)?v2("recharts-radial-line-"):e.id;return N.createElement("text",nh({},r,{dominantBaseline:"central",className:bn("recharts-radial-bar-label",o)}),N.createElement("defs",null,N.createElement("path",{id:T,d:B})),N.createElement("textPath",{xlinkHref:"#".concat(T)},t))},_Qe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=ea(n,a,o+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+o)/2,{x:m,y:g}=ea(n,a,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},SQe=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",m=l>=0?1:-1,g=m*n,x=m>0?"end":"start",v=m>0?"start":"end";if(a==="top"){var y={x:s+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return Cs(Cs({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(a==="bottom"){var w={x:s+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:h};return Cs(Cs({},w),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(a==="left"){var _={x:s-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return Cs(Cs({},_),r?{width:Math.max(_.x-r.x,0),height:c}:{})}if(a==="right"){var F={x:s+l+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Cs(Cs({},F),r?{width:Math.max(r.x+r.width-F.x,0),height:c}:{})}var B=r?{width:l,height:c}:{};return a==="insideLeft"?Cs({x:s+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},B):a==="insideRight"?Cs({x:s+l-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},B):a==="insideTop"?Cs({x:s+l/2,y:o+d,textAnchor:"middle",verticalAnchor:h},B):a==="insideBottom"?Cs({x:s+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},B):a==="insideTopLeft"?Cs({x:s+g,y:o+d,textAnchor:v,verticalAnchor:h},B):a==="insideTopRight"?Cs({x:s+l-g,y:o+d,textAnchor:x,verticalAnchor:h},B):a==="insideBottomLeft"?Cs({x:s+g,y:o+c-d,textAnchor:v,verticalAnchor:f},B):a==="insideBottomRight"?Cs({x:s+l-g,y:o+c-d,textAnchor:x,verticalAnchor:f},B):a&&typeof a=="object"&&(Ar(a.x)||qp(a.x))&&(Ar(a.y)||qp(a.y))?Cs({x:s+jl(a.x,l),y:o+jl(a.y,c),textAnchor:"end",verticalAnchor:"end"},B):Cs({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},B)},kQe=e=>"cx"in e&&Ar(e.cx);function rc(e){var{offset:t=5}=e,r=oq(e,gQe),n=Cs({offset:t},r),{viewBox:a,position:s,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=or(A1),m=k8(),g=s==="center"?m:h??m,x=a||g;if(!x||Ds(o)&&Ds(l)&&!N.isValidElement(c)&&typeof c!="function")return null;var v=Cs(Cs({},n),{},{viewBox:x});if(N.isValidElement(c)){var{labelRef:y}=v,w=oq(v,xQe);return N.cloneElement(c,w)}var _;if(typeof c=="function"){if(_=N.createElement(c,v),N.isValidElement(_))return _}else _=EQe(n);var F=kQe(x),B=Xn(n,!0);if(F&&(s==="insideStart"||s==="insideEnd"||s==="end"))return CQe(n,_,B,x);var T=F?_Qe(x,n.offset,n.position):SQe(n,x);return N.createElement(b1,nh({ref:f,className:bn("recharts-label",u)},B,T,{breakAll:d}),_)}rc.displayName="Label";var Coe=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(Ar(g)&&Ar(x)){if(Ar(d)&&Ar(f))return{x:d,y:f,width:g,height:x};if(Ar(h)&&Ar(m))return{x:h,y:m,width:g,height:x}}if(Ar(d)&&Ar(f))return{x:d,y:f,width:0,height:0};if(Ar(t)&&Ar(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:v};if(e.viewBox)return e.viewBox},jQe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?N.createElement(rc,nh({key:"label-implicit"},n)):dA(e)?N.createElement(rc,nh({key:"label-implicit",value:e},n)):N.isValidElement(e)?e.type===rc?N.cloneElement(e,Cs({key:"label-implicit"},n)):N.createElement(rc,nh({key:"label-implicit",content:e},n)):RL(e)?N.createElement(rc,nh({key:"label-implicit",content:e},n)):e&&typeof e=="object"?N.createElement(rc,nh({},e,{key:"label-implicit"},n)):null},BQe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,o=Coe(t),l=mE(a,rc).map((u,d)=>N.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return l;var c=jQe(t.label,r||o,s);return[c,...l]};rc.parseViewBox=Coe;rc.renderCallByParent=BQe;var tI={},rI={},cq;function TQe(){return cq||(cq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(rI)),rI}var nI={},uq;function IQe(){return uq||(uq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(nI)),nI}var dq;function FQe(){return dq||(dq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TQe(),r=IQe(),n=h8();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(tI)),tI}var aI,fq;function OQe(){return fq||(fq=1,aI=FQe().last),aI}var DQe=OQe();const _oe=Bl(DQe);var PQe=["valueAccessor"],RQe=["data","dataKey","clockWise","id","textBreakAll"];function ES(){return ES=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ES.apply(null,arguments)}function Aq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aq(Object(r),!0).forEach(function(n){LQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LQe(e,t,r){return(t=MQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MQe(e){var t=UQe(e,"string");return typeof t=="symbol"?t:t+""}function UQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mq(e,t){if(e==null)return{};var r,n,a=QQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function QQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HQe=e=>Array.isArray(e.value)?_oe(e.value):e.value;function vm(e){var{valueAccessor:t=HQe}=e,r=mq(e,PQe),{data:n,dataKey:a,clockWise:s,id:o,textBreakAll:l}=r,c=mq(r,RQe);return!n||!n.length?null:N.createElement(As,{className:"recharts-label-list"},n.map((u,d)=>{var f=Ds(a)?t(u,d):La(u&&u.payload,a),h=Ds(o)?{}:{id:"".concat(o,"-").concat(d)};return N.createElement(rc,ES({},Xn(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:rc.parseViewBox(Ds(s)?u:hq(hq({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}vm.displayName="LabelList";function VQe(e,t){return e?e===!0?N.createElement(vm,{key:"labelList-implicit",data:t}):N.isValidElement(e)||RL(e)?N.createElement(vm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?N.createElement(vm,ES({data:t},e,{key:"labelList-implicit"})):null:null}function zQe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=mE(n,vm).map((o,l)=>N.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return a;var s=VQe(e.label,t);return[s,...a]}vm.renderCallByParent=zQe;var $Qe=["points","className","baseLinePoints","connectNulls"];function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wv.apply(null,arguments)}function GQe(e,t){if(e==null)return{};var r,n,a=qQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pq=e=>e&&e.x===+e.x&&e.y===+e.y,KQe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{pq(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),pq(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Tw=(e,t)=>{var r=KQe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,o,l)=>"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},WQe=(e,t,r)=>{var n=Tw(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(Tw(t.reverse(),r).slice(1))},Soe=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=GQe(e,$Qe);if(!t||!t.length)return null;var o=bn("recharts-polygon",r);if(n&&n.length){var l=s.stroke&&s.stroke!=="none",c=WQe(t,n,a);return N.createElement("g",{className:o},N.createElement("path",wv({},Xn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?N.createElement("path",wv({},Xn(s,!0),{fill:"none",d:Tw(t,a)})):null,l?N.createElement("path",wv({},Xn(s,!0),{fill:"none",d:Tw(n,a)})):null)}var u=Tw(t,a);return N.createElement("path",wv({},Xn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:o,d:u}))};function yO(){return yO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yO.apply(null,arguments)}var LL=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=bn("recharts-dot",a);return t===+t&&r===+r&&n===+n?N.createElement("circle",yO({},fl(e),s8(e),{className:s,cx:t,cy:r,r:n})):null},ML=e=>e.graphicalItems.polarItems,XQe=dt([Ba,EE],dL),UL=dt([ML,ri,XQe],AL),YQe=dt([UL],hL),QL=dt([YQe,k4],mL),koe=dt([QL,ri,UL],gL),JQe=dt([QL,ri,UL],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,o=La(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:La(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),gq=()=>{},ZQe=dt([ri,Oie,gq,JQe,gq,In,Ba],vL),joe=dt([ri,In,QL,koe,yE,Ba,ZQe],bL),Boe=dt([joe,ri,ap],wL),eHe=dt([ri,joe,Boe,Ba],NL),HL=(e,t,r)=>{switch(t){case"angleAxis":return f1(e,r);case"radiusAxis":return wE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},VL=(e,t,r)=>{switch(t){case"angleAxis":return gUe(e,r);case"radiusAxis":return xUe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},y1=dt([HL,ap,eHe,VL],D4),Toe=dt([In,koe,m1,Ba],CL),w1=dt([In,HL,ap,y1,Boe,VL,_E,Toe,Ba],Vie);dt([In,HL,y1,VL,_E,Toe,Ba],$ie);var tHe=(e,t)=>w1(e,"angleAxis",t,!1),rHe=dt([tHe],e=>{if(e)return e.map(t=>t.coordinate)}),nHe=(e,t)=>w1(e,"radiusAxis",t,!1),aHe=dt([nHe],e=>{if(e)return e.map(t=>t.coordinate)}),sHe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function iHe(e,t){if(e==null)return{};var r,n,a=oHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dh.apply(null,arguments)}function xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xq(Object(r),!0).forEach(function(n){lHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lHe(e,t,r){return(t=cHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cHe(e){var t=uHe(e,"string");return typeof t=="symbol"?t:t+""}function uHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dHe=(e,t,r,n)=>{var a="";return n.forEach((s,o)=>{var l=ea(t,r,e,s);o?a+="L ".concat(l.x,",").concat(l.y):a+="M ".concat(l.x,",").concat(l.y)}),a+="Z",a},fHe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:o}=e;if(!s||!s.length||!o)return null;var l=Sb({stroke:"#ccc"},fl(e));return N.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=ea(t,r,n,c),d=ea(t,r,a,c);return N.createElement("line",Dh({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},AHe=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=Sb(Sb({stroke:"#ccc"},fl(e)),{},{fill:"none"});return N.createElement("circle",Dh({},s,{className:bn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},hHe=e=>{var{radius:t,index:r}=e,n=Sb(Sb({stroke:"#ccc"},fl(e)),{},{fill:"none"});return N.createElement("path",Dh({},n,{className:bn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:dHe(t,e.cx,e.cy,e.polarAngles)}))},mHe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:N.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?N.createElement(AHe,Dh({key:s},e,{radius:n,index:a})):N.createElement(hHe,Dh({key:s},e,{radius:n,index:a}))}))},Ioe=e=>{var t,r,n,a,s,o,l,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=iHe(e,sHe),w=or(A1),_=Sb({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(n=(a=w==null?void 0:w.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(o=w==null?void 0:w.innerRadius)!==null&&o!==void 0?o:x)!==null&&s!==void 0?s:0,outerRadius:(l=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0},y),{polarAngles:F,polarRadius:B,cx:T,cy:C,innerRadius:S,outerRadius:j}=_,L=or(Q=>rHe(Q,f)),P=or(Q=>aHe(Q,h)),k=Array.isArray(F)?F:L,U=Array.isArray(B)?B:P;return j<=0||k==null||U==null?null:N.createElement("g",{className:"recharts-polar-grid"},N.createElement(fHe,Dh({cx:T,cy:C,innerRadius:S,outerRadius:j,gridType:u,radialLines:d},_,{polarAngles:k,polarRadius:U})),N.createElement(mHe,Dh({cx:T,cy:C,innerRadius:S,outerRadius:j,gridType:u,radialLines:d},_,{polarAngles:k,polarRadius:U})))};Ioe.displayName="PolarGrid";var sI={},iI={},vq;function pHe(){return vq||(vq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let o=1;o<r.length;o++){const l=r[o],c=n(l);c>s&&(s=c,a=l)}return a}e.maxBy=t}(iI)),iI}var bq;function gHe(){return bq||(bq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pHe(),r=u4(),n=v8();function a(s,o){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(o??r.identity))}e.maxBy=a}(sI)),sI}var oI,yq;function xHe(){return yq||(yq=1,oI=gHe().maxBy),oI}var vHe=xHe();const bHe=Bl(vHe);var lI={},cI={},wq;function yHe(){return wq||(wq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let o=1;o<r.length;o++){const l=r[o],c=n(l);c<s&&(s=c,a=l)}return a}e.minBy=t}(cI)),cI}var Eq;function wHe(){return Eq||(Eq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yHe(),r=u4(),n=v8();function a(s,o){if(s!=null)return t.minBy(Array.from(s),n.iteratee(o??r.identity))}e.minBy=a}(lI)),lI}var uI,Nq;function EHe(){return Nq||(Nq=1,uI=wHe().minBy),uI}var NHe=EHe();const CHe=Bl(NHe);var _He={radiusAxis:{},angleAxis:{}},Foe=au({name:"polarAxis",initialState:_He,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:SHe,removeRadiusAxis:kHe,addAngleAxis:jHe,removeAngleAxis:BHe}=Foe.actions,THe=Foe.reducer,IHe=["cx","cy","angle","axisLine"],FHe=["angle","tickFormatter","stroke","tick"];function j2(){return j2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j2.apply(null,arguments)}function Cq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cq(Object(r),!0).forEach(function(n){M4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M4(e,t,r){return(t=OHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OHe(e){var t=DHe(e,"string");return typeof t=="symbol"?t:t+""}function DHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ooe(e,t){if(e==null)return{};var r,n,a=PHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function PHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Doe="radiusAxis";function RHe(e){var t=qa();return N.useEffect(()=>(t(SHe(e)),()=>{t(kHe(e))})),null}var LHe=(e,t,r,n)=>{var{coordinate:a}=e;return ea(r,n,a,t)},MHe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},UHe=(e,t,r,n)=>{var a=bHe(n,o=>o.coordinate||0),s=CHe(n,o=>o.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},QHe=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,o=Ooe(e,IHe),l=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=ea(r,n,l[0],a),u=ea(r,n,l[1],a),d=Jf(Jf(Jf({},fl(o)),{},{fill:"none"},Xn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return N.createElement("line",j2({className:"recharts-polar-radius-axis-line"},d))},HHe=(e,t,r)=>{var n;return N.isValidElement(e)?n=N.cloneElement(e,t):typeof e=="function"?n=e(t):n=N.createElement(b1,j2({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},VHe=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,o=Ooe(e,FHe),l=MHe(e.orientation),c=fl(o),u=Xn(s,!1),d=t.map((f,h)=>{var m=LHe(f,e.angle,e.cx,e.cy),g=Jf(Jf(Jf(Jf({textAnchor:l,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},m),{},{payload:f});return N.createElement(As,j2({className:bn("recharts-polar-radius-axis-tick",Vae(s)),key:"tick-".concat(f.coordinate)},Zg(e,f,h)),HHe(s,g,n?n(f.value,h):f.value))});return N.createElement(As,{className:"recharts-polar-radius-axis-ticks"},d)},zHe=e=>{var{radiusAxisId:t}=e,r=or(A1),n=or(c=>y1(c,"radiusAxis",t)),a=or(c=>w1(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=Jf(Jf(Jf({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:o,axisLine:l}=s;return N.createElement(As,{className:bn("recharts-polar-radius-axis",Doe,s.className)},l&&QHe(s,a),o&&VHe(s,a),rc.renderCallByParent(s,UHe(s.angle,s.cx,s.cy,a)))};class U4 extends N.PureComponent{render(){return N.createElement(N.Fragment,null,N.createElement(RHe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),N.createElement(zHe,this.props))}}M4(U4,"displayName","PolarRadiusAxis");M4(U4,"axisType",Doe);M4(U4,"defaultProps",ec);var $He=["children"];function Ph(){return Ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ph.apply(null,arguments)}function _q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_q(Object(r),!0).forEach(function(n){Q4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_q(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q4(e,t,r){return(t=GHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GHe(e){var t=qHe(e,"string");return typeof t=="symbol"?t:t+""}function qHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KHe(e,t){if(e==null)return{};var r,n,a=WHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XHe=Math.PI/180,Sq=1e-5,Poe="angleAxis";function YHe(e){var t=qa(),r=N.useMemo(()=>{var{children:s}=e,o=KHe(e,$He);return o},[e]),n=or(s=>f1(s,r.id)),a=r===n;return N.useEffect(()=>(t(jHe(r)),()=>{t(BHe(r))}),[t,r]),a?e.children:null}var JHe=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:o}=t,l=o||8,c=ea(r,n,a,e.coordinate),u=ea(r,n,a+(s==="inner"?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},ZHe=(e,t)=>{var r=Math.cos(-e.coordinate*XHe);return r>Sq?t==="outer"?"start":"end":r<-Sq?t==="outer"?"end":"start":"middle"},eVe=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:o}=e;if(!s)return null;var l=Gf(Gf({},fl(e)),{},{fill:"none"},Xn(s,!1));if(a==="circle")return N.createElement(LL,Ph({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:n}));var c=o.map(u=>ea(t,r,n,u.coordinate));return N.createElement(Soe,Ph({className:"recharts-polar-angle-axis-line"},l,{points:c}))},tVe=e=>{var{tick:t,tickProps:r,value:n}=e;return t?N.isValidElement(t)?N.cloneElement(t,r):typeof t=="function"?t(r):N.createElement(b1,Ph({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},rVe=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,o=fl(e),l=Xn(t,!1),c=Gf(Gf({},o),{},{fill:"none"},Xn(r,!1)),u=s.map((d,f)=>{var h=JHe(d,e),m=ZHe(d,e.orientation),g=Gf(Gf(Gf({},o),{},{textAnchor:m,stroke:"none",fill:a},l),{},{index:f,payload:d,x:h.x2,y:h.y2});return N.createElement(As,Ph({className:bn("recharts-polar-angle-axis-tick",Vae(t)),key:"tick-".concat(d.coordinate)},Zg(e,d,f)),r&&N.createElement("line",Ph({className:"recharts-polar-angle-axis-tick-line"},c,h)),N.createElement(tVe,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return N.createElement(As,{className:"recharts-polar-angle-axis-ticks"},u)},nVe=e=>{var{angleAxisId:t}=e,r=or(A1),n=or(l=>y1(l,"angleAxis",t)),a=fc(),s=or(l=>w1(l,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var o=Gf(Gf(Gf({},e),{},{scale:n},r),{},{radius:r.outerRadius});return N.createElement(As,{className:bn("recharts-polar-angle-axis",Poe,o.className)},N.createElement(eVe,Ph({},o,{ticks:s})),N.createElement(rVe,Ph({},o,{ticks:s})))};class H4 extends N.PureComponent{render(){return this.props.radius<=0?null:N.createElement(YHe,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},N.createElement(nVe,this.props))}}Q4(H4,"displayName","PolarAngleAxis");Q4(H4,"axisType",Poe);Q4(H4,"defaultProps",$f);function kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kq(Object(r),!0).forEach(function(n){aVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aVe(e,t,r){return(t=sVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sVe(e){var t=iVe(e,"string");return typeof t=="symbol"?t:t+""}function iVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oVe=(e,t)=>t,zL=dt([ML,oVe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),lVe=[],$L=(e,t,r)=>(r==null?void 0:r.length)===0?lVe:r,Roe=dt([k4,zL,$L],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>jq(jq({},t.presentationProps),s.props))),a!=null)return a}}),cVe=dt([Roe,zL,$L],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,o=La(n,t.nameKey,t.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:o1(o,t.dataKey),color:l,payload:n,type:t.legendType}})}),uVe=dt([Roe,zL,$L,Oi],(e,t,r,n)=>{if(!(t==null||e==null))return nze({offset:n,pieSettings:t,displayedData:e,cells:r})}),dI={},Bq;function dVe(){return Bq||(Bq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(dI)),dI}var fI,Tq;function fVe(){return Tq||(Tq=1,fI=dVe().isPlainObject),fI}var AVe=fVe();const hVe=Bl(AVe);function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NS.apply(null,arguments)}var Iq=(e,t,r,n,a)=>{var s=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-s/2,",").concat(t+a),o+="L ".concat(e+r-s/2-n,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},mVe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pVe=e=>{var t=rd(e,mVe),r=N.useRef(),[n,a]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var x=bn("recharts-trapezoid",d);return g?N.createElement(lS,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:o},duration:h,animationEasing:f,isActive:g},v=>{var{upperWidth:y,lowerWidth:w,height:_,x:F,y:B}=v;return N.createElement(lS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:f},N.createElement("path",NS({},Xn(t,!0),{className:x,d:Iq(F,B,y,w,_),ref:r})))}):N.createElement("g",null,N.createElement("path",NS({},Xn(t,!0),{className:x,d:Iq(s,o,l,c,u)})))},gVe=["option","shapeType","propTransformer","activeClassName","isActive"];function xVe(e,t){if(e==null)return{};var r,n,a=vVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Fq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fq(Object(r),!0).forEach(function(n){bVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bVe(e,t,r){return(t=yVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yVe(e){var t=wVe(e,"string");return typeof t=="symbol"?t:t+""}function wVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EVe(e,t){return CS(CS({},t),e)}function NVe(e,t){return e==="symbols"}function Oq(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return N.createElement(cse,r);case"trapezoid":return N.createElement(pVe,r);case"sector":return N.createElement(fse,r);case"symbols":if(NVe(t))return N.createElement(d8,r);break;default:return null}}function CVe(e){return N.isValidElement(e)?e.props:e}function Loe(e){var{option:t,shapeType:r,propTransformer:n=EVe,activeClassName:a="recharts-active-shape",isActive:s}=e,o=xVe(e,gVe),l;if(N.isValidElement(t))l=N.cloneElement(t,CS(CS({},o),CVe(t)));else if(typeof t=="function")l=t(o);else if(hVe(t)&&typeof t!="boolean"){var c=n(t,o);l=N.createElement(Oq,{shapeType:r,elementProps:c})}else{var u=o;l=N.createElement(Oq,{shapeType:r,elementProps:u})}return s?N.createElement(As,{className:a},l):l}var GL=(e,t)=>{var r=qa();return(n,a)=>s=>{e==null||e(n,a,s),r(Yie({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},qL=e=>{var t=qa();return(r,n)=>a=>{e==null||e(r,n,a),t(A7e())}},KL=(e,t)=>{var r=qa();return(n,a)=>s=>{e==null||e(n,a,s),r(h7e({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function WL(e){var{fn:t,args:r}=e,n=qa(),a=fc();return N.useEffect(()=>{if(!a){var s=t(r);return n(u7e(s)),()=>{n(d7e(s))}}},[t,r,n,a]),null}var Moe=()=>{};function _Ve(e){var{legendPayload:t}=e,r=qa(),n=fc();return N.useEffect(()=>n?Moe:(r(Zae(t)),()=>{r(ese(t))}),[r,n,t]),null}function Uoe(e){var{legendPayload:t}=e,r=qa(),n=or(In);return N.useEffect(()=>n!=="centric"&&n!=="radial"?Moe:(r(Zae(t)),()=>{r(ese(t))}),[r,n,t]),null}function XL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=N.useRef(v2(t)),n=N.useRef(e);return n.current!==e&&(r.current=v2(t),n.current=e),r.current}var AI,SVe=()=>{var[e]=N.useState(()=>v2("uid-"));return e},kVe=(AI=Whe.useId)!==null&&AI!==void 0?AI:SVe;function jVe(e,t){var r=kVe();return t||(e?"".concat(e,"-").concat(r):r)}var BVe=N.createContext(void 0),YL=e=>{var{id:t,type:r,children:n}=e,a=jVe("recharts-".concat(r),t);return N.createElement(BVe.Provider,{value:a},n(a))},TVe={cartesianItems:[],polarItems:[]},Qoe=au({name:"graphicalItems",initialState:TVe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=vh(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=vh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=vh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:IVe,replaceCartesianGraphicalItem:FVe,removeCartesianGraphicalItem:OVe,addPolarGraphicalItem:DVe,removePolarGraphicalItem:PVe}=Qoe.actions,RVe=Qoe.reducer;function LVe(e){var t=qa(),r=N.useRef(null);return N.useEffect(()=>{r.current===null?t(IVe(e)):r.current!==e&&t(FVe({prev:r.current,next:e})),r.current=e},[t,e]),N.useEffect(()=>()=>{r.current&&(t(OVe(r.current)),r.current=null)},[t]),null}function Hoe(e){var t=qa();return N.useEffect(()=>(t(DVe(e)),()=>{t(PVe(e))}),[t,e]),null}function MVe(){}var UVe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Dq={t:0},hI={t:1};function JL(e){var t=rd(e,UVe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=lse("JavascriptAnimate",t.animationManager),[f,h]=N.useState(r?Dq:hI),m=N.useRef(null);return N.useEffect(()=>{r||h(hI)},[r]),N.useEffect(()=>{if(!r||!n)return MVe;var g=ose(Dq,hI,sse(s),a,h,d.getTimeoutController()),x=()=>{m.current=g()};return d.start([c,o,x,a,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,n,a,s,o,c,l,d]),u(f.t)}var QVe=["onMouseEnter","onClick","onMouseLeave"],HVe=["id"],VVe=["id"];function ZL(e,t){if(e==null)return{};var r,n,a=zVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ts(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pq(Object(r),!0).forEach(function(n){$Ve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Ve(e,t,r){return(t=GVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GVe(e){var t=qVe(e,"string");return typeof t=="symbol"?t:t+""}function qVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rh.apply(null,arguments)}function KVe(e){var t=N.useMemo(()=>mE(e.children,Um),[e.children]),r=or(n=>cVe(n,e.id,t));return r==null?null:N.createElement(Uoe,{legendPayload:r})}function WVe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:t,nameKey:r,name:o1(l,t),hide:c,type:u,color:o,unit:""}}}var XVe=(e,t)=>e>t?"start":e<t?"end":"middle",YVe=(e,t,r)=>typeof t=="function"?t(e):jl(t,r,r*.8),JVe=(e,t,r)=>{var{top:n,left:a,width:s,height:o}=t,l=Hae(s,o),c=a+jl(e.cx,s,s/2),u=n+jl(e.cy,o,o/2),d=jl(e.innerRadius,l,0),f=YVe(r,e.outerRadius,l),h=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},ZVe=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),360);return r*n},eze=(e,t)=>{if(N.isValidElement(e))return N.cloneElement(e,t);if(typeof e=="function")return e(t);var r=bn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return N.createElement(rse,Rh({},t,{type:"linear",className:r}))},tze=(e,t,r)=>{if(N.isValidElement(e))return N.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),N.isValidElement(n)))return n;var a=bn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return N.createElement(b1,Rh({},t,{alignmentBaseline:"middle",className:a}),n)};function rze(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!t)return null;var l=fl(r),c=Xn(a,!1),u=Xn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,m)=>{var g=(h.startAngle+h.endAngle)/2,x=ea(h.cx,h.cy,h.outerRadius+d,g),v=Ts(Ts(Ts(Ts({},l),h),{},{stroke:"none"},c),{},{index:m,textAnchor:XVe(x.x,h.cx)},x),y=Ts(Ts(Ts(Ts({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:m,points:[ea(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return N.createElement(As,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(m)},s&&eze(s,y),tze(a,v,La(h,o)))});return N.createElement(As,{className:"recharts-pie-labels"},f)}function Voe(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,o=or(Mm),{onMouseEnter:l,onClick:c,onMouseLeave:u}=a,d=ZL(a,QVe),f=GL(l,a.dataKey),h=qL(u),m=KL(c,a.dataKey);return t==null?null:N.createElement(N.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===o,y=o?n:null,w=v?r:y,_=Ts(Ts({},g),{},{stroke:g.stroke,tabIndex:-1,[Kae]:x,[Wae]:a.dataKey});return N.createElement(As,Rh({tabIndex:-1,className:"recharts-pie-sector"},Zg(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),N.createElement(Loe,Rh({option:w,isActive:v,shapeType:"sector"},_)))}),N.createElement(rze,{sectors:t,props:a,showLabels:s}))}function nze(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),m=ZVe(l,c),g=Math.abs(m),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=n.filter(T=>La(T,u,0)!==0).length,y=(g>=360?v:v-1)*x,w=g-v*h-y,_=n.reduce((T,C)=>{var S=La(C,u,0);return T+(Ar(S)?S:0)},0),F;if(_>0){var B;F=n.map((T,C)=>{var S=La(T,u,0),j=La(T,d,C),L=JVe(r,s,T),P=(Ar(S)?S:0)/_,k,U=Ts(Ts({},T),a&&a[C]&&a[C].props);C?k=B.endAngle+to(m)*x*(S!==0?1:0):k=l;var Q=k+to(m)*((S!==0?h:0)+P*w),K=(k+Q)/2,H=(L.innerRadius+L.outerRadius)/2,q=[{name:j,value:S,payload:U,dataKey:u,type:f}],z=ea(L.cx,L.cy,H,K);return B=Ts(Ts(Ts(Ts({},r.presentationProps),{},{percent:P,cornerRadius:o,name:j,tooltipPayload:q,midAngle:K,middleRadius:H,tooltipPosition:z},U),L),{},{value:La(T,u),startAngle:k,endAngle:Q,payload:U,paddingAngle:to(m)*x}),B})}return F}function aze(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=XL(t,"recharts-pie-"),m=r.current,[g,x]=N.useState(!0),v=N.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=N.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return N.createElement(JL,{begin:s,duration:o,isActive:a,easing:l,onAnimationStart:y,onAnimationEnd:v,key:h},w=>{var _=[],F=n&&n[0],B=F.startAngle;return n.forEach((T,C)=>{var S=m&&m[C],j=C>0?Lm(T,"paddingAngle",0):0;if(S){var L=bv(S.endAngle-S.startAngle,T.endAngle-T.startAngle),P=Ts(Ts({},T),{},{startAngle:B+j,endAngle:B+L(w)+j});_.push(P),B=P.endAngle}else{var{endAngle:k,startAngle:U}=T,Q=bv(0,k-U),K=Q(w),H=Ts(Ts({},T),{},{startAngle:B+j,endAngle:B+K+j});_.push(H),B=H.endAngle}}),r.current=_,N.createElement(As,null,N.createElement(Voe,{sectors:_,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function sze(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=N.useRef(null),o=s.current;return r&&t&&t.length&&(!o||o!==t)?N.createElement(aze,{props:e,previousSectorsRef:s}):N.createElement(Voe,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function ize(e){var{hide:t,className:r,rootTabIndex:n}=e,a=bn("recharts-pie",r);return t?null:N.createElement(As,{tabIndex:n,className:a},N.createElement(sze,e))}var oze={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!ex.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function lze(e){var{id:t}=e,r=ZL(e,HVe),n=N.useMemo(()=>mE(e.children,Um),[e.children]),a=or(s=>uVe(s,t,n));return N.createElement(N.Fragment,null,N.createElement(WL,{fn:WVe,args:Ts(Ts({},e),{},{sectors:a})}),N.createElement(ize,Rh({},r,{sectors:a})))}function V4(e){var t=rd(e,oze),{id:r}=t,n=ZL(t,VVe),a=fl(n);return N.createElement(YL,{id:r,type:"pie"},s=>N.createElement(N.Fragment,null,N.createElement(Hoe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),N.createElement(KVe,Rh({},n,{id:s})),N.createElement(lze,Rh({},n,{id:s})),n.children))}V4.displayName="Pie";var cze=dt([Oi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),uze=dt([cze,qh,Kh],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),zoe=()=>or(uze),dze=()=>or(e9e);function Rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rq(Object(r),!0).forEach(function(n){fze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fze(e,t,r){return(t=Aze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aze(e){var t=hze(e,"string");return typeof t=="symbol"?t:t+""}function hze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mze=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var o=Lq(Lq({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Xn(a,!1)),s8(a)),l;return N.isValidElement(a)?l=N.cloneElement(a,o):typeof a=="function"?l=a(o):l=N.createElement(LL,o),N.createElement(As,{className:"recharts-active-dot"},l)};function pze(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=or(Mm),o=dze();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Ds(l)?null:mze({point:l,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function Mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mq(Object(r),!0).forEach(function(n){gze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gze(e,t,r){return(t=xze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xze(e){var t=vze(e,"string");return typeof t=="symbol"?t:t+""}function vze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $oe=(e,t)=>y1(e,"radiusAxis",t),bze=dt([$oe],e=>{if(e!=null)return{scale:e}}),yze=dt([wE,$oe],(e,t)=>{if(!(e==null||t==null))return _S(_S({},e),{},{scale:t})}),wze=(e,t,r,n)=>w1(e,"radiusAxis",t,n),Goe=(e,t,r)=>f1(e,r),qoe=(e,t,r)=>y1(e,"angleAxis",r),Eze=dt([Goe,qoe],(e,t)=>{if(!(e==null||t==null))return _S(_S({},e),{},{scale:t})}),Nze=(e,t,r,n)=>w1(e,"angleAxis",r,n),Cze=dt([Goe,qoe,A1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),_ze=(e,t,r,n,a)=>a,Sze=dt([In,yze,wze,Eze,Nze],(e,t,r,n,a)=>Zm(e,"radiusAxis")?w2(t,r,!1):w2(n,a,!1)),kze=dt([ML,_ze],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),jze=dt([bze,Cze,k4,kze,Sze],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:o,dataEndIndex:l}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(o,l+1);return Lze({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),Bze=["id"];function Tze(e,t){if(e==null)return{};var r,n,a=Ize(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ize(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Uq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _l(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uq(Object(r),!0).forEach(function(n){eM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eM(e,t,r){return(t=Fze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fze(e){var t=Oze(e,"string");return typeof t=="symbol"?t:t+""}function Oze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kb(){return kb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kb.apply(null,arguments)}function tM(e,t){return e&&e!=="none"?e:t}var Dze=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:tM(n,a),value:o1(r,t),payload:e}]};function Pze(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:o1(s,t),hide:o,type:l,color:tM(r,a),unit:""}}}function Rze(e,t){var r;return N.isValidElement(e)?r=N.cloneElement(e,t):typeof e=="function"?r=e(t):r=N.createElement(LL,kb({},t,{className:bn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function Lze(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:o,cy:l}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,m)=>{var g=La(h,r.dataKey,m),x=La(h,a),v=r.scale(g)+d,y=Array.isArray(x)?_oe(x):x,w=Ds(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(_l(_l({},ea(o,l,w,v)),{},{name:g,value:x,cx:o,cy:l,radius:w,angle:v,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var m=h.value[0],g=Ds(m)?void 0:t.scale(m);f.push(_l(_l({},h),{},{radius:g},ea(o,l,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function Mze(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,o=Tze(r,Bze),l=fl(o),c=Xn(n,!0),u=t.map((d,f)=>{var h=_l(_l(_l({key:"dot-".concat(f),r:3},l),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return Rze(n,h)});return N.createElement(As,{className:"recharts-radar-dots"},u)}function Koe(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:o,connectNulls:l}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return N.isValidElement(a)?d=N.cloneElement(a,_l(_l({},r),{},{points:t})):typeof a=="function"?d=a(_l(_l({},r),{},{points:t})):d=N.createElement(Soe,kb({},Xn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?o:null,connectNulls:l})),N.createElement(As,{className:"recharts-radar-polygon"},d,N.createElement(Mze,{props:r,points:t}),n&&vm.renderCallByParent(r,t))}function Uze(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=XL(t,"recharts-radar-"),[h,m]=N.useState(!0),g=N.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=N.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return N.createElement(JL,{begin:s,duration:o,isActive:a,easing:l,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},v=>{var y=d&&d.length/n.length,w=v===1?n:n.map((_,F)=>{var B=d&&d[Math.floor(F*y)];if(B){var T=bv(B.x,_.x),C=bv(B.y,_.y);return _l(_l({},_),{},{x:T(v),y:C(v)})}var S=bv(_.cx,_.x),j=bv(_.cy,_.y);return _l(_l({},_),{},{x:S(v),y:j(v)})});return v>0&&(r.current=w),N.createElement(Koe,{points:w,props:t,showLabels:!h})})}function Qze(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=N.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?N.createElement(Uze,{props:e,previousPointsRef:a}):N.createElement(Koe,{points:t,props:e,showLabels:!0})}var Hze={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!ex.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class Vze extends N.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=bn("recharts-radar",r);return N.createElement(N.Fragment,null,N.createElement(As,{className:a},N.createElement(Qze,this.props)),N.createElement(pze,{points:n,mainColor:tM(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function zze(e){var t=fc(),r=or(n=>jze(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return N.createElement(Vze,kb({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class rM extends N.PureComponent{render(){return N.createElement(YL,{id:this.props.id,type:"radar"},t=>N.createElement(N.Fragment,null,N.createElement(Hoe,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),N.createElement(Uoe,{legendPayload:Dze(this.props)}),N.createElement(WL,{fn:Pze,args:this.props}),N.createElement(zze,kb({},this.props,{id:t}))))}}eM(rM,"displayName","Radar");eM(rM,"defaultProps",Hze);var $ze="Invariant failed";function Gze(e,t){throw new Error($ze)}var qze=["x","y"];function wO(){return wO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wO.apply(null,arguments)}function Qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qq(Object(r),!0).forEach(function(n){Kze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kze(e,t,r){return(t=Wze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wze(e){var t=Xze(e,"string");return typeof t=="symbol"?t:t+""}function Xze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yze(e,t){if(e==null)return{};var r,n,a=Jze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Jze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Zze(e,t){var{x:r,y:n}=e,a=Yze(e,qze),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return yy(yy(yy(yy(yy({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Woe(e){return N.createElement(Loe,wO({shapeType:"rectangle",propTransformer:Zze,activeClassName:"recharts-active-bar"},e))}var e$e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Ar(t))return t;var s=Ar(n)||Ds(n);return s?t(n,a):(s||Gze(),r)}},t$e={},Xoe=au({name:"errorBars",initialState:t$e,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:bpt,removeErrorBar:ypt}=Xoe.actions,r$e=Xoe.reducer,n$e=["children"];function a$e(e,t){if(e==null)return{};var r,n,a=s$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var i$e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},o$e=N.createContext(i$e);function l$e(e){var{children:t}=e,r=a$e(e,n$e);return N.createElement(o$e.Provider,{value:r},t)}function Yoe(e,t){var r,n,a=or(u=>Xh(u,e)),s=or(u=>np(u,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Dc.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Pc.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function c$e(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=zoe(),{needClipX:s,needClipY:o,needClip:l}=Yoe(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=a;return N.createElement("clipPath",{id:"clipPath-".concat(n)},N.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var u$e=["onMouseEnter","onMouseLeave","onClick"],d$e=["value","background","tooltipPosition"],f$e=["id"],A$e=["onMouseEnter","onClick","onMouseLeave"];function jb(){return jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jb.apply(null,arguments)}function Hq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hq(Object(r),!0).forEach(function(n){h$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h$e(e,t,r){return(t=m$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m$e(e){var t=p$e(e,"string");return typeof t=="symbol"?t:t+""}function p$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SS(e,t){if(e==null)return{};var r,n,a=g$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function g$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var x$e=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:o1(r,t),payload:e}]};function v$e(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:o1(s,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function b$e(e){var t=or(Mm),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=SS(s,u$e),d=GL(o,n),f=qL(l),h=KL(c,n);if(!a||r==null)return null;var m=Xn(a,!1);return N.createElement(N.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:w}=g,_=SS(g,d$e);if(!y)return null;var F=d(g,x),B=f(g,x),T=h(g,x),C=el(el(el(el(el({option:a,isActive:String(x)===t},_),{},{fill:"#eee"},y),m),Zg(u,g,x)),{},{onMouseEnter:F,onMouseLeave:B,onClick:T,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return N.createElement(Woe,jb({key:"background-bar-".concat(x)},C))}))}function Joe(e){var{data:t,props:r,showLabels:n}=e,a=fl(r),{id:s}=a,o=SS(a,f$e),{shape:l,dataKey:c,activeBar:u}=r,d=or(Mm),f=or(uoe),{onMouseEnter:h,onClick:m,onMouseLeave:g}=r,x=SS(r,A$e),v=GL(h,c),y=qL(g),w=KL(m,c);return t?N.createElement(N.Fragment,null,t.map((_,F)=>{var B=u&&String(F)===d&&(f==null||c===f),T=B?u:l,C=el(el(el({},o),_),{},{isActive:B,option:T,index:F,dataKey:c});return N.createElement(As,jb({className:"recharts-bar-rectangle"},Zg(x,_,F),{onMouseEnter:v(_,F),onMouseLeave:y(_,F),onClick:w(_,F),key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(F)}),N.createElement(Woe,C))}),n&&vm.renderCallByParent(r,t)):null}function y$e(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=XL(t,"recharts-bar-"),[m,g]=N.useState(!1),x=N.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=N.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return N.createElement(JL,{begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:h},y=>{var w=y===1?n:n==null?void 0:n.map((_,F)=>{var B=f&&f[F];if(B)return el(el({},_),{},{x:Mx(B.x,_.x,y),y:Mx(B.y,_.y,y),width:Mx(B.width,_.width,y),height:Mx(B.height,_.height,y)});if(a==="horizontal"){var T=Mx(0,_.height,y);return el(el({},_),{},{y:_.y+_.height-T,height:T})}var C=Mx(0,_.width,y);return el(el({},_),{},{width:C})});return y>0&&(r.current=w??null),w==null?null:N.createElement(As,null,N.createElement(Joe,{props:t,data:w,showLabels:!m}))})}function w$e(e){var{data:t,isAnimationActive:r}=e,n=N.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?N.createElement(y$e,{previousRectanglesRef:n,props:e}):N.createElement(Joe,{props:e,data:t,showLabels:!0})}var Zoe=0,E$e=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:La(e,t)}};class N$e extends N.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t)return null;var d=bn("recharts-bar",a),f=u;return N.createElement(As,{className:d,id:u},l&&N.createElement("defs",null,N.createElement(c$e,{clipPathId:f,xAxisId:s,yAxisId:o})),N.createElement(As,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},N.createElement(b$e,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),N.createElement(w$e,this.props)),this.props.children)}}var C$e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!ex.isSsr,legendType:"rect",minPointSize:Zoe,xAxisId:0,yAxisId:0};function _$e(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Yoe(t,r),h=T8(),m=fc(),g=mE(e.children,Um),x=or(w=>Z$e(w,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,N.createElement(l$e,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:E$e,errorBarOffset:v},N.createElement(N$e,jb({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function S$e(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m}=e,g=t==="horizontal"?l:o,x=d?g.scale.domain():null,v=wPe({numericAxis:g});return f.map((y,w)=>{var _,F,B,T,C,S;d?_=pPe(d[w],x):(_=La(y,r),Array.isArray(_)||(_=[v,_]));var j=e$e(n,Zoe)(_[1],w);if(t==="horizontal"){var L,[P,k]=[l.scale(_[0]),l.scale(_[1])];F=d$({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:y,index:w}),B=(L=k??P)!==null&&L!==void 0?L:void 0,T=a.size;var U=P-k;if(C=Zc(U)?0:U,S={x:F,y:h.top,width:T,height:h.height},Math.abs(j)>0&&Math.abs(C)<Math.abs(j)){var Q=to(C||j)*(Math.abs(j)-Math.abs(C));B-=Q,C+=Q}}else{var[K,H]=[o.scale(_[0]),o.scale(_[1])];if(F=K,B=d$({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:y,index:w}),T=H-K,C=a.size,S={x:h.left,y:B,width:h.width,height:C},Math.abs(j)>0&&Math.abs(T)<Math.abs(j)){var q=to(T||j)*(Math.abs(j)-Math.abs(T));T+=q}}if(F==null||B==null||T==null||C==null)return null;var z=el(el({},y),{},{x:F,y:B,width:T,height:C,value:d?_:_[1],payload:y,background:S,tooltipPosition:{x:F+T/2,y:B+C/2}},m&&m[w]&&m[w].props);return z}).filter(Boolean)}function Bb(e){var t=rd(e,C$e),r=fc();return N.createElement(YL,{id:t.id,type:"bar"},n=>N.createElement(N.Fragment,null,N.createElement(_Ve,{legendPayload:x$e(t)}),N.createElement(WL,{fn:v$e,args:t}),N.createElement(LVe,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:yPe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),N.createElement(_$e,jb({},t,{id:n}))))}Bb.displayName="Bar";function Vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vq(Object(r),!0).forEach(function(n){k$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k$e(e,t,r){return(t=j$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j$e(e){var t=B$e(e,"string");return typeof t=="symbol"?t:t+""}function B$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T$e=(e,t)=>t,I$e=(e,t,r)=>r,F$e=(e,t,r,n)=>n,O$e=(e,t,r,n,a)=>a,jE=dt([fL,O$e],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),D$e=dt([jE],e=>e==null?void 0:e.maxBarSize),P$e=(e,t,r,n,a,s)=>s,zq=(e,t,r)=>{var n=r??e;if(!Ds(n))return jl(n,t,0)},R$e=dt([In,fL,T$e,I$e,F$e],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),L$e=(e,t,r,n)=>{var a=In(e);return a==="horizontal"?mO(e,"yAxis",r,n):mO(e,"xAxis",t,n)},M$e=(e,t,r)=>{var n=In(e);return n==="horizontal"?IG(e,"xAxis",t):IG(e,"yAxis",r)},U$e=(e,t,r)=>{var n={},a=e.filter(I4),s=e.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),m=zq(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=zq(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},Q$e=dt([R$e,dUe,M$e],U$e),H$e=(e,t,r,n,a)=>{var s,o,l=jE(e,t,r,n,a);if(l!=null){var c=In(e),u=die(e),{maxBarSize:d}=l,f=Ds(d)?u:d,h,m;return c==="horizontal"?(h=_b(e,"xAxis",t,n),m=Cb(e,"xAxis",t,n)):(h=_b(e,"yAxis",r,n),m=Cb(e,"yAxis",r,n)),(s=(o=w2(h,m,!0))!==null&&o!==void 0?o:f)!==null&&s!==void 0?s:0}},ele=(e,t,r,n)=>{var a=In(e),s,o;return a==="horizontal"?(s=_b(e,"xAxis",t,n),o=Cb(e,"xAxis",t,n)):(s=_b(e,"yAxis",r,n),o=Cb(e,"yAxis",r,n)),w2(s,o)};function V$e(e,t,r,n,a){var s=n.length;if(!(s<1)){var o=jl(e,r,0,!0),l,c=[];if(ru(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,w)=>y+(w.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,m={offset:h-o,size:0};l=n.reduce((y,w)=>{var _,F={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(_=w.barSize)!==null&&_!==void 0?_:0}},B=[...y,F];return m=B[B.length-1].position,B},c)}else{var g=jl(t,r,0,!0);r-2*g-(s-1)*o<=0&&(o=0);var x=(r-2*g-(s-1)*o)/s;x>1&&(x>>=0);var v=ru(a)?Math.min(x,a):x;l=n.reduce((y,w,_)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+o)*_+(x-v)/2,size:v}}],c)}return l}}var z$e=(e,t,r,n,a,s,o)=>{var l=Ds(o)?t:o,c=V$e(r,n,a!==s?a:s,e,l);return a!==s&&c!=null&&(c=c.map(u=>CC(CC({},u),{},{position:CC(CC({},u.position),{},{offset:u.position.offset-a/2})}))),c},$$e=dt([Q$e,die,uUe,fie,H$e,ele,D$e],z$e),G$e=(e,t,r,n)=>_b(e,"xAxis",t,n),q$e=(e,t,r,n)=>_b(e,"yAxis",r,n),K$e=(e,t,r,n)=>Cb(e,"xAxis",t,n),W$e=(e,t,r,n)=>Cb(e,"yAxis",r,n),X$e=dt([$$e,jE],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Y$e=(e,t)=>{var r=cL(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}},J$e=dt([L$e,jE],Y$e),Z$e=dt([Oi,G$e,q$e,K$e,W$e,X$e,In,rL,ele,J$e,jE,P$e],(e,t,r,n,a,s,o,l,c,u,d,f)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:g}=l;if(!(d==null||s==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(m,g+1),v!=null)return S$e({layout:o,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:v,offset:e,cells:f})}}),tle=e=>{var{chartData:t}=e,r=qa(),n=fc();return N.useEffect(()=>n?()=>{}:(r(HG(t)),()=>{r(HG(void 0))}),[t,r,n]),null},$q={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},rle=au({name:"brush",initialState:$q,reducers:{setBrushSettings(e,t){return t.payload==null?$q:t.payload}}}),{setBrushSettings:wpt}=rle.actions,eGe=rle.reducer;function tGe(e,t,r){return(t=rGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rGe(e){var t=nGe(e,"string");return typeof t=="symbol"?t:t+""}function nGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nM{static create(t){return new nM(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}tGe(nM,"EPS",1e-4);function aGe(e){return(e%180+180)%180}var sGe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=aGe(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},iGe={dots:[],areas:[],lines:[]},nle=au({name:"referenceElements",initialState:iGe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=vh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=vh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=vh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Ept,removeDot:Npt,addArea:Cpt,removeArea:_pt,addLine:Spt,removeLine:kpt}=nle.actions,oGe=nle.reducer,lGe=N.createContext(void 0),cGe=e=>{var{children:t}=e,[r]=N.useState("".concat(v2("recharts"),"-clip")),n=zoe();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return N.createElement(lGe.Provider,{value:r},N.createElement("defs",null,N.createElement("clipPath",{id:r},N.createElement("rect",{x:a,y:s,height:l,width:o}))),t)};function mI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function ale(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function uGe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return sGe(n,r)}function dGe(e,t,r){var n=r==="width",{x:a,y:s,width:o,height:l}=e;return t===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function kS(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function fGe(e,t){return ale(e,t+1)}function AGe(e,t,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:ale(n,u)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),w=g.coordinate,_=c===0||kS(e,w,y,d,l);_||(c=0,d=o,u+=1),_&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function Gq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gq(Object(r),!0).forEach(function(n){hGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hGe(e,t,r){return(t=mGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mGe(e){var t=pGe(e,"string");return typeof t=="symbol"?t:t+""}function pGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gGe(e,t,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=t,{end:c}=t,u=function(h){var m=s[h],g,x=()=>(g===void 0&&(g=r(m,h)),g);if(h===o-1){var v=e*(m.coordinate+e*x()/2-c);s[h]=m=qo(qo({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else s[h]=m=qo(qo({},m),{},{tickCoord:m.coordinate});var y=kS(e,m.tickCoord,x,l,c);y&&(c=m.tickCoord-e*(x()/2+a),s[h]=qo(qo({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function xGe(e,t,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(s){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=qo(qo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=kS(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=qo(qo({},d),{},{isShow:!0}))}for(var g=s?l-1:l,x=function(w){var _=o[w],F,B=()=>(F===void 0&&(F=r(_,w)),F);if(w===0){var T=e*(_.coordinate-e*B()/2-c);o[w]=_=qo(qo({},_),{},{tickCoord:T<0?_.coordinate-T*e:_.coordinate})}else o[w]=_=qo(qo({},_),{},{tickCoord:_.coordinate});var C=kS(e,_.tickCoord,B,c,u);C&&(c=_.tickCoord+e*(B()/2+a),o[w]=qo(qo({},_),{},{isShow:!0}))},v=0;v<g;v++)x(v);return o}function aM(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(Ar(c)||ex.isSsr){var h;return(h=fGe(a,Ar(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?Bw(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(_,F)=>{var B=typeof u=="function"?u(_.value,F):_.value;return g==="width"?uGe(Bw(B,{fontSize:t,letterSpacing:r}),x,f):Bw(B,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?to(a[1].coordinate-a[0].coordinate):1,w=dGe(s,y,g);return c==="equidistantPreserveStart"?AGe(y,w,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=xGe(y,w,v,a,o,c==="preserveStartEnd"):m=gGe(y,w,v,a,o),m.filter(_=>_.isShow))}var vGe=["viewBox"],bGe=["viewBox"];function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ev.apply(null,arguments)}function qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qq(Object(r),!0).forEach(function(n){sM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kq(e,t){if(e==null)return{};var r,n,a=yGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sM(e,t,r){return(t=wGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wGe(e){var t=EGe(e,"string");return typeof t=="symbol"?t:t+""}function EGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sp extends N.Component{constructor(t){super(t),this.tickRefs=N.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=Kq(t,vGe),s=this.props,{viewBox:o}=s,l=Kq(s,bGe);return!mI(n,o)||!mI(a,l)||!mI(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,h,m,g,x,v=c?-1:1,y=t.tickSize||l,w=Ar(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,m=n+ +!c*s,h=m-v*y,x=h-v*u,g=w;break;case"left":h=m=t.coordinate,f=r+ +!c*a,d=f-v*y,g=d-v*u,x=w;break;case"right":h=m=t.coordinate,f=r+ +c*a,d=f+v*y,g=d+v*u,x=w;break;default:d=f=t.coordinate,m=n+ +c*s,h=m+v*y,x=h+v*u,g=w;break}return{line:{x1:d,y1:h,x2:f,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l}=this.props,c=ki(ki(ki({},Xn(this.props,!1)),Xn(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=ki(ki({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!o||s==="right"&&o);c=ki(ki({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return N.createElement("line",Ev({},c,{className:bn("recharts-cartesian-axis-line",Lm(l,"className"))}))}static renderTickItem(t,r,n){var a,s=bn(r.className,"recharts-cartesian-axis-tick-value");if(N.isValidElement(t))a=N.cloneElement(t,ki(ki({},r),{},{className:s}));else if(typeof t=="function")a=t(ki(ki({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=bn(o,t.className)),a=N.createElement(b1,Ev({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:o,tickFormatter:l,unit:c,padding:u}=this.props,d=aM(ki(ki({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=fl(this.props),g=Xn(o,!1),x=ki(ki({},m),{},{fill:"none"},Xn(a,!1)),v=d.map((y,w)=>{var{line:_,tick:F}=this.getTickLineCoord(y),B=ki(ki(ki(ki({textAnchor:f,verticalAnchor:h},m),{},{stroke:"none",fill:s},g),F),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:l,padding:u});return N.createElement(As,Ev({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Zg(this.props,y,w)),a&&N.createElement("line",Ev({},x,_,{className:bn("recharts-cartesian-axis-tick-line",Lm(a,"className"))})),o&&sp.renderTickItem(o,B,"".concat(typeof l=="function"?l(y.value,w):y.value).concat(c||"")))});return v.length>0?N.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:N.createElement(As,{className:bn("recharts-cartesian-axis",a),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),rc.renderCallByParent(this.props))}}sM(sp,"displayName","CartesianAxis");sM(sp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var NGe=["x1","y1","x2","y2","key"],CGe=["offset"],_Ge=["xAxisId","yAxisId"],SGe=["xAxisId","yAxisId"];function Wq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wq(Object(r),!0).forEach(function(n){kGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kGe(e,t,r){return(t=jGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jGe(e){var t=BGe(e,"string");return typeof t=="symbol"?t:t+""}function BGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yp.apply(null,arguments)}function jS(e,t){if(e==null)return{};var r,n,a=TGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function TGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var IGe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:o,ry:l}=e;return N.createElement("rect",{x:n,y:a,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function sle(e,t){var r;if(N.isValidElement(e))r=N.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:o,key:l}=t,c=jS(t,NGe),u=fl(c),{offset:d}=u,f=jS(u,CGe);r=N.createElement("line",Yp({},f,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function FGe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=jS(e,_Ge),c=a.map((u,d)=>{var f=tl(tl({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return sle(n,f)});return N.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function OGe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=jS(e,SGe),c=a.map((u,d)=>{var f=tl(tl({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return sle(n,f)});return N.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function DGe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+o-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return N.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function PGe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+o-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return N.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var RGe=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return $ae(aM(tl(tl(tl({},sp.defaultProps),r),{},{ticks:Gae(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},LGe=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return $ae(aM(tl(tl(tl({},sp.defaultProps),r),{},{ticks:Gae(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},MGe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function B2(e){var t=j8(),r=B8(),n=Yae(),a=tl(tl({},rd(e,MGe)),{},{x:Ar(e.x)?e.x:n.left,y:Ar(e.y)?e.y:n.top,width:Ar(e.width)?e.width:n.width,height:Ar(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,g=fc(),x=or(j=>FG(j,"xAxis",s,g)),v=or(j=>FG(j,"yAxis",o,g));if(!Ar(u)||u<=0||!Ar(d)||d<=0||!Ar(l)||l!==+l||!Ar(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||RGe,w=a.horizontalCoordinatesGenerator||LGe,{horizontalPoints:_,verticalPoints:F}=a;if((!_||!_.length)&&typeof w=="function"){var B=h&&h.length,T=w({yAxis:v?tl(tl({},v),{},{ticks:B?h:v.ticks}):void 0,width:t,height:r,offset:n},B?!0:f);jw(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(_=T)}if((!F||!F.length)&&typeof y=="function"){var C=m&&m.length,S=y({xAxis:x?tl(tl({},x),{},{ticks:C?m:x.ticks}):void 0,width:t,height:r,offset:n},C?!0:f);jw(Array.isArray(S),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(F=S)}return N.createElement("g",{className:"recharts-cartesian-grid"},N.createElement(IGe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),N.createElement(DGe,Yp({},a,{horizontalPoints:_})),N.createElement(PGe,Yp({},a,{verticalPoints:F})),N.createElement(FGe,Yp({},a,{offset:n,horizontalPoints:_,xAxis:x,yAxis:v})),N.createElement(OGe,Yp({},a,{offset:n,verticalPoints:F,xAxis:x,yAxis:v})))}B2.displayName="CartesianGrid";function Xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xq(Object(r),!0).forEach(function(n){UGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UGe(e,t,r){return(t=QGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QGe(e){var t=HGe(e,"string");return typeof t=="symbol"?t:t+""}function HGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VGe={xAxis:{},yAxis:{},zAxis:{}},ile=au({name:"cartesianAxis",initialState:VGe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=Yq(Yq({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:zGe,removeXAxis:$Ge,addYAxis:GGe,removeYAxis:qGe,addZAxis:jpt,removeZAxis:Bpt,updateYAxisWidth:KGe}=ile.actions,WGe=ile.reducer,XGe=["children"],YGe=["dangerouslySetInnerHTML","ticks"];function ole(e,t,r){return(t=JGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JGe(e){var t=ZGe(e,"string");return typeof t=="symbol"?t:t+""}function ZGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EO(){return EO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EO.apply(null,arguments)}function lle(e,t){if(e==null)return{};var r,n,a=eqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tqe(e){var t=qa(),r=N.useMemo(()=>{var{children:s}=e,o=lle(e,XGe);return o},[e]),n=or(s=>Xh(s,r.id)),a=r===n;return N.useEffect(()=>(t(zGe(r)),()=>{t($Ge(r))}),[r,t]),a?e.children:null}var rqe=e=>{var{xAxisId:t,className:r}=e,n=or(Xae),a=fc(),s="xAxis",o=or(m=>g1(m,s,t,a)),l=or(m=>zie(m,s,t,a)),c=or(m=>Uie(m,t)),u=or(m=>n7e(m,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=lle(e,YGe);return N.createElement(sp,EO({},h,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:bn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l}))},nqe=e=>{var t,r,n,a,s;return N.createElement(tqe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},N.createElement(rqe,e))};class Dg extends N.Component{render(){return N.createElement(nqe,this.props)}}ole(Dg,"displayName","XAxis");ole(Dg,"defaultProps",{allowDataOverflow:Dc.allowDataOverflow,allowDecimals:Dc.allowDecimals,allowDuplicatedCategory:Dc.allowDuplicatedCategory,height:Dc.height,hide:!1,mirror:Dc.mirror,orientation:Dc.orientation,padding:Dc.padding,reversed:Dc.reversed,scale:Dc.scale,tickCount:Dc.tickCount,type:Dc.type,xAxisId:0});var aqe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},sqe=["dangerouslySetInnerHTML","ticks"];function cle(e,t,r){return(t=iqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iqe(e){var t=oqe(e,"string");return typeof t=="symbol"?t:t+""}function oqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NO(){return NO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NO.apply(null,arguments)}function lqe(e,t){if(e==null)return{};var r,n,a=cqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uqe(e){var t=qa();return N.useEffect(()=>(t(GGe(e)),()=>{t(qGe(e))}),[e,t]),null}var dqe=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,o=N.useRef(null),l=N.useRef(null),c=or(Xae),u=fc(),d=qa(),f="yAxis",h=or(_=>g1(_,f,r,u)),m=or(_=>Qie(_,r)),g=or(_=>a7e(_,r)),x=or(_=>zie(_,f,r,u));if(N.useLayoutEffect(()=>{var _;if(!(a!=="auto"||!m||RL(s)||N.isValidElement(s))){var F=o.current,B=F==null||(_=F.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:T,tickMargin:C}=F.props,S=aqe({ticks:B,label:l.current,labelGapWithTick:5,tickSize:T,tickMargin:C});Math.round(m.width)!==Math.round(S)&&d(KGe({id:r,width:S}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,s,r,a]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,w=lqe(e,sqe);return N.createElement(sp,NO({},w,{ref:o,labelRef:l,scale:h,x:g.x,y:g.y,width:m.width,height:m.height,className:bn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},fqe=e=>{var t,r,n,a,s;return N.createElement(N.Fragment,null,N.createElement(uqe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),N.createElement(dqe,e))},Aqe={allowDataOverflow:Pc.allowDataOverflow,allowDecimals:Pc.allowDecimals,allowDuplicatedCategory:Pc.allowDuplicatedCategory,hide:!1,mirror:Pc.mirror,orientation:Pc.orientation,padding:Pc.padding,reversed:Pc.reversed,scale:Pc.scale,tickCount:Pc.tickCount,type:Pc.type,width:Pc.width,yAxisId:0};class Pg extends N.Component{render(){return N.createElement(fqe,this.props)}}cle(Pg,"displayName","YAxis");cle(Pg,"defaultProps",Aqe);var pI={exports:{}},gI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jq;function hqe(){if(Jq)return gI;Jq=1;var e=Ub();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,o=e.useMemo,l=e.useDebugValue;return gI.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var m=a(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=o(function(){function v(B){if(!y){if(y=!0,w=B,B=f(B),h!==void 0&&g.hasValue){var T=g.value;if(h(T,B))return _=T}return _=B}if(T=_,r(w,B))return T;var C=f(B);return h!==void 0&&h(T,C)?(w=B,T):(w=B,_=C)}var y=!1,w,_,F=d===void 0?null:d;return[function(){return v(u())},F===null?void 0:function(){return v(F())}]},[u,d,f,h]);var x=n(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},gI}var Zq;function mqe(){return Zq||(Zq=1,pI.exports=hqe()),pI.exports}mqe();function pqe(e){e()}function gqe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){pqe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var eK={notify(){},get:()=>[]};function xqe(e,t){let r,n=eK,a=0,s=!1;function o(x){d();const v=n.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),f())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=gqe())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=eK)}function h(){s||(s=!0,d())}function m(){s&&(s=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}var vqe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bqe=vqe(),yqe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",wqe=yqe(),Eqe=()=>bqe||wqe?N.useLayoutEffect:N.useEffect,Nqe=Eqe(),xI=Symbol.for("react-redux-context"),vI=typeof globalThis<"u"?globalThis:{};function Cqe(){if(!N.createContext)return{};const e=vI[xI]??(vI[xI]=new Map);let t=e.get(N.createContext);return t||(t=N.createContext(null),e.set(N.createContext,t)),t}var _qe=Cqe();function Sqe(e){const{children:t,context:r,serverState:n,store:a}=e,s=N.useMemo(()=>{const c=xqe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=N.useMemo(()=>a.getState(),[a]);Nqe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||_qe;return N.createElement(l.Provider,{value:s},t)}var kqe=Sqe,jqe=(e,t)=>t,iM=dt([jqe,In,A1,Pi,ioe,Yh,o9e,Oi],f9e),oM=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},ule=Zu("mouseClick"),dle=pE();dle.startListening({actionCreator:ule,effect:(e,t)=>{var r=e.payload,n=iM(t.getState(),oM(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(m7e({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var CO=Zu("mouseMove"),fle=pE();fle.startListening({actionCreator:CO,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=SL(n,n.tooltip.settings.shared),s=iM(n,oM(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(Zie({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Jie()))}});function Bqe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var tK={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Ale=au({name:"rootProps",initialState:tK,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:tK.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Tqe=Ale.reducer,{updateOptions:Iqe}=Ale.actions,hle=au({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Fqe}=hle.actions,Oqe=hle.reducer,mle=Zu("keyDown"),ple=Zu("focus"),lM=pE();lM.startListening({actionCreator:mle,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(kL(a,v1(r))),l=Yh(r);if(s==="Enter"){var c=wS(r,"axis","hover",String(a.index));t.dispatch(gO({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=i7e(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=o+f*d;if(!(l==null||h>=l.length||h<0)){var m=wS(r,"axis","hover",String(h));t.dispatch(gO({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});lM.startListening({actionCreator:ple,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=wS(r,"axis","hover",String(s));t.dispatch(gO({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Pu=Zu("externalEvent"),gle=pE();gle.startListening({actionCreator:Pu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:Y7e(r),activeDataKey:uoe(r),activeIndex:Mm(r),activeLabel:coe(r),activeTooltipIndex:Mm(r),isTooltipActive:J7e(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Dqe=dt([x1],e=>e.tooltipItemPayloads),Pqe=dt([Dqe,SE,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=t(s,r);return o}}}),xle=Zu("touchMove"),vle=pE();vle.startListening({actionCreator:xle,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=SL(n,n.tooltip.settings.shared);if(a==="axis"){var s=iM(n,oM({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(Zie({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Kae),d=(o=c.getAttribute(Wae))!==null&&o!==void 0?o:void 0,f=Pqe(t.getState(),u,d);t.dispatch(Yie({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var Rqe=vae({brush:eGe,cartesianAxis:WGe,chartData:k9e,errorBars:r$e,graphicalItems:RVe,layout:ePe,legend:QPe,options:E9e,polarAxis:THe,polarOptions:Oqe,referenceElements:oGe,rootProps:Tqe,tooltip:p7e}),Lqe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return CDe({reducer:Rqe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([dle.middleware,fle.middleware,lM.middleware,gle.middleware,vle.middleware]),devTools:{serialize:{replacer:Bqe},name:"recharts-".concat(r)}})};function ble(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=fc(),s=N.useRef(null);if(a)return r;s.current==null&&(s.current=Lqe(t,n));var o=b8;return N.createElement(kqe,{context:o,store:s.current},r)}function yle(e){var{layout:t,width:r,height:n,margin:a}=e,s=qa(),o=fc();return N.useEffect(()=>{o||(s(YDe(t)),s(JDe({width:r,height:n})),s(XDe(a)))},[s,o,t,r,n,a]),null}function wle(e){var t=qa();return N.useEffect(()=>{t(Iqe(e))},[t,e]),null}var Mqe=["children"];function Uqe(e,t){if(e==null)return{};var r,n,a=Qqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function BS(){return BS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BS.apply(null,arguments)}var Hqe={width:"100%",height:"100%"},Vqe=N.forwardRef((e,t)=>{var r=j8(),n=B8(),a=tse();if(!bb(r)||!bb(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0,N.createElement(i8,BS({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Hqe,ref:t}),s)}),zqe=e=>{var{children:t}=e,r=or(b4);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return N.createElement(i8,{width:n,height:a,x:o,y:s},t)},rK=N.forwardRef((e,t)=>{var{children:r}=e,n=Uqe(e,Mqe),a=fc();return a?N.createElement(zqe,null,r):N.createElement(Vqe,BS({ref:t},n),r)});function $qe(){var e=qa(),[t,r]=N.useState(null),n=or(jPe);return N.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;ru(s)&&s!==n&&e(ZDe(s))}},[t,e,n]),r}function nK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gqe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nK(Object(r),!0).forEach(function(n){qqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qqe(e,t,r){return(t=Kqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kqe(e){var t=Wqe(e,"string");return typeof t=="symbol"?t:t+""}function Wqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xqe=N.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,w=qa(),[_,F]=N.useState(null),[B,T]=N.useState(null);T9e();var C=$qe(),S=N.useCallback(O=>{C(O),typeof t=="function"&&t(O),F(O),T(O)},[C,t,F,T]),j=N.useCallback(O=>{w(ule(O)),w(Pu({handler:s,reactEvent:O}))},[w,s]),L=N.useCallback(O=>{w(CO(O)),w(Pu({handler:u,reactEvent:O}))},[w,u]),P=N.useCallback(O=>{w(Jie()),w(Pu({handler:d,reactEvent:O}))},[w,d]),k=N.useCallback(O=>{w(CO(O)),w(Pu({handler:f,reactEvent:O}))},[w,f]),U=N.useCallback(()=>{w(ple())},[w]),Q=N.useCallback(O=>{w(mle(O.key))},[w]),K=N.useCallback(O=>{w(Pu({handler:o,reactEvent:O}))},[w,o]),H=N.useCallback(O=>{w(Pu({handler:l,reactEvent:O}))},[w,l]),q=N.useCallback(O=>{w(Pu({handler:c,reactEvent:O}))},[w,c]),z=N.useCallback(O=>{w(Pu({handler:h,reactEvent:O}))},[w,h]),W=N.useCallback(O=>{w(Pu({handler:x,reactEvent:O}))},[w,x]),ee=N.useCallback(O=>{w(xle(O)),w(Pu({handler:g,reactEvent:O}))},[w,g]),X=N.useCallback(O=>{w(Pu({handler:m,reactEvent:O}))},[w,m]);return N.createElement(poe.Provider,{value:_},N.createElement(Hne.Provider,{value:B},N.createElement("div",{className:bn("recharts-wrapper",n),style:Gqe({position:"relative",cursor:"default",width:y,height:a},v),onClick:j,onContextMenu:K,onDoubleClick:H,onFocus:U,onKeyDown:Q,onMouseDown:q,onMouseEnter:L,onMouseLeave:P,onMouseMove:k,onMouseUp:z,onTouchEnd:X,onTouchMove:ee,onTouchStart:W,ref:S},r)))}),Yqe=["children","className","width","height","style","compact","title","desc"];function Jqe(e,t){if(e==null)return{};var r,n,a=Zqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Zqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ele=N.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:o,compact:l,title:c,desc:u}=e,d=Jqe(e,Yqe),f=fl(d);return l?N.createElement(rK,{otherAttributes:f,title:c,desc:u},r):N.createElement(Xqe,{className:n,style:o,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},N.createElement(rK,{otherAttributes:f,title:c,desc:u,ref:t},N.createElement(cGe,null,r)))}),eKe=["width","height"];function _O(){return _O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_O.apply(null,arguments)}function tKe(e,t){if(e==null)return{};var r,n,a=rKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nKe={top:5,right:5,bottom:5,left:5},aKe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:nKe,reverseStackOrder:!1,syncMethod:"index"},sKe=N.forwardRef(function(t,r){var n,a=rd(t.categoricalChartProps,aKe),{width:s,height:o}=a,l=tKe(a,eKe);if(!bb(s)||!bb(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return N.createElement(ble,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},N.createElement(tle,{chartData:h.data}),N.createElement(yle,{width:s,height:o,layout:a.layout,margin:a.margin}),N.createElement(wle,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),N.createElement(Ele,_O({},l,{width:s,height:o,ref:r})))}),iKe=["axis","item"],T2=N.forwardRef((e,t)=>N.createElement(sKe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:iKe,tooltipPayloadSearcher:PL,categoricalChartProps:e,ref:t}));function oKe(e){var t=qa();return N.useEffect(()=>{t(Fqe(e))},[t,e]),null}var lKe=["width","height","layout"];function SO(){return SO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SO.apply(null,arguments)}function cKe(e,t){if(e==null)return{};var r,n,a=uKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dKe={top:5,right:5,bottom:5,left:5},fKe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:dKe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Nle=N.forwardRef(function(t,r){var n,a=rd(t.categoricalChartProps,fKe),{width:s,height:o,layout:l}=a,c=cKe(a,lKe);if(!bb(s)||!bb(o))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return N.createElement(ble,{preloadedState:{options:m},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},N.createElement(tle,{chartData:a.data}),N.createElement(yle,{width:s,height:o,layout:l,margin:a.margin}),N.createElement(wle,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),N.createElement(oKe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),N.createElement(Ele,SO({width:s,height:o},c,{ref:r})))}),AKe=["item"],hKe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},cM=N.forwardRef((e,t)=>{var r=rd(e,hKe);return N.createElement(Nle,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:AKe,tooltipPayloadSearcher:PL,categoricalChartProps:r,ref:t})}),mKe=["axis"],pKe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},gKe=N.forwardRef((e,t)=>{var r=rd(e,pKe);return N.createElement(Nle,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mKe,tooltipPayloadSearcher:PL,categoricalChartProps:r,ref:t})});const R0=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],aK={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},wy="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",mo="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",Tc="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",bI="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",yI="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",wI="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",_C="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",xKe="from-sky-500 to-indigo-500",vKe="from-emerald-500 to-lime-500",bKe="from-amber-500 to-rose-500",yKe="from-fuchsia-500 to-purple-600",EI={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:Xu,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:bte,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:ts,dot:"bg-emerald-500"}},wKe=e=>{const t=EI[e].icon;return i.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${EI[e].badge}`,children:[i.jsx("span",{className:`h-2 w-2 rounded-full ${EI[e].dot}`}),i.jsx(t,{className:"h-4 w-4"})," ",e]})},EKe=()=>{var W,ee;const[e,t]=N.useState("registro"),[r,n]=N.useState([]),[a,s]=N.useState(aK),[o,l]=N.useState(null),[c,u]=N.useState(null),[d,f]=N.useState(!1),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState(""),[w,_]=N.useState(""),F=N.useMemo(()=>rh[a.dimension]??[],[a.dimension]),B=N.useCallback(async()=>{f(!0);try{const X=await X6e();n(X)}catch(X){console.error(X),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);N.useEffect(()=>{B()},[B]);const T=X=>{const{name:O,value:R}=X.target;s(G=>({...G,[O]:R}))},C=X=>{const O=X.split(",").map(R=>R.trim()).filter(Boolean);s(R=>({...R,indicadores:O}))},S=X=>{const O=X.split(",").map(R=>R.trim()).filter(Boolean);s(R=>({...R,enlaces:O}))},j=()=>{s(aK),l(null),u(null)},L=async X=>{if(X.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensión, subdimensión, descripción y fecha de cumplimiento son obligatorios.");return}try{o?await J6e(o,a):await Y6e(a),await B(),j(),t("seguimiento")}catch(O){console.error(O),u("Error al guardar la acción.")}},P=X=>{l(X.id),s({...X,enlaces:X.enlaces??[],indicadores:X.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},k=async X=>{confirm("¿Eliminar esta acción?")&&(await Z6e(X),await B())},U=N.useMemo(()=>r.filter(X=>{const O=!h||X.responsable.toLowerCase().includes(h.toLowerCase())||X.descripcion.toLowerCase().includes(h.toLowerCase())||X.subdimension.toLowerCase().includes(h.toLowerCase()),R=!g||X.dimension===g,G=!v||X.subdimension===v,Y=!w||X.estado===w;return O&&R&&G&&Y}),[r,h,g,v,w]),Q=N.useMemo(()=>{const X=new Map;return r.forEach(O=>X.set(O.dimension,(X.get(O.dimension)??0)+1)),Array.from(X.entries()).map(([O,R])=>({name:O,value:R}))},[r]),K=N.useMemo(()=>{const X=new Map;return r.forEach(O=>X.set(O.estado,(X.get(O.estado)??0)+1)),Array.from(X.entries()).map(([O,R])=>({name:O,value:R}))},[r]),H=N.useMemo(()=>{const X=r.map(O=>O.avance??0);return X.length?Math.round(X.reduce((O,R)=>O+R,0)/X.length):0},[r]),q=N.useMemo(()=>{const X=new Map;return r.forEach(O=>X.set(O.subdimension,(X.get(O.subdimension)??0)+1)),Array.from(X.entries()).map(([O,R])=>({name:O,value:R})).sort((O,R)=>R.value-O.value).slice(0,6)},[r]),z=()=>{const X=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],O=r.map(ae=>[ae.id,ae.fechaRegistro,ae.responsable,ae.dimension,ae.subdimension,ae.descripcion.replace(/\n/g," "),ae.objetivos??"",(ae.indicadores??[]).join("|"),ae.cobertura??"",ae.fechaInicio??"",ae.fechaCumplimiento,ae.estado,ae.avance??0,(ae.enlaces??[]).join("|")]),R=[X.join(","),...O.map(ae=>ae.map(oe=>`"${String(oe).replace(/"/g,'""')}"`).join(","))].join(`
`),G=new Blob([R],{type:"text/csv;charset=utf-8"}),Y=URL.createObjectURL(G),te=document.createElement("a");te.href=Y,te.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,te.click(),URL.revokeObjectURL(Y)};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),i.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[i.jsx(ng,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(gEe,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensión/Subdimensión."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[i.jsx(bF,{className:"h-4 w-4"})," Refrescar"]}),i.jsxs("button",{onClick:z,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[i.jsx(jh,{className:"h-4 w-4"})," CSV"]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("button",{onClick:()=>t("registro"),className:`${bI} ${e==="registro"?yI:wI}`,children:[i.jsx(Eg,{className:"h-4 w-4"})," Registro"]}),i.jsxs("button",{onClick:()=>t("seguimiento"),className:`${bI} ${e==="seguimiento"?yI:wI}`,children:[i.jsx(Rv,{className:"h-4 w-4"})," Seguimiento"]}),i.jsxs("button",{onClick:()=>t("dashboard"),className:`${bI} ${e==="dashboard"?yI:wI}`,children:[i.jsx(n2e,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&i.jsx("div",{className:wy,children:i.jsxs("form",{onSubmit:L,className:"p-6 md:p-8 space-y-6",children:[c&&i.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[i.jsx(Xu,{className:"h-5 w-5"}),i.jsx("span",{children:c})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Fecha de Registro"}),i.jsxs("div",{className:"relative",children:[i.jsx(oc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),i.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:T,className:mo+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Responsable"}),i.jsxs("div",{className:"relative",children:[i.jsx(a2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),i.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:T,className:mo+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Cobertura (niveles/cursos)"}),i.jsxs("div",{className:"relative",children:[i.jsx(fb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),i.jsx("input",{type:"text",name:"cobertura",placeholder:"2°A, 2°B, 3°Mecánica...",value:a.cobertura??"",onChange:T,className:mo+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Dimensión PME"}),i.jsxs("div",{className:"relative",children:[i.jsx(Z2e,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsxs("select",{name:"dimension",value:a.dimension,onChange:T,className:mo+" pl-10",children:[i.jsx("option",{value:"",children:"Selecciona una dimensión"}),Object.keys(rh).map(X=>i.jsx("option",{value:X,children:X},X))]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:Tc,children:"Subdimensión"}),i.jsxs("div",{className:"relative",children:[i.jsx(Wk,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),i.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:T,className:mo+" pl-10",disabled:!a.dimension,children:[i.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensión":"Primero elige una dimensión"}),F.map(X=>i.jsx("option",{value:X,children:X},X))]})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:Tc,children:"Descripción de la Acción"}),i.jsxs("div",{className:"relative",children:[i.jsx(Vd,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),i.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:T,rows:3,placeholder:"¿Qué se hará? ¿Dónde y con quién?",className:mo+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:Tc,children:"Objetivos (opcional)"}),i.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:T,rows:2,placeholder:"Propósitos pedagógicos",className:mo})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Indicadores (separados por coma)"}),i.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:X=>C(X.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:mo})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Fecha de Inicio"}),i.jsxs("div",{className:"relative",children:[i.jsx(oc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),i.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:T,className:mo+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Fecha de Cumplimiento"}),i.jsxs("div",{className:"relative",children:[i.jsx(oc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:T,className:mo+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Estado"}),i.jsx("select",{name:"estado",value:a.estado,onChange:T,className:mo,children:gH.map(X=>i.jsx("option",{value:X,children:X},X))})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Avance (%)"}),i.jsxs("div",{className:"relative",children:[i.jsx(S_,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:T,className:mo+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:Tc,children:"Enlaces de evidencia (separados por coma)"}),i.jsxs("div",{className:"relative",children:[i.jsx(CH,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:X=>S(X.target.value),placeholder:"https://..., https://...",className:mo+" pl-10"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3",children:[o&&i.jsx("button",{type:"button",onClick:j,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[o?i.jsx(Yc,{className:"h-4 w-4"}):i.jsx(_o,{className:"h-4 w-4"}),o?"Guardar cambios":"Registrar acción"]})]})]})}),e==="seguimiento"&&i.jsx("div",{className:wy,children:i.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"relative md:col-span-2",children:[i.jsx(e1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),i.jsx("input",{className:mo+" pl-10",placeholder:"Buscar por responsable, descripción o subdimensión...",value:h,onChange:X=>m(X.target.value)})]}),i.jsxs("select",{value:g,onChange:X=>{x(X.target.value),y("")},className:mo,children:[i.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(rh).map(X=>i.jsx("option",{value:X,children:X},X))]}),i.jsxs("select",{value:v,onChange:X=>y(X.target.value),className:mo,children:[i.jsx("option",{value:"",children:"Todas las subdimensiones"}),(rh[g]??Object.values(rh).flat()).map(X=>i.jsx("option",{value:X,children:X},X))]}),i.jsxs("select",{value:w,onChange:X=>_(X.target.value),className:mo,children:[i.jsx("option",{value:"",children:"Todos los estados"}),gH.map(X=>i.jsx("option",{value:X,children:X},X))]})]}),i.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensión / Subdimensión"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripción"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[U.map(X=>{var O,R;return i.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[i.jsx("td",{className:"px-4 py-4 align-top text-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((R=(O=X.responsable)==null?void 0:O.slice(0,1))==null?void 0:R.toUpperCase())||"?"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:X.responsable}),i.jsx("div",{className:"text-xs text-slate-500",children:X.cobertura})]})]})}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[i.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:X.dimension}),i.jsx("div",{className:"text-xs text-slate-500",children:X.subdimension})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[i.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:X.descripcion}),X.enlaces&&X.enlaces.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:X.enlaces.map((G,Y)=>i.jsxs("a",{href:G,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[i.jsx(CH,{className:"h-3.5 w-3.5"})," Evidencia ",Y+1]},Y))})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",X.fechaRegistro||"-"]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",X.fechaInicio||"-"]}),i.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",X.fechaCumplimiento]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:wKe(X.estado)}),i.jsxs("td",{className:"px-4 py-4 align-top",children:[i.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(X.avance??0,0),100)}%`}})}),i.jsxs("div",{className:"text-xs text-center mt-1",children:[X.avance??0,"%"]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx("button",{onClick:()=>P(X),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:i.jsx(fR,{className:"h-5 w-5 text-amber-600"})}),i.jsx("button",{onClick:()=>k(X.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:i.jsx(Va,{className:"h-5 w-5 text-rose-600"})})]})})]},X.id)}),U.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:`${_C} ${xKe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(qc,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),i.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),i.jsx("div",{className:`${_C} ${vKe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ts,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),i.jsx("div",{className:"text-2xl font-black",children:((W=K.find(X=>X.name==="Cumplida"))==null?void 0:W.value)??0})]})]})}),i.jsx("div",{className:`${_C} ${bKe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(bte,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),i.jsx("div",{className:"text-2xl font-black",children:((ee=K.find(X=>X.name==="En Proceso"))==null?void 0:ee.value)??0})]})]})}),i.jsx("div",{className:`${_C} ${yKe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(S_,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),i.jsxs("div",{className:"text-2xl font-black",children:[H,"%"]})]})]})})]}),i.jsxs("div",{className:wy+" p-5",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensión"})}),i.jsx("div",{className:"h-64",children:i.jsx(dh,{width:"100%",height:"100%",children:i.jsxs(T2,{data:Q,children:[i.jsx(B2,{strokeDasharray:"3 3"}),i.jsx(Dg,{dataKey:"name",hide:!0}),i.jsx(Pg,{allowDecimals:!1}),i.jsx(uh,{}),i.jsx(Bb,{dataKey:"value",children:Q.map((X,O)=>i.jsx(Um,{fill:R0[O%R0.length]},O))})]})})}),i.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:Q.map((X,O)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:R0[O%R0.length]}}),i.jsx("span",{className:"flex-1",children:X.name}),i.jsx("span",{className:"font-semibold",children:X.value})]},O))})]}),i.jsxs("div",{className:wy+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribución por estado"}),i.jsx("div",{className:"h-64",children:i.jsx(dh,{width:"100%",height:"100%",children:i.jsxs(cM,{children:[i.jsx(V4,{data:K,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:K.map((X,O)=>i.jsx(Um,{fill:R0[O%R0.length]},O))}),i.jsx(l1,{}),i.jsx(uh,{})]})})})]}),i.jsxs("div",{className:wy+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones más trabajadas"}),i.jsxs("ul",{className:"space-y-2",children:[q.map((X,O)=>i.jsxs("li",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:R0[O%R0.length]}}),X.name]}),i.jsx("span",{className:"font-semibold",children:X.value})]},O)),q.length===0&&i.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},NKe="modulepreload",CKe=function(e){return"/"+e},sK={},Ti=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(r.map(u=>{if(u=CKe(u),u in sK)return;sK[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":NKe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},z4="presentacionesDidacticas",_Ke=async(e,t)=>{const r=nr(mt(Nr,z4)),n={...e,id:r.id,userId:t,fechaCreacion:new Date().toISOString(),estado:"generando"};return await yi(r,n),r.id},iK=async(e,t)=>{const r=nr(Nr,z4,e);await Tl(r,t)},SKe=async e=>{await Ca(nr(Nr,z4,e))},kKe=(e,t)=>{const r=Ht(mt(Nr,z4),xr("userId","==",e),ar("fechaCreacion","desc"));return mr(r,n=>{const a=n.docs.map(s=>s.data());t(a)})},jKe=async e=>{let t=null;try{const r=ll.currentUser;if(!r)throw new Error("Usuario no autenticado. Debe iniciar sesión para generar presentaciones.");console.log("Estado de autenticación:",{isLoggedIn:!!r,uid:r.uid,email:r.email});const n=await r.getIdToken(!0);console.log("Token actualizado correctamente, longitud:",n.length);const a=Uu(sR,"generateSlides"),s={tema:e.tema,asignatura:e.asignatura,objetivosAprendizaje:e.objetivosAprendizaje,curso:e.curso,numDiapositivas:e.numDiapositivas,estilo:e.estilo,incluirImagenes:e.incluirImagenes,contenidoFuente:e.contenidoFuente||"",enlaces:e.enlaces||[],planificacionId:e.planificacionId,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,userId:r.uid};t=await _Ke({...e,userId:r.uid,fechaCreacion:new Date().toISOString(),estado:"generando",urlPresentacion:""},r.uid),console.log("Presentación guardada con ID:",t),console.log("Enviando solicitud a generateSlides con usuario:",r.uid),console.log("Datos enviados:",s);const o=await a(s);console.log("Respuesta de función:",o);const l=o.data;if(l.presentacionId&&l.url)try{const c={estado:"completada",urlPresentacion:l.url};l.demoMode&&(c.mensajeError="NOTA: Esta es una versión de demostración. La presentación no existe realmente."),await iK(t,c)}catch(c){console.warn("Error al actualizar la presentación en Firestore:",c)}return l}catch(r){if(console.error("Error al generar presentación:",r),console.error("Código:",r==null?void 0:r.code,"Mensaje:",r==null?void 0:r.message,"Detalles:",r==null?void 0:r.details),t)try{await iK(t,{estado:"error",mensajeError:(r==null?void 0:r.message)||"Error desconocido al generar la presentación"}),console.warn(`Presentación ${t} marcada como fallida`)}catch(n){console.error("Error al actualizar el estado de la presentación:",n)}throw r}},NI=async()=>{var t,r,n,a;const e=ll.currentUser;if(!e)throw new Error("Usuario no autenticado. Debe iniciar sesión para verificar la autorización.");try{const s=await e.getIdToken(),o=await fetch("https://us-central1-plania-clase.cloudfunctions.net/checkGoogleSlidesAuth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({})});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const l=await o.json();return{isAuthorized:l.isAuthorized||!1,message:l.message||"Estado de autorización desconocido"}}catch(s){if(console.error("Error al verificar autorización de Google Slides:",s),(t=s.message)!=null&&t.includes("cors")||(r=s.message)!=null&&r.includes("blocked")||(n=s.message)!=null&&n.includes("CORS")||(a=s.message)!=null&&a.includes("fetch")){console.warn("Error de red detectado, usando método alternativo para verificar autorización");try{const o=Ht(mt(Nr,"userTokens"),xr("userId","==",e.uid)),l=await qr(o);return{isAuthorized:!l.empty,message:l.empty?"Usuario no ha autorizado Google Slides (verificación directa)":"Usuario autorizado para Google Slides (verificación directa)"}}catch(o){return console.error("Error en verificación alternativa:",o),{isAuthorized:!1,message:"Error al verificar autorización"}}}return{isAuthorized:!1,message:`Error al verificar autorización: ${s.message||"Error desconocido"}`}}},BKe=()=>{const[e,t]=N.useState(!1),[r,n]=N.useState(null),a=async()=>{t(!0);try{const o=await Uu(sR,"testGemini")();n(o.data)}catch(s){console.error("Error calling testGemini:",s),n({success:!1,error:s.message||"Error desconocido",type:"client_error"})}t(!1)};return i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"🧪 Prueba de Gemini AI"}),i.jsx("button",{onClick:a,disabled:e,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 mb-4",children:e?"Probando...":"Probar Gemini 1.5 Pro"}),r&&i.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Resultado:"}),i.jsx("pre",{className:"text-sm overflow-auto max-h-96",children:JSON.stringify(r,null,2)}),r.success?i.jsx("div",{className:"mt-2 text-green-600",children:"✅ Gemini AI está funcionando correctamente"}):i.jsxs("div",{className:"mt-2 text-red-600",children:["❌ Problema detectado: ",r.error]})]})]})},TKe=({estilo:e,tema:t="Ejemplo de Presentación"})=>{const n=(()=>{switch(e){case"sobrio":return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]};case"visual":return{colores:{fondo:"bg-blue-50",fondoDiapo:"bg-white",titulo:"text-blue-800",texto:"text-slate-600",acento:"bg-blue-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🎨",descripcion:"Dinámico y colorido, con énfasis en elementos gráficos e infografías",ejemplo:["Mayor uso de elementos visuales","Diagramas y representaciones gráficas","Paleta de colores vibrantes"]};case"academico":return{colores:{fondo:"bg-amber-50",fondoDiapo:"bg-white",titulo:"text-amber-800",texto:"text-slate-700",acento:"bg-amber-100"},fuentes:{titulo:"font-serif",texto:"font-serif"},iconos:"📚",descripcion:"Formal y riguroso, con énfasis en conceptos teóricos",ejemplo:["Estructura académica formal","Referencias y citas bibliográficas","Énfasis en conceptos teóricos"]};case"interactivo":return{colores:{fondo:"bg-green-50",fondoDiapo:"bg-white",titulo:"text-green-800",texto:"text-slate-600",acento:"bg-green-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🤝",descripcion:"Participativo y colaborativo, con múltiples actividades",ejemplo:["Preguntas y actividades prácticas","Espacios para participación","Dinámicas grupales sugeridas"]};case"profesional":return{colores:{fondo:"bg-indigo-50",fondoDiapo:"bg-white",titulo:"text-indigo-800",texto:"text-slate-600",acento:"bg-indigo-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💼",descripcion:"Corporativo y práctico, enfocado en aplicaciones reales",ejemplo:["Diseño corporativo y estructurado","Casos de estudio prácticos","Aplicaciones en contexto laboral"]};case"creativo":return{colores:{fondo:"bg-purple-50",fondoDiapo:"bg-white",titulo:"text-purple-800",texto:"text-slate-600",acento:"bg-purple-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💡",descripcion:"Innovador y atractivo, estimula la imaginación",ejemplo:["Diseño creativo no convencional","Elementos visuales llamativos","Enfoque innovador del contenido"]};case"minimalista":return{colores:{fondo:"bg-gray-50",fondoDiapo:"bg-white",titulo:"text-gray-800",texto:"text-gray-600",acento:"bg-gray-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"⚪",descripcion:"Simple y esencial, centrado en lo más importante",ejemplo:["Diseño muy simplificado","Amplio espacio en blanco","Solo información esencial"]};default:return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]}}})();return i.jsxs("div",{className:`p-4 rounded-lg ${n.colores.fondo} transition-all`,children:[i.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Vista previa: Estilo ",e]}),i.jsx("p",{className:"text-sm text-gray-500 mb-3",children:n.descripcion}),i.jsxs("div",{className:"shadow-md rounded-lg overflow-hidden",children:[i.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo} border-b border-gray-200`,children:[i.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-lg font-bold mb-2`,children:t}),i.jsxs("div",{className:`${n.fuentes.texto} ${n.colores.texto} text-sm space-y-2`,children:[i.jsx("p",{children:"Diapositiva de título con subtítulo"}),i.jsx("div",{className:`w-2/3 h-2 ${n.colores.acento} rounded mt-2`})]})]}),i.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo}`,children:[i.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-md font-bold mb-2`,children:"Características principales"}),i.jsx("ul",{className:`${n.fuentes.texto} ${n.colores.texto} text-xs space-y-1 list-disc pl-4`,children:n.ejemplo.map((a,s)=>i.jsx("li",{children:a},s))}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx("span",{className:"text-lg",children:n.iconos})})]})]})]})},IKe=({userId:e,planificaciones:t})=>{const[r,n]=N.useState("presentaciones"),[a,s]=N.useState(null),[o,l]=N.useState({tema:"",objetivosAprendizaje:[],numDiapositivas:8,estilo:"sobrio",incluirImagenes:!0,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,contenidoFuente:"",enlaces:""}),[c,u]=N.useState(!1),[d,f]=N.useState([]),[h,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(null),[w,_]=N.useState({isAuthorized:!1,message:"Verificando autorización...",checking:!0});N.useEffect(()=>e?kKe(e,U=>{f(U)}):void 0,[e]),N.useEffect(()=>{const k=async()=>{if(e)try{_(q=>({...q,checking:!0}));const H=await NI();_({isAuthorized:H.isAuthorized,message:H.message,checking:!1})}catch(H){_({isAuthorized:!1,message:`Error: ${H.message||"No se pudo verificar la autorización"}`,checking:!1})}};k();const U=setTimeout(()=>{_(H=>H.checking?{isAuthorized:!1,message:"Timeout al verificar autorización",checking:!1}:H)},1e4);if(new URLSearchParams(window.location.search).get("auth")==="success"){const H=setTimeout(()=>{k()},2e3);return()=>{clearTimeout(H),clearTimeout(U)}}return()=>clearTimeout(U)},[e]),N.useEffect(()=>{const k=async()=>{if(new URLSearchParams(window.location.search).get("auth")==="success"&&!w.isAuthorized)try{_(H=>({...H,checking:!0}));const K=await NI();_({isAuthorized:K.isAuthorized,message:K.message,checking:!1})}catch(K){_({isAuthorized:!1,message:`Error: ${K.message||"No se pudo verificar la autorización"}`,checking:!1})}};return window.addEventListener("popstate",k),()=>window.removeEventListener("popstate",k)},[w.isAuthorized]),N.useEffect(()=>{a&&("nombreUnidad"in a?l(k=>({...k,tema:a.nombreUnidad})):"nombreClase"in a&&l(k=>({...k,tema:a.nombreClase})))},[a]);const F=()=>{var k;if(!a)return[];if("lecciones"in a){const U=[];return(k=a.lecciones)==null||k.forEach(Q=>{Q.objetivosAprendizaje&&!U.includes(Q.objetivosAprendizaje)&&U.push(Q.objetivosAprendizaje)}),U}else if(a.detalleLeccionOrigen)return[a.detalleLeccionOrigen.objetivosAprendizaje];return[]},B=k=>{const{name:U,value:Q,type:K}=k.target;if(K==="checkbox"){const H=k.target.checked;l(q=>({...q,[U]:H}))}else l(H=>({...H,[U]:Q}))},T=k=>{const U=Array.from(k.target.selectedOptions,Q=>Q.value);l(Q=>({...Q,objetivosAprendizaje:U}))},C=async k=>{if(k.preventDefault(),!a){y("Debes seleccionar una planificación");return}if(o.objetivosAprendizaje.length===0){y("Debes seleccionar al menos un objetivo de aprendizaje");return}y(null),x(!0);try{const U={planificacionId:a.id,tema:o.tema,curso:a.nivel,asignatura:a.asignatura,objetivosAprendizaje:o.objetivosAprendizaje,numDiapositivas:o.numDiapositivas,estilo:o.estilo,incluirImagenes:o.incluirImagenes,contenidoFuente:o.contenidoFuente,enlaces:o.enlaces?o.enlaces.split(/[\s,]+/).filter(Boolean):[]};console.log("Datos para presentación:",U);const Q=await jKe({...U,userId:e});console.log("Resultado de la función:",Q),Q&&Q.url&&console.log("Presentación generada:",Q.url)}catch(U){console.error("Error al generar presentación:",U);const Q=(U==null?void 0:U.message)||"Error desconocido",K=(U==null?void 0:U.code)||"unknown";y(`Error (${K}): ${Q}`)}finally{x(!1)}},S=async k=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta presentación?"))try{m(!0),await SKe(k)}catch(U){console.error("Error al eliminar presentación:",U),y("Error al eliminar la presentación")}finally{m(!1)}},j=()=>i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Generar Presentación con IA"}),i.jsxs("form",{onSubmit:C,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Seleccionar Planificación"}),i.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",value:(a==null?void 0:a.id)||"",onChange:k=>{const U=t.find(Q=>Q.id===k.target.value);s(U||null)},required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una planificación"}),i.jsx("optgroup",{label:"Unidades",children:t.filter(k=>k.tipo==="Unidad").map(k=>i.jsxs("option",{value:k.id,children:[k.tipo==="Unidad"?k.nombreUnidad:""," - ",k.asignatura," (",k.nivel,")"]},k.id))}),i.jsx("optgroup",{label:"Clases",children:t.filter(k=>k.tipo==="Clase").map(k=>i.jsxs("option",{value:k.id,children:[k.tipo==="Clase"?k.nombreClase:""," - ",k.asignatura," (",k.nivel,")"]},k.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),i.jsx("input",{type:"text",name:"tema",value:o.tema,onChange:B,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Objetivos de Aprendizaje (selecciona al menos uno)"}),i.jsx("select",{multiple:!0,name:"objetivosAprendizaje",value:o.objetivosAprendizaje,onChange:T,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",size:3,required:!0,children:F().map((k,U)=>i.jsx("option",{value:k,children:k},U))}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mantén presionado Ctrl (o Cmd) para seleccionar múltiples opciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nº de diapositivas"}),i.jsx("input",{type:"number",name:"numDiapositivas",value:o.numDiapositivas,onChange:B,min:4,max:20,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estilo de Presentación"}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-2",children:[i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="sobrio"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"sobrio"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"🎭"})}),i.jsx("span",{className:"font-medium",children:"Sobrio"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Elegante y minimalista"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="visual"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"visual"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"🎨"})}),i.jsx("span",{className:"font-medium",children:"Visual"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Colorido y gráfico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="academico"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"academico"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"📚"})}),i.jsx("span",{className:"font-medium",children:"Académico"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formal y riguroso"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="interactivo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"interactivo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"🤝"})}),i.jsx("span",{className:"font-medium",children:"Interactivo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Participativo y dinámico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="profesional"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"profesional"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"💼"})}),i.jsx("span",{className:"font-medium",children:"Profesional"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Corporativo y práctico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="creativo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"creativo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"💡"})}),i.jsx("span",{className:"font-medium",children:"Creativo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Innovador y atractivo"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="minimalista"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"minimalista"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"⚪"})}),i.jsx("span",{className:"font-medium",children:"Minimalista"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Simple y esencial"})]})})]}),i.jsxs("button",{type:"button",onClick:()=>u(!0),className:"mt-3 w-full flex items-center justify-center gap-2 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-800/40 transition-colors",children:[i.jsx(vte,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver ejemplo del estilo seleccionado"})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[i.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-lg font-medium",children:["Vista previa de estilo: ",o.estilo]}),i.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(uA,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-5",children:[i.jsx(TKe,{estilo:o.estilo,tema:o.tema||"Tema de la presentación"}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-medium mb-2",children:["Características del estilo ",o.estilo]}),i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.estilo==="sobrio"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño elegante y profesional"}),i.jsx("li",{children:"Colores neutros y tipografía clásica"}),i.jsx("li",{children:"Énfasis en la claridad y simplicidad"}),i.jsx("li",{children:"Ideal para presentaciones formales"})]}),o.estilo==="visual"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño colorido y dinámico"}),i.jsx("li",{children:"Mayor uso de gráficos e imágenes"}),i.jsx("li",{children:"Énfasis en elementos visuales e infografías"}),i.jsx("li",{children:"Ideal para mantener la atención visual"})]}),o.estilo==="academico"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño formal y riguroso"}),i.jsx("li",{children:"Espacio para citas y referencias"}),i.jsx("li",{children:"Énfasis en conceptos teóricos"}),i.jsx("li",{children:"Ideal para contenido académico complejo"})]}),o.estilo==="interactivo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño participativo"}),i.jsx("li",{children:"Incluye actividades y preguntas"}),i.jsx("li",{children:"Énfasis en la participación activa"}),i.jsx("li",{children:"Ideal para clases dinámicas"})]}),o.estilo==="profesional"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño corporativo"}),i.jsx("li",{children:"Elementos de casos prácticos"}),i.jsx("li",{children:"Énfasis en aplicaciones reales"}),i.jsx("li",{children:"Ideal para formación profesional"})]}),o.estilo==="creativo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño no convencional y llamativo"}),i.jsx("li",{children:"Elementos visuales originales"}),i.jsx("li",{children:"Énfasis en despertar la imaginación"}),i.jsx("li",{children:"Ideal para temas creativos o artísticos"})]}),o.estilo==="minimalista"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño extremadamente simplificado"}),i.jsx("li",{children:"Amplio espacio en blanco"}),i.jsx("li",{children:"Énfasis en lo esencial"}),i.jsx("li",{children:"Ideal para conceptos claros y concisos"})]})]})]})]}),i.jsx("div",{className:"p-4 bg-gray-100 dark:bg-slate-700 flex justify-end",children:i.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Cerrar vista previa"})})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenes",name:"incluirImagenes",checked:o.incluirImagenes,onChange:k=>l(U=>({...U,incluirImagenes:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenes",className:"text-sm text-gray-700 dark:text-gray-300",children:"🖼️ Incluir sugerencias para imágenes educativas"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirActividades",name:"incluirActividades",checked:o.incluirActividades||!1,onChange:k=>l(U=>({...U,incluirActividades:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirActividades",className:"text-sm text-gray-700 dark:text-gray-300",children:"✏️ Incluir actividades y ejercicios prácticos"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirEvaluacion",name:"incluirEvaluacion",checked:o.incluirEvaluacion||!1,onChange:k=>l(U=>({...U,incluirEvaluacion:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirEvaluacion",className:"text-sm text-gray-700 dark:text-gray-300",children:"📝 Incluir diapositiva de evaluación/reflexión"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"formatoPedagogico",name:"formatoPedagogico",checked:o.formatoPedagogico||!0,onChange:k=>l(U=>({...U,formatoPedagogico:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"formatoPedagogico",className:"text-sm text-gray-700 dark:text-gray-300",children:"📚 Aplicar estructura pedagógica avanzada"})]})]}),i.jsxs("div",{className:"hidden",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenesOld",name:"incluirImagenesOld",checked:o.incluirImagenes,onChange:k=>l(U=>({...U,incluirImagenes:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenesOld",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Incluir imágenes libres de derechos"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto/recursos fuente (opcional)"}),i.jsx("textarea",{name:"contenidoFuente",value:o.contenidoFuente,onChange:B,rows:3,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"Pega aquí cualquier contenido de referencia para la presentación..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Enlaces (opcional)"}),i.jsx("input",{type:"text",name:"enlaces",value:o.enlaces,onChange:B,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"URLs separadas por comas o espacios"})]}),v&&i.jsx("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:v}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:g||!a,className:"w-full flex items-center justify-center gap-2 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?i.jsxs(i.Fragment,{children:[i.jsx(El,{className:"w-4 h-4 animate-spin"}),"Generando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(vF,{className:"w-4 h-4"}),"Generar Presentación"]})})})]})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Mis Presentaciones"}),i.jsx("div",{className:"space-y-4",children:h?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(El,{className:"w-8 h-8 animate-spin text-indigo-500"})}):d.length===0?i.jsxs("div",{className:"text-center py-8 space-y-4",children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No has generado presentaciones todavía"}),i.jsx("div",{className:"text-sm",children:w.checking?i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[i.jsx(El,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Verificando autorización..."})]}):i.jsxs("div",{className:`flex items-center justify-center gap-2 ${w.isAuthorized?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:[i.jsx("span",{children:w.isAuthorized?"✅":"⚠️"}),i.jsx("span",{children:w.message})]})}),!w.checking&&!w.isAuthorized&&i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:()=>{const k=`https://us-central1-plania-clase.cloudfunctions.net/slidesAuthorize?userId=${e}`;window.location.href=k},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(AB,{className:"w-4 h-4"}),i.jsx("span",{children:"Autorizar Google Slides"})]})}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:async()=>{try{_(U=>({...U,checking:!0}));const k=await NI();_({isAuthorized:k.isAuthorized,message:k.message,checking:!1})}catch(k){_({isAuthorized:!1,message:`Error: ${k.message||"No se pudo verificar la autorización"}`,checking:!1})}},disabled:w.checking,className:`flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors ${w.isAuthorized?"text-green-600 hover:text-green-800 border border-green-300 hover:bg-green-50":"text-gray-600 hover:text-gray-800 border border-gray-300 hover:bg-gray-50"}`,children:[w.checking?i.jsx(El,{className:"w-3 h-3 animate-spin"}):i.jsx("span",{children:"🔄"}),i.jsx("span",{children:"Verificar estado"})]})})]}):d.map(k=>i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:k.tema}),k.estado==="generando"?i.jsxs("span",{className:"flex items-center text-amber-500 text-xs gap-1",children:[i.jsx(El,{className:"w-3 h-3 animate-spin"}),"Generando"]}):k.estado==="error"?i.jsxs("span",{className:"flex items-center text-red-500 text-xs gap-1",children:[i.jsx(uA,{className:"w-3 h-3"}),"Error"]}):i.jsxs("span",{className:"flex items-center text-green-500 text-xs gap-1",children:[i.jsx(ts,{className:"w-3 h-3"}),"Lista"]})]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[k.asignatura," - ",k.curso]}),i.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4 mt-2 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(oc,{className:"w-3 h-3"}),new Date(k.fechaCreacion).toLocaleDateString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(hB,{className:"w-3 h-3"}),k.numDiapositivas," diapositivas"]}),i.jsxs("span",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full ${k.estilo==="sobrio"?"bg-slate-100 text-slate-700":k.estilo==="visual"?"bg-blue-100 text-blue-700":k.estilo==="academico"?"bg-amber-100 text-amber-700":k.estilo==="interactivo"?"bg-green-100 text-green-700":k.estilo==="profesional"?"bg-indigo-100 text-indigo-700":k.estilo==="creativo"?"bg-purple-100 text-purple-700":(k.estilo==="minimalista","bg-gray-100 text-gray-700")}`,children:[k.estilo==="sobrio"&&"🎭",k.estilo==="visual"&&"🎨",k.estilo==="academico"&&"📚",k.estilo==="interactivo"&&"🤝",k.estilo==="profesional"&&"💼",k.estilo==="creativo"&&"💡",k.estilo==="minimalista"&&"⚪",k.estilo]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Objetivos de Aprendizaje:"}),i.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 dark:text-gray-400",children:k.objetivosAprendizaje.map((U,Q)=>i.jsx("li",{className:"truncate",children:U.length>60?U.substring(0,57)+"...":U},Q))})]}),k.mensajeError&&i.jsx("div",{className:"mt-2 text-xs italic text-amber-600 dark:text-amber-400",children:k.mensajeError}),i.jsxs("div",{className:"mt-3 flex justify-between",children:[k.estado==="completada"?i.jsxs(i.Fragment,{children:[i.jsxs("a",{href:k.esDemoMode||k.urlPresentacion.includes("example.com")?"#":k.urlPresentacion,onClick:U=>{(k.esDemoMode||k.urlPresentacion.includes("example.com"))&&(U.preventDefault(),alert("Esta es una versión de demostración. En la versión final, aquí verás una presentación real de Google Slides."))},target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-sm ${k.esDemoMode||k.urlPresentacion.includes("example.com")?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,children:[i.jsx(AB,{className:"w-3 h-3"}),k.esDemoMode||k.urlPresentacion.includes("example.com")?"Ver Demo":"Abrir en Google Slides"]}),k.esDemoMode&&k.urlAutorizacion&&i.jsxs("a",{href:k.urlAutorizacion,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center gap-1 text-sm text-green-600 hover:text-green-800",children:[i.jsx(AB,{className:"w-3 h-3"}),"Autorizar Google Slides"]})]}):i.jsx("span",{className:"text-gray-400 text-sm italic",children:"En progreso..."}),i.jsx("button",{onClick:()=>S(k.id),className:"text-red-500 hover:text-red-700",children:i.jsx(Va,{className:"w-4 h-4"})})]})]},k.id))})]})})]}),L=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(wH,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Sección de Guías Didácticas"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]}),P=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(hB,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Repositorio de Recursos"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]});return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-1",children:i.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>n("presentaciones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="presentaciones"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(vF,{className:"w-4 h-4"}),i.jsx("span",{children:"Presentaciones"})]}),i.jsxs("button",{onClick:()=>n("guias"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="guias"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(wH,{className:"w-4 h-4"}),i.jsx("span",{children:"Guías"})]}),i.jsxs("button",{onClick:()=>n("recursos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="recursos"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(hB,{className:"w-4 h-4"}),i.jsx("span",{children:"Recursos"})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx(BKe,{})}),i.jsxs("div",{children:[r==="presentaciones"&&j(),r==="guias"&&L(),r==="recursos"&&P()]})]})},BE="planificaciones",Cle="actividades_calendario",uM=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion,...t.detallesLeccion?{detallesLeccion:Array.isArray(t.detallesLeccion)?t.detallesLeccion:[]}:{}}},_le=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:cr.fromDate(new Date),fechaActualizacion:cr.fromDate(new Date)};return(await mn(mt(tt,BE),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},Sle=async(e,t,r)=>{try{const n=nr(tt,BE,e),a=await kh(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Tl(n,{...t,fechaActualizacion:cr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},kle=async(e,t)=>{try{const r=nr(tt,BE,e),n=await kh(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await Ca(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},FKe=async e=>{try{const t=Ht(mt(tt,BE),xr("userId","==",e),ar("fechaCreacion","desc"));return(await qr(t)).docs.map(uM)}catch(t){return console.error("Error al obtener planificaciones:",t),[]}},jle=(e,t)=>{const r=Ht(mt(tt,BE),xr("userId","==",e),ar("fechaCreacion","desc"));return mr(r,n=>{try{const a=n.docs.map(uM);console.log(`Recibiendo ${a.length} planificaciones del usuario ${e}`);const s=a.map(o=>o.tipo==="Unidad"&&!Array.isArray(o.detallesLeccion)?(console.warn(`Planificación ${o.id} tiene detallesLeccion inválidos, corrigiendo.`),{...o,detallesLeccion:[]}):o);t(s)}catch(a){console.error("Error procesando datos de planificaciones:",a),t([])}},n=>{console.error("Error en suscripción a planificaciones:",n)})},Ble=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:cr.fromDate(new Date),fechaActualizacion:cr.fromDate(new Date)};return(await mn(mt(tt,Cle),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},Tle=(e,t)=>{const r=Ht(mt(tt,Cle),xr("userId","==",e),ar("fecha","desc"));return mr(r,n=>{const a=n.docs.map(uM);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},kO=Object.freeze(Object.defineProperty({__proto__:null,deletePlanificacion:kle,getPlanificacionesByUser:FKe,saveActividad:Ble,savePlanificacion:_le,subscribeToActividades:Tle,subscribeToPlanificaciones:jle,updatePlanificacion:Sle},Symbol.toStringTag,{value:"Module"})),OKe=(e,t)=>{const[r,n]=N.useState([]),[a,s]=N.useState(!0),[o,l]=N.useState(null),c=N.useCallback(async()=>{if(!e){console.warn("🛠️ cargarPlanificacionesDirectamente: userId nulo, no se pueden cargar planificaciones"),s(!1),l("No se pudo determinar la identidad del usuario"),n([]);return}try{console.log(`🛠️ Cargando planificaciones directamente para ${e}`);const{getPlanificacionesByUser:m}=await Ti(async()=>{const{getPlanificacionesByUser:v}=await Promise.resolve().then(()=>kO);return{getPlanificacionesByUser:v}},void 0),g=await m(e);console.log(`🛠️ Obtenidas ${g.length} planificaciones directamente de Firestore`);const x=g.map(v=>v.tipo==="Unidad"&&!Array.isArray(v.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${v.id}`),{...v,detallesLeccion:[]}):v);n(x),s(!1)}catch(m){console.error("🛠️ Error cargando planificaciones directamente:",m),l(m instanceof Error?m.message:"Error al cargar planificaciones directamente"),s(!1)}},[e]);N.useEffect(()=>{if(!e){console.log("🛠️ usePlanificaciones: userId nulo o vacío, no se cargarán planificaciones"),s(!1),l("ID de usuario no disponible"),n([]);return}console.log(`🛠️ usePlanificaciones: Cargando planificaciones para usuario ${e}`),s(!0),l(null);let m=null;try{m=jle(e,x=>{if(console.log(`🛠️ usePlanificaciones: Recibidos ${x.length} documentos por suscripción`),x.length===0){c();return}const v=x.map(y=>y.tipo==="Unidad"&&!Array.isArray(y.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${y.id}`),{...y,detallesLeccion:[]}):y);n(v),s(!1)})}catch(x){console.error("🛠️ Error en hook usePlanificaciones:",x),l(x instanceof Error?x.message:"Error al cargar planificaciones"),c()}const g=setTimeout(()=>{a&&r.length===0&&(console.log("🛠️ Timeout: cargando planificaciones directamente como respaldo"),c())},5e3);return()=>{m&&m(),clearTimeout(g)}},[e,c]);const u=async m=>{try{return l(null),await _le(m,e)}catch(g){throw l(g.message||"Error al guardar planificación"),g}},d=async(m,g)=>{try{l(null),await Sle(m,g,e)}catch(x){throw l(x.message||"Error al actualizar planificación"),x}},f=async m=>{try{l(null),await kle(m,e)}catch(g){throw l(g.message||"Error al eliminar planificación"),g}},h=N.useCallback(async()=>{try{if(!e)return{status:"error",message:"No hay usuario identificado. Datos del usuario no disponibles."};console.log("📊 Diagnóstico - ID de usuario:",e);const{getPlanificacionesByUser:m}=await Ti(async()=>{const{getPlanificacionesByUser:y}=await Promise.resolve().then(()=>kO);return{getPlanificacionesByUser:y}},void 0),g=await m(e),x=g.filter(y=>y.tipo==="Unidad"),v=x.filter(y=>!Array.isArray(y.detallesLeccion)||y.detallesLeccion===void 0);if(console.log(`📊 Diagnóstico - Total planificaciones: ${g.length}, Unidades: ${x.length}, Inválidas: ${v.length}`),v.length>0){const{updateDoc:y,doc:w}=await Ti(async()=>{const{updateDoc:F,doc:B}=await Promise.resolve().then(()=>ub);return{updateDoc:F,doc:B}},void 0),{db:_}=await Ti(async()=>{const{db:F}=await Promise.resolve().then(()=>hR);return{db:F}},void 0);for(const F of v)await y(w(_,"planificaciones",F.id),{detallesLeccion:[]});return{status:"repaired",message:`Se repararon ${v.length} planificaciones de ${x.length} totales.`}}else if(x.length===0)return{status:"empty",message:`No se encontraron planificaciones de unidad para el usuario ${e}. Cree una nueva planificación.`};return{status:"ok",message:`Todo correcto. ${x.length} planificaciones de unidad encontradas.`}}catch(m){return console.error("📊 Error en diagnóstico:",m),{status:"error",message:`Error: ${m instanceof Error?m.message:"Desconocido"}`}}},[e]);return{planificaciones:r,loading:a,error:o,save:u,update:d,remove:f,diagnosticarYReparar:h}},jO=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},DKe=e=>{const[t,r]=N.useState([]),[n,a]=N.useState(!0),[s,o]=N.useState(null);N.useEffect(()=>{if(!e){a(!1);return}a(!0);try{return Tle(e,u=>{r(u),a(!1)})}catch(c){o(c instanceof Error?c.message:"Error al cargar actividades"),a(!1)}},[e]);const l=N.useCallback(async c=>{try{return o(null),await Ble(c,e)}catch(u){throw o(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:l}},PKe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=N.useState(e),o=c=>{s({...a,[c.target.name]:c.target.value})},l=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),i.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),i.jsx("textarea",{name:c,value:u,onChange:o,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),i.jsxs("button",{onClick:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},RKe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,o]=N.useState(e.progreso??0),[l,c]=N.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);o(f),c(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),o(e.progreso??0)}finally{c(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:l||n}),i.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),l&&i.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),i.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),i.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-md",children:i.jsxs("p",{className:"font-medium",children:[i.jsx("strong",{children:"Actividades sugeridas:"})," ",d.actividades]})}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),i.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},LKe=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,o]=N.useState(e),[l,c]=N.useState(!1);N.useEffect(()=>{console.log("Plan inicial:",e.momentosClase);const h=v=>{if(typeof v=="object"&&v!==null)return JSON.stringify(v);if(typeof v=="string")try{if(v.trim().startsWith("{")){const y=JSON.parse(v);return JSON.stringify(y)}}catch(y){console.log("No es JSON válido:",y)}return String(v)},m=h(e.momentosClase.inicio),g=h(e.momentosClase.desarrollo),x=h(e.momentosClase.cierre);console.log("Contenido procesado - inicio:",m),o(v=>({...v,momentosClase:{inicio:m,desarrollo:g,cierre:x}}))},[e]);const u=h=>{const{name:m,value:g}=h.target,[x,v]=m.split(".");o(x==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[v]:g}}):y=>({...y,[m]:g}))},d=async()=>{c(!0);try{await r((()=>{const m={...s};return Object.keys(m.momentosClase).forEach(g=>{const x=m.momentosClase[g];if(typeof x=="string"&&(x.includes("TIEMPO:")||x.includes("OBJETIVO:")||x.includes("ACTIVIDADES:")))try{const v=x.match(/TIEMPO:\s*(.*?)(?:\n\n|\n$)/s),y=x.match(/OBJETIVO:\s*(.*?)(?:\n\nACTIVIDADES:|\n$)/s);(v||y)&&console.log("Manteniendo formato para visualización")}catch(v){console.error("Error al procesar plan para guardar:",v)}}),m})())}catch(h){console.error("Error al guardar plan de clase:",h)}finally{c(!1)}},f=h=>{if(console.log("Formateando contenido:",typeof h,h!=null&&h.substring?h.substring(0,50):h),typeof h=="string")try{h.trim().startsWith("{")&&(h=JSON.parse(h),console.log("Contenido parseado a objeto:",h))}catch(m){console.log("Error al parsear JSON:",m)}if(typeof h=="object"&&h!==null)try{let m="";if(h.actividades&&Array.isArray(h.actividades)){m=`${h.tiempo?"TIEMPO: "+h.tiempo+`

`:""}`,m+=`${h.objetivo?`OBJETIVO:
`+h.objetivo+`

`:""}`,m+=`ACTIVIDADES:

`,h.actividades.forEach((x,v)=>{m+=`ACTIVIDAD ${v+1}: ${x.nombre||"Sin nombre"}
`,m+=`${x.descripcion||"Sin descripción"}

`;let y="";x.tipo&&(y+=`• Tipo: ${x.tipo}
`),x.recursos&&(y+=`• Recursos: ${x.recursos}
`),x.evaluacion&&(y+=`• Evaluación: ${x.evaluacion}
`),y&&(m+=`${y}
`)});let g="";return Object.keys(h).forEach(x=>{x!=="tiempo"&&x!=="objetivo"&&x!=="actividades"&&(g+=`• ${x.charAt(0).toUpperCase()+x.slice(1)}: ${typeof h[x]=="object"?JSON.stringify(h[x]):h[x]}
`)}),g&&(m+=`
INFORMACIÓN ADICIONAL:
${g}`),m}else{if(typeof h=="string")try{const y=JSON.parse(h);if(y.actividades||y.tiempo||y.objetivo)return f(y)}catch{}const x=JSON.stringify(h,null,2).replace(/[{}"]/g,"").replace(/,$/gm,"").replace(/^\s*\n/gm,"").split(`
`);let v="";return x.forEach(y=>{if(y.trim().startsWith("["))v+=`
`+y.trim()+`
`;else if(y.trim().startsWith("-"))v+="• "+y.trim().substring(1)+`
`;else if(y.includes(":")){const w=y.split(":");if(w.length>=2){const _=w[0].trim(),F=w.slice(1).join(":").trim();["tiempo","duración","objetivo","actividad","tipo","recursos","evaluación"].includes(_.toLowerCase())?v+=`${_.toUpperCase()}: ${F}
`:v+=`${_}: ${F}
`}else v+=y+`
`}else v+=y+`
`}),v}}catch(m){return console.error("Error al formatear contenido:",m),String(h)}return String(h)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),i.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||l,children:"← Volver"})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-blue-400 dark:border-blue-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsx("label",{className:"font-bold text-lg text-blue-700 dark:text-blue-300",children:"Inicio de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.inicio",value:f(s.momentosClase.inicio),onChange:u,rows:5,placeholder:"Describe las actividades iniciales, activación de conocimientos previos, motivación y presentación del objetivo de la clase...",className:"w-full p-3 border border-blue-200 dark:border-blue-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-700 focus:border-blue-300 focus:outline-none transition-all",disabled:a||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-transparent dark:from-green-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-green-400 dark:border-green-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("label",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:"Desarrollo de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.desarrollo",value:f(s.momentosClase.desarrollo),onChange:u,rows:8,placeholder:"Describe las actividades principales de aprendizaje, secuencia didáctica, estrategias de enseñanza, actividades prácticas...",className:"w-full p-3 border border-green-200 dark:border-green-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-green-300 dark:focus:ring-green-700 focus:border-green-300 focus:outline-none transition-all",disabled:a||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-transparent dark:from-amber-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-amber-400 dark:border-amber-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600 dark:text-amber-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("label",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:"Cierre de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.cierre",value:f(s.momentosClase.cierre),onChange:u,rows:5,placeholder:"Describe las actividades de cierre, síntesis, metacognición, evaluación formativa y retroalimentación...",className:"w-full p-3 border border-amber-200 dark:border-amber-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-amber-300 dark:focus:ring-amber-700 focus:border-amber-300 focus:outline-none transition-all",disabled:a||l})]})]}),i.jsx("div",{className:"text-right mt-6",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:"🗑️ Eliminar Plan"}),i.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:[l&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},MKe=({userId:e})=>{const{actividades:t,save:r}=DKe(e),[n,a]=N.useState("list"),[s,o]=N.useState(null),[l,c]=N.useState(!1),[u,d]=N.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,m]=N.useState(f);N.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(T){console.error("Error al verificar evento en calendario:",T)}},x=T=>{const{name:C,value:S}=T.target;m(j=>({...j,[C]:S}))},v=(T,C,S)=>{m(j=>({...j,tareas:j.tareas.map(L=>L.id===T?{...L,[C]:S}:L)}))},y=()=>{m(T=>({...T,tareas:[...T.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=T=>{m(C=>({...C,tareas:C.tareas.filter(S=>S.id!==T)}))},_=async T=>{T.preventDefault(),c(!0);const C=`Eres un especialista en objetivos educacionales según el currículum nacional chileno. Basado en la siguiente información de una actividad pedagógica, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(S=>S.descripcion).join(", ")}
    
    El objetivo debe:
    - Ser breve y conciso (máximo 120 caracteres)
    - Empezar con un verbo en infinitivo (como establece el MINEDUC)
    - Enfocarse en el propósito principal de la actividad
    - Estar alineado con los aprendizajes esperados del currículum nacional
    - Ser medible y observable`;try{jO("Planificación - Actividad Calendario");const S=ll.currentUser,j=S?await S.getIdToken():null;if(!j)throw new Error("No se pudo obtener el token de autenticación");const L=await fetch("/api/generarObjetivoActividad",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`},body:JSON.stringify({prompt:C,formData:h})});let P="No generado";L.ok?P=(await L.json()).objetivo||P:(console.error("Error al generar objetivo con IA:",await L.text()),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él."));const k={...h,objetivo:P},U=await r(k),Q={...k,id:U};o(Q),a("summary")}catch(S){console.error("Error al guardar actividad:",S),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}finally{c(!1)}},F=T=>{console.log("Agregando al calendario:",T),d(!0)},B="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return n==="form"?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Detalles de la Actividad"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:B,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:B,required:!0,disabled:l}),i.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:B,required:!0,disabled:l})]}),i.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:B,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicación",className:B,required:!0,disabled:l}),i.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:B,required:!0,disabled:l})]}),i.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:B,disabled:l})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),i.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:l,children:"+ Agregar Tarea"})]}),i.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((T,C)=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[i.jsx("button",{type:"button",onClick:()=>w(T.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:l,children:"×"}),i.jsx("textarea",{value:T.descripcion,onChange:S=>v(T.id,"descripcion",S.target.value),placeholder:`Descripción de la Tarea ${C+1}`,rows:2,className:B,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.jsx("input",{value:T.responsable,onChange:S=>v(T.id,"responsable",S.target.value),placeholder:"Responsable",className:B,required:!0,disabled:l}),i.jsx("input",{value:T.recursos,onChange:S=>v(T.id,"recursos",S.target.value),placeholder:"Recursos Necesarios",className:B,disabled:l})]})]},T.id))})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[i.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),i.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:l,children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:l?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[i.jsx("span",{className:"text-2xl",children:"✓"}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),i.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),i.jsxs("div",{className:"space-y-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),i.jsx("span",{children:s.nombre})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),i.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),i.jsx("p",{children:s.descripcion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),i.jsx("span",{children:s.ubicacion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),i.jsx("span",{children:s.participantes})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),i.jsx("p",{children:s.recursosGenerales})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),i.jsx("p",{children:s.objetivo})]})]}),i.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[i.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),i.jsx("button",{onClick:()=>F(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),i.jsx("button",{onClick:()=>{a("list"),o(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),i.jsx("button",{onClick:()=>{a("form"),m(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),i.jsx("div",{className:"space-y-3",children:t.length>0?t.map(T=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:T.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(T.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",T.ubicacion]})]},T.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},UKe=({currentUser:e})=>{const t=(e==null?void 0:e.uid)||(e==null?void 0:e.id)||(e==null?void 0:e.email)||"";console.log("🔑 PlanificacionDocente - Usuario actual:",{uid:e==null?void 0:e.uid,id:e==null?void 0:e.id,email:e==null?void 0:e.email,nombreCompleto:e==null?void 0:e.nombreCompleto,usuarioSeleccionado:t});const r=t&&t.length>0;console.log("🔑 ID de usuario válido:",r);const{planificaciones:n,save:a,update:s,remove:o,loading:l,diagnosticarYReparar:c}=OKe(r?t:null),u={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[d,f]=N.useState(u),[h,m]=N.useState(null),[g,x]=N.useState(!1),[v,y]=N.useState(null),[w,_]=N.useState("unidad"),[F,B]=N.useState(null),[T,C]=N.useState(null),S=(te,ae)=>{h&&C({planId:h.id,lessonIndex:te,lessonData:ae})},j=te=>{m(te),f({asignatura:te.asignatura,nivel:te.nivel,nombreUnidad:te.nombreUnidad,contenidos:te.contenidos,cantidadClases:te.cantidadClases,observaciones:te.observaciones,ideasParaUnidad:te.ideasParaUnidad})},L=async te=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta planificación?"))try{await o(te),(h==null?void 0:h.id)===te&&m(null)}catch(ae){console.error("Error al eliminar planificación:",ae),alert("No se pudo eliminar la planificación.")}},P=async te=>{if(window.confirm("¿Estás seguro de que quieres eliminar este plan de clase?"))try{await o(te),B(null)}catch(ae){console.error("Error al eliminar plan de clase:",ae),alert("No se pudo eliminar el plan de clase.")}},k=N.useMemo(()=>e.asignaturas||[],[e.asignaturas]),U=N.useMemo(()=>{const te=e.cursos||[],ae=new Set;return te.forEach(oe=>{oe.startsWith("1º")?ae.add("1º Medio"):oe.startsWith("2º")?ae.add("2º Medio"):oe.startsWith("3º")?ae.add("3º Medio"):oe.startsWith("4º")&&ae.add("4º Medio")}),Array.from(ae)},[e.cursos]);N.useEffect(()=>{f(te=>({...te,asignatura:k[0]||"",nivel:U[0]||""}))},[k,U]);const Q=te=>{const{name:ae,value:oe}=te.target;f(ie=>({...ie,[ae]:ae==="cantidadClases"?parseInt(oe,10):oe}))},K=()=>{const{asignatura:te,nivel:ae,nombreUnidad:oe,contenidos:ie,cantidadClases:ue,observaciones:Ce,ideasParaUnidad:ne}=d;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica siguiendo fielmente las bases curriculares y los objetivos de aprendizaje del Currículum Nacional Chileno (MINEDUC) para ${te} en ${ae}. La planificación debe presentarse en formato JSON estructurado.

    **Información Base:**
    - Asignatura: ${te}
    - Nivel: ${ae}
    - Nombre de la Unidad: "${oe}"
    - Contenidos clave a trabajar (insumo principal): "${ie}"
    - Cantidad de clases para la unidad: ${ue}
    - Ideas y perspectiva del docente para la unidad: "${ne||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${Ce||"Ninguna"}"
    
    **Orientaciones Curriculares Nacionales:**
    - Asegúrate que los objetivos estén alineados con las Bases Curriculares del MINEDUC para ${te} en ${ae}.
    - Contempla los Objetivos de Aprendizaje (OA) oficiales del currículum en línea chileno.
    - Incorpora los Objetivos de Aprendizaje Transversales (OAT) cuando sea apropiado.
    - Para niveles técnico-profesionales, considera los perfiles de egreso de cada especialidad.

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${ue} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},H=async te=>{te.preventDefault(),x(!0),y(null);try{jO("Planificación - Unidad");const ae=K(),oe=ll.currentUser,ie=oe?await oe.getIdToken():null;if(!ie)throw new Error("No se pudo obtener el token de autenticación");const ue=await fetch("/api/generarUnidadPlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`},body:JSON.stringify({prompt:ae,unidadFormData:d})});if(!ue.ok){const Be=await ue.text();throw console.error("Error response from backend:",Be),new Error(`Error al generar la unidad con IA: ${ue.statusText}`)}const Ce=await ue.json(),ne={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:d.asignatura,nivel:d.nivel,nombreUnidad:d.nombreUnidad,contenidos:d.contenidos,cantidadClases:d.cantidadClases,observaciones:d.observaciones,ideasParaUnidad:d.ideasParaUnidad,objetivosAprendizaje:Ce.objetivosAprendizaje,indicadoresEvaluacion:Ce.indicadoresEvaluacion,detallesLeccion:Ce.detallesLeccion};if(h)await s(h.id,ne),m({...ne,id:h.id});else{const Be=await a(ne);m({...ne,id:Be})}}catch(ae){console.error("Error al generar planificación con IA",ae),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{x(!1)}},q=async(te,ae)=>{x(!0),y(null);const oe=()=>`Eres un experto pedagogo chileno especialista en diseño de planes de clase alineados con el currículum nacional. A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ae.asignatura}
    - Nivel: ${ae.nivel}
    - Objetivo de la clase: ${te.objetivosAprendizaje}
    - Contenidos: ${te.contenidosConceptuales}
    - Actividades sugeridas: ${te.actividades}
    
    **Orientaciones didácticas**:
    - El plan debe seguir el modelo de diseño instruccional del Ministerio de Educación de Chile.
    - Incluir estrategias de aprendizaje activo y centrado en el estudiante.
    - Incorporar metodologías que desarrollen habilidades del siglo XXI según el currículum chileno.
    - Considerar momentos para activación de conocimientos previos, desarrollo de aprendizajes y metacognición/evaluación.
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{jO("Planificación - Utilizar Clase");const ie=oe(),ue=ll.currentUser,Ce=ue?await ue.getIdToken():null;if(!Ce)throw new Error("No se pudo obtener el token de autenticación");const ne=await fetch("/api/generarClasePlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ce}`},body:JSON.stringify({prompt:ie,unitPlan:ae,lessonDetail:te,currentUser:e})});if(!ne.ok){const _e=await ne.text();throw console.error("Error response from backend:",_e),new Error(`Error al generar el plan de clase con IA: ${ne.statusText}`)}const Be=await ne.json(),je={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:ae.asignatura,nivel:ae.nivel,contenidos:te.contenidosConceptuales,observaciones:"",nombreClase:te.actividades,duracionClase:80,momentosClase:Be,detalleLeccionOrigen:te};await a(je),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),_("clase")}catch(ie){console.error("Error al generar plan de clase con IA",ie),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{x(!1)}},z=async te=>{if(T)try{const{planId:ae,lessonIndex:oe}=T,ie=n.find(ne=>ne.id===ae&&ne.tipo==="Unidad");if(!ie)return;const ue=[...ie.detallesLeccion];ue[oe]=te;const Ce={...ie,detallesLeccion:ue};await s(ae,Ce),m(Ce),C(null)}catch(ae){console.error("Error al actualizar lección:",ae),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},W="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ee=async()=>{try{console.log("🔄 Recargando planificaciones manualmente...");const{getPlanificacionesByUser:te}=await Ti(async()=>{const{getPlanificacionesByUser:oe}=await Promise.resolve().then(()=>kO);return{getPlanificacionesByUser:oe}},void 0);if(!t){console.warn("🔄 No hay userId para recargar planificaciones");return}const ae=await te(t);console.log(`🔄 Obtenidas ${ae.length} planificaciones frescas`),alert(`Se han encontrado ${ae.length} planificaciones en la base de datos. Recargue la página para ver los cambios.`),window.location.reload()}catch(te){console.error("🔄 Error recargando planificaciones:",te),alert("Hubo un error al recargar las planificaciones. Intente recargar la página manualmente.")}},[X,O]=N.useState({visible:!1,ejecutando:!1,resultado:null}),R=async()=>{O(ae=>({...ae,ejecutando:!0,resultado:null}));const te=await c();O(ae=>({...ae,ejecutando:!1,resultado:te}))},G=()=>{var te;return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>O(ae=>({...ae,visible:!ae.visible})),className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-md text-sm",children:"Diagnóstico"}),i.jsxs("button",{onClick:ee,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm flex items-center gap-1",children:[i.jsx(bF,{className:"w-4 h-4"}),i.jsx("span",{children:"Recargar"})]})]})]}),X.visible&&i.jsxs("div",{className:"mb-6 p-4 border border-slate-300 dark:border-slate-600 rounded-lg",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"Herramienta de Diagnóstico"}),i.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Esta herramienta intentará resolver problemas con las planificaciones que no aparecen en el historial."}),X.resultado&&i.jsx("div",{className:`p-3 mb-3 rounded-md ${X.resultado.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":X.resultado.status==="repaired"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:X.resultado.message}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:R,disabled:X.ejecutando,className:"bg-slate-700 hover:bg-slate-800 text-white px-4 py-2 rounded-md flex items-center gap-2 disabled:opacity-50",children:X.ejecutando?i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx("span",{children:"Ejecutar diagnóstico"})}),((te=X.resultado)==null?void 0:te.status)==="repaired"&&i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:"Recargar página"})]})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("form",{onSubmit:H,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:d.asignatura,onChange:Q,className:W,required:!0,disabled:g,children:k.map(ae=>i.jsx("option",{value:ae,children:ae},ae))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsx("select",{name:"nivel",value:d.nivel,onChange:Q,className:W,required:!0,disabled:g,children:U.map(ae=>i.jsx("option",{value:ae,children:ae},ae))})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[i.jsx("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre de la Unidad"}),i.jsx("input",{type:"text",name:"nombreUnidad",value:d.nombreUnidad,onChange:Q,className:W,placeholder:"Ej: Introducción a la Programación",required:!0,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos Clave"}),i.jsx("textarea",{name:"contenidos",value:d.contenidos,onChange:Q,rows:3,placeholder:"Describe los temas, conceptos y habilidades principales que se deben abordar en la unidad. Sé lo más específico posible.",className:W,required:!0,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),i.jsx("textarea",{name:"ideasParaUnidad",value:d.ideasParaUnidad,onChange:Q,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:W,disabled:g})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),i.jsx("input",{type:"number",name:"cantidadClases",value:d.cantidadClases,onChange:Q,className:W,min:"1",max:"20",disabled:g})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),i.jsx("textarea",{name:"observaciones",value:d.observaciones,onChange:Q,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:W,disabled:g})]})]}),i.jsx("div",{className:"pt-4 text-right",children:i.jsx("button",{type:"submit",disabled:g||l,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:g?i.jsx(bF,{className:"w-5 h-5 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(ng,{className:"w-5 h-5"}),i.jsx("span",{children:h?"Regenerar Plan":"Generar con IA"})]})})}),v&&i.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),h&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),i.jsx(RKe,{plan:h,onEditLesson:S,onUseLesson:q,onUpdatePlan:s,isLoading:g})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"space-y-4",children:[console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de planificaciones:",n.length),console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de unidades:",n.filter(ae=>ae.tipo==="Unidad").length),n.length>0?n.filter(ae=>ae.tipo==="Unidad").map(ae=>i.jsx("div",{className:`p-5 border rounded-xl transition-all ${(h==null?void 0:h.id)===ae.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ae.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ae.contenidos]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>j(ae),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(T2e,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar"})]}),i.jsxs("button",{onClick:()=>L(ae.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(Va,{className:"w-4 h-4"}),i.jsx("span",{children:"Eliminar"})]})]})]})},ae.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})]})]})]})},Y=()=>{const te=n.filter(ae=>ae.tipo==="Clase").sort((ae,oe)=>new Date(oe.fechaCreacion).getTime()-new Date(ae.fechaCreacion).getTime());return F?i.jsx(LKe,{plan:F,onBack:()=>B(null),onDelete:P,onSave:async ae=>{try{await s(ae.id,ae),B(ae)}catch(oe){console.error("Error al actualizar plan de clase:",oe),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:g}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Mwe,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"space-y-4",children:te.length>0?te.map(ae=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.nombreClase}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ae.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ae.contenidos]})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:()=>B(ae),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ae.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return N.useEffect(()=>{if((async()=>{try{if(console.log("📊 Diagnóstico de planificaciones - Inicio"),console.log(`userId: ${t}`),!t){console.warn("📊 Sin userId, no se pueden obtener planificaciones");return}const{collection:ae,query:oe,where:ie,getDocs:ue}=await Ti(async()=>{const{collection:je,query:_e,where:Ae,getDocs:ve}=await Promise.resolve().then(()=>ub);return{collection:je,query:_e,where:Ae,getDocs:ve}},void 0),{db:Ce}=await Ti(async()=>{const{db:je}=await Promise.resolve().then(()=>hR);return{db:je}},void 0),ne=oe(ae(Ce,"planificaciones"),ie("userId","==",t)),Be=await ue(ne);if(console.log(`📊 Documentos en Firestore: ${Be.docs.length}`),Be.docs.length>0){console.log("📊 Primer documento:",Be.docs[0].data());const je=Be.docs.filter(Ae=>Ae.data().tipo==="Unidad");console.log(`📊 Documentos de tipo Unidad: ${je.length}`);const _e=je.filter(Ae=>Array.isArray(Ae.data().detallesLeccion)&&Ae.data().detallesLeccion!==void 0);if(console.log(`📊 Unidades con detallesLeccion válidos: ${_e.length}`),je.length>_e.length){console.log(`📊 Intentando corregir ${je.length-_e.length} unidades inválidas...`);for(const Ae of je){const ve=Ae.data();if(!Array.isArray(ve.detallesLeccion)||ve.detallesLeccion===void 0)try{console.log(`📊 Corrigiendo documento ${Ae.id}...`);const{doc:Pe,updateDoc:Ue}=await Ti(async()=>{const{doc:de,updateDoc:be}=await Promise.resolve().then(()=>ub);return{doc:de,updateDoc:be}},void 0);await Ue(Pe(Ce,"planificaciones",Ae.id),{detallesLeccion:[]}),console.log(`📊 Documento ${Ae.id} corregido con éxito`)}catch(Pe){console.error(`📊 Error al corregir documento ${Ae.id}:`,Pe)}}}}console.log("📊 Diagnóstico de planificaciones - Finalizado")}catch(ae){console.error("📊 Error en diagnóstico de planificaciones:",ae)}})(),!l){console.log(`🔍 Verificando ${n.length} planificaciones recibidas...`),console.log("🔍 Tipos de planificaciones:",n.map(oe=>oe.tipo));const ae=n.filter(oe=>oe.tipo==="Unidad"&&(!Array.isArray(oe.detallesLeccion)||oe.detallesLeccion===void 0));ae.length>0&&(console.warn(`🔍 Encontradas ${ae.length} unidades con formato inválido`),ae.forEach(async oe=>{try{await s(oe.id,{...oe,detallesLeccion:[]}),console.log(`🔍 Reparada planificación ${oe.id}`)}catch(ie){console.error(`🔍 Error al reparar planificación ${oe.id}:`,ie)}}))}},[t,n,l,s]),e?r?i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx(yte,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación Docente"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:i.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>_("unidad"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(vi,{className:"w-4 h-4"}),i.jsx("span",{children:"Unidad"})]}),i.jsxs("button",{onClick:()=>_("clase"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(JEe,{className:"w-4 h-4"}),i.jsx("span",{children:"Clase"})]}),i.jsxs("button",{onClick:()=>_("calendario"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(oc,{className:"w-4 h-4"}),i.jsx("span",{children:"Actividades Calendario"})]}),i.jsxs("button",{onClick:()=>_("materiales"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="materiales"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(vF,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Materiales"})]})]})}),w==="unidad"&&G(),w==="clase"&&Y(),w==="calendario"&&i.jsx(MKe,{userId:t}),w==="materiales"&&i.jsx(IKe,{userId:t,planificaciones:n}),T&&i.jsx(PKe,{lesson:T.lessonData,onClose:()=>C(null),onSave:z,isLoading:g})]}):i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-8 max-w-2xl mx-auto my-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-amber-800 dark:text-amber-300 mb-4",children:"Error de identificación de usuario"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-md p-4 mb-4 overflow-auto max-h-40",children:i.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:JSON.stringify(e,null,2)})}),i.jsx("p",{className:"text-amber-700 dark:text-amber-400 mb-4",children:"No se pudo determinar su identificador de usuario para cargar las planificaciones. Este problema puede deberse a:"}),i.jsxs("ul",{className:"list-disc pl-5 text-amber-700 dark:text-amber-400 mb-6 space-y-2",children:[i.jsx("li",{children:"La sesión no se ha inicializado correctamente"}),i.jsx("li",{children:"Su cuenta no tiene asignado un ID válido"}),i.jsx("li",{children:"Hay un problema en la sincronización con la base de datos"})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-600 hover:bg-amber-700 text-white py-2 px-6 rounded-md transition-colors",children:"Recargar aplicación"})})]}):i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No se recibieron datos de usuario"})]})})},$4="events",QKe=async()=>{try{const e=Ht(mt(Nr,$4),ar("date","asc"));return(await qr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},HKe=async e=>{try{return{id:(await mn(mt(Nr,$4),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},VKe=async(e,t)=>{try{const r=nr(Nr,$4,e);await Tl(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},zKe=async e=>{try{const t=nr(Nr,$4,e);await Ca(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},$Ke=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],oK={[fn.EVALUACION]:i.jsx(vi,{className:"h-4 w-4"}),[fn.ACTO]:i.jsx(dEe,{className:"h-4 w-4"}),[fn.ACTIVIDAD_FOCALIZADA]:i.jsx(fb,{className:"h-4 w-4"}),[fn.SALIDA_PEDAGOGICA]:i.jsx(jEe,{className:"h-4 w-4"})},GKe=e=>{switch(e.type){case fn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case fn.ACTO:return`Acto: ${e.ubicacion}`;case fn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case fn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},qKe=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:o})=>{const[l,c]=N.useState({});N.useEffect(()=>{c(a||{type:fn.EVALUACION,subtype:Mp.PRUEBA_PARCIAL,asignatura:ls[0],curso:js[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:v,value:y}=x.target;c(w=>({...w,[v]:y}))},f=x=>{c(v=>{if(v.type===fn.SALIDA_PEDAGOGICA){const y=v.cursos||[],w=y.includes(x)?y.filter(_=>_!==x):[...y,x];return{...v,cursos:w.sort()}}return v})},h=x=>{var y;x.preventDefault();let v;switch(l.type){case fn.EVALUACION:{const w={date:s,type:fn.EVALUACION,subtype:l.subtype,asignatura:l.asignatura,curso:l.curso,contenidos:l.contenidos};(l.subtype===Mp.RUBRICA||l.subtype===Mp.PAUTA_COTEJO)&&((y=l.enlace)!=null&&y.trim())&&(w.enlace=l.enlace.trim()),v=w;break}case fn.ACTO:v={date:s,type:fn.ACTO,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case fn.ACTIVIDAD_FOCALIZADA:v={date:s,type:fn.ACTIVIDAD_FOCALIZADA,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case fn.SALIDA_PEDAGOGICA:v={date:s,type:fn.SALIDA_PEDAGOGICA,responsable:l.responsable,ubicacion:l.ubicacion,cursos:l.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(l.type){case fn.EVALUACION:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),i.jsx("select",{id:"subtype",name:"subtype",value:l.subtype,onChange:d,required:!0,className:u,children:hwe.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{id:"asignatura",name:"asignatura",value:l.asignatura,onChange:d,required:!0,className:u,children:ls.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{id:"curso",name:"curso",value:l.curso,onChange:d,required:!0,className:u,children:js.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),i.jsx("textarea",{id:"contenidos",name:"contenidos",value:l.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(l.subtype===Mp.RUBRICA||l.subtype===Mp.PAUTA_COTEJO)&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),i.jsx("input",{id:"enlace",name:"enlace",type:"url",value:l.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case fn.ACTO:case fn.ACTIVIDAD_FOCALIZADA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),i.jsx("input",{id:"responsables",name:"responsables",type:"text",value:l.responsables||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),i.jsxs("div",{className:"relative",children:[i.jsx(k_,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),i.jsxs("div",{className:"relative",children:[i.jsx(Wf,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"horario",name:"horario",type:"text",value:l.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case fn.SALIDA_PEDAGOGICA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),i.jsx("input",{id:"responsable",name:"responsable",type:"text",value:l.responsable||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),i.jsxs("div",{className:"relative",children:[i.jsx(k_,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("fieldset",{children:[i.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),i.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:js.map(x=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:(l.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),i.jsx("span",{children:x})]},x))})]})]});default:return null}};return i.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:i.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:i.jsxs("form",{onSubmit:h,children:[i.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),i.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:i.jsx(uA,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),i.jsx("select",{id:"type",name:"type",value:l.type,onChange:d,className:u,children:Object.values(fn).map(x=>i.jsx("option",{value:x,children:x},x))})]}),g()]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[i.jsx("div",{children:a&&n&&i.jsxs("button",{type:"button",onClick:n,disabled:o,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[i.jsx(Va,{className:"h-4 w-4"}),o?"Eliminando...":"Eliminar"]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{type:"button",onClick:t,disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[i.jsx(uA,{className:"h-4 w-4"}),"Cancelar"]}),i.jsxs("button",{type:"submit",disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[i.jsx(Yc,{className:"h-4 w-4"}),o?"Guardando...":"Guardar"]})]})]})]})})})},KKe=({profile:e})=>{const[t,r]=N.useState(new Date),[n,a]=N.useState([]),[s,o]=N.useState(!1),[l,c]=N.useState(null),[u,d]=N.useState(!1),[f,h]=N.useState(Object.values(fn)),[m,g]=N.useState(!1),[x,v]=N.useState(null),[y,w]=N.useState(null),_=N.useCallback(async()=>{o(!0);try{const P=await QKe();a(P),c(null)}catch(P){console.error("Error al cargar eventos desde Firestore",P),c("No se pudieron cargar los eventos desde la nube.")}finally{o(!1)}},[]);N.useEffect(()=>{_()},[_]);const F=N.useMemo(()=>{const P=t.getFullYear(),k=t.getMonth(),U=new Date(P,k,1).getDay(),Q=new Date(P,k+1,0).getDate(),K=[];let H=1;for(let q=0;q<6;q++){const z=[];for(let W=0;W<7;W++)q===0&&W<U||H>Q?z.push(null):(z.push(new Date(P,k,H)),H++);if(K.push(z),H>Q)break}return K},[t]),B=P=>{h(k=>k.includes(P)?k.filter(U=>U!==P):[...k,P])},T=()=>{f.length===Object.values(fn).length?h([]):h(Object.values(fn))},C=P=>{e!==Gt.ESTUDIANTE&&(v(P.toISOString().split("T")[0]),w(null),g(!0))},S=(P,k)=>{k.stopPropagation(),e!==Gt.ESTUDIANTE&&(v(P.date),w(P),g(!0))},j=async P=>{d(!0);try{y?await VKe(y.id,P):await HKe(P),await _(),g(!1)}catch(k){console.error("Error al guardar evento:",k);const U=k instanceof Error?k.message:"Error desconocido";c(`Error al guardar el evento: ${U}`)}finally{d(!1)}},L=async()=>{if(y){d(!0);try{await zKe(y.id),await _(),g(!1)}catch(P){console.error("Error al eliminar evento:",P);const k=P instanceof Error?P.message:"Error desconocido";c(`No se pudo eliminar el evento: ${k}`)}finally{d(!1)}}};return i.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[i.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),i.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),i.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&i.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),l&&i.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:l}),!s&&n.length===0&&i.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[i.jsx(W2e,{className:"h-5 w-5 mt-0.5"}),i.jsx("p",{children:"No hay eventos registrados en la nube."})]}),i.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[i.jsx(Wk,{className:"h-4 w-4"}),i.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[i.jsx("button",{onClick:T,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(fn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(fn).map(P=>i.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(P)?`shadow-sm ${Pv[P].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[i.jsx("input",{type:"checkbox",checked:f.includes(P),onChange:()=>B(P),className:"hidden"}),i.jsx("span",{className:"shrink-0",children:oK[P]}),i.jsx("span",{children:Pv[P].label})]},P))]})]}),i.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[i.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(t2,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(lR,{className:"h-5 w-5"})})]}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),i.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),i.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:$Ke.map(P=>i.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:P},P))}),i.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:F.flat().map((P,k)=>{const U=P&&P.toDateString()===new Date().toDateString(),Q=P==null?void 0:P.toISOString().split("T")[0],K=Q?n.filter(H=>H.date===Q&&f.includes(H.type)):[];return i.jsx("div",{onClick:()=>P&&C(P),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${P?e!==Gt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:P&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`self-end text-sm font-semibold ${U?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:P.getDate()}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:K.map(H=>i.jsxs("div",{onClick:q=>S(H,q),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Pv[H.type].color}`,children:[i.jsx("span",{className:"shrink-0",children:oK[H.type]}),i.jsx("span",{className:"truncate",children:GKe(H)})]},H.id))}),e!==Gt.ESTUDIANTE&&i.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:i.jsx(_o,{className:"h-4 w-4"})})]})},k)})})]}),m&&i.jsx(qKe,{isOpen:m,onClose:()=>g(!1),onSave:j,onDelete:L,event:y,date:x,isLoading:u})]})},G4="anuncios",WKe=async()=>{try{const e=Ht(mt(Nr,G4),ar("fechaPublicacion","desc"));return(await qr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},XKe=async e=>{try{return{id:(await mn(mt(Nr,G4),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},YKe=async(e,t)=>{try{const r=nr(Nr,G4,e);await Tl(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},JKe=async e=>{try{const t=nr(Nr,G4,e);await Ca(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},lK=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],ZKe=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=N.useState({tipo:"Todos",cursos:[]}),f=N.useCallback(async()=>{a(!0);try{const C=await WKe();r(C),o(null)}catch(C){console.error("Error al cargar anuncios desde Firestore",C),o("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);N.useEffect(()=>{f()},[f]);const h=C=>{const{name:S,value:j}=C.target;c(L=>({...L,[S]:j}))},m=C=>{d({tipo:C,cursos:C==="Cursos"?[]:void 0})},g=C=>{d(S=>{var L;if(S.tipo!=="Cursos")return S;const j=(L=S.cursos)!=null&&L.includes(C)?S.cursos.filter(P=>P!==C):[...S.cursos||[],C];return{...S,cursos:j}})},x=async C=>{if(C.preventDefault(),!l.titulo||!l.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const S={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...l};await XKe(S),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(S){console.error("Error al crear anuncio:",S),o("Error al publicar el anuncio en la nube.")}},v=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await JKe(C),await f()}catch(S){console.error("Error al eliminar anuncio:",S),o("No se pudo eliminar el anuncio en la nube.")}},y=async C=>{try{const S=t.find(j=>j.id===C);S&&(await YKe(C,{destacado:!S.destacado}),await f())}catch(S){console.error("Error al actualizar anuncio:",S),o("No se pudo actualizar el estado del anuncio en la nube.")}},w=N.useMemo(()=>[...t].sort((C,S)=>C.destacado&&!S.destacado?-1:!C.destacado&&S.destacado?1:new Date(S.fechaPublicacion).getTime()-new Date(C.fechaPublicacion).getTime()),[t]),_=N.useMemo(()=>{const C=e.profile,S=e.curso;return w.filter(j=>{if(C===Gt.SUBDIRECCION)return!0;if(!j.destinatarios)return C!==Gt.ESTUDIANTE;const{tipo:L,cursos:P}=j.destinatarios;return L==="Todos"||L==="Profesores"&&C===Gt.PROFESORADO||L==="Coordinación TP"&&C===Gt.COORDINACION_TP?!0:L==="Cursos"?C===Gt.ESTUDIANTE?P==null?void 0:P.includes(S||""):!0:!1})},[w,e]),F=C=>e.profile===Gt.ESTUDIANTE?!1:e.profile===Gt.SUBDIRECCION||e.profile===C.profileCreador,B=()=>e.profile===Gt.SUBDIRECCION||e.profile===Gt.PROFESORADO,T="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Gt.ESTUDIANTE?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),i.jsx("input",{type:"text",name:"titulo",value:l.titulo,onChange:h,required:!0,className:T})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),i.jsx("textarea",{name:"mensaje",value:l.mensaje,onChange:h,required:!0,rows:4,className:T})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),i.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(C=>i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"destinatarioTipo",value:C,checked:u.tipo===C,onChange:()=>m(C),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:C.replace("Coordinación TP","Coord. TP")})]},C))})]}),u.tipo==="Cursos"&&i.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:js.map(C=>{var S;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(S=u.cursos)==null?void 0:S.includes(C),onChange:()=>g(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:C})]},C)})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),i.jsx("input",{type:"url",name:"adjunto",value:l.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:T})]}),i.jsx("div",{className:"pt-2 text-right",children:i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&_.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&_.length>0&&_.map((C,S)=>{const j=lK[S%lK.length];return i.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${j.bg} ${j.rotate}`,children:[C.destacado&&i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:i.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),i.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:C.titulo}),i.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:C.mensaje}),C.adjunto&&i.jsx("div",{className:"font-sans text-sm mb-4",children:i.jsxs("a",{href:C.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),i.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:C.autor}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(C.fechaPublicacion).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"flex items-center",children:[B()&&i.jsx("button",{onClick:()=>y(C.id),title:C.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("span",{className:`text-xl transition-opacity ${C.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),F(C)&&i.jsx("button",{onClick:()=>v(C.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},C.id)})})]})},Ile="api_logs",eWe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:cr.fromDate(new Date)};await mn(mt(tt,Ile),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},tWe=e=>{const t=Ht(mt(tt,Ile),ar("timestamp","desc"));return mr(t,n=>{const a=n.docs.map(s=>{var l,c;const o=s.data();return{id:s.id,...o,timestamp:((c=(l=o.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l).toISOString())||o.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},q4=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}eWe(e,t)},dM="actas_de_reunion",rWe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},nWe=e=>{const t=Ht(mt(tt,dM),ar("fechaCreacion","desc"));return mr(t,n=>{const a=n.docs.map(s=>rWe(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},aWe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:cr.fromDate(new Date(e.fechaCreacion))};return(await mn(mt(tt,dM),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},sWe=async e=>{try{const t=nr(tt,dM,e);await Ca(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},Fle=window.SpeechRecognition||window.webkitSpeechRecognition,cK=!!Fle,iWe=({isListening:e})=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),oWe=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(null),[s,o]=N.useState({tipoReunion:dB[0],asistentes:"",textoReunion:""}),[l,c]=N.useState(!1),[u,d]=N.useState(!1),[f,h]=N.useState(!0),[m,g]=N.useState(null),x=N.useRef(null);N.useEffect(()=>{h(!0);const C=nWe(S=>{r(S),!n&&S.length>0&&a(S[0]),h(!1)});return()=>C()},[n]);const v=C=>{const{name:S,value:j}=C.target;o(L=>({...L,[S]:j}))},y=N.useCallback(()=>{var C;if(!cK){g("El reconocimiento de voz no es compatible con este navegador.");return}l?(C=x.current)==null||C.stop():(x.current=new Fle,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=S=>{let j="";for(let L=S.resultIndex;L<S.results.length;++L)S.results[L].isFinal&&(j+=S.results[L][0].transcript+". ");o(L=>({...L,textoReunion:L.textoReunion+j}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=S=>{console.error("Speech recognition error",S.error),g(`Error de reconocimiento: ${S.error}`),c(!1)},x.current.start())},[l]),w=async C=>{C.preventDefault();const{tipoReunion:S,asistentes:j,textoReunion:L}=s;if(!S||!j.trim()||!L.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{q4("Generador de Actas");const P="",U=new globalThis.GoogleGenerativeAI(P).getGenerativeModel({model:"gemini-pro"}),Q=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${L}"
                
                Asistentes a la reunión para referencia de nombres: ${j}
            `,z=(await(await U.generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,""),W=JSON.parse(z),ee={fechaCreacion:new Date().toISOString(),...s,...W},X=await aWe(ee,e);o({tipoReunion:dB[0],asistentes:"",textoReunion:""})}catch(P){console.error("Error al analizar acta con IA:",P),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},_=async C=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await sWe(C),(n==null?void 0:n.id)===C&&a(t.length>1?t[1]:null)}catch(S){console.error("Error deleting acta:",S),alert("No se pudo eliminar el acta.")}},F=C=>{a(C)},B=C=>C.temas||C.acuerdos||C.plazos||C.responsables?i.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),C.temas&&C.temas.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.temas.map((j,L)=>i.jsx("li",{children:j},L))})]}),C.acuerdos&&C.acuerdos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.acuerdos.map((j,L)=>i.jsx("li",{children:j},L))})]}),C.plazos&&C.plazos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.plazos.map((j,L)=>i.jsx("li",{children:j},L))})]}),C.responsables&&C.responsables.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.responsables.map((j,L)=>i.jsx("li",{children:j},L))})]})]}):null,T="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?i.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[i.jsxs("div",{className:"md:col-span-1 space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),i.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",i.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),i.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:v,required:!0,className:T,children:dB.map(C=>i.jsx("option",{value:C,children:C},C))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),i.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:v,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:T})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),i.jsxs("div",{className:"relative",children:[i.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:v,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:T}),cK&&i.jsx("button",{type:"button",onClick:y,title:l?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${l?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:i.jsx(iWe,{isListening:l})})]})]}),m&&i.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),i.jsx("div",{className:"pt-2 text-right",children:i.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),i.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(C=>i.jsxs("button",{onClick:()=>F(C),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===C.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.tipoReunion}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(C.fechaCreacion).toLocaleDateString("es-CL")})]},C.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),i.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?i.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),i.jsx("button",{onClick:()=>_(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),i.jsx("h2",{children:"Asistentes"}),i.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((C,S)=>C.trim()&&i.jsx("li",{children:C.trim()},S))}),B(n),i.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:i.jsx("p",{children:n.textoReunion})})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[i.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},fM="evaluaciones_pruebas",AM="rubricas_estaticas",hM="rubricas_interactivas",lWe="usuarios",K4=e=>{var a,s,o;const t=e.data()||{},r=t.fechaCreacion,n=((o=(s=(a=r==null?void 0:r.toDate)==null?void 0:a.call(r))==null?void 0:s.toISOString)==null?void 0:o.call(s))??(typeof r=="string"?r:void 0);return{id:e.id,...t,fechaCreacion:n}},cWe=e=>{const t=Ht(mt(tt,fM),ar("fechaCreacion","desc"));return mr(t,n=>e(n.docs.map(a=>K4(a))),n=>{console.error("[subscribeToPruebas]",n),e([])})},uWe=async e=>{const{id:t,fechaCreacion:r,...n}=e,a=nr(tt,fM,t),s={...n,fechaCreacion:r?cr.fromDate(new Date(r)):Na()};await yi(a,s,{merge:!0})},dWe=async e=>{await Ca(nr(tt,fM,e))},fWe=e=>{const t=Ht(mt(tt,AM),ar("fechaCreacion","desc"));return mr(t,r=>e(r.docs.map(n=>K4(n))),r=>{console.error("[subscribeToRubricasEstaticas]",r),e([])})},BO=async e=>{const{id:t,fechaCreacion:r,...n}=e,a=nr(tt,AM,t),s={...n,fechaCreacion:r?cr.fromDate(new Date(r)):Na()};await yi(a,s,{merge:!0})},AWe=async e=>{await Ca(nr(tt,AM,e))},hWe=e=>{const t=Ht(mt(tt,hM),ar("curso","asc"));return mr(t,r=>e(r.docs.map(n=>K4(n))),r=>{console.error("[subscribeToRubricasInteractivas]",r),e([])})},mWe=async e=>{const t={...e,fechaCreacion:Na()};return(await mn(mt(tt,hM),t)).id},pWe=async(e,t)=>{const r=nr(tt,hM,e);await yi(r,t,{merge:!0})},gWe=e=>{const t=Ht(mt(tt,lWe),ar("nombreCompleto","asc"));return mr(t,r=>e(r.docs.map(n=>K4(n))),r=>{console.error("[subscribeToAllUsers]",r),e([])})},mM=()=>{const[e,t]=N.useState(null),[r,n]=N.useState(!0);return N.useEffect(()=>{const a=WJ(I_,async s=>{if(console.log("[useAuth] FirebaseUser:",s),s&&s.email)try{const o=await dte(s.email);console.log("[useAuth] Perfil Firestore:",o),t(o?{...o,uid:s.uid}:null)}catch(o){console.error("Error al obtener el perfil del usuario:",o),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}};function ga(e){"@babel/helpers - typeof";return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(e)}var nl=Uint8Array,Kc=Uint16Array,pM=Int32Array,W4=new nl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),X4=new nl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),TO=new nl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ole=function(e,t){for(var r=new Kc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new pM(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Dle=Ole(W4,2),Ple=Dle.b,IO=Dle.r;Ple[28]=258,IO[258]=28;var Rle=Ole(X4,0),xWe=Rle.b,uK=Rle.r,FO=new Kc(32768);for(var Ha=0;Ha<32768;++Ha){var L0=(Ha&43690)>>1|(Ha&21845)<<1;L0=(L0&52428)>>2|(L0&13107)<<2,L0=(L0&61680)>>4|(L0&3855)<<4,FO[Ha]=((L0&65280)>>8|(L0&255)<<8)>>1}var oA=function(e,t,r){for(var n=e.length,a=0,s=new Kc(t);a<n;++a)e[a]&&++s[e[a]-1];var o=new Kc(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new Kc(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=o[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[FO[f]>>c]=u}else for(l=new Kc(n),a=0;a<n;++a)e[a]&&(l[a]=FO[o[e[a]-1]++]>>15-e[a]);return l},Qm=new nl(288);for(var Ha=0;Ha<144;++Ha)Qm[Ha]=8;for(var Ha=144;Ha<256;++Ha)Qm[Ha]=9;for(var Ha=256;Ha<280;++Ha)Qm[Ha]=7;for(var Ha=280;Ha<288;++Ha)Qm[Ha]=8;var I2=new nl(32);for(var Ha=0;Ha<32;++Ha)I2[Ha]=5;var vWe=oA(Qm,9,0),bWe=oA(Qm,9,1),yWe=oA(I2,5,0),wWe=oA(I2,5,1),CI=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},kd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},_I=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},gM=function(e){return(e+7)/8|0},Lle=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new nl(e.subarray(t,r))},EWe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Td=function(e,t,r){var n=new Error(t||EWe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Td),!r)throw n;return n},NWe=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new nl(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new nl(a*3));var u=function(Ce){var ne=r.length;if(Ce>ne){var Be=new nl(Math.max(ne*2,Ce));Be.set(r),r=Be}},d=t.f||0,f=t.p||0,h=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=a*8;do{if(!m){d=kd(e,f,1);var w=kd(e,f+1,3);if(f+=3,w)if(w==1)m=bWe,g=wWe,x=9,v=5;else if(w==2){var T=kd(e,f,31)+257,C=kd(e,f+10,15)+4,S=T+kd(e,f+5,31)+1;f+=14;for(var j=new nl(S),L=new nl(19),P=0;P<C;++P)L[TO[P]]=kd(e,f+P*3,7);f+=C*3;for(var k=CI(L),U=(1<<k)-1,Q=oA(L,k,1),P=0;P<S;){var K=Q[kd(e,f,U)];f+=K&15;var _=K>>4;if(_<16)j[P++]=_;else{var H=0,q=0;for(_==16?(q=3+kd(e,f,3),f+=2,H=j[P-1]):_==17?(q=3+kd(e,f,7),f+=3):_==18&&(q=11+kd(e,f,127),f+=7);q--;)j[P++]=H}}var z=j.subarray(0,T),W=j.subarray(T);x=CI(z),v=CI(W),m=oA(z,x,1),g=oA(W,v,1)}else Td(1);else{var _=gM(f)+4,F=e[_-4]|e[_-3]<<8,B=_+F;if(B>a){c&&Td(0);break}l&&u(h+F),r.set(e.subarray(_,B),h),t.b=h+=F,t.p=f=B*8,t.f=d;continue}if(f>y){c&&Td(0);break}}l&&u(h+131072);for(var ee=(1<<x)-1,X=(1<<v)-1,O=f;;O=f){var H=m[_I(e,f)&ee],R=H>>4;if(f+=H&15,f>y){c&&Td(0);break}if(H||Td(2),R<256)r[h++]=R;else if(R==256){O=f,m=null;break}else{var G=R-254;if(R>264){var P=R-257,Y=W4[P];G=kd(e,f,(1<<Y)-1)+Ple[P],f+=Y}var te=g[_I(e,f)&X],ae=te>>4;te||Td(3),f+=te&15;var W=xWe[ae];if(ae>3){var Y=X4[ae];W+=_I(e,f)&(1<<Y)-1,f+=Y}if(f>y){c&&Td(0);break}l&&u(h+131072);var oe=h+G;if(h<W){var ie=s-W,ue=Math.min(W,oe);for(ie+h<0&&Td(3);h<ue;++h)r[h]=n[ie+h]}for(;h<oe;++h)r[h]=r[h-W]}}t.l=m,t.p=O,t.b=h,t.f=d,m&&(d=1,t.m=x,t.d=g,t.n=v)}while(!d);return h!=r.length&&o?Lle(r,0,h):r.subarray(0,h)},KA=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Ey=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},SI=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:Ule,l:0};if(a==1){var o=new nl(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(B,T){return B.f-T.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var m=new Kc(h+1),g=OO(r[d-1],m,0);if(g>t){var n=0,x=0,v=g-t,y=1<<v;for(s.sort(function(T,C){return m[C.s]-m[T.s]||T.f-C.f});n<a;++n){var w=s[n].s;if(m[w]>t)x+=y-(1<<g-m[w]),m[w]=t;else break}for(x>>=v;x>0;){var _=s[n].s;m[_]<t?x-=1<<t-m[_]++-1:++n}for(;n>=0&&x;--n){var F=s[n].s;m[F]==t&&(--m[F],++x)}g=t}return{t:new nl(m),l:g}},OO=function(e,t,r){return e.s==-1?Math.max(OO(e.l,t,r+1),OO(e.r,t,r+1)):t[e.s]=r},dK=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Kc(++t),n=0,a=e[0],s=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Ny=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Mle=function(e,t,r){var n=r.length,a=gM(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},fK=function(e,t,r,n,a,s,o,l,c,u,d){KA(t,d++,r),++a[256];for(var f=SI(a,15),h=f.t,m=f.l,g=SI(s,15),x=g.t,v=g.l,y=dK(h),w=y.c,_=y.n,F=dK(x),B=F.c,T=F.n,C=new Kc(19),S=0;S<w.length;++S)++C[w[S]&31];for(var S=0;S<B.length;++S)++C[B[S]&31];for(var j=SI(C,7),L=j.t,P=j.l,k=19;k>4&&!L[TO[k-1]];--k);var U=u+5<<3,Q=Ny(a,Qm)+Ny(s,I2)+o,K=Ny(a,h)+Ny(s,x)+o+14+3*k+Ny(C,L)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&U<=Q&&U<=K)return Mle(t,d,e.subarray(c,c+u));var H,q,z,W;if(KA(t,d,1+(K<Q)),d+=2,K<Q){H=oA(h,m,0),q=h,z=oA(x,v,0),W=x;var ee=oA(L,P,0);KA(t,d,_-257),KA(t,d+5,T-1),KA(t,d+10,k-4),d+=14;for(var S=0;S<k;++S)KA(t,d+3*S,L[TO[S]]);d+=3*k;for(var X=[w,B],O=0;O<2;++O)for(var R=X[O],S=0;S<R.length;++S){var G=R[S]&31;KA(t,d,ee[G]),d+=L[G],G>15&&(KA(t,d,R[S]>>5&127),d+=R[S]>>12)}}else H=vWe,q=Qm,z=yWe,W=I2;for(var S=0;S<l;++S){var Y=n[S];if(Y>255){var G=Y>>18&31;Ey(t,d,H[G+257]),d+=q[G+257],G>7&&(KA(t,d,Y>>23&31),d+=W4[G]);var te=Y&31;Ey(t,d,z[te]),d+=W[te],te>3&&(Ey(t,d,Y>>5&8191),d+=X4[te])}else Ey(t,d,H[Y]),d+=q[Y]}return Ey(t,d,H[256]),d+q[256]},CWe=new pM([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ule=new nl(0),_We=function(e,t,r,n,a,s){var o=s.z||e.length,l=new nl(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=CWe[t-1],h=f>>13,m=f&8191,g=(1<<r)-1,x=s.p||new Kc(32768),v=s.h||new Kc(g+1),y=Math.ceil(r/3),w=2*y,_=function(je){return(e[je]^e[je+1]<<y^e[je+2]<<w)&g},F=new pM(25e3),B=new Kc(288),T=new Kc(32),C=0,S=0,j=s.i||0,L=0,P=s.w||0,k=0;j+2<o;++j){var U=_(j),Q=j&32767,K=v[U];if(x[Q]=K,v[U]=Q,P<=j){var H=o-j;if((C>7e3||L>24576)&&(H>423||!u)){d=fK(e,c,0,F,B,T,S,L,k,j-k,d),L=C=S=0,k=j;for(var q=0;q<286;++q)B[q]=0;for(var q=0;q<30;++q)T[q]=0}var z=2,W=0,ee=m,X=Q-K&32767;if(H>2&&U==_(j-X))for(var O=Math.min(h,H)-1,R=Math.min(32767,j),G=Math.min(258,H);X<=R&&--ee&&Q!=K;){if(e[j+z]==e[j+z-X]){for(var Y=0;Y<G&&e[j+Y]==e[j+Y-X];++Y);if(Y>z){if(z=Y,W=X,Y>O)break;for(var te=Math.min(X,Y-2),ae=0,q=0;q<te;++q){var oe=j-X+q&32767,ie=x[oe],ue=oe-ie&32767;ue>ae&&(ae=ue,K=oe)}}}Q=K,K=x[Q],X+=Q-K&32767}if(W){F[L++]=268435456|IO[z]<<18|uK[W];var Ce=IO[z]&31,ne=uK[W]&31;S+=W4[Ce]+X4[ne],++B[257+Ce],++T[ne],P=j+z,++C}else F[L++]=e[j],++B[e[j]]}}for(j=Math.max(j,P);j<o;++j)F[L++]=e[j],++B[e[j]];d=fK(e,c,u,F,B,T,S,L,k,j-k,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=v,s.p=x,s.i=j,s.w=P)}else{for(var j=s.w||0;j<o+u;j+=65535){var Be=j+65535;Be>=o&&(c[d/8|0]=u,Be=o),d=Mle(c,d+1,e.subarray(j,Be))}s.i=o}return Lle(l,0,n+gM(d)+a)},Qle=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},SWe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new nl(s.length+e.length);o.set(s),o.set(e,s.length),e=o,a.w=s.length}return _We(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},Hle=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},kWe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Qle();a.p(t.dictionary),Hle(e,2,a.d())}},jWe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Td(6,"invalid zlib data"),(e[1]>>5&1)==1&&Td(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function DO(e,t){t||(t={});var r=Qle();r.p(e);var n=SWe(e,t,t.dictionary?6:2,4);return kWe(n,t),Hle(n,n.length-4,r.d()),n}function BWe(e,t){return NWe(e.subarray(jWe(e),-4),{i:2},t,t)}var TWe=typeof TextDecoder<"u"&&new TextDecoder,IWe=0;try{TWe.decode(Ule,{stream:!0}),IWe=1}catch{}var Vr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function kI(){Vr.console&&typeof Vr.console.log=="function"&&Vr.console.log.apply(Vr.console,arguments)}var Sa={log:kI,warn:function(e){Vr.console&&(typeof Vr.console.warn=="function"?Vr.console.warn.apply(Vr.console,arguments):kI.call(null,arguments))},error:function(e){Vr.console&&(typeof Vr.console.error=="function"?Vr.console.error.apply(Vr.console,arguments):kI(e))}};function jI(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Rp(n.response,t,r)},n.onerror=function(){Sa.error("could not download file")},n.send()}function AK(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function SC(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Iw,PO,Rp=Vr.saveAs||((typeof window>"u"?"undefined":ga(window))!=="object"||window!==Vr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Vr.URL||Vr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?AK(a.href)?jI(e,t,r):SC(a,a.target="_blank"):SC(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){SC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(AK(e))jI(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){SC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ga(s)!=="object"&&(Sa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return jI(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Vr.HTMLElement)||Vr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":ga(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=Vr.URL||Vr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Vle(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function BI(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Qo(r,n,a,s,t[0],7,-680876936),s=Qo(s,r,n,a,t[1],12,-389564586),a=Qo(a,s,r,n,t[2],17,606105819),n=Qo(n,a,s,r,t[3],22,-1044525330),r=Qo(r,n,a,s,t[4],7,-176418897),s=Qo(s,r,n,a,t[5],12,1200080426),a=Qo(a,s,r,n,t[6],17,-1473231341),n=Qo(n,a,s,r,t[7],22,-45705983),r=Qo(r,n,a,s,t[8],7,1770035416),s=Qo(s,r,n,a,t[9],12,-1958414417),a=Qo(a,s,r,n,t[10],17,-42063),n=Qo(n,a,s,r,t[11],22,-1990404162),r=Qo(r,n,a,s,t[12],7,1804603682),s=Qo(s,r,n,a,t[13],12,-40341101),a=Qo(a,s,r,n,t[14],17,-1502002290),r=Ho(r,n=Qo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Ho(s,r,n,a,t[6],9,-1069501632),a=Ho(a,s,r,n,t[11],14,643717713),n=Ho(n,a,s,r,t[0],20,-373897302),r=Ho(r,n,a,s,t[5],5,-701558691),s=Ho(s,r,n,a,t[10],9,38016083),a=Ho(a,s,r,n,t[15],14,-660478335),n=Ho(n,a,s,r,t[4],20,-405537848),r=Ho(r,n,a,s,t[9],5,568446438),s=Ho(s,r,n,a,t[14],9,-1019803690),a=Ho(a,s,r,n,t[3],14,-187363961),n=Ho(n,a,s,r,t[8],20,1163531501),r=Ho(r,n,a,s,t[13],5,-1444681467),s=Ho(s,r,n,a,t[2],9,-51403784),a=Ho(a,s,r,n,t[7],14,1735328473),r=Vo(r,n=Ho(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Vo(s,r,n,a,t[8],11,-2022574463),a=Vo(a,s,r,n,t[11],16,1839030562),n=Vo(n,a,s,r,t[14],23,-35309556),r=Vo(r,n,a,s,t[1],4,-1530992060),s=Vo(s,r,n,a,t[4],11,1272893353),a=Vo(a,s,r,n,t[7],16,-155497632),n=Vo(n,a,s,r,t[10],23,-1094730640),r=Vo(r,n,a,s,t[13],4,681279174),s=Vo(s,r,n,a,t[0],11,-358537222),a=Vo(a,s,r,n,t[3],16,-722521979),n=Vo(n,a,s,r,t[6],23,76029189),r=Vo(r,n,a,s,t[9],4,-640364487),s=Vo(s,r,n,a,t[12],11,-421815835),a=Vo(a,s,r,n,t[15],16,530742520),r=zo(r,n=Vo(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=zo(s,r,n,a,t[7],10,1126891415),a=zo(a,s,r,n,t[14],15,-1416354905),n=zo(n,a,s,r,t[5],21,-57434055),r=zo(r,n,a,s,t[12],6,1700485571),s=zo(s,r,n,a,t[3],10,-1894986606),a=zo(a,s,r,n,t[10],15,-1051523),n=zo(n,a,s,r,t[1],21,-2054922799),r=zo(r,n,a,s,t[8],6,1873313359),s=zo(s,r,n,a,t[15],10,-30611744),a=zo(a,s,r,n,t[6],15,-1560198380),n=zo(n,a,s,r,t[13],21,1309151649),r=zo(r,n,a,s,t[4],6,-145523070),s=zo(s,r,n,a,t[11],10,-1120210379),a=zo(a,s,r,n,t[2],15,718787259),n=zo(n,a,s,r,t[9],21,-343485551),e[0]=om(r,e[0]),e[1]=om(n,e[1]),e[2]=om(a,e[2]),e[3]=om(s,e[3])}function Y4(e,t,r,n,a,s){return t=om(om(t,e),om(n,s)),om(t<<a|t>>>32-a,r)}function Qo(e,t,r,n,a,s,o){return Y4(t&r|~t&n,e,t,a,s,o)}function Ho(e,t,r,n,a,s,o){return Y4(t&n|r&~n,e,t,a,s,o)}function Vo(e,t,r,n,a,s,o){return Y4(t^r^n,e,t,a,s,o)}function zo(e,t,r,n,a,s,o){return Y4(r^(t|~n),e,t,a,s,o)}function zle(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)BI(n,FWe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(BI(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,BI(n,a),n}function FWe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Iw=Vr.atob.bind(Vr),PO=Vr.btoa.bind(Vr);var hK="0123456789abcdef".split("");function OWe(e){for(var t="",r=0;r<4;r++)t+=hK[e>>8*r+4&15]+hK[e>>8*r&15];return t}function DWe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function RO(e){return zle(e).map(DWe).join("")}var PWe=function(e){for(var t=0;t<e.length;t++)e[t]=OWe(e[t]);return e.join("")}(zle("hello"))!="5d41402abc4b2a76b9719d911017c592";function om(e,t){if(PWe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function LO(e,t){var r,n,a,s;if(e!==r){for(var o=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,h=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=d,o=l[(l[h]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var mK={print:4,modify:8,copy:16,"annot-forms":32};function Av(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(mK.perm!==void 0)throw new Error("Invalid permission: "+l);a+=mK[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=RO(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=LO(this.encryptionKey,this.padding)}function hv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function pK(e){if(ga(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var o=t[r][s];try{o[0].apply(e,n)}catch(l){Vr.console&&Sa.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function TS(e){if(!(this instanceof TS))return new TS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function $le(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Hp(e,t,r,n,a){if(!(this instanceof Hp))return new Hp(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,$le.call(this,n,a)}function Nv(e,t,r,n,a){if(!(this instanceof Nv))return new Nv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,$le.call(this,n,a)}function yr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;ga(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=pK;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(Z){g=Z};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(Z){return v[Z]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},_=w.COMPAT;function F(){this.saveGraphicsState(),Ae(new yt(Et,0,0,-Et,0,Qi()*Et).toString()+" cm"),this.setFontSize(this.getFontSize()/Et),u="n",_=w.ADVANCED}function B(){this.restoreGraphicsState(),u="S",_=w.COMPAT}var T=m.__private__.combineFontStyleAndFontWeight=function(Z,me){if(Z=="bold"&&me=="normal"||Z=="bold"&&me==400||Z=="normal"&&me=="italic"||Z=="bold"&&me=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return me&&(Z=me==400||me==="normal"?Z==="italic"?"italic":"normal":me!=700&&me!=="bold"||Z!=="normal"?(me==700?"bold":me)+""+Z:"bold"),Z};m.advancedAPI=function(Z){var me=_===w.COMPAT;return me&&F.call(this),typeof Z!="function"||(Z(this),me&&B.call(this)),this},m.compatAPI=function(Z){var me=_===w.ADVANCED;return me&&B.call(this),typeof Z!="function"||(Z(this),me&&F.call(this)),this},m.isAdvancedAPI=function(){return _===w.ADVANCED};var C,S=function(Z){if(_!==w.ADVANCED)throw new Error(Z+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=m.roundToPrecision=m.__private__.roundToPrecision=function(Z,me){var Re=t||me;if(isNaN(Z)||isNaN(Re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Z.toFixed(Re).replace(/0+$/,"")};C=m.hpf=m.__private__.hpf=typeof c=="number"?function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.hpf");return j(Z,c)}:c==="smart"?function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.hpf");return j(Z,Z>-1&&Z<1?16:5)}:function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.hpf");return j(Z,16)};var L=m.f2=m.__private__.f2=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.f2");return j(Z,2)},P=m.__private__.f3=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.f3");return j(Z,3)},k=m.scale=m.__private__.scale=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.scale");return _===w.COMPAT?Z*Et:_===w.ADVANCED?Z:void 0},U=function(Z){return _===w.COMPAT?Qi()-Z:_===w.ADVANCED?Z:void 0},Q=function(Z){return k(U(Z))};m.__private__.setPrecision=m.setPrecision=function(Z){typeof parseInt(Z,10)=="number"&&(t=parseInt(Z,10))};var K,H="00000000000000000000000000000000",q=m.__private__.getFileId=function(){return H},z=m.__private__.setFileId=function(Z){return H=Z!==void 0&&/^[a-fA-F0-9]{32}$/.test(Z)?Z.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ca=new Av(d.userPermissions,d.userPassword,d.ownerPassword,H)),H};m.setFileId=function(Z){return z(Z),this},m.getFileId=function(){return q()};var W=m.__private__.convertDateToPDFDate=function(Z){var me=Z.getTimezoneOffset(),Re=me<0?"+":"-",Me=Math.floor(Math.abs(me/60)),Ke=Math.abs(me%60),Ct=[Re,G(Me),"'",G(Ke),"'"].join("");return["D:",Z.getFullYear(),G(Z.getMonth()+1),G(Z.getDate()),G(Z.getHours()),G(Z.getMinutes()),G(Z.getSeconds()),Ct].join("")},ee=m.__private__.convertPDFDateToDate=function(Z){var me=parseInt(Z.substr(2,4),10),Re=parseInt(Z.substr(6,2),10)-1,Me=parseInt(Z.substr(8,2),10),Ke=parseInt(Z.substr(10,2),10),Ct=parseInt(Z.substr(12,2),10),Qt=parseInt(Z.substr(14,2),10);return new Date(me,Re,Me,Ke,Ct,Qt,0)},X=m.__private__.setCreationDate=function(Z){var me;if(Z===void 0&&(Z=new Date),Z instanceof Date)me=W(Z);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Z))throw new Error("Invalid argument passed to jsPDF.setCreationDate");me=Z}return K=me},O=m.__private__.getCreationDate=function(Z){var me=K;return Z==="jsDate"&&(me=ee(K)),me};m.setCreationDate=function(Z){return X(Z),this},m.getCreationDate=function(Z){return O(Z)};var R,G=m.__private__.padd2=function(Z){return("0"+parseInt(Z)).slice(-2)},Y=m.__private__.padd2Hex=function(Z){return("00"+(Z=Z.toString())).substr(Z.length)},te=0,ae=[],oe=[],ie=0,ue=[],Ce=[],ne=!1,Be=oe,je=function(){te=0,ie=0,oe=[],ae=[],ue=[],Se=Yr(),ke=Yr()};m.__private__.setCustomOutputDestination=function(Z){ne=!0,Be=Z};var _e=function(Z){ne||(Be=Z)};m.__private__.resetCustomOutputDestination=function(){ne=!1,Be=oe};var Ae=m.__private__.out=function(Z){return Z=Z.toString(),ie+=Z.length+1,Be.push(Z),Be},ve=m.__private__.write=function(Z){return Ae(arguments.length===1?Z.toString():Array.prototype.join.call(arguments," "))},Pe=m.__private__.getArrayBuffer=function(Z){for(var me=Z.length,Re=new ArrayBuffer(me),Me=new Uint8Array(Re);me--;)Me[me]=Z.charCodeAt(me);return Re},Ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Ue};var de=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(Z){return de=_===w.ADVANCED?Z/Et:Z,this};var be,De=m.__private__.getFontSize=m.getFontSize=function(){return _===w.COMPAT?de:de*Et},Ve=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(Z){return Ve=Z,this},m.__private__.getR2L=m.getR2L=function(){return Ve};var We,Je=m.__private__.setZoomMode=function(Z){var me=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Z))be=Z;else if(isNaN(Z)){if(me.indexOf(Z)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Z+'" is not recognized.');be=Z}else be=parseInt(Z,10)};m.__private__.getZoomMode=function(){return be};var At,vt=m.__private__.setPageMode=function(Z){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Z)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Z+'" is not recognized.');We=Z};m.__private__.getPageMode=function(){return We};var wt=m.__private__.setLayoutMode=function(Z){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Z)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Z+'" is not recognized.');At=Z};m.__private__.getLayoutMode=function(){return At},m.__private__.setDisplayMode=m.setDisplayMode=function(Z,me,Re){return Je(Z),wt(me),vt(Re),this};var Tt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(Z){if(Object.keys(Tt).indexOf(Z)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Tt[Z]},m.__private__.getDocumentProperties=function(){return Tt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(Z){for(var me in Tt)Tt.hasOwnProperty(me)&&Z[me]&&(Tt[me]=Z[me]);return this},m.__private__.setDocumentProperty=function(Z,me){if(Object.keys(Tt).indexOf(Z)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Tt[Z]=me};var Lt,Et,_r,qt,tn,Br={},Kr={},Fn=[],Lr={},ps={},pn={},la={},Ta=null,an=0,vr=[],rt=new pK(m),gt=e.hotfixes||[],Ze={},bt={},Nt=[],yt=function Z(me,Re,Me,Ke,Ct,Qt){if(!(this instanceof Z))return new Z(me,Re,Me,Ke,Ct,Qt);isNaN(me)&&(me=1),isNaN(Re)&&(Re=0),isNaN(Me)&&(Me=0),isNaN(Ke)&&(Ke=1),isNaN(Ct)&&(Ct=0),isNaN(Qt)&&(Qt=0),this._matrix=[me,Re,Me,Ke,Ct,Qt]};Object.defineProperty(yt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Z){this._matrix[0]=Z}}),Object.defineProperty(yt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Z){this._matrix[1]=Z}}),Object.defineProperty(yt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Z){this._matrix[2]=Z}}),Object.defineProperty(yt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Z){this._matrix[3]=Z}}),Object.defineProperty(yt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Z){this._matrix[4]=Z}}),Object.defineProperty(yt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Z){this._matrix[5]=Z}}),Object.defineProperty(yt.prototype,"a",{get:function(){return this._matrix[0]},set:function(Z){this._matrix[0]=Z}}),Object.defineProperty(yt.prototype,"b",{get:function(){return this._matrix[1]},set:function(Z){this._matrix[1]=Z}}),Object.defineProperty(yt.prototype,"c",{get:function(){return this._matrix[2]},set:function(Z){this._matrix[2]=Z}}),Object.defineProperty(yt.prototype,"d",{get:function(){return this._matrix[3]},set:function(Z){this._matrix[3]=Z}}),Object.defineProperty(yt.prototype,"e",{get:function(){return this._matrix[4]},set:function(Z){this._matrix[4]=Z}}),Object.defineProperty(yt.prototype,"f",{get:function(){return this._matrix[5]},set:function(Z){this._matrix[5]=Z}}),Object.defineProperty(yt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(yt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(yt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(yt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),yt.prototype.join=function(Z){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(Z)},yt.prototype.multiply=function(Z){var me=Z.sx*this.sx+Z.shy*this.shx,Re=Z.sx*this.shy+Z.shy*this.sy,Me=Z.shx*this.sx+Z.sy*this.shx,Ke=Z.shx*this.shy+Z.sy*this.sy,Ct=Z.tx*this.sx+Z.ty*this.shx+this.tx,Qt=Z.tx*this.shy+Z.ty*this.sy+this.ty;return new yt(me,Re,Me,Ke,Ct,Qt)},yt.prototype.decompose=function(){var Z=this.sx,me=this.shy,Re=this.shx,Me=this.sy,Ke=this.tx,Ct=this.ty,Qt=Math.sqrt(Z*Z+me*me),er=(Z/=Qt)*Re+(me/=Qt)*Me;Re-=Z*er,Me-=me*er;var D=Math.sqrt(Re*Re+Me*Me);return er/=D,Z*(Me/=D)<me*(Re/=D)&&(Z=-Z,me=-me,er=-er,Qt=-Qt),{scale:new yt(Qt,0,0,D,0,0),translate:new yt(1,0,0,1,Ke,Ct),rotate:new yt(Z,me,-me,Z,0,0),skew:new yt(1,0,er,1,0,0)}},yt.prototype.toString=function(Z){return this.join(" ")},yt.prototype.inversed=function(){var Z=this.sx,me=this.shy,Re=this.shx,Me=this.sy,Ke=this.tx,Ct=this.ty,Qt=1/(Z*Me-me*Re),er=Me*Qt,D=-me*Qt,se=-Re*Qt,ce=Z*Qt;return new yt(er,D,se,ce,-er*Ke-se*Ct,-D*Ke-ce*Ct)},yt.prototype.applyToPoint=function(Z){var me=Z.x*this.sx+Z.y*this.shx+this.tx,Re=Z.x*this.shy+Z.y*this.sy+this.ty;return new ld(me,Re)},yt.prototype.applyToRectangle=function(Z){var me=this.applyToPoint(Z),Re=this.applyToPoint(new ld(Z.x+Z.w,Z.y+Z.h));return new cf(me.x,me.y,Re.x-me.x,Re.y-me.y)},yt.prototype.clone=function(){var Z=this.sx,me=this.shy,Re=this.shx,Me=this.sy,Ke=this.tx,Ct=this.ty;return new yt(Z,me,Re,Me,Ke,Ct)},m.Matrix=yt;var rr=m.matrixMult=function(Z,me){return me.multiply(Z)},br=new yt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=br;var ur=function(Z,me){if(!ps[Z]){var Re=(me instanceof Hp?"Sh":"P")+(Object.keys(Lr).length+1).toString(10);me.id=Re,ps[Z]=Re,Lr[Re]=me,rt.publish("addPattern",me)}};m.ShadingPattern=Hp,m.TilingPattern=Nv,m.addShadingPattern=function(Z,me){return S("addShadingPattern()"),ur(Z,me),this},m.beginTilingPattern=function(Z){S("beginTilingPattern()"),hu(Z.boundingBox[0],Z.boundingBox[1],Z.boundingBox[2]-Z.boundingBox[0],Z.boundingBox[3]-Z.boundingBox[1],Z.matrix)},m.endTilingPattern=function(Z,me){S("endTilingPattern()"),me.stream=Ce[R].join(`
`),ur(Z,me),rt.publish("endTilingPattern",me),Nt.pop().restore()};var Or=m.__private__.newObject=function(){var Z=Yr();return pe(Z,!0),Z},Yr=m.__private__.newObjectDeferred=function(){return te++,ae[te]=function(){return ie},te},pe=function(Z,me){return me=typeof me=="boolean"&&me,ae[Z]=ie,me&&Ae(Z+" 0 obj"),Z},Fe=m.__private__.newAdditionalObject=function(){var Z={objId:Yr(),content:""};return ue.push(Z),Z},Se=Yr(),ke=Yr(),Te=m.__private__.decodeColorString=function(Z){var me=Z.split(" ");if(me.length!==2||me[1]!=="g"&&me[1]!=="G")me.length===5&&(me[4]==="k"||me[4]==="K")&&(me=[(1-me[0])*(1-me[3]),(1-me[1])*(1-me[3]),(1-me[2])*(1-me[3]),"r"]);else{var Re=parseFloat(me[0]);me=[Re,Re,Re,"r"]}for(var Me="#",Ke=0;Ke<3;Ke++)Me+=("0"+Math.floor(255*parseFloat(me[Ke])).toString(16)).slice(-2);return Me},Oe=m.__private__.encodeColorString=function(Z){var me;typeof Z=="string"&&(Z={ch1:Z});var Re=Z.ch1,Me=Z.ch2,Ke=Z.ch3,Ct=Z.ch4,Qt=Z.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Re=="string"&&Re.charAt(0)!=="#"){var er=new Vle(Re);if(er.ok)Re=er.toHex();else if(!/^\d*\.?\d*$/.test(Re))throw new Error('Invalid color "'+Re+'" passed to jsPDF.encodeColorString.')}if(typeof Re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Re)&&(Re="#"+Re[1]+Re[1]+Re[2]+Re[2]+Re[3]+Re[3]),typeof Re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Re)){var D=parseInt(Re.substr(1),16);Re=D>>16&255,Me=D>>8&255,Ke=255&D}if(Me===void 0||Ct===void 0&&Re===Me&&Me===Ke)if(typeof Re=="string")me=Re+" "+Qt[0];else switch(Z.precision){case 2:me=L(Re/255)+" "+Qt[0];break;case 3:default:me=P(Re/255)+" "+Qt[0]}else if(Ct===void 0||ga(Ct)==="object"){if(Ct&&!isNaN(Ct.a)&&Ct.a===0)return me=["1.","1.","1.",Qt[1]].join(" ");if(typeof Re=="string")me=[Re,Me,Ke,Qt[1]].join(" ");else switch(Z.precision){case 2:me=[L(Re/255),L(Me/255),L(Ke/255),Qt[1]].join(" ");break;default:case 3:me=[P(Re/255),P(Me/255),P(Ke/255),Qt[1]].join(" ")}}else if(typeof Re=="string")me=[Re,Me,Ke,Ct,Qt[2]].join(" ");else switch(Z.precision){case 2:me=[L(Re),L(Me),L(Ke),L(Ct),Qt[2]].join(" ");break;case 3:default:me=[P(Re),P(Me),P(Ke),P(Ct),Qt[2]].join(" ")}return me},et=m.__private__.getFilters=function(){return o},ft=m.__private__.putStream=function(Z){var me=(Z=Z||{}).data||"",Re=Z.filters||et(),Me=Z.alreadyAppliedFilters||[],Ke=Z.addLength1||!1,Ct=me.length,Qt=Z.objectId,er=function(Pr){return Pr};if(d!==null&&Qt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(er=ca.encryptor(Qt,0));var D={};Re===!0&&(Re=["FlateEncode"]);var se=Z.additionalKeyValues||[],ce=(D=yr.API.processDataByFilters!==void 0?yr.API.processDataByFilters(me,Re):{data:me,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(D.data.length!==0&&(se.push({key:"Length",value:D.data.length}),Ke===!0&&se.push({key:"Length1",value:Ct})),ce.length!=0)if(ce.split("/").length-1==1)se.push({key:"Filter",value:ce});else{se.push({key:"Filter",value:"["+ce+"]"});for(var we=0;we<se.length;we+=1)if(se[we].key==="DecodeParms"){for(var Ge=[],ct=0;ct<D.reverseChain.split("/").length-1;ct+=1)Ge.push("null");Ge.push(se[we].value),se[we].value="["+Ge.join(" ")+"]"}}Ae("<<");for(var Vt=0;Vt<se.length;Vt++)Ae("/"+se[Vt].key+" "+se[Vt].value);Ae(">>"),D.data.length!==0&&(Ae("stream"),Ae(er(D.data)),Ae("endstream"))},qe=m.__private__.putPage=function(Z){var me=Z.number,Re=Z.data,Me=Z.objId,Ke=Z.contentsObjId;pe(Me,!0),Ae("<</Type /Page"),Ae("/Parent "+Z.rootDictionaryObjId+" 0 R"),Ae("/Resources "+Z.resourceDictionaryObjId+" 0 R"),Ae("/MediaBox ["+parseFloat(C(Z.mediaBox.bottomLeftX))+" "+parseFloat(C(Z.mediaBox.bottomLeftY))+" "+C(Z.mediaBox.topRightX)+" "+C(Z.mediaBox.topRightY)+"]"),Z.cropBox!==null&&Ae("/CropBox ["+C(Z.cropBox.bottomLeftX)+" "+C(Z.cropBox.bottomLeftY)+" "+C(Z.cropBox.topRightX)+" "+C(Z.cropBox.topRightY)+"]"),Z.bleedBox!==null&&Ae("/BleedBox ["+C(Z.bleedBox.bottomLeftX)+" "+C(Z.bleedBox.bottomLeftY)+" "+C(Z.bleedBox.topRightX)+" "+C(Z.bleedBox.topRightY)+"]"),Z.trimBox!==null&&Ae("/TrimBox ["+C(Z.trimBox.bottomLeftX)+" "+C(Z.trimBox.bottomLeftY)+" "+C(Z.trimBox.topRightX)+" "+C(Z.trimBox.topRightY)+"]"),Z.artBox!==null&&Ae("/ArtBox ["+C(Z.artBox.bottomLeftX)+" "+C(Z.artBox.bottomLeftY)+" "+C(Z.artBox.topRightX)+" "+C(Z.artBox.topRightY)+"]"),typeof Z.userUnit=="number"&&Z.userUnit!==1&&Ae("/UserUnit "+Z.userUnit),rt.publish("putPage",{objId:Me,pageContext:vr[me],pageNumber:me,page:Re}),Ae("/Contents "+Ke+" 0 R"),Ae(">>"),Ae("endobj");var Ct=Re.join(`
`);return _===w.ADVANCED&&(Ct+=`
Q`),pe(Ke,!0),ft({data:Ct,filters:et(),objectId:Ke}),Ae("endobj"),Me},at=m.__private__.putPages=function(){var Z,me,Re=[];for(Z=1;Z<=an;Z++)vr[Z].objId=Yr(),vr[Z].contentsObjId=Yr();for(Z=1;Z<=an;Z++)Re.push(qe({number:Z,data:Ce[Z],objId:vr[Z].objId,contentsObjId:vr[Z].contentsObjId,mediaBox:vr[Z].mediaBox,cropBox:vr[Z].cropBox,bleedBox:vr[Z].bleedBox,trimBox:vr[Z].trimBox,artBox:vr[Z].artBox,userUnit:vr[Z].userUnit,rootDictionaryObjId:Se,resourceDictionaryObjId:ke}));pe(Se,!0),Ae("<</Type /Pages");var Me="/Kids [";for(me=0;me<an;me++)Me+=Re[me]+" 0 R ";Ae(Me+"]"),Ae("/Count "+an),Ae(">>"),Ae("endobj"),rt.publish("postPutPages")},lt=function(Z){rt.publish("putFont",{font:Z,out:Ae,newObject:Or,putStream:ft}),Z.isAlreadyPutted!==!0&&(Z.objectNumber=Or(),Ae("<<"),Ae("/Type /Font"),Ae("/BaseFont /"+hv(Z.postScriptName)),Ae("/Subtype /Type1"),typeof Z.encoding=="string"&&Ae("/Encoding /"+Z.encoding),Ae("/FirstChar 32"),Ae("/LastChar 255"),Ae(">>"),Ae("endobj"))},Dt=function(){for(var Z in Br)Br.hasOwnProperty(Z)&&(f===!1||f===!0&&h.hasOwnProperty(Z))&&lt(Br[Z])},$t=function(Z){Z.objectNumber=Or();var me=[];me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Form"}),me.push({key:"BBox",value:"["+[C(Z.x),C(Z.y),C(Z.x+Z.width),C(Z.y+Z.height)].join(" ")+"]"}),me.push({key:"Matrix",value:"["+Z.matrix.toString()+"]"});var Re=Z.pages[1].join(`
`);ft({data:Re,additionalKeyValues:me,objectId:Z.objectNumber}),Ae("endobj")},Zt=function(){for(var Z in Ze)Ze.hasOwnProperty(Z)&&$t(Ze[Z])},zt=function(Z,me){var Re,Me=[],Ke=1/(me-1);for(Re=0;Re<1;Re+=Ke)Me.push(Re);if(Me.push(1),Z[0].offset!=0){var Ct={offset:0,color:Z[0].color};Z.unshift(Ct)}if(Z[Z.length-1].offset!=1){var Qt={offset:1,color:Z[Z.length-1].color};Z.push(Qt)}for(var er="",D=0,se=0;se<Me.length;se++){for(Re=Me[se];Re>Z[D+1].offset;)D++;var ce=Z[D].offset,we=(Re-ce)/(Z[D+1].offset-ce),Ge=Z[D].color,ct=Z[D+1].color;er+=Y(Math.round((1-we)*Ge[0]+we*ct[0]).toString(16))+Y(Math.round((1-we)*Ge[1]+we*ct[1]).toString(16))+Y(Math.round((1-we)*Ge[2]+we*ct[2]).toString(16))}return er.trim()},Kt=function(Z,me){me||(me=21);var Re=Or(),Me=zt(Z.colors,me),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+me+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ft({data:Me,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Re}),Ae("endobj"),Z.objectNumber=Or(),Ae("<< /ShadingType "+Z.type),Ae("/ColorSpace /DeviceRGB");var Ct="/Coords ["+C(parseFloat(Z.coords[0]))+" "+C(parseFloat(Z.coords[1]))+" ";Z.type===2?Ct+=C(parseFloat(Z.coords[2]))+" "+C(parseFloat(Z.coords[3])):Ct+=C(parseFloat(Z.coords[2]))+" "+C(parseFloat(Z.coords[3]))+" "+C(parseFloat(Z.coords[4]))+" "+C(parseFloat(Z.coords[5])),Ae(Ct+="]"),Z.matrix&&Ae("/Matrix ["+Z.matrix.toString()+"]"),Ae("/Function "+Re+" 0 R"),Ae("/Extend [true true]"),Ae(">>"),Ae("endobj")},Tr=function(Z,me){var Re=Yr(),Me=Or();me.push({resourcesOid:Re,objectOid:Me}),Z.objectNumber=Me;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+Z.boundingBox.map(C).join(" ")+"]"}),Ke.push({key:"XStep",value:C(Z.xStep)}),Ke.push({key:"YStep",value:C(Z.yStep)}),Ke.push({key:"Resources",value:Re+" 0 R"}),Z.matrix&&Ke.push({key:"Matrix",value:"["+Z.matrix.toString()+"]"}),ft({data:Z.stream,additionalKeyValues:Ke,objectId:Z.objectNumber}),Ae("endobj")},on=function(Z){var me;for(me in Lr)Lr.hasOwnProperty(me)&&(Lr[me]instanceof Hp?Kt(Lr[me]):Lr[me]instanceof Nv&&Tr(Lr[me],Z))},ln=function(Z){for(var me in Z.objectNumber=Or(),Ae("<<"),Z)switch(me){case"opacity":Ae("/ca "+L(Z[me]));break;case"stroke-opacity":Ae("/CA "+L(Z[me]))}Ae(">>"),Ae("endobj")},An=function(){var Z;for(Z in pn)pn.hasOwnProperty(Z)&&ln(pn[Z])},gs=function(){for(var Z in Ae("/XObject <<"),Ze)Ze.hasOwnProperty(Z)&&Ze[Z].objectNumber>=0&&Ae("/"+Z+" "+Ze[Z].objectNumber+" 0 R");rt.publish("putXobjectDict"),Ae(">>")},So=function(){ca.oid=Or(),Ae("<<"),Ae("/Filter /Standard"),Ae("/V "+ca.v),Ae("/R "+ca.r),Ae("/U <"+ca.toHexString(ca.U)+">"),Ae("/O <"+ca.toHexString(ca.O)+">"),Ae("/P "+ca.P),Ae(">>"),Ae("endobj")},xs=function(){for(var Z in Ae("/Font <<"),Br)Br.hasOwnProperty(Z)&&(f===!1||f===!0&&h.hasOwnProperty(Z))&&Ae("/"+Z+" "+Br[Z].objectNumber+" 0 R");Ae(">>")},ni=function(){if(Object.keys(Lr).length>0){for(var Z in Ae("/Shading <<"),Lr)Lr.hasOwnProperty(Z)&&Lr[Z]instanceof Hp&&Lr[Z].objectNumber>=0&&Ae("/"+Z+" "+Lr[Z].objectNumber+" 0 R");rt.publish("putShadingPatternDict"),Ae(">>")}},Ls=function(Z){if(Object.keys(Lr).length>0){for(var me in Ae("/Pattern <<"),Lr)Lr.hasOwnProperty(me)&&Lr[me]instanceof m.TilingPattern&&Lr[me].objectNumber>=0&&Lr[me].objectNumber<Z&&Ae("/"+me+" "+Lr[me].objectNumber+" 0 R");rt.publish("putTilingPatternDict"),Ae(">>")}},wi=function(){if(Object.keys(pn).length>0){var Z;for(Z in Ae("/ExtGState <<"),pn)pn.hasOwnProperty(Z)&&pn[Z].objectNumber>=0&&Ae("/"+Z+" "+pn[Z].objectNumber+" 0 R");rt.publish("putGStateDict"),Ae(">>")}},xa=function(Z){pe(Z.resourcesOid,!0),Ae("<<"),Ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),xs(),ni(),Ls(Z.objectOid),wi(),gs(),Ae(">>"),Ae("endobj")},ai=function(){var Z=[];Dt(),An(),Zt(),on(Z),rt.publish("putResources"),Z.forEach(xa),xa({resourcesOid:ke,objectOid:Number.MAX_SAFE_INTEGER}),rt.publish("postPutResources")},nf=function(){rt.publish("putAdditionalObjects");for(var Z=0;Z<ue.length;Z++){var me=ue[Z];pe(me.objId,!0),Ae(me.content),Ae("endobj")}rt.publish("postPutAdditionalObjects")},Jh=function(Z){Kr[Z.fontName]=Kr[Z.fontName]||{},Kr[Z.fontName][Z.fontStyle]=Z.id},su=function(Z,me,Re,Me,Ke){var Ct={id:"F"+(Object.keys(Br).length+1).toString(10),postScriptName:Z,fontName:me,fontStyle:Re,encoding:Me,isStandardFont:Ke||!1,metadata:{}};return rt.publish("addFont",{font:Ct,instance:this}),Br[Ct.id]=Ct,Jh(Ct),Ct.id},vA=function(Z){for(var me=0,Re=Ue.length;me<Re;me++){var Me=su.call(this,Z[me][0],Z[me][1],Z[me][2],Ue[me][3],!0);f===!1&&(h[Me]=!0);var Ke=Z[me][0].split("-");Jh({id:Me,fontName:Ke[0],fontStyle:Ke[1]||""})}rt.publish("addFonts",{fonts:Br,dictionary:Kr})},Ei=function(Z){return Z.foo=function(){try{return Z.apply(this,arguments)}catch(Me){var me=Me.stack||"";~me.indexOf(" at ")&&(me=me.split(" at ")[1]);var Re="Error in function "+me.split(`
`)[0].split("<")[0]+": "+Me.message;if(!Vr.console)throw new Error(Re);Vr.console.error(Re,Me),Vr.alert&&alert(Re)}},Z.foo.bar=Z,Z.foo},af=function(Z,me){var Re,Me,Ke,Ct,Qt,er,D,se,ce;if(Ke=(me=me||{}).sourceEncoding||"Unicode",Qt=me.outputEncoding,(me.autoencode||Qt)&&Br[Lt].metadata&&Br[Lt].metadata[Ke]&&Br[Lt].metadata[Ke].encoding&&(Ct=Br[Lt].metadata[Ke].encoding,!Qt&&Br[Lt].encoding&&(Qt=Br[Lt].encoding),!Qt&&Ct.codePages&&(Qt=Ct.codePages[0]),typeof Qt=="string"&&(Qt=Ct[Qt]),Qt)){for(D=!1,er=[],Re=0,Me=Z.length;Re<Me;Re++)(se=Qt[Z.charCodeAt(Re)])?er.push(String.fromCharCode(se)):er.push(Z[Re]),er[Re].charCodeAt(0)>>8&&(D=!0);Z=er.join("")}for(Re=Z.length;D===void 0&&Re!==0;)Z.charCodeAt(Re-1)>>8&&(D=!0),Re--;if(!D)return Z;for(er=me.noBOM?[]:[254,255],Re=0,Me=Z.length;Re<Me;Re++){if((ce=(se=Z.charCodeAt(Re))>>8)>>8)throw new Error("Character at position "+Re+" of string '"+Z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");er.push(ce),er.push(se-(ce<<8))}return String.fromCharCode.apply(void 0,er)},On=m.__private__.pdfEscape=m.pdfEscape=function(Z,me){return af(Z,me).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ni=m.__private__.beginPage=function(Z){Ce[++an]=[],vr[an]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Z[0]),topRightY:Number(Z[1])}},Fl(an),_e(Ce[R])},iu=function(Z,me){var Re,Me,Ke;switch(r=me||r,typeof Z=="string"&&(Re=y(Z.toLowerCase()),Array.isArray(Re)&&(Me=Re[0],Ke=Re[1])),Array.isArray(Z)&&(Me=Z[0]*Et,Ke=Z[1]*Et),isNaN(Me)&&(Me=a[0],Ke=a[1]),(Me>14400||Ke>14400)&&(Sa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),Ke=Math.min(14400,Ke)),a=[Me,Ke],r.substr(0,1)){case"l":Ke>Me&&(a=[Ke,Me]);break;case"p":Me>Ke&&(a=[Ke,Me])}Ni(a),EA(uu),Ae(Ci),NA!==0&&Ae(NA+" J"),od!==0&&Ae(od+" j"),rt.publish("addPage",{pageNumber:an})},ou=function(Z){Z>0&&Z<=an&&(Ce.splice(Z,1),vr.splice(Z,1),an--,R>an&&(R=an),this.setPage(R))},Fl=function(Z){Z>0&&Z<=an&&(R=Z)},Vn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ce.length-1},lu=function(Z,me,Re){var Me,Ke=void 0;return Re=Re||{},Z=Z!==void 0?Z:Br[Lt].fontName,me=me!==void 0?me:Br[Lt].fontStyle,Me=Z.toLowerCase(),Kr[Me]!==void 0&&Kr[Me][me]!==void 0?Ke=Kr[Me][me]:Kr[Z]!==void 0&&Kr[Z][me]!==void 0?Ke=Kr[Z][me]:Re.disableWarning===!1&&Sa.warn("Unable to look up font label for font '"+Z+"', '"+me+"'. Refer to getFontList() for available fonts."),Ke||Re.noFallback||(Ke=Kr.times[me])==null&&(Ke=Kr.times.normal),Ke},ko=m.__private__.putInfo=function(){var Z=Or(),me=function(Me){return Me};for(var Re in d!==null&&(me=ca.encryptor(Z,0)),Ae("<<"),Ae("/Producer ("+On(me("jsPDF "+yr.version))+")"),Tt)Tt.hasOwnProperty(Re)&&Tt[Re]&&Ae("/"+Re.substr(0,1).toUpperCase()+Re.substr(1)+" ("+On(me(Tt[Re]))+")");Ae("/CreationDate ("+On(me(K))+")"),Ae(">>"),Ae("endobj")},hc=m.__private__.putCatalog=function(Z){var me=(Z=Z||{}).rootDictionaryObjId||Se;switch(Or(),Ae("<<"),Ae("/Type /Catalog"),Ae("/Pages "+me+" 0 R"),be||(be="fullwidth"),be){case"fullwidth":Ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ae("/OpenAction [3 0 R /Fit]");break;case"original":Ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Re=""+be;Re.substr(Re.length-1)==="%"&&(be=parseInt(be)/100),typeof be=="number"&&Ae("/OpenAction [3 0 R /XYZ null null "+L(be)+"]")}switch(At||(At="continuous"),At){case"continuous":Ae("/PageLayout /OneColumn");break;case"single":Ae("/PageLayout /SinglePage");break;case"two":case"twoleft":Ae("/PageLayout /TwoColumnLeft");break;case"tworight":Ae("/PageLayout /TwoColumnRight")}We&&Ae("/PageMode /"+We),rt.publish("putCatalog"),Ae(">>"),Ae("endobj")},Zh=m.__private__.putTrailer=function(){Ae("trailer"),Ae("<<"),Ae("/Size "+(te+1)),Ae("/Root "+te+" 0 R"),Ae("/Info "+(te-1)+" 0 R"),d!==null&&Ae("/Encrypt "+ca.oid+" 0 R"),Ae("/ID [ <"+H+"> <"+H+"> ]"),Ae(">>")},bA=m.__private__.putHeader=function(){Ae("%PDF-"+g),Ae("%ºß¬à")},yA=m.__private__.putXRef=function(){var Z="0000000000";Ae("xref"),Ae("0 "+(te+1)),Ae("0000000000 65535 f ");for(var me=1;me<=te;me++)typeof ae[me]=="function"?Ae((Z+ae[me]()).slice(-10)+" 00000 n "):ae[me]!==void 0?Ae((Z+ae[me]).slice(-10)+" 00000 n "):Ae("0000000000 00000 n ")},mc=m.__private__.buildDocument=function(){je(),_e(oe),rt.publish("buildDocument"),bA(),at(),nf(),ai(),d!==null&&So(),ko(),hc();var Z=ie;return yA(),Zh(),Ae("startxref"),Ae(""+Z),Ae("%%EOF"),_e(Ce[R]),oe.join(`
`)},sf=m.__private__.getBlob=function(Z){return new Blob([Pe(Z)],{type:"application/pdf"})},pc=m.output=m.__private__.output=Ei(function(Z,me){switch(typeof(me=me||{})=="string"?me={filename:me}:me.filename=me.filename||"generated.pdf",Z){case void 0:return mc();case"save":m.save(me.filename);break;case"arraybuffer":return Pe(mc());case"blob":return sf(mc());case"bloburi":case"bloburl":if(Vr.URL!==void 0&&typeof Vr.URL.createObjectURL=="function")return Vr.URL&&Vr.URL.createObjectURL(sf(mc()))||void 0;Sa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Re="",Me=mc();try{Re=PO(Me)}catch{Re=PO(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+me.filename+";base64,"+Re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vr)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';me.pdfObjectUrl&&(Ke=me.pdfObjectUrl,Ct="");var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+Ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(me)+");<\/script></body></html>",er=Vr.open();return er!==null&&er.document.write(Qt),er}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vr)==="[object Window]"){var D='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(me.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+me.filename+'" width="500px" height="400px" /></body></html>',se=Vr.open();if(se!==null){se.document.write(D);var ce=this;se.document.documentElement.querySelector("#pdfViewer").onload=function(){se.document.title=me.filename,se.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ce.output("bloburl"))}}return se}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var we='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",me)+'"></iframe></body></html>',Ge=Vr.open();if(Ge!==null&&(Ge.document.write(we),Ge.document.title=me.filename),Ge||typeof safari>"u")return Ge;break;case"datauri":case"dataurl":return Vr.document.location.href=this.output("datauristring",me);default:return null}}),Ol=function(Z){return Array.isArray(gt)===!0&&gt.indexOf(Z)>-1};switch(n){case"pt":Et=1;break;case"mm":Et=72/25.4;break;case"cm":Et=72/2.54;break;case"in":Et=72;break;case"px":Et=Ol("px_scaling")==1?.75:96/72;break;case"pc":case"em":Et=12;break;case"ex":Et=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Et=n}var ca=null;X(),z();var gc=function(Z){return d!==null?ca.encryptor(Z,0):function(me){return me}},Dl=m.__private__.getPageInfo=m.getPageInfo=function(Z){if(isNaN(Z)||Z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vr[Z].objId,pageNumber:Z,pageContext:vr[Z]}},Dr=m.__private__.getPageInfoByObjId=function(Z){if(isNaN(Z)||Z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var me in vr)if(vr[me].objId===Z)break;return Dl(me)},Pl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:vr[R].objId,pageNumber:R,pageContext:vr[R]}};m.addPage=function(){return iu.apply(this,arguments),this},m.setPage=function(){return Fl.apply(this,arguments),_e.call(this,Ce[R]),this},m.insertPage=function(Z){return this.addPage(),this.movePage(R,Z),this},m.movePage=function(Z,me){var Re,Me;if(Z>me){Re=Ce[Z],Me=vr[Z];for(var Ke=Z;Ke>me;Ke--)Ce[Ke]=Ce[Ke-1],vr[Ke]=vr[Ke-1];Ce[me]=Re,vr[me]=Me,this.setPage(me)}else if(Z<me){Re=Ce[Z],Me=vr[Z];for(var Ct=Z;Ct<me;Ct++)Ce[Ct]=Ce[Ct+1],vr[Ct]=vr[Ct+1];Ce[me]=Re,vr[me]=Me,this.setPage(me)}return this},m.deletePage=function(){return ou.apply(this,arguments),this},m.__private__.text=m.text=function(Z,me,Re,Me,Ke){var Ct,Qt,er,D,se,ce,we,Ge,ct,Vt=(Me=Me||{}).scope||this;if(typeof Z=="number"&&typeof me=="number"&&(typeof Re=="string"||Array.isArray(Re))){var Pr=Re;Re=me,me=Z,Z=Pr}if(arguments[3]instanceof yt?(S("The transform parameter of text() with a Matrix value"),ct=Ke):(er=arguments[4],D=arguments[5],ga(we=arguments[3])==="object"&&we!==null||(typeof er=="string"&&(D=er,er=null),typeof we=="string"&&(D=we,we=null),typeof we=="number"&&(er=we,we=null),Me={flags:we,angle:er,align:D})),isNaN(me)||isNaN(Re)||Z==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Z.length===0)return Vt;var wn="",Jr=!1,zn=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:yn,ta=Vt.internal.scaleFactor;function Ul(gn){return gn=gn.split("	").join(Array(Me.TabLen||9).join(" ")),On(gn,we)}function ns(gn){for(var xn,va=gn.concat(),as=[],Hl=va.length;Hl--;)typeof(xn=va.shift())=="string"?as.push(xn):Array.isArray(gn)&&(xn.length===1||xn[1]===void 0&&xn[2]===void 0)?as.push(xn[0]):as.push([xn[0],xn[1],xn[2]]);return as}function Io(gn,xn){var va;if(typeof gn=="string")va=xn(gn)[0];else if(Array.isArray(gn)){for(var as,Hl,bf=gn.concat(),yf=[],Ad=bf.length;Ad--;)typeof(as=bf.shift())=="string"?yf.push(xn(as)[0]):Array.isArray(as)&&typeof as[0]=="string"&&(Hl=xn(as[0],as[1],as[2]),yf.push([Hl[0],Hl[1],Hl[2]]));va=yf}return va}var pu=!1,df=!0;if(typeof Z=="string")pu=!0;else if(Array.isArray(Z)){var n0=Z.concat();Qt=[];for(var CA,Ms=n0.length;Ms--;)(typeof(CA=n0.shift())!="string"||Array.isArray(CA)&&typeof CA[0]!="string")&&(df=!1);pu=df}if(pu===!1)throw new Error('Type of text must be string or Array. "'+Z+'" is not recognized.');typeof Z=="string"&&(Z=Z.match(/[\r?\n]/)?Z.split(/\r\n|\r|\n/g):[Z]);var ff=de/Vt.internal.scaleFactor,_A=ff*(zn-1);switch(Me.baseline){case"bottom":Re-=_A;break;case"top":Re+=ff-_A;break;case"hanging":Re+=ff-2*_A;break;case"middle":Re+=ff/2-_A}if((ce=Me.maxWidth||0)>0&&(typeof Z=="string"?Z=Vt.splitTextToSize(Z,ce):Object.prototype.toString.call(Z)==="[object Array]"&&(Z=Z.reduce(function(gn,xn){return gn.concat(Vt.splitTextToSize(xn,ce))},[]))),Ct={text:Z,x:me,y:Re,options:Me,mutex:{pdfEscape:On,activeFontKey:Lt,fonts:Br,activeFontSize:de}},rt.publish("preProcessText",Ct),Z=Ct.text,er=(Me=Ct.options).angle,!(ct instanceof yt)&&er&&typeof er=="number"){er*=Math.PI/180,Me.rotationDirection===0&&(er=-er),_===w.ADVANCED&&(er=-er);var SA=Math.cos(er),a0=Math.sin(er);ct=new yt(SA,a0,-a0,SA,0,0)}else er&&er instanceof yt&&(ct=er);_!==w.ADVANCED||ct||(ct=br),(se=Me.charSpace||id)!==void 0&&(wn+=C(k(se))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ge=Me.horizontalScale)!==void 0&&(wn+=C(100*Ge)+` Tz
`),Me.lang;var Fo=-1,C1=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,ip=Vt.internal.getCurrentPageInfo().pageContext;switch(C1){case 0:case!1:case"fill":Fo=0;break;case 1:case!0:case"stroke":Fo=1;break;case 2:case"fillThenStroke":Fo=2;break;case 3:case"invisible":Fo=3;break;case 4:case"fillAndAddForClipping":Fo=4;break;case 5:case"strokeAndAddPathForClipping":Fo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fo=6;break;case 7:case"addToPathForClipping":Fo=7}var sx=ip.usedRenderingMode!==void 0?ip.usedRenderingMode:-1;Fo!==-1?wn+=Fo+` Tr
`:sx!==-1&&(wn+=`0 Tr
`),Fo!==-1&&(ip.usedRenderingMode=Fo),D=Me.align||"left";var Ql,si=de*zn,Af=Vt.internal.pageSize.getWidth(),op=Br[Lt];se=Me.charSpace||id,ce=Me.maxWidth||0,we=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var dd=[],hf=function(gn){return Vt.getStringUnitWidth(gn,{font:op,charSpace:se,fontSize:de,doKerning:!1})*de/ta};if(Object.prototype.toString.call(Z)==="[object Array]"){var lo;Qt=ns(Z),D!=="left"&&(Ql=Qt.map(hf));var _i,mf=0;if(D==="right"){me-=Ql[0],Z=[],Ms=Qt.length;for(var Oo=0;Oo<Ms;Oo++)Oo===0?(_i=Ui(me),lo=bs(Re)):(_i=k(mf-Ql[Oo]),lo=-si),Z.push([Qt[Oo],_i,lo]),mf=Ql[Oo]}else if(D==="center"){me-=Ql[0]/2,Z=[],Ms=Qt.length;for(var yc=0;yc<Ms;yc++)yc===0?(_i=Ui(me),lo=bs(Re)):(_i=k((mf-Ql[yc])/2),lo=-si),Z.push([Qt[yc],_i,lo]),mf=Ql[yc]}else if(D==="left"){Z=[],Ms=Qt.length;for(var gu=0;gu<Ms;gu++)Z.push(Qt[gu])}else if(D==="justify"&&op.encoding==="Identity-H"){Z=[],Ms=Qt.length,ce=ce!==0?ce:Af;for(var wc=0,Ka=0;Ka<Ms;Ka++)if(lo=Ka===0?bs(Re):-si,_i=Ka===0?Ui(me):wc,Ka<Ms-1){var Ec=k((ce-Ql[Ka])/(Qt[Ka].split(" ").length-1)),ys=Qt[Ka].split(" ");Z.push([ys[0]+" ",_i,lo]),wc=0;for(var Do=1;Do<ys.length;Do++){var kA=(hf(ys[Do-1]+" "+ys[Do])-hf(ys[Do]))*ta+Ec;Do==ys.length-1?Z.push([ys[Do],kA,0]):Z.push([ys[Do]+" ",kA,0]),wc-=kA}}else Z.push([Qt[Ka],_i,lo]);Z.push(["",wc,0])}else{if(D!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Z=[],Ms=Qt.length,ce=ce!==0?ce:Af,Ka=0;Ka<Ms;Ka++)lo=Ka===0?bs(Re):-si,_i=Ka===0?Ui(me):0,Ka<Ms-1?dd.push(C(k((ce-Ql[Ka])/(Qt[Ka].split(" ").length-1)))):dd.push(0),Z.push([Qt[Ka],_i,lo])}}var xu=typeof Me.R2L=="boolean"?Me.R2L:Ve;xu===!0&&(Z=Io(Z,function(gn,xn,va){return[gn.split("").reverse().join(""),xn,va]})),Ct={text:Z,x:me,y:Re,options:Me,mutex:{pdfEscape:On,activeFontKey:Lt,fonts:Br,activeFontSize:de}},rt.publish("postProcessText",Ct),Z=Ct.text,Jr=Ct.mutex.isHex||!1;var s0=Br[Lt].encoding;s0!=="WinAnsiEncoding"&&s0!=="StandardEncoding"||(Z=Io(Z,function(gn,xn,va){return[Ul(gn),xn,va]})),Qt=ns(Z),Z=[];for(var pf,gf,xf,jA=0,i0=1,vf=Array.isArray(Qt[0])?i0:jA,fd="",BA=function(gn,xn,va){var as="";return va instanceof yt?(va=typeof Me.angle=="number"?rr(va,new yt(1,0,0,1,gn,xn)):rr(new yt(1,0,0,1,gn,xn),va),_===w.ADVANCED&&(va=rr(new yt(1,0,0,-1,0,0),va)),as=va.join(" ")+` Tm
`):as=C(gn)+" "+C(xn)+` Td
`,as},Wa=0;Wa<Qt.length;Wa++){switch(fd="",vf){case i0:xf=(Jr?"<":"(")+Qt[Wa][0]+(Jr?">":")"),pf=parseFloat(Qt[Wa][1]),gf=parseFloat(Qt[Wa][2]);break;case jA:xf=(Jr?"<":"(")+Qt[Wa]+(Jr?">":")"),pf=Ui(me),gf=bs(Re)}dd!==void 0&&dd[Wa]!==void 0&&(fd=dd[Wa]+` Tw
`),Wa===0?Z.push(fd+BA(pf,gf,ct)+xf):vf===jA?Z.push(fd+xf):vf===i0&&Z.push(fd+BA(pf,gf,ct)+xf)}Z=vf===jA?Z.join(` Tj
T* `):Z.join(` Tj
`),Z+=` Tj
`;var hl=`BT
/`;return hl+=Lt+" "+de+` Tf
`,hl+=C(de*zn)+` TL
`,hl+=vc+`
`,hl+=wn,hl+=Z,Ae(hl+="ET"),h[Lt]=!0,Vt};var e0=m.__private__.clip=m.clip=function(Z){return Ae(Z==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return e0("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Ae("n"),this};var Li=m.__private__.isValidStyle=function(Z){var me=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Z)!==-1&&(me=!0),me};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(Z){return Li(Z)&&(u=Z),this};var jo=m.__private__.getStyle=m.getStyle=function(Z){var me=u;switch(Z){case"D":case"S":me="S";break;case"F":me="f";break;case"FD":case"DF":me="B";break;case"f":case"f*":case"B":case"B*":me=Z}return me},oo=m.close=function(){return Ae("h"),this};m.stroke=function(){return Ae("S"),this},m.fill=function(Z){return Rl("f",Z),this},m.fillEvenOdd=function(Z){return Rl("f*",Z),this},m.fillStroke=function(Z){return Rl("B",Z),this},m.fillStrokeEvenOdd=function(Z){return Rl("B*",Z),this};var Rl=function(Z,me){ga(me)==="object"?xc(me,Z):Ae(Z)},Bo=function(Z){Z===null||_===w.ADVANCED&&Z===void 0||(Z=jo(Z),Ae(Z))};function cu(Z,me,Re,Me,Ke){var Ct=new Nv(me||this.boundingBox,Re||this.xStep,Me||this.yStep,this.gState,Ke||this.matrix);Ct.stream=this.stream;var Qt=Z+"$$"+this.cloneIndex+++"$$";return ur(Qt,Ct),Ct}var xc=function(Z,me){var Re=ps[Z.key],Me=Lr[Re];if(Me instanceof Hp)Ae("q"),Ae(wA(me)),Me.gState&&m.setGState(Me.gState),Ae(Z.matrix.toString()+" cm"),Ae("/"+Re+" sh"),Ae("Q");else if(Me instanceof Nv){var Ke=new yt(1,0,0,-1,0,Qi());Z.matrix&&(Ke=Ke.multiply(Z.matrix||br),Re=cu.call(Me,Z.key,Z.boundingBox,Z.xStep,Z.yStep,Ke).id),Ae("q"),Ae("/Pattern cs"),Ae("/"+Re+" scn"),Me.gState&&m.setGState(Me.gState),Ae(me),Ae("Q")}},wA=function(Z){switch(Z){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},To=m.moveTo=function(Z,me){return Ae(C(k(Z))+" "+C(Q(me))+" m"),this},Mi=m.lineTo=function(Z,me){return Ae(C(k(Z))+" "+C(Q(me))+" l"),this},Ll=m.curveTo=function(Z,me,Re,Me,Ke,Ct){return Ae([C(k(Z)),C(Q(me)),C(k(Re)),C(Q(Me)),C(k(Ke)),C(Q(Ct)),"c"].join(" ")),this};m.__private__.line=m.line=function(Z,me,Re,Me,Ke){if(isNaN(Z)||isNaN(me)||isNaN(Re)||isNaN(Me)||!Li(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return _===w.COMPAT?this.lines([[Re-Z,Me-me]],Z,me,[1,1],Ke||"S"):this.lines([[Re-Z,Me-me]],Z,me,[1,1]).stroke()},m.__private__.lines=m.lines=function(Z,me,Re,Me,Ke,Ct){var Qt,er,D,se,ce,we,Ge,ct,Vt,Pr,wn,Jr;if(typeof Z=="number"&&(Jr=Re,Re=me,me=Z,Z=Jr),Me=Me||[1,1],Ct=Ct||!1,isNaN(me)||isNaN(Re)||!Array.isArray(Z)||!Array.isArray(Me)||!Li(Ke)||typeof Ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(To(me,Re),Qt=Me[0],er=Me[1],se=Z.length,Pr=me,wn=Re,D=0;D<se;D++)(ce=Z[D]).length===2?(Pr=ce[0]*Qt+Pr,wn=ce[1]*er+wn,Mi(Pr,wn)):(we=ce[0]*Qt+Pr,Ge=ce[1]*er+wn,ct=ce[2]*Qt+Pr,Vt=ce[3]*er+wn,Pr=ce[4]*Qt+Pr,wn=ce[5]*er+wn,Ll(we,Ge,ct,Vt,Pr,wn));return Ct&&oo(),Bo(Ke),this},m.path=function(Z){for(var me=0;me<Z.length;me++){var Re=Z[me],Me=Re.c;switch(Re.op){case"m":To(Me[0],Me[1]);break;case"l":Mi(Me[0],Me[1]);break;case"c":Ll.apply(this,Me);break;case"h":oo()}}return this},m.__private__.rect=m.rect=function(Z,me,Re,Me,Ke){if(isNaN(Z)||isNaN(me)||isNaN(Re)||isNaN(Me)||!Li(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return _===w.COMPAT&&(Me=-Me),Ae([C(k(Z)),C(Q(me)),C(k(Re)),C(k(Me)),"re"].join(" ")),Bo(Ke),this},m.__private__.triangle=m.triangle=function(Z,me,Re,Me,Ke,Ct,Qt){if(isNaN(Z)||isNaN(me)||isNaN(Re)||isNaN(Me)||isNaN(Ke)||isNaN(Ct)||!Li(Qt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Re-Z,Me-me],[Ke-Re,Ct-Me],[Z-Ke,me-Ct]],Z,me,[1,1],Qt,!0),this},m.__private__.roundedRect=m.roundedRect=function(Z,me,Re,Me,Ke,Ct,Qt){if(isNaN(Z)||isNaN(me)||isNaN(Re)||isNaN(Me)||isNaN(Ke)||isNaN(Ct)||!Li(Qt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var er=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*Re),Ct=Math.min(Ct,.5*Me),this.lines([[Re-2*Ke,0],[Ke*er,0,Ke,Ct-Ct*er,Ke,Ct],[0,Me-2*Ct],[0,Ct*er,-Ke*er,Ct,-Ke,Ct],[2*Ke-Re,0],[-Ke*er,0,-Ke,-Ct*er,-Ke,-Ct],[0,2*Ct-Me],[0,-Ct*er,Ke*er,-Ct,Ke,-Ct]],Z+Ke,me,[1,1],Qt,!0),this},m.__private__.ellipse=m.ellipse=function(Z,me,Re,Me,Ke){if(isNaN(Z)||isNaN(me)||isNaN(Re)||isNaN(Me)||!Li(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ct=4/3*(Math.SQRT2-1)*Re,Qt=4/3*(Math.SQRT2-1)*Me;return To(Z+Re,me),Ll(Z+Re,me-Qt,Z+Ct,me-Me,Z,me-Me),Ll(Z-Ct,me-Me,Z-Re,me-Qt,Z-Re,me),Ll(Z-Re,me+Qt,Z-Ct,me+Me,Z,me+Me),Ll(Z+Ct,me+Me,Z+Re,me+Qt,Z+Re,me),Bo(Ke),this},m.__private__.circle=m.circle=function(Z,me,Re,Me){if(isNaN(Z)||isNaN(me)||isNaN(Re)||!Li(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Z,me,Re,Re,Me)},m.setFont=function(Z,me,Re){return Re&&(me=T(me,Re)),Lt=lu(Z,me,{disableWarning:!1}),this};var vs=m.__private__.getFont=m.getFont=function(){return Br[lu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var Z,me,Re={};for(Z in Kr)if(Kr.hasOwnProperty(Z))for(me in Re[Z]=[],Kr[Z])Kr[Z].hasOwnProperty(me)&&Re[Z].push(me);return Re},m.addFont=function(Z,me,Re,Me,Ke){var Ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ct.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&Ct.indexOf(arguments[3])==-1&&(Re=T(Re,Me)),Ke=Ke||"Identity-H",su.call(this,Z,me,Re,Ke)};var yn,uu=e.lineWidth||.200025,Ml=m.__private__.getLineWidth=m.getLineWidth=function(){return uu},EA=m.__private__.setLineWidth=m.setLineWidth=function(Z){return uu=Z,Ae(C(k(Z))+" w"),this};m.__private__.setLineDash=yr.API.setLineDash=yr.API.setLineDashPattern=function(Z,me){if(Z=Z||[],me=me||0,isNaN(me)||!Array.isArray(Z))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Z=Z.map(function(Re){return C(k(Re))}).join(" "),me=C(k(me)),Ae("["+Z+"] "+me+" d"),this};var ad=m.__private__.getLineHeight=m.getLineHeight=function(){return de*yn};m.__private__.getLineHeight=m.getLineHeight=function(){return de*yn};var sd=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(Z){return typeof(Z=Z||1.15)=="number"&&(yn=Z),this},Al=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return yn};sd(e.lineHeight);var Ui=m.__private__.getHorizontalCoordinate=function(Z){return k(Z)},bs=m.__private__.getVerticalCoordinate=function(Z){return _===w.ADVANCED?Z:vr[R].mediaBox.topRightY-vr[R].mediaBox.bottomLeftY-k(Z)},t0=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(Z){return C(Ui(Z))},du=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(Z){return C(bs(Z))},Ci=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Te(Ci)},m.__private__.setStrokeColor=m.setDrawColor=function(Z,me,Re,Me){return Ci=Oe({ch1:Z,ch2:me,ch3:Re,ch4:Me,pdfColorType:"draw",precision:2}),Ae(Ci),this};var fu=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Te(fu)},m.__private__.setFillColor=m.setFillColor=function(Z,me,Re,Me){return fu=Oe({ch1:Z,ch2:me,ch3:Re,ch4:Me,pdfColorType:"fill",precision:2}),Ae(fu),this};var vc=e.textColor||"0 g",of=m.__private__.getTextColor=m.getTextColor=function(){return Te(vc)};m.__private__.setTextColor=m.setTextColor=function(Z,me,Re,Me){return vc=Oe({ch1:Z,ch2:me,ch3:Re,ch4:Me,pdfColorType:"text",precision:3}),this};var id=e.charSpace,lf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(id||0)};m.__private__.setCharSpace=m.setCharSpace=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return id=Z,this};var NA=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(Z){var me=m.CapJoinStyles[Z];if(me===void 0)throw new Error("Line cap style of '"+Z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return NA=me,Ae(me+" J"),this};var od=0;m.__private__.setLineJoin=m.setLineJoin=function(Z){var me=m.CapJoinStyles[Z];if(me===void 0)throw new Error("Line join style of '"+Z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return od=me,Ae(me+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(Z){if(Z=Z||0,isNaN(Z))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ae(C(k(Z))+" M"),this},m.GState=TS,m.setGState=function(Z){(Z=typeof Z=="string"?pn[la[Z]]:Au(null,Z)).equals(Ta)||(Ae("/"+Z.id+" gs"),Ta=Z)};var Au=function(Z,me){if(!Z||!la[Z]){var Re=!1;for(var Me in pn)if(pn.hasOwnProperty(Me)&&pn[Me].equals(me)){Re=!0;break}if(Re)me=pn[Me];else{var Ke="GS"+(Object.keys(pn).length+1).toString(10);pn[Ke]=me,me.id=Ke}return Z&&(la[Z]=me.id),rt.publish("addGState",me),me}};m.addGState=function(Z,me){return Au(Z,me),this},m.saveGraphicsState=function(){return Ae("q"),Fn.push({key:Lt,size:de,color:vc}),this},m.restoreGraphicsState=function(){Ae("Q");var Z=Fn.pop();return Lt=Z.key,de=Z.size,vc=Z.color,Ta=null,this},m.setCurrentTransformationMatrix=function(Z){return Ae(Z.toString()+" cm"),this},m.comment=function(Z){return Ae("#"+Z),this};var ld=function(Z,me){var Re=Z||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Re},set:function(Ct){isNaN(Ct)||(Re=parseFloat(Ct))}});var Me=me||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(Ct){isNaN(Ct)||(Me=parseFloat(Ct))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(Ct){Ke=Ct.toString()}}),this},cf=function(Z,me,Re,Me){ld.call(this,Z,me),this.type="rect";var Ke=Re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(Qt){isNaN(Qt)||(Ke=parseFloat(Qt))}});var Ct=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ct},set:function(Qt){isNaN(Qt)||(Ct=parseFloat(Qt))}}),this},cd=function(){this.page=an,this.currentPage=R,this.pages=Ce.slice(0),this.pagesContext=vr.slice(0),this.x=_r,this.y=qt,this.matrix=tn,this.width=mu(R),this.height=Qi(R),this.outputDestination=Be,this.id="",this.objectNumber=-1};cd.prototype.restore=function(){an=this.page,R=this.currentPage,vr=this.pagesContext,Ce=this.pages,_r=this.x,qt=this.y,tn=this.matrix,ud(R,this.width),uf(R,this.height),Be=this.outputDestination};var hu=function(Z,me,Re,Me,Ke){Nt.push(new cd),an=R=0,Ce=[],_r=Z,qt=me,tn=Ke,Ni([Re,Me])},r0=function(Z){if(bt[Z])Nt.pop().restore();else{var me=new cd,Re="Xo"+(Object.keys(Ze).length+1).toString(10);me.id=Re,bt[Z]=Re,Ze[Re]=me,rt.publish("addFormObject",me),Nt.pop().restore()}};for(var bc in m.beginFormObject=function(Z,me,Re,Me,Ke){return hu(Z,me,Re,Me,Ke),this},m.endFormObject=function(Z){return r0(Z),this},m.doFormObject=function(Z,me){var Re=Ze[bt[Z]];return Ae("q"),Ae(me.toString()+" cm"),Ae("/"+Re.id+" Do"),Ae("Q"),this},m.getFormObject=function(Z){var me=Ze[bt[Z]];return{x:me.x,y:me.y,width:me.width,height:me.height,matrix:me.matrix}},m.save=function(Z,me){return Z=Z||"generated.pdf",(me=me||{}).returnPromise=me.returnPromise||!1,me.returnPromise===!1?(Rp(sf(mc()),Z),typeof Rp.unload=="function"&&Vr.setTimeout&&setTimeout(Rp.unload,911),this):new Promise(function(Re,Me){try{var Ke=Rp(sf(mc()),Z);typeof Rp.unload=="function"&&Vr.setTimeout&&setTimeout(Rp.unload,911),Re(Ke)}catch(Ct){Me(Ct.message)}})},yr.API)yr.API.hasOwnProperty(bc)&&(bc==="events"&&yr.API.events.length?function(Z,me){var Re,Me,Ke;for(Ke=me.length-1;Ke!==-1;Ke--)Re=me[Ke][0],Me=me[Ke][1],Z.subscribe.apply(Z,[Re].concat(typeof Me=="function"?[Me]:Me))}(rt,yr.API.events):m[bc]=yr.API[bc]);var mu=m.getPageWidth=function(Z){return(vr[Z=Z||R].mediaBox.topRightX-vr[Z].mediaBox.bottomLeftX)/Et},ud=m.setPageWidth=function(Z,me){vr[Z].mediaBox.topRightX=me*Et+vr[Z].mediaBox.bottomLeftX},Qi=m.getPageHeight=function(Z){return(vr[Z=Z||R].mediaBox.topRightY-vr[Z].mediaBox.bottomLeftY)/Et},uf=m.setPageHeight=function(Z,me){vr[Z].mediaBox.topRightY=me*Et+vr[Z].mediaBox.bottomLeftY};return m.internal={pdfEscape:On,getStyle:jo,getFont:vs,getFontSize:De,getCharSpace:lf,getTextColor:of,getLineHeight:ad,getLineHeightFactor:Al,getLineWidth:Ml,write:ve,getHorizontalCoordinate:Ui,getVerticalCoordinate:bs,getCoordinateString:t0,getVerticalCoordinateString:du,collections:{},newObject:Or,newAdditionalObject:Fe,newObjectDeferred:Yr,newObjectDeferredBegin:pe,getFilters:et,putStream:ft,events:rt,scaleFactor:Et,pageSize:{getWidth:function(){return mu(R)},setWidth:function(Z){ud(R,Z)},getHeight:function(){return Qi(R)},setHeight:function(Z){uf(R,Z)}},encryptionOptions:d,encryption:ca,getEncryptor:gc,output:pc,getNumberOfPages:Vn,pages:Ce,out:Ae,f2:L,f3:P,getPageInfo:Dl,getPageInfoByObjId:Dr,getCurrentPageInfo:Pl,getPDFVersion:x,Point:ld,Rectangle:cf,Matrix:yt,hasHotfix:Ol},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return mu(R)},set:function(Z){ud(R,Z)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Qi(R)},set:function(Z){uf(R,Z)},enumerable:!0,configurable:!0}),vA.call(m,Ue),Lt="F1",iu(a,r),rt.publish("initialized"),m}Av.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Av.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Av.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Av.prototype.processOwnerPassword=function(e,t){return LO(RO(t).substr(0,5),e)},Av.prototype.encryptor=function(e,t){var r=RO(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return LO(r,n)}},TS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ga(e)!==ga(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},yr.API={events:[]},yr.version="2.5.2";var Ss=yr.API,xM=1,ax=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qx=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rn=function(e){return e.toFixed(2)},M0=function(e){return e.toFixed(5)};Ss.__acroform__={};var Ac=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},gK=function(e){return e*xM},Mf=function(e){var t=new qle,r=gr.internal.getHeight(e)||0,n=gr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(rn(n)),Number(rn(r))],t},RWe=Ss.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},LWe=Ss.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},MWe=Ss.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Xs=Ss.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return MWe(e,t-1)},Ys=Ss.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return RWe(e,t-1)},Js=Ss.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return LWe(e,t-1)},UWe=Ss.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(rn(c.lowerLeft_X)),Number(rn(c.lowerLeft_Y)),Number(rn(c.upperRight_X)),Number(rn(c.upperRight_Y))]},QWe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=MO(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+rn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Mf(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},MO=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,o=gr.internal.getHeight(e)||0;o=o<0?-o:o;var l=gr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,k,U){if(P+1<a.length){var Q=k+" "+a[P+1][0];return kC(Q,e,U).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=kC("3",e,s).height,h=e.multiline?o-s:(o-f)/2,m=h+=2,g=0,x=0,v=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+kC(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",w=0,_=0;_<a.length;_++)if(a.hasOwnProperty(_)){var F=!1;if(a[_].length!==1&&v!==a[_].length-1){if((f+2)*(w+2)+2>o)continue e;y+=a[_][v],F=!0,x=_,_--}else{y=(y+=a[_][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var B=parseInt(_),T=c(B,y,s),C=_>=a.length-1;if(T&&!C){y+=" ",v=0;continue}if(T||C){if(C)x=B;else if(e.multiline&&(f+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>o)continue e;x=B}}for(var S="",j=g;j<=x;j++){var L=a[j];if(e.multiline){if(j===x){S+=L[v]+" ",v=(v+1)%L.length;continue}if(j===g){S+=L[L.length-1]+" ";continue}}S+=L[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=kC(S,e,s).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=rn(u)+" "+rn(m)+` Td
`,t+="("+ax(S)+`) Tj
`,t+=-rn(u)+` 0 Td
`,m=-(s+2),d=0,g=F?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},kC=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},HWe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},VWe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},zWe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ga(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},$We=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Zd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(HWe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xM=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Kle,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&VWe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=UWe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=gr.createDefaultAppearanceStream(l),ga(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=QWe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var g=m[o];typeof g=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&zWe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Gle=Ss.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ga(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+ax(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},TI=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+ax(n(e))+")"},Zf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Zf.prototype.toString=function(){return this.objId+" 0 R"},Zf.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Zf.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:Gle(a,this.objId,this.scope)}):a instanceof Zf?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var qle=function(){Zf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Ac(qle,Zf);var Kle=function(){Zf.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ax(r(e))+")"}},set:function(r){e=r}})};Ac(Kle,Zf);var Zd=function e(){Zf.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Xs(t,3)},set:function(y){y?this.F=Ys(t,3):this.F=Js(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof IS)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+ax(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/xM:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof IS||this instanceof fg))return TI(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Yi?h:TI(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof Yi?y:y.substr(0,1)==="("?Qx(y.substr(1,y.length-2)):Qx(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi?Qx(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Yi?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Yi?m:TI(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Yi?y:y.substr(0,1)==="("?Qx(y.substr(1,y.length-2)):Qx(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi?Qx(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Yi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,1)},set:function(y){y?this.Ff=Ys(this.Ff,1):this.Ff=Js(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,2)},set:function(y){y?this.Ff=Ys(this.Ff,2):this.Ff=Js(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,3)},set:function(y){y?this.Ff=Ys(this.Ff,3):this.Ff=Js(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};Ac(Zd,Zf);var zv=function(){Zd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Gle(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,18)},set:function(r){r?this.Ff=Ys(this.Ff,18):this.Ff=Js(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ys(this.Ff,19):this.Ff=Js(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,20)},set:function(r){r?(this.Ff=Ys(this.Ff,20),t.sort()):this.Ff=Js(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,22)},set:function(r){r?this.Ff=Ys(this.Ff,22):this.Ff=Js(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,23)},set:function(r){r?this.Ff=Ys(this.Ff,23):this.Ff=Js(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,27)},set:function(r){r?this.Ff=Ys(this.Ff,27):this.Ff=Js(this.Ff,27)}}),this.hasAppearanceStream=!1};Ac(zv,Zd);var $v=function(){zv.call(this),this.fontName="helvetica",this.combo=!1};Ac($v,zv);var Gv=function(){$v.call(this),this.combo=!0};Ac(Gv,$v);var k5=function(){Gv.call(this),this.edit=!0};Ac(k5,Gv);var Yi=function(){Zd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,15)},set:function(r){r?this.Ff=Ys(this.Ff,15):this.Ff=Js(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,16)},set:function(r){r?this.Ff=Ys(this.Ff,16):this.Ff=Js(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,17)},set:function(r){r?this.Ff=Ys(this.Ff,17):this.Ff=Js(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,26)},set:function(r){r?this.Ff=Ys(this.Ff,26):this.Ff=Js(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+ax(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ga(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Ac(Yi,Zd);var j5=function(){Yi.call(this),this.pushButton=!0};Ac(j5,Yi);var qv=function(){Yi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ac(qv,Yi);var IS=function(){var e,t;Zd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+ax(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){ga(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=gr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ac(IS,Zd),qv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},qv.prototype.createOption=function(e){var t=new IS;return t.Parent=this,t.optionName=e,this.Kids.push(t),GWe.call(this.scope,t),t};var B5=function(){Yi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=gr.CheckBox.createAppearanceStream()};Ac(B5,Yi);var fg=function(){Zd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,13)},set:function(t){t?this.Ff=Ys(this.Ff,13):this.Ff=Js(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,21)},set:function(t){t?this.Ff=Ys(this.Ff,21):this.Ff=Js(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,23)},set:function(t){t?this.Ff=Ys(this.Ff,23):this.Ff=Js(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,24)},set:function(t){t?this.Ff=Ys(this.Ff,24):this.Ff=Js(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,25)},set:function(t){t?this.Ff=Ys(this.Ff,25):this.Ff=Js(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,26)},set:function(t){t?this.Ff=Ys(this.Ff,26):this.Ff=Js(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ac(fg,Zd);var T5=function(){fg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,14)},set:function(e){e?this.Ff=Ys(this.Ff,14):this.Ff=Js(this.Ff,14)}}),this.password=!0};Ac(T5,fg);var gr={CheckBox:{createAppearanceStream:function(){return{N:{On:gr.CheckBox.YesNormal},D:{On:gr.CheckBox.YesPushDown,Off:gr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Mf(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=MO(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+rn(gr.internal.getWidth(e))+" "+rn(gr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+rn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Mf(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=gr.internal.getHeight(e),o=gr.internal.getWidth(e),l=MO(e,e.caption);return a.push("1 g"),a.push("0 0 "+rn(o)+" "+rn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+rn(o-1)+" "+rn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+rn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Mf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+rn(gr.internal.getWidth(e))+" "+rn(gr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:gr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=gr.RadioButton.Circle.YesNormal,t.D[e]=gr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Mf(e);t.scope=e.scope;var r=[],n=gr.internal.getWidth(e)<=gr.internal.getHeight(e)?gr.internal.getWidth(e)/4:gr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=gr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+M0(gr.internal.getWidth(e)/2)+" "+M0(gr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Mf(e);t.scope=e.scope;var r=[],n=gr.internal.getWidth(e)<=gr.internal.getHeight(e)?gr.internal.getWidth(e)/4:gr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*gr.internal.Bezier_C).toFixed(5)),o=Number((n*gr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+M0(gr.internal.getWidth(e)/2)+" "+M0(gr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+M0(gr.internal.getWidth(e)/2)+" "+M0(gr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Mf(e);t.scope=e.scope;var r=[],n=gr.internal.getWidth(e)<=gr.internal.getHeight(e)?gr.internal.getWidth(e)/4:gr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*gr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+M0(gr.internal.getWidth(e)/2)+" "+M0(gr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:gr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=gr.RadioButton.Cross.YesNormal,t.D[e]=gr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Mf(e);t.scope=e.scope;var r=[],n=gr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+rn(gr.internal.getWidth(e)-2)+" "+rn(gr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(rn(n.x1.x)+" "+rn(n.x1.y)+" m"),r.push(rn(n.x2.x)+" "+rn(n.x2.y)+" l"),r.push(rn(n.x4.x)+" "+rn(n.x4.y)+" m"),r.push(rn(n.x3.x)+" "+rn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Mf(e);t.scope=e.scope;var r=gr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+rn(gr.internal.getWidth(e))+" "+rn(gr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+rn(gr.internal.getWidth(e)-2)+" "+rn(gr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(rn(r.x1.x)+" "+rn(r.x1.y)+" m"),n.push(rn(r.x2.x)+" "+rn(r.x2.y)+" l"),n.push(rn(r.x4.x)+" "+rn(r.x4.y)+" m"),n.push(rn(r.x3.x)+" "+rn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Mf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+rn(gr.internal.getWidth(e))+" "+rn(gr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};gr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=gr.internal.getWidth(e),r=gr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},gr.internal.getWidth=function(e){var t=0;return ga(e)==="object"&&(t=gK(e.Rect[2])),t},gr.internal.getHeight=function(e){var t=0;return ga(e)==="object"&&(t=gK(e.Rect[3])),t};var GWe=Ss.addField=function(e){if($We(this,e),!(e instanceof Zd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ss.AcroFormChoiceField=zv,Ss.AcroFormListBox=$v,Ss.AcroFormComboBox=Gv,Ss.AcroFormEditBox=k5,Ss.AcroFormButton=Yi,Ss.AcroFormPushButton=j5,Ss.AcroFormRadioButton=qv,Ss.AcroFormCheckBox=B5,Ss.AcroFormTextField=fg,Ss.AcroFormPasswordField=T5,Ss.AcroFormAppearance=gr,Ss.AcroForm={ChoiceField:zv,ListBox:$v,ComboBox:Gv,EditBox:k5,Button:Yi,PushButton:j5,RadioButton:qv,CheckBox:B5,TextField:fg,PasswordField:T5,Appearance:gr},yr.AcroForm={ChoiceField:zv,ListBox:$v,ComboBox:Gv,EditBox:k5,Button:Yi,PushButton:j5,RadioButton:qv,CheckBox:B5,TextField:fg,PasswordField:T5,Appearance:gr};yr.AcroForm;function Wle(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,k){var U,Q,K,H,q,z=t;if((k=k||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(T(P))for(q in r)for(K=r[q],U=0;U<K.length;U+=1){for(H=!0,Q=0;Q<K[U].length;Q+=1)if(K[U][Q]!==void 0&&K[U][Q]!==P[Q]){H=!1;break}if(H===!0){z=q;break}}else for(q in r)for(K=r[q],U=0;U<K.length;U+=1){for(H=!0,Q=0;Q<K[U].length;Q+=1)if(K[U][Q]!==void 0&&K[U][Q]!==P.charCodeAt(Q)){H=!1;break}if(H===!0){z=q;break}}return z===t&&k!==t&&(z=k),z},a=function P(k){for(var U=this.internal.write,Q=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:k.width}),H.push({key:"Height",value:k.height}),k.colorSpace===v.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===v.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var q="",z=0,W=k.transparency.length;z<W;z++)q+=k.transparency[z]+" "+k.transparency[z]+" ";H.push({key:"Mask",value:"["+q+"]"})}k.sMask!==void 0&&H.push({key:"SMask",value:k.objectId+1+" 0 R"});var ee=k.filter!==void 0?["/"+k.filter]:void 0;if(Q({data:k.data,additionalKeyValues:H,alreadyAppliedFilters:ee,objectId:k.objectId}),U("endobj"),"sMask"in k&&k.sMask!==void 0){var X="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,O={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:X,data:k.sMask};"filter"in k&&(O.filter=k.filter),P.call(this,O)}if(k.colorSpace===v.INDEXED){var R=this.internal.newObject();Q({data:S(new Uint8Array(k.palette)),objectId:R}),U("endobj")}},s=function(){var P=this.internal.collections.addImage_images;for(var k in P)a.call(this,P[k])},o=function(){var P,k=this.internal.collections.addImage_images,U=this.internal.write;for(var Q in k)U("/I"+(P=k[Q]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(P){return typeof e["process"+P.toUpperCase()]=="function"},f=function(P){return ga(P)==="object"&&P.nodeType===1},h=function(P,k){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var U=""+P.getAttribute("src");if(U.indexOf("data:image/")===0)return Iw(unescape(U).split("base64,").pop());var Q=e.loadFile(U,!0);if(Q!==void 0)return Q}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var K;switch(k){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;case"JPEG":case"JPG":default:K="image/jpeg"}return Iw(P.toDataURL(K,1).split("base64,").pop())}},m=function(P){var k=this.internal.collections.addImage_images;if(k){for(var U in k)if(P===k[U].alias)return k[U]}},g=function(P,k,U){return P||k||(P=-96,k=-96),P<0&&(P=-1*U.width*72/P/this.internal.scaleFactor),k<0&&(k=-1*U.height*72/k/this.internal.scaleFactor),P===0&&(P=k*U.width/U.height),k===0&&(k=P*U.height/U.width),[P,k]},x=function(P,k,U,Q,K,H){var q=g.call(this,U,Q,K),z=this.internal.getCoordinateString,W=this.internal.getVerticalCoordinateString,ee=c.call(this);if(U=q[0],Q=q[1],ee[K.index]=K,H){H*=Math.PI/180;var X=Math.cos(H),O=Math.sin(H),R=function(Y){return Y.toFixed(4)},G=[R(X),R(O),R(-1*O),R(X),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,z(P),W(k+Q),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([z(U),"0","0",z(Q),"0","0","cm"].join(" "))):this.internal.write([z(U),"0","0",z(Q),z(P),W(k+Q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(P){var k,U,Q=0;if(typeof P=="string")for(U=P.length,k=0;k<U;k++)Q=(Q<<5)-Q+P.charCodeAt(k),Q|=0;else if(T(P))for(U=P.byteLength/2,k=0;k<U;k++)Q=(Q<<5)-Q+P[k],Q|=0;return Q},_=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var k=!0;return P.length===0&&(k=!1),P.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(k=!1),k},F=e.__addimage__.extractImageFromDataUrl=function(P){var k=(P=P||"").split("base64,"),U=null;if(k.length===2){var Q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(k[0]);Array.isArray(Q)&&(U={mimeType:Q[1],charset:Q[2],data:k[1]})}return U},B=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return B()&&P instanceof ArrayBuffer};var T=e.__addimage__.isArrayBufferView=function(P){return B()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},C=e.__addimage__.binaryStringToUint8Array=function(P){for(var k=P.length,U=new Uint8Array(k),Q=0;Q<k;Q++)U[Q]=P.charCodeAt(Q);return U},S=e.__addimage__.arrayBufferToBinaryString=function(P){for(var k="",U=T(P)?P:new Uint8Array(P),Q=0;Q<U.length;Q+=8192)k+=String.fromCharCode.apply(null,U.subarray(Q,Q+8192));return k};e.addImage=function(){var P,k,U,Q,K,H,q,z,W;if(typeof arguments[1]=="number"?(k=t,U=arguments[1],Q=arguments[2],K=arguments[3],H=arguments[4],q=arguments[5],z=arguments[6],W=arguments[7]):(k=arguments[1],U=arguments[2],Q=arguments[3],K=arguments[4],H=arguments[5],q=arguments[6],z=arguments[7],W=arguments[8]),ga(P=arguments[0])==="object"&&!f(P)&&"imageData"in P){var ee=P;P=ee.imageData,k=ee.format||k||t,U=ee.x||U||0,Q=ee.y||Q||0,K=ee.w||ee.width||K,H=ee.h||ee.height||H,q=ee.alias||q,z=ee.compression||z,W=ee.rotation||ee.angle||W}var X=this.internal.getFilters();if(z===void 0&&X.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(U)||isNaN(Q))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var O=j.call(this,P,k,q,z);return x.call(this,U,Q,K,H,O,W),this};var j=function(P,k,U,Q){var K,H,q;if(typeof P=="string"&&n(P)===t){P=unescape(P);var z=L(P,!1);(z!==""||(z=e.loadFile(P,!0))!==void 0)&&(P=z)}if(f(P)&&(P=h(P,k)),k=n(P,k),!d(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((q=U)==null||q.length===0)&&(U=function(W){return typeof W=="string"||T(W)?w(W):T(W.data)?w(W.data):null}(P)),(K=m.call(this,U))||(B()&&(P instanceof Uint8Array||k==="RGBA"||(H=P,P=C(P))),K=this["process"+k.toUpperCase()](P,u.call(this),U,function(W){return W&&typeof W=="string"&&(W=W.toUpperCase()),W in e.image_compression?W:y.NONE}(Q),H)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},L=e.__addimage__.convertBase64ToBinaryString=function(P,k){var U;k=typeof k!="boolean"||k;var Q,K="";if(typeof P=="string"){Q=(U=F(P))!==null?U.data:P;try{K=Iw(Q)}catch(H){if(k)throw _(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};e.getImageProperties=function(P){var k,U,Q="";if(f(P)&&(P=h(P)),typeof P=="string"&&n(P)===t&&((Q=L(P,!1))===""&&(Q=e.loadFile(P)||""),P=Q),U=n(P),!d(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!B()||P instanceof Uint8Array||(P=C(P)),!(k=this["process"+U.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=U,k}})(yr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};yr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(y(n.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(y(w))+") >>",x.content=s;var _=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var F=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var B=this.annotations._nameMap[n.options.name];n.options.pageNumber=B.page,n.options.top=B.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var T=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+T+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},e.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(yr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,w="",_=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(_++,typeof(y=y[x.charCodeAt(v)])=="number"&&(w+=String.fromCharCode(y),y=r,_=0),v===x.length-1&&(y=r,w+=x.charAt(v-(_-1)),v-=_-1,_=0)):(y=r,w+=x.charAt(v-_),v-=_,_=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,v,y){return o(x)?s(x)===!1?-1:!u(x)||!o(v)&&!o(y)||!o(y)&&l(v)||l(x)&&!o(v)||l(x)&&c(v)||l(x)&&l(v)?0:d(x)&&o(v)&&!l(v)&&o(y)&&u(y)?3:l(x)||!o(y)?1:2:-1},m=function(x){var v=0,y=0,w=0,_="",F="",B="",T=(x=x||"").split("\\s+"),C=[];for(v=0;v<T.length;v+=1){for(C.push(""),y=0;y<T[v].length;y+=1)_=T[v][y],F=T[v][y-1],B=T[v][y+1],o(_)?(w=h(_,F,B),C[v]+=w!==-1?String.fromCharCode(t[_.charCodeAt(0)][w]):_):C[v]+=_;C[v]=f(C[v])}return C.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var w=0;for(y=[],w=0;w<v.length;w+=1)Array.isArray(v[w])?y.push([m(v[w][0]),v[w][1],v[w][2]]):y.push([m(v[w])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(yr.API),yr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(yr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,F){return _.concat(v.splitTextToSize(F,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)m<(x=this.getStringUnitWidth(c[w],{font:f})*d)&&(m=x);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,x,v,y=[],w=[],_=[],F={},B={},T=[],C=[],S=(h=h||{}).autoSize||!1,j=h.printHeaders!==!1,L=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,P=h.margins||Object.assign({width:this.getPageWidth()},t),k=typeof h.padding=="number"?h.padding:3,U=h.headerBackgroundColor||"#c8c8c8",Q=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=Q,this.setFontSize(L),f==null)w=y=Object.keys(d[0]),_=y.map(function(){return"left"});else if(Array.isArray(f)&&ga(f[0])==="object")for(y=f.map(function(ee){return ee.name}),w=f.map(function(ee){return ee.prompt||ee.name||""}),_=f.map(function(ee){return ee.align||"left"}),m=0;m<f.length;m+=1)B[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,_=y.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(F[v=y[m]]=d.map(function(ee){return ee[v]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(w[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=F[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)T.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[v]=Math.max.apply(null,T)+k+k,T=[]}if(j){var K={};for(m=0;m<y.length;m+=1)K[y[m]]={},K[y[m]].text=w[m],K[y[m]].align=_[m];var H=l.call(this,K,B);C=y.map(function(ee){return new s(c,u,B[ee],H,K[ee].text,void 0,K[ee].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var q=f.reduce(function(ee,X){return ee[X.name]=X.align,ee},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var z=l.call(this,d[m],B);for(x=0;x<y.length;x+=1){var W=d[m][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:x,data:W},this),o.call(this,new s(c,u,B[y[x]],z,W,m+2,q[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(yr.API);var Xle={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Yle=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],UO=Wle(Yle),Jle=[100,200,300,400,500,600,700,800,900],qWe=Wle(Jle);function QO(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Xle[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof UO[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function xK(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var KWe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},vK={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function bK(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function WWe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},KWe,r.genericFontFamilies||{}),s=null,o=null,l=0;l<t.length;++l)if(a[(s=QO(t[l])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+bK(s)+"' and default family '"+n+"'.");if(o=function(c,u){if(u[c])return u[c];var d=UO[c],f=d<=UO.normal?-1:1,h=xK(u,Yle,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,o),o=function(c,u){if(u[c])return u[c];for(var d=Xle[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=qWe[c],f=xK(u,Jle,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+bK(s)+"'.");return o}function yK(e){return e.trimLeft()}function XWe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function YWe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var jC,wK,EK,II=["times"];(function(e){var t,r,n,a,s,o,l,c,u,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var R=O;Object.defineProperty(this,"pdf",{get:function(){return R}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(_e){G=!!_e}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(_e){Y=!!_e}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(_e){isNaN(_e)||(te=_e)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(_e){isNaN(_e)||(ae=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var Ae;typeof _e=="number"?Ae=[_e,_e,_e,_e]:((Ae=new Array(4))[0]=_e[0],Ae[1]=_e.length>=2?_e[1]:Ae[0],Ae[2]=_e.length>=3?_e[2]:Ae[0],Ae[3]=_e.length>=4?_e[3]:Ae[1]),u.margin=Ae}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(_e){oe=_e}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(_e){ie=_e}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(_e){ue=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof d&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(_e){Ce=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var Ae;Ae=h(_e),this.ctx.fillStyle=Ae.style,this.ctx.isFillTransparent=Ae.a===0,this.ctx.fillOpacity=Ae.a,this.pdf.setFillColor(Ae.r,Ae.g,Ae.b,{a:Ae.a}),this.pdf.setTextColor(Ae.r,Ae.g,Ae.b,{a:Ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var Ae=h(_e);this.ctx.strokeStyle=Ae.style,this.ctx.isStrokeTransparent=Ae.a===0,this.ctx.strokeOpacity=Ae.a,Ae.a===0?this.pdf.setDrawColor(255,255,255):(Ae.a,this.pdf.setDrawColor(Ae.r,Ae.g,Ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var ne=null;function Be(_e,Ae){if(ne===null){var ve=function(Pe){var Ue=[];return Object.keys(Pe).forEach(function(de){Pe[de].forEach(function(be){var De=null;switch(be){case"bold":De={family:de,weight:"bold"};break;case"italic":De={family:de,style:"italic"};break;case"bolditalic":De={family:de,weight:"bold",style:"italic"};break;case"":case"normal":De={family:de}}De!==null&&(De.ref={name:de,style:be},Ue.push(De))})}),Ue}(_e.getFontList());ne=function(Pe){for(var Ue={},de=0;de<Pe.length;++de){var be=QO(Pe[de]),De=be.family,Ve=be.stretch,We=be.style,Je=be.weight;Ue[De]=Ue[De]||{},Ue[De][Ve]=Ue[De][Ve]||{},Ue[De][Ve][We]=Ue[De][Ve][We]||{},Ue[De][Ve][We][Je]=be}return Ue}(ve.concat(Ae))}return ne}var je=null;Object.defineProperty(this,"fontFaces",{get:function(){return je},set:function(_e){ne=null,je=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var Ae;if(this.ctx.font=_e,(Ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var ve=Ae[1],Pe=(Ae[2],Ae[3]),Ue=Ae[4],de=(Ae[5],Ae[6]),be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ue)[2];Ue=Math.floor(be==="px"?parseFloat(Ue)*this.pdf.internal.scaleFactor:be==="em"?parseFloat(Ue)*this.pdf.getFontSize():parseFloat(Ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ue);var De=function(Tt){var Lt,Et,_r=[],qt=Tt.trim();if(qt==="")return II;if(qt in vK)return[vK[qt]];for(;qt!=="";){switch(Et=null,Lt=(qt=yK(qt)).charAt(0)){case'"':case"'":Et=XWe(qt.substring(1),Lt);break;default:Et=YWe(qt)}if(Et===null||(_r.push(Et[0]),(qt=yK(Et[1]))!==""&&qt.charAt(0)!==","))return II;qt=qt.replace(/^,/,"")}return _r}(de);if(this.fontFaces){var Ve=WWe(Be(this.pdf,this.fontFaces),De.map(function(Tt){return{family:Tt,stretch:"normal",weight:Pe,style:ve}}));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var We="";(Pe==="bold"||parseInt(Pe,10)>=700||ve==="bold")&&(We="bold"),ve==="italic"&&(We+="italic"),We.length===0&&(We="normal");for(var Je="",At={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},vt=0;vt<De.length;vt++){if(this.pdf.internal.getFont(De[vt],We,{noFallback:!0,disableWarning:!0})!==void 0){Je=De[vt];break}if(We==="bolditalic"&&this.pdf.internal.getFont(De[vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Je=De[vt],We="bold";else if(this.pdf.internal.getFont(De[vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Je=De[vt],We="normal";break}}if(Je===""){for(var wt=0;wt<De.length;wt++)if(At[De[wt]]){Je=At[De[wt]];break}}Je=Je===""?"Times":Je,this.pdf.setFont(Je,We)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,X.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,X.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){F.call(this,"fill",!1)},f.prototype.stroke=function(){F.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,R){if(isNaN(O)||isNaN(R))throw Sa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(O,R));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(O,R)},f.prototype.closePath=function(){var O=new o(0,0),R=0;for(R=this.path.length-1;R!==-1;R--)if(this.path[R].type==="begin"&&ga(this.path[R+1])==="object"&&typeof this.path[R+1].x=="number"){O=new o(this.path[R+1].x,this.path[R+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},f.prototype.lineTo=function(O,R){if(isNaN(O)||isNaN(R))throw Sa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(O,R));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,R,G,Y){if(isNaN(G)||isNaN(Y)||isNaN(O)||isNaN(R))throw Sa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(G,Y)),ae=this.ctx.transform.applyToPoint(new o(O,R));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},f.prototype.bezierCurveTo=function(O,R,G,Y,te,ae){if(isNaN(te)||isNaN(ae)||isNaN(O)||isNaN(R)||isNaN(G)||isNaN(Y))throw Sa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new o(te,ae)),ie=this.ctx.transform.applyToPoint(new o(O,R)),ue=this.ctx.transform.applyToPoint(new o(G,Y));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:ue.x,y2:ue.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(oe.x,oe.y)},f.prototype.arc=function(O,R,G,Y,te,ae){if(isNaN(O)||isNaN(R)||isNaN(G)||isNaN(Y)||isNaN(te))throw Sa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new o(O,R));O=oe.x,R=oe.y;var ie=this.ctx.transform.applyToPoint(new o(0,G)),ue=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(ie.x-ue.x,2)+Math.pow(ie.y-ue.y,2))}Math.abs(te-Y)>=2*Math.PI&&(Y=0,te=2*Math.PI),this.path.push({type:"arc",x:O,y:R,radius:G,startAngle:Y,endAngle:te,counterclockwise:ae})},f.prototype.arcTo=function(O,R,G,Y,te){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,R,G,Y){if(isNaN(O)||isNaN(R)||isNaN(G)||isNaN(Y))throw Sa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,R),this.lineTo(O+G,R),this.lineTo(O+G,R+Y),this.lineTo(O,R+Y),this.lineTo(O,R),this.lineTo(O+G,R),this.lineTo(O,R)},f.prototype.fillRect=function(O,R,G,Y){if(isNaN(O)||isNaN(R)||isNaN(G)||isNaN(Y))throw Sa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,R,G,Y),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},f.prototype.strokeRect=function(O,R,G,Y){if(isNaN(O)||isNaN(R)||isNaN(G)||isNaN(Y))throw Sa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(O,R,G,Y),this.stroke())},f.prototype.clearRect=function(O,R,G,Y){if(isNaN(O)||isNaN(R)||isNaN(G)||isNaN(Y))throw Sa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,R,G,Y))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(R),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(R),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(O){var R,G,Y,te;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))R=0,G=0,Y=0,te=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(ae!==null)R=parseInt(ae[1]),G=parseInt(ae[2]),Y=parseInt(ae[3]),te=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)R=parseInt(ae[1]),G=parseInt(ae[2]),Y=parseInt(ae[3]),te=parseFloat(ae[4]);else{if(te=1,typeof O=="string"&&O.charAt(0)!=="#"){var oe=new Vle(O);O=oe.ok?oe.toHex():"#000000"}O.length===4?(R=O.substring(1,2),R+=R,G=O.substring(2,3),G+=G,Y=O.substring(3,4),Y+=Y):(R=O.substring(1,3),G=O.substring(3,5),Y=O.substring(5,7)),R=parseInt(R,16),G=parseInt(G,16),Y=parseInt(Y,16)}}return{r:R,g:G,b:Y,a:te,style:O}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,R,G,Y){if(isNaN(R)||isNaN(G)||typeof O!="string")throw Sa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!m.call(this)){var te=z(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;k.call(this,{text:O,x:R,y:G,scale:ae,angle:te,align:this.textAlign,maxWidth:Y})}},f.prototype.strokeText=function(O,R,G,Y){if(isNaN(R)||isNaN(G)||typeof O!="string")throw Sa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){Y=isNaN(Y)?void 0:Y;var te=z(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;k.call(this,{text:O,x:R,y:G,scale:ae,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:Y})}},f.prototype.measureText=function(O){if(typeof O!="string")throw Sa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var R=this.pdf,G=this.pdf.internal.scaleFactor,Y=R.internal.getFontSize(),te=R.getStringUnitWidth(O)*Y/R.internal.scaleFactor,ae=function(oe){var ie=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this};return new ae({width:te*=Math.round(96*G/72*1e4)/1e4})},f.prototype.scale=function(O,R){if(isNaN(O)||isNaN(R))throw Sa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new c(O,0,0,R,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.rotate=function(O){if(isNaN(O))throw Sa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var R=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(R)},f.prototype.translate=function(O,R){if(isNaN(O)||isNaN(R))throw Sa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new c(1,0,0,1,O,R);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.transform=function(O,R,G,Y,te,ae){if(isNaN(O)||isNaN(R)||isNaN(G)||isNaN(Y)||isNaN(te)||isNaN(ae))throw Sa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new c(O,R,G,Y,te,ae);this.ctx.transform=this.ctx.transform.multiply(oe)},f.prototype.setTransform=function(O,R,G,Y,te,ae){O=isNaN(O)?1:O,R=isNaN(R)?0:R,G=isNaN(G)?0:G,Y=isNaN(Y)?1:Y,te=isNaN(te)?0:te,ae=isNaN(ae)?0:ae,this.ctx.transform=new c(O,R,G,Y,te,ae)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,R,G,Y,te,ae,oe,ie,ue){var Ce=this.pdf.getImageProperties(O),ne=1,Be=1,je=1,_e=1;Y!==void 0&&ie!==void 0&&(je=ie/Y,_e=ue/te,ne=Ce.width/Y*ie/Y,Be=Ce.height/te*ue/te),ae===void 0&&(ae=R,oe=G,R=0,G=0),Y!==void 0&&ie===void 0&&(ie=Y,ue=te),Y===void 0&&ie===void 0&&(ie=Ce.width,ue=Ce.height);for(var Ae,ve=this.ctx.transform.decompose(),Pe=z(ve.rotate.shx),Ue=new c,de=(Ue=(Ue=(Ue=Ue.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale)).applyToRectangle(new l(ae-R*je,oe-G*_e,Y*ne,te*Be)),be=v.call(this,de),De=[],Ve=0;Ve<be.length;Ve+=1)De.indexOf(be[Ve])===-1&&De.push(be[Ve]);if(_(De),this.autoPaging)for(var We=De[0],Je=De[De.length-1],At=We;At<Je+1;At++){this.pdf.setPage(At);var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=At===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Et=At===1?0:Tt+(At-2)*Lt;if(this.ctx.clip_path.length!==0){var _r=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Ae,this.posX+this.margin[3],-Et+wt+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=_r}var qt=JSON.parse(JSON.stringify(de));qt=w([qt],this.posX+this.margin[3],-Et+wt+this.ctx.prevPageLastElemOffset)[0];var tn=(At>We||At<Je)&&x.call(this);tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,Lt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",qt.x,qt.y,qt.w,qt.h,null,null,Pe),tn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",de.x,de.y,de.w,de.h,null,null,Pe)};var v=function(O,R,G){var Y=[];R=R||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":Y.push(Math.floor((O.y+te)/G)+1);break;case"arc":Y.push(Math.floor((O.y+te-O.radius)/G)+1),Y.push(Math.floor((O.y+te+O.radius)/G)+1);break;case"qct":var ae=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);Y.push(Math.floor((ae.y+te)/G)+1),Y.push(Math.floor((ae.y+ae.h+te)/G)+1);break;case"bct":var oe=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);Y.push(Math.floor((oe.y+te)/G)+1),Y.push(Math.floor((oe.y+oe.h+te)/G)+1);break;case"rect":Y.push(Math.floor((O.y+te)/G)+1),Y.push(Math.floor((O.y+O.h+te)/G)+1)}for(var ie=0;ie<Y.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<Y[ie];)y.call(this);return Y},y=function(){var O=this.fillStyle,R=this.strokeStyle,G=this.font,Y=this.lineCap,te=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=R,this.font=G,this.lineCap=Y,this.lineWidth=te,this.lineJoin=ae},w=function(O,R,G){for(var Y=0;Y<O.length;Y++)switch(O[Y].type){case"bct":O[Y].x2+=R,O[Y].y2+=G;case"qct":O[Y].x1+=R,O[Y].y1+=G;case"mt":case"lt":case"arc":default:O[Y].x+=R,O[Y].y+=G}return O},_=function(O){return O.sort(function(R,G){return R-G})},F=function(O,R){for(var G,Y,te=this.fillStyle,ae=this.strokeStyle,oe=this.lineCap,ie=this.lineWidth,ue=Math.abs(ie*this.ctx.transform.scaleX),Ce=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),je=[],_e=0;_e<Be.length;_e++)if(Be[_e].x!==void 0)for(var Ae=v.call(this,Be[_e]),ve=0;ve<Ae.length;ve+=1)je.indexOf(Ae[ve])===-1&&je.push(Ae[ve]);for(var Pe=0;Pe<je.length;Pe++)for(;this.pdf.internal.getNumberOfPages()<je[Pe];)y.call(this);if(_(je),this.autoPaging)for(var Ue=je[0],de=je[je.length-1],be=Ue;be<de+1;be++){this.pdf.setPage(be),this.fillStyle=te,this.strokeStyle=ae,this.lineCap=oe,this.lineWidth=ue,this.lineJoin=Ce;var De=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=be===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=be===1?0:We+(be-2)*Je;if(this.ctx.clip_path.length!==0){var vt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(G,this.posX+this.margin[3],-At+Ve+this.ctx.prevPageLastElemOffset),B.call(this,O,!0),this.path=vt}if(Y=JSON.parse(JSON.stringify(ne)),this.path=w(Y,this.posX+this.margin[3],-At+Ve+this.ctx.prevPageLastElemOffset),R===!1||be===0){var wt=(be>Ue||be<de)&&x.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,Je,null).clip().discardPath()),B.call(this,O,R),wt&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=ue,B.call(this,O,R),this.lineWidth=ie;this.path=ne},B=function(O,R){if((O!=="stroke"||R||!g.call(this))&&(O==="stroke"||R||!m.call(this))){for(var G,Y,te=[],ae=this.path,oe=0;oe<ae.length;oe++){var ie=ae[oe];switch(ie.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:ie,deltas:[],abs:[]});break;case"lt":var ue=te.length;if(ae[oe-1]&&!isNaN(ae[oe-1].x)&&(G=[ie.x-ae[oe-1].x,ie.y-ae[oe-1].y],ue>0)){for(;ue>=0;ue--)if(te[ue-1].close!==!0&&te[ue-1].begin!==!0){te[ue-1].deltas.push(G),te[ue-1].abs.push(ie);break}}break;case"bct":G=[ie.x1-ae[oe-1].x,ie.y1-ae[oe-1].y,ie.x2-ae[oe-1].x,ie.y2-ae[oe-1].y,ie.x-ae[oe-1].x,ie.y-ae[oe-1].y],te[te.length-1].deltas.push(G);break;case"qct":var Ce=ae[oe-1].x+2/3*(ie.x1-ae[oe-1].x),ne=ae[oe-1].y+2/3*(ie.y1-ae[oe-1].y),Be=ie.x+2/3*(ie.x1-ie.x),je=ie.y+2/3*(ie.y1-ie.y),_e=ie.x,Ae=ie.y;G=[Ce-ae[oe-1].x,ne-ae[oe-1].y,Be-ae[oe-1].x,je-ae[oe-1].y,_e-ae[oe-1].x,Ae-ae[oe-1].y],te[te.length-1].deltas.push(G);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(ie)}}Y=R?null:O==="stroke"?"stroke":"fill";for(var ve=!1,Pe=0;Pe<te.length;Pe++)if(te[Pe].arc)for(var Ue=te[Pe].abs,de=0;de<Ue.length;de++){var be=Ue[de];be.type==="arc"?S.call(this,be.x,be.y,be.radius,be.startAngle,be.endAngle,be.counterclockwise,void 0,R,!ve):U.call(this,be.x,be.y),ve=!0}else if(te[Pe].close===!0)this.pdf.internal.out("h"),ve=!1;else if(te[Pe].begin!==!0){var De=te[Pe].start.x,Ve=te[Pe].start.y;Q.call(this,te[Pe].deltas,De,Ve),ve=!0}Y&&j.call(this,Y),R&&L.call(this)}},T=function(O){var R=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=R*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-G;case"top":return O+R-G;case"hanging":return O+R-2*G;case"middle":return O+R/2-G;case"ideographic":return O;case"alphabetic":default:return O}},C=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(R,G){this.colorStops.push([R,G])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(O,R,G,Y,te,ae,oe,ie,ue){for(var Ce=H.call(this,G,Y,te,ae),ne=0;ne<Ce.length;ne++){var Be=Ce[ne];ne===0&&(ue?P.call(this,Be.x1+O,Be.y1+R):U.call(this,Be.x1+O,Be.y1+R)),K.call(this,O,R,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}ie?L.call(this):j.call(this,oe)},j=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(O,R){this.pdf.internal.out(r(O)+" "+n(R)+" m")},k=function(O){var R;switch(O.align){case"right":case"end":R="right";break;case"center":R="center";break;case"left":case"start":default:R="left"}var G=this.pdf.getTextDimensions(O.text),Y=T.call(this,O.y),te=C.call(this,Y)-G.h,ae=this.ctx.transform.applyToPoint(new o(O.x,Y)),oe=this.ctx.transform.decompose(),ie=new c;ie=(ie=(ie=ie.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var ue,Ce,ne,Be=this.ctx.transform.applyToRectangle(new l(O.x,Y,G.w,G.h)),je=ie.applyToRectangle(new l(O.x,te,G.w,G.h)),_e=v.call(this,je),Ae=[],ve=0;ve<_e.length;ve+=1)Ae.indexOf(_e[ve])===-1&&Ae.push(_e[ve]);if(_(Ae),this.autoPaging)for(var Pe=Ae[0],Ue=Ae[Ae.length-1],de=Pe;de<Ue+1;de++){this.pdf.setPage(de);var be=de===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],We=Ve-this.margin[0],Je=this.pdf.internal.pageSize.width-this.margin[1],At=Je-this.margin[3],vt=de===1?0:De+(de-2)*We;if(this.ctx.clip_path.length!==0){var wt=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ue,this.posX+this.margin[3],-1*vt+be),B.call(this,"fill",!0),this.path=wt}var Tt=w([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-vt+be+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*O.scale),ne=this.lineWidth,this.lineWidth=ne*O.scale);var Lt=this.autoPaging!=="text";if(Lt||Tt.y+Tt.h<=Ve){if(Lt||Tt.y>=be&&Tt.x<=Je){var Et=Lt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Je-Tt.x)[0],_r=w([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-vt+be+this.ctx.prevPageLastElemOffset)[0],qt=Lt&&(de>Pe||de<Ue)&&x.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,We,null).clip().discardPath()),this.pdf.text(Et,_r.x,_r.y,{angle:O.angle,align:R,renderingMode:O.renderingMode}),qt&&this.pdf.restoreGraphicsState()}}else Tt.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-Tt.y);O.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=ne)}else O.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*O.scale),ne=this.lineWidth,this.lineWidth=ne*O.scale),this.pdf.text(O.text,ae.x+this.posX,ae.y+this.posY,{angle:O.angle,align:R,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=ne)},U=function(O,R,G,Y){G=G||0,Y=Y||0,this.pdf.internal.out(r(O+G)+" "+n(R+Y)+" l")},Q=function(O,R,G){return this.pdf.lines(O,R,G,null,null)},K=function(O,R,G,Y,te,ae,oe,ie){this.pdf.internal.out([t(a(G+O)),t(s(Y+R)),t(a(te+O)),t(s(ae+R)),t(a(oe+O)),t(s(ie+R)),"c"].join(" "))},H=function(O,R,G,Y){for(var te=2*Math.PI,ae=Math.PI/2;R>G;)R-=te;var oe=Math.abs(G-R);oe<te&&Y&&(oe=te-oe);for(var ie=[],ue=Y?-1:1,Ce=R;oe>1e-5;){var ne=Ce+ue*Math.min(oe,ae);ie.push(q.call(this,O,Ce,ne)),oe-=Math.abs(ne-Ce),Ce=ne}return ie},q=function(O,R,G){var Y=(G-R)/2,te=O*Math.cos(Y),ae=O*Math.sin(Y),oe=te,ie=-ae,ue=oe*oe+ie*ie,Ce=ue+oe*te+ie*ae,ne=4/3*(Math.sqrt(2*ue*Ce)-Ce)/(oe*ae-ie*te),Be=oe-ne*ie,je=ie+ne*oe,_e=Be,Ae=-je,ve=Y+R,Pe=Math.cos(ve),Ue=Math.sin(ve);return{x1:O*Math.cos(R),y1:O*Math.sin(R),x2:Be*Pe-je*Ue,y2:Be*Ue+je*Pe,x3:_e*Pe-Ae*Ue,y3:_e*Ue+Ae*Pe,x4:O*Math.cos(G),y4:O*Math.sin(G)}},z=function(O){return 180*O/Math.PI},W=function(O,R,G,Y,te,ae){var oe=O+.5*(G-O),ie=R+.5*(Y-R),ue=te+.5*(G-te),Ce=ae+.5*(Y-ae),ne=Math.min(O,te,oe,ue),Be=Math.max(O,te,oe,ue),je=Math.min(R,ae,ie,Ce),_e=Math.max(R,ae,ie,Ce);return new l(ne,je,Be-ne,_e-je)},ee=function(O,R,G,Y,te,ae,oe,ie){var ue,Ce,ne,Be,je,_e,Ae,ve,Pe,Ue,de,be,De,Ve,We=G-O,Je=Y-R,At=te-G,vt=ae-Y,wt=oe-te,Tt=ie-ae;for(Ce=0;Ce<41;Ce++)Pe=(Ae=(ne=O+(ue=Ce/40)*We)+ue*((je=G+ue*At)-ne))+ue*(je+ue*(te+ue*wt-je)-Ae),Ue=(ve=(Be=R+ue*Je)+ue*((_e=Y+ue*vt)-Be))+ue*(_e+ue*(ae+ue*Tt-_e)-ve),Ce==0?(de=Pe,be=Ue,De=Pe,Ve=Ue):(de=Math.min(de,Pe),be=Math.min(be,Ue),De=Math.max(De,Pe),Ve=Math.max(Ve,Ue));return new l(Math.round(de),Math.round(be),Math.round(De-de),Math.round(Ve-be))},X=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,R,G=(O=this.ctx.lineDash,R=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:R}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(yr.API),function(e){var t=function(s){var o,l,c,u,d,f,h,m,g,x;for(l=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,l.push(f+33,h+33,m+33,g+33,x+33)):l.push(122);return function(v,y){for(var w=y;w>0;w--)v.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var o,l,c,u,d,f=String,h="length",m=255,g="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],u=0,d=(s+=o="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)l=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,w){for(var _=w;_>0;_--)y.pop()}(c,o[h]),f.fromCharCode.apply(f,c)},n=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return s=(o=DO(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,o){var l=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(yr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(h=0;h<x;h+=1)v.push(y(255&g.charCodeAt(h)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,s,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(yr.API),function(e){function t(){return(Vr.html2canvas?Promise.resolve(Vr.html2canvas):Ti(()=>Promise.resolve().then(()=>I0t),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Vr.DOMPurify?Promise.resolve(Vr.DOMPurify):Ti(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=ga(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||yr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,o,l);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,yr.getPageSize=function(o,l,c){if(ga(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>g&&(m=x,x=g,g=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:l,k:d,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(QO):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(yr.API),yr.API.addJS=function(e){return EK=e,this.internal.events.subscribe("postPutResources",function(){jC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(jC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wK=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+EK+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){jC!==void 0&&wK!==void 0&&this.internal.out("/Names <</JavaScript "+jC+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(yr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){h=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),x={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:h,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(yr.API);var Hx,BC,NK,CK,_K,JWe=function(){var e,t,r;function n(s){var o,l,c,u,d,f,h,m,g,x,v,y,w,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),g=(function(){var F,B;for(B=[],F=0;F<4;++F)B.push(String.fromCharCode(this.data[this.pos++]));return B}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,o-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(v=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var o,l;for(l=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,m,g){var x,v,y,w,_,F,B,T,C,S,j,L,P,k,U,Q,K,H,q,z,W,ee=Math.ceil((u.width-f)/m),X=Math.ceil((u.height-h)/g),O=u.width==ee&&u.height==X;for(k=o*ee,L=O?l:new Uint8Array(k*X),F=s.length,P=0,v=0;P<X&&c<F;){switch(s[c++]){case 0:for(w=K=0;K<k;w=K+=1)L[v++]=s[c++];break;case 1:for(w=H=0;H<k;w=H+=1)x=s[c++],_=w<o?0:L[v-o],L[v++]=(x+_)%256;break;case 2:for(w=q=0;q<k;w=q+=1)x=s[c++],y=(w-w%o)/o,U=P&&L[(P-1)*k+y*o+w%o],L[v++]=(U+x)%256;break;case 3:for(w=z=0;z<k;w=z+=1)x=s[c++],y=(w-w%o)/o,_=w<o?0:L[v-o],U=P&&L[(P-1)*k+y*o+w%o],L[v++]=(x+Math.floor((_+U)/2))%256;break;case 4:for(w=W=0;W<k;w=W+=1)x=s[c++],y=(w-w%o)/o,_=w<o?0:L[v-o],P===0?U=Q=0:(U=L[(P-1)*k+y*o+w%o],Q=y&&L[(P-1)*k+(y-1)*o+w%o]),B=_+U-Q,T=Math.abs(B-_),S=Math.abs(B-U),j=Math.abs(B-Q),C=T<=S&&T<=j?_:S<=j?U:Q,L[v++]=(x+C)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!O){var R=((h+P*g)*u.width+f)*o,G=P*k;for(w=0;w<ee;w+=1){for(var Y=0;Y<o;Y+=1)l[R++]=L[G++];R+=(m-1)*o}}P++}}return s=BWe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},n.prototype.decodePalette=function(){var s,o,l,c,u,d,f,h,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,s=0,o=f=0,h=l.length;f<h;o=f+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(m=d[s++])!=null?m:255;return u},n.prototype.copyToImageData=function(s,o){var l,c,u,d,f,h,m,g,x,v,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=s.data||s).length,f=x||o,d=h=0,c===1)for(;d<g;)m=x?4*o[d/4]:h,v=f[m++],u[d++]=v,u[d++]=v,u[d++]=v,u[d++]=l?f[m++]:255,h=m;else for(;d<g;)m=x?4*o[d/4]:h,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=l?f[m++]:255,h=m},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Vr)==="[object Window]"){try{t=Vr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var o;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var o,l,c,u,d,f,h,m;if(this.animation){for(m=[],l=d=0,f=(h=this.animation.frames).length;d<f;l=++d)o=h[l],c=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,m.push(o.image=e(c));return m}},n.prototype.renderFrame=function(s,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(s){var o,l,c,u,d,f,h=this;return l=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(o=function(){var m,g;if(m=l++%u,g=c[m],h.renderFrame(s,m),u>1&&l/u<d)return h.animation._timeout=setTimeout(o,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var o,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ZWe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=o,t+=3*o);var u=!0,d=[],f=0,h=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,F=e[t++],B=F>>6&1,T=1<<(7&F)+1,C=l,S=c,j=!1;F>>7&&(j=!0,C=t,S=T,t+=3*T);var L=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}d.push({x:v,y,width:w,height:_,has_local_palette:j,palette_offset:C,palette_size:S,data_offset:L,data_length:t-L,transparent_index:h,interlaced:!!B,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(k){if(k<0||k>=d.length)throw new Error("Frame index out of range.");return d[k]},this.decodeAndBlitFrameBGRA=function(k,U){var Q=this.frameInfo(k),K=Q.width*Q.height,H=new Uint8Array(K);SK(e,Q.data_offset,H,K);var q=Q.palette_offset,z=Q.transparent_index;z===null&&(z=256);var W=Q.width,ee=r-W,X=W,O=4*(Q.y*r+Q.x),R=4*((Q.y+Q.height)*r+Q.x),G=O,Y=4*ee;Q.interlaced===!0&&(Y+=4*r*7);for(var te=8,ae=0,oe=H.length;ae<oe;++ae){var ie=H[ae];if(X===0&&(X=W,(G+=Y)>=R&&(Y=4*ee+4*r*(te-1),G=O+(W+ee)*(te<<1),te>>=1)),ie===z)G+=4;else{var ue=e[q+3*ie],Ce=e[q+3*ie+1],ne=e[q+3*ie+2];U[G++]=ne,U[G++]=Ce,U[G++]=ue,U[G++]=255}--X}},this.decodeAndBlitFrameRGBA=function(k,U){var Q=this.frameInfo(k),K=Q.width*Q.height,H=new Uint8Array(K);SK(e,Q.data_offset,H,K);var q=Q.palette_offset,z=Q.transparent_index;z===null&&(z=256);var W=Q.width,ee=r-W,X=W,O=4*(Q.y*r+Q.x),R=4*((Q.y+Q.height)*r+Q.x),G=O,Y=4*ee;Q.interlaced===!0&&(Y+=4*r*7);for(var te=8,ae=0,oe=H.length;ae<oe;++ae){var ie=H[ae];if(X===0&&(X=W,(G+=Y)>=R&&(Y=4*ee+4*r*(te-1),G=O+(W+ee)*(te<<1),te>>=1)),ie===z)G+=4;else{var ue=e[q+3*ie],Ce=e[q+3*ie+1],ne=e[q+3*ie+2];U[G++]=ue,U[G++]=Ce,U[G++]=ne,U[G++]=255}--X}}}function SK(e,t,r,n){for(var a=e[t++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==s){if(v===o)break;for(var y=v<l?v:x,w=0,_=y;_>s;)_=g[_]>>8,++w;var F=_;if(h+w+(y!==v?1:0)>n)return void Sa.log("Warning, gif stream longer than expected.");r[h++]=F;var B=h+=w;for(y!==v&&(r[h++]=F),_=y;w--;)_=g[_],r[--B]=255&_,_>>=8;x!==null&&l<4096&&(g[l++]=x<<8|F,l>=u+1&&c<12&&(++c,u=u<<1|1)),x=v}else l=o+1,u=(1<<(c=a+1))-1,x=null}return h!==n&&Sa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function FI(e){var t,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,w=new Array(64),_=new Array(64),F=new Array(64),B=new Array(256),T=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(O,R){for(var G=0,Y=0,te=new Array,ae=1;ae<=16;ae++){for(var oe=1;oe<=O[ae];oe++)te[R[Y]]=[],te[R[Y]][0]=G,te[R[Y]][1]=ae,Y++,G++;G*=2}return te}function q(O){for(var R=O[0],G=O[1]-1;G>=0;)R&1<<G&&(v|=1<<y),G--,--y<0&&(v==255?(z(255),z(0)):z(v),y=7,v=0)}function z(O){x.push(O)}function W(O){z(O>>8&255),z(255&O)}function ee(O,R,G,Y,te){for(var ae,oe=te[0],ie=te[240],ue=function(Ue,de){var be,De,Ve,We,Je,At,vt,wt,Tt,Lt,Et=0;for(Tt=0;Tt<8;++Tt){be=Ue[Et],De=Ue[Et+1],Ve=Ue[Et+2],We=Ue[Et+3],Je=Ue[Et+4],At=Ue[Et+5],vt=Ue[Et+6];var _r=be+(wt=Ue[Et+7]),qt=be-wt,tn=De+vt,Br=De-vt,Kr=Ve+At,Fn=Ve-At,Lr=We+Je,ps=We-Je,pn=_r+Lr,la=_r-Lr,Ta=tn+Kr,an=tn-Kr;Ue[Et]=pn+Ta,Ue[Et+4]=pn-Ta;var vr=.707106781*(an+la);Ue[Et+2]=la+vr,Ue[Et+6]=la-vr;var rt=.382683433*((pn=ps+Fn)-(an=Br+qt)),gt=.5411961*pn+rt,Ze=1.306562965*an+rt,bt=.707106781*(Ta=Fn+Br),Nt=qt+bt,yt=qt-bt;Ue[Et+5]=yt+gt,Ue[Et+3]=yt-gt,Ue[Et+1]=Nt+Ze,Ue[Et+7]=Nt-Ze,Et+=8}for(Et=0,Tt=0;Tt<8;++Tt){be=Ue[Et],De=Ue[Et+8],Ve=Ue[Et+16],We=Ue[Et+24],Je=Ue[Et+32],At=Ue[Et+40],vt=Ue[Et+48];var rr=be+(wt=Ue[Et+56]),br=be-wt,ur=De+vt,Or=De-vt,Yr=Ve+At,pe=Ve-At,Fe=We+Je,Se=We-Je,ke=rr+Fe,Te=rr-Fe,Oe=ur+Yr,et=ur-Yr;Ue[Et]=ke+Oe,Ue[Et+32]=ke-Oe;var ft=.707106781*(et+Te);Ue[Et+16]=Te+ft,Ue[Et+48]=Te-ft;var qe=.382683433*((ke=Se+pe)-(et=Or+br)),at=.5411961*ke+qe,lt=1.306562965*et+qe,Dt=.707106781*(Oe=pe+Or),$t=br+Dt,Zt=br-Dt;Ue[Et+40]=Zt+at,Ue[Et+24]=Zt-at,Ue[Et+8]=$t+lt,Ue[Et+56]=$t-lt,Et++}for(Tt=0;Tt<64;++Tt)Lt=Ue[Tt]*de[Tt],m[Tt]=Lt>0?Lt+.5|0:Lt-.5|0;return m}(O,R),Ce=0;Ce<64;++Ce)g[C[Ce]]=ue[Ce];var ne=g[0]-G;G=g[0],ne==0?q(Y[0]):(q(Y[h[ae=32767+ne]]),q(f[ae]));for(var Be=63;Be>0&&g[Be]==0;)Be--;if(Be==0)return q(oe),G;for(var je,_e=1;_e<=Be;){for(var Ae=_e;g[_e]==0&&_e<=Be;)++_e;var ve=_e-Ae;if(ve>=16){je=ve>>4;for(var Pe=1;Pe<=je;++Pe)q(ie);ve&=15}ae=32767+g[_e],q(te[(ve<<4)+h[ae]]),q(f[ae]),_e++}return Be!=63&&q(oe),G}function X(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(R){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var te=o((G[Y]*R+50)/100);te=Math.min(Math.max(te,1),255),l[C[Y]]=te}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var ie=o((ae[oe]*R+50)/100);ie=Math.min(Math.max(ie,1),255),c[C[oe]]=ie}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,ne=0;ne<8;ne++)for(var Be=0;Be<8;Be++)u[Ce]=1/(l[C[Ce]]*ue[ne]*ue[Be]*8),d[Ce]=1/(c[C[Ce]]*ue[ne]*ue[Be]*8),Ce++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,R){R&&X(R),x=new Array,v=0,y=7,W(65496),W(65504),W(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),W(1),W(1),z(0),z(0),function(){W(65499),W(132),z(0);for(var De=0;De<64;De++)z(l[De]);z(1);for(var Ve=0;Ve<64;Ve++)z(c[Ve])}(),function(De,Ve){W(65472),W(17),z(8),W(Ve),W(De),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(O.width,O.height),function(){W(65476),W(418),z(0);for(var De=0;De<16;De++)z(S[De+1]);for(var Ve=0;Ve<=11;Ve++)z(j[Ve]);z(16);for(var We=0;We<16;We++)z(L[We+1]);for(var Je=0;Je<=161;Je++)z(P[Je]);z(1);for(var At=0;At<16;At++)z(k[At+1]);for(var vt=0;vt<=11;vt++)z(U[vt]);z(17);for(var wt=0;wt<16;wt++)z(Q[wt+1]);for(var Tt=0;Tt<=161;Tt++)z(K[Tt])}(),W(65498),W(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var G=0,Y=0,te=0;v=0,y=7,this.encode.displayName="_encode_";for(var ae,oe,ie,ue,Ce,ne,Be,je,_e,Ae=O.data,ve=O.width,Pe=O.height,Ue=4*ve,de=0;de<Pe;){for(ae=0;ae<Ue;){for(Ce=Ue*de+ae,Be=-1,je=0,_e=0;_e<64;_e++)ne=Ce+(je=_e>>3)*Ue+(Be=4*(7&_e)),de+je>=Pe&&(ne-=Ue*(de+1+je-Pe)),ae+Be>=Ue&&(ne-=ae+Be-Ue+4),oe=Ae[ne++],ie=Ae[ne++],ue=Ae[ne++],w[_e]=(T[oe]+T[ie+256>>0]+T[ue+512>>0]>>16)-128,_[_e]=(T[oe+768>>0]+T[ie+1024>>0]+T[ue+1280>>0]>>16)-128,F[_e]=(T[oe+1280>>0]+T[ie+1536>>0]+T[ue+1792>>0]>>16)-128;G=ee(w,u,G,t,n),Y=ee(_,d,Y,r,a),te=ee(F,d,te,r,a),ae+=32}de+=8}if(y>=0){var be=[];be[1]=y+1,be[0]=(1<<y+1)-1,q(be)}return W(65497),new Uint8Array(x)},e=e||50,function(){for(var O=String.fromCharCode,R=0;R<256;R++)B[R]=O(R)}(),t=H(S,j),r=H(k,U),n=H(L,P),a=H(Q,K),function(){for(var O=1,R=2,G=1;G<=15;G++){for(var Y=O;Y<R;Y++)h[32767+Y]=G,f[32767+Y]=[],f[32767+Y][1]=G,f[32767+Y][0]=Y;for(var te=-(R-1);te<=-O;te++)h[32767+te]=G,f[32767+te]=[],f[32767+te][1]=G,f[32767+te][0]=R-1+te;O<<=1,R<<=1}}(),function(){for(var O=0;O<256;O++)T[O]=19595*O,T[O+256>>0]=38470*O,T[O+512>>0]=7471*O+32768,T[O+768>>0]=-11059*O,T[O+1024>>0]=-21709*O,T[O+1280>>0]=32768*O+8421375,T[O+1536>>0]=-27439*O,T[O+1792>>0]=-5329*O}(),X(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function jd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function kK(e){function t(S){if(!S)throw Error("assert :P")}function r(S,j,L){for(var P=0;4>P;P++)if(S[j+P]!=L.charCodeAt(P))return!0;return!1}function n(S,j,L,P,k){for(var U=0;U<k;U++)S[j+U]=L[P+U]}function a(S,j,L,P){for(var k=0;k<P;k++)S[j+k]=L}function s(S){return new Int32Array(S)}function o(S,j){for(var L=[],P=0;P<S;P++)L.push(new j);return L}function l(S,j){var L=[];return function P(k,U,Q){for(var K=Q[U],H=0;H<K&&(k.push(Q.length>U+1?[]:new j),!(Q.length<U+1));H++)P(k[H],U+1,Q)}(L,0,S),L}var c=function(){var S=this;function j(I,V){for(var re=1<<V-1>>>0;I&re;)re>>>=1;return re?(I&re-1)+re:I}function L(I,V,re,le,he){t(!(le%re));do I[V+(le-=re)]=he;while(0<le)}function P(I,V,re,le,he){if(t(2328>=he),512>=he)var ge=s(512);else if((ge=s(he))==null)return 0;return function(xe,ye,Ne,Ie,Qe,ot){var nt,Xe,Ft=ye,xt=1<<Ne,He=s(16),$e=s(16);for(t(Qe!=0),t(Ie!=null),t(xe!=null),t(0<Ne),Xe=0;Xe<Qe;++Xe){if(15<Ie[Xe])return 0;++He[Ie[Xe]]}if(He[0]==Qe)return 0;for($e[1]=0,nt=1;15>nt;++nt){if(He[nt]>1<<nt)return 0;$e[nt+1]=$e[nt]+He[nt]}for(Xe=0;Xe<Qe;++Xe)nt=Ie[Xe],0<Ie[Xe]&&(ot[$e[nt]++]=Xe);if($e[15]==1)return(Ie=new k).g=0,Ie.value=ot[0],L(xe,Ft,1,xt,Ie),xt;var kt,Ot=-1,Bt=xt-1,sr=0,Jt=1,wr=1,tr=1<<Ne;for(Xe=0,nt=1,Qe=2;nt<=Ne;++nt,Qe<<=1){if(Jt+=wr<<=1,0>(wr-=He[nt]))return 0;for(;0<He[nt];--He[nt])(Ie=new k).g=nt,Ie.value=ot[Xe++],L(xe,Ft+sr,Qe,tr,Ie),sr=j(sr,nt)}for(nt=Ne+1,Qe=2;15>=nt;++nt,Qe<<=1){if(Jt+=wr<<=1,0>(wr-=He[nt]))return 0;for(;0<He[nt];--He[nt]){if(Ie=new k,(sr&Bt)!=Ot){for(Ft+=tr,kt=1<<(Ot=nt)-Ne;15>Ot&&!(0>=(kt-=He[Ot]));)++Ot,kt<<=1;xt+=tr=1<<(kt=Ot-Ne),xe[ye+(Ot=sr&Bt)].g=kt+Ne,xe[ye+Ot].value=Ft-ye-Ot}Ie.g=nt-Ne,Ie.value=ot[Xe++],L(xe,Ft+(sr>>Ne),Qe,tr,Ie),sr=j(sr,nt)}}return Jt!=2*$e[15]-1?0:xt}(I,V,re,le,he,ge)}function k(){this.value=this.g=0}function U(){this.value=this.g=0}function Q(){this.G=o(5,k),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ms,U)}function K(I,V,re,le){t(I!=null),t(V!=null),t(2147483648>le),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=V,I.pa=re,I.Jd=V,I.Yc=re+le,I.Zc=4<=le?re+le-4+1:re,ae(I)}function H(I,V){for(var re=0;0<V--;)re|=ie(I,128)<<V;return re}function q(I,V){var re=H(I,V);return oe(I)?-re:re}function z(I,V,re,le){var he,ge=0;for(t(I!=null),t(V!=null),t(4294967288>le),I.Sb=le,I.Ra=0,I.u=0,I.h=0,4<le&&(le=4),he=0;he<le;++he)ge+=V[re+he]<<8*he;I.Ra=ge,I.bb=le,I.oa=V,I.pa=re}function W(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<SA-8>>>0,++I.bb,I.u-=8;G(I)&&(I.h=1,I.u=0)}function ee(I,V){if(t(0<=V),!I.h&&V<=_A){var re=R(I)&ff[V];return I.u+=V,W(I),re}return I.h=1,I.u=0}function X(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function R(I){return I.Ra>>>(I.u&SA-1)>>>0}function G(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>SA}function Y(I,V){I.u=V,I.h=G(I)}function te(I){I.u>=a0&&(t(I.u>=a0),W(I))}function ae(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function oe(I){return H(I,1)}function ie(I,V){var re=I.Ca;0>I.b&&ae(I);var le=I.b,he=re*V>>>8,ge=(I.I>>>le>he)+0;for(ge?(re-=he,I.I-=he+1<<le>>>0):re=he+1,le=re,he=0;256<=le;)he+=8,le>>=8;return le=7^he+Fo[le],I.b-=le,I.Ca=(re<<le)-1,ge}function ue(I,V,re){I[V+0]=re>>24&255,I[V+1]=re>>16&255,I[V+2]=re>>8&255,I[V+3]=re>>0&255}function Ce(I,V){return I[V+0]<<0|I[V+1]<<8}function ne(I,V){return Ce(I,V)|I[V+2]<<16}function Be(I,V){return Ce(I,V)|Ce(I,V+2)<<16}function je(I,V){var re=1<<V;return t(I!=null),t(0<V),I.X=s(re),I.X==null?0:(I.Mb=32-V,I.Xa=V,1)}function _e(I,V){t(I!=null),t(V!=null),t(I.Xa==V.Xa),n(V.X,0,I.X,0,1<<V.Xa)}function Ae(){this.X=[],this.Xa=this.Mb=0}function ve(I,V,re,le){t(re!=null),t(le!=null);var he=re[0],ge=le[0];return he==0&&(he=(I*ge+V/2)/V),ge==0&&(ge=(V*he+I/2)/I),0>=he||0>=ge?0:(re[0]=he,le[0]=ge,1)}function Pe(I,V){return I+(1<<V)-1>>>V}function Ue(I,V){return((4278255360&I)+(4278255360&V)>>>0&4278255360)+((16711935&I)+(16711935&V)>>>0&16711935)>>>0}function de(I,V){S[V]=function(re,le,he,ge,xe,ye,Ne){var Ie;for(Ie=0;Ie<xe;++Ie){var Qe=S[I](ye[Ne+Ie-1],he,ge+Ie);ye[Ne+Ie]=Ue(re[le+Ie],Qe)}}}function be(){this.ud=this.hd=this.jd=0}function De(I,V){return((4278124286&(I^V))>>>1)+(I&V)>>>0}function Ve(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function We(I,V){return Ve(I+(I-V+.5>>1))}function Je(I,V,re){return Math.abs(V-re)-Math.abs(I-re)}function At(I,V,re,le,he,ge,xe){for(le=ge[xe-1],re=0;re<he;++re)ge[xe+re]=le=Ue(I[V+re],le)}function vt(I,V,re,le,he){var ge;for(ge=0;ge<re;++ge){var xe=I[V+ge],ye=xe>>8&255,Ne=16711935&(Ne=(Ne=16711935&xe)+((ye<<16)+ye));le[he+ge]=(4278255360&xe)+Ne>>>0}}function wt(I,V){V.jd=I>>0&255,V.hd=I>>8&255,V.ud=I>>16&255}function Tt(I,V,re,le,he,ge){var xe;for(xe=0;xe<le;++xe){var ye=V[re+xe],Ne=ye>>>8,Ie=ye,Qe=255&(Qe=(Qe=ye>>>16)+((I.jd<<24>>24)*(Ne<<24>>24)>>>5));Ie=255&(Ie=(Ie=Ie+((I.hd<<24>>24)*(Ne<<24>>24)>>>5))+((I.ud<<24>>24)*(Qe<<24>>24)>>>5)),he[ge+xe]=(4278255360&ye)+(Qe<<16)+Ie}}function Lt(I,V,re,le,he){S[V]=function(ge,xe,ye,Ne,Ie,Qe,ot,nt,Xe){for(Ne=ot;Ne<nt;++Ne)for(ot=0;ot<Xe;++ot)Ie[Qe++]=he(ye[le(ge[xe++])])},S[I]=function(ge,xe,ye,Ne,Ie,Qe,ot){var nt=8>>ge.b,Xe=ge.Ea,Ft=ge.K[0],xt=ge.w;if(8>nt)for(ge=(1<<ge.b)-1,xt=(1<<nt)-1;xe<ye;++xe){var He,$e=0;for(He=0;He<Xe;++He)He&ge||($e=le(Ne[Ie++])),Qe[ot++]=he(Ft[$e&xt]),$e>>=nt}else S["VP8LMapColor"+re](Ne,Ie,Ft,xt,Qe,ot,xe,ye,Xe)}}function Et(I,V,re,le,he){for(re=V+re;V<re;){var ge=I[V++];le[he++]=ge>>16&255,le[he++]=ge>>8&255,le[he++]=ge>>0&255}}function _r(I,V,re,le,he){for(re=V+re;V<re;){var ge=I[V++];le[he++]=ge>>16&255,le[he++]=ge>>8&255,le[he++]=ge>>0&255,le[he++]=ge>>24&255}}function qt(I,V,re,le,he){for(re=V+re;V<re;){var ge=(xe=I[V++])>>16&240|xe>>12&15,xe=xe>>0&240|xe>>28&15;le[he++]=ge,le[he++]=xe}}function tn(I,V,re,le,he){for(re=V+re;V<re;){var ge=(xe=I[V++])>>16&248|xe>>13&7,xe=xe>>5&224|xe>>3&31;le[he++]=ge,le[he++]=xe}}function Br(I,V,re,le,he){for(re=V+re;V<re;){var ge=I[V++];le[he++]=ge>>0&255,le[he++]=ge>>8&255,le[he++]=ge>>16&255}}function Kr(I,V,re,le,he,ge){if(ge==0)for(re=V+re;V<re;)ue(le,((ge=I[V++])[0]>>24|ge[1]>>8&65280|ge[2]<<8&16711680|ge[3]<<24)>>>0),he+=32;else n(le,he,I,V,re)}function Fn(I,V){S[V][0]=S[I+"0"],S[V][1]=S[I+"1"],S[V][2]=S[I+"2"],S[V][3]=S[I+"3"],S[V][4]=S[I+"4"],S[V][5]=S[I+"5"],S[V][6]=S[I+"6"],S[V][7]=S[I+"7"],S[V][8]=S[I+"8"],S[V][9]=S[I+"9"],S[V][10]=S[I+"10"],S[V][11]=S[I+"11"],S[V][12]=S[I+"12"],S[V][13]=S[I+"13"],S[V][14]=S[I+"0"],S[V][15]=S[I+"0"]}function Lr(I){return I==cp||I==wf||I==md||I==l0}function ps(){this.eb=[],this.size=this.A=this.fb=0}function pn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function la(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ps,this.f.kb=new pn,this.sd=null}function Ta(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function an(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function vr(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function rt(I,V){var re=I.T,le=V.ba.f.RGBA,he=le.eb,ge=le.fb+I.ka*le.A,xe=oi[V.ba.S],ye=I.y,Ne=I.O,Ie=I.f,Qe=I.N,ot=I.ea,nt=I.W,Xe=V.cc,Ft=V.dc,xt=V.Mc,He=V.Nc,$e=I.ka,kt=I.ka+I.T,Ot=I.U,Bt=Ot+1>>1;for($e==0?xe(ye,Ne,null,null,Ie,Qe,ot,nt,Ie,Qe,ot,nt,he,ge,null,null,Ot):(xe(V.ec,V.fc,ye,Ne,Xe,Ft,xt,He,Ie,Qe,ot,nt,he,ge-le.A,he,ge,Ot),++re);$e+2<kt;$e+=2)Xe=Ie,Ft=Qe,xt=ot,He=nt,Qe+=I.Rc,nt+=I.Rc,ge+=2*le.A,xe(ye,(Ne+=2*I.fa)-I.fa,ye,Ne,Xe,Ft,xt,He,Ie,Qe,ot,nt,he,ge-le.A,he,ge,Ot);return Ne+=I.fa,I.j+kt<I.o?(n(V.ec,V.fc,ye,Ne,Ot),n(V.cc,V.dc,Ie,Qe,Bt),n(V.Mc,V.Nc,ot,nt,Bt),re--):1&kt||xe(ye,Ne,null,null,Ie,Qe,ot,nt,Ie,Qe,ot,nt,he,ge+le.A,null,null,Ot),re}function gt(I,V,re){var le=I.F,he=[I.J];if(le!=null){var ge=I.U,xe=V.ba.S,ye=xe==IA||xe==md;V=V.ba.f.RGBA;var Ne=[0],Ie=I.ka;Ne[0]=I.T,I.Kb&&(Ie==0?--Ne[0]:(--Ie,he[0]-=I.width),I.j+I.ka+I.T==I.o&&(Ne[0]=I.o-I.j-Ie));var Qe=V.eb;Ie=V.fb+Ie*V.A,I=xn(le,he[0],I.width,ge,Ne,Qe,Ie+(ye?0:3),V.A),t(re==Ne),I&&Lr(xe)&&hl(Qe,Ie,ye,ge,Ne,V.A)}return 0}function Ze(I){var V=I.ma,re=V.ba.S,le=11>re,he=re==o0||re==lp||re==IA||re==hd||re==12||Lr(re);if(V.memory=null,V.Ib=null,V.Jb=null,V.Nd=null,!df(V.Oa,I,he?11:12))return 0;if(he&&Lr(re)&&Qt(),I.da)alert("todo:use_scaling");else{if(le){if(V.Ib=vr,I.Kb){if(re=I.U+1>>1,V.memory=s(I.U+2*re),V.memory==null)return 0;V.ec=V.memory,V.fc=0,V.cc=V.ec,V.dc=V.fc+I.U,V.Mc=V.cc,V.Nc=V.dc+re,V.Ib=rt,Qt()}}else alert("todo:EmitYUV");he&&(V.Jb=gt,le&&Ke())}if(le&&!zE){for(I=0;256>I;++I)Oj[I]=89858*(I-128)+Qs>>Eu,fp[I]=-22014*(I-128)+Qs,S1[I]=-45773*(I-128),Hs[I]=113618*(I-128)+Qs>>Eu;for(I=Cf;I<fx;++I)V=76283*(I-16)+Qs>>Eu,Ap[I-Cf]=zn(V,255),k1[I-Cf]=zn(V+8>>4,15);zE=1}return 1}function bt(I){var V=I.ma,re=I.U,le=I.T;return t(!(1&I.ka)),0>=re||0>=le?0:(re=V.Ib(I,V),V.Jb!=null&&V.Jb(I,V,re),V.Dc+=re,1)}function Nt(I){I.ma.memory=null}function yt(I,V,re,le){return ee(I,8)!=47?0:(V[0]=ee(I,14)+1,re[0]=ee(I,14)+1,le[0]=ee(I,1),ee(I,3)!=0?0:!I.h)}function rr(I,V){if(4>I)return I+1;var re=I-2>>1;return(2+(1&I)<<re)+ee(V,re)+1}function br(I,V){return 120<V?V-120:1<=(re=((re=gd[V-1])>>4)*I+(8-(15&re)))?re:1;var re}function ur(I,V,re){var le=R(re),he=I[V+=255&le].g-8;return 0<he&&(Y(re,re.u+8),le=R(re),V+=I[V].value,V+=le&(1<<he)-1),Y(re,re.u+I[V].g),I[V].value}function Or(I,V,re){return re.g+=I.g,re.value+=I.value<<V>>>0,t(8>=re.g),I.g}function Yr(I,V,re){var le=I.xc;return t((V=le==0?0:I.vc[I.md*(re>>le)+(V>>le)])<I.Wb),I.Ya[V]}function pe(I,V,re,le){var he=I.ab,ge=I.c*V,xe=I.C;V=xe+V;var ye=re,Ne=le;for(le=I.Ta,re=I.Ua;0<he--;){var Ie=I.gc[he],Qe=xe,ot=V,nt=ye,Xe=Ne,Ft=(Ne=le,ye=re,Ie.Ea);switch(t(Qe<ot),t(ot<=Ie.nc),Ie.hc){case 2:sx(nt,Xe,(ot-Qe)*Ft,Ne,ye);break;case 0:var xt=Qe,He=ot,$e=Ne,kt=ye,Ot=(tr=Ie).Ea;xt==0&&(C1(nt,Xe,null,null,1,$e,kt),At(nt,Xe+1,0,0,Ot-1,$e,kt+1),Xe+=Ot,kt+=Ot,++xt);for(var Bt=1<<tr.b,sr=Bt-1,Jt=Pe(Ot,tr.b),wr=tr.K,tr=tr.w+(xt>>tr.b)*Jt;xt<He;){var Pn=wr,$n=tr,hn=1;for(ip(nt,Xe,$e,kt-Ot,1,$e,kt);hn<Ot;){var cn=(hn&~sr)+Bt;cn>Ot&&(cn=Ot),(0,dd[Pn[$n++]>>8&15])(nt,Xe+ +hn,$e,kt+hn-Ot,cn-hn,$e,kt+hn),hn=cn}Xe+=Ot,kt+=Ot,++xt&sr||(tr+=Jt)}ot!=Ie.nc&&n(Ne,ye-Ft,Ne,ye+(ot-Qe-1)*Ft,Ft);break;case 1:for(Ft=nt,He=Xe,Ot=(nt=Ie.Ea)-(kt=nt&~($e=(Xe=1<<Ie.b)-1)),xt=Pe(nt,Ie.b),Bt=Ie.K,Ie=Ie.w+(Qe>>Ie.b)*xt;Qe<ot;){for(sr=Bt,Jt=Ie,wr=new be,tr=He+kt,Pn=He+nt;He<tr;)wt(sr[Jt++],wr),hf(wr,Ft,He,Xe,Ne,ye),He+=Xe,ye+=Xe;He<Pn&&(wt(sr[Jt++],wr),hf(wr,Ft,He,Ot,Ne,ye),He+=Ot,ye+=Ot),++Qe&$e||(Ie+=xt)}break;case 3:if(nt==Ne&&Xe==ye&&0<Ie.b){for(He=Ne,nt=Ft=ye+(ot-Qe)*Ft-(kt=(ot-Qe)*Pe(Ie.Ea,Ie.b)),Xe=Ne,$e=ye,xt=[],kt=(Ot=kt)-1;0<=kt;--kt)xt[kt]=Xe[$e+kt];for(kt=Ot-1;0<=kt;--kt)He[nt+kt]=xt[kt];Ql(Ie,Qe,ot,Ne,Ft,Ne,ye)}else Ql(Ie,Qe,ot,nt,Xe,Ne,ye)}ye=le,Ne=re}Ne!=re&&n(le,re,ye,Ne,ge)}function Fe(I,V){var re=I.V,le=I.Ba+I.c*I.C,he=V-I.C;if(t(V<=I.l.o),t(16>=he),0<he){var ge=I.l,xe=I.Ta,ye=I.Ua,Ne=ge.width;if(pe(I,he,re,le),he=ye=[ye],t((re=I.C)<(le=V)),t(ge.v<ge.va),le>ge.o&&(le=ge.o),re<ge.j){var Ie=ge.j-re;re=ge.j,he[0]+=Ie*Ne}if(re>=le?re=0:(he[0]+=4*ge.v,ge.ka=re-ge.j,ge.U=ge.va-ge.v,ge.T=le-re,re=1),re){if(ye=ye[0],11>(re=I.ca).S){var Qe=re.f.RGBA,ot=(le=re.S,he=ge.U,ge=ge.T,Ie=Qe.eb,Qe.A),nt=ge;for(Qe=Qe.fb+I.Ma*Qe.A;0<nt--;){var Xe=xe,Ft=ye,xt=he,He=Ie,$e=Qe;switch(le){case Hi:lo(Xe,Ft,xt,He,$e);break;case o0:_i(Xe,Ft,xt,He,$e);break;case cp:_i(Xe,Ft,xt,He,$e),hl(He,$e,0,xt,1,0);break;case vu:yc(Xe,Ft,xt,He,$e);break;case lp:Kr(Xe,Ft,xt,He,$e,1);break;case wf:Kr(Xe,Ft,xt,He,$e,1),hl(He,$e,0,xt,1,0);break;case IA:Kr(Xe,Ft,xt,He,$e,0);break;case md:Kr(Xe,Ft,xt,He,$e,0),hl(He,$e,1,xt,1,0);break;case hd:mf(Xe,Ft,xt,He,$e);break;case l0:mf(Xe,Ft,xt,He,$e),gn(He,$e,xt,1,0);break;case ox:Oo(Xe,Ft,xt,He,$e);break;default:t(0)}ye+=Ne,Qe+=ot}I.Ma+=ge}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=re.height)}}I.C=V,t(I.C<=I.i)}function Se(I){var V;if(0<I.ua)return 0;for(V=0;V<I.Wb;++V){var re=I.Ya[V].G,le=I.Ya[V].H;if(0<re[1][le[1]+0].g||0<re[2][le[2]+0].g||0<re[3][le[3]+0].g)return 0}return 1}function ke(I,V,re,le,he,ge){if(I.Z!=0){var xe=I.qd,ye=I.rd;for(t(yu[I.Z]!=null);V<re;++V)yu[I.Z](xe,ye,le,he,le,he,ge),xe=le,ye=he,he+=ge;I.qd=xe,I.rd=ye}}function Te(I,V){var re=I.l.ma,le=re.Z==0||re.Z==1?I.l.j:I.C;if(le=I.C<le?le:I.C,t(V<=I.l.o),V>le){var he=I.l.width,ge=re.ca,xe=re.tb+he*le,ye=I.V,Ne=I.Ba+I.c*le,Ie=I.gc;t(I.ab==1),t(Ie[0].hc==3),Af(Ie[0],le,V,ye,Ne,ge,xe),ke(re,le,V,ge,xe,he)}I.C=I.Ma=V}function Oe(I,V,re,le,he,ge,xe){var ye=I.$/le,Ne=I.$%le,Ie=I.m,Qe=I.s,ot=re+I.$,nt=ot;he=re+le*he;var Xe=re+le*ge,Ft=280+Qe.ua,xt=I.Pb?ye:16777216,He=0<Qe.ua?Qe.Wa:null,$e=Qe.wc,kt=ot<Xe?Yr(Qe,Ne,ye):null;t(I.C<ge),t(Xe<=he);var Ot=!1;e:for(;;){for(;Ot||ot<Xe;){var Bt=0;if(ye>=xt){var sr=ot-re;t((xt=I).Pb),xt.wd=xt.m,xt.xd=sr,0<xt.s.ua&&_e(xt.s.Wa,xt.s.vb),xt=ye+QE}if(Ne&$e||(kt=Yr(Qe,Ne,ye)),t(kt!=null),kt.Qb&&(V[ot]=kt.qb,Ot=!0),!Ot)if(te(Ie),kt.jc){Bt=Ie,sr=V;var Jt=ot,wr=kt.pd[R(Bt)&Ms-1];t(kt.jc),256>wr.g?(Y(Bt,Bt.u+wr.g),sr[Jt]=wr.value,Bt=0):(Y(Bt,Bt.u+wr.g-256),t(256<=wr.value),Bt=wr.value),Bt==0&&(Ot=!0)}else Bt=ur(kt.G[0],kt.H[0],Ie);if(Ie.h)break;if(Ot||256>Bt){if(!Ot)if(kt.nd)V[ot]=(kt.qb|Bt<<8)>>>0;else{if(te(Ie),Ot=ur(kt.G[1],kt.H[1],Ie),te(Ie),sr=ur(kt.G[2],kt.H[2],Ie),Jt=ur(kt.G[3],kt.H[3],Ie),Ie.h)break;V[ot]=(Jt<<24|Ot<<16|Bt<<8|sr)>>>0}if(Ot=!1,++ot,++Ne>=le&&(Ne=0,++ye,xe!=null&&ye<=ge&&!(ye%16)&&xe(I,ye),He!=null))for(;nt<ot;)Bt=V[nt++],He.X[(506832829*Bt&4294967295)>>>He.Mb]=Bt}else if(280>Bt){if(Bt=rr(Bt-256,Ie),sr=ur(kt.G[4],kt.H[4],Ie),te(Ie),sr=br(le,sr=rr(sr,Ie)),Ie.h)break;if(ot-re<sr||he-ot<Bt)break e;for(Jt=0;Jt<Bt;++Jt)V[ot+Jt]=V[ot+Jt-sr];for(ot+=Bt,Ne+=Bt;Ne>=le;)Ne-=le,++ye,xe!=null&&ye<=ge&&!(ye%16)&&xe(I,ye);if(t(ot<=he),Ne&$e&&(kt=Yr(Qe,Ne,ye)),He!=null)for(;nt<ot;)Bt=V[nt++],He.X[(506832829*Bt&4294967295)>>>He.Mb]=Bt}else{if(!(Bt<Ft))break e;for(Ot=Bt-280,t(He!=null);nt<ot;)Bt=V[nt++],He.X[(506832829*Bt&4294967295)>>>He.Mb]=Bt;Bt=ot,t(!(Ot>>>(sr=He).Xa)),V[Bt]=sr.X[Ot],Ot=!0}Ot||t(Ie.h==G(Ie))}if(I.Pb&&Ie.h&&ot<he)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&_e(I.s.vb,I.s.Wa);else{if(Ie.h)break e;xe!=null&&xe(I,ye>ge?ge:ye),I.a=0,I.$=ot-re}return 1}return I.a=3,0}function et(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var V=I.Wa;V!=null&&(V.X=null),I.vb=null,t(I!=null)}function ft(){var I=new r0;return I==null?null:(I.a=0,I.xb=c0,Fn("Predictor","VP8LPredictors"),Fn("Predictor","VP8LPredictors_C"),Fn("PredictorAdd","VP8LPredictorsAdd"),Fn("PredictorAdd","VP8LPredictorsAdd_C"),sx=vt,hf=Tt,lo=Et,_i=_r,mf=qt,Oo=tn,yc=Br,S.VP8LMapColor32b=si,S.VP8LMapColor8b=op,I)}function qe(I,V,re,le,he){var ge=1,xe=[I],ye=[V],Ne=le.m,Ie=le.s,Qe=null,ot=0;e:for(;;){if(re)for(;ge&&ee(Ne,1);){var nt=xe,Xe=ye,Ft=le,xt=1,He=Ft.m,$e=Ft.gc[Ft.ab],kt=ee(He,2);if(Ft.Oc&1<<kt)ge=0;else{switch(Ft.Oc|=1<<kt,$e.hc=kt,$e.Ea=nt[0],$e.nc=Xe[0],$e.K=[null],++Ft.ab,t(4>=Ft.ab),kt){case 0:case 1:$e.b=ee(He,3)+2,xt=qe(Pe($e.Ea,$e.b),Pe($e.nc,$e.b),0,Ft,$e.K),$e.K=$e.K[0];break;case 3:var Ot,Bt=ee(He,8)+1,sr=16<Bt?0:4<Bt?1:2<Bt?2:3;if(nt[0]=Pe($e.Ea,sr),$e.b=sr,Ot=xt=qe(Bt,1,0,Ft,$e.K)){var Jt,wr=Bt,tr=$e,Pn=1<<(8>>tr.b),$n=s(Pn);if($n==null)Ot=0;else{var hn=tr.K[0],cn=tr.w;for($n[0]=tr.K[0][0],Jt=1;Jt<1*wr;++Jt)$n[Jt]=Ue(hn[cn+Jt],$n[Jt-1]);for(;Jt<4*Pn;++Jt)$n[Jt]=0;tr.K[0]=null,tr.K[0]=$n,Ot=1}}xt=Ot;break;case 2:break;default:t(0)}ge=xt}}if(xe=xe[0],ye=ye[0],ge&&ee(Ne,1)&&!(ge=1<=(ot=ee(Ne,4))&&11>=ot)){le.a=3;break e}var ra;if(ra=ge)t:{var Gn,Zr,ua,Ir=le,Hr=xe,Dn=ye,Rn=ot,li=re,Vs=Ir.m,ss=Ir.s,is=[null],ws=1,$l=0,qn=OA[Rn];r:for(;;){if(li&&ee(Vs,1)){var Es=ee(Vs,3)+2,Nc=Pe(Hr,Es),_f=Pe(Dn,Es),RA=Nc*_f;if(!qe(Nc,_f,0,Ir,is))break r;for(is=is[0],ss.xc=Es,Gn=0;Gn<RA;++Gn){var Sf=is[Gn]>>8&65535;is[Gn]=Sf,Sf>=ws&&(ws=Sf+1)}}if(Vs.h)break r;for(Zr=0;5>Zr;++Zr){var Ia=ml[Zr];!Zr&&0<Rn&&(Ia+=1<<Rn),$l<Ia&&($l=Ia)}var hp=o(ws*qn,k),Ax=ws,uo=o(Ax,Q);if(uo==null)var Ma=null;else t(65536>=Ax),Ma=uo;var LA=s($l);if(Ma==null||LA==null||hp==null){Ir.a=1;break r}var kf=hp;for(Gn=ua=0;Gn<ws;++Gn){var Po=Ma[Gn],jf=Po.G,Ro=Po.H,mp=0,d0=1,hx=0;for(Zr=0;5>Zr;++Zr){Ia=ml[Zr],jf[Zr]=kf,Ro[Zr]=ua,!Zr&&0<Rn&&(Ia+=1<<Rn);a:{var pp,mx=Ia,gp=Ir,f0=LA,qE=kf,KE=ua,xp=0,yd=gp.m,Pj=ee(yd,1);if(a(f0,0,0,mx),Pj){var WE=ee(yd,1)+1,XE=ee(yd,1),j1=ee(yd,XE==0?1:8);f0[j1]=1,WE==2&&(f0[j1=ee(yd,8)]=1);var A0=1}else{var B1=s(19),T1=ee(yd,4)+4;if(19<T1){gp.a=3;var vp=0;break a}for(pp=0;pp<T1;++pp)B1[pd[pp]]=ee(yd,3);var px=void 0,h0=void 0,YE=gp,JE=B1,wd=mx,bp=f0,gx=0,Cc=YE.m,m0=8,I1=o(128,k);n:for(;P(I1,0,7,JE,19);){if(ee(Cc,1)){var ZE=2+2*ee(Cc,3);if((px=2+ee(Cc,ZE))>wd)break n}else px=wd;for(h0=0;h0<wd&&px--;){te(Cc);var F1=I1[0+(127&R(Cc))];Y(Cc,Cc.u+F1.g);var MA=F1.value;if(16>MA)bp[h0++]=MA,MA!=0&&(m0=MA);else{var eN=MA==16,O1=MA-16,D1=zl[O1],P1=ee(Cc,lx[O1])+D1;if(h0+P1>wd)break n;for(var tN=eN?m0:0;0<P1--;)bp[h0++]=tN}}gx=1;break n}gx||(YE.a=3),A0=gx}(A0=A0&&!yd.h)&&(xp=P(qE,KE,8,f0,mx)),A0&&xp!=0?vp=xp:(gp.a=3,vp=0)}if(vp==0)break r;if(d0&&FA[Zr]==1&&(d0=kf[ua].g==0),mp+=kf[ua].g,ua+=vp,3>=Zr){var UA,xx=LA[0];for(UA=1;UA<Ia;++UA)LA[UA]>xx&&(xx=LA[UA]);hx+=xx}}if(Po.nd=d0,Po.Qb=0,d0&&(Po.qb=(jf[3][Ro[3]+0].value<<24|jf[1][Ro[1]+0].value<<16|jf[2][Ro[2]+0].value)>>>0,mp==0&&256>jf[0][Ro[0]+0].value&&(Po.Qb=1,Po.qb+=jf[0][Ro[0]+0].value<<8)),Po.jc=!Po.Qb&&6>hx,Po.jc){var yp,Ed=Po;for(yp=0;yp<Ms;++yp){var Nu=yp,Nd=Ed.pd[Nu],wp=Ed.G[0][Ed.H[0]+Nu];256<=wp.value?(Nd.g=wp.g+256,Nd.value=wp.value):(Nd.g=0,Nd.value=0,Nu>>=Or(wp,8,Nd),Nu>>=Or(Ed.G[1][Ed.H[1]+Nu],16,Nd),Nu>>=Or(Ed.G[2][Ed.H[2]+Nu],0,Nd),Or(Ed.G[3][Ed.H[3]+Nu],24,Nd))}}}ss.vc=is,ss.Wb=ws,ss.Ya=Ma,ss.yc=hp,ra=1;break t}ra=0}if(!(ge=ra)){le.a=3;break e}if(0<ot){if(Ie.ua=1<<ot,!je(Ie.Wa,ot)){le.a=1,ge=0;break e}}else Ie.ua=0;var Ep=le,R1=xe,rN=ye,L1=Ep.s,M1=L1.xc;if(Ep.c=R1,Ep.i=rN,L1.md=Pe(R1,M1),L1.wc=M1==0?-1:(1<<M1)-1,re){le.xb=VE;break e}if((Qe=s(xe*ye))==null){le.a=1,ge=0;break e}ge=(ge=Oe(le,Qe,0,xe,ye,ye,null))&&!Ne.h;break e}return ge?(he!=null?he[0]=Qe:(t(Qe==null),t(re)),le.$=0,re||et(Ie)):et(Ie),ge}function at(I,V){var re=I.c*I.i,le=re+V+16*V;return t(I.c<=V),I.V=s(le),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+re+V,1)}function lt(I,V){var re=I.C,le=V-re,he=I.V,ge=I.Ba+I.c*re;for(t(V<=I.l.o);0<le;){var xe=16<le?16:le,ye=I.l.ma,Ne=I.l.width,Ie=Ne*xe,Qe=ye.ca,ot=ye.tb+Ne*re,nt=I.Ta,Xe=I.Ua;pe(I,xe,he,ge),va(nt,Xe,Qe,ot,Ie),ke(ye,re,re+xe,Qe,ot,Ne),le-=xe,he+=xe*I.c,re+=xe}t(re==V),I.C=I.Ma=V}function Dt(){this.ub=this.yd=this.td=this.Rb=0}function $t(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Zt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function zt(){this.Yb=function(){var I=[];return function V(re,le,he){for(var ge=he[le],xe=0;xe<ge&&(re.push(he.length>le+1?[]:0),!(he.length<le+1));xe++)V(re[xe],le+1,he)}(I,0,[3,11]),I}()}function Kt(){this.jb=s(3),this.Wc=l([4,8],zt),this.Xc=l([4,17],zt)}function Tr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function on(){this.ld=this.La=this.dd=this.tc=0}function ln(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function gs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function So(){this.uc=this.M=this.Nb=0,this.wa=Array(new on),this.Y=0,this.ya=Array(new gs),this.aa=0,this.l=new Ls}function xs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ni(){this.cb=this.a=0,this.sc="",this.m=new X,this.Od=new Dt,this.Kc=new $t,this.ed=new Tr,this.Qa=new Zt,this.Ic=this.$c=this.Aa=0,this.D=new So,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,X),this.ia=0,this.pb=o(4,An),this.Pa=new Kt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xs),this.Hd=0,this.rb=Array(new ln),this.sb=0,this.wa=Array(new on),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new gs),this.L=this.aa=0,this.gd=l([4,2],on),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ls(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function wi(){var I=new ni;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,Us||(Us=Jh)),I}function xa(I,V,re){return I.a==0&&(I.a=V,I.sc=re,I.cb=0),0}function ai(I,V,re){return 3<=re&&I[V+0]==157&&I[V+1]==1&&I[V+2]==42}function nf(I,V){if(I==null)return 0;if(I.a=0,I.sc="OK",V==null)return xa(I,2,"null VP8Io passed to VP8GetHeaders()");var re=V.data,le=V.w,he=V.ha;if(4>he)return xa(I,7,"Truncated header.");var ge=re[le+0]|re[le+1]<<8|re[le+2]<<16,xe=I.Od;if(xe.Rb=!(1&ge),xe.td=ge>>1&7,xe.yd=ge>>4&1,xe.ub=ge>>5,3<xe.td)return xa(I,3,"Incorrect keyframe parameters.");if(!xe.yd)return xa(I,4,"Frame not displayable.");le+=3,he-=3;var ye=I.Kc;if(xe.Rb){if(7>he)return xa(I,7,"cannot parse picture header");if(!ai(re,le,he))return xa(I,3,"Bad code word");ye.c=16383&(re[le+4]<<8|re[le+3]),ye.Td=re[le+4]>>6,ye.i=16383&(re[le+6]<<8|re[le+5]),ye.Ud=re[le+6]>>6,le+=7,he-=7,I.za=ye.c+15>>4,I.Ub=ye.i+15>>4,V.width=ye.c,V.height=ye.i,V.Da=0,V.j=0,V.v=0,V.va=V.width,V.o=V.height,V.da=0,V.ib=V.width,V.hb=V.height,V.U=V.width,V.T=V.height,a((ge=I.Pa).jb,0,255,ge.jb.length),t((ge=I.Qa)!=null),ge.Cb=0,ge.Bb=0,ge.Fb=1,a(ge.Zb,0,0,ge.Zb.length),a(ge.Lb,0,0,ge.Lb)}if(xe.ub>he)return xa(I,7,"bad partition length");K(ge=I.m,re,le,xe.ub),le+=xe.ub,he-=xe.ub,xe.Rb&&(ye.Ld=oe(ge),ye.Kd=oe(ge)),ye=I.Qa;var Ne,Ie=I.Pa;if(t(ge!=null),t(ye!=null),ye.Cb=oe(ge),ye.Cb){if(ye.Bb=oe(ge),oe(ge)){for(ye.Fb=oe(ge),Ne=0;4>Ne;++Ne)ye.Zb[Ne]=oe(ge)?q(ge,7):0;for(Ne=0;4>Ne;++Ne)ye.Lb[Ne]=oe(ge)?q(ge,6):0}if(ye.Bb)for(Ne=0;3>Ne;++Ne)Ie.jb[Ne]=oe(ge)?H(ge,8):255}else ye.Bb=0;if(ge.Ka)return xa(I,3,"cannot parse segment header");if((ye=I.ed).zd=oe(ge),ye.Tb=H(ge,6),ye.wb=H(ge,3),ye.Pc=oe(ge),ye.Pc&&oe(ge)){for(Ie=0;4>Ie;++Ie)oe(ge)&&(ye.vd[Ie]=q(ge,6));for(Ie=0;4>Ie;++Ie)oe(ge)&&(ye.od[Ie]=q(ge,6))}if(I.L=ye.Tb==0?0:ye.zd?1:2,ge.Ka)return xa(I,3,"cannot parse filter header");var Qe=he;if(he=Ne=le,le=Ne+Qe,ye=Qe,I.Xb=(1<<H(I.m,2))-1,Qe<3*(Ie=I.Xb))re=7;else{for(Ne+=3*Ie,ye-=3*Ie,Qe=0;Qe<Ie;++Qe){var ot=re[he+0]|re[he+1]<<8|re[he+2]<<16;ot>ye&&(ot=ye),K(I.Jc[+Qe],re,Ne,ot),Ne+=ot,ye-=ot,he+=3}K(I.Jc[+Ie],re,Ne,ye),re=Ne<le?0:5}if(re!=0)return xa(I,re,"cannot parse partitions");for(re=H(Ne=I.m,7),he=oe(Ne)?q(Ne,4):0,le=oe(Ne)?q(Ne,4):0,ye=oe(Ne)?q(Ne,4):0,Ie=oe(Ne)?q(Ne,4):0,Ne=oe(Ne)?q(Ne,4):0,Qe=I.Qa,ot=0;4>ot;++ot){if(Qe.Cb){var nt=Qe.Zb[ot];Qe.Fb||(nt+=re)}else{if(0<ot){I.pb[ot]=I.pb[0];continue}nt=re}var Xe=I.pb[ot];Xe.Sc[0]=up[zn(nt+he,127)],Xe.Sc[1]=dp[zn(nt+0,127)],Xe.Eb[0]=2*up[zn(nt+le,127)],Xe.Eb[1]=101581*dp[zn(nt+ye,127)]>>16,8>Xe.Eb[1]&&(Xe.Eb[1]=8),Xe.Qc[0]=up[zn(nt+Ie,117)],Xe.Qc[1]=dp[zn(nt+Ne,127)],Xe.lc=nt+Ne}if(!xe.Rb)return xa(I,4,"Not a key frame.");for(oe(ge),xe=I.Pa,re=0;4>re;++re){for(he=0;8>he;++he)for(le=0;3>le;++le)for(ye=0;11>ye;++ye)Ie=ie(ge,DA[re][he][le][ye])?H(ge,8):bu[re][he][le][ye],xe.Wc[re][he].Yb[le][ye]=Ie;for(he=0;17>he;++he)xe.Xc[re][he]=xe.Wc[re][HE[he]]}return I.kc=oe(ge),I.kc&&(I.Bd=H(ge,8)),I.cb=1}function Jh(I,V,re,le,he,ge,xe){var ye=V[he].Yb[re];for(re=0;16>he;++he){if(!ie(I,ye[re+0]))return he;for(;!ie(I,ye[re+1]);)if(ye=V[++he].Yb[0],re=0,he==16)return 16;var Ne=V[he+1].Yb;if(ie(I,ye[re+2])){var Ie=I,Qe=0;if(ie(Ie,(nt=ye)[(ot=re)+3]))if(ie(Ie,nt[ot+6])){for(ye=0,ot=2*(Qe=ie(Ie,nt[ot+8]))+(nt=ie(Ie,nt[ot+9+Qe])),Qe=0,nt=Xa[ot];nt[ye];++ye)Qe+=Qe+ie(Ie,nt[ye]);Qe+=3+(8<<ot)}else ie(Ie,nt[ot+7])?(Qe=7+2*ie(Ie,165),Qe+=ie(Ie,145)):Qe=5+ie(Ie,159);else Qe=ie(Ie,nt[ot+4])?3+ie(Ie,nt[ot+5]):2;ye=Ne[2]}else Qe=1,ye=Ne[1];Ne=xe+Un[he],0>(Ie=I).b&&ae(Ie);var ot,nt=Ie.b,Xe=(ot=Ie.Ca>>1)-(Ie.I>>nt)>>31;--Ie.b,Ie.Ca+=Xe,Ie.Ca|=1,Ie.I-=(ot+1&Xe)<<nt,ge[Ne]=((Qe^Xe)-Xe)*le[(0<he)+0]}return 16}function su(I){var V=I.rb[I.sb-1];V.la=0,V.Na=0,a(I.zc,0,0,I.zc.length),I.ja=0}function vA(I,V){if(I==null)return 0;if(V==null)return xa(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!nf(I,V))return 0;if(t(I.cb),V.ac==null||V.ac(V)){V.ob&&(I.L=0);var re=bd[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=V.v-re>>4,I.zb=V.j-re>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=V.o+15+re>>4,I.Hb=V.va+15+re>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var le=I.ed;for(re=0;4>re;++re){var he;if(I.Qa.Cb){var ge=I.Qa.Lb[re];I.Qa.Fb||(ge+=le.Tb)}else ge=le.Tb;for(he=0;1>=he;++he){var xe=I.gd[re][he],ye=ge;if(le.Pc&&(ye+=le.vd[0],he&&(ye+=le.od[0])),0<(ye=0>ye?0:63<ye?63:ye)){var Ne=ye;0<le.wb&&(Ne=4<le.wb?Ne>>2:Ne>>1)>9-le.wb&&(Ne=9-le.wb),1>Ne&&(Ne=1),xe.dd=Ne,xe.tc=2*ye+Ne,xe.ld=40<=ye?2:15<=ye?1:0}else xe.tc=0;xe.La=he}}}re=0}else xa(I,6,"Frame setup failed"),re=I.a;if(re=re==0){if(re){I.$c=0,0<I.Aa||(I.Ic=$E);e:{re=I.Ic,le=4*(Ne=I.za);var Ie=32*Ne,Qe=Ne+1,ot=0<I.L?Ne*(0<I.Aa?2:1):0,nt=(I.Aa==2?2:1)*Ne;if((xe=le+832+(he=3*(16*re+bd[I.L])/2*Ie)+(ge=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=xe)re=0;else{if(xe>I.Vb){if(I.Vb=0,I.Ec=s(xe),I.Fc=0,I.Ec==null){re=xa(I,1,"no memory during frame initialization.");break e}I.Vb=xe}xe=I.Ec,ye=I.Fc,I.Ac=xe,I.Bc=ye,ye+=le,I.Gd=o(Ie,xs),I.Hd=0,I.rb=o(Qe+1,ln),I.sb=1,I.wa=ot?o(ot,on):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=Ne),t(!0),I.oc=xe,I.pc=ye,ye+=832,I.ya=o(nt,gs),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=Ne),I.R=16*Ne,I.B=8*Ne,Ne=(Ie=bd[I.L])*I.R,Ie=Ie/2*I.B,I.sa=xe,I.ta=ye+Ne,I.qa=I.sa,I.ra=I.ta+16*re*I.R+Ie,I.Ha=I.qa,I.Ia=I.ra+8*re*I.B+Ie,I.$c=0,ye+=he,I.mb=ge?xe:null,I.nb=ge?ye:null,t(ye+ge<=I.Fc+I.Vb),su(I),a(I.Ac,I.Bc,0,le),re=1}}if(re){if(V.ka=0,V.y=I.sa,V.O=I.ta,V.f=I.qa,V.N=I.ra,V.ea=I.Ha,V.Vd=I.Ia,V.fa=I.R,V.Rc=I.B,V.F=null,V.J=0,!Ad){for(re=-255;255>=re;++re)as[255+re]=0>re?-re:re;for(re=-1020;1020>=re;++re)Hl[1020+re]=-128>re?-128:127<re?127:re;for(re=-112;112>=re;++re)bf[112+re]=-16>re?-16:15<re?15:re;for(re=-255;510>=re;++re)yf[255+re]=0>re?0:255<re?255:re;Ad=1}gu=ko,wc=ou,Ec=Fl,ys=Vn,Do=lu,Ka=iu,kA=fu,xu=vc,s0=lf,pf=NA,gf=of,xf=id,jA=od,i0=Au,vf=Al,fd=Ui,BA=bs,Wa=t0,co[0]=Li,co[1]=Zh,co[2]=Pl,co[3]=e0,co[4]=jo,co[5]=Rl,co[6]=oo,co[7]=Bo,co[8]=xc,co[9]=cu,xd[0]=Ol,xd[1]=yA,xd[2]=mc,xd[3]=sf,xd[4]=ca,xd[5]=gc,xd[6]=Dl,pl[0]=Ll,pl[1]=bA,pl[2]=wA,pl[3]=To,pl[4]=yn,pl[5]=vs,pl[6]=uu,re=1}else re=0}re&&(re=function(Xe,Ft){for(Xe.M=0;Xe.M<Xe.Va;++Xe.M){var xt,He=Xe.Jc[Xe.M&Xe.Xb],$e=Xe.m,kt=Xe;for(xt=0;xt<kt.za;++xt){var Ot=$e,Bt=kt,sr=Bt.Ac,Jt=Bt.Bc+4*xt,wr=Bt.zc,tr=Bt.ya[Bt.aa+xt];if(Bt.Qa.Bb?tr.$b=ie(Ot,Bt.Pa.jb[0])?2+ie(Ot,Bt.Pa.jb[2]):ie(Ot,Bt.Pa.jb[1]):tr.$b=0,Bt.kc&&(tr.Ad=ie(Ot,Bt.Bd)),tr.Za=!ie(Ot,145)+0,tr.Za){var Pn=tr.Ob,$n=0;for(Bt=0;4>Bt;++Bt){var hn,cn=wr[0+Bt];for(hn=0;4>hn;++hn){cn=_1[sr[Jt+hn]][cn];for(var ra=Ef[ie(Ot,cn[0])];0<ra;)ra=Ef[2*ra+ie(Ot,cn[ra])];cn=-ra,sr[Jt+hn]=cn}n(Pn,$n,sr,Jt,4),$n+=4,wr[0+Bt]=cn}}else cn=ie(Ot,156)?ie(Ot,128)?1:3:ie(Ot,163)?2:0,tr.Ob[0]=cn,a(sr,Jt,cn,4),a(wr,0,cn,4);tr.Dd=ie(Ot,142)?ie(Ot,114)?ie(Ot,183)?1:3:2:0}if(kt.m.Ka)return xa(Xe,7,"Premature end-of-partition0 encountered.");for(;Xe.ja<Xe.za;++Xe.ja){if(kt=He,Ot=($e=Xe).rb[$e.sb-1],sr=$e.rb[$e.sb+$e.ja],xt=$e.ya[$e.aa+$e.ja],Jt=$e.kc?xt.Ad:0)Ot.la=sr.la=0,xt.Za||(Ot.Na=sr.Na=0),xt.Hc=0,xt.Gc=0,xt.ia=0;else{var Gn,Zr;if(Ot=sr,sr=kt,Jt=$e.Pa.Xc,wr=$e.ya[$e.aa+$e.ja],tr=$e.pb[wr.$b],Bt=wr.ad,Pn=0,$n=$e.rb[$e.sb-1],cn=hn=0,a(Bt,Pn,0,384),wr.Za)var ua=0,Ir=Jt[3];else{ra=s(16);var Hr=Ot.Na+$n.Na;if(Hr=Us(sr,Jt[1],Hr,tr.Eb,0,ra,0),Ot.Na=$n.Na=(0<Hr)+0,1<Hr)gu(ra,0,Bt,Pn);else{var Dn=ra[0]+3>>3;for(ra=0;256>ra;ra+=16)Bt[Pn+ra]=Dn}ua=1,Ir=Jt[0]}var Rn=15&Ot.la,li=15&$n.la;for(ra=0;4>ra;++ra){var Vs=1&li;for(Dn=Zr=0;4>Dn;++Dn)Rn=Rn>>1|(Vs=(Hr=Us(sr,Ir,Hr=Vs+(1&Rn),tr.Sc,ua,Bt,Pn))>ua)<<7,Zr=Zr<<2|(3<Hr?3:1<Hr?2:Bt[Pn+0]!=0),Pn+=16;Rn>>=4,li=li>>1|Vs<<7,hn=(hn<<8|Zr)>>>0}for(Ir=Rn,ua=li>>4,Gn=0;4>Gn;Gn+=2){for(Zr=0,Rn=Ot.la>>4+Gn,li=$n.la>>4+Gn,ra=0;2>ra;++ra){for(Vs=1&li,Dn=0;2>Dn;++Dn)Hr=Vs+(1&Rn),Rn=Rn>>1|(Vs=0<(Hr=Us(sr,Jt[2],Hr,tr.Qc,0,Bt,Pn)))<<3,Zr=Zr<<2|(3<Hr?3:1<Hr?2:Bt[Pn+0]!=0),Pn+=16;Rn>>=2,li=li>>1|Vs<<5}cn|=Zr<<4*Gn,Ir|=Rn<<4<<Gn,ua|=(240&li)<<Gn}Ot.la=Ir,$n.la=ua,wr.Hc=hn,wr.Gc=cn,wr.ia=43690&cn?0:tr.ia,Jt=!(hn|cn)}if(0<$e.L&&($e.wa[$e.Y+$e.ja]=$e.gd[xt.$b][xt.Za],$e.wa[$e.Y+$e.ja].La|=!Jt),kt.Ka)return xa(Xe,7,"Premature end-of-file encountered.")}if(su(Xe),$e=Ft,kt=1,xt=(He=Xe).D,Ot=0<He.L&&He.M>=He.zb&&He.M<=He.Va,He.Aa==0)e:{if(xt.M=He.M,xt.uc=Ot,Io(He,xt),kt=1,xt=(Zr=He.D).Nb,Ot=(cn=bd[He.L])*He.R,sr=cn/2*He.B,ra=16*xt*He.R,Dn=8*xt*He.B,Jt=He.sa,wr=He.ta-Ot+ra,tr=He.qa,Bt=He.ra-sr+Dn,Pn=He.Ha,$n=He.Ia-sr+Dn,li=(Rn=Zr.M)==0,hn=Rn>=He.Va-1,He.Aa==2&&Io(He,Zr),Zr.uc)for(Vs=(Hr=He).D.M,t(Hr.D.uc),Zr=Hr.yb;Zr<Hr.Hb;++Zr){ua=Zr,Ir=Vs;var ss=(is=(Ia=Hr).D).Nb;Gn=Ia.R;var is=is.wa[is.Y+ua],ws=Ia.sa,$l=Ia.ta+16*ss*Gn+16*ua,qn=is.dd,Es=is.tc;if(Es!=0)if(t(3<=Es),Ia.L==1)0<ua&&fd(ws,$l,Gn,Es+4),is.La&&Wa(ws,$l,Gn,Es),0<Ir&&vf(ws,$l,Gn,Es+4),is.La&&BA(ws,$l,Gn,Es);else{var Nc=Ia.B,_f=Ia.qa,RA=Ia.ra+8*ss*Nc+8*ua,Sf=Ia.Ha,Ia=Ia.Ia+8*ss*Nc+8*ua;ss=is.ld,0<ua&&(xu(ws,$l,Gn,Es+4,qn,ss),pf(_f,RA,Sf,Ia,Nc,Es+4,qn,ss)),is.La&&(xf(ws,$l,Gn,Es,qn,ss),i0(_f,RA,Sf,Ia,Nc,Es,qn,ss)),0<Ir&&(kA(ws,$l,Gn,Es+4,qn,ss),s0(_f,RA,Sf,Ia,Nc,Es+4,qn,ss)),is.La&&(gf(ws,$l,Gn,Es,qn,ss),jA(_f,RA,Sf,Ia,Nc,Es,qn,ss))}}if(He.ia&&alert("todo:DitherRow"),$e.put!=null){if(Zr=16*Rn,Rn=16*(Rn+1),li?($e.y=He.sa,$e.O=He.ta+ra,$e.f=He.qa,$e.N=He.ra+Dn,$e.ea=He.Ha,$e.W=He.Ia+Dn):(Zr-=cn,$e.y=Jt,$e.O=wr,$e.f=tr,$e.N=Bt,$e.ea=Pn,$e.W=$n),hn||(Rn-=cn),Rn>$e.o&&(Rn=$e.o),$e.F=null,$e.J=null,He.Fa!=null&&0<He.Fa.length&&Zr<Rn&&($e.J=uf(He,$e,Zr,Rn-Zr),$e.F=He.mb,$e.F==null&&$e.F.length==0)){kt=xa(He,3,"Could not decode alpha data.");break e}Zr<$e.j&&(cn=$e.j-Zr,Zr=$e.j,t(!(1&cn)),$e.O+=He.R*cn,$e.N+=He.B*(cn>>1),$e.W+=He.B*(cn>>1),$e.F!=null&&($e.J+=$e.width*cn)),Zr<Rn&&($e.O+=$e.v,$e.N+=$e.v>>1,$e.W+=$e.v>>1,$e.F!=null&&($e.J+=$e.v),$e.ka=Zr-$e.j,$e.U=$e.va-$e.v,$e.T=Rn-Zr,kt=$e.put($e))}xt+1!=He.Ic||hn||(n(He.sa,He.ta-Ot,Jt,wr+16*He.R,Ot),n(He.qa,He.ra-sr,tr,Bt+8*He.B,sr),n(He.Ha,He.Ia-sr,Pn,$n+8*He.B,sr))}if(!kt)return xa(Xe,6,"Output aborted.")}return 1}(I,V)),V.bc!=null&&V.bc(V),re&=1}return re?(I.cb=0,re):0}function Ei(I,V,re,le,he){he=I[V+re+32*le]+(he>>3),I[V+re+32*le]=-256&he?0>he?0:255:he}function af(I,V,re,le,he,ge){Ei(I,V,0,re,le+he),Ei(I,V,1,re,le+ge),Ei(I,V,2,re,le-ge),Ei(I,V,3,re,le-he)}function On(I){return(20091*I>>16)+I}function Ni(I,V,re,le){var he,ge=0,xe=s(16);for(he=0;4>he;++he){var ye=I[V+0]+I[V+8],Ne=I[V+0]-I[V+8],Ie=(35468*I[V+4]>>16)-On(I[V+12]),Qe=On(I[V+4])+(35468*I[V+12]>>16);xe[ge+0]=ye+Qe,xe[ge+1]=Ne+Ie,xe[ge+2]=Ne-Ie,xe[ge+3]=ye-Qe,ge+=4,V++}for(he=ge=0;4>he;++he)ye=(I=xe[ge+0]+4)+xe[ge+8],Ne=I-xe[ge+8],Ie=(35468*xe[ge+4]>>16)-On(xe[ge+12]),Ei(re,le,0,0,ye+(Qe=On(xe[ge+4])+(35468*xe[ge+12]>>16))),Ei(re,le,1,0,Ne+Ie),Ei(re,le,2,0,Ne-Ie),Ei(re,le,3,0,ye-Qe),ge++,le+=32}function iu(I,V,re,le){var he=I[V+0]+4,ge=35468*I[V+4]>>16,xe=On(I[V+4]),ye=35468*I[V+1]>>16;af(re,le,0,he+xe,I=On(I[V+1]),ye),af(re,le,1,he+ge,I,ye),af(re,le,2,he-ge,I,ye),af(re,le,3,he-xe,I,ye)}function ou(I,V,re,le,he){Ni(I,V,re,le),he&&Ni(I,V+16,re,le+4)}function Fl(I,V,re,le){wc(I,V+0,re,le,1),wc(I,V+32,re,le+128,1)}function Vn(I,V,re,le){var he;for(I=I[V+0]+4,he=0;4>he;++he)for(V=0;4>V;++V)Ei(re,le,V,he,I)}function lu(I,V,re,le){I[V+0]&&ys(I,V+0,re,le),I[V+16]&&ys(I,V+16,re,le+4),I[V+32]&&ys(I,V+32,re,le+128),I[V+48]&&ys(I,V+48,re,le+128+4)}function ko(I,V,re,le){var he,ge=s(16);for(he=0;4>he;++he){var xe=I[V+0+he]+I[V+12+he],ye=I[V+4+he]+I[V+8+he],Ne=I[V+4+he]-I[V+8+he],Ie=I[V+0+he]-I[V+12+he];ge[0+he]=xe+ye,ge[8+he]=xe-ye,ge[4+he]=Ie+Ne,ge[12+he]=Ie-Ne}for(he=0;4>he;++he)xe=(I=ge[0+4*he]+3)+ge[3+4*he],ye=ge[1+4*he]+ge[2+4*he],Ne=ge[1+4*he]-ge[2+4*he],Ie=I-ge[3+4*he],re[le+0]=xe+ye>>3,re[le+16]=Ie+Ne>>3,re[le+32]=xe-ye>>3,re[le+48]=Ie-Ne>>3,le+=64}function hc(I,V,re){var le,he=V-32,ge=ii,xe=255-I[he-1];for(le=0;le<re;++le){var ye,Ne=ge,Ie=xe+I[V-1];for(ye=0;ye<re;++ye)I[V+ye]=Ne[Ie+I[he+ye]];V+=32}}function Zh(I,V){hc(I,V,4)}function bA(I,V){hc(I,V,8)}function yA(I,V){hc(I,V,16)}function mc(I,V){var re;for(re=0;16>re;++re)n(I,V+32*re,I,V-32,16)}function sf(I,V){var re;for(re=16;0<re;--re)a(I,V,I[V-1],16),V+=32}function pc(I,V,re){var le;for(le=0;16>le;++le)a(V,re+32*le,I,16)}function Ol(I,V){var re,le=16;for(re=0;16>re;++re)le+=I[V-1+32*re]+I[V+re-32];pc(le>>5,I,V)}function ca(I,V){var re,le=8;for(re=0;16>re;++re)le+=I[V-1+32*re];pc(le>>4,I,V)}function gc(I,V){var re,le=8;for(re=0;16>re;++re)le+=I[V+re-32];pc(le>>4,I,V)}function Dl(I,V){pc(128,I,V)}function Dr(I,V,re){return I+2*V+re+2>>2}function Pl(I,V){var re,le=V-32;for(le=new Uint8Array([Dr(I[le-1],I[le+0],I[le+1]),Dr(I[le+0],I[le+1],I[le+2]),Dr(I[le+1],I[le+2],I[le+3]),Dr(I[le+2],I[le+3],I[le+4])]),re=0;4>re;++re)n(I,V+32*re,le,0,le.length)}function e0(I,V){var re=I[V-1],le=I[V-1+32],he=I[V-1+64],ge=I[V-1+96];ue(I,V+0,16843009*Dr(I[V-1-32],re,le)),ue(I,V+32,16843009*Dr(re,le,he)),ue(I,V+64,16843009*Dr(le,he,ge)),ue(I,V+96,16843009*Dr(he,ge,ge))}function Li(I,V){var re,le=4;for(re=0;4>re;++re)le+=I[V+re-32]+I[V-1+32*re];for(le>>=3,re=0;4>re;++re)a(I,V+32*re,le,4)}function jo(I,V){var re=I[V-1+0],le=I[V-1+32],he=I[V-1+64],ge=I[V-1-32],xe=I[V+0-32],ye=I[V+1-32],Ne=I[V+2-32],Ie=I[V+3-32];I[V+0+96]=Dr(le,he,I[V-1+96]),I[V+1+96]=I[V+0+64]=Dr(re,le,he),I[V+2+96]=I[V+1+64]=I[V+0+32]=Dr(ge,re,le),I[V+3+96]=I[V+2+64]=I[V+1+32]=I[V+0+0]=Dr(xe,ge,re),I[V+3+64]=I[V+2+32]=I[V+1+0]=Dr(ye,xe,ge),I[V+3+32]=I[V+2+0]=Dr(Ne,ye,xe),I[V+3+0]=Dr(Ie,Ne,ye)}function oo(I,V){var re=I[V+1-32],le=I[V+2-32],he=I[V+3-32],ge=I[V+4-32],xe=I[V+5-32],ye=I[V+6-32],Ne=I[V+7-32];I[V+0+0]=Dr(I[V+0-32],re,le),I[V+1+0]=I[V+0+32]=Dr(re,le,he),I[V+2+0]=I[V+1+32]=I[V+0+64]=Dr(le,he,ge),I[V+3+0]=I[V+2+32]=I[V+1+64]=I[V+0+96]=Dr(he,ge,xe),I[V+3+32]=I[V+2+64]=I[V+1+96]=Dr(ge,xe,ye),I[V+3+64]=I[V+2+96]=Dr(xe,ye,Ne),I[V+3+96]=Dr(ye,Ne,Ne)}function Rl(I,V){var re=I[V-1+0],le=I[V-1+32],he=I[V-1+64],ge=I[V-1-32],xe=I[V+0-32],ye=I[V+1-32],Ne=I[V+2-32],Ie=I[V+3-32];I[V+0+0]=I[V+1+64]=ge+xe+1>>1,I[V+1+0]=I[V+2+64]=xe+ye+1>>1,I[V+2+0]=I[V+3+64]=ye+Ne+1>>1,I[V+3+0]=Ne+Ie+1>>1,I[V+0+96]=Dr(he,le,re),I[V+0+64]=Dr(le,re,ge),I[V+0+32]=I[V+1+96]=Dr(re,ge,xe),I[V+1+32]=I[V+2+96]=Dr(ge,xe,ye),I[V+2+32]=I[V+3+96]=Dr(xe,ye,Ne),I[V+3+32]=Dr(ye,Ne,Ie)}function Bo(I,V){var re=I[V+0-32],le=I[V+1-32],he=I[V+2-32],ge=I[V+3-32],xe=I[V+4-32],ye=I[V+5-32],Ne=I[V+6-32],Ie=I[V+7-32];I[V+0+0]=re+le+1>>1,I[V+1+0]=I[V+0+64]=le+he+1>>1,I[V+2+0]=I[V+1+64]=he+ge+1>>1,I[V+3+0]=I[V+2+64]=ge+xe+1>>1,I[V+0+32]=Dr(re,le,he),I[V+1+32]=I[V+0+96]=Dr(le,he,ge),I[V+2+32]=I[V+1+96]=Dr(he,ge,xe),I[V+3+32]=I[V+2+96]=Dr(ge,xe,ye),I[V+3+64]=Dr(xe,ye,Ne),I[V+3+96]=Dr(ye,Ne,Ie)}function cu(I,V){var re=I[V-1+0],le=I[V-1+32],he=I[V-1+64],ge=I[V-1+96];I[V+0+0]=re+le+1>>1,I[V+2+0]=I[V+0+32]=le+he+1>>1,I[V+2+32]=I[V+0+64]=he+ge+1>>1,I[V+1+0]=Dr(re,le,he),I[V+3+0]=I[V+1+32]=Dr(le,he,ge),I[V+3+32]=I[V+1+64]=Dr(he,ge,ge),I[V+3+64]=I[V+2+64]=I[V+0+96]=I[V+1+96]=I[V+2+96]=I[V+3+96]=ge}function xc(I,V){var re=I[V-1+0],le=I[V-1+32],he=I[V-1+64],ge=I[V-1+96],xe=I[V-1-32],ye=I[V+0-32],Ne=I[V+1-32],Ie=I[V+2-32];I[V+0+0]=I[V+2+32]=re+xe+1>>1,I[V+0+32]=I[V+2+64]=le+re+1>>1,I[V+0+64]=I[V+2+96]=he+le+1>>1,I[V+0+96]=ge+he+1>>1,I[V+3+0]=Dr(ye,Ne,Ie),I[V+2+0]=Dr(xe,ye,Ne),I[V+1+0]=I[V+3+32]=Dr(re,xe,ye),I[V+1+32]=I[V+3+64]=Dr(le,re,xe),I[V+1+64]=I[V+3+96]=Dr(he,le,re),I[V+1+96]=Dr(ge,he,le)}function wA(I,V){var re;for(re=0;8>re;++re)n(I,V+32*re,I,V-32,8)}function To(I,V){var re;for(re=0;8>re;++re)a(I,V,I[V-1],8),V+=32}function Mi(I,V,re){var le;for(le=0;8>le;++le)a(V,re+32*le,I,8)}function Ll(I,V){var re,le=8;for(re=0;8>re;++re)le+=I[V+re-32]+I[V-1+32*re];Mi(le>>4,I,V)}function vs(I,V){var re,le=4;for(re=0;8>re;++re)le+=I[V+re-32];Mi(le>>3,I,V)}function yn(I,V){var re,le=4;for(re=0;8>re;++re)le+=I[V-1+32*re];Mi(le>>3,I,V)}function uu(I,V){Mi(128,I,V)}function Ml(I,V,re){var le=I[V-re],he=I[V+0],ge=3*(he-le)+ix[1020+I[V-2*re]-I[V+re]],xe=TA[112+(ge+4>>3)];I[V-re]=ii[255+le+TA[112+(ge+3>>3)]],I[V+0]=ii[255+he-xe]}function EA(I,V,re,le){var he=I[V+0],ge=I[V+re];return Vl[255+I[V-2*re]-I[V-re]]>le||Vl[255+ge-he]>le}function ad(I,V,re,le){return 4*Vl[255+I[V-re]-I[V+0]]+Vl[255+I[V-2*re]-I[V+re]]<=le}function sd(I,V,re,le,he){var ge=I[V-3*re],xe=I[V-2*re],ye=I[V-re],Ne=I[V+0],Ie=I[V+re],Qe=I[V+2*re],ot=I[V+3*re];return 4*Vl[255+ye-Ne]+Vl[255+xe-Ie]>le?0:Vl[255+I[V-4*re]-ge]<=he&&Vl[255+ge-xe]<=he&&Vl[255+xe-ye]<=he&&Vl[255+ot-Qe]<=he&&Vl[255+Qe-Ie]<=he&&Vl[255+Ie-Ne]<=he}function Al(I,V,re,le){var he=2*le+1;for(le=0;16>le;++le)ad(I,V+le,re,he)&&Ml(I,V+le,re)}function Ui(I,V,re,le){var he=2*le+1;for(le=0;16>le;++le)ad(I,V+le*re,1,he)&&Ml(I,V+le*re,1)}function bs(I,V,re,le){var he;for(he=3;0<he;--he)Al(I,V+=4*re,re,le)}function t0(I,V,re,le){var he;for(he=3;0<he;--he)Ui(I,V+=4,re,le)}function du(I,V,re,le,he,ge,xe,ye){for(ge=2*ge+1;0<he--;){if(sd(I,V,re,ge,xe))if(EA(I,V,re,ye))Ml(I,V,re);else{var Ne=I,Ie=V,Qe=re,ot=Ne[Ie-2*Qe],nt=Ne[Ie-Qe],Xe=Ne[Ie+0],Ft=Ne[Ie+Qe],xt=Ne[Ie+2*Qe],He=27*(kt=ix[1020+3*(Xe-nt)+ix[1020+ot-Ft]])+63>>7,$e=18*kt+63>>7,kt=9*kt+63>>7;Ne[Ie-3*Qe]=ii[255+Ne[Ie-3*Qe]+kt],Ne[Ie-2*Qe]=ii[255+ot+$e],Ne[Ie-Qe]=ii[255+nt+He],Ne[Ie+0]=ii[255+Xe-He],Ne[Ie+Qe]=ii[255+Ft-$e],Ne[Ie+2*Qe]=ii[255+xt-kt]}V+=le}}function Ci(I,V,re,le,he,ge,xe,ye){for(ge=2*ge+1;0<he--;){if(sd(I,V,re,ge,xe))if(EA(I,V,re,ye))Ml(I,V,re);else{var Ne=I,Ie=V,Qe=re,ot=Ne[Ie-Qe],nt=Ne[Ie+0],Xe=Ne[Ie+Qe],Ft=TA[112+((xt=3*(nt-ot))+4>>3)],xt=TA[112+(xt+3>>3)],He=Ft+1>>1;Ne[Ie-2*Qe]=ii[255+Ne[Ie-2*Qe]+He],Ne[Ie-Qe]=ii[255+ot+xt],Ne[Ie+0]=ii[255+nt-Ft],Ne[Ie+Qe]=ii[255+Xe-He]}V+=le}}function fu(I,V,re,le,he,ge){du(I,V,re,1,16,le,he,ge)}function vc(I,V,re,le,he,ge){du(I,V,1,re,16,le,he,ge)}function of(I,V,re,le,he,ge){var xe;for(xe=3;0<xe;--xe)Ci(I,V+=4*re,re,1,16,le,he,ge)}function id(I,V,re,le,he,ge){var xe;for(xe=3;0<xe;--xe)Ci(I,V+=4,1,re,16,le,he,ge)}function lf(I,V,re,le,he,ge,xe,ye){du(I,V,he,1,8,ge,xe,ye),du(re,le,he,1,8,ge,xe,ye)}function NA(I,V,re,le,he,ge,xe,ye){du(I,V,1,he,8,ge,xe,ye),du(re,le,1,he,8,ge,xe,ye)}function od(I,V,re,le,he,ge,xe,ye){Ci(I,V+4*he,he,1,8,ge,xe,ye),Ci(re,le+4*he,he,1,8,ge,xe,ye)}function Au(I,V,re,le,he,ge,xe,ye){Ci(I,V+4,1,he,8,ge,xe,ye),Ci(re,le+4,1,he,8,ge,xe,ye)}function ld(){this.ba=new la,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new an,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function cf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function cd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function hu(){this.ua=0,this.Wa=new Ae,this.vb=new Ae,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new k}function r0(){this.xb=this.a=0,this.l=new Ls,this.ca=new la,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new hu,this.ab=0,this.gc=o(4,cd),this.Oc=0}function bc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ls,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mu(I,V,re,le,he,ge,xe){for(I=I==null?0:I[V+0],V=0;V<xe;++V)he[ge+V]=I+re[le+V]&255,I=he[ge+V]}function ud(I,V,re,le,he,ge,xe){var ye;if(I==null)mu(null,null,re,le,he,ge,xe);else for(ye=0;ye<xe;++ye)he[ge+ye]=I[V+ye]+re[le+ye]&255}function Qi(I,V,re,le,he,ge,xe){if(I==null)mu(null,null,re,le,he,ge,xe);else{var ye,Ne=I[V+0],Ie=Ne,Qe=Ne;for(ye=0;ye<xe;++ye)Ie=Qe+(Ne=I[V+ye])-Ie,Qe=re[le+ye]+(-256&Ie?0>Ie?0:255:Ie)&255,Ie=Ne,he[ge+ye]=Qe}}function uf(I,V,re,le){var he=V.width,ge=V.o;if(t(I!=null&&V!=null),0>re||0>=le||re+le>ge)return null;if(!I.Cc){if(I.ga==null){var xe;if(I.ga=new bc,(xe=I.ga==null)||(xe=V.width*V.o,t(I.Gb.length==0),I.Gb=s(xe),I.Uc=0,I.Gb==null?xe=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,xe=1),xe=!xe),!xe){xe=I.ga;var ye=I.Fa,Ne=I.P,Ie=I.qc,Qe=I.mb,ot=I.nb,nt=Ne+1,Xe=Ie-1,Ft=xe.l;if(t(ye!=null&&Qe!=null&&V!=null),yu[0]=null,yu[1]=mu,yu[2]=ud,yu[3]=Qi,xe.ca=Qe,xe.tb=ot,xe.c=V.width,xe.i=V.height,t(0<xe.c&&0<xe.i),1>=Ie)V=0;else if(xe.$a=ye[Ne+0]>>0&3,xe.Z=ye[Ne+0]>>2&3,xe.Lc=ye[Ne+0]>>4&3,Ne=ye[Ne+0]>>6&3,0>xe.$a||1<xe.$a||4<=xe.Z||1<xe.Lc||Ne)V=0;else if(Ft.put=bt,Ft.ac=Ze,Ft.bc=Nt,Ft.ma=xe,Ft.width=V.width,Ft.height=V.height,Ft.Da=V.Da,Ft.v=V.v,Ft.va=V.va,Ft.j=V.j,Ft.o=V.o,xe.$a)e:{t(xe.$a==1),V=ft();t:for(;;){if(V==null){V=0;break e}if(t(xe!=null),xe.mc=V,V.c=xe.c,V.i=xe.i,V.l=xe.l,V.l.ma=xe,V.l.width=xe.c,V.l.height=xe.i,V.a=0,z(V.m,ye,nt,Xe),!qe(xe.c,xe.i,1,V,null)||(V.ab==1&&V.gc[0].hc==3&&Se(V.s)?(xe.ic=1,ye=V.c*V.i,V.Ta=null,V.Ua=0,V.V=s(ye),V.Ba=0,V.V==null?(V.a=1,V=0):V=1):(xe.ic=0,V=at(V,xe.c)),!V))break t;V=1;break e}xe.mc=null,V=0}else V=Xe>=xe.c*xe.i;xe=!V}if(xe)return null;I.ga.Lc!=1?I.Ga=0:le=ge-re}t(I.ga!=null),t(re+le<=ge);e:{if(V=(ye=I.ga).c,ge=ye.l.o,ye.$a==0){if(nt=I.rc,Xe=I.Vc,Ft=I.Fa,Ne=I.P+1+re*V,Ie=I.mb,Qe=I.nb+re*V,t(Ne<=I.P+I.qc),ye.Z!=0)for(t(yu[ye.Z]!=null),xe=0;xe<le;++xe)yu[ye.Z](nt,Xe,Ft,Ne,Ie,Qe,V),nt=Ie,Xe=Qe,Qe+=V,Ne+=V;else for(xe=0;xe<le;++xe)n(Ie,Qe,Ft,Ne,V),nt=Ie,Xe=Qe,Qe+=V,Ne+=V;I.rc=nt,I.Vc=Xe}else{if(t(ye.mc!=null),V=re+le,t((xe=ye.mc)!=null),t(V<=xe.i),xe.C>=V)V=1;else if(ye.ic||Ke(),ye.ic){ye=xe.V,nt=xe.Ba,Xe=xe.c;var xt=xe.i,He=(Ft=1,Ne=xe.$/Xe,Ie=xe.$%Xe,Qe=xe.m,ot=xe.s,xe.$),$e=Xe*xt,kt=Xe*V,Ot=ot.wc,Bt=He<kt?Yr(ot,Ie,Ne):null;t(He<=$e),t(V<=xt),t(Se(ot));t:for(;;){for(;!Qe.h&&He<kt;){if(Ie&Ot||(Bt=Yr(ot,Ie,Ne)),t(Bt!=null),te(Qe),256>(xt=ur(Bt.G[0],Bt.H[0],Qe)))ye[nt+He]=xt,++He,++Ie>=Xe&&(Ie=0,++Ne<=V&&!(Ne%16)&&Te(xe,Ne));else{if(!(280>xt)){Ft=0;break t}xt=rr(xt-256,Qe);var sr,Jt=ur(Bt.G[4],Bt.H[4],Qe);if(te(Qe),!(He>=(Jt=br(Xe,Jt=rr(Jt,Qe)))&&$e-He>=xt)){Ft=0;break t}for(sr=0;sr<xt;++sr)ye[nt+He+sr]=ye[nt+He+sr-Jt];for(He+=xt,Ie+=xt;Ie>=Xe;)Ie-=Xe,++Ne<=V&&!(Ne%16)&&Te(xe,Ne);He<kt&&Ie&Ot&&(Bt=Yr(ot,Ie,Ne))}t(Qe.h==G(Qe))}Te(xe,Ne>V?V:Ne);break t}!Ft||Qe.h&&He<$e?(Ft=0,xe.a=Qe.h?5:3):xe.$=He,V=Ft}else V=Oe(xe,xe.V,xe.Ba,xe.c,xe.i,V,lt);if(!V){le=0;break e}}re+le>=ge&&(I.Cc=1),le=1}if(!le)return null;if(I.Cc&&((le=I.ga)!=null&&(le.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+re*he}function Z(I,V,re,le,he,ge){for(;0<he--;){var xe,ye=I,Ne=V+(re?1:0),Ie=I,Qe=V+(re?0:3);for(xe=0;xe<le;++xe){var ot=Ie[Qe+4*xe];ot!=255&&(ot*=32897,ye[Ne+4*xe+0]=ye[Ne+4*xe+0]*ot>>23,ye[Ne+4*xe+1]=ye[Ne+4*xe+1]*ot>>23,ye[Ne+4*xe+2]=ye[Ne+4*xe+2]*ot>>23)}V+=ge}}function me(I,V,re,le,he){for(;0<le--;){var ge;for(ge=0;ge<re;++ge){var xe=I[V+2*ge+0],ye=15&(Ie=I[V+2*ge+1]),Ne=4369*ye,Ie=(240&Ie|Ie>>4)*Ne>>16;I[V+2*ge+0]=(240&xe|xe>>4)*Ne>>16&240|(15&xe|xe<<4)*Ne>>16>>4&15,I[V+2*ge+1]=240&Ie|ye}V+=he}}function Re(I,V,re,le,he,ge,xe,ye){var Ne,Ie,Qe=255;for(Ie=0;Ie<he;++Ie){for(Ne=0;Ne<le;++Ne){var ot=I[V+Ne];ge[xe+4*Ne]=ot,Qe&=ot}V+=re,xe+=ye}return Qe!=255}function Me(I,V,re,le,he){var ge;for(ge=0;ge<he;++ge)re[le+ge]=I[V+ge]>>8}function Ke(){hl=Z,gn=me,xn=Re,va=Me}function Ct(I,V,re){S[I]=function(le,he,ge,xe,ye,Ne,Ie,Qe,ot,nt,Xe,Ft,xt,He,$e,kt,Ot){var Bt,sr=Ot-1>>1,Jt=ye[Ne+0]|Ie[Qe+0]<<16,wr=ot[nt+0]|Xe[Ft+0]<<16;t(le!=null);var tr=3*Jt+wr+131074>>2;for(V(le[he+0],255&tr,tr>>16,xt,He),ge!=null&&(tr=3*wr+Jt+131074>>2,V(ge[xe+0],255&tr,tr>>16,$e,kt)),Bt=1;Bt<=sr;++Bt){var Pn=ye[Ne+Bt]|Ie[Qe+Bt]<<16,$n=ot[nt+Bt]|Xe[Ft+Bt]<<16,hn=Jt+Pn+wr+$n+524296,cn=hn+2*(Pn+wr)>>3;tr=cn+Jt>>1,Jt=(hn=hn+2*(Jt+$n)>>3)+Pn>>1,V(le[he+2*Bt-1],255&tr,tr>>16,xt,He+(2*Bt-1)*re),V(le[he+2*Bt-0],255&Jt,Jt>>16,xt,He+(2*Bt-0)*re),ge!=null&&(tr=hn+wr>>1,Jt=cn+$n>>1,V(ge[xe+2*Bt-1],255&tr,tr>>16,$e,kt+(2*Bt-1)*re),V(ge[xe+2*Bt+0],255&Jt,Jt>>16,$e,kt+(2*Bt+0)*re)),Jt=Pn,wr=$n}1&Ot||(tr=3*Jt+wr+131074>>2,V(le[he+Ot-1],255&tr,tr>>16,xt,He+(Ot-1)*re),ge!=null&&(tr=3*wr+Jt+131074>>2,V(ge[xe+Ot-1],255&tr,tr>>16,$e,kt+(Ot-1)*re)))}}function Qt(){oi[Hi]=vd,oi[o0]=wu,oi[vu]=Nf,oi[lp]=cx,oi[IA]=ux,oi[hd]=u0,oi[ox]=dx,oi[cp]=wu,oi[wf]=cx,oi[md]=ux,oi[l0]=u0}function er(I){return I&-16384?0>I?0:255:I>>Fj}function D(I,V){return er((19077*I>>8)+(26149*V>>8)-14234)}function se(I,V,re){return er((19077*I>>8)-(6419*V>>8)-(13320*re>>8)+8708)}function ce(I,V){return er((19077*I>>8)+(33050*V>>8)-17685)}function we(I,V,re,le,he){le[he+0]=D(I,re),le[he+1]=se(I,V,re),le[he+2]=ce(I,V)}function Ge(I,V,re,le,he){le[he+0]=ce(I,V),le[he+1]=se(I,V,re),le[he+2]=D(I,re)}function ct(I,V,re,le,he){var ge=se(I,V,re);V=ge<<3&224|ce(I,V)>>3,le[he+0]=248&D(I,re)|ge>>5,le[he+1]=V}function Vt(I,V,re,le,he){var ge=240&ce(I,V)|15;le[he+0]=240&D(I,re)|se(I,V,re)>>4,le[he+1]=ge}function Pr(I,V,re,le,he){le[he+0]=255,we(I,V,re,le,he+1)}function wn(I,V,re,le,he){Ge(I,V,re,le,he),le[he+3]=255}function Jr(I,V,re,le,he){we(I,V,re,le,he),le[he+3]=255}function zn(I,V){return 0>I?0:I>V?V:I}function ta(I,V,re){S[I]=function(le,he,ge,xe,ye,Ne,Ie,Qe,ot){for(var nt=Qe+(-2&ot)*re;Qe!=nt;)V(le[he+0],ge[xe+0],ye[Ne+0],Ie,Qe),V(le[he+1],ge[xe+0],ye[Ne+0],Ie,Qe+re),he+=2,++xe,++Ne,Qe+=2*re;1&ot&&V(le[he+0],ge[xe+0],ye[Ne+0],Ie,Qe)}}function Ul(I,V,re){return re==0?I==0?V==0?6:5:V==0?4:0:re}function ns(I,V,re,le,he){switch(I>>>30){case 3:wc(V,re,le,he,0);break;case 2:Ka(V,re,le,he);break;case 1:ys(V,re,le,he)}}function Io(I,V){var re,le,he=V.M,ge=V.Nb,xe=I.oc,ye=I.pc+40,Ne=I.oc,Ie=I.pc+584,Qe=I.oc,ot=I.pc+600;for(re=0;16>re;++re)xe[ye+32*re-1]=129;for(re=0;8>re;++re)Ne[Ie+32*re-1]=129,Qe[ot+32*re-1]=129;for(0<he?xe[ye-1-32]=Ne[Ie-1-32]=Qe[ot-1-32]=129:(a(xe,ye-32-1,127,21),a(Ne,Ie-32-1,127,9),a(Qe,ot-32-1,127,9)),le=0;le<I.za;++le){var nt=V.ya[V.aa+le];if(0<le){for(re=-1;16>re;++re)n(xe,ye+32*re-4,xe,ye+32*re+12,4);for(re=-1;8>re;++re)n(Ne,Ie+32*re-4,Ne,Ie+32*re+4,4),n(Qe,ot+32*re-4,Qe,ot+32*re+4,4)}var Xe=I.Gd,Ft=I.Hd+le,xt=nt.ad,He=nt.Hc;if(0<he&&(n(xe,ye-32,Xe[Ft].y,0,16),n(Ne,Ie-32,Xe[Ft].f,0,8),n(Qe,ot-32,Xe[Ft].ea,0,8)),nt.Za){var $e=xe,kt=ye-32+16;for(0<he&&(le>=I.za-1?a($e,kt,Xe[Ft].y[15],4):n($e,kt,Xe[Ft+1].y,0,4)),re=0;4>re;re++)$e[kt+128+re]=$e[kt+256+re]=$e[kt+384+re]=$e[kt+0+re];for(re=0;16>re;++re,He<<=2)$e=xe,kt=ye+PA[re],co[nt.Ob[re]]($e,kt),ns(He,xt,16*+re,$e,kt)}else if($e=Ul(le,he,nt.Ob[0]),xd[$e](xe,ye),He!=0)for(re=0;16>re;++re,He<<=2)ns(He,xt,16*+re,xe,ye+PA[re]);for(re=nt.Gc,$e=Ul(le,he,nt.Dd),pl[$e](Ne,Ie),pl[$e](Qe,ot),He=xt,$e=Ne,kt=Ie,255&(nt=re>>0)&&(170&nt?Ec(He,256,$e,kt):Do(He,256,$e,kt)),nt=Qe,He=ot,255&(re>>=8)&&(170&re?Ec(xt,320,nt,He):Do(xt,320,nt,He)),he<I.Ub-1&&(n(Xe[Ft].y,0,xe,ye+480,16),n(Xe[Ft].f,0,Ne,Ie+224,8),n(Xe[Ft].ea,0,Qe,ot+224,8)),re=8*ge*I.B,Xe=I.sa,Ft=I.ta+16*le+16*ge*I.R,xt=I.qa,nt=I.ra+8*le+re,He=I.Ha,$e=I.Ia+8*le+re,re=0;16>re;++re)n(Xe,Ft+re*I.R,xe,ye+32*re,16);for(re=0;8>re;++re)n(xt,nt+re*I.B,Ne,Ie+32*re,8),n(He,$e+re*I.B,Qe,ot+32*re,8)}}function pu(I,V,re,le,he,ge,xe,ye,Ne){var Ie=[0],Qe=[0],ot=0,nt=Ne!=null?Ne.kd:0,Xe=Ne??new cf;if(I==null||12>re)return 7;Xe.data=I,Xe.w=V,Xe.ha=re,V=[V],re=[re],Xe.gb=[Xe.gb];e:{var Ft=V,xt=re,He=Xe.gb;if(t(I!=null),t(xt!=null),t(He!=null),He[0]=0,12<=xt[0]&&!r(I,Ft[0],"RIFF")){if(r(I,Ft[0]+8,"WEBP")){He=3;break e}var $e=Be(I,Ft[0]+4);if(12>$e||4294967286<$e){He=3;break e}if(nt&&$e>xt[0]-8){He=7;break e}He[0]=$e,Ft[0]+=12,xt[0]-=12}He=0}if(He!=0)return He;for($e=0<Xe.gb[0],re=re[0];;){e:{var kt=I;xt=V,He=re;var Ot=Ie,Bt=Qe,sr=Ft=[0];if((tr=ot=[ot])[0]=0,8>He[0])He=7;else{if(!r(kt,xt[0],"VP8X")){if(Be(kt,xt[0]+4)!=10){He=3;break e}if(18>He[0]){He=7;break e}var Jt=Be(kt,xt[0]+8),wr=1+ne(kt,xt[0]+12);if(2147483648<=wr*(kt=1+ne(kt,xt[0]+15))){He=3;break e}sr!=null&&(sr[0]=Jt),Ot!=null&&(Ot[0]=wr),Bt!=null&&(Bt[0]=kt),xt[0]+=18,He[0]-=18,tr[0]=1}He=0}}if(ot=ot[0],Ft=Ft[0],He!=0)return He;if(xt=!!(2&Ft),!$e&&ot)return 3;if(ge!=null&&(ge[0]=!!(16&Ft)),xe!=null&&(xe[0]=xt),ye!=null&&(ye[0]=0),xe=Ie[0],Ft=Qe[0],ot&&xt&&Ne==null){He=0;break}if(4>re){He=7;break}if($e&&ot||!$e&&!ot&&!r(I,V[0],"ALPH")){re=[re],Xe.na=[Xe.na],Xe.P=[Xe.P],Xe.Sa=[Xe.Sa];e:{Jt=I,He=V,$e=re;var tr=Xe.gb;Ot=Xe.na,Bt=Xe.P,sr=Xe.Sa,wr=22,t(Jt!=null),t($e!=null),kt=He[0];var Pn=$e[0];for(t(Ot!=null),t(sr!=null),Ot[0]=null,Bt[0]=null,sr[0]=0;;){if(He[0]=kt,$e[0]=Pn,8>Pn){He=7;break e}var $n=Be(Jt,kt+4);if(4294967286<$n){He=3;break e}var hn=8+$n+1&-2;if(wr+=hn,0<tr&&wr>tr){He=3;break e}if(!r(Jt,kt,"VP8 ")||!r(Jt,kt,"VP8L")){He=0;break e}if(Pn[0]<hn){He=7;break e}r(Jt,kt,"ALPH")||(Ot[0]=Jt,Bt[0]=kt+8,sr[0]=$n),kt+=hn,Pn-=hn}}if(re=re[0],Xe.na=Xe.na[0],Xe.P=Xe.P[0],Xe.Sa=Xe.Sa[0],He!=0)break}re=[re],Xe.Ja=[Xe.Ja],Xe.xa=[Xe.xa];e:if(tr=I,He=V,$e=re,Ot=Xe.gb[0],Bt=Xe.Ja,sr=Xe.xa,Jt=He[0],kt=!r(tr,Jt,"VP8 "),wr=!r(tr,Jt,"VP8L"),t(tr!=null),t($e!=null),t(Bt!=null),t(sr!=null),8>$e[0])He=7;else{if(kt||wr){if(tr=Be(tr,Jt+4),12<=Ot&&tr>Ot-12){He=3;break e}if(nt&&tr>$e[0]-8){He=7;break e}Bt[0]=tr,He[0]+=8,$e[0]-=8,sr[0]=wr}else sr[0]=5<=$e[0]&&tr[Jt+0]==47&&!(tr[Jt+4]>>5),Bt[0]=$e[0];He=0}if(re=re[0],Xe.Ja=Xe.Ja[0],Xe.xa=Xe.xa[0],V=V[0],He!=0)break;if(4294967286<Xe.Ja)return 3;if(ye==null||xt||(ye[0]=Xe.xa?2:1),xe=[xe],Ft=[Ft],Xe.xa){if(5>re){He=7;break}ye=xe,nt=Ft,xt=ge,I==null||5>re?I=0:5<=re&&I[V+0]==47&&!(I[V+4]>>5)?($e=[0],tr=[0],Ot=[0],z(Bt=new O,I,V,re),yt(Bt,$e,tr,Ot)?(ye!=null&&(ye[0]=$e[0]),nt!=null&&(nt[0]=tr[0]),xt!=null&&(xt[0]=Ot[0]),I=1):I=0):I=0}else{if(10>re){He=7;break}ye=Ft,I==null||10>re||!ai(I,V+3,re-3)?I=0:(nt=I[V+0]|I[V+1]<<8|I[V+2]<<16,xt=16383&(I[V+7]<<8|I[V+6]),I=16383&(I[V+9]<<8|I[V+8]),1&nt||3<(nt>>1&7)||!(nt>>4&1)||nt>>5>=Xe.Ja||!xt||!I?I=0:(xe&&(xe[0]=xt),ye&&(ye[0]=I),I=1))}if(!I||(xe=xe[0],Ft=Ft[0],ot&&(Ie[0]!=xe||Qe[0]!=Ft)))return 3;Ne!=null&&(Ne[0]=Xe,Ne.offset=V-Ne.w,t(4294967286>V-Ne.w),t(Ne.offset==Ne.ha-re));break}return He==0||He==7&&ot&&Ne==null?(ge!=null&&(ge[0]|=Xe.na!=null&&0<Xe.na.length),le!=null&&(le[0]=xe),he!=null&&(he[0]=Ft),0):He}function df(I,V,re){var le=V.width,he=V.height,ge=0,xe=0,ye=le,Ne=he;if(V.Da=I!=null&&0<I.Da,V.Da&&(ye=I.cd,Ne=I.bd,ge=I.v,xe=I.j,11>re||(ge&=-2,xe&=-2),0>ge||0>xe||0>=ye||0>=Ne||ge+ye>le||xe+Ne>he))return 0;if(V.v=ge,V.j=xe,V.va=ge+ye,V.o=xe+Ne,V.U=ye,V.T=Ne,V.da=I!=null&&0<I.da,V.da){if(!ve(ye,Ne,re=[I.ib],ge=[I.hb]))return 0;V.ib=re[0],V.hb=ge[0]}return V.ob=I!=null&&I.ob,V.Kb=I==null||!I.Sd,V.da&&(V.ob=V.ib<3*le/4&&V.hb<3*he/4,V.Kb=0),1}function n0(I){if(I==null)return 2;if(11>I.S){var V=I.f.RGBA;V.fb+=(I.height-1)*V.A,V.A=-V.A}else V=I.f.kb,I=I.height,V.O+=(I-1)*V.fa,V.fa=-V.fa,V.N+=(I-1>>1)*V.Ab,V.Ab=-V.Ab,V.W+=(I-1>>1)*V.Db,V.Db=-V.Db,V.F!=null&&(V.J+=(I-1)*V.lb,V.lb=-V.lb);return 0}function CA(I,V,re,le){if(le==null||0>=I||0>=V)return 2;if(re!=null){if(re.Da){var he=re.cd,ge=re.bd,xe=-2&re.v,ye=-2&re.j;if(0>xe||0>ye||0>=he||0>=ge||xe+he>I||ye+ge>V)return 2;I=he,V=ge}if(re.da){if(!ve(I,V,he=[re.ib],ge=[re.hb]))return 2;I=he[0],V=ge[0]}}le.width=I,le.height=V;e:{var Ne=le.width,Ie=le.height;if(I=le.S,0>=Ne||0>=Ie||!(I>=Hi&&13>I))I=2;else{if(0>=le.Rd&&le.sd==null){xe=ge=he=V=0;var Qe=(ye=Ne*GE[I])*Ie;if(11>I||(ge=(Ie+1)/2*(V=(Ne+1)/2),I==12&&(xe=(he=Ne)*Ie)),(Ie=s(Qe+2*ge+xe))==null){I=1;break e}le.sd=Ie,11>I?((Ne=le.f.RGBA).eb=Ie,Ne.fb=0,Ne.A=ye,Ne.size=Qe):((Ne=le.f.kb).y=Ie,Ne.O=0,Ne.fa=ye,Ne.Fd=Qe,Ne.f=Ie,Ne.N=0+Qe,Ne.Ab=V,Ne.Cd=ge,Ne.ea=Ie,Ne.W=0+Qe+ge,Ne.Db=V,Ne.Ed=ge,I==12&&(Ne.F=Ie,Ne.J=0+Qe+2*ge),Ne.Tc=xe,Ne.lb=he)}if(V=1,he=le.S,ge=le.width,xe=le.height,he>=Hi&&13>he)if(11>he)I=le.f.RGBA,V&=(ye=Math.abs(I.A))*(xe-1)+ge<=I.size,V&=ye>=ge*GE[he],V&=I.eb!=null;else{I=le.f.kb,ye=(ge+1)/2,Qe=(xe+1)/2,Ne=Math.abs(I.fa),Ie=Math.abs(I.Ab);var ot=Math.abs(I.Db),nt=Math.abs(I.lb),Xe=nt*(xe-1)+ge;V&=Ne*(xe-1)+ge<=I.Fd,V&=Ie*(Qe-1)+ye<=I.Cd,V=(V&=ot*(Qe-1)+ye<=I.Ed)&Ne>=ge&Ie>=ye&ot>=ye,V&=I.y!=null,V&=I.f!=null,V&=I.ea!=null,he==12&&(V&=nt>=ge,V&=Xe<=I.Tc,V&=I.F!=null)}else V=0;I=V?0:2}}return I!=0||re!=null&&re.fd&&(I=n0(le)),I}var Ms=64,ff=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_A=24,SA=32,a0=8,Fo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];de("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(I){return I},S.Predictor2=function(I,V,re){return V[re+0]},S.Predictor3=function(I,V,re){return V[re+1]},S.Predictor4=function(I,V,re){return V[re-1]},S.Predictor5=function(I,V,re){return De(De(I,V[re+1]),V[re+0])},S.Predictor6=function(I,V,re){return De(I,V[re-1])},S.Predictor7=function(I,V,re){return De(I,V[re+0])},S.Predictor8=function(I,V,re){return De(V[re-1],V[re+0])},S.Predictor9=function(I,V,re){return De(V[re+0],V[re+1])},S.Predictor10=function(I,V,re){return De(De(I,V[re-1]),De(V[re+0],V[re+1]))},S.Predictor11=function(I,V,re){var le=V[re+0];return 0>=Je(le>>24&255,I>>24&255,(V=V[re-1])>>24&255)+Je(le>>16&255,I>>16&255,V>>16&255)+Je(le>>8&255,I>>8&255,V>>8&255)+Je(255&le,255&I,255&V)?le:I},S.Predictor12=function(I,V,re){var le=V[re+0];return(Ve((I>>24&255)+(le>>24&255)-((V=V[re-1])>>24&255))<<24|Ve((I>>16&255)+(le>>16&255)-(V>>16&255))<<16|Ve((I>>8&255)+(le>>8&255)-(V>>8&255))<<8|Ve((255&I)+(255&le)-(255&V)))>>>0},S.Predictor13=function(I,V,re){var le=V[re-1];return(We((I=De(I,V[re+0]))>>24&255,le>>24&255)<<24|We(I>>16&255,le>>16&255)<<16|We(I>>8&255,le>>8&255)<<8|We(I>>0&255,le>>0&255))>>>0};var C1=S.PredictorAdd0;S.PredictorAdd1=At,de("Predictor2","PredictorAdd2"),de("Predictor3","PredictorAdd3"),de("Predictor4","PredictorAdd4"),de("Predictor5","PredictorAdd5"),de("Predictor6","PredictorAdd6"),de("Predictor7","PredictorAdd7"),de("Predictor8","PredictorAdd8"),de("Predictor9","PredictorAdd9"),de("Predictor10","PredictorAdd10"),de("Predictor11","PredictorAdd11"),de("Predictor12","PredictorAdd12"),de("Predictor13","PredictorAdd13");var ip=S.PredictorAdd2;Lt("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),Lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var sx,Ql=S.ColorIndexInverseTransform,si=S.MapARGB,Af=S.VP8LColorIndexInverseTransformAlpha,op=S.MapAlpha,dd=S.VP8LPredictorsAdd=[];dd.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var hf,lo,_i,mf,Oo,yc,gu,wc,Ka,Ec,ys,Do,kA,xu,s0,pf,gf,xf,jA,i0,vf,fd,BA,Wa,hl,gn,xn,va,as=s(511),Hl=s(2041),bf=s(225),yf=s(767),Ad=0,ix=Hl,TA=bf,ii=yf,Vl=as,Hi=0,o0=1,vu=2,lp=3,IA=4,hd=5,ox=6,cp=7,wf=8,md=9,l0=10,lx=[2,3,7],zl=[3,3,11],ml=[280,256,256,256,40],FA=[0,1,1,1,0],pd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],gd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],OA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],QE=8,up=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],dp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Us=null,Xa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Un=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ef=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],DA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],HE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xd=[],co=[],pl=[],VE=1,c0=2,yu=[],oi=[];Ct("UpsampleRgbLinePair",we,3),Ct("UpsampleBgrLinePair",Ge,3),Ct("UpsampleRgbaLinePair",Jr,4),Ct("UpsampleBgraLinePair",wn,4),Ct("UpsampleArgbLinePair",Pr,4),Ct("UpsampleRgba4444LinePair",Vt,2),Ct("UpsampleRgb565LinePair",ct,2);var vd=S.UpsampleRgbLinePair,Nf=S.UpsampleBgrLinePair,wu=S.UpsampleRgbaLinePair,cx=S.UpsampleBgraLinePair,ux=S.UpsampleArgbLinePair,u0=S.UpsampleRgba4444LinePair,dx=S.UpsampleRgb565LinePair,Eu=16,Qs=1<<Eu-1,Cf=-227,fx=482,Fj=6,zE=0,Oj=s(256),Hs=s(256),S1=s(256),fp=s(256),Ap=s(fx-Cf),k1=s(fx-Cf);ta("YuvToRgbRow",we,3),ta("YuvToBgrRow",Ge,3),ta("YuvToRgbaRow",Jr,4),ta("YuvToBgraRow",wn,4),ta("YuvToArgbRow",Pr,4),ta("YuvToRgba4444Row",Vt,2),ta("YuvToRgb565Row",ct,2);var PA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bd=[0,2,8],Dj=[8,7,6,4,4,2,2,2,1,1,1,1],$E=1;this.WebPDecodeRGBA=function(I,V,re,le,he){var ge=o0,xe=new ld,ye=new la;xe.ba=ye,ye.S=ge,ye.width=[ye.width],ye.height=[ye.height];var Ne=ye.width,Ie=ye.height,Qe=new Ta;if(Qe==null||I==null)var ot=2;else t(Qe!=null),ot=pu(I,V,re,Qe.width,Qe.height,Qe.Pd,Qe.Qd,Qe.format,null);if(ot!=0?Ne=0:(Ne!=null&&(Ne[0]=Qe.width[0]),Ie!=null&&(Ie[0]=Qe.height[0]),Ne=1),Ne){ye.width=ye.width[0],ye.height=ye.height[0],le!=null&&(le[0]=ye.width),he!=null&&(he[0]=ye.height);e:{if(le=new Ls,(he=new cf).data=I,he.w=V,he.ha=re,he.kd=1,V=[0],t(he!=null),((I=pu(he.data,he.w,he.ha,null,null,null,V,null,he))==0||I==7)&&V[0]&&(I=4),(V=I)==0){if(t(xe!=null),le.data=he.data,le.w=he.w+he.offset,le.ha=he.ha-he.offset,le.put=bt,le.ac=Ze,le.bc=Nt,le.ma=xe,he.xa){if((I=ft())==null){xe=1;break e}if(function(nt,Xe){var Ft=[0],xt=[0],He=[0];t:for(;;){if(nt==null)return 0;if(Xe==null)return nt.a=2,0;if(nt.l=Xe,nt.a=0,z(nt.m,Xe.data,Xe.w,Xe.ha),!yt(nt.m,Ft,xt,He)){nt.a=3;break t}if(nt.xb=c0,Xe.width=Ft[0],Xe.height=xt[0],!qe(Ft[0],xt[0],1,nt,null))break t;return 1}return t(nt.a!=0),0}(I,le)){if(le=(V=CA(le.width,le.height,xe.Oa,xe.ba))==0){t:{le=I;r:for(;;){if(le==null){le=0;break t}if(t(le.s.yc!=null),t(le.s.Ya!=null),t(0<le.s.Wb),t((re=le.l)!=null),t((he=re.ma)!=null),le.xb!=0){if(le.ca=he.ba,le.tb=he.tb,t(le.ca!=null),!df(he.Oa,re,lp)){le.a=2;break r}if(!at(le,re.width)||re.da)break r;if((re.da||Lr(le.ca.S))&&Ke(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&Ke()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!je(le.s.vb,le.s.Wa.Xa)){le.a=1;break r}le.xb=0}if(!Oe(le,le.V,le.Ba,le.c,le.i,re.o,Fe))break r;he.Dc=le.Ma,le=1;break t}t(le.a!=0),le=0}le=!le}le&&(V=I.a)}else V=I.a}else{if((I=new wi)==null){xe=1;break e}if(I.Fa=he.na,I.P=he.P,I.qc=he.Sa,nf(I,le)){if((V=CA(le.width,le.height,xe.Oa,xe.ba))==0){if(I.Aa=0,re=xe.Oa,t((he=I)!=null),re!=null){if(0<(Ne=0>(Ne=re.Md)?0:100<Ne?255:255*Ne/100)){for(Ie=Qe=0;4>Ie;++Ie)12>(ot=he.pb[Ie]).lc&&(ot.ia=Ne*Dj[0>ot.lc?0:ot.lc]>>3),Qe|=ot.ia;Qe&&(alert("todo:VP8InitRandom"),he.ia=1)}he.Ga=re.Id,100<he.Ga?he.Ga=100:0>he.Ga&&(he.Ga=0)}vA(I,le)||(V=I.a)}}else V=I.a}V==0&&xe.Oa!=null&&xe.Oa.fd&&(V=n0(xe.ba))}xe=V}ge=xe!=0?null:11>ge?ye.f.RGBA.eb:ye.f.kb.y}else ge=null;return ge};var GE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,j){for(var L="",P=0;P<4;P++)L+=String.fromCharCode(S[j++]);return L}function d(S,j){return(S[j+0]<<0|S[j+1]<<8|S[j+2]<<16)>>>0}function f(S,j){return(S[j+0]<<0|S[j+1]<<8|S[j+2]<<16|S[j+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],x=new c,v=e,y=function(S,j){var L={},P=0,k=!1,U=0,Q=0;if(L.frames=[],!function(R,G,Y,te){for(var ae=0;ae<te;ae++)if(R[G+ae]!=Y.charCodeAt(ae))return!0;return!1}(S,j,"RIFF",4)){var K,H;for(f(S,j+=4),j+=8;j<S.length;){var q=u(S,j),z=f(S,j+=4);j+=4;var W=z+(1&z);switch(q){case"VP8 ":case"VP8L":L.frames[P]===void 0&&(L.frames[P]={}),(O=L.frames[P]).src_off=k?Q:j-8,O.src_size=U+z+8,P++,k&&(k=!1,U=0,Q=0);break;case"VP8X":(O=L.header={}).feature_flags=S[j];var ee=j+4;O.canvas_width=1+d(S,ee),ee+=3,O.canvas_height=1+d(S,ee),ee+=3;break;case"ALPH":k=!0,U=W+8,Q=j-8;break;case"ANIM":(O=L.header).bgcolor=f(S,j),ee=j+4,O.loop_count=(K=S)[(H=ee)+0]<<0|K[H+1]<<8,ee+=2;break;case"ANMF":var X,O;(O=L.frames[P]={}).offset_x=2*d(S,j),j+=3,O.offset_y=2*d(S,j),j+=3,O.width=1+d(S,j),j+=3,O.height=1+d(S,j),j+=3,O.duration=d(S,j),j+=3,X=S[j++],O.dispose=1&X,O.blend=X>>1&1}q!="ANMF"&&(j+=W)}return L}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,_=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],m=[w.canvas_width];for(var F=0;F<_.length&&_[F].blend!=0;F++);}var B=_[0],T=x.WebPDecodeRGBA(v,B.src_off,B.src_size,m,h);B.rgba=T,B.imgwidth=m[0],B.imgheight=h[0];for(var C=0;C<m[0]*h[0]*4;C++)g[C]=T[C];return this.width=m,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof DO=="function"},r=function(h,m,g,x){var v=4,y=o;switch(x){case e.image_compression.FAST:v=1,y=s;break;case e.image_compression.MEDIUM:v=6,y=l;break;case e.image_compression.SLOW:v=9,y=c}h=n(h,m,g,y);var w=DO(h,{level:v});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(h,m,g,x){for(var v,y,w,_=h.length/m,F=new Uint8Array(h.length+_),B=d(),T=0;T<_;T+=1){if(w=T*m,v=h.subarray(w,w+m),x)F.set(x(v,g,y),w+T);else{for(var C,S=B.length,j=[];C<S;C+=1)j[C]=B[C](v,g,y);var L=f(j.concat());F.set(j[L],w+T)}y=v}return F},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},s=function(h,m){var g,x=[],v=h.length;x[0]=1;for(var y=0;y<v;y+=1)g=h[y-m]||0,x[y+1]=h[y]-g+256&255;return x},o=function(h,m,g){var x,v=[],y=h.length;v[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,v[w+1]=h[w]-x+256&255;return v},l=function(h,m,g){var x,v,y=[],w=h.length;y[0]=3;for(var _=0;_<w;_+=1)x=h[_-m]||0,v=g&&g[_]||0,y[_+1]=h[_]+256-(x+v>>>1)&255;return y},c=function(h,m,g){var x,v,y,w,_=[],F=h.length;_[0]=4;for(var B=0;B<F;B+=1)x=h[B-m]||0,v=g&&g[B]||0,y=g&&g[B-m]||0,w=u(x,v,y),_[B+1]=h[B]-w+256&255;return _},u=function(h,m,g){if(h===m&&m===g)return h;var x=Math.abs(m-g),v=Math.abs(h-g),y=Math.abs(h+m-g-g);return x<=v&&x<=y?h:v<=y?m:g},d=function(){return[a,s,o,l,c]},f=function(h){var m=h.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,g,x){var v,y,w,_,F,B,T,C,S,j,L,P,k,U,Q,K=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new JWe(h)).imgData,y=w.bits,v=w.colorSpace,F=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){S=(C=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,L=new Uint8Array(S*w.colors),j=new Uint8Array(S);var q,z=w.pixelBitlength-w.bits;for(U=0,Q=0;U<S;U++){for(k=C[U],q=0;q<z;)L[Q++]=k>>>q&255,q+=w.bits;j[U]=k>>>q&255}}if(w.bits===16){S=(C=new Uint32Array(w.decodePixels().buffer)).length,L=new Uint8Array(S*(32/w.pixelBitlength)*w.colors),j=new Uint8Array(S*(32/w.pixelBitlength)),P=w.colors>1,U=0,Q=0;for(var W=0;U<S;)k=C[U++],L[Q++]=k>>>0&255,P&&(L[Q++]=k>>>16&255,k=C[U++],L[Q++]=k>>>0&255),j[W++]=k>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(L,w.width*w.colors,w.colors,x),T=r(j,w.width,1,x)):(h=L,T=j,K=void 0)}if(w.colorType===3&&(v=this.color_spaces.INDEXED,B=w.palette,w.transparency.indexed)){var ee=w.transparency.indexed,X=0;for(U=0,S=ee.length;U<S;++U)X+=ee[U];if((X/=255)===S-1&&ee.indexOf(0)!==-1)_=[ee.indexOf(0)];else if(X!==S){for(C=w.decodePixels(),j=new Uint8Array(C.length),U=0,S=C.length;U<S;U++)j[U]=ee[C[U]];T=r(j,w.width,1)}}var O=function(R){var G;switch(R){case e.image_compression.FAST:G=11;break;case e.image_compression.MEDIUM:G=13;break;case e.image_compression.SLOW:G=14;break;default:G=12}return G}(x);return K===this.decode.FLATE_DECODE&&(H="/Predictor "+O+" "),H+="/Colors "+F+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(T&&this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),{alias:g,data:h,index:m,filter:K,decodeParameters:H,transparency:_,palette:B,sMask:T,predictor:O,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:v}}}})(yr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new ZWe(t),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new FI(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(yr.API),jd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},jd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Sa.log("bit decode error:"+r)}},jd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},jd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},jd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},jd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},jd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},jd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},jd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},jd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new jd(t,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new FI(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(yr.API),kK.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new kK(t),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new FI(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(yr.API),yr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],m=n[u+3];s[l++]=d,s[l++]=f,s[l++]=h,o[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},yr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Hx=yr.API,BC=Hx.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,g=0,x=l[0]||c,v=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(h=f&&ga(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,v.push((l[n]||x)/c+h)),g=n;return v},NK=Hx.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Hx.processArabic&&(e=Hx.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:BC.apply(this,arguments).reduce(function(s,o){return s+o},0)},CK=function(e,t,r,n){for(var a=[],s=0,o=e.length,l=0;s!==o&&l+t[s]<r;)l+=t[s],s++;a.push(e.slice(0,s));var c=s;for(l=0;s!==o;)l+t[s]>n&&(a.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},_K=function(e,t,r){r||(r={});var n,a,s,o,l,c,u,d=[],f=[d],h=r.textIndent||0,m=0,g=0,x=e.split(" "),v=BC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(F){(F=F.split(/\s*\n/)).length>1?w=w.concat(F.map(function(B,T){return(T&&B.length?`
`:"")+B})):w.push(F[0])}),x=w,c=NK.apply(this,[y,r])}for(s=0,o=x.length;s<o;s++){var _=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),_=1),h+m+(g=(a=BC.apply(this,[n,r])).reduce(function(F,B){return F+B},0))>t||_){if(g>t){for(l=CK.apply(this,[n,a,t-(h+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(F,B){return F+B},0)}else d=[n];f.push(d),h=g+c,m=v}else d.push(n),h+=m+g,m=v}return u=c?function(F,B){return(B?y:"")+F.join(" ")}:function(F){return F.join(" ")},f.map(u)},Hx.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(_K.apply(this,[n[l],o,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var h,m,g,x,v=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=s(y).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(ga(h)!=="object")throw new Error("Don't know what to do with value type "+ga(h)+".");g=o(h)}v.push(m+g)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,x,v={},y=1,w=v,_=[],F="",B="",T=f.length-1,C=1;C<T;C+=1)(x=f[C])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(_.push([w,g]),w={},g=void 0):x=="}"?((m=_.pop())[0][m[1]]=w,g=void 0,w=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(F+=r[x],g=parseInt(F,16)*y,y=1,F=""):F+=x:r.hasOwnProperty(x)?(B+=r[x],w[g]=parseInt(B,16)*y,y=1,g=void 0,B=""):B+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(yr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Iw(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(yr),function(e){function t(){return(Vr.canvg?Promise.resolve(Vr.canvg):Ti(()=>import("./index.es-CaSSC6_z.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}yr.API.addSvgAsImage=function(r,n,a,s,o,l,c,u){if(isNaN(n)||isNaN(a))throw Sa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Sa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,a,s,o,c,u)})}}(),yr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},yr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function h(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(ga(e)==="object"){for(a in e)if(s=e[a],h(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(yr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(s).sort(function(m,g){return m-g})).length;f<h;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var v=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+hv(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+hv(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+hv(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+hv(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+hv(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,m=f.activeFontKey,g=f.fonts,x=m,v="",y=0,w="",_=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(w=l,x=m,Array.isArray(l)&&(w=l[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(o=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),o||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=w[y]:v+="";var F="";return parseInt(x.slice(1))<14||_==="WinAnsiEncoding"?F=h(v,x).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(F=r(v,g[x])),f.isHex=!0,{text:F,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(yr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(yr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,_=0;this.__bidiEngine__={};var F=function(P){var k=P.charCodeAt(),U=k>>8,Q=x[U];return Q!==void 0?f[256*Q+(255&k)]:U===252||U===253?"AL":y.test(U)?"L":U===8?"R":"N"},B=function(P){for(var k,U=0;U<P.length;U++){if((k=F(P.charAt(U)))==="L")return!1;if(k==="R")return!0}return!1},T=function(P,k,U,Q){var K,H,q,z,W=k[Q];switch(W){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(W="AN");break;case"AL":w=!0,W="R";break;case"WS":W="N";break;case"CS":Q<1||Q+1>=k.length||(K=U[Q-1])!=="EN"&&K!=="AN"||(H=k[Q+1])!=="EN"&&H!=="AN"?W="N":w&&(H="AN"),W=H===K?H:"N";break;case"ES":W=(K=Q>0?U[Q-1]:"B")==="EN"&&Q+1<k.length&&k[Q+1]==="EN"?"EN":"N";break;case"ET":if(Q>0&&U[Q-1]==="EN"){W="EN";break}if(w){W="N";break}for(q=Q+1,z=k.length;q<z&&k[q]==="ET";)q++;W=q<z&&k[q]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(z=k.length,q=Q+1;q<z&&k[q]==="NSM";)q++;if(q<z){var ee=P[Q],X=ee>=1425&&ee<=2303||ee===64286;if(K=k[q],X&&(K==="R"||K==="AL")){W="R";break}}}W=Q<1||(K=k[Q-1])==="B"?"N":U[Q-1];break;case"B":w=!1,a=!0,W=_;break;case"S":s=!0,W="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":W="N"}return W},C=function(P,k,U){var Q=P.split("");return U&&S(Q,U,{hiLevel:_}),Q.reverse(),k&&k.reverse(),Q.join("")},S=function(P,k,U){var Q,K,H,q,z,W=-1,ee=P.length,X=0,O=[],R=_?m:h,G=[];for(w=!1,a=!1,s=!1,K=0;K<ee;K++)G[K]=F(P[K]);for(H=0;H<ee;H++){if(z=X,O[H]=T(P,G,O,H),Q=240&(X=R[z][g[O[H]]]),X&=15,k[H]=q=R[X][5],Q>0)if(Q===16){for(K=W;K<H;K++)k[K]=1;W=-1}else W=-1;if(R[X][6])W===-1&&(W=H);else if(W>-1){for(K=W;K<H;K++)k[K]=q;W=-1}G[H]==="B"&&(k[H]=0),U.hiLevel|=q}s&&function(Y,te,ae){for(var oe=0;oe<ae;oe++)if(Y[oe]==="S"){te[oe]=_;for(var ie=oe-1;ie>=0&&Y[ie]==="WS";ie--)te[ie]=_}}(G,k,ee)},j=function(P,k,U,Q,K){if(!(K.hiLevel<P)){if(P===1&&_===1&&!a)return k.reverse(),void(U&&U.reverse());for(var H,q,z,W,ee=k.length,X=0;X<ee;){if(Q[X]>=P){for(z=X+1;z<ee&&Q[z]>=P;)z++;for(W=X,q=z-1;W<q;W++,q--)H=k[W],k[W]=k[q],k[q]=H,U&&(H=U[W],U[W]=U[q],U[q]=H);X=z}X++}}},L=function(P,k,U){var Q=P.split(""),K={hiLevel:_};return U||(U=[]),S(Q,U,K),function(H,q,z){if(z.hiLevel!==0&&d)for(var W,ee=0;ee<H.length;ee++)q[ee]===1&&(W=v.indexOf(H[ee]))>=0&&(H[ee]=v[W+1])}(Q,U,K),j(2,Q,k,U,K),j(1,Q,k,U,K),Q.join("")};return this.__bidiEngine__.doBidiReorder=function(P,k,U){if(function(K,H){if(H)for(var q=0;q<K.length;q++)H[q]=q;l===void 0&&(l=B(K)),u===void 0&&(u=B(K))}(P,k),o||!c||u)if(o&&c&&l^u)_=l?1:0,P=C(P,k,U);else if(!o&&c&&u)_=l?1:0,P=L(P,k,U),P=C(P,k);else if(!o||l||c||u){if(o&&!c&&l^u)P=C(P,k),l?(_=0,P=L(P,k,U)):(_=1,P=L(P,k,U),P=C(P,k));else if(o&&l&&!c&&u)_=1,P=L(P,k,U),P=C(P,k);else if(!o&&!c&&l^u){var Q=d;l?(_=1,P=L(P,k,U),_=0,d=!1,P=L(P,k,U),d=Q):(_=0,P=L(P,k,U),P=C(P,k),_=1,d=!1,P=L(P,k,U),d=Q,P=C(P,k))}}else _=0,P=L(P,k,U);else _=l?1:0,P=L(P,k,U);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),o=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(yr),yr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Hm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new hXe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new eXe(this.contents),this.head=new rXe(this),this.name=new oXe(this),this.cmap=new Zle(this),this.toUnicode={},this.hhea=new nXe(this),this.maxp=new lXe(this),this.hmtx=new cXe(this),this.post=new sXe(this),this.os2=new aXe(this),this.loca=new AXe(this),this.glyf=new uXe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var ef,Hm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),eXe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,o,l,c,u,d,f,h,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),d=16*m-f,(a=new Hm).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(o),a.writeShort(d),s=16*m,u=a.pos+s,l=null,g=[],r)for(h=r[x],a.writeString(x),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),x==="head"&&(l=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,o;for(r=ece.call(r);r.length%4;)r.push(0);for(s=new Hm(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),tXe={}.hasOwnProperty,mA=function(e,t){for(var r in t)tXe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};ef=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var rXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,ef),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Hm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),jK=function(){function e(t,r){var n,a,s,o,l,c,u,d,f,h,m,g,x,v,y,w,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,s=function(){var F,B;for(B=[],c=F=0;0<=h?F<h:F>h;c=0<=h?++F:--F)B.push(t.readUInt16());return B}(),t.pos+=2,x=function(){var F,B;for(B=[],c=F=0;0<=h?F<h:F>h;c=0<=h?++F:--F)B.push(t.readUInt16());return B}(),u=function(){var F,B;for(B=[],c=F=0;0<=h?F<h:F>h;c=0<=h?++F:--F)B.push(t.readUInt16());return B}(),d=function(){var F,B;for(B=[],c=F=0;0<=h?F<h:F>h;c=0<=h?++F:--F)B.push(t.readUInt16());return B}(),a=(this.length-t.pos+this.offset)/2,l=function(){var F,B;for(B=[],c=F=0;0<=a?F<a:F>a;c=0<=a?++F:--F)B.push(t.readUInt16());return B}(),c=y=0,_=s.length;y<_;c=++y)for(v=s[c],n=w=g=x[c];g<=v?w<=v:w>=v;n=g<=v?++w:--w)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-g)-(h-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=f}return e.encode=function(t,r){var n,a,s,o,l,c,u,d,f,h,m,g,x,v,y,w,_,F,B,T,C,S,j,L,P,k,U,Q,K,H,q,z,W,ee,X,O,R,G,Y,te,ae,oe,ie,ue,Ce,ne;switch(Q=new Hm,o=Object.keys(t).sort(function(Be,je){return Be-je}),r){case"macroman":for(x=0,v=function(){var Be=[];for(g=0;g<256;++g)Be.push(0);return Be}(),w={0:0},s={},K=0,W=o.length;K<W;K++)w[ie=t[a=o[K]]]==null&&(w[ie]=++x),s[a]={old:t[a],new:w[t[a]]},v[a]=w[t[a]];return Q.writeUInt16(1),Q.writeUInt16(0),Q.writeUInt32(12),Q.writeUInt16(0),Q.writeUInt16(262),Q.writeUInt16(0),Q.write(v),{charMap:s,subtable:Q.data,maxGlyphID:x+1};case"unicode":for(k=[],f=[],_=0,w={},n={},y=u=null,H=0,ee=o.length;H<ee;H++)w[B=t[a=o[H]]]==null&&(w[B]=++_),n[a]={old:B,new:w[B]},l=w[B]-a,y!=null&&l===u||(y&&f.push(y),k.push(a),u=l),y=a;for(y&&f.push(y),f.push(65535),k.push(65535),L=2*(j=k.length),S=2*Math.pow(Math.log(j)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,C=2*j-S,c=[],T=[],m=[],g=q=0,X=k.length;q<X;g=++q){if(P=k[g],d=f[g],P===65535){c.push(0),T.push(0);break}if(P-(U=n[P].new)>=32768)for(c.push(0),T.push(2*(m.length+j-g)),a=z=P;P<=d?z<=d:z>=d;a=P<=d?++z:--z)m.push(n[a].new);else c.push(U-P),T.push(0)}for(Q.writeUInt16(3),Q.writeUInt16(1),Q.writeUInt32(12),Q.writeUInt16(4),Q.writeUInt16(16+8*j+2*m.length),Q.writeUInt16(0),Q.writeUInt16(L),Q.writeUInt16(S),Q.writeUInt16(h),Q.writeUInt16(C),ae=0,O=f.length;ae<O;ae++)a=f[ae],Q.writeUInt16(a);for(Q.writeUInt16(0),oe=0,R=k.length;oe<R;oe++)a=k[oe],Q.writeUInt16(a);for(ue=0,G=c.length;ue<G;ue++)l=c[ue],Q.writeUInt16(l);for(Ce=0,Y=T.length;Ce<Y;Ce++)F=T[Ce],Q.writeUInt16(F);for(ne=0,te=m.length;ne<te;ne++)x=m[ne],Q.writeUInt16(x);return{charMap:n,subtable:Q.data,maxGlyphID:_+1}}},e}(),Zle=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,ef),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new jK(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=jK.encode(r,n),(s=new Hm).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),nXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,ef),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),aXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,ef),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),sXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,ef),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),iXe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},oXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,ef),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,o,l,c,u,d,f,h,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=f=0,h=a.length;f<h;o=++f)s=a[o],r.pos=s.offset,d=r.readString(s.length),l=new iXe(d,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),lXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,ef),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),cXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,ef),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,o,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,m;for(m=[],d=0,f=(h=this.metrics).length;d<f;d++)o=h[d],m.push(o.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),ece=[].slice,uXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,ef),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,o,l,c,u,d,f,h;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(s=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Hm(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new fXe(c,d,h,u,f):new dXe(c,l,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,o,l,c,u;for(l=[],o=[],c=0,u=n.length;c<u;c++)s=r[n[c]],o.push(l.length),s&&(l=l.concat(s.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),dXe=function(){function e(t,r,n,a,s,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),fXe=function(){function e(t,r,n,a,s){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Hm(ece.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),AXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,ef),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,o=0,l=0;l<a.length;++l)if(a[l]=s,o<n.length&&n[o]==l){++o,a[l]=s;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),hXe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[s=t[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,o,l,c,u,d,f,h,m,g,x,v,y;for(a in n=Zle.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},y=n.charMap)m[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,o)g in m||(m[g]=h++);return d=function(w){var _,F;for(_ in F={},w)F[w[_]]=_;return F}(m),f=Object.keys(d).sort(function(w,_){return w-_}),x=function(){var w,_,F;for(F=[],w=0,_=f.length;w<_;w++)l=f[w],F.push(d[l]);return F}(),s=this.font.glyf.encode(o,x,m),u=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();yr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+r},t}();function tce(e,t,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var BK={},Kv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:BK=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return BK||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),HO=function(e,t){return HO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},HO(e,t)};function rce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");HO(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var nce=function(e){rce(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function mXe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function pXe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function FS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function ace(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var o=sce(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function sce(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function J4(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function ice(e,t){var r=J4(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function gXe(e,t,r,n,a){var s={},o=1.3333333333333333,l=OI(t,function(_){return a.getComputedStyle(_).backgroundColor});l!=null&&(s.fillColor=l);var c=OI(t,function(_){return a.getComputedStyle(_).color});c!=null&&(s.textColor=c);var u=vXe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=OI(t,function(_){return a.getComputedStyle(_)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var v=parseInt(n.fontSize||"");isNaN(v)||(s.fontSize=v/o);var y=xXe(n);y&&(s.fontStyle=y);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function xXe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function OI(e,t){var r=oce(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function oce(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:oce(e.parentElement,t):r}function vXe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=J4(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function lce(e,t,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],x=(o=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),v=bXe(c,u,r,g,n,a);v&&(x==="thead"?d.push(v):x==="tfoot"?h.push(v):f.push(v))}return{head:d,body:f,foot:h}}function bXe(e,t,r,n,a,s){for(var o=new nce(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=gXe(e,c,t,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:yXe(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function yXe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function wXe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function fh(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function cce(e,t){var r=new Kv(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();wXe(a,n,t);var s=fh({},a,n,t),o;typeof window<"u"&&(o=window);var l=EXe(a,n,t),c=NXe(a,n,t),u=CXe(r,s),d=SXe(r,s,o);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function EXe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=fh({},u,d,f)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});n[c]=fh({},m[0],m[1],m[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function NXe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function CXe(e,t){var r,n,a,s,o,l,c,u,d,f,h,m,g=J4(t.margin,40/e.scaleFactor()),x=(r=_Xe(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,_=t.theme||(w?"plain":"striped"),F=!!t.horizontalPageBreak,B=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:w,theme:_,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:F,horizontalPageBreakRepeat:B,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function _Xe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function SXe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=lce(e,t.html,r,o,t.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||kXe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function kXe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var VO=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),jXe=function(e){rce(t,e);function t(r,n,a,s,o,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return t}(VO),BXe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new jXe(t,this,n,a,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new VO(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new VO(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),uce=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof nce&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),dce=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=J4(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),TXe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function IXe(e,t){FXe(e,t);var r=[],n=0;t.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(t);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=zO(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=zO(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),DXe(t),PXe(t,e),OXe(t)}function FXe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=ice(e,t);t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=FS(u.text,u.styles,e)+f;var h=FS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function zO(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),s=0;s<e.length;s++){var o=e[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=zO(h,t,r))}return t}function OXe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function DXe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function PXe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=TK(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=TK(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function TK(e,t,r,n,a){return e.map(function(s){return RXe(s,t,r,n,a)})}function RXe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=FS(e,r,n))return e;for(;t<FS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function fce(e,t){var r=new Kv(e),n=LXe(t,r.scaleFactor()),a=new BXe(t,n);return IXe(r,a),r.applyStyles(r.userStyles),a}function LXe(e,t){var r=e.content,n=UXe(r.columns);if(r.head.length===0){var a=IK(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=IK(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,o=e.styles;return{columns:n,head:DI("head",r.head,n,o,s,t),body:DI("body",r.body,n,o,s,t),foot:DI("foot",r.foot,n,o,s,t)}}function DI(e,t,r,n,a,s){var o={},l=t.map(function(c,u){for(var d=0,f={},h=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(o[v.index]==null||o[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-h-d]:y=c[v.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var _=QXe(e,v,u,a,n,s,w),F=new dce(y,_,e);f[v.dataKey]=F,f[v.index]=F,m=F.colSpan-1,o[v.index]={left:F.rowSpan-1,times:m}}else m--,h++;else o[v.index].left--,m=o[v.index].times,d++}return new uce(c,u,e,f)});return l}function IK(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=MXe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function MXe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function UXe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new TXe(a,t,r)})}function QXe(e,t,r,n,a,s,o){var l=pXe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=fh({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?fh({},l.alternateRow,a.alternateRowStyles):{},m=mXe(s),g=fh({},m,u,h,f);return fh(g,o)}function HXe(e,t,r){var n;r===void 0&&(r={});var a=ice(e,t),s=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!s.has(m.index)&&(s.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function VXe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=HXe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Ace(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);l+=u}var d=new Kv(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(mce(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=fh({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?zXe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Lh(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;OS(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Lh(d,t,h,s,t.columns)})),ace(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function zXe(e,t,r,n){var a=VXe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?Fw(e,t,r,n,u.columns,!0):FK(e,t,n,u.columns),$Xe(e,t,r,n,u.columns),PI(e,t,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){e.applyStyles(e.userStyles);var d=l.columns;o>=0?Fw(e,t,r,n,d,!0):FK(e,t,n,d),u=OK(e,t,o+1,n,d),PI(e,t,n,d)}var f=u-o;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),Fw(e,t,r,n,h.columns,!0),OK(e,t,o+1,n,h.columns,f),PI(e,t,n,h.columns)}),o=u};o<t.body.length-1;)c()}function FK(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Lh(e,t,s,r,n)})}function $Xe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,o){var l=o===t.body.length-1;OS(e,t,s,l,r,n,a)})}function OK(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var o=Math.min(r+s,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,u){var d=r+u===t.body.length-1,f=hce(e,t,d,n);c.canEntireRowFit(f,a)&&(Lh(e,t,c,n,a),l=r+u)}),l}function PI(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Lh(e,t,s,r,n)})}function GXe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function qXe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new dce(u.raw,u.styles,u.section);d=fh(d,u),d.text=[];var f=GXe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new uce(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function KXe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function OS(e,t,r,n,a,s,o){var l=hce(e,t,n,s);if(r.canEntireRowFit(l,o))Lh(e,t,r,s,o);else if(KXe(e,r,l,t)){var c=qXe(r,l,t,e);Lh(e,t,r,s,o),Fw(e,t,a,s,o),OS(e,t,c,n,a,s,o)}else Fw(e,t,a,s,o),OS(e,t,r,n,a,s,o)}function Lh(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}WXe(e,c,n);var d=c.getTextPos();tce(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function WXe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=sce(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),XXe(e,t,r,n.lineWidth))}function XXe(e,t,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+t.width,s=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function hce(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Fw(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(l){return Lh(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;ace(e,t,r,n),mce(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Lh(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function mce(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function YXe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=cce(this,n),s=fce(this,a);return Ace(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){tce(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Kv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Kv.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Kv(this),s=lce(a,t,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var RI;function gi(e,t){var r=cce(e,t),n=fce(e,r);Ace(e,n)}try{if(typeof window<"u"&&window){var DK=window,PK=DK.jsPDF||((RI=DK.jspdf)===null||RI===void 0?void 0:RI.jsPDF);PK&&YXe(PK)}}catch(e){console.error("Could not apply autoTable plugin",e)}const JXe=["Localizar información explícita","Realizar inferencias a partir del texto","Interpretar y relacionar información del texto","Reflexionar sobre el texto y evaluarlo","Analizar aspectos formales del texto","Reconocer tipos de texto según su propósito comunicativo","Comprender vocabulario en contexto"],ZXe=["Números y operaciones","Álgebra y funciones","Geometría","Probabilidad y estadística","Resolución de problemas","Modelamiento matemático","Argumentación y comunicación matemática"],RK=mt(tt,"usuarios");async function Z4(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",RK);const e=await qr(RK);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(n=>{const a=n.data();return!a.curso||typeof a.curso!="string"||!a.curso.trim()?console.warn("⚠️ [ASIGNACION] Usuario sin curso asignado o curso inválido:",{id:n.id,...a}):console.log("✅ [ASIGNACION] Usuario con curso:",{id:n.id,curso:a.curso,nombre:a.nombreCompleto}),{id:n.id,...a}}),r=Array.from(new Set(t.map(n=>n.curso).filter(Boolean)));return console.log("📚 [ASIGNACION] Cursos únicos encontrados en usuarios:",r),console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const $c="simce_sets",TE="simce_resultados";async function eYe(e){try{return(await mn(mt(tt,$c),e)).id}catch(t){throw console.error("Error al crear set de preguntas:",t),new Error("No se pudo crear el set de preguntas")}}async function tYe(e,t){try{await Tl(nr(tt,$c,e),t)}catch(r){throw console.error("Error al actualizar set de preguntas:",r),new Error("No se pudo actualizar el set de preguntas")}}async function pce(e){var t;try{console.log(`[DEBUG] obtenerSetPreguntas - Buscando set con ID: ${e}`);let r=await kh(nr(tt,$c,e));if(r.exists()||(console.log(`[DEBUG] obtenerSetPreguntas - No encontrado en ${$c}, buscando en simce_evaluaciones`),r=await kh(nr(tt,"simce_evaluaciones",e))),r.exists()){const n=r.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Set encontrado: ${n.titulo||"Sin título"}`),console.log(`[DEBUG] obtenerSetPreguntas - Cantidad de preguntas: ${((t=n.preguntas)==null?void 0:t.length)||0}`),n.preguntas&&n.preguntas.length>0)for(let a=0;a<n.preguntas.length;a++){const s=n.preguntas[a];if(s.textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base encontrado en pregunta ${a+1}`),console.log(`[DEBUG] obtenerSetPreguntas - Extracto del texto base: ${s.textoBase.substring(0,50)}...`);break}}return{id:r.id,...n}}else throw console.log(`[DEBUG] obtenerSetPreguntas - No se encontró set con ID: ${e} en ninguna colección`),new Error("El set de preguntas no existe")}catch(r){throw console.error("Error al obtener set de preguntas:",r),new Error("No se pudo obtener el set de preguntas")}}async function vM(e){try{const t=Ht(mt(tt,$c),xr("creadorId","==",e),ar("fechaCreacion","desc")),n=(await qr(t)).docs.map(l=>({id:l.id,...l.data()})),a=Ht(mt(tt,"simce_evaluaciones"),xr("creadorId","==",e),ar("fechaCreacion","desc")),o=(await qr(a)).docs.map(l=>({id:l.id,...l.data(),preguntas:l.data().preguntas||[]}));return[...n,...o]}catch(t){throw console.error("Error al obtener sets de preguntas:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function gce(e){try{if(console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Buscando sets para curso ${e}`),!e)return console.error("[DEBUG] obtenerSetsPreguntasPorCurso - Error: cursoId es undefined o vacío"),[];const t=Ht(mt(tt,$c),xr("cursosAsignados","array-contains",e),ar("fechaCreacion","desc"));console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en ${$c}:`,t);const r=await qr(t);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en ${$c}: ${r.docs.length}`);const n=Ht(mt(tt,"simce_evaluaciones"),xr("cursosAsignados","array-contains",e),ar("fechaCreacion","desc"));console.log("[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en simce_evaluaciones:",n);const a=await qr(n);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en simce_evaluaciones: ${a.docs.length}`);let s=[...r.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en ${$c}: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l}}),...a.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en simce_evaluaciones: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l,preguntas:l.preguntas||[]}})];if(console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Total sets combinados: ${s.length}`),!s.length){console.warn("[DEBUG] obtenerSetsPreguntasPorCurso - Sin resultados por query; aplicando fallback (getDocs + filtro cliente)");const[o,l]=await Promise.all([qr(mt(tt,$c)),qr(mt(tt,"simce_evaluaciones"))]),c=e;s=[...o.docs.map(u=>({id:u.id,...u.data()})).filter(u=>Array.isArray(u.cursosAsignados)&&u.cursosAsignados.includes(c)),...l.docs.map(u=>({id:u.id,...u.data(),preguntas:u.data().preguntas||[]})).filter(u=>Array.isArray(u.cursosAsignados)&&u.cursosAsignados.includes(c))],console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Fallback aplicó ${s.length} sets`)}return s}catch(t){throw console.error("Error al obtener sets de preguntas por curso:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function xce(e){try{if(!e)return[];const t=Ht(mt(tt,$c),xr("estudiantesAsignados","array-contains",e),ar("fechaCreacion","desc")),r=await qr(t),n=Ht(mt(tt,"simce_evaluaciones"),xr("estudiantesAsignados","array-contains",e),ar("fechaCreacion","desc")),a=await qr(n);return[...r.docs.map(s=>({id:s.id,...s.data()})),...a.docs.map(s=>({id:s.id,...s.data(),preguntas:s.data().preguntas||[]}))]}catch(t){return console.error("Error al obtener sets por estudiante:",t),[]}}async function vce(e){try{await Ca(nr(tt,$c,e))}catch(t){throw console.error("Error al eliminar set de preguntas:",t),new Error("No se pudo eliminar el set de preguntas")}}async function bce(e){try{return(await mn(mt(tt,TE),e)).id}catch(t){throw console.error("Error al guardar resultado de intento:",t),new Error("No se pudo guardar el resultado")}}async function yce(e){try{const t=Ht(mt(tt,TE),xr("setId","==",e),ar("fechaEnvio","desc"));return(await qr(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener resultados por set:",t),new Error("No se pudieron obtener los resultados")}}async function wce(e,t){try{if(!t||t.length===0)return[];const r=10,n=[];for(let o=0;o<t.length;o+=r)n.push(t.slice(o,o+r));const a=[];for(const o of n){const l=Ht(mt(tt,TE),xr("setId","==",e),xr("estudianteId","in",o)),c=await qr(l);a.push(...c.docs.map(u=>({id:u.id,...u.data()})))}const s=new Map;for(const o of a)s.set(o.id,o);return Array.from(s.values())}catch(r){throw console.error("Error al obtener resultados por curso:",r),new Error("No se pudieron obtener los resultados del curso")}}async function Ece(e){try{const t=Ht(mt(tt,TE),xr("estudianteId","==",e),ar("fechaEnvio","desc"));return(await qr(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener resultados por estudiante:",t),new Error("No se pudieron obtener los resultados del estudiante")}}async function rYe(e){try{await Ca(nr(tt,TE,e))}catch(t){throw console.error("Error al eliminar resultado:",t),new Error("No se pudo eliminar el resultado")}}async function nYe(e,t){try{console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Buscando evaluaciones para estudiante ${e} en curso ${t}`);const n=(u=>{if(!u)return"";let d=u.trim().toLowerCase();return d=d.replace(/°/g,"º"),d=d.replace(/\s+(medio|básico|basico)/g,""),d=d.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),d=d.replace(/^(\d)(?![º])/,"$1º"),d=d.replace(/\s+/g,"").toUpperCase(),d})(t),[a,s]=await Promise.all([gce(n),xce(e)]),o=new Map;[...a,...s].forEach(u=>o.set(u.id,u));const l=Array.from(o.values());console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Encontradas ${l.length} evaluaciones asignadas al curso ${t}`);const c=l.map(u=>{const d={id:u.id,titulo:u.titulo,descripcion:u.descripcion||"",asignatura:u.asignatura,preguntas:[...u.preguntas],fechaAsignacion:u.fechaCreacion||new Date().toISOString(),textoBase:""},f=String(u.asignatura||"");if(f==="Competencia Lectora"||f==="Lectura"){let h="";for(const m of u.preguntas)if(m.textoBase&&m.textoBase.trim()){h=m.textoBase.trim(),console.log(`[DEBUG] Texto base encontrado en pregunta ${m.id}:`,h.substring(0,50)+"...");break}h&&d.preguntas.length>0&&(console.log(`[DEBUG] Asignando texto base a la evaluación y primera pregunta: ${u.id}`),d.textoBase=h,d.preguntas[0].textoBase=h)}return d});return console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Evaluaciones mapeadas: ${c.length}`),c}catch(r){return console.error("Error en obtenerEvaluacionesEstudiante:",r),[]}}async function Ow(e){var t,r;try{console.log(`[DEBUG] obtenerEvaluacionPorId - Buscando evaluación con ID: ${e}`);const n=await pce(e);if(n){console.log(`[DEBUG] obtenerEvaluacionPorId - Evaluación encontrada: ${n.titulo}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Asignatura: ${n.asignatura}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Cantidad de preguntas: ${((t=n.preguntas)==null?void 0:t.length)||0}`);const a=n.preguntas.some(s=>s.textoBase);if(console.log(`[DEBUG] obtenerEvaluacionPorId - ¿Tiene texto base?: ${a}`),a){const s=n.preguntas.find(o=>o.textoBase);console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base encontrado en pregunta: ${s==null?void 0:s.id}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base (primeros 50 caracteres): ${(r=s==null?void 0:s.textoBase)==null?void 0:r.substring(0,50)}...`)}}else console.log(`[DEBUG] obtenerEvaluacionPorId - No se encontró evaluación con ID: ${e}`);return n||null}catch(n){return console.error("Error en obtenerEvaluacionPorId:",n),null}}async function Nce(e){try{const t={...e,setId:e.evaluacionId||e.setId||null,respuestas:e.respuestas||[],porcentajeAciertos:e.porcentajeLogro||e.porcentajeAciertos||0,nivelLogro:e.nivelLogro||"Insuficiente",fechaEnvio:e.fechaRealizacion||new Date().toISOString()};return await bce(t)}catch(t){throw console.error("Error en guardarIntentoEvaluacion:",t),t}}async function Cce(e,t){try{return(await Ece(e)).filter(a=>a.setId===t)}catch(r){return console.error("Error en verificarIntentoExistente:",r),[]}}async function _ce(e){try{let t=[];try{t=await vM(e)}catch(r){console.warn("[DEBUG] obtenerEvaluacionesPorProfesor - Falla query directa, intento fallback:",r)}if(!t.length){console.warn("[DEBUG] obtenerEvaluacionesPorProfesor - Sin resultados, aplicando fallback (getDocs + filtro por creadorId)");const[r,n]=await Promise.all([qr(mt(tt,$c)),qr(mt(tt,"simce_evaluaciones"))]);t=[...r.docs.map(a=>({id:a.id,...a.data()})),...n.docs.map(a=>({id:a.id,...a.data(),preguntas:a.data().preguntas||[]}))].filter(a=>a.creadorId===e),console.log(`[DEBUG] obtenerEvaluacionesPorProfesor - Fallback encontró ${t.length} sets`)}return t.map(r=>({id:r.id,titulo:r.titulo,descripcion:r.descripcion||"",asignatura:r.asignatura,preguntas:r.preguntas,fechaCreacion:r.fechaCreacion||new Date().toISOString(),cursosAsignados:r.cursosAsignados||[]}))}catch(t){return console.error("Error en obtenerEvaluacionesPorProfesor:",t),[]}}async function Sce(e){try{return await yce(e)}catch(t){return console.error("Error en obtenerIntentosPorEvaluacion:",t),[]}}async function kce(e,t){try{const r=v=>{if(!v)return"";let y=v.trim().toLowerCase();return y=y.replace(/°/g,"º"),y=y.replace(/\s+(medio|básico|basico)/g,""),y=y.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),y=y.replace(/^(\d)(?![º])/,"$1º"),y=y.replace(/\s+/g,"").toUpperCase(),y},n=r(t),s=(await Z4()).filter(v=>v.profile==="ESTUDIANTE"&&r(v.curso||"")===n).map(v=>v.id);if(s.length===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const o=await wce(e,s),l=o.length;if(l===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const c=o.map(v=>v.porcentajeAciertos||v.porcentajeLogro||0),u=c.reduce((v,y)=>v+y,0)/l;let d=0,f=0,h=0;c.forEach(v=>{v>=80?d++:v>=50?f++:h++});const m=d/l*100,g=f/l*100,x=h/l*100;return{totalEstudiantes:l,promedioLogro:u,nivelPredominante:m>=Math.max(g,x)?"Adecuado":g>=x?"Elemental":"Insuficiente",porcentajeAdecuado:m,porcentajeElemental:g,porcentajeInsuficiente:x,porEjeTematico:[],porPregunta:[]}}catch(r){return console.error("Error en obtenerEstadisticasPorCurso:",r),null}}const LK=Object.freeze(Object.defineProperty({__proto__:null,actualizarSetPreguntas:tYe,crearSetPreguntas:eYe,eliminarResultado:rYe,eliminarSetPreguntas:vce,guardarIntentoEvaluacion:Nce,guardarResultadoIntento:bce,obtenerEstadisticasPorCurso:kce,obtenerEvaluacionPorId:Ow,obtenerEvaluacionesEstudiante:nYe,obtenerEvaluacionesPorProfesor:_ce,obtenerIntentosPorEvaluacion:Sce,obtenerResultadosPorCurso:wce,obtenerResultadosPorEstudiante:Ece,obtenerResultadosPorSet:yce,obtenerSetPreguntas:pce,obtenerSetsPreguntasPorCurso:gce,obtenerSetsPreguntasPorEstudiante:xce,obtenerSetsPreguntasPorProfesor:vM,verificarIntentoExistente:Cce},Symbol.toStringTag,{value:"Module"}));var MK;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(MK||(MK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UK;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(UK||(UK={}));var QK;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(QK||(QK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK=["user","model","function","system"];var VK;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(VK||(VK={}));var zK;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(zK||(zK={}));var $K;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})($K||($K={}));var GK;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(GK||(GK={}));var Dw;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Dw||(Dw={}));var qK;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(qK||(qK={}));var KK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(KK||(KK={}));var WK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(WK||(WK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Vx extends al{constructor(t,r){super(t),this.response=r}}class jce extends al{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class bm extends al{}class Bce extends al{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aYe="https://generativelanguage.googleapis.com",sYe="v1beta",iYe="0.24.1",oYe="genai-js";var Rg;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Rg||(Rg={}));class lYe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||sYe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||aYe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function cYe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${oYe}/${iYe}`),t.join(" ")}async function uYe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",cYe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new bm(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new bm(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new bm(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function dYe(e,t,r,n,a,s){const o=new lYe(e,t,r,n,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},mYe(s)),{method:"POST",headers:await uYe(o),body:a})}}async function IE(e,t,r,n,a,s={},o=fetch){const{url:l,fetchOptions:c}=await dYe(e,t,r,n,a,s);return fYe(l,c,o)}async function fYe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){AYe(a,e)}return n.ok||await hYe(n,e),n}function AYe(e,t){let r=e;throw r.name==="AbortError"?(r=new Bce(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof jce||e instanceof bm||(r=new al(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function hYe(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new jce(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function mYe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),I5(e.candidates[0]))throw new Vx(`${G0(e)}`,e);return pYe(e)}else if(e.promptFeedback)throw new Vx(`Text not available. ${G0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),I5(e.candidates[0]))throw new Vx(`${G0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),XK(e)[0]}else if(e.promptFeedback)throw new Vx(`Function call not available. ${G0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),I5(e.candidates[0]))throw new Vx(`${G0(e)}`,e);return XK(e)}else if(e.promptFeedback)throw new Vx(`Function call not available. ${G0(e)}`,e)},e}function pYe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function XK(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const gYe=[Dw.RECITATION,Dw.SAFETY,Dw.LANGUAGE];function I5(e){return!!e.finishReason&&gYe.includes(e.finishReason)}function G0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];I5(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function F2(e){return this instanceof F2?(this.v=e,this):new F2(e)}function xYe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(h){n[h]&&(a[h]=function(m){return new Promise(function(g,x){s.push([h,m,g,x])>1||l(h,m)})})}function l(h,m){try{c(n[h](m))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof F2?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,m){h(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function vYe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=wYe(t),[n,a]=r.tee();return{stream:yYe(n),response:bYe(a)}}async function bYe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return bM(EYe(t));t.push(a)}}function yYe(e){return xYe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield F2(r.read());if(a)break;yield yield F2(bM(n))}})}function wYe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:o,done:l})=>{if(l){if(a.trim()){n.error(new al("Failed to parse stream"));return}n.close();return}a+=o;let c=a.match(YK),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new al(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(YK)}return s()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new Bce("Request aborted when reading from the stream"):l=new al("Error reading from the stream"),l})}}})}function EYe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const o={};for(const l of s.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),r.candidates[a].content.parts.push(o)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tce(e,t,r,n){const a=await IE(t,Rg.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return vYe(a)}async function Ice(e,t,r,n){const s=await(await IE(t,Rg.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:bM(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fce(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function O2(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return NYe(t)}function NYe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new al("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new al("No content is provided for sending chat message.");return n?t:r}function CYe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new bm("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=O2(e);n.contents=[s]}return{generateContentRequest:n}}function JK(e){let t;return e.contents?t=e:t={contents:[O2(e)]},e.systemInstruction&&(t.systemInstruction=Fce(e.systemInstruction)),t}function _Ye(e){return typeof e=="string"||Array.isArray(e)?{content:O2(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],SYe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function kYe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new al(`First content should be with role 'user', got ${n}`);if(!HK.includes(n))throw new al(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(HK)}`);if(!Array.isArray(a))throw new al("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new al("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of a)for(const c of ZK)c in l&&(s[c]+=1);const o=SYe[n];for(const l of ZK)if(!o.includes(l)&&s[l]>0)throw new al(`Content with role '${n}' can't contain '${l}' part`);t=!0}}function eW(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW="SILENT_ERROR";class jYe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(kYe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,o,l,c;await this._sendPromise;const u=O2(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>Ice(this._apiKey,this.model,d,f)).then(m=>{var g;if(eW(m.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=G0(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,o,l,c;await this._sendPromise;const u=O2(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=Tce(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(m=>{throw new Error(tW)}).then(m=>m.response).then(m=>{if(eW(m)){this._history.push(u);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=G0(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==tW&&console.error(m)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BYe(e,t,r,n){return(await IE(t,Rg.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TYe(e,t,r,n){return(await IE(t,Rg.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function IYe(e,t,r,n){const a=r.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await IE(t,Rg.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Fce(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=JK(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Ice(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=JK(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Tce(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new jYe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=CYe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return BYe(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=_Ye(t),a=Object.assign(Object.assign({},this._requestOptions),r);return TYe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return IYe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new al("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new rW(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new bm("Cached content must contain a `name` field.");if(!t.model)throw new bm("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const o of a)if(r!=null&&r[o]&&t[o]&&(r==null?void 0:r[o])!==t[o]){if(o==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new bm(`Different value for "${o}" specified in modelParams (${r[o]}) and cachedContent (${t[o]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new rW(this.apiKey,s,n)}}const FYe=[{model:"gemini-1.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}},{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}}],Oce=()=>(console.warn("No se encontró la API key de Gemini"),null);async function OYe(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function D2(){const e=Oce();if(!e)return null;for(const t of FYe){const r=await OYe(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontró ningún modelo de Gemini disponible"),null}function Dce(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function DYe(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function PYe(e,t=3){var n;const r=await D2();if(!r)return LI(e,t);try{const a=`Genera ${t} preguntas de selección múltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "¿Pregunta 1?",
          "opciones": ["Opción 1", "Opción 2", "Opción 3", "Opción 4"]
        }
      ]
    }`,o=(await r.generateContent(a)).response.text(),l=Dce(o);return(n=l==null?void 0:l.preguntas)!=null&&n.length?l.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",o),LI(e,t))}catch(a){return console.error("Error al generar preguntas:",a),LI(e,t)}}async function RYe(e,t=30){var n;const r=await D2();if(!r)return MI(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos más relevantes.`,l=(await r.generateContent(s)).response.text(),c=Dce(l);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",l),MI(e))}catch(a){return console.error("Error al analizar respuestas:",a),MI(e)}}function LI(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:DYe(r).slice(0,4)}))}function MI(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}async function LYe(){const e=Oce();if(!e)return null;const t={model:"gemini-1.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}};try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),console.log(`Usando modelo optimizado: ${t.model}`),r}catch(r){return console.warn("Modelo Pro no disponible, usando fallback:",r),D2()}}async function MYe(e,t=2,r=!0){const n=e.substring(0,50).replace(/\n/g," ")+"...";console.log(`Iniciando generación con IA. Prompt: "${n}"`),console.log(`Configuración: maxRetries=${t}, useProModel=${r}`);let a;try{if(r?(console.log("Intentando usar modelo Pro prioritariamente..."),a=await LYe(),a||(console.warn("Modelo Pro no disponible, intentando fallback a modelos alternativos"),a=await D2())):a=await D2(),!a)throw console.error("No se pudo inicializar ningún modelo de Gemini"),new Error("No se encontró un modelo de Gemini disponible. Verifique su conexión a internet y la API key.")}catch(u){throw console.error("Error al inicializar modelo de Gemini:",u),new Error(`Error al inicializar el modelo de IA: ${u.message}`)}let s=0,o,l="",c=0;for(;s<=t;){try{console.log(`Intento ${s+1}/${t+1} de generación con IA`);const u=e+`

IMPORTANTE: Devuelve SOLO el JSON estructurado sin comentarios adicionales. El JSON debe ser válido y parseable.`,d=await a.generateContent(u);if(d!=null&&d.response&&typeof d.response.text=="function"){const f=d.response.text();if(f&&f.length>100){if(console.log(`Respuesta generada exitosamente (${f.length} caracteres)`),f.includes("{")&&f.includes("}")||f.includes("[")&&f.includes("]"))return console.log("La respuesta contiene estructuras JSON"),f;if(console.warn("La respuesta no parece contener JSON válido"),f.length>c&&(l=f,c=f.length),s===t)return console.log("Usando la mejor respuesta disponible en el último intento"),l}else console.warn("Respuesta de IA demasiado corta, reintentando...")}else if(d){const f=typeof d=="string"?d:JSON.stringify(d);return console.warn("Formato de respuesta inesperado, usando fallback a string"),f}else console.warn("No se recibió respuesta válida del modelo")}catch(u){console.error(`Error en intento ${s+1}:`,u),o=u,u.message&&(u.message.includes("token")||u.message.includes("length")||u.message.includes("limit"))&&(console.log("Error relacionado con límites de tokens, intentando simplificar el prompt"),e=e.substring(0,Math.floor(e.length*.75)))}if(s++,s<=t){const u=Math.min(1e3*Math.pow(2,s),8e3);console.log(`Esperando ${u}ms antes de reintentar...`),await new Promise(d=>setTimeout(d,u))}}if(l)return console.log("Devolviendo la mejor respuesta disponible después de agotar reintentos"),l;throw console.error(`Todos los intentos de generación fallaron después de ${t+1} intentos`),o||new Error("No se pudo generar contenido después de múltiples intentos. Por favor, intente nuevamente.")}function UYe(e){if(!e)return;let t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/\t/g,"  ").trim();const r=4e3;return t.length>r&&(console.log(`Texto proporcionado truncado de ${t.length} a ${r} caracteres`),t=t.substring(0,r)+`

[Texto truncado por límite de tamaño]`),t}async function QYe(e,t){try{let r;typeof e=="string"?r={asignatura:e,cantidad:t??5}:(r=e,r.textoProporcionado&&(r.textoProporcionado=UYe(r.textoProporcionado)));const n=r.cantidad??4,a=4;r.nivel&&!["1M","2M"].includes(r.nivel)&&(r.nivel=r.nivel==="1"?"1M":r.nivel==="2"?"2M":r.nivel),console.log(`Generando ${n} preguntas de ${r.asignatura}, nivel ${r.nivel||"1M"}`);const s=HYe(r,n,a);console.log("Enviando prompt a la IA (usando modelo Pro para mejor calidad)...");const o=await MYe(s,2,!0);if(!o)throw console.error("La IA no devolvió respuesta"),new Error("No se recibió respuesta del modelo de IA. Por favor, intente nuevamente.");return console.log("Procesando respuesta de la IA..."),zYe(o,n,r)}catch(r){throw console.error("Error en generarPreguntasSimce:",r),r instanceof Error?r:new Error("Ocurrió un error al generar las preguntas SIMCE. Por favor, intente nuevamente.")}}function HYe(e,t,r){const n=e.asignatura,s=(e.nivel||"1M")==="1M"?"1º medio":"2º medio",o=e.dificultad||"media",l={baja:"facil",media:"media",alta:"dificil"},c=[];if(c.push("Eres un generador pedagógico especializado en preguntas tipo SIMCE para Chile."),c.push(`Tu tarea es crear exactamente ${t} preguntas de alta calidad de la asignatura "${n}" para nivel ${s} (Chile).`),n==="Lectura"){c.push(`
ESPECIFICACIONES PARA LECTURA:`);const u=e.habilidadesLectura&&e.habilidadesLectura.length>0?e.habilidadesLectura:["Localizar información","Relacionar información","Interpretar","Reflexionar y evaluar"];c.push(`- Habilidades a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar específicamente UNA de estas habilidades."),c.push("- Distribuye las preguntas entre las habilidades seleccionadas.");const d=e.textoProporcionado&&e.textoProporcionado.trim().length>0,f=e.textoBaseLectura&&e.textoBaseLectura.trim().length>0;d?(c.push(`
- IMPORTANTE: Utilizarás EXCLUSIVAMENTE el texto proporcionado por el usuario para generar preguntas.`),c.push("- NO generes un texto adicional, usa únicamente el texto que se proporciona más adelante."),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):f?(c.push(`
- Utilizarás el texto base proporcionado para generar preguntas.`),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):(c.push(`
- Como no se ha proporcionado un texto base, DEBES CREAR un texto original:`),c.push("  * Extensión: 200-350 palabras"),c.push("  * Apropiado para estudiantes de "+s),c.push("  * Culturalmente relevante para Chile, pero neutro (sin controversias)"),c.push("  * Sin marcas comerciales ni contenido con derechos de autor"),c.push('  * El texto debe incluirse en la propiedad "textoBase" del primer ítem solamente'))}else if(n==="Matemática"){c.push(`
ESPECIFICACIONES PARA MATEMÁTICA:`);const u=e.ejesMatematica&&e.ejesMatematica.length>0?e.ejesMatematica:["Números","Álgebra y Funciones","Geometría","Probabilidad y Estadística"];c.push(`- Ejes temáticos a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar específicamente UNO de estos ejes."),c.push("- Distribuye las preguntas entre los ejes seleccionados."),c.push("- Usa contextos matemáticos realistas y escolares, relevantes para la vida diaria de estudiantes chilenos."),e.textoProporcionado&&(c.push(`
- IMPORTANTE: Utilizarás el texto proporcionado por el usuario como contexto o referencia para generar problemas matemáticos.`),c.push("- Las preguntas pueden incluir datos o situaciones mencionadas en el texto."))}if(c.push(`
REGLAS DE FORMATO DE SALIDA:`),c.push("- Devuelve UN ÚNICO bloque JSON (sin texto adicional antes o después)."),c.push("- El JSON debe ser un arreglo de objetos; cada objeto representa una pregunta con este esquema EXACTO:"),c.push("  {"),c.push('    "id": "p1",'),c.push('    "enunciado": "Texto del enunciado...",'),c.push('    "alternativas": ['),c.push('      {"id": "A", "texto": "...", "esCorrecta": true, "explicacion": "Justificación detallada..."},'),c.push('      {"id": "B", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "C", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "D", "texto": "...", "esCorrecta": false}'),c.push("    ],"),n==="Lectura"?(c.push('    "habilidad": "Una de las habilidades especificadas",'),e.textoBaseLectura||c.push('    "textoBase": "El texto completo aquí (solo en el primer ítem)",')):c.push('    "eje": "Uno de los ejes especificados",'),c.push('    "estandarAprendizaje": "Estándar curricular específico",'),c.push(`    "dificultad": "${l[o]}"`),c.push("  }"),c.push(`
REGLAS DE CALIDAD:`),c.push("1. Enunciados claros y directos, sin ambigüedades."),c.push(`2. EXACTAMENTE ${r} alternativas por pregunta (etiquetadas A, B, C, D).`),c.push("3. Solo UNA alternativa correcta por pregunta."),c.push('4. La alternativa correcta debe tener "esCorrecta": true y debe incluir una "explicacion" pedagógica.'),c.push("5. Distractores (alternativas incorrectas) deben representar errores típicos (conceptuales o procedimentales)."),c.push("6. Las preguntas deben estar alineadas rigurosamente con el currículum chileno para "+s+"."),c.push(`7. Ajusta el nivel de dificultad a "${o}" (${l[o]}).`),c.push("8. Usa lenguaje claro, inclusivo y español chileno estándar."),c.push("9. Evita contenido con derechos de autor, marcas comerciales y temas sensibles."),e.contextoCurricular&&(c.push(`
CONTEXTO CURRICULAR ESPECÍFICO:`),c.push(e.contextoCurricular),c.push("- Alinea tus ítems al contexto curricular provisto.")),e.textoProporcionado||e.textoBaseLectura&&n==="Lectura"){const u=!!e.textoProporcionado,d=u?`
TEXTO PROPORCIONADO POR EL USUARIO:`:`
TEXTO BASE PARA LECTURA:`;c.push(d);const f=e.textoProporcionado||e.textoBaseLectura;c.push('"""'),c.push(f),c.push('"""'),c.push(`
- Formula las preguntas ÚNICAMENTE sobre este texto.`),c.push("- IMPORTANTE: NO incluyas el texto en la propiedad textoBase del JSON, ya fue provisto externamente."),u&&(c.push("- Este es un texto proporcionado por el usuario, asegúrate de formular preguntas relevantes y precisas."),n==="Matemática"&&(c.push("- Para matemáticas, extrae datos numéricos y situaciones del texto para formular problemas matemáticos relacionados."),c.push("- Cuando sea relevante, inventa datos numéricos coherentes con la situación para completar los problemas.")))}return c.push(`
IMPORTANTE: Produce SOLO el arreglo JSON, sin texto introductorio ni comentarios adicionales.`),c.join(`
`)}function nW(e){if(!e)return e;try{const t=["como","así","también","según","véase","ejemplo"];let r=e;return t.forEach(n=>{const a=new RegExp(`"([^"]*)"${n}"([^"]*)"`,"g");r=r.replace(a,`"$1\\"${n}\\"$2"`)}),r=r.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),r=r.replace(/,(\s*[\]}])/g,"$1"),r}catch(t){return console.log("Error al corregir problemas comunes:",t),e}}function VYe(e){if(!e||typeof e!="string")return console.error("Texto de entrada inválido:",e),null;console.log("Iniciando extracción JSON con algoritmo mejorado..."),e=e.replace(/^\uFEFF/,"");try{e=nW(e)}catch(t){console.log("Error durante pre-procesamiento de palabras problemáticas:",t)}try{const t=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/ig);if(t&&t.length>0){console.log(`Encontrados ${t.length} bloques de código potenciales`);for(const r of t){const n=r.replace(/```(?:json)?|```/ig,"").trim();console.log(`Probando bloque de código: ${n.substring(0,50)}...`);const a=nW(n),s=zx(a);try{return JSON.parse(s),console.log("JSON válido extraído del bloque de código"),s}catch{console.log("JSON en este bloque de código es inválido, continuando con siguiente bloque...")}}}}catch(t){console.log("Error procesando bloques de código:",t)}try{const t=/(\[\s*\{[\s\S]*?\}\s*\])/i.exec(e);if(t&&t[1]){const r=zx(t[1].trim());try{return JSON.parse(r),console.log("JSON completo válido encontrado directamente"),r}catch{console.log("JSON completo parece inválido, continuando...")}}}catch(t){console.log("Error buscando JSON completo:",t)}try{const t=e.indexOf("[");if(t>=0&&e.indexOf('"id":',t)>t){console.log("Analizando estructura desde el inicio del array...");const n=e.lastIndexOf("]");let a;if(n>t)a=e.substring(t,n+1);else{const o=/"id"\s*:\s*"p\d+"/g;let l,c=-1,u="";for(;(l=o.exec(e))!==null;)c=l.index,u=l[0];if(console.log(`Última pregunta encontrada: ${u} en posición ${c}`),c>0){let d=e.indexOf('"id":',c+u.length);d===-1?d=e.length:(d=e.lastIndexOf("}",d),d===-1?d=e.length:d+=1),a=e.substring(t,d)+"]"}else a=e.substring(t)+"]"}const s=zx(a);try{return JSON.parse(s),console.log("JSON reconstruido desde inicio del array"),s}catch{console.log("JSON reconstruido inválido, continuando...")}}}catch(t){console.log("Error en estrategia de reconstrucción desde inicio:",t)}try{console.log("Buscando primera pregunta completa...");const r=/\{[\s\S]*?"id"\s*:\s*"p1"[\s\S]*?"enunciado"[\s\S]*?"alternativas"[\s\S]*?\}/.exec(e);if(r){let n=r[0];if(n.includes('"alternativas"')&&n.includes('"id": "A"')){const a=["A","B","C","D"],s=[];for(const o of a)n.includes(`"id": "${o}"`)&&s.push(o);if(console.log(`Alternativas encontradas en p1: ${s.join(", ")}`),s.length>0){const o=n.indexOf('"alternativas"');if(!n.substring(o).includes("]}")){console.log("Estructura de alternativas incompleta, reconstruyendo...");let d=-1,f="";for(const h of s){const m=n.lastIndexOf(`"id": "${h}"`);m>d&&(d=m,f=h)}if(d!==-1){console.log(`Última alternativa completa: ${f}`);const h=n.indexOf("}",d);h!==-1&&(n=n.substring(0,h+1),n.includes("]}")||(n+="]}"))}}let c=`[${n}]`;const u=zx(c);try{return JSON.parse(u),console.log("Primera pregunta reconstruida con éxito"),u}catch(d){console.log("Error al parsear primera pregunta reconstruida:",d)}}}}}catch(t){console.log("Error buscando primera pregunta:",t)}try{console.log("Intentando extracción quirúrgica del enunciado...");const t=e.match(/"enunciado"\s*:\s*"([^"]+)"/);if(t&&t[1]){const r=t[1].replace(/"/g,'\\"');console.log("Enunciado encontrado:",r.substring(0,30)+"...");let n="A";const a=e.match(/"respuesta"\s*:\s*"([A-D])"/);a&&a[1]&&(n=a[1]);let s="No disponible";const o=e.match(/"explicacion"\s*:\s*"([^"]+)"/);o&&o[1]&&(s=o[1].replace(/"/g,'\\"'));const l=`[{
        "id": "p1",
        "enunciado": "${r}",
        "alternativas": [
          {"id": "A", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="A"}, "explicacion": "${n==="A"?s:""}"},
          {"id": "B", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="B"}, "explicacion": "${n==="B"?s:""}"},
          {"id": "C", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="C"}, "explicacion": "${n==="C"?s:""}"},
          {"id": "D", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="D"}, "explicacion": "${n==="D"?s:""}"}
        ],
        "respuesta": "${n}",
        "explicacion": "${s}",
        "habilidad": "Recuperación parcial",
        "estandarAprendizaje": "Contenido recuperado parcialmente"
      }]`;try{const c=zx(l);return JSON.parse(c),console.log("Generado JSON de emergencia con enunciado recuperado"),c}catch(c){console.log("Error al parsear JSON de emergencia:",c)}}}catch(t){console.log("Error en extracción quirúrgica:",t)}try{return console.log("Construyendo JSON mínimo de respaldo..."),zx(`[{
      "id": "p1",
      "enunciado": "La respuesta de la IA no pudo ser procesada correctamente. Por favor, intente nuevamente.",
      "alternativas": [
        {"id": "A", "texto": "Volver a generar preguntas", "esCorrecta": true, "explicacion": "El sistema detectó un formato incorrecto en la respuesta de la IA y no pudo procesarla."},
        {"id": "B", "texto": "Opción no disponible", "esCorrecta": false},
        {"id": "C", "texto": "Opción no disponible", "esCorrecta": false},
        {"id": "D", "texto": "Opción no disponible", "esCorrecta": false}
      ],
      "respuesta": "A",
      "explicacion": "Se recomienda intentar generar nuevamente o con diferentes parámetros."
    }]`)}catch(t){console.error("Error final en construcción de JSON de respaldo:",t)}return console.error("Todos los métodos de extracción JSON fallaron"),null}function zx(e){const t=e;console.log(`Limpiando JSON (primeros 50 caracteres): ${e.substring(0,50).replace(/\n/g,"\\n")}...`);const r=()=>{if(e.includes('"alternativas"')&&e.lastIndexOf('"alternativas"')>e.lastIndexOf("]"))return console.log("JSON truncado detectado en array de alternativas"),!0;const h=e.lastIndexOf("{"),m=e.lastIndexOf("}");if(h>m)return console.log("JSON truncado con objeto incompleto al final"),!0;const g=(_,F)=>(_.match(new RegExp("\\"+F,"g"))||[]).length,x=g(e,"{"),v=g(e,"}"),y=g(e,"["),w=g(e,"]");return x!==v||y!==w?(console.log("JSON con estructura desbalanceada",{llaveAbiertas:x,llaveCerradas:v,corcheteAbiertos:y,corcheteCerrados:w}),!0):!1},n=[];for(let h=0;h<e.length;h++){const m=e.charCodeAt(h);m<32&&m!==9&&m!==10&&m!==13&&n.push({posicion:h,codigo:m,contexto:e.substring(Math.max(0,h-15),h)+"|PROBLEMA|"+e.substring(h+1,h+15)})}n.length>0&&(console.log(`Detectados ${n.length} caracteres de control problemáticos`),n.slice(0,3).forEach(h=>{console.log(`Carácter de control en posición ${h.posicion}, código U+${h.codigo.toString(16).padStart(4,"0")}`),console.log(`Contexto: ${h.contexto}`)})),e=e.replace(/^\uFEFF/,"");let a="";for(let h=0;h<e.length;h++){const m=e.charCodeAt(h);m>=32&&m<=126||m>=128&&m<=255||m===9||m===10||m===13?a+=e[h]:a+=" "}if(e=a,e=e.replace(/\/\/.*/g,""),e=e.replace(/\/\*[\s\S]*?\*\//g,""),e=e.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),e=e.replace(/,(\s*[\]}])/g,"$1"),r()){console.log("Intentando reparar JSON truncado...");const h=e.match(/\{\s*"id"\s*:\s*"p1"[\s\S]*?(?="id"|$)/);if(h){let m=h[0];if(m.includes('"enunciado"')&&m.includes('"alternativas"')&&!m.includes('"}]}')&&(m.match(/"id"\s*:\s*"[A-D]"/g)||[]).length>0){let x=-1,v=-1,y=0;for(;(v=m.indexOf(`"id": "${String.fromCharCode(65+y)}"`,v+1))!==-1&&(x=v,y++,!(y>=4)););if(x!==-1){const w=m.indexOf("}",x);if(w!==-1){let _=m.substring(0,w+1);_+=" ] }",e=`[ ${_} ]`,console.log("JSON reconstruido desde alternativa incompleta")}}}}}let s="",o=!1,l=!1;for(let h=0;h<e.length;h++){const m=e[h],g=e.charCodeAt(h);o?l?(s+=m,l=!1):m==="\\"?(s+=m,l=!0):m==='"'?(s+=m,o=!1):g<32?(s+="\\u"+("0000"+g.toString(16)).slice(-4),console.log(`Escapado carácter de control en posición ${h}: U+${g.toString(16).padStart(4,"0")}`)):m==='"'&&e[h-1]!=="\\"?(s+='\\"',console.log(`Escapada comilla sin escapar en posición ${h}`)):s+=m:(m==='"'&&!o&&(o=!0),s+=m)}e=s,e=e.replace(/:(\s*)(true|false)(\s*[,}])/g,(h,m,g,x)=>": "+g+x),["explicacion","explanation","texto","textoBase","enunciado","habilidad","eje","estandarAprendizaje"].forEach(h=>{const m=new RegExp(`"${h}"\\s*:\\s*"([^"]*)"`,"g");e=e.replace(m,(g,x)=>{const v=x.replace(/"/g,'\\"');return`"${h}": "${v}"`})}),e=e.replace(/"([^"]*)"([^"]*)"([^"]*)"/g,(h,m,g,x)=>g.trim().length<15&&(g.includes("como")||g.includes("así")||g.includes("también")||g.includes("según"))?`"${m}\\"${g}\\"${x}"`:h),e=e.replace(/[ \t]+/g," ").trim(),!e.startsWith("[")&&e.includes('"id": "p1"')&&(e=`[${e}]`,console.log("Encapsulando objeto en array")),!(e.endsWith("}]")||e.endsWith('"]'))&&e.includes('"id": "p1"')&&(e.lastIndexOf("{")>e.lastIndexOf("}")&&(e+="}",console.log("Cerrando objeto abierto")),e.lastIndexOf("[")>e.lastIndexOf("]")&&(e+="]",console.log("Cerrando array abierto"))),e.includes('"alternativas"')&&!e.includes("]")&&(e+="]",console.log("Cerrando array de alternativas truncado"));const d=e.match(/"alternativas"\s*:\s*\[\s*{\s*"id"\s*:\s*"A".*?"explicacion"\s*:\s*"[^"]*"(?!\s*})/);if(d){const h=e.indexOf(d[0])+d[0].length;e=e.substring(0,h)+" }"+e.substring(h),console.log("Reparado cierre de alternativa")}const f=h=>{if(e.length>=h+10){const m=e.substring(Math.max(0,h-20),Math.min(e.length,h+20));console.log(`Verificando contexto alrededor de posición ${h}: "${m}"`);const g=[];for(let x=Math.max(0,h-5);x<Math.min(e.length,h+5);x++)g.push({pos:x,char:e[x],code:e.charCodeAt(x),hex:e.charCodeAt(x).toString(16).padStart(4,"0")});console.log("Análisis de caracteres alrededor de posición específica:"),g.forEach(x=>{console.log(`Pos ${x.pos}: "${x.char}" (U+${x.hex})`)})}};f(392);try{e.includes("textoBase")&&(e=e.replace(/"textoBase"\s*:\s*"([^"]*)"/g,(h,m)=>`"textoBase": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalización especial para campo textoBase")),e.includes('"explicacion"')&&(e=e.replace(/"explicacion"\s*:\s*"([^"]*)"/g,(h,m)=>`"explicacion": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalización especial para campos explicacion")),JSON.parse(e),console.log("JSON limpio válido")}catch(h){console.log("JSON sigue siendo inválido después de limpieza, intentando reparación más agresiva"),console.error("Error específico:",h.message);try{if(h.message&&h.message.includes("position")){const x=h.message.match(/position (\d+)/);if(x){const v=parseInt(x[1]);console.log(`Error en posición específica: ${v}`);const y=e.substring(Math.max(0,v-30),Math.min(e.length,v+30));if(console.log(`Contexto del error: "${y}"`),v===392||v>380&&v<400){console.log("¡Detectado el error típico en posición ~392! Aplicando corrección específica..."),f(v);try{const w=e.lastIndexOf('"',v),_=e.indexOf('"',v);if(w!==-1&&_!==-1){const F=e.substring(0,w+1),B=e.substring(_);e=F+"Contenido reemplazado debido a caracteres de control"+B,console.log("Aplicada corrección específica para error en posición 392");try{return JSON.parse(e),console.log("Corrección específica exitosa"),e}catch{console.log("La corrección específica falló, continuando...")}}}catch(w){console.log("Error durante corrección específica:",w)}}if(y.includes('"textoBase"')||y.includes('"explicacion"')){const w=e.lastIndexOf('"',v)+1,_=e.indexOf('"',v);if(w>=0&&_>=0){const F=e.substring(w,_),B=F.substring(0,Math.min(100,F.length));e=e.substring(0,w)+B+e.substring(_),console.log("Aplicada reparación de campo con truncado de contenido");try{return JSON.parse(e),console.log("Reparación exitosa por truncado de contenido"),e}catch{console.log("Reparación por truncado falló, continuando con reconstrucción completa")}}}}}const m=e.match(/"id"\s*:\s*"([^"]*)"/),g=e.match(/"enunciado"\s*:\s*"([^"]*)"/);if(m&&g){const x=m[1],v=g[1],y=v.length>150?v.substring(0,150)+"...":v;console.log(`Reconstruyendo con id="${x}" y enunciado="${y.substring(0,30)}..."`);const w=`[{
          "id": "${x}",
          "enunciado": "${y}",
          "alternativas": [
            {"id": "A", "texto": "Alternativa A (reconstruida)", "esCorrecta": true, "explicacion": "Alternativa reconstruida automáticamente debido a problemas en el formato JSON."},
            {"id": "B", "texto": "Alternativa B", "esCorrecta": false},
            {"id": "C", "texto": "Alternativa C", "esCorrecta": false},
            {"id": "D", "texto": "Alternativa D", "esCorrecta": false}
          ],
          "estandarAprendizaje": "Contenido reconstruido debido a problemas en el formato JSON"
        }]`;try{JSON.parse(w),console.log("Generada versión de emergencia del JSON"),e=w}catch{console.log("Error al parsear JSON de emergencia, creando versión básica"),e=`[{
            "id": "p1",
            "enunciado": "No fue posible procesar la respuesta. Por favor, intente nuevamente.",
            "alternativas": [
              {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Se recomienda volver a intentar la generación."},
              {"id": "B", "texto": "Opción B", "esCorrecta": false},
              {"id": "C", "texto": "Opción C", "esCorrecta": false},
              {"id": "D", "texto": "Opción D", "esCorrecta": false}
            ],
            "habilidad": "Diagnóstico",
            "estandarAprendizaje": "Error en generación"
          }]`}}else console.log("No se encontraron datos mínimos para reconstrucción, usando JSON de fallback mínimo"),e=`[{
          "id": "p1",
          "enunciado": "No fue posible procesar la respuesta de la IA. Por favor, intente nuevamente.",
          "alternativas": [
            {"id": "A", "texto": "Volver a intentar", "esCorrecta": true, "explicacion": "El sistema detectó un formato incorrecto en la respuesta de la IA."},
            {"id": "B", "texto": "Modificar parámetros", "esCorrecta": false},
            {"id": "C", "texto": "Usar menos preguntas", "esCorrecta": false},
            {"id": "D", "texto": "Contactar soporte", "esCorrecta": false}
          ],
          "habilidad": "Diagnóstico",
          "estandarAprendizaje": "Error en formato de respuesta"
        }]`}catch(m){console.log("Error durante la reconstrucción manual:",m),e=`[{
        "id": "p1",
        "enunciado": "Error crítico en el procesamiento de la respuesta.",
        "alternativas": [
          {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Error técnico en el procesamiento de la respuesta."},
          {"id": "B", "texto": "Opción B", "esCorrecta": false},
          {"id": "C", "texto": "Opción C", "esCorrecta": false},
          {"id": "D", "texto": "Opción D", "esCorrecta": false}
        ]
      }]`}}if(t!==e){console.log("Se realizaron modificaciones al JSON original");try{JSON.parse(e)}catch(h){console.error("JSON final sigue siendo inválido:",h),console.log("JSON limpiado (primeros 100 caracteres):",e.substring(0,100))}}return e}function zYe(e,t,r){if(!e||typeof e!="string")throw console.error("Respuesta de IA inválida:",e),new Error("No se recibió una respuesta válida de la IA");console.log("Procesando respuesta de la IA...");try{console.log(`Respuesta recibida: ${e.length} caracteres. Primeros 100:`,e.substring(0,100).replace(/\n/g,"\\n"));const n=VYe(e);if(!n)return console.error("No se pudo extraer JSON de la respuesta después de múltiples intentos"),Cy(1,"La IA generó una respuesta en un formato que no se pudo procesar. Por favor, intente nuevamente.");console.log("JSON extraído correctamente, intentando parsear...");let a;try{a=JSON.parse(n),console.log("JSON parseado correctamente:",typeof a,Array.isArray(a)?a.length:"no es array")}catch(l){console.error("Error al parsear el JSON final:",l,"JSON parcial:",n.substring(0,200)),console.log("Intentando reparación de emergencia del JSON...");try{const c=n.match(/\[\s*\{.*?\}\s*(?:\]|$)/s);if(c){const u=c[0].endsWith("]")?c[0]:c[0]+"]";a=JSON.parse(u),console.log("Reparación parcial exitosa")}else throw new Error("No se pudo reparar el JSON")}catch{return console.log("Creando objeto de respaldo después de error de parseo final"),Cy(1,"La IA generó una respuesta en formato incorrecto. Por favor, intente nuevamente con diferentes parámetros.")}}if(!Array.isArray(a))if(console.log("La respuesta no es un array, encapsulándola"),typeof a=="object"&&a!==null)a=[a];else return console.error("La respuesta no es un objeto que podamos encapsular:",typeof a),Cy(1,"La respuesta recibida no tiene el formato esperado. Por favor, intente nuevamente.");if(a=a.filter(l=>l&&typeof l=="object"),a.length===0)return console.error("No se encontraron preguntas válidas después de filtrar"),Cy(1,"No se pudieron extraer preguntas válidas de la respuesta. Por favor, intente nuevamente.");console.log(`Se encontraron ${a.length} preguntas para procesar`),a.length<t&&(console.warn(`⚠️ Solo se generaron ${a.length} preguntas de ${t} solicitadas. Intentando re-generación automática.`),a.length===1&&t>1&&r&&r.asignatura&&console.log("Detectado problema de generación parcial. Intentando recuperar más preguntas..."));let s;r!=null&&r.textoProporcionado?(s=r.textoProporcionado,console.log("Usando texto proporcionado por el usuario como textoBase")):a.length>0&&a[0].textoBase?(s=a[0].textoBase,console.log("Se encontró textoBase generado por la IA para preguntas de Lectura")):r!=null&&r.textoBaseLectura&&(s=r.textoBaseLectura,console.log("Usando textoBaseLectura de las opciones"));const o=a.slice(0,t).map((l,c)=>{try{if(console.log(`Procesando pregunta ${c+1}...`),!l||typeof l!="object")throw new Error(`La pregunta ${c+1} no es un objeto válido`);if(!l.enunciado&&!l.pregunta&&!l.texto){console.warn(`La pregunta ${c+1} no tiene enunciado, buscando alternativas...`);const g=Object.entries(l).find(([x,v])=>typeof v=="string"&&v.length>20&&["contenido","stem","question","statement"].includes(x.toLowerCase()));if(g)l.enunciado=g[1],console.log(`Usando '${g[0]}' como enunciado`);else throw new Error(`No se encontró enunciado para la pregunta ${c+1}`)}let u=Array.isArray(l.alternativas)?l.alternativas:[];u.length===0&&(l.A||l.a||l.opciones||l.options)&&(console.log("Detectado formato alternativo de alternativas"),l.opciones&&Array.isArray(l.opciones)?u=l.opciones:l.options&&Array.isArray(l.options)?u=l.options:u=["A","B","C","D"].map(g=>{const x=l[g],v=l[g.toLowerCase()],y=x!==void 0?x:v;if(y){if(typeof y=="string")return{id:g,texto:y,esCorrecta:l.respuesta===g||l.correcta===g};if(typeof y=="object")return{id:g,...y}}return{id:g,texto:`Alternativa ${g}`,esCorrecta:!1}})),u.length===0&&(console.log("No se encontraron alternativas, creando alternativas por defecto"),u=[{id:"A",texto:"Opción A (generada automáticamente)",esCorrecta:!0},{id:"B",texto:"Opción B (generada automáticamente)",esCorrecta:!1},{id:"C",texto:"Opción C (generada automáticamente)",esCorrecta:!1},{id:"D",texto:"Opción D (generada automáticamente)",esCorrecta:!1}]);const d=u.map((g,x)=>{if(!g)return console.warn(`Alternativa ${x} es nula o indefinida, creando alternativa por defecto`),{id:String.fromCharCode(65+x),texto:`Alternativa ${String.fromCharCode(65+x)} (generada por defecto)`,esCorrecta:!1};if(typeof g=="string")return{id:String.fromCharCode(65+x),texto:g,esCorrecta:l.respuesta===String.fromCharCode(65+x)||l.correcta===String.fromCharCode(65+x)||l.respuesta===x||l.respuesta===(x+1).toString()};const v=(g==null?void 0:g.texto)||(g==null?void 0:g.text)||(g==null?void 0:g.contenido)||(g==null?void 0:g.content)||`Alternativa ${String.fromCharCode(65+x)}`;let y=(g==null?void 0:g.id)||String.fromCharCode(65+x);typeof y=="number"&&(y=String.fromCharCode(64+y));let w=!1;((g==null?void 0:g.esCorrecta)===!0||(g==null?void 0:g.isCorrect)===!0||(g==null?void 0:g.correct)===!0)&&(w=!0);const _=l.respuesta||l.correcta||l.respuestaCorrecta||l.correct;return _&&(_===y||_===x||_===x+1||_===(x+1).toString())&&(w=!0),{id:y,texto:v,esCorrecta:w,explicacion:(g==null?void 0:g.explicacion)||(g==null?void 0:g.explanation)||""}}).filter(g=>g&&g.texto);for(d.length===0&&(console.warn("No hay alternativas válidas después de filtrar, creando por defecto"),d.push({id:"A",texto:"Alternativa A (por defecto)",esCorrecta:!0},{id:"B",texto:"Alternativa B (por defecto)",esCorrecta:!1},{id:"C",texto:"Alternativa C (por defecto)",esCorrecta:!1},{id:"D",texto:"Alternativa D (por defecto)",esCorrecta:!1}));d.length<4;){const g=String.fromCharCode(65+d.length);console.log(`Agregando alternativa ${g} faltante`),d.push({id:g,texto:`Alternativa ${g} (agregada automáticamente)`,esCorrecta:!1})}d.length>4&&(console.log(`Demasiadas alternativas (${d.length}), conservando solo 4`),d.splice(4)),d.some(g=>g.esCorrecta)||(console.log("No se encontró alternativa marcada como correcta, marcando la primera"),d[0].esCorrecta=!0);const f=d.find(g=>g.esCorrecta),h=(f==null?void 0:f.explicacion)||l.explicacion||l.explanation||"";return h&&f&&!f.explicacion&&(f.explicacion=h),f&&!f.explicacion&&(f.explicacion=`La respuesta correcta es la alternativa ${f.id}`),{id:l.id||`p${c+1}`,enunciado:l.enunciado||l.pregunta||l.texto||`Pregunta ${c+1}`,alternativas:d,estandarAprendizaje:l.estandarAprendizaje||l.estandar||l.standard||"",habilidad:l.habilidad||l.eje||l.skill||l.axis||"",textoBase:c===0?s:void 0,createdAt:Na(),dificultad:l.dificultad||l.difficulty||"media"}}catch(u){return console.error(`Error procesando pregunta ${c+1}:`,u),$Ye(c+1)}});return console.log(`Procesamiento completado: ${o.length} preguntas procesadas`),o}catch(n){return console.error("Error general en procesarRespuestaIA:",n),Cy(t,"Ocurrió un error al procesar la respuesta de la IA. Por favor, intente nuevamente.")}}function $Ye(e){return{id:`p${e}`,enunciado:`Pregunta ${e} (no se pudo generar correctamente)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generación con el modelo Pro."},{id:"B",texto:"Modificar parámetros",esCorrecta:!1},{id:"C",texto:"Reducir complejidad",esCorrecta:!1},{id:"D",texto:"Contactar soporte",esCorrecta:!1}],habilidad:"No disponible",estandarAprendizaje:"No disponible",createdAt:Na(),dificultad:"media"}}function Cy(e,t){const r=[];for(let n=0;n<e;n++)r.push({id:`p${n+1}`,enunciado:n===0?t:`Pregunta ${n+1} (no disponible)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generación."},{id:"B",texto:"Modificar parámetros de generación",esCorrecta:!1},{id:"C",texto:"Usar menos cantidad de preguntas",esCorrecta:!1},{id:"D",texto:"Revisar el contexto proporcionado",esCorrecta:!1}],habilidad:"Diagnóstico",estandarAprendizaje:"Error en generación",createdAt:Na(),dificultad:"media"});return r}async function GYe(e){try{const t=Z0(),r=Uu(t,"generarPreguntasSimce");console.log("Llamando a Cloud Function para generar preguntas SIMCE...");const n=await r({options:e}),{preguntas:a,textoBase:s}=n.data;if(!a||!Array.isArray(a)||a.length===0)throw new Error("La respuesta no contiene preguntas válidas");return console.log(`Se generaron ${a.length} preguntas correctamente mediante Cloud Function`),s&&a.length>0&&(a[0].textoBase=s),a}catch(t){throw console.error("Error al generar preguntas SIMCE mediante Cloud Function:",t),t}}const Pce=({content:e,context:t="unknown"})=>{if(typeof e=="string")return/<[a-z][\s\S]*>/i.test(e)?i.jsx("span",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e}}):i.jsx("span",{className:"whitespace-pre-wrap",children:e});if(st.isValidElement(e))return e;try{return i.jsx("span",{children:JSON.stringify(e)})}catch{return i.jsx("span",{children:"[Sin contenido disponible]"})}},Rc=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},qYe=e=>{for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null},KYe=(e,t)=>t.trim()?e.map((r,n)=>n===0?{...r,textoBase:t.trim()}:r):e,WYe=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(!0),[s,o]=N.useState("lista"),[l,c]=N.useState(null),[u,d]=N.useState(""),[f,h]=N.useState("todas"),[m,g]=N.useState(!1),[x,v]=N.useState({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),[y,w]=N.useState(!1),[_,F]=N.useState(null),[B,T]=N.useState([]),[C,S]=N.useState([]),[j,L]=N.useState(""),[P,k]=N.useState(!1),[U,Q]=N.useState(null),[K,H]=N.useState(null),[q,z]=N.useState([]);N.useEffect(()=>{(async()=>{try{a(!0);const ve=await vM(e.id||"");r(ve);const Pe=await Z4();z(Pe);const Ue=new Set;e.cursos&&e.cursos.length>0?e.cursos.forEach(be=>Ue.add(Rc(be))):js.forEach(be=>Ue.add(Rc(be))),Pe.filter(be=>be.profile==="ESTUDIANTE"&&be.curso).forEach(be=>{be.curso&&(be.curso=Rc(be.curso),Ue.add(be.curso))});const de=Array.from(Ue).sort().map(be=>({id:be,nombre:W(be)}));T(de)}catch(ve){console.error("Error al cargar datos iniciales:",ve),F("No se pudieron cargar los datos necesarios")}finally{a(!1)}})()},[e]);const W=Ae=>{const ve=Ae.match(/^(\d+)º?([A-E])$/i);if(ve){const Pe=ve[1],Ue=ve[2].toUpperCase();return`${Pe}º Medio ${Ue}`}return Ae};N.useEffect(()=>{S(j?B.filter(Ae=>Ae.nombre.toLowerCase().includes(j.toLowerCase())):[])},[j,B]);const ee=()=>t.filter(Ae=>{const ve=Ae.titulo.toLowerCase().includes(u.toLowerCase()),Pe=f==="todas"||Ae.asignatura===f;return ve&&Pe}),X=()=>{g(!0),c(null),v({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),Q(null),H(null),te(Ae=>({...Ae,textoProporcionado:""})),o("detalle")},O=Ae=>{g(!0),c(Ae),v({...Ae}),o("detalle")},R=async Ae=>{if(window.confirm(`¿Estás seguro de eliminar el set "${Ae.titulo}"? Esta acción no se puede deshacer.`))try{await vce(Ae.id),r(ve=>ve.filter(Pe=>Pe.id!==Ae.id))}catch(ve){console.error("Error al eliminar set:",ve),F("No se pudo eliminar el set de preguntas")}},G=async()=>{try{if(!x.titulo){F("El título de la evaluación es obligatorio");return}if(!x.preguntas||x.preguntas.length===0){F("Debes agregar al menos una pregunta");return}const Ae=(x.cursosAsignados||[]).map(Rc),ve=Ae.length>0;a(!0);let Pe=[];ve&&(Pe=q.filter(wt=>wt.profile==="ESTUDIANTE"&&wt.curso&&Ae.includes(Rc(wt.curso))).map(wt=>wt.id));const Ue={...x,cursosAsignados:Ae,estudiantesAsignados:Pe};let de="";const{collection:be,addDoc:De,updateDoc:Ve,doc:We}=await Ti(async()=>{const{collection:wt,addDoc:Tt,updateDoc:Lt,doc:Et}=await Promise.resolve().then(()=>ub);return{collection:wt,addDoc:Tt,updateDoc:Lt,doc:Et}},void 0),{db:Je}=await Ti(async()=>{const{db:wt}=await Promise.resolve().then(()=>hR);return{db:wt}},void 0),At="simce_evaluaciones";console.log("[DEBUG] Guardando evaluación:",Ue);try{if(l&&l.id){const wt=We(Je,At,l.id),{getDoc:Tt,deleteDoc:Lt}=await Ti(async()=>{const{getDoc:_r,deleteDoc:qt}=await Promise.resolve().then(()=>ub);return{getDoc:_r,deleteDoc:qt}},void 0),Et=await Tt(wt);if(console.log("[DEBUG] Documento a editar existe en simce_evaluaciones:",Et.exists()),Et.exists())await Ve(wt,Ue),de=l.id,console.log("[DEBUG] Evaluación actualizada en simce_evaluaciones:",de);else{de=(await De(be(Je,At),Ue)).id,console.log("[DEBUG] Evaluación migrada a simce_evaluaciones:",de);const qt=We(Je,"simce_sets",l.id),tn=await Tt(qt);console.log("[DEBUG] Documento antiguo existe en simce_sets:",tn.exists()),tn.exists()&&(await Lt(qt),console.log("[DEBUG] Documento antiguo eliminado de simce_sets:",l.id))}}else de=(await De(be(Je,At),Ue)).id,console.log("[DEBUG] Evaluación nueva creada en simce_evaluaciones:",de)}catch(wt){throw console.error("[ERROR] Guardando evaluación:",wt),wt}const vt={id:de,...Ue};r(wt=>[vt,...wt]),oe({tipo:"success",mensaje:ve?`Evaluación guardada y asignada a ${Ae.length} curso${Ae.length!==1?"s":""} correctamente`:"Evaluación guardada correctamente"}),setTimeout(()=>{oe({tipo:"",mensaje:""})},3e3),g(!1),o("lista"),F(null)}catch(Ae){console.error("Error al guardar evaluación:",Ae),F("No se pudo guardar la evaluación"),oe({tipo:"error",mensaje:"Ocurrió un error al guardar la evaluación"}),setTimeout(()=>{oe({tipo:"",mensaje:""})},3e3)}finally{a(!1)}},[Y,te]=N.useState({cantidadPreguntas:"4",dificultad:"media",textoProporcionado:"",habilidadesLectura:{"Localizar información":!0,"Relacionar información":!0,Interpretar:!0,"Reflexionar y evaluar":!0},ejesMatematica:{Números:!0,"Álgebra y Funciones":!0,Geometría:!0,"Probabilidad y Estadística":!0}}),[ae,oe]=N.useState({tipo:"",mensaje:""}),ie=async()=>{var Ae,ve,Pe,Ue,de;try{if(!x.asignatura){F("Seleccione una asignatura para generar preguntas");return}w(!0),F(null),oe({tipo:"",mensaje:""});let be,De;x.asignatura==="Competencia Lectora"?(be=Object.entries(Y.habilidadesLectura).filter(([vt,wt])=>wt).map(([vt])=>vt),be.length===0&&(be=["Localizar información","Relacionar información","Interpretar","Reflexionar y evaluar"])):x.asignatura==="Pensamiento Lógico"&&(De=Object.entries(Y.ejesMatematica).filter(([vt,wt])=>wt).map(([vt])=>vt),De.length===0&&(De=["Números","Álgebra y Funciones","Geometría","Probabilidad y Estadística"])),oe({tipo:"warning",mensaje:`Generando ${Y.cantidadPreguntas} preguntas de ${x.asignatura}. Este proceso puede tardar unos segundos...`});const We={asignatura:x.asignatura.toLowerCase().replace(/á/g,"a").replace(/é/g,"e").replace(/í/g,"i").replace(/ó/g,"o").replace(/ú/g,"u").replace(/ñ/g,"n").replace(/\s+/g," ").trim(),cantidad:parseInt(Y.cantidadPreguntas),opcionesPorPregunta:4,habilidadesLectura:be,ejesMatematica:De,dificultad:Y.dificultad,contextoCurricular:x.descripcion,textoProporcionado:((Ae=Y.textoProporcionado)==null?void 0:Ae.trim())||void 0};let Je,At=[];try{if(console.log("Intentando generar preguntas usando Cloud Function..."),At.push("Cloud Function"),Je=await GYe(We),!Array.isArray(Je)||Je.length===0)throw new Error("La respuesta de Cloud Function no es válida");Je.forEach((vt,wt)=>{if(!vt.enunciado||!Array.isArray(vt.alternativas)||vt.alternativas.length!==4)throw new Error(`Pregunta ${wt+1} tiene estructura inválida`)})}catch(vt){console.error("Error con Cloud Function:",vt);try{if(console.log("Usando generación local como respaldo..."),At.push("Local"),oe({tipo:"warning",mensaje:"Usando generación local como respaldo. Procesando..."}),Je=await QYe(We),!Array.isArray(Je)||Je.length===0)throw new Error("La generación local no produjo resultados válidos");Je.forEach((wt,Tt)=>{if(!wt.enunciado||!Array.isArray(wt.alternativas)||wt.alternativas.length!==4)throw new Error(`Pregunta ${Tt+1} generada localmente tiene estructura inválida`)})}catch(wt){console.error("Error con generación local:",wt);const Tt=[];throw(ve=vt.message)!=null&&ve.includes("JSON")&&Tt.push("Problema de formato en servidor remoto"),(Pe=wt.message)!=null&&Pe.includes("JSON")&&Tt.push("Problema de formato en generación local"),new Error(`No se pudieron generar preguntas con ningún método (intentos: ${At.join(", ")}). Errores: ${Tt.join(", ")||"Problemas de conexión o formato"}. Por favor, intente nuevamente o genere preguntas manualmente.`)}}if(!Je||Je.length===0)throw new Error("No se generaron preguntas válidas después de todos los intentos");if(x.asignatura==="Competencia Lectora"){let vt=(Ue=Y.textoProporcionado)==null?void 0:Ue.trim();vt||(vt=(de=Je[0].textoBase)==null?void 0:de.trim()),vt||(vt="Texto de comprensión generado automáticamente."),Je[0].textoBase=vt,console.log("[DEBUG] Texto base final asignado a la primera pregunta:",vt.substring(0,50)+"...")}v(vt=>({...vt,preguntas:[...vt.preguntas||[],...Je]})),oe({tipo:"success",mensaje:`¡Se generaron ${Je.length} preguntas correctamente usando ${At[At.length-1]}!`}),setTimeout(()=>{oe({tipo:"",mensaje:""})},5e3)}catch(be){console.error("Error general al generar preguntas:",be);let De="No se pudieron generar las preguntas.";be instanceof Error&&(be.message.includes("JSON")?De="Hubo un problema con el formato de las respuestas del servidor. Esto puede deberse a sobrecarga del sistema de IA. Intente nuevamente en unos minutos.":be.message.includes("red")||be.message.includes("network")?De="Problema de conexión. Verifique su conexión a internet e intente nuevamente.":be.message.length>10&&(De=be.message)),F(De),oe({tipo:"error",mensaje:De+" Puede agregar preguntas manualmente como alternativa."}),setTimeout(()=>{oe({tipo:"",mensaje:""})},8e3)}finally{w(!1)}},ue=Ae=>{H({...Ae})},Ce=()=>{var Ue,de;if(!K)return;if(!K.enunciado){F("El enunciado de la pregunta es obligatorio");return}if(!K.alternativas.find(be=>be.esCorrecta)){F("Debe marcar una alternativa como correcta");return}if(K.alternativas.filter(be=>!be.texto).length>0){F("Todas las alternativas deben tener texto");return}const Pe=K.textoBase&&x.asignatura==="Competencia Lectora";if(K.id.startsWith("p"))if(Pe){console.log("Nueva pregunta con texto base detectado:",K.textoBase);const be=[...x.preguntas||[]];v(De=>({...De,preguntas:[K,...be]}))}else v(be=>({...be,preguntas:[...be.preguntas||[],K]}));else if(Pe){console.log("Actualizando pregunta con texto base:",K.textoBase);const be=((Ue=x.preguntas)==null?void 0:Ue.map(De=>De.id===K.id?K:De))||[];if(K===((de=x.preguntas)==null?void 0:de[0])){const De=K.textoBase||"",Ve=KYe(be,De);v(We=>({...We,preguntas:Ve}))}else v(De=>({...De,preguntas:be}))}else v(be=>{var De;return{...be,preguntas:((De=be.preguntas)==null?void 0:De.map(Ve=>Ve.id===K.id?K:Ve))||[]}});H(null),F(null)},ne=Ae=>{v(ve=>{var Pe;return{...ve,preguntas:((Pe=ve.preguntas)==null?void 0:Pe.filter(Ue=>Ue.id!==Ae))||[]}})},Be=Ae=>{const ve=Rc(Ae);v(Pe=>{const Ue=(Pe.cursosAsignados||[]).map(Rc);return Ue.includes(ve)?{...Pe,cursosAsignados:Ue.filter(de=>de!==ve)}:{...Pe,cursosAsignados:[...Ue,ve]}})},je=()=>{const Ae=ee();return n?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(gm,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(e1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Buscar evaluaciones...",className:"pl-9 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:u,onChange:ve=>d(ve.target.value)})]}),i.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:ve=>h(ve.target.value),children:[i.jsx("option",{value:"todas",children:"Todas las asignaturas"}),i.jsx("option",{value:"Competencia Lectora",children:"Competencia Lectora"}),i.jsx("option",{value:"Pensamiento Lógico",children:"Pensamiento Lógico"})]})]}),i.jsxs("button",{onClick:X,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md",children:[i.jsx(_o,{className:"w-4 h-4"}),"Nueva evaluación"]})]}),i.jsx("div",{className:"space-y-4",children:Ae.length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(uR,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u||f!=="todas"?"No se encontraron evaluaciones con los filtros seleccionados":"No hay evaluaciones creadas aún. Crea tu primera evaluación SIMCE."}),(u||f!=="todas")&&i.jsx("button",{onClick:()=>{d(""),h("todas")},className:"mt-4 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 hover:dark:text-indigo-300 text-sm font-medium",children:"Limpiar filtros"})]}):Ae.map(ve=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-3 ${ve.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:ve.asignatura==="Competencia Lectora"?i.jsx(vi,{className:"w-5 h-5"}):i.jsx(oR,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-800 dark:text-slate-200",children:ve.titulo}),ve.descripcion&&i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:ve.descripcion}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:[ve.preguntas.length," preguntas"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:ve.asignatura}),ve.cursosAsignados&&ve.cursosAsignados.length>0&&i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs flex items-center gap-1",children:[i.jsx(ro,{className:"w-3 h-3"}),ve.cursosAsignados.length," ",ve.cursosAsignados.length===1?"curso":"cursos"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:new Date(ve.fechaCreacion).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>c(ve),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Ver detalles",children:i.jsx(vte,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>O(ve),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar evaluación",children:i.jsx(ih,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>R(ve),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded-full hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar evaluación",children:i.jsx(Va,{className:"w-4 h-4"})})]})]}),(l==null?void 0:l.id)===ve.id&&i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 p-4",children:[ve.asignatura==="Competencia Lectora"&&(()=>{const Pe=qYe(ve.preguntas);return Pe?i.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(vi,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"📖 Texto de Comprensión Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:i.jsx(Pce,{content:Pe,context:"simce-texto-base"})})]}):null})(),i.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[i.jsx("span",{className:"mr-2",children:"❓"}),"Preguntas (",ve.preguntas.length,")"]}),i.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:ve.preguntas.map((Pe,Ue)=>{var de,be;return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("p",{className:"font-medium",children:[i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2 rounded-md text-sm mr-2 font-semibold",children:Ue+1}),Pe.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-2",children:Pe.alternativas.map(De=>i.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${De.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[De.id,")"]}),i.jsx("span",{className:"flex-1",children:De.texto}),De.esCorrecta&&i.jsx(ts,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"})]},De.id))}),i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"📚 Estándar:"})," ",Pe.estandarAprendizaje]}),Pe.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"🎯 Habilidad:"})," ",Pe.habilidad]}),((de=Pe.alternativas.find(De=>De.esCorrecta))==null?void 0:de.explicacion)&&i.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[i.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"💡 Explicación:"}),i.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(be=Pe.alternativas.find(De=>De.esCorrecta))==null?void 0:be.explicacion})]})]})]},Pe.id)})}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:()=>c(null),className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 px-3 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:"✕ Cerrar vista detallada"})})]})]},ve.id))})]})},_e=()=>{var Ae,ve,Pe,Ue;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:l?"Editar evaluación":"Nueva evaluación"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{g(!1),o("lista"),F(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:G,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",disabled:n,children:[i.jsx(Yc,{className:"w-4 h-4"}),(x.cursosAsignados||[]).length>0?"Guardar y asignar":"Guardar evaluación"]})]})]}),_&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-3 rounded-md flex items-center gap-2",children:[i.jsx(n2,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:_})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la evaluación *"}),i.jsx("input",{type:"text",value:x.titulo,onChange:de=>v({...x,titulo:de.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Evaluación SIMCE 4° Básico - Competencia Lectora"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción (opcional)"}),i.jsx("textarea",{value:x.descripcion,onChange:de=>v({...x,descripcion:de.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Breve descripción de la evaluación",rows:3})]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsxs("label",{className:"flex items-center mb-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[i.jsx(ro,{className:"w-4 h-4 mr-1.5"}),"Asignar a cursos",(x.cursosAsignados||[]).length>0&&i.jsxs("span",{className:"ml-2 text-xs bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 py-0.5 px-1.5 rounded-full",children:[(x.cursosAsignados||[]).length," seleccionado",(x.cursosAsignados||[]).length!==1?"s":""]})]}),i.jsx("p",{className:"mb-2 text-xs text-slate-500 dark:text-slate-400",children:"Seleccione los cursos a los que estará asignada esta evaluación. Estará disponible para los estudiantes en cuanto guarde."}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:j,onChange:de=>{L(de.target.value),k(!0)},onFocus:()=>k(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Buscar curso..."}),P&&(C.length>0||j)&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-md max-h-60 overflow-y-auto",children:C.length===0&&j?i.jsx("div",{className:"p-3 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron cursos"}):C.map(de=>i.jsxs("div",{className:"px-3 py-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center",onClick:()=>{Be(de.id),L("")},children:[i.jsx("div",{className:`w-4 h-4 border rounded mr-2 flex items-center justify-center ${(x.cursosAsignados||[]).includes(de.id)?"bg-indigo-600 border-indigo-600":"border-slate-400 dark:border-slate-500"}`,children:(x.cursosAsignados||[]).includes(de.id)&&i.jsx(gte,{className:"w-3 h-3 text-white"})}),i.jsx("span",{children:de.nombre})]},de.id))})]}),(x.cursosAsignados||[]).length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(x.cursosAsignados||[]).map(de=>{const be=B.find(De=>De.id===de);return i.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-md text-sm",children:[i.jsx("span",{children:(be==null?void 0:be.nombre)||de}),i.jsx("button",{onClick:()=>Be(de),className:"ml-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 hover:dark:text-slate-200",children:i.jsx(uA,{className:"w-3 h-3"})})]},de)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Estudiantes asignados"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md p-3 max-h-40 overflow-y-auto text-sm",children:(()=>{const de=q.filter(be=>{if(be.profile!=="ESTUDIANTE"||!be.curso)return!1;const De=Rc(be.curso);return(x.cursosAsignados||[]).includes(De)});return de.length===0?i.jsx("span",{className:"text-slate-500",children:"No hay estudiantes asignados a los cursos seleccionados."}):i.jsx("ul",{className:"list-disc pl-4",children:de.map(be=>i.jsxs("li",{className:"mb-1",children:[be.nombreCompleto||be.nombre||be.id," ",i.jsxs("span",{className:"text-xs text-slate-400",children:["(",W(Rc(be.curso)),")"]})]},be.id))})})()})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Configuración de presentación"})}),i.jsx("div",{className:"flex space-x-6",children:i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x.barajarAlternativas,onChange:de=>v({...x,barajarAlternativas:de.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Barajar alternativas"})]})})]})]}),i.jsxs("div",{className:"mb-5 bg-slate-50 dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-md font-semibold mb-3",children:"Opciones de generación con IA"}),ae.mensaje&&i.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center gap-2 ${ae.tipo==="error"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300":ae.tipo==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-300":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300"}`,children:[ae.tipo==="error"&&i.jsx(n2,{className:"w-5 h-5 flex-shrink-0"}),ae.tipo==="warning"&&i.jsx(gm,{className:"w-5 h-5 flex-shrink-0 animate-spin"}),ae.tipo==="success"&&i.jsx(ts,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:ae.mensaje})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto base (opcional)"}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:"Si proporciona un texto, las preguntas se generarán basadas en él. Si lo deja vacío, la IA generará automáticamente un texto adecuado."}),i.jsx("textarea",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500 resize-y",value:Y.textoProporcionado||"",onChange:de=>te({...Y,textoProporcionado:de.target.value}),placeholder:x.asignatura==="Competencia Lectora"?"Ingrese aquí un texto para generar preguntas de comprensión lectora...":"Ingrese aquí un texto para crear problemas de pensamiento lógico relacionados...",rows:6})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cantidad de preguntas"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:Y.cantidadPreguntas,onChange:de=>te({...Y,cantidadPreguntas:de.target.value}),children:[i.jsx("option",{value:"2",children:"2 preguntas"}),i.jsx("option",{value:"4",children:"4 preguntas"}),i.jsx("option",{value:"6",children:"6 preguntas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dificultad"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:Y.dificultad,onChange:de=>te({...Y,dificultad:de.target.value}),children:[i.jsx("option",{value:"baja",children:"Baja"}),i.jsx("option",{value:"media",children:"Media"}),i.jsx("option",{value:"alta",children:"Alta"})]})]})]}),x.asignatura==="Competencia Lectora"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades de Competencia Lectora"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Y.habilidadesLectura).map(([de,be])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:be,onChange:()=>{te({...Y,habilidadesLectura:{...Y.habilidadesLectura,[de]:!be}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:de})]},de))})]}),x.asignatura==="Pensamiento Lógico"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ejes de Pensamiento Lógico"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Y.ejesMatematica).map(([de,be])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:be,onChange:()=>{te({...Y,ejesMatematica:{...Y.ejesMatematica,[de]:!be}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:de})]},de))})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:ie,disabled:y,className:`px-4 py-2 text-white rounded-md text-sm flex items-center gap-2 ${y?"bg-amber-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:y?i.jsxs(i.Fragment,{children:[i.jsx(gm,{className:"w-4 h-4 animate-spin"}),"Generando preguntas..."]}):i.jsxs(i.Fragment,{children:[i.jsx(_o,{className:"w-4 h-4"}),"Generar preguntas automáticamente"]})})}),K?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[x.asignatura==="Competencia Lectora"&&((Ae=x.preguntas[0])==null?void 0:Ae.id)===K.id&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Texto base para preguntas de comprensión"}),i.jsx("textarea",{value:K.textoBase||"",onChange:de=>H({...K,textoBase:de.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Texto de lectura para las preguntas...",rows:5})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Enunciado de la pregunta *"}),i.jsx("textarea",{value:K.enunciado,onChange:de=>H({...K,enunciado:de.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Escribe el enunciado de la pregunta...",rows:3})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Estándar de aprendizaje *"}),i.jsx("select",{value:K.estandarAprendizaje,onChange:de=>H({...K,estandarAprendizaje:de.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:x.asignatura==="Lectura"?JXe.map((de,be)=>i.jsx("option",{value:de,children:de},be)):ZXe.map((de,be)=>i.jsx("option",{value:de,children:de},be))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Habilidad (opcional)"}),i.jsx("input",{value:K.habilidad||"",onChange:de=>H({...K,habilidad:de.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Interpretar, Analizar, Resolver problemas..."})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block mb-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Alternativas * (marca una como correcta)"}),i.jsx("div",{className:"space-y-3",children:K.alternativas.map((de,be)=>i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"flex items-center mt-1 mr-2",children:[i.jsx("input",{type:"radio",checked:de.esCorrecta,onChange:()=>{H({...K,alternativas:K.alternativas.map(De=>({...De,esCorrecta:De.id===de.id}))})},className:"rounded-full border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsxs("span",{className:"ml-1 font-semibold",children:[de.id,")"]})]}),i.jsx("div",{className:"flex-1",children:i.jsx("textarea",{value:de.texto,onChange:De=>{H({...K,alternativas:K.alternativas.map(Ve=>Ve.id===de.id?{...Ve,texto:De.target.value}:Ve)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:`Texto de la alternativa ${de.id}...`,rows:2})})]},de.id))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Explicación para alternativa correcta (recomendado)"}),i.jsx("textarea",{value:((ve=K.alternativas.find(de=>de.esCorrecta))==null?void 0:ve.explicacion)||"",onChange:de=>{H({...K,alternativas:K.alternativas.map(be=>be.esCorrecta?{...be,explicacion:de.target.value}:be)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Explica por qué esta es la respuesta correcta...",rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{H(null),F(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:Ce,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",children:[i.jsx(Yc,{className:"w-4 h-4"}),"Guardar pregunta"]})]})]}):i.jsx("div",{className:"space-y-4",children:(x.preguntas||[]).length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(xte,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay preguntas agregadas aún. Puedes generar preguntas automáticamente o agregarlas manualmente."})]}):i.jsxs(i.Fragment,{children:[x.asignatura==="Lectura"&&((Ue=(Pe=x.preguntas)==null?void 0:Pe[0])==null?void 0:Ue.textoBase)&&i.jsxs("div",{className:"p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(vi,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"Texto Base de Comprensión Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Este texto acompañará a todas las preguntas de lectura"})]})]}),i.jsx("button",{onClick:()=>{var be;const de=(be=x.preguntas)==null?void 0:be[0];de&&ue(de)},className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:dark:text-blue-200 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800/50",title:"Editar texto base",children:i.jsx(ih,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800 shadow-inner",children:i.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:i.jsx("p",{className:"whitespace-pre-wrap leading-relaxed text-base",children:x.preguntas[0].textoBase})})})]}),(x.preguntas||[]).map((de,be)=>{var De,Ve;return i.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"font-medium",children:[i.jsxs("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2.5 rounded-md mr-2 text-sm font-semibold",children:["Pregunta ",be+1]}),de.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-2",children:de.alternativas.map(We=>i.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${We.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[We.id,")"]}),i.jsx("span",{className:"flex-1",children:We.texto}),We.esCorrecta&&i.jsx(ts,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400"})]},We.id))}),i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estándar:"})," ",de.estandarAprendizaje]}),de.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Habilidad:"})," ",de.habilidad]}),((De=de.alternativas.find(We=>We.esCorrecta))==null?void 0:De.explicacion)&&i.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[i.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"Explicación:"}),i.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(Ve=de.alternativas.find(We=>We.esCorrecta))==null?void 0:Ve.explicacion})]})]})]}),i.jsxs("div",{className:"flex gap-1 ml-3",children:[i.jsx("button",{onClick:()=>ue(de),className:"p-1.5 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar pregunta",children:i.jsx(ih,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>ne(de.id),className:"p-1.5 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar pregunta",children:i.jsx(Va,{className:"w-4 h-4"})})]})]})},de.id)})]})})]})]})};return i.jsxs(i.Fragment,{children:[s==="lista"&&!m&&je(),(s==="detalle"||m)&&_e()]})},XYe=e=>(console.log("Google Sans Code font would be added here"),e),YYe=({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),yM=Z0(Zb),JYe=Uu(yM,"generarRubricaConGemini"),ZYe=Uu(yM,"generarDescriptorDimensionConGemini"),eJe=Uu(yM,"generarPruebaConGemini"),aW={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},tJe=({item:e,showAnswers:t=!1,shuffledDefinitions:r=[]})=>i.jsx(i.Fragment,{children:e.tipo==="Selección múltiple"&&i.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((n,a)=>{const s=t&&a===e.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${s?"bg-green-100 dark:bg-green-900/50":""}`,children:[i.jsx("div",{className:"w-5 h-5 border rounded-full"}),i.jsxs("span",{children:[String.fromCharCode(65+a),") ",n]})]},a)})})}),rJe=()=>{const e={nombre:"",asignatura:ls[0],nivel:pH[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[t,r]=N.useState(e),[n,a]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState(null),[u,d]=N.useState([]),[f,h]=N.useState(!1),[m,g]=N.useState(!1),{currentUser:x}=mM();N.useEffect(()=>{if(x){const S=cWe(d);return()=>S()}},[x]);const v=S=>{const{name:j,value:L}=S.target;r(P=>({...P,[j]:L}))},y=S=>{r(j=>{const L={...j.tiposActividad};return L[S]?delete L[S]:L[S]=aW[S][0],{...j,tiposActividad:L}})},w=(S,j)=>{r(L=>({...L,tiposActividad:{...L.tiposActividad,[S]:j}}))},_=S=>{r(j=>{const L=j.selectedNee.includes(S)?j.selectedNee.filter(P=>P!==S):[...j.selectedNee,S];return{...j,selectedNee:L}})},F=async S=>{if(S.preventDefault(),!x||!x.uid||!x.email||!x.id){o("Debes iniciar sesión para generar una evaluación.");return}if(!t.nombre.trim()||!t.contenido.trim()||Object.keys(t.tiposActividad).length===0){o("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}a(!0),o(null);try{q4("Evaluación - Pruebas",x);const j={...t.tiposActividad},P=(await eJe({objetivo:`Evaluar el siguiente contenido: "${t.contenido}" para el nivel ${t.nivel}.`,cantidadesPorTipo:j,contextoAdicional:`
          Nombre de la prueba: ${t.nombre}
          Asignatura: ${t.asignatura}
          Nivel de Dificultad General: ${t.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
          ${t.isNee&&t.selectedNee.length>0?`**Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):** Adapta esta prueba para estudiantes con las siguientes características: ${t.selectedNee.join(", ")}. Esto implica usar un lenguaje claro, simple y directo, evitar preguntas complejas, usar textos más cortos y distractores claros.`:""}
          Directrices Generales: El vocabulario, la complejidad y el contexto de toda la prueba deben ser apropiados para el nivel educativo 'Educación Media' en Chile.
          Formato de Salida: Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.
        `})).data.prueba;let k=0;P.preguntas&&Array.isArray(P.preguntas)&&P.preguntas.forEach(K=>{k+=K.puntaje||1});const U=(P.preguntas||[]).map(K=>(K.tipo==="Comprensión de lectura"&&Array.isArray(K.preguntas)&&(K.preguntas=K.preguntas.map(H=>({...H,id:H.id||crypto.randomUUID()}))),{...K,id:K.id||crypto.randomUUID()})),Q={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:t.nombre,asignatura:t.asignatura,nivel:t.nivel,contenidoOriginal:t.contenido,tiposActividadOriginal:t.tiposActividad,objetivo:P.objetivo||"",instruccionesGenerales:P.instruccionesGenerales||"",puntajeIdeal:k,actividades:[{id:crypto.randomUUID(),titulo:t.nombre,instrucciones:P.instruccionesGenerales||"",items:U}],dificultad:t.dificultad,...t.isNee&&{adaptacionNEE:t.selectedNee}};c(Q),h(!1)}catch(j){console.error(j),o("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{a(!1)}},B=async()=>{if(l)try{await uWe(l),alert("Prueba guardada con éxito.")}catch(S){console.error(S),alert("No se pudo guardar la prueba.")}},T=async S=>{if(window.confirm("¿Eliminar esta prueba?"))try{await dWe(S),(l==null?void 0:l.id)===S&&c(null)}catch(j){console.error(j),alert("No se pudo eliminar la prueba.")}},C=async S=>{try{g(!0);const j=new yr({unit:"pt",format:"letter"});try{XYe(j),j.setFont("GoogleSansCode","normal")}catch{}const L=40;let P=L;j.setFontSize(12),j.text("LICEO INDUSTRIAL DE RECOLETA",L,P),j.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",j.internal.pageSize.getWidth()-L,P,{align:"right"}),P+=24,j.setFont(void 0,"bold"),j.setFontSize(18),j.text(S.nombre,j.internal.pageSize.getWidth()/2,P,{align:"center"}),j.setFont(void 0,"normal"),P+=18,gi(j,{startY:P+6,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Campo","Valor"]],body:[["Fecha",new Date(S.fechaCreacion).toLocaleDateString()],["Asignatura",S.asignatura],["Nivel",S.nivel],["Puntaje Ideal",String(S.puntajeIdeal)],["Objetivo",S.objetivo],["Instrucciones Generales",S.instruccionesGenerales]]}),P=j.lastAutoTable.finalY+16,S.actividades.forEach((Q,K)=>{P>j.internal.pageSize.getHeight()-120&&(j.addPage(),P=L),j.setFontSize(13),j.setFont(void 0,"bold"),j.text(`Actividad ${K+1}: ${Q.titulo}`,L,P),P+=14,j.setFont(void 0,"normal"),j.setFontSize(10);const H=j.splitTextToSize(Q.instrucciones,j.internal.pageSize.getWidth()-L*2);j.text(H,L,P),P+=H.length*12+6,Q.items.forEach((q,z)=>{const W=`${z+1}. ${q.pregunta} (${q.puntaje} pts)`,ee=j.splitTextToSize(W,j.internal.pageSize.getWidth()-L*2);switch(P>j.internal.pageSize.getHeight()-100&&(j.addPage(),P=L),j.setFont(void 0,"bold"),j.text(ee,L,P),P+=ee.length*12+4,j.setFont(void 0,"normal"),q.tipo){case"Selección múltiple":{q.opciones.forEach((X,O)=>{const R=`${String.fromCharCode(65+O)}) ${X}`,G=j.splitTextToSize(R,j.internal.pageSize.getWidth()-L*2-16);j.text(G,L+16,P),P+=G.length*12}),P+=8;break}case"Verdadero o Falso":{j.text("V ____    F ____",L+16,P),P+=18;break}case"Desarrollo":{j.rect(L,P-10,j.internal.pageSize.getWidth()-L*2,60),P+=70;break}case"Términos pareados":{const X=q.pares;gi(j,{startY:P,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Columna A: Concepto","Columna B: Definición"]],body:X.map((O,R)=>[`${R+1}. ${O.concepto}`,O.definicion])}),P=j.lastAutoTable.finalY+8;break}case"Comprensión de lectura":{const X=q,O=j.splitTextToSize(X.texto,j.internal.pageSize.getWidth()-L*2);j.text(O,L,P),P+=O.length*12+8,X.preguntas.forEach((R,G)=>{const Y=`${G+1}. ${R.pregunta} (${R.puntaje} pts)`,te=j.splitTextToSize(Y,j.internal.pageSize.getWidth()-L*2);P>j.internal.pageSize.getHeight()-100&&(j.addPage(),P=L),j.setFont(void 0,"bold"),j.text(te,L+8,P),P+=te.length*12+4,j.setFont(void 0,"normal"),R.tipo==="Selección múltiple"?(R.opciones.forEach((ae,oe)=>{const ie=`${String.fromCharCode(65+oe)}) ${ae}`,ue=j.splitTextToSize(ie,j.internal.pageSize.getWidth()-L*2-24);j.text(ue,L+24,P),P+=ue.length*12}),P+=6):(j.rect(L+8,P-10,j.internal.pageSize.getWidth()-L*2-16,50),P+=58)});break}}})});const k=new Date().toISOString().split("T")[0],U=`${S.nombre.replace(/\s/g,"_")}_${S.asignatura.replace(/\s/g,"_")}_${k}.pdf`;j.save(U),g(!1),alert(`PDF generado y descargado como "${U}"`)}catch(j){console.error(j),g(!1),alert("No se pudo generar el PDF.")}};return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>h(!f),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[i.jsx(YYe,{open:!f})," ",i.jsxs("span",{children:[f?"Ocultar":"Mostrar"," Respuestas"]})]}),i.jsx("button",{onClick:B,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),i.jsxs("button",{onClick:()=>l&&C(l),disabled:m,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[m?"...":i.jsx(fte,{})," PDF"]})]})]}),i.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),i.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),i.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:l.nombre}),i.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Asignatura:"})," ",l.asignatura]}),i.jsxs("p",{className:"text-right",children:[i.jsx("strong",{children:"Puntaje Ideal:"})," ",l.puntajeIdeal]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Nivel:"})," ",l.nivel]})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[i.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",l.dificultad||"Intermedio"]}),l.adaptacionNEE&&l.adaptacionNEE.length>0&&i.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",l.adaptacionNEE.join(", ")]})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",l.objetivo]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Instrucciones Generales:"})," ",l.instruccionesGenerales]})]}),l.actividades.map(S=>i.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:S.titulo}),i.jsx("p",{className:"italic text-sm mb-4",children:S.instrucciones}),i.jsx("div",{className:"space-y-6",children:S.items.map((j,L)=>i.jsx(tJe,{item:j,index:L,showAnswers:f},j.id))})]},S.id))]})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),i.jsxs("form",{onSubmit:F,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"nombre",value:t.nombre,onChange:v,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:t.asignatura,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:ls.map(S=>i.jsx("option",{children:S},S))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Nivel"}),i.jsx("select",{name:"nivel",value:t.nivel,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:pH.map(S=>i.jsx("option",{children:S},S))})]}),i.jsx("div",{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),i.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((S,j)=>i.jsx("button",{type:"button",onClick:()=>r(L=>({...L,dificultad:S})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50 ${j===0?"rounded-l-lg":""} ${j===2?"rounded-r-lg":""} ${t.dificultad===S?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:S},S))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:t.isNee,onChange:S=>r(j=>({...j,isNee:S.target.checked,selectedNee:S.target.checked?j.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),t.isNee&&i.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:__.map(S=>i.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:t.selectedNee.includes(S),onChange:()=>_(S),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:S})]},S))})]})]})]}),i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Contenido a evaluar"}),i.jsx("textarea",{name:"contenido",value:t.contenido,onChange:v,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"space-y-3",children:Ate.map(S=>i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:!!t.tiposActividad[S],onChange:()=>y(S),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:S})]}),t.tiposActividad[S]&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),aW[S].map(j=>i.jsx("button",{type:"button",onClick:()=>w(S,j),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${t.tiposActividad[S]===j?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:j},j))]})]},S))}),s&&i.jsx("p",{className:"text-red-500 text-sm",children:s}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:n,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:n?"Generando...":"Generar Prueba"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),i.jsx("div",{className:"space-y-2",children:u.length>0?u.map(S=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:S.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[S.asignatura," - ",S.nivel," (",new Date(S.fechaCreacion).toLocaleDateString(),")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>c(S),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),i.jsx("button",{onClick:()=>T(S.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},S.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},nJe=({rubricas:e,onSave:t,onDelete:r,onCreate:n,allUsers:a,onCreatedInteractiva:s})=>{const[o,l]=N.useState(null),[c,u]=N.useState("list"),[d,f]=N.useState(!1),[h,m]=N.useState(""),{currentUser:g}=mM(),[x,v]=N.useState(!1),[y,w]=N.useState(""),[_,F]=N.useState(""),B=N.useMemo(()=>Array.from(new Set(a.filter(K=>K.profile===Gt.ESTUDIANTE&&K.curso).map(K=>Rc(K.curso)))).sort(),[a]),T=async(K,H,q)=>{try{K.id||(K.id=crypto.randomUUID()),await BO(K);const z=a.filter(O=>O.profile===Gt.ESTUDIANTE&&Rc(O.curso||"")===H),W={};z.forEach(O=>{W[O.id]={puntajes:{},feedback:""}});const ee={nombre:K.titulo,curso:H,asignatura:q,rubricaEstaticaId:K.id,resultados:W},X=await mWe(ee);v(!1),alert("Rúbrica interactiva creada."),s==null||s(X)}catch(z){console.error(z),alert("No se pudo crear la rúbrica interactiva.")}},C=async(K,H)=>{if(!K.trim()||!H.trim()){alert("El título y la descripción son obligatorios.");return}f(!0);try{q4("Evaluación - Rúbricas",g);const z=(await JYe({objetivo:K,niveles:["Insuficiente","Suficiente","Competente","Avanzado"],dimensiones:[],contextoAdicional:`El propósito de la rúbrica es: "${H}". Por favor, genera entre 3 y 5 dimensiones de evaluación relevantes.`})).data.rubrica,W={id:crypto.randomUUID(),titulo:z.nombre,descripcion:z.descripcion,fechaCreacion:new Date().toISOString(),dimensiones:z.dimensiones.map(ee=>({id:crypto.randomUUID(),nombre:ee.nombre,niveles:ee.descriptores.reduce((X,O)=>{const G={Insuficiente:"insuficiente",Suficiente:"suficiente",Competente:"competente",Avanzado:"avanzado"}[O.nivel]||O.nivel.toLowerCase().replace(/\s/g,"");return G&&(X[G]=O.descripcion),X},{insuficiente:"",suficiente:"",competente:"",avanzado:""})}))};await n(W),l(W),u("form"),v(!0)}catch(q){console.error(q),alert("Error al generar la rúbrica con IA.")}finally{f(!1)}},S=()=>{l({id:"",titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),u("form")},j=K=>{l(K),u("form")},L=async()=>{if(!o||!h.trim())return;const K=h;m("");const H=`temp-${crypto.randomUUID()}`;l(q=>q?{...q,dimensiones:[...q.dimensiones,{id:H,nombre:K,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0}]}:null);try{const z=(await ZYe({objetivo:o.titulo,dimension:K,nivel:"todos",contextoAdicional:'Genera descriptores para los 4 niveles: Insuficiente, Suficiente, Competente y Avanzado. La respuesta debe ser un objeto JSON con claves "insuficiente", "suficiente", "competente", "avanzado".'})).data.descriptores;l(W=>W?{...W,dimensiones:W.dimensiones.map(ee=>ee.id===H?{...ee,niveles:z,isLoading:!1}:ee)}:null)}catch(q){console.error(q),alert("No se pudo generar la dimensión con IA."),l(z=>z?{...z,dimensiones:z.dimensiones.filter(W=>W.id!==H)}:null)}},P=(K,H,q)=>{o&&l(z=>z?{...z,dimensiones:z.dimensiones.map(W=>W.id!==K?W:H==="nombre"?{...W,nombre:q}:{...W,niveles:{...W.niveles,[H]:q}})}:null)},k=(K,H)=>{l(q=>q?{...q,[K]:H}:null)},U=K=>{o&&l(H=>H?{...H,dimensiones:H.dimensiones.filter(q=>q.id!==K)}:null)},Q=()=>{if(!o)return null;const K="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",H=`${K} resize-none text-sm`;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),i.jsx("button",{onClick:()=>u("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),i.jsx("input",{value:o.titulo,onChange:q=>k("titulo",q.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${K} mt-1`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),i.jsx("textarea",{value:o.descripcion,onChange:q=>k("descripcion",q.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${K} mt-1`})]})]}),o.dimensiones.length===0&&i.jsx("div",{className:"text-center py-4",children:i.jsx("button",{onClick:()=>C(o.titulo,o.descripcion),disabled:d||!o.titulo||!o.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:d?"Generando...":"✨ Generar Rúbrica con IA"})}),o.dimensiones.length>0&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),i.jsx("button",{type:"button",onClick:()=>v(!0),className:"bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Usar como Rúbrica Interactiva"})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(q=>i.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:q},q))})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.dimensiones.map(q=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 w-1/5",children:i.jsx("textarea",{value:q.nombre,onChange:z=>P(q.id,"nombre",z.target.value),rows:4,className:H})}),Object.keys(q.niveles).map(z=>i.jsx("td",{className:"p-2 w-1/5",children:"isLoading"in q&&q.isLoading?i.jsx("div",{className:"flex justify-center items-center h-full",children:i.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):i.jsx("textarea",{value:q.niveles[z],onChange:W=>P(q.id,z,W.target.value),rows:4,className:H})},z)),i.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:i.jsx("button",{onClick:()=>U(q.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},q.id))})]})}),i.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),i.jsx("input",{value:h,onChange:q=>m(q.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${K} mt-1`})]}),i.jsx("button",{onClick:L,disabled:!h.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]}),x&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg w-full max-w-md space-y-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Asignar a Curso"}),i.jsx("label",{className:"text-sm font-medium",children:"Curso"}),i.jsxs("select",{value:y,onChange:q=>w(q.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[i.jsx("option",{value:"",children:"Selecciona un curso..."}),B.map(q=>i.jsx("option",{value:q,children:q},q))]}),i.jsx("label",{className:"text-sm font-medium",children:"Asignatura"}),i.jsxs("select",{value:_,onChange:q=>F(q.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[i.jsx("option",{value:"",children:"Selecciona una asignatura..."}),ls.map(q=>i.jsx("option",{value:q,children:q},q))]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2",children:"Cancelar"}),i.jsx("button",{disabled:!y||!o||!_,onClick:()=>o&&T(o,y,_),className:"bg-emerald-600 text-white px-4 py-2 rounded",children:"Crear Interactiva"})]})]})})]})};return c==="list"?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),i.jsx("button",{onClick:S,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(K=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:K.titulo}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:K.descripcion})]}),i.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>j(K),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>r(K.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},K.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):Q()},aJe=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=N.useState([]),[a,s]=N.useState(null);N.useEffect(()=>{const f=hWe(n);return()=>f()},[]);const o=N.useMemo(()=>r.find(f=>f.id===a)||null,[r,a]),l=N.useMemo(()=>o&&t.find(f=>f.id===o.rubricaEstaticaId)||null,[o,t]),c=N.useMemo(()=>o?e.filter(f=>f.profile===Gt.ESTUDIANTE&&Rc(f.curso||"")===Rc(o.curso)):[],[o,e]),u=async(f,h,m)=>{if(!o)return;const g=o.resultados[f]||{puntajes:{},feedback:""},x={...o.resultados,[f]:{...g,puntajes:{...g.puntajes,[h]:m}}};await pWe(o.id,{resultados:x})},d=f=>{if(!l)return 1;const h=l.dimensiones.map(w=>w.nombre),m=o==null?void 0:o.resultados[f];if(!m)return 1;const g=h.reduce((w,_)=>w+(m.puntajes[_]||0),0),x=h.length*4,y=1+6*(x>0?g/x:0);return Math.round(y*10)/10};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Rúbricas Interactivas"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"w-1/3 space-y-2",children:[r.map(f=>i.jsxs("button",{onClick:()=>s(f.id),className:`w-full text-left p-3 rounded border ${a===f.id?"bg-amber-100 dark:bg-amber-900/30":"bg-slate-50 dark:bg-slate-700/50"}`,children:[i.jsx("div",{className:"font-semibold",children:f.nombre}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Curso: ",f.curso," · Asignatura: ",f.asignatura]})]},f.id)),r.length===0&&i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay rúbricas interactivas."})]}),i.jsx("div",{className:"flex-1",children:o&&l?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:[o.nombre," — ",o.curso]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Estudiante"}),l.dimensiones.map(f=>i.jsx("th",{className:"p-2 text-left",children:f.nombre},f.id)),i.jsx("th",{className:"p-2 text-left",children:"Nota"})]})}),i.jsx("tbody",{children:c.map(f=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:f.nombreCompleto}),l.dimensiones.map(h=>{var g,x;const m=((x=(g=o.resultados[f.id])==null?void 0:g.puntajes)==null?void 0:x[h.nombre])||0;return i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:m,onChange:v=>u(f.id,h.nombre,Number(v.target.value)),className:"border rounded p-1 dark:bg-slate-700",children:[i.jsx("option",{value:0,children:"—"}),i.jsx("option",{value:1,children:"1 - Insuficiente"}),i.jsx("option",{value:2,children:"2 - Suficiente"}),i.jsx("option",{value:3,children:"3 - Competente"}),i.jsx("option",{value:4,children:"4 - Avanzado"})]})},h.id)}),i.jsx("td",{className:"p-2 font-semibold",children:d(f.id).toFixed(1)})]},f.id))})]})})]}):i.jsx("p",{className:"text-slate-500",children:"Selecciona una rúbrica interactiva para calificar."})})]})]})},sJe=()=>{const[e,t]=N.useState("pruebas"),[r,n]=N.useState([]),[a,s]=N.useState([]),[o,l]=N.useState(!0);return N.useEffect(()=>{l(!0);const c=gWe(n),u=fWe(d=>{s(d),l(!1)});return()=>{c(),u()}},[]),o?i.jsx("div",{className:"text-center py-10 text-lg",children:"Cargando datos..."}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("pruebas"),children:"Pruebas"}),i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricas"),children:"Rúbricas"}),i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricasInteractivas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricasInteractivas"),children:"Rúbricas Interactivas"})]}),e==="pruebas"&&i.jsx(rJe,{}),e==="rubricas"&&i.jsx(nJe,{rubricas:a,onSave:BO,onDelete:AWe,onCreate:BO,allUsers:r,onCreatedInteractiva:()=>t("rubricasInteractivas")}),e==="rubricasInteractivas"&&i.jsx(aJe,{allUsers:r,rubricasEstaticas:a})]})},iJe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=mt(Nr,c),d=await qr(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const o=[];try{const c=mt(Nr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=Ht(c,xr("timestamp",">=",u.toISOString()),ar("timestamp","desc")),f=await qr(d),h={};f.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{o.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const l=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:l,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:o}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},sW=500,$x=({title:e,value:t,description:r,alert:n})=>i.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),i.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),UI=({title:e,data:t,colorClass:r})=>{const n=N.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),i.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},oJe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!0),[a,s]=N.useState(null),[o,l]=N.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});N.useEffect(()=>{n(!0);const f=tWe(g=>{t(g),n(!1)}),h=async()=>{try{const g=await iJe();l(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const m=setInterval(h,300*1e3);return()=>{f(),clearInterval(m)}},[]);const{stats:c,userStats:u,moduleStats:d}=N.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),m=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(F=>{const B=new Date(F.timestamp).getTime();B>=h&&x.today++,B>=m&&x.week++,B>=g&&x.month++;const T=F.userEmail||"Desconocido";v[T]||(v[T]={email:T,today:0,month:0,total:0}),v[T].total++,B>=h&&v[T].today++,B>=g&&v[T].month++,y[F.module]=(y[F.module]||0)+1});const w=Object.values(v).sort((F,B)=>B.total-F.total),_=Object.entries(y).map(([F,B])=>({label:F,value:B})).sort((F,B)=>B.value-F.value);return{stats:x,userStats:w,moduleStats:_}},[e]);return i.jsxs("div",{className:"space-y-8",children:[a&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx($x,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${sW}`,alert:c.today>sW}),i.jsx($x,{title:"Llamadas esta Semana",value:r?"--":c.week}),i.jsx($x,{title:"Llamadas este Mes",value:r?"--":c.month})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(UI,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),i.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx($x,{title:"Documentos Creados (Hoy)",value:o.documentsCreatedToday,description:"Nuevos documentos"}),i.jsx($x,{title:"Lecturas de Firestore (Hoy)",value:o.readsToday,description:"Operaciones de lectura"}),i.jsx($x,{title:"Total de Documentos",value:o.totalDocuments,description:"En todas las colecciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(UI,{title:"Actividad por Colección",data:o.collectionsActivity,colorClass:"bg-green-500"}),i.jsx(UI,{title:"Actividad Diaria (Últimos 7 días)",data:o.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},iW=Object.values(Gt),QI=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",lJe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),[a,s]=N.useState("Usuarios"),[o,l]=N.useState({nombreCompleto:"",email:"",rut:"",profile:Gt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=N.useState(null),[d,f]=N.useState(""),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState(null),[w,_]=N.useState(null),[F,B]=N.useState(null),T=N.useCallback(async()=>{n(!0);try{const z=await Z4();t(z)}catch(z){console.error("Error al cargar usuarios",z),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);N.useEffect(()=>{T()},[T]);const C=N.useCallback(z=>{const{name:W,value:ee}=z.target;l(X=>({...X,[W]:ee,curso:W==="profile"&&ee!==Gt.ESTUDIANTE?"":X.curso,cursos:W==="profile"&&ee!==Gt.PROFESORADO?[]:X.cursos,asignaturas:W==="profile"&&ee!==Gt.PROFESORADO?[]:X.asignaturas}))},[]),S=N.useCallback((z,W)=>{l(ee=>{const X=ee[z]||[],O=X.includes(W)?X.filter(R=>R!==W):[...X,W];return{...ee,[z]:O}})},[]),j=N.useCallback(()=>{l({nombreCompleto:"",email:"",rut:"",profile:Gt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),L=N.useCallback(async z=>{z.preventDefault(),y(null);const{nombreCompleto:W,email:ee,profile:X,curso:O,password:R}=o;if(!W.trim()||!ee.trim()){y("Nombre Completo y Email son obligatorios.");return}if(X===Gt.ESTUDIANTE&&!O){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(R!=null&&R.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const G=Z0();try{if(c){const Y=Uu(G,"updateUser"),te={...o,password:(R==null?void 0:R.trim())||void 0,curso:X===Gt.ESTUDIANTE?QI(O||""):void 0};await Y(te)}else{const Y=Uu(G,"createUser"),te={...o,curso:X===Gt.ESTUDIANTE?QI(O||""):void 0};await Y(te)}await T(),j()}catch(Y){console.error("Error al guardar usuario:",Y),y(Y.message||"Error al guardar el usuario.")}},[o,c,T,j]),P=N.useCallback(z=>{u(z.email),l({nombreCompleto:z.nombreCompleto,email:z.email,rut:z.rut||"",profile:z.profile,password:"",curso:z.curso||"",cursos:z.cursos||[],asignaturas:z.asignaturas||[]}),setTimeout(()=>{const W=document.querySelector("form");W&&W.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),k=N.useCallback(async z=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${z}? Esta acción es irreversible.`))try{const W=Z0();await Uu(W,"deleteUser")({email:z}),await T()}catch(W){console.error("Error al eliminar usuario:",W),y(W.message||"No se pudo borrar el usuario.")}},[T]),U=async z=>{var R;const W=(R=z.target.files)==null?void 0:R[0];if(!W)return;_({message:"Procesando archivo...",isError:!1});const ee=Z0(),X=Uu(ee,"createUser"),O=new FileReader;O.onload=async G=>{var Y;try{const te=new Uint8Array((Y=G.target)==null?void 0:Y.result),ae=pb(te,{type:"array"}),oe=ae.Sheets[ae.SheetNames[0]],ie=Is.sheet_to_json(oe);if(ie.length===0){_({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ue=ie.map(_e=>{const Ae=_e.Nombre||_e.nombre,ve=_e.Correo||_e.correo||_e.Email||_e.email,Pe=_e.Curso||_e.curso,Ue=_e.RUT||_e.rut;return!Ae||!ve||!Pe?Promise.resolve({email:ve||"Sin email",error:"Datos incompletos"}):X({nombreCompleto:String(Ae).trim(),email:String(ve).trim(),profile:Gt.ESTUDIANTE,curso:QI(String(Pe).trim()),rut:Ue?String(Ue).trim():"",password:"recoleta"}).catch(de=>({email:ve,error:de.message}))}),Ce=await Promise.all(ue),ne=Ce.filter(_e=>!_e.error).length,Be=Ce.filter(_e=>_e.error);let je=`Carga completada. ${ne} estudiantes agregados.`;Be.length>0&&(je+=` ${Be.length} fallaron.`,console.error("Errores en carga masiva:",Be)),_({message:je,isError:Be.length>0}),await T()}catch(te){_({message:`Error: ${te.message}`,isError:!0})}},O.readAsArrayBuffer(W),z.target.value=""},Q=async z=>{var R;const W=(R=z.target.files)==null?void 0:R[0];if(!W)return;B({message:"Procesando archivo...",isError:!1});const ee=Z0(),X=Uu(ee,"createUser"),O=new FileReader;O.onload=async G=>{var Y;try{const te=new Uint8Array((Y=G.target)==null?void 0:Y.result),ae=pb(te,{type:"array"}),oe=ae.Sheets[ae.SheetNames[0]],ie=Is.sheet_to_json(oe);if(ie.length===0){B({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ue=ie.map(_e=>{const Ae=_e.Nombre||_e.nombre,ve=_e.Correo||_e.correo||_e.Email||_e.email,Pe=_e.Perfil||_e.perfil||_e.Profile||_e.profile,Ue=_e.RUT||_e.rut;return!Ae||!ve||!Pe?Promise.resolve({email:ve||"Sin email",error:"Datos incompletos"}):X({nombreCompleto:String(Ae).trim(),email:String(ve).trim(),profile:Pe,rut:Ue?String(Ue).trim():"",password:"recoleta"}).catch(de=>({email:ve,error:de.message}))}),Ce=await Promise.all(ue),ne=Ce.filter(_e=>!_e.error).length,Be=Ce.filter(_e=>_e.error);let je=`Carga completada. ${ne} usuarios agregados.`;Be.length>0&&(je+=` ${Be.length} fallaron.`,console.error("Errores en carga masiva:",Be)),B({message:je,isError:Be.length>0}),await T()}catch(te){B({message:`Error: ${te.message}`,isError:!0})}},O.readAsArrayBuffer(W),z.target.value=""},K="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=N.useMemo(()=>Array.from(new Set(e.filter(z=>z.profile===Gt.ESTUDIANTE&&z.curso).map(z=>z.curso))).sort(),[e]),q=N.useMemo(()=>e.filter(z=>(d===""||z.nombreCompleto.toLowerCase().includes(d.toLowerCase())||z.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||z.profile===h)&&(g===""||z.curso===g)),[e,d,h,g]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),i.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:U,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&i.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:Q,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),F&&i.jsx("p",{className:`text-sm mt-2 ${F.isError?"text-red-600":"text-green-600"}`,children:F.message})]})]})]}),i.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),i.jsxs("form",{onSubmit:L,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",name:"nombreCompleto",value:o.nombreCompleto,onChange:C,className:K,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:o.email,onChange:C,className:K,required:!0,readOnly:!!c})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),i.jsx("input",{type:"password",name:"password",value:o.password||"",onChange:C,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:K})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),i.jsx("input",{type:"text",name:"rut",value:o.rut||"",onChange:C,placeholder:"12.345.678-9",className:K})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),i.jsx("select",{name:"profile",value:o.profile,onChange:C,className:K,required:!0,children:iW.map(z=>i.jsx("option",{value:z,children:z},z))})]}),o.profile===Gt.ESTUDIANTE&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{name:"curso",value:o.curso,onChange:C,className:K,required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),js.map(z=>i.jsx("option",{value:z,children:z},z))]})]})]}),o.profile===Gt.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:js.map(z=>{var W;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[i.jsx("input",{type:"checkbox",checked:((W=o.cursos)==null?void 0:W.includes(z))||!1,onChange:()=>S("cursos",z),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:z})]},z)})})]}),o.profile===Gt.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ls.map(z=>{var W;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[i.jsx("input",{type:"checkbox",checked:((W=o.asignaturas)==null?void 0:W.includes(z))||!1,onChange:()=>S("asignaturas",z),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:z})]},z)})})]}),v&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:v}),i.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&i.jsx("button",{type:"button",onClick:j,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const z=Z0(),ee=await Uu(z,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",ee),y("✅ Custom claim agregado exitosamente")}catch(z){console.error("❌ Error al agregar custom claim:",z),y(`Error: ${z.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),i.jsx("button",{type:"button",onClick:async()=>{var z,W,ee,X,O;try{const{auth:R}=await Ti(async()=>{const{auth:te}=await Promise.resolve().then(()=>ute);return{auth:te}},void 0);console.log("🔍 Usuario actual:",(z=R.currentUser)==null?void 0:z.email);const G=await((W=R.currentUser)==null?void 0:W.getIdToken(!0));console.log("🔑 Token refreshed:",!!G);const Y=await((ee=R.currentUser)==null?void 0:ee.getIdTokenResult());console.log("📋 Claims completos:",Y==null?void 0:Y.claims),console.log("👤 Profile claim:",(X=Y==null?void 0:Y.claims)==null?void 0:X.profile),((O=Y==null?void 0:Y.claims)==null?void 0:O.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(Y==null?void 0:Y.claims)}`)}catch(R){console.error("❌ Error verificando token:",R),y(`Error verificando token: ${R.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsx("div",{children:i.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:z=>f(z.target.value),className:K})}),i.jsx("div",{children:i.jsxs("select",{value:h,onChange:z=>m(z.target.value),className:K,children:[i.jsx("option",{value:"",children:"Todos los perfiles"}),iW.map(z=>i.jsx("option",{value:z,children:z},z))]})}),i.jsx("div",{children:i.jsxs("select",{value:g,onChange:z=>x(z.target.value),className:K,children:[i.jsx("option",{value:"",children:"Todos los cursos"}),H.map(z=>i.jsx("option",{value:z,children:z},z))]})})]}),r?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:q.map(z=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:z.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:z.email}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z.profile===Gt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":z.profile===Gt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:z.profile})}),i.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[z.profile===Gt.ESTUDIANTE&&i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:z.curso||"Sin curso"}),z.profile===Gt.PROFESORADO&&i.jsxs("div",{className:"space-y-1",children:[z.cursos&&z.cursos.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[z.cursos.slice(0,3).map(W=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:W},W)),z.cursos.length>3&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",z.cursos.length-3]})]})]}),z.asignaturas&&z.asignaturas.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[z.asignaturas.slice(0,2).map(W=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:W},W)),z.asignaturas.length>2&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",z.asignaturas.length-2]})]})]}),(!z.cursos||z.cursos.length===0)&&(!z.asignaturas||z.asignaturas.length===0)&&i.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),z.profile!==Gt.ESTUDIANTE&&z.profile!==Gt.PROFESORADO&&i.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[i.jsx("button",{onClick:()=>P(z),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),i.jsx("button",{onClick:()=>k(z.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},z.email))})]}),q.length===0&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&i.jsx(oJe,{})]})},Tb="seguimiento_dual_records",cJe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},uJe=e=>{const t=Ht(mt(tt,Tb),ar("nombreEstudiante","asc"));return mr(t,n=>{const a=n.docs.map(s=>cJe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},PS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=cr.fromDate(new Date(t[n]+"T00:00:00")))}),t},dJe=async e=>{try{const t=PS(e);return(await mn(mt(tt,Tb),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},oW=async(e,t)=>{try{const r=nr(tt,Tb,e),n=PS(t);await yi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},fJe=async e=>{try{const t=nr(tt,Tb,e);await Ca(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},AJe=async e=>{const t=$g(tt),r=mt(tt,Tb);let n=0,a=0;for(const s of e){const o=Ht(r,xr("rutEstudiante","==",s.rutEstudiante)),l=await qr(o);if(l.empty){const c=nr(r);t.set(c,PS(s)),a++}else{const c=l.docs[0].id,u=nr(tt,Tb,c);t.set(u,PS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},hJe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},mJe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},pJe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},gJe=({record:e,onSave:t,onClose:r})=>{const[n,a]=N.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",o=c=>{const{name:u,value:d,type:f,checked:h}=c.target;a(m=>({...m,[u]:f==="checkbox"?h:d}))},l=()=>{t(n)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),i.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),i.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),i.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),i.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),i.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),i.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),i.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:o,className:s+" mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),i.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:o,className:s+" mt-1"})]})]})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),i.jsx("button",{type:"button",onClick:l,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},xJe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!0),a=N.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:rg[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:fB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,o]=N.useState(a),[l,c]=N.useState(null),[u,d]=N.useState(""),[f,h]=N.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(!1),[_,F]=N.useState(null);N.useEffect(()=>{n(!0);const z=uJe(W=>{t(W),n(!1)});return()=>z()},[]);const B=N.useCallback(z=>{const{name:W,value:ee}=z.target;o(X=>({...X,[W]:ee}))},[]),T=N.useCallback(z=>{const{name:W,value:ee}=z.target;h(X=>({...X,[W]:ee}))},[]),C=N.useCallback(()=>{o(a),c(null),g(null)},[a]),S=async z=>{z.preventDefault(),g(null);const ee=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(X=>{var O;return!((O=s[X])!=null&&O.trim())});if(ee){g(`El campo '${ee}' es obligatorio.`);return}try{l?await oW(l,s):await dJe(s),C()}catch(X){console.error(X),g("No se pudo guardar el registro.")}},j=N.useCallback(z=>{window.scrollTo({top:0,behavior:"smooth"}),c(z.id),o(z)},[]),L=async z=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await fJe(z)}catch(W){console.error(W),g("No se pudo eliminar el registro.")}},P=z=>{F(z),w(!0)},k=()=>{F(null),w(!1)},U=async z=>{try{await oW(z.id,z),k()}catch(W){console.error(W),alert("No se pudieron guardar los cambios de supervisión.")}},Q=()=>{const z=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],W=Is.aoa_to_sheet([z]),ee=Is.book_new();Is.book_append_sheet(ee,W,"Plantilla"),i1(ee,"Plantilla_Seguimiento_Dual.xlsx")},K=z=>{var X;const W=(X=z.target.files)==null?void 0:X[0];if(!W)return;v({message:"Procesando archivo...",isError:!1});const ee=new FileReader;ee.onload=async O=>{var R;try{const G=new Uint8Array((R=O.target)==null?void 0:R.result),Y=pb(G,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),te=Y.SheetNames[0],ae=Y.Sheets[te],oe=Is.sheet_to_json(ae,{raw:!1,dateNF:"yyyy-mm-dd"});if(oe.length===0)throw new Error("El archivo está vacío.");const ie={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ue=Object.keys(oe[0]).map(je=>je.trim().toLowerCase()),ne=["nombre","rut","curso 2025","empresa","estado"].find(je=>!ue.includes(je));if(ne)throw new Error(`Falta la columna requerida: '${ne}'`);const Be=oe.map((je,_e)=>{try{const Ae={};for(const ve in je){const Pe=ie[ve.trim().toLowerCase()];if(Pe){let Ue=je[ve];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Pe)?(Ue=mJe(Ue),Ue&&(Ae[Pe]=Ue)):Pe.includes("realizada")?Ae[Pe]=pJe(Ue):Ue!=null&&Ue!==""&&(Ae[Pe]=String(Ue).trim())}}return!Ae.nombreEstudiante||!Ae.rutEstudiante?(console.warn(`Fila ${_e+2}: Faltan campos requeridos`),null):Ae}catch(Ae){return console.error(`Error procesando fila ${_e+2}:`,Ae),null}}).filter(je=>je!==null);if(console.log("Registros procesados:",Be),Be.length>0){const{updated:je,created:_e}=await AJe(Be);v({message:`Carga exitosa. ${_e} registros creados, ${je} actualizados.`,isError:!1})}else v({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(G){console.error("Error completo:",G),v({message:`Error al procesar el archivo: ${G.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},ee.readAsArrayBuffer(W)},H="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",q=N.useMemo(()=>e.filter(z=>(u===""||z.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||z.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||z.rutEstudiante.includes(u))&&(f.curso===""||z.curso===f.curso)&&(f.empresa===""||z.nombreEmpresa===f.empresa)&&(f.estado===""||z.estado===f.estado)&&(f.comuna===""||z.comuna===f.comuna)&&(f.profesor===""||z.profesorTutorEmpresa===f.profesor)).sort((z,W)=>z.nombreEstudiante.localeCompare(W.nombreEstudiante)),[e,u,f]);return N.useMemo(()=>{const z=new Set,W=new Set;return e.forEach(ee=>{ee.nombreEmpresa&&z.add(ee.nombreEmpresa),ee.comuna&&W.add(ee.comuna)}),{empresas:Array.from(z).sort(),comunas:Array.from(W).sort()}},[e]),r?i.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:l?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),i.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:B,className:H,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),i.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:B,className:H,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{name:"curso",value:s.curso,onChange:B,className:H,required:!0,children:rg.map(z=>i.jsx("option",{value:z,children:z},z))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),i.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:B,className:H,children:[i.jsx("option",{value:"",children:"Seleccione un profesor"}),gF.map(z=>i.jsx("option",{value:z,children:z},z))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),i.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:B,className:H,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),i.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:B,className:H})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),i.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:B,className:H})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),i.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:B,className:H})]}),i.jsxs("div",{className:"lg:col-span-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),i.jsx("select",{name:"estado",value:s.estado,onChange:B,className:H,children:fB.map(z=>i.jsx("option",{value:z,children:z},z))})]})]}),s.estado==="Desvinculado"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),i.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:B,className:`${H} border-red-300`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),i.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:B,className:`${H} border-red-300`})]})]}),m&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),i.jsxs("div",{className:"flex justify-end items-center gap-4",children:[l&&i.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:l?"Actualizar":"Agregar"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[i.jsx("button",{onClick:Q,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),i.jsx("input",{type:"file",onChange:K,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&i.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[i.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:z=>d(z.target.value),className:`${H} md:col-span-2 lg:col-span-1`}),i.jsxs("select",{name:"curso",value:f.curso,onChange:T,className:H,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),rg.map(z=>i.jsx("option",{children:z},z))]}),i.jsxs("select",{name:"estado",value:f.estado,onChange:T,className:H,children:[i.jsx("option",{value:"",children:"Todos los Estados"}),fB.map(z=>i.jsx("option",{children:z},z))]}),i.jsxs("select",{name:"profesor",value:f.profesor,onChange:T,className:H,children:[i.jsx("option",{value:"",children:"Todos los Profesores"}),gF.map(z=>i.jsx("option",{children:z},z))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:q.map(z=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:z.nombreEstudiante}),i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:z.curso})]}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.nombreEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.profesorTutorEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${hJe[z.estado]}`,children:z.estado})}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[i.jsx("button",{onClick:()=>P(z),className:"text-blue-600 hover:underline",children:"Supervisión"}),i.jsx("button",{onClick:()=>j(z),className:"text-yellow-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>L(z.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},z.id))})]})})]}),y&&_&&i.jsx(gJe,{record:_,onClose:k,onSave:U})]})},Rce="actividades_remotas",Lce="respuestas_actividades",Mce="pruebas_estandarizadas",vJe="usuarios",Uce=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},wM=e=>{const t=Uce(e);return t?t.toISOString():void 0},RS=e=>{const t=Uce(e);return t?t.toISOString().split("T")[0]:void 0},Qce=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:cr.fromDate(t)},Hce=e=>cr.fromDate(new Date(e||new Date().toISOString())),bJe=e=>!!e&&/^data:/.test(e),P2=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(P2);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=P2(n))}),t},yJe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const l=typeof Buffer<"u"?Buffer:null;if(l)a=l.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,o=new Uint8Array(s);for(let l=0;l<s;l++)o[l]=a.charCodeAt(l);return{bytes:o,contentType:r}},wJe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:wM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:RS(t.plazoEntrega)||RS(new Date)}},EJe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:wM(t.fechaCompletado)||new Date().toISOString()}},NJe=e=>{const t=e.data()||{};return{id:e.id,...t}},CJe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:wM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:RS(t.plazoEntrega)||RS(new Date)}},_Je=e=>{const t=Ht(mt(tt,Rce),ar("fechaCreacion","desc"));return mr(t,r=>e(r.docs.map(wJe)),r=>{console.error("subscribeToActividades error:",r),e([])})},SJe=(e,t)=>{const r=mt(tt,Lce),n=Ht(r,ar("fechaCompletado","desc"));return mr(n,a=>e(a.docs.map(EJe)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},kJe=e=>{const t=Ht(mt(tt,vJe),ar("nombreCompleto","asc"));return mr(t,r=>e(r.docs.map(NJe)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},jJe=e=>{const t=Ht(mt(tt,Mce),ar("fechaCreacion","desc"));return mr(t,r=>e(r.docs.map(CJe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},BJe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=P2({...a,fechaCreacion:Hce(r),plazoEntrega:Qce(n)});return(await mn(mt(tt,Rce),s)).id},TJe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=P2({...a,fechaCreacion:Hce(r),plazoEntrega:Qce(n)});return(await mn(mt(tt,Mce),s)).id},IJe=async(e,t)=>{const r=P2(t);await Tl(nr(tt,Lce,e),r)},FJe=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},OJe=async(e,t,r)=>{const{bytes:n,contentType:a}=yJe(e),s=Date.now(),o=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${s}/${o}`,u=sE(Ete,c);await tR(u,n,{contentType:a});const d=await qk(u);return{nombre:t,url:d}},DJe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(o,l)=>{if(bJe(o==null?void 0:o.url)){const c=(o==null?void 0:o.nombre)||`archivo_${l}.bin`;return OJe(o.url,c,t)}return{nombre:(o==null?void 0:o.nombre)||`archivo_${l}`,url:o==null?void 0:o.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return BJe(a)},_y=e=>e?new Date(e).toLocaleDateString("es-CL"):"",PJe=e=>e?new Date(e).toLocaleString("es-CL"):"",RJe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),Vce=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},di=(e,t)=>{if(t&&Vce(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>di(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Kl=(e,t,...r)=>{if(Vce(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=di(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Oa=({content:e,context:t="unknown"})=>{try{const r=di(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}},HI={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},VI=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],LJe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(null),[d,f]=N.useState(null),[h,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(!1),[w,_]=N.useState(!1),[F,B]=N.useState(!1),[T,C]=N.useState(!0),[S,j]=N.useState(null),[L,P]=N.useState(""),[k,U]=N.useState(null),[Q,K]=N.useState(null),[H,q]=N.useState([]),[z,W]=N.useState("carpetas"),[ee,X]=N.useState(null),[O,R]=N.useState(null),[G,Y]=N.useState([]),[te,ae]=N.useState(""),oe={asignatura:ls[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[ie,ue]=N.useState(oe),Ce={asignatura:ls[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ne,Be]=N.useState(Ce);N.useEffect(()=>{C(!0);const rt=_Je(t),gt=jJe(n),Ze=SJe(s),bt=kJe(Nt=>{l(Nt),C(!1)});return()=>{rt(),gt(),Ze(),bt()}},[]);const je=rt=>{ue(gt=>({...gt,[rt.target.name]:rt.target.value}))},_e=rt=>{Be(gt=>({...gt,[rt.target.name]:rt.target.value}))},Ae=rt=>{ue(gt=>({...gt,recursos:{...gt.recursos,[rt.target.name]:rt.target.value}}))},ve=rt=>{rt.target.files&&q(Array.from(rt.target.files))},Pe=rt=>{ue(gt=>{const Ze=gt.tipos.includes(rt)?gt.tipos.filter(Nt=>Nt!==rt):[...gt.tipos,rt],bt={...gt.cantidadPreguntas};return Ze.includes(rt)?bt[rt]||(bt[rt]=HI[rt][0]):delete bt[rt],{...gt,tipos:Ze,cantidadPreguntas:bt}})},Ue=(rt,gt)=>{ue(Ze=>({...Ze,cantidadPreguntas:{...Ze.cantidadPreguntas,[rt]:gt}}))},de=(rt,gt=!1)=>{(gt?Be:ue)(bt=>{const Nt=bt.estudiantesDestino||[],yt=Nt.includes(rt)?Nt.filter(rr=>rr!==rt):[...Nt,rt];return{...bt,estudiantesDestino:yt}})},be=()=>{const{tipos:rt,contenido:gt,asignatura:Ze,nivel:bt,cantidadPreguntas:Nt}=ie;let yt=`Eres un experto diseñador de actividades pedagógicas con énfasis en la Taxonomía de Bloom y metodologías activas de aprendizaje. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${gt}"
Asignatura: ${Ze}
Nivel educativo: ${bt}

REQUISITOS PEDAGÓGICOS:
1. Asegura que las preguntas sean claras, concisas y libres de ambigüedades
2. Distribuye las preguntas según Taxonomía de Bloom: 20% conocimiento, 30% comprensión, 30% aplicación, 20% análisis/evaluación 
3. Evita preguntas demasiado simples o demasiado complejas para el nivel educativo
4. Incluye contextos reales y aplicaciones prácticas cuando sea posible
5. Para múltiple opción, todas las opciones deben ser plausibles (no incluir opciones obviamente incorrectas)
6. Las rúbricas de desarrollo deben incluir criterios específicos y niveles de desempeño claros
7. En comprensión lectora, genera textos originales y preguntas de distinta complejidad cognitiva

Genera los siguientes elementos:
- introduccion: breve y motivadora que contextualice el aprendizaje
- panelDidactico: Un objeto JSON con la siguiente estructura:
  {
    "titulo": "Título descriptivo del tema central",
    "subtitulos": [
      {
        "titulo": "Primer subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Segundo subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Tercer subtítulo (opcional)",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      }
    ],
    "conceptosClave": [
      "Concepto 1: breve definición",
      "Concepto 2: breve definición",
      "Concepto 3: breve definición"
    ]
  }
  En total debe tener entre 300-500 palabras con contenido educativo detallado que explique los conceptos clave del tema, incluya ejemplos claros y conocimiento esencial que el estudiante necesita para responder las actividades.
- actividades: objeto con propiedades por tipo:
`;return rt.forEach(rr=>{const br=Nt[rr]||HI[rr][0];switch(rr){case"Quiz":yt+=`- "Quiz": Array de ${br} objetos { 
  pregunta: clara y contextualizada,
  opciones: array de 4 alternativas plausibles con opciones de distinta dificultad,
  respuestaCorrecta: la opción correcta (no ambigua),
  puntaje: 1 para cada pregunta
}
`;break;case"Comprensión de Lectura":yt+=`- "Comprensión de Lectura": Objeto { 
  texto: texto original de 200-300 palabras adaptado al nivel con información relevante,
  preguntas: Array de ${br} objetos {
    pregunta: enfocadas en distintos niveles de comprensión (literal, inferencial y crítica),
    opciones: array de 4 alternativas plausibles sin pistas obvias,
    respuestaCorrecta: la opción correcta basada en el texto,
    puntaje: 1 para cada pregunta
  }
}
`;break;case"Términos Pareados":yt+=`- "Términos Pareados": Array de ${br} objetos {
  concepto: término clave del contenido, claro y específico,
  definicion: explicación precisa y única que no sea ambigua
}
`;break;case"Desarrollo":yt+=`- "Desarrollo": Array de ${br} objetos {
  pregunta: pregunta que fomente el pensamiento crítico y la aplicación de conocimientos,
  rubrica: criterios de evaluación detallados con niveles de desempeño específicos (sobresaliente, adecuado, en desarrollo, inicial)
}
`;break}}),yt+=`
EJEMPLOS DE ALTA CALIDAD POR TIPO:
`,rt.includes("Quiz")&&(yt+=`
Quiz de ejemplo: {
  "pregunta": "En el contexto de la función fotosintética de las plantas, ¿qué ocurriría si una planta se expone a luz con longitudes de onda exclusivamente verdes?",
  "opciones": [
    "La planta aumentaría su tasa fotosintética debido a la mayor disponibilidad de luz",
    "La planta moriría inmediatamente por exceso de radiación",
    "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
    "No habría cambios en la fotosíntesis porque las plantas no dependen del espectro luminoso"
  ],
  "respuestaCorrecta": "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
  "puntaje": 1
}
`),rt.includes("Comprensión de Lectura")&&(yt+=`
Comprensión de Lectura de ejemplo: {
  "texto": "La revolución industrial transformó profundamente las estructuras sociales y económicas de Europa durante el siglo XIX. El paso de una economía agraria y artesanal a una dominada por la industria y la manufactura mecanizada significó cambios sin precedentes en las condiciones laborales. Las jornadas extenuantes de 14-16 horas, el trabajo infantil y la falta de seguridad caracterizaron los primeros años de industrialización. No obstante, este periodo también representó un aumento en la producción de bienes, mejoras en el transporte y comunicaciones, y eventualmente, el surgimiento de una clase media con mayor acceso a productos manufacturados. Estos cambios sentaron las bases para movimientos obreros que, con el tiempo, lograron mejoras significativas en los derechos laborales que persisten hasta la actualidad.",
  "preguntas": [
    {
      "pregunta": "Según el texto, ¿cuál fue una consecuencia negativa inmediata de la revolución industrial?",
      "opciones": [
        "El desplome de los sistemas de transporte",
        "Las extenuantes jornadas laborales de 14-16 horas",
        "La disminución en la producción de bienes manufacturados",
        "La eliminación de la clase media europea"
      ],
      "respuestaCorrecta": "Las extenuantes jornadas laborales de 14-16 horas",
      "puntaje": 1
    }
  ]
}
`),yt},De=()=>{const{contenido:rt,objetivosAprendizaje:gt,asignatura:Ze,nivel:bt}=ne;return`Eres un experto pedagogo especializado en evaluación educativa y diseño de pruebas estandarizadas tipo SIMCE.
Responde EXCLUSIVAMENTE con JSON válido según la estructura solicitada.

INFORMACIÓN CURRICULAR:
- Asignatura: ${Ze}
- Nivel educativo: ${bt}
- Contenido principal: ${rt}
- Objetivos de Aprendizaje: ${gt}

REQUISITOS PEDAGÓGICOS:
1. Genera preguntas equilibradas en dificultad: 25% básicas, 50% intermedias, 25% avanzadas
2. Usa contextos reales y significativos para los estudiantes
3. Distribuye las habilidades cognitivas de manera equilibrada según taxonomía SIMCE
4. Las preguntas deben evaluar aprendizajes significativos, no memorización de detalles irrelevantes
5. Los distractores (opciones incorrectas) deben ser plausibles y revelar concepciones erróneas comunes
6. Los textos deben ser originales, apropiados para el nivel, y con complejidad adecuada
7. Las preguntas deben evaluar distintos niveles de comprensión y aplicación

FORMATO REQUERIDO:
{
  "titulo": "Título descriptivo de la prueba",
  "instrucciones": "Instrucciones claras y detalladas para los estudiantes",
  "textos": [
    {
      "id": 1,
      "titulo": "Título representativo del texto",
      "contenido": "Texto original y apropiado de 250-350 palabras con complejidad adecuada al nivel",
      "tipo": "narrativo/informativo/argumentativo/poetico",
      "palabras": 300
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado claro que evalúe una habilidad específica",
      "opciones": ["Alternativa correcta", "Distractor plausible 1", "Distractor plausible 2", "Distractor plausible 3"],
      "respuestaCorrecta": "A",
      "habilidad": "Habilidad SIMCE específica que evalúa",
      "justificacion": "Explicación pedagógica de por qué es correcta y los errores conceptuales en los distractores",
      "textoId": 1
    }
  ]
}

REQUISITOS ESPECÍFICOS:
- ${Ze==="Lenguaje y Comunicación"||Ze==="Lengua y Literatura"?"3-4 textos de distintos tipos (narrativo, informativo, argumentativo y/o poético) con temáticas complementarias":"2-3 textos informativos con contenido relevante para el objetivo de aprendizaje"}
- Exactamente 30 preguntas numeradas del 1 al 30
- 4 opciones por pregunta (A-D) con una única respuesta correcta
- Habilidades a evaluar según SIMCE: ${VI.join(", ")}
- Para preguntas basadas en textos: incluir el "textoId" correspondiente
- Sin comentarios, explicaciones ni marcas fuera de la estructura JSON

IMPORTANTE: Generar un instrumento de evaluación de ALTA CALIDAD que pueda ser usado directamente en un contexto escolar real.`};function Ve(rt,gt){if(rt==="Desarrollo"&&Array.isArray(gt))return gt.map((Ze,bt)=>{if(typeof Ze=="string"){const Nt=Ze.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Nt?{pregunta:Kl(Nt[1],`desarrollo-pregunta-${bt}`),rubrica:Kl(Nt[2],`desarrollo-rubrica-${bt}`)}:{pregunta:Kl(Ze,`desarrollo-pregunta-simple-${bt}`),rubrica:""}}if(Ze&&typeof Ze=="object"){const Nt=Kl(Ze,`desarrollo-obj-pregunta-${bt}`,"pregunta","Pregunta","texto");let yt="";if(Ze.rubrica||Ze.Rubrica||Ze.rúbrica||Ze.Rúbrica){const rr=Ze.rubrica||Ze.Rubrica||Ze.rúbrica||Ze.Rúbrica;yt=di(rr,`desarrollo-rubrica-${bt}`)}return{pregunta:Nt,rubrica:yt}}return{pregunta:di(Ze,`desarrollo-fallback-${bt}`),rubrica:""}});if(rt==="Términos Pareados"&&Array.isArray(gt))return gt.map((Ze,bt)=>{if(typeof Ze=="string"){const Nt=Ze.match(/^(.+?)[\s:-–]+(.+)$/);return Nt?{id:bt,concepto:Kl(Nt[1],`pareados-concepto-${bt}`),definicion:Kl(Nt[2],`pareados-definicion-${bt}`)}:{id:bt,concepto:Kl(Ze,`pareados-concepto-simple-${bt}`),definicion:""}}return Ze&&typeof Ze=="object"?{id:bt,concepto:Kl(Ze,`pareados-obj-concepto-${bt}`,"concepto","termino"),definicion:Kl(Ze,`pareados-obj-definicion-${bt}`,"definicion","significado")}:{id:bt,concepto:di(Ze,`pareados-fallback-${bt}`),definicion:""}});if(rt==="Comprensión de Lectura"){if(gt&&typeof gt=="object"&&!Array.isArray(gt)&&Array.isArray(gt.preguntas))return{texto:Kl(gt,"comprension-texto","texto"),preguntas:gt.preguntas.map((Ze,bt)=>({pregunta:Kl(Ze,`comprension-pregunta-${bt}`,"pregunta"),opciones:Array.isArray(Ze.opciones)?Ze.opciones.map(Nt=>di(Nt,`comprension-opcion-${bt}`)):[],respuestaCorrecta:di(Ze.respuestaCorrecta,`comprension-respuesta-${bt}`),puntaje:typeof Ze.puntaje=="number"?Ze.puntaje:1}))};if(Array.isArray(gt)){const Ze=gt.map((Nt,yt)=>Kl(Nt,`comprension-bloque-${yt}`,"texto")).join(`

---

`),bt=gt.flatMap(Nt=>Array.isArray(Nt.preguntas)?Nt.preguntas:[]);return{texto:Ze,preguntas:bt.map((Nt,yt)=>({pregunta:Kl(Nt,`comprension-combined-pregunta-${yt}`,"pregunta"),opciones:Array.isArray(Nt.opciones)?Nt.opciones.map(rr=>di(rr,`comprension-combined-opcion-${yt}`)):[],respuestaCorrecta:di(Nt.respuestaCorrecta,`comprension-combined-respuesta-${yt}`),puntaje:typeof Nt.puntaje=="number"?Nt.puntaje:1}))}}}return rt==="Quiz"&&Array.isArray(gt)?gt.map((Ze,bt)=>({pregunta:Kl(Ze,`quiz-pregunta-${bt}`,"pregunta"),opciones:Array.isArray(Ze.opciones)?Ze.opciones.map(Nt=>di(Nt,`quiz-opcion-${bt}`)):[],respuestaCorrecta:di(Ze.respuestaCorrecta,`quiz-respuesta-${bt}`),puntaje:typeof Ze.puntaje=="number"?Ze.puntaje:1})):gt}const We=async rt=>{var gt;if(rt.preventDefault(),!ie.contenido.trim()||ie.tipos.length===0){j("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),j(null);try{const Ze=await Promise.all(H.map(async Yr=>({nombre:Yr.name,url:await RJe(Yr)}))),bt=be(),Nt=await ll.currentUser.getIdToken(),yt=await fetch("/api/generarActividadRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Nt}`},body:JSON.stringify({prompt:bt,formData:ie,selectedFiles:H})});if(!yt.ok)throw new Error("Error al generar la actividad con IA");const rr=await yt.json(),br={};for(const Yr of ie.tipos){const pe=(gt=rr.actividades)==null?void 0:gt[Yr];br[Yr]=Ve(Yr,pe)}let ur="";rr.panelDidactico&&(ur=typeof rr.panelDidactico=="string"?rr.panelDidactico:JSON.stringify(rr.panelDidactico));const Or={id:"",fechaCreacion:new Date().toISOString(),...ie,recursos:{...ie.recursos,archivos:Ze},introduccion:di(rr.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",panelDidactico:ur,generatedContent:br};U(Or)}catch(Ze){j(`Error al generar la actividad: ${(Ze==null?void 0:Ze.message)||Ze}`)}finally{y(!1)}},Je=async rt=>{if(rt.preventDefault(),!ne.contenido.trim()||!ne.objetivosAprendizaje.trim()){j("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),j(null);try{const gt=De(),Ze=await ll.currentUser.getIdToken(),bt=await fetch("/api/generarPruebaRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ze}`},body:JSON.stringify({prompt:gt,pruebaFormData:ne})});if(!bt.ok)throw new Error("Error al generar la prueba con IA");const Nt=await bt.json();if(!Nt.preguntas||!Array.isArray(Nt.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const yt=(Nt.textos||[]).map((ur,Or)=>({id:ur.id||Or+1,titulo:di(ur.titulo,`texto-titulo-${Or}`)||`Texto ${Or+1}`,contenido:di(ur.contenido,`texto-contenido-${Or}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(ur.tipo)?ur.tipo:"informativo",palabras:ur.palabras||(ur.contenido?String(ur.contenido).split(" ").length:0)})),rr=Nt.preguntas.slice(0,30).map((ur,Or)=>({numero:ur.numero||Or+1,pregunta:di(ur.pregunta,`pregunta-${Or}`)||`Pregunta ${Or+1}`,opciones:Array.isArray(ur.opciones)&&ur.opciones.length>=4?ur.opciones.slice(0,4).map((Yr,pe)=>di(Yr,`pregunta-opcion-${Or}-${pe}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(ur.respuestaCorrecta)?ur.respuestaCorrecta:"A",habilidad:VI.includes(ur.habilidad)?ur.habilidad:VI[0],justificacion:di(ur.justificacion,`justificacion-${Or}`)||"Justificación no disponible",...ur.textoId&&typeof ur.textoId=="number"?{textoId:ur.textoId}:{}})),br={id:"",fechaCreacion:new Date().toISOString(),...ne,titulo:di(Nt.titulo,"prueba-titulo")||`Prueba ${ne.asignatura}`,instrucciones:di(Nt.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:yt,preguntas:rr};K(br)}catch(gt){j(`Error al generar la prueba: ${(gt==null?void 0:gt.message)||gt}`)}finally{y(!1)}},At=async()=>{if(k)try{_(!0),await DJe(k),ue(oe),q([]),m(!1),U(null)}catch(rt){console.error("Error al guardar la actividad con archivos:",rt),j("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{_(!1)}},vt=async()=>{if(Q)try{_(!0);const rt={...Q,cursosDestino:Q.cursosDestino||[],estudiantesDestino:Q.estudiantesDestino||[],textos:Q.textos||[],preguntas:Q.preguntas.map(gt=>({...gt,textoId:gt.textoId||null}))};await TJe(rt),Be(Ce),x(!1),K(null)}catch(rt){console.error("Error al guardar la prueba:",rt),j("No se pudo guardar la prueba.")}finally{_(!1)}},wt=N.useMemo(()=>{var Ze,bt,Nt;const rt=c||d;if(!rt||!o.length)return[];const gt=new Map;return!((Ze=rt.cursosDestino)!=null&&Ze.length)&&!((bt=rt.estudiantesDestino)!=null&&bt.length)?[]:((Nt=rt.estudiantesDestino)!=null&&Nt.length&&o.filter(yt=>yt.profile===Gt.ESTUDIANTE&&rt.estudiantesDestino.includes(yt.nombreCompleto)).forEach(yt=>gt.set(yt.id,yt)),Array.from(gt.values()).sort((yt,rr)=>yt.nombreCompleto.localeCompare(rr.nombreCompleto)))},[c,d,o]),Tt=N.useMemo(()=>{const rt=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(gt=>gt.actividadId===rt)},[a,c,d]),Lt=N.useMemo(()=>o.filter(rt=>rt.profile===Gt.ESTUDIANTE).sort((rt,gt)=>rt.nombreCompleto.localeCompare(gt.nombreCompleto)),[o]),Et=N.useMemo(()=>L.trim()?Lt.filter(rt=>rt.nombreCompleto.toLowerCase().includes(L.toLowerCase())):Lt,[Lt,L]),_r=N.useMemo(()=>{const rt=new Set;return e.forEach(gt=>{(gt.estudiantesDestino||[]).forEach(Ze=>{const bt=o.find(Nt=>Nt.profile===Gt.ESTUDIANTE&&Nt.nombreCompleto===Ze);bt&&rt.add(bt.id)})}),r.forEach(gt=>{(gt.estudiantesDestino||[]).forEach(Ze=>{const bt=o.find(Nt=>Nt.profile===Gt.ESTUDIANTE&&Nt.nombreCompleto===Ze);bt&&rt.add(bt.id)})}),a.forEach(gt=>rt.add(gt.estudianteId)),o.filter(gt=>gt.profile===Gt.ESTUDIANTE&&rt.has(gt.id)).sort((gt,Ze)=>gt.nombreCompleto.localeCompare(Ze.nombreCompleto))},[e,r,a,o]),qt=N.useMemo(()=>o.find(rt=>rt.id===ee)||null,[o,ee]),tn=N.useMemo(()=>{if(!qt)return{asignadas:[],respuestas:[]};const rt=[...e.filter(Ze=>(Ze.estudiantesDestino||[]).includes(qt.nombreCompleto)).map(Ze=>({tipo:"Actividad",item:Ze})),...r.filter(Ze=>(Ze.estudiantesDestino||[]).includes(qt.nombreCompleto)).map(Ze=>({tipo:"Prueba",item:Ze}))],gt=a.filter(Ze=>Ze.estudianteId===qt.id);return{asignadas:rt,respuestas:gt}},[qt,e,r,a]),Br=()=>i.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas"].map(rt=>i.jsxs("button",{onClick:()=>{W(rt),u(null),f(null),X(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${z===rt?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[rt==="carpetas"&&i.jsx(NH,{size:18}),rt==="actividades"&&i.jsx(Vd,{size:18}),rt==="pruebas"&&i.jsx(pte,{size:18}),rt==="carpetas"?"Carpetas de Estudiantes":rt==="actividades"?"Actividades Remotas":"Pruebas Estandarizadas"]},rt)),i.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(e1,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:rt=>P(rt.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),z==="actividades"&&!k&&!c&&i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(ZN,{size:18})," Nueva"]}),z==="pruebas"&&!Q&&!d&&i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(ZN,{size:18})," Nueva"]})]})]}),Kr=()=>{const rt=L?Et:_r;return rt.length?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:rt.map(gt=>{const Ze=a.filter(yt=>yt.estudianteId===gt.id),bt=Ze.length,Nt=e.filter(yt=>(yt.estudiantesDestino||[]).includes(gt.nombreCompleto)).length+r.filter(yt=>(yt.estudiantesDestino||[]).includes(gt.nombreCompleto)).length;return i.jsxs("button",{onClick:()=>X(gt.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[i.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:i.jsx(NH,{})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"font-semibold text-slate-800 truncate",children:gt.nombreCompleto}),i.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(a2,{size:14})," ",gt.curso||"—"]})]})]}),i.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:Nt}),i.jsx("p",{className:"text-xs",children:"Asignadas"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:bt}),i.jsx("p",{className:"text-xs",children:"Entregas"})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Wf,{size:16,className:"opacity-70"}),i.jsx("span",{className:"text-xs mt-1",children:Ze.length?_y(Ze.sort((yt,rr)=>(yt.fechaCompletado||"").localeCompare(rr.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},gt.id)})}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},Fn=()=>{if(!qt)return null;const{asignadas:rt,respuestas:gt}=tn;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>X(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[i.jsx(JN,{size:18})," Volver"]}),i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",qt.nombreCompleto]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:rt.map(({tipo:Ze,item:bt})=>{var br;const Nt=gt.find(ur=>ur.actividadId===bt.id),yt=Ze==="Actividad"?`${bt.asignatura} — ${(br=bt.tipos)==null?void 0:br.join(", ")}`:bt.titulo,rr=bt.plazoEntrega?_y(bt.plazoEntrega):"—";return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm",children:Ze}),i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:i.jsx(Oa,{content:yt,context:"hist-titulo"})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:rr}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Nt?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[i.jsx(ts,{size:14})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[i.jsx(Wf,{size:14})," Pendiente"]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Nt?`${Nt.puntaje}/${Nt.puntajeMaximo}`:"—"}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Nt?Nt.nota:"—"})]},bt.id)})})]})})]})},Lr=()=>{var rt,gt,Ze;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Oa,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):i.jsx(Oa,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",_y((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),i.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(JN,{size:18})," Volver al listado"]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((rt=c==null?void 0:c.tipos)==null?void 0:rt.includes("Desarrollo"))&&i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:wt.map(bt=>{var yt;const Nt=Tt.find(rr=>rr.estudianteId===bt.id);return i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:bt.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Nt?i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Nt?`${Nt.puntaje}/${Nt.puntajeMaximo}`:"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Nt?i.jsx("span",{className:parseFloat(Nt.nota)>=4?"text-green-600":"text-red-600",children:Nt.nota}):"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Nt?PJe(Nt.fechaCompletado):"-"}),((yt=c==null?void 0:c.tipos)==null?void 0:yt.includes("Desarrollo"))&&i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Nt?i.jsx("button",{onClick:()=>{var br,ur,Or;R(Nt);const rr=Array.from({length:((ur=(br=c.generatedContent)==null?void 0:br.Desarrollo)==null?void 0:ur.length)||0},(Yr,pe)=>({index:pe,puntaje:0,observacion:""}));Y(rr),ae(((Or=Nt==null?void 0:Nt.revisionDocente)==null?void 0:Or.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):i.jsx("span",{className:"text-slate-400",children:"-"})})]},bt.id)})})]})})]}),O&&((gt=c==null?void 0:c.tipos)==null?void 0:gt.includes("Desarrollo"))&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(O==null?void 0:O.estudianteNombre)||""]}),i.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Ze=c.generatedContent)==null?void 0:Ze.Desarrollo)||[]).map((bt,Nt)=>{var yt,rr;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("p",{className:"font-semibold",children:[Nt+1,". ",i.jsx(Oa,{content:bt.pregunta,context:`revision-pregunta-${Nt}`})]}),bt.rubrica&&i.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[i.jsx("strong",{children:"Rúbrica:"})," ",i.jsx(Oa,{content:bt.rubrica,context:`revision-rubrica-${Nt}`})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),i.jsx("input",{type:"number",min:0,step:.5,value:((yt=G[Nt])==null?void 0:yt.puntaje)??0,onChange:br=>{const ur=Number(br.target.value)||0;Y(Or=>{const Yr=[...Or];return Yr[Nt]={...Yr[Nt]||{index:Nt,puntaje:0},puntaje:ur},Yr})},className:"w-24 border-slate-300 rounded-md"}),i.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((rr=G[Nt])==null?void 0:rr.observacion)||"",onChange:br=>{const ur=br.target.value;Y(Or=>{const Yr=[...Or];return Yr[Nt]={...Yr[Nt]||{index:Nt,puntaje:0},observacion:ur},Yr})},className:"flex-1 border-slate-300 rounded-md"})]})]},Nt)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),i.jsx("textarea",{rows:3,value:te,onChange:bt=>ae(bt.target.value),className:"w-full border-slate-300 rounded-md"})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{R(null),Y([]),ae("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:async()=>{if(O)try{B(!0);const bt=Number(O.puntaje)||0,Nt=Number(O.puntajeMaximo)||0,yt=(G||[]).reduce((ur,Or)=>ur+(Number(Or.puntaje)||0),0),rr=bt+yt,br=FJe(rr,Nt);await IJe(O.id,{puntaje:rr,puntajeMaximo:Nt,nota:br,revisionDocente:{completada:!0,observacionesGenerales:te||"",detalle:G||[],puntajeDocente:yt}}),R(null),Y([]),ae("")}catch(bt){console.error("Error guardando revisión:",bt),j("No se pudo guardar la revisión del docente.")}finally{B(!1)}},disabled:F,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:F?"Guardando...":"Guardar Revisión"})]})]})})]})},ps=()=>{var rt,gt;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),i.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(JN,{size:18})," Volver"]})]}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),i.jsxs("form",{onSubmit:We,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:ie.asignatura,onChange:je,className:"w-full border-slate-300 rounded-md shadow-sm",children:ls.map(Ze=>i.jsx("option",{value:Ze,children:Ze},Ze))})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),i.jsx("textarea",{name:"instrucciones",value:(rt=ie.recursos)==null?void 0:rt.instrucciones,onChange:Ae,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),i.jsx("textarea",{name:"enlaces",value:(gt=ie.recursos)==null?void 0:gt.enlaces,onChange:Ae,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),i.jsx("input",{type:"file",multiple:!0,onChange:ve,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Ze=>P(Ze.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?Et:Lt).map(Ze=>{var bt;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(bt=ie.estudiantesDestino)==null?void 0:bt.includes(Ze.nombreCompleto),onChange:()=>de(Ze.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Ze.nombreCompleto,children:Ze.nombreCompleto})]},Ze.id)})})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{name:"contenido",value:ie.contenido,onChange:je,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:ie.plazoEntrega,onChange:je,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),i.jsx("div",{className:"space-y-3",children:Ate.map(Ze=>i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:ie.tipos.includes(Ze),onChange:()=>Pe(Ze),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Ze})]}),ie.tipos.includes(Ze)&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),HI[Ze].map(bt=>i.jsx("button",{type:"button",onClick:()=>Ue(Ze,bt),className:`px-3 py-1 rounded-full font-semibold text-xs ${ie.cantidadPreguntas[Ze]===bt?"bg-amber-500 text-white":"bg-slate-200"}`,children:bt},bt))]})]},Ze))})]})]}),S&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:S}),i.jsx("div",{className:"pt-2 text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?i.jsx(Wf,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},pn=()=>{var rt;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),i.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Oa,{content:k==null?void 0:k.introduccion,context:"preview-introduccion"})})]}),(k==null?void 0:k.panelDidactico)&&i.jsxs("div",{className:"p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Panel Didáctico - Material de Apoyo"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof k.panelDidactico=="string"&&k.panelDidactico.trim().startsWith("{")){const gt=JSON.parse(k.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[gt.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:gt.titulo}),Array.isArray(gt.subtitulos)&&gt.subtitulos.map((Ze,bt)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:Ze.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:Ze.texto})]},bt)),Array.isArray(gt.conceptosClave)&&gt.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:gt.conceptosClave.map((Ze,bt)=>i.jsx("li",{className:"text-emerald-800",children:Ze},bt))})]}),!gt.subtitulos&&!gt.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(gt,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:k.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:k.panelDidactico})}})()})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((rt=k.recursos.archivos)==null?void 0:rt.length))&&i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),i.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Oa,{content:k.recursos.instrucciones,context:"preview-instrucciones"})}),k.recursos.enlaces&&i.jsx("div",{children:k.recursos.enlaces.split(`
`).map((gt,Ze)=>gt.trim()&&i.jsx("a",{href:gt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:gt},Ze))}),k.recursos.archivos&&k.recursos.archivos.length>0&&i.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(gt=>i.jsx("li",{className:"text-slate-700",children:gt.nombre},gt.nombre))})]})]}),k==null?void 0:k.tipos.map(gt=>{const Ze=k.generatedContent[gt];return Ze?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:gt}),i.jsxs("div",{className:"space-y-4 text-sm",children:[gt==="Quiz"&&Array.isArray(Ze)&&Ze.map((bt,Nt)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Nt+1,". ",i.jsx(Oa,{content:bt.pregunta,context:`preview-quiz-pregunta-${Nt}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:bt.opciones.map((yt,rr)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+rr),"."]})," ",i.jsx(Oa,{content:yt,context:`preview-quiz-opcion-${Nt}-${rr}`})]},rr))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(Oa,{content:bt.respuestaCorrecta,context:`preview-quiz-respuesta-${Nt}`})]})]},Nt)),gt==="Comprensión de Lectura"&&Ze&&typeof Ze=="object"&&"preguntas"in Ze&&Array.isArray(Ze.preguntas)&&i.jsxs("div",{children:[i.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:i.jsx(Oa,{content:Ze.texto,context:"preview-lectura-texto"})}),Ze.preguntas.map((bt,Nt)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Nt+1,". ",i.jsx(Oa,{content:bt.pregunta,context:`preview-lectura-pregunta-${Nt}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:bt.opciones.map((yt,rr)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+rr),"."]})," ",i.jsx(Oa,{content:yt,context:`preview-lectura-opcion-${Nt}-${rr}`})]},rr))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(Oa,{content:bt.respuestaCorrecta,context:`preview-lectura-respuesta-${Nt}`})]})]},Nt))]}),gt==="Términos Pareados"&&Array.isArray(Ze)&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border border-slate-200",children:[i.jsx("thead",{className:"bg-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),i.jsx("tbody",{children:Ze.map((bt,Nt)=>i.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[i.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:i.jsx(Oa,{content:bt.concepto,context:`preview-pareado-concepto-${Nt}`})}),i.jsx("td",{className:"p-2 align-top text-slate-700",children:i.jsx(Oa,{content:bt.definicion,context:`preview-pareado-definicion-${Nt}`})})]},bt.id))})]})}),gt==="Desarrollo"&&Array.isArray(Ze)&&Ze.map((bt,Nt)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Nt+1,". ",i.jsx(Oa,{content:bt.pregunta,context:`preview-desarrollo-pregunta-${Nt}`})]}),i.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[i.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",i.jsx(Oa,{content:bt.rubrica,context:`preview-desarrollo-rubrica-${Nt}`})]})]},Nt))]})]},gt):null})]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>U(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:At,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},la=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify_between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),i.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(JN,{size:18})," Volver"]})]}),i.jsxs("form",{onSubmit:Je,className:"space-y-6 mt-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:ne.asignatura,onChange:_e,className:"w-full border-slate-300 rounded-md shadow-sm",children:ls.map(rt=>i.jsx("option",{value:rt,children:rt},rt))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),i.jsx("textarea",{name:"objetivosAprendizaje",value:ne.objetivosAprendizaje,onChange:_e,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),i.jsx("textarea",{name:"contenido",value:ne.contenido,onChange:_e,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:ne.plazoEntrega,onChange:_e,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:rt=>P(rt.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?Et:Lt).map(rt=>{var gt;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(gt=ne.estudiantesDestino)==null?void 0:gt.includes(rt.nombreCompleto),onChange:()=>de(rt.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:rt.nombreCompleto,children:rt.nombreCompleto})]},rt.id)})})]})]})]}),S&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:S}),i.jsx("div",{className:"text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?i.jsx(Wf,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),Ta=()=>{var rt,gt;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),i.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:i.jsx(Oa,{content:Q==null?void 0:Q.titulo,context:"preview-prueba-titulo"})}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Oa,{content:Q==null?void 0:Q.instrucciones,context:"preview-prueba-instrucciones"})})]}),(rt=Q==null?void 0:Q.textos)!=null&&rt.length?i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),i.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:Q.textos.map((Ze,bt)=>i.jsxs("li",{children:[i.jsxs("p",{className:"font-semibold",children:[i.jsx(Oa,{content:Ze.titulo,context:`preview-texto-titulo-${bt}`}),i.jsxs("span",{className:"text-xs text-slate-500",children:["(",Ze.tipo,")"]})]}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:i.jsx(Oa,{content:Ze.contenido,context:`preview-texto-contenido-${bt}`})})]},Ze.id))})]}):null,(gt=Q==null?void 0:Q.preguntas)!=null&&gt.length?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),Q.preguntas.slice(0,10).map((Ze,bt)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Ze.numero,". ",i.jsx(Oa,{content:Ze.pregunta,context:`preview-pregunta-texto-${bt}`})]}),i.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Ze.opciones.map((Nt,yt)=>i.jsx("li",{children:i.jsx(Oa,{content:Nt,context:`preview-pregunta-opcion-${bt}-${yt}`})},yt))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Ze.respuestaCorrecta]})]},Ze.numero))]}):null]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>K(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:vt,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},an=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(ZN,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:e.length>0?e.map(rt=>{var bt;const gt=[];(bt=rt.estudiantesDestino)!=null&&bt.length&&gt.push(`Estudiantes: ${rt.estudiantesDestino.length}`);const Ze=gt.length?gt.join(" | "):"Estudiantes seleccionados";return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(Oa,{content:rt.asignatura,context:`lista-asignatura-${rt.id}`})," — ",rt.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Ze," | Creado: ",_y(rt.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>u(rt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},rt.id)}):i.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),vr=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(ZN,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:r.length>0?r.map(rt=>i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800",children:i.jsx(Oa,{content:rt.titulo,context:`lista-prueba-titulo-${rt.id}`})}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",_y(rt.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>f(rt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},rt.id)):i.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return T?i.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):i.jsxs("div",{className:"animate-fade-in",children:[Br(),ee?Fn():Q?Ta():k?pn():c||d?Lr():z==="pruebas"?g?la():vr():z==="actividades"?h?ps():an():Kr()]})},MJe="actividades_remotas",EM="respuestas_actividades",zce=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},lW=e=>{const t=zce(e);return t?t.toISOString():void 0},UJe=e=>{const t=zce(e);return t?t.toISOString().split("T")[0]:void 0},NM=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:lW(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:UJe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:lW(t.fechaCompletado)||t.fechaCompletado}},Ib=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},QJe=e=>new Promise(t=>setTimeout(t,e)),HJe=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await QJe(s)}else throw a}throw new Error("Max retries exceeded")},VJe=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=Ht(mt(tt,MJe),ar("fechaCreacion","desc"));return mr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const l=s.docs.map(c=>NM(c)).filter(c=>{var u,d,f,h,m;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(m=c.estudiantesDestino)!=null&&m.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",l.length),t(l)}catch(o){console.error("❌ Error procesando datos de actividades:",o);const l=Ib(o,"procesamiento de actividades");r==null||r(l)}},error:s=>{const o=Ib(s,"suscripción a actividades");r==null||r(o)}})},zJe=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=Ht(mt(tt,EM),xr("estudianteId","==",e),ar("fechaCompletado","desc"));return mr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const o=s.docs.map(l=>{var u;const c=NM(l);return console.log(`📄 Respuesta ${l.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log("✅ Enviando respuestas procesadas al componente:",o.length),t(o)}catch(o){console.error("❌ Error procesando respuestas:",o);const l=Ib(o,"procesamiento de respuestas");r==null||r(l)}},error:s=>{var l;const o=Ib(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((l=s.message)!=null&&l.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),$Je(e,t,r);r==null||r(o)}})},$Je=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=Ht(mt(tt,EM),xr("estudianteId","==",e));return mr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const o=s.docs.map(l=>NM(l)).sort((l,c)=>new Date(c.fechaCompletado).getTime()-new Date(l.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",o.length),t(o)}catch(o){console.error("❌ Error procesando respuestas (alternativa):",o);const l=Ib(o,"procesamiento de respuestas alternativo");r==null||r(l)}},error:s=>{const o=Ib(s,"suscripción alternativa a respuestas");r==null||r(o)}})},GJe=async e=>HJe(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:cr.fromDate(new Date(e.fechaCompletado))},r=await mn(mt(tt,EM),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),qJe=.6,$O=(e,t,r=qJe,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},GO=({className:e="w-5 h-5"})=>i.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),KJe=async(e,t,r,n=3)=>{try{for(let a=1;a<=n;a++)try{const s=ll.currentUser;if(!s)throw new Error("Usuario no autenticado.");const o=await s.getIdToken(),l=await fetch("/api/generarFeedbackAutoaprendizaje",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({actividad:e,respuestas:t,estudianteId:r||s.uid})});if(!l.ok){const d=await l.json();throw new Error(d.error||`Error del servidor: ${l.status}`)}const u=(await l.json()).feedback;if(u)return u;throw new Error("La respuesta de la IA no tiene el formato esperado.")}catch(s){if(console.error(`Error en intento ${a} de generar feedback:`,s),a===n)return null}}catch(a){return console.error("Error al generar feedback con IA:",a),null}},WJe=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await GJe(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await KJe(t,r);if(s){const{updateDoc:o,doc:l}=await Ti(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>ub);return{updateDoc:u,doc:d}},void 0),{db:c}=await Ti(async()=>{const{db:u}=await Promise.resolve().then(()=>ute);return{db:u}},void 0);return await o(l(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},No=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Zl=(e,t)=>{if(t&&No(e,t),t==="panelDidactico"||t!=null&&t.includes("panelDidactico")){if(typeof e=="string")return e;if(e==null)return"";try{return typeof e=="object"?typeof e.texto=="string"?e.texto:typeof e.contenido=="string"?e.contenido:JSON.stringify(e):String(e)}catch{return"[Error al procesar el panel didáctico]"}}if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Zl(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Md=(e,t,...r)=>{if(No(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=Zl(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=Zl(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},ks=({content:e,context:t="unknown"})=>{try{const r=Zl(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}};function cW(e){if(console.log("🔍 Normalizando lectura:",e),No(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{No(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,o)=>Zl(s,`opcion-${n}-${o}`)).filter(Boolean):[];return{pregunta:Md(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:Zl(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Md(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Md(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(No(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function uW(e){return console.log("🔍 Normalizando pareados:",e),No(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(No(t,`pareado-${r}`),{izquierda:Md(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Md(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(No(t,`pareado-array-${r}`),{izquierda:Md(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Md(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function dW(e){return console.log("🔍 Normalizando desarrollo:",e),No(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(No(t,`desarrollo-pregunta-${r}`),{enunciado:Md(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(No(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Md(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const XJe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=N.useState({}),[s,o]=N.useState(!1),l=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{o(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=n[m];if(console.log(`🔍 Procesando tipo: ${m}`,g),No(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensión de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,w)=>(No(y,`quiz-question-${w}`),{pregunta:Md(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((_,F)=>Zl(_,`quiz-opcion-${w}-${F}`)):[],respuestaCorrecta:Zl(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:cW(g).preguntas).forEach((y,w)=>{const _=x==null?void 0:x[w],F=_===y.respuestaCorrecta,B=y.puntaje??1;F&&(u+=B),d+=B,f.items.push({pregunta:y.pregunta,respuestaUsuario:Zl(_,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:F,puntajeObtenido:F?B:0,tipo:m})}),m==="Términos Pareados"){const v=uW(g),y=x||{};v.forEach((w,_)=>{const F=y[_],B=F===w.derecha,T=w.puntaje??1;B&&(u+=T),d+=T,f.items.push({pregunta:`${w.izquierda} → ¿?`,respuestaUsuario:Zl(F,`pareado-feedback-${_}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:B,puntajeObtenido:B?T:0,tipo:m})})}if(m==="Desarrollo"){const v=dW(g),y=x||{};v.forEach((w,_)=>{const F=Zl(y[_],`desarrollo-feedback-${_}`).trim();f.items.push({pregunta:w.enunciado,respuestaUsuario:F||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:$O(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:i.jsx(ks,{content:e.asignatura,context:"actividad-asignatura"})}),i.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(ks,{content:e.introduccion,context:"actividad-introduccion"})}),e.panelDidactico&&i.jsxs("div",{className:"mt-5 p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Material de Estudio - Lee con Atención"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof e.panelDidactico=="string"&&e.panelDidactico.trim().startsWith("{")){const u=JSON.parse(e.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[u.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:u.titulo}),Array.isArray(u.subtitulos)&&u.subtitulos.map((d,f)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:d.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:d.texto})]},f)),Array.isArray(u.conceptosClave)&&u.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:u.conceptosClave.map((d,f)=>i.jsx("li",{className:"text-emerald-800",children:d},f))})]}),!u.subtitulos&&!u.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(u,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}})()})]}),e.recursos&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-200",children:[e.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(ks,{content:e.recursos.instrucciones,context:"actividad-instrucciones"})})]}),e.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.enlaces.split(`
`).filter(Boolean).map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),i.jsx("a",{href:u.startsWith("http")?u:`https://${u}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:u})]},d))})]}),e.recursos.archivos&&e.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.archivos.map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),i.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:u.nombre||`Archivo ${d+1}`})]},d))})]})]})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),No(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,m)=>(No(h,`render-quiz-question-${m}`),{pregunta:Md(h,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>Zl(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:Zl(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),i.jsx("div",{className:"space-y-6",children:f.map((h,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx(ks,{content:h.pregunta,context:`quiz-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx(ks,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Comprensión de Lectura":{const f=cW(d);return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),i.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:i.jsx(ks,{content:f.texto,context:"lectura-texto"})}),i.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx(ks,{content:h.pregunta,context:`lectura-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx(ks,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Términos Pareados":{const f=uW(d),h=n[u]||{},m=[...new Set(f.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>i.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[i.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",i.jsx(ks,{content:g.izquierda,context:`pareado-izq-${x}`})]}),i.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:v=>l(u,{...h,[x]:v.target.value}),children:[i.jsx("option",{value:"",children:"— Selecciona la pareja —"}),m.map((v,y)=>i.jsx("option",{value:v,children:Zl(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=dW(d),h=n[u]||{};return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),i.jsx("div",{className:"space-y-6",children:f.map((m,g)=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",i.jsx(ks,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),i.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:x=>l(u,{...h,[g]:x.target.value})})]},g))}),i.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),i.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:i.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?i.jsx(GO,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},YJe=({currentUser:e})=>{var k,U,Q;const[t,r]=N.useState(!0),[n,a]=N.useState("list"),[s,o]=N.useState("actividades"),[l,c]=N.useState(!1),[u,d]=N.useState([]),[f,h]=N.useState([]),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(null),[_,F]=N.useState("connecting");N.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let K=!1,H=!1,q=!1,z=!1;const W=()=>{(K||q)&&(H||z)&&(q&&z?(F("error"),w("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):F("connected"),r(!1),console.log("✅ Carga completada - Actividades:",K,"Respuestas:",H))},ee=VJe(e,O=>{console.log("📋 Actividades recibidas:",O.length),O.forEach((R,G)=>{console.log(`  ${G+1}. ${R.asignatura} (ID: ${R.id})`),No(R,`actividad-${G}`)}),d(O),K=!0,W()},O=>{console.error("❌ Error en suscripción de actividades:",O),q=!0,W()}),X=zJe(e.id,O=>{console.log("📝 Respuestas del estudiante recibidas:",O.length),O.forEach((R,G)=>{var Y;console.log(`  ${G+1}. Actividad ${R.actividadId} - Fecha: ${R.fechaCompletado}`),R.nota&&console.log(`    Nota: ${R.nota}`),(Y=R.revisionDocente)!=null&&Y.completada&&console.log("    ✅ Con revisión docente completada"),No(R,`respuesta-${G}`)}),h(O),H=!0,W()},O=>{var R;console.error("❌ Error en suscripción de respuestas:",O),(R=O.message)!=null&&R.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),w("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),z=!0,W()});return()=>{console.log("🧹 Limpiando subscripciones"),ee==null||ee(),X==null||X()}},[e]),N.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:u.length,respuestas:f.length,vista:n,conexion:_})},[u.length,f.length,n,_,t]);const B=K=>{if(console.log("🔍 Iniciando actividad:",K.asignatura),S.has(K.id)){w("Esta actividad ya ha sido completada. No es posible realizarla nuevamente.");return}g(K),a("activity"),w(null)},T=K=>{console.log("🔍 Viendo resultado:",K.actividadId);const H=u.find(q=>q.id===K.actividadId);H?(g(H),v(K),a("result"),w(null)):w("No se pudieron cargar los detalles de esta actividad completada.")},C=N.useCallback(async(K,H)=>{if(!m)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:m.id,estudianteId:e.id,puntaje:K.puntaje,nota:K.nota}),a("result"),c(!0),w(null);const q={actividadId:m.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...K,retroalimentacionDetallada:H};console.log("💾 Guardando respuesta...");try{const z=await WJe(q,m,H);console.log("✅ Respuesta completada con ID:",z.id),v(z),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(z){console.error("❌ Error crítico al completar actividad:",z),w("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),v({id:"error-temp",...q,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{c(!1)}},[m,e.id]),S=N.useMemo(()=>{if(f.length===0)return new Set;const K=new Set(f.map(H=>H.actividadId));return console.log("🎯 IDs completados calculados:",K.size),K},[f]),j=N.useMemo(()=>{if(u.length===0)return[];const K=u.filter(H=>!S.has(H.id));return console.log("⏳ Actividades pendientes:",K.length),K},[u,S]),L=N.useMemo(()=>{if(f.length===0)return[];const K=f.map(H=>{const q=u.find(z=>z.id===H.actividadId);return{...H,asignatura:(q==null?void 0:q.asignatura)||"Actividad no disponible",tipos:(q==null?void 0:q.tipos)||[]}}).sort((H,q)=>new Date(q.fechaCompletado).getTime()-new Date(H.fechaCompletado).getTime());return console.log("📖 Historial preparado:",K.length),K},[f,u]),P=N.useMemo(()=>{if(L.length===0)return[];const K=new Map;for(const q of L){const z=q.asignatura||"Sin asignatura";let W;if(q.nota!=null){const X=parseFloat(q.nota);isNaN(X)||(W=X)}if(W==null&&typeof q.puntaje=="number"&&typeof q.puntajeMaximo=="number"&&q.puntajeMaximo>0){const X=$O(q.puntaje,q.puntajeMaximo),O=parseFloat(X);isNaN(O)||(W=O)}if(W==null||isNaN(W))continue;const ee=K.get(z)||{suma:0,cantidad:0};K.set(z,{suma:ee.suma+W,cantidad:ee.cantidad+1})}const H=Array.from(K.entries()).map(([q,z])=>({asignatura:q,promedio:Math.round(z.suma/z.cantidad*100)/100,cantidad:z.cantidad}));return H.sort((q,z)=>z.promedio-q.promedio),H},[L]);return t?i.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[i.jsx(GO,{className:"w-8 h-8 text-slate-500"}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),i.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",_==="connecting"?"Conectando...":_==="connected"?"Conectado":"Error de conexión"]})]})]}):_==="error"&&u.length===0&&f.length===0?i.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[i.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),i.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),i.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&m?i.jsx(XJe,{actividad:m,onComplete:C,currentUser:e}):n==="result"&&x?(console.log("🔍 Renderizando resultado:",x),i.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),i.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",i.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[x.puntaje," / ",x.puntajeMaximo]})]}),i.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",i.jsx("span",{className:`font-bold text-2xl ${parseFloat(x.nota)>=4?"text-green-600":"text-red-600"}`,children:x.nota})]})]}),(m==null?void 0:m.recursos)&&i.jsxs("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:[i.jsx("h2",{className:"text-lg font-bold text-sky-800 mb-2",children:"Material complementario"}),m.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(ks,{content:m.recursos.instrucciones,context:"resultado-instrucciones"})})]}),m.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.enlaces.split(`
`).filter(Boolean).map((K,H)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),i.jsx("a",{href:K.startsWith("http")?K:`https://${K}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:K})]},H))})]}),m.recursos.archivos&&m.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.archivos.map((K,H)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),i.jsx("a",{href:K.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:K.nombre||`Archivo ${H+1}`})]},H))})]})]}),y&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",y]})}),l&&i.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[i.jsx(GO,{className:"w-8 h-8 text-blue-500"}),i.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),i.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),x.retroalimentacionAI&&!l&&i.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),i.jsx("p",{className:"text-slate-700 mt-1",children:i.jsx(ks,{content:x.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((k=x.retroalimentacionAI.desafios)==null?void 0:k.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),i.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.desafios.map((K,H)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx(ks,{content:K.pregunta,context:`feedback-desafio-pregunta-${H}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx(ks,{content:K.explicacionDelError,context:`feedback-desafio-explicacion-${H}`})})]},H))})]}),((Q=(U=x.retroalimentacionAI)==null?void 0:U.comentariosDesarrollo)==null?void 0:Q.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),i.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.comentariosDesarrollo.map((K,H)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx(ks,{content:K.pregunta,context:`feedback-desarrollo-pregunta-${H}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx(ks,{content:K.retroalimentacionBreve,context:`feedback-desarrollo-retro-${H}`})})]},H))})]})]}),x.retroalimentacionDetallada&&i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),x.retroalimentacionDetallada.items.map((K,H)=>{const q=K.esCorrecta===null,z=q?"border-slate-400 bg-slate-50":K.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",W=q?"🕓":K.esCorrecta?"✅":"❌";return i.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${z}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[H+1,". ",i.jsx(ks,{content:K.pregunta,context:`feedback-item-pregunta-${H}`})]}),i.jsx("span",{className:"font-bold text-lg",children:W})]}),i.jsxs("div",{className:"mt-2 text-sm pl-4",children:[i.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",i.jsx("span",{className:"font-medium",children:i.jsx(ks,{content:K.respuestaUsuario,context:`feedback-item-respuesta-${H}`})})]}),!q&&!K.esCorrecta&&i.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",i.jsx("span",{className:"font-medium text-green-700",children:i.jsx(ks,{content:K.respuestaCorrecta,context:`feedback-item-correcta-${H}`})})]}),q&&i.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},H)})]}),i.jsx("div",{className:"flex gap-4",children:i.jsx("button",{onClick:()=>{a("list"),g(null),v(null),w(null)},className:"w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"})})]})):i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[y&&i.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:i.jsxs("p",{className:"text-amber-800",children:["⚠️ ",y]})}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"actividades",label:"Actividades Pendientes"},{key:"historial",label:"Historial"},{key:"promedios",label:"Promedios Remotos"}].map(K=>i.jsx("button",{onClick:()=>o(K.key),className:`px-4 py-2 rounded-lg border transition-colors ${s===K.key?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-700 hover:bg-slate-50 border-slate-200"}`,children:K.label},K.key))}),s==="actividades"&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),i.jsx("p",{className:"text-slate-500 mb-2",children:"Completa las actividades asignadas por tus profesores."}),i.jsx("p",{className:"text-amber-600 text-sm font-medium mb-6",children:i.jsxs("span",{className:"bg-amber-100 p-1 rounded inline-flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Importante: Cada actividad solo puede ser respondida una vez."]})}),i.jsx("div",{className:"space-y-4",children:j.length>0?j.map(K=>i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(ks,{content:K.asignatura,context:`actividad-asignatura-${K.id}`})," - ",K.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",i.jsx(ks,{content:typeof K.plazoEntrega=="string"?K.plazoEntrega:"",context:`actividad-plazo-${K.id}`})]})]}),i.jsx("button",{onClick:()=>B(K),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},K.id)):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]})}),s==="historial"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),i.jsx("div",{className:"space-y-4",children:L.length>0?L.map(K=>i.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(ks,{content:K.asignatura,context:`completada-asignatura-${K.id}`})," - ",K.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(K.fechaCompletado).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",i.jsx("span",{className:`font-bold text-lg ${(parseFloat(K.nota)||0)>=4?"text-green-600":"text-red-600"}`,children:K.nota??$O(K.puntaje,K.puntajeMaximo)})]}),i.jsx("button",{onClick:()=>T(K),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},K.id)):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📚"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]}),s==="promedios"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Promedios Remotos"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Promedio de tus calificaciones por asignatura en actividades remotas."}),P.length>0?i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:P.map(K=>i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 shadow-sm",children:[i.jsx("p",{className:"font-bold text-slate-800 mb-1",children:K.asignatura}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:`text-2xl font-extrabold ${K.promedio>=4?"text-green-600":"text-red-600"}`,children:K.promedio.toFixed(2)}),i.jsx("p",{className:"text-xs text-slate-500",children:"Promedio (1-7)"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-slate-700 font-semibold",children:K.cantidad}),i.jsx("p",{className:"text-xs text-slate-500",children:"actividades"})]})]})]},K.asignatura))}):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📊"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Sin datos aún"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Completa actividades para ver tus promedios por asignatura."})]})]})]})},ej="estudiantes_inclusion",JJe="usuarios",$ce=e=>{const t=e.data();return{id:e.id,...t}},ZJe=e=>{const t=Ht(mt(tt,ej));return mr(t,n=>{const a=n.docs.map(s=>$ce(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},eZe=e=>{const t=Ht(mt(tt,JJe));return mr(t,n=>{const a=n.docs.map(s=>$ce(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},tZe=async e=>{try{return(await mn(mt(tt,ej),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},rZe=async(e,t)=>{try{const{id:r,...n}=t,a=nr(tt,ej,e);await yi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},nZe=async e=>{try{const t=nr(tt,ej,e);await Ca(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},aZe=({estudiantes:e})=>{const t=N.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=N.useMemo(()=>{const l=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(l).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=N.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=N.useMemo(()=>{const l=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(l/e.length).toFixed(1):"0";return{total:l,promedio:c}},[e]),s=N.useMemo(()=>e.reduce((l,c)=>l+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),o=Math.max(0,...t.map(l=>l.cantidad),...r.map(l=>l.cantidad),...n.map(l=>l.cantidad));return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),i.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),i.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),i.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),i.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),i.jsx("div",{className:"space-y-2",children:t.map(({curso:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),i.jsx("div",{className:"space-y-2",children:r.map(({nivel:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[l,"°"]}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),i.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:l,children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]})]})]})},fW=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=N.useState(""),[a,s]=N.useState(""),[o,l]=N.useState(!1),c=N.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=a===""||f.curso===a;return h&&m}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=N.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),l(!1)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),i.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),l(f.target.value.length>0||a!=="")},onFocus:()=>l(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),i.jsxs("select",{value:a,onChange:f=>{s(f.target.value),l(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>i.jsx("option",{value:f,children:f},f))]})]})]}),i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),i.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),i.jsx("button",{onClick:()=>l(!o),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:o?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),o&&i.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?i.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):i.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>i.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),i.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),i.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},sZe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=N.useState(__[0]),s=()=>r(e,n);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),i.jsx("select",{id:"dificultad",value:n,onChange:o=>a(o.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:__.map(o=>i.jsx("option",{value:o,children:o},o))})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},iZe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,o]=N.useState("intervenciones"),[l,c]=N.useState(e);N.useEffect(()=>c(e),[e]);const[u,d]=N.useState(null),f={responsable:"",accion:"",observaciones:""},[h,m]=N.useState(f),[g,x]=N.useState({trimestre:"T1",meta:""}),[v,y]=N.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,_]=N.useState(null),[F,B]=N.useState(!1),T={motivo:"",acuerdos:"",asistentes:""},[C,S]=N.useState(T),j=()=>{r(l),t()},L=async()=>{var _e;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ne,Be=!1;u?ne=(l.intervenciones||[]).map(Ae=>Ae.id===u.id?{...Ae,...h}:Ae):(Be=!0,ne=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...l.intervenciones||[]]);const je=ne.sort((Ae,ve)=>new Date(ve.fecha).getTime()-new Date(Ae.fecha).getTime());if(c(Ae=>({...Ae,intervenciones:je})),Be)try{await dNe({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(_e=a?a(h.responsable):void 0)==null?void 0:_e.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${l.nombre}. Acción: ${h.accion}`,estudianteNombre:l.nombre,estudianteId:l.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(Ae){console.error("Error al crear notificación:",Ae),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}m(f),d(null)},P=ne=>{d(ne),m({responsable:ne.responsable,accion:ne.accion,observaciones:ne.observaciones})},k=ne=>{window.confirm("¿Eliminar esta intervención?")&&c(Be=>({...Be,intervenciones:(Be.intervenciones||[]).filter(je=>je.id!==ne)}))},U=ne=>{const{name:Be,value:je}=ne.target;c(_e=>({..._e,[Be]:je,fechaActualizacionApoyos:new Date().toISOString()}))},Q=()=>{if(!g.meta.trim())return;const ne={...g,id:crypto.randomUUID(),cumplida:!1};c(Be=>({...Be,metasProgreso:[...Be.metasProgreso||[],ne]})),x({trimestre:"T1",meta:""})},K=ne=>{c(Be=>({...Be,metasProgreso:(Be.metasProgreso||[]).map(je=>je.id===ne?{...je,cumplida:!je.cumplida}:je)}))},H=ne=>{c(Be=>({...Be,metasProgreso:(Be.metasProgreso||[]).filter(je=>je.id!==ne)}))},q=N.useMemo(()=>{const ne=l.metasProgreso||[];if(ne.length===0)return{percent:0,color:"bg-slate-300"};const Be=ne.filter(Ae=>Ae.cumplida).length,je=Math.round(Be/ne.length*100),_e=je<40?"bg-red-500":je<75?"bg-yellow-500":"bg-green-500";return{percent:je,color:_e}},[l.metasProgreso]),z=N.useMemo(()=>{if(!l.fechaActualizacionApoyos)return!0;const ne=new Date(l.fechaActualizacionApoyos),Be=new Date;return Be.setMonth(Be.getMonth()-3),ne<Be},[l.fechaActualizacionApoyos]),W=()=>{if(!v.titulo.trim()||!v.fecha)return;const ne={...v,id:crypto.randomUUID(),resuelta:!1};c(Be=>({...Be,alertas:[...Be.alertas||[],ne].sort((je,_e)=>new Date(je.fecha).getTime()-new Date(_e.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},ee=ne=>{c(Be=>({...Be,alertas:(Be.alertas||[]).map(je=>je.id===ne?{...je,resuelta:!je.resuelta}:je)}))},X=ne=>{c(Be=>({...Be,alertas:(Be.alertas||[]).filter(je=>je.id!==ne)}))},O=ne=>{ne.target.files&&ne.target.files[0]&&_(ne.target.files[0])},R=()=>{if(!w)return;B(!0);const ne=new FileReader;ne.readAsDataURL(w),ne.onloadend=()=>{const Be={id:crypto.randomUUID(),nombre:w.name,url:ne.result,fechaSubida:new Date().toISOString()};c(je=>({...je,archivos:[Be,...je.archivos||[]]})),_(null),B(!1)},ne.onerror=()=>{alert("Error al leer el archivo."),B(!1)}},G=ne=>{window.confirm("¿Eliminar este archivo?")&&c(Be=>({...Be,archivos:(Be.archivos||[]).filter(je=>je.id!==ne)}))},Y=()=>{if(!C.motivo.trim()||!C.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ne={...C,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(Be=>({...Be,reuniones:[ne,...Be.reuniones||[]].sort((je,_e)=>new Date(_e.fecha).getTime()-new Date(je.fecha).getTime())})),S(T)},te=ne=>{window.confirm("¿Eliminar este registro de reunión?")&&c(Be=>({...Be,reuniones:(Be.reuniones||[]).filter(je=>je.id!==ne)}))},ae=()=>{var de,be,De;const ne=new yr("p","mm","a4"),Be=20,je=ne.internal.pageSize.getWidth(),_e=ne.internal.pageSize.getHeight();let Ae=Be;const ve=Ve=>{Ve.setFontSize(10),Ve.setTextColor(100),Ve.text("Ficha de Seguimiento - Módulo Inclusión",Be,15)};ve(ne),ne.setFontSize(18),ne.setFont("helvetica","bold"),ne.setTextColor(40),ne.text(l.nombre,Be,Ae+10),Ae+=15,ne.setFontSize(11),ne.setFont("helvetica","normal"),ne.setTextColor(80),ne.text(`Curso: ${l.curso}`,Be,Ae),ne.text(`Dificultad: ${l.dificultad}`,Be,Ae+6),Ae+=15;const Pe=Ve=>{Ae+Ve>_e-Be&&(ne.addPage(),ve(ne),Ae=Be)},Ue=Ve=>{Pe(15),ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text(Ve,Be,Ae),Ae+=10};if((de=l.intervenciones)!=null&&de.length&&(Ue("Historial de Intervenciones"),gi(ne,{startY:Ae,head:[["Fecha","Responsable","Acción","Observaciones"]],body:l.intervenciones.map(Ve=>[new Date(Ve.fecha).toLocaleDateString("es-CL"),Ve.responsable,Ve.accion,Ve.observaciones||""]),theme:"grid",didDrawPage:()=>ve(ne)}),Ae=ne.lastAutoTable.finalY+10),l.adaptacionesCurriculares||l.apoyosRecibidos){Pe(30),Ue("Seguimiento y Apoyos"),ne.setFontSize(11),ne.setFont("helvetica","normal");const Ve=`Adaptaciones: ${l.adaptacionesCurriculares||"No registradas."}
Apoyos: ${l.apoyosRecibidos||"No registrados."}`,We=ne.splitTextToSize(Ve,je-Be*2);ne.text(We,Be,Ae),Ae+=We.length*5+10}(be=l.metasProgreso)!=null&&be.length&&(Pe(30),Ue("Metas de Progreso"),gi(ne,{startY:Ae,head:[["Trimestre","Meta","Estado"]],body:l.metasProgreso.map(Ve=>[Ve.trimestre,Ve.meta,Ve.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>ve(ne)}),Ae=ne.lastAutoTable.finalY+10),(De=l.reuniones)!=null&&De.length&&(Ue("Reuniones con Apoderados"),gi(ne,{startY:Ae,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:l.reuniones.map(Ve=>[new Date(Ve.fecha).toLocaleDateString("es-CL"),Ve.motivo,Ve.acuerdos||"",Ve.asistentes]),theme:"grid",didDrawPage:()=>ve(ne)})),ne.save(`Ficha_Inclusion_${l.nombre.replace(/\s/g,"_")}.pdf`)},oe=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),i.jsxs("select",{value:h.responsable,onChange:ne=>m(Be=>({...Be,responsable:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ne=>i.jsx("option",{value:ne,children:ne},ne))]}),h.responsable&&!u&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),i.jsx("textarea",{value:h.accion,onChange:ne=>m(Be=>({...Be,accion:ne.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:h.observaciones,onChange:ne=>m(Be=>({...Be,observaciones:ne.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[u&&i.jsx("button",{onClick:()=>{d(null),m(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),i.jsx("button",{onClick:L,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.intervenciones||[]).map(ne=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.accion}),ne.observaciones&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ne.observaciones}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ne.fecha).toLocaleString("es-CL")," - ",ne.responsable]}),i.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),i.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[i.jsx("button",{onClick:()=>P(ne),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),i.jsx("button",{onClick:()=>k(ne.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},ne.id)),(!l.intervenciones||l.intervenciones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:"📋"}),i.jsx("p",{children:"No hay intervenciones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),ie=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),z&&i.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),i.jsx("textarea",{name:"adaptacionesCurriculares",value:l.adaptacionesCurriculares||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),i.jsx("textarea",{name:"apoyosRecibidos",value:l.apoyosRecibidos||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",q.percent,"%"]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:i.jsx("div",{className:`${q.color} h-4 rounded-full transition-all duration-500`,style:{width:`${q.percent}%`}})})]}),i.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[i.jsxs("select",{value:g.trimestre,onChange:ne=>x(Be=>({...Be,trimestre:ne.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"T1",children:"T1"}),i.jsx("option",{value:"T2",children:"T2"}),i.jsx("option",{value:"T3",children:"T3"})]}),i.jsx("input",{value:g.meta,onChange:ne=>x(Be=>({...Be,meta:ne.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:Q,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),i.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(l.metasProgreso||[]).map(ne=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[i.jsx("input",{type:"checkbox",checked:ne.cumplida,onChange:()=>K(ne.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${ne.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[i.jsxs("strong",{children:[ne.trimestre,":"]})," ",ne.meta]}),i.jsx("button",{onClick:()=>H(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},ne.id)),(!l.metasProgreso||l.metasProgreso.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),i.jsx("p",{children:"No hay metas definidas"}),i.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),ue=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),i.jsx("input",{type:"text",value:v.titulo,onChange:ne=>y(Be=>({...Be,titulo:ne.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:ne=>y(Be=>({...Be,fecha:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("button",{onClick:W,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.alertas||[]).map(ne=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsx("input",{type:"checkbox",checked:ne.resuelta,onChange:()=>ee(ne.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${ne.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ne.titulo," (",new Date(ne.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),i.jsx("button",{onClick:()=>X(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},ne.id)),(!l.alertas||l.alertas.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),i.jsx("p",{children:"No hay alertas programadas"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),i.jsx("input",{type:"file",onChange:O,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),i.jsx("button",{onClick:R,disabled:!w||F,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:F?"Subiendo...":"Subir"}),w&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.archivos||[]).map(ne=>i.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsxs("a",{href:ne.url,download:ne.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ne.nombre,children:["📎 ",ne.nombre]}),i.jsx("button",{onClick:()=>G(ne.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},ne.id)),(!l.archivos||l.archivos.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:"📁"}),i.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),Ce=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),i.jsx("input",{value:C.motivo,onChange:ne=>S(Be=>({...Be,motivo:ne.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:C.acuerdos,onChange:ne=>S(Be=>({...Be,acuerdos:ne.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{value:C.asistentes,onChange:ne=>S(Be=>({...Be,asistentes:ne.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"text-right",children:i.jsx("button",{onClick:Y,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!C.motivo.trim()||!C.asistentes.trim(),children:"Guardar Reunión"})})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.reuniones||[]).map(ne=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.motivo}),ne.acuerdos&&i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[i.jsx("strong",{children:"Acuerdos:"})," ",ne.acuerdos]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ne.fecha).toLocaleString("es-CL")," - Asistentes: ",ne.asistentes]})]}),i.jsx("button",{onClick:()=>te(ne.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},ne.id)),(!l.reuniones||l.reuniones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:"👥"}),i.jsx("p",{children:"No hay reuniones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ne=>ne.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:ae,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),i.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),i.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:i.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ne=>i.jsx("button",{onClick:()=>o(ne),className:`${s===ne?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ne==="alertas"?"Alertas y Archivos":ne==="seguimiento"?"Seguimiento y Metas":ne},ne))})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&oe(),s==="seguimiento"&&ie(),s==="reuniones"&&Ce(),s==="alertas"&&ue()]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),i.jsx("button",{onClick:j,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},AW=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState([]),[s,o]=N.useState(!0),[l,c]=N.useState(null),[u,d]=N.useState(null),[f,h]=N.useState(""),[m,g]=N.useState(""),[x,v]=N.useState(""),[y,w]=N.useState("dashboard");N.useEffect(()=>{o(!0);const L=ZJe(k=>{r(k),o(!1)}),P=eZe(k=>a(k));return()=>{L(),P()}},[]);const _=async(L,P)=>{if(t.some(U=>U.nombre===L.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const k={nombre:L.nombreCompleto,curso:L.curso||"",dificultad:P,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await tZe(k),alert(`✅ ${L.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(U){console.error("Error al agregar estudiante:",U),alert("Hubo un error al agregar al estudiante al programa.")}},F=async L=>{try{await rZe(L.id,L)}catch(P){console.error("Error al actualizar la ficha:",P),alert("Hubo un error al guardar los cambios en la ficha.")}},B=async L=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await nZe(L),(l==null?void 0:l.id)===L&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(P){console.error("Error al eliminar estudiante:",P),alert("Hubo un error al eliminar al estudiante.")}},T=L=>{const P=S;if(P.length===0){alert("No hay datos para exportar.");return}const k=P.map(U=>{var Q;return{Nombre:U.nombre,Curso:U.curso,Dificultad:U.dificultad,"N° Intervenciones":((Q=U.intervenciones)==null?void 0:Q.length)||0,"Alertas Pendientes":(U.alertas||[]).filter(K=>!K.resuelta).length,"Metas Cumplidas":(U.metasProgreso||[]).filter(K=>K.cumplida).length,"Total Metas":(U.metasProgreso||[]).length,"Última Actualización":U.fechaActualizacionApoyos?new Date(U.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(L==="xlsx"){const U=Is.json_to_sheet(k),Q=Is.book_new();Is.book_append_sheet(Q,U,"Estudiantes_Inclusion"),i1(Q,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const U=new yr;U.text("Listado de Estudiantes - Programa de Inclusión",14,15),gi(U,{startY:20,head:[Object.keys(k[0])],body:k.map(Object.values)}),U.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},C=N.useMemo(()=>n.filter(L=>{var P;return L.profile===Gt.ESTUDIANTE&&(((P=e.cursos)==null?void 0:P.includes(L.curso||""))||e.profile===Gt.SUBDIRECCION)}).filter(L=>!t.some(P=>P.nombre===L.nombreCompleto)),[n,t,e]),S=N.useMemo(()=>t.filter(L=>L.nombre.toLowerCase().includes(f.toLowerCase())&&(m===""||L.curso===m)&&(x===""||L.dificultad===x)).sort((L,P)=>L.nombre.localeCompare(P.nombre)),[t,f,m,x]),j=N.useMemo(()=>n.filter(L=>L.profile===Gt.PROFESORADO).map(L=>L.nombreCompleto).sort(),[n]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),i.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),i.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):i.jsxs(i.Fragment,{children:[y==="dashboard"&&i.jsxs("div",{className:"space-y-8",children:[i.jsx(aZe,{estudiantes:t}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),i.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),i.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(L=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:L.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[L.curso," - ",L.dificultad]})]}),i.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},L.id)),t.length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📚"}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),i.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),i.jsx(fW,{estudiantesDisponibles:C,onSelect:L=>d(L)})]})]}),y==="lista"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",S.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>T("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),i.jsx("button",{onClick:()=>T("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),i.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:L=>h(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),i.jsxs("select",{value:m,onChange:L=>g(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),js.map(L=>i.jsx("option",{value:L,children:L},L))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),i.jsxs("select",{value:x,onChange:L=>v(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas las Dificultades"}),__.map(L=>i.jsx("option",{value:L,children:L},L))]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-blue-600",children:S.length}),i.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-green-600",children:t.length}),i.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((L,P)=>L+(P.alertas||[]).filter(k=>!k.resuelta).length,0)}),i.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(L=>L.curso)).size}),i.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[S.map(L=>{var P;return i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.nombre}),(L.alertas||[]).filter(k=>!k.resuelta).length>0&&i.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(L.alertas||[]).filter(k=>!k.resuelta).length," alertas"]})]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[L.curso," - ",L.dificultad]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[i.jsxs("span",{children:[((P=L.intervenciones)==null?void 0:P.length)||0," intervenciones"]}),i.jsxs("span",{children:[(L.metasProgreso||[]).filter(k=>k.cumplida).length," metas cumplidas"]}),L.fechaActualizacionApoyos&&i.jsxs("span",{children:["Últ. actualización: ",new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),i.jsx("button",{onClick:()=>B(L.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},L.id)}),S.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),i.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||m||x)&&i.jsx("button",{onClick:()=>{h(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),i.jsx(fW,{estudiantesDisponibles:C,onSelect:L=>d(L)})]})]}),u&&i.jsx(sZe,{student:u,onClose:()=>d(null),onConfirm:(L,P)=>{_(L,P),d(null)}}),l&&i.jsx(iZe,{student:l,onClose:()=>c(null),onSave:F,profesores:j})]})},Gce="asistencia_dual",oZe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},lZe=(e,t)=>{const r=Ht(mt(tt,Gce),xr("emailEstudiante","==",e),ar("fechaHora","desc"));return mr(r,a=>{const s=a.docs.map(o=>oZe(o));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},cZe=async e=>{try{const t={...e,fechaHora:cr.fromDate(new Date(e.fechaHora))};await mn(mt(tt,Gce),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},uZe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),dZe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),fZe=({currentUser:e})=>{const[t,r]=N.useState(e.curso||""),[n,a]=N.useState([]),[s,o]=N.useState(!1),[l,c]=N.useState(!0),[u,d]=N.useState(null);N.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=lZe(e.email,m=>{a(m),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}o(!0),d(null),navigator.geolocation.getCurrentPosition(async m=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:m.coords.latitude,longitud:m.coords.longitude}};try{await cZe(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{o(!1)}},m=>{console.error("Geolocation error:",m);let g="No se pudo obtener la ubicación.";switch(m.code){case m.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case m.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case m.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${m.code}).`;break}d({text:g,type:"error"}),o(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),i.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),i.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"-- Mi curso --"}),rg.map(h=>i.jsx("option",{value:h,children:h},h))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[i.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),i.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&i.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&i.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?i.jsx(uZe,{}):i.jsx(dZe,{}),h.tipo]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},AZe=async()=>{try{console.log("🔍 Debugging users collection...");const e=mt(Nr,"users"),t=Ht(e,Hd(10)),r=await qr(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,o)=>{const l=s.data(),c={id:s.id,data:l,fields:Object.keys(l)};n.sampleDocs.push(c),Object.keys(l).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(l=>s in l.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},hZe=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=cr.fromDate(r),s=cr.fromDate(n),o=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],l={};for(const f of o)try{const h=mt(Nr,f);try{const m=Ht(h,xr("fechaHora",">=",a),xr("fechaHora","<=",s)),g=await qr(m);l[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=Ht(h,xr(v,">=",a),xr(v,"<=",s)),w=await qr(y);l[f]={exists:!0,hasDateField:v,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const v=Ht(h,ar("__name__"),Hd(5)),y=await qr(v);l[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){l[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",l),l},mZe=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const o=cr.fromDate(a),l=cr.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((m,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const v=x.getDate();return m[v]=(m[v]||0)+1,m},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const m=mt(Nr,h),g=Ht(m,xr("fechaHora",">=",o),xr("fechaHora","<=",l),ar("fechaHora","desc")),x=mr(g,v=>{console.log(`📋 ${h}: ${v.size} documentos encontrados con filtro`),v.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),v.docs.forEach((w,_)=>{var F;if(_<5){const B=w.data();let T;(F=B.fechaHora)!=null&&F.toDate?T=B.fechaHora.toDate():typeof B.fechaHora=="string"?T=new Date(B.fechaHora):T=new Date,console.log(`   ${_+1}. ${B.emailEstudiante} - ${T.toLocaleString()} - ${B.tipo}`),console.log(`      📅 Fecha original: ${B.fechaHora} (tipo: ${typeof B.fechaHora})`)}}),v.forEach(w=>{var C;const _=w.data();let F;(C=_.fechaHora)!=null&&C.toDate?F=_.fechaHora.toDate():typeof _.fechaHora=="string"?F=new Date(_.fechaHora):_.fechaHora instanceof Date?F=_.fechaHora:_.fechaHora?F=new Date(_.fechaHora):F=new Date;const B={id:w.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:F,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},T=`${h}_${w.id}`;u.set(T,B)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},v=>{console.warn(`⚠️ Error con filtro en ${h}:`,v),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=Ht(m,Hd(200)),w=mr(y,F=>{if(console.log(`📋 ${h} (sin filtro): ${F.size} documentos`),F.size>0){const T=F.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(T)),console.log("📄 Primer documento:",T)}const B=F.docs.filter(T=>{var j;const C=T.data();if(!C.fechaHora)return!1;let S;return(j=C.fechaHora)!=null&&j.toDate?S=C.fechaHora.toDate():typeof C.fechaHora=="string"?S=new Date(C.fechaHora):C.fechaHora instanceof Date?S=C.fechaHora:S=new Date(C.fechaHora),S>=a&&S<=s});console.log(`📅 ${h}: ${B.length} registros después de filtro manual`),B.length>0&&(Array.from(u.keys()).filter(C=>C.startsWith(`${h}_`)).forEach(C=>u.delete(C)),B.forEach(C=>{var k;const S=C.data();let j;(k=S.fechaHora)!=null&&k.toDate?j=S.fechaHora.toDate():typeof S.fechaHora=="string"?j=new Date(S.fechaHora):S.fechaHora instanceof Date?j=S.fechaHora:j=new Date(S.fechaHora);const L={id:C.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:j,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},P=`${h}_${C.id}`;u.set(P,L)}),d())}),_=c.findIndex(F=>F===x);_>=0?c[_]=w:c.push(w)});c.push(x)}catch(m){console.warn(`❌ Error configurando ${h}:`,m)}}),()=>{c.forEach(h=>{try{h()}catch(m){console.warn("Error unsubscribing:",m)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},pZe=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const l=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${l.length}`);const c=l.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=l.filter(d=>d.profile===Gt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(l)};let o=!1;return r.forEach(l=>{try{const c=mt(Nr,l),u=Ht(c),d=mr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${l}`),o=!0,Array.from(a.keys()).filter(m=>m.startsWith(`${l}_`)).forEach(m=>a.delete(m)),f.forEach(m=>{var g,x,v,y;try{const w=m.data(),_=w.email||w.userEmail||w.mail||w.correo||"",F=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",B=w.curso||w.course||w.class||w.grade||"";let T=w.profile||w.role||w.tipo||w.userType||Gt.ESTUDIANTE;if(typeof T=="string"){const j=T.toLowerCase();j.includes("estudiante")||j.includes("student")||j.includes("alumno")?T=Gt.ESTUDIANTE:j.includes("coordinador")||j.includes("coordinator")?T=Gt.COORDINADOR_TP:j.includes("profesor")||j.includes("teacher")||j.includes("docente")?T=Gt.PROFESOR:(j.includes("subdireccion")||j.includes("subdir"))&&(T=Gt.COORDINADOR_TP)}const C={id:m.id,email:_,nombreCompleto:F,curso:B,profile:T,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(v=w.ultimaActividad)==null?void 0:v.toDate)==null?void 0:y.call(v))||new Date(w.ultimaActividad)||new Date,...w},S=`${l}_${m.id}`;a.set(S,C)}catch(w){console.warn(`Error procesando documento ${m.id} en ${l}:`,w)}}),s()):console.log(`⚪ Colección ${l}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${l}:`,f)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${l}:`,c)}}),setTimeout(()=>{o||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(l=>{try{l()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},gZe=(e,t)=>{try{console.log("Setting up users subscription...");const r=mt(Nr,"users"),n=Ht(r);return mr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const o=[];s.forEach(d=>{var f,h,m,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const v=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let _=x.profile||x.role||x.tipo||Gt.ESTUDIANTE;if(typeof _=="string"){const B=_.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?_=Gt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?_=Gt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?_=Gt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(_=Gt.COORDINADOR_TP)}const F={id:d.id,email:v,nombreCompleto:y,curso:w,profile:_,activo:x.activo!==!1,fechaCreacion:((h=(f=x.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(m=x.ultimaActividad)==null?void 0:m.toDate)==null?void 0:g.call(m))||new Date(x.ultimaActividad)||new Date,...x};o.push(F)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),o.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${o.length} users successfully`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",l);const c=o.filter(d=>d.profile===Gt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(o)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},TC=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},xZe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),vZe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),bZe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState(!0),[o,l]=N.useState(null),[c,u]=N.useState(new Date),[d,f]=N.useState("todos"),[h,m]=N.useState("");N.useEffect(()=>{s(!0),l(null);const T=c.getFullYear(),C=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",T,"Mes:",C);let S=!1,j=!1;const L=()=>{S&&j&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const k=mt(Nr,"asistencia_dual"),U=Ht(k,Hd(5)),Q=await qr(U);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${Q.size}`),Q.size>0)Q.docs.forEach((K,H)=>{const q=K.data();console.log(`   ${H+1}. ${K.id.slice(0,8)} - ${q.emailEstudiante} - ${q.tipo}`),console.log("      Fecha original:",q.fechaHora),console.log("      Todos los campos:",Object.keys(q))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const K=["asistenciaEmpresa","asistencia_empresa"];for(const H of K)try{const q=mt(Nr,H),z=Ht(q,Hd(3)),W=await qr(z);if(console.log(`📋 ${H}: ${W.size} documentos`),W.size>0){const ee=W.docs[0].data();console.log("   Estructura:",Object.keys(ee)),console.log("   Email:",ee.emailEstudiante||ee.email),console.log("   Fecha:",ee.fechaHora||ee.fecha)}}catch(q){console.log(`❌ ${H}: ${q instanceof Error?q.message:"Error"}`)}}}catch(k){console.error("❌ Error en prueba directa:",k),k.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):k.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),hZe(T,C).then(k=>{console.log("🔍 Debug info for collections:",k),Object.entries(k).forEach(([U,Q])=>{if(Q.exists&&Q.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${U.toUpperCase()}:`),console.log(`   📊 Total documentos: ${Q.totalDocs}`),console.log(`   📅 Documentos del período: ${Q.count}`),console.log(`   🔑 Campo de fecha: ${Q.hasDateField}`),Q.sampleDoc){console.log("   📄 Documento ejemplo:",Q.sampleDoc);const K=Q.sampleDoc,H=K.emailEstudiante||K.email||K.userEmail||K.correo||"NO ENCONTRADO",q=K.tipo||K.type||K.action||K.tipoRegistro||"NO ENCONTRADO",z=K.fechaHora||K.fecha||K.timestamp||K.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${H}`),console.log(`   📝 Tipo registro: ${q}`),console.log(`   📅 Fecha: ${z}`),console.log("   🗂️ Todos los campos:",Object.keys(K))}Q.filteredDocs&&Q.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",Q.filteredDocs.length),Q.filteredDocs.forEach((K,H)=>{H<3&&console.log(`      ${H+1}. ID: ${K.id}`,K.data)}))}else Q.exists?console.log(`⚪ Colección ${U}: vacía`):console.log(`❌ Colección ${U}: no existe`)})}).catch(k=>{console.error("Debug error:",k)}),AZe().then(k=>{console.log("🔍 Debug info for users:",k),(!k.exists||k.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async Q=>{var K;try{const H=mt(Nr,Q),q=Ht(H,Hd(5)),z=await qr(q);z.size>0?(console.log(`✅ Encontrada colección alternativa: ${Q} con ${z.size} documentos`),console.log("Documento muestra:",(K=z.docs[0])==null?void 0:K.data())):console.log(`❌ Colección ${Q}: vacía`)}catch{console.log(`❌ Colección ${Q}: no existe`)}}))}).catch(k=>{console.error("Users debug error:",k)});try{console.log("Configurando suscripción a asistencia...");const k=mZe(T,C,Q=>{if(console.log("✅ Received registros:",Q.length),Q.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",Q[0]);const K=[...new Set(Q.map(X=>X.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",K);const H=[...new Set(Q.map(X=>X.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",H);const q=Q.reduce((X,O)=>{const R=new Date(O.fechaHora).getDate();return X[R]||(X[R]=[]),X[R].push(O),X},{});console.log("📅 Registros por día del mes:",Object.keys(q).map(X=>({dia:parseInt(X),cantidad:q[parseInt(X)].length})));const z=r.map(X=>X.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",z);const W=K.filter(X=>z.includes(X)),ee=K.filter(X=>!z.includes(X));console.log("✅ Emails que coinciden:",W),console.log("❌ Emails que NO coinciden:",ee)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(Q),S=!0,L()},Q=>{console.error("❌ Error fetching asistencia:",Q),l("Error al cargar datos de asistencia: "+Q.message),S=!0,L()});console.log("Configurando suscripción a usuarios...");const U=pZe(Q=>{if(console.log("✅ Received users (multi-collection):",Q.length),Q.length>0){console.log("Sample user:",Q[0]);const K=Q.filter(H=>H.profile===Gt.ESTUDIANTE&&H.curso);console.log("Dual students found:",K.length),K.forEach(H=>{console.log(`- ${H.nombreCompleto} (${H.curso}) - ${H.email}`)})}n(Q),j=!0,L()},Q=>{console.error("❌ Error fetching users (multi-collection):",Q),console.log("🔄 Intentando con función original de usuarios...");const K=gZe(H=>{console.log("✅ Received users (fallback):",H.length),n(H),j=!0,L()},H=>{console.error("❌ Error en fallback también:",H),l("Error al cargar estudiantes: "+Q.message),j=!0,L()})});return()=>{console.log("Limpiando suscripciones..."),k&&k(),U&&U()}}catch(k){console.error("❌ Error setting up subscriptions:",k),l("Error al inicializar conexiones: "+(k instanceof Error?k.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:v}=N.useMemo(()=>{const T=c.getFullYear(),C=c.getMonth();return{monthDays:new Date(T,C+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:T}},[c]),y=N.useMemo(()=>{let T=r.filter(C=>C.profile===Gt.ESTUDIANTE&&C.curso&&rg.includes(TC(C.curso)));if(d!=="todos"&&(T=T.filter(C=>TC(C.curso||"")===d)),h&&(T=T.filter(C=>C.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const C=[...new Set(e.map(L=>L.emailEstudiante).filter(Boolean))],S=T.map(L=>L.email),j=C.filter(L=>!S.includes(L));if(j.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",j);const P=j.map(k=>{const U=e.find(Q=>Q.emailEstudiante===k);return{id:k,email:k,nombreCompleto:(U==null?void 0:U.nombreEstudiante)||k.split("@")[0],curso:(U==null?void 0:U.curso)||"3ºC",profile:Gt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(k=>{const U=d==="todos"||TC(k.curso)===d,Q=!h||k.nombreCompleto.toLowerCase().includes(h.toLowerCase());return U&&Q&&rg.includes(TC(k.curso))});T=[...T,...P]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${T.length}`),T.forEach(C=>{console.log(`   - ${C.nombreCompleto} (${C.curso}) - ${C.email}`)}),T.sort((C,S)=>C.nombreCompleto.localeCompare(S.nombreCompleto))},[r,d,h,e]),w=N.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const T=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),T):(e.forEach((C,S)=>{const j=C.emailEstudiante;if(!j)return;let L;if(C.fechaHora instanceof Date)L=C.fechaHora;else if(C.fechaHora&&typeof C.fechaHora=="object"&&"toDate"in C.fechaHora)L=C.fechaHora.toDate();else if(typeof C.fechaHora=="string")L=new Date(C.fechaHora);else{console.warn("Fecha no válida en registro:",C);return}const P=L.getDate(),k=L.getMonth(),U=L.getFullYear();S<3&&console.log(`📅 Registro ${S+1}:`,{email:j,tipo:C.tipo,fechaOriginal:C.fechaHora,fechaProcesada:L.toLocaleString(),año:U,mes:k,día:P}),T.has(j)||T.set(j,new Map);const Q=T.get(j);Q.has(P)||Q.set(P,{});const K=Q.get(P);C.tipo==="Entrada"?(!K.entrada||L<new Date(K.entrada.fechaHora))&&(K.entrada=C):C.tipo==="Salida"&&(!K.salida||L>new Date(K.salida.fechaHora))&&(K.salida=C)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:T.size,estudiantes:Array.from(T.keys()),registrosPorEstudiante:Array.from(T.entries()).map(([C,S])=>({email:C,dias:Array.from(S.keys()),totalRegistros:Array.from(S.values()).reduce((j,L)=>j+(L.entrada?1:0)+(L.salida?1:0),0)}))}),T)},[e]),_=T=>{u(C=>{const S=new Date(C);return S.setMonth(S.getMonth()+T),S})},F=T=>{T!=null&&T.latitud&&(T!=null&&T.longitud)&&window.open(`https://www.google.com/maps?q=${T.latitud},${T.longitud}`,"_blank")},B=["D","L","M","M","J","V","S"];return o?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:o})}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[i.jsx("button",{onClick:()=>_(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${v}`}),i.jsx("button",{onClick:()=>_(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),i.jsxs("select",{value:d,onChange:T=>f(T.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"todos",children:"Todos los Cursos"}),rg.map(T=>i.jsx("option",{value:T,children:T},T))]}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:T=>m(T.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?i.jsxs("div",{className:"text-center text-amber-600 py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),i.jsx("div",{children:"Cargando datos de asistencia..."})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(T,C)=>{const j=new Date(v,c.getMonth(),C+1).getDay(),L=j===0||j===6;return i.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${L?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[i.jsx("div",{className:"font-semibold",children:B[j]}),i.jsx("div",{children:C+1})]},C)})]})}),i.jsx("tbody",{children:y.length>0?y.map(T=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:T.nombreCompleto}),Array.from({length:g},(C,S)=>{var U;const j=S+1,L=(U=w.get(T.email))==null?void 0:U.get(j),P=new Date(v,c.getMonth(),S+1),k=P.getDay()===0||P.getDay()===6;return T.email==="alexis.robles@industrialderecoleta.cl"&&j===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:T.email,day:j,hasDataForStudent:w.has(T.email),studentDayRecords:L,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(T.email)?Array.from(w.get(T.email).keys()):[]}),i.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${k?"bg-slate-100 dark:bg-slate-700/50":""}`,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(L==null?void 0:L.entrada)&&i.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var Q;return F((Q=L.entrada)==null?void 0:Q.ubicacion)},children:[i.jsx(xZe,{}),i.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(L.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(L==null?void 0:L.salida)&&i.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var Q;return F((Q=L.salida)==null?void 0:Q.ubicacion)},children:[i.jsx(vZe,{}),i.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(L.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},j)})]},T.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},tj="evaluaciones_formativas",rj="calificaciones_formativas",CM="trabajos_grupales_formativos",yZe="usuarios",_M=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},wZe=(e,t,r)=>{const n=Ht(mt(tt,tj),xr("curso","==",e),xr("asignatura","==",t),ar("fecha","asc"));return mr(n,a=>{r(a.docs.map(s=>_M(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},EZe=async(e,t)=>{const r=$g(tt),n=nr(mt(tt,tj));r.set(n,{...e,fecha:cr.fromDate(new Date(e.fecha+"T00:00:00"))});const a=nr(tt,rj,n.id);return r.set(a,t),await r.commit(),n.id},NZe=async(e,t)=>{const r=nr(tt,tj,e);await yi(r,t,{merge:!0})},CZe=async e=>{const t=$g(tt);t.delete(nr(tt,tj,e)),t.delete(nr(tt,rj,e)),await t.commit()},_Ze=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=nr(tt,rj,n);return mr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},SZe=async(e,t)=>{const r=nr(tt,rj,e);await yi(r,t,{merge:!0})},kZe=(e,t,r)=>{const n=Ht(mt(tt,CM),xr("curso","==",e),xr("asignatura","==",t),ar("fechaPresentacion","desc"));return mr(n,a=>{r(a.docs.map(s=>_M(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},jZe=async e=>{const t={...e,fechaPresentacion:cr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await mn(mt(tt,CM),t)},BZe=async(e,t)=>{const r=nr(tt,CM,e);await yi(r,t,{merge:!0})},TZe=e=>{const t=Ht(mt(tt,yZe));return mr(t,r=>{e(r.docs.map(n=>_M(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},qce=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Cv={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},Kce=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},IZe=({cursos:e,onSelect:t})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=Kce(r);return i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[i.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),i.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[i.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),i.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),FZe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=Kce(e);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),i.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>i.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[i.jsx("span",{className:"text-2xl",children:Cv[s]||Cv.Default}),i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},OZe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=N.useState([]),[o,l]=N.useState({}),[c,u]=N.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=N.useState(null),[h,m]=N.useState(null),[g,x]=N.useState(!0),v=N.useMemo(()=>r.filter(S=>S.profile===Gt.ESTUDIANTE&&qce(S.curso||"")===e).map(S=>S.nombreCompleto).sort((S,j)=>S.localeCompare(j)),[r,e]);N.useEffect(()=>{x(!0);const S=wZe(e,t,j=>{s(j);const L=j.map(k=>k.id),P=_Ze(L,k=>{l(U=>({...U,...k}))});return x(!1),()=>P()});return()=>S()},[e,t]);const y=S=>{const{name:j,value:L}=S.target;d?f(P=>P?{...P,[j]:L}:null):u(P=>({...P,[j]:L}))},w=async S=>{if(S.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const j={asignatura:t,curso:e,...c},L=v.reduce((P,k)=>(P[k]="trabajado",P),{});try{await EZe(j,L),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(P){console.error(P),m("No se pudo crear la evaluación.")}},_=(S,j)=>{var U;const L=((U=o[S])==null?void 0:U[j])||"trabajado";let P;L==="trabajado"?P="no trabajado":L==="no trabajado"?P="ausente":P="trabajado";const k={...o,[S]:{...o[S]||{},[j]:P}};l(k),SZe(S,{[j]:P}).catch(Q=>{console.error("Error updating grade:",Q)})},F=S=>f(S),B=async()=>{if(d)try{await NZe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(S){console.error(S),m("No se pudo guardar la edición.")}},T=async S=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await CZe(S)}catch(j){console.error(j),m("No se pudo eliminar la evaluación.")}},C=N.useCallback(S=>{if(a.length===0)return"-";let j=0,L=0;return a.forEach(P=>{var U;const k=(U=o[P.id])==null?void 0:U[S];k==="trabajado"?(j+=7,L++):k==="no trabajado"&&(j+=2,L++)}),L===0?"-":(j/L).toFixed(1)},[o,a]);return g?i.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),i.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),i.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("div",{className:"w-full",children:i.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&i.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(S=>i.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===S.id?i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("button",{onClick:B,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"font-semibold",children:S.nombreActividad}),i.jsx("span",{className:"font-normal text-slate-500",children:S.fecha}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx("button",{onClick:()=>F(S),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),i.jsx("button",{onClick:()=>T(S.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},S.id)),i.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(S=>i.jsxs("tr",{children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:S}),a.map(j=>{var k;const L=(k=o[j.id])==null?void 0:k[S];let P;return L==="trabajado"?P=Cv[t]||Cv.Default:L==="no trabajado"?P="❌":L==="ausente"?P="A":P=Cv[t]||Cv.Default,i.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:i.jsx("button",{onClick:()=>_(j.id,S),className:`text-3xl transition-opacity duration-200 ${L==="trabajado"?"opacity-100":L==="no trabajado"?"opacity-40":L==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:P})},j.id)}),i.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:C(S)})]},S))})]})})]})},DZe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=N.useState([]),[o,l]=N.useState(null),[c,u]=N.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=N.useState({}),[h,m]=N.useState(2),g=N.useMemo(()=>r.filter(F=>F.profile===Gt.ESTUDIANTE&&qce(F.curso||"")===e).sort((F,B)=>F.nombreCompleto.localeCompare(B.nombreCompleto)),[r,e]);N.useEffect(()=>{const F=kZe(e,t,s);return()=>F()},[e,t]),N.useEffect(()=>{if(o){const F={};o.grupos.forEach(B=>{B.integrantes.forEach(T=>{F[T.nombre]={groupNumber:String(B.numero),role:T.rol||""}})}),f(F)}else f({})},[o]);const x=async F=>{if(F.preventDefault(),!c.nombre.trim())return;const B={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await jZe(B),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(T){console.error(T),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!o)return;const F=new Map;for(const T of g){const C=d[T.nombreCompleto];if(C&&C.groupNumber){const S=parseInt(C.groupNumber,10);isNaN(S)||(F.has(S)||F.set(S,[]),F.get(S).push({nombre:T.nombreCompleto,rol:C.role||""}))}}const B=Array.from(F.entries()).map(([T,C])=>({numero:T,integrantes:C})).sort((T,C)=>T.numero-C.numero);try{await BZe(o.id,{grupos:B}),alert("Grupos guardados con éxito.")}catch(T){console.error(T),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const F=[...g].sort(()=>Math.random()-.5),B={};F.forEach((T,C)=>{var S;B[T.nombreCompleto]={groupNumber:String(C%h+1),role:((S=d[T.nombreCompleto])==null?void 0:S.role)||""}}),f(B)},w=(F,B,T)=>{f(C=>({...C,[F]:{...C[F]||{groupNumber:"",role:""},[B]:T}}))},_=N.useMemo(()=>{const F=new Map;return Object.entries(d).forEach(([B,T])=>{T.groupNumber&&(F.has(T.groupNumber)||F.set(T.groupNumber,[]),F.get(T.groupNumber).push({nombre:B,rol:T.role}))}),Array.from(F.entries()).sort((B,T)=>parseInt(B[0])-parseInt(T[0]))},[d]);return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),i.jsx("h2",{className:"text-2xl font-bold",children:o.nombreActividad})]}),i.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-1 space-y-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:h,onChange:F=>m(parseInt(F.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),i.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),i.jsx("table",{className:"w-full text-sm",children:i.jsx("tbody",{children:g.map(F=>{var B;return i.jsxs("tr",{children:[i.jsx("td",{className:"py-1 pr-2",children:F.nombreCompleto}),i.jsx("td",{className:"py-1",children:i.jsx("input",{type:"number",value:((B=d[F.nombreCompleto])==null?void 0:B.groupNumber)||"",onChange:T=>w(F.nombreCompleto,"groupNumber",T.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},F.id)})})})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:_.map(([F,B])=>i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[i.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",F]}),i.jsx("ul",{className:"space-y-2",children:B.map(T=>i.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"flex-1 truncate",children:T.nombre}),i.jsxs("select",{value:T.rol||"",onChange:C=>w(T.nombre,"role",C.target.value),className:"p-1 border rounded text-xs w-32",children:[i.jsx("option",{value:"",children:"-- Asignar Rol --"}),hte.map(C=>i.jsx("option",{value:C,children:C},C))]})]},T.nombre))})]},F))})]})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),i.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[i.jsx("input",{value:c.nombre,onChange:F=>u({...c,nombre:F.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("input",{type:"date",value:c.fecha,onChange:F=>u({...c,fecha:F.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(F=>i.jsxs("button",{onClick:()=>l(F),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[i.jsx("p",{className:"font-bold",children:F.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",F.fechaPresentacion]})]},F.id))]})]})},PZe=({currentUser:e})=>{const[t,r]=N.useState("calificaciones"),[n,a]=N.useState(null),[s,o]=N.useState(null),[l,c]=N.useState([]),[u,d]=N.useState(!0);N.useEffect(()=>{d(!0);const x=TZe(v=>{c(v),d(!1)});return()=>x()},[]);const f=N.useMemo(()=>e.cursos||[],[e.cursos]),h=N.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>i.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(u)return i.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return i.jsx(IZe,{cursos:f,onSelect:a});if(!s)return i.jsx(FZe,{curso:n,asignaturas:h,onSelect:o,onBack:()=>a(null)});if(t==="calificaciones")return i.jsx(OZe,{curso:n,asignatura:s,allUsers:l,onBack:()=>o(null)});if(t==="grupos")return i.jsx(DZe,{curso:n,asignatura:s,allUsers:l,onBack:()=>o(null)})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),i.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),i.jsx("div",{className:"mt-6",children:g()})]})};function RZe(e){return e.map(t=>{const[r,n]=t.minuto.split("-").map(Number),a=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(n-r):0;return{minuto:r,participacion:Math.min(100,a*10)}})}function LZe(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[aó]|cu[áa]l|qu[ée]|c[óo]mo|por qu[ée]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[ée] m[áa]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[óo]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[íi] es|mejorar[íi]a)/gi};for(const[n,a]of Object.entries(r)){const s=e.match(a);t.set(n,s?s.length:0)}return t}async function MZe(e,t){var o;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=RZe(e.detallesObservacion);let l=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),h=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?l+=h:c+=h}),r.stats.min_interaccion=l,r.stats.min_explicacion=c}const n=new Map;let a=0;(o=e.detallesObservacion)==null||o.forEach(l=>{LZe(l.accionesDocente).forEach((u,d)=>{n.set(d,(n.get(d)||0)+u)}),a+=l.accionesDocente.length}),n.forEach((l,c)=>{const u=a>0?l/a*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:l}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((l,c)=>l+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...n.entries()].sort(([,l],[,c])=>c-l);return r.summary.fortalezas=s.slice(0,3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crítico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensión";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentación inmediata y efectiva";default:return`Buen uso de ${l.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar más secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar más ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar más retroalimentación inmediata";default:return`Incrementar el uso de ${l.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(l=>l.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":l.includes("secuencias de preguntas")?'Implementar la técnica de "¿Por qué?" en cascada':l.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificación cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participación estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicación vs. interacción"),r}const UZe=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[n,a]=N.useState(null),[s,o]=N.useState(null),[l,c]=N.useState(!1),u=e.length,d=Object.values(t).reduce((y,w)=>y+w.length,0)+r.length,f=[...Object.values(t).flat(),...r],h=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,m=f.reduce((y,w)=>{const _=new Date(w.fecha).toLocaleDateString("es-ES",{month:"long"});return y[_]=(y[_]||0)+1,y},{}),g=f.reduce((y,w)=>(w.asignaturaInfo&&(y[w.asignaturaInfo]=(y[w.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,w])=>w-y).slice(0,5);f.reduce((y,w)=>{if(!w.horaInicio||!w.horaTermino)return y;const _=new Date("2000/01/01 "+w.horaInicio),B=(new Date("2000/01/01 "+w.horaTermino).getTime()-_.getTime())/(1e3*60);return y+B},0)/f.length;const v=f.filter(y=>{var w,_,F;return((w=y.retroalimentacion)==null?void 0:w.exito)&&((_=y.retroalimentacion)==null?void 0:_.modelo)&&((F=y.retroalimentacion)==null?void 0:F.foco)}).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:i.jsx(Vd,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompañamientos"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:i.jsx(Up,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(ro,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(ts,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentación Completa"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(oc,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),i.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,w])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${w/d*100}%`}})})]})},y))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Zw,{className:"w-5 h-5 text-purple-600"}),"Análisis Inteligente"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Análisis"}),i.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const w=f.find(_=>_.id===y.target.value);o(w||null)},children:[i.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>i.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!n&&i.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(_=>_.docenteInfo===s.docenteInfo&&_.id!==s.id),w=await MZe(s,y);a(w)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:l,children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Zw,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),n&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participación"}),i.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[n.stats.participacion_promedio.toFixed(1),"%"]})]}),i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interacción vs Explicación"}),i.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[n.stats.min_interaccion,"min / ",n.stats.min_explicacion,"min"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[i.jsx(ts,{className:"w-4 h-4"})," Fortalezas"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.fortalezas.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},w))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[i.jsx(fb,{className:"w-4 h-4"})," Áreas de Mejora"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.mejoras.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},w))})]})]}),n.alerts.length>0&&i.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[i.jsx(Xu,{className:"w-4 h-4"})," Alertas"]}),i.jsx("ul",{className:"space-y-2",children:n.alerts.map((y,w)=>i.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},w))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[i.jsx(B_,{className:"w-4 h-4"})," Recomendaciones"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.recomendaciones.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},w))})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(vi,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),i.jsx("div",{className:"space-y-2",children:x.map(([y,w])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${w/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(B_,{className:"w-5 h-5 text-blue-600"}),"Últimos Ciclos OPR"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),i.jsx("tbody",{children:f.sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var w;return i.jsxs("tr",{className:"border-t dark:border-slate-700",children:[i.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),i.jsx("td",{className:"py-2 px-3",children:(w=y.retroalimentacion)!=null&&w.exito?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[i.jsx(ts,{className:"w-3 h-3"})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[i.jsx(fb,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},Wce=rR(),FE="acompanamientos",Vm="ciclos_opr",zm=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},Xce=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},QZe=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=Xce(r);return`videos_opr/${n}/${a}/${s}`},HZe=async(e,t,r)=>{try{if(!I_.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const o=(t||"").split("/");if(o.length>=4&&o[0]==="videos_opr"){const d=o[1],f=o[2],h=o.slice(3).join("/");s=QZe(d,f,h)}else{const d=Date.now(),f=Xce(e.name);s=`videos_opr/general/${d}_${f}`}const l=sE(Wce,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:I_.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=bye(l,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:m!=null&&m.message&&(g=m.message);break}f(new Error(g))},async()=>{try{const m=await qk(u.snapshot.ref);d(m)}catch{f(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},SM=async e=>{try{const t=sE(Wce,e),{items:r,prefixes:n}=await yye(t);await Promise.all(r.map(a=>wye(a))),await Promise.all(n.map(a=>SM(a.fullPath)))}catch{}},VZe=async()=>{try{const e=Ht(mt(tt,FE),ar("fecha","desc"));return(await qr(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:zm(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},zZe=async e=>{try{const t={...e,fecha:cr.fromDate(new Date(e.fecha)),fechaCreacion:cr.now()},r=await mn(mt(tt,FE),t);return{...e,id:r.id,fecha:zm(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},$Ze=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:cr.fromDate(new Date(t.fecha))}:{},fechaModificacion:cr.now()};await Tl(nr(tt,FE,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},GZe=async e=>{try{const t=Ht(mt(tt,Vm),xr("acompanamientoId","==",e)),r=await qr(t),n=$g(tt);r.forEach(a=>n.delete(nr(tt,Vm,a.id))),await n.commit(),await SM(`videos_opr/${e}`),await Ca(nr(tt,FE,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},hW=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:cr.fromDate(new Date(e.fecha)),fechaCreacion:cr.now()};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:cr.fromDate(new Date(e.seguimiento.fecha))});const n=await mn(mt(tt,Vm),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:zm(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},qZe=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=cr.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:cr.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=cr.now(),await Tl(nr(tt,Vm,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},KZe=async e=>{try{const t=Ht(mt(tt,Vm),xr("acompanamientoId","==",e),ar("fecha","desc"));return(await qr(t)).docs.map(a=>{var l;const s=a.data(),o={id:a.id,...s,fecha:zm(s==null?void 0:s.fecha)};return(l=s==null?void 0:s.seguimiento)!=null&&l.fecha&&(o.seguimiento={...s.seguimiento,fecha:zm(s.seguimiento.fecha)}),o})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},WZe=async()=>{try{const e=Ht(mt(tt,Vm),xr("acompanamientoId","==",""),ar("fecha","desc"));return(await qr(e)).docs.map(n=>{var o;const a=n.data(),s={id:n.id,...a,fecha:zm(a==null?void 0:a.fecha)};return(o=a==null?void 0:a.seguimiento)!=null&&o.fecha&&(s.seguimiento={...a.seguimiento,fecha:zm(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},mW=async e=>{try{const t=await kh(nr(tt,Vm,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await SM(`videos_opr/${n}/${e}`),await Ca(nr(tt,Vm,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},XZe=async e=>{try{const t=Ht(mt(tt,FE),xr("docente","==",e),ar("fecha","desc"));return(await qr(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:zm(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},YZe=async e=>{try{const t=Ht(mt(tt,"rubricas_personalizadas"),xr("docente","==",e)),r=await qr(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},JZe=async()=>await Z4(),ZZe=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:o="video/mp4,video/quicktime,video/avi,video/mov",error:l,progress:c=0,allowLink:u=!1})=>{const[d,f]=N.useState(!1),[h,m]=N.useState(!1),[g,x]=N.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=C=>{C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?f(!0):C.type==="dragleave"&&f(!1)},w=C=>{if(C.preventDefault(),C.stopPropagation(),f(!1),C.dataTransfer.files&&C.dataTransfer.files[0]&&!s){const S=C.dataTransfer.files[0];F(S)}},_=C=>{if(C.target.files&&C.target.files[0]&&!s){const S=C.target.files[0];F(S)}},F=C=>{if(C.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(C.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(C)},B=()=>l?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",T=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL válida que comience con http:// o https://");return}r(g),m(!1),x("")}};return i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&i.jsx("button",{type:"button",onClick:()=>m(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"url",value:g,onChange:C=>x(C.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?i.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[i.jsx(ts,{className:"w-5 h-5 text-green-600"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),i.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),i.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:i.jsx(Va,{className:"w-4 h-4"})})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":l?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,onClick:()=>{var C;return!s&&((C=document.getElementById(v))==null?void 0:C.click())},children:[i.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):l?i.jsxs("div",{className:"text-center",children:[i.jsx(Xu,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):i.jsxs("div",{className:"text-center",children:[i.jsx(t1,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),i.jsx("input",{id:v,type:"file",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:o,style:{display:"none"}})]}),s&&i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:`${B()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),l&&i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[i.jsx(Xu,{className:"w-4 h-4 text-red-500"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})]})]})},eet=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,o]=N.useState(!1),[l,c]=N.useState({}),[u,d]=N.useState({}),[f,h]=N.useState({}),[m,g]=N.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=N.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=N.useState(t||x);N.useEffect(()=>{t?(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""})):y(x)},[t,x]);const w=k=>{const{name:U,value:Q}=k.target,K=U.split(".");K.length>1?y(H=>{const q=JSON.parse(JSON.stringify(H));let z=q;for(let W=0;W<K.length-1;W++)z=z[K[W]];return z[K[K.length-1]]=Q,q}):y(H=>({...H,[U]:Q}))},_=(k,U,Q)=>{y(K=>({...K,detallesObservacion:K.detallesObservacion.map(H=>H.id===k?{...H,[U]:Q}:H)}))},F=()=>{const k=v.detallesObservacion[v.detallesObservacion.length-1],U=k&&parseInt(k.minuto.split("-")[1],10)||0,Q=`${U+1}-${U+5}`;y(K=>({...K,detallesObservacion:[...K.detallesObservacion,{id:`row_${Date.now()}`,minuto:Q,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},B=k=>{y(U=>({...U,detallesObservacion:U.detallesObservacion.filter(Q=>Q.id!==k)}))},T=async(k,U)=>{h(Q=>({...Q,[k]:null})),c(Q=>({...Q,[k]:!0})),d(Q=>({...Q,[k]:0}));try{const Q=Date.now(),K=U.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),H=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",q=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",z=`videos_opr/${H}/${q}/${Q}_${K}`,W=await HZe(U,z,ee=>{d(X=>({...X,[k]:ee}))});C(k,W),d(ee=>({...ee,[k]:100}))}catch(Q){const K=(Q==null?void 0:Q.message)||"Error desconocido al subir el archivo";h(H=>({...H,[k]:K})),alert(`Error al subir el video: ${K}`)}finally{c(Q=>({...Q,[k]:!1})),setTimeout(()=>{d(Q=>({...Q,[k]:0}))},2e3)}},C=(k,U)=>{const Q=k.split(".");Q.length>1?y(K=>{const H=JSON.parse(JSON.stringify(K));let q=H;for(let z=0;z<Q.length-1;z++)q=q[Q[z]];return q[Q[Q.length-1]]=U,H}):y(K=>({...K,[k]:U}))},S=k=>{const U=k.split(".");U.length>1?y(Q=>{const K=JSON.parse(JSON.stringify(Q));let H=K;for(let q=0;q<U.length-1;q++)H=H[U[q]];return H[U[U.length-1]]="",K}):y(Q=>({...Q,[k]:""})),h(Q=>({...Q,[k]:null})),d(Q=>({...Q,[k]:0}))},j=async()=>{o(!0);try{const k=ll.currentUser;if(!k){alert("No se pudo obtener el token de autenticación. Inicia sesión nuevamente."),o(!1);return}const U=await k.getIdToken(),Q=await fetch("/api/mejorarTextoOPR",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${U}`},body:JSON.stringify({formData:v})});if(!Q.ok){const H=await Q.json();throw new Error(H.error||"Error al mejorar el texto con IA")}const{retroalimentacion:K}=await Q.json();y(H=>({...H,retroalimentacion:{...H.retroalimentacion,...K}})),alert("Textos mejorados exitosamente con IA")}catch(k){console.error(k),alert(k.message||"No se pudo mejorar la redacción. Intenta nuevamente.")}finally{o(!1)}},L=()=>{const k=new yr,U=k.internal.pageSize.getWidth(),Q=k.internal.pageSize.getHeight(),K=15,H="https://res.cloudinary.com/dwncmu1wu/image/upload/v1753209432/LIR_fpq2lc.png",q=15,z=15;let W=25;const ee=()=>{const oe="Liceo Industrial de Recoleta";k.setFontSize(8),k.setFont("helvetica","normal"),k.text(oe,U/2,Q-10,{align:"center"}),k.setFontSize(10),k.setFont("helvetica","normal");const ie=Q-25;k.line(K,ie,K+70,ie),k.text("Firma Docente",K+15,ie+5),k.line(U-K-70,ie,U-K,ie),k.text("Firma Observador",U-K-55,ie+5)},X=()=>{try{k.addImage(H,"PNG",U-z-10,10,z,q)}catch(oe){console.error("Error al cargar el logo:",oe)}};X();const O=k.addPage;k.addPage=function(){return O.apply(this,arguments),X(),ee(),this};const R=oe=>{W>240&&(k.addPage(),W=25),k.setFontSize(14),k.setFont("helvetica","bold"),k.text(oe,K,W),W+=12};k.setFontSize(18),k.setFont("helvetica","bold"),k.text("Informe de Ciclo OPR",U/2,W,{align:"center"}),W+=18,R("1. Datos Generales");const G=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];gi(k,{body:G,startY:W,theme:"plain",styles:{fontSize:10,cellPadding:3,lineWidth:.1,lineColor:[220,220,220]},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:K,right:K}}),W=k.lastAutoTable.finalY+15,R("2. Registro Detallado de Observación");const Y=v.detallesObservacion.map(oe=>[oe.minuto,oe.accionesDocente,oe.accionesEstudiantes,oe.actividades]);gi(k,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:Y,startY:W,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,cellPadding:4,halign:"center"},styles:{fontSize:9,cellPadding:4,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{left:K,right:K},didDrawPage:oe=>{var ie;W=((ie=oe.cursor)==null?void 0:ie.y)||25}}),W=k.lastAutoTable.finalY+15,R("3. Retroalimentación Docente");const te=[];if(v.retroalimentacion.exito&&te.push(["Éxito:",v.retroalimentacion.exito]),v.retroalimentacion.modelo&&te.push(["Modelo:",v.retroalimentacion.modelo]),v.retroalimentacion.foco&&te.push(["Foco:",v.retroalimentacion.foco]),v.retroalimentacion.elementosIdentificar&&te.push(["Elementos a Identificar:",v.retroalimentacion.elementosIdentificar]),te.length>0&&(gi(k,{body:te,startY:W,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{cellWidth:"auto"}},margin:{left:K,right:K}}),W=k.lastAutoTable.finalY+10),v.retroalimentacion.brecha){W>240&&(k.addPage(),W=40),k.setFontSize(12),k.setFont("helvetica","bold"),k.text("Análisis de Brecha",K,W),W+=8;const oe=[],ie=v.retroalimentacion.brecha.minutoInicial,ue=v.retroalimentacion.brecha.minutoFinal;ie&&ue&&oe.push(["Minutos:",`${ie} a ${ue}`]),v.retroalimentacion.brecha.preguntas&&oe.push(["Preguntas:",v.retroalimentacion.brecha.preguntas]),v.retroalimentacion.brecha.indicadores&&oe.push(["Indicadores:",v.retroalimentacion.brecha.indicadores]),oe.length>0&&(gi(k,{body:oe,startY:W,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:K+5,right:K}}),W=k.lastAutoTable.finalY+10)}R("4. Planificación de Práctica");const ae=[];v.planificacion.preparacion&&ae.push(["Preparación:",v.planificacion.preparacion]),v.planificacion.objetivo&&ae.push(["Objetivo:",v.planificacion.objetivo]),v.planificacion.actividad&&ae.push(["Actividad:",v.planificacion.actividad]),v.planificacion.tiempo&&ae.push(["Tiempo:",v.planificacion.tiempo]),ae.length>0&&(gi(k,{body:ae,startY:W,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:K,right:K}}),W=k.lastAutoTable.finalY+10),ee(),k.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},P=async k=>{if(k.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const U={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(U)}catch(Q){console.error("Error al guardar ciclo OPR:",Q),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),i.jsxs("select",{value:m.docente,onChange:k=>g(U=>({...U,docente:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(k=>i.jsx("option",{value:k,children:k},k))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{value:m.curso,onChange:k=>g(U=>({...U,curso:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),js.map(k=>i.jsx("option",{value:k,children:k},k))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:m.asignatura,onChange:k=>g(U=>({...U,asignatura:k.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),ls.map(k=>i.jsx("option",{value:k,children:k},k))]})]})]})]}),i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:j,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[i.jsx(fR,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),i.jsxs("button",{type:"button",onClick:L,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(jh,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),i.jsxs("form",{onSubmit:P,className:"space-y-8",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Up,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:w,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:w,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),i.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx(ZZe,{label:"Video de observación de clase",onFileChange:k=>T("videoObservacionUrl",k),onLinkChange:k=>C("videoObservacionUrl",k),uploadedUrl:v.videoObservacionUrl,onRemove:()=>S("videoObservacionUrl"),isUploading:!!l.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Eg,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b dark:border-slate-600",children:[i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),i.jsx("th",{className:"p-2"})]})}),i.jsx("tbody",{children:v.detallesObservacion.map(k=>i.jsxs("tr",{className:"border-b dark:border-slate-700",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:k.minuto,onChange:U=>_(k.id,"minuto",U.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:k.accionesDocente,onChange:U=>_(k.id,"accionesDocente",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:k.accionesEstudiantes,onChange:U=>_(k.id,"accionesEstudiantes",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:k.actividades,onChange:U=>_(k.id,"actividades",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),i.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&i.jsx("button",{type:"button",onClick:()=>B(k.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:i.jsx(Va,{className:"w-4 h-4"})})})]},k.id))})]})}),i.jsxs("button",{type:"button",onClick:F,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[i.jsx(yF,{className:"w-4 h-4"})," Agregar Fila"]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(wte,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),i.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),i.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),i.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),i.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Zwe,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),i.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),i.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:w,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),i.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:w,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),i.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(ro,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),i.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),i.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(l).some(Boolean),children:[Object.values(l).some(Boolean)&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},tet=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState(!0),[o,l]=N.useState(!0),[c,u]=N.useState(null),[d,f]=N.useState("list"),[h,m]=N.useState(null),[g,x]=N.useState(null),[v,y]=N.useState("general"),[w,_]=N.useState(!1),[F,B]=N.useState({}),[T,C]=N.useState([]),S=xw,j=N.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[L,P]=N.useState(j),k=N.useCallback(async()=>{s(!0),u(null);try{const te=await VZe();t(te)}catch(te){u("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",te)}finally{s(!1)}},[]),U=N.useCallback(async()=>{l(!0);try{const ae=(await JZe()).filter(oe=>oe.profile==="PROFESORADO").map(oe=>oe.nombreCompleto).sort();n(ae)}catch(te){u("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",te)}finally{l(!1)}},[]),Q=N.useCallback(async()=>{try{const te={};for(const ae of e)if(ae.id)try{const oe=await KZe(ae.id);oe.length>0&&(te[ae.id]=oe)}catch(oe){console.error(`Error loading OPR cycles for ${ae.id}:`,oe)}try{const ae=await WZe();C(ae)}catch(ae){console.error("Error loading standalone OPR cycles:",ae),C([])}B(te)}catch(te){console.error("Error fetching OPR cycles:",te)}},[e]);N.useEffect(()=>{k(),U()},[k,U]),N.useEffect(()=>{e.length>0&&Q()},[e,Q]);const K=(te,ae)=>{if(x(te),ae)P(ae),m(ae.id);else{const oe={id:"temp-"+Date.now(),fecha:te.fecha,docente:te.docenteInfo||"",curso:te.cursoInfo||"",asignatura:te.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};P(oe),m(null)}f("form"),y("opr"),u(null)},H=async()=>{if(!("docente"in L)||!L.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}_(!0),u(null);try{const te=ll.currentUser;if(!te){alert("No se pudo obtener el token de autenticación. Inicia sesión nuevamente."),_(!1);return}const ae=await te.getIdToken(),oe=await fetch("/api/generarFeedbackAcompanamientoDocente",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({formData:L})});if(!oe.ok)throw new Error("Error al generar la retroalimentación con IA");const{feedback:ie}=await oe.json();P(ue=>({...ue,retroalimentacionConsolidada:ie})),alert("Retroalimentación generada exitosamente con IA.")}catch{u("No se pudo generar la retroalimentación automática."),alert("Error: No se pudo generar la retroalimentación automática.")}finally{_(!1)}},q=async te=>{if(te.preventDefault(),!("docente"in L)||!L.docente||!L.curso||!L.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await $Ze(h,L),alert("¡Acompañamiento actualizado correctamente!");else{const ae=await zZe(L);m(ae.id),P(ae),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await k()}catch(ae){const oe=(ae==null?void 0:ae.message)??"Error al guardar el registro de acompañamiento.";u(oe),console.error("❌ Error al guardar:",ae),alert(`Error: ${oe}`)}},z=()=>{P(j),m(null),x(null),f("form"),y("general"),u(null)},W=te=>{P(te),m(te.id),x(null),f("form"),y("general"),u(null)},ee=async te=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await GZe(te),await k(),alert("Registro eliminado exitosamente.")}catch(ae){const oe="No se pudo eliminar el registro.";u(oe),console.error("❌ Error al eliminar:",ae),alert(`Error: ${oe}`)}},X=(te,ae)=>{P(oe=>({...oe,rubricaResultados:{...oe.rubricaResultados||{},[te]:ae}}))},O=()=>{var te;if(!("docente"in L)||!L.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const ae=new yr,oe=ae.internal.pageSize.getWidth(),ie=ae.internal.pageSize.getHeight(),ue=20,Ce=oe-ue*2,ne=(ve,Pe)=>Pe+ve>ie-ue,Be=()=>{const ve=ae.getNumberOfPages();for(let Pe=1;Pe<=ve;Pe++)ae.setPage(Pe),ae.setFontSize(9),ae.setTextColor(128),ae.text(`pág. ${Pe} de ${ve}`,oe-ue,ie-10,{align:"right"})};let je=ue;ae.setFontSize(16),ae.setFont("helvetica","bold"),ae.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",oe/2,je,{align:"center"}),je+=15;const _e=40;if(gi(ae,{startY:je,head:[],body:[["Docente:",L.docente],["Curso:",L.curso],["Asignatura:",L.asignatura],["Fecha:",new Date(L.fecha).toLocaleDateString("es-CL")],["Bloques:",L.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:ue,right:ue}}),je=ae.lastAutoTable.finalY+10,Object.keys(L.rubricaResultados||{}).length>0){ae.setFontSize(14),ae.setFont("helvetica","bold"),ae.text("Evaluación por Indicadores",ue,je),je+=10;const ve=Object.entries(L.rubricaResultados).map(([Pe,Ue])=>{let de;switch(Ue){case 1:de="Débil";break;case 2:de="Incipiente";break;case 3:de="Satisfactorio";break;case 4:de="Avanzado";break;default:de="No evaluado"}return[Pe,de,Ue]});gi(ae,{startY:je,head:[["Indicador","Nivel de Logro","Puntuación"]],body:ve,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:ue,right:ue}})}ae.addPage(),je=ue,ae.setFontSize(14),ae.setFont("helvetica","bold"),ae.text("Observaciones Generales y Sugerencias de Mejora",ue,je),je+=15,L.observacionesGenerales&&(ae.setFontSize(12),ae.setFont("helvetica","bold"),ae.text("Fortalezas:",ue,je),je+=10,ae.setFont("helvetica","normal"),ae.setFontSize(11),ae.splitTextToSize(L.observacionesGenerales,Ce).forEach(Pe=>{ne(7,je)&&(ae.addPage(),je=ue),ae.text(Pe,ue,je,{align:"justify"}),je+=7}),je+=10),L.retroalimentacionConsolidada&&(ne(50,je)&&(ae.addPage(),je=ue),ae.setFontSize(12),ae.setFont("helvetica","bold"),ae.text("Sugerencias de mejora:",ue,je),je+=10,ae.setFont("helvetica","normal"),ae.setFontSize(11),ae.splitTextToSize(L.retroalimentacionConsolidada,Ce).forEach(Pe=>{ne(7,je)&&(ae.addPage(),je=ue),ae.text(Pe,ue,je,{align:"justify"}),je+=7})),Be();const Ae=`Informe_Acompanamiento_${(te=L.docente)==null?void 0:te.replace(/\s+/g,"_")}_${L.curso}_${new Date().toISOString().split("T")[0]}.pdf`;ae.save(Ae)}catch(ae){console.error("❌ Error al generar PDF:",ae),alert("Error al generar el PDF. Intenta nuevamente.")}},R=te=>{P(ae=>({...ae,[te.target.name]:te.target.value}))},G=()=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>{z(),y("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[i.jsx(yF,{className:"w-5 h-5"})," Acompañamiento General"]}),i.jsxs("button",{onClick:()=>{P(j),m(null),x(null),f("form"),y("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[i.jsx(yF,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xu,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(qc,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),i.jsxs("div",{className:"space-y-3",children:[a&&i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),i.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(te=>te.id).length>0?i.jsx("div",{className:"grid gap-3",children:e.filter(te=>te.id).map(te=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(ro,{className:"w-4 h-4 text-amber-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:te.docente})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Curso:"})," ",te.curso," •"," ",i.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",te.asignatura]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(te.fecha).toLocaleDateString("es-CL")]}),te.bloques&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Bloques:"})," ",te.bloques]}),te.retroalimentacionConsolidada&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(ts,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),F[te.id]&&F[te.id].length>0&&i.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[i.jsx(Up,{className:"w-3 h-3"}),F[te.id].length," Ciclo",F[te.id].length>1?"s":""," OPR"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{W(te),y("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:()=>{W(te),y("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),i.jsx("button",{onClick:()=>ee(te.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Va,{className:"w-4 h-4"})})]})]}),F[te.id]&&F[te.id].length>0&&i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[i.jsx(Up,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),i.jsx("div",{className:"space-y-2",children:F[te.id].map(ae=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:ae.nombreCiclo||`Registro N° ${ae.registroN}`}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(ae.fecha).toLocaleDateString("es-CL"),ae.horaInicio&&ae.horaTermino&&i.jsxs("span",{children:[" • ",ae.horaInicio," - ",ae.horaTermino]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>{const oe=e.find(ie=>ie.id===te.id);K(ae,oe)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await mW(ae.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(oe){console.error("Error deleting OPR cycle:",oe),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:i.jsx(Va,{className:"w-3 h-3"})})]})]},ae.id))})]})]},te.id))}):!a&&i.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsx(Vd,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),i.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),T.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(Up,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),i.jsx("div",{className:"space-y-3",children:T.map(te=>i.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Up,{className:"w-4 h-4 text-blue-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:te.nombreCiclo||`Registro N° ${te.registroN}`})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Docente:"})," ",te.docenteInfo||"No especificado"," •"," ",i.jsx("span",{className:"font-medium",children:"Curso:"})," ",te.cursoInfo||"No especificado"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(te.fecha).toLocaleDateString("es-CL"),te.horaInicio&&te.horaTermino&&i.jsxs("span",{children:[" • ",te.horaInicio," - ",te.horaTermino]})]}),te.videoObservacionUrl&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(ts,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{K(te)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await mW(te.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(ae){console.error("Error deleting standalone OPR cycle:",ae),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Va,{className:"w-4 h-4"})})]})]})},te.id))})]})]}),Y=()=>{const te=h?e.find(oe=>oe.id===h):null,ae={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in L&&L.docente||"",curso:"curso"in L&&L.curso||"",asignatura:"asignatura"in L&&L.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:v==="general"?h?"Editando Acompañamiento General":"Nuevo Acompañamiento General":g?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),i.jsx("button",{type:"button",onClick:()=>{f("list"),x(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>y("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Vd,{className:"w-4 h-4"}),"Acompañamiento General"]})}),i.jsx("button",{onClick:()=>y("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Up,{className:"w-4 h-4"}),"Ciclos OPR"]})}),i.jsx("button",{onClick:()=>y("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(qc,{className:"w-4 h-4"}),"Dashboard"]})})]})}),c&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xu,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),v==="dashboard"&&i.jsx("div",{className:"animate-fade-in",children:i.jsx(UZe,{acompanamientos:e,ciclosOPR:F,standaloneCiclos:T})}),v==="general"&&i.jsxs("form",{onSubmit:q,className:"space-y-8",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[i.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(C5,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:H,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:w,children:[i.jsx(fR,{className:"w-4 h-4"}),w?"Generando...":"Generar Retroalimentación con IA"]}),i.jsxs("button",{type:"button",onClick:O,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(jh,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in L&&L.retroalimentacionConsolidada&&i.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[i.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(ts,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:i.jsx("textarea",{readOnly:!0,rows:8,value:L.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),i.jsxs("select",{name:"docente",value:"docente"in L?L.docente:"",onChange:R,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:o,children:[i.jsx("option",{value:"",children:o?"Cargando profesores...":"Seleccione un docente"}),r.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),i.jsxs("select",{name:"curso",value:"curso"in L?L.curso:"",onChange:R,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),js.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),i.jsxs("select",{name:"asignatura",value:"asignatura"in L?L.asignatura:"",onChange:R,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),ls.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),i.jsx("input",{type:"text",name:"bloques",value:"bloques"in L?L.bloques:"",onChange:R,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),i.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in L?L.observacionesGenerales:"",onChange:R,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(qc,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:S.map(oe=>i.jsx(st.Fragment,{children:oe.criteria.map((ie,ue)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[ue===0&&i.jsx("td",{rowSpan:oe.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:oe.domain}),i.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ie.name}),ie.levels.map((Ce,ne)=>{const Be=ne+1,je="rubricaResultados"in L&&L.rubricaResultados[ie.name]===Be,_e=je?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return i.jsx("td",{onClick:()=>X(ie.name,Be),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${_e} ${je?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${Be} para ${ie.name}`,children:i.jsxs("div",{className:"text-xs leading-relaxed",children:[je&&i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx(ts,{className:"w-3 h-3 text-amber-600"}),i.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),Ce]})},Be)})]},ie.name))},oe.domain))})]})}),Object.keys(L.rubricaResultados||{}).length>0&&i.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[i.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[i.jsx(qc,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(L.rubricaResultados).length," criterios evaluados)"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(L.rubricaResultados).map(([oe,ie])=>i.jsxs("div",{className:"flex justify-between items-center py-1",children:[i.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[oe,":"]}),i.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${ie===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":ie===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":ie===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",ie]})]},oe))})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:w,children:[w&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),v==="opr"&&i.jsx(eet,{acompanamiento:te||ae,cicloToEdit:g,profesores:r,onSave:async oe=>{try{const ie=(te==null?void 0:te.id)||typeof oe.acompanamientoId=="string"&&oe.acompanamientoId||void 0;if(g&&g.id)await qZe(g.id,oe),alert("Ciclo OPR actualizado exitosamente");else{if(!ie||String(ie).startsWith("temp-")){const ue={...oe,acompanamientoId:""};await hW(ue)}else{const ue={...oe,acompanamientoId:String(ie)};await hW(ue)}alert("Ciclo OPR guardado exitosamente")}x(null),await k(),await Q(),f("list")}catch(ie){console.error("❌ Error al guardar ciclo OPR:",ie);const ue=ie.message||"Error desconocido al guardar el ciclo OPR";u(ue),alert(`Error al guardar el ciclo OPR: ${ue}`)}},onCancel:()=>{x(null),f("list")}})]})};return a||o?i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",o&&" Cargando profesores..."]})]})})}):i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?G():Y()})})},kM="mensajes_internos",ret="usuarios",Yce="mensajes_read_status",Jce=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},net=(e,t)=>{const r=Ht(mt(tt,kM),xr("participants","array-contains",e),ar("fecha","desc"));return mr(r,a=>{const s=a.docs.map(o=>Jce(o));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},aet=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:cr.fromDate(new Date)};await mn(mt(tt,kM),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},set=async e=>{try{const t=nr(tt,kM,e);await Ca(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},iet=(e,t)=>{const r=nr(tt,Yce,e);return mr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},oet=async(e,t)=>{try{const r=nr(tt,Yce,e);await yi(r,{messages:Hee(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},cet=e=>{const t=Ht(mt(tt,ret),ar("nombreCompleto","asc"));return mr(t,n=>{const a=n.docs.map(s=>Jce(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},uet=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=N.useState("inbox"),[a,s]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(null),[d,f]=N.useState({announcements:[],messages:[]}),[h,m]=N.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,v]=N.useState(g);N.useEffect(()=>{if(!e.id||!e.email){m(!1);return}m(!0);const C=net(e.email,L=>{s(L),m(!1)}),S=cet(l),j=iet(e.id,L=>{f(L),t()});return()=>{C(),S(),j()}},[e.id,e.email,t]);const y=C=>{u(C),r==="inbox"&&!d.messages.includes(C.id)&&oet(e.id,C.id).catch(S=>{console.error("Failed to mark message as read:",S)})},w=async C=>{if(C.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const S={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await aet(S),v(g),n("sent")}catch(j){console.error("Error sending message:",j),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},_=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await set(C),u(null)}catch(S){console.error("Error deleting message:",S),alert("No se pudo eliminar el mensaje.")}},F=C=>{v({para:C.de,asunto:`Re: ${C.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${C.de}
Fecha: ${new Date(C.fecha).toLocaleString("es-CL")}

${C.cuerpo}`}),n("compose")},B=N.useMemo(()=>a.filter(C=>C.para===e.email),[a,e.email]),T=N.useMemo(()=>a.filter(C=>C.de===e.email),[a,e.email]);return h?i.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[i.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[i.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:i.jsx("button",{onClick:()=>{n("compose"),u(null),v(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),i.jsxs("nav",{className:"p-2 space-y-1",children:[i.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),i.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&i.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?B:T).map(C=>{const S=r==="inbox"&&!d.messages.includes(C.id);return i.jsxs("div",{onClick:()=>y(C),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===C.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("p",{className:`font-bold truncate ${S?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?C.de:`Para: ${C.para}`}),S&&i.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),i.jsx("p",{className:`truncate text-sm ${S?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:C.asunto}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(C.fecha).toLocaleString("es-CL")})]},C.id)})}),i.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),i.jsxs("select",{id:"para",value:x.para,onChange:C=>v({...x,para:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione un destinatario..."}),o.filter(C=>C.email!==e.email).map(C=>i.jsxs("option",{value:C.email,children:[C.nombreCompleto," (",C.email,")"]},C.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),i.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:C=>v({...x,asunto:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),i.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:C=>v({...x,cuerpo:C.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?i.jsxs("div",{children:[i.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[i.jsx("strong",{children:"De:"})," ",c.de," ",i.jsx("br",{}),i.jsx("strong",{children:"Para:"})," ",c.para," ",i.jsx("br",{}),i.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),i.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),i.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&i.jsx("button",{onClick:()=>F(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),i.jsx("button",{onClick:()=>_(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:i.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},nj="proyectos_interdisciplinarios",jM="entregas_interdisciplinarias",det="usuarios",BM=e=>{const t=e.data();return{id:e.id,...t}},fet=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),Aet=e=>{const t=Ht(mt(tt,nj),ar("nombreProyecto","asc"));return mr(t,n=>{try{const a=n.docs.map(s=>fet(BM(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},het=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:cr.now(),updatedAt:cr.now()};return(await mn(mt(tt,nj),t)).id},pW=async(e,t)=>{const{id:r,...n}=t,a=nr(tt,nj,e);await yi(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:cr.now()},{merge:!0})},met=async e=>{const t=nr(tt,nj,e),r=Ht(mt(tt,jM),xr("planificacionId","==",e)),n=await qr(r),a=$g(tt);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},pet=(e,t)=>{const r=Ht(mt(tt,jM),xr("planificacionId","==",e));return mr(r,a=>{const s=a.docs.map(o=>BM(o));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},get=async(e,t)=>{const r=nr(tt,jM,e);await yi(r,{feedbackProfesor:t,fechaFeedback:cr.fromDate(new Date)},{merge:!0})},Zce=e=>{const t=Ht(mt(tt,det));return mr(t,n=>{const a=n.docs.map(s=>BM(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},zI={},qO={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},Pw=({href:e})=>{if(!e)return i.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return i.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx(aEe,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},jp=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>i.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),xet=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=N.useState(null),a=N.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=N.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),o=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},l=({data:c,onClose:u,onSave:d})=>{const[f,h]=N.useState(c.activity),m=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(ih,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),i.jsx("input",{name:"nombre",value:f.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),i.jsx("input",{name:"responsables",value:f.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),i.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),i.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),i.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),i.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Xu,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):i.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:i.jsx(Wf,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),h=d.type==="activity";return i.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&n({planId:d.planId,activity:d}),children:[i.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),i.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),i.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(Pw,{href:d.recursoUrl})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(o,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&i.jsx(l,{data:r,onClose:()=>n(null),onSave:t})]})},vet=({planificaciones:e,onBack:t})=>{const r=N.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var m;(m=h.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(qO).forEach(([x,v])=>{v.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=N.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=N.useMemo(()=>{const c=e.length,u=e.reduce((h,m)=>{var g;return h+(((g=m.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,m)=>{var g;return h+(((g=m.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((m,g)=>g[1]-m[1]).slice(0,20),h=Math.max(...f.map(([,m])=>m));return h?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),i.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([m,g])=>{const x=Math.max(.8,g/h*2),v=Math.max(.6,g/h);return i.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},o=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:i.jsx(Zw,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),i.jsx("div",{className:"space-y-4",children:Object.keys(qO).map(h=>{const m=c[h]||0,g=d>0?m/d*100:0,x=f[h]||"bg-slate-400";return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},l=({icon:c,title:u,value:d,description:f,color:h})=>i.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold",children:d}),i.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),i.jsx("p",{className:"text-white/90 text-sm",children:f})]});return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:i.jsx(B_,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(t2,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(l,{icon:i.jsx(Ng,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),i.jsx(l,{icon:i.jsx(Bwe,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),i.jsx(l,{icon:i.jsx(Vd,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),i.jsx(l,{icon:i.jsx(vi,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(o,{data:r.categoriaCount}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(bw,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),i.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),i.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(s,{data:n.palabrasCount,title:"Contenidos Más Frecuentes"}),i.jsx(s,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},bet=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=N.useState([]),[s,o]=N.useState([]),[l,c]=N.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=N.useState(null);N.useEffect(()=>{const v=Zce(a),y=pet(e.id,o);return()=>{v(),y()}},[e.id]);const f=N.useMemo(()=>n.filter(v=>v.profile===Gt.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async v=>{d(v.id);{alert("La API Key de Gemini no está configurada."),d(null);return}},m=v=>v.map(y=>{var w;return((w=r.find(_=>_.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(t2,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),i.jsx("select",{value:l.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>i.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),i.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(v=>{const y=s.find(w=>w.tareaId===l.id&&w.estudianteId===v.id);return i.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[i.jsx(cR,{className:"w-4 h-4"})," Entregado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[i.jsx(Xu,{className:"w-4 h-4"})," Pendiente"]})})]}),y?i.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),i.jsx(Pw,{href:y.enlaceUrl})]}),y.archivoAdjunto&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),i.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[i.jsx(jh,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:w=>get(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),i.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(ng,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):i.jsxs("div",{className:"text-center py-6",children:[i.jsx(Xu,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},v.id)})})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Xu,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),i.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[i.jsx(t2,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},yet=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:o})=>{const[l,c]=N.useState(null),u=zI==null?void 0:zI.VITE_GEMINI_API_KEY,d=h=>h.map(m=>{var g;return((g=o.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),f=async h=>{var m,g,x;if(!u){alert("La API Key de Gemini no está configurada.");return}if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(h);try{const y=new DS(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);n(_.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);a(_.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,F=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),B=JSON.parse(F);s({actividades:(m=B.actividades)==null?void 0:m.map(T=>({...T,id:crypto.randomUUID()})),fechasClave:(g=B.fechasClave)==null?void 0:g.map(T=>({id:crypto.randomUUID(),nombre:T.nombre,fecha:T.fecha,recursoUrl:T.recursoUrl})),tareas:(x=B.tareas)==null?void 0:x.map((T,C)=>({...T,id:crypto.randomUUID(),numero:C+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:l==="obj"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(ng,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:l==="ind"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(ng,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("est"),disabled:l!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:l==="est"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",i.jsx("span",{children:"Generando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(ng,{className:"w-4 h-4"})," ",i.jsx("span",{children:"Estructura IA"})]})})]})},wet=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=N.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[o,l]=N.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=N.useState(null),[d,f]=N.useState({nombre:"",fecha:"",recursoUrl:""}),[h,m]=N.useState(null),[g,x]=N.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[v,y]=N.useState(null);N.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const w=q=>s(z=>({...z,[q.target.name]:q.target.value})),_=q=>{s(z=>{const W=z.asignaturas,ee=W.includes(q)?W.filter(O=>O!==q):[...W,q];let X=z.contenidosPorAsignatura;return ee.includes(q)&&!W.includes(q)&&(X=[...X,{asignatura:q,contenidos:"",habilidades:[]}]),!ee.includes(q)&&W.includes(q)&&(X=X.filter(O=>O.asignatura!==q)),{...z,asignaturas:ee,contenidosPorAsignatura:X}})},F=q=>s(z=>({...z,cursos:z.cursos.includes(q)?z.cursos.filter(W=>W!==q):[...z.cursos,q]})),B=q=>s(z=>({...z,docentesResponsables:z.docentesResponsables.includes(q)?z.docentesResponsables.filter(W=>W!==q):[...z.docentesResponsables,q]})),T=(q,z,W)=>s(ee=>({...ee,contenidosPorAsignatura:ee.contenidosPorAsignatura.map(X=>X.asignatura===q?{...X,[z]:W}:X)})),C=(q,z)=>s(W=>({...W,contenidosPorAsignatura:W.contenidosPorAsignatura.map(ee=>ee.asignatura===q?{...ee,habilidades:ee.habilidades.includes(z)?ee.habilidades.filter(X=>X!==z):[...ee.habilidades,z]}:ee)})),S=()=>{if(!o.nombre||!o.fechaInicio||!o.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}c?(s(q=>({...q,actividades:q.actividades.map(z=>z.id===c?{...o,id:c}:z)})),u(null)):s(q=>({...q,actividades:[...q.actividades||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},j=q=>{u(q.id),l(q)},L=q=>{window.confirm("¿Eliminar esta actividad?")&&s(z=>({...z,actividades:z.actividades.filter(W=>W.id!==q)}))},P=()=>{if(!d.nombre||!d.fecha){alert("Nombre y fecha son obligatorios para el hito.");return}h?(s(q=>({...q,fechasClave:q.fechasClave.map(z=>z.id===h?{...d,id:h}:z)})),m(null)):s(q=>({...q,fechasClave:[...q.fechasClave||[],{...d,id:crypto.randomUUID()}]})),f({nombre:"",fecha:"",recursoUrl:""})},k=q=>{m(q.id),f(q)},U=q=>{window.confirm("¿Eliminar este hito?")&&s(z=>({...z,fechasClave:z.fechasClave.filter(W=>W.id!==q)}))},Q=()=>{var q,z;if(!g.instrucciones||!g.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}if(v){const W={...g,id:v,numero:((q=a.tareas.find(ee=>ee.id===v))==null?void 0:q.numero)||0};s(ee=>({...ee,tareas:ee.tareas.map(X=>X.id===v?W:X)})),y(null)}else{const W={id:crypto.randomUUID(),numero:(((z=a.tareas)==null?void 0:z.length)||0)+1,...g};s(ee=>({...ee,tareas:[...ee.tareas||[],W]}))}x({instrucciones:"",fechaEntrega:"",recursoUrl:""})},K=q=>{y(q.id),x({instrucciones:q.instrucciones,fechaEntrega:q.fechaEntrega,recursoUrl:q.recursoUrl||""})},H=q=>{window.confirm("¿Eliminar esta tarea?")&&s(z=>({...z,tareas:z.tareas.filter(W=>W.id!==q)}))};return i.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:i.jsx(Ng,{className:"w-10 h-10 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx(jp,{icon:i.jsx(Vd,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:i.jsx(yet,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:q=>s(z=>({...z,objetivos:q})),onIndicadores:q=>s(z=>({...z,indicadoresLogro:q})),onEstructura:q=>s(z=>{var W,ee,X;return{...z,actividades:(W=q.actividades)!=null&&W.length?q.actividades:z.actividades,fechasClave:(ee=q.fechasClave)!=null&&ee.length?q.fechasClave:z.fechasClave,tareas:(X=q.tareas)!=null&&X.length?q.tareas:z.tareas}})}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),i.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:w,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),i.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:w,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),i.jsx(jp,{icon:i.jsx(ro,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:i.jsx("div",{className:"space-y-3",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(q=>i.jsx("button",{type:"button",onClick:()=>B(q.id),className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(q.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(q.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:i.jsx(a2,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-sm",children:q.nombreCompleto}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:q.email})]})]})},q.id))})})}),i.jsx(jp,{icon:i.jsx(vw,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:js.map(q=>i.jsx("button",{type:"button",onClick:()=>F(q),className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(q)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:q},q))})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(jp,{icon:i.jsx(vi,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:ls.map(q=>i.jsx("button",{type:"button",onClick:()=>_(q),className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(q)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:q},q))})]}),a.contenidosPorAsignatura.length>0&&i.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(q=>i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[i.jsx(vi,{className:"w-4 h-4"})," ",q.asignatura]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),i.jsx("textarea",{value:q.contenidos,onChange:z=>T(q.asignatura,"contenidos",z.target.value),placeholder:`Detalle los contenidos específicos de ${q.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),i.jsx("div",{className:"space-y-2",children:Object.entries(qO).map(([z,W])=>i.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[i.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[z,":"]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:W.map(ee=>i.jsx("button",{type:"button",onClick:()=>C(q.asignatura,ee),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${q.habilidades.includes(ee)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:ee},ee))})]},z))}),q.habilidades.length>0&&i.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[i.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:q.habilidades.map(z=>i.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:z},z))})]})]})]})]},q.asignatura))]})]})}),i.jsx(jp,{icon:i.jsx(fb,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:i.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:w,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsx(jp,{icon:i.jsx(qc,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:i.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:w,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsxs(jp,{icon:i.jsx(oc,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Wf,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),i.jsx("input",{value:o.nombre,onChange:q=>l({...o,nombre:q.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),i.jsx("input",{type:"date",value:o.fechaInicio,onChange:q=>l({...o,fechaInicio:q.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),i.jsx("input",{type:"date",value:o.fechaFin,onChange:q=>l({...o,fechaFin:q.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:o.recursoUrl||"",onChange:q=>l({...o,recursoUrl:q.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx("button",{type:"button",onClick:S,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:c?"Actualizar":i.jsxs(i.Fragment,{children:[i.jsx(_o,{className:"w-4 h-4"})," Agregar"]})})})]}),!!a.actividades.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.actividades.map(q=>i.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:q.nombre})," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",q.fechaInicio," - ",q.fechaFin,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pw,{href:q.recursoUrl}),i.jsx("button",{onClick:()=>j(q),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(ih,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>L(q.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Va,{className:"w-3 h-3"})})]})]},q.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(cR,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[i.jsxs("div",{className:"sm:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),i.jsx("input",{value:d.nombre,onChange:q=>f({...d,nombre:q.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),i.jsx("input",{type:"date",value:d.fecha,onChange:q=>f({...d,fecha:q.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"sm:col-span-1",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:d.recursoUrl||"",onChange:q=>f({...d,recursoUrl:q.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("button",{type:"button",onClick:P,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:h?"Actualizar":i.jsxs(i.Fragment,{children:[i.jsx(_o,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.fechasClave.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.fechasClave.map(q=>i.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:q.nombre})," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",q.fecha,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pw,{href:q.recursoUrl}),i.jsx("button",{onClick:()=>k(q),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(ih,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>U(q.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Va,{className:"w-3 h-3"})})]})]},q.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Zw,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-5",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones"}),i.jsx("input",{value:g.instrucciones,onChange:q=>x({...g,instrucciones:q.target.value}),placeholder:"Descripción de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),i.jsx("input",{type:"date",value:g.fechaEntrega,onChange:q=>x({...g,fechaEntrega:q.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:g.recursoUrl||"",onChange:q=>x({...g,recursoUrl:q.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx("button",{type:"button",onClick:Q,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:v?i.jsx(ih,{className:"w-4 h-4"}):i.jsx(_o,{className:"w-4 h-4"})})})]}),!!a.tareas.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.tareas.map(q=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",q.numero]}),i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:q.instrucciones})]}),i.jsxs("div",{className:"text-right space-y-1",children:[i.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:q.fechaEntrega}),"recursoUrl"in q?i.jsx(Pw,{href:q.recursoUrl}):i.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2 pl-2 border-l ml-2",children:[i.jsx("button",{onClick:()=>K(q),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(ih,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>H(q.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Va,{className:"w-3 h-3"})})]})]},q.id))})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),i.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},gW=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState(!0),[o,l]=N.useState("list"),[c,u]=N.useState(null),[d,f]=N.useState(null),[h,m]=N.useState(null),[g,x]=N.useState("all"),v=N.useMemo(()=>g==="all"?e:e.filter(S=>S.id===g),[e,g]);N.useEffect(()=>{s(!0);const S=Zce(L=>{const P=L.filter(k=>k.profile===Gt.PROFESORADO);n(P)}),j=Aet(L=>{const P=L.map(k=>({...k,docentesResponsables:Array.isArray(k.docentesResponsables)?k.docentesResponsables:[k.docentesResponsables].filter(Boolean),contenidosPorAsignatura:k.contenidosPorAsignatura||[],actividades:k.actividades||[],fechasClave:k.fechasClave||[]}));t(P),s(!1)});return()=>{S(),j()}},[]);const y=N.useCallback(async(S,j)=>{const L=e.find(k=>k.id===S);if(!L)return;const P={...L,actividades:(L.actividades||[]).map(k=>k.id===j.id?j:k)};await pW(S,P)},[e]),w=async S=>{try{const j=S.id&&String(S.id).length>0,L={...S};if(j){const{id:P,...k}=L;await pW(S.id,k)}else delete L.id,await het(L);l("list"),u(null)}catch(j){console.error("Error al guardar la planificación:",j),alert("No se pudo guardar la planificación.")}},_=S=>{u(S),l("form")},F=async S=>{if(!S){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await met(S)}catch(j){console.error(j),alert("No se pudo eliminar la planificación.")}},B=()=>{u(null),l("form")},T=async S=>{f(S.id);try{const j=new yr("p","mm","a4"),L=j.internal.pageSize.getHeight(),P=j.internal.pageSize.getWidth(),k=15,U=P-k*2;let Q=k,K=1;const z=await(await fetch("https://res.cloudinary.com/dwncmu1wu/image/upload/v1756260600/Captura_de_pantalla_2025-08-26_a_la_s_10.09.17_p._m._aakgkt.png")).blob(),W=await new Promise((oe,ie)=>{const ue=new FileReader;ue.onloadend=()=>oe(ue.result),ue.onerror=ie,ue.readAsDataURL(z)}),ee=()=>{j.addImage(W,"PNG",k,Q,U,20),Q+=25},X=()=>{j.setFont("helvetica","normal"),j.setFontSize(9),j.setTextColor(149,165,166);const oe=`Página ${K}`,ie=j.getStringUnitWidth(oe)*j.getFontSize()/j.internal.scaleFactor;j.text(oe,(P-ie)/2,L-10)},O=oe=>Q+oe>L-k?(X(),j.addPage(),K++,Q=k,ee(),!0):!1,R=oe=>{O(15),j.setFont("helvetica","bold"),j.setFontSize(14),j.setTextColor(44,62,80),j.text(oe,k,Q),Q+=8},G=oe=>{if(!oe||!oe.trim())return;j.setFont("helvetica","normal"),j.setFontSize(11),j.setTextColor(86,101,115);const ie=j.splitTextToSize(oe,U);O(ie.length*5+5),j.text(ie,k,Q),Q+=ie.length*5+8};ee(),j.setFont("helvetica","bold"),j.setFontSize(22),j.setTextColor(41,128,185);const Y=j.splitTextToSize(S.nombreProyecto,U);O(Y.length*10+10),j.text(Y,k,Q),Q+=Y.length*9+10,gi(j,{startY:Q,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(oe=>oe.map(ie=>{var ue;return((ue=r.find(Ce=>Ce.id===ie))==null?void 0:ue.nombreCompleto)||ie}).join(", "))(S.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},S.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},S.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold",fillColor:[245,245,245]}},didDrawPage:oe=>{oe.pageNumber>1&&(Q=k,ee())}}),Q=j.lastAutoTable.finalY+10,R("Descripción del Proyecto"),G(S.descripcionProyecto),R("Objetivos de Aprendizaje"),G(S.objetivos),R("Indicadores de Logro"),G(S.indicadoresLogro),S.contenidosPorAsignatura&&S.contenidosPorAsignatura.length>0&&(R("Contenidos y Habilidades por Asignatura"),S.contenidosPorAsignatura.forEach(oe=>{var ie;O(15),j.setFont("helvetica","bold"),j.setFontSize(12),j.setTextColor(52,73,94),j.text(`${oe.asignatura}:`,k,Q),Q+=7,oe.contenidos&&G(`Contenidos: ${oe.contenidos}`),(ie=oe.habilidades)!=null&&ie.length&&G(`Habilidades: ${oe.habilidades.join(", ")}`)}));const ae={theme:"striped",headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},styles:{fontSize:10,cellPadding:2.5,halign:"left"},didDrawPage:oe=>{oe.pageNumber>K&&(K=oe.pageNumber,X()),oe.pageNumber>1&&(Q=k,ee())}};if(S.actividades&&S.actividades.length>0&&(R("Cronograma de Actividades"),gi(j,{...ae,startY:Q,head:[["Actividad","Inicio","Fin","Recurso"]],body:S.actividades.map(oe=>[oe.nombre,oe.fechaInicio,oe.fechaFin,oe.recursoUrl||"—"])}),Q=j.lastAutoTable.finalY+10),S.fechasClave&&S.fechasClave.length>0&&(R("Hitos y Fechas Clave"),gi(j,{...ae,startY:Q,head:[["Hito","Fecha","Recurso"]],body:S.fechasClave.map(oe=>[oe.nombre,oe.fecha,oe.recursoUrl||"—"])}),Q=j.lastAutoTable.finalY+10),S.tareas&&S.tareas.length>0){R("Tareas para Estudiantes");const oe=S.tareas.map(ie=>[String(ie.numero||""),ie.instrucciones,ie.fechaEntrega,ie.recursoUrl||"—"]);gi(j,{...ae,startY:Q,head:[["#","Instrucciones","Entrega","Recurso"]],body:oe}),Q=j.lastAutoTable.finalY+10}X(),j.save(`Proyecto_${S.nombreProyecto.replace(/\s/g,"_")}.pdf`)}catch(j){console.error("Error al generar PDF:",j),alert("No se pudo generar el PDF. Verifique la consola para más detalles.")}finally{f(null)}},C=S=>S.map(j=>{var L;return((L=r.find(P=>P.id===j))==null?void 0:L.nombreCompleto)||j}).join(", ");return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?i.jsx(bet,{plan:h,onBack:()=>m(null),availableTeachers:r}):o==="dashboard"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>l("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),i.jsx(vet,{planificaciones:e,onBack:()=>l("list")})]}):o==="form"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>{l("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsx(wet,{initialPlan:c,onSave:w,onCancel:()=>{l("list"),u(null)},availableTeachers:r})]}):i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:i.jsx(Ng,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{type:"button",onClick:()=>l("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[i.jsx(B_,{className:"w-5 h-5"})," Ver Dashboard"]}),i.jsxs("button",{type:"button",onClick:B,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[i.jsx(_o,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:i.jsx(Ng,{className:"w-12 h-12 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),i.jsxs("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(_o,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(S=>i.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[i.jsx("div",{className:"flex justify-between items-start mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:S.nombreProyecto}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(vw,{className:"w-4 h-4"}),i.jsxs("span",{children:["Cursos: ",S.cursos.join(", ")]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(ro,{className:"w-4 h-4"}),i.jsxs("span",{children:["Profesores: ",C(S.docentesResponsables)]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(vi,{className:"w-4 h-4"}),i.jsxs("span",{children:["Asignaturas: ",S.asignaturas.length]})]})]})]})}),!!S.descripcionProyecto&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:S.descripcionProyecto}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>m(S),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[i.jsx(cR,{className:"w-4 h-4"})," Entregas"]}),i.jsxs("button",{type:"button",onClick:()=>T(S),disabled:d===S.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===S.id?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):i.jsx(jh,{className:"w-4 h-4"}),"PDF"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>_(S),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:i.jsx(ih,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",onClick:()=>F(S.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:i.jsx(Va,{className:"w-4 h-4"})})]})]})]},S.id))})]}),e.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tEe,{className:"w-5 h-5 text-slate-600"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),i.jsxs("select",{value:g,onChange:S=>x(S.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[i.jsx("option",{value:"all",children:"Todos"}),e.map(S=>i.jsx("option",{value:S.id,children:S.nombreProyecto},S.id))]})]})]}),i.jsx("div",{id:"gantt-container-vertical",children:i.jsx(xet,{planificaciones:v,onActivityUpdate:y})})]})]})},Fb="panol_maquinas",OE="panol_registros",Eet=e=>{const t=Ht(mt(tt,Fb),ar("nombre","asc"));return mr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},Net=e=>{const t=Ht(mt(tt,OE),ar("fecha","desc"));return mr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},Cet=async e=>(await mn(mt(tt,Fb),{...e,createdAt:Na(),updatedAt:Na()})).id,_et=async(e,t)=>{await Tl(nr(tt,Fb,e),{...t,updatedAt:Na()})},ket=async e=>{const t=Ht(mt(tt,OE),xr("maquinaId","==",e));if(!(await qr(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await Ca(nr(tt,Fb,e))},jet=async e=>(await mn(mt(tt,OE),{...e,createdAt:Na(),updatedAt:Na()})).id,Bet=async(e,t)=>{await Tl(nr(tt,OE,e),{...t,updatedAt:Na()})},Tet=async e=>{await Ca(nr(tt,OE,e))},Iet=async()=>{if(!(await qr(mt(tt,Fb))).empty)return;const t=$g(tt);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(n=>{const a=nr(mt(tt,Fb));t.set(a,{...n,createdAt:Na(),updatedAt:Na()})}),await t.commit()},Fet=()=>{var K;const[e,t]=N.useState([]),[r,n]=N.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,o]=N.useState(a),[l,c]=N.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=N.useState(u),[h,m]=N.useState(null),[g,x]=N.useState({maquinaId:"",curso:"",profesor:"",fecha:""});N.useEffect(()=>{Iet().catch(console.error);const H=Eet(t),q=Net(n);return()=>{H&&H(),q&&q()}},[]);const v=async H=>{if(H.preventDefault(),!!d.nombre.trim())try{h?await _et(h.id,{...d}):await Cet({...d}),f(u),m(null)}catch(q){alert(q.message||"Error al guardar máquina")}},y=N.useCallback(async H=>{try{await ket(H)}catch(q){alert(q.message||"Error al eliminar máquina")}},[]),w=async H=>{H.preventDefault();const q=l||s;if(!q.curso||!q.profesorResponsable.trim()||!q.maquinaId||Number(q.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(l){const{id:z,...W}=l;await Bet(z,W)}else await jet({...s});o(a),c(null)}catch(z){alert(z.message||"Error al guardar registro")}},_=N.useCallback(async H=>{try{await Tet(H)}catch(q){alert(q.message||"Error al eliminar registro")}},[]),F=N.useMemo(()=>r.filter(H=>(g.maquinaId===""||H.maquinaId===g.maquinaId)&&(g.curso===""||H.curso===g.curso)&&(g.profesor===""||H.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||H.fecha===g.fecha)).sort((H,q)=>new Date(q.fecha).getTime()-new Date(H.fecha).getTime()),[r,g]),B=N.useMemo(()=>new Map(e.map(H=>[H.id,H])),[e]),T=N.useMemo(()=>F.reduce((H,q)=>H+(Number(q.totalHoras)||0),0),[F]),C=N.useMemo(()=>{const H=new Map;F.forEach(z=>{var ee;const W=((ee=B.get(z.maquinaId))==null?void 0:ee.nombre)||"N/A";H.set(W,(H.get(W)||0)+(Number(z.totalHoras)||0))});const q=Array.from(H.entries()).map(([z,W])=>({maquina:z,horas:Number(W.toFixed(2))}));return q.sort((z,W)=>W.horas-z.horas),q},[F,B]),S=()=>{const H=F.map(W=>{var ee,X;return{Fecha:W.fecha,Curso:W.curso,Profesor:W.profesorResponsable,Máquina:((ee=B.get(W.maquinaId))==null?void 0:ee.nombre)||"N/A",Especialidad:((X=B.get(W.maquinaId))==null?void 0:X.especialidad)||"N/A","Total Horas":W.totalHoras,Observaciones:W.observaciones}}),q=Is.json_to_sheet(H),z=Is.book_new();Is.book_append_sheet(z,q,"RegistrosPañol"),i1(z,"Registros_Pañol.xlsx")},j=()=>{const H=new yr;gi(H,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:F.map(q=>{var z,W;return[q.fecha,q.curso,q.profesorResponsable,((z=B.get(q.maquinaId))==null?void 0:z.nombre)||"N/A",((W=B.get(q.maquinaId))==null?void 0:W.especialidad)||"N/A",q.totalHoras,q.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:q=>{H.setFontSize(12),H.setFont("helvetica","bold"),H.text("LICEO INDUSTRIAL DE RECOLETA",q.settings.margin.left,14),H.setFontSize(10),H.setFont("helvetica","normal"),H.text("Informe de Registros de Pañol",q.settings.margin.left,20)}}),H.save("Registros_Pañol.pdf")},L="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",P=(H,q)=>i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q}`,children:H}),k=({icon:H,label:q,value:z,accent:W="from-indigo-500 to-sky-500"})=>i.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${W} opacity-10`}),i.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[i.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:H}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:q}),i.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:z})]})]})]}),U=({title:H,icon:q,children:z,right:W,accent:ee="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>i.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${ee}`}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[q," ",i.jsx("span",{children:H})]}),W]}),z]})]}),Q=()=>{const H=l||s,q=l?c:o;return i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(oc,{size:16})," Fecha"]}),i.jsx("input",{name:"fecha",type:"date",value:H.fecha,onChange:z=>q({...H,fecha:z.target.value}),className:L,required:!0})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ro,{size:16})," Curso"]}),i.jsxs("select",{name:"curso",value:H.curso,onChange:z=>q({...H,curso:z.target.value}),className:L,required:!0,children:[i.jsx("option",{value:"",children:"Curso"}),js.map(z=>i.jsx("option",{children:z},z))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(vi,{size:16})," Profesor"]}),i.jsxs("select",{name:"profesorResponsable",value:H.profesorResponsable,onChange:z=>q({...H,profesorResponsable:z.target.value}),className:L,required:!0,children:[i.jsx("option",{value:"",children:"Profesor Responsable"}),gF.map(z=>i.jsx("option",{value:z,children:z},z))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(C5,{size:16})," Máquina"]}),i.jsxs("select",{name:"maquinaId",value:H.maquinaId,onChange:z=>q({...H,maquinaId:z.target.value}),className:L,required:!0,children:[i.jsx("option",{value:"",children:"Máquina"}),e.map(z=>i.jsx("option",{value:z.id,children:z.nombre},z.id))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(S_,{size:16})," Total de Horas"]}),i.jsx("input",{name:"totalHoras",type:"number",value:H.totalHoras,onChange:z=>q({...H,totalHoras:Number(z.target.value)}),className:L,required:!0,min:.5,step:.5})]}),i.jsxs("div",{className:"lg:col-span-6",children:[i.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),i.jsx("textarea",{name:"observaciones",value:H.observaciones,onChange:z=>q({...H,observaciones:z.target.value}),placeholder:"Observaciones...",className:L+" min-h-[40px]",rows:2})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l&&i.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[i.jsx(uA,{size:16})," Cancelar"]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[l?i.jsx(Yc,{size:16}):i.jsx(_o,{size:16}),l?"Actualizar":"Registrar"]})]})]})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:S,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[i.jsx(uR,{size:18})," Excel"]}),i.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[i.jsx(Vd,{size:18})," PDF"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(k,{icon:i.jsx(C5,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),i.jsx(k,{icon:i.jsx(Vd,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:F.length,accent:"from-sky-500 to-cyan-500"}),i.jsx(k,{icon:i.jsx(S_,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:T.toFixed(1),accent:"from-emerald-500 to-lime-500"}),i.jsx(k,{icon:i.jsx(oc,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(K=r[0])!=null&&K.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[i.jsx("div",{className:"xl:col-span-3",children:i.jsx(U,{title:l?`Editando registro #${l.id.slice(0,4)}`:"Nuevo registro de uso",icon:i.jsx(_2e,{size:18}),children:i.jsx(Q,{})})}),i.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:i.jsx(U,{title:"Uso por máquina (horas)",icon:i.jsx(qc,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:i.jsx("div",{className:"flex gap-2 items-center",children:P(`${C.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:i.jsx("div",{className:"h-[320px] w-full",children:i.jsx(dh,{width:"100%",height:"100%",children:i.jsxs(T2,{data:C,margin:{top:8,right:16,bottom:8,left:0},children:[i.jsx(B2,{strokeDasharray:"3 3"}),i.jsx(Dg,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),i.jsx(Pg,{}),i.jsx(uh,{}),i.jsx(l1,{}),i.jsx(Bb,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),i.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:i.jsxs(U,{title:"Administrar máquinas",icon:i.jsx(C5,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[i.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[i.jsx("input",{value:d.nombre,onChange:H=>f({...d,nombre:H.target.value}),placeholder:"Nombre máquina",className:L+" md:col-span-2"}),i.jsxs("select",{value:d.especialidad,onChange:H=>f({...d,especialidad:H.target.value}),className:L+" md:col-span-2",children:[i.jsx("option",{value:"Industrial",children:"Industrial"}),i.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?i.jsx(Yc,{size:16}):i.jsx(_o,{size:16}),h?"Guardar":"Agregar"]})]}),i.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(H=>i.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:H.nombre}),i.jsx("div",{className:"text-xs",children:H.especialidad==="Industrial"?P("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):P("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{m(H),f(H)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:i.jsx(j_,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>y(H.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:i.jsx(Va,{size:16,className:"text-red-600"})})]})]},H.id))})]})}),i.jsx("div",{className:"xl:col-span-2 order-3",children:i.jsxs(U,{title:"Historial de uso",icon:i.jsx(Vd,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Wk,{size:16,className:"text-slate-600"})}),children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[i.jsx("input",{type:"date",value:g.fecha,onChange:H=>x({...g,fecha:H.target.value}),className:L,placeholder:"Fecha"}),i.jsxs("select",{value:g.curso,onChange:H=>x({...g,curso:H.target.value}),className:L,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),js.map(H=>i.jsx("option",{children:H},H))]}),i.jsxs("select",{value:g.maquinaId,onChange:H=>x({...g,maquinaId:H.target.value}),className:L,children:[i.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(H=>i.jsx("option",{value:H.id,children:H.nombre},H.id))]}),i.jsxs("div",{className:"relative",children:[i.jsx(e1,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),i.jsx("input",{value:g.profesor,onChange:H=>x({...g,profesor:H.target.value}),placeholder:"Buscar profesor...",className:L+" pl-9"})]})]}),i.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),i.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),i.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[F.map(H=>{var q;return i.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:H.fecha}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((q=B.get(H.maquinaId))==null?void 0:q.nombre)||"N/A"}),i.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[H.profesorResponsable," ",i.jsxs("span",{className:"text-slate-400",children:["(",H.curso,")"]})]}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:H.totalHoras}),i.jsxs("td",{className:"px-3 py-2 text-center",children:[i.jsx("button",{onClick:()=>c(H),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:i.jsx(j_,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>_(H.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:i.jsx(Va,{size:16,className:"text-red-600"})})]})]},H.id)}),F.length===0&&i.jsx("tr",{children:i.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function Il(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=Il(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const Oet={},xW=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,m))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Oet?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},Det=e=>e?xW(e):xW,{useDebugValue:Pet}=st,{useSyncExternalStoreWithSelector:Ret}=FOe,Let=e=>e;function eue(e,t=Let,r){const n=Ret(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Pet(n),n}const vW=(e,t)=>{const r=Det(e),n=(a,s=t)=>eue(r,a,s);return Object.assign(n,r),n},Met=(e,t)=>e?vW(e,t):vW;function ul(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var Uet={value:()=>{}};function aj(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new F5(r)}function F5(e){this._=e}function Qet(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}F5.prototype=aj.prototype={constructor:F5,on:function(e,t){var r=this._,n=Qet(e+"",r),a,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((a=(e=n[s]).type)&&(a=Het(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=n[s]).type)r[a]=bW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=bW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new F5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Het(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function bW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Uet,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var KO="http://www.w3.org/1999/xhtml";const yW={svg:"http://www.w3.org/2000/svg",xhtml:KO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sj(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),yW.hasOwnProperty(t)?{space:yW[t],local:e}:e}function Vet(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===KO&&t.documentElement.namespaceURI===KO?t.createElement(e):t.createElementNS(r,e)}}function zet(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function tue(e){var t=sj(e);return(t.local?zet:Vet)(t)}function $et(){}function TM(e){return e==null?$et:function(){return this.querySelector(e)}}function Get(e){typeof e!="function"&&(e=TM(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=new Array(o),c,u,d=0;d<o;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new nu(n,this._parents)}function qet(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ket(){return[]}function rue(e){return e==null?Ket:function(){return this.querySelectorAll(e)}}function Wet(e){return function(){return qet(e.apply(this,arguments))}}function Xet(e){typeof e=="function"?e=Wet(e):e=rue(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var o=t[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(n.push(e.call(c,c.__data__,u,o)),a.push(c));return new nu(n,a)}function nue(e){return function(){return this.matches(e)}}function aue(e){return function(t){return t.matches(e)}}var Yet=Array.prototype.find;function Jet(e){return function(){return Yet.call(this.children,e)}}function Zet(){return this.firstElementChild}function ett(e){return this.select(e==null?Zet:Jet(typeof e=="function"?e:aue(e)))}var ttt=Array.prototype.filter;function rtt(){return Array.from(this.children)}function ntt(e){return function(){return ttt.call(this.children,e)}}function att(e){return this.selectAll(e==null?rtt:ntt(typeof e=="function"?e:aue(e)))}function stt(e){typeof e!="function"&&(e=nue(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new nu(n,this._parents)}function sue(e){return new Array(e.length)}function itt(){return new nu(this._enter||this._groups.map(sue),this._parents)}function LS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}LS.prototype={constructor:LS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ott(e){return function(){return e}}function ltt(e,t,r,n,a,s){for(var o=0,l,c=t.length,u=s.length;o<u;++o)(l=t[o])?(l.__data__=s[o],n[o]=l):r[o]=new LS(e,s[o]);for(;o<c;++o)(l=t[o])&&(a[o]=l)}function ctt(e,t,r,n,a,s,o){var l,c,u=new Map,d=t.length,f=s.length,h=new Array(d),m;for(l=0;l<d;++l)(c=t[l])&&(h[l]=m=o.call(c,c.__data__,l,t)+"",u.has(m)?a[l]=c:u.set(m,c));for(l=0;l<f;++l)m=o.call(e,s[l],l,s)+"",(c=u.get(m))?(n[l]=c,c.__data__=s[l],u.delete(m)):r[l]=new LS(e,s[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(h[l])===c&&(a[l]=c)}function utt(e){return e.__data__}function dtt(e,t){if(!arguments.length)return Array.from(this,utt);var r=t?ctt:ltt,n=this._parents,a=this._groups;typeof e!="function"&&(e=ott(e));for(var s=a.length,o=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,m=ftt(e.call(d,d&&d.__data__,u,n)),g=m.length,x=l[u]=new Array(g),v=o[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,v,y,m,t);for(var w=0,_=0,F,B;w<g;++w)if(F=x[w]){for(w>=_&&(_=w+1);!(B=v[_])&&++_<g;);F._next=B||null}}return o=new nu(o,n),o._enter=l,o._exit=c,o}function ftt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Att(){return new nu(this._exit||this._groups.map(sue),this._parents)}function htt(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function mtt(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,o=Math.min(a,s),l=new Array(a),c=0;c<o;++c)for(var u=r[c],d=n[c],f=u.length,h=l[c]=new Array(f),m,g=0;g<f;++g)(m=u[g]||d[g])&&(h[g]=m);for(;c<a;++c)l[c]=r[c];return new nu(l,this._parents)}function ptt(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],o;--a>=0;)(o=n[a])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function gtt(e){e||(e=xtt);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var o=r[s],l=o.length,c=a[s]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new nu(a,this._parents).order()}function xtt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vtt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function btt(){return Array.from(this)}function ytt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var o=n[a];if(o)return o}return null}function wtt(){let e=0;for(const t of this)++e;return e}function Ett(){return!this.node()}function Ntt(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,o=a.length,l;s<o;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function Ctt(e){return function(){this.removeAttribute(e)}}function _tt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Stt(e,t){return function(){this.setAttribute(e,t)}}function ktt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function jtt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Btt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Ttt(e,t){var r=sj(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?_tt:Ctt:typeof t=="function"?r.local?Btt:jtt:r.local?ktt:Stt)(r,t))}function iue(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Itt(e){return function(){this.style.removeProperty(e)}}function Ftt(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Ott(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Dtt(e,t,r){return arguments.length>1?this.each((t==null?Itt:typeof t=="function"?Ott:Ftt)(e,t,r??"")):Ob(this.node(),e)}function Ob(e,t){return e.style.getPropertyValue(t)||iue(e).getComputedStyle(e,null).getPropertyValue(t)}function Ptt(e){return function(){delete this[e]}}function Rtt(e,t){return function(){this[e]=t}}function Ltt(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Mtt(e,t){return arguments.length>1?this.each((t==null?Ptt:typeof t=="function"?Ltt:Rtt)(e,t)):this.node()[e]}function oue(e){return e.trim().split(/^|\s+/)}function IM(e){return e.classList||new lue(e)}function lue(e){this._node=e,this._names=oue(e.getAttribute("class")||"")}lue.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function cue(e,t){for(var r=IM(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function uue(e,t){for(var r=IM(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function Utt(e){return function(){cue(this,e)}}function Qtt(e){return function(){uue(this,e)}}function Htt(e,t){return function(){(t.apply(this,arguments)?cue:uue)(this,e)}}function Vtt(e,t){var r=oue(e+"");if(arguments.length<2){for(var n=IM(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?Htt:t?Utt:Qtt)(r,t))}function ztt(){this.textContent=""}function $tt(e){return function(){this.textContent=e}}function Gtt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function qtt(e){return arguments.length?this.each(e==null?ztt:(typeof e=="function"?Gtt:$tt)(e)):this.node().textContent}function Ktt(){this.innerHTML=""}function Wtt(e){return function(){this.innerHTML=e}}function Xtt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ytt(e){return arguments.length?this.each(e==null?Ktt:(typeof e=="function"?Xtt:Wtt)(e)):this.node().innerHTML}function Jtt(){this.nextSibling&&this.parentNode.appendChild(this)}function Ztt(){return this.each(Jtt)}function ert(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function trt(){return this.each(ert)}function rrt(e){var t=typeof e=="function"?e:tue(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nrt(){return null}function art(e,t){var r=typeof e=="function"?e:tue(e),n=t==null?nrt:typeof t=="function"?t:TM(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function srt(){var e=this.parentNode;e&&e.removeChild(this)}function irt(){return this.each(srt)}function ort(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lrt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function crt(e){return this.select(e?lrt:ort)}function urt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function drt(e){return function(t){e.call(this,t,this.__data__)}}function frt(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Art(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function hrt(e,t,r){return function(){var n=this.__on,a,s=drt(t);if(n){for(var o=0,l=n.length;o<l;++o)if((a=n[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function mrt(e,t,r){var n=frt(e+""),a,s=n.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(a=0,d=l[c];a<s;++a)if((o=n[a]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?hrt:Art,a=0;a<s;++a)this.each(l(n[a],t,r));return this}function due(e,t,r){var n=iue(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function prt(e,t){return function(){return due(this,e,t)}}function grt(e,t){return function(){return due(this,e,t.apply(this,arguments))}}function xrt(e,t){return this.each((typeof t=="function"?grt:prt)(e,t))}function*vrt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,o;a<s;++a)(o=n[a])&&(yield o)}var fue=[null];function nu(e,t){this._groups=e,this._parents=t}function DE(){return new nu([[document.documentElement]],fue)}function brt(){return this}nu.prototype=DE.prototype={constructor:nu,select:Get,selectAll:Xet,selectChild:ett,selectChildren:att,filter:stt,data:dtt,enter:itt,exit:Att,join:htt,merge:mtt,selection:brt,order:ptt,sort:gtt,call:vtt,nodes:btt,node:ytt,size:wtt,empty:Ett,each:Ntt,attr:Ttt,style:Dtt,property:Mtt,classed:Vtt,text:qtt,html:Ytt,raise:Ztt,lower:trt,append:rrt,insert:art,remove:irt,clone:crt,datum:urt,on:mrt,dispatch:xrt,[Symbol.iterator]:vrt};function Vu(e){return typeof e=="string"?new nu([[document.querySelector(e)]],[document.documentElement]):new nu([[e]],fue)}function yrt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Qf(e,t){if(e=yrt(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const wrt={passive:!1},R2={capture:!0,passive:!1};function $I(e){e.stopImmediatePropagation()}function Wv(e){e.preventDefault(),e.stopImmediatePropagation()}function Aue(e){var t=e.document.documentElement,r=Vu(e).on("dragstart.drag",Wv,R2);"onselectstart"in t?r.on("selectstart.drag",Wv,R2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function hue(e,t){var r=e.document.documentElement,n=Vu(e).on("dragstart.drag",null);t&&(n.on("click.drag",Wv,R2),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const IC=e=>()=>e;function WO(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}WO.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ert(e){return!e.ctrlKey&&!e.button}function Nrt(){return this.parentNode}function Crt(e,t){return t??{x:e.x,y:e.y}}function _rt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Srt(){var e=Ert,t=Nrt,r=Crt,n=_rt,a={},s=aj("start","drag","end"),o=0,l,c,u,d,f=0;function h(F){F.on("mousedown.drag",m).filter(n).on("touchstart.drag",v).on("touchmove.drag",y,wrt).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(F,B){if(!(d||!e.call(this,F,B))){var T=_(this,t.call(this,F,B),F,B,"mouse");T&&(Vu(F.view).on("mousemove.drag",g,R2).on("mouseup.drag",x,R2),Aue(F.view),$I(F),u=!1,l=F.clientX,c=F.clientY,T("start",F))}}function g(F){if(Wv(F),!u){var B=F.clientX-l,T=F.clientY-c;u=B*B+T*T>f}a.mouse("drag",F)}function x(F){Vu(F.view).on("mousemove.drag mouseup.drag",null),hue(F.view,u),Wv(F),a.mouse("end",F)}function v(F,B){if(e.call(this,F,B)){var T=F.changedTouches,C=t.call(this,F,B),S=T.length,j,L;for(j=0;j<S;++j)(L=_(this,C,F,B,T[j].identifier,T[j]))&&($I(F),L("start",F,T[j]))}}function y(F){var B=F.changedTouches,T=B.length,C,S;for(C=0;C<T;++C)(S=a[B[C].identifier])&&(Wv(F),S("drag",F,B[C]))}function w(F){var B=F.changedTouches,T=B.length,C,S;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<T;++C)(S=a[B[C].identifier])&&($I(F),S("end",F,B[C]))}function _(F,B,T,C,S,j){var L=s.copy(),P=Qf(j||T,B),k,U,Q;if((Q=r.call(F,new WO("beforestart",{sourceEvent:T,target:h,identifier:S,active:o,x:P[0],y:P[1],dx:0,dy:0,dispatch:L}),C))!=null)return k=Q.x-P[0]||0,U=Q.y-P[1]||0,function K(H,q,z){var W=P,ee;switch(H){case"start":a[S]=K,ee=o++;break;case"end":delete a[S],--o;case"drag":P=Qf(z||q,B),ee=o;break}L.call(H,F,new WO(H,{sourceEvent:q,subject:Q,target:h,identifier:S,active:ee,x:P[0]+k,y:P[1]+U,dx:P[0]-W[0],dy:P[1]-W[1],dispatch:L}),C)}}return h.filter=function(F){return arguments.length?(e=typeof F=="function"?F:IC(!!F),h):e},h.container=function(F){return arguments.length?(t=typeof F=="function"?F:IC(F),h):t},h.subject=function(F){return arguments.length?(r=typeof F=="function"?F:IC(F),h):r},h.touchable=function(F){return arguments.length?(n=typeof F=="function"?F:IC(!!F),h):n},h.on=function(){var F=s.on.apply(s,arguments);return F===s?h:F},h.clickDistance=function(F){return arguments.length?(f=(F=+F)*F,h):Math.sqrt(f)},h}var Db=0,tw=0,Sy=0,mue=1e3,MS,rw,US=0,Lg=0,ij=0,L2=typeof performance=="object"&&performance.now?performance:Date,pue=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function FM(){return Lg||(pue(krt),Lg=L2.now()+ij)}function krt(){Lg=0}function QS(){this._call=this._time=this._next=null}QS.prototype=gue.prototype={constructor:QS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?FM():+r)+(t==null?0:+t),!this._next&&rw!==this&&(rw?rw._next=this:MS=this,rw=this),this._call=e,this._time=r,XO()},stop:function(){this._call&&(this._call=null,this._time=1/0,XO())}};function gue(e,t,r){var n=new QS;return n.restart(e,t,r),n}function jrt(){FM(),++Db;for(var e=MS,t;e;)(t=Lg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Db}function wW(){Lg=(US=L2.now())+ij,Db=tw=0;try{jrt()}finally{Db=0,Trt(),Lg=0}}function Brt(){var e=L2.now(),t=e-US;t>mue&&(ij-=t,US=e)}function Trt(){for(var e,t=MS,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:MS=r);rw=e,XO(n)}function XO(e){if(!Db){tw&&(tw=clearTimeout(tw));var t=e-Lg;t>24?(e<1/0&&(tw=setTimeout(wW,e-L2.now()-ij)),Sy&&(Sy=clearInterval(Sy))):(Sy||(US=L2.now(),Sy=setInterval(Brt,mue)),Db=1,pue(wW))}}function EW(e,t,r){var n=new QS;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var Irt=aj("start","end","cancel","interrupt"),Frt=[],xue=0,NW=1,YO=2,O5=3,CW=4,JO=5,D5=6;function oj(e,t,r,n,a,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;Ort(e,r,{name:t,index:n,group:a,on:Irt,tween:Frt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:xue})}function OM(e,t){var r=tf(e,t);if(r.state>xue)throw new Error("too late; already scheduled");return r}function pA(e,t){var r=tf(e,t);if(r.state>O5)throw new Error("too late; already running");return r}function tf(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Ort(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=gue(s,0,r.time);function s(u){r.state=NW,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var d,f,h,m;if(r.state!==NW)return c();for(d in n)if(m=n[d],m.name===r.name){if(m.state===O5)return EW(o);m.state===CW?(m.state=D5,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[d]):+d<t&&(m.state=D5,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[d])}if(EW(function(){r.state===O5&&(r.state=CW,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=YO,r.on.call("start",e,e.__data__,r.index,r.group),r.state===YO){for(r.state=O5,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(m=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=m);a.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=JO,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===JO&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=D5,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function P5(e,t){var r=e.__transition,n,a,s=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){s=!1;continue}a=n.state>YO&&n.state<JO,n.state=D5,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}s&&delete e.__transition}}function Drt(e){return this.each(function(){P5(this,e)})}function Prt(e,t){var r,n;return function(){var a=pA(this,e),s=a.tween;if(s!==r){n=r=s;for(var o=0,l=n.length;o<l;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}a.tween=n}}function Rrt(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=pA(this,e),o=s.tween;if(o!==n){a=(n=o).slice();for(var l={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=l;break}c===u&&a.push(l)}s.tween=a}}function Lrt(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=tf(this.node(),r).tween,a=0,s=n.length,o;a<s;++a)if((o=n[a]).name===e)return o.value;return null}return this.each((t==null?Prt:Rrt)(r,e,t))}function DM(e,t,r){var n=e._id;return e.each(function(){var a=pA(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return tf(a,n).value[t]}}function vue(e,t){var r;return(typeof t=="number"?Id:t instanceof Fg?AS:(r=Fg(t))?(t=r,AS):yse)(e,t)}function Mrt(e){return function(){this.removeAttribute(e)}}function Urt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qrt(e,t,r){var n,a=r+"",s;return function(){var o=this.getAttribute(e);return o===a?null:o===n?s:s=t(n=o,r)}}function Hrt(e,t,r){var n,a=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?s:s=t(n=o,r)}}function Vrt(e,t,r){var n,a,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l)))}}function zrt(e,t,r){var n,a,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l)))}}function $rt(e,t){var r=sj(e),n=r==="transform"?rLe:vue;return this.attrTween(e,typeof t=="function"?(r.local?zrt:Vrt)(r,n,DM(this,"attr."+e,t)):t==null?(r.local?Urt:Mrt)(r):(r.local?Hrt:Qrt)(r,n,t))}function Grt(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function qrt(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Krt(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&qrt(e,s)),r}return a._value=t,a}function Wrt(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Grt(e,s)),r}return a._value=t,a}function Xrt(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=sj(e);return this.tween(r,(n.local?Krt:Wrt)(n,t))}function Yrt(e,t){return function(){OM(this,e).delay=+t.apply(this,arguments)}}function Jrt(e,t){return t=+t,function(){OM(this,e).delay=t}}function Zrt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Yrt:Jrt)(t,e)):tf(this.node(),t).delay}function ent(e,t){return function(){pA(this,e).duration=+t.apply(this,arguments)}}function tnt(e,t){return t=+t,function(){pA(this,e).duration=t}}function rnt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ent:tnt)(t,e)):tf(this.node(),t).duration}function nnt(e,t){if(typeof t!="function")throw new Error;return function(){pA(this,e).ease=t}}function ant(e){var t=this._id;return arguments.length?this.each(nnt(t,e)):tf(this.node(),t).ease}function snt(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;pA(this,e).ease=r}}function int(e){if(typeof e!="function")throw new Error;return this.each(snt(this._id,e))}function ont(e){typeof e!="function"&&(e=nue(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Mh(n,this._parents,this._name,this._id)}function lnt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),o=new Array(n),l=0;l<s;++l)for(var c=t[l],u=r[l],d=c.length,f=o[l]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(f[m]=h);for(;l<n;++l)o[l]=t[l];return new Mh(o,this._parents,this._name,this._id)}function cnt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function unt(e,t,r){var n,a,s=cnt(t)?OM:pA;return function(){var o=s(this,e),l=o.on;l!==n&&(a=(n=l).copy()).on(t,r),o.on=a}}function dnt(e,t){var r=this._id;return arguments.length<2?tf(this.node(),r).on.on(e):this.each(unt(r,e,t))}function fnt(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Ant(){return this.on("end.remove",fnt(this._id))}function hnt(e){var t=this._name,r=this._id;typeof e!="function"&&(e=TM(e));for(var n=this._groups,a=n.length,s=new Array(a),o=0;o<a;++o)for(var l=n[o],c=l.length,u=s[o]=new Array(c),d,f,h=0;h<c;++h)(d=l[h])&&(f=e.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,oj(u[h],t,r,h,u,tf(d,r)));return new Mh(s,this._parents,t,r)}function mnt(e){var t=this._name,r=this._id;typeof e!="function"&&(e=rue(e));for(var n=this._groups,a=n.length,s=[],o=[],l=0;l<a;++l)for(var c=n[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),m,g=tf(d,r),x=0,v=h.length;x<v;++x)(m=h[x])&&oj(m,t,r,x,h,g);s.push(h),o.push(d)}return new Mh(s,o,t,r)}var pnt=DE.prototype.constructor;function gnt(){return new pnt(this._groups,this._parents)}function xnt(e,t){var r,n,a;return function(){var s=Ob(this,e),o=(this.style.removeProperty(e),Ob(this,e));return s===o?null:s===r&&o===n?a:a=t(r=s,n=o)}}function bue(e){return function(){this.style.removeProperty(e)}}function vnt(e,t,r){var n,a=r+"",s;return function(){var o=Ob(this,e);return o===a?null:o===n?s:s=t(n=o,r)}}function bnt(e,t,r){var n,a,s;return function(){var o=Ob(this,e),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Ob(this,e))),o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l))}}function ynt(e,t){var r,n,a,s="style."+t,o="end."+s,l;return function(){var c=pA(this,e),u=c.on,d=c.value[s]==null?l||(l=bue(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(o,a=d),c.on=n}}function wnt(e,t,r){var n=(e+="")=="transform"?tLe:vue;return t==null?this.styleTween(e,xnt(e,n)).on("end.style."+e,bue(e)):typeof t=="function"?this.styleTween(e,bnt(e,n,DM(this,"style."+e,t))).each(ynt(this._id,e)):this.styleTween(e,vnt(e,n,t),r).on("end.style."+e,null)}function Ent(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Nnt(e,t,r){var n,a;function s(){var o=t.apply(this,arguments);return o!==a&&(n=(a=o)&&Ent(e,o,r)),n}return s._value=t,s}function Cnt(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Nnt(e,t,r??""))}function _nt(e){return function(){this.textContent=e}}function Snt(e){return function(){var t=e(this);this.textContent=t??""}}function knt(e){return this.tween("text",typeof e=="function"?Snt(DM(this,"text",e)):_nt(e==null?"":e+""))}function jnt(e){return function(t){this.textContent=e.call(this,t)}}function Bnt(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&jnt(a)),t}return n._value=e,n}function Tnt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Bnt(e))}function Int(){for(var e=this._name,t=this._id,r=yue(),n=this._groups,a=n.length,s=0;s<a;++s)for(var o=n[s],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=tf(c,t);oj(c,e,r,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Mh(n,this._parents,e,r)}function Fnt(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--a===0&&s()}};r.each(function(){var u=pA(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),a===0&&s()})}var Ont=0;function Mh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function yue(){return++Ont}var WA=DE.prototype;Mh.prototype={constructor:Mh,select:hnt,selectAll:mnt,selectChild:WA.selectChild,selectChildren:WA.selectChildren,filter:ont,merge:lnt,selection:gnt,transition:Int,call:WA.call,nodes:WA.nodes,node:WA.node,size:WA.size,empty:WA.empty,each:WA.each,on:dnt,attr:$rt,attrTween:Xrt,style:wnt,styleTween:Cnt,text:knt,textTween:Tnt,remove:Ant,tween:Lrt,delay:Zrt,duration:rnt,ease:ant,easeVarying:int,end:Fnt,[Symbol.iterator]:WA[Symbol.iterator]};function Dnt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Pnt={time:null,delay:0,duration:250,ease:Dnt};function Rnt(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Lnt(e){var t,r;e instanceof Mh?(t=e._id,e=e._name):(t=yue(),(r=Pnt).time=FM(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var o=n[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&oj(c,e,t,u,o,r||Rnt(c,t));return new Mh(n,this._parents,e,t)}DE.prototype.interrupt=Drt;DE.prototype.transition=Lnt;const FC=e=>()=>e;function Mnt(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Ah(e,t,r){this.k=e,this.x=t,this.y=r}Ah.prototype={constructor:Ah,scale:function(e){return e===1?this:new Ah(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ah(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ym=new Ah(1,0,0);Ah.prototype;function GI(e){e.stopImmediatePropagation()}function ky(e){e.preventDefault(),e.stopImmediatePropagation()}function Unt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Qnt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function _W(){return this.__zoom||ym}function Hnt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vnt(){return navigator.maxTouchPoints||"ontouchstart"in this}function znt(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function $nt(){var e=Unt,t=Qnt,r=znt,n=Hnt,a=Vnt,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=iLe,u=aj("start","zoom","end"),d,f,h,m=500,g=150,x=0,v=10;function y(Q){Q.property("__zoom",_W).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",L).filter(a).on("touchstart.zoom",P).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(Q,K,H,q){var z=Q.selection?Q.selection():Q;z.property("__zoom",_W),Q!==z?B(Q,K,H,q):z.interrupt().each(function(){T(this,arguments).event(q).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},y.scaleBy=function(Q,K,H,q){y.scaleTo(Q,function(){var z=this.__zoom.k,W=typeof K=="function"?K.apply(this,arguments):K;return z*W},H,q)},y.scaleTo=function(Q,K,H,q){y.transform(Q,function(){var z=t.apply(this,arguments),W=this.__zoom,ee=H==null?F(z):typeof H=="function"?H.apply(this,arguments):H,X=W.invert(ee),O=typeof K=="function"?K.apply(this,arguments):K;return r(_(w(W,O),ee,X),z,o)},H,q)},y.translateBy=function(Q,K,H,q){y.transform(Q,function(){return r(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),o)},null,q)},y.translateTo=function(Q,K,H,q,z){y.transform(Q,function(){var W=t.apply(this,arguments),ee=this.__zoom,X=q==null?F(W):typeof q=="function"?q.apply(this,arguments):q;return r(ym.translate(X[0],X[1]).scale(ee.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof H=="function"?-H.apply(this,arguments):-H),W,o)},q,z)};function w(Q,K){return K=Math.max(s[0],Math.min(s[1],K)),K===Q.k?Q:new Ah(K,Q.x,Q.y)}function _(Q,K,H){var q=K[0]-H[0]*Q.k,z=K[1]-H[1]*Q.k;return q===Q.x&&z===Q.y?Q:new Ah(Q.k,q,z)}function F(Q){return[(+Q[0][0]+ +Q[1][0])/2,(+Q[0][1]+ +Q[1][1])/2]}function B(Q,K,H,q){Q.on("start.zoom",function(){T(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(q).end()}).tween("zoom",function(){var z=this,W=arguments,ee=T(z,W).event(q),X=t.apply(z,W),O=H==null?F(X):typeof H=="function"?H.apply(z,W):H,R=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),G=z.__zoom,Y=typeof K=="function"?K.apply(z,W):K,te=c(G.invert(O).concat(R/G.k),Y.invert(O).concat(R/Y.k));return function(ae){if(ae===1)ae=Y;else{var oe=te(ae),ie=R/oe[2];ae=new Ah(ie,O[0]-oe[0]*ie,O[1]-oe[1]*ie)}ee.zoom(null,ae)}})}function T(Q,K,H){return!H&&Q.__zooming||new C(Q,K)}function C(Q,K){this.that=Q,this.args=K,this.active=0,this.sourceEvent=null,this.extent=t.apply(Q,K),this.taps=0}C.prototype={event:function(Q){return Q&&(this.sourceEvent=Q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Q,K){return this.mouse&&Q!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&Q!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&Q!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Q){var K=Vu(this.that).datum();u.call(Q,this.that,new Mnt(Q,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),K)}};function S(Q,...K){if(!e.apply(this,arguments))return;var H=T(this,K).event(Q),q=this.__zoom,z=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,n.apply(this,arguments)))),W=Qf(Q);if(H.wheel)(H.mouse[0][0]!==W[0]||H.mouse[0][1]!==W[1])&&(H.mouse[1]=q.invert(H.mouse[0]=W)),clearTimeout(H.wheel);else{if(q.k===z)return;H.mouse=[W,q.invert(W)],P5(this),H.start()}ky(Q),H.wheel=setTimeout(ee,g),H.zoom("mouse",r(_(w(q,z),H.mouse[0],H.mouse[1]),H.extent,o));function ee(){H.wheel=null,H.end()}}function j(Q,...K){if(h||!e.apply(this,arguments))return;var H=Q.currentTarget,q=T(this,K,!0).event(Q),z=Vu(Q.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",R,!0),W=Qf(Q,H),ee=Q.clientX,X=Q.clientY;Aue(Q.view),GI(Q),q.mouse=[W,this.__zoom.invert(W)],P5(this),q.start();function O(G){if(ky(G),!q.moved){var Y=G.clientX-ee,te=G.clientY-X;q.moved=Y*Y+te*te>x}q.event(G).zoom("mouse",r(_(q.that.__zoom,q.mouse[0]=Qf(G,H),q.mouse[1]),q.extent,o))}function R(G){z.on("mousemove.zoom mouseup.zoom",null),hue(G.view,q.moved),ky(G),q.event(G).end()}}function L(Q,...K){if(e.apply(this,arguments)){var H=this.__zoom,q=Qf(Q.changedTouches?Q.changedTouches[0]:Q,this),z=H.invert(q),W=H.k*(Q.shiftKey?.5:2),ee=r(_(w(H,W),q,z),t.apply(this,K),o);ky(Q),l>0?Vu(this).transition().duration(l).call(B,ee,q,Q):Vu(this).call(y.transform,ee,q,Q)}}function P(Q,...K){if(e.apply(this,arguments)){var H=Q.touches,q=H.length,z=T(this,K,Q.changedTouches.length===q).event(Q),W,ee,X,O;for(GI(Q),ee=0;ee<q;++ee)X=H[ee],O=Qf(X,this),O=[O,this.__zoom.invert(O),X.identifier],z.touch0?!z.touch1&&z.touch0[2]!==O[2]&&(z.touch1=O,z.taps=0):(z.touch0=O,W=!0,z.taps=1+!!d);d&&(d=clearTimeout(d)),W&&(z.taps<2&&(f=O[0],d=setTimeout(function(){d=null},m)),P5(this),z.start())}}function k(Q,...K){if(this.__zooming){var H=T(this,K).event(Q),q=Q.changedTouches,z=q.length,W,ee,X,O;for(ky(Q),W=0;W<z;++W)ee=q[W],X=Qf(ee,this),H.touch0&&H.touch0[2]===ee.identifier?H.touch0[0]=X:H.touch1&&H.touch1[2]===ee.identifier&&(H.touch1[0]=X);if(ee=H.that.__zoom,H.touch1){var R=H.touch0[0],G=H.touch0[1],Y=H.touch1[0],te=H.touch1[1],ae=(ae=Y[0]-R[0])*ae+(ae=Y[1]-R[1])*ae,oe=(oe=te[0]-G[0])*oe+(oe=te[1]-G[1])*oe;ee=w(ee,Math.sqrt(ae/oe)),X=[(R[0]+Y[0])/2,(R[1]+Y[1])/2],O=[(G[0]+te[0])/2,(G[1]+te[1])/2]}else if(H.touch0)X=H.touch0[0],O=H.touch0[1];else return;H.zoom("touch",r(_(ee,X,O),H.extent,o))}}function U(Q,...K){if(this.__zooming){var H=T(this,K).event(Q),q=Q.changedTouches,z=q.length,W,ee;for(GI(Q),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),W=0;W<z;++W)ee=q[W],H.touch0&&H.touch0[2]===ee.identifier?delete H.touch0:H.touch1&&H.touch1[2]===ee.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(ee=Qf(ee,this),Math.hypot(f[0]-ee[0],f[1]-ee[1])<v)){var X=Vu(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return y.wheelDelta=function(Q){return arguments.length?(n=typeof Q=="function"?Q:FC(+Q),y):n},y.filter=function(Q){return arguments.length?(e=typeof Q=="function"?Q:FC(!!Q),y):e},y.touchable=function(Q){return arguments.length?(a=typeof Q=="function"?Q:FC(!!Q),y):a},y.extent=function(Q){return arguments.length?(t=typeof Q=="function"?Q:FC([[+Q[0][0],+Q[0][1]],[+Q[1][0],+Q[1][1]]]),y):t},y.scaleExtent=function(Q){return arguments.length?(s[0]=+Q[0],s[1]=+Q[1],y):[s[0],s[1]]},y.translateExtent=function(Q){return arguments.length?(o[0][0]=+Q[0][0],o[1][0]=+Q[1][0],o[0][1]=+Q[0][1],o[1][1]=+Q[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(Q){return arguments.length?(r=Q,y):r},y.duration=function(Q){return arguments.length?(l=+Q,y):l},y.interpolate=function(Q){return arguments.length?(c=Q,y):c},y.on=function(){var Q=u.on.apply(u,arguments);return Q===u?y:Q},y.clickDistance=function(Q){return arguments.length?(x=(Q=+Q)*Q,y):Math.sqrt(x)},y.tapDistance=function(Q){return arguments.length?(v=+Q,y):v},y}const lj=N.createContext(null),Gnt=lj.Provider,Uh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},wue=Uh.error001();function hs(e,t){const r=N.useContext(lj);if(r===null)throw new Error(wue);return eue(r,e,t)}const so=()=>{const e=N.useContext(lj);if(e===null)throw new Error(wue);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},qnt=e=>e.userSelectionActive?"none":"all";function Eue({position:e,children:t,className:r,style:n,...a}){const s=hs(qnt),o=`${e}`.split("-");return st.createElement("div",{className:Il(["react-flow__panel",r,...o]),style:{...n,pointerEvents:s},...a},t)}function Knt({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:st.createElement(Eue,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},st.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Wnt=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=N.useRef(null),[h,m]=N.useState({x:0,y:0,width:0,height:0}),g=Il(["react-flow__edge-textwrapper",u]);return N.useEffect(()=>{if(f.current){const x=f.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:st.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&st.createElement("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),st.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),c)};var Xnt=N.memo(Wnt);const PM=e=>({width:e.offsetWidth,height:e.offsetHeight}),Pb=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),RM=(e={x:0,y:0},t)=>({x:Pb(e.x,t[0][0],t[1][0]),y:Pb(e.y,t[0][1],t[1][1])}),SW=(e,t,r)=>e<t?Pb(Math.abs(e-t),1,50)/50:e>r?-Pb(Math.abs(e-r),1,50)/50:0,Nue=(e,t)=>{const r=SW(e.x,35,t.width-35)*20,n=SW(e.y,35,t.height-35)*20;return[r,n]},Cue=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Ynt=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),LM=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),Jnt=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),kW=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),ZO=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},Znt=e=>Gu(e.width)&&Gu(e.height)&&Gu(e.x)&&Gu(e.y),Gu=e=>!isNaN(e)&&isFinite(e),Fs=Symbol.for("internals"),_ue=["Enter"," ","Escape"],eat=(e,t)=>{},tat=e=>"nativeEvent"in e;function eD(e){var a,s;const t=tat(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Sue=e=>"clientX"in e,wm=(e,t)=>{var s,o;const r=Sue(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},HS=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},PE=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m=20})=>st.createElement(st.Fragment,null,st.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),m&&st.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),a&&Gu(r)&&Gu(n)?st.createElement(Xnt,{x:r,y:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);PE.displayName="BaseEdge";function jy(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function kue({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,o=Math.abs(n-t)/2,l=n<t?n+o:n-o;return[s,l,a,o]}function jue({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:o,targetControlY:l}){const c=e*.125+a*.375+o*.375+r*.125,u=t*.125+s*.375+l*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Mg;(function(e){e.Strict="strict",e.Loose="loose"})(Mg||(Mg={}));var Jp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Jp||(Jp={}));var M2;(function(e){e.Partial="partial",e.Full="full"})(M2||(M2={}));var tm;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(tm||(tm={}));var VS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(VS||(VS={}));var kr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(kr||(kr={}));function jW({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===kr.Left||e===kr.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function Bue({sourceX:e,sourceY:t,sourcePosition:r=kr.Bottom,targetX:n,targetY:a,targetPosition:s=kr.Top}){const[o,l]=jW({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=jW({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,m]=jue({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${n},${a}`,d,f,h,m]}const MM=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=kr.Bottom,targetPosition:s=kr.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,w]=Bue({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return st.createElement(PE,{path:v,labelX:y,labelY:w,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})});MM.displayName="SimpleBezierEdge";const BW={[kr.Left]:{x:-1,y:0},[kr.Right]:{x:1,y:0},[kr.Top]:{x:0,y:-1},[kr.Bottom]:{x:0,y:1}},rat=({source:e,sourcePosition:t=kr.Bottom,target:r})=>t===kr.Left||t===kr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},TW=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nat({source:e,sourcePosition:t=kr.Bottom,target:r,targetPosition:n=kr.Top,center:a,offset:s}){const o=BW[t],l=BW[n],c={x:e.x+o.x*s,y:e.y+o.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},d=rat({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[w,_,F,B]=kue({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*l[f]===-1){g=a.x??w,x=a.y??_;const C=[{x:g,y:c.y},{x:g,y:u.y}],S=[{x:c.x,y:x},{x:u.x,y:x}];o[f]===h?m=f==="x"?C:S:m=f==="x"?S:C}else{const C=[{x:c.x,y:u.y}],S=[{x:u.x,y:c.y}];if(f==="x"?m=o.x===h?S:C:m=o.y===h?C:S,t===n){const U=Math.abs(e[f]-r[f]);if(U<=s){const Q=Math.min(s-1,s-U);o[f]===h?v[f]=(c[f]>e[f]?-1:1)*Q:y[f]=(u[f]>r[f]?-1:1)*Q}}if(t!==n){const U=f==="x"?"y":"x",Q=o[f]===l[U],K=c[U]>u[U],H=c[U]<u[U];(o[f]===1&&(!Q&&K||Q&&H)||o[f]!==1&&(!Q&&H||Q&&K))&&(m=f==="x"?C:S)}const j={x:c.x+v.x,y:c.y+v.y},L={x:u.x+y.x,y:u.y+y.y},P=Math.max(Math.abs(j.x-m[0].x),Math.abs(L.x-m[0].x)),k=Math.max(Math.abs(j.y-m[0].y),Math.abs(L.y-m[0].y));P>=k?(g=(j.x+L.x)/2,x=m[0].y):(g=m[0].x,x=(j.y+L.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],g,x,F,B]}function aat(e,t,r,n){const a=Math.min(TW(e,t)/2,TW(t,r)/2,n),{x:s,y:o}=t;if(e.x===s&&s===r.x||e.y===o&&o===r.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${o}Q ${s},${o} ${s},${o+a*d}`}const l=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${o+a*c}Q ${s},${o} ${s+a*l},${o}`}function tD({sourceX:e,sourceY:t,sourcePosition:r=kr.Bottom,targetX:n,targetY:a,targetPosition:s=kr.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,h,m,g]=nat({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:l,y:c},offset:u});return[d.reduce((v,y,w)=>{let _="";return w>0&&w<d.length-1?_=aat(d[w-1],y,d[w+1],o):_=`${w===0?"M":"L"}${y.x} ${y.y}`,v+=_,v},""),f,h,m,g]}const cj=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=kr.Bottom,targetPosition:h=kr.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,_]=tD({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return st.createElement(PE,{path:y,labelX:w,labelY:_,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:v})});cj.displayName="SmoothStepEdge";const UM=N.memo(e=>{var t;return st.createElement(cj,{...e,pathOptions:N.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});UM.displayName="StepEdge";function sat({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,o,l]=kue({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,o,l]}const QM=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})=>{const[g,x,v]=sat({sourceX:e,sourceY:t,targetX:r,targetY:n});return st.createElement(PE,{path:g,labelX:x,labelY:v,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})});QM.displayName="StraightEdge";function OC(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function IW({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case kr.Left:return[t-OC(t-n,s),r];case kr.Right:return[t+OC(n-t,s),r];case kr.Top:return[t,r-OC(r-a,s)];case kr.Bottom:return[t,r+OC(a-r,s)]}}function Tue({sourceX:e,sourceY:t,sourcePosition:r=kr.Bottom,targetX:n,targetY:a,targetPosition:s=kr.Top,curvature:o=.25}){const[l,c]=IW({pos:r,x1:e,y1:t,x2:n,y2:a,c:o}),[u,d]=IW({pos:s,x1:n,y1:a,x2:e,y2:t,c:o}),[f,h,m,g]=jue({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${n},${a}`,f,h,m,g]}const zS=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=kr.Bottom,targetPosition:s=kr.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,_]=Tue({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return st.createElement(PE,{path:y,labelX:w,labelY:_,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:v})});zS.displayName="BezierEdge";const HM=N.createContext(null),iat=HM.Provider;HM.Consumer;const oat=()=>N.useContext(HM),lat=e=>"id"in e&&"source"in e&&"target"in e,cat=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,rD=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,uat=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),dat=(e,t)=>{if(!e.source||!e.target)return t;let r;return lat(e)?r={...e}:r={...e,id:cat(e)},uat(r,t)?t:t.concat(r)},nD=({x:e,y:t},[r,n,a],s,[o,l])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},Iue=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Xv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},VM=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:o}=Xv(a,t).positionAbsolute;return Ynt(n,LM({x:s,y:o,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Jnt(r)},Fue=(e,t,[r,n,a]=[0,0,1],s=!1,o=!1,l=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:m=!0,hidden:g=!1}=d;if(o&&!m||g)return!1;const{positionAbsolute:x}=Xv(d,l),v={x:x.x,y:x.y,width:f||0,height:h||0},y=ZO(c,v),w=typeof f>"u"||typeof h>"u"||f===null||h===null,_=s&&y>0,F=(f||0)*(h||0);(w||_||y>=F||d.dragging)&&u.push(d)}),u},Oue=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Due=(e,t,r,n,a,s=.1)=>{const o=t/(e.width*(1+s)),l=r/(e.height*(1+s)),c=Math.min(o,l),u=Pb(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,m=r/2-f*u;return{x:h,y:m,zoom:u}},Lp=(e,t=0)=>e.transition().duration(t);function FW(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var o,l;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),a},[])}function fat(e,t,r,n,a,s){const{x:o,y:l}=wm(e),u=t.elementsFromPoint(o,l).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=zM(void 0,u),v=u.getAttribute("data-handleid"),y=s({nodeId:g,id:v,type:x});if(y){const w=a.find(_=>_.nodeId===g&&_.type===x&&_.id===v);return{handle:{id:v,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const v=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:v}]:x===f&&d.push({handle:g,validHandleResult:v}),f=x)}}),!d.length)return{handle:null,validHandleResult:Pue()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>m?g.type==="target":h?x.isValid:!0)||d[0]}const Aat={source:null,target:null,sourceHandle:null,targetHandle:null},Pue=()=>({handleDomNode:null,isValid:!1,connection:Aat,endHandle:null});function Rue(e,t,r,n,a,s,o){const l=a==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Pue(),handleDomNode:c};if(c){const d=zM(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:l?f:r,sourceHandle:l?h:n,target:l?r:f,targetHandle:l?n:h};u.connection=x,m&&g&&(t===Mg.Strict?l&&d==="source"||!l&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function hat({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Fs]){const{handleBounds:o}=s[Fs];let l=[],c=[];o&&(l=FW(s,o,"source",`${t}-${r}-${n}`),c=FW(s,o,"target",`${t}-${r}-${n}`)),a.push(...l,...c)}return a},[])}function zM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function qI(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function mat(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Lue({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=Cue(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:w}=s();let _=0,F;const{x:B,y:T}=wm(e),C=d==null?void 0:d.elementFromPoint(B,T),S=zM(c,C),j=h==null?void 0:h.getBoundingClientRect();if(!j||!S)return;let L,P=wm(e,j),k=!1,U=null,Q=!1,K=null;const H=hat({nodes:y(),nodeId:r,handleId:t,handleType:S}),q=()=>{if(!m)return;const[ee,X]=Nue(P,j);v({x:ee,y:X}),_=requestAnimationFrame(q)};o({connectionPosition:P,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:S,connectionStartHandle:{nodeId:r,handleId:t,type:S},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:S});function z(ee){const{transform:X}=s();P=wm(ee,j);const{handle:O,validHandleResult:R}=fat(ee,d,nD(P,X,!1,[1,1]),g,H,G=>Rue(G,f,r,t,a?"target":"source",l,d));if(F=O,k||(q(),k=!0),K=R.handleDomNode,U=R.connection,Q=R.isValid,o({connectionPosition:F&&Q?Iue({x:F.x,y:F.y},X):P,connectionStatus:mat(!!F,Q),connectionEndHandle:R.endHandle}),!F&&!Q&&!K)return qI(L);U.source!==U.target&&K&&(qI(L),L=K,K.classList.add("connecting","react-flow__handle-connecting"),K.classList.toggle("valid",Q),K.classList.toggle("react-flow__handle-valid",Q))}function W(ee){var X,O;(F||K)&&U&&Q&&(n==null||n(U)),(O=(X=s()).onConnectEnd)==null||O.call(X,ee),c&&(u==null||u(ee)),qI(L),w(),cancelAnimationFrame(_),k=!1,Q=!1,U=null,K=null,d.removeEventListener("mousemove",z),d.removeEventListener("mouseup",W),d.removeEventListener("touchmove",z),d.removeEventListener("touchend",W)}d.addEventListener("mousemove",z),d.addEventListener("mouseup",W),d.addEventListener("touchmove",z),d.addEventListener("touchend",W)}const OW=()=>!0,pat=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),gat=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:o}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===r}},Mue=N.forwardRef(({type:e="source",position:t=kr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},m)=>{var j,L;const g=o||null,x=e==="target",v=so(),y=oat(),{connectOnClick:w,noPanClassName:_}=hs(pat,ul),{connecting:F,clickConnecting:B}=hs(gat(y,g,e),ul);y||(L=(j=v.getState()).onError)==null||L.call(j,"010",Uh.error010());const T=P=>{const{defaultEdgeOptions:k,onConnect:U,hasDefaultEdges:Q}=v.getState(),K={...k,...P};if(Q){const{edges:H,setEdges:q}=v.getState();q(dat(K,H))}U==null||U(K),l==null||l(K)},C=P=>{if(!y)return;const k=Sue(P);a&&(k&&P.button===0||!k)&&Lue({event:P,handleId:g,nodeId:y,onConnect:T,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||OW}),k?d==null||d(P):f==null||f(P)},S=P=>{const{onClickConnectStart:k,onClickConnectEnd:U,connectionClickStartHandle:Q,connectionMode:K,isValidConnection:H}=v.getState();if(!y||!Q&&!a)return;if(!Q){k==null||k(P,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const q=Cue(P.target),z=r||H||OW,{connection:W,isValid:ee}=Rue({nodeId:y,id:g,type:e},K,Q.nodeId,Q.handleId||null,Q.type,z,q);ee&&T(W),U==null||U(P),v.setState({connectionClickStartHandle:null})};return st.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:Il(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:B,connectionindicator:n&&(a&&!F||s&&F)}]),onMouseDown:C,onTouchStart:C,onClick:w?S:void 0,ref:m,...h},c)});Mue.displayName="Handle";var Rb=N.memo(Mue);const Uue=({data:e,isConnectable:t,targetPosition:r=kr.Top,sourcePosition:n=kr.Bottom})=>st.createElement(st.Fragment,null,st.createElement(Rb,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,st.createElement(Rb,{type:"source",position:n,isConnectable:t}));Uue.displayName="DefaultNode";var aD=N.memo(Uue);const Que=({data:e,isConnectable:t,sourcePosition:r=kr.Bottom})=>st.createElement(st.Fragment,null,e==null?void 0:e.label,st.createElement(Rb,{type:"source",position:r,isConnectable:t}));Que.displayName="InputNode";var Hue=N.memo(Que);const Vue=({data:e,isConnectable:t,targetPosition:r=kr.Top})=>st.createElement(st.Fragment,null,st.createElement(Rb,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);Vue.displayName="OutputNode";var zue=N.memo(Vue);const $M=()=>null;$M.displayName="GroupNode";const xat=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),DC=e=>e.id;function vat(e,t){return ul(e.selectedNodes.map(DC),t.selectedNodes.map(DC))&&ul(e.selectedEdges.map(DC),t.selectedEdges.map(DC))}const $ue=N.memo(({onSelectionChange:e})=>{const t=so(),{selectedNodes:r,selectedEdges:n}=hs(xat,vat);return N.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});$ue.displayName="SelectionListener";const bat=e=>!!e.onSelectionChange;function yat({onSelectionChange:e}){const t=hs(bat);return e||t?st.createElement($ue,{onSelectionChange:e}):null}const wat=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Gx(e,t){N.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Nn(e,t,r){N.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const Eat=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:w,onEdgesChange:_,elementsSelectable:F,connectionMode:B,snapGrid:T,snapToGrid:C,translateExtent:S,connectOnClick:j,defaultEdgeOptions:L,fitView:P,fitViewOptions:k,onNodesDelete:U,onEdgesDelete:Q,onNodeDrag:K,onNodeDragStart:H,onNodeDragStop:q,onSelectionDrag:z,onSelectionDragStart:W,onSelectionDragStop:ee,noPanClassName:X,nodeOrigin:O,rfId:R,autoPanOnConnect:G,autoPanOnNodeDrag:Y,onError:te,connectionRadius:ae,isValidConnection:oe,nodeDragThreshold:ie})=>{const{setNodes:ue,setEdges:Ce,setDefaultNodesAndEdges:ne,setMinZoom:Be,setMaxZoom:je,setTranslateExtent:_e,setNodeExtent:Ae,reset:ve}=hs(wat,ul),Pe=so();return N.useEffect(()=>{const Ue=n==null?void 0:n.map(de=>({...de,...L}));return ne(r,Ue),()=>{ve()}},[]),Nn("defaultEdgeOptions",L,Pe.setState),Nn("connectionMode",B,Pe.setState),Nn("onConnect",a,Pe.setState),Nn("onConnectStart",s,Pe.setState),Nn("onConnectEnd",o,Pe.setState),Nn("onClickConnectStart",l,Pe.setState),Nn("onClickConnectEnd",c,Pe.setState),Nn("nodesDraggable",u,Pe.setState),Nn("nodesConnectable",d,Pe.setState),Nn("nodesFocusable",f,Pe.setState),Nn("edgesFocusable",h,Pe.setState),Nn("edgesUpdatable",m,Pe.setState),Nn("elementsSelectable",F,Pe.setState),Nn("elevateNodesOnSelect",g,Pe.setState),Nn("snapToGrid",C,Pe.setState),Nn("snapGrid",T,Pe.setState),Nn("onNodesChange",w,Pe.setState),Nn("onEdgesChange",_,Pe.setState),Nn("connectOnClick",j,Pe.setState),Nn("fitViewOnInit",P,Pe.setState),Nn("fitViewOnInitOptions",k,Pe.setState),Nn("onNodesDelete",U,Pe.setState),Nn("onEdgesDelete",Q,Pe.setState),Nn("onNodeDrag",K,Pe.setState),Nn("onNodeDragStart",H,Pe.setState),Nn("onNodeDragStop",q,Pe.setState),Nn("onSelectionDrag",z,Pe.setState),Nn("onSelectionDragStart",W,Pe.setState),Nn("onSelectionDragStop",ee,Pe.setState),Nn("noPanClassName",X,Pe.setState),Nn("nodeOrigin",O,Pe.setState),Nn("rfId",R,Pe.setState),Nn("autoPanOnConnect",G,Pe.setState),Nn("autoPanOnNodeDrag",Y,Pe.setState),Nn("onError",te,Pe.setState),Nn("connectionRadius",ae,Pe.setState),Nn("isValidConnection",oe,Pe.setState),Nn("nodeDragThreshold",ie,Pe.setState),Gx(e,ue),Gx(t,Ce),Gx(x,Be),Gx(v,je),Gx(S,_e),Gx(y,Ae),null},DW={display:"none"},Nat={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Gue="react-flow__node-desc",que="react-flow__edge-desc",Cat="react-flow__aria-live",_at=e=>e.ariaLiveMessage;function Sat({rfId:e}){const t=hs(_at);return st.createElement("div",{id:`${Cat}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Nat},t)}function kat({rfId:e,disableKeyboardA11y:t}){return st.createElement(st.Fragment,null,st.createElement("div",{id:`${Gue}-${e}`,style:DW},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),st.createElement("div",{id:`${que}-${e}`,style:DW},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&st.createElement(Sat,{rfId:e}))}var U2=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=N.useState(!1),a=N.useRef(!1),s=N.useRef(new Set([])),[o,l]=N.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return N.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(a.current=m.ctrlKey||m.metaKey||m.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&eD(m))return!1;const x=RW(m.code,l);s.current.add(m[x]),PW(o,s.current,!1)&&(m.preventDefault(),n(!0))},f=m=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&eD(m))return!1;const x=RW(m.code,l);PW(o,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function PW(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function RW(e,t){return t.includes(e)?"code":"key"}function Kue(e,t,r,n){var l,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),o=Xv(s,n);return Kue(s,t,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((l=s[Fs])==null?void 0:l.z)??0)>(r.z??0)?((c=s[Fs])==null?void 0:c.z)??0:r.z??0},n)}function Wue(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:o,y:l,z:c}=Kue(n,e,{...n.position,z:((s=n[Fs])==null?void 0:s.z)??0},t);n.positionAbsolute={x:o,y:l},n[Fs].z=c,r!=null&&r[n.id]&&(n[Fs].isParent=!0)}})}function KI(e,t,r,n){const a=new Map,s={},o=n?1e3:0;return e.forEach(l=>{var m;const c=(Gu(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,Fs,{enumerable:!1,value:{handleBounds:h||(m=u==null?void 0:u[Fs])==null?void 0:m.handleBounds,z:c}}),a.set(l.id,d)}),Wue(a,r,s),a}function Xue(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(l&&c&&(h||!t.initial)){const g=r().filter(v=>{var w;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(_=>_.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=VM(g,f),{x:y,y:w,zoom:_}=Due(v,n,a,t.minZoom??s,t.maxZoom??o,t.padding??.1),F=ym.translate(y,w).scale(_);return typeof t.duration=="number"&&t.duration>0?l.transform(Lp(c,t.duration),F):l.transform(c,F),!0}}return!1}function jat(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Fs]:n[Fs],selected:r.selected})}),new Map(t)}function Bat(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function PC({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:jat(e,a)}),o==null||o(e)),t!=null&&t.length&&(u&&n({edges:Bat(t,s)}),l==null||l(t))}const qx=()=>{},Tat={zoomIn:qx,zoomOut:qx,zoomTo:qx,getZoom:()=>1,setViewport:qx,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:qx,fitBounds:qx,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Iat=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Fat=()=>{const e=so(),{d3Zoom:t,d3Selection:r}=hs(Iat,ul);return N.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Lp(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Lp(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Lp(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[o,l,c]=e.getState().transform,u=ym.translate(a.x??o,a.y??l).scale(a.zoom??c);t.transform(Lp(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,o]=e.getState().transform;return{x:a,y:s,zoom:o}},fitView:a=>Xue(e.getState,a),setCenter:(a,s,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=l/2-a*d,h=c/2-s*d,m=ym.translate(f,h).scale(d);t.transform(Lp(r,o==null?void 0:o.duration),m)},fitBounds:(a,s)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Due(a,o,l,c,u,(s==null?void 0:s.padding)??.1),m=ym.translate(d,f).scale(h);t.transform(Lp(r,s==null?void 0:s.duration),m)},project:a=>{const{transform:s,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),nD(a,s,o,l)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return nD(f,s,o,l)},flowToScreenPosition:a=>{const{transform:s,domNode:o}=e.getState();if(!o)return a;const{x:l,y:c}=o.getBoundingClientRect(),u=Iue(a,s);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:Tat,[t,r])};function uj(){const e=Fat(),t=so(),r=N.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=N.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=N.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),s=N.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),o=N.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:w,onNodesChange:_}=t.getState(),F=v(),B=typeof x=="function"?x(F):x;if(w)y(B);else if(_){const T=B.length===0?F.map(C=>({type:"remove",id:C.id})):B.map(C=>({item:C,type:"reset"}));_(T)}},[]),l=N.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:_}=t.getState(),F=typeof x=="function"?x(v):x;if(w)y(F);else if(_){const B=F.length===0?v.map(T=>({type:"remove",id:T.id})):F.map(T=>({item:T,type:"reset"}));_(B)}},[]),c=N.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:_,onNodesChange:F}=t.getState();if(_){const T=[...y(),...v];w(T)}else if(F){const B=v.map(T=>({item:T,type:"add"}));F(B)}},[]),u=N.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:_,onEdgesChange:F}=t.getState();if(_)w([...y,...v]);else if(F){const B=v.map(T=>({item:T,type:"add"}));F(B)}},[]),d=N.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[w,_,F]=y;return{nodes:x().map(B=>({...B})),edges:v.map(B=>({...B})),viewport:{x:w,y:_,zoom:F}}},[]),f=N.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:w,edges:_,hasDefaultNodes:F,hasDefaultEdges:B,onNodesDelete:T,onEdgesDelete:C,onNodesChange:S,onEdgesChange:j}=t.getState(),L=(x||[]).map(K=>K.id),P=(v||[]).map(K=>K.id),k=w().reduce((K,H)=>{const q=H.parentNode||H.parentId,z=!L.includes(H.id)&&q&&K.find(ee=>ee.id===q);return(typeof H.deletable=="boolean"?H.deletable:!0)&&(L.includes(H.id)||z)&&K.push(H),K},[]),U=_.filter(K=>typeof K.deletable=="boolean"?K.deletable:!0),Q=U.filter(K=>P.includes(K.id));if(k||Q){const K=Oue(k,U),H=[...Q,...K],q=H.reduce((z,W)=>(z.includes(W.id)||z.push(W.id),z),[]);if((B||F)&&(B&&t.setState({edges:_.filter(z=>!q.includes(z.id))}),F&&(k.forEach(z=>{y.delete(z.id)}),t.setState({nodeInternals:new Map(y)}))),q.length>0&&(C==null||C(H),j&&j(q.map(z=>({id:z,type:"remove"})))),k.length>0&&(T==null||T(k),S)){const z=k.map(W=>({id:W.id,type:"remove"}));S(z)}}},[]),h=N.useCallback(x=>{const v=Znt(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:kW(y),y,v]},[]),m=N.useCallback((x,v=!0,y)=>{const[w,_,F]=h(x);return w?(y||t.getState().getNodes()).filter(B=>{if(!F&&(B.id===_.id||!B.positionAbsolute))return!1;const T=kW(B),C=ZO(T,w);return v&&C>0||C>=w.width*w.height}):[]},[]),g=N.useCallback((x,v,y=!0)=>{const[w]=h(x);if(!w)return!1;const _=ZO(w,v);return y&&_>0||_>=w.width*w.height},[]);return N.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,n,a,s,o,l,c,u,d,f,m,g])}const Oat={actInsideInputWithModifier:!1};var Dat=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=so(),{deleteElements:n}=uj(),a=U2(e,Oat),s=U2(t);N.useEffect(()=>{if(a){const{edges:o,getNodes:l}=r.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),N.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function Pat(e){const t=so();N.useEffect(()=>{let r;const n=()=>{var s,o;if(!e.current)return;const a=PM(e.current);(a.height===0||a.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",Uh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const GM={position:"absolute",width:"100%",height:"100%",top:0,left:0},Rat=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,RC=e=>({x:e.x,y:e.y,zoom:e.k}),Kx=(e,t)=>e.target.closest(`.${t}`),LW=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),MW=e=>{const t=e.ctrlKey&&HS()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Lat=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Mat=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Jp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:w,noWheelClassName:_,noPanClassName:F})=>{const B=N.useRef(),T=so(),C=N.useRef(!1),S=N.useRef(!1),j=N.useRef(null),L=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:k,d3ZoomHandler:U,userSelectionActive:Q}=hs(Lat,ul),K=U2(v),H=N.useRef(0),q=N.useRef(!1),z=N.useRef();return Pat(j),N.useEffect(()=>{if(j.current){const W=j.current.getBoundingClientRect(),ee=$nt().scaleExtent([g,x]).translateExtent(m),X=Vu(j.current).call(ee),O=ym.translate(h.x,h.y).scale(Pb(h.zoom,g,x)),R=[[0,0],[W.width,W.height]],G=ee.constrain()(O,R,m);ee.transform(X,G),ee.wheelDelta(MW),T.setState({d3Zoom:ee,d3Selection:X,d3ZoomHandler:X.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:j.current.closest(".react-flow")})}},[]),N.useEffect(()=>{k&&P&&(o&&!K&&!Q?k.on("wheel.zoom",W=>{if(Kx(W,_))return!1;W.preventDefault(),W.stopImmediatePropagation();const ee=k.property("__zoom").k||1;if(W.ctrlKey&&s){const oe=Qf(W),ie=MW(W),ue=ee*Math.pow(2,ie);P.scaleTo(k,ue,oe,W);return}const X=W.deltaMode===1?20:1;let O=c===Jp.Vertical?0:W.deltaX*X,R=c===Jp.Horizontal?0:W.deltaY*X;!HS()&&W.shiftKey&&c!==Jp.Vertical&&(O=W.deltaY*X,R=0),P.translateBy(k,-(O/ee)*l,-(R/ee)*l,{internal:!0});const G=RC(k.property("__zoom")),{onViewportChangeStart:Y,onViewportChange:te,onViewportChangeEnd:ae}=T.getState();clearTimeout(z.current),q.current||(q.current=!0,t==null||t(W,G),Y==null||Y(G)),q.current&&(e==null||e(W,G),te==null||te(G),z.current=setTimeout(()=>{r==null||r(W,G),ae==null||ae(G),q.current=!1},150))},{passive:!1}):typeof U<"u"&&k.on("wheel.zoom",function(W,ee){if(!y&&W.type==="wheel"&&!W.ctrlKey||Kx(W,_))return null;W.preventDefault(),U.call(this,W,ee)},{passive:!1}))},[Q,o,c,k,P,U,K,s,y,_,t,e,r]),N.useEffect(()=>{P&&P.on("start",W=>{var O,R;if(!W.sourceEvent||W.sourceEvent.internal)return null;H.current=(O=W.sourceEvent)==null?void 0:O.button;const{onViewportChangeStart:ee}=T.getState(),X=RC(W.transform);C.current=!0,L.current=X,((R=W.sourceEvent)==null?void 0:R.type)==="mousedown"&&T.setState({paneDragging:!0}),ee==null||ee(X),t==null||t(W.sourceEvent,X)})},[P,t]),N.useEffect(()=>{P&&(Q&&!C.current?P.on("zoom",null):Q||P.on("zoom",W=>{var X;const{onViewportChange:ee}=T.getState();if(T.setState({transform:[W.transform.x,W.transform.y,W.transform.k]}),S.current=!!(n&&LW(f,H.current??0)),(e||ee)&&!((X=W.sourceEvent)!=null&&X.internal)){const O=RC(W.transform);ee==null||ee(O),e==null||e(W.sourceEvent,O)}}))},[Q,P,e,f,n]),N.useEffect(()=>{P&&P.on("end",W=>{if(!W.sourceEvent||W.sourceEvent.internal)return null;const{onViewportChangeEnd:ee}=T.getState();if(C.current=!1,T.setState({paneDragging:!1}),n&&LW(f,H.current??0)&&!S.current&&n(W.sourceEvent),S.current=!1,(r||ee)&&Rat(L.current,W.transform)){const X=RC(W.transform);L.current=X,clearTimeout(B.current),B.current=setTimeout(()=>{ee==null||ee(X),r==null||r(W.sourceEvent,X)},o?150:0)}})},[P,o,f,r,n]),N.useEffect(()=>{P&&P.filter(W=>{const ee=K||a,X=s&&W.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&W.button===1&&W.type==="mousedown"&&(Kx(W,"react-flow__node")||Kx(W,"react-flow__edge")))return!0;if(!f&&!ee&&!o&&!u&&!s||Q||!u&&W.type==="dblclick"||Kx(W,_)&&W.type==="wheel"||Kx(W,F)&&(W.type!=="wheel"||o&&W.type==="wheel"&&!K)||!s&&W.ctrlKey&&W.type==="wheel"||!ee&&!o&&!X&&W.type==="wheel"||!f&&(W.type==="mousedown"||W.type==="touchstart")||Array.isArray(f)&&!f.includes(W.button)&&W.type==="mousedown")return!1;const O=Array.isArray(f)&&f.includes(W.button)||!W.button||W.button<=1;return(!W.ctrlKey||W.type==="wheel")&&O})},[Q,P,a,s,o,u,f,d,K]),st.createElement("div",{className:"react-flow__renderer",ref:j,style:GM},w)},Uat=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Qat(){const{userSelectionActive:e,userSelectionRect:t}=hs(Uat,ul);return e&&t?st.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function UW(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Yue(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(l=>l.id===a.id);if(s.length===0)return n.push(a),n;const o={...a};for(const l of s)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&UW(n,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&UW(n,o);break}case"remove":return n}return n.push(o),n},r)}function Jue(e,t){return Yue(e,t)}function Hat(e,t){return Yue(e,t)}const q0=(e,t)=>({id:e,type:"select",selected:t});function _v(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(q0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(q0(n.id,!1))),r},[])}const WI=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},Vat=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Zue=N.memo(({isSelecting:e,selectionMode:t=M2.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=N.useRef(null),m=so(),g=N.useRef(0),x=N.useRef(0),v=N.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:_}=hs(Vat,ul),F=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},B=U=>{s==null||s(U),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},T=U=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){U.preventDefault();return}o==null||o(U)},C=l?U=>l(U):void 0,S=U=>{const{resetSelectedElements:Q,domNode:K}=m.getState();if(v.current=K==null?void 0:K.getBoundingClientRect(),!w||!e||U.button!==0||U.target!==h.current||!v.current)return;const{x:H,y:q}=wm(U,v.current);Q(),m.setState({userSelectionRect:{width:0,height:0,startX:H,startY:q,x:H,y:q}}),n==null||n(U)},j=U=>{const{userSelectionRect:Q,nodeInternals:K,edges:H,transform:q,onNodesChange:z,onEdgesChange:W,nodeOrigin:ee,getNodes:X}=m.getState();if(!e||!v.current||!Q)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const O=wm(U,v.current),R=Q.startX??0,G=Q.startY??0,Y={...Q,x:O.x<R?O.x:R,y:O.y<G?O.y:G,width:Math.abs(O.x-R),height:Math.abs(O.y-G)},te=X(),ae=Fue(K,Y,q,t===M2.Partial,!0,ee),oe=Oue(ae,H).map(ue=>ue.id),ie=ae.map(ue=>ue.id);if(g.current!==ie.length){g.current=ie.length;const ue=_v(te,ie);ue.length&&(z==null||z(ue))}if(x.current!==oe.length){x.current=oe.length;const ue=_v(H,oe);ue.length&&(W==null||W(ue))}m.setState({userSelectionRect:Y})},L=U=>{if(U.button!==0)return;const{userSelectionRect:Q}=m.getState();!y&&Q&&U.target===h.current&&(B==null||B(U)),m.setState({nodesSelectionActive:g.current>0}),F(),a==null||a(U)},P=U=>{y&&(m.setState({nodesSelectionActive:g.current>0}),a==null||a(U)),F()},k=w&&(e||y);return st.createElement("div",{className:Il(["react-flow__pane",{dragging:_,selection:e}]),onClick:k?void 0:WI(B,h),onContextMenu:WI(T,h),onWheel:WI(C,h),onMouseEnter:k?void 0:c,onMouseDown:k?S:void 0,onMouseMove:k?j:u,onMouseUp:k?L:void 0,onMouseLeave:k?P:d,ref:h,style:GM},f,st.createElement(Qat,null))});Zue.displayName="Pane";function ede(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:ede(n,t):!1}function QW(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function zat(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!ede(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,o;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((o=a.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function $at(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function tde(e,t,r,n,a=[0,0],s){const o=$at(e,e.extent||n);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:m}=Xv(f,a).positionAbsolute;l=f&&Gu(h)&&Gu(m)&&Gu(f.width)&&Gu(f.height)?[[h+e.width*a[0],m+e.height*a[1]],[h+f.width-e.width+e.width*a[0],m+f.height-e.height+e.height*a[1]]]:l}else s==null||s("005",Uh.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:m}=Xv(f,a).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=r.get(c);u=Xv(f,a).positionAbsolute}const d=l&&l!=="parent"?RM(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function XI({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const HW=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),o=t.getBoundingClientRect(),l={x:o.width*n[0],y:o.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/r,y:(u.top-o.top-l.y)/r,...PM(c)}})};function By(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function sD({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",Uh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function Gat(){const e=so();return N.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,c={x:(o-n[0])/n[2],y:(l-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function YI(e){return(t,r,n)=>e==null?void 0:e(t,n)}function rde({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:o}){const l=so(),[c,u]=N.useState(!1),d=N.useRef([]),f=N.useRef({x:null,y:null}),h=N.useRef(0),m=N.useRef(null),g=N.useRef({x:0,y:0}),x=N.useRef(null),v=N.useRef(!1),y=N.useRef(!1),w=N.useRef(!1),_=Gat();return N.useEffect(()=>{if(e!=null&&e.current){const F=Vu(e.current),B=({x:S,y:j})=>{const{nodeInternals:L,onNodeDrag:P,onSelectionDrag:k,updateNodePositions:U,nodeExtent:Q,snapGrid:K,snapToGrid:H,nodeOrigin:q,onError:z}=l.getState();f.current={x:S,y:j};let W=!1,ee={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&Q){const O=VM(d.current,q);ee=LM(O)}if(d.current=d.current.map(O=>{const R={x:S-O.distance.x,y:j-O.distance.y};H&&(R.x=K[0]*Math.round(R.x/K[0]),R.y=K[1]*Math.round(R.y/K[1]));const G=[[Q[0][0],Q[0][1]],[Q[1][0],Q[1][1]]];d.current.length>1&&Q&&!O.extent&&(G[0][0]=O.positionAbsolute.x-ee.x+Q[0][0],G[1][0]=O.positionAbsolute.x+(O.width??0)-ee.x2+Q[1][0],G[0][1]=O.positionAbsolute.y-ee.y+Q[0][1],G[1][1]=O.positionAbsolute.y+(O.height??0)-ee.y2+Q[1][1]);const Y=tde(O,R,L,G,q,z);return W=W||O.position.x!==Y.position.x||O.position.y!==Y.position.y,O.position=Y.position,O.positionAbsolute=Y.positionAbsolute,O}),!W)return;U(d.current,!0,!0),u(!0);const X=a?P:YI(k);if(X&&x.current){const[O,R]=XI({nodeId:a,dragItems:d.current,nodeInternals:L});X(x.current,O,R)}},T=()=>{if(!m.current)return;const[S,j]=Nue(g.current,m.current);if(S!==0||j!==0){const{transform:L,panBy:P}=l.getState();f.current.x=(f.current.x??0)-S/L[2],f.current.y=(f.current.y??0)-j/L[2],P({x:S,y:j})&&B(f.current)}h.current=requestAnimationFrame(T)},C=S=>{var q;const{nodeInternals:j,multiSelectionActive:L,nodesDraggable:P,unselectNodesAndEdges:k,onNodeDragStart:U,onSelectionDragStart:Q}=l.getState();y.current=!0;const K=a?U:YI(Q);(!o||!s)&&!L&&a&&((q=j.get(a))!=null&&q.selected||k()),a&&s&&o&&sD({id:a,store:l,nodeRef:e});const H=_(S);if(f.current=H,d.current=zat(j,P,H,a),K&&d.current){const[z,W]=XI({nodeId:a,dragItems:d.current,nodeInternals:j});K(S.sourceEvent,z,W)}};if(t)F.on(".drag",null);else{const S=Srt().on("start",j=>{const{domNode:L,nodeDragThreshold:P}=l.getState();P===0&&C(j),w.current=!1;const k=_(j);f.current=k,m.current=(L==null?void 0:L.getBoundingClientRect())||null,g.current=wm(j.sourceEvent,m.current)}).on("drag",j=>{var U,Q;const L=_(j),{autoPanOnNodeDrag:P,nodeDragThreshold:k}=l.getState();if(j.sourceEvent.type==="touchmove"&&j.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!v.current&&y.current&&P&&(v.current=!0,T()),!y.current){const K=L.xSnapped-(((U=f==null?void 0:f.current)==null?void 0:U.x)??0),H=L.ySnapped-(((Q=f==null?void 0:f.current)==null?void 0:Q.y)??0);Math.sqrt(K*K+H*H)>k&&C(j)}(f.current.x!==L.xSnapped||f.current.y!==L.ySnapped)&&d.current&&y.current&&(x.current=j.sourceEvent,g.current=wm(j.sourceEvent,m.current),B(L))}}).on("end",j=>{if(!(!y.current||w.current)&&(u(!1),v.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:L,nodeInternals:P,onNodeDragStop:k,onSelectionDragStop:U}=l.getState(),Q=a?k:YI(U);if(L(d.current,!1,!1),Q){const[K,H]=XI({nodeId:a,dragItems:d.current,nodeInternals:P});Q(j.sourceEvent,K,H)}}}).filter(j=>{const L=j.target;return!j.button&&(!r||!QW(L,`.${r}`,e))&&(!n||QW(L,n,e))});return F.call(S),()=>{F.on(".drag",null)}}}},[e,t,r,n,s,l,a,o,_]),c}function nde(){const e=so();return N.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=l?c[0]:5,m=l?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,v=r.y*m*g,y=f.map(w=>{if(w.positionAbsolute){const _={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+v};l&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:F,position:B}=tde(w,_,n,a,void 0,u);w.position=B,w.positionAbsolute=F}return w});s(y,!0,!1)},[])}const Yv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ty=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:w,isSelectable:_,isConnectable:F,isFocusable:B,selectNodesOnDrag:T,sourcePosition:C,targetPosition:S,hidden:j,resizeObserver:L,dragHandle:P,zIndex:k,isParent:U,noDragClassName:Q,noPanClassName:K,initialized:H,disableKeyboardA11y:q,ariaLabel:z,rfId:W,hasHandleBounds:ee})=>{const X=so(),O=N.useRef(null),R=N.useRef(null),G=N.useRef(C),Y=N.useRef(S),te=N.useRef(n),ae=_||w||d||f||h||m,oe=nde(),ie=By(r,X.getState,f),ue=By(r,X.getState,h),Ce=By(r,X.getState,m),ne=By(r,X.getState,g),Be=By(r,X.getState,x),je=ve=>{const{nodeDragThreshold:Pe}=X.getState();if(_&&(!T||!w||Pe>0)&&sD({id:r,store:X,nodeRef:O}),d){const Ue=X.getState().nodeInternals.get(r);Ue&&d(ve,{...Ue})}},_e=ve=>{if(!eD(ve)&&!q)if(_ue.includes(ve.key)&&_){const Pe=ve.key==="Escape";sD({id:r,store:X,unselect:Pe,nodeRef:O})}else w&&u&&Object.prototype.hasOwnProperty.call(Yv,ve.key)&&(X.setState({ariaLiveMessage:`Moved selected node ${ve.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),oe({x:Yv[ve.key].x,y:Yv[ve.key].y,isShiftPressed:ve.shiftKey}))};N.useEffect(()=>()=>{R.current&&(L==null||L.unobserve(R.current),R.current=null)},[]),N.useEffect(()=>{if(O.current&&!j){const ve=O.current;(!H||!ee||R.current!==ve)&&(R.current&&(L==null||L.unobserve(R.current)),L==null||L.observe(ve),R.current=ve)}},[j,H,ee]),N.useEffect(()=>{const ve=te.current!==n,Pe=G.current!==C,Ue=Y.current!==S;O.current&&(ve||Pe||Ue)&&(ve&&(te.current=n),Pe&&(G.current=C),Ue&&(Y.current=S),X.getState().updateNodeDimensions([{id:r,nodeElement:O.current,forceUpdate:!0}]))},[r,n,C,S]);const Ae=rde({nodeRef:O,disabled:j||!w,noDragClassName:Q,handleSelector:P,nodeId:r,isSelectable:_,selectNodesOnDrag:T});return j?null:st.createElement("div",{className:Il(["react-flow__node",`react-flow__node-${n}`,{[K]:w},y,{selected:u,selectable:_,parent:U,dragging:Ae}]),ref:O,style:{zIndex:k,transform:`translate(${l}px,${c}px)`,pointerEvents:ae?"all":"none",visibility:H?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ie,onMouseMove:ue,onMouseLeave:Ce,onContextMenu:ne,onClick:je,onDoubleClick:Be,onKeyDown:B?_e:void 0,tabIndex:B?0:void 0,role:B?"button":void 0,"aria-describedby":q?void 0:`${Gue}-${W}`,"aria-label":z},st.createElement(iat,{value:r},st.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:o,selected:u,isConnectable:F,sourcePosition:C,targetPosition:S,dragging:Ae,dragHandle:P,zIndex:k})))};return t.displayName="NodeWrapper",N.memo(t)};const qat=e=>{const t=e.getNodes().filter(r=>r.selected);return{...VM(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Kat({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=so(),{width:a,height:s,x:o,y:l,transformString:c,userSelectionActive:u}=hs(qat,ul),d=nde(),f=N.useRef(null);if(N.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),rde({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const x=n.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(Yv,g.key)&&d({x:Yv[g.key].x,y:Yv[g.key].y,isShiftPressed:g.shiftKey})};return st.createElement("div",{className:Il(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},st.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:a,height:s,top:l,left:o}}))}var Wat=N.memo(Kat);const Xat=e=>e.nodesSelectionActive,ade=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:F,zoomOnPinch:B,panOnScroll:T,panOnScrollSpeed:C,panOnScrollMode:S,zoomOnDoubleClick:j,panOnDrag:L,defaultViewport:P,translateExtent:k,minZoom:U,maxZoom:Q,preventScrolling:K,onSelectionContextMenu:H,noWheelClassName:q,noPanClassName:z,disableKeyboardA11y:W})=>{const ee=hs(Xat),X=U2(f),O=U2(y),R=O||L,G=O||T,Y=X||h&&R!==!0;return Dat({deleteKeyCode:l,multiSelectionKeyCode:v}),st.createElement(Mat,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:F,zoomOnPinch:B,panOnScroll:G,panOnScrollSpeed:C,panOnScrollMode:S,zoomOnDoubleClick:j,panOnDrag:!X&&R,defaultViewport:P,translateExtent:k,minZoom:U,maxZoom:Q,zoomActivationKeyCode:w,preventScrolling:K,noWheelClassName:q,noPanClassName:z},st.createElement(Zue,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:R,isSelecting:!!Y,selectionMode:m},e,ee&&st.createElement(Wat,{onSelectionContextMenu:H,noPanClassName:z,disableKeyboardA11y:W})))};ade.displayName="FlowRenderer";var Yat=N.memo(ade);function Jat(e){return hs(N.useCallback(r=>e?Fue(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function Zat(e){const t={input:Ty(e.input||Hue),default:Ty(e.default||aD),output:Ty(e.output||zue),group:Ty(e.group||$M)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=Ty(e[s]||aD),a),r);return{...t,...n}}const est=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},tst=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),sde=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:o}=hs(tst,ul),l=Jat(e.onlyRenderVisibleElements),c=N.useRef(),u=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return N.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),st.createElement("div",{className:"react-flow__nodes",style:GM},l.map(d=>{var B,T,C;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",Uh.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),v=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?RM(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,_=(y==null?void 0:y.y)??0,F=est({x:w,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return st.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||kr.Bottom,targetPosition:d.targetPosition||kr.Top,hidden:d.hidden,xPos:w,yPos:_,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((B=d[Fs])==null?void 0:B.z)??0,isParent:!!((T=d[Fs])!=null&&T.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[Fs])!=null&&C.handleBounds)})}))};sde.displayName="NodeRenderer";var rst=N.memo(sde);const nst=(e,t,r)=>r===kr.Left?e-t:r===kr.Right?e+t:e,ast=(e,t,r)=>r===kr.Top?e-t:r===kr.Bottom?e+t:e,VW="react-flow__edgeupdater",zW=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:o,type:l})=>st.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:o,className:Il([VW,`${VW}-${l}`]),cx:nst(t,n,e),cy:ast(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),sst=()=>!0;var Wx=e=>{const t=({id:r,className:n,type:a,data:s,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:w,sourceX:_,sourceY:F,targetX:B,targetY:T,sourcePosition:C,targetPosition:S,elementsSelectable:j,hidden:L,sourceHandleId:P,targetHandleId:k,onContextMenu:U,onMouseEnter:Q,onMouseMove:K,onMouseLeave:H,reconnectRadius:q,onReconnect:z,onReconnectStart:W,onReconnectEnd:ee,markerEnd:X,markerStart:O,rfId:R,ariaLabel:G,isFocusable:Y,isReconnectable:te,pathOptions:ae,interactionWidth:oe,disableKeyboardA11y:ie})=>{const ue=N.useRef(null),[Ce,ne]=N.useState(!1),[Be,je]=N.useState(!1),_e=so(),Ae=N.useMemo(()=>`url('#${rD(O,R)}')`,[O,R]),ve=N.useMemo(()=>`url('#${rD(X,R)}')`,[X,R]);if(L)return null;const Pe=Et=>{var Fn;const{edges:_r,addSelectedEdges:qt,unselectNodesAndEdges:tn,multiSelectionActive:Br}=_e.getState(),Kr=_r.find(Lr=>Lr.id===r);Kr&&(j&&(_e.setState({nodesSelectionActive:!1}),Kr.selected&&Br?(tn({nodes:[],edges:[Kr]}),(Fn=ue.current)==null||Fn.blur()):qt([r])),o&&o(Et,Kr))},Ue=jy(r,_e.getState,l),de=jy(r,_e.getState,U),be=jy(r,_e.getState,Q),De=jy(r,_e.getState,K),Ve=jy(r,_e.getState,H),We=(Et,_r)=>{if(Et.button!==0)return;const{edges:qt,isValidConnection:tn}=_e.getState(),Br=_r?w:y,Kr=(_r?k:P)||null,Fn=_r?"target":"source",Lr=tn||sst,ps=_r,pn=qt.find(an=>an.id===r);je(!0),W==null||W(Et,pn,Fn);const la=an=>{je(!1),ee==null||ee(an,pn,Fn)};Lue({event:Et,handleId:Kr,nodeId:Br,onConnect:an=>z==null?void 0:z(pn,an),isTarget:ps,getState:_e.getState,setState:_e.setState,isValidConnection:Lr,edgeUpdaterType:Fn,onReconnectEnd:la})},Je=Et=>We(Et,!0),At=Et=>We(Et,!1),vt=()=>ne(!0),wt=()=>ne(!1),Tt=!j&&!o,Lt=Et=>{var _r;if(!ie&&_ue.includes(Et.key)&&j){const{unselectNodesAndEdges:qt,addSelectedEdges:tn,edges:Br}=_e.getState();Et.key==="Escape"?((_r=ue.current)==null||_r.blur(),qt({edges:[Br.find(Fn=>Fn.id===r)]})):tn([r])}};return st.createElement("g",{className:Il(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Tt,updating:Ce}]),onClick:Pe,onDoubleClick:Ue,onContextMenu:de,onMouseEnter:be,onMouseMove:De,onMouseLeave:Ve,onKeyDown:Y?Lt:void 0,tabIndex:Y?0:void 0,role:Y?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":G===null?void 0:G||`Edge from ${y} to ${w}`,"aria-describedby":Y?`${que}-${R}`:void 0,ref:ue},!Be&&st.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:v,sourceX:_,sourceY:F,targetX:B,targetY:T,sourcePosition:C,targetPosition:S,sourceHandleId:P,targetHandleId:k,markerStart:Ae,markerEnd:ve,pathOptions:ae,interactionWidth:oe}),te&&st.createElement(st.Fragment,null,(te==="source"||te===!0)&&st.createElement(zW,{position:C,centerX:_,centerY:F,radius:q,onMouseDown:Je,onMouseEnter:vt,onMouseOut:wt,type:"source"}),(te==="target"||te===!0)&&st.createElement(zW,{position:S,centerX:B,centerY:T,radius:q,onMouseDown:At,onMouseEnter:vt,onMouseOut:wt,type:"target"})))};return t.displayName="EdgeWrapper",N.memo(t)};function ist(e){const t={default:Wx(e.default||zS),straight:Wx(e.bezier||QM),step:Wx(e.step||UM),smoothstep:Wx(e.step||cj),simplebezier:Wx(e.simplebezier||MM)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=Wx(e[s]||zS),a),r);return{...t,...n}}function $W(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,o=(r==null?void 0:r.height)||t.height;switch(e){case kr.Top:return{x:n+s/2,y:a};case kr.Right:return{x:n+s,y:a+o/2};case kr.Bottom:return{x:n+s/2,y:a+o};case kr.Left:return{x:n,y:a+o/2}}}function GW(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const ost=(e,t,r,n,a,s)=>{const o=$W(r,e,t),l=$W(s,n,a);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function lst({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=LM({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function qW(e){var n,a,s,o,l;const t=((n=e==null?void 0:e[Fs])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const cst=[{level:0,isMaxLevel:!0,edges:[]}];function ust(e,t,r=!1){let n=-1;const a=e.reduce((o,l)=>{var d,f;const c=Gu(l.zIndex);let u=c?l.zIndex:0;if(r){const h=t.get(l.target),m=t.get(l.source),g=l.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[Fs])==null?void 0:d.z)||0,((f=h==null?void 0:h[Fs])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(g?x:0)}return o[u]?o[u].push(l):o[u]=[l],n=u>n?u:n,o},{}),s=Object.entries(a).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===n}});return s.length===0?cst:s}function dst(e,t,r){const n=hs(N.useCallback(a=>e?a.edges.filter(s=>{const o=t.get(s.source),l=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&lst({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return ust(n,t,r)}const fst=({color:e="none",strokeWidth:t=1})=>st.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Ast=({color:e="none",strokeWidth:t=1})=>st.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),KW={[VS.Arrow]:fst,[VS.ArrowClosed]:Ast};function hst(e){const t=so();return N.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(KW,e)?KW[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Uh.error009(e)),null)},[e])}const mst=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=hst(t);return c?st.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},st.createElement(c,{color:r,strokeWidth:o})):null},pst=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=rD(o,t);n.includes(l)||(a.push({id:l,color:o.color||e,...o}),n.push(l))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},ide=({defaultColor:e,rfId:t})=>{const r=hs(N.useCallback(pst({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,o)=>s.id!==a[o].id)));return st.createElement("defs",null,r.map(n=>st.createElement(mst,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};ide.displayName="MarkerDefinitions";var gst=N.memo(ide);const xst=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),ode=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:_,elementsSelectable:F,width:B,height:T,connectionMode:C,nodeInternals:S,onError:j}=hs(xst,ul),L=dst(t,S,r);return B?st.createElement(st.Fragment,null,L.map(({level:P,edges:k,isMaxLevel:U})=>st.createElement("svg",{key:P,style:{zIndex:P},width:B,height:T,className:"react-flow__edges react-flow__container"},U&&st.createElement(gst,{defaultColor:e,rfId:n}),st.createElement("g",null,k.map(Q=>{const[K,H,q]=qW(S.get(Q.source)),[z,W,ee]=qW(S.get(Q.target));if(!q||!ee)return null;let X=Q.type||"default";a[X]||(j==null||j("011",Uh.error011(X)),X="default");const O=a[X]||a.default,R=C===Mg.Strict?W.target:(W.target??[]).concat(W.source??[]),G=GW(H.source,Q.sourceHandle),Y=GW(R,Q.targetHandle),te=(G==null?void 0:G.position)||kr.Bottom,ae=(Y==null?void 0:Y.position)||kr.Top,oe=!!(Q.focusable||w&&typeof Q.focusable>"u"),ie=Q.reconnectable||Q.updatable,ue=typeof h<"u"&&(ie||_&&typeof ie>"u");if(!G||!Y)return j==null||j("008",Uh.error008(G,Q)),null;const{sourceX:Ce,sourceY:ne,targetX:Be,targetY:je}=ost(K,G,te,z,Y,ae);return st.createElement(O,{key:Q.id,id:Q.id,className:Il([Q.className,s]),type:X,data:Q.data,selected:!!Q.selected,animated:!!Q.animated,hidden:!!Q.hidden,label:Q.label,labelStyle:Q.labelStyle,labelShowBg:Q.labelShowBg,labelBgStyle:Q.labelBgStyle,labelBgPadding:Q.labelBgPadding,labelBgBorderRadius:Q.labelBgBorderRadius,style:Q.style,source:Q.source,target:Q.target,sourceHandleId:Q.sourceHandle,targetHandleId:Q.targetHandle,markerEnd:Q.markerEnd,markerStart:Q.markerStart,sourceX:Ce,sourceY:ne,targetX:Be,targetY:je,sourcePosition:te,targetPosition:ae,elementsSelectable:F,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:Q.ariaLabel,isFocusable:oe,isReconnectable:ue,pathOptions:"pathOptions"in Q?Q.pathOptions:void 0,interactionWidth:Q.interactionWidth,disableKeyboardA11y:y})})))),v):null};ode.displayName="EdgeRenderer";var vst=N.memo(ode);const bst=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function yst({children:e}){const t=hs(bst);return st.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function wst(e){const t=uj(),r=N.useRef(!1);N.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const Est={[kr.Left]:kr.Right,[kr.Right]:kr.Left,[kr.Top]:kr.Bottom,[kr.Bottom]:kr.Top},lde=({nodeId:e,handleType:t,style:r,type:n=tm.Bezier,CustomComponent:a,connectionStatus:s})=>{var T,C,S;const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=hs(N.useCallback(j=>({fromNode:j.nodeInternals.get(e),handleId:j.connectionHandleId,toX:(j.connectionPosition.x-j.transform[0])/j.transform[2],toY:(j.connectionPosition.y-j.transform[1])/j.transform[2],connectionMode:j.connectionMode}),[e]),ul),f=(T=o==null?void 0:o[Fs])==null?void 0:T.handleBounds;let h=f==null?void 0:f[t];if(d===Mg.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!h)return null;const m=l?h.find(j=>j.id===l):h[0],g=m?m.x+m.width/2:(o.width??0)/2,x=m?m.y+m.height/2:o.height??0,v=(((C=o.positionAbsolute)==null?void 0:C.x)??0)+g,y=(((S=o.positionAbsolute)==null?void 0:S.y)??0)+x,w=m==null?void 0:m.position,_=w?Est[w]:null;if(!w||!_)return null;if(a)return st.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:o,fromHandle:m,fromX:v,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:_,connectionStatus:s});let F="";const B={sourceX:v,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:_};return n===tm.Bezier?[F]=Tue(B):n===tm.Step?[F]=tD({...B,borderRadius:0}):n===tm.SmoothStep?[F]=tD(B):n===tm.SimpleBezier?[F]=Bue(B):F=`M${v},${y} ${c},${u}`,st.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:r})};lde.displayName="ConnectionLine";const Nst=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Cst({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:o,width:l,height:c,connectionStatus:u}=hs(Nst,ul);return!(a&&s&&l&&o)?null:st.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},st.createElement("g",{className:Il(["react-flow__connection",u])},st.createElement(lde,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function WW(e,t){return N.useRef(null),so(),N.useMemo(()=>t(e),[e])}const cde=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:_,connectionLineContainerStyle:F,selectionKeyCode:B,selectionOnDrag:T,selectionMode:C,multiSelectionKeyCode:S,panActivationKeyCode:j,zoomActivationKeyCode:L,deleteKeyCode:P,onlyRenderVisibleElements:k,elementsSelectable:U,selectNodesOnDrag:Q,defaultViewport:K,translateExtent:H,minZoom:q,maxZoom:z,preventScrolling:W,defaultMarkerColor:ee,zoomOnScroll:X,zoomOnPinch:O,panOnScroll:R,panOnScrollSpeed:G,panOnScrollMode:Y,zoomOnDoubleClick:te,panOnDrag:ae,onPaneClick:oe,onPaneMouseEnter:ie,onPaneMouseMove:ue,onPaneMouseLeave:Ce,onPaneScroll:ne,onPaneContextMenu:Be,onEdgeContextMenu:je,onEdgeMouseEnter:_e,onEdgeMouseMove:Ae,onEdgeMouseLeave:ve,onReconnect:Pe,onReconnectStart:Ue,onReconnectEnd:de,reconnectRadius:be,noDragClassName:De,noWheelClassName:Ve,noPanClassName:We,elevateEdgesOnSelect:Je,disableKeyboardA11y:At,nodeOrigin:vt,nodeExtent:wt,rfId:Tt})=>{const Lt=WW(e,Zat),Et=WW(t,ist);return wst(s),st.createElement(Yat,{onPaneClick:oe,onPaneMouseEnter:ie,onPaneMouseMove:ue,onPaneMouseLeave:Ce,onPaneContextMenu:Be,onPaneScroll:ne,deleteKeyCode:P,selectionKeyCode:B,selectionOnDrag:T,selectionMode:C,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:S,panActivationKeyCode:j,zoomActivationKeyCode:L,elementsSelectable:U,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:X,zoomOnPinch:O,zoomOnDoubleClick:te,panOnScroll:R,panOnScrollSpeed:G,panOnScrollMode:Y,panOnDrag:ae,defaultViewport:K,translateExtent:H,minZoom:q,maxZoom:z,onSelectionContextMenu:g,preventScrolling:W,noDragClassName:De,noWheelClassName:Ve,noPanClassName:We,disableKeyboardA11y:At},st.createElement(yst,null,st.createElement(vst,{edgeTypes:Et,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:k,onEdgeContextMenu:je,onEdgeMouseEnter:_e,onEdgeMouseMove:Ae,onEdgeMouseLeave:ve,onReconnect:Pe,onReconnectStart:Ue,onReconnectEnd:de,reconnectRadius:be,defaultMarkerColor:ee,noPanClassName:We,elevateEdgesOnSelect:!!Je,disableKeyboardA11y:At,rfId:Tt},st.createElement(Cst,{style:w,type:y,component:_,containerStyle:F})),st.createElement("div",{className:"react-flow__edgelabel-renderer"}),st.createElement(rst,{nodeTypes:Lt,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:Q,onlyRenderVisibleElements:k,noPanClassName:We,noDragClassName:De,disableKeyboardA11y:At,nodeOrigin:vt,nodeExtent:wt,rfId:Tt})))};cde.displayName="GraphView";var _st=N.memo(cde);const iD=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],U0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:iD,nodeExtent:iD,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Mg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:eat,isValidConnection:void 0},Sst=()=>Met((e,t)=>({...U0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:KI(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",o=a?KI(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),m=r.reduce((x,v)=>{const y=a.get(v.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Fs]:{...y[Fs],handleBounds:void 0}});else if(y){const w=PM(v.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||v.forceUpdate))&&(a.set(y.id,{...y,[Fs]:{...y[Fs],handleBounds:{source:HW(".source",v.nodeElement,h,u),target:HW(".target",v.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);Wue(a,u);const g=o||s&&!o&&Xue(t,{initial:!0,...l});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(n==null||n(m))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),o=r.map(l=>{const c={id:l.id,type:"position",dragging:a};return n&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});s(o)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=Jue(r,l()),d=KI(u,a,o,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let o,l=null;n?o=r.map(c=>q0(c,!0)):(o=_v(s(),r),l=_v(a,[])),PC({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let o,l=null;n?o=r.map(c=>q0(c,!0)):(o=_v(a,r),l=_v(s(),[])),PC({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),o=r||s(),l=n||a,c=o.map(d=>(d.selected=!1,q0(d.id,!1))),u=l.map(d=>q0(d.id,!1));PC({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(l=>l.selected).map(l=>q0(l.id,!1)),o=r.filter(l=>l.selected).map(l=>q0(l.id,!1));PC({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=RM(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!r.x&&!r.y)return!1;const u=ym.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(l,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:U0.connectionNodeId,connectionHandleId:U0.connectionHandleId,connectionHandleType:U0.connectionHandleType,connectionStatus:U0.connectionStatus,connectionStartHandle:U0.connectionStartHandle,connectionEndHandle:U0.connectionEndHandle}),reset:()=>e({...U0})}),Object.is),qM=({children:e})=>{const t=N.useRef(null);return t.current||(t.current=Sst()),st.createElement(Gnt,{value:t.current},e)};qM.displayName="ReactFlowProvider";const ude=({children:e})=>N.useContext(lj)?st.createElement(st.Fragment,null,e):st.createElement(qM,null,e);ude.displayName="ReactFlowWrapper";const kst={input:Hue,default:aD,output:zue,group:$M},jst={default:zS,straight:QM,step:UM,smoothstep:cj,simplebezier:MM},Bst=[0,0],Tst=[15,15],Ist={x:0,y:0,zoom:1},Fst={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},dde=N.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=kst,edgeTypes:o=jst,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:F,onNodeContextMenu:B,onNodeDoubleClick:T,onNodeDragStart:C,onNodeDrag:S,onNodeDragStop:j,onNodesDelete:L,onEdgesDelete:P,onSelectionChange:k,onSelectionDragStart:U,onSelectionDrag:Q,onSelectionDragStop:K,onSelectionContextMenu:H,onSelectionStart:q,onSelectionEnd:z,connectionMode:W=Mg.Strict,connectionLineType:ee=tm.Bezier,connectionLineStyle:X,connectionLineComponent:O,connectionLineContainerStyle:R,deleteKeyCode:G="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:te=!1,selectionMode:ae=M2.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ie=HS()?"Meta":"Control",zoomActivationKeyCode:ue=HS()?"Meta":"Control",snapToGrid:Ce=!1,snapGrid:ne=Tst,onlyRenderVisibleElements:Be=!1,selectNodesOnDrag:je=!0,nodesDraggable:_e,nodesConnectable:Ae,nodesFocusable:ve,nodeOrigin:Pe=Bst,edgesFocusable:Ue,edgesUpdatable:de,elementsSelectable:be,defaultViewport:De=Ist,minZoom:Ve=.5,maxZoom:We=2,translateExtent:Je=iD,preventScrolling:At=!0,nodeExtent:vt,defaultMarkerColor:wt="#b1b1b7",zoomOnScroll:Tt=!0,zoomOnPinch:Lt=!0,panOnScroll:Et=!1,panOnScrollSpeed:_r=.5,panOnScrollMode:qt=Jp.Free,zoomOnDoubleClick:tn=!0,panOnDrag:Br=!0,onPaneClick:Kr,onPaneMouseEnter:Fn,onPaneMouseMove:Lr,onPaneMouseLeave:ps,onPaneScroll:pn,onPaneContextMenu:la,children:Ta,onEdgeContextMenu:an,onEdgeDoubleClick:vr,onEdgeMouseEnter:rt,onEdgeMouseMove:gt,onEdgeMouseLeave:Ze,onEdgeUpdate:bt,onEdgeUpdateStart:Nt,onEdgeUpdateEnd:yt,onReconnect:rr,onReconnectStart:br,onReconnectEnd:ur,reconnectRadius:Or=10,edgeUpdaterRadius:Yr=10,onNodesChange:pe,onEdgesChange:Fe,noDragClassName:Se="nodrag",noWheelClassName:ke="nowheel",noPanClassName:Te="nopan",fitView:Oe=!1,fitViewOptions:et,connectOnClick:ft=!0,attributionPosition:qe,proOptions:at,defaultEdgeOptions:lt,elevateNodesOnSelect:Dt=!0,elevateEdgesOnSelect:$t=!1,disableKeyboardA11y:Zt=!1,autoPanOnConnect:zt=!0,autoPanOnNodeDrag:Kt=!0,connectionRadius:Tr=20,isValidConnection:on,onError:ln,style:An,id:gs,nodeDragThreshold:So,...xs},ni)=>{const Ls=gs||"1";return st.createElement("div",{...xs,style:{...An,...Fst},ref:ni,className:Il(["react-flow",a]),"data-testid":"rf__wrapper",id:gs},st.createElement(ude,null,st.createElement(_st,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:F,onNodeContextMenu:B,onNodeDoubleClick:T,nodeTypes:s,edgeTypes:o,connectionLineType:ee,connectionLineStyle:X,connectionLineComponent:O,connectionLineContainerStyle:R,selectionKeyCode:Y,selectionOnDrag:te,selectionMode:ae,deleteKeyCode:G,multiSelectionKeyCode:ie,panActivationKeyCode:oe,zoomActivationKeyCode:ue,onlyRenderVisibleElements:Be,selectNodesOnDrag:je,defaultViewport:De,translateExtent:Je,minZoom:Ve,maxZoom:We,preventScrolling:At,zoomOnScroll:Tt,zoomOnPinch:Lt,zoomOnDoubleClick:tn,panOnScroll:Et,panOnScrollSpeed:_r,panOnScrollMode:qt,panOnDrag:Br,onPaneClick:Kr,onPaneMouseEnter:Fn,onPaneMouseMove:Lr,onPaneMouseLeave:ps,onPaneScroll:pn,onPaneContextMenu:la,onSelectionContextMenu:H,onSelectionStart:q,onSelectionEnd:z,onEdgeContextMenu:an,onEdgeDoubleClick:vr,onEdgeMouseEnter:rt,onEdgeMouseMove:gt,onEdgeMouseLeave:Ze,onReconnect:rr??bt,onReconnectStart:br??Nt,onReconnectEnd:ur??yt,reconnectRadius:Or??Yr,defaultMarkerColor:wt,noDragClassName:Se,noWheelClassName:ke,noPanClassName:Te,elevateEdgesOnSelect:$t,rfId:Ls,disableKeyboardA11y:Zt,nodeOrigin:Pe,nodeExtent:vt}),st.createElement(Eat,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:_e,nodesConnectable:Ae,nodesFocusable:ve,edgesFocusable:Ue,edgesUpdatable:de,elementsSelectable:be,elevateNodesOnSelect:Dt,minZoom:Ve,maxZoom:We,nodeExtent:vt,onNodesChange:pe,onEdgesChange:Fe,snapToGrid:Ce,snapGrid:ne,connectionMode:W,translateExtent:Je,connectOnClick:ft,defaultEdgeOptions:lt,fitView:Oe,fitViewOptions:et,onNodesDelete:L,onEdgesDelete:P,onNodeDragStart:C,onNodeDrag:S,onNodeDragStop:j,onSelectionDrag:Q,onSelectionDragStart:U,onSelectionDragStop:K,noPanClassName:Te,nodeOrigin:Pe,rfId:Ls,autoPanOnConnect:zt,autoPanOnNodeDrag:Kt,onError:ln,connectionRadius:Tr,isValidConnection:on,nodeDragThreshold:So}),st.createElement(yat,{onSelectionChange:k}),Ta,st.createElement(Knt,{proOptions:at,position:qe}),st.createElement(kat,{rfId:Ls,disableKeyboardA11y:Zt})))});dde.displayName="ReactFlow";function fde(e){return t=>{const[r,n]=N.useState(t),a=N.useCallback(s=>n(o=>e(s,o)),[]);return[r,n,a]}}const Ost=fde(Jue),Dst=fde(Hat);function Pst(){return st.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},st.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Rst(){return st.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},st.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Lst(){return st.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},st.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Mst(){return st.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},st.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Ust(){return st.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},st.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const nw=({children:e,className:t,...r})=>st.createElement("button",{type:"button",className:Il(["react-flow__controls-button",t]),...r},e);nw.displayName="ControlButton";const Qst=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Ade=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=so(),[m,g]=N.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=hs(Qst,ul),{zoomIn:w,zoomOut:_,fitView:F}=uj();if(N.useEffect(()=>{g(!0)},[]),!m)return null;const B=()=>{w(),s==null||s()},T=()=>{_(),o==null||o()},C=()=>{F(a),l==null||l()},S=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return st.createElement(Eue,{className:Il(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&st.createElement(st.Fragment,null,st.createElement(nw,{onClick:B,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},st.createElement(Pst,null)),st.createElement(nw,{onClick:T,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},st.createElement(Rst,null))),r&&st.createElement(nw,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},st.createElement(Lst,null)),n&&st.createElement(nw,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},x?st.createElement(Ust,null):st.createElement(Mst,null)),d)};Ade.displayName="Controls";var Hst=N.memo(Ade),Gd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Gd||(Gd={}));function Vst({color:e,dimensions:t,lineWidth:r}){return st.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function zst({color:e,radius:t}){return st.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const $st={[Gd.Dots]:"#91919a",[Gd.Lines]:"#eee",[Gd.Cross]:"#e2e2e2"},Gst={[Gd.Dots]:1,[Gd.Lines]:1,[Gd.Cross]:6},qst=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function hde({id:e,variant:t=Gd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:o,style:l,className:c}){const u=N.useRef(null),{transform:d,patternId:f}=hs(qst,ul),h=o||$st[t],m=n||Gst[t],g=t===Gd.Dots,x=t===Gd.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*d[2]||1,v[1]*d[2]||1],w=m*d[2],_=x?[w,w]:y,F=g?[w/s,w/s]:[_[0]/s,_[1]/s];return st.createElement("svg",{className:Il(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},st.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},g?st.createElement(zst,{color:h,radius:w/s}):st.createElement(Vst,{dimensions:_,color:h,lineWidth:a})),st.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}hde.displayName="Background";var Kst=N.memo(hde);function Wst(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const Xst=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Em(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Xx=null;function mde(e={}){return Xx||(e.includeStyleProperties?(Xx=e.includeStyleProperties,Xx):(Xx=Em(window.getComputedStyle(document.documentElement)),Xx))}function $S(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Yst(e){const t=$S(e,"border-left-width"),r=$S(e,"border-right-width");return e.clientWidth+t+r}function Jst(e){const t=$S(e,"border-top-width"),r=$S(e,"border-bottom-width");return e.clientHeight+t+r}function pde(e,t={}){const r=t.width||Yst(e),n=t.height||Jst(e);return{width:r,height:n}}function Zst(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Ic=16384;function eit(e){(e.width>Ic||e.height>Ic)&&(e.width>Ic&&e.height>Ic?e.width>e.height?(e.height*=Ic/e.width,e.width=Ic):(e.width*=Ic/e.height,e.height=Ic):e.width>Ic?(e.height*=Ic/e.width,e.width=Ic):(e.width*=Ic/e.height,e.height=Ic))}function GS(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function tit(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function rit(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),tit(a)}const cc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||cc(r,t)};function nit(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function ait(e,t){return mde(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function sit(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?nit(r):ait(r,n);return document.createTextNode(`${a}{${s}}`)}function XW(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const o=Xst();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(sit(o,r,a,n)),t.appendChild(l)}function iit(e,t,r){XW(e,t,":before",r),XW(e,t,":after",r)}const YW="application/font-woff",JW="image/jpeg",oit={woff:YW,woff2:YW,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:JW,jpeg:JW,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function lit(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function KM(e){const t=lit(e).toLowerCase();return oit[t]||""}function cit(e){return e.split(/,/)[1]}function oD(e){return e.search(/^(data:)/)!==-1}function uit(e,t){return`data:${t};base64,${e}`}async function gde(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(r({res:n,result:l.result}))}catch(c){o(c)}},l.readAsDataURL(a)})}const JI={};function dit(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function WM(e,t,r){const n=dit(e,t,r.includeQueryParams);if(JI[n]!=null)return JI[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await gde(e,r.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),cit(l)));a=uit(s,t)}catch(s){a=r.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return JI[n]=a,a}async function fit(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):GS(t)}async function Ait(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o==null||o.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return GS(l)}const r=e.poster,n=KM(r),a=await WM(r,n,t);return GS(a)}async function hit(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await dj(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function mit(e,t){return cc(e,HTMLCanvasElement)?fit(e):cc(e,HTMLVideoElement)?Ait(e,t):cc(e,HTMLIFrameElement)?hit(e,t):e.cloneNode(xde(e))}const pit=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",xde=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function git(e,t,r){var n,a;if(xde(t))return t;let s=[];return pit(e)&&e.assignedNodes?s=Em(e.assignedNodes()):cc(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=Em(e.contentDocument.body.childNodes):s=Em(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||cc(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>dj(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function xit(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):mde(r).forEach(s=>{let o=a.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),cc(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),n.setProperty(s,o,a.getPropertyPriority(s))})}function vit(e,t){cc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),cc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function bit(e,t){if(cc(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function yit(e,t,r){return cc(t,Element)&&(xit(e,t,r),iit(e,t,r),vit(e,t),bit(e,t)),t}async function wit(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const l=r[s].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!n[l]&&(n[l]=await dj(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let c=0;c<a.length;c++)l.appendChild(a[c]);e.appendChild(o)}return e}async function dj(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>mit(n,t)).then(n=>git(e,n,t)).then(n=>yit(e,n,t)).then(n=>wit(n,t))}const vde=/url\((['"]?)([^'"]+?)\1\)/g,Eit=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Nit=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Cit(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function _it(e){const t=[];return e.replace(vde,(r,n,a)=>(t.push(a),r)),t.filter(r=>!oD(r))}async function Sit(e,t,r,n,a){try{const s=r?Wst(t,r):t,o=KM(t);let l;return a||(l=await WM(s,o,n)),e.replace(Cit(t),`$1${l}$3`)}catch{}return e}function kit(e,{preferredFontFormat:t}){return t?e.replace(Nit,r=>{for(;;){const[n,,a]=Eit.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function bde(e){return e.search(vde)!==-1}async function yde(e,t,r){if(!bde(e))return e;const n=kit(e,r);return _it(n).reduce((s,o)=>s.then(l=>Sit(l,o,t,r)),Promise.resolve(n))}async function Yx(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await yde(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function jit(e,t){await Yx("background",e,t)||await Yx("background-image",e,t),await Yx("mask",e,t)||await Yx("-webkit-mask",e,t)||await Yx("mask-image",e,t)||await Yx("-webkit-mask-image",e,t)}async function Bit(e,t){const r=cc(e,HTMLImageElement);if(!(r&&!oD(e.src))&&!(cc(e,SVGImageElement)&&!oD(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await WM(n,KM(n),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){o(u)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function Tit(e,t){const n=Em(e.childNodes).map(a=>wde(a,t));await Promise.all(n).then(()=>e)}async function wde(e,t){cc(e,Element)&&(await jit(e,t),await Bit(e,t),await Tit(e,t))}function Iit(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const ZW={};async function eX(e){let t=ZW[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},ZW[e]=t,t}async function tX(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(n,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),gde(l,t.fetchRequestInit,({result:c})=>(r=r.replace(o,`url(${c})`),[o,c]))});return Promise.all(s).then(()=>r)}function rX(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=l.exec(n),c===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(c[0])}return t}async function Fit(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{Em(a.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const c=s.href,u=eX(c).then(d=>tX(d,t)).then(d=>rX(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?l+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];a.href!=null&&n.push(eX(a.href).then(l=>tX(l,t)).then(l=>rX(l).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{Em(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function Oit(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>bde(t.style.getPropertyValue("src")))}async function Dit(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Em(e.ownerDocument.styleSheets),n=await Fit(r,t);return Oit(n)}function Ede(e){return e.trim().replace(/["']/g,"")}function Pit(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Ede(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function Rit(e,t){const r=await Dit(e,t),n=Pit(e);return(await Promise.all(r.filter(s=>n.has(Ede(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return yde(s.cssText,o,t)}))).join(`
`)}async function Lit(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Rit(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Mit(e,t={}){const{width:r,height:n}=pde(e,t),a=await dj(e,t,!0);return await Lit(a,t),await wde(a,t),Iit(a,t),await rit(a,r,n)}async function Uit(e,t={}){const{width:r,height:n}=pde(e,t),a=await Mit(e,t),s=await GS(a),o=document.createElement("canvas"),l=o.getContext("2d"),c=t.pixelRatio||Zst(),u=t.canvasWidth||r,d=t.canvasHeight||n;return o.width=u*c,o.height=d*c,t.skipAutoScale||eit(o),o.style.width=`${u}`,o.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function fj(e,t={}){return(await Uit(e,t)).toDataURL()}const Nde="recursos_crucigramas",XM="recursos_lineas_de_tiempo",YM="recursos_mapas_mentales",Cde="recursos_sopas_de_letras",Aj=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},Qit=e=>{const t=Ht(mt(tt,Nde),ar("fechaCreacion","desc"));return mr(t,r=>{const n=r.docs.map(a=>Aj(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},Hit=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:cr.fromDate(new Date)};return(await mn(mt(tt,Nde),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},Vit=e=>{const t=Ht(mt(tt,XM),ar("createdAt","desc"));return mr(t,r=>{const n=r.docs.map(a=>Aj(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},zit=async(e,t)=>{try{const{id:r,...n}=e,a=nr(tt,XM,r);await yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:cr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},$it=async e=>{try{const t=nr(tt,XM,e);await Ca(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},Git=e=>{const t=Ht(mt(tt,YM),ar("createdAt","desc"));return mr(t,r=>{const n=r.docs.map(a=>Aj(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},qit=async(e,t)=>{try{const{id:r,...n}=e,a=nr(tt,YM,r);await yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:cr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Kit=async e=>{try{const t=nr(tt,YM,e);await Ca(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Wit=e=>{const t=Ht(mt(tt,Cde),ar("createdAt","desc"));return mr(t,r=>{const n=r.docs.map(a=>Aj(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Xit=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:cr.fromDate(new Date)};return(await mn(mt(tt,Cde),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Yit=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Jit=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),Zit=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),eot=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return i.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[i.jsx(Rb,{type:"target",position:kr.Left,className:"w-2 h-2 !bg-slate-400"}),i.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),i.jsx(Rb,{type:"source",position:kr.Right,className:"w-2 h-2 !bg-slate-400"})]})},lD=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+lD(n,t),0),nX=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const o=(l,c,u)=>{r.push({id:l.id,position:{x:c*280,y:u},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"});const d=lD(l,100);let f=u-d/2+100/2;(l.children||[]).forEach(h=>{const m=lD(h,100),g=f+m/2-100/2;n.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep",animated:!0}),o(h,c+1,g),f+=m})};o(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const o=300,l=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:o*Math.cos(d),y:o*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const m=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:l*Math.cos(m),y:l*Math.sin(m)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},_de=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],o=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return i.jsxs("div",{className:`pl-4 ${a>0?"border-l "+o[a-1%o.length]:""}`,children:[i.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:e.label,onChange:l=>t(e.id,l.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),i.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&i.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(l=>i.jsx(_de,{node:l,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},l.id))]})},tot={custom:eot},rot=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=N.useState(e.treeData),[s,o]=N.useState("tree"),[l,c]=N.useState(!1),[u,d,f]=Ost([]),[h,m,g]=Dst([]),{fitView:x}=uj();N.useEffect(()=>{const{nodes:B,edges:T}=nX(n,s);d(B),m(T),setTimeout(()=>x({duration:300}),50)},[n,s,d,m,x]);const v=(B,T)=>{const C=JSON.parse(JSON.stringify(n)),S=j=>j.id===B?(j.label=T,!0):(j.children||[]).some(S);S(C),a(C)},y=B=>{const T=JSON.parse(JSON.stringify(n)),C=S=>S.id===B?(S.children||(S.children=[]),S.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(S.children||[]).some(C);C(T),a(T)},w=B=>{const T=JSON.parse(JSON.stringify(n)),C=S=>{const j=(S.children||[]).findIndex(L=>L.id===B);return j!==-1?(S.children.splice(j,1),!0):(S.children||[]).some(C)};C(T),a(T)},_=()=>{c(!0);const{nodes:B,edges:T}=nX(n,s);r({...e,treeData:n,nodes:B,edges:T}),setTimeout(()=>c(!1),1e3)},F=async B=>{const T=document.querySelector(".react-flow");T&&fj(T,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(C=>{{const S=document.createElement("a");S.download=`${e.tema}.png`,S.href=C,S.click()}}).catch(C=>console.error("oops, something went wrong!",C))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),i.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:i.jsxs(dde,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:tot,children:[i.jsx(Hst,{}),i.jsx(Kst,{})]})}),i.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[i.jsxs("button",{onClick:()=>o("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(Jit,{})," Vista en árbol"]}),i.jsxs("button",{onClick:()=>o("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(Zit,{})," Vista central"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:i.jsx(_de,{node:n,onUpdate:v,onAddChild:y,onDelete:w})}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>F(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),i.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:l?"Guardado!":"Guardar"})]})]})]})]})},not=({onBack:e,currentUser:t})=>{const[r,n]=N.useState("list"),[a,s]=N.useState([]),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState(!0),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState("");N.useEffect(()=>{f(!0);const C=Git(S=>{s(S),f(!1)});return()=>C()},[]);const w=async C=>{if(C.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no está configurada."),u(!1);return}},_=async C=>{try{await qit(C,t)}catch(S){console.error("Error saving mind map:",S),alert("No se pudo guardar el mapa mental.")}},F=C=>{l(C),n("editor")},B=async C=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await Kit(C)}catch(S){console.error("Error deleting mind map:",S),alert("No se pudo eliminar el mapa mental.")}},T=()=>{switch(r){case"editor":return o?i.jsx(qM,{children:i.jsx(rot,{mapData:o,onBack:()=>n("list"),onSave:_})}):null;case"config":return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),i.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:h,onChange:C=>m(C.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),i.jsx("textarea",{id:"contenido",value:v,onChange:C=>y(C.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?i.jsx(Yit,{}):"Generar Mapa con IA"})})]})]});case"list":default:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),i.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(C=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[i.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:C.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(C.createdAt).toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsx("button",{onClick:()=>F(C),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),i.jsx("button",{onClick:()=>B(C.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},C.id)):i.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?i.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("span",{className:"text-4xl",children:"🧠"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),T()]})},aot=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),sot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),iot=({onBack:e,currentUser:t})=>{const[r,n]=N.useState([]),[a,s]=N.useState("Media"),[o,l]=N.useState(10),[c,u]=N.useState(!1),[d,f]=N.useState(Array(10).fill("")),[h,m]=N.useState(""),[g,x]=N.useState(null),[v,y]=N.useState({ai:!1,puzzle:!1,data:!0}),w=N.useRef(null);N.useEffect(()=>{y(P=>({...P,data:!0}));const L=Wit(P=>{n(P),y(k=>({...k,data:!1}))});return()=>L()},[]),N.useEffect(()=>{f(L=>{const P=Array(o).fill("");for(let k=0;k<Math.min(L.length,o);k++)P[k]=L[k];return P})},[o]);const _=(L,P)=>{const k=[...d];k[L]=P,f(k)},F=async()=>{if(h.trim()){y(L=>({...L,ai:!0}));try{alert("La API Key de Gemini no está configurada."),y(X=>({...X,ai:!1}));return}catch(L){console.error("Error generating words with AI:",L),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(L=>({...L,ai:!1}))}}},B=(L,P,k,U,Q,K)=>{for(let H=0;H<L.length;H++){const q=k+H*Q.y,z=U+H*Q.x;if(q<0||q>=K||z<0||z>=K||P[q][z]&&P[q][z]!==L[H])return!1}return!0},T=(L,P,k,U,Q)=>{for(let K=0;K<L.length;K++)P[k+K*Q.y][U+K*Q.x]=L[K]},C=async()=>{y(q=>({...q,puzzle:!0})),x(null),await new Promise(q=>setTimeout(q,100));const L=d.map(q=>q.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(L.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(q=>({...q,puzzle:!1}));return}const P=Math.max(...L.map(q=>q.length));let k=Math.max(P,L.length)+2;a==="Media"&&(k+=3),a==="Difícil"&&(k+=5),k=Math.min(Math.max(k,10),25);const U=Array(k).fill(null).map(()=>Array(k).fill(null)),Q=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&Q.push({x:1,y:-1}),a==="Difícil"&&Q.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const q of L.sort((z,W)=>W.length-z.length)){let z=!1;for(let W=0;W<100;W++){const ee=Q[Math.floor(Math.random()*Q.length)],X=Math.floor(Math.random()*k),O=Math.floor(Math.random()*k);if(B(q,U,X,O,ee,k)){T(q,U,X,O,ee),z=!0;break}}z||console.warn(`No se pudo colocar la palabra: ${q}`)}const K=U.map(q=>q.map(z=>z||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),H={tema:h||"Personalizado",grid:K.map(q=>q.join("")),words:L.sort()};try{const q=await Xit(H,t);x({...H,id:q,createdAt:new Date().toISOString()})}catch(q){console.error("Error saving puzzle:",q),alert("No se pudo guardar la sopa de letras.")}finally{y(q=>({...q,puzzle:!1}))}},S=()=>{w.current&&fj(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(L=>{const P=document.createElement("a");P.download="sopa-de-letras.png",P.href=L,P.click()}).catch(L=>{console.error("oops, something went wrong!",L),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},j=()=>{var k;if(!g)return null;const L=((k=g.grid[0])==null?void 0:k.length)||1,P=g.grid.join("").split("");return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:w,className:"p-6 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${L}, minmax(0, 1fr))`},children:P.map((U,Q)=>i.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:U},Q))})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),i.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(U=>i.jsx("li",{children:U},U))})]})]})}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),i.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?i.jsx("div",{className:"text-center py-10",children:"Cargando..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:"🅰️"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),i.jsxs("select",{value:a,onChange:L=>s(L.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{children:"Fácil"}),i.jsx("option",{children:"Media"}),i.jsx("option",{children:"Difícil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(L=>i.jsx("button",{onClick:()=>{l(L),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&o===L?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:L},L)),i.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&i.jsx("input",{type:"number",value:o,onChange:L=>l(parseInt(L.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:L=>m(L.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:F,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?i.jsx(aot,{}):i.jsxs(i.Fragment,{children:[i.jsx(sot,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((L,P)=>i.jsx("input",{type:"text",value:L,onChange:k=>_(P,k.target.value),placeholder:`Palabra ${P+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},P))})]}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:C,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&j()]})},oot=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),lot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),cot=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=N.useState(e),[s,o]=N.useState(null),l=N.useRef(null),c=(m,g,x)=>{a(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},u=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));a(x=>({...x,events:g}))},d=m=>{a(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},f=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}o(m.id);{alert("La API Key de Gemini no está configurada."),o(null);return}},h=()=>{l.current&&fj(l.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),i.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:i.jsxs("div",{ref:l,className:"relative p-10",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),i.jsx("div",{className:"relative",children:n.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return i.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[i.jsx("div",{className:"w-1/2",children:x&&i.jsx("div",{className:"text-right pr-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),i.jsx("div",{className:"z-10 flex-shrink-0",children:i.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),i.jsx("div",{className:"w-1/2",children:!x&&i.jsx("div",{className:"text-left pl-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(m=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[i.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),i.jsx("button",{onClick:()=>f(m),disabled:s===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===m.id?i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):i.jsx(lot,{})})]}),i.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[i.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),i.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},uot=({onBack:e,currentUser:t})=>{const[r,n]=N.useState("list"),[a,s]=N.useState([]),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState(!0),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState("");N.useEffect(()=>{f(!0);const B=Vit(T=>{s(T),f(!1)});return()=>B()},[]);const w=async B=>{if(B.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no está configurada."),u(!1);return}},_=async B=>{try{await zit(B,t),n("list"),l(null)}catch(T){console.error("Error saving timeline:",T),alert("No se pudo guardar la línea de tiempo.")}},F=async B=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await $it(B)}catch(T){console.error("Error deleting timeline:",T),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&o?i.jsx(cot,{timeline:o,onSave:_,onBack:()=>n("list")}):d?i.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:"🕒"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:h,onChange:B=>m(B.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),i.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:B=>x(B.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),i.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:B=>y(B.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?i.jsx(oot,{}):"Generar con IA"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(B=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:B.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(B.createdAt).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{l(B),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),i.jsx("button",{onClick:()=>F(B.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},B.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},dot=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),aX=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),fot=({onBack:e,currentUser:t})=>{const[r,n]=N.useState([]),[a,s]=N.useState(10),[o,l]=N.useState(!1),[c,u]=N.useState(Array(10).fill("")),[d,f]=N.useState(Array(10).fill("")),[h,m]=N.useState(""),[g,x]=N.useState(null),[v,y]=N.useState(!1),[w,_]=N.useState({ai:!1,puzzle:!1,data:!0}),[F,B]=N.useState(null),T=N.useRef(null);N.useEffect(()=>{_(K=>({...K,data:!0}));const Q=Qit(K=>{const H=K.map(q=>{const{grid_flat:z,grid_width:W,...ee}=q,X=[];if(z&&W>0)for(let O=0;O<z.length;O+=W)X.push(z.slice(O,O+W));return{...ee,grid:X}});n(H),_(q=>({...q,data:!1}))});return()=>Q()},[]),N.useEffect(()=>{const Q=a;u(K=>Array.from({length:Q},(H,q)=>K[q]||"")),f(K=>Array.from({length:Q},(H,q)=>K[q]||""))},[a]);const C=(Q,K)=>{const H=[...c];H[Q]=K,u(H)},S=(Q,K)=>{const H=[...d];H[Q]=K,f(H)},j=async()=>{if(h.trim()){_(Q=>({...Q,ai:!0}));try{alert("La API Key de Gemini no está configurada."),_(ae=>({...ae,ai:!1}));return}catch(Q){console.error("Error generating words/clues with AI:",Q),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{_(Q=>({...Q,ai:!1}))}}},L=async Q=>{const K=c[Q];if(!K||!K.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}B(Q);try{alert("La API Key de Gemini no está configurada."),B(null);return}catch(H){console.error("Error generating clue with AI:",H),alert("No se pudo generar la pista.")}finally{B(null)}},P=N.useCallback(()=>{try{const Q=c.map((ve,Pe)=>({word:ve.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Pe]})).filter(ve=>ve.word.length>0);if(Q.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;Q.sort((ve,Pe)=>Pe.word.length-ve.word.length);const K=Q[0].word.length,H=Math.max(K,Q.length)*2;let q=Array.from({length:H},()=>Array(H).fill(null));const z=[],W=Q.shift(),ee=Math.floor(H/2),X=Math.floor((H-W.word.length)/2);for(let ve=0;ve<W.word.length;ve++)q[ee][X+ve]=W.word[ve];z.push({word:W.word,clue:W.clue,direction:"across",row:ee,col:X});for(const ve of Q){let Pe={score:-1,row:-1,col:-1,direction:"across"};for(const Ue of z)for(let de=0;de<Ue.word.length;de++)for(let be=0;be<ve.word.length;be++)if(Ue.word[de]===ve.word[be]){let De=0,Ve,We,Je;Ue.direction==="across"?(Je="down",Ve=Ue.row-be,We=Ue.col+de):(Je="across",Ve=Ue.row+de,We=Ue.col-be);let At=!0;for(let vt=0;vt<ve.word.length;vt++){const wt=Ve+(Je==="down"?vt:0),Tt=We+(Je==="across"?vt:0);if(wt<0||wt>=H||Tt<0||Tt>=H){At=!1;break}const Lt=q[wt][Tt],Et=wt===Ue.row+(Ue.direction==="down"?de:0)&&Tt===Ue.col+(Ue.direction==="across"?de:0);if(Lt&&!Et){At=!1;break}if(Lt&&Et&&Lt!==ve.word[be]){At=!1;break}if(!Et){if(Je==="across"&&(wt>0&&q[wt-1][Tt]||wt<H-1&&q[wt+1][Tt])){At=!1;break}if(Je==="down"&&(Tt>0&&q[wt][Tt-1]||Tt<H-1&&q[wt][Tt+1])){At=!1;break}}Lt&&De++}At&&De>Pe.score&&(Pe={score:De,row:Ve,col:We,direction:Je})}if(Pe.score>-1){for(let Ue=0;Ue<ve.word.length;Ue++){const de=Pe.row+(Pe.direction==="down"?Ue:0),be=Pe.col+(Pe.direction==="across"?Ue:0);q[de][be]=ve.word[Ue]}z.push({word:ve.word,clue:ve.clue,direction:Pe.direction,row:Pe.row,col:Pe.col})}}let O=H,R=-1,G=H,Y=-1;z.forEach(ve=>{O=Math.min(O,ve.row),R=Math.max(R,ve.row+(ve.direction==="down"?ve.word.length-1:0)),G=Math.min(G,ve.col),Y=Math.max(Y,ve.col+(ve.direction==="across"?ve.word.length-1:0))}),R===-1&&(O=z[0].row,R=z[0].row,G=z[0].col,Y=z[0].col+z[0].word.length-1);const te=1,ae=Math.max(0,O-te),oe=Math.min(H,R+1+te),ie=Math.max(0,G-te),ue=Math.min(H,Y+1+te),Ce=q.slice(ae,oe).map(ve=>ve.slice(ie,ue)),ne=z.map(ve=>({...ve,row:ve.row-ae,col:ve.col-ie})).sort((ve,Pe)=>ve.row-Pe.row||ve.col-Pe.col);let Be=1;const je=[],_e=new Map;ne.forEach(ve=>{const Pe=`${ve.row},${ve.col}`;_e.has(Pe)||_e.set(Pe,Be++),je.push({...ve,number:_e.get(Pe)})});const Ae=Ce.map(ve=>ve.map(Pe=>({char:Pe,number:null})));return je.forEach(ve=>{const Pe=`${ve.row},${ve.col}`;Ae[ve.row]&&Ae[ve.row][ve.col]!==void 0&&(Ae[ve.row][ve.col].number=_e.get(Pe))}),{grid:Ae,clues:{across:je.filter(ve=>ve.direction==="across").sort((ve,Pe)=>ve.number-Pe.number),down:je.filter(ve=>ve.direction==="down").sort((ve,Pe)=>ve.number-Pe.number)}}}catch(Q){return console.error("Error generating crossword grid:",Q),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),k=async()=>{var K;_(H=>({...H,puzzle:!0})),x(null),await new Promise(H=>setTimeout(H,100));const Q=P();if(Q){const H={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:Q.grid,clues:Q.clues},{grid:q,...z}=H,W={...z,grid_flat:q.flat().map(ee=>ee.char||""),grid_width:((K=q[0])==null?void 0:K.length)||0};try{const ee=await Hit(W,t);x({...H,id:ee,fechaCreacion:new Date().toISOString()})}catch(ee){console.error("Error saving puzzle:",ee),alert("No se pudo guardar el crucigrama en la base de datos.")}}_(H=>({...H,puzzle:!1}))},U=()=>{T.current&&(y(!1),setTimeout(()=>{fj(T.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(Q=>{const K=document.createElement("a");K.download="crucigrama.png",K.href=Q,K.click()}).catch(Q=>console.error("Error generating image",Q))},100))};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:"✏️"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:T,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsx("div",{children:i.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((Q,K)=>i.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:Q.char?"white":"black"},children:[Q.number&&i.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:Q.number}),v&&Q.char&&i.jsx("span",{children:Q.char})]},K))})}),i.jsxs("div",{className:"text-sm",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.across.map(Q=>i.jsxs("li",{children:[i.jsxs("strong",{children:[Q.number,"."]})," ",Q.clue]},`${Q.word}-${Q.clue}`))}),i.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.down.map(Q=>i.jsxs("li",{children:[i.jsxs("strong",{children:[Q.number,"."]})," ",Q.clue]},`${Q.word}-${Q.clue}`))})]})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),i.jsx("span",{children:"Mostrar Solución"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),i.jsx("button",{onClick:U,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(Q=>i.jsx("button",{onClick:()=>{s(Q),l(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!o&&a===Q?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:Q},Q)),i.jsx("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${o?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),o&&i.jsx("input",{type:"number",value:a,onChange:Q=>s(parseInt(Q.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:Q=>m(Q.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:j,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?i.jsx(dot,{}):i.jsxs(i.Fragment,{children:[i.jsx(aX,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((Q,K)=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx("input",{type:"text",value:c[K],onChange:H=>C(K,H.target.value),placeholder:`Palabra ${K+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[i.jsx("textarea",{value:d[K],onChange:H=>S(K,H.target.value),placeholder:`Pista ${K+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:()=>L(K),disabled:F===K,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:F===K?i.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):i.jsx(aX,{})})]})]},K))}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:k,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},Aot=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],hot=({recurso:e,onClick:t})=>i.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[i.jsx("div",{className:"text-6xl mb-4",children:e.icon}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),mot=()=>{const[e,t]=N.useState("menu"),{currentUser:r}=mM(),n=()=>e!=="menu"&&!r?i.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?i.jsx(not,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?i.jsx(iot,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?i.jsx(uot,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?i.jsx(fot,{onBack:()=>t("menu"),currentUser:r}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Aot.map(a=>i.jsx(hot,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return i.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},pot="evaluaciones_formativas",got="calificaciones_formativas",Sde="trabajos_grupales_formativos",kde=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},xot=(e,t)=>{const r=Ht(mt(tt,pot),xr("curso","==",e));return mr(r,n=>{t(n.docs.map(a=>kde(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},vot=e=>{const t=Ht(mt(tt,got));return mr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},bot=(e,t)=>{const r=Ht(mt(tt,Sde),xr("curso","==",e));return mr(r,n=>{t(n.docs.map(a=>kde(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},yot=async e=>{try{const{id:t,...r}=e,n=nr(tt,Sde,t);await yi(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},wot=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState({}),[s,o]=N.useState([]),[l,c]=N.useState(!0),[u,d]=N.useState(null),[f,h]=N.useState(!1),[m,g]=N.useState(null),x=N.useRef(null);N.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const F=xot(e.curso,r),B=vot(a),T=bot(e.curso,C=>{o(C),c(!1)});return()=>{F(),B(),T()}},[e.curso]);const v=N.useMemo(()=>{if(!e.curso)return[];const B=t.filter(T=>T.curso===e.curso).reduce((T,C)=>((T[C.asignatura]=T[C.asignatura]||[]).push(C),T),{});return Object.entries(B).map(([T,C])=>{let S=0,j=0;const L=C.map(k=>{var K;const U=(K=n[k.id])==null?void 0:K[e.nombreCompleto];let Q="No Trabajado";return U==="trabajado"?(S+=7,j++,Q="Trabajado"):U==="no trabajado"&&(S+=2,j++,Q="No Trabajado"),{id:k.id,nombreActividad:k.nombreActividad,fecha:k.fecha,estado:Q}}).filter(k=>{var U;return(U=n[k.id])==null?void 0:U[e.nombreCompleto]}),P=j>0?(S/j).toFixed(1):"N/A";return{asignatura:T,promedio:P,actividades:L.sort((k,U)=>new Date(U.fecha).getTime()-new Date(k.fecha).getTime())}}).filter(T=>T.actividades.length>0).sort((T,C)=>T.asignatura.localeCompare(C.asignatura))},[t,n,e]);N.useEffect(()=>{if(v.reduce((j,L)=>j+L.actividades.length,0)===0){d(null);return}const B=v.reduce((j,L)=>{const P=parseFloat(L.promedio);return isNaN(P)?j:j+P},0),T=v.length>0?B/v.length:0,C=XN.find(j=>T>=j.promedioMin&&T<=j.promedioMax)||null,S=XN.filter(j=>T>=j.promedioMin);if(d({puntajeTotal:0,promedio:T,rangoActual:C,insigniasGanadas:S}),x.current!==null){const j=XN.find(L=>x.current>=L.promedioMin&&x.current<=L.promedioMax)||null;C&&(!j||C.nombre!==j.nombre)&&g(C)}x.current=T},[v]);const y=N.useMemo(()=>e.curso?s.filter(F=>F.curso===e.curso).map(F=>{const B=F.grupos.find(T=>T.integrantes.some(C=>C.nombre===e.nombreCompleto));return B?{...F,miGrupo:B}:null}).filter(F=>F!==null).sort((F,B)=>new Date(B.fechaPresentacion).getTime()-new Date(F.fechaPresentacion).getTime()):[],[s,e]),w=async(F,B)=>{const T=s.find(S=>S.id===F);if(!T)return;const C={...T,grupos:T.grupos.map(S=>S.integrantes.some(L=>L.nombre===e.nombreCompleto)?{...S,integrantes:S.integrantes.map(L=>L.nombre===e.nombreCompleto?{...L,rol:B||void 0}:L)}:S)};try{await yot(C)}catch(S){console.error("Error updating role:",S),alert("No se pudo actualizar el rol.")}},_=F=>{const B=parseFloat(F);return isNaN(B)?"bg-slate-400":B<4?"bg-red-500":B<5.5?"bg-yellow-500":"bg-green-500"};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:F=>F.stopPropagation(),children:[i.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),i.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),i.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),i.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:F=>F.stopPropagation(),children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),i.jsx("div",{className:"overflow-y-auto space-y-3",children:XN.map(F=>{const B=u==null?void 0:u.insigniasGanadas.some(T=>T.nombre===F.nombre);return i.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${B?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[i.jsx("div",{className:"text-5xl",children:F.emoji}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-bold ${B?"text-amber-700":"text-slate-600"}`,children:F.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",F.promedioMin," y ",F.promedioMax]})]})]},F.nombre)})})]})}),i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&i.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),i.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),i.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),i.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),i.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(F=>i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:F.asignatura}),i.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${_(F.promedio)}`,children:F.promedio})]}),i.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),F.actividades.map(B=>i.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-700",children:B.nombreActividad}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(B.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),i.jsx("span",{className:`font-semibold ${B.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:B.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},B.id))]})]},F.asignatura))}):i.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:"📊"}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),i.jsx("div",{className:"space-y-4",children:y.map(F=>{const B=F.miGrupo.integrantes.filter(C=>C.nombre!==e.nombreCompleto&&C.rol).map(C=>C.rol),T=hte.filter(C=>!B.includes(C));return i.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-bold text-slate-800",children:F.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:[F.asignatura," - Presentación: ",new Date(F.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-3 pt-3 border-t",children:[i.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",F.miGrupo.numero]}),i.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:F.miGrupo.integrantes.map(C=>i.jsxs("li",{className:"grid grid-cols-2 items-center",children:[i.jsx("span",{className:C.nombre===e.nombreCompleto?"font-bold":"",children:C.nombre}),C.nombre===e.nombreCompleto?i.jsxs("select",{value:C.rol||"",onChange:S=>w(F.id,S.target.value),className:"text-sm p-1 border rounded w-full",children:[i.jsx("option",{value:"",children:"-- Seleccionar rol --"}),C.rol&&!T.includes(C.rol)&&i.jsx("option",{value:C.rol,children:C.rol}),T.map(S=>i.jsx("option",{value:S,children:S},S))]}):i.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:C.rol||"Sin rol"})]},C.nombre))})]})]},F.id)})})]})]})},Eot="proyectos_interdisciplinarios",jde="entregas_interdisciplinarias",Bde=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},Not=(e,t)=>{const r=Ht(mt(tt,Eot),xr("cursos","array-contains",e));return mr(r,n=>{const a=n.docs.map(s=>Bde(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},Cot=(e,t)=>{const r=Ht(mt(tt,jde),xr("estudianteId","==",e));return mr(r,n=>{const a=n.docs.map(s=>Bde(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},_ot=async e=>{try{const{id:t,...r}=e,n=nr(tt,jde,t),a={...r,fechaCompletado:cr.fromDate(new Date(r.fechaCompletado||Date.now()))};await yi(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},Sot=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState([]),[s,o]=N.useState(null),[l,c]=N.useState(!0);N.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=Not(e.curso,r),h=Cot(e.id,m=>{a(m),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await _ot(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const m=N.useMemo(()=>{const B=n.find(T=>T.planificacionId===f.id&&T.tareaId===h.id);return B||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,x]=N.useState(!1),[v,y]=N.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),w=B=>{var C;const T=(C=B.target.files)==null?void 0:C[0];T&&(alert(`Simulación: Archivo "${T.name}" listo para subir.`),u({...m,archivoAdjunto:{nombre:T.name,url:`simulated/path/${T.name}`},fechaCompletado:new Date().toISOString()}))},_=()=>{u({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},F=()=>{u({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:m.completada,onChange:F,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&i.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),i.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[i.jsx("textarea",{value:v.observaciones,onChange:B=>y({...v,observaciones:B.target.value}),onBlur:_,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"url",value:v.enlace,onChange:B=>y({...v,enlace:B.target.value}),onBlur:_,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"file",onChange:w,className:"text-sm"}),m.archivoAdjunto&&i.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(v=>v.planificacionId===f.id).filter(v=>v.completada).length,x=h.length>0?g/h.length*100:0;return i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[i.jsxs("button",{onClick:()=>o(s===f.id?null:f.id),className:"w-full text-left",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[i.jsx("span",{children:"Progreso"}),i.jsxs("span",{children:[Math.round(x),"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&i.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(v=>i.jsx(d,{plan:f,tarea:v},v.id)):i.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):i.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[i.jsx("span",{className:"text-5xl",children:"🎉"}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},kot=({data:e})=>i.jsx("div",{className:"space-y-4",children:e.map((r,n)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),i.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),jot=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState(null),[u,d]=N.useState(xw),f=N.useCallback(async()=>{a(!0);try{const v=(await XZe(e.nombreCompleto)).sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime());r(v),o(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),o("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=N.useCallback(async()=>{try{const x=await YZe();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);N.useEffect(()=>{f(),h()},[f,h]);const m=N.useMemo(()=>{if(!l)return[];const x={};return u.forEach(v=>{x[v.domain]={total:0,count:0},v.criteria.forEach(y=>{const w=l.rubricaResultados[y.name];w&&(x[v.domain].total+=w,x[v.domain].count++)})}),Object.entries(x).map(([v,y])=>({label:v,value:y.count>0?y.total/y.count:0}))},[l,u]),g=x=>{const v=new yr;v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),v.setFont("helvetica","bold"),v.setFontSize(16),v.setTextColor(40),v.text("Informe de Acompañamiento Docente",v.internal.pageSize.getWidth()/2,25,{align:"center"}),v.setFontSize(12),v.setFont("helvetica","normal"),gi(v,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=v.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const F=[],B=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(T=>{F.push([{content:T.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),T.criteria.forEach(C=>{const S=x.rubricaResultados[C.name],j=S?B[S-1]:"No evaluado";F.push([C.name,j])})}),gi(v,{startY:y,head:[["Indicador","Nivel de Logro"]],body:F,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=v.lastAutoTable.finalY+15}const w=(F,B)=>{if(!B)return;y>250&&(v.addPage(),y=20,v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),v.setFont("helvetica","bold"),v.setFontSize(14),v.setTextColor(40),v.text(F,14,y),y+=8,v.setFont("helvetica","normal"),v.setFontSize(11),v.setTextColor(60);const T=v.splitTextToSize(B.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);v.text(T,14,y),y+=T.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const _=v.getNumberOfPages();for(let F=1;F<=_;F++)v.setPage(F),v.setFontSize(8),v.setTextColor(128),v.text(`Página ${F} de ${_}`,v.internal.pageSize.getWidth()/2,v.internal.pageSize.getHeight()-10,{align:"center"});v.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(l.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",l.curso," - ",l.asignatura]})]}),i.jsxs("button",{onClick:()=>g(l),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[i.jsx(fte,{})," Exportar PDF"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[i.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),i.jsx("h3",{children:"Observaciones Generales"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.observacionesGenerales||"Sin observaciones."})})]})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx(kot,{data:m})})]})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),i.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>i.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),i.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&i.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:"👍"}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},Bot=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=mt(Nr,"planificaciones"),r=Ht(t,ar("fechaCreacion","desc"));return mr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},Tot=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=mt(Nr,"planificaciones"),n=Ht(r,xr("userId","==",e),ar("fechaCreacion","desc"));return mr(n,s=>{const o=[];s.forEach(l=>{const c=l.data();o.push({id:l.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",o.length),t(o)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function Iot(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const Fot=Iot("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Oot={value:function(){}};function Tde(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new R5(r)}function R5(e){this._=e}function Dot(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}R5.prototype=Tde.prototype={constructor:R5,on:function(e,t){var r=this._,n=Dot(e+"",r),a,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((a=(e=n[s]).type)&&(a=Pot(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=n[s]).type)r[a]=sX(r[a],e.name,t);else if(t==null)for(a in r)r[a]=sX(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new R5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Pot(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function sX(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Oot,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const Rot=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Tde},Symbol.toStringTag,{value:"Module"})),Lot=$he(Rot);var ZI,iX;function Mot(){if(iX)return ZI;iX=1;const e=Lot.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},n=64,a=2048;ZI=function(){var F=[256,256],B=s,T=o,C=c,S=l,j=l,L=u,P=d,k=x,U=[],Q=1/0,K=e("word","end"),H=null,q=Math.random,z={},W=w;z.canvas=function(O){return arguments.length?(W=_(O),z):W},z.start=function(){var O=ee(W()),R=y((F[0]>>5)*F[1]),G=null,Y=U.length,te=-1,ae=[],oe=U.map(function(ue,Ce){return ue.text=B.call(this,ue,Ce),ue.font=T.call(this,ue,Ce),ue.style=S.call(this,ue,Ce),ue.weight=j.call(this,ue,Ce),ue.rotate=L.call(this,ue,Ce),ue.size=~~C.call(this,ue,Ce),ue.padding=P.call(this,ue,Ce),ue}).sort(function(ue,Ce){return Ce.size-ue.size});return H&&clearInterval(H),H=setInterval(ie,0),ie(),z;function ie(){for(var ue=Date.now();Date.now()-ue<Q&&++te<Y&&H;){var Ce=oe[te];Ce.x=F[0]*(q()+.5)>>1,Ce.y=F[1]*(q()+.5)>>1,f(O,Ce,oe,te),Ce.hasText&&X(R,Ce,G)&&(ae.push(Ce),K.call("word",z,Ce),G?m(G,Ce):G=[{x:Ce.x+Ce.x0,y:Ce.y+Ce.y0},{x:Ce.x+Ce.x1,y:Ce.y+Ce.y1}],Ce.x-=F[0]>>1,Ce.y-=F[1]>>1)}te>=Y&&(z.stop(),K.call("end",z,ae,G))}},z.stop=function(){H&&(clearInterval(H),H=null);for(const O of U)delete O.sprite;return z};function ee(O){const R=O.getContext("2d",{willReadFrequently:!0});O.width=O.height=1;const G=Math.sqrt(R.getImageData(0,0,1,1).data.length>>2);return O.width=(n<<5)/G,O.height=a/G,R.fillStyle=R.strokeStyle="red",{context:R,ratio:G}}function X(O,R,G){F[0],F[1];for(var Y=R.x,te=R.y,ae=Math.sqrt(F[0]*F[0]+F[1]*F[1]),oe=k(F),ie=q()<.5?1:-1,ue=-ie,Ce,ne,Be;(Ce=oe(ue+=ie))&&(ne=~~Ce[0],Be=~~Ce[1],!(Math.min(Math.abs(ne),Math.abs(Be))>=ae));)if(R.x=Y+ne,R.y=te+Be,!(R.x+R.x0<0||R.y+R.y0<0||R.x+R.x1>F[0]||R.y+R.y1>F[1])&&(!G||g(R,G))&&!h(R,O,F[0])){for(var je=R.sprite,_e=R.width>>5,Ae=F[0]>>5,ve=R.x-(_e<<4),Pe=ve&127,Ue=32-Pe,de=R.y1-R.y0,be=(R.y+R.y0)*Ae+(ve>>5),De,Ve=0;Ve<de;Ve++){De=0;for(var We=0;We<=_e;We++)O[be+We]|=De<<Ue|(We<_e?(De=je[Ve*_e+We])>>>Pe:0);be+=Ae}return!0}return!1}return z.timeInterval=function(O){return arguments.length?(Q=O??1/0,z):Q},z.words=function(O){return arguments.length?(U=O,z):U},z.size=function(O){return arguments.length?(F=[+O[0],+O[1]],z):F},z.font=function(O){return arguments.length?(T=_(O),z):T},z.fontStyle=function(O){return arguments.length?(S=_(O),z):S},z.fontWeight=function(O){return arguments.length?(j=_(O),z):j},z.rotate=function(O){return arguments.length?(L=_(O),z):L},z.text=function(O){return arguments.length?(B=_(O),z):B},z.spiral=function(O){return arguments.length?(k=r[O]||O,z):k},z.fontSize=function(O){return arguments.length?(C=_(O),z):C},z.padding=function(O){return arguments.length?(P=_(O),z):P},z.random=function(O){return arguments.length?(q=O,z):q},z.on=function(){var O=K.on.apply(K,arguments);return O===K?z:O},z};function s(F){return F.text}function o(){return"serif"}function l(){return"normal"}function c(F){return Math.sqrt(F.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(F,B,T,C){if(!B.sprite){var S=F.context,j=F.ratio;S.clearRect(0,0,(n<<5)/j,a/j);var L=0,P=0,k=0,U=T.length;for(--C;++C<U;){B=T[C],S.save(),S.font=B.style+" "+B.weight+" "+~~((B.size+1)/j)+"px "+B.font;const Ce=S.measureText(B.text),ne=-Math.floor(Ce.width/2);let Be=(Ce.width+1)*j,je=B.size<<1;if(B.rotate){var Q=Math.sin(B.rotate*t),K=Math.cos(B.rotate*t),H=Be*K,q=Be*Q,z=je*K,W=je*Q;Be=Math.max(Math.abs(H+W),Math.abs(H-W))+31>>5<<5,je=~~Math.max(Math.abs(q+z),Math.abs(q-z))}else Be=Be+31>>5<<5;if(je>k&&(k=je),L+Be>=n<<5&&(L=0,P+=k,k=0),P+je>=a)break;S.translate((L+(Be>>1))/j,(P+(je>>1))/j),B.rotate&&S.rotate(B.rotate*t),S.fillText(B.text,ne,0),B.padding&&(S.lineWidth=2*B.padding,S.strokeText(B.text,ne,0)),S.restore(),B.width=Be,B.height=je,B.xoff=L,B.yoff=P,B.x1=Be>>1,B.y1=je>>1,B.x0=-B.x1,B.y0=-B.y1,B.hasText=!0,L+=Be}for(var ee=S.getImageData(0,0,(n<<5)/j,a/j).data,X=[];--C>=0;)if(B=T[C],!!B.hasText){for(var O=B.width,R=O>>5,G=B.y1-B.y0,Y=0;Y<G*R;Y++)X[Y]=0;if(L=B.xoff,L==null)return;P=B.yoff;for(var te=0,ae=-1,oe=0;oe<G;oe++){for(var Y=0;Y<O;Y++){var ie=R*oe+(Y>>5),ue=ee[(P+oe)*(n<<5)+(L+Y)<<2]?1<<31-Y%32:0;X[ie]|=ue,te|=ue}te?ae=oe:(B.y0++,G--,oe--,P++)}B.y1=B.y0+ae,B.sprite=X.slice(0,(B.y1-B.y0)*R)}}}function h(F,B,T){T>>=5;for(var C=F.sprite,S=F.width>>5,j=F.x-(S<<4),L=j&127,P=32-L,k=F.y1-F.y0,U=(F.y+F.y0)*T+(j>>5),Q,K=0;K<k;K++){Q=0;for(var H=0;H<=S;H++)if((Q<<P|(H<S?(Q=C[K*S+H])>>>L:0))&B[U+H])return!0;U+=T}return!1}function m(F,B){var T=F[0],C=F[1];B.x+B.x0<T.x&&(T.x=B.x+B.x0),B.y+B.y0<T.y&&(T.y=B.y+B.y0),B.x+B.x1>C.x&&(C.x=B.x+B.x1),B.y+B.y1>C.y&&(C.y=B.y+B.y1)}function g(F,B){return F.x+F.x1>B[0].x&&F.x+F.x0<B[1].x&&F.y+F.y1>B[0].y&&F.y+F.y0<B[1].y}function x(F){var B=F[0]/F[1];return function(T){return[B*(T*=.1)*Math.cos(T),T*Math.sin(T)]}}function v(F){var B=4,T=B*F[0]/F[1],C=0,S=0;return function(j){var L=j<0?-1:1;switch(Math.sqrt(1+4*L*j)-L&3){case 0:C+=T;break;case 1:S+=B;break;case 2:C-=T;break;default:S-=B;break}return[C,S]}}function y(F){for(var B=[],T=-1;++T<F;)B[T]=0;return B}function w(){return document.createElement("canvas")}function _(F){return typeof F=="function"?F:function(){return F}}return ZI}var Uot=Mot();const Qot=Bl(Uot),Hot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),Vot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),zot=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),$ot=e=>{const[t,r]=N.useState([]),[n,a]=N.useState(!0),[s,o]=N.useState(null),l=N.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return N.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){o("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),o(null)};if(l)c=Bot(u);else{const d=e.email||e.id||"";c=Tot(u,d)}return c}catch(c){o(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,l]),{planificaciones:t,loading:n,error:s,canViewAllPlans:l}},Got=({plan:e,onClose:t})=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[i.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),i.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:i.jsx(Vot,{})})]}),i.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{className:"mt-2",children:[i.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),i.jsx("div",{className:"mt-3",children:i.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),i.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>i.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:[i.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?i.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>i.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[i.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),oX=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],qot=["1º Medio","2º Medio","3º Medio","4º Medio"],Kot=({words:e})=>{const t=N.useRef(null);return N.useEffect(()=>{if(!e.length||!t.current)return;const r=Vu(t.current);r.selectAll("*").remove();const n=Qot().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",o=>`${o.size}px`).style("font-family","Impact").style("fill",(o,l)=>y4(Fot)(l.toString())).attr("text-anchor","middle").attr("transform",o=>`translate(${[o.x,o.y]})rotate(${o.rotate})`).text(o=>o.text)}},[e]),i.jsx("svg",{ref:t})},Wot=({planificaciones:e})=>{const[t,r]=N.useState("todos"),[n,a]=N.useState("todos"),s=N.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),o=N.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),l=N.useMemo(()=>{const d=oX.reduce((f,h)=>({...f,[h]:0}),{});return o.forEach(f=>{var h,m;return(m=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=oX.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[o]),c=N.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(o.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(d.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(h).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[o]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[i.jsx("option",{value:"todos",children:"Todos los Niveles"}),qot.map(d=>i.jsx("option",{value:d,children:d},d))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>i.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),l.every(d=>d.value===0)?i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):i.jsx("ul",{className:"space-y-3",children:l.map((d,f)=>i.jsxs("li",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(l[0].value||1)*100}%`}})})]})]},d.text))})]}),i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?i.jsx(Kot,{words:c}):i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},Xot=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=$ot(e),[s,o]=N.useState("seguimiento"),[l,c]=N.useState("1º"),[u,d]=N.useState(null),[f,h]=N.useState(null),m=N.useMemo(()=>{const v={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===v[l]&&y.tipo==="Unidad")},[t,l]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{children:"Usuario no autenticado."})});if(r)return i.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[i.jsx(zot,{}),i.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return i.jsx("div",{className:"text-center py-8",children:i.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>i.jsx("button",{onClick:()=>c(v.key),className:`${l===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):i.jsx("div",{className:"space-y-4",children:ls.map(v=>{const y=m.filter(_=>_.asignatura===v);if(y.length===0)return null;const w=u===v;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("button",{onClick:()=>d(w?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),i.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),i.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:i.jsx(Hot,{})})]}),w&&i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:i.jsx("ul",{className:"space-y-3",children:y.map(_=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>h(_),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:_.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",_.autor||"N/A"]})]})},_.id))})})]},v)})})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&i.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>o("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),i.jsx("button",{onClick:()=>o("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&i.jsx(Wot,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),f&&i.jsx(Got,{plan:f,onClose:()=>h(null)})]})},hj="analisisTaxonomicos",Yot=async()=>{try{const e=Ht(mt(Nr,hj),ar("uploadDate","desc"));return(await qr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},Jot=async e=>{if(!e)return[];try{const t=Ht(mt(Nr,hj),xr("userId","==",e),ar("uploadDate","desc"));return(await qr(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},Zot=async e=>{try{return{id:(await mn(mt(Nr,hj),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},elt=async e=>{try{const t=nr(Nr,hj,e);await Ca(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},lX=["1º Medio","2º Medio","3º Medio","4º Medio"],Q0=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Jx={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},tlt=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),cX=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState(null),[u,d]=N.useState(""),[f,h]=N.useState(!1),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(""),[_,F]=N.useState(""),[B,T]=N.useState(""),[C,S]=N.useState(""),[j,L]=N.useState("resumen"),P=N.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const W=e.profile==="SUBDIRECCION"?await Yot():await Jot(e.id);r(W),o(null)}catch(W){console.error("Error al cargar análisis:",W),o("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);N.useEffect(()=>{P()},[P]);const k=async W=>{var X;const ee=(X=W.target.files)==null?void 0:X[0];if(ee){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(ee.type)){o("Por favor, suba un archivo PDF o DOCX válido.");return}g(ee),d(ee.name),o(null);const R=new FileReader;R.onloadend=()=>{var Y;const G=(Y=R.result)==null?void 0:Y.split(",")[1];if(!G){o("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),v(null);return}v({mimeType:ee.type,data:G})},R.onerror=()=>o("Error al leer el archivo."),R.readAsDataURL(ee)}},U=async()=>{if(!u.trim()||!x){o("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!_){o("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),o(null);const W=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido y tener la siguiente estructura:
               {
                 "analysisResults": [
                   { "question": "...", "habilidadBloom": "..." }
                 ],
                 "summary": {
                   "Recordar": 0,
                   "Comprender": 0,
                   "Aplicar": 0,
                   "Analizar": 0,
                   "Evaluar": 0,
                   "Crear": 0
                 }
               }
            Donde "summary" contiene el conteo total de preguntas por cada nivel de Bloom.
        `;Q0.reduce((ee,X)=>({...ee,[X]:{type:"number"}}),{});try{q4("Análisis Taxonómico",e);const ee=ll.currentUser;if(!ee)throw new Error("Usuario no autenticado.");const X=await ee.getIdToken(),O=await fetch("/api/analisisTaxonomico",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({prompt:W,fileData:x,documentName:u,nivelForm:y,asignaturaForm:_,userId:e.id})});if(!O.ok){const te=await O.text();throw console.error("Error response from backend:",te),new Error(`Error al analizar el documento con IA: ${O.statusText}`)}const R=await O.json(),G={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:R.analysisResults,summary:R.summary,nivel:y,asignatura:_},Y=await Zot(G);await P(),c(Y),d(""),g(null),v(null),w(""),F("")}catch(ee){console.error(ee);const X=ee instanceof Error?ee.message:"Hubo un error al analizar el documento.";o(X)}finally{h(!1)}},Q=async W=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await elt(W),await P(),(l==null?void 0:l.id)===W&&c(null)}catch{o("No se pudo eliminar el análisis.")}},K=N.useMemo(()=>t.filter(W=>{const ee=B?W.nivel===B:!0,X=C?W.asignatura===C:!0;return ee&&X}),[t,B,C]),H=N.useMemo(()=>{const W={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};K.forEach(X=>{Q0.forEach(O=>{var G;const R=((G=X.summary)==null?void 0:G[O])||0;W[O]+=R})});const ee=Object.values(W).reduce((X,O)=>X+O,0);return{acc:W,total:ee}},[K]),q=N.useMemo(()=>{const W=new Map;K.forEach(X=>{const O=X.asignatura||"Sin asignatura";W.has(O)||W.set(O,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const R=W.get(O);Q0.forEach(G=>{var Y;R[G]+=((Y=X.summary)==null?void 0:Y[G])||0})});const ee=Array.from(W.entries()).map(([X,O])=>({asignatura:X,counts:O,total:Object.values(O).reduce((R,G)=>R+G,0)}));return ee.sort((X,O)=>O.total-X.total),ee},[K]),z=N.useMemo(()=>l?Object.values(l.summary).reduce((W,ee)=>W+(ee||0),0):0,[l]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonomico de Evaluaciones"}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),i.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:i.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),i.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k,accept:".pdf,.doc,.docx"}),i.jsx("span",{children:"Cargue un archivo"})]}),i.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),i.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:y,onChange:W=>w(W.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),lX.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:_,onChange:W=>F(W.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),ls.map(W=>i.jsx("option",{value:W,children:W},W))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),i.jsx("input",{type:"text",id:"documentName",value:u,onChange:W=>d(W.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("button",{onClick:U,disabled:f||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?i.jsx(tlt,{}):"Analizar con IA"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?i.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(W=>i.jsxs("button",{onClick:()=>c(W),className:`w-full text-left p-3 rounded-md border ${(l==null?void 0:l.id)===W.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[i.jsx("p",{className:"font-semibold truncate",children:W.documentName}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(W.uploadDate).toLocaleString("es-CL")}),(W.nivel||W.asignatura)&&i.jsxs("p",{className:"text-xs text-slate-500",children:[W.nivel||"Nivel s/i"," • ",W.asignatura||"Asignatura s/i"]})]},W.id))})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),i.jsxs("select",{value:B,onChange:W=>T(W.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos"}),lX.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),i.jsxs("select",{value:C,onChange:W=>S(W.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas"}),ls.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),i.jsx("button",{type:"button",onClick:()=>{T(""),S("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>L("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${j==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),i.jsx("button",{onClick:()=>L("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${j==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),j==="resumen"?i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[K.length," análisis considerados"]})]}),i.jsx("div",{className:"space-y-3",children:Q0.map(W=>{const ee=H.acc[W],X=H.total>0?ee/H.total*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:W}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[ee," (",X.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${Jx[W]} h-4 rounded-full`,style:{width:`${X}%`}})})]},W)})}),i.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:Q0.map(W=>i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[i.jsx("span",{className:"text-sm",children:W}),i.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${Jx[W]}`,children:H.acc[W]})]},W))})]}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[q.length," asignaturas comparadas"]})]}),q.length===0?i.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):i.jsx("div",{className:"space-y-5",children:q.map(W=>{const ee=W.total||1;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:W.asignatura}),i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[W.total," ítems"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:Q0.map(X=>{const O=W.counts[X]||0,R=O/ee*100;return i.jsx("div",{className:`${Jx[X]} h-5`,style:{width:`${R}%`},title:`${X}: ${O} (${R.toFixed(0)}%)`},X)})}),i.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Q0.map(X=>i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("span",{className:`inline-block w-3 h-3 rounded ${Jx[X]}`}),i.jsx("span",{children:X})]},X))})]},W.asignatura)})})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:l?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.documentName}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(l.uploadDate).toLocaleString("es-CL"),(l.nivel||l.asignatura)&&i.jsxs(i.Fragment,{children:[" ","• ",l.nivel||"Nivel s/i"," • ",l.asignatura||"Asignatura s/i"]})]})]}),i.jsx("button",{onClick:()=>Q(l.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",z," preguntas)"]}),i.jsx("div",{className:"space-y-3",children:Q0.map(W=>{const ee=l.summary[W]||0,X=z>0?ee/z*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:W}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[ee," (",X.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${Jx[W]} h-4 rounded-full`,style:{width:`${X}%`}})})]},W)})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),i.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l.analysisResults.map((W,ee)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:W.question}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${Jx[W.habilidadBloom]}`,children:W.habilidadBloom})})]},ee))})]})})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},qS="empresas_practicas",rlt="usuarios",JM="rutas_supervision",ZM=e=>{const t=e.data();return{id:e.id,...t}};async function nlt(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const alt=e=>{const t=Ht(mt(tt,qS),ar("nombre","asc"));return mr(t,r=>{const n=r.docs.map(a=>ZM(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},slt=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await nlt(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=nr(tt,qS,n);return await yi(s,a,{merge:!0}),n}else return(await mn(mt(tt,qS),{...r,createdAt:Na()})).id},ilt=async e=>{const t=nr(tt,qS,e);await Ca(t)},olt=e=>{const t=Ht(mt(tt,rlt),xr("profile","==","PROFESORADO"),ar("nombreCompleto","asc"));return mr(t,r=>{const n=r.docs.map(a=>ZM(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},llt=async e=>(await mn(mt(tt,JM),{...e,createdAt:Na()})).id,clt=e=>{const t=Ht(mt(tt,JM),ar("createdAt","desc"));return mr(t,r=>{const n=r.docs.map(a=>ZM(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},ult=async e=>{const t=nr(tt,JM,e);await Ca(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ag=function(){return Ag=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ag.apply(this,arguments)};function dlt(e,t,r,n){return new(r||(r=Promise))(function(a,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(o,l)}c((n=n.apply(e,[])).next())})}function flt(e,t){var r,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,n=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){o=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){o.label=d[1];break}if(d[0]===6&&o.label<a[1]){o.label=a[1],a=d;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(d);break}a[2]&&o.ops.pop(),o.trys.pop();continue}d=t.call(e,o)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Ur(){return Ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ur.apply(this,arguments)}function hg(e){return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}function Ide(e){var t=function(r,n){if(hg(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(hg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return hg(t)==="symbol"?t:String(t)}function Sv(e,t,r){return(t=Ide(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uX(Object(r),!0).forEach(function(n){Sv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ide(n.key),n)}}function cD(e,t){return cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},cD(e,t)}function KS(e){return KS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},KS(e)}function Alt(e,t){if(t&&(hg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function hlt(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=KS(e);if(t){var a=KS(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Alt(this,r)}}function uD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fde(e,t){if(e){if(typeof e=="string")return uD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uD(e,t):void 0}}function eU(e){return function(t){if(Array.isArray(t))return uD(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Fde(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var mlt=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var o=document.createElement("style");return o.setAttribute("data-emotion",s.key),s.nonce!==void 0&&o.setAttribute("nonce",s.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===s)return document.styleSheets[o]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Iu="-ms-",fX="-moz-",Zn="-webkit-",tU="decl",Ode="@keyframes",plt=Math.abs,mj=String.fromCharCode,glt=Object.assign;function Dde(e){return e.trim()}function sa(e,t,r){return e.replace(t,r)}function dD(e,t){return e.indexOf(t)}function xo(e,t){return 0|e.charCodeAt(t)}function Q2(e,t,r){return e.slice(t,r)}function Vf(e){return e.length}function rU(e){return e.length}function LC(e,t){return t.push(e),e}var pj=1,Lb=1,Pde=0,dc=0,hi=0,E1="";function gj(e,t,r,n,a,s,o){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:pj,column:Lb,length:o,return:""}}function Iy(e,t){return glt(gj("",null,null,"",null,null,0),e,{length:-e.length},t)}function Xc(){return hi=dc<Pde?xo(E1,dc++):0,Lb++,hi===10&&(Lb=1,pj++),hi}function lA(){return xo(E1,dc)}function L5(){return dc}function RE(e,t){return Q2(E1,e,t)}function H2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Rde(e){return pj=Lb=1,Pde=Vf(E1=e),dc=0,[]}function Lde(e){return E1="",e}function M5(e){return Dde(RE(dc-1,fD(e===91?e+2:e===40?e+1:e)))}function xlt(e){for(;(hi=lA())&&hi<33;)Xc();return H2(e)>2||H2(hi)>3?"":" "}function vlt(e,t){for(;--t&&Xc()&&!(hi<48||hi>102||hi>57&&hi<65||hi>70&&hi<97););return RE(e,L5()+(t<6&&lA()==32&&Xc()==32))}function fD(e){for(;Xc();)switch(hi){case e:return dc;case 34:case 39:e!==34&&e!==39&&fD(hi);break;case 40:e===41&&fD(e);break;case 92:Xc()}return dc}function blt(e,t){for(;Xc()&&e+hi!==57&&(e+hi!==84||lA()!==47););return"/*"+RE(t,dc-1)+"*"+mj(e===47?e:Xc())}function ylt(e){for(;!H2(lA());)Xc();return RE(e,dc)}function AX(e){return Lde(U5("",null,null,null,[""],e=Rde(e),0,[0],e))}function U5(e,t,r,n,a,s,o,l,c){for(var u=0,d=0,f=o,h=0,m=0,g=0,x=1,v=1,y=1,w=0,_="",F=a,B=s,T=n,C=_;v;)switch(g=w,w=Xc()){case 40:if(g!=108&&xo(C,f-1)==58){dD(C+=sa(M5(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:C+=M5(w);break;case 9:case 10:case 13:case 32:C+=xlt(g);break;case 92:C+=vlt(L5()-1,7);continue;case 47:switch(lA()){case 42:case 47:LC(wlt(blt(Xc(),L5()),t,r),c);break;default:C+="/"}break;case 123*x:l[u++]=Vf(C)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+d:m>0&&Vf(C)-f&&LC(m>32?mX(C+";",n,r,f-1):mX(sa(C," ","")+";",n,r,f-2),c);break;case 59:C+=";";default:if(LC(T=hX(C,t,r,u,d,a,l,_,F=[],B=[],f),s),w===123)if(d===0)U5(C,t,T,T,F,s,f,l,B);else switch(h===99&&xo(C,3)===110?100:h){case 100:case 109:case 115:U5(e,T,T,n&&LC(hX(e,T,T,0,0,a,l,_,a,F=[],f),B),a,B,f,l,n?F:B);break;default:U5(C,T,T,T,[""],B,0,l,B)}}u=d=m=0,x=y=1,_=C="",f=o;break;case 58:f=1+Vf(C),m=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(hi=dc>0?xo(E1,--dc):0,Lb--,hi===10&&(Lb=1,pj--),hi==125))continue}switch(C+=mj(w),w*x){case 38:y=d>0?1:(C+="\f",-1);break;case 44:l[u++]=(Vf(C)-1)*y,y=1;break;case 64:lA()===45&&(C+=M5(Xc())),h=lA(),d=f=Vf(_=C+=ylt(L5())),w++;break;case 45:g===45&&Vf(C)==2&&(x=0)}}return s}function hX(e,t,r,n,a,s,o,l,c,u,d){for(var f=a-1,h=a===0?s:[""],m=rU(h),g=0,x=0,v=0;g<n;++g)for(var y=0,w=Q2(e,f+1,f=plt(x=o[g])),_=e;y<m;++y)(_=Dde(x>0?h[y]+" "+w:sa(w,/&\f/g,h[y])))&&(c[v++]=_);return gj(e,t,r,a===0?"rule":l,c,u,d)}function wlt(e,t,r){return gj(e,t,r,"comm",mj(hi),Q2(e,2,-2),0)}function mX(e,t,r,n){return gj(e,t,r,tU,Q2(e,0,n),Q2(e,n+1,-1),n)}function mg(e,t){for(var r="",n=rU(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function pX(e,t,r,n){switch(e.type){case"@import":case tU:return e.return=e.return||e.value;case"comm":return"";case Ode:return e.return=e.value+"{"+mg(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return Vf(r=mg(e.children,n))?e.return=e.value+"{"+r+"}":""}function gX(e){var t=rU(e);return function(r,n,a,s){for(var o="",l=0;l<t;l++)o+=e[l](r,n,a,s)||"";return o}}function Elt(e){return function(t){t.root||(t=t.return)&&e(t)}}function Mde(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Nlt=function(e,t,r){for(var n=0,a=0;n=a,a=lA(),n===38&&a===12&&(t[r]=1),!H2(a);)Xc();return RE(e,dc)},Clt=function(e,t){return Lde(function(r,n){var a=-1,s=44;do switch(H2(s)){case 0:s===38&&lA()===12&&(n[a]=1),r[a]+=Nlt(dc-1,n,a);break;case 2:r[a]+=M5(s);break;case 4:if(s===44){r[++a]=lA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=mj(s)}while(s=Xc());return r}(Rde(e),t))},xX=new WeakMap,_lt=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||xX.get(r))&&!n){xX.set(e,!0);for(var a=[],s=Clt(t,a),o=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=a[l]?s[l].replace(/&\f/g,o[u]):o[u]+" "+s[l]}}},Slt=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Ude(e,t){switch(function(r,n){return 45^xo(r,0)?(((n<<2^xo(r,0))<<2^xo(r,1))<<2^xo(r,2))<<2^xo(r,3):0}(e,t)){case 5103:return Zn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Zn+e+fX+e+Iu+e+e;case 6828:case 4268:return Zn+e+Iu+e+e;case 6165:return Zn+e+Iu+"flex-"+e+e;case 5187:return Zn+e+sa(e,/(\w+).+(:[^]+)/,Zn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Zn+e+Iu+"flex-item-"+sa(e,/flex-|-self/,"")+e;case 4675:return Zn+e+Iu+"flex-line-pack"+sa(e,/align-content|flex-|-self/,"")+e;case 5548:return Zn+e+Iu+sa(e,"shrink","negative")+e;case 5292:return Zn+e+Iu+sa(e,"basis","preferred-size")+e;case 6060:return Zn+"box-"+sa(e,"-grow","")+Zn+e+Iu+sa(e,"grow","positive")+e;case 4554:return Zn+sa(e,/([^-])(transform)/g,"$1"+Zn+"$2")+e;case 6187:return sa(sa(sa(e,/(zoom-|grab)/,Zn+"$1"),/(image-set)/,Zn+"$1"),e,"")+e;case 5495:case 3959:return sa(e,/(image-set\([^]*)/,Zn+"$1$`$1");case 4968:return sa(sa(e,/(.+:)(flex-)?(.*)/,Zn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zn+e+e;case 4095:case 3583:case 4068:case 2532:return sa(e,/(.+)-inline(.+)/,Zn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Vf(e)-1-t>6)switch(xo(e,t+1)){case 109:if(xo(e,t+4)!==45)break;case 102:return sa(e,/(.+:)(.+)-([^]+)/,"$1"+Zn+"$2-$3$1"+fX+(xo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~dD(e,"stretch")?Ude(sa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(xo(e,t+1)!==115)break;case 6444:switch(xo(e,Vf(e)-3-(~dD(e,"!important")&&10))){case 107:return sa(e,":",":"+Zn)+e;case 101:return sa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zn+(xo(e,14)===45?"inline-":"")+"box$3$1"+Zn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(xo(e,t+11)){case 114:return Zn+e+Iu+sa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Zn+e+Iu+sa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Zn+e+Iu+sa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Zn+e+Iu+e+e}return e}var vX,MC,Q5=typeof document<"u",klt=Q5?void 0:(vX=function(){return Mde(function(){var e={};return function(t){return e[t]}})},MC=new WeakMap,function(e){if(MC.has(e))return MC.get(e);var t=vX(e);return MC.set(e,t),t}),jlt=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case tU:e.return=Ude(e.value,e.length);break;case Ode:return mg([Iy(e,{value:sa(e.value,"@","@"+Zn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,o){return(s=o.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return mg([Iy(e,{props:[sa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return mg([Iy(e,{props:[sa(a,/:(plac\w+)/,":"+Zn+"input-$1")]}),Iy(e,{props:[sa(a,/:(plac\w+)/,":-moz-$1")]}),Iy(e,{props:[sa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],Qde=function(e){var t=e.key;if(Q5&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||jlt,a,s,o={},l=[];Q5&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)o[w[_]]=!0;l.push(y)}));var c=[_lt,Slt];if(Q5){var u,d=[pX,Elt(function(y){u.insert(y)})],f=gX(c.concat(n,d));s=function(y,w,_,F){u=_,mg(AX(y?y+"{"+w.styles+"}":w.styles),f),F&&(v.inserted[w.name]=!0)}}else{var h=[pX],m=gX(c.concat(n,h)),g=klt(n)(t),x=function(y,w){var _=w.name;return g[_]===void 0&&(g[_]=mg(AX(y?y+"{"+w.styles+"}":w.styles),m)),g[_]};s=function(y,w,_,F){var B=w.name,T=x(y,w);return v.compat===void 0?(F&&(v.inserted[B]=!0),T):F?void(v.inserted[B]=T):T}}var v={key:t,sheet:new mlt({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return v.sheet.hydrate(l),v};function oa(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var io=typeof Symbol=="function"&&Symbol.for,AD=io?Symbol.for("react.element"):60103,hD=io?Symbol.for("react.portal"):60106,H5=io?Symbol.for("react.fragment"):60107,V5=io?Symbol.for("react.strict_mode"):60108,z5=io?Symbol.for("react.profiler"):60114,$5=io?Symbol.for("react.provider"):60109,G5=io?Symbol.for("react.context"):60110,mD=io?Symbol.for("react.async_mode"):60111,WS=io?Symbol.for("react.concurrent_mode"):60111,q5=io?Symbol.for("react.forward_ref"):60112,K5=io?Symbol.for("react.suspense"):60113,Blt=io?Symbol.for("react.suspense_list"):60120,W5=io?Symbol.for("react.memo"):60115,X5=io?Symbol.for("react.lazy"):60116,Tlt=io?Symbol.for("react.block"):60121,Ilt=io?Symbol.for("react.fundamental"):60117,Flt=io?Symbol.for("react.responder"):60118,Olt=io?Symbol.for("react.scope"):60119;function Fc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case AD:switch(e=e.type){case mD:case WS:case H5:case z5:case V5:case K5:return e;default:switch(e=e&&e.$$typeof){case G5:case q5:case X5:case W5:case $5:return e;default:return t}}case hD:return t}}}function bX(e){return Fc(e)===WS}var Dlt={AsyncMode:mD,ConcurrentMode:WS,ContextConsumer:G5,ContextProvider:$5,Element:AD,ForwardRef:q5,Fragment:H5,Lazy:X5,Memo:W5,Portal:hD,Profiler:z5,StrictMode:V5,Suspense:K5,isAsyncMode:function(e){return bX(e)||Fc(e)===mD},isConcurrentMode:bX,isContextConsumer:function(e){return Fc(e)===G5},isContextProvider:function(e){return Fc(e)===$5},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===AD},isForwardRef:function(e){return Fc(e)===q5},isFragment:function(e){return Fc(e)===H5},isLazy:function(e){return Fc(e)===X5},isMemo:function(e){return Fc(e)===W5},isPortal:function(e){return Fc(e)===hD},isProfiler:function(e){return Fc(e)===z5},isStrictMode:function(e){return Fc(e)===V5},isSuspense:function(e){return Fc(e)===K5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===H5||e===WS||e===z5||e===V5||e===K5||e===Blt||typeof e=="object"&&e!==null&&(e.$$typeof===X5||e.$$typeof===W5||e.$$typeof===$5||e.$$typeof===G5||e.$$typeof===q5||e.$$typeof===Ilt||e.$$typeof===Flt||e.$$typeof===Olt||e.$$typeof===Tlt)},typeOf:Fc};oa(function(e,t){});var yX=oa(function(e){e.exports=Dlt}),wX={};wX[yX.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},wX[yX.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var pD=typeof document<"u";function Hde(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var nU=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||pD===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},aU=function(e,t,r){nU(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var o=e.insert(t===s?"."+n:"",s,e.sheet,!0);pD||o===void 0||(a+=o),s=s.next}while(s!==void 0);if(!pD&&a.length!==0)return a}},Plt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Rlt=/[A-Z]|^ms/g,Llt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Vde=function(e){return e.charCodeAt(1)===45},EX=function(e){return e!=null&&typeof e!="boolean"},e6=Mde(function(e){return Vde(e)?e:e.replace(Rlt,"-$&").toLowerCase()}),NX=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Llt,function(r,n,a){return zf={name:n,styles:a,next:zf},n})}return Plt[e]===1||Vde(e)||typeof t!="number"||t===0?t:t+"px"};function Rw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return zf={name:r.name,styles:r.styles,next:zf},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)zf={name:n.name,styles:n.styles,next:zf},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=Rw(c,u,d[h])+";";else for(var m in d){var g=d[m];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=m+"{"+u[g]+"}":EX(g)&&(f+=e6(m)+":"+NX(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=Rw(c,u,g);switch(m){case"animation":case"animationName":f+=e6(m)+":"+x+";";break;default:f+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)EX(g[v])&&(f+=e6(m)+":"+NX(m,g[v])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=zf,o=r(e);return zf=s,Rw(e,t,o)}break}if(t==null)return r;var l=t[r];return l!==void 0?l:r}var zf,CX=/label:\s*([^\s;\n{]+)\s*(;|$)/g,xj=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";zf=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=Rw(r,t,s)):a+=s[0];for(var o=1;o<e.length;o++)a+=Rw(r,t,e[o]),n&&(a+=s[o]);CX.lastIndex=0;for(var l,c="";(l=CX.exec(a))!==null;)c+="-"+l[1];var u=function(d){for(var f,h=0,m=0,g=d.length;g>=4;++m,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(m+2))<<16;case 2:h^=(255&d.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(m)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:zf}},Mlt=typeof document<"u",Ult=function(e){return e()},zde=!!N.useInsertionEffect&&N.useInsertionEffect,$de=Mlt&&zde||Ult,_X=zde||N.useLayoutEffect,Jv=typeof document<"u",sU={}.hasOwnProperty,XS=N.createContext(typeof HTMLElement<"u"?Qde({key:"css"}):null);XS.Provider;var vj=function(e){return N.forwardRef(function(t,r){var n=N.useContext(XS);return e(t,n,r)})};Jv||(vj=function(e){return function(t){var r=N.useContext(XS);return r===null?(r=Qde({key:"css"}),N.createElement(XS.Provider,{value:r},e(t,r))):e(t,r)}});var iU=N.createContext({}),gD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Qlt=function(e,t){var r={};for(var n in t)sU.call(t,n)&&(r[n]=t[n]);return r[gD]=e,r},Hlt=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;nU(t,r,n);var a=$de(function(){return aU(t,r,n)});if(!Jv&&a!==void 0){for(var s,o=r.name,l=r.next;l!==void 0;)o+=" "+l.name,l=l.next;return N.createElement("style",((s={})["data-emotion"]=t.key+" "+o,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},Vlt=vj(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[gD],s=[n],o="";typeof e.className=="string"?o=Hde(t.registered,s,e.className):e.className!=null&&(o=e.className+" ");var l=xj(s,void 0,N.useContext(iU));o+=t.key+"-"+l.name;var c={};for(var u in e)!sU.call(e,u)||u==="css"||u===gD||(c[u]=e[u]);return c.ref=r,c.className=o,N.createElement(N.Fragment,null,N.createElement(Hlt,{cache:t,serialized:l,isStringTag:typeof a=="string"}),N.createElement(a,c))});oa(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Fr=function(e,t){var r=arguments;if(t==null||!sU.call(t,"css"))return N.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=Vlt,a[1]=Qlt(e,t);for(var s=2;s<n;s++)a[s]=r[s];return N.createElement.apply(null,a)};vj(function(e,t){var r=e.styles,n=xj([r],void 0,N.useContext(iU));if(!Jv){for(var a,s=n.name,o=n.styles,l=n.next;l!==void 0;)s+=" "+l.name,o+=l.styles,l=l.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:o},t.sheet,c);return c?null:N.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=N.useRef();return _X(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,m],function(){h.flush()}},[t]),_X(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&aU(t,n.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function oU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return xj(t)}var zlt=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var o=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))o=e(s);else for(var l in o="",s)s[l]&&l&&(o&&(o+=" "),o+=l);break;default:o=s}o&&(a&&(a+=" "),a+=o)}}return a};function $lt(e,t,r){var n=[],a=Hde(e,n,r);return n.length<2?r:a+t(n)}var Glt=function(e){var t,r=e.cache,n=e.serializedArr,a=$de(function(){for(var s="",o=0;o<n.length;o++){var l=aU(r,n[o],!1);Jv||l===void 0||(s+=l)}if(!Jv)return s});return Jv||a.length===0?null:N.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};vj(function(e,t){var r=[],n=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=xj(l,t.registered);return r.push(u),nU(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return $lt(t.registered,n,zlt(l))},theme:N.useContext(iU)},s=e.children(a);return N.createElement(N.Fragment,null,N.createElement(Glt,{cache:t,serializedArr:r}),s)});function qi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,o,l,c,u=[],d=!0,f=!1;try{if(l=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=l.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,o=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw o}}return u}}(e,t)||Fde(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qf(e,t){if(e==null)return{};var r,n,a=function(o,l){if(o==null)return{};var c,u,d={},f=Object.keys(o);for(u=0;u<f.length;u++)c=f[u],l.indexOf(c)>=0||(d[c]=o[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yh(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Gde(e){return yh(e).getComputedStyle(e)}const UC=Math.round;function qde(e){return Wde(e)?(e.nodeName||"").toLowerCase():""}let QC;function Kde(e){return e instanceof yh(e).HTMLElement}function Y5(e){return e instanceof yh(e).Element}function Wde(e){return e instanceof yh(e).Node}function SX(e){return typeof ShadowRoot>"u"?!1:e instanceof yh(e).ShadowRoot||e instanceof ShadowRoot}function Xde(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Gde(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function qlt(){return/^((?!chrome|android).)*safari/i.test(function(){if(QC)return QC;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(QC=e.brands.map(t=>t.brand+"/"+t.version).join(" "),QC):navigator.userAgent}())}function Yde(e){return Y5(e)?e:e.contextElement}const Jde={x:1,y:1};function kX(e){const t=Yde(e);if(!Kde(t))return Jde;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=Gde(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,m=c.offsetHeight,g=UC(d)!==h||UC(f)!==m;return g&&(d=h,f=m),{width:d,height:f,fallback:g}}(t);let o=(s?UC(r.width):r.width)/n,l=(s?UC(r.height):r.height)/a;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}function jX(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),l=Yde(e);let c=Jde;t&&(c=kX(e));const u=l?yh(l):window,d=qlt()&&r;let f=(o.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(o.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=o.width/c.x,g=o.height/c.y;if(l){const x=yh(l),v=n;let y=x.frameElement;for(;y&&n&&v!==x;){const w=kX(y),_=y.getBoundingClientRect(),F=getComputedStyle(y);_.x+=(y.clientLeft+parseFloat(F.paddingLeft))*w.x,_.y+=(y.clientTop+parseFloat(F.paddingTop))*w.y,f*=w.x,h*=w.y,m*=w.x,g*=w.y,f+=_.x,h+=_.y,y=yh(y).frameElement}}return{width:m,height:g,top:h,right:f+m,bottom:h+g,left:f,x:f,y:h}}function Klt(e){if(qde(e)==="html")return e;const t=e.assignedSlot||e.parentNode||SX(e)&&e.host||function(r){return((Wde(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return SX(t)?t.host:t}function Zde(e){const t=Klt(e);return function(r){return["html","body","#document"].includes(qde(r))}(t)?t.ownerDocument.body:Kde(t)&&Xde(t)?t:Zde(t)}function J5(e,t){var r;t===void 0&&(t=[]);const n=Zde(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=yh(n);return a?t.concat(s,s.visualViewport||[],Xde(n)?n:[]):t.concat(n,J5(n))}var xD=typeof document<"u"?N.useLayoutEffect:N.useEffect,Wlt=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],YS=function(){};function Xlt(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Ylt(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(Xlt(e,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var BX=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):hg(e)==="object"&&e!==null?[e]:[];var t},TX=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Sr({},qf(e,Wlt))},_s=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,o=e.className;return{css:a(t,e),className:n(r??{},s(t,e),o)}};function bj(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function efe(e){return bj(e)?window.pageYOffset:e.scrollTop}function JS(e,t){bj(e)?window.scrollTo(0,t):e.scrollTop=t}function Jlt(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function HC(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:YS,a=efe(e),s=t-a,o=10,l=0;function c(){var u=Jlt(l+=o,a,s,r);JS(e,u),l<r?window.requestAnimationFrame(c):n(e)}c()}function IX(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?JS(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&JS(e,Math.max(t.offsetTop-a,0))}function FX(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var tfe=!1,Zlt={get passive(){return tfe=!0}},VC=typeof window<"u"?window:{};VC.addEventListener&&VC.removeEventListener&&(VC.addEventListener("p",YS,Zlt),VC.removeEventListener("p",YS,!1));var ect=tfe;function tct(e){return e!=null}function zC(e,t,r){return e?t:r}var rct=["children","innerProps"],nct=["children","innerProps"];function act(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=function(K){var H=getComputedStyle(K),q=H.position==="absolute",z=/(auto|scroll)/;if(H.position==="fixed")return document.documentElement;for(var W=K;W=W.parentElement;)if(H=getComputedStyle(W),(!q||H.position!=="static")&&z.test(H.overflow+H.overflowY+H.overflowX))return W;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),m=h.bottom,g=h.height,x=h.top,v=r.offsetParent.getBoundingClientRect().top,y=o||bj(d=c)?window.innerHeight:d.clientHeight,w=efe(c),_=parseInt(getComputedStyle(r).marginBottom,10),F=parseInt(getComputedStyle(r).marginTop,10),B=v-F,T=y-x,C=B+w,S=f-w-x,j=m-y+w+_,L=w+x-F,P=160;switch(a){case"auto":case"bottom":if(T>=g)return{placement:"bottom",maxHeight:t};if(S>=g&&!o)return s&&HC(c,j,P),{placement:"bottom",maxHeight:t};if(!o&&S>=n||o&&T>=n)return s&&HC(c,j,P),{placement:"bottom",maxHeight:o?T-_:S-_};if(a==="auto"||o){var k=t,U=o?B:C;return U>=n&&(k=Math.min(U-_-l,t)),{placement:"top",maxHeight:k}}if(a==="bottom")return s&&JS(c,j),{placement:"bottom",maxHeight:t};break;case"top":if(B>=g)return{placement:"top",maxHeight:t};if(C>=g&&!o)return s&&HC(c,L,P),{placement:"top",maxHeight:t};if(!o&&C>=n||o&&B>=n){var Q=t;return(!o&&C>=n||o&&B>=n)&&(Q=o?B-F:C-F),s&&HC(c,L,P),{placement:"top",maxHeight:Q}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var OX,rfe=function(e){return e==="auto"?"bottom":e},nfe=N.createContext(null),sct=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=(N.useContext(nfe)||{}).setPortalPlacement,u=N.useRef(null),d=qi(N.useState(n),2),f=d[0],h=d[1],m=qi(N.useState(null),2),g=m[0],x=m[1],v=l.spacing.controlHeight;return xD(function(){var y=u.current;if(y){var w=s==="fixed",_=act({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:o&&!w,isFixedPosition:w,controlHeight:v});h(_.maxHeight),x(_.placement),c==null||c(_.placement)}},[n,a,s,o,r,c,v]),t({ref:u,placerProps:Sr(Sr({},e),{},{placement:g||rfe(a),maxHeight:f})})},ict=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Fr("div",Ur({},_s(e,"menu",{menu:!0}),{ref:r},n),t)},afe=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return Sr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},oct=afe,lct=afe,cct=["size"],uct=["innerProps","isRtl","size"],t6,r6,dct={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},sfe=function(e){var t=e.size,r=qf(e,cct);return Fr("svg",Ur({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:dct},r))},n6=function(e){return Fr(sfe,Ur({size:20},e),Fr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},DX=function(e){return Fr(sfe,Ur({size:20},e),Fr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ife=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Sr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},fct=ife,Act=ife,hct=function(){var e=oU.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(OX||(t6=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],r6||(r6=t6.slice(0)),OX=Object.freeze(Object.defineProperties(t6,{raw:{value:Object.freeze(r6)}})))),a6=function(e){var t=e.delay,r=e.offset;return Fr("span",{css:oU({animation:"".concat(hct," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},mct=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,o=e.menuIsOpen;return Fr("div",Ur({ref:a},_s(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":o}),s,{"aria-disabled":r||void 0}),t)},pct=["data"],gct=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,o=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Fr("div",Ur({},_s(e,"group",{group:!0}),l),Fr(s,Ur({},o,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Fr("div",null,t))},xct=["innerRef","isDisabled","isHidden","inputClassName"],ofe={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},vct={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Sr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},ofe)},bct=function(e){return Sr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},ofe)},PX=function(e){var t=e.children,r=e.innerProps;return Fr("div",r,t)},yct=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,o=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Fr(c,{data:n,innerProps:Sr(Sr({},_s(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},Fr(u,{data:n,innerProps:Sr({},_s(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Fr(d,{data:n,innerProps:Sr(Sr({},_s(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:l}))},wct={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Fr("div",Ur({},_s(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Fr(n6,null))},Control:mct,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Fr("div",Ur({},_s(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Fr(DX,null))},DownChevron:DX,CrossIcon:n6,Group:gct,GroupHeading:function(e){var t=TX(e);t.data;var r=qf(t,pct);return Fr("div",Ur({},_s(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Fr("div",Ur({},_s(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Fr("span",Ur({},t,_s(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=TX(e),a=n.innerRef,s=n.isDisabled,o=n.isHidden,l=n.inputClassName,c=qf(n,xct);return Fr("div",Ur({},_s(e,"input",{"input-container":!0}),{"data-value":r||""}),Fr("input",Ur({className:t({input:!0},l),ref:a,style:bct(o),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=qf(e,uct);return Fr("div",Ur({},_s(Sr(Sr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Fr(a6,{delay:0,offset:r}),Fr(a6,{delay:160,offset:!0}),Fr(a6,{delay:320,offset:!r}))},Menu:ict,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Fr("div",Ur({},_s(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,o=e.menuPosition,l=N.useRef(null),c=N.useRef(null),u=qi(N.useState(rfe(s)),2),d=u[0],f=u[1],h=N.useMemo(function(){return{setPortalPlacement:f}},[]),m=qi(N.useState(null),2),g=m[0],x=m[1],v=N.useCallback(function(){if(n){var F=function(C){var S=C.getBoundingClientRect();return{bottom:S.bottom,height:S.height,left:S.left,right:S.right,top:S.top,width:S.width}}(n),B=o==="fixed"?0:window.pageYOffset,T=F[d]+B;T===(g==null?void 0:g.offset)&&F.left===(g==null?void 0:g.rect.left)&&F.width===(g==null?void 0:g.rect.width)||x({offset:T,rect:F})}},[n,o,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);xD(function(){v()},[v]);var y=N.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&l.current&&(c.current=function(F,B,T,C){C===void 0&&(C={});const{ancestorScroll:S=!0,ancestorResize:j=!0,elementResize:L=!0,animationFrame:P=!1}=C,k=S&&!P,U=k||j?[...Y5(F)?J5(F):F.contextElement?J5(F.contextElement):[],...J5(B)]:[];U.forEach(q=>{k&&q.addEventListener("scroll",T,{passive:!0}),j&&q.addEventListener("resize",T)});let Q,K=null;if(L){let q=!0;K=new ResizeObserver(()=>{q||T(),q=!1}),Y5(F)&&!P&&K.observe(F),Y5(F)||!F.contextElement||P||K.observe(F.contextElement),K.observe(B)}let H=P?jX(F):null;return P&&function q(){const z=jX(F);!H||z.x===H.x&&z.y===H.y&&z.width===H.width&&z.height===H.height||T(),H=z,Q=requestAnimationFrame(q)}(),T(),()=>{var q;U.forEach(z=>{k&&z.removeEventListener("scroll",T),j&&z.removeEventListener("resize",T)}),(q=K)==null||q.disconnect(),K=null,P&&cancelAnimationFrame(Q)}}(n,l.current,v,{elementResize:"ResizeObserver"in window}))},[n,v]);xD(function(){y()},[y]);var w=N.useCallback(function(F){l.current=F,y()},[y]);if(!t&&o!=="fixed"||!g)return null;var _=Fr("div",Ur({ref:w},_s(Sr(Sr({},e),{},{offset:g.offset,position:o,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Fr(nfe.Provider,{value:h},t?o8.createPortal(_,t):_)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=qf(e,nct);return Fr("div",Ur({},_s(Sr(Sr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=qf(e,rct);return Fr("div",Ur({},_s(Sr(Sr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:yct,MultiValueContainer:PX,MultiValueLabel:PX,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Fr("div",Ur({role:"button"},r),t||Fr(n6,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,o=e.innerProps;return Fr("div",Ur({},_s(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},o),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Fr("div",Ur({},_s(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Fr("div",Ur({},_s(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Fr("div",Ur({},_s(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Fr("div",Ur({},_s(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},RX=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function Ect(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||RX(n)&&RX(a)))return!1;var n,a;return!0}for(var Nct={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},LX=function(e){return Fr("span",Ur({css:Nct},e))},Cct={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,o=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&o)return"value ".concat(s," focused, ").concat(d(o,r),".");if(t==="menu"&&u){var f=l?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},_ct=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,f=l.getOptionLabel,h=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,x=l.isSearchable,v=l.menuIsOpen,y=l.options,w=l.screenReaderStatus,_=l.tabSelectsValue,F=l.isLoading,B=l["aria-label"],T=l["aria-live"],C=N.useMemo(function(){return Sr(Sr({},Cct),d||{})},[d]),S=N.useMemo(function(){var Q,K="";if(t&&C.onChange){var H=t.option,q=t.options,z=t.removedValue,W=t.removedValues,ee=t.value,X=z||H||(Q=ee,Array.isArray(Q)?null:Q),O=X?f(X):"",R=q||W||void 0,G=R?R.map(f):[],Y=Sr({isDisabled:X&&g(X,o),label:O,labels:G},t);K=C.onChange(Y)}return K},[t,C,g,o,f]),j=N.useMemo(function(){var Q="",K=r||n,H=!!(r&&o&&o.includes(r));if(K&&C.onFocus){var q={focused:K,label:f(K),isDisabled:g(K,o),isSelected:H,options:a,context:K===r?"menu":"value",selectValue:o,isAppleDevice:u};Q=C.onFocus(q)}return Q},[r,n,f,g,C,a,o,u]),L=N.useMemo(function(){var Q="";if(v&&y.length&&!F&&C.onFilter){var K=w({count:a.length});Q=C.onFilter({inputValue:h,resultsMessage:K})}return Q},[a,h,v,C,y,w,F]),P=(t==null?void 0:t.action)==="initial-input-focus",k=N.useMemo(function(){var Q="";if(C.guidance){var K=n?"value":v?"menu":"input";Q=C.guidance({"aria-label":B,context:K,isDisabled:r&&g(r,o),isMulti:m,isSearchable:x,tabSelectsValue:_,isInitialFocus:P})}return Q},[B,r,n,m,g,x,v,C,o,_,P]),U=Fr(N.Fragment,null,Fr("span",{id:"aria-selection"},S),Fr("span",{id:"aria-focused"},j),Fr("span",{id:"aria-results"},L),Fr("span",{id:"aria-guidance"},k));return Fr(N.Fragment,null,Fr(LX,{id:c},P&&U),Fr(LX,{"aria-live":T,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!P&&U))},s6=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Sct=new RegExp("["+s6.map(function(e){return e.letters}).join("")+"]","g"),lfe={},i6=0;i6<s6.length;i6++)for(var o6=s6[i6],l6=0;l6<o6.letters.length;l6++)lfe[o6.letters[l6]]=o6.base;var cfe=function(e){return e.replace(Sct,function(t){return lfe[t]})},kct=function(e,t){t===void 0&&(t=Ect);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}(cfe),MX=function(e){return e.replace(/^\s+|\s+$/g,"")},jct=function(e){return"".concat(e.label," ").concat(e.value)},Bct=["innerRef"];function Tct(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var l=Object.entries(n).filter(function(c){var u=qi(c,1)[0];return!s.includes(u)});return l.reduce(function(c,u){var d=qi(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(qf(e,Bct),"onExited","in","enter","exit","appear");return Fr("input",Ur({ref:t},r,{css:oU({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var UX=["boxSizing","height","overflow","paddingRight","position"],QX={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function HX(e){e.preventDefault()}function VX(e){e.stopPropagation()}function zX(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function $X(){return"ontouchstart"in window||navigator.maxTouchPoints}var GX=!(typeof window>"u"||!window.document||!window.document.createElement),Fy=0,Zx={capture:!1,passive:!1},Ict=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Fct={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Oct(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(o){var l=o.isEnabled,c=o.onBottomArrive,u=o.onBottomLeave,d=o.onTopArrive,f=o.onTopLeave,h=N.useRef(!1),m=N.useRef(!1),g=N.useRef(0),x=N.useRef(null),v=N.useCallback(function(T,C){if(x.current!==null){var S=x.current,j=S.scrollTop,L=S.scrollHeight,P=S.clientHeight,k=x.current,U=C>0,Q=L-P-j,K=!1;Q>C&&h.current&&(u&&u(T),h.current=!1),U&&m.current&&(f&&f(T),m.current=!1),U&&C>Q?(c&&!h.current&&c(T),k.scrollTop=L,K=!0,h.current=!0):!U&&-C>j&&(d&&!m.current&&d(T),k.scrollTop=0,K=!0,m.current=!0),K&&function(H){H.cancelable&&H.preventDefault(),H.stopPropagation()}(T)}},[c,u,d,f]),y=N.useCallback(function(T){v(T,T.deltaY)},[v]),w=N.useCallback(function(T){g.current=T.changedTouches[0].clientY},[]),_=N.useCallback(function(T){var C=g.current-T.changedTouches[0].clientY;v(T,C)},[v]),F=N.useCallback(function(T){if(T){var C=!!ect&&{passive:!1};T.addEventListener("wheel",y,C),T.addEventListener("touchstart",w,C),T.addEventListener("touchmove",_,C)}},[_,w,y]),B=N.useCallback(function(T){T&&(T.removeEventListener("wheel",y,!1),T.removeEventListener("touchstart",w,!1),T.removeEventListener("touchmove",_,!1))},[_,w,y]);return N.useEffect(function(){if(l){var T=x.current;return F(T),function(){B(T)}}},[l,F,B]),function(T){x.current=T}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(o){var l=o.isEnabled,c=o.accountForScrollbars,u=c===void 0||c,d=N.useRef({}),f=N.useRef(null),h=N.useCallback(function(g){if(GX){var x=document.body,v=x&&x.style;if(u&&UX.forEach(function(F){var B=v&&v[F];d.current[F]=B}),u&&Fy<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,_=window.innerWidth-w+y||0;Object.keys(QX).forEach(function(F){var B=QX[F];v&&(v[F]=B)}),v&&(v.paddingRight="".concat(_,"px"))}x&&$X()&&(x.addEventListener("touchmove",HX,Zx),g&&(g.addEventListener("touchstart",zX,Zx),g.addEventListener("touchmove",VX,Zx))),Fy+=1}},[u]),m=N.useCallback(function(g){if(GX){var x=document.body,v=x&&x.style;Fy=Math.max(Fy-1,0),u&&Fy<1&&UX.forEach(function(y){var w=d.current[y];v&&(v[y]=w)}),x&&$X()&&(x.removeEventListener("touchmove",HX,Zx),g&&(g.removeEventListener("touchstart",zX,Zx),g.removeEventListener("touchmove",VX,Zx)))}},[u]);return N.useEffect(function(){if(l){var g=f.current;return h(g),function(){m(g)}}},[l,h,m]),function(g){f.current=g}}({isEnabled:r});return Fr(N.Fragment,null,r&&Fr("div",{onClick:Ict,css:Fct}),t(function(o){a(o),s(o)}))}var Dct={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Pct=function(e){var t=e.name,r=e.onFocus;return Fr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Dct,value:"",onChange:function(){}})};function vD(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function ufe(){return vD(/^Mac/i)}function Rct(){return vD(/^iPhone/i)||vD(/^iPad/i)||ufe()&&navigator.maxTouchPoints>1}var Lct,Mct={clearIndicator:Act,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,o=a.borderRadius;return Sr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:fct,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return Sr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Sr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,o=a.colors;return Sr(Sr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},vct),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,o=a.spacing.baseUnit;return Sr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*o})},loadingMessage:lct,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,o=a.spacing,l=a.colors;return Sr((Sv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),Sv(r,"position","absolute"),Sv(r,"width","100%"),Sv(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Sr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return Sr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return Sr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,o=e.isFocused;return Sr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:oct,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,o=s.spacing,l=s.colors;return Sr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?l.primary:n?l.primary25:"transparent",color:r?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?l.primary:l.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return Sr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return Sr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return Sr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},c6={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Uct={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:FX(),captureMenuScroll:!FX(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Sr({ignoreCase:!0,ignoreAccents:!0,stringify:jct,trim:!0,matchFrom:"any"},Lct),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,o=r.trim,l=r.matchFrom,c=o?MX(t):t,u=o?MX(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=kct(c),u=cfe(u)),l==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function qX(e,t,r,n){return{type:"option",data:t,isDisabled:ffe(e,t,r),isSelected:Afe(e,t,r),label:dfe(e,t),value:ZS(e,t),index:n}}function $C(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(o,l){return qX(e,o,t,l)}).filter(function(o){return XX(e,o)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=qX(e,r,t,n);return XX(e,s)?s:void 0}).filter(tct)}function KX(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,eU(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function WX(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,eU(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function XX(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,o=t.label,l=t.value;return(!mfe(e)||!s)&&hfe(e,{label:o,value:l,data:a},n)}var u6=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},dfe=function(e,t){return e.getOptionLabel(t)},ZS=function(e,t){return e.getOptionValue(t)};function ffe(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function Afe(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=ZS(e,t);return r.some(function(a){return ZS(e,a)===n})}function hfe(e,t,r){return!e.filterOption||e.filterOption(t,r)}var mfe=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Qct=1,pfe=function(e){(function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),l&&cD(o,l)})(s,N.Component);var t,r,n,a=hlt(s);function s(o){var l;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(l=a.call(this,o)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},l.blockOptionHover=!1,l.isComposing=!1,l.commonProps=void 0,l.initialTouchX=0,l.initialTouchY=0,l.openAfterFocus=!1,l.scrollToFocusedOptionOnUpdate=!1,l.userIsDragging=void 0,l.isAppleDevice=ufe()||Rct(),l.controlRef=null,l.getControlRef=function(f){l.controlRef=f},l.focusedOptionRef=null,l.getFocusedOptionRef=function(f){l.focusedOptionRef=f},l.menuListRef=null,l.getMenuListRef=function(f){l.menuListRef=f},l.inputRef=null,l.getInputRef=function(f){l.inputRef=f},l.focus=l.focusInput,l.blur=l.blurInput,l.onChange=function(f,h){var m=l.props,g=m.onChange,x=m.name;h.name=x,l.ariaOnChange(f,h),g(f,h)},l.setValue=function(f,h,m){var g=l.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;l.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(l.setState({inputIsHiddenAfterUpdate:!v}),l.onMenuClose()),l.setState({clearFocusValueOnUpdate:!0}),l.onChange(f,{action:h,option:m})},l.selectOption=function(f){var h=l.props,m=h.blurInputOnSelect,g=h.isMulti,x=h.name,v=l.state.selectValue,y=g&&l.isOptionSelected(f,v),w=l.isOptionDisabled(f,v);if(y){var _=l.getOptionValue(f);l.setValue(v.filter(function(F){return l.getOptionValue(F)!==_}),"deselect-option",f)}else{if(w)return void l.ariaOnChange(f,{action:"select-option",option:f,name:x});g?l.setValue([].concat(eU(v),[f]),"select-option",f):l.setValue(f,"select-option")}m&&l.blurInput()},l.removeValue=function(f){var h=l.props.isMulti,m=l.state.selectValue,g=l.getOptionValue(f),x=m.filter(function(y){return l.getOptionValue(y)!==g}),v=zC(h,x,x[0]||null);l.onChange(v,{action:"remove-value",removedValue:f}),l.focusInput()},l.clearValue=function(){var f=l.state.selectValue;l.onChange(zC(l.props.isMulti,[],null),{action:"clear",removedValues:f})},l.popValue=function(){var f=l.props.isMulti,h=l.state.selectValue,m=h[h.length-1],g=h.slice(0,h.length-1),x=zC(f,g,g[0]||null);l.onChange(x,{action:"pop-value",removedValue:m})},l.getFocusedOptionId=function(f){return u6(l.state.focusableOptionsWithIds,f)},l.getFocusableOptionsWithIds=function(){return WX($C(l.props,l.state.selectValue),l.getElementId("option"))},l.getValue=function(){return l.state.selectValue},l.cx=function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];return Ylt.apply(void 0,[l.props.classNamePrefix].concat(h))},l.getOptionLabel=function(f){return dfe(l.props,f)},l.getOptionValue=function(f){return ZS(l.props,f)},l.getStyles=function(f,h){var m=l.props.unstyled,g=Mct[f](h,m);g.boxSizing="border-box";var x=l.props.styles[f];return x?x(g,h):g},l.getClassNames=function(f,h){var m,g;return(m=(g=l.props.classNames)[f])===null||m===void 0?void 0:m.call(g,h)},l.getElementId=function(f){return"".concat(l.state.instancePrefix,"-").concat(f)},l.getComponents=function(){return f=l.props,Sr(Sr({},wct),f.components);var f},l.buildCategorizedOptions=function(){return $C(l.props,l.state.selectValue)},l.getCategorizedOptions=function(){return l.props.menuIsOpen?l.buildCategorizedOptions():[]},l.buildFocusableOptions=function(){return KX(l.buildCategorizedOptions())},l.getFocusableOptions=function(){return l.props.menuIsOpen?l.buildFocusableOptions():[]},l.ariaOnChange=function(f,h){l.setState({ariaSelection:Sr({value:f},h)})},l.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),l.focusInput())},l.onMenuMouseMove=function(f){l.blockOptionHover=!1},l.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=l.props.openMenuOnClick;l.state.isFocused?l.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&l.onMenuClose():h&&l.openMenu("first"):(h&&(l.openAfterFocus=!0),l.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},l.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||l.props.isDisabled)){var h=l.props,m=h.isMulti,g=h.menuIsOpen;l.focusInput(),g?(l.setState({inputIsHiddenAfterUpdate:!m}),l.onMenuClose()):l.openMenu("first"),f.preventDefault()}},l.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(l.clearValue(),f.preventDefault(),l.openAfterFocus=!1,f.type==="touchend"?l.focusInput():setTimeout(function(){return l.focusInput()}))},l.onScroll=function(f){typeof l.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&bj(f.target)&&l.props.onMenuClose():typeof l.props.closeMenuOnScroll=="function"&&l.props.closeMenuOnScroll(f)&&l.props.onMenuClose()},l.onCompositionStart=function(){l.isComposing=!0},l.onCompositionEnd=function(){l.isComposing=!1},l.onTouchStart=function(f){var h=f.touches,m=h&&h.item(0);m&&(l.initialTouchX=m.clientX,l.initialTouchY=m.clientY,l.userIsDragging=!1)},l.onTouchMove=function(f){var h=f.touches,m=h&&h.item(0);if(m){var g=Math.abs(m.clientX-l.initialTouchX),x=Math.abs(m.clientY-l.initialTouchY);l.userIsDragging=g>5||x>5}},l.onTouchEnd=function(f){l.userIsDragging||(l.controlRef&&!l.controlRef.contains(f.target)&&l.menuListRef&&!l.menuListRef.contains(f.target)&&l.blurInput(),l.initialTouchX=0,l.initialTouchY=0)},l.onControlTouchEnd=function(f){l.userIsDragging||l.onControlMouseDown(f)},l.onClearIndicatorTouchEnd=function(f){l.userIsDragging||l.onClearIndicatorMouseDown(f)},l.onDropdownIndicatorTouchEnd=function(f){l.userIsDragging||l.onDropdownIndicatorMouseDown(f)},l.handleInputChange=function(f){var h=l.props.inputValue,m=f.currentTarget.value;l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange(m,{action:"input-change",prevInputValue:h}),l.props.menuIsOpen||l.onMenuOpen()},l.onInputFocus=function(f){l.props.onFocus&&l.props.onFocus(f),l.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(l.openAfterFocus||l.props.openMenuOnFocus)&&l.openMenu("first"),l.openAfterFocus=!1},l.onInputBlur=function(f){var h=l.props.inputValue;l.menuListRef&&l.menuListRef.contains(document.activeElement)?l.inputRef.focus():(l.props.onBlur&&l.props.onBlur(f),l.onInputChange("",{action:"input-blur",prevInputValue:h}),l.onMenuClose(),l.setState({focusedValue:null,isFocused:!1}))},l.onOptionHover=function(f){if(!l.blockOptionHover&&l.state.focusedOption!==f){var h=l.getFocusableOptions().indexOf(f);l.setState({focusedOption:f,focusedOptionId:h>-1?l.getFocusedOptionId(f):null})}},l.shouldHideSelectedOptions=function(){return mfe(l.props)},l.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),l.focus()},l.onKeyDown=function(f){var h=l.props,m=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,v=h.inputValue,y=h.isClearable,w=h.isDisabled,_=h.menuIsOpen,F=h.onKeyDown,B=h.tabSelectsValue,T=h.openMenuOnFocus,C=l.state,S=C.focusedOption,j=C.focusedValue,L=C.selectValue;if(!(w||typeof F=="function"&&(F(f),f.defaultPrevented))){switch(l.blockOptionHover=!0,f.key){case"ArrowLeft":if(!m||v)return;l.focusValue("previous");break;case"ArrowRight":if(!m||v)return;l.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(j)l.removeValue(j);else{if(!g)return;m?l.popValue():y&&l.clearValue()}break;case"Tab":if(l.isComposing||f.shiftKey||!_||!B||!S||T&&l.isOptionSelected(S,L))return;l.selectOption(S);break;case"Enter":if(f.keyCode===229)break;if(_){if(!S||l.isComposing)return;l.selectOption(S);break}return;case"Escape":_?(l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange("",{action:"menu-close",prevInputValue:v}),l.onMenuClose()):y&&x&&l.clearValue();break;case" ":if(v)return;if(!_){l.openMenu("first");break}if(!S)return;l.selectOption(S);break;case"ArrowUp":_?l.focusOption("up"):l.openMenu("last");break;case"ArrowDown":_?l.focusOption("down"):l.openMenu("first");break;case"PageUp":if(!_)return;l.focusOption("pageup");break;case"PageDown":if(!_)return;l.focusOption("pagedown");break;case"Home":if(!_)return;l.focusOption("first");break;case"End":if(!_)return;l.focusOption("last");break;default:return}f.preventDefault()}},l.state.instancePrefix="react-select-"+(l.props.instanceId||++Qct),l.state.selectValue=BX(o.value),o.menuIsOpen&&l.state.selectValue.length){var c=l.getFocusableOptionsWithIds(),u=l.buildFocusableOptions(),d=u.indexOf(l.state.selectValue[0]);l.state.focusableOptionsWithIds=c,l.state.focusedOption=u[d],l.state.focusedOptionId=u6(c,u[d])}return l}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&IX(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var l=this.props,c=l.isDisabled,u=l.menuIsOpen,d=this.state.isFocused;(d&&!c&&o.isDisabled||d&&u&&!o.menuIsOpen)&&this.focusInput(),d&&c&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!o.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(IX(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,l){this.props.onInputChange(o,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var l=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=o==="first"?0:f.length-1;if(!this.props.isMulti){var m=f.indexOf(u[0]);m>-1&&(h=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(o){var l=this.state,c=l.selectValue,u=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(o){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),o==="up"?d=f>0?f-1:u.length-1:o==="down"?d=(f+1)%u.length:o==="pageup"?(d=f-l)<0&&(d=0):o==="pagedown"?(d=f+l)>u.length-1&&(d=u.length-1):o==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(c6):Sr(Sr({},c6),this.props.theme):c6}},{key:"getCommonProps",value:function(){var o=this.clearValue,l=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:o,cx:l,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:f,selectProps:m,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,l=o.isClearable,c=o.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(o,l){return ffe(this.props,o,l)}},{key:"isOptionSelected",value:function(o,l){return Afe(this.props,o,l)}},{key:"filterOption",value:function(o,l){return hfe(this.props,o,l)}},{key:"formatOptionLabel",value:function(o,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(o,{context:l,inputValue:c,selectValue:u})}return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,l=o.isDisabled,c=o.isSearchable,u=o.inputId,d=o.inputValue,f=o.tabIndex,h=o.form,m=o.menuIsOpen,g=o.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,w=v.ariaSelection,_=this.commonProps,F=u||this.getElementId("input"),B=Sr(Sr(Sr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?N.createElement(x,Ur({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:F,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},B)):N.createElement(Tct,Ur({id:F,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:YS,onFocus:this.onInputFocus,disabled:l,tabIndex:f,inputMode:"none",form:h,value:""},B))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,l=this.getComponents(),c=l.MultiValue,u=l.MultiValueContainer,d=l.MultiValueLabel,f=l.MultiValueRemove,h=l.SingleValue,m=l.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,_=x.inputValue,F=x.placeholder,B=this.state,T=B.selectValue,C=B.focusedValue,S=B.isFocused;if(!this.hasValue()||!v)return _?null:N.createElement(m,Ur({},g,{key:"placeholder",isDisabled:y,isFocused:S,innerProps:{id:this.getElementId("placeholder")}}),F);if(w)return T.map(function(L,P){var k=L===C,U="".concat(o.getOptionLabel(L),"-").concat(o.getOptionValue(L));return N.createElement(c,Ur({},g,{components:{Container:u,Label:d,Remove:f},isFocused:k,isDisabled:y,key:U,index:P,removeProps:{onClick:function(){return o.removeValue(L)},onTouchEnd:function(){return o.removeValue(L)},onMouseDown:function(Q){Q.preventDefault()}},data:L}),o.formatOptionLabel(L,"value"))});if(_)return null;var j=T[0];return N.createElement(h,Ur({},g,{data:j,isDisabled:y}),this.formatOptionLabel(j,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents().ClearIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!o||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return N.createElement(o,Ur({},l,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents().LoadingIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return o&&d?N.createElement(o,Ur({},l,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),l=o.DropdownIndicator,c=o.IndicatorSeparator;if(!l||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return N.createElement(c,Ur({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents().DropdownIndicator;if(!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return N.createElement(o,Ur({},l,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var o=this,l=this.getComponents(),c=l.Group,u=l.GroupHeading,d=l.Menu,f=l.MenuList,h=l.MenuPortal,m=l.LoadingMessage,g=l.NoOptionsMessage,x=l.Option,v=this.commonProps,y=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,F=w.inputValue,B=w.isLoading,T=w.loadingMessage,C=w.minMenuHeight,S=w.maxMenuHeight,j=w.menuIsOpen,L=w.menuPlacement,P=w.menuPosition,k=w.menuPortalTarget,U=w.menuShouldBlockScroll,Q=w.menuShouldScrollIntoView,K=w.noOptionsMessage,H=w.onMenuScrollToTop,q=w.onMenuScrollToBottom;if(!j)return null;var z,W=function(G,Y){var te=G.type,ae=G.data,oe=G.isDisabled,ie=G.isSelected,ue=G.label,Ce=G.value,ne=y===ae,Be=oe?void 0:function(){return o.onOptionHover(ae)},je=oe?void 0:function(){return o.selectOption(ae)},_e="".concat(o.getElementId("option"),"-").concat(Y),Ae={id:_e,onClick:je,onMouseMove:Be,onMouseOver:Be,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:ie};return N.createElement(x,Ur({},v,{innerProps:Ae,data:ae,isDisabled:oe,isSelected:ie,key:_e,label:ue,type:te,value:Ce,isFocused:ne,innerRef:ne?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(G.data,"menu"))};if(this.hasOptions())z=this.getCategorizedOptions().map(function(G){if(G.type==="group"){var Y=G.data,te=G.options,ae=G.index,oe="".concat(o.getElementId("group"),"-").concat(ae),ie="".concat(oe,"-heading");return N.createElement(c,Ur({},v,{key:oe,data:Y,options:te,Heading:u,headingProps:{id:ie,data:G.data},label:o.formatGroupLabel(G.data)}),G.options.map(function(ue){return W(ue,"".concat(ae,"-").concat(ue.index))}))}if(G.type==="option")return W(G,"".concat(G.index))});else if(B){var ee=T({inputValue:F});if(ee===null)return null;z=N.createElement(m,v,ee)}else{var X=K({inputValue:F});if(X===null)return null;z=N.createElement(g,v,X)}var O={minMenuHeight:C,maxMenuHeight:S,menuPlacement:L,menuPosition:P,menuShouldScrollIntoView:Q},R=N.createElement(sct,Ur({},v,O),function(G){var Y=G.ref,te=G.placerProps,ae=te.placement,oe=te.maxHeight;return N.createElement(d,Ur({},v,O,{innerRef:Y,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:B,placement:ae}),N.createElement(Oct,{captureEnabled:_,onTopArrive:H,onBottomArrive:q,lockEnabled:U},function(ie){return N.createElement(f,Ur({},v,{innerRef:function(ue){o.getMenuListRef(ue),ie(ue)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:o.getElementId("listbox")},isLoading:B,maxHeight:oe,focusedOption:y}),z)}))});return k||P==="fixed"?N.createElement(h,Ur({},v,{appendTo:k,controlElement:this.controlRef,menuPlacement:L,menuPosition:P}),R):R}},{key:"renderFormField",value:function(){var o=this,l=this.props,c=l.delimiter,u=l.isDisabled,d=l.isMulti,f=l.name,h=l.required,m=this.state.selectValue;if(h&&!this.hasValue()&&!u)return N.createElement(Pct,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=m.map(function(y){return o.getOptionValue(y)}).join(c);return N.createElement("input",{name:f,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,w){return N.createElement("input",{key:"i-".concat(w),name:f,type:"hidden",value:o.getOptionValue(y)})}):N.createElement("input",{name:f,type:"hidden",value:""});return N.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return N.createElement("input",{name:f,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,l=this.state,c=l.ariaSelection,u=l.focusedOption,d=l.focusedValue,f=l.isFocused,h=l.selectValue,m=this.getFocusableOptions();return N.createElement(_ct,Ur({},o,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),l=o.Control,c=o.IndicatorsContainer,u=o.SelectContainer,d=o.ValueContainer,f=this.props,h=f.className,m=f.id,g=f.isDisabled,x=f.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return N.createElement(u,Ur({},y,{className:h,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),N.createElement(l,Ur({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),N.createElement(d,Ur({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),N.createElement(c,Ur({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(o,l){var c=l.prevProps,u=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,f=l.ariaSelection,h=l.isFocused,m=l.prevWasFocused,g=l.instancePrefix,x=o.options,v=o.value,y=o.menuIsOpen,w=o.inputValue,_=o.isMulti,F=BX(v),B={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var T=y?function(U,Q){return KX($C(U,Q))}(o,F):[],C=y?WX($C(o,F),"".concat(g,"-option")):[],S=u?function(U,Q){var K=U.focusedValue,H=U.selectValue.indexOf(K);if(H>-1){if(Q.indexOf(K)>-1)return K;if(H<Q.length)return Q[H]}return null}(l,F):null,j=function(U,Q){var K=U.focusedOption;return K&&Q.indexOf(K)>-1?K:Q[0]}(l,T);B={selectValue:F,focusedOption:j,focusedOptionId:u6(C,j),focusableOptionsWithIds:C,focusedValue:S,clearFocusValueOnUpdate:!1}}var L=d!=null&&o!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},P=f,k=h&&m;return h&&!k&&(P={value:zC(_,F,F[0]||null),options:F,action:"initial-input-focus"},k=!m),(f==null?void 0:f.action)==="initial-input-focus"&&(P=null),Sr(Sr(Sr({},B),L),{},{prevProps:o,ariaSelection:P,prevWasFocused:k})}}],r&&dX(t.prototype,r),n&&dX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();pfe.defaultProps=Uct;var Hct=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],Vct=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],lU=oa(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),zct=oa(function(e){var t=lU.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),gfe=oa(function(e){var t=lU.default;e.exports=function(r){var n=zct(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),$ct=oa(function(e){e.exports=function(t,r,n){return(r=gfe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){$ct(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,gfe(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var Gct=oa(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Gct(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var YX=oa(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),qct=oa(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),Kct=oa(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Wct=oa(function(e){var t=lU.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kct(r)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t){var r=qct();return function(){var n,a=YX(t);if(r){var s=YX(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Wct(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var bD=oa(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),Xct=oa(function(e){e.exports=function(t){if(Array.isArray(t))return bD(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Yct=oa(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),xfe=oa(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return bD(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bD(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),Jct=oa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t){return Xct(t)||Yct(t)||xfe(t)||Jct()},e.exports.__esModule=!0,e.exports.default=e.exports});var Zct=oa(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),eut=oa(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),tut=oa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){return Zct(t)||eut(t,r)||xfe(t,r)||tut()},e.exports.__esModule=!0,e.exports.default=e.exports});var rut=oa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=rut(t,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var nut=N.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,o=s!==void 0&&s,l=a.cacheOptions,c=l!==void 0&&l,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,m=a.filterOption,g=m===void 0?null:m,x=qf(a,Vct),v=x.inputValue,y=N.useRef(void 0),w=N.useRef(!1),_=qi(N.useState(Array.isArray(o)?o:void 0),2),F=_[0],B=_[1],T=qi(N.useState(v!==void 0?v:""),2),C=T[0],S=T[1],j=qi(N.useState(o===!0),2),L=j[0],P=j[1],k=qi(N.useState(void 0),2),U=k[0],Q=k[1],K=qi(N.useState([]),2),H=K[0],q=K[1],z=qi(N.useState(!1),2),W=z[0],ee=z[1],X=qi(N.useState({}),2),O=X[0],R=X[1],G=qi(N.useState(void 0),2),Y=G[0],te=G[1],ae=qi(N.useState(void 0),2),oe=ae[0],ie=ae[1];c!==oe&&(R({}),ie(c)),o!==Y&&(B(Array.isArray(o)?o:void 0),te(o)),N.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var ue=N.useCallback(function(Be,je){if(!u)return je();var _e=u(Be,je);_e&&typeof _e.then=="function"&&_e.then(je,function(){return je()})},[u]);N.useEffect(function(){o===!0&&ue(C,function(Be){w.current&&(B(Be||[]),P(!!y.current))})},[]);var Ce=N.useCallback(function(Be,je){var _e=function(ve,Pe,Ue){if(Ue){var de=Ue(ve,Pe);if(typeof de=="string")return de}return ve}(Be,je,h);if(!_e)return y.current=void 0,S(""),Q(""),q([]),P(!1),void ee(!1);if(c&&O[_e])S(_e),Q(_e),q(O[_e]),P(!1),ee(!1);else{var Ae=y.current={};S(_e),P(!0),ee(!U),ue(_e,function(ve){w&&Ae===y.current&&(y.current=void 0,P(!1),Q(_e),q(ve||[]),ee(!1),R(ve?Sr(Sr({},O),{},Sv({},_e,ve)):O))})}},[c,ue,U,O,h]),ne=W?[]:C&&U?H:F||[];return Sr(Sr({},x),{},{options:ne,isLoading:L||f,onInputChange:Ce,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,o=s===void 0?"":s,l=a.defaultMenuIsOpen,c=l!==void 0&&l,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,m=a.onChange,g=a.onInputChange,x=a.onMenuClose,v=a.onMenuOpen,y=a.value,w=qf(a,Hct),_=qi(N.useState(f!==void 0?f:o),2),F=_[0],B=_[1],T=qi(N.useState(h!==void 0?h:c),2),C=T[0],S=T[1],j=qi(N.useState(y!==void 0?y:d),2),L=j[0],P=j[1],k=N.useCallback(function(W,ee){typeof m=="function"&&m(W,ee),P(W)},[m]),U=N.useCallback(function(W,ee){var X;typeof g=="function"&&(X=g(W,ee)),B(X!==void 0?X:W)},[g]),Q=N.useCallback(function(){typeof v=="function"&&v(),S(!0)},[v]),K=N.useCallback(function(){typeof x=="function"&&x(),S(!1)},[x]),H=f!==void 0?f:F,q=h!==void 0?h:C,z=y!==void 0?y:L;return Sr(Sr({},w),{},{inputValue:H,menuIsOpen:q,onChange:k,onInputChange:U,onMenuClose:K,onMenuOpen:Q,value:z})}(r);return N.createElement(pfe,Ur({ref:t},n))}),aut=nut,sut=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var o=s[a];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r},kv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(kv||(kv={}));class Vp{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:o,libraries:l=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=o,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=m,Vp.instance){if(!sut(this.options,Vp.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Vp.instance.options)}`);return Vp.instance}Vp.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?kv.FAILURE:this.done?kv.SUCCESS:this.loading?kv.LOADING:kv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var iut=function(e,t,r){var n,a=e.bounds,s=e.location,o=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),l=Ag({input:t},o);return r&&(l.sessionToken=r),a&&(l.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var m=arguments[u],g=0,x=m.length;g<x;g++,h++)f[h]=m[g];return f}([void 0],a)))),s&&(l.location=new google.maps.LatLng(s)),l},out=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,o=e.withSessionToken,l=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=N.useRef(null),m=N.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,v=N.useRef(!1),y=N.useRef(null),w=N.useRef(!1),_=N.useRef(c);_.current=c;var F=N.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,m.current=[],y.current=null,v.current=!1},[]);N.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var B=N.useCallback(function(){for(var C=[],S=0;S<arguments.length;S++)C[S]=arguments[S];m.current=C,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(_.current.apply(_,C),v.current=!0),y.current=setTimeout(function(){var j=!0;g&&v.current&&(j=!1),F(),!w.current&&x&&j&&_.current.apply(_,C)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var j=m.current;F(),w.current||_.current.apply(null,j)},f))},[f,u,F,g,x]),T=N.useCallback(function(){y.current&&(_.current.apply(null,m.current),F())},[F]);return[B,F,T]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=Ag({},t);a.getPlacePredictions(iut(d,c,o&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return l},JX=N.forwardRef(function(e,t){var r,n,a,s,o,l,c,u,d=function(x){var v=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,_=N.useState(void 0),F=_[0],B=_[1],T=N.useState(void 0),C=T[0],S=T[1],j=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");B(new window.google.maps.places.AutocompleteService),S(new google.maps.places.AutocompleteSessionToken)};return N.useEffect(function(){v?dlt(void 0,void 0,void 0,function(){var L;return flt(this,function(P){switch(P.label){case 0:if(!v)return[2];P.label=1;case 1:return P.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Vp(Ag({apiKey:v},Ag({libraries:["places"]},y))).load()];case 2:P.sent(),P.label=3;case 3:return j(),[3,5];case 4:return L=P.sent(),typeof w=="function"&&w(L),[3,5];case 5:return[2]}})}):j()},[]),{placesService:F,sessionToken:C,setSessionToken:S}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,m=d.setSessionToken,g=out({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(o=e.debounce)!==null&&o!==void 0?o:300,minLengthAutocomplete:(l=e.minLengthAutocomplete)!==null&&l!==void 0?l:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return N.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[h]),st.createElement(aut,Ag({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yD=function(e,t){return yD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},yD(e,t)};function rf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");yD(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var wD=function(){return wD=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},wD.apply(this,arguments)};function xl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,[])).next())})}function Go(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function GC(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var Qh=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),yj=function(e,t){return Qh.fromClientRect(e,t.getBoundingClientRect())},lut=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new Qh(0,0,n,a)},wj=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Ks=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},ZX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cut=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qC=0;qC<ZX.length;qC++)cut[ZX.charCodeAt(qC)]=qC;var eY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var KC=0;KC<eY.length;KC++)aw[eY.charCodeAt(KC)]=KC;var uut=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=aw[e.charCodeAt(n)],o=aw[e.charCodeAt(n+1)],l=aw[e.charCodeAt(n+2)],c=aw[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},dut=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},fut=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},pg=5,cU=11,d6=2,Aut=cU-pg,vfe=65536>>pg,hut=1<<pg,f6=hut-1,mut=1024>>pg,put=vfe+mut,gut=put,xut=32,vut=gut+xut,but=65536>>cU,yut=1<<Aut,wut=yut-1,tY=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Eut=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Nut=function(e,t){var r=uut(e),n=Array.isArray(r)?fut(r):new Uint32Array(r),a=Array.isArray(r)?dut(r):new Uint16Array(r),s=24,o=tY(a,s/2,n[4]/2),l=n[5]===2?tY(a,(s+n[4])/2):Eut(n,Math.ceil((s+n[4])/4));return new Cut(n[0],n[1],n[2],n[3],o,l)},Cut=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>pg],r=(r<<d6)+(t&f6),this.data[r];if(t<=65535)return r=this.index[vfe+(t-55296>>pg)],r=(r<<d6)+(t&f6),this.data[r];if(t<this.highStart)return r=vut-but+(t>>cU),r=this.index[r],r+=t>>pg&wut,r=this.index[r],r=(r<<d6)+(t&f6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),rY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_ut=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var WC=0;WC<rY.length;WC++)_ut[rY.charCodeAt(WC)]=WC;var Sut="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",nY=50,kut=1,bfe=2,yfe=3,jut=4,But=5,aY=7,wfe=8,sY=9,lm=10,ED=11,iY=12,ND=13,Tut=14,sw=15,CD=16,XC=17,Oy=18,Iut=19,oY=20,_D=21,Dy=22,A6=23,ev=24,Oc=25,iw=26,ow=27,tv=28,Fut=29,zp=30,Out=31,YC=32,JC=33,SD=34,kD=35,jD=36,V2=37,BD=38,Z5=39,e_=40,h6=41,Efe=42,Dut=43,Put=[9001,65288],Nfe="!",kn="×",ZC="÷",TD=Nut(Sut),XA=[zp,jD],ID=[kut,bfe,yfe,But],Cfe=[lm,wfe],lY=[ow,iw],Rut=ID.concat(Cfe),cY=[BD,Z5,e_,SD,kD],Lut=[sw,ND],Mut=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,o){var l=TD.get(s);if(l>nY?(a.push(!0),l-=nY):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(CD);if(l===jut||l===ED){if(o===0)return n.push(o),r.push(zp);var c=r[o-1];return Rut.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(zp))}if(n.push(o),l===Out)return r.push(t==="strict"?_D:V2);if(l===Efe||l===Fut)return r.push(zp);if(l===Dut)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(V2):r.push(zp);r.push(l)}),[n,r,a]},m6=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===t)return!0;if(o!==lm)break}if(a===lm)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===t)return!0;if(o!==lm)break}if(l!==lm)break}return!1},uY=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===lm)r--;else return n}return 0},Uut=function(e,t,r,n,a){if(r[n]===0)return kn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return kn;var o=s-1,l=s+1,c=t[s],u=o>=0?t[o]:0,d=t[l];if(c===bfe&&d===yfe)return kn;if(ID.indexOf(c)!==-1)return Nfe;if(ID.indexOf(d)!==-1||Cfe.indexOf(d)!==-1)return kn;if(uY(s,t)===wfe)return ZC;if(TD.get(e[s])===ED||(c===YC||c===JC)&&TD.get(e[l])===ED||c===aY||d===aY||c===sY||[lm,ND,sw].indexOf(c)===-1&&d===sY||[XC,Oy,Iut,ev,tv].indexOf(d)!==-1||uY(s,t)===Dy||m6(A6,Dy,s,t)||m6([XC,Oy],_D,s,t)||m6(iY,iY,s,t))return kn;if(c===lm)return ZC;if(c===A6||d===A6)return kn;if(d===CD||c===CD)return ZC;if([ND,sw,_D].indexOf(d)!==-1||c===Tut||u===jD&&Lut.indexOf(c)!==-1||c===tv&&d===jD||d===oY||XA.indexOf(d)!==-1&&c===Oc||XA.indexOf(c)!==-1&&d===Oc||c===ow&&[V2,YC,JC].indexOf(d)!==-1||[V2,YC,JC].indexOf(c)!==-1&&d===iw||XA.indexOf(c)!==-1&&lY.indexOf(d)!==-1||lY.indexOf(c)!==-1&&XA.indexOf(d)!==-1||[ow,iw].indexOf(c)!==-1&&(d===Oc||[Dy,sw].indexOf(d)!==-1&&t[l+1]===Oc)||[Dy,sw].indexOf(c)!==-1&&d===Oc||c===Oc&&[Oc,tv,ev].indexOf(d)!==-1)return kn;if([Oc,tv,ev,XC,Oy].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===Oc)return kn;if([tv,ev].indexOf(h)!==-1)f--;else break}if([ow,iw].indexOf(d)!==-1)for(var f=[XC,Oy].indexOf(c)!==-1?o:s;f>=0;){var h=t[f];if(h===Oc)return kn;if([tv,ev].indexOf(h)!==-1)f--;else break}if(BD===c&&[BD,Z5,SD,kD].indexOf(d)!==-1||[Z5,SD].indexOf(c)!==-1&&[Z5,e_].indexOf(d)!==-1||[e_,kD].indexOf(c)!==-1&&d===e_||cY.indexOf(c)!==-1&&[oY,iw].indexOf(d)!==-1||cY.indexOf(d)!==-1&&c===ow||XA.indexOf(c)!==-1&&XA.indexOf(d)!==-1||c===ev&&XA.indexOf(d)!==-1||XA.concat(Oc).indexOf(c)!==-1&&d===Dy&&Put.indexOf(e[l])===-1||XA.concat(Oc).indexOf(d)!==-1&&c===Oy)return kn;if(c===h6&&d===h6){for(var m=r[s],g=1;m>0&&(m--,t[m]===h6);)g++;if(g%2!==0)return kn}return c===YC&&d===JC?kn:ZC},Qut=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Mut(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(l){return[Oc,zp,Efe].indexOf(l)!==-1?V2:l}));var o=t.wordBreak==="keep-all"?s.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,o]},Hut=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===Nfe,this.start=n,this.end=a}return e.prototype.slice=function(){return Ks.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Vut=function(e,t){var r=wj(e),n=Qut(r,t),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=kn;u<l&&(d=Uut(r,s,a,++u,o))===kn;);if(d!==kn||u===l){var f=new Hut(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},zut=1,$ut=2,LE=4,dY=8,ek=10,fY=47,Lw=92,Gut=9,qut=32,e5=34,Py=61,Kut=35,Wut=36,Xut=37,t5=39,r5=40,Ry=41,Yut=95,tc=45,Jut=33,Zut=60,edt=62,tdt=64,rdt=91,ndt=93,adt=61,sdt=123,n5=63,idt=125,AY=124,odt=126,ldt=128,hY=65533,p6=42,Zp=43,cdt=44,udt=58,ddt=59,z2=46,fdt=0,Adt=8,hdt=11,mdt=14,pdt=31,gdt=127,Pf=-1,_fe=48,Sfe=97,kfe=101,xdt=102,vdt=117,bdt=122,jfe=65,Bfe=69,Tfe=70,ydt=85,wdt=90,Yo=function(e){return e>=_fe&&e<=57},Edt=function(e){return e>=55296&&e<=57343},rv=function(e){return Yo(e)||e>=jfe&&e<=Tfe||e>=Sfe&&e<=xdt},Ndt=function(e){return e>=Sfe&&e<=bdt},Cdt=function(e){return e>=jfe&&e<=wdt},_dt=function(e){return Ndt(e)||Cdt(e)},Sdt=function(e){return e>=ldt},a5=function(e){return e===ek||e===Gut||e===qut},tk=function(e){return _dt(e)||Sdt(e)||e===Yut},mY=function(e){return tk(e)||Yo(e)||e===tc},kdt=function(e){return e>=fdt&&e<=Adt||e===hdt||e>=mdt&&e<=pdt||e===gdt},K0=function(e,t){return e!==Lw?!1:t!==ek},s5=function(e,t,r){return e===tc?tk(t)||K0(t,r):tk(e)?!0:!!(e===Lw&&K0(e,t))},g6=function(e,t,r){return e===Zp||e===tc?Yo(t)?!0:t===z2&&Yo(r):Yo(e===z2?t:e)},jdt=function(e){var t=0,r=1;(e[t]===Zp||e[t]===tc)&&(e[t]===tc&&(r=-1),t++);for(var n=[];Yo(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Ks.apply(void 0,n),10):0;e[t]===z2&&t++;for(var s=[];Yo(e[t]);)s.push(e[t++]);var o=s.length,l=o?parseInt(Ks.apply(void 0,s),10):0;(e[t]===Bfe||e[t]===kfe)&&t++;var c=1;(e[t]===Zp||e[t]===tc)&&(e[t]===tc&&(c=-1),t++);for(var u=[];Yo(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Ks.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},Bdt={type:2},Tdt={type:3},Idt={type:4},Fdt={type:13},Odt={type:8},Ddt={type:21},Pdt={type:9},Rdt={type:10},Ldt={type:11},Mdt={type:12},Udt={type:14},i5={type:23},Qdt={type:1},Hdt={type:25},Vdt={type:24},zdt={type:26},$dt={type:27},Gdt={type:28},qdt={type:29},Kdt={type:31},FD={type:32},Ife=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(wj(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==FD;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case e5:return this.consumeStringToken(e5);case Kut:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(mY(r)||K0(n,a)){var s=s5(r,n,a)?$ut:zut,o=this.consumeName();return{type:5,value:o,flags:s}}break;case Wut:if(this.peekCodePoint(0)===Py)return this.consumeCodePoint(),Fdt;break;case t5:return this.consumeStringToken(t5);case r5:return Bdt;case Ry:return Tdt;case p6:if(this.peekCodePoint(0)===Py)return this.consumeCodePoint(),Udt;break;case Zp:if(g6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case cdt:return Idt;case tc:var l=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(g6(l,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(s5(l,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===tc&&u===edt)return this.consumeCodePoint(),this.consumeCodePoint(),Vdt;break;case z2:if(g6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case fY:if(this.peekCodePoint(0)===p6)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===p6&&(d=this.consumeCodePoint(),d===fY))return this.consumeToken();if(d===Pf)return this.consumeToken()}break;case udt:return zdt;case ddt:return $dt;case Zut:if(this.peekCodePoint(0)===Jut&&this.peekCodePoint(1)===tc&&this.peekCodePoint(2)===tc)return this.consumeCodePoint(),this.consumeCodePoint(),Hdt;break;case tdt:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),m=this.peekCodePoint(2);if(s5(f,h,m)){var o=this.consumeName();return{type:7,value:o}}break;case rdt:return Gdt;case Lw:if(K0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case ndt:return qdt;case adt:if(this.peekCodePoint(0)===Py)return this.consumeCodePoint(),Odt;break;case sdt:return Ldt;case idt:return Mdt;case vdt:case ydt:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===Zp&&(rv(x)||x===n5)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case AY:if(this.peekCodePoint(0)===Py)return this.consumeCodePoint(),Pdt;if(this.peekCodePoint(0)===AY)return this.consumeCodePoint(),Ddt;break;case odt:if(this.peekCodePoint(0)===Py)return this.consumeCodePoint(),Rdt;break;case Pf:return FD}return a5(t)?(this.consumeWhiteSpace(),Kdt):Yo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):tk(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Ks(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();rv(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===n5&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Ks.apply(void 0,t.map(function(c){return c===n5?_fe:c})),16),s=parseInt(Ks.apply(void 0,t.map(function(c){return c===n5?Tfe:c})),16);return{type:30,start:a,end:s}}var o=parseInt(Ks.apply(void 0,t),16);if(this.peekCodePoint(0)===tc&&rv(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];rv(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Ks.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===r5?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===r5?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Pf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===t5||r===e5){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Pf||this.peekCodePoint(0)===Ry)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),i5)}for(;;){var a=this.consumeCodePoint();if(a===Pf||a===Ry)return{type:22,value:Ks.apply(void 0,t)};if(a5(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Pf||this.peekCodePoint(0)===Ry?(this.consumeCodePoint(),{type:22,value:Ks.apply(void 0,t)}):(this.consumeBadUrlRemnants(),i5);if(a===e5||a===t5||a===r5||kdt(a))return this.consumeBadUrlRemnants(),i5;if(a===Lw)if(K0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),i5;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;a5(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Ry||t===Pf)return;K0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Ks.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===Pf||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===ek)return this._value.splice(0,n),Qdt;if(a===Lw){var s=this._value[n+1];s!==Pf&&s!==void 0&&(s===ek?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):K0(a,s)&&(r+=this.consumeStringSlice(n),r+=Ks(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=LE,n=this.peekCodePoint(0);for((n===Zp||n===tc)&&t.push(this.consumeCodePoint());Yo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===z2&&Yo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=dY;Yo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Bfe||n===kfe)&&((a===Zp||a===tc)&&Yo(s)||Yo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=dY;Yo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[jdt(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(s5(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===Xut?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(rv(t)){for(var r=Ks(t);rv(this.peekCodePoint(0))&&r.length<6;)r+=Ks(this.consumeCodePoint());a5(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Edt(n)||n>1114111?hY:n}return t===Pf?hY:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(mY(r))t+=Ks(r);else if(K0(r,this.peekCodePoint(0)))t+=Ks(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),Ffe=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new Ife;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||Xdt(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?FD:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),ME=function(e){return e.type===15},N1=function(e){return e.type===17},wa=function(e){return e.type===20},Wdt=function(e){return e.type===0},OD=function(e,t){return wa(e)&&e.value===t},Ofe=function(e){return e.type!==31},Mb=function(e){return e.type!==31&&e.type!==4},gA=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},Xdt=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},$m=function(e){return e.type===17||e.type===15},mi=function(e){return e.type===16||$m(e)},Dfe=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Co={type:17,number:0,flags:LE},uU={type:16,number:50,flags:LE},cm={type:16,number:100,flags:LE},lw=function(e,t,r){var n=e[0],a=e[1];return[Ra(n,t),Ra(typeof a<"u"?a:n,r)]},Ra=function(e,t){if(e.type===16)return e.number/100*t;if(ME(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},Pfe="deg",Rfe="grad",Lfe="rad",Mfe="turn",Ej={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case Pfe:return Math.PI*t.number/180;case Rfe:return Math.PI/200*t.number;case Lfe:return t.number;case Mfe:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},Ufe=function(e){return e.type===15&&(e.unit===Pfe||e.unit===Rfe||e.unit===Lfe||e.unit===Mfe)},Qfe=function(e){var t=e.filter(wa).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Co,Co];case"to top":case"bottom":return qu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Co,cm];case"to right":case"left":return qu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[cm,cm];case"to bottom":case"top":return qu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[cm,Co];case"to left":case"right":return qu(270)}return 0},qu=function(e){return Math.PI*e/180},Nm={name:"color",parse:function(e,t){if(t.type===18){var r=Ydt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return um(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return um(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return um(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return um(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var l=wh[t.value.toUpperCase()];if(typeof l<"u")return l}return wh.TRANSPARENT}},Cm=function(e){return(255&e)===0},Gi=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},um=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},pY=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},gY=function(e,t){var r=t.filter(Mb);if(r.length===3){var n=r.map(pY),a=n[0],s=n[1],o=n[2];return um(a,s,o,1)}if(r.length===4){var l=r.map(pY),a=l[0],s=l[1],o=l[2],c=l[3];return um(a,s,o,c)}return 0};function x6(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var xY=function(e,t){var r=t.filter(Mb),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?qu(n.number):Ej.parse(e,n))/(Math.PI*2),c=mi(a)?a.number/100:0,u=mi(s)?s.number/100:0,d=typeof o<"u"&&mi(o)?Ra(o,1):1;if(c===0)return um(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,m=x6(h,f,l+1/3),g=x6(h,f,l),x=x6(h,f,l-1/3);return um(m*255,g*255,x*255,d)},Ydt={hsl:xY,hsla:xY,rgb:gY,rgba:gY},Mw=function(e,t){return Nm.parse(e,Ffe.create(t).parseComponentValue())},wh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Jdt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Zdt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Nj=function(e,t){var r=Nm.parse(e,t[0]),n=t[1];return n&&mi(n)?{color:r,stop:n}:{color:r,stop:null}},vY=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=Co),n.stop===null&&(n.stop=cm);for(var a=[],s=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=Ra(l,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,h=a[u-1],m=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=m*g;u=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[v]/t),0)}})},eft=function(e,t,r){var n=t/2,a=r/2,s=Ra(e[0],t)-n,o=a-Ra(e[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},tft=function(e,t,r){var n=typeof e=="number"?e:eft(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},Bd=function(e,t){return Math.sqrt(e*e+t*t)},bY=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=Bd(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},rft=function(e,t,r,n,a){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=o=Math.min(Bd(t,r),Bd(t,r-a),Bd(t-n,r),Bd(t-n,r-a));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=bY(n,a,t,r,!0),u=c[0],d=c[1];s=Bd(u-t,(d-r)/l),o=l*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=o=Math.max(Bd(t,r),Bd(t,r-a),Bd(t-n,r),Bd(t-n,r-a));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=bY(n,a,t,r,!1),u=f[0],d=f[1];s=Bd(u-t,(d-r)/l),o=l*s}break}return Array.isArray(e.size)&&(s=Ra(e.size[0],n),o=e.size.length===2?Ra(e.size[1],a):s),[s,o]},nft=function(e,t){var r=qu(180),n=[];return gA(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=Qfe(a);return}else if(Ufe(o)){r=Ej.parse(e,o);return}}var l=Nj(e,a);n.push(l)}),{angle:r,stops:n,type:1}},o5=function(e,t){var r=qu(180),n=[];return gA(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=Qfe(a);return}else if(Ufe(o)){r=(Ej.parse(e,o)+qu(270))%qu(360);return}}var l=Nj(e,a);n.push(l)}),{angle:r,stops:n,type:1}},aft=function(e,t){var r=qu(180),n=[],a=1,s=0,o=3,l=[];return gA(t).forEach(function(c,u){var d=c[0];if(u===0){if(wa(d)&&d.value==="linear"){a=1;return}else if(wa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=Nm.parse(e,d.values[0]);n.push({stop:Co,color:f})}else if(d.name==="to"){var f=Nm.parse(e,d.values[0]);n.push({stop:cm,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(Mb);if(h.length===2){var f=Nm.parse(e,h[1]),m=h[0];N1(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),a===1?{angle:(r+qu(180))%qu(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},Hfe="closest-side",Vfe="farthest-side",zfe="closest-corner",$fe="farthest-corner",Gfe="circle",qfe="ellipse",Kfe="cover",Wfe="contain",sft=function(e,t){var r=0,n=3,a=[],s=[];return gA(t).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,h){if(u)if(wa(h))switch(h.value){case"center":return s.push(uU),f;case"top":case"left":return s.push(Co),f;case"right":case"bottom":return s.push(cm),f}else(mi(h)||$m(h))&&s.push(h);else if(wa(h))switch(h.value){case Gfe:return r=0,!1;case qfe:return r=1,!1;case"at":return u=!0,!1;case Hfe:return n=0,!1;case Kfe:case Vfe:return n=1,!1;case Wfe:case zfe:return n=2,!1;case $fe:return n=3,!1}else if($m(h)||mi(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=Nj(e,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},l5=function(e,t){var r=0,n=3,a=[],s=[];return gA(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(wa(f))switch(f.value){case"center":return s.push(uU),!1;case"top":case"left":return s.push(Co),!1;case"right":case"bottom":return s.push(cm),!1}else if(mi(f)||$m(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(wa(f))switch(f.value){case Gfe:return r=0,!1;case qfe:return r=1,!1;case Wfe:case Hfe:return n=0,!1;case Vfe:return n=1,!1;case zfe:return n=2,!1;case Kfe:case $fe:return n=3,!1}else if($m(f)||mi(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Nj(e,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},ift=function(e){return e.type===1},oft=function(e){return e.type===2},dU={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=Xfe[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function lft(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!Xfe[e.name])}var Xfe={"linear-gradient":nft,"-moz-linear-gradient":o5,"-ms-linear-gradient":o5,"-o-linear-gradient":o5,"-webkit-linear-gradient":o5,"radial-gradient":sft,"-moz-radial-gradient":l5,"-ms-radial-gradient":l5,"-o-radial-gradient":l5,"-webkit-radial-gradient":l5,"-webkit-gradient":aft},cft={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return Mb(n)&&lft(n)}).map(function(n){return dU.parse(e,n)})}},uft={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},dft={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return gA(t).map(function(r){return r.filter(mi)}).map(Dfe)}},fft={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return gA(t).map(function(r){return r.filter(wa).map(function(n){return n.value}).join(" ")}).map(Aft)}},Aft=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Zv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Zv||(Zv={}));var hft={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return gA(t).map(function(r){return r.filter(mft)})}},mft=function(e){return wa(e)||mi(e)},Cj=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},pft=Cj("top"),gft=Cj("right"),xft=Cj("bottom"),vft=Cj("left"),_j=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return Dfe(r.filter(mi))}}},bft=_j("top-left"),yft=_j("top-right"),wft=_j("bottom-right"),Eft=_j("bottom-left"),Sj=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Nft=Sj("top"),Cft=Sj("right"),_ft=Sj("bottom"),Sft=Sj("left"),kj=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return ME(r)?r.number:0}}},kft=kj("top"),jft=kj("right"),Bft=kj("bottom"),Tft=kj("left"),Ift={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Fft={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Oft={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).reduce(function(r,n){return r|Dft(n.value)},0)}},Dft=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Pft={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Rft={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},rk;(function(e){e.NORMAL="normal",e.STRICT="strict"})(rk||(rk={}));var Lft={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return rk.STRICT;case"normal":default:return rk.NORMAL}}},Mft={name:"line-height",initialValue:"normal",prefix:!1,type:4},yY=function(e,t){return wa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:mi(e)?Ra(e,t):t},Uft={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:dU.parse(e,t)}},Qft={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},DD={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},jj=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Hft=jj("top"),Vft=jj("right"),zft=jj("bottom"),$ft=jj("left"),Gft={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},qft={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Bj=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Kft=Bj("top"),Wft=Bj("right"),Xft=Bj("bottom"),Yft=Bj("left"),Jft={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Zft={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},eAt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&OD(t[0],"none")?[]:gA(t).map(function(r){for(var n={color:wh.TRANSPARENT,offsetX:Co,offsetY:Co,blur:Co},a=0,s=0;s<r.length;s++){var o=r[s];$m(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=Nm.parse(e,o)}return n})}},tAt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},rAt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=sAt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},nAt=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},aAt=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,n,a,s,o,l]:null},sAt={matrix:nAt,matrix3d:aAt},wY={type:16,number:50,flags:LE},iAt=[wY,wY],oAt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(mi);return r.length!==2?iAt:[r[0],r[1]]}},lAt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Uw;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Uw||(Uw={}));var cAt={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Uw.BREAK_ALL;case"keep-all":return Uw.KEEP_ALL;case"normal":default:return Uw.NORMAL}}},uAt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(N1(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Yfe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},dAt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return N1(t)?t.number:1}},fAt={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},AAt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},hAt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},mAt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},pAt={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(N1(t))return t.number;if(wa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},gAt={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(wa).map(function(r){return r.value})}},xAt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ji=function(e,t){return(e&t)!==0},vAt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},bAt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Ofe),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&N1(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},yAt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Ofe),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if(wa(s)&&s.value!=="none"){var l=o&&N1(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},wAt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(ME).map(function(r){return Yfe.parse(e,r)})}},EAt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(Wdt);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},EY=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},NAt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&OD(t[0],"none")?[]:gA(t).map(function(r){for(var n={color:255,offsetX:Co,offsetY:Co,blur:Co,spread:Co,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];OD(o,"inset")?n.inset=!0:$m(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=Nm.parse(e,o)}return n})}},CAt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(wa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},_At={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},SAt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return ME(t)?t.number:0}},kAt=function(){function e(t,r){var n,a;this.animationDuration=lr(t,wAt,r.animationDuration),this.backgroundClip=lr(t,Jdt,r.backgroundClip),this.backgroundColor=lr(t,Zdt,r.backgroundColor),this.backgroundImage=lr(t,cft,r.backgroundImage),this.backgroundOrigin=lr(t,uft,r.backgroundOrigin),this.backgroundPosition=lr(t,dft,r.backgroundPosition),this.backgroundRepeat=lr(t,fft,r.backgroundRepeat),this.backgroundSize=lr(t,hft,r.backgroundSize),this.borderTopColor=lr(t,pft,r.borderTopColor),this.borderRightColor=lr(t,gft,r.borderRightColor),this.borderBottomColor=lr(t,xft,r.borderBottomColor),this.borderLeftColor=lr(t,vft,r.borderLeftColor),this.borderTopLeftRadius=lr(t,bft,r.borderTopLeftRadius),this.borderTopRightRadius=lr(t,yft,r.borderTopRightRadius),this.borderBottomRightRadius=lr(t,wft,r.borderBottomRightRadius),this.borderBottomLeftRadius=lr(t,Eft,r.borderBottomLeftRadius),this.borderTopStyle=lr(t,Nft,r.borderTopStyle),this.borderRightStyle=lr(t,Cft,r.borderRightStyle),this.borderBottomStyle=lr(t,_ft,r.borderBottomStyle),this.borderLeftStyle=lr(t,Sft,r.borderLeftStyle),this.borderTopWidth=lr(t,kft,r.borderTopWidth),this.borderRightWidth=lr(t,jft,r.borderRightWidth),this.borderBottomWidth=lr(t,Bft,r.borderBottomWidth),this.borderLeftWidth=lr(t,Tft,r.borderLeftWidth),this.boxShadow=lr(t,NAt,r.boxShadow),this.color=lr(t,Ift,r.color),this.direction=lr(t,Fft,r.direction),this.display=lr(t,Oft,r.display),this.float=lr(t,Pft,r.cssFloat),this.fontFamily=lr(t,hAt,r.fontFamily),this.fontSize=lr(t,mAt,r.fontSize),this.fontStyle=lr(t,xAt,r.fontStyle),this.fontVariant=lr(t,gAt,r.fontVariant),this.fontWeight=lr(t,pAt,r.fontWeight),this.letterSpacing=lr(t,Rft,r.letterSpacing),this.lineBreak=lr(t,Lft,r.lineBreak),this.lineHeight=lr(t,Mft,r.lineHeight),this.listStyleImage=lr(t,Uft,r.listStyleImage),this.listStylePosition=lr(t,Qft,r.listStylePosition),this.listStyleType=lr(t,DD,r.listStyleType),this.marginTop=lr(t,Hft,r.marginTop),this.marginRight=lr(t,Vft,r.marginRight),this.marginBottom=lr(t,zft,r.marginBottom),this.marginLeft=lr(t,$ft,r.marginLeft),this.opacity=lr(t,dAt,r.opacity);var s=lr(t,Gft,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=lr(t,qft,r.overflowWrap),this.paddingTop=lr(t,Kft,r.paddingTop),this.paddingRight=lr(t,Wft,r.paddingRight),this.paddingBottom=lr(t,Xft,r.paddingBottom),this.paddingLeft=lr(t,Yft,r.paddingLeft),this.paintOrder=lr(t,CAt,r.paintOrder),this.position=lr(t,Zft,r.position),this.textAlign=lr(t,Jft,r.textAlign),this.textDecorationColor=lr(t,fAt,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=lr(t,AAt,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=lr(t,eAt,r.textShadow),this.textTransform=lr(t,tAt,r.textTransform),this.transform=lr(t,rAt,r.transform),this.transformOrigin=lr(t,oAt,r.transformOrigin),this.visibility=lr(t,lAt,r.visibility),this.webkitTextStrokeColor=lr(t,_At,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=lr(t,SAt,r.webkitTextStrokeWidth),this.wordBreak=lr(t,cAt,r.wordBreak),this.zIndex=lr(t,uAt,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Cm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return ji(this.display,4)||ji(this.display,33554432)||ji(this.display,268435456)||ji(this.display,536870912)||ji(this.display,67108864)||ji(this.display,134217728)},e}(),jAt=function(){function e(t,r){this.content=lr(t,vAt,r.content),this.quotes=lr(t,EAt,r.quotes)}return e}(),NY=function(){function e(t,r){this.counterIncrement=lr(t,bAt,r.counterIncrement),this.counterReset=lr(t,yAt,r.counterReset)}return e}(),lr=function(e,t,r){var n=new Ife,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new Ffe(n.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,wa(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return Ej.parse(e,s.parseComponentValue());case"color":return Nm.parse(e,s.parseComponentValue());case"image":return dU.parse(e,s.parseComponentValue());case"length":var l=s.parseComponentValue();return $m(l)?l:Co;case"length-percentage":var c=s.parseComponentValue();return mi(c)?c:Co;case"time":return Yfe.parse(e,s.parseComponentValue())}break}},BAt="data-html2canvas-debug",TAt=function(e){var t=e.getAttribute(BAt);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},PD=function(e,t){var r=TAt(e);return r===1||t===r},xA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,PD(r,3))debugger;this.styles=new kAt(t,window.getComputedStyle(r,null)),MD(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=yj(this.context,r),PD(r,4)&&(this.flags|=16)}return e}(),IAt="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",CY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var c5=0;c5<CY.length;c5++)cw[CY.charCodeAt(c5)]=c5;var FAt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=cw[e.charCodeAt(n)],o=cw[e.charCodeAt(n+1)],l=cw[e.charCodeAt(n+2)],c=cw[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},OAt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},DAt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},gg=5,fU=11,v6=2,PAt=fU-gg,Jfe=65536>>gg,RAt=1<<gg,b6=RAt-1,LAt=1024>>gg,MAt=Jfe+LAt,UAt=MAt,QAt=32,HAt=UAt+QAt,VAt=65536>>fU,zAt=1<<PAt,$At=zAt-1,_Y=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},GAt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},qAt=function(e,t){var r=FAt(e),n=Array.isArray(r)?DAt(r):new Uint32Array(r),a=Array.isArray(r)?OAt(r):new Uint16Array(r),s=24,o=_Y(a,s/2,n[4]/2),l=n[5]===2?_Y(a,(s+n[4])/2):GAt(n,Math.ceil((s+n[4])/4));return new KAt(n[0],n[1],n[2],n[3],o,l)},KAt=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>gg],r=(r<<v6)+(t&b6),this.data[r];if(t<=65535)return r=this.index[Jfe+(t-55296>>gg)],r=(r<<v6)+(t&b6),this.data[r];if(t<this.highStart)return r=HAt-VAt+(t>>fU),r=this.index[r],r+=t>>gg&$At,r=this.index[r],r=(r<<v6)+(t&b6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),SY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",WAt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var u5=0;u5<SY.length;u5++)WAt[SY.charCodeAt(u5)]=u5;var XAt=1,y6=2,w6=3,kY=4,jY=5,YAt=7,BY=8,E6=9,N6=10,TY=11,IY=12,FY=13,OY=14,C6=15,JAt=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},ZAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},eht=qAt(IAt),Lu="×",_6="÷",tht=function(e){return eht.get(e)},rht=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],o=t[r];if(s===y6&&o===w6)return Lu;if(s===y6||s===w6||s===kY||o===y6||o===w6||o===kY)return _6;if(s===BY&&[BY,E6,TY,IY].indexOf(o)!==-1||(s===TY||s===E6)&&(o===E6||o===N6)||(s===IY||s===N6)&&o===N6||o===FY||o===jY||o===YAt||s===XAt)return Lu;if(s===FY&&o===OY){for(;a===jY;)a=t[--n];if(a===OY)return Lu}if(s===C6&&o===C6){for(var l=0;a===C6;)l++,a=t[--n];if(l%2===0)return Lu}return _6},nht=function(e){var t=JAt(e),r=t.length,n=0,a=0,s=t.map(tht);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=Lu;n<r&&(o=rht(t,s,++n))===Lu;);if(o!==Lu||n===r){var l=ZAt.apply(null,t.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},aht=function(e){for(var t=nht(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},sht=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},iht=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=wj(n.data).map(function(c){return Ks(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return e.body.removeChild(t),l},oht=function(){return typeof new Image().crossOrigin<"u"},lht=function(){return typeof new XMLHttpRequest().responseType=="string"},cht=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},DY=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},uht=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var o=RD(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),PY(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",DY(c)?PY(RD(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),DY(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},RD=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},PY=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},vo={get SUPPORT_RANGE_BOUNDS(){var e=sht(document);return Object.defineProperty(vo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=vo.SUPPORT_RANGE_BOUNDS&&iht(document);return Object.defineProperty(vo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=cht(document);return Object.defineProperty(vo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?uht(document):Promise.resolve(!1);return Object.defineProperty(vo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=oht();return Object.defineProperty(vo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=lht();return Object.defineProperty(vo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(vo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(vo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Qw=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),dht=function(e,t,r,n){var a=hht(t,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(vo.SUPPORT_RANGE_BOUNDS){var c=RY(n,o,l.length).getClientRects();if(c.length>1){var u=AU(l),d=0;u.forEach(function(h){s.push(new Qw(h,Qh.fromDOMRectList(e,RY(n,d+o,h.length).getClientRects()))),d+=h.length})}else s.push(new Qw(l,Qh.fromDOMRectList(e,c)))}else{var f=n.splitText(l.length);s.push(new Qw(l,fht(e,n))),n=f}else vo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},fht=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=yj(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return Qh.EMPTY},RY=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},AU=function(e){if(vo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return aht(e)},Aht=function(e,t){if(vo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return pht(e,t)},hht=function(e,t){return t.letterSpacing!==0?AU(e):Aht(e,t)},mht=[32,160,4961,65792,65793,4153,4241],pht=function(e,t){for(var r=Vut(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=wj(o),c="";l.forEach(function(u){mht.indexOf(u)===-1?c+=Ks(u):(c.length&&n.push(c),n.push(Ks(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},ght=function(){function e(t,r,n){this.text=xht(r.data,n.textTransform),this.textBounds=dht(t,this.text,n,r)}return e}(),xht=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(vht,bht);case 2:return e.toUpperCase();default:return e}},vht=/(^|\s|:|-|\(|\))([a-z])/g,bht=function(e,t,r){return e.length>0?t+r.toUpperCase():e},Zfe=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(xA),eAe=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(xA),tAe=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,o=yj(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(xA),rAe=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(xA),LD=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(xA),yht=[{type:15,flags:0,unit:"px",number:3}],wht=[{type:16,flags:0,number:50}],Eht=function(e){return e.width>e.height?new Qh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Qh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Nht=function(e){var t=e.type===Cht?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},nk="checkbox",ak="radio",Cht="password",LY=707406591,hU=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=Nht(n),(a.type===nk||a.type===ak)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=Eht(a.bounds)),a.type){case nk:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=yht;break;case ak:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=wht;break}return a}return t}(xA),nAe=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(xA),aAe=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(xA),sAe=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=oAe(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Mw(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):wh.TRANSPARENT,o=n.contentWindow.document.body?Mw(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):wh.TRANSPARENT;a.backgroundColor=Cm(s)?Cm(o)?a.styles.backgroundColor:o:s}}catch{}return a}return t}(xA),_ht=["OL","UL","MENU"],t_=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,lAe(a)&&a.data.trim().length>0)r.textNodes.push(new ght(e,a,r.styles));else if(jv(a))if(fAe(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return t_(e,l,r,n)});else{var o=iAe(e,a);o.styles.isVisible()&&(Sht(a,o,n)?o.flags|=4:kht(o.styles)&&(o.flags|=2),_ht.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?t_(e,a.shadowRoot,o,n):!sk(a)&&!cAe(a)&&!ik(a)&&t_(e,a,o,n))}},iAe=function(e,t){return UD(t)?new Zfe(e,t):uAe(t)?new eAe(e,t):cAe(t)?new tAe(e,t):jht(t)?new rAe(e,t):Bht(t)?new LD(e,t):Tht(t)?new hU(e,t):ik(t)?new nAe(e,t):sk(t)?new aAe(e,t):dAe(t)?new sAe(e,t):new xA(e,t)},oAe=function(e,t){var r=iAe(e,t);return r.flags|=4,t_(e,t,r,r),r},Sht=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||mU(e)&&r.styles.isTransparent()},kht=function(e){return e.isPositioned()||e.isFloating()},lAe=function(e){return e.nodeType===Node.TEXT_NODE},jv=function(e){return e.nodeType===Node.ELEMENT_NODE},MD=function(e){return jv(e)&&typeof e.style<"u"&&!r_(e)},r_=function(e){return typeof e.className=="object"},jht=function(e){return e.tagName==="LI"},Bht=function(e){return e.tagName==="OL"},Tht=function(e){return e.tagName==="INPUT"},Iht=function(e){return e.tagName==="HTML"},cAe=function(e){return e.tagName==="svg"},mU=function(e){return e.tagName==="BODY"},uAe=function(e){return e.tagName==="CANVAS"},MY=function(e){return e.tagName==="VIDEO"},UD=function(e){return e.tagName==="IMG"},dAe=function(e){return e.tagName==="IFRAME"},UY=function(e){return e.tagName==="STYLE"},Fht=function(e){return e.tagName==="SCRIPT"},sk=function(e){return e.tagName==="TEXTAREA"},ik=function(e){return e.tagName==="SELECT"},fAe=function(e){return e.tagName==="SLOT"},QY=function(e){return e.tagName.indexOf("-")>0},Oht=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},e}(),HY={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},VY={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Dht={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Pht={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},nv=function(e,t,r,n,a,s){return e<t||e>r?$2(e,a,s.length>0):n.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=n.values[c];return o},"")+s},AAe=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},$s=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(AAe(Math.abs(e),s,n,function(o){return Ks(Math.floor(o%s)+t)})+a)},Bp=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return AAe(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},mv=1,V0=2,z0=4,uw=8,YA=function(e,t,r,n,a,s){if(e<-9999||e>9999)return $2(e,4,a.length>0);var o=Math.abs(e),l=a;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&ji(s,mv)&&l!==""?l=t[u]+l:u>1||u===1&&c===0||u===1&&c===1&&ji(s,V0)||u===1&&c===1&&ji(s,z0)&&e>100||u===1&&c>1&&ji(s,uw)?l=t[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(e<0?n:"")+l},zY="十百千萬",$Y="拾佰仟萬",GY="マイナス",S6="마이너스",$2=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",o=r?" ":"";switch(t){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var l=$s(e,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Bp(e,"〇一二三四五六七八九",a);case 6:return nv(e,1,3999,HY,3,n).toLowerCase();case 7:return nv(e,1,3999,HY,3,n);case 8:return $s(e,945,969,!1,n);case 9:return $s(e,97,122,!1,n);case 10:return $s(e,65,90,!1,n);case 11:return $s(e,1632,1641,!0,n);case 12:case 49:return nv(e,1,9999,VY,3,n);case 35:return nv(e,1,9999,VY,3,n).toLowerCase();case 13:return $s(e,2534,2543,!0,n);case 14:case 30:return $s(e,6112,6121,!0,n);case 15:return Bp(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return Bp(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return YA(e,"零一二三四五六七八九",zY,"負",a,V0|z0|uw);case 47:return YA(e,"零壹貳參肆伍陸柒捌玖",$Y,"負",a,mv|V0|z0|uw);case 42:return YA(e,"零一二三四五六七八九",zY,"负",a,V0|z0|uw);case 41:return YA(e,"零壹贰叁肆伍陆柒捌玖",$Y,"负",a,mv|V0|z0|uw);case 26:return YA(e,"〇一二三四五六七八九","十百千万",GY,a,0);case 25:return YA(e,"零壱弐参四伍六七八九","拾百千万",GY,a,mv|V0|z0);case 31:return YA(e,"영일이삼사오육칠팔구","십백천만",S6,s,mv|V0|z0);case 33:return YA(e,"零一二三四五六七八九","十百千萬",S6,s,0);case 32:return YA(e,"零壹貳參四五六七八九","拾百千",S6,s,mv|V0|z0);case 18:return $s(e,2406,2415,!0,n);case 20:return nv(e,1,19999,Pht,3,n);case 21:return $s(e,2790,2799,!0,n);case 22:return $s(e,2662,2671,!0,n);case 22:return nv(e,1,10999,Dht,3,n);case 23:return Bp(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Bp(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return $s(e,3302,3311,!0,n);case 28:return Bp(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return Bp(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return $s(e,3792,3801,!0,n);case 37:return $s(e,6160,6169,!0,n);case 38:return $s(e,4160,4169,!0,n);case 39:return $s(e,2918,2927,!0,n);case 40:return $s(e,1776,1785,!0,n);case 43:return $s(e,3046,3055,!0,n);case 44:return $s(e,3174,3183,!0,n);case 45:return $s(e,3664,3673,!0,n);case 46:return $s(e,3872,3881,!0,n);case 3:default:return $s(e,48,57,!0,n)}},hAe="data-html2canvas-ignore",qY=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Oht,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=Rht(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=Uht(a).then(function(){return xl(n,void 0,void 0,function(){var d,f;return Go(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(zht),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Mht(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(Hht(document.doctype)+"<html></html>"),Vht(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(PD(t,2))debugger;if(uAe(t))return this.createCanvasClone(t);if(MY(t))return this.createVideoClone(t);if(UY(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return UD(r)&&(UD(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),QY(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return k6(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!jv(r)||!Fht(r)&&!r.hasAttribute(hAe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!jv(r)||!UY(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(jv(s)&&fAe(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(lAe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&jv(t)&&(MD(t)||r_(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),o=n.getComputedStyle(t,":before"),l=n.getComputedStyle(t,":after");this.referenceElement===t&&MD(a)&&(this.clonedReferenceElement=a),mU(a)&&qht(a);var c=this.counters.parse(new NY(this.context,s)),u=this.resolvePseudoContent(t,a,o,Hw.BEFORE);QY(t)&&(r=!0),MY(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,l,Hw.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||r_(t))&&!dAe(t)||r)&&k6(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(sk(t)||ik(t))&&(sk(a)||ik(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new NY(this.context,n));var c=new jAt(this.context,n),u=l.createElement("html2canvaspseudoelement");k6(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var h=l.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(wa);m.length&&u.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(Mb),x=g[0],v=g[1];if(x&&wa(x)){var y=s.counters.getCounterValue(x.value),w=v&&wa(v)?DD.parse(s.context,v.value):3;u.appendChild(l.createTextNode($2(y,w,!1)))}}else if(f.name==="counters"){var _=f.values.filter(Mb),x=_[0],F=_[1],v=_[2];if(x&&wa(x)){var B=s.counters.getCounterValues(x.value),T=v&&wa(v)?DD.parse(s.context,v.value):3,C=F&&F.type===0?F.value:"",S=B.map(function(P){return $2(P,T,!1)}).join(C);u.appendChild(l.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(EY(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(EY(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=QD+" "+HD;var d=a===Hw.BEFORE?" "+QD:" "+HD;return r_(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Hw;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Hw||(Hw={}));var Rht=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(hAe,"true"),e.body.appendChild(r),r},Lht=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},Mht=function(e){return Promise.all([].slice.call(e.images,0).map(Lht))},Uht=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},Qht=["all","d","content"],k6=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);Qht.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},Hht=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Vht=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},zht=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},$ht=":before",Ght=":after",QD="___html2canvas___pseudoelement_before",HD="___html2canvas___pseudoelement_after",KY=`{
    content: "" !important;
    display: none !important;
}`,qht=function(e){Kht(e,"."+QD+$ht+KY+`
         .`+HD+Ght+KY)},Kht=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},mAe=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Wht=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(B6(t)||Zht(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return xl(this,void 0,void 0,function(){var r,n,a,s,o=this;return Go(this,function(l){switch(l.label){case 0:return r=mAe.isSameOrigin(t),n=!j6(t)&&this._options.useCORS===!0&&vo.SUPPORT_CORS_IMAGES&&!r,a=!j6(t)&&!r&&!B6(t)&&typeof this._options.proxy=="string"&&vo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!j6(t)&&!B6(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(e0t(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,o){var l=vo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return o(h)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),Xht=/^data:image\/svg\+xml/i,Yht=/^data:image\/.*;base64,/i,Jht=/^data:image\/.*/i,Zht=function(e){return vo.SUPPORT_SVG_DRAWING||!t0t(e)},j6=function(e){return Jht.test(e)},e0t=function(e){return Yht.test(e)},B6=function(e){return e.substr(0,4)==="blob"},t0t=function(e){return e.substr(-3).toLowerCase()==="svg"||Xht.test(e)},ir=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),av=function(e,t,r){return new ir(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},d5=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=av(this.start,this.startControl,t),a=av(this.startControl,this.endControl,t),s=av(this.endControl,this.end,t),o=av(n,a,t),l=av(a,s,t),c=av(o,l,t);return r?new e(this.start,n,o,c):new e(c,l,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Hu=function(e){return e.type===1},r0t=function(){function e(t){var r=t.styles,n=t.bounds,a=lw(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=lw(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=lw(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],m=lw(r.borderBottomLeftRadius,n.width,n.height),g=m[0],x=m[1],v=[];v.push((s+c)/n.width),v.push((g+f)/n.width),v.push((o+x)/n.height),v.push((u+h)/n.height);var y=Math.max.apply(Math,v);y>1&&(s/=y,o/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var w=n.width-c,_=n.height-h,F=n.width-f,B=n.height-x,T=r.borderTopWidth,C=r.borderRightWidth,S=r.borderBottomWidth,j=r.borderLeftWidth,L=Ra(r.paddingTop,t.bounds.width),P=Ra(r.paddingRight,t.bounds.width),k=Ra(r.paddingBottom,t.bounds.width),U=Ra(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?Ja(n.left+j/3,n.top+T/3,s-j/3,o-T/3,aa.TOP_LEFT):new ir(n.left+j/3,n.top+T/3),this.topRightBorderDoubleOuterBox=s>0||o>0?Ja(n.left+w,n.top+T/3,c-C/3,u-T/3,aa.TOP_RIGHT):new ir(n.left+n.width-C/3,n.top+T/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?Ja(n.left+F,n.top+_,f-C/3,h-S/3,aa.BOTTOM_RIGHT):new ir(n.left+n.width-C/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?Ja(n.left+j/3,n.top+B,g-j/3,x-S/3,aa.BOTTOM_LEFT):new ir(n.left+j/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?Ja(n.left+j*2/3,n.top+T*2/3,s-j*2/3,o-T*2/3,aa.TOP_LEFT):new ir(n.left+j*2/3,n.top+T*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?Ja(n.left+w,n.top+T*2/3,c-C*2/3,u-T*2/3,aa.TOP_RIGHT):new ir(n.left+n.width-C*2/3,n.top+T*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?Ja(n.left+F,n.top+_,f-C*2/3,h-S*2/3,aa.BOTTOM_RIGHT):new ir(n.left+n.width-C*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?Ja(n.left+j*2/3,n.top+B,g-j*2/3,x-S*2/3,aa.BOTTOM_LEFT):new ir(n.left+j*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||o>0?Ja(n.left+j/2,n.top+T/2,s-j/2,o-T/2,aa.TOP_LEFT):new ir(n.left+j/2,n.top+T/2),this.topRightBorderStroke=s>0||o>0?Ja(n.left+w,n.top+T/2,c-C/2,u-T/2,aa.TOP_RIGHT):new ir(n.left+n.width-C/2,n.top+T/2),this.bottomRightBorderStroke=f>0||h>0?Ja(n.left+F,n.top+_,f-C/2,h-S/2,aa.BOTTOM_RIGHT):new ir(n.left+n.width-C/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=g>0||x>0?Ja(n.left+j/2,n.top+B,g-j/2,x-S/2,aa.BOTTOM_LEFT):new ir(n.left+j/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||o>0?Ja(n.left,n.top,s,o,aa.TOP_LEFT):new ir(n.left,n.top),this.topRightBorderBox=c>0||u>0?Ja(n.left+w,n.top,c,u,aa.TOP_RIGHT):new ir(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?Ja(n.left+F,n.top+_,f,h,aa.BOTTOM_RIGHT):new ir(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?Ja(n.left,n.top+B,g,x,aa.BOTTOM_LEFT):new ir(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?Ja(n.left+j,n.top+T,Math.max(0,s-j),Math.max(0,o-T),aa.TOP_LEFT):new ir(n.left+j,n.top+T),this.topRightPaddingBox=c>0||u>0?Ja(n.left+Math.min(w,n.width-C),n.top+T,w>n.width+C?0:Math.max(0,c-C),Math.max(0,u-T),aa.TOP_RIGHT):new ir(n.left+n.width-C,n.top+T),this.bottomRightPaddingBox=f>0||h>0?Ja(n.left+Math.min(F,n.width-j),n.top+Math.min(_,n.height-S),Math.max(0,f-C),Math.max(0,h-S),aa.BOTTOM_RIGHT):new ir(n.left+n.width-C,n.top+n.height-S),this.bottomLeftPaddingBox=g>0||x>0?Ja(n.left+j,n.top+Math.min(B,n.height-S),Math.max(0,g-j),Math.max(0,x-S),aa.BOTTOM_LEFT):new ir(n.left+j,n.top+n.height-S),this.topLeftContentBox=s>0||o>0?Ja(n.left+j+U,n.top+T+L,Math.max(0,s-(j+U)),Math.max(0,o-(T+L)),aa.TOP_LEFT):new ir(n.left+j+U,n.top+T+L),this.topRightContentBox=c>0||u>0?Ja(n.left+Math.min(w,n.width+j+U),n.top+T+L,w>n.width+j+U?0:c-j+U,u-(T+L),aa.TOP_RIGHT):new ir(n.left+n.width-(C+P),n.top+T+L),this.bottomRightContentBox=f>0||h>0?Ja(n.left+Math.min(F,n.width-(j+U)),n.top+Math.min(_,n.height+T+L),Math.max(0,f-(C+P)),h-(S+k),aa.BOTTOM_RIGHT):new ir(n.left+n.width-(C+P),n.top+n.height-(S+k)),this.bottomLeftContentBox=g>0||x>0?Ja(n.left+j+U,n.top+B,Math.max(0,g-(j+U)),x-(S+k),aa.BOTTOM_LEFT):new ir(n.left+j+U,n.top+n.height-(S+k))}return e}(),aa;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(aa||(aa={}));var Ja=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=e+r,u=t+n;switch(a){case aa.TOP_LEFT:return new d5(new ir(e,u),new ir(e,u-l),new ir(c-o,t),new ir(c,t));case aa.TOP_RIGHT:return new d5(new ir(e,t),new ir(e+o,t),new ir(c,u-l),new ir(c,u));case aa.BOTTOM_RIGHT:return new d5(new ir(c,t),new ir(c,t+l),new ir(e+o,u),new ir(e,u));case aa.BOTTOM_LEFT:default:return new d5(new ir(c,u),new ir(c-o,u),new ir(e,t+l),new ir(e,t))}},ok=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},n0t=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},lk=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},a0t=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),f5=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),s0t=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),i0t=function(e){return e.type===0},pAe=function(e){return e.type===1},o0t=function(e){return e.type===2},WY=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},l0t=function(e,t,r,n,a){return e.map(function(s,o){switch(o){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},gAe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),xAe=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new r0t(this.container),this.container.styles.opacity<1&&this.effects.push(new s0t(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new a0t(n,a,s))}if(this.container.styles.overflowX!==0){var o=ok(this.curves),l=lk(this.curves);WY(o,l)?this.effects.push(new f5(o,6)):(this.effects.push(new f5(o,2)),this.effects.push(new f5(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!pAe(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=ok(n.curves),l=lk(n.curves);WY(o,l)||a.unshift(new f5(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return ji(c.target,t)})},e}(),VD=function(e,t,r,n){e.container.elements.forEach(function(a){var s=ji(a.flags,4),o=ji(a.flags,2),l=new xAe(a,e);ji(a.styles.display,2048)&&n.push(l);var c=ji(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:t,d=new gAe(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);VD(l,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),VD(l,t,r,c);ji(a.flags,8)&&vAe(a,c)})},vAe=function(e,t){for(var r=e instanceof LD?e.start:1,n=e instanceof LD?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof rAe&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=$2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},c0t=function(e){var t=new xAe(e,null),r=new gAe(t),n=[];return VD(t,r,r,n),vAe(t.container,n),r},XY=function(e,t){switch(t){case 0:return Ku(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Ku(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Ku(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Ku(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},u0t=function(e,t){switch(t){case 0:return Ku(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Ku(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Ku(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Ku(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},d0t=function(e,t){switch(t){case 0:return Ku(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Ku(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Ku(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Ku(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},f0t=function(e,t){switch(t){case 0:return A5(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return A5(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return A5(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return A5(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},A5=function(e,t){var r=[];return Hu(e)?r.push(e.subdivide(.5,!1)):r.push(e),Hu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Ku=function(e,t,r,n){var a=[];return Hu(e)?a.push(e.subdivide(.5,!1)):a.push(e),Hu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Hu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Hu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},bAe=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},ck=function(e){var t=e.styles,r=e.bounds,n=Ra(t.paddingLeft,r.width),a=Ra(t.paddingRight,r.width),s=Ra(t.paddingTop,r.width),o=Ra(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+o))},A0t=function(e,t){return e===0?t.bounds:e===2?ck(t):bAe(t)},h0t=function(e,t){return e===0?t.bounds:e===2?ck(t):bAe(t)},T6=function(e,t,r){var n=A0t(pv(e.styles.backgroundOrigin,t),e),a=h0t(pv(e.styles.backgroundClip,t),e),s=m0t(pv(e.styles.backgroundSize,t),r,n),o=s[0],l=s[1],c=lw(pv(e.styles.backgroundPosition,t),n.width-o,n.height-l),u=p0t(pv(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,o,l]},sv=function(e){return wa(e)&&e.value===Zv.AUTO},h5=function(e){return typeof e=="number"},m0t=function(e,t,r){var n=t[0],a=t[1],s=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(mi(o)&&l&&mi(l))return[Ra(o,r.width),Ra(l,r.height)];var c=h5(s);if(wa(o)&&(o.value===Zv.CONTAIN||o.value===Zv.COVER)){if(h5(s)){var u=r.width/r.height;return u<s!=(o.value===Zv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=h5(n),f=h5(a),h=d||f;if(sv(o)&&(!l||sv(l))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var m=d?n:a*s,g=f?a:n/s;return[m,g]}var x=d?n:r.width,v=f?a:r.height;return[x,v]}if(c){var y=0,w=0;return mi(o)?y=Ra(o,r.width):mi(l)&&(w=Ra(l,r.height)),sv(o)?y=w*s:(!l||sv(l))&&(w=y/s),[y,w]}var _=null,F=null;if(mi(o)?_=Ra(o,r.width):l&&mi(l)&&(F=Ra(l,r.height)),_!==null&&(!l||sv(l))&&(F=d&&f?_/n*a:r.height),F!==null&&sv(o)&&(_=d&&f?F/a*n:r.width),_!==null&&F!==null)return[_,F];throw new Error("Unable to calculate background-size for element")},pv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},p0t=function(e,t,r,n,a){var s=t[0],o=t[1],l=r[0],c=r[1];switch(e){case 2:return[new ir(Math.round(n.left),Math.round(n.top+o)),new ir(Math.round(n.left+n.width),Math.round(n.top+o)),new ir(Math.round(n.left+n.width),Math.round(c+n.top+o)),new ir(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new ir(Math.round(n.left+s),Math.round(n.top)),new ir(Math.round(n.left+s+l),Math.round(n.top)),new ir(Math.round(n.left+s+l),Math.round(n.height+n.top)),new ir(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ir(Math.round(n.left+s),Math.round(n.top+o)),new ir(Math.round(n.left+s+l),Math.round(n.top+o)),new ir(Math.round(n.left+s+l),Math.round(n.top+o+c)),new ir(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new ir(Math.round(a.left),Math.round(a.top)),new ir(Math.round(a.left+a.width),Math.round(a.top)),new ir(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ir(Math.round(a.left),Math.round(a.height+a.top))]}},g0t="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",YY="Hidden Text",x0t=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=g0t,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(YY)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(YY)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),yAe=function(){function e(t,r){this.context=t,this.options=r}return e}(),v0t=1e4,b0t=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new x0t(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),o0t(r)&&(this.ctx.globalAlpha=r.opacity),i0t(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),pAe(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return xl(this,void 0,void 0,function(){var n;return Go(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return xl(this,void 0,void 0,function(){return Go(this,function(n){switch(n.label){case 0:if(ji(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=AU(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=C0t(r.fontFamily).join(", "),s=ME(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return xl(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,h=this;return Go(this,function(m){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Gi(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var v=n.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Gi(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Gi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Gi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=ck(r),o=lk(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return xl(this,void 0,void 0,function(){var n,a,s,o,l,c,w,w,u,d,f,h,F,m,g,B,x,v,y,w,_,F,B;return Go(this,function(T){switch(T.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,T.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:T.sent(),T.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof Zfe))return[3,8];T.label=5;case 5:return T.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=T.sent(),this.renderReplacedElement(n,a,w),[3,8];case 7:return T.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof eAe&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof tAe))return[3,12];T.label=9;case 9:return T.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=T.sent(),this.renderReplacedElement(n,a,w),[3,12];case 11:return T.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof sAe&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=T.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),T.label=14;case 14:if(n instanceof hU&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===nk?n.checked&&(this.ctx.save(),this.path([new ir(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ir(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ir(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ir(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ir(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ir(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ir(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Gi(LY),this.ctx.fill(),this.ctx.restore()):n.type===ak&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Gi(LY),this.ctx.fill(),this.ctx.restore())),y0t(n)&&n.value.length){switch(h=this.createFontStyle(s),F=h[0],m=h[1],g=this.fontMetrics.getMetrics(F,m).baseline,this.ctx.font=F,this.ctx.fillStyle=Gi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=E0t(n.styles.textAlign),B=ck(n),x=0,n.styles.textAlign){case 1:x+=B.width/2;break;case 2:x+=B.width;break}v=B.add(x,0,0,-B.height/2+1),this.ctx.save(),this.path([new ir(B.left,B.top),new ir(B.left+B.width,B.top),new ir(B.left+B.width,B.top+B.height),new ir(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Qw(n.value,v),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ji(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,_=y.url,T.label=15;case 15:return T.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return w=T.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return T.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(F=this.createFontStyle(s)[0],this.ctx.font=F,this.ctx.fillStyle=Gi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new Qh(n.bounds.left,n.bounds.top+Ra(n.styles.paddingTop,n.bounds.width),n.bounds.width,yY(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Qw(r.listValue,B),s.letterSpacing,yY(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),T.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return xl(this,void 0,void 0,function(){var n,a,y,s,o,y,l,c,y,u,d,y,f,h,y,m,g,y,x,v,y;return Go(this,function(w){switch(w.label){case 0:if(ji(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,a=r.negativeZIndex,w.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,o=r.nonInlineLevel,w.label=7;case 7:return s<o.length?(y=o[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,w.label=11;case 11:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,w.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,w.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=Hu(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),Hu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},t.prototype.renderBackgroundImage=function(r){return xl(this,void 0,void 0,function(){var n,a,s,o,l,c;return Go(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,m,L,H,q,U,Q,S,g,L,H,q,U,Q,x,v,y,w,_,F,B,T,C,S,j,L,P,k,U,Q,K,H,q,z,W,ee,X,O,R,G,Y;return Go(this,function(te){switch(te.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,te.label=1;case 1:return te.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=te.sent(),[3,4];case 3:return te.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(m=T6(r,n,[f.width,f.height,f.width/f.height]),L=m[0],H=m[1],q=m[2],U=m[3],Q=m[4],S=s.ctx.createPattern(s.resizeImage(f,U,Q),"repeat"),s.renderRepeat(L,S,H,q)),[3,6];case 5:ift(d)?(g=T6(r,n,[null,null,null]),L=g[0],H=g[1],q=g[2],U=g[3],Q=g[4],x=tft(d.angle,U,Q),v=x[0],y=x[1],w=x[2],_=x[3],F=x[4],B=document.createElement("canvas"),B.width=U,B.height=Q,T=B.getContext("2d"),C=T.createLinearGradient(y,_,w,F),vY(d.stops,v).forEach(function(ae){return C.addColorStop(ae.stop,Gi(ae.color))}),T.fillStyle=C,T.fillRect(0,0,U,Q),U>0&&Q>0&&(S=s.ctx.createPattern(B,"repeat"),s.renderRepeat(L,S,H,q))):oft(d)&&(j=T6(r,n,[null,null,null]),L=j[0],P=j[1],k=j[2],U=j[3],Q=j[4],K=d.position.length===0?[uU]:d.position,H=Ra(K[0],U),q=Ra(K[K.length-1],Q),z=rft(d,H,q,U,Q),W=z[0],ee=z[1],W>0&&ee>0&&(X=s.ctx.createRadialGradient(P+H,k+q,0,P+H,k+q,W),vY(d.stops,W*2).forEach(function(ae){return X.addColorStop(ae.stop,Gi(ae.color))}),s.path(L),s.ctx.fillStyle=X,W!==ee?(O=r.bounds.left+.5*r.bounds.width,R=r.bounds.top+.5*r.bounds.height,G=ee/W,Y=1/G,s.ctx.save(),s.ctx.translate(O,R),s.ctx.transform(1,0,0,G,0,0),s.ctx.translate(-O,-R),s.ctx.fillRect(P,Y*(k-R)+R,U,Q*Y),s.ctx.restore()):s.ctx.fill())),te.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return xl(this,void 0,void 0,function(){return Go(this,function(s){return this.path(XY(a,n)),this.ctx.fillStyle=Gi(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return xl(this,void 0,void 0,function(){var o,l;return Go(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=u0t(s,a),this.path(o),this.ctx.fillStyle=Gi(r),this.ctx.fill(),l=d0t(s,a),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return xl(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,f=this;return Go(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!Cm(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=w0t(pv(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Cm(n.backgroundColor)||(this.ctx.fillStyle=Gi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=ok(r.curves),x=m.inset?0:v0t,v=l0t(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+x,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=Gi(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?Gi(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!Cm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return xl(this,void 0,void 0,function(){var l,c,u,d,f,h,m,g,x,v,y,w,_,F,B,T,B,T;return Go(this,function(C){return this.ctx.save(),l=f0t(s,a),c=XY(s,a),o===2&&(this.path(c),this.ctx.clip()),Hu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Hu(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?m=Math.abs(u-f):m=Math.abs(d-h),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,o===3&&(g=n,x=n),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(w=Math.floor((m+x)/(g+x)),_=(m-w*g)/(w-1),F=(m-(w+1)*g)/w,x=F<=0||Math.abs(x-_)<Math.abs(x-F)?_:F),v&&(o===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Gi(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Hu(c[0])&&(B=c[3],T=c[0],this.ctx.beginPath(),this.formatPath([new ir(B.end.x,B.end.y),new ir(T.start.x,T.start.y)]),this.ctx.stroke()),Hu(c[1])&&(B=c[1],T=c[2],this.ctx.beginPath(),this.formatPath([new ir(B.end.x,B.end.y),new ir(T.start.x,T.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return xl(this,void 0,void 0,function(){var n;return Go(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Gi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=c0t(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(yAe),y0t=function(e){return e instanceof aAe||e instanceof nAe?!0:e instanceof hU&&e.type!==ak&&e.type!==nk},w0t=function(e,t){switch(e){case 0:return ok(t);case 2:return n0t(t);case 1:default:return lk(t)}},E0t=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},N0t=["-apple-system","system-ui"],C0t=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return N0t.indexOf(t)===-1}):e},_0t=function(e){rf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return xl(this,void 0,void 0,function(){var n,a;return Go(this,function(s){switch(s.label){case 0:return n=RD(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,S0t(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Gi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(yAe),S0t=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},k0t=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,GC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,GC([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,GC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,GC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),j0t=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new k0t({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new Wht(this,t)}return e.instanceCount=1,e}(),zD=function(e,t){return t===void 0&&(t={}),B0t(e,t)};typeof window<"u"&&mAe.setContext(window);var B0t=function(e,t){return xl(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,f,h,m,g,x,v,y,w,_,F,B,C,T,C,S,j,L,P,k,U,Q,K,H,q,z,W,ee,X,O,R,G;return Go(this,function(Y){switch(Y.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=t.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(j=t.imageTimeout)!==null&&j!==void 0?j:15e3,proxy:t.proxy,useCORS:(L=t.useCORS)!==null&&L!==void 0?L:!1},s=wD({logging:(P=t.logging)!==null&&P!==void 0?P:!0,cache:t.cache},a),o={windowWidth:(k=t.windowWidth)!==null&&k!==void 0?k:n.innerWidth,windowHeight:(U=t.windowHeight)!==null&&U!==void 0?U:n.innerHeight,scrollX:(Q=t.scrollX)!==null&&Q!==void 0?Q:n.pageXOffset,scrollY:(K=t.scrollY)!==null&&K!==void 0?K:n.pageYOffset},l=new Qh(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new j0t(s,l),u=(H=t.foreignObjectRendering)!==null&&H!==void 0?H:!1,d={allowTaint:(q=t.allowTaint)!==null&&q!==void 0?q:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new qY(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=Y.sent(),g=mU(h)||Iht(h)?lut(h.ownerDocument):yj(c,h),x=g.width,v=g.height,y=g.left,w=g.top,_=T0t(c,h,t.backgroundColor),F={canvas:t.canvas,backgroundColor:_,scale:(W=(z=t.scale)!==null&&z!==void 0?z:n.devicePixelRatio)!==null&&W!==void 0?W:1,x:((ee=t.x)!==null&&ee!==void 0?ee:0)+y,y:((X=t.y)!==null&&X!==void 0?X:0)+w,width:(O=t.width)!==null&&O!==void 0?O:Math.ceil(x),height:(R=t.height)!==null&&R!==void 0?R:Math.ceil(v)},u?(c.logger.debug("Document cloned, using foreign object rendering"),C=new _0t(c,F),[4,C.render(h)]):[3,3];case 2:return B=Y.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),T=oAe(c,h),_===T.styles.backgroundColor&&(T.styles.backgroundColor=wh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),C=new b0t(c,F),[4,C.render(T)];case 4:B=Y.sent(),Y.label=5;case 5:return(!((G=t.removeContainer)!==null&&G!==void 0)||G)&&(qY.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,B]}})})},T0t=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?Mw(e,getComputedStyle(n.documentElement).backgroundColor):wh.TRANSPARENT,s=n.body?Mw(e,getComputedStyle(n.body).backgroundColor):wh.TRANSPARENT,o=typeof r=="string"?Mw(e,r):r===null?wh.TRANSPARENT:4294967295;return t===n.documentElement?Cm(a)?Cm(s)?o:s:a:o};const I0t=Object.freeze(Object.defineProperty({__proto__:null,default:zD},Symbol.toStringTag,{value:"Module"})),F0t=e=>{const[t,r]=N.useState(!1),[n,a]=N.useState(null);return N.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const o=document.createElement("script");o.id=s,o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,o.async=!0,o.defer=!0,o.onload=()=>r(!0),o.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(o)},[e]),{isLoaded:t,error:n}},wAe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],O0t=["Mecánica Industrial","Mecánica Automotriz"],D0t=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:wAe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),JY=({empresas:e,isLoaded:t,route:r})=>{const n=N.useRef(null),a=N.useRef(null),s=N.useRef([]),o=N.useRef(null),l=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return N.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),o.current||(o.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],o.current.setMap(null),r?(o.current.setMap(a.current),o.current.setDirections(r)):l.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[l,t,r]),i.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[i.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&l.length===0&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:i.jsx("div",{className:"text-center p-6",children:i.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},P0t=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.duration)==null?void 0:m.value)||0)},0),l=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+l,u=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.distance)==null?void 0:m.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return i.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[i.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),i.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var m,g,x;return i.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[(m=f.duration)==null?void 0:m.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&i.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((v,y)=>v.transit&&i.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[i.jsx("span",{className:"text-lg",children:"🚌"}),i.jsx("span",{dangerouslySetInnerHTML:{__html:v.instructions}})]},y))})]},h)})}),i.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[i.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),i.jsxs("p",{children:["Tiempo en paradas: ",Math.round(l/60)," min"]}),i.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),i.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&i.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},ZY=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,R0t=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),i.jsx(dh,{width:"100%",height:300,children:i.jsxs(cM,{children:[i.jsx(V4,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>i.jsx(Um,{fill:t[n%t.length]},`cell-${n}`))}),i.jsx(uh,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),i.jsx(dh,{width:"100%",height:300,children:i.jsxs(T2,{data:e.porSupervisor,layout:"vertical",children:[i.jsx(B2,{strokeDasharray:"3 3"}),i.jsx(Dg,{type:"number"}),i.jsx(Pg,{type:"category",dataKey:"name",width:150}),i.jsx(uh,{}),i.jsx(Bb,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),i.jsx(dh,{width:"100%",height:300,children:i.jsxs(T2,{data:e.porComuna,children:[i.jsx(B2,{strokeDasharray:"3 3"}),i.jsx(Dg,{dataKey:"name"}),i.jsx(Pg,{}),i.jsx(uh,{}),i.jsx(Bb,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),i.jsx(dh,{width:"100%",height:300,children:i.jsxs(gKe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[i.jsx(Ioe,{}),i.jsx(H4,{dataKey:"subject"}),i.jsx(U4,{angle:30,domain:[0,5]}),i.jsx(rM,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),i.jsx(uh,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),i.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:i.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>i.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[i.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),i.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},L0t=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState("list"),[o,l]=N.useState(null),[c,u]=N.useState(!0),[d,f]=N.useState(null),[h,m]=N.useState(null),[g,x]=N.useState(null),[v,y]=N.useState([]),[w,_]=N.useState(null),[F,B]=N.useState(!1),[T,C]=N.useState("DRIVING"),[S,j]=N.useState(""),[L,P]=N.useState([]),k="AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg",{isLoaded:U,error:Q}=F0t(k);N.useEffect(()=>{u(!0);const ie=alt(t),ue=olt(n),Ce=clt(P);return u(!1),()=>{ie(),ue(),Ce()}},[]);const K=N.useMemo(()=>{const ie=e.reduce((je,_e)=>{const Ae=_e.area||"Sin especificar";return je[Ae]=(je[Ae]||0)+1,je},{}),ue=e.reduce((je,_e)=>{var ve;const Ae=((ve=_e.docenteSupervisor)==null?void 0:ve.nombreCompleto)||"Sin asignar";return je[Ae]=(je[Ae]||0)+1,je},{}),Ce=e.reduce((je,_e)=>{const Ae=_e.direccion.split(",").map(Pe=>Pe.trim()),ve=Ae.length>1?Ae[1]:"Desconocida";return je[ve]=(je[ve]||0)+1,je},{}),ne=wAe.map(je=>{const _e=e.flatMap(ve=>{var Pe;return(Pe=ve.calificaciones.find(Ue=>Ue.elemento===je.elemento))==null?void 0:Pe.score}).filter(ve=>ve!=null),Ae=_e.length>0?_e.reduce((ve,Pe)=>ve+Pe,0)/_e.length:0;return{subject:je.elemento.split(" ")[0],A:Ae,fullMark:5}}),Be=e.map(je=>{const _e=je.calificaciones.map(ve=>ve.score).filter(ve=>ve!=null),Ae=_e.length>0?_e.reduce((ve,Pe)=>ve+Pe,0)/_e.length:0;return{...je,promedio:Ae}}).filter(je=>je.promedio>0).sort((je,_e)=>_e.promedio-je.promedio);return{porEspecialidad:Object.entries(ie).map(([je,_e])=>({name:je,value:_e})),porSupervisor:Object.entries(ue).map(([je,_e])=>({name:je,value:_e})),porComuna:Object.entries(Ce).map(([je,_e])=>({name:je,value:_e})),calificacionPorAmbito:ne,ranking:Be}},[e]),H=async()=>{if(o)try{await slt(o),s("list"),l(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},q=async ie=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await ilt(ie)},z=(ie,ue)=>{l(Ce=>Ce?{...Ce,[ie]:ue}:null)},W=async ie=>{var ue;if(f(ie),(ue=ie==null?void 0:ie.value)!=null&&ue.place_id&&U){const Ce=await ZY(ie.value.place_id);z("direccion",ie.label||""),z("coordenadas",Ce)}else z("direccion",(ie==null?void 0:ie.label)||"")},ee=ie=>{l(JSON.parse(JSON.stringify(ie))),ie.direccion&&f({label:ie.direccion,value:{description:ie.direccion}}),s("form")},X=async ie=>{var ue;if(m(ie),(ue=ie==null?void 0:ie.value)!=null&&ue.place_id&&U){const Ce=await ZY(ie.value.place_id);x(Ce)}},O=ie=>{y(ue=>ue.some(Ce=>Ce.id===ie.id)?ue.filter(Ce=>Ce.id!==ie.id):[...ue,ie])},R=()=>{if(!g||v.length===0||!U)return;B(!0);const ie=new window.google.maps.DirectionsService,ue=v.filter(Ce=>Ce.coordenadas).map(Ce=>({location:Ce.coordenadas,stopover:!0}));ie.route({origin:g,destination:g,waypoints:ue,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[T]},(Ce,ne)=>{B(!1),ne===window.google.maps.DirectionsStatus.OK&&Ce?_(Ce):alert("No se pudo calcular la ruta: "+ne)})},G=()=>{_(null),m(null),x(null),y([]),j("")},Y=async()=>{if(!S||!h||!g||v.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const ie={nombre:S,startPoint:{label:h.label,coords:g},empresas:v.map(ue=>({id:ue.id,nombre:ue.nombre,coordenadas:ue.coordenadas})),travelMode:T};try{await llt(ie),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},te=async()=>{const ie=document.getElementById("map-container-for-pdf"),ue=document.getElementById("route-details-for-pdf");if(!ie||!ue)return;const Ce=new yr("p","mm","a4"),ne=Ce.internal.pageSize.getWidth();Ce.text(`Ruta de Supervisión: ${S||"Sin nombre"}`,10,15),Ce.setFontSize(10),Ce.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const je=(await zD(ie,{useCORS:!0})).toDataURL("image/png");Ce.addImage(je,"PNG",10,30,ne-20,100);const Ae=(await zD(ue)).toDataURL("image/png"),ve=Ce.getImageProperties(Ae),Pe=ve.height*(ne-20)/ve.width;Ce.addImage(Ae,"PNG",10,135,ne-20,Pe),Ce.save(`ruta-${S||"supervision"}.pdf`)},ae=ie=>{m({label:ie.startPoint.label,value:null}),x(ie.startPoint.coords),y(ie.empresas),C(ie.travelMode),j(ie.nombre),s("route")},oe=async ie=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await ult(ie),alert("Ruta eliminada."))};return c?i.jsx("div",{className:"text-center p-8",children:"Cargando..."}):Q?i.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-6 rounded-xl shadow-md",role:"alert",children:[i.jsx("p",{className:"font-bold text-lg",children:"Error de Configuración de Google Maps"}),i.jsx("p",{className:"mt-2",children:Q.message}),i.jsxs("p",{className:"mt-4 text-sm",children:["Para solucionar este problema, por favor crea un archivo llamado ",i.jsx("code",{children:".env.local"})," en la raíz del proyecto y añade la siguiente línea:"]}),i.jsx("pre",{className:"bg-gray-800 text-white p-3 rounded-md mt-2 text-sm",children:"VITE_GOOGLE_MAPS_API_KEY=TU_API_KEY_DE_GOOGLE_MAPS"}),i.jsxs("p",{className:"mt-2 text-sm",children:["Reemplaza ",i.jsx("code",{children:"TU_API_KEY_DE_GOOGLE_MAPS"}),' con tu clave real. Asegúrate de que la clave tenga habilitada la "Maps JavaScript API" y la "Places API" en tu consola de Google Cloud.']})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),i.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&i.jsx("button",{onClick:()=>{s("list"),f(null),l(null),G()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[i.jsx(yte,{size:18})," Dashboard"]}),i.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),i.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),i.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),i.jsx("button",{onClick:()=>{l(D0t()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&i.jsx(R0t,{data:K}),a==="saved-routes"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),i.jsx("div",{className:"space-y-3",children:L.length===0?i.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):L.map(ie=>i.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:ie.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[ie.empresas.length," paradas"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>ae(ie),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),i.jsx("button",{onClick:()=>oe(ie.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},ie.id))})]}),a==="route"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),i.jsx("input",{type:"text",value:S,onChange:ie=>j(ie.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),i.jsx(JX,{apiKey:k,selectProps:{value:h,onChange:X,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),i.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[i.jsx("button",{onClick:()=>C("DRIVING"),className:`w-full py-2 rounded-md transition ${T==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),i.jsx("button",{onClick:()=>C("TRANSIT"),className:`w-full py-2 rounded-md transition ${T==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),i.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(ie=>ie.coordenadas).map(ie=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`route-${ie.id}`,checked:v.some(ue=>ue.id===ie.id),onChange:()=>O(ie),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:`route-${ie.id}`,className:"ml-3 text-sm text-gray-700",children:ie.nombre})]},ie.id))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("button",{onClick:R,disabled:!g||v.length===0||F,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:F?"Calculando...":"Visualizar Ruta"}),i.jsx("button",{onClick:Y,disabled:!S||!g||v.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),i.jsx("button",{onClick:te,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),i.jsx("button",{onClick:G,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),i.jsx("div",{children:i.jsx(JY,{empresas:v,isLoaded:U,route:w})})]}),w&&i.jsx(P0t,{route:w,travelMode:T})]}),a==="map"&&i.jsx(JY,{empresas:e,isLoaded:U}),a==="list"&&i.jsx("div",{className:"space-y-3",children:e.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(ie=>{var ue;return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:ie.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[ie.rut," | ",ie.direccion]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",ie.area||"No especificada"," | Cupos: ",ie.cupos," | Supervisor: ",((ue=ie.docenteSupervisor)==null?void 0:ue.nombreCompleto)||"Ninguno"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>ee(ie),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),i.jsx("button",{onClick:()=>q(ie.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ie.id)})}),a==="form"&&o&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"id"in o?"Editando Empresa":"Nueva Empresa"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(Xwe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.nombre,onChange:ie=>z("nombre",ie.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(z2e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.rut,onChange:ie=>z("rut",ie.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(k_,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),i.jsx("div",{className:"w-full pl-10",children:i.jsx(JX,{apiKey:k,selectProps:{value:d,onChange:W,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(a2,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.contacto,onChange:ie=>z("contacto",ie.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(lEe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"email",value:o.email||"",onChange:ie=>z("email",ie.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(ro,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"number",value:o.cupos,onChange:ie=>z("cupos",parseInt(ie.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(e2,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:o.area||"",onChange:ie=>z("area",ie.target.value),className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),O0t.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(a2,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:o.docenteSupervisor?JSON.stringify(o.docenteSupervisor):"",onChange:ie=>{const ue=ie.target.value;z("docenteSupervisor",ue?JSON.parse(ue):void 0)},className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(ie=>i.jsx("option",{value:JSON.stringify({id:ie.id,nombre:ie.nombreCompleto}),children:ie.nombreCompleto},ie.id))]})]})]}),i.jsxs("div",{className:"space-y-4 pt-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),o.calificaciones.map((ie,ue)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[i.jsx(GEe,{className:"w-5 h-5 text-slate-400"}),i.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:ie.elemento}),i.jsxs("select",{value:ie.score||"",onChange:Ce=>{const ne=[...o.calificaciones];ne[ue].score=Ce.target.value?parseInt(Ce.target.value):null,z("calificaciones",ne)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[i.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(Ce=>i.jsx("option",{value:Ce,children:Ce},Ce))]})]},ue))]}),i.jsx("div",{className:"pt-6",children:i.jsx("button",{onClick:H,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!o.nombre||!o.rut,children:"Guardar Empresa"})})]})]})},pU="dpd_actividades",EAe="dpd_respuestas",M0t="usuarios";function U0t(e,{includeArchived:t=!1}={}){const r=mt(tt,pU),n=t?Ht(r,ar("createdAt","desc")):Ht(r,xr("isArchived","==",!1),ar("createdAt","desc"));return mr(n,a=>{const s=a.docs.map(o=>({id:o.id,...o.data()}));e(s)})}async function Q0t(e){const t=mt(tt,pU);return(await mn(t,{...e,isArchived:!1,createdAt:Na(),updatedAt:Na()})).id}async function H0t(e){const t=nr(tt,pU,e);await Ca(t)}function V0t(e,t){const r=mt(tt,EAe),n=Ht(r,xr("activityId","==",e),ar("createdAt","desc"));return mr(n,a=>{const s=a.docs.map(o=>({id:o.id,...o.data()}));t(s)})}async function z0t(e){const t=mt(tt,EAe);return(await mn(t,{...e,createdAt:Na()})).id}function $0t(e,t){const r=mt(tt,M0t),n=Ht(r,xr("profile","in",e));return mr(n,a=>{const s=a.docs.map(o=>{const l=o.data();return{id:o.id,nombre:(l==null?void 0:l.displayName)||(l==null?void 0:l.name)||(l==null?void 0:l.email)||"Sin nombre",profile:l==null?void 0:l.profile,email:l==null?void 0:l.email}});t(s)})}function NAe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const uk=500,eJ=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificación y organización del currículo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),Ly=st.memo(({title:e,icon:t,right:r,children:n})=>i.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[i.jsxs("header",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),G0t=st.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>i.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return i.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),q0t=st.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?i.jsx("ul",{className:"space-y-2",children:e.map(s=>{const o=s.id===t;return i.jsxs("li",{children:[i.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${o?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo} • ${s.dimension} / ${s.subdimension}`,children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Eg,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:s.titulo})]}),i.jsx(lR,{className:"w-4 h-4 opacity-70"})]}),n(s)&&i.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):i.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(L2e,{className:"w-4 h-4"})," Aún no hay actividades creadas."]})),I6=st.memo(({label:e,value:t,pill:r})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?i.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):i.jsx("span",{className:"font-medium",children:t})]})),K0t=st.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return i.jsxs("div",{className:"relative mt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),i.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),i.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:i.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),W0t=st.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=N.useCallback(o=>r(e.id,o.target.value),[e.id,r]),s=N.useCallback(()=>n(e.id),[e.id,n]);return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opción ${t.findIndex(o=>o.id===e.id)+1}`}),i.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opción",children:i.jsx(Va,{className:"w-4 h-4"})})]})}),X0t=st.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=N.useCallback(f=>n(e.id,{enunciado:f.target.value}),[e.id,n]),s=N.useCallback(f=>n(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,n]),o=N.useCallback(f=>n(e.id,{multiple:f.target.checked}),[e.id,n]),l=N.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=N.useCallback((f,h)=>{n(e.id,{opciones:e.opciones.map(m=>m.id===f?{...m,text:h}:m)})},[e.id,e.opciones,n]),u=N.useCallback(f=>n(e.id,{opciones:e.opciones.filter(h=>h.id!==f)}),[e.id,e.opciones,n]),d=N.useCallback(()=>r(e.id),[e.id,r]);return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1," • ",e.tipo==="abierta"?"Abierta":"Selección múltiple"]}),i.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:i.jsx(Va,{className:"w-4 h-4"})})]}),i.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("label",{className:"text-sm",children:"Máx. palabras"}),i.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||uk,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:o})," Permitir selección múltiple"]}),e.opciones.map(f=>i.jsx(W0t,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),i.jsx("button",{onClick:l,className:"text-sm text-sky-700 hover:underline",children:"+ Añadir opción"})]})]})}),Y0t=st.memo(({q:e,respuestas:t,onChange:r})=>{var o,l;const n=N.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((o=t[e.id])==null?void 0:o.valorTexto)||"";return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Máximo ${e.maxPalabras||uk} palabras…`,className:"w-full border rounded-lg px-3 py-2"}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[NAe(c)," / ",e.maxPalabras||uk," palabras"]})]})}const a=((l=t[e.id])==null?void 0:l.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return i.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),i.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),J0t=({currentUser:e})=>{var O;const[t,r]=N.useState("responder"),[n,a]=N.useState([]),[s,o]=N.useState(""),[l,c]=N.useState(""),[u,d]=N.useState(eJ()),f=N.useCallback(R=>d(G=>({...G,...R})),[]),[h,m]=N.useState([]),[g,x]=N.useState({}),[v,y]=N.useState([]),w=xH.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);N.useEffect(()=>{const R=U0t(G=>{a(G),o(Y=>{var te;return Y||(((te=G[0])==null?void 0:te.id)??"")})});return()=>R()},[]),N.useEffect(()=>{const R=$0t(["PROFESORADO","SUBDIRECCION"],G=>{m(G),d(Y=>{if(Y.creadorId)return Y;const te=G.find(ae=>ae.id===(e==null?void 0:e.uid));return te?{...Y,creadorId:te.id,creadorNombre:te.nombre,creadorPerfil:te.profile||Y.creadorPerfil}:Y})});return()=>R()},[e]),N.useEffect(()=>{if(!s)return;const R=V0t(s,y);return()=>R()},[s]);const _=N.useMemo(()=>n.find(R=>R.id===s),[n,s]);N.useMemo(()=>rh[u.dimension]||[],[u.dimension]),N.useEffect(()=>{d(R=>{const G=rh[R.dimension]||[],Y=G.includes(R.subdimension)?R.subdimension:G[0]||"";return Y===R.subdimension?R:{...R,subdimension:Y}})},[u.dimension]);const F=N.useCallback(()=>{const R={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aquí tu pregunta abierta",maxPalabras:uk};d(G=>({...G,preguntas:[...G.preguntas,R]}))},[]),B=N.useCallback(()=>{const R={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opción(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opción 1"},{id:crypto.randomUUID(),text:"Opción 2"},{id:crypto.randomUUID(),text:"Opción 3"},{id:crypto.randomUUID(),text:"Opción 4"}],multiple:!0};d(G=>({...G,preguntas:[...G.preguntas,R]}))},[]),T=N.useCallback((R,G)=>{d(Y=>({...Y,preguntas:Y.preguntas.map(te=>te.id===R?{...te,...G}:te)}))},[]),C=N.useCallback(R=>{d(G=>({...G,preguntas:G.preguntas.filter(Y=>Y.id!==R)}))},[]),[S,j]=N.useState(!1),L=N.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){j(!0);try{const G=(await PYe(u.aiTema,u.aiCantidad)).map(Y=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:Y.enunciado,opciones:Y.opciones.slice(0,5).map(te=>({id:crypto.randomUUID(),text:te})),multiple:!0}));d(Y=>({...Y,preguntas:[...Y.preguntas,...G]}))}finally{j(!1)}}},[u.aiTema,u.aiCantidad]),[P,k]=N.useState([]);N.useEffect(()=>{(async()=>{var Y;if(!_)return;const G=[];for(const te of v)if(te.respuestas)for(const[ae,oe]of Object.entries(te.respuestas)){const ie=_.preguntas.find(Ce=>Ce.id===ae);if(!ie||ie.tipo!=="abierta")continue;const ue=oe;ue.tipo==="abierta"&&((Y=ue.valorTexto)!=null&&Y.trim())&&G.push(ue.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",G.length),G.length>0)try{const te=await RYe(G,30);console.log("Keywords generadas:",te),k(te)}catch(te){console.error("Error al extraer keywords:",te),k([])}else k([])})()},[_,v]);const U=N.useMemo(()=>{if(!_)return{};const R={};for(const G of _.preguntas)G.tipo==="seleccion_multiple"&&(R[G.id]={},(G.opciones||[]).forEach(Y=>R[G.id][Y]=0));for(const G of v)for(const[Y,te]of Object.entries(G.respuestas||{})){const ae=te;if((ae==null?void 0:ae.tipo)==="seleccion_multiple")for(const oe of ae.seleccionados||[])R[Y]||(R[Y]={}),R[Y][oe]=(R[Y][oe]||0)+1}return R},[_,v]),Q=N.useCallback(R=>R.map(G=>G.tipo==="abierta"?G:{...G,opciones:G.opciones.map(Y=>Y.text)}),[]),K=N.useCallback(()=>d(eJ()),[]),H=N.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un título");if(!u.creadorId)return alert("Debes seleccionar un creador");const R={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:Q(u.preguntas)},G=await Q0t(R);K(),o(G),r("responder")},[u,Q,K]),q=N.useCallback(async(R,G)=>{var te;if(window.confirm(`¿Eliminar "${G}"?
Se eliminarán la actividad, sus preguntas y respuestas. Esta acción no se puede deshacer.`)){if(await H0t(R),s===R){const ae=n.filter(oe=>oe.id!==R);o(((te=ae[0])==null?void 0:te.id)||""),ae.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),z=N.useCallback(async()=>{if(!_||!v.length)return;const R=new yr("p","mm","a4"),G=20;let Y=G;R.setFontSize(20),R.text(`Informe: ${_.titulo}`,G,Y),Y+=10,R.setFontSize(12),R.text(`Dimensión: ${_.dimension}`,G,Y+=10),R.text(`Subdimensión: ${_.subdimension}`,G,Y+=7),R.text(`Creador: ${_.creadorNombre} (${_.creadorPerfil})`,G,Y+=7),R.text(`Total de respuestas: ${v.length}`,G,Y+=7),Y+=10;for(const te of _.preguntas){if(Y>250&&(R.addPage(),Y=G),R.setFontSize(14),R.text(`Pregunta: ${te.enunciado}`,G,Y+=10),Y+=5,R.setFontSize(12),te.tipo==="seleccion_multiple"){const ae=U[te.id]||{},oe=v.length;Object.entries(ae).forEach(([ie,ue])=>{const Ce=oe>0?Math.round(ue/oe*100):0;R.text(`${ie}: ${ue} respuestas (${Ce}%)`,G+5,Y+=7)})}else{R.text("Respuestas:",G,Y+=7);for(const ae of v){const oe=ae.respuestas[te.id];if((oe==null?void 0:oe.tipo)==="abierta"&&oe.valorTexto){Y>250&&(R.addPage(),Y=G),R.text(`${ae.userNombre}:`,G+5,Y+=7);const ie=R.splitTextToSize(oe.valorTexto,170);R.text(ie,G+10,Y+=7),Y+=ie.length*7}}}Y+=10}if(P.length>0){Y>250&&(R.addPage(),Y=G),R.setFontSize(14),R.text("Conceptos clave detectados:",G,Y+=10),R.setFontSize(12);const te=P.map(oe=>`${oe.keyword} (${Math.round(oe.score*100)}%)`).join(", "),ae=R.splitTextToSize(te,170);R.text(ae,G,Y+=7)}R.save(`informe_${_.titulo.replace(/\s+/g,"_")}.pdf`)},[_,v,U,P]),W=N.useCallback(R=>{const G=e==null?void 0:e.isAdmin,Y=R.creadorId===(e==null?void 0:e.uid);return w&&(G||Y)},[e,w]),ee=N.useCallback((R,G)=>{x(Y=>({...Y,[R.id]:R.tipo==="abierta"?{tipo:"abierta",valorTexto:G}:{tipo:"seleccion_multiple",seleccionados:G}}))},[]),X=N.useCallback(async()=>{if(_){for(const R of _.preguntas){const G=g[R.id];if(G&&R.tipo==="abierta"&&R.maxPalabras){const Y=NAe(G.valorTexto||"");if(Y>R.maxPalabras)return alert(`La respuesta a "${R.enunciado}" supera el máximo de ${R.maxPalabras} palabras (${Y}).`)}}await z0t({activityId:_.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Anónimo",respuestas:g}),x({}),alert("¡Respuestas enviadas!")}},[_,g,e]);return i.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(dR,{className:"w-7 h-7 text-indigo-600"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),i.jsx(G0t,{value:t,onChange:r,canCreate:w})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[i.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:i.jsx(Ly,{title:"Actividades",icon:i.jsx(Eg,{className:"w-5 h-5 text-indigo-600"}),children:i.jsx(q0t,{items:n,selectedId:s,onSelect:R=>{o(R),r("responder")},canDelete:W,onDelete:q})})}),i.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&w&&i.jsxs(Ly,{title:"Nueva actividad / sesión",icon:i.jsx(_H,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:H,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Yc,{className:"w-4 h-4"}),"Guardar"]}),children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Título"}),i.jsx("input",{value:u.titulo,onChange:R=>f({titulo:R.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Área de trabajo (Dimensión PME)"}),i.jsx("select",{value:u.dimension,onChange:R=>f({dimension:R.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(rh).map(R=>i.jsx("option",{value:R,children:R},R))}),i.jsx("select",{value:u.subdimension,onChange:R=>f({subdimension:R.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(rh[u.dimension]||[]).map(R=>i.jsx("option",{value:R,children:R},R))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador • Perfil"}),i.jsx("select",{value:u.creadorPerfil,onChange:R=>f({creadorPerfil:R.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:xH.map(R=>i.jsx("option",{value:R,children:R},R))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador • Usuario"}),i.jsxs("select",{value:u.creadorId,onChange:R=>{const G=R.target.value,Y=h.find(te=>te.id===G);f({creadorId:G,creadorNombre:(Y==null?void 0:Y.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[i.jsx("option",{value:"",children:"Seleccione…"}),h.filter(R=>R.profile===u.creadorPerfil).map(R=>i.jsx("option",{value:R.id,children:R.nombre},R.id))]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[i.jsx(wte,{className:"w-4 h-4"})," Preguntas"]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsxs("button",{onClick:F,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(_o,{className:"w-4 h-4"})," Abierta"]}),i.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(_o,{className:"w-4 h-4"})," Selección múltiple"]}),i.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[i.jsx(lNe,{className:"w-4 h-4"})," IA"]}),i.jsx("input",{value:u.aiTema,onChange:R=>f({aiTema:R.target.value}),placeholder:"Tema para IA (p. ej., evaluación formativa)",className:"border rounded-lg px-3 py-1.5"}),i.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:R=>f({aiCantidad:parseInt(R.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),i.jsxs("button",{onClick:L,disabled:S||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[i.jsx(ng,{className:"w-4 h-4"}),S?"Generando…":"Generar con IA"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((R,G)=>i.jsx(X0t,{q:R,index:G,onRemove:C,onPatch:T},R.id)),u.preguntas.length===0&&i.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(ts,{className:"w-4 h-4"}),"Añade preguntas abiertas o de selección múltiple (o usa IA)."]})]})]})]}),t==="responder"&&_&&i.jsx(Ly,{title:`Responder: ${_.titulo}`,icon:i.jsx(ro,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:X,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Yc,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[i.jsx(I6,{pill:!0,label:"Dimensión",value:_.dimension}),i.jsx(I6,{pill:!0,label:"Subdimensión",value:_.subdimension}),i.jsx(I6,{pill:!0,label:"Creador",value:`${_.creadorNombre} • ${_.creadorPerfil}`})]}),_.preguntas.map(R=>i.jsx(Y0t,{q:R,respuestas:g,onChange:ee},R.id))]})}),t==="respuestas_individuales"&&_&&i.jsx(Ly,{title:`Respuestas individuales: ${_.titulo}`,icon:i.jsx(ro,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:z,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(jh,{className:"w-4 h-4"}),"Descargar informe"]}),i.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(qc,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:i.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[i.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:i.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[i.jsx(fy,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(R=>{var G;return i.jsxs("button",{onClick:()=>c(R.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l===R.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:i.jsx(fy,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("span",{className:"font-medium",children:R.userNombre})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[i.jsx(oc,{className:"w-3.5 h-3.5"}),new Date(((G=R.createdAt)==null?void 0:G.seconds)*1e3).toLocaleDateString()]})]},R.userId)}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(fy,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay respuestas todavía"})]})})]})}),i.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:l?i.jsxs(i.Fragment,{children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[i.jsx(_H,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",i.jsx("span",{className:"text-indigo-600",children:(O=v.find(R=>R.userId===l))==null?void 0:O.userNombre})]}),i.jsx("div",{className:"space-y-6",children:_.preguntas.map(R=>{var te;const G=v.find(ae=>ae.userId===l),Y=(te=G==null?void 0:G.respuestas)==null?void 0:te[R.id];return console.log("Respuesta encontrada:",{preguntaId:R.id,tipo:R.tipo,respuesta:Y}),i.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:R.tipo==="abierta"?i.jsx(SH,{className:"w-5 h-5 text-indigo-600"}):i.jsx(Rv,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900",children:R.enunciado}),i.jsx("p",{className:"text-sm text-slate-500 mt-1",children:R.tipo==="abierta"?"Respuesta abierta":"Selección múltiple"})]})]}),R.tipo==="abierta"?(Y==null?void 0:Y.tipo)==="abierta"&&Y.valorTexto?i.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:Y.valorTexto})}):i.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):i.jsxs("div",{className:"space-y-2 mt-3",children:[(R.opciones||[]).map(ae=>{const ie=((Y==null?void 0:Y.tipo)==="seleccion_multiple"?Y.seleccionados||[]:[]).includes(ae.text);return i.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${ie?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[i.jsx("div",{className:"flex-shrink-0",children:ie?i.jsx(ts,{className:"w-4 h-4 text-indigo-600"}):i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),i.jsx("span",{className:"text-sm",children:typeof ae=="string"?ae:ae.text})]},typeof ae=="string"?ae:ae.id)}),!Y&&i.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},R.id)})})]}):i.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&_&&i.jsxs(Ly,{title:`Dashboard: ${_.titulo}`,icon:i.jsx(Zw,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx(fy,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),W(_)&&i.jsxs("button",{onClick:()=>q(_.id,_.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[i.jsx(Va,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[i.jsx("div",{className:"mb-6",children:i.jsxs("button",{onClick:z,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(jh,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(fy,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),i.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:i.jsx(Rv,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),i.jsx("p",{className:"text-xl font-semibold",children:_.preguntas.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(Ng,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),i.jsx("p",{className:"text-sm font-medium truncate",children:_.creadorNombre})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:i.jsx(oc,{className:"w-5 h-5 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),i.jsx("p",{className:"text-sm font-medium",children:(()=>{const R=_.createdAt,G=R!=null&&R.toDate?R.toDate():R!=null&&R.seconds?new Date(R.seconds*1e3):R?new Date(R):null;return G?G.toLocaleDateString():"No disponible"})()})]})]})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(bw,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Resultados de selección múltiple"})]}),i.jsxs("div",{className:"space-y-4",children:[_.preguntas.filter(R=>R.tipo==="seleccion_multiple").map(R=>i.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[i.jsx("p",{className:"font-medium mb-3 text-slate-700",children:R.enunciado}),Object.entries(U[R.id]||{}).map(([G,Y])=>i.jsx(K0t,{label:G,value:Y},G)),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[i.jsx(fb,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},R.id)),_.preguntas.filter(R=>R.tipo==="seleccion_multiple").length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Rv,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay preguntas de selección múltiple en esta actividad."})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx($we,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),P.length?i.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(R=>i.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(R.score*18)}px`},children:R.keyword},R.keyword))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(SH,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"Aún no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var UE=e=>e.type==="checkbox",eg=e=>e instanceof Date,wl=e=>e==null;const CAe=e=>typeof e=="object";var ei=e=>!wl(e)&&!Array.isArray(e)&&CAe(e)&&!eg(e),Z0t=e=>ei(e)&&e.target?UE(e.target)?e.target.checked:e.target.value:e,emt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,tmt=(e,t)=>e.has(emt(t)),rmt=e=>{const t=e.constructor&&e.constructor.prototype;return ei(t)&&t.hasOwnProperty("isPrototypeOf")},gU=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Za(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(gU&&(e instanceof Blob||n))&&(r||ei(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!rmt(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Za(e[a]));else return e;return t}var Tj=e=>/^\w*$/.test(e),es=e=>e===void 0,Ij=e=>Array.isArray(e)?e.filter(Boolean):[],xU=e=>Ij(e.replace(/["|']|\]/g,"").split(/\.|\[/)),dr=(e,t,r)=>{if(!t||!ei(e))return r;const n=(Tj(t)?[t]:xU(t)).reduce((a,s)=>wl(a)?a:a[s],e);return es(n)||n===e?es(e[t])?r:e[t]:n},Hf=e=>typeof e=="boolean",Da=(e,t,r)=>{let n=-1;const a=Tj(t)?[t]:xU(t),s=a.length,o=s-1;for(;++n<s;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=ei(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const tJ={BLUR:"blur",FOCUS_OUT:"focusout"},zu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},JA={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},_Ae=st.createContext(null);_Ae.displayName="HookFormContext";const nmt=()=>st.useContext(_Ae);var amt=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const o=s;return t._proxyFormState[o]!==zu.all&&(t._proxyFormState[o]=!n||zu.all),e[o]}});return a};const SAe=typeof window<"u"?st.useLayoutEffect:st.useEffect;var eA=e=>typeof e=="string",smt=(e,t,r,n,a)=>eA(e)?(n&&t.watch.add(e),dr(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),dr(r,s))):(n&&(t.watchAll=!0),r),$D=e=>wl(e)||!CAe(e);function rm(e,t,r=new WeakSet){if($D(e)||$D(t))return e===t;if(eg(e)&&eg(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const o=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const l=t[s];if(eg(o)&&eg(l)||ei(o)&&ei(l)||Array.isArray(o)&&Array.isArray(l)?!rm(o,l,r):o!==l)return!1}}return!0}var imt=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},ic=e=>Array.isArray(e)?e:[e],rJ=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},vl=e=>ei(e)&&!Object.keys(e).length,vU=e=>e.type==="file",Dd=e=>typeof e=="function",dk=e=>{if(!gU)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},kAe=e=>e.type==="select-multiple",bU=e=>e.type==="radio",omt=e=>bU(e)||UE(e),F6=e=>dk(e)&&e.isConnected;function lmt(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=es(e)?n++:e[t[n++]];return e}function cmt(e){for(const t in e)if(e.hasOwnProperty(t)&&!es(e[t]))return!1;return!0}function qs(e,t){const r=Array.isArray(t)?t:Tj(t)?[t]:xU(t),n=r.length===1?e:lmt(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(ei(n)&&vl(n)||Array.isArray(n)&&cmt(n))&&qs(e,r.slice(0,-1)),e}var jAe=e=>{for(const t in e)if(Dd(e[t]))return!0;return!1};function fk(e,t={}){const r=Array.isArray(e);if(ei(e)||r)for(const n in e)Array.isArray(e[n])||ei(e[n])&&!jAe(e[n])?(t[n]=Array.isArray(e[n])?[]:{},fk(e[n],t[n])):wl(e[n])||(t[n]=!0);return t}function BAe(e,t,r){const n=Array.isArray(e);if(ei(e)||n)for(const a in e)Array.isArray(e[a])||ei(e[a])&&!jAe(e[a])?es(t)||$D(r[a])?r[a]=Array.isArray(e[a])?fk(e[a],[]):{...fk(e[a])}:BAe(e[a],wl(t)?{}:t[a],r[a]):r[a]=!rm(e[a],t[a]);return r}var My=(e,t)=>BAe(e,t,fk(t));const nJ={value:!1,isValid:!1},aJ={value:!0,isValid:!0};var TAe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!es(e[0].attributes.value)?es(e[0].value)||e[0].value===""?aJ:{value:e[0].value,isValid:!0}:aJ:nJ}return nJ},IAe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>es(e)?e:t?e===""?NaN:e&&+e:r&&eA(e)?new Date(e):n?n(e):e;const sJ={isValid:!1,value:null};var FAe=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,sJ):sJ;function iJ(e){const t=e.ref;return vU(t)?t.files:bU(t)?FAe(e.refs).value:kAe(t)?[...t.selectedOptions].map(({value:r})=>r):UE(t)?TAe(e.refs).value:IAe(es(t.value)?e.ref.value:t.value,e)}var umt=(e,t,r,n)=>{const a={};for(const s of e){const o=dr(t,s);o&&Da(a,s,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},Ak=e=>e instanceof RegExp,Uy=e=>es(e)?e:Ak(e)?e.source:ei(e)?Ak(e.value)?e.value.source:e.value:e,Bv=e=>({isOnSubmit:!e||e===zu.onSubmit,isOnBlur:e===zu.onBlur,isOnChange:e===zu.onChange,isOnAll:e===zu.all,isOnTouch:e===zu.onTouched});const oJ="AsyncFunction";var dmt=e=>!!e&&!!e.validate&&!!(Dd(e.validate)&&e.validate.constructor.name===oJ||ei(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===oJ)),fmt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),GD=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const eb=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=dr(e,a);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(eb(l,t))break}else if(ei(l)&&eb(l,t))break}}};function lJ(e,t,r){const n=dr(e,r);if(n||Tj(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),o=dr(t,s),l=dr(e,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};a.pop()}return{name:r}}var Amt=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return vl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(o=>t[o]===(!n||zu.all))},hmt=(e,t,r)=>!e||!t||e===t||ic(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),mmt=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,pmt=(e,t)=>!Ij(dr(e,t)).length&&qs(e,t),OAe=(e,t,r)=>{const n=ic(dr(e,r));return Da(n,"root",t[r]),Da(e,r,n),e},n_=e=>eA(e);function cJ(e,t,r="validate"){if(n_(e)||Array.isArray(e)&&e.every(n_)||Hf(e)&&!e)return{type:r,message:n_(e)?e:"",ref:t}}var iv=e=>ei(e)&&!Ak(e)?e:{value:e,message:""},qD=async(e,t,r,n,a,s)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,w=dr(r,x);if(!y||t.has(x))return{};const _=l?l[0]:o,F=k=>{a&&_.reportValidity&&(_.setCustomValidity(Hf(k)?"":k||""),_.reportValidity())},B={},T=bU(o),C=UE(o),S=T||C,j=(v||vU(o))&&es(o.value)&&es(w)||dk(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,L=imt.bind(null,x,n,B),P=(k,U,Q,K=JA.maxLength,H=JA.minLength)=>{const q=k?U:Q;B[x]={type:k?K:H,message:q,ref:o,...L(k?K:H,q)}};if(s?!Array.isArray(w)||!w.length:c&&(!S&&(j||wl(w))||Hf(w)&&!w||C&&!TAe(l).isValid||T&&!FAe(l).isValid)){const{value:k,message:U}=n_(c)?{value:!!c,message:c}:iv(c);if(k&&(B[x]={type:JA.required,message:U,ref:_,...L(JA.required,U)},!n))return F(U),B}if(!j&&(!wl(f)||!wl(h))){let k,U;const Q=iv(h),K=iv(f);if(!wl(w)&&!isNaN(w)){const H=o.valueAsNumber||w&&+w;wl(Q.value)||(k=H>Q.value),wl(K.value)||(U=H<K.value)}else{const H=o.valueAsDate||new Date(w),q=ee=>new Date(new Date().toDateString()+" "+ee),z=o.type=="time",W=o.type=="week";eA(Q.value)&&w&&(k=z?q(w)>q(Q.value):W?w>Q.value:H>new Date(Q.value)),eA(K.value)&&w&&(U=z?q(w)<q(K.value):W?w<K.value:H<new Date(K.value))}if((k||U)&&(P(!!k,Q.message,K.message,JA.max,JA.min),!n))return F(B[x].message),B}if((u||d)&&!j&&(eA(w)||s&&Array.isArray(w))){const k=iv(u),U=iv(d),Q=!wl(k.value)&&w.length>+k.value,K=!wl(U.value)&&w.length<+U.value;if((Q||K)&&(P(Q,k.message,U.message),!n))return F(B[x].message),B}if(m&&!j&&eA(w)){const{value:k,message:U}=iv(m);if(Ak(k)&&!w.match(k)&&(B[x]={type:JA.pattern,message:U,ref:o,...L(JA.pattern,U)},!n))return F(U),B}if(g){if(Dd(g)){const k=await g(w,r),U=cJ(k,_);if(U&&(B[x]={...U,...L(JA.validate,U.message)},!n))return F(U.message),B}else if(ei(g)){let k={};for(const U in g){if(!vl(k)&&!n)break;const Q=cJ(await g[U](w,r),_,U);Q&&(k={...Q,...L(U,Q.message)},F(Q.message),n&&(B[x]=k))}if(!vl(k)&&(B[x]={ref:_,...k},!n))return B}}return F(!0),B};const gmt={mode:zu.onSubmit,reValidateMode:zu.onChange,shouldFocusError:!0};function xmt(e={}){let t={...gmt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Dd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=ei(t.defaultValues)||ei(t.values)?Za(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Za(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:rJ(),state:rJ()},m=t.criteriaMode===zu.all,g=de=>be=>{clearTimeout(u),u=setTimeout(de,be)},x=async de=>{if(!t.disabled&&(d.isValid||f.isValid||de)){const be=t.resolver?vl((await C()).errors):await j(n,!0);be!==r.isValid&&h.state.next({isValid:be})}},v=(de,be)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((de||Array.from(l.mount)).forEach(De=>{De&&(be?Da(r.validatingFields,De,be):qs(r.validatingFields,De))}),h.state.next({validatingFields:r.validatingFields,isValidating:!vl(r.validatingFields)}))},y=(de,be=[],De,Ve,We=!0,Je=!0)=>{if(Ve&&De&&!t.disabled){if(o.action=!0,Je&&Array.isArray(dr(n,de))){const At=De(dr(n,de),Ve.argA,Ve.argB);We&&Da(n,de,At)}if(Je&&Array.isArray(dr(r.errors,de))){const At=De(dr(r.errors,de),Ve.argA,Ve.argB);We&&Da(r.errors,de,At),pmt(r.errors,de)}if((d.touchedFields||f.touchedFields)&&Je&&Array.isArray(dr(r.touchedFields,de))){const At=De(dr(r.touchedFields,de),Ve.argA,Ve.argB);We&&Da(r.touchedFields,de,At)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=My(a,s)),h.state.next({name:de,isDirty:P(de,be),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Da(s,de,be)},w=(de,be)=>{Da(r.errors,de,be),h.state.next({errors:r.errors})},_=de=>{r.errors=de,h.state.next({errors:r.errors,isValid:!1})},F=(de,be,De,Ve)=>{const We=dr(n,de);if(We){const Je=dr(s,de,es(De)?dr(a,de):De);es(Je)||Ve&&Ve.defaultChecked||be?Da(s,de,be?Je:iJ(We._f)):Q(de,Je),o.mount&&x()}},B=(de,be,De,Ve,We)=>{let Je=!1,At=!1;const vt={name:de};if(!t.disabled){if(!De||Ve){(d.isDirty||f.isDirty)&&(At=r.isDirty,r.isDirty=vt.isDirty=P(),Je=At!==vt.isDirty);const wt=rm(dr(a,de),be);At=!!dr(r.dirtyFields,de),wt?qs(r.dirtyFields,de):Da(r.dirtyFields,de,!0),vt.dirtyFields=r.dirtyFields,Je=Je||(d.dirtyFields||f.dirtyFields)&&At!==!wt}if(De){const wt=dr(r.touchedFields,de);wt||(Da(r.touchedFields,de,De),vt.touchedFields=r.touchedFields,Je=Je||(d.touchedFields||f.touchedFields)&&wt!==De)}Je&&We&&h.state.next(vt)}return Je?vt:{}},T=(de,be,De,Ve)=>{const We=dr(r.errors,de),Je=(d.isValid||f.isValid)&&Hf(be)&&r.isValid!==be;if(t.delayError&&De?(c=g(()=>w(de,De)),c(t.delayError)):(clearTimeout(u),c=null,De?Da(r.errors,de,De):qs(r.errors,de)),(De?!rm(We,De):We)||!vl(Ve)||Je){const At={...Ve,...Je&&Hf(be)?{isValid:be}:{},errors:r.errors,name:de};r={...r,...At},h.state.next(At)}},C=async de=>{v(de,!0);const be=await t.resolver(s,t.context,umt(de||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(de),be},S=async de=>{const{errors:be}=await C(de);if(de)for(const De of de){const Ve=dr(be,De);Ve?Da(r.errors,De,Ve):qs(r.errors,De)}else r.errors=be;return be},j=async(de,be,De={valid:!0})=>{for(const Ve in de){const We=de[Ve];if(We){const{_f:Je,...At}=We;if(Je){const vt=l.array.has(Je.name),wt=We._f&&dmt(We._f);wt&&d.validatingFields&&v([Ve],!0);const Tt=await qD(We,l.disabled,s,m,t.shouldUseNativeValidation&&!be,vt);if(wt&&d.validatingFields&&v([Ve]),Tt[Je.name]&&(De.valid=!1,be))break;!be&&(dr(Tt,Je.name)?vt?OAe(r.errors,Tt,Je.name):Da(r.errors,Je.name,Tt[Je.name]):qs(r.errors,Je.name))}!vl(At)&&await j(At,be,De)}}return De.valid},L=()=>{for(const de of l.unMount){const be=dr(n,de);be&&(be._f.refs?be._f.refs.every(De=>!F6(De)):!F6(be._f.ref))&&ae(de)}l.unMount=new Set},P=(de,be)=>!t.disabled&&(de&&be&&Da(s,de,be),!rm(ee(),a)),k=(de,be,De)=>smt(de,l,{...o.mount?s:es(be)?a:eA(de)?{[de]:be}:be},De,be),U=de=>Ij(dr(o.mount?s:a,de,t.shouldUnregister?dr(a,de,[]):[])),Q=(de,be,De={})=>{const Ve=dr(n,de);let We=be;if(Ve){const Je=Ve._f;Je&&(!Je.disabled&&Da(s,de,IAe(be,Je)),We=dk(Je.ref)&&wl(be)?"":be,kAe(Je.ref)?[...Je.ref.options].forEach(At=>At.selected=We.includes(At.value)):Je.refs?UE(Je.ref)?Je.refs.forEach(At=>{(!At.defaultChecked||!At.disabled)&&(Array.isArray(We)?At.checked=!!We.find(vt=>vt===At.value):At.checked=We===At.value||!!We)}):Je.refs.forEach(At=>At.checked=At.value===We):vU(Je.ref)?Je.ref.value="":(Je.ref.value=We,Je.ref.type||h.state.next({name:de,values:Za(s)})))}(De.shouldDirty||De.shouldTouch)&&B(de,We,De.shouldTouch,De.shouldDirty,!0),De.shouldValidate&&W(de)},K=(de,be,De)=>{for(const Ve in be){if(!be.hasOwnProperty(Ve))return;const We=be[Ve],Je=de+"."+Ve,At=dr(n,Je);(l.array.has(de)||ei(We)||At&&!At._f)&&!eg(We)?K(Je,We,De):Q(Je,We,De)}},H=(de,be,De={})=>{const Ve=dr(n,de),We=l.array.has(de),Je=Za(be);Da(s,de,Je),We?(h.array.next({name:de,values:Za(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&De.shouldDirty&&h.state.next({name:de,dirtyFields:My(a,s),isDirty:P(de,Je)})):Ve&&!Ve._f&&!wl(Je)?K(de,Je,De):Q(de,Je,De),GD(de,l)&&h.state.next({...r,name:de}),h.state.next({name:o.mount?de:void 0,values:Za(s)})},q=async de=>{o.mount=!0;const be=de.target;let De=be.name,Ve=!0;const We=dr(n,De),Je=wt=>{Ve=Number.isNaN(wt)||eg(wt)&&isNaN(wt.getTime())||rm(wt,dr(s,De,wt))},At=Bv(t.mode),vt=Bv(t.reValidateMode);if(We){let wt,Tt;const Lt=be.type?iJ(We._f):Z0t(de),Et=de.type===tJ.BLUR||de.type===tJ.FOCUS_OUT,_r=!fmt(We._f)&&!t.resolver&&!dr(r.errors,De)&&!We._f.deps||mmt(Et,dr(r.touchedFields,De),r.isSubmitted,vt,At),qt=GD(De,l,Et);Da(s,De,Lt),Et?(!be||!be.readOnly)&&(We._f.onBlur&&We._f.onBlur(de),c&&c(0)):We._f.onChange&&We._f.onChange(de);const tn=B(De,Lt,Et),Br=!vl(tn)||qt;if(!Et&&h.state.next({name:De,type:de.type,values:Za(s)}),_r)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?Et&&x():Et||x()),Br&&h.state.next({name:De,...qt?{}:tn});if(!Et&&qt&&h.state.next({...r}),t.resolver){const{errors:Kr}=await C([De]);if(Je(Lt),Ve){const Fn=lJ(r.errors,n,De),Lr=lJ(Kr,n,Fn.name||De);wt=Lr.error,De=Lr.name,Tt=vl(Kr)}}else v([De],!0),wt=(await qD(We,l.disabled,s,m,t.shouldUseNativeValidation))[De],v([De]),Je(Lt),Ve&&(wt?Tt=!1:(d.isValid||f.isValid)&&(Tt=await j(n,!0)));Ve&&(We._f.deps&&W(We._f.deps),T(De,Tt,wt,tn))}},z=(de,be)=>{if(dr(r.errors,be)&&de.focus)return de.focus(),1},W=async(de,be={})=>{let De,Ve;const We=ic(de);if(t.resolver){const Je=await S(es(de)?de:We);De=vl(Je),Ve=de?!We.some(At=>dr(Je,At)):De}else de?(Ve=(await Promise.all(We.map(async Je=>{const At=dr(n,Je);return await j(At&&At._f?{[Je]:At}:At)}))).every(Boolean),!(!Ve&&!r.isValid)&&x()):Ve=De=await j(n);return h.state.next({...!eA(de)||(d.isValid||f.isValid)&&De!==r.isValid?{}:{name:de},...t.resolver||!de?{isValid:De}:{},errors:r.errors}),be.shouldFocus&&!Ve&&eb(n,z,de?We:l.mount),Ve},ee=de=>{const be={...o.mount?s:a};return es(de)?be:eA(de)?dr(be,de):de.map(De=>dr(be,De))},X=(de,be)=>({invalid:!!dr((be||r).errors,de),isDirty:!!dr((be||r).dirtyFields,de),error:dr((be||r).errors,de),isValidating:!!dr(r.validatingFields,de),isTouched:!!dr((be||r).touchedFields,de)}),O=de=>{de&&ic(de).forEach(be=>qs(r.errors,be)),h.state.next({errors:de?r.errors:{}})},R=(de,be,De)=>{const Ve=(dr(n,de,{_f:{}})._f||{}).ref,We=dr(r.errors,de)||{},{ref:Je,message:At,type:vt,...wt}=We;Da(r.errors,de,{...wt,...be,ref:Ve}),h.state.next({name:de,errors:r.errors,isValid:!1}),De&&De.shouldFocus&&Ve&&Ve.focus&&Ve.focus()},G=(de,be)=>Dd(de)?h.state.subscribe({next:De=>"values"in De&&de(k(void 0,be),De)}):k(de,be,!0),Y=de=>h.state.subscribe({next:be=>{hmt(de.name,be.name,de.exact)&&Amt(be,de.formState||d,ve,de.reRenderRoot)&&de.callback({values:{...s},...r,...be,defaultValues:a})}}).unsubscribe,te=de=>(o.mount=!0,f={...f,...de.formState},Y({...de,formState:f})),ae=(de,be={})=>{for(const De of de?ic(de):l.mount)l.mount.delete(De),l.array.delete(De),be.keepValue||(qs(n,De),qs(s,De)),!be.keepError&&qs(r.errors,De),!be.keepDirty&&qs(r.dirtyFields,De),!be.keepTouched&&qs(r.touchedFields,De),!be.keepIsValidating&&qs(r.validatingFields,De),!t.shouldUnregister&&!be.keepDefaultValue&&qs(a,De);h.state.next({values:Za(s)}),h.state.next({...r,...be.keepDirty?{isDirty:P()}:{}}),!be.keepIsValid&&x()},oe=({disabled:de,name:be})=>{(Hf(de)&&o.mount||de||l.disabled.has(be))&&(de?l.disabled.add(be):l.disabled.delete(be))},ie=(de,be={})=>{let De=dr(n,de);const Ve=Hf(be.disabled)||Hf(t.disabled);return Da(n,de,{...De||{},_f:{...De&&De._f?De._f:{ref:{name:de}},name:de,mount:!0,...be}}),l.mount.add(de),De?oe({disabled:Hf(be.disabled)?be.disabled:t.disabled,name:de}):F(de,!0,be.value),{...Ve?{disabled:be.disabled||t.disabled}:{},...t.progressive?{required:!!be.required,min:Uy(be.min),max:Uy(be.max),minLength:Uy(be.minLength),maxLength:Uy(be.maxLength),pattern:Uy(be.pattern)}:{},name:de,onChange:q,onBlur:q,ref:We=>{if(We){ie(de,be),De=dr(n,de);const Je=es(We.value)&&We.querySelectorAll&&We.querySelectorAll("input,select,textarea")[0]||We,At=omt(Je),vt=De._f.refs||[];if(At?vt.find(wt=>wt===Je):Je===De._f.ref)return;Da(n,de,{_f:{...De._f,...At?{refs:[...vt.filter(F6),Je,...Array.isArray(dr(a,de))?[{}]:[]],ref:{type:Je.type,name:de}}:{ref:Je}}}),F(de,!1,void 0,Je)}else De=dr(n,de,{}),De._f&&(De._f.mount=!1),(t.shouldUnregister||be.shouldUnregister)&&!(tmt(l.array,de)&&o.action)&&l.unMount.add(de)}}},ue=()=>t.shouldFocusError&&eb(n,z,l.mount),Ce=de=>{Hf(de)&&(h.state.next({disabled:de}),eb(n,(be,De)=>{const Ve=dr(n,De);Ve&&(be.disabled=Ve._f.disabled||de,Array.isArray(Ve._f.refs)&&Ve._f.refs.forEach(We=>{We.disabled=Ve._f.disabled||de}))},0,!1))},ne=(de,be)=>async De=>{let Ve;De&&(De.preventDefault&&De.preventDefault(),De.persist&&De.persist());let We=Za(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:Je,values:At}=await C();r.errors=Je,We=Za(At)}else await j(n);if(l.disabled.size)for(const Je of l.disabled)qs(We,Je);if(qs(r.errors,"root"),vl(r.errors)){h.state.next({errors:{}});try{await de(We,De)}catch(Je){Ve=Je}}else be&&await be({...r.errors},De),ue(),setTimeout(ue);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:vl(r.errors)&&!Ve,submitCount:r.submitCount+1,errors:r.errors}),Ve)throw Ve},Be=(de,be={})=>{dr(n,de)&&(es(be.defaultValue)?H(de,Za(dr(a,de))):(H(de,be.defaultValue),Da(a,de,Za(be.defaultValue))),be.keepTouched||qs(r.touchedFields,de),be.keepDirty||(qs(r.dirtyFields,de),r.isDirty=be.defaultValue?P(de,Za(dr(a,de))):P()),be.keepError||(qs(r.errors,de),d.isValid&&x()),h.state.next({...r}))},je=(de,be={})=>{const De=de?Za(de):a,Ve=Za(De),We=vl(de),Je=We?a:Ve;if(be.keepDefaultValues||(a=De),!be.keepValues){if(be.keepDirtyValues){const At=new Set([...l.mount,...Object.keys(My(a,s))]);for(const vt of Array.from(At))dr(r.dirtyFields,vt)?Da(Je,vt,dr(s,vt)):H(vt,dr(Je,vt))}else{if(gU&&es(de))for(const At of l.mount){const vt=dr(n,At);if(vt&&vt._f){const wt=Array.isArray(vt._f.refs)?vt._f.refs[0]:vt._f.ref;if(dk(wt)){const Tt=wt.closest("form");if(Tt){Tt.reset();break}}}}if(be.keepFieldsRef)for(const At of l.mount)H(At,dr(Je,At));else n={}}s=t.shouldUnregister?be.keepDefaultValues?Za(a):{}:Za(Je),h.array.next({values:{...Je}}),h.state.next({values:{...Je}})}l={mount:be.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!be.keepIsValid||!!be.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:be.keepSubmitCount?r.submitCount:0,isDirty:We?!1:be.keepDirty?r.isDirty:!!(be.keepDefaultValues&&!rm(de,a)),isSubmitted:be.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:We?{}:be.keepDirtyValues?be.keepDefaultValues&&s?My(a,s):r.dirtyFields:be.keepDefaultValues&&de?My(a,de):be.keepDirty?r.dirtyFields:{},touchedFields:be.keepTouched?r.touchedFields:{},errors:be.keepErrors?r.errors:{},isSubmitSuccessful:be.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},_e=(de,be)=>je(Dd(de)?de(s):de,be),Ae=(de,be={})=>{const De=dr(n,de),Ve=De&&De._f;if(Ve){const We=Ve.refs?Ve.refs[0]:Ve.ref;We.focus&&(We.focus(),be.shouldSelect&&Dd(We.select)&&We.select())}},ve=de=>{r={...r,...de}},Ue={control:{register:ie,unregister:ae,getFieldState:X,handleSubmit:ne,setError:R,_subscribe:Y,_runSchema:C,_focusError:ue,_getWatch:k,_getDirty:P,_setValid:x,_setFieldArray:y,_setDisabledField:oe,_setErrors:_,_getFieldArray:U,_reset:je,_resetDefaultValues:()=>Dd(t.defaultValues)&&t.defaultValues().then(de=>{_e(de,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:Ce,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(de){o=de},get _defaultValues(){return a},get _names(){return l},set _names(de){l=de},get _formState(){return r},get _options(){return t},set _options(de){t={...t,...de}}},subscribe:te,trigger:W,register:ie,handleSubmit:ne,watch:G,setValue:H,getValues:ee,reset:_e,resetField:Be,clearErrors:O,unregister:ae,setError:R,setFocus:Ae,getFieldState:X};return{...Ue,formControl:Ue}}var H0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},O6=(e,t,r={})=>r.shouldFocus||es(r.shouldFocus)?r.focusName||`${e}.${es(r.focusIndex)?t:r.focusIndex}.`:"",D6=(e,t)=>[...e,...ic(t)],P6=e=>Array.isArray(e)?e.map(()=>{}):void 0;function R6(e,t,r){return[...e.slice(0,t),...ic(r),...e.slice(t)]}var L6=(e,t,r)=>Array.isArray(e)?(es(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],M6=(e,t)=>[...ic(t),...ic(e)];function vmt(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return Ij(n).length?n:[]}var U6=(e,t)=>es(t)?[]:vmt(e,ic(t).sort((r,n)=>r-n)),Q6=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},uJ=(e,t,r)=>(e[t]=r,e);function bmt(e){const t=nmt(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:o}=e,[l,c]=st.useState(r._getFieldArray(n)),u=st.useRef(r._getFieldArray(n).map(H0)),d=st.useRef(l),f=st.useRef(!1);d.current=l,r._names.array.add(n),st.useMemo(()=>o&&r.register(n,o),[r,o,n]),SAe(()=>r._subjects.array.subscribe({next:({values:B,name:T})=>{if(T===n||!T){const C=dr(B,n);Array.isArray(C)&&(c(C),u.current=C.map(H0))}}}).unsubscribe,[r,n]);const h=st.useCallback(B=>{f.current=!0,r._setFieldArray(n,B)},[r,n]),m=(B,T)=>{const C=ic(Za(B)),S=D6(r._getFieldArray(n),C);r._names.focus=O6(n,S.length-1,T),u.current=D6(u.current,C.map(H0)),h(S),c(S),r._setFieldArray(n,S,D6,{argA:P6(B)})},g=(B,T)=>{const C=ic(Za(B)),S=M6(r._getFieldArray(n),C);r._names.focus=O6(n,0,T),u.current=M6(u.current,C.map(H0)),h(S),c(S),r._setFieldArray(n,S,M6,{argA:P6(B)})},x=B=>{const T=U6(r._getFieldArray(n),B);u.current=U6(u.current,B),h(T),c(T),!Array.isArray(dr(r._fields,n))&&Da(r._fields,n,void 0),r._setFieldArray(n,T,U6,{argA:B})},v=(B,T,C)=>{const S=ic(Za(T)),j=R6(r._getFieldArray(n),B,S);r._names.focus=O6(n,B,C),u.current=R6(u.current,B,S.map(H0)),h(j),c(j),r._setFieldArray(n,j,R6,{argA:B,argB:P6(T)})},y=(B,T)=>{const C=r._getFieldArray(n);Q6(C,B,T),Q6(u.current,B,T),h(C),c(C),r._setFieldArray(n,C,Q6,{argA:B,argB:T},!1)},w=(B,T)=>{const C=r._getFieldArray(n);L6(C,B,T),L6(u.current,B,T),h(C),c(C),r._setFieldArray(n,C,L6,{argA:B,argB:T},!1)},_=(B,T)=>{const C=Za(T),S=uJ(r._getFieldArray(n),B,C);u.current=[...S].map((j,L)=>!j||L===B?H0():u.current[L]),h(S),c([...S]),r._setFieldArray(n,S,uJ,{argA:B,argB:C},!0,!1)},F=B=>{const T=ic(Za(B));u.current=T.map(H0),h([...T]),c([...T]),r._setFieldArray(n,[...T],C=>C,{},!0,!1)};return st.useEffect(()=>{if(r._state.action=!1,GD(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!Bv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Bv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(B=>{const T=dr(B.errors,n),C=dr(r._formState.errors,n);(C?!T&&C.type||T&&(C.type!==T.type||C.message!==T.message):T&&T.type)&&(T?Da(r._formState.errors,n,T):qs(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const B=dr(r._fields,n);B&&B._f&&!(Bv(r._options.reValidateMode).isOnSubmit&&Bv(r._options.mode).isOnSubmit)&&qD(B,r._names.disabled,r._formValues,r._options.criteriaMode===zu.all,r._options.shouldUseNativeValidation,!0).then(T=>!vl(T)&&r._subjects.state.next({errors:OAe(r._formState.errors,T,n)}))}r._subjects.state.next({name:n,values:Za(r._formValues)}),r._names.focus&&eb(r._fields,(B,T)=>{if(r._names.focus&&T.startsWith(r._names.focus)&&B.focus)return B.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[l,n,r]),st.useEffect(()=>(!dr(r._formValues,n)&&r._setFieldArray(n),()=>{const B=(T,C)=>{const S=dr(r._fields,T);S&&S._f&&(S._f.mount=C)};r._options.shouldUnregister||s?r.unregister(n):B(n,!1)}),[n,r,a,s]),{swap:st.useCallback(y,[h,n,r]),move:st.useCallback(w,[h,n,r]),prepend:st.useCallback(g,[h,n,r]),append:st.useCallback(m,[h,n,r]),remove:st.useCallback(x,[h,n,r]),insert:st.useCallback(v,[h,n,r]),update:st.useCallback(_,[h,n,r]),replace:st.useCallback(F,[h,n,r]),fields:st.useMemo(()=>l.map((B,T)=>({...B,[a]:u.current[T]||H0()})),[l,a])}}function ymt(e={}){const t=st.useRef(void 0),r=st.useRef(void 0),[n,a]=st.useState({isDirty:!1,isValidating:!1,isLoading:Dd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Dd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Dd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=xmt(e);t.current={...l,formState:n}}const s=t.current.control;return s._options=e,SAe(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),s._formState.isReady=!0,o},[s]),st.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),st.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),st.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),st.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),st.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),st.useEffect(()=>{e.values&&!rm(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(o=>({...o}))):s._resetDefaultValues()},[s,e.values]),st.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=amt(n,s),t.current}const KD=mt(Nr,"alternancias");async function wmt(e){return(await mn(KD,{...e,createdAt:Na(),updatedAt:Na()})).id}async function Emt({especialidad:e,pageSize:t=10,lastDoc:r}){let n=Ht(KD,ar("createdAt","desc"),Hd(t));e&&(n=Ht(KD,xr("especialidad","==",e),ar("createdAt","desc"),Hd(t))),r&&(n=Ht(n,Ree(r)));const a=await qr(n);return{items:a.docs.map(o=>({id:o.id,...o.data()})),lastDoc:a.docs[a.docs.length-1]}}async function Nmt(e,t){const r=nr(Nr,"alternancias",e);await Tl(r,{...t,updatedAt:Na()})}async function Cmt(e){const t=nr(Nr,"alternancias",e);await Ca(t)}async function _mt(e,t,r){const n=mt(Nr,"alternancias",e,t);await mn(n,{...r,createdAt:Na()})}async function Smt(e,t){const r=mt(Nr,"alternancias",e,t);return(await qr(r)).docs.map(a=>({id:a.id,...a.data()}))}async function kmt(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=sE(aR,r);await tR(n,t);const a=await qk(n);return await _mt(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const Tp=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return i.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),i.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},$o=({children:e,hint:t})=>i.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&i.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),Ip=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return i.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},ZA=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const o={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return i.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${o[r]} disabled:opacity-60`,children:n})},jmt=({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Bmt=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(null),[s,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),[f,h]=N.useState([]),[m,g]=N.useState(!1),{register:x,control:v,handleSubmit:y,reset:w,watch:_,setValue:F,formState:{isSubmitting:B}}=ymt({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),T=bmt({control:v,name:"actividades"}),C=["COORDINACION_TP","SUBDIRECCION"],S=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!S||C.some(R=>S.includes(R))))return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[i.jsx(QEe,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const L=R=>(R||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),P=(R,G)=>{var Y;return!R||!G?[]:((Y=bwe[R])==null?void 0:Y[G])??[]},k=_("especialidad"),U=_("modulos")||[],Q=N.useMemo(()=>k?gwe[k]??[]:[],[k]),K=N.useMemo(()=>k?vwe[k]??[]:[],[k]);N.useEffect(()=>{F("curso",[]),F("modulos",[]);const R=[..._("actividades")||[]].map(G=>({...G,modulo:"",oa:""}));F("actividades",R)},[k]),N.useEffect(()=>{const R=[..._("actividades")||[]].map(G=>G.modulo&&!U.includes(G.modulo)?{...G,modulo:"",oa:""}:G);F("actividades",R)},[U]);const H=async()=>{o(!0);const{items:R}=await Emt({});r(R),o(!1)};N.useEffect(()=>{H()},[]);const q=async R=>{n?await Nmt(n,{...R}):await wmt({...R,createdBy:(e==null?void 0:e.email)||"desconocido"}),w(),a(null),await H()},z=R=>{const G=Array.isArray(R.curso)?R.curso:R.curso?[R.curso]:[],Y=Array.isArray(R.modulos)?R.modulos.map(ae=>L(ae)):[],te=Array.isArray(R.actividades)?R.actividades.map(ae=>({...ae,modulo:ae!=null&&ae.modulo?L(ae.modulo):"",oa:(ae==null?void 0:ae.oa)||""})):[];w({...R,curso:G,modulos:Y,actividades:te}),a(R.id),window.scrollTo({top:0,behavior:"smooth"})},W=async R=>{confirm("¿Eliminar esta alternancia?")&&(await Cmt(R),await H())},ee=async(R,G)=>{await kmt(R,G),alert("Evidencia subida correctamente")},X=async R=>{g(!0);const G=Array.isArray(R.curso)?R.curso:R.curso?[R.curso]:[],Y=Array.isArray(R.modulos)?R.modulos:[],te=Array.isArray(R.actividades)?R.actividades.map(oe=>({fecha:(oe==null?void 0:oe.fecha)||"",tipo:(oe==null?void 0:oe.tipo)||"",actividad:(oe==null?void 0:oe.actividad)||"",lugar:(oe==null?void 0:oe.lugar)||"",evidencias:(oe==null?void 0:oe.evidencias)||"",modulo:(oe==null?void 0:oe.modulo)||"",oa:(oe==null?void 0:oe.oa)||""})):[],ae={...R,curso:G,modulos:Y,actividades:te};d(ae);try{const oe=await Smt(R.id,"evidencias");h(oe)}catch{h([])}c(!0),g(!1)},O=R=>{const G=Array.from(R.currentTarget.selectedOptions).map(Y=>Y.value);F("curso",G,{shouldDirty:!0})};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:i.jsx(e2,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),i.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(ZA,{title:"Nuevo plan",onClick:()=>{w(),a(null)},tone:"neutral",children:[i.jsx(uA,{className:"w-4 h-4"}),"Limpiar"]}),i.jsxs(ZA,{title:"Guardar",type:"submit",tone:"success",disabled:B,children:[B?i.jsx(El,{className:"w-4 h-4 animate-spin"}):i.jsx(Yc,{className:"w-4 h-4"}),"Guardar"]})]})]})}),i.jsx(Tp,{title:"Planes guardados",icon:i.jsx(Eg,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(El,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(R=>i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[i.jsx(am,{className:"w-4 h-4 text-indigo-600"}),R.especialidad]}),i.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[i.jsx(Ip,{tone:"indigo",children:Array.isArray(R.curso)?R.curso.join(", "):R.curso}),i.jsx(Ip,{tone:"sky",children:R.institucion}),(Array.isArray(R.tipoAlternancia)?R.tipoAlternancia:[]).slice(0,2).map(G=>i.jsx(Ip,{tone:"emerald",children:G},G))]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ZA,{title:"Ver",onClick:()=>X(R),children:[i.jsx(jmt,{className:"w-4 h-4"})," Ver"]}),i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[i.jsx(t1,{className:"w-4 h-4"}),i.jsx("input",{type:"file",className:"hidden",onChange:G=>G.target.files&&ee(R.id,G.target.files[0])}),"Evidencia"]}),i.jsxs(ZA,{title:"Editar",onClick:()=>z(R),children:[i.jsx(j_,{className:"w-4 h-4"})," Editar"]}),i.jsxs(ZA,{title:"Eliminar",onClick:()=>W(R.id),tone:"danger",children:[i.jsx(Va,{className:"w-4 h-4"})," Eliminar"]})]})]})},R.id))})}),l&&u&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>c(!1)}),i.jsxs("div",{className:"relative z-10 w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-5 py-3 border-b bg-white/90 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-9 h-9 rounded-xl bg-indigo-50 border border-indigo-100 flex items-center justify-center",children:i.jsx(e2,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Plan de Alternancia"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Visualización detallada"})]})]}),i.jsxs(ZA,{title:"Cerrar",onClick:()=>c(!1),children:[i.jsx(uA,{className:"w-4 h-4"})," Cerrar"]})]}),i.jsxs("div",{className:"p-5 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx($o,{children:"Especialidad"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[i.jsx(am,{className:"w-4 h-4 text-indigo-600"})," ",u.especialidad||"-"]})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx($o,{children:"Institución"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[i.jsx(vw,{className:"w-4 h-4 text-sky-600"})," ",u.institucion||"-"]})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx($o,{children:"Cursos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.curso||[]).map(R=>i.jsx(Ip,{tone:"sky",children:R},R))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx($o,{children:"Tipos de Alternancia"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.tipoAlternancia||[]).map(R=>i.jsx(Ip,{tone:"emerald",children:R},R))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx($o,{children:"Módulos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.modulos||[]).map(R=>i.jsx(Ip,{tone:"indigo",children:R},R))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx($o,{children:"Creado por"}),i.jsx("div",{className:"text-slate-700 text-sm",children:u.createdBy||"-"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Fundamentación técnico‑pedagógica"}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.fundamentacion||"—"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[i.jsx("div",{className:"px-4 py-3 border-b bg-slate-50/50",children:i.jsx("h4",{className:"font-semibold text-slate-800",children:"Plan de actividades"})}),u.actividades&&u.actividades.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 text-left",children:"Actividad"}),i.jsx("th",{className:"p-2 text-left",children:"Lugar"}),i.jsx("th",{className:"p-2 text-left",children:"Módulo"}),i.jsx("th",{className:"p-2 text-left",children:"OA"}),i.jsx("th",{className:"p-2 text-left",children:"Evidencias"})]})}),i.jsx("tbody",{className:"divide-y",children:u.actividades.map((R,G)=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 text-slate-700",children:R.fecha||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:R.tipo||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:R.actividad||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:R.lugar||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:R.modulo||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:R.oa||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:R.evidencias||"—"})]},G))})]})}):i.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Sin actividades registradas"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Equipo"}),(u.equipo||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.equipo.map((R,G)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:R.nombre||"—"}),i.jsx("span",{className:"text-slate-500",children:R.rol||""})]},G))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin equipo registrado"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Contrapartes"}),(u.contrapartes||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.contrapartes.map((R,G)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:R.nombre||"—"}),i.jsx("span",{className:"text-slate-500",children:R.rol||""})]},G))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin contrapartes"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Tutores"}),(u.tutores||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.tutores.map((R,G)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:R.nombre||"—"}),i.jsx("span",{className:"text-slate-500",children:R.rol||""})]},G))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin tutores"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Análisis Curricular"}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.analisisCurricular||"—"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[i.jsxs("div",{className:"px-4 py-3 border-b bg-slate-50/50 flex items-center justify-between",children:[i.jsx("h4",{className:"font-semibold text-slate-800",children:"Evidencias subidas"}),m&&i.jsx("span",{className:"text-sm text-slate-500",children:"Cargando…"})]}),(f||[]).length>0?i.jsx("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:f.map(R=>i.jsxs("a",{href:R.url,target:"_blank",rel:"noreferrer",className:"group rounded-xl border border-slate-200 p-3 hover:shadow-sm transition bg-white flex items-center gap-3",children:[i.jsx(xF,{className:"w-5 h-5 text-emerald-600"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm text-slate-800 truncate group-hover:underline",children:R.nombre||"archivo"}),i.jsx("div",{className:"text-xs text-slate-500 truncate",children:R.path||""})]})]},R.id))}):i.jsx("div",{className:"p-4 text-sm text-slate-500",children:"No hay evidencias adjuntas"})]})]})]})]}),i.jsxs("form",{onSubmit:y(q),className:"mt-6 space-y-5",children:[i.jsx(Tp,{title:"Contexto de la Alternancia",icon:i.jsx(vw,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx($o,{children:"Especialidad"}),i.jsxs("div",{className:"relative",children:[i.jsx(am,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...x("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[i.jsx("option",{value:"",children:"Selecciona…"}),mwe.map(R=>i.jsx("option",{value:R,children:R},R))]})]})]}),i.jsxs("div",{children:[i.jsx($o,{children:"Institución"}),i.jsxs("div",{className:"relative",children:[i.jsx(vw,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...x("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[i.jsx("option",{value:"",children:"Selecciona…"}),pwe.map(R=>i.jsx("option",{value:R,children:R},R))]})]})]}),i.jsxs("div",{children:[i.jsx($o,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),i.jsxs("div",{className:"relative",children:[i.jsx(ro,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsx("select",{multiple:!0,size:4,...x("curso"),onChange:O,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!k,children:k?Q.map(R=>i.jsx("option",{value:R,children:R},R)):i.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(_("curso")||[]).map(R=>i.jsx(Ip,{tone:"sky",children:R},R))})]})]})}),i.jsx(Tp,{title:"Módulos implicados",icon:i.jsx(dR,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:k?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:K.map(R=>i.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:R,className:"mt-1 accent-emerald-600",...x("modulos")}),i.jsx("span",{className:"text-sm text-slate-700",children:R})]},R))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),i.jsx(Tp,{title:"Tipo de Alternancia",icon:i.jsx(Rv,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:i.jsx("div",{className:"flex gap-3 flex-wrap",children:xwe.map(R=>i.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:R,className:"accent-amber-600",...x("tipoAlternancia")}),i.jsx("span",{className:"text-slate-700",children:R})]},R))})}),i.jsx(Tp,{title:"Fundamentación técnico‑pedagógica",icon:i.jsx(Qwe,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...x("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),i.jsx(Tp,{title:"Plan de actividades",icon:i.jsx(Eg,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"space-y-3",children:[T.fields.map((R,G)=>{const Y=_(`actividades.${G}.modulo`)||"",te=P(k,Y);return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx($o,{children:"Fecha"}),i.jsx(oc,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{type:"date",placeholder:"Fecha",...x(`actividades.${G}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx($o,{children:"Tipo"}),i.jsx("input",{placeholder:"Pasantía, visita, taller...",...x(`actividades.${G}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx($o,{children:"Actividad"}),i.jsx("input",{placeholder:"Descripción breve",...x(`actividades.${G}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx($o,{children:"Lugar"}),i.jsx(k_,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...x(`actividades.${G}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx($o,{children:"Evidencias"}),i.jsx(xF,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...x(`actividades.${G}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx($o,{children:"Módulo"}),i.jsxs("select",{...x(`actividades.${G}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!k||U.length===0,children:[i.jsx("option",{value:"",children:!k&&"Elige especialidad arriba"||U.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),U.map(ae=>i.jsx("option",{value:ae,children:ae},ae))]})]}),i.jsxs("div",{children:[i.jsx($o,{children:"Objetivo de Aprendizaje (OA)"}),i.jsxs("select",{...x(`actividades.${G}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!Y||te.length===0,children:[i.jsx("option",{value:"",children:Y?te.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),te.map(ae=>i.jsx("option",{value:ae,children:ae},ae))]})]})]}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsxs(ZA,{title:"Eliminar fila",onClick:()=>T.remove(G),tone:"danger",children:[i.jsx(Va,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},R.id)}),i.jsxs(ZA,{title:"Agregar actividad",onClick:()=>T.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[i.jsx(_o,{className:"w-4 h-4"})," Agregar actividad"]})]})}),i.jsx(Tp,{title:"Análisis Curricular",icon:i.jsx(am,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...x("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),i.jsx("div",{className:"flex items-center justify-end gap-2",children:i.jsxs(ZA,{title:"Guardar",type:"submit",tone:"success",disabled:B,children:[B?i.jsx(El,{className:"w-4 h-4 animate-spin"}):i.jsx(ts,{className:"w-4 h-4"}),"Guardar"]})})]})]})},WD=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],Tmt={INCIPIENTE:25},Imt=["AULA","TALLER","EMPRESA"],dJ={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},Fmt="tp_especialidades",Omt="tp_modulos",Dmt="tp_resultados_aprendizaje",Pmt="tp_criterios_evaluacion",XD="tp_rubricas",DAe="tp_evidencias",PAe="tp_evaluaciones_comp",YD="config_evaluacion/competencias",fJ=()=>Date.now(),RAe=async()=>{const e=await kh(nr(Nr,YD));return e.exists()?e.data():(await yi(nr(Nr,YD),dJ),dJ)},Rmt=(e,t)=>{const{escalaMin:r,escalaMax:n,porcentajeAprobacion:a,notaAprobacion:s}=t;if(e<=a){const o=(s-r)/(a-0||1);return Number((r+o*(e-0)).toFixed(1))}else{const o=(n-s)/(100-a||1);return Number((s+o*(e-a)).toFixed(1))}},Lmt=async(e,t)=>{const r=await RAe();let n=0,a=0;Object.entries(t).forEach(([l,c])=>{a+=c;const u=e[l],d=(u==null?void 0:u.puntaje)??Tmt.INCIPIENTE;n+=d*c/100});const s=a?n/a*100:0,o=Rmt(s,r);return{puntajeTotal:n,porcentaje:s,nota:o}},Mmt=e=>{const t=Ht(mt(Nr,Fmt),ar("nombre"));return mr(t,r=>{e(r.docs.map(n=>({id:n.id,...n.data()})))})},Umt=async e=>{const t=Ht(mt(Nr,Omt),xr("especialidadId","==",e),ar("nombre"));return(await qr(t)).docs.map(n=>({id:n.id,...n.data()}))},Qmt=async e=>{const t=Ht(mt(Nr,Dmt),xr("moduloId","==",e),ar("codigo"));return(await qr(t)).docs.map(n=>({id:n.id,...n.data()}))},Hmt=async e=>{const t=Ht(mt(Nr,Pmt),xr("raId","==",e),ar("codigo"));return(await qr(t)).docs.map(n=>({id:n.id,...n.data()}))},Vmt=async e=>e.id?(await Tl(nr(Nr,XD,e.id),{...e,updatedAt:fJ()}),e.id):(await mn(mt(Nr,XD),{...e,updatedAt:fJ()})).id,LAe=async e=>{const t=Ht(mt(Nr,XD),xr("raId","==",e)),n=(await qr(t)).docs[0];return n?{id:n.id,...n.data()}:null},zmt=async(e,t)=>{const r=sE(aR,t),n=await tR(r,e);return{url:await qk(n.ref),path:n.ref.fullPath}},$mt=e=>mn(mt(Nr,DAe),e),Gmt=(e,t)=>{const r=Ht(mt(Nr,DAe),xr("raId","==",e),ar("fecha","desc"));return mr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},qmt=async e=>{const t=await LAe(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:n,porcentaje:a,nota:s}=await Lmt(e.ceIdScores,r);return mn(mt(Nr,PAe),{...e,puntajeTotal:n,porcentaje:a,nota:s})},Kmt=(e,t)=>{const r=Ht(mt(Nr,PAe),xr("raId","==",e),ar("fecha","desc"));return mr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},Wmt=async e=>{const t=await RAe();await yi(nr(Nr,YD),{...t,...e},{merge:!0})},Xmt=({raId:e,ces:t,rubrica:r,onSaved:n,currentUserId:a})=>{const[s,o]=N.useState(null);if(N.useEffect(()=>{o(e?r??{id:"",raId:e,niveles:WD,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:a}:null)},[e,r,t,a]),!e)return i.jsx("div",{children:"Selecciona un RA para editar su rúbrica."});if(!s)return null;const l=(f,h)=>{o(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[f]:h}})},c=(f,h,m)=>{o(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===f&&v.nivel===h));return{...g,descriptores:[...x,{ceId:f,nivel:h,descriptor:m,puntaje:h==="SOBRESALIENTE"?100:h==="LOGRADO"?75:h==="EN_DESARROLLO"?50:25}]}})},u=N.useMemo(()=>Object.values(s.ponderacionCE).reduce((f,h)=>f+(Number(h)||0),0),[s.ponderacionCE]),d=async()=>{const f=await Vmt(s);n==null||n(f)};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rúbrica por CE (debe sumar 100%)"}),i.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),i.jsx("div",{className:"space-y-4",children:t.map(f=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo," — ",f.descriptor]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||"—"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),i.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:s.ponderacionCE[f.id]??0,onChange:h=>l(f.id,Number(h.target.value))}),i.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:WD.map(h=>{const m=s.descriptores.find(g=>g.ceId===f.id&&g.nivel===h);return i.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[i.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:h.replace("_"," ")}),i.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(f.id,h,g.target.value),placeholder:"Descriptor observable y medible…"})]},h)})})]},f.id))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[i.jsx(Yc,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar rúbrica"})]})})]})},Ymt=({raId:e,currentUser:t,evidencias:r})=>{const[n,a]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState("AULA"),[u,d]=N.useState(null),[f,h]=N.useState(""),[m,g]=N.useState(!1);if(!e)return i.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!n)){g(!0);try{const v=u.name.split(".").pop(),y=`evidencias/${e}/${n}/${Date.now()}.${v}`,{url:w,path:_}=await zmt(u,y);await $mt({estudianteId:n,raId:e,ceId:s||void 0,url:w,tipo:Jmt(u.name),fecha:Date.now(),autorId:t.id,contexto:l,observaciones:f,storagePath:_}),d(null),h(""),a(""),o("")}finally{g(!1)}}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:n,onChange:v=>a(v.target.value)}),i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:s,onChange:v=>o(v.target.value)}),i.jsxs("select",{className:"border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:[i.jsx("option",{value:"AULA",children:"AULA"}),i.jsx("option",{value:"TALLER",children:"TALLER"}),i.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),i.jsx("input",{type:"file",onChange:v=>{var y;return d(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),i.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones…",value:f,onChange:v=>h(v.target.value)}),i.jsxs("button",{onClick:x,disabled:m||!u||!n,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!u||!n?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[i.jsx(t1,{className:"w-4 h-4"}),i.jsx("span",{children:"Subir evidencia"})]}),i.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>i.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[Zmt(v.tipo),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),i.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto," — Est.: ",v.estudianteId]})]})]}),v.observaciones&&i.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},Jmt=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},Zmt=e=>{switch(e){case"imagen":return i.jsx(q2e,{className:"w-5 h-5 text-rose-600"});case"video":return i.jsx(F2e,{className:"w-5 h-5 text-indigo-600"});case"documento":return i.jsx(Vd,{className:"w-5 h-5 text-emerald-600"});default:return i.jsx(t1,{className:"w-5 h-5 text-slate-500"})}},AJ=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],ept=({raId:e})=>{const[t,r]=N.useState([]);if(N.useEffect(()=>{if(!e){r([]);return}const o=Kmt(e,r);return()=>o()},[e]),!e)return i.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const n=N.useMemo(()=>{const o={};return t.forEach(l=>{const c=l.curso||"—";o[c]||(o[c]={curso:c,promedio:0,n:0}),o[c].promedio+=l.nota,o[c].n+=1}),Object.values(o).map(l=>({curso:l.curso,promedio:Number((l.promedio/(l.n||1)).toFixed(2)),n:l.n}))},[t]),a=N.useMemo(()=>{const o={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(l=>{l.nota<4?o["1.0-3.9"]++:l.nota<5?o["4.0-4.9"]++:l.nota<6?o["5.0-5.9"]++:o["6.0-7.0"]++}),Object.entries(o).map(([l,c])=>({rango:l,value:c}))},[t]),s=()=>{const o=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),l=Is.book_new(),c=Is.json_to_sheet(o);Is.book_append_sheet(l,c,"Evaluaciones_RA"),i1(l,`evaluaciones_${e}.xlsx`)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[i.jsx(qc,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),i.jsxs("button",{onClick:s,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[i.jsx(jh,{className:"w-4 h-4"}),i.jsx("span",{children:"Descargar CSV"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx(dh,{width:"100%",height:"100%",children:i.jsxs(T2,{data:n,children:[i.jsx(Dg,{dataKey:"curso"}),i.jsx(Pg,{domain:[1,7]}),i.jsx(uh,{}),i.jsx(Bb,{dataKey:"promedio"})]})})}),i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx(dh,{width:"100%",height:"100%",children:i.jsxs(cM,{children:[i.jsx(V4,{data:a,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:a.map((o,l)=>i.jsx(Um,{fill:AJ[l%AJ.length]},`c-${l}`))}),i.jsx(uh,{}),i.jsx(l1,{})]})})})]}),i.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversión lineal configurable (Decreto 67)."})]})},Qy=({active:e,onClick:t,icon:r,label:n})=>i.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,i.jsx("span",{className:"font-medium",children:n})]}),ov=({children:e,className:t})=>i.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),tpt=({currentUser:e})=>{const[t,r]=N.useState("planificacion"),[n,a]=N.useState([]),[s,o]=N.useState([]),[l,c]=N.useState([]),[u,d]=N.useState([]),[f,h]=N.useState({}),[m,g]=N.useState(null),[x,v]=N.useState([]);N.useEffect(()=>{const w=Mmt(a);return()=>w()},[]),N.useEffect(()=>{f.especialidadId?Umt(f.especialidadId).then(o):o([]),h(w=>({...w,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[f.especialidadId]),N.useEffect(()=>{f.moduloId?Qmt(f.moduloId).then(c):c([]),h(w=>({...w,raId:void 0})),d([]),g(null)},[f.moduloId]),N.useEffect(()=>{if(f.raId){Hmt(f.raId).then(d),LAe(f.raId).then(g);const w=Gmt(f.raId,v);return()=>w()}else d([]),g(null),v([])},[f.raId]);const y=f.raId&&u.length>0;return i.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(dR,{className:"w-6 h-6 text-indigo-600"}),i.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluación por Competencias EMTP"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Qy,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:i.jsx(Eg,{className:"w-4 h-4"}),label:"Planificar"}),i.jsx(Qy,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:i.jsx(TEe,{className:"w-4 h-4"}),label:"Evaluar"}),i.jsx(Qy,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:i.jsx(t1,{className:"w-4 h-4"}),label:"Evidencias"}),i.jsx(Qy,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:i.jsx(qc,{className:"w-4 h-4"}),label:"Dashboard"}),i.jsx(Qy,{active:t==="config",onClick:()=>r("config"),icon:i.jsx(MEe,{className:"w-4 h-4"}),label:"Config"})]})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[i.jsx(ov,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:w=>h({especialidadId:w.target.value}),children:[i.jsx("option",{value:"",children:"— Selecciona —"}),n.map(w=>i.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Módulo"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:w=>h(_=>({..._,moduloId:w.target.value})),children:[i.jsx("option",{value:"",children:"— Selecciona —"}),s.map(w=>i.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:w=>h(_=>({..._,raId:w.target.value})),children:[i.jsx("option",{value:"",children:"— Selecciona —"}),l.map(w=>i.jsxs("option",{value:w.id,children:[w.codigo," — ",w.enunciado.slice(0,60),w.enunciado.length>60?"…":""]},w.id))]})]})]})}),t==="planificacion"&&i.jsx(ov,{children:i.jsx(Xmt,{raId:f.raId,ces:u,rubrica:m,onSaved:w=>{},currentUserId:e.id})}),t==="evaluar"&&i.jsxs(ov,{children:[!y&&i.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),y&&i.jsx(rpt,{raId:f.raId,ces:u,currentUser:e})]}),t==="evidencias"&&i.jsx(ov,{children:i.jsx(Ymt,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&i.jsx(ov,{children:i.jsx(ept,{raId:f.raId})}),t==="config"&&i.jsx(ov,{children:i.jsx(npt,{})})]})]})},rpt=({raId:e,ces:t,currentUser:r})=>{const[n,a]=N.useState(""),[s,o]=N.useState(r.curso||""),[l,c]=N.useState("AULA"),[u,d]=N.useState(""),[f,h]=N.useState({}),m=(v,y,w)=>{h(_=>({..._,[v]:{nivel:y,puntaje:w}}))},g=n&&Object.keys(f).length===t.length,x=async()=>{const v={estudianteId:n,curso:s,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:l,retroalimentacion:u};await qmt(v),d(""),h({}),a("")};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:n,onChange:v=>a(v.target.value),placeholder:"rut_o_uid"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:s,onChange:v=>o(v.target.value),placeholder:"p.ej. 3ºB"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),i.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:Imt.map(v=>i.jsx("option",{value:v,children:v},v))})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[i.jsx(ts,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar evaluación"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo," — ",v.descriptor]}),i.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:WD.map(y=>{var w;return i.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((w=f[v.id])==null?void 0:w.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentación formativa"}),i.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias específicas para mejorar..."})]})]})},npt=()=>{const[e,t]=N.useState(60),[r,n]=N.useState(4),a=async()=>{await Wmt({porcentajeAprobacion:e,notaAprobacion:r})};return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobación (%)"}),i.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:s=>t(Number(s.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobación"}),i.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:s=>n(Number(s.target.value))})]}),i.jsx("button",{onClick:a,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})};function apt(e){for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null}function spt(e){if(e.asignatura!=="Lectura")return e;const t={...e};let r=apt(t.preguntas||[]);return!r&&t.descripcion&&t.descripcion.length>100&&(r=t.descripcion,t.preguntas&&t.preguntas.length>0&&(t.preguntas[0]={...t.preguntas[0],textoBase:r})),r&&(t.textoBase=r),t}const ipt=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(null),[s,o]=N.useState({}),[l,c]=N.useState(!0),[u,d]=N.useState(!1),[f,h]=N.useState(!1),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(null),[_,F]=N.useState([]),[B,T]=N.useState(null),C=K=>{if(!K)return"";let H=K.trim().toLowerCase();return H=H.replace(/°/g,"º"),H=H.replace(/\s+(medio|básico|basico)/g,""),H=H.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),H=H.replace(/^(\d)(?![º])/,"$1º"),H=H.replace(/\s+/g,"").toUpperCase(),H};N.useEffect(()=>{(async()=>{if(e.id)try{c(!0);const H=C(e.curso||"");console.log(`[DEBUG] SimceEvaluacionEstudiante - Cargando evaluaciones para estudiante: ${e.id}, curso: ${e.curso} (normalizado: ${H})`);const[q,z]=await Promise.all([Ti(()=>Promise.resolve().then(()=>LK),void 0).then(X=>X.obtenerSetsPreguntasPorCurso(H)),Ti(()=>Promise.resolve().then(()=>LK),void 0).then(X=>X.obtenerSetsPreguntasPorEstudiante(e.id))]),W=new Map;[...q,...z].forEach(X=>W.set(X.id,X));const ee=Array.from(W.values());r(ee),j({porCurso:q.length,porEstudiante:z.length,total:ee.length}),console.log(`[DEBUG] SimceEvaluacionEstudiante - Evaluaciones por curso: ${q.length}, por estudiante: ${z.length}, total: ${ee.length}`)}catch(H){console.error("Error al cargar evaluaciones:",H),v("No se pudieron cargar las evaluaciones disponibles")}finally{c(!1)}})()},[e]);const[S,j]=N.useState(null),L=async K=>{var H,q;try{c(!0),o({}),v(null),g(null),h(!1),console.log(`[DEBUG] Seleccionando evaluación con ID: ${K}`);let z=await Ow(K);if(console.log("[DEBUG] Evaluación completa obtenida:",z),console.log("[DEBUG] Preguntas en la evaluación:",((H=z==null?void 0:z.preguntas)==null?void 0:H.length)||0),z&&(z=spt(z),console.log("[DEBUG] Evaluación procesada con texto base asegurado"),a(z)),z!=null&&z.preguntas){const ee=z.preguntas.some(X=>X.textoBase)||z.textoBase;if(console.log("[DEBUG] ¿La evaluación tiene texto base?",ee),ee){const X=z.textoBase||((q=z.preguntas.find(O=>O.textoBase))==null?void 0:q.textoBase);console.log("[DEBUG] Texto base encontrado:",(X==null?void 0:X.substring(0,50))+"...")}}const W=await Cce(e.id||"",K);if(console.log(`[DEBUG] Intentos existentes para esta evaluación: ${W.length}`),F(W),W.length>0){T(W[0]),h(!0);const ee=await Ow(K);if(ee){a(ee);const X=W[0],O=ee.preguntas.map(R=>{var Y;const G=((Y=X.respuestas.find(te=>te.preguntaId===R.id))==null?void 0:Y.alternativaSeleccionada)||"";return{preguntaId:R.id,pregunta:R,respuestaSeleccionada:G,esCorrecta:G===R.respuestaCorrecta}});g({porcentajeLogro:X.porcentajeLogro,nivelLogro:X.nivelLogro,respuestasCorrectas:O.filter(R=>R.esCorrecta).length,totalPreguntas:ee.preguntas.length,detalle:O})}}else{const ee=await Ow(K);if(ee){const X=[...ee.preguntas].sort(()=>Math.random()-.5);X.forEach(O=>{O.alternativas=[...O.alternativas].sort(()=>Math.random()-.5)}),a({...ee,preguntas:X}),w(Date.now())}}}catch(z){console.error("Error al seleccionar evaluación:",z),v("No se pudo cargar la evaluación seleccionada")}finally{c(!1)}},P=(K,H)=>{o({...s,[K]:H})},k=async()=>{if(n)try{const K=n.preguntas.map(Y=>Y.id),H=Object.keys(s);if(H.length<K.length){v(`Debe responder todas las preguntas antes de enviar (faltan ${K.length-H.length})`);return}d(!0);let q=0;const z=n.preguntas.map(Y=>{const te=s[Y.id],ae=te===Y.respuestaCorrecta;return ae&&q++,{preguntaId:Y.id,pregunta:Y,respuestaSeleccionada:te,esCorrecta:ae}}),W=n.preguntas.length,ee=q/W*100;let X;ee>=80?X="Adecuado":ee>=50?X="Elemental":X="Insuficiente";const O=Date.now(),R=y?Math.floor((O-y)/1e3):0,G={setId:n.id,estudianteId:e.id||"",estudianteNombre:e.nombreCompleto||"",respuestas:Object.entries(s).map(([Y,te])=>{const ae=n.preguntas.find(ie=>ie.id===Y),oe=ae==null?void 0:ae.respuestaCorrecta;return{preguntaId:Y,alternativaSeleccionadaId:String(te),esCorrecta:String(te)===oe}}),porcentajeAciertos:ee,nivelLogro:X,fechaEnvio:new Date().toISOString()};await Nce(G),g({porcentajeLogro:ee,nivelLogro:X,respuestasCorrectas:q,totalPreguntas:W,detalle:z}),h(!0)}catch(K){console.error("Error al enviar respuestas:",K),v("Ocurrió un error al enviar sus respuestas. Intente nuevamente.")}finally{d(!1)}},U=K=>{const H=Math.floor(K/60),q=K%60;return`${H}:${q<10?"0":""}${q}`},Q=K=>{switch(K){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}};return l?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(gm,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsx("div",{className:"space-y-6",children:n?f?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Resultados: ",n.titulo]}),i.jsx("button",{onClick:()=>{a(null),g(null),h(!1)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Volver a evaluaciones"})]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-6 rounded-lg mb-6",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tu nivel de logro"}),i.jsx("div",{className:`text-lg font-bold px-4 py-1 rounded-md ${Q((m==null?void 0:m.nivelLogro)||"")}`,children:m==null?void 0:m.nivelLogro}),i.jsxs("div",{className:"mt-4",children:[i.jsx(s2e,{className:"w-16 h-16 mx-auto text-indigo-500 mb-2"}),i.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:[m==null?void 0:m.porcentajeLogro.toFixed(1),"%"]}),i.jsxs("div",{className:"text-slate-600 dark:text-slate-400",children:[m==null?void 0:m.respuestasCorrectas," de ",m==null?void 0:m.totalPreguntas," correctas"]})]})]}),i.jsx("div",{className:"w-full max-w-md h-6 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden mt-4",children:i.jsx("div",{className:`h-full ${(m==null?void 0:m.nivelLogro)==="Adecuado"?"bg-green-500":(m==null?void 0:m.nivelLogro)==="Elemental"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${(m==null?void 0:m.porcentajeLogro)||0}%`}})}),i.jsxs("div",{className:"flex justify-between w-full max-w-md text-xs mt-1",children:[i.jsx("span",{children:"0%"}),i.jsx("span",{children:"50%"}),i.jsx("span",{children:"100%"})]})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detalle de respuestas"}),i.jsx("div",{className:"space-y-6",children:m==null?void 0:m.detalle.map((K,H)=>i.jsxs("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",H+1]}),K.pregunta.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:K.pregunta.alternativas.map(q=>i.jsxs("div",{className:`flex items-start ${q.id===K.respuestaSeleccionada?q.id===K.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":"text-red-700 dark:text-red-400 font-semibold":q.id===K.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":""}`,children:[i.jsxs("div",{className:"font-bold mr-2 min-w-[20px]",children:[q.id,")"]}),i.jsx("div",{children:q.texto}),q.id===K.respuestaSeleccionada&&q.id===K.pregunta.respuestaCorrecta&&i.jsx(ts,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"}),q.id===K.respuestaSeleccionada&&q.id!==K.pregunta.respuestaCorrecta&&i.jsx(r2,{className:"w-4 h-4 ml-1 text-red-600 dark:text-red-400"}),q.id!==K.respuestaSeleccionada&&q.id===K.pregunta.respuestaCorrecta&&i.jsx(ts,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"})]},q.id))}),i.jsx("div",{className:"mt-4 text-sm",children:i.jsxs("div",{className:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300 p-2 rounded-md",children:[i.jsx("span",{className:"font-semibold",children:"Explicación:"})," ",K.pregunta.explicacion]})})]},K.preguntaId))}),i.jsx("div",{className:"mt-6 flex justify-center",children:i.jsx("button",{onClick:()=>{a(null),g(null),h(!1)},className:"py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Volver a evaluaciones"})})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:n.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[n.asignatura," - ",n.preguntas.length," preguntas"]})]}),i.jsx("button",{onClick:()=>{window.confirm("¿Está seguro que desea salir? Se perderán todas las respuestas.")&&a(null)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Cancelar"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800 mb-6 flex items-start",children:[i.jsx(n2,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400",children:"Instrucciones"}),i.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 list-disc pl-5",children:[i.jsx("li",{children:"Responde todas las preguntas antes de enviar."}),i.jsx("li",{children:"Solo tienes un intento para responder."}),i.jsx("li",{children:"Una vez enviado, podrás ver tu resultado y las respuestas correctas."}),i.jsx("li",{children:"No refresques ni cierres la página durante la evaluación."})]})]})]}),x&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(r2,{className:"w-4 h-4 mr-2"}),x]}),(n.asignatura==="Lectura"||n.asignatura==="Competencia Lectora")&&(()=>{var H,q;console.log("[DEBUG] Asignatura de Lectura detectada, buscando texto base");let K=n.textoBase||((H=n.preguntas.find(z=>z.textoBase))==null?void 0:H.textoBase)||((q=n.preguntas[0])==null?void 0:q.textoBase);return console.log("[DEBUG] Texto base encontrado:",K?"SÍ":"NO"),K||(console.log("[WARNING] Es una evaluación de Lectura pero no tiene texto base"),n.descripcion&&n.descripcion.length>50&&(K=`⚠️ NOTA: El texto de comprensión no está disponible. La evaluación podría estar incompleta. Comunícate con tu profesor.

`+n.descripcion,console.log("[DEBUG] Usando descripción como texto base alternativo"))),K?i.jsxs("div",{className:"mb-8 p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(vi,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"📖 Texto de Comprensión Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:i.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:i.jsx(Pce,{content:K,context:"simce-texto-base"})})})]}):null})(),i.jsx("div",{className:"space-y-6",children:n.preguntas.map((K,H)=>i.jsxs("div",{className:`p-4 rounded-lg border ${s[K.id]?"border-green-200 dark:border-green-700/50":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",H+1]}),K.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:K.alternativas.map(q=>i.jsxs("div",{className:`flex items-center p-2 rounded-md cursor-pointer ${s[K.id]===q.id?"bg-indigo-100 dark:bg-indigo-900/50":"hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,onClick:()=>P(K.id,q.id),children:[i.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center mr-3 ${s[K.id]===q.id?"border-indigo-600 dark:border-indigo-400":"border-slate-400 dark:border-slate-500"}`,children:s[K.id]===q.id&&i.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-600 dark:bg-indigo-400"})}),i.jsxs("div",{className:"font-bold mr-2",children:[q.id,")"]}),i.jsx("div",{children:q.texto})]},q.id))}),!s[K.id]&&i.jsx("div",{className:"mt-2 text-amber-600 dark:text-amber-400 text-sm",children:"Por favor selecciona una respuesta"})]},K.id))}),i.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[i.jsxs("div",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:[i.jsx(Wf,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"text-sm",children:y&&i.jsxs(i.Fragment,{children:["Tiempo transcurrido: ",U(Math.floor((Date.now()-y)/1e3))]})})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[Object.keys(s).length," de ",n.preguntas.length," respondidas"]}),i.jsx("button",{onClick:k,disabled:u||Object.keys(s).length!==n.preguntas.length,className:"py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:u?i.jsxs(i.Fragment,{children:[i.jsx(gm,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Enviando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(REe,{className:"w-4 h-4"}),i.jsx("span",{children:"Enviar respuestas"})]})})]})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones disponibles"}),S&&i.jsxs("div",{className:"mb-4 p-3 rounded-md bg-slate-50 dark:bg-slate-900/20 border border-slate-200 dark:border-slate-700 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("strong",{children:"Debug:"})," Detectadas ",i.jsx("b",{children:S.porCurso})," por curso, ",i.jsx("b",{children:S.porEstudiante})," por asignación directa, ",i.jsx("b",{children:S.total})," total."]}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(xF,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones asignadas para tu curso en este momento."})]}):i.jsx("div",{className:"space-y-4",children:t.map(K=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>L(K.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${K.asignatura==="Lectura"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:K.asignatura==="Lectura"?i.jsx(vi,{className:"w-6 h-6"}):i.jsx(oR,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:K.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:K.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:K.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[K.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(K.fechaAsignacion).toLocaleDateString()})]})]})]})},K.id))})]})})},opt=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(null),[s,o]=N.useState([]),[l,c]=N.useState(null),[u,d]=N.useState(!0),[f,h]=N.useState(null),[m,g]=N.useState("general"),[x,v]=N.useState("todos");N.useEffect(()=>{(async()=>{try{d(!0);const L=await _ce(e.id||"");r(L)}catch(L){console.error("Error al cargar evaluaciones:",L),h("No se pudieron cargar las evaluaciones")}finally{d(!1)}})()},[e]);const y=async j=>{try{d(!0),h(null);const L=await Ow(j);if(L){a(L);const P=await Sce(j);o(P);const k=Array.isArray(L.cursosAsignados)?L.cursosAsignados:[];if(k.length>0){const U=await kce(j,k[0]);U&&c(U)}else c(null)}}catch(L){console.error("Error al seleccionar evaluación:",L),h("No se pudo cargar la información de la evaluación seleccionada")}finally{d(!1)}},w=async()=>{console.log("Generando Excel...")},_=j=>{switch(j){case"Adecuado":return"text-green-600 dark:text-green-400";case"Elemental":return"text-yellow-600 dark:text-yellow-400";case"Insuficiente":return"text-red-600 dark:text-red-400";default:return"text-slate-600 dark:text-slate-400"}},F=j=>{switch(j){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}},B=()=>{if(!l)return null;const{porcentajeAdecuado:j,porcentajeElemental:L,porcentajeInsuficiente:P}=l;return i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Distribución por niveles de logro"}),i.jsxs("div",{className:"w-full h-8 rounded-md overflow-hidden flex mb-2",children:[i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 transition-all",style:{width:`${j}%`}}),i.jsx("div",{className:"h-full bg-yellow-500 dark:bg-yellow-600 transition-all",style:{width:`${L}%`}}),i.jsx("div",{className:"h-full bg-red-500 dark:bg-red-600 transition-all",style:{width:`${P}%`}})]}),i.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 dark:bg-green-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Adecuado: ",j.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-500 dark:bg-yellow-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Elemental: ",L.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 dark:bg-red-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Insuficiente: ",P.toFixed(1),"%"]})]})]})]})},T=()=>l?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/50",children:i.jsx(ro,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estudiantes evaluados"}),i.jsx("div",{className:"text-2xl font-bold",children:l.totalEstudiantes})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-indigo-100 dark:bg-indigo-900/50",children:i.jsx(pte,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Promedio de logro"}),i.jsxs("div",{className:"text-2xl font-bold",children:[l.promedioLogro.toFixed(1),"%"]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/50",children:i.jsx(Dwe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Nivel predominante"}),i.jsx("div",{className:`text-2xl font-bold ${_(l.nivelPredominante)}`,children:l.nivelPredominante})]})]})})]}),B(),i.jsxs("div",{className:"mt-8",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estadísticas por eje temático"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"space-y-4",children:l.porEjeTematico.map((j,L)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-medium",children:j.eje}),i.jsxs("span",{className:"text-sm",children:[j.promedio.toFixed(1),"%"]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full",children:i.jsx("div",{className:`h-full rounded-full ${j.promedio>=80?"bg-green-500":j.promedio>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${j.promedio}%`}})})]},L))})})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(gm,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}),C=()=>{const j=s.filter(L=>x==="todos"?!0:L.nivelLogro.toLowerCase()===x);return i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Resultados por estudiante"}),i.jsx("div",{className:"flex space-x-2",children:i.jsxs("select",{className:"text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 px-2 py-1",value:x,onChange:L=>v(L.target.value),children:[i.jsx("option",{value:"todos",children:"Todos los niveles"}),i.jsx("option",{value:"adecuado",children:"Adecuado"}),i.jsx("option",{value:"elemental",children:"Elemental"}),i.jsx("option",{value:"insuficiente",children:"Insuficiente"})]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Curso"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"% Logro"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Nivel"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Correctas"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Tiempo"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Fecha"})]})}),i.jsx("tbody",{children:j.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-slate-600 dark:text-slate-400",children:"No hay datos para mostrar con los filtros seleccionados"})}):j.map(L=>{var P;return i.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-3",children:L.estudianteNombre||"Desconocido"}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:((P=L.estudiante)==null?void 0:P.curso)||"-"}),i.jsxs("td",{className:"px-4 py-3 font-semibold",children:[L.porcentajeLogro.toFixed(1),"%"]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${F(L.nivelLogro)}`,children:L.nivelLogro})}),i.jsxs("td",{className:"px-4 py-3",children:[L.respuestasCorrectas||"-","/",(n==null?void 0:n.preguntas.length)||"-"]}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:L.tiempoRealizacion?`${Math.floor(L.tiempoRealizacion/60)}:${(L.tiempoRealizacion%60).toString().padStart(2,"0")}`:"-"}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:new Date(L.fechaRealizacion).toLocaleDateString()})]},L.id)})})]})})})]})},S=()=>!n||!(l!=null&&l.porPregunta)||!l.porPregunta.length?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(gm,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}):i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Análisis por pregunta"}),i.jsx("div",{className:"space-y-6",children:l.porPregunta.map((j,L)=>{var k;const P=n.preguntas.find(U=>U.id===j.preguntaId);return P?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",L+1]}),P.enunciado]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:"Eje temático:"})," ",P.ejeTematico||"No especificado"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Porcentaje de acierto"}),i.jsxs("div",{className:`text-xl font-bold ${j.porcentajeAcierto>=80?"text-green-600 dark:text-green-400":j.porcentajeAcierto>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[j.porcentajeAcierto.toFixed(1),"%"]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full mb-2",children:i.jsx("div",{className:`h-full rounded-full ${j.porcentajeAcierto>=80?"bg-green-500":j.porcentajeAcierto>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${j.porcentajeAcierto}%`}})})}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Distribución de respuestas"}),i.jsx("div",{className:"space-y-2",children:j.distribucionRespuestas.map(U=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs ${U.alternativaId===P.respuestaCorrecta?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"} mr-2`,children:U.alternativaId}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-sm overflow-hidden",children:i.jsx("div",{className:`h-full ${U.alternativaId===P.respuestaCorrecta?"bg-green-500 dark:bg-green-600":"bg-red-500 dark:bg-red-600"}`,style:{width:`${U.porcentaje}%`}})})}),i.jsxs("div",{className:"ml-2 w-10 text-right text-sm",children:[U.porcentaje.toFixed(0),"%"]})]},U.alternativaId))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Alternativa correcta"}),i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300",children:i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"font-bold mr-2",children:[P.respuestaCorrecta,")"]}),i.jsx("div",{children:(k=P.alternativas.find(U=>U.id===P.respuestaCorrecta))==null?void 0:k.texto})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h5",{className:"text-sm font-semibold mb-1",children:"Dificultad"}),i.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm ${j.porcentajeAcierto>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":j.porcentajeAcierto>=50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:j.porcentajeAcierto>=80?"Baja":j.porcentajeAcierto>=50?"Media":"Alta"})]})]})]})]},j.preguntaId):null})})]});return u?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(gm,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando información..."})]}):i.jsx("div",{className:"space-y-6",children:n?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-200 dark:border-slate-700 pb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:n.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[n.asignatura," • ",s.length," estudiantes evaluados"]}),Array.isArray(n.cursosAsignados)&&n.cursosAsignados.length>0&&i.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[i.jsx("span",{className:"font-semibold text-xs text-indigo-700 dark:text-indigo-300",children:"Cursos asignados:"}),n.cursosAsignados.map((j,L)=>i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-0.5 px-2 rounded-full text-xs",children:j},j+L))]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:w,className:"py-2 px-3 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 text-sm",children:[i.jsx(jh,{className:"w-4 h-4"}),i.jsx("span",{children:"Exportar"})]}),i.jsx("button",{onClick:()=>a(null),className:"py-2 px-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 text-sm",children:"Volver"})]})]}),f&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(r2,{className:"w-4 h-4 mr-2"}),f]}),i.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-6",children:[i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${m==="general"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>g("general"),children:"Vista general"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${m==="porEstudiante"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>g("porEstudiante"),children:"Por estudiante"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${m==="porPregunta"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>g("porPregunta"),children:"Por pregunta"})]}),m==="general"&&T(),m==="porEstudiante"&&C(),m==="porPregunta"&&S()]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones para analizar"}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(am,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones SIMCE creadas aún."})]}):i.jsx("div",{className:"space-y-4",children:t.map(j=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>y(j.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${j.asignatura==="Lectura"||j.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:j.asignatura==="Lectura"||j.asignatura==="Competencia Lectora"?i.jsx(vi,{className:"w-6 h-6"}):i.jsx(oR,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:j.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:j.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:j.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[j.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(j.fechaCreacion).toLocaleDateString()})]})]})]})},j.id))})]})})},m5=({currentUser:e})=>{const[t,r]=N.useState("generador"),n=(e==null?void 0:e.profile)===Gt.PROFESORADO||(e==null?void 0:e.profile)===Gt.SUBDIRECCION||(e==null?void 0:e.profile)===Gt.COORDINACION_TP,a=(e==null?void 0:e.profile)===Gt.ESTUDIANTE;return N.useEffect(()=>{a&&r("evaluacion")},[a]),i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación SIMCE"})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex",children:[n&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>r("generador"),className:`flex items-center gap-2 px-4 py-3 ${t==="generador"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(j_,{className:"w-4 h-4"}),i.jsx("span",{children:"Generador de Preguntas"})]}),i.jsxs("button",{onClick:()=>r("resultados"),className:`flex items-center gap-2 px-4 py-3 ${t==="resultados"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(qc,{className:"w-4 h-4"}),i.jsx("span",{children:"Resultados"})]})]}),a&&i.jsxs("button",{onClick:()=>r("evaluacion"),className:`flex items-center gap-2 px-4 py-3 ${t==="evaluacion"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(Rv,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Evaluaciones"})]})]})}),i.jsxs("div",{className:"p-6",children:[n&&t==="generador"&&i.jsx(WYe,{currentUser:e}),n&&t==="resultados"&&i.jsx(opt,{currentUser:e}),a&&t==="evaluacion"&&i.jsx(ipt,{currentUser:e}),!n&&!a&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"No tienes permisos para acceder a este módulo."})})]})]})]})},lpt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},cpt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:o})=>{const l=e.profile,c=N.useMemo(()=>{const T=Awe[l]||[];return l!==Gt.ESTUDIANTE?T:T.filter(C=>{if(C.name==="Asistencia a Empresa"){const S=lpt(e.curso||"");return S.startsWith("3º")||S.startsWith("4º")}return!0})},[l,e.curso]),[u,d]=N.useState(null),[f,h]=N.useState(!1),[m,g]=N.useState(!1),[x,v]=N.useState({planificacion:!0,evaluacion:!0,reflexion:!0,herramientas:!0,sd_gestion:!0,sd_planificacion:!0,sd_reflexion:!0,sd_herramientas:!0}),y=N.useRef([]);N.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[l,c]);const w=N.useCallback(T=>{d(T),window.innerWidth<768&&h(!1)},[]),_=N.useCallback(T=>{const C=c.find(S=>S.name===T);C&&w(C)},[c,w]),F=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:i.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:i.jsx(Yye,{className:"w-5 h-5"})})}),!m&&i.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),i.jsx("button",{type:"button",onClick:()=>g(T=>!T),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:m?"Expandir":"Colapsar",children:m?i.jsx(lR,{className:"w-5 h-5 text-slate-200"}):i.jsx(t2,{className:"w-5 h-5 text-slate-200"})})]}),i.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",children:l===Gt.PROFESORADO&&!m?i.jsxs("div",{className:"space-y-3",children:[[{id:"planificacion",title:"Planificación",items:["Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión"]},{id:"evaluacion",title:"Evaluación",items:["Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE"]},{id:"reflexion",title:"Reflexión",items:["Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional"]},{id:"herramientas",title:"Herramientas",items:["Muro de Anuncios","Mensajería Interna","Generador de Actas"]}].map(T=>{const C=!!x[T.id],S=T.items.map(j=>c.find(L=>L.name===j)).filter(Boolean);return S.length===0?null:i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(j=>({...j,[T.id]:!j[T.id]})),"aria-expanded":C,children:[i.jsx("span",{className:"text-sm font-semibold text-white/90",children:T.title}),i.jsx(EH,{className:`w-4 h-4 text-white/70 transition-transform ${C?"rotate-180":""}`})]}),C&&i.jsx("div",{className:"px-2 pb-2",children:S.map(j=>{const L=(u==null?void 0:u.name)===j.name;return i.jsxs("button",{onClick:()=>w(j),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:j.name,children:[i.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:j.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:j.name})]},j.name)})})]},T.id)}),c.filter(T=>!["Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión","Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE","Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(T.name)).length>0&&i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-white/90",children:"Otros"}),i.jsx("div",{className:"px-2 pb-2",children:c.filter(T=>!["Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión","Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE","Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(T.name)).map(T=>{const C=(u==null?void 0:u.name)===T.name;return i.jsxs("button",{onClick:()=>w(T),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                            ${C?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:T.name,children:[i.jsx("span",{className:`shrink-0 ${C?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:T.name})]},T.name)})})]})]}):l===Gt.SUBDIRECCION&&!m?i.jsxs("div",{className:"space-y-3",children:[[{id:"sd_gestion",title:"Gestión",items:["Administración","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas"]},{id:"sd_planificacion",title:"Planificación",items:["Seguimiento Curricular","Interdisciplinario","Inclusión"]},{id:"sd_reflexion",title:"Reflexión",items:["Acompañamiento docente","Análisis Taxonómico","Dashboard"]},{id:"sd_herramientas",title:"Herramientas",items:["Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"]}].map(T=>{const C=!!x[T.id],S=T.items.map(j=>c.find(L=>L.name===j)).filter(Boolean);return S.length===0?null:i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(j=>({...j,[T.id]:!j[T.id]})),"aria-expanded":C,children:[i.jsx("span",{className:"text-sm font-semibold text-white/90",children:T.title}),i.jsx(EH,{className:`w-4 h-4 text-white/70 transition-transform ${C?"rotate-180":""}`})]}),C&&i.jsx("div",{className:"px-2 pb-2",children:S.map(j=>{const L=(u==null?void 0:u.name)===j.name;return i.jsxs("button",{onClick:()=>w(j),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:j.name,children:[i.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:j.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:j.name})]},j.name)})})]},T.id)}),c.filter(T=>!["Administración","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas","Seguimiento Curricular","Interdisciplinario","Inclusión","Acompañamiento docente","Análisis Taxonómico","Dashboard","Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(T.name)).length>0&&i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-white/90",children:"Otros"}),i.jsx("div",{className:"px-2 pb-2",children:c.filter(T=>!["Administración","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas","Seguimiento Curricular","Interdisciplinario","Inclusión","Acompañamiento docente","Análisis Taxonómico","Dashboard","Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(T.name)).map(T=>{const C=(u==null?void 0:u.name)===T.name;return i.jsxs("button",{onClick:()=>w(T),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                            ${C?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:T.name,children:[i.jsx("span",{className:`shrink-0 ${C?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:T.name})]},T.name)})})]})]}):i.jsx("div",{className:"space-y-1",onKeyDown:T=>{var S,j,L;const C=y.current.findIndex(P=>P===document.activeElement);if(T.key==="ArrowDown"){T.preventDefault();const P=Math.min(C===-1?0:C+1,y.current.length-1);(S=y.current[P])==null||S.focus()}else if(T.key==="ArrowUp"){T.preventDefault();const P=Math.max(C===-1?0:C-1,0);(j=y.current[P])==null||j.focus()}else T.key==="Enter"&&C>=0&&((L=y.current[C])==null||L.click())},children:c.map((T,C)=>{const S=(u==null?void 0:u.name)===T.name;return i.jsxs("button",{ref:j=>y.current[C]=j,onClick:()=>w(T),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                    ${S?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:m?T.name:void 0,children:[i.jsx("span",{className:`shrink-0 ${S?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),!m&&i.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:T.name})]},T.name)})})})]}),B=()=>{if(!u)return i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return i.jsx(KKe,{profile:l});if(u.name==="Muro de Anuncios")return i.jsx(ZKe,{currentUser:e});if(u.name==="Mensajería Interna")return i.jsx(uet,{currentUser:e,refreshUnreadCount:o});if(u.name==="Generador de Actas")return i.jsx(oWe,{});if(u.name==="Desarrollo Profesional")return i.jsx(J0t,{currentUser:e});if(l===Gt.SUBDIRECCION){if(u.name==="Dashboard")return i.jsx(M6e,{currentUser:e});if(u.name==="Administración")return i.jsx(lJe,{});if(u.name==="Seguimiento Curricular")return i.jsx(Xot,{currentUser:e});if(u.name==="Acompañamiento docente")return i.jsx(tet,{currentUser:e});if(u.name==="Análisis Taxonómico")return i.jsx(cX,{currentUser:e});if(u.name==="SIMCE")return i.jsx(m5,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(gW,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return i.jsx(O6e,{currentUser:e});if(u.name==="Crear horarios")return i.jsx(K6e,{});if(u.name==="Seguimiento de acciones pedagógicas")return i.jsx(EKe,{});if(u.name==="Inclusión")return i.jsx(AW,{currentUser:e})}if(l===Gt.PROFESORADO){if(u.name==="Planificación")return i.jsx(UKe,{currentUser:e});if(u.name==="Mis Acompañamientos")return i.jsx(jot,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return i.jsx(mot,{});if(u.name==="Análisis Taxonómico")return i.jsx(cX,{currentUser:e});if(u.name==="SIMCE")return i.jsx(m5,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(gW,{});if(u.name==="Inclusión")return i.jsx(AW,{currentUser:e});if(u.name==="Actividades Remotas")return i.jsx(LJe,{});if(u.name==="Evaluación de Aprendizajes")return i.jsx(sJe,{});if(u.name==="Evaluaciones Formativas")return i.jsx(PZe,{currentUser:e});if(u.name==="Evaluación de Competencias")return i.jsx(tpt,{currentUser:e})}if(l===Gt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return i.jsx(xJe,{});if(u.name==="Asistencia Dual")return i.jsx(bZe,{});if(u.name==="Pañol")return i.jsx(Fet,{});if(u.name==="SIMCE")return i.jsx(m5,{currentUser:e});if(u.name==="Gestión de Empresas")return i.jsx(L0t,{});if(u.name==="Alternancia TP")return i.jsx(Bmt,{})}if(l===Gt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return i.jsx(YJe,{currentUser:e});if(u.name==="Evaluación Formativa")return i.jsx(wot,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return i.jsx(Sot,{currentUser:e});if(u.name==="SIMCE")return i.jsx(m5,{currentUser:e});if(u.name==="Asistencia a Empresa")return i.jsx(fZe,{currentUser:e})}return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),i.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",i.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return i.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[i.jsx(pNe,{currentUser:e,onLogout:t,onNavigate:_,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(T=>!T),unreadMessagesCount:s,refreshUnreadCount:o}),i.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&i.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),i.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:i.jsx(F,{})}),i.jsx("main",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:i.jsx(AEe,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&i.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),i.jsx("div",{className:"min-h-[60vh]",children:B()})]})})]})]})},upt=({onSelectProfile:e,isAdminView:t=!1})=>i.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[i.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),i.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),i.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(iR,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),i.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:fwe.map(r=>i.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[i.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),i.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),i.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),dpt=()=>{const[e,t]=N.useState(null),[r,n]=N.useState(null),[a,s]=N.useState(!0),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState(null),[h,m]=N.useState(null);N.useEffect(()=>{const F=new URLSearchParams(window.location.search),B=F.get("auth"),T=F.get("userId");F.get("module"),B==="success"&&T&&(m("¡Autorización de Google Slides completada exitosamente!"),setTimeout(()=>{const C=window.location.pathname;window.history.replaceState({},document.title,C),m(null)},3e3))},[]),N.useEffect(()=>{const F=WJ(ll,async B=>{if(t(B),B)try{const T=await dte(B.email);T?(n(T),T.profile===Gt.SUBDIRECCION&&u(!0)):(l("Usuario no encontrado en la base de datos. Contacte al administrador."),await oB())}catch{l("Error al conectar con la base de datos."),await oB()}else n(null),f(null),u(!1),l(null);s(!1)});return()=>F()},[]);const g=async(F,B)=>{if(l(null),!F.trim()||!B.trim()){l("Por favor ingrese email y contraseña");return}try{await qye(F.trim(),B)}catch(T){switch(T.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":l("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":l("Error de conexión. Verifique su internet.");break;default:l("Ocurrió un error al intentar iniciar sesión.")}}},x=async F=>{try{await Kye(F)}catch(B){console.error("Error al enviar email de recuperación:",B)}},v=F=>{f(F),u(!1)},y=()=>{u(!0),f(null)},w=async()=>{try{await oB()}catch(F){console.error("Error al cerrar sesión:",F)}};if(a)return i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(iR,{})}),i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return i.jsx(ywe,{onLoginAttempt:g,onForgotPasswordRequest:x,error:o});if(c&&r.profile===Gt.SUBDIRECCION)return i.jsx(upt,{onSelectProfile:v,isAdminView:!0});const _=d||r.profile;return i.jsxs(i.Fragment,{children:[h&&i.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white p-4 rounded-lg shadow-lg flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:"✅"}),i.jsx("span",{children:h})]}),i.jsx(cpt,{currentUser:{...r,profile:_},onLogout:w,onChangeProfile:r.profile===Gt.SUBDIRECCION?y:void 0,canChangeProfile:r.profile===Gt.SUBDIRECCION})]})},MAe=document.getElementById("root");if(!MAe)throw new Error("Could not find root element to mount to");const fpt=r0e.createRoot(MAe);fpt.render(i.jsx(st.StrictMode,{children:i.jsx(dpt,{})}));export{ga as _,hpt as c,Bl as g};
